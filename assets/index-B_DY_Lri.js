const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-D5XngYq6.js","assets/if-defined-62Gt0pMX.js","assets/index-DBbERg1u.js","assets/index-D0lWJGn5.js","assets/ref-CQIFP1VR.js","assets/index-CHVo-lJ3.js","assets/index-CuBy9ERl.js","assets/index-CEkwjqRU.js","assets/index-CePNhovu.js","assets/index-BB7sjgZq.js","assets/index-F569Go61.js","assets/index-C2dnLsuG.js","assets/email-CZ0d_cjC.js","assets/index-BkUZ9nTa.js","assets/socials-CATFVkNw.js","assets/index-CdbwU0Gw.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-BArtKhhW.js","assets/index-DvDEnCg_.js","assets/index-QLl2zkKp.js","assets/index-bTH3DMHM.js","assets/swaps-BAq74lDe.js","assets/index-D3ZejYLB.js","assets/index-CwG8NtSC.js","assets/index-Ox-MswuF.js","assets/send-B8sehWPX.js","assets/index-Be7Yrvxw.js","assets/index-DeqTLHne.js","assets/receive-CmyMxGCI.js","assets/index-C0es33pq.js","assets/onramp-C8jGrGO3.js","assets/index-C3Tz1oIv.js","assets/index-gTVxtD3L.js","assets/index-Ckgab1ei.js","assets/transactions-DrYzBhc7.js","assets/index-D5lx0rTI.js","assets/index-DnF4L0xA.js","assets/index-81KJRF6J.js","assets/index-KS5xB8XA.js","assets/index-DmMGaFb-.js","assets/w3m-modal-Bc2lN8pB.js"])))=>i.map(i=>d[i]);
var iue=Object.defineProperty;var UF=t=>{throw TypeError(t)};var oue=(t,e,n)=>e in t?iue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var le=(t,e,n)=>oue(t,typeof e!="symbol"?e+"":e,n),bO=(t,e,n)=>e.has(t)||UF("Cannot "+n);var R=(t,e,n)=>(bO(t,e,"read from private field"),n?n.call(t):e.get(t)),ne=(t,e,n)=>e.has(t)?UF("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),q=(t,e,n,r)=>(bO(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ie=(t,e,n)=>(bO(t,e,"access private method"),n);var Qf=(t,e,n,r)=>({set _(s){q(t,e,s,n)},get _(){return R(t,e,r)}});function aue(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var ei=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ch(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function aI(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var jK={exports:{}},t2={},WK={exports:{}},jn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cI=Symbol.for("react.element"),cue=Symbol.for("react.portal"),lue=Symbol.for("react.fragment"),uue=Symbol.for("react.strict_mode"),due=Symbol.for("react.profiler"),hue=Symbol.for("react.provider"),fue=Symbol.for("react.context"),pue=Symbol.for("react.forward_ref"),gue=Symbol.for("react.suspense"),mue=Symbol.for("react.memo"),yue=Symbol.for("react.lazy"),$F=Symbol.iterator;function wue(t){return t===null||typeof t!="object"?null:(t=$F&&t[$F]||t["@@iterator"],typeof t=="function"?t:null)}var zK={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},HK=Object.assign,GK={};function pC(t,e,n){this.props=t,this.context=e,this.refs=GK,this.updater=n||zK}pC.prototype.isReactComponent={};pC.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};pC.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function qK(){}qK.prototype=pC.prototype;function S6(t,e,n){this.props=t,this.context=e,this.refs=GK,this.updater=n||zK}var I6=S6.prototype=new qK;I6.constructor=S6;HK(I6,pC.prototype);I6.isPureReactComponent=!0;var FF=Array.isArray,VK=Object.prototype.hasOwnProperty,N6={current:null},KK={key:!0,ref:!0,__self:!0,__source:!0};function YK(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)VK.call(e,r)&&!KK.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:cI,type:t,key:i,ref:o,props:s,_owner:N6.current}}function bue(t,e){return{$$typeof:cI,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function x6(t){return typeof t=="object"&&t!==null&&t.$$typeof===cI}function vue(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var jF=/\/+/g;function vO(t,e){return typeof t=="object"&&t!==null&&t.key!=null?vue(""+t.key):e.toString(36)}function Kx(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case cI:case cue:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+vO(o,0):r,FF(s)?(n="",t!=null&&(n=t.replace(jF,"$&/")+"/"),Kx(s,e,n,"",function(l){return l})):s!=null&&(x6(s)&&(s=bue(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(jF,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",FF(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+vO(i,a);o+=Kx(i,e,n,c,s)}else if(c=wue(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+vO(i,a++),o+=Kx(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function bN(t,e,n){if(t==null)return t;var r=[],s=0;return Kx(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Eue(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wa={current:null},Yx={transition:null},Cue={ReactCurrentDispatcher:wa,ReactCurrentBatchConfig:Yx,ReactCurrentOwner:N6};function QK(){throw Error("act(...) is not supported in production builds of React.")}jn.Children={map:bN,forEach:function(t,e,n){bN(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return bN(t,function(){e++}),e},toArray:function(t){return bN(t,function(e){return e})||[]},only:function(t){if(!x6(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};jn.Component=pC;jn.Fragment=lue;jn.Profiler=due;jn.PureComponent=S6;jn.StrictMode=uue;jn.Suspense=gue;jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cue;jn.act=QK;jn.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=HK({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=N6.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)VK.call(e,c)&&!KK.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:cI,type:t.type,key:s,ref:i,props:r,_owner:o}};jn.createContext=function(t){return t={$$typeof:fue,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:hue,_context:t},t.Consumer=t};jn.createElement=YK;jn.createFactory=function(t){var e=YK.bind(null,t);return e.type=t,e};jn.createRef=function(){return{current:null}};jn.forwardRef=function(t){return{$$typeof:pue,render:t}};jn.isValidElement=x6;jn.lazy=function(t){return{$$typeof:yue,_payload:{_status:-1,_result:t},_init:Eue}};jn.memo=function(t,e){return{$$typeof:mue,type:t,compare:e===void 0?null:e}};jn.startTransition=function(t){var e=Yx.transition;Yx.transition={};try{t()}finally{Yx.transition=e}};jn.unstable_act=QK;jn.useCallback=function(t,e){return wa.current.useCallback(t,e)};jn.useContext=function(t){return wa.current.useContext(t)};jn.useDebugValue=function(){};jn.useDeferredValue=function(t){return wa.current.useDeferredValue(t)};jn.useEffect=function(t,e){return wa.current.useEffect(t,e)};jn.useId=function(){return wa.current.useId()};jn.useImperativeHandle=function(t,e,n){return wa.current.useImperativeHandle(t,e,n)};jn.useInsertionEffect=function(t,e){return wa.current.useInsertionEffect(t,e)};jn.useLayoutEffect=function(t,e){return wa.current.useLayoutEffect(t,e)};jn.useMemo=function(t,e){return wa.current.useMemo(t,e)};jn.useReducer=function(t,e,n){return wa.current.useReducer(t,e,n)};jn.useRef=function(t){return wa.current.useRef(t)};jn.useState=function(t){return wa.current.useState(t)};jn.useSyncExternalStore=function(t,e,n){return wa.current.useSyncExternalStore(t,e,n)};jn.useTransition=function(){return wa.current.useTransition()};jn.version="18.3.1";WK.exports=jn;var G=WK.exports;const zc=ch(G),_ue=aue({__proto__:null,default:zc},[G]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aue=G,Sue=Symbol.for("react.element"),Iue=Symbol.for("react.fragment"),Nue=Object.prototype.hasOwnProperty,xue=Aue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Tue={key:!0,ref:!0,__self:!0,__source:!0};function JK(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Nue.call(e,r)&&!Tue.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Sue,type:t,key:i,ref:o,props:s,_owner:xue.current}}t2.Fragment=Iue;t2.jsx=JK;t2.jsxs=JK;jK.exports=t2;var b=jK.exports,WF={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZK={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const We=function(t,e){if(!t)throw gC(e)},gC=function(t){return new Error("Firebase Database ("+ZK.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XK=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Rue=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},T6={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(XK(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Rue(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||d==null)throw new kue;const h=i<<2|a>>4;if(r.push(h),l!==64){const f=a<<4&240|l>>2;if(r.push(f),d!==64){const p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class kue extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eY=function(t){const e=XK(t);return T6.encodeByteArray(e,!0)},KT=function(t){return eY(t).replace(/\./g,"")},zM=function(t){try{return T6.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pue(t){return tY(void 0,t)}function tY(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Oue(n)||(t[n]=tY(t[n],e[n]));return t}function Oue(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Due(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mue=()=>Due().__FIREBASE_DEFAULTS__,Bue=()=>{if(typeof process>"u"||typeof WF>"u")return;const t=WF.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Lue=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zM(t[1]);return e&&JSON.parse(e)},nY=()=>{try{return Mue()||Bue()||Lue()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Uue=t=>{var e,n;return(n=(e=nY())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},$ue=t=>{const e=Uue(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},rY=()=>{var t;return(t=nY())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fue(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[KT(JSON.stringify(n)),KT(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jue(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sY(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jue())}function Wue(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zue(){return ZK.NODE_ADMIN===!0}function Hue(){try{return typeof indexedDB=="object"}catch{return!1}}function Gue(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const que="FirebaseError";class lI extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=que,Object.setPrototypeOf(this,lI.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,iY.prototype.create)}}class iY{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Vue(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new lI(s,a,r)}}function Vue(t,e){return t.replace(Kue,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Kue=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(t){return JSON.parse(t)}function vi(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oY=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Z_(zM(i[0])||""),n=Z_(zM(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},Yue=function(t){const e=oY(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Que=function(t){const e=oY(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function vE(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function zF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function YT(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function HM(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(HF(i)&&HF(o)){if(!HM(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function HF(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jue(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zue{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^i&(o^a),u=1518500249):(l=i^o^a,u=1859775393):d<60?(l=i&o|a&(i|o),u=2400959708):(l=i^o^a,u=3395469782);const h=(s<<5|s>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function R6(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xue=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,We(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},r2=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(t){return t&&t._delegate?t._delegate:t}class X_{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ede{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new n2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nde(e))try{this.getOrInitializeService({instanceIdentifier:qm})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=qm){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qm){return this.instances.has(e)}getOptions(e=qm){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tde(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qm){return this.component?this.component.multipleInstances?e:qm:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tde(t){return t===qm?void 0:t}function nde(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rde{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ede(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rs;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(rs||(rs={}));const sde={debug:rs.DEBUG,verbose:rs.VERBOSE,info:rs.INFO,warn:rs.WARN,error:rs.ERROR,silent:rs.SILENT},ide=rs.INFO,ode={[rs.DEBUG]:"log",[rs.VERBOSE]:"log",[rs.INFO]:"info",[rs.WARN]:"warn",[rs.ERROR]:"error"},ade=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=ode[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class aY{constructor(e){this.name=e,this._logLevel=ide,this._logHandler=ade,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rs))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sde[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rs.DEBUG,...e),this._logHandler(this,rs.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rs.VERBOSE,...e),this._logHandler(this,rs.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rs.INFO,...e),this._logHandler(this,rs.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rs.WARN,...e),this._logHandler(this,rs.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rs.ERROR,...e),this._logHandler(this,rs.ERROR,...e)}}const cde=(t,e)=>e.some(n=>t instanceof n);let GF,qF;function lde(){return GF||(GF=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ude(){return qF||(qF=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cY=new WeakMap,GM=new WeakMap,lY=new WeakMap,EO=new WeakMap,k6=new WeakMap;function dde(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ng(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&cY.set(n,t)}).catch(()=>{}),k6.set(e,t),e}function hde(t){if(GM.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});GM.set(t,e)}let qM={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return GM.get(t);if(e==="objectStoreNames")return t.objectStoreNames||lY.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ng(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fde(t){qM=t(qM)}function pde(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(CO(this),e,...n);return lY.set(r,e.sort?e.sort():[e]),Ng(r)}:ude().includes(t)?function(...e){return t.apply(CO(this),e),Ng(cY.get(this))}:function(...e){return Ng(t.apply(CO(this),e))}}function gde(t){return typeof t=="function"?pde(t):(t instanceof IDBTransaction&&hde(t),cde(t,lde())?new Proxy(t,qM):t)}function Ng(t){if(t instanceof IDBRequest)return dde(t);if(EO.has(t))return EO.get(t);const e=gde(t);return e!==t&&(EO.set(t,e),k6.set(e,t)),e}const CO=t=>k6.get(t);function mde(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ng(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Ng(o.result),c.oldVersion,c.newVersion,Ng(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const yde=["get","getKey","getAll","getAllKeys","count"],wde=["put","add","delete","clear"],_O=new Map;function VF(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_O.get(e))return _O.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=wde.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||yde.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return _O.set(e,i),i}fde(t=>({...t,get:(e,n,r)=>VF(e,n)||t.get(e,n,r),has:(e,n)=>!!VF(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bde{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vde(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function vde(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const VM="@firebase/app",KF="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=new aY("@firebase/app"),Ede="@firebase/app-compat",Cde="@firebase/analytics-compat",_de="@firebase/analytics",Ade="@firebase/app-check-compat",Sde="@firebase/app-check",Ide="@firebase/auth",Nde="@firebase/auth-compat",xde="@firebase/database",Tde="@firebase/data-connect",Rde="@firebase/database-compat",kde="@firebase/functions",Pde="@firebase/functions-compat",Ode="@firebase/installations",Dde="@firebase/installations-compat",Mde="@firebase/messaging",Bde="@firebase/messaging-compat",Lde="@firebase/performance",Ude="@firebase/performance-compat",$de="@firebase/remote-config",Fde="@firebase/remote-config-compat",jde="@firebase/storage",Wde="@firebase/storage-compat",zde="@firebase/firestore",Hde="@firebase/vertexai-preview",Gde="@firebase/firestore-compat",qde="firebase",Vde="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM="[DEFAULT]",Kde={[VM]:"fire-core",[Ede]:"fire-core-compat",[_de]:"fire-analytics",[Cde]:"fire-analytics-compat",[Sde]:"fire-app-check",[Ade]:"fire-app-check-compat",[Ide]:"fire-auth",[Nde]:"fire-auth-compat",[xde]:"fire-rtdb",[Tde]:"fire-data-connect",[Rde]:"fire-rtdb-compat",[kde]:"fire-fn",[Pde]:"fire-fn-compat",[Ode]:"fire-iid",[Dde]:"fire-iid-compat",[Mde]:"fire-fcm",[Bde]:"fire-fcm-compat",[Lde]:"fire-perf",[Ude]:"fire-perf-compat",[$de]:"fire-rc",[Fde]:"fire-rc-compat",[jde]:"fire-gcs",[Wde]:"fire-gcs-compat",[zde]:"fire-fst",[Gde]:"fire-fst-compat",[Hde]:"fire-vertex","fire-js":"fire-js",[qde]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=new Map,Yde=new Map,YM=new Map;function YF(t,e){try{t.container.addComponent(e)}catch(n){Af.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function QT(t){const e=t.name;if(YM.has(e))return Af.debug(`There were multiple attempts to register component ${e}.`),!1;YM.set(e,t);for(const n of eA.values())YF(n,t);for(const n of Yde.values())YF(n,t);return!0}function Qde(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jde={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xg=new iY("app","Firebase",Jde);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zde{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new X_("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xg.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xde=Vde;function uY(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:KM,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw xg.create("bad-app-name",{appName:String(s)});if(n||(n=rY()),!n)throw xg.create("no-options");const i=eA.get(s);if(i){if(HM(n,i.options)&&HM(r,i.config))return i;throw xg.create("duplicate-app",{appName:s})}const o=new rde(s);for(const c of YM.values())o.addComponent(c);const a=new Zde(n,r,o);return eA.set(s,a),a}function dY(t=KM){const e=eA.get(t);if(!e&&t===KM&&rY())return uY();if(!e)throw xg.create("no-app",{appName:t});return e}function ehe(){return Array.from(eA.values())}function Zb(t,e,n){var r;let s=(r=Kde[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Af.warn(a.join(" "));return}QT(new X_(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const the="firebase-heartbeat-database",nhe=1,tA="firebase-heartbeat-store";let AO=null;function hY(){return AO||(AO=mde(the,nhe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(tA)}catch(n){console.warn(n)}}}}).catch(t=>{throw xg.create("idb-open",{originalErrorMessage:t.message})})),AO}async function rhe(t){try{const n=(await hY()).transaction(tA),r=await n.objectStore(tA).get(fY(t));return await n.done,r}catch(e){if(e instanceof lI)Af.warn(e.message);else{const n=xg.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Af.warn(n.message)}}}async function QF(t,e){try{const r=(await hY()).transaction(tA,"readwrite");await r.objectStore(tA).put(e,fY(t)),await r.done}catch(n){if(n instanceof lI)Af.warn(n.message);else{const r=xg.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Af.warn(r.message)}}}function fY(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const she=1024,ihe=30*24*60*60*1e3;class ohe{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new che(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=JF();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=ihe}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Af.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=JF(),{heartbeatsToSend:r,unsentEntries:s}=ahe(this._heartbeatsCache.heartbeats),i=KT(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Af.warn(n),""}}}function JF(){return new Date().toISOString().substring(0,10)}function ahe(t,e=she){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),ZF(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ZF(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class che{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hue()?Gue().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rhe(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return QF(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return QF(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ZF(t){return KT(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lhe(t){QT(new X_("platform-logger",e=>new bde(e),"PRIVATE")),QT(new X_("heartbeat",e=>new ohe(e),"PRIVATE")),Zb(VM,KF,t),Zb(VM,KF,"esm2017"),Zb("fire-js","")}lhe("");var uhe="firebase",dhe="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zb(uhe,dhe,"app");var XF={};const ej="@firebase/database",tj="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pY="";function hhe(t){pY=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fhe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),vi(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Z_(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class phe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Uf(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gY=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new fhe(e)}}catch{}return new phe},gy=gY("localStorage"),ghe=gY("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=new aY("@firebase/database"),mhe=function(){let t=1;return function(){return t++}}(),mY=function(t){const e=Xue(t),n=new Zue;n.update(e);const r=n.digest();return T6.encodeByteArray(r)},uI=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=uI.apply(null,r):typeof r=="object"?e+=vi(r):e+=r,e+=" "}return e};let g_=null,nj=!0;const yhe=function(t,e){We(!0,"Can't turn on custom loggers persistently."),Xb.logLevel=rs.VERBOSE,g_=Xb.log.bind(Xb)},Lo=function(...t){if(nj===!0&&(nj=!1,g_===null&&ghe.get("logging_enabled")===!0&&yhe()),g_){const e=uI.apply(null,t);g_(e)}},dI=function(t){return function(...e){Lo(t,...e)}},QM=function(...t){const e="FIREBASE INTERNAL ERROR: "+uI(...t);Xb.error(e)},Sf=function(...t){const e=`FIREBASE FATAL ERROR: ${uI(...t)}`;throw Xb.error(e),new Error(e)},tc=function(...t){const e="FIREBASE WARNING: "+uI(...t);Xb.warn(e)},whe=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&tc("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},yY=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},bhe=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},EE="[MIN_NAME]",v0="[MAX_NAME]",yC=function(t,e){if(t===e)return 0;if(t===EE||e===v0)return-1;if(e===EE||t===v0)return 1;{const n=rj(t),r=rj(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},vhe=function(t,e){return t===e?0:t<e?-1:1},ZC=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+vi(e))},P6=function(t){if(typeof t!="object"||t===null)return vi(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=vi(e[r]),n+=":",n+=P6(t[e[r]]);return n+="}",n},wY=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function cc(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const bY=function(t){We(!yY(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(i%2?1:0),i=Math.floor(i/2);l.push(s?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},Ehe=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Che=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function _he(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Ahe=new RegExp("^-?(0*)\\d{1,10}$"),She=-2147483648,Ihe=2147483647,rj=function(t){if(Ahe.test(t)){const e=Number(t);if(e>=She&&e<=Ihe)return e}return null},wC=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw tc("Exception was thrown by user callback.",n),e},Math.floor(0))}},Nhe=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},m_=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xhe{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){tc(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class The{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Lo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',tc(e)}}class Qx{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Qx.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6="5",vY="v",EY="s",CY="r",_Y="f",AY=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,SY="ls",IY="p",JM="ac",NY="websocket",xY="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TY{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=gy.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&gy.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Rhe(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function RY(t,e,n){We(typeof e=="string","typeof type must == string"),We(typeof n=="object","typeof params must == object");let r;if(e===NY)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===xY)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Rhe(t)&&(n.ns=t.namespace);const s=[];return cc(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class khe{constructor(){this.counters_={}}incrementCounter(e,n=1){Uf(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Pue(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO={},IO={};function D6(t){const e=t.toString();return SO[e]||(SO[e]=new khe),SO[e]}function Phe(t,e){const n=t.toString();return IO[n]||(IO[n]=e()),IO[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ohe{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&wC(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj="start",Dhe="close",Mhe="pLPCommand",Bhe="pRTLPCB",kY="id",PY="pw",OY="ser",Lhe="cb",Uhe="seg",$he="ts",Fhe="d",jhe="dframe",DY=1870,MY=30,Whe=DY-MY,zhe=25e3,Hhe=3e4;class Ib{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=dI(e),this.stats_=D6(n),this.urlFn=c=>(this.appCheckToken&&(c[JM]=this.appCheckToken),RY(n,xY,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Ohe(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Hhe)),bhe(()=>{if(this.isClosed_)return;this.scriptTagHolder=new M6((...i)=>{const[o,a,c,l,u]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===sj)this.id=a,this.password=c;else if(o===Dhe)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[sj]="t",r[OY]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Lhe]=this.scriptTagHolder.uniqueCallbackIdentifier),r[vY]=O6,this.transportSessionId&&(r[EY]=this.transportSessionId),this.lastSessionId&&(r[SY]=this.lastSessionId),this.applicationId&&(r[IY]=this.applicationId),this.appCheckToken&&(r[JM]=this.appCheckToken),typeof location<"u"&&location.hostname&&AY.test(location.hostname)&&(r[CY]=_Y);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ib.forceAllow_=!0}static forceDisallow(){Ib.forceDisallow_=!0}static isAvailable(){return Ib.forceAllow_?!0:!Ib.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Ehe()&&!Che()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=vi(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=eY(n),s=wY(r,Whe);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[jhe]="t",r[kY]=e,r[PY]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=vi(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class M6{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=mhe(),window[Mhe+this.uniqueCallbackIdentifier]=e,window[Bhe+this.uniqueCallbackIdentifier]=n,this.myIFrame=M6.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Lo("frame writing exception"),a.stack&&Lo(a.stack),Lo(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Lo("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[kY]=this.myID,e[PY]=this.myPW,e[OY]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+MY+r.length<=DY;){const o=this.pendingSegs.shift();r=r+"&"+Uhe+s+"="+o.seg+"&"+$he+s+"="+o.ts+"&"+Fhe+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(zhe)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Lo("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ghe=16384,qhe=45e3;let JT=null;typeof MozWebSocket<"u"?JT=MozWebSocket:typeof WebSocket<"u"&&(JT=WebSocket);class Tu{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=dI(this.connId),this.stats_=D6(n),this.connURL=Tu.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[vY]=O6,typeof location<"u"&&location.hostname&&AY.test(location.hostname)&&(o[CY]=_Y),n&&(o[EY]=n),r&&(o[SY]=r),s&&(o[JM]=s),i&&(o[IY]=i),RY(e,NY,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,gy.set("previous_websocket_failure",!0);try{let r;zue(),this.mySock=new JT(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Tu.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&JT!==null&&!Tu.forceDisallow_}static previouslyFailed(){return gy.isInMemoryStorage||gy.get("previous_websocket_failure")===!0}markConnectionHealthy(){gy.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Z_(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(We(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=vi(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=wY(n,Ghe);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(qhe))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Tu.responsesRequiredToBeHealthy=2;Tu.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Ib,Tu]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Tu&&Tu.isAvailable();let r=n&&!Tu.previouslyFailed();if(e.webSocketOnly&&(n||tc("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Tu];else{const s=this.transports_=[];for(const i of nA.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);nA.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}nA.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vhe=6e4,Khe=5e3,Yhe=10*1024,Qhe=100*1024,NO="t",ij="d",Jhe="s",oj="r",Zhe="e",aj="o",cj="a",lj="n",uj="p",Xhe="h";let efe=class{constructor(e,n,r,s,i,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=dI("c:"+this.id+":"),this.transportManager_=new nA(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=m_(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Qhe?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Yhe?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(NO in e){const n=e[NO];n===cj?this.upgradeIfSecondaryHealthy_():n===oj?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===aj&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ZC("t",e),r=ZC("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:uj,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:cj,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:lj,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ZC("t",e),r=ZC("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ZC(NO,e);if(ij in e){const r=e[ij];if(n===Xhe){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===lj){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Jhe?this.onConnectionShutdown_(r):n===oj?this.onReset_(r):n===Zhe?QM("Server Error: "+r):n===aj?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):QM("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),O6!==r&&tc("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),m_(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Vhe))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):m_(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Khe))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:uj,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(gy.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BY{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let LY=class{constructor(e){this.allowedEvents_=e,this.listeners_={},We(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){We(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT extends LY{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!sY()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ZT}getInitialEvent(e){return We(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj=32,hj=768;class Kr{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function fr(){return new Kr("")}function Dn(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Xg(t){return t.pieces_.length-t.pieceNum_}function os(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Kr(t.pieces_,e)}function UY(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function tfe(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function $Y(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function FY(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Kr(e,0)}function Ei(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Kr)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Kr(n,0)}function $n(t){return t.pieceNum_>=t.pieces_.length}function oa(t,e){const n=Dn(t),r=Dn(e);if(n===null)return e;if(n===r)return oa(os(t),os(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function B6(t,e){if(Xg(t)!==Xg(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ou(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Xg(t)>Xg(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class nfe{constructor(e,n){this.errorPrefix_=n,this.parts_=$Y(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=r2(this.parts_[r]);jY(this)}}function rfe(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=r2(e),jY(t)}function sfe(t){const e=t.parts_.pop();t.byteLength_-=r2(e),t.parts_.length>0&&(t.byteLength_-=1)}function jY(t){if(t.byteLength_>hj)throw new Error(t.errorPrefix_+"has a key path longer than "+hj+" bytes ("+t.byteLength_+").");if(t.parts_.length>dj)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+dj+") or object contains a cycle "+Vm(t))}function Vm(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6 extends LY{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new L6}getInitialEvent(e){return We(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=1e3,ife=60*5*1e3,fj=30*1e3,ofe=1.3,afe=3e4,cfe="server_kill",pj=3;class pf extends BY{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=pf.nextPersistentConnectionId_++,this.log_=dI("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=XC,this.maxReconnectDelay_=ife,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");L6.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&ZT.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(vi(i)),We(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new n2,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),We(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),We(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,l=a.s;pf.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Uf(e,"w")){const r=vE(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();tc(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Que(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=fj)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Yue(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),We(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+vi(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):QM("Unrecognized action received from server: "+vi(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){We(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=XC,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=XC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>afe&&(this.reconnectDelay_=XC),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*ofe)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+pf.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(d){We(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Lo("getToken() completed but was canceled"):(Lo("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new efe(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{tc(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(cfe)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&tc(d),c())}}}interrupt(e){Lo("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Lo("Resuming connection for reason: "+e),delete this.interruptReasons_[e],zF(this.interruptReasons_)&&(this.reconnectDelay_=XC,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>P6(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Kr(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Lo("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=pj&&(this.reconnectDelay_=fj,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Lo("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=pj&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+pY.replace(/\./g,"-")]=1,sY()?e["framework.cordova"]=1:Wue()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ZT.getInstance().currentlyOnline();return zF(this.interruptReasons_)&&e}}pf.nextPersistentConnectionId_=0;pf.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Mn(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Mn(EE,e),s=new Mn(EE,n);return this.compare(r,s)!==0}minPost(){return Mn.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vN;class WY extends s2{static get __EMPTY_NODE(){return vN}static set __EMPTY_NODE(e){vN=e}compare(e,n){return yC(e.name,n.name)}isDefinedOn(e){throw gC("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Mn.MIN}maxPost(){return new Mn(v0,vN)}makePost(e,n){return We(typeof e=="string","KeyIndex indexValue must always be a string."),new Mn(e,vN)}toString(){return".key"}}const ev=new WY;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Di{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Di.RED,this.left=s??Za.EMPTY_NODE,this.right=i??Za.EMPTY_NODE}copy(e,n,r,s,i){return new Di(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Za.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Za.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Di.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Di.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Di.RED=!0;Di.BLACK=!1;class lfe{copy(e,n,r,s,i){return this}insert(e,n,r){return new Di(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Za{constructor(e,n=Za.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Za(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Di.BLACK,null,null))}remove(e){return new Za(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Di.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new EN(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new EN(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new EN(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new EN(this.root_,null,this.comparator_,!0,e)}}Za.EMPTY_NODE=new lfe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ufe(t,e){return yC(t.name,e.name)}function U6(t,e){return yC(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZM;function dfe(t){ZM=t}const zY=function(t){return typeof t=="number"?"number:"+bY(t):"string:"+t},HY=function(t){if(t.isLeafNode()){const e=t.val();We(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Uf(e,".sv"),"Priority must be a string or number.")}else We(t===ZM||t.isEmpty(),"priority of unexpected type.");We(t===ZM||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gj;class Oi{constructor(e,n=Oi.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,We(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),HY(this.priorityNode_)}static set __childrenNodeConstructor(e){gj=e}static get __childrenNodeConstructor(){return gj}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Oi(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Oi.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return $n(e)?this:Dn(e)===".priority"?this.priorityNode_:Oi.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Oi.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Dn(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(We(r!==".priority"||Xg(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Oi.__childrenNodeConstructor.EMPTY_NODE.updateChild(os(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+zY(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=bY(this.value_):e+=this.value_,this.lazyHash_=mY(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Oi.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Oi.__childrenNodeConstructor?-1:(We(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Oi.VALUE_TYPE_ORDER.indexOf(n),i=Oi.VALUE_TYPE_ORDER.indexOf(r);return We(s>=0,"Unknown leaf type: "+n),We(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Oi.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GY,qY;function hfe(t){GY=t}function ffe(t){qY=t}class pfe extends s2{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?yC(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Mn.MIN}maxPost(){return new Mn(v0,new Oi("[PRIORITY-POST]",qY))}makePost(e,n){const r=GY(e);return new Mn(n,new Oi("[PRIORITY-POST]",r))}toString(){return".priority"}}const Gs=new pfe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gfe=Math.log(2);class mfe{constructor(e){const n=i=>parseInt(Math.log(i)/gfe,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const XT=function(t,e,n,r){t.sort(e);const s=function(c,l){const u=l-c;let d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new Di(h,d.node,Di.BLACK,null,null);{const f=parseInt(u/2,10)+c,p=s(c,f),g=s(f+1,l);return d=t[f],h=n?n(d):d,new Di(h,d.node,Di.BLACK,p,g)}},i=function(c){let l=null,u=null,d=t.length;const h=function(p,g){const m=d-p,y=d;d-=p;const w=s(m+1,y),C=t[m],N=n?n(C):C;f(new Di(N,C.node,g,null,w))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){const g=c.nextBitIsOne(),m=Math.pow(2,c.count-(p+1));g?h(m,Di.BLACK):(h(m,Di.BLACK),h(m,Di.RED))}return u},o=new mfe(t.length),a=i(o);return new Za(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xO;const Rw={};class af{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return We(Rw&&Gs,"ChildrenNode.ts has not been loaded"),xO=xO||new af({".priority":Rw},{".priority":Gs}),xO}get(e){const n=vE(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Za?n:null}hasIndex(e){return Uf(this.indexSet_,e.toString())}addIndex(e,n){We(e!==ev,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(Mn.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=XT(r,e.getCompare()):a=Rw;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new af(u,l)}addToIndexes(e,n){const r=YT(this.indexes_,(s,i)=>{const o=vE(this.indexSet_,i);if(We(o,"Missing index implementation for "+i),s===Rw)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(Mn.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),XT(a,o.getCompare())}else return Rw;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new Mn(e.name,a))),c.insert(e,e.node)}});return new af(r,this.indexSet_)}removeFromIndexes(e,n){const r=YT(this.indexes_,s=>{if(s===Rw)return s;{const i=n.get(e.name);return i?s.remove(new Mn(e.name,i)):s}});return new af(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e1;class nn{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&HY(this.priorityNode_),this.children_.isEmpty()&&We(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return e1||(e1=new nn(new Za(U6),null,af.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||e1}updatePriority(e){return this.children_.isEmpty()?this:new nn(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?e1:n}}getChild(e){const n=Dn(e);return n===null?this:this.getImmediateChild(n).getChild(os(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(We(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Mn(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?e1:this.priorityNode_;return new nn(s,o,i)}}updateChild(e,n){const r=Dn(e);if(r===null)return n;{We(Dn(e)!==".priority"||Xg(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(os(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Gs,(o,a)=>{n[o]=a.val(e),r++,i&&nn.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+zY(this.getPriority().val())+":"),this.forEachChild(Gs,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":mY(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new Mn(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Mn(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Mn(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Mn.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Mn.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===hI?-1:0}withIndex(e){if(e===ev||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new nn(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ev||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Gs),s=n.getIterator(Gs);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===ev?null:this.indexMap_.get(e.toString())}}nn.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class yfe extends nn{constructor(){super(new Za(U6),nn.EMPTY_NODE,af.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return nn.EMPTY_NODE}isEmpty(){return!1}}const hI=new yfe;Object.defineProperties(Mn,{MIN:{value:new Mn(EE,nn.EMPTY_NODE)},MAX:{value:new Mn(v0,hI)}});WY.__EMPTY_NODE=nn.EMPTY_NODE;Oi.__childrenNodeConstructor=nn;dfe(hI);ffe(hI);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wfe=!0;function Li(t,e=null){if(t===null)return nn.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),We(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Oi(n,Li(e))}if(!(t instanceof Array)&&wfe){const n=[];let r=!1;if(cc(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=Li(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Mn(o,c)))}}),n.length===0)return nn.EMPTY_NODE;const i=XT(n,ufe,o=>o.name,U6);if(r){const o=XT(n,Gs.getCompare());return new nn(i,Li(e),new af({".priority":o},{".priority":Gs}))}else return new nn(i,Li(e),af.Default)}else{let n=nn.EMPTY_NODE;return cc(t,(r,s)=>{if(Uf(t,r)&&r.substring(0,1)!=="."){const i=Li(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(Li(e))}}hfe(Li);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bfe extends s2{constructor(e){super(),this.indexPath_=e,We(!$n(e)&&Dn(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?yC(e.name,n.name):i}makePost(e,n){const r=Li(e),s=nn.EMPTY_NODE.updateChild(this.indexPath_,r);return new Mn(n,s)}maxPost(){const e=nn.EMPTY_NODE.updateChild(this.indexPath_,hI);return new Mn(v0,e)}toString(){return $Y(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vfe extends s2{compare(e,n){const r=e.node.compareTo(n.node);return r===0?yC(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Mn.MIN}maxPost(){return Mn.MAX}makePost(e,n){const r=Li(e);return new Mn(n,r)}toString(){return".value"}}const Efe=new vfe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VY(t){return{type:"value",snapshotNode:t}}function CE(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function rA(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function sA(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Cfe(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){We(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(rA(n,a)):We(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(CE(n,r)):o.trackChildChange(sA(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Gs,(s,i)=>{n.hasChild(s)||r.trackChildChange(rA(s,i))}),n.isLeafNode()||n.forEachChild(Gs,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(sA(s,i,o))}else r.trackChildChange(CE(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?nn.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e){this.indexedFilter_=new $6(e.getIndex()),this.index_=e.getIndex(),this.startPost_=iA.getStartPost_(e),this.endPost_=iA.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new Mn(n,r))||(r=nn.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=nn.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(nn.EMPTY_NODE);const i=this;return n.forEachChild(Gs,(o,a)=>{i.matches(new Mn(o,a))||(s=s.updateImmediateChild(o,nn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _fe{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new iA(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new Mn(n,r))||(r=nn.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=nn.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=nn.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(nn.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,nn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;We(a.numChildren()===this.limit_,"");const c=new Mn(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return i!=null&&i.trackChildChange(sA(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(rA(n,d));const g=a.updateImmediateChild(n,nn.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(CE(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?e:u&&o(l,c)>=0?(i!=null&&(i.trackChildChange(rA(l.name,l.node)),i.trackChildChange(CE(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,nn.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Gs}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return We(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return We(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:EE}hasEnd(){return this.endSet_}getIndexEndValue(){return We(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return We(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:v0}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return We(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Gs}copy(){const e=new F6;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Afe(t){return t.loadsAllData()?new $6(t.getIndex()):t.hasLimit()?new _fe(t):new iA(t)}function mj(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Gs?n="$priority":t.index_===Efe?n="$value":t.index_===ev?n="$key":(We(t.index_ instanceof bfe,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=vi(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=vi(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+vi(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=vi(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+vi(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function yj(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Gs&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR extends BY{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=dI("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(We(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=eR.getListenId_(e,r),a={};this.listens_[o]=a;const c=mj(e._queryParams);this.restRequest_(i+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(i,d,!1,r),vE(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",s(h,null)}})}unlisten(e,n){const r=eR.getListenId_(e,n);delete this.listens_[r]}get(e){const n=mj(e._queryParams),r=e._path.toString(),s=new n2;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Jue(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Z_(a.responseText)}catch{tc("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&tc("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sfe{constructor(){this.rootNode_=nn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(){return{value:null,children:new Map}}function KY(t,e,n){if($n(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Dn(e);t.children.has(r)||t.children.set(r,tR());const s=t.children.get(r);e=os(e),KY(s,e,n)}}function XM(t,e,n){t.value!==null?n(e,t.value):Ife(t,(r,s)=>{const i=new Kr(e.toString()+"/"+r);XM(s,i,n)})}function Ife(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nfe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&cc(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj=10*1e3,xfe=30*1e3,Tfe=5*60*1e3;class Rfe{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Nfe(e);const r=wj+(xfe-wj)*Math.random();m_(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;cc(e,(s,i)=>{i>0&&Uf(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),m_(this.reportStats_.bind(this),Math.floor(Math.random()*2*Tfe))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Du;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Du||(Du={}));function YY(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function j6(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function W6(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Du.ACK_USER_WRITE,this.source=YY()}operationForChild(e){if($n(this.path)){if(this.affectedTree.value!=null)return We(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Kr(e));return new nR(fr(),n,this.revert)}}else return We(Dn(this.path)===e,"operationForChild called for unrelated child."),new nR(os(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,n){this.source=e,this.path=n,this.type=Du.LISTEN_COMPLETE}operationForChild(e){return $n(this.path)?new oA(this.source,fr()):new oA(this.source,os(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Du.OVERWRITE}operationForChild(e){return $n(this.path)?new E0(this.source,fr(),this.snap.getImmediateChild(e)):new E0(this.source,os(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Du.MERGE}operationForChild(e){if($n(this.path)){const n=this.children.subtree(new Kr(e));return n.isEmpty()?null:n.value?new E0(this.source,fr(),n.value):new aA(this.source,fr(),n)}else return We(Dn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new aA(this.source,os(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($n(e))return this.isFullyInitialized()&&!this.filtered_;const n=Dn(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kfe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Pfe(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(Cfe(o.childName,o.snapshotNode))}),t1(t,s,"child_removed",e,r,n),t1(t,s,"child_added",e,r,n),t1(t,s,"child_moved",i,r,n),t1(t,s,"child_changed",e,r,n),t1(t,s,"value",e,r,n),s}function t1(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>Dfe(t,a,c)),o.forEach(a=>{const c=Ofe(t,a,i);s.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function Ofe(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Dfe(t,e,n){if(e.childName==null||n.childName==null)throw gC("Should only compare child_ events.");const r=new Mn(e.childName,e.snapshotNode),s=new Mn(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(t,e){return{eventCache:t,serverCache:e}}function y_(t,e,n,r){return i2(new em(e,n,r),t.serverCache)}function QY(t,e,n,r){return i2(t.eventCache,new em(e,n,r))}function rR(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function C0(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TO;const Mfe=()=>(TO||(TO=new Za(vhe)),TO);class fs{constructor(e,n=Mfe()){this.value=e,this.children=n}static fromObject(e){let n=new fs(null);return cc(e,(r,s)=>{n=n.set(new Kr(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:fr(),value:this.value};if($n(e))return null;{const r=Dn(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(os(e),n);return i!=null?{path:Ei(new Kr(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($n(e))return this;{const n=Dn(e),r=this.children.get(n);return r!==null?r.subtree(os(e)):new fs(null)}}set(e,n){if($n(e))return new fs(n,this.children);{const r=Dn(e),i=(this.children.get(r)||new fs(null)).set(os(e),n),o=this.children.insert(r,i);return new fs(this.value,o)}}remove(e){if($n(e))return this.children.isEmpty()?new fs(null):new fs(null,this.children);{const n=Dn(e),r=this.children.get(n);if(r){const s=r.remove(os(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new fs(null):new fs(this.value,i)}else return this}}get(e){if($n(e))return this.value;{const n=Dn(e),r=this.children.get(n);return r?r.get(os(e)):null}}setTree(e,n){if($n(e))return n;{const r=Dn(e),i=(this.children.get(r)||new fs(null)).setTree(os(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new fs(this.value,o)}}fold(e){return this.fold_(fr(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Ei(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,fr(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if($n(e))return null;{const i=Dn(e),o=this.children.get(i);return o?o.findOnPath_(os(e),Ei(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,fr(),n)}foreachOnPath_(e,n,r){if($n(e))return this;{this.value&&r(n,this.value);const s=Dn(e),i=this.children.get(s);return i?i.foreachOnPath_(os(e),Ei(n,s),r):new fs(null)}}foreach(e){this.foreach_(fr(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Ei(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e){this.writeTree_=e}static empty(){return new Lu(new fs(null))}}function w_(t,e,n){if($n(e))return new Lu(new fs(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=oa(s,e);return i=i.updateChild(o,n),new Lu(t.writeTree_.set(s,i))}else{const s=new fs(n),i=t.writeTree_.setTree(e,s);return new Lu(i)}}}function bj(t,e,n){let r=t;return cc(n,(s,i)=>{r=w_(r,Ei(e,s),i)}),r}function vj(t,e){if($n(e))return Lu.empty();{const n=t.writeTree_.setTree(e,new fs(null));return new Lu(n)}}function eB(t,e){return nw(t,e)!=null}function nw(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(oa(n.path,e)):null}function Ej(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Gs,(r,s)=>{e.push(new Mn(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Mn(r,s.value))}),e}function Tg(t,e){if($n(e))return t;{const n=nw(t,e);return n!=null?new Lu(new fs(n)):new Lu(t.writeTree_.subtree(e))}}function tB(t){return t.writeTree_.isEmpty()}function _E(t,e){return JY(fr(),t.writeTree_,e)}function JY(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(We(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=JY(Ei(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Ei(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(t,e){return tQ(e,t)}function Bfe(t,e,n,r,s){We(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=w_(t.visibleWrites,e,n)),t.lastWriteId=r}function Lfe(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Ufe(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);We(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&$fe(a,r.path)?s=!1:Ou(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return Ffe(t),!0;if(r.snap)t.visibleWrites=vj(t.visibleWrites,r.path);else{const a=r.children;cc(a,c=>{t.visibleWrites=vj(t.visibleWrites,Ei(r.path,c))})}return!0}else return!1}function $fe(t,e){if(t.snap)return Ou(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Ou(Ei(t.path,n),e))return!0;return!1}function Ffe(t){t.visibleWrites=ZY(t.allWrites,jfe,fr()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function jfe(t){return t.visible}function ZY(t,e,n){let r=Lu.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)Ou(n,o)?(a=oa(n,o),r=w_(r,a,i.snap)):Ou(o,n)&&(a=oa(o,n),r=w_(r,fr(),i.snap.getChild(a)));else if(i.children){if(Ou(n,o))a=oa(n,o),r=bj(r,a,i.children);else if(Ou(o,n))if(a=oa(o,n),$n(a))r=bj(r,fr(),i.children);else{const c=vE(i.children,Dn(a));if(c){const l=c.getChild(os(a));r=w_(r,fr(),l)}}}else throw gC("WriteRecord should have .snap or .children")}}return r}function XY(t,e,n,r,s){if(!r&&!s){const i=nw(t.visibleWrites,e);if(i!=null)return i;{const o=Tg(t.visibleWrites,e);if(tB(o))return n;if(n==null&&!eB(o,fr()))return null;{const a=n||nn.EMPTY_NODE;return _E(o,a)}}}else{const i=Tg(t.visibleWrites,e);if(!s&&tB(i))return n;if(!s&&n==null&&!eB(i,fr()))return null;{const o=function(l){return(l.visible||s)&&(!r||!~r.indexOf(l.writeId))&&(Ou(l.path,e)||Ou(e,l.path))},a=ZY(t.allWrites,o,e),c=n||nn.EMPTY_NODE;return _E(a,c)}}}function Wfe(t,e,n){let r=nn.EMPTY_NODE;const s=nw(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Gs,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Tg(t.visibleWrites,e);return n.forEachChild(Gs,(o,a)=>{const c=_E(Tg(i,new Kr(o)),a);r=r.updateImmediateChild(o,c)}),Ej(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Tg(t.visibleWrites,e);return Ej(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function zfe(t,e,n,r,s){We(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Ei(e,n);if(eB(t.visibleWrites,i))return null;{const o=Tg(t.visibleWrites,i);return tB(o)?s.getChild(n):_E(o,s.getChild(n))}}function Hfe(t,e,n,r){const s=Ei(e,n),i=nw(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Tg(t.visibleWrites,s);return _E(o,r.getNode().getImmediateChild(n))}else return null}function Gfe(t,e){return nw(t.visibleWrites,e)}function qfe(t,e,n,r,s,i,o){let a;const c=Tg(t.visibleWrites,e),l=nw(c,fr());if(l!=null)a=l;else if(n!=null)a=_E(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<s;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function Vfe(){return{visibleWrites:Lu.empty(),allWrites:[],lastWriteId:-1}}function sR(t,e,n,r){return XY(t.writeTree,t.treePath,e,n,r)}function z6(t,e){return Wfe(t.writeTree,t.treePath,e)}function Cj(t,e,n,r){return zfe(t.writeTree,t.treePath,e,n,r)}function iR(t,e){return Gfe(t.writeTree,Ei(t.treePath,e))}function Kfe(t,e,n,r,s,i){return qfe(t.writeTree,t.treePath,e,n,r,s,i)}function H6(t,e,n){return Hfe(t.writeTree,t.treePath,e,n)}function eQ(t,e){return tQ(Ei(t.treePath,e),t.writeTree)}function tQ(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yfe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;We(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),We(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,sA(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,rA(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,CE(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,sA(r,e.snapshotNode,s.oldSnap));else throw gC("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qfe{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const nQ=new Qfe;class G6{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new em(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return H6(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:C0(this.viewCache_),i=Kfe(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jfe(t){return{filter:t}}function Zfe(t,e){We(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),We(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Xfe(t,e,n,r,s){const i=new Yfe;let o,a;if(n.type===Du.OVERWRITE){const l=n;l.source.fromUser?o=nB(t,e,l.path,l.snap,r,s,i):(We(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!$n(l.path),o=oR(t,e,l.path,l.snap,r,s,a,i))}else if(n.type===Du.MERGE){const l=n;l.source.fromUser?o=tpe(t,e,l.path,l.children,r,s,i):(We(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=rB(t,e,l.path,l.children,r,s,a,i))}else if(n.type===Du.ACK_USER_WRITE){const l=n;l.revert?o=spe(t,e,l.path,r,s,i):o=npe(t,e,l.path,l.affectedTree,r,s,i)}else if(n.type===Du.LISTEN_COMPLETE)o=rpe(t,e,n.path,r,i);else throw gC("Unknown operation type: "+n.type);const c=i.getChanges();return epe(e,o,c),{viewCache:o,changes:c}}function epe(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=rR(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(VY(rR(e)))}}function rQ(t,e,n,r,s,i){const o=e.eventCache;if(iR(r,n)!=null)return e;{let a,c;if($n(n))if(We(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=C0(e),u=l instanceof nn?l:nn.EMPTY_NODE,d=z6(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const l=sR(r,C0(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,i)}else{const l=Dn(n);if(l===".priority"){We(Xg(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=Cj(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=os(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const h=Cj(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=H6(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,s,i):a=o.getNode()}}return y_(e,a,o.isFullyInitialized()||$n(n),t.filter.filtersNodes())}}function oR(t,e,n,r,s,i,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if($n(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=Dn(n);if(!c.isCompleteForPath(n)&&Xg(n)>1)return e;const p=os(n),m=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=u.updatePriority(c.getNode(),m):l=u.updateChild(c.getNode(),f,m,p,nQ,null)}const d=QY(e,l,c.isFullyInitialized()||$n(n),u.filtersNodes()),h=new G6(s,d,i);return rQ(t,d,n,s,h,a)}function nB(t,e,n,r,s,i,o){const a=e.eventCache;let c,l;const u=new G6(s,e,i);if($n(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=y_(e,l,!0,t.filter.filtersNodes());else{const d=Dn(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=y_(e,l,a.isFullyInitialized(),a.isFiltered());else{const h=os(n),f=a.getNode().getImmediateChild(d);let p;if($n(h))p=r;else{const g=u.getCompleteChild(d);g!=null?UY(h)===".priority"&&g.getChild(FY(h)).isEmpty()?p=g:p=g.updateChild(h,r):p=nn.EMPTY_NODE}if(f.equals(p))c=e;else{const g=t.filter.updateChild(a.getNode(),d,p,h,u,o);c=y_(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function _j(t,e){return t.eventCache.isCompleteForChild(e)}function tpe(t,e,n,r,s,i,o){let a=e;return r.foreach((c,l)=>{const u=Ei(n,c);_j(e,Dn(u))&&(a=nB(t,a,u,l,s,i,o))}),r.foreach((c,l)=>{const u=Ei(n,c);_j(e,Dn(u))||(a=nB(t,a,u,l,s,i,o))}),a}function Aj(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function rB(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;$n(n)?l=r:l=new fs(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=Aj(t,f,h);c=oR(t,c,new Kr(d),p,s,i,o,a)}}),l.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),g=Aj(t,p,h);c=oR(t,c,new Kr(d),g,s,i,o,a)}}),c}function npe(t,e,n,r,s,i,o){if(iR(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if($n(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return oR(t,e,n,c.getNode().getChild(n),s,i,a,o);if($n(n)){let l=new fs(null);return c.getNode().forEachChild(ev,(u,d)=>{l=l.set(new Kr(u),d)}),rB(t,e,n,l,s,i,a,o)}else return e}else{let l=new fs(null);return r.foreach((u,d)=>{const h=Ei(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),rB(t,e,n,l,s,i,a,o)}}function rpe(t,e,n,r,s){const i=e.serverCache,o=QY(e,i.getNode(),i.isFullyInitialized()||$n(n),i.isFiltered());return rQ(t,o,n,r,nQ,s)}function spe(t,e,n,r,s,i){let o;if(iR(r,n)!=null)return e;{const a=new G6(r,e,s),c=e.eventCache.getNode();let l;if($n(n)||Dn(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=sR(r,C0(e));else{const d=e.serverCache.getNode();We(d instanceof nn,"serverChildren would be complete if leaf node"),u=z6(r,d)}u=u,l=t.filter.updateFullNode(c,u,i)}else{const u=Dn(n);let d=H6(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,os(n),a,i):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,nn.EMPTY_NODE,os(n),a,i):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=sR(r,C0(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,i)))}return o=e.serverCache.isFullyInitialized()||iR(r,fr())!=null,y_(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ipe{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new $6(r.getIndex()),i=Afe(r);this.processor_=Jfe(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(nn.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(nn.EMPTY_NODE,a.getNode(),null),u=new em(c,o.isFullyInitialized(),s.filtersNodes()),d=new em(l,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=i2(d,u),this.eventGenerator_=new kfe(this.query_)}get query(){return this.query_}}function ope(t){return t.viewCache_.serverCache.getNode()}function ape(t){return rR(t.viewCache_)}function cpe(t,e){const n=C0(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!$n(e)&&!n.getImmediateChild(Dn(e)).isEmpty())?n.getChild(e):null}function Sj(t){return t.eventRegistrations_.length===0}function lpe(t,e){t.eventRegistrations_.push(e)}function Ij(t,e,n){const r=[];if(n){We(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Nj(t,e,n,r){e.type===Du.MERGE&&e.source.queryId!==null&&(We(C0(t.viewCache_),"We should always have a full cache before handling merges"),We(rR(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=Xfe(t.processor_,s,e,n,r);return Zfe(t.processor_,i.viewCache),We(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,sQ(t,i.changes,i.viewCache.eventCache.getNode(),null)}function upe(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Gs,(i,o)=>{r.push(CE(i,o))}),n.isFullyInitialized()&&r.push(VY(n.getNode())),sQ(t,r,n.getNode(),e)}function sQ(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return Pfe(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aR;class iQ{constructor(){this.views=new Map}}function dpe(t){We(!aR,"__referenceConstructor has already been defined"),aR=t}function hpe(){return We(aR,"Reference.ts has not been loaded"),aR}function fpe(t){return t.views.size===0}function q6(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return We(i!=null,"SyncTree gave us an op for an invalid query."),Nj(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(Nj(o,e,n,r));return i}}function oQ(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=sR(n,s?r:null),c=!1;a?c=!0:r instanceof nn?(a=z6(n,r),c=!1):(a=nn.EMPTY_NODE,c=!1);const l=i2(new em(a,c,!1),new em(r,s,!1));return new ipe(e,l)}return o}function ppe(t,e,n,r,s,i){const o=oQ(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),lpe(o,n),upe(o,n)}function gpe(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=tm(t);if(s==="default")for(const[c,l]of t.views.entries())o=o.concat(Ij(l,n,r)),Sj(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||i.push(l.query));else{const c=t.views.get(s);c&&(o=o.concat(Ij(c,n,r)),Sj(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!tm(t)&&i.push(new(hpe())(e._repo,e._path)),{removed:i,events:o}}function aQ(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Rg(t,e){let n=null;for(const r of t.views.values())n=n||cpe(r,e);return n}function cQ(t,e){if(e._queryParams.loadsAllData())return a2(t);{const r=e._queryIdentifier;return t.views.get(r)}}function lQ(t,e){return cQ(t,e)!=null}function tm(t){return a2(t)!=null}function a2(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cR;function mpe(t){We(!cR,"__referenceConstructor has already been defined"),cR=t}function ype(){return We(cR,"Reference.ts has not been loaded"),cR}let wpe=1;class xj{constructor(e){this.listenProvider_=e,this.syncPointTree_=new fs(null),this.pendingWriteTree_=Vfe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function uQ(t,e,n,r,s){return Bfe(t.pendingWriteTree_,e,n,r,s),s?pI(t,new E0(YY(),e,n)):[]}function my(t,e,n=!1){const r=Lfe(t.pendingWriteTree_,e);if(Ufe(t.pendingWriteTree_,e)){let i=new fs(null);return r.snap!=null?i=i.set(fr(),!0):cc(r.children,o=>{i=i.set(new Kr(o),!0)}),pI(t,new nR(r.path,i,n))}else return[]}function fI(t,e,n){return pI(t,new E0(j6(),e,n))}function bpe(t,e,n){const r=fs.fromObject(n);return pI(t,new aA(j6(),e,r))}function vpe(t,e){return pI(t,new oA(j6(),e))}function Epe(t,e,n){const r=K6(t,n);if(r){const s=Y6(r),i=s.path,o=s.queryId,a=oa(i,e),c=new oA(W6(o),a);return Q6(t,i,c)}else return[]}function lR(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||lQ(o,e))){const c=gpe(o,e,n,r);fpe(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const l=c.removed;if(a=c.events,!s){const u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(h,f)=>tm(f));if(u&&!d){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const f=Ape(h);for(let p=0;p<f.length;++p){const g=f[p],m=g.query,y=pQ(t,g);t.listenProvider_.startListening(b_(m),cA(t,m),y.hashFn,y.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(b_(e),null):l.forEach(h=>{const f=t.queryToTagMap.get(c2(h));t.listenProvider_.stopListening(b_(h),f)}))}Spe(t,l)}return a}function dQ(t,e,n,r){const s=K6(t,r);if(s!=null){const i=Y6(s),o=i.path,a=i.queryId,c=oa(o,e),l=new E0(W6(a),c,n);return Q6(t,o,l)}else return[]}function Cpe(t,e,n,r){const s=K6(t,r);if(s){const i=Y6(s),o=i.path,a=i.queryId,c=oa(o,e),l=fs.fromObject(n),u=new aA(W6(a),c,l);return Q6(t,o,u)}else return[]}function sB(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(h,f)=>{const p=oa(h,s);i=i||Rg(f,p),o=o||tm(f)});let a=t.syncPointTree_.get(s);a?(o=o||tm(a),i=i||Rg(a,fr())):(a=new iQ,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=nn.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((f,p)=>{const g=Rg(p,fr());g&&(i=i.updateImmediateChild(f,g))}));const l=lQ(a,e);if(!l&&!e._queryParams.loadsAllData()){const h=c2(e);We(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=Ipe();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const u=o2(t.pendingWriteTree_,s);let d=ppe(a,e,n,u,i,c);if(!l&&!o&&!r){const h=cQ(a,e);d=d.concat(Npe(t,e,h))}return d}function V6(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=oa(o,e),l=Rg(a,c);if(l)return l});return XY(s,e,i,n,!0)}function _pe(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{const d=oa(l,n);r=r||Rg(u,d)});let s=t.syncPointTree_.get(n);s?r=r||Rg(s,fr()):(s=new iQ,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new em(r,!0,!1):null,a=o2(t.pendingWriteTree_,e._path),c=oQ(s,e,a,i?o.getNode():nn.EMPTY_NODE,i);return ape(c)}function pI(t,e){return hQ(e,t.syncPointTree_,null,o2(t.pendingWriteTree_,fr()))}function hQ(t,e,n,r){if($n(t.path))return fQ(t,e,n,r);{const s=e.get(fr());n==null&&s!=null&&(n=Rg(s,fr()));let i=[];const o=Dn(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=eQ(r,o);i=i.concat(hQ(a,c,l,u))}return s&&(i=i.concat(q6(s,t,r,n))),i}}function fQ(t,e,n,r){const s=e.get(fr());n==null&&s!=null&&(n=Rg(s,fr()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=eQ(r,o),u=t.operationForChild(o);u&&(i=i.concat(fQ(u,a,c,l)))}),s&&(i=i.concat(q6(s,t,r,n))),i}function pQ(t,e){const n=e.query,r=cA(t,n);return{hashFn:()=>(ope(e)||nn.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?Epe(t,n._path,r):vpe(t,n._path);{const i=_he(s,n);return lR(t,n,null,i)}}}}function cA(t,e){const n=c2(e);return t.queryToTagMap.get(n)}function c2(t){return t._path.toString()+"$"+t._queryIdentifier}function K6(t,e){return t.tagToQueryMap.get(e)}function Y6(t){const e=t.indexOf("$");return We(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Kr(t.substr(0,e))}}function Q6(t,e,n){const r=t.syncPointTree_.get(e);We(r,"Missing sync point for query tag that we're tracking");const s=o2(t.pendingWriteTree_,e);return q6(r,n,s,null)}function Ape(t){return t.fold((e,n,r)=>{if(n&&tm(n))return[a2(n)];{let s=[];return n&&(s=aQ(n)),cc(r,(i,o)=>{s=s.concat(o)}),s}})}function b_(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(ype())(t._repo,t._path):t}function Spe(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=c2(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function Ipe(){return wpe++}function Npe(t,e,n){const r=e._path,s=cA(t,e),i=pQ(t,n),o=t.listenProvider_.startListening(b_(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)We(!tm(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!$n(l)&&u&&tm(u))return[a2(u).query];{let h=[];return u&&(h=h.concat(aQ(u).map(f=>f.query))),cc(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){const u=c[l];t.listenProvider_.stopListening(b_(u),cA(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new J6(n)}node(){return this.node_}}class Z6{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ei(this.path_,e);return new Z6(this.syncTree_,n)}node(){return V6(this.syncTree_,this.path_)}}const xpe=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Tj=function(t,e,n){if(!t||typeof t!="object")return t;if(We(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Tpe(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Rpe(t[".sv"],e);We(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Tpe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:We(!1,"Unexpected server value: "+t)}},Rpe=function(t,e,n){t.hasOwnProperty("increment")||We(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&We(!1,"Unexpected increment value: "+r);const s=e.node();if(We(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},kpe=function(t,e,n,r){return X6(e,new Z6(n,t),r)},gQ=function(t,e,n){return X6(t,new J6(e),n)};function X6(t,e,n){const r=t.getPriority().val(),s=Tj(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=Tj(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new Oi(a,Li(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Oi(s))),o.forEachChild(Gs,(a,c)=>{const l=X6(c,e.getImmediateChild(a),n);l!==c&&(i=i.updateImmediateChild(a,l))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function t8(t,e){let n=e instanceof Kr?e:new Kr(e),r=t,s=Dn(n);for(;s!==null;){const i=vE(r.node.children,s)||{children:{},childCount:0};r=new e8(s,r,i),n=os(n),s=Dn(n)}return r}function bC(t){return t.node.value}function mQ(t,e){t.node.value=e,iB(t)}function yQ(t){return t.node.childCount>0}function Ppe(t){return bC(t)===void 0&&!yQ(t)}function l2(t,e){cc(t.node.children,(n,r)=>{e(new e8(n,t,r))})}function wQ(t,e,n,r){n&&e(t),l2(t,s=>{wQ(s,e,!0)})}function Ope(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function gI(t){return new Kr(t.parent===null?t.name:gI(t.parent)+"/"+t.name)}function iB(t){t.parent!==null&&Dpe(t.parent,t.name,t)}function Dpe(t,e,n){const r=Ppe(n),s=Uf(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,iB(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,iB(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mpe=/[\[\].#$\/\u0000-\u001F\u007F]/,Bpe=/[\[\].#$\u0000-\u001F\u007F]/,RO=10*1024*1024,bQ=function(t){return typeof t=="string"&&t.length!==0&&!Mpe.test(t)},vQ=function(t){return typeof t=="string"&&t.length!==0&&!Bpe.test(t)},Lpe=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),vQ(t)},Upe=function(t,e,n,r){n8(R6(t,"value"),e,n)},n8=function(t,e,n){const r=n instanceof Kr?new nfe(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Vm(r));if(typeof e=="function")throw new Error(t+"contains a function "+Vm(r)+" with contents = "+e.toString());if(yY(e))throw new Error(t+"contains "+e.toString()+" "+Vm(r));if(typeof e=="string"&&e.length>RO/3&&r2(e)>RO)throw new Error(t+"contains a string greater than "+RO+" utf8 bytes "+Vm(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(cc(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!bQ(o)))throw new Error(t+" contains an invalid key ("+o+") "+Vm(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);rfe(r,o),n8(t,a,r),sfe(r)}),s&&i)throw new Error(t+' contains ".value" child '+Vm(r)+" in addition to actual children.")}},EQ=function(t,e,n,r){if(!vQ(n))throw new Error(R6(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},$pe=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),EQ(t,e,n)},CQ=function(t,e){if(Dn(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Fpe=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!bQ(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Lpe(n))throw new Error(R6(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jpe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function r8(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!B6(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function _Q(t,e,n){r8(t,n),AQ(t,r=>B6(r,e))}function Zd(t,e,n){r8(t,n),AQ(t,r=>Ou(r,e)||Ou(e,r))}function AQ(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(Wpe(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Wpe(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();g_&&Lo("event: "+n.toString()),wC(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zpe="repo_interrupt",Hpe=25;class Gpe{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new jpe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=tR(),this.transactionQueueTree_=new e8,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function qpe(t,e,n){if(t.stats_=D6(t.repoInfo_),t.forceRestClient_||Nhe())t.server_=new eR(t.repoInfo_,(r,s,i,o)=>{Rj(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>kj(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{vi(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new pf(t.repoInfo_,e,(r,s,i,o)=>{Rj(t,r,s,i,o)},r=>{kj(t,r)},r=>{Kpe(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Phe(t.repoInfo_,()=>new Rfe(t.stats_,t.server_)),t.infoData_=new Sfe,t.infoSyncTree_=new xj({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=fI(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),i8(t,"connected",!1),t.serverSyncTree_=new xj({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const l=o(a,c);Zd(t.eventQueue_,r._path,l)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function Vpe(t){const n=t.infoData_.getNode(new Kr(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function s8(t){return xpe({timestamp:Vpe(t)})}function Rj(t,e,n,r,s){t.dataUpdateCount++;const i=new Kr(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=YT(n,l=>Li(l));o=Cpe(t.serverSyncTree_,i,c,s)}else{const c=Li(n);o=dQ(t.serverSyncTree_,i,c,s)}else if(r){const c=YT(n,l=>Li(l));o=bpe(t.serverSyncTree_,i,c)}else{const c=Li(n);o=fI(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=d2(t,i)),Zd(t.eventQueue_,a,o)}function kj(t,e){i8(t,"connected",e),e===!1&&Jpe(t)}function Kpe(t,e){cc(e,(n,r)=>{i8(t,n,r)})}function i8(t,e,n){const r=new Kr("/.info/"+e),s=Li(n);t.infoData_.updateSnapshot(r,s);const i=fI(t.infoSyncTree_,r,s);Zd(t.eventQueue_,r,i)}function SQ(t){return t.nextWriteId_++}function Ype(t,e,n){const r=_pe(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=Li(s).withIndex(e._queryParams.getIndex());sB(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=fI(t.serverSyncTree_,e._path,i);else{const a=cA(t.serverSyncTree_,e);o=dQ(t.serverSyncTree_,e._path,i,a)}return Zd(t.eventQueue_,e._path,o),lR(t.serverSyncTree_,e,n,null,!0),i},s=>(u2(t,"get for query "+vi(e)+" failed: "+s),Promise.reject(new Error(s))))}function Qpe(t,e,n,r,s){u2(t,"set",{path:e.toString(),value:n,priority:r});const i=s8(t),o=Li(n,r),a=V6(t.serverSyncTree_,e),c=gQ(o,a,i),l=SQ(t),u=uQ(t.serverSyncTree_,e,c,l,!0);r8(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p=h==="ok";p||tc("set at "+e+" failed: "+h);const g=my(t.serverSyncTree_,l,!p);Zd(t.eventQueue_,e,g),tge(t,s,h,f)});const d=RQ(t,e);d2(t,d),Zd(t.eventQueue_,d,[])}function Jpe(t){u2(t,"onDisconnectEvents");const e=s8(t),n=tR();XM(t.onDisconnect_,fr(),(s,i)=>{const o=kpe(s,i,t.serverSyncTree_,e);KY(n,s,o)});let r=[];XM(n,fr(),(s,i)=>{r=r.concat(fI(t.serverSyncTree_,s,i));const o=RQ(t,s);d2(t,o)}),t.onDisconnect_=tR(),Zd(t.eventQueue_,fr(),r)}function Zpe(t,e,n){let r;Dn(e._path)===".info"?r=sB(t.infoSyncTree_,e,n):r=sB(t.serverSyncTree_,e,n),_Q(t.eventQueue_,e._path,r)}function Xpe(t,e,n){let r;Dn(e._path)===".info"?r=lR(t.infoSyncTree_,e,n):r=lR(t.serverSyncTree_,e,n),_Q(t.eventQueue_,e._path,r)}function ege(t){t.persistentConnection_&&t.persistentConnection_.interrupt(zpe)}function u2(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Lo(n,...e)}function tge(t,e,n,r){e&&wC(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function IQ(t,e,n){return V6(t.serverSyncTree_,e,n)||nn.EMPTY_NODE}function o8(t,e=t.transactionQueueTree_){if(e||h2(t,e),bC(e)){const n=xQ(t,e);We(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&nge(t,gI(e),n)}else yQ(e)&&l2(e,n=>{o8(t,n)})}function nge(t,e,n){const r=n.map(l=>l.currentWriteId),s=IQ(t,e,r);let i=s;const o=s.hash();for(let l=0;l<n.length;l++){const u=n[l];We(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=oa(e,u.path);i=i.updateChild(d,u.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,l=>{u2(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(my(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();h2(t,t8(t.transactionQueueTree_,e)),o8(t,t.transactionQueueTree_),Zd(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)wC(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{tc("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}d2(t,e)}},o)}function d2(t,e){const n=NQ(t,e),r=gI(n),s=xQ(t,n);return rge(t,s,r),r}function rge(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=oa(n,c.path);let u=!1,d;if(We(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,s=s.concat(my(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Hpe)u=!0,d="maxretry",s=s.concat(my(t.serverSyncTree_,c.currentWriteId,!0));else{const h=IQ(t,c.path,o);c.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){n8("transaction failed: Data returned ",f,c.path);let p=Li(f);typeof f=="object"&&f!=null&&Uf(f,".priority")||(p=p.updatePriority(h.getPriority()));const m=c.currentWriteId,y=s8(t),w=gQ(p,h,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=w,c.currentWriteId=SQ(t),o.splice(o.indexOf(m),1),s=s.concat(uQ(t.serverSyncTree_,c.path,w,c.currentWriteId,c.applyLocally)),s=s.concat(my(t.serverSyncTree_,m,!0))}else u=!0,d="nodata",s=s.concat(my(t.serverSyncTree_,c.currentWriteId,!0))}Zd(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}h2(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)wC(r[a]);o8(t,t.transactionQueueTree_)}function NQ(t,e){let n,r=t.transactionQueueTree_;for(n=Dn(e);n!==null&&bC(r)===void 0;)r=t8(r,n),e=os(e),n=Dn(e);return r}function xQ(t,e){const n=[];return TQ(t,e,n),n.sort((r,s)=>r.order-s.order),n}function TQ(t,e,n){const r=bC(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);l2(e,s=>{TQ(t,s,n)})}function h2(t,e){const n=bC(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,mQ(e,n.length>0?n:void 0)}l2(e,r=>{h2(t,r)})}function RQ(t,e){const n=gI(NQ(t,e)),r=t8(t.transactionQueueTree_,e);return Ope(r,s=>{kO(t,s)}),kO(t,r),wQ(r,s=>{kO(t,s)}),n}function kO(t,e){const n=bC(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(We(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(We(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(my(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?mQ(e,void 0):n.length=i+1,Zd(t.eventQueue_,gI(e),s);for(let o=0;o<r.length;o++)wC(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sge(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function ige(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):tc(`Invalid query segment '${n}' in query '${t}'`)}return e}const Pj=function(t,e){const n=oge(t),r=n.namespace;n.domain==="firebase.com"&&Sf(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Sf("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||whe();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new TY(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Kr(n.pathString)}},oge=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(s=sge(t.substring(u,d)));const h=ige(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),i=r}"ns"in h&&(i=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class age{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+vi(this.snapshot.exportVal())}}class cge{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kQ{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return We(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return $n(this._path)?null:UY(this._path)}get ref(){return new $f(this._repo,this._path)}get _queryIdentifier(){const e=yj(this._queryParams),n=P6(e);return n==="{}"?"default":n}get _queryObject(){return yj(this._queryParams)}isEqual(e){if(e=mC(e),!(e instanceof a8))return!1;const n=this._repo===e._repo,r=B6(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+tfe(this._path)}}class $f extends a8{constructor(e,n){super(e,n,new F6,!1)}get parent(){const e=FY(this._path);return e===null?null:new $f(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class lA{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Kr(e),r=oB(this.ref,e);return new lA(this._node.getChild(n),r,Gs)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new lA(s,oB(this.ref,r),Gs)))}hasChild(e){const n=new Kr(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Sc(t,e){return t=mC(t),t._checkNotDeleted("ref"),e!==void 0?oB(t._root,e):t._root}function oB(t,e){return t=mC(t),Dn(t._path)===null?$pe("child","path",e):EQ("child","path",e),new $f(t._repo,Ei(t._path,e))}function PQ(t){return CQ("remove",t._path),v_(t,null)}function v_(t,e){t=mC(t),CQ("set",t._path),Upe("set",e,t._path);const n=new n2;return Qpe(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function ny(t){t=mC(t);const e=new kQ(()=>{}),n=new f2(e);return Ype(t._repo,t,n).then(r=>new lA(r,new $f(t._repo,t._path),t._queryParams.getIndex()))}class f2{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new age("value",this,new lA(e.snapshotNode,new $f(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new cge(this,e,n):null}matches(e){return e instanceof f2?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function lge(t,e,n,r,s){const i=new kQ(n,void 0),o=new f2(i);return Zpe(t._repo,t,o),()=>Xpe(t._repo,t,o)}function Oj(t,e,n,r){return lge(t,"value",e)}dpe($f);mpe($f);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uge="FIREBASE_DATABASE_EMULATOR_HOST",aB={};let dge=!1;function hge(t,e,n,r){t.repoInfo_=new TY(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function fge(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Sf("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Lo("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Pj(i,s),a=o.repoInfo,c;typeof process<"u"&&XF&&(c=XF[uge]),c?(i=`http://${c}?ns=${a.namespace}`,o=Pj(i,s),a=o.repoInfo):o.repoInfo.secure;const l=new The(t.name,t.options,e);Fpe("Invalid Firebase Database URL",o),$n(o.path)||Sf("Database URL must point to the root of a Firebase Database (not including a child path).");const u=gge(a,t,l,new xhe(t.name,n));return new mge(u,t)}function pge(t,e){const n=aB[e];(!n||n[t.key]!==t)&&Sf(`Database ${e}(${t.repoInfo_}) has already been deleted.`),ege(t),delete n[t.key]}function gge(t,e,n,r){let s=aB[e.name];s||(s={},aB[e.name]=s);let i=s[t.toURLString()];return i&&Sf("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Gpe(t,dge,n,r),s[t.toURLString()]=i,i}class mge{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(qpe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new $f(this._repo,fr())),this._rootInternal}_delete(){return this._rootInternal!==null&&(pge(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Sf("Cannot call "+e+" on a deleted database.")}}function yge(t=dY(),e){const n=Qde(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=$ue("database");r&&wge(n,...r)}return n}function wge(t,e,n,r={}){t=mC(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Sf("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Sf('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new Qx(Qx.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:Fue(r.mockUserToken,t.app.options.projectId);i=new Qx(o)}hge(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bge(t){hhe(Xde),QT(new X_("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return fge(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Zb(ej,tj,t),Zb(ej,tj,"esm2017")}pf.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};pf.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};bge();const vge={apiKey:"AIzaSyAed5bn78c6Mb5Y3ezULH9CEg7IAKYFAps",authDomain:"chess-220ee.firebaseapp.com",databaseURL:"https://chess-220ee-default-rtdb.firebaseio.com",projectId:"chess-220ee",storageBucket:"chess-220ee.firebasestorage.app",messagingSenderId:"724477138097",appId:"1:724477138097:web:7dc15f79db3bda5c763e90"},Ege=ehe().length?dY():uY(vge),uR=yge(Ege);var cB={},OQ={exports:{}},Qc={},DQ={exports:{}},MQ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(x,B){var F=x.length;x.push(B);e:for(;0<F;){var L=F-1>>>1,A=x[L];if(0<s(A,B))x[L]=B,x[F]=A,F=L;else break e}}function n(x){return x.length===0?null:x[0]}function r(x){if(x.length===0)return null;var B=x[0],F=x.pop();if(F!==B){x[0]=F;e:for(var L=0,A=x.length,H=A>>>1;L<H;){var re=2*(L+1)-1,se=x[re],ge=re+1,ae=x[ge];if(0>s(se,F))ge<A&&0>s(ae,se)?(x[L]=ae,x[ge]=F,L=ge):(x[L]=se,x[re]=F,L=re);else if(ge<A&&0>s(ae,F))x[L]=ae,x[ge]=F,L=ge;else break e}}return B}function s(x,B){var F=x.sortIndex-B.sortIndex;return F!==0?F:x.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,m=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(x){for(var B=n(l);B!==null;){if(B.callback===null)r(l);else if(B.startTime<=x)r(l),B.sortIndex=B.expirationTime,e(c,B);else break;B=n(l)}}function N(x){if(g=!1,C(x),!p)if(n(c)!==null)p=!0,_(I);else{var B=n(l);B!==null&&O(N,B.startTime-x)}}function I(x,B){p=!1,g&&(g=!1,y(U),U=-1),f=!0;var F=h;try{for(C(B),d=n(c);d!==null&&(!(d.expirationTime>B)||x&&!j());){var L=d.callback;if(typeof L=="function"){d.callback=null,h=d.priorityLevel;var A=L(d.expirationTime<=B);B=t.unstable_now(),typeof A=="function"?d.callback=A:d===n(c)&&r(c),C(B)}else r(c);d=n(c)}if(d!==null)var H=!0;else{var re=n(l);re!==null&&O(N,re.startTime-B),H=!1}return H}finally{d=null,h=F,f=!1}}var k=!1,P=null,U=-1,M=5,W=-1;function j(){return!(t.unstable_now()-W<M)}function K(){if(P!==null){var x=t.unstable_now();W=x;var B=!0;try{B=P(!0,x)}finally{B?$():(k=!1,P=null)}}else k=!1}var $;if(typeof w=="function")$=function(){w(K)};else if(typeof MessageChannel<"u"){var v=new MessageChannel,E=v.port2;v.port1.onmessage=K,$=function(){E.postMessage(null)}}else $=function(){m(K,0)};function _(x){P=x,k||(k=!0,$())}function O(x,B){U=m(function(){x(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(x){x.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,_(I))},t.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<x?Math.floor(1e3/x):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(x){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var F=h;h=B;try{return x()}finally{h=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(x,B){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var F=h;h=x;try{return B()}finally{h=F}},t.unstable_scheduleCallback=function(x,B,F){var L=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?L+F:L):F=L,x){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=F+A,x={id:u++,callback:B,priorityLevel:x,startTime:F,expirationTime:A,sortIndex:-1},F>L?(x.sortIndex=F,e(l,x),n(c)===null&&x===n(l)&&(g?(y(U),U=-1):g=!0,O(N,F-L))):(x.sortIndex=A,e(c,x),p||f||(p=!0,_(I))),x},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(x){var B=h;return function(){var F=h;h=B;try{return x.apply(this,arguments)}finally{h=F}}}})(MQ);DQ.exports=MQ;var Cge=DQ.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _ge=G,Vc=Cge;function Be(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var BQ=new Set,uA={};function rw(t,e){AE(t,e),AE(t+"Capture",e)}function AE(t,e){for(uA[t]=e,t=0;t<e.length;t++)BQ.add(e[t])}var If=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lB=Object.prototype.hasOwnProperty,Age=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dj={},Mj={};function Sge(t){return lB.call(Mj,t)?!0:lB.call(Dj,t)?!1:Age.test(t)?Mj[t]=!0:(Dj[t]=!0,!1)}function Ige(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Nge(t,e,n,r){if(e===null||typeof e>"u"||Ige(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ba(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var wo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){wo[t]=new ba(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];wo[e]=new ba(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){wo[t]=new ba(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){wo[t]=new ba(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){wo[t]=new ba(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){wo[t]=new ba(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){wo[t]=new ba(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){wo[t]=new ba(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){wo[t]=new ba(t,5,!1,t.toLowerCase(),null,!1,!1)});var c8=/[\-:]([a-z])/g;function l8(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(c8,l8);wo[e]=new ba(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(c8,l8);wo[e]=new ba(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(c8,l8);wo[e]=new ba(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){wo[t]=new ba(t,1,!1,t.toLowerCase(),null,!1,!1)});wo.xlinkHref=new ba("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){wo[t]=new ba(t,1,!1,t.toLowerCase(),null,!0,!0)});function u8(t,e,n,r){var s=wo.hasOwnProperty(e)?wo[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Nge(e,n,s,r)&&(n=null),r||s===null?Sge(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ff=_ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,CN=Symbol.for("react.element"),Nb=Symbol.for("react.portal"),xb=Symbol.for("react.fragment"),d8=Symbol.for("react.strict_mode"),uB=Symbol.for("react.profiler"),LQ=Symbol.for("react.provider"),UQ=Symbol.for("react.context"),h8=Symbol.for("react.forward_ref"),dB=Symbol.for("react.suspense"),hB=Symbol.for("react.suspense_list"),f8=Symbol.for("react.memo"),xp=Symbol.for("react.lazy"),$Q=Symbol.for("react.offscreen"),Bj=Symbol.iterator;function n1(t){return t===null||typeof t!="object"?null:(t=Bj&&t[Bj]||t["@@iterator"],typeof t=="function"?t:null)}var Ls=Object.assign,PO;function z1(t){if(PO===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);PO=e&&e[1]||""}return`
`+PO+t}var OO=!1;function DO(t,e){if(!t||OO)return"";OO=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{OO=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?z1(t):""}function xge(t){switch(t.tag){case 5:return z1(t.type);case 16:return z1("Lazy");case 13:return z1("Suspense");case 19:return z1("SuspenseList");case 0:case 2:case 15:return t=DO(t.type,!1),t;case 11:return t=DO(t.type.render,!1),t;case 1:return t=DO(t.type,!0),t;default:return""}}function fB(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xb:return"Fragment";case Nb:return"Portal";case uB:return"Profiler";case d8:return"StrictMode";case dB:return"Suspense";case hB:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case UQ:return(t.displayName||"Context")+".Consumer";case LQ:return(t._context.displayName||"Context")+".Provider";case h8:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case f8:return e=t.displayName||null,e!==null?e:fB(t.type)||"Memo";case xp:e=t._payload,t=t._init;try{return fB(t(e))}catch{}}return null}function Tge(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fB(e);case 8:return e===d8?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function nm(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function FQ(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Rge(t){var e=FQ(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _N(t){t._valueTracker||(t._valueTracker=Rge(t))}function jQ(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=FQ(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function dR(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pB(t,e){var n=e.checked;return Ls({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Lj(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=nm(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function WQ(t,e){e=e.checked,e!=null&&u8(t,"checked",e,!1)}function gB(t,e){WQ(t,e);var n=nm(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?mB(t,e.type,n):e.hasOwnProperty("defaultValue")&&mB(t,e.type,nm(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Uj(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function mB(t,e,n){(e!=="number"||dR(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var H1=Array.isArray;function tv(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+nm(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function yB(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Be(91));return Ls({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $j(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Be(92));if(H1(n)){if(1<n.length)throw Error(Be(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:nm(n)}}function zQ(t,e){var n=nm(e.value),r=nm(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Fj(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function HQ(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wB(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?HQ(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var AN,GQ=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(AN=AN||document.createElement("div"),AN.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=AN.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function dA(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var E_={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kge=["Webkit","ms","Moz","O"];Object.keys(E_).forEach(function(t){kge.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),E_[e]=E_[t]})});function qQ(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||E_.hasOwnProperty(t)&&E_[t]?(""+e).trim():e+"px"}function VQ(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=qQ(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Pge=Ls({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bB(t,e){if(e){if(Pge[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Be(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Be(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Be(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Be(62))}}function vB(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var EB=null;function p8(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var CB=null,nv=null,rv=null;function jj(t){if(t=wI(t)){if(typeof CB!="function")throw Error(Be(280));var e=t.stateNode;e&&(e=w2(e),CB(t.stateNode,t.type,e))}}function KQ(t){nv?rv?rv.push(t):rv=[t]:nv=t}function YQ(){if(nv){var t=nv,e=rv;if(rv=nv=null,jj(t),e)for(t=0;t<e.length;t++)jj(e[t])}}function QQ(t,e){return t(e)}function JQ(){}var MO=!1;function ZQ(t,e,n){if(MO)return t(e,n);MO=!0;try{return QQ(t,e,n)}finally{MO=!1,(nv!==null||rv!==null)&&(JQ(),YQ())}}function hA(t,e){var n=t.stateNode;if(n===null)return null;var r=w2(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Be(231,e,typeof n));return n}var _B=!1;if(If)try{var r1={};Object.defineProperty(r1,"passive",{get:function(){_B=!0}}),window.addEventListener("test",r1,r1),window.removeEventListener("test",r1,r1)}catch{_B=!1}function Oge(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var C_=!1,hR=null,fR=!1,AB=null,Dge={onError:function(t){C_=!0,hR=t}};function Mge(t,e,n,r,s,i,o,a,c){C_=!1,hR=null,Oge.apply(Dge,arguments)}function Bge(t,e,n,r,s,i,o,a,c){if(Mge.apply(this,arguments),C_){if(C_){var l=hR;C_=!1,hR=null}else throw Error(Be(198));fR||(fR=!0,AB=l)}}function sw(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function XQ(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Wj(t){if(sw(t)!==t)throw Error(Be(188))}function Lge(t){var e=t.alternate;if(!e){if(e=sw(t),e===null)throw Error(Be(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Wj(s),t;if(i===r)return Wj(s),e;i=i.sibling}throw Error(Be(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Be(189))}}if(n.alternate!==r)throw Error(Be(190))}if(n.tag!==3)throw Error(Be(188));return n.stateNode.current===n?t:e}function eJ(t){return t=Lge(t),t!==null?tJ(t):null}function tJ(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=tJ(t);if(e!==null)return e;t=t.sibling}return null}var nJ=Vc.unstable_scheduleCallback,zj=Vc.unstable_cancelCallback,Uge=Vc.unstable_shouldYield,$ge=Vc.unstable_requestPaint,ti=Vc.unstable_now,Fge=Vc.unstable_getCurrentPriorityLevel,g8=Vc.unstable_ImmediatePriority,rJ=Vc.unstable_UserBlockingPriority,pR=Vc.unstable_NormalPriority,jge=Vc.unstable_LowPriority,sJ=Vc.unstable_IdlePriority,p2=null,Hd=null;function Wge(t){if(Hd&&typeof Hd.onCommitFiberRoot=="function")try{Hd.onCommitFiberRoot(p2,t,void 0,(t.current.flags&128)===128)}catch{}}var Uu=Math.clz32?Math.clz32:Gge,zge=Math.log,Hge=Math.LN2;function Gge(t){return t>>>=0,t===0?32:31-(zge(t)/Hge|0)|0}var SN=64,IN=4194304;function G1(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gR(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=G1(a):(i&=o,i!==0&&(r=G1(i)))}else o=n&~s,o!==0?r=G1(o):i!==0&&(r=G1(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Uu(e),s=1<<n,r|=t[n],e&=~s;return r}function qge(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vge(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Uu(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=qge(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function SB(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function iJ(){var t=SN;return SN<<=1,!(SN&4194240)&&(SN=64),t}function BO(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function mI(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Uu(e),t[e]=n}function Kge(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Uu(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function m8(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Uu(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Tr=0;function oJ(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var aJ,y8,cJ,lJ,uJ,IB=!1,NN=[],kg=null,Pg=null,Og=null,fA=new Map,pA=new Map,Mp=[],Yge="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hj(t,e){switch(t){case"focusin":case"focusout":kg=null;break;case"dragenter":case"dragleave":Pg=null;break;case"mouseover":case"mouseout":Og=null;break;case"pointerover":case"pointerout":fA.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pA.delete(e.pointerId)}}function s1(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=wI(e),e!==null&&y8(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Qge(t,e,n,r,s){switch(e){case"focusin":return kg=s1(kg,t,e,n,r,s),!0;case"dragenter":return Pg=s1(Pg,t,e,n,r,s),!0;case"mouseover":return Og=s1(Og,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return fA.set(i,s1(fA.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,pA.set(i,s1(pA.get(i)||null,t,e,n,r,s)),!0}return!1}function dJ(t){var e=yy(t.target);if(e!==null){var n=sw(e);if(n!==null){if(e=n.tag,e===13){if(e=XQ(n),e!==null){t.blockedOn=e,uJ(t.priority,function(){cJ(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jx(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=NB(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);EB=r,n.target.dispatchEvent(r),EB=null}else return e=wI(n),e!==null&&y8(e),t.blockedOn=n,!1;e.shift()}return!0}function Gj(t,e,n){Jx(t)&&n.delete(e)}function Jge(){IB=!1,kg!==null&&Jx(kg)&&(kg=null),Pg!==null&&Jx(Pg)&&(Pg=null),Og!==null&&Jx(Og)&&(Og=null),fA.forEach(Gj),pA.forEach(Gj)}function i1(t,e){t.blockedOn===e&&(t.blockedOn=null,IB||(IB=!0,Vc.unstable_scheduleCallback(Vc.unstable_NormalPriority,Jge)))}function gA(t){function e(s){return i1(s,t)}if(0<NN.length){i1(NN[0],t);for(var n=1;n<NN.length;n++){var r=NN[n];r.blockedOn===t&&(r.blockedOn=null)}}for(kg!==null&&i1(kg,t),Pg!==null&&i1(Pg,t),Og!==null&&i1(Og,t),fA.forEach(e),pA.forEach(e),n=0;n<Mp.length;n++)r=Mp[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Mp.length&&(n=Mp[0],n.blockedOn===null);)dJ(n),n.blockedOn===null&&Mp.shift()}var sv=Ff.ReactCurrentBatchConfig,mR=!0;function Zge(t,e,n,r){var s=Tr,i=sv.transition;sv.transition=null;try{Tr=1,w8(t,e,n,r)}finally{Tr=s,sv.transition=i}}function Xge(t,e,n,r){var s=Tr,i=sv.transition;sv.transition=null;try{Tr=4,w8(t,e,n,r)}finally{Tr=s,sv.transition=i}}function w8(t,e,n,r){if(mR){var s=NB(t,e,n,r);if(s===null)qO(t,e,r,yR,n),Hj(t,r);else if(Qge(s,t,e,n,r))r.stopPropagation();else if(Hj(t,r),e&4&&-1<Yge.indexOf(t)){for(;s!==null;){var i=wI(s);if(i!==null&&aJ(i),i=NB(t,e,n,r),i===null&&qO(t,e,r,yR,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else qO(t,e,r,null,n)}}var yR=null;function NB(t,e,n,r){if(yR=null,t=p8(r),t=yy(t),t!==null)if(e=sw(t),e===null)t=null;else if(n=e.tag,n===13){if(t=XQ(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yR=t,null}function hJ(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fge()){case g8:return 1;case rJ:return 4;case pR:case jge:return 16;case sJ:return 536870912;default:return 16}default:return 16}}var pg=null,b8=null,Zx=null;function fJ(){if(Zx)return Zx;var t,e=b8,n=e.length,r,s="value"in pg?pg.value:pg.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Zx=s.slice(t,1<r?1-r:void 0)}function Xx(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xN(){return!0}function qj(){return!1}function Jc(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?xN:qj,this.isPropagationStopped=qj,this}return Ls(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xN)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xN)},persist:function(){},isPersistent:xN}),e}var vC={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},v8=Jc(vC),yI=Ls({},vC,{view:0,detail:0}),eme=Jc(yI),LO,UO,o1,g2=Ls({},yI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:E8,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==o1&&(o1&&t.type==="mousemove"?(LO=t.screenX-o1.screenX,UO=t.screenY-o1.screenY):UO=LO=0,o1=t),LO)},movementY:function(t){return"movementY"in t?t.movementY:UO}}),Vj=Jc(g2),tme=Ls({},g2,{dataTransfer:0}),nme=Jc(tme),rme=Ls({},yI,{relatedTarget:0}),$O=Jc(rme),sme=Ls({},vC,{animationName:0,elapsedTime:0,pseudoElement:0}),ime=Jc(sme),ome=Ls({},vC,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ame=Jc(ome),cme=Ls({},vC,{data:0}),Kj=Jc(cme),lme={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ume={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dme={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hme(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=dme[t])?!!e[t]:!1}function E8(){return hme}var fme=Ls({},yI,{key:function(t){if(t.key){var e=lme[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xx(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ume[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:E8,charCode:function(t){return t.type==="keypress"?Xx(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xx(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pme=Jc(fme),gme=Ls({},g2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yj=Jc(gme),mme=Ls({},yI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:E8}),yme=Jc(mme),wme=Ls({},vC,{propertyName:0,elapsedTime:0,pseudoElement:0}),bme=Jc(wme),vme=Ls({},g2,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Eme=Jc(vme),Cme=[9,13,27,32],C8=If&&"CompositionEvent"in window,__=null;If&&"documentMode"in document&&(__=document.documentMode);var _me=If&&"TextEvent"in window&&!__,pJ=If&&(!C8||__&&8<__&&11>=__),Qj=" ",Jj=!1;function gJ(t,e){switch(t){case"keyup":return Cme.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mJ(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Tb=!1;function Ame(t,e){switch(t){case"compositionend":return mJ(e);case"keypress":return e.which!==32?null:(Jj=!0,Qj);case"textInput":return t=e.data,t===Qj&&Jj?null:t;default:return null}}function Sme(t,e){if(Tb)return t==="compositionend"||!C8&&gJ(t,e)?(t=fJ(),Zx=b8=pg=null,Tb=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return pJ&&e.locale!=="ko"?null:e.data;default:return null}}var Ime={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zj(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ime[t.type]:e==="textarea"}function yJ(t,e,n,r){KQ(r),e=wR(e,"onChange"),0<e.length&&(n=new v8("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var A_=null,mA=null;function Nme(t){xJ(t,0)}function m2(t){var e=Pb(t);if(jQ(e))return t}function xme(t,e){if(t==="change")return e}var wJ=!1;if(If){var FO;if(If){var jO="oninput"in document;if(!jO){var Xj=document.createElement("div");Xj.setAttribute("oninput","return;"),jO=typeof Xj.oninput=="function"}FO=jO}else FO=!1;wJ=FO&&(!document.documentMode||9<document.documentMode)}function e9(){A_&&(A_.detachEvent("onpropertychange",bJ),mA=A_=null)}function bJ(t){if(t.propertyName==="value"&&m2(mA)){var e=[];yJ(e,mA,t,p8(t)),ZQ(Nme,e)}}function Tme(t,e,n){t==="focusin"?(e9(),A_=e,mA=n,A_.attachEvent("onpropertychange",bJ)):t==="focusout"&&e9()}function Rme(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return m2(mA)}function kme(t,e){if(t==="click")return m2(e)}function Pme(t,e){if(t==="input"||t==="change")return m2(e)}function Ome(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zu=typeof Object.is=="function"?Object.is:Ome;function yA(t,e){if(zu(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!lB.call(e,s)||!zu(t[s],e[s]))return!1}return!0}function t9(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function n9(t,e){var n=t9(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=t9(n)}}function vJ(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?vJ(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function EJ(){for(var t=window,e=dR();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=dR(t.document)}return e}function _8(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Dme(t){var e=EJ(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&vJ(n.ownerDocument.documentElement,n)){if(r!==null&&_8(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=n9(n,i);var o=n9(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Mme=If&&"documentMode"in document&&11>=document.documentMode,Rb=null,xB=null,S_=null,TB=!1;function r9(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;TB||Rb==null||Rb!==dR(r)||(r=Rb,"selectionStart"in r&&_8(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),S_&&yA(S_,r)||(S_=r,r=wR(xB,"onSelect"),0<r.length&&(e=new v8("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Rb)))}function TN(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var kb={animationend:TN("Animation","AnimationEnd"),animationiteration:TN("Animation","AnimationIteration"),animationstart:TN("Animation","AnimationStart"),transitionend:TN("Transition","TransitionEnd")},WO={},CJ={};If&&(CJ=document.createElement("div").style,"AnimationEvent"in window||(delete kb.animationend.animation,delete kb.animationiteration.animation,delete kb.animationstart.animation),"TransitionEvent"in window||delete kb.transitionend.transition);function y2(t){if(WO[t])return WO[t];if(!kb[t])return t;var e=kb[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in CJ)return WO[t]=e[n];return t}var _J=y2("animationend"),AJ=y2("animationiteration"),SJ=y2("animationstart"),IJ=y2("transitionend"),NJ=new Map,s9="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bm(t,e){NJ.set(t,e),rw(e,[t])}for(var zO=0;zO<s9.length;zO++){var HO=s9[zO],Bme=HO.toLowerCase(),Lme=HO[0].toUpperCase()+HO.slice(1);bm(Bme,"on"+Lme)}bm(_J,"onAnimationEnd");bm(AJ,"onAnimationIteration");bm(SJ,"onAnimationStart");bm("dblclick","onDoubleClick");bm("focusin","onFocus");bm("focusout","onBlur");bm(IJ,"onTransitionEnd");AE("onMouseEnter",["mouseout","mouseover"]);AE("onMouseLeave",["mouseout","mouseover"]);AE("onPointerEnter",["pointerout","pointerover"]);AE("onPointerLeave",["pointerout","pointerover"]);rw("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rw("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rw("onBeforeInput",["compositionend","keypress","textInput","paste"]);rw("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rw("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rw("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var q1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ume=new Set("cancel close invalid load scroll toggle".split(" ").concat(q1));function i9(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Bge(r,e,void 0,t),t.currentTarget=null}function xJ(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;i9(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;i9(s,a,l),i=c}}}if(fR)throw t=AB,fR=!1,AB=null,t}function ds(t,e){var n=e[DB];n===void 0&&(n=e[DB]=new Set);var r=t+"__bubble";n.has(r)||(TJ(e,t,2,!1),n.add(r))}function GO(t,e,n){var r=0;e&&(r|=4),TJ(n,t,r,e)}var RN="_reactListening"+Math.random().toString(36).slice(2);function wA(t){if(!t[RN]){t[RN]=!0,BQ.forEach(function(n){n!=="selectionchange"&&(Ume.has(n)||GO(n,!1,t),GO(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[RN]||(e[RN]=!0,GO("selectionchange",!1,e))}}function TJ(t,e,n,r){switch(hJ(e)){case 1:var s=Zge;break;case 4:s=Xge;break;default:s=w8}n=s.bind(null,e,n,t),s=void 0,!_B||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function qO(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=yy(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}ZQ(function(){var l=i,u=p8(n),d=[];e:{var h=NJ.get(t);if(h!==void 0){var f=v8,p=t;switch(t){case"keypress":if(Xx(n)===0)break e;case"keydown":case"keyup":f=pme;break;case"focusin":p="focus",f=$O;break;case"focusout":p="blur",f=$O;break;case"beforeblur":case"afterblur":f=$O;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Vj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=nme;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=yme;break;case _J:case AJ:case SJ:f=ime;break;case IJ:f=bme;break;case"scroll":f=eme;break;case"wheel":f=Eme;break;case"copy":case"cut":case"paste":f=ame;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Yj}var g=(e&4)!==0,m=!g&&t==="scroll",y=g?h!==null?h+"Capture":null:h;g=[];for(var w=l,C;w!==null;){C=w;var N=C.stateNode;if(C.tag===5&&N!==null&&(C=N,y!==null&&(N=hA(w,y),N!=null&&g.push(bA(w,N,C)))),m)break;w=w.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==EB&&(p=n.relatedTarget||n.fromElement)&&(yy(p)||p[Nf]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?yy(p):null,p!==null&&(m=sw(p),p!==m||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=Vj,N="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(g=Yj,N="onPointerLeave",y="onPointerEnter",w="pointer"),m=f==null?h:Pb(f),C=p==null?h:Pb(p),h=new g(N,w+"leave",f,n,u),h.target=m,h.relatedTarget=C,N=null,yy(u)===l&&(g=new g(y,w+"enter",p,n,u),g.target=C,g.relatedTarget=m,N=g),m=N,f&&p)t:{for(g=f,y=p,w=0,C=g;C;C=kw(C))w++;for(C=0,N=y;N;N=kw(N))C++;for(;0<w-C;)g=kw(g),w--;for(;0<C-w;)y=kw(y),C--;for(;w--;){if(g===y||y!==null&&g===y.alternate)break t;g=kw(g),y=kw(y)}g=null}else g=null;f!==null&&o9(d,h,f,g,!1),p!==null&&m!==null&&o9(d,m,p,g,!0)}}e:{if(h=l?Pb(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var I=xme;else if(Zj(h))if(wJ)I=Pme;else{I=Rme;var k=Tme}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(I=kme);if(I&&(I=I(t,l))){yJ(d,I,n,u);break e}k&&k(t,h,l),t==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&mB(h,"number",h.value)}switch(k=l?Pb(l):window,t){case"focusin":(Zj(k)||k.contentEditable==="true")&&(Rb=k,xB=l,S_=null);break;case"focusout":S_=xB=Rb=null;break;case"mousedown":TB=!0;break;case"contextmenu":case"mouseup":case"dragend":TB=!1,r9(d,n,u);break;case"selectionchange":if(Mme)break;case"keydown":case"keyup":r9(d,n,u)}var P;if(C8)e:{switch(t){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else Tb?gJ(t,n)&&(U="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(U="onCompositionStart");U&&(pJ&&n.locale!=="ko"&&(Tb||U!=="onCompositionStart"?U==="onCompositionEnd"&&Tb&&(P=fJ()):(pg=u,b8="value"in pg?pg.value:pg.textContent,Tb=!0)),k=wR(l,U),0<k.length&&(U=new Kj(U,t,null,n,u),d.push({event:U,listeners:k}),P?U.data=P:(P=mJ(n),P!==null&&(U.data=P)))),(P=_me?Ame(t,n):Sme(t,n))&&(l=wR(l,"onBeforeInput"),0<l.length&&(u=new Kj("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=P))}xJ(d,e)})}function bA(t,e,n){return{instance:t,listener:e,currentTarget:n}}function wR(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=hA(t,n),i!=null&&r.unshift(bA(t,i,s)),i=hA(t,e),i!=null&&r.push(bA(t,i,s))),t=t.return}return r}function kw(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function o9(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=hA(n,i),c!=null&&o.unshift(bA(n,c,a))):s||(c=hA(n,i),c!=null&&o.push(bA(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var $me=/\r\n?/g,Fme=/\u0000|\uFFFD/g;function a9(t){return(typeof t=="string"?t:""+t).replace($me,`
`).replace(Fme,"")}function kN(t,e,n){if(e=a9(e),a9(t)!==e&&n)throw Error(Be(425))}function bR(){}var RB=null,kB=null;function PB(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var OB=typeof setTimeout=="function"?setTimeout:void 0,jme=typeof clearTimeout=="function"?clearTimeout:void 0,c9=typeof Promise=="function"?Promise:void 0,Wme=typeof queueMicrotask=="function"?queueMicrotask:typeof c9<"u"?function(t){return c9.resolve(null).then(t).catch(zme)}:OB;function zme(t){setTimeout(function(){throw t})}function VO(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),gA(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);gA(e)}function Dg(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function l9(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var EC=Math.random().toString(36).slice(2),Bd="__reactFiber$"+EC,vA="__reactProps$"+EC,Nf="__reactContainer$"+EC,DB="__reactEvents$"+EC,Hme="__reactListeners$"+EC,Gme="__reactHandles$"+EC;function yy(t){var e=t[Bd];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Nf]||n[Bd]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=l9(t);t!==null;){if(n=t[Bd])return n;t=l9(t)}return e}t=n,n=t.parentNode}return null}function wI(t){return t=t[Bd]||t[Nf],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Pb(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Be(33))}function w2(t){return t[vA]||null}var MB=[],Ob=-1;function vm(t){return{current:t}}function ps(t){0>Ob||(t.current=MB[Ob],MB[Ob]=null,Ob--)}function as(t,e){Ob++,MB[Ob]=t.current,t.current=e}var rm={},jo=vm(rm),nc=vm(!1),_0=rm;function SE(t,e){var n=t.type.contextTypes;if(!n)return rm;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function rc(t){return t=t.childContextTypes,t!=null}function vR(){ps(nc),ps(jo)}function u9(t,e,n){if(jo.current!==rm)throw Error(Be(168));as(jo,e),as(nc,n)}function RJ(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Be(108,Tge(t)||"Unknown",s));return Ls({},n,r)}function ER(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||rm,_0=jo.current,as(jo,t),as(nc,nc.current),!0}function d9(t,e,n){var r=t.stateNode;if(!r)throw Error(Be(169));n?(t=RJ(t,e,_0),r.__reactInternalMemoizedMergedChildContext=t,ps(nc),ps(jo),as(jo,t)):ps(nc),as(nc,n)}var Uh=null,b2=!1,KO=!1;function kJ(t){Uh===null?Uh=[t]:Uh.push(t)}function qme(t){b2=!0,kJ(t)}function Em(){if(!KO&&Uh!==null){KO=!0;var t=0,e=Tr;try{var n=Uh;for(Tr=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Uh=null,b2=!1}catch(s){throw Uh!==null&&(Uh=Uh.slice(t+1)),nJ(g8,Em),s}finally{Tr=e,KO=!1}}return null}var Db=[],Mb=0,CR=null,_R=0,Rl=[],kl=0,A0=null,cf=1,lf="";function Km(t,e){Db[Mb++]=_R,Db[Mb++]=CR,CR=t,_R=e}function PJ(t,e,n){Rl[kl++]=cf,Rl[kl++]=lf,Rl[kl++]=A0,A0=t;var r=cf;t=lf;var s=32-Uu(r)-1;r&=~(1<<s),n+=1;var i=32-Uu(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,cf=1<<32-Uu(e)+s|n<<s|r,lf=i+t}else cf=1<<i|n<<s|r,lf=t}function A8(t){t.return!==null&&(Km(t,1),PJ(t,1,0))}function S8(t){for(;t===CR;)CR=Db[--Mb],Db[Mb]=null,_R=Db[--Mb],Db[Mb]=null;for(;t===A0;)A0=Rl[--kl],Rl[kl]=null,lf=Rl[--kl],Rl[kl]=null,cf=Rl[--kl],Rl[kl]=null}var Hc=null,jc=null,Ss=!1,Su=null;function OJ(t,e){var n=Ol(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function h9(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Hc=t,jc=Dg(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Hc=t,jc=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=A0!==null?{id:cf,overflow:lf}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ol(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Hc=t,jc=null,!0):!1;default:return!1}}function BB(t){return(t.mode&1)!==0&&(t.flags&128)===0}function LB(t){if(Ss){var e=jc;if(e){var n=e;if(!h9(t,e)){if(BB(t))throw Error(Be(418));e=Dg(n.nextSibling);var r=Hc;e&&h9(t,e)?OJ(r,n):(t.flags=t.flags&-4097|2,Ss=!1,Hc=t)}}else{if(BB(t))throw Error(Be(418));t.flags=t.flags&-4097|2,Ss=!1,Hc=t}}}function f9(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Hc=t}function PN(t){if(t!==Hc)return!1;if(!Ss)return f9(t),Ss=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!PB(t.type,t.memoizedProps)),e&&(e=jc)){if(BB(t))throw DJ(),Error(Be(418));for(;e;)OJ(t,e),e=Dg(e.nextSibling)}if(f9(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Be(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){jc=Dg(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}jc=null}}else jc=Hc?Dg(t.stateNode.nextSibling):null;return!0}function DJ(){for(var t=jc;t;)t=Dg(t.nextSibling)}function IE(){jc=Hc=null,Ss=!1}function I8(t){Su===null?Su=[t]:Su.push(t)}var Vme=Ff.ReactCurrentBatchConfig;function a1(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Be(309));var r=n.stateNode}if(!r)throw Error(Be(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Be(284));if(!n._owner)throw Error(Be(290,t))}return t}function ON(t,e){throw t=Object.prototype.toString.call(e),Error(Be(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function p9(t){var e=t._init;return e(t._payload)}function MJ(t){function e(y,w){if(t){var C=y.deletions;C===null?(y.deletions=[w],y.flags|=16):C.push(w)}}function n(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function r(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function s(y,w){return y=Ug(y,w),y.index=0,y.sibling=null,y}function i(y,w,C){return y.index=C,t?(C=y.alternate,C!==null?(C=C.index,C<w?(y.flags|=2,w):C):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,w,C,N){return w===null||w.tag!==6?(w=tD(C,y.mode,N),w.return=y,w):(w=s(w,C),w.return=y,w)}function c(y,w,C,N){var I=C.type;return I===xb?u(y,w,C.props.children,N,C.key):w!==null&&(w.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===xp&&p9(I)===w.type)?(N=s(w,C.props),N.ref=a1(y,w,C),N.return=y,N):(N=oT(C.type,C.key,C.props,null,y.mode,N),N.ref=a1(y,w,C),N.return=y,N)}function l(y,w,C,N){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=nD(C,y.mode,N),w.return=y,w):(w=s(w,C.children||[]),w.return=y,w)}function u(y,w,C,N,I){return w===null||w.tag!==7?(w=a0(C,y.mode,N,I),w.return=y,w):(w=s(w,C),w.return=y,w)}function d(y,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=tD(""+w,y.mode,C),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case CN:return C=oT(w.type,w.key,w.props,null,y.mode,C),C.ref=a1(y,null,w),C.return=y,C;case Nb:return w=nD(w,y.mode,C),w.return=y,w;case xp:var N=w._init;return d(y,N(w._payload),C)}if(H1(w)||n1(w))return w=a0(w,y.mode,C,null),w.return=y,w;ON(y,w)}return null}function h(y,w,C,N){var I=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return I!==null?null:a(y,w,""+C,N);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case CN:return C.key===I?c(y,w,C,N):null;case Nb:return C.key===I?l(y,w,C,N):null;case xp:return I=C._init,h(y,w,I(C._payload),N)}if(H1(C)||n1(C))return I!==null?null:u(y,w,C,N,null);ON(y,C)}return null}function f(y,w,C,N,I){if(typeof N=="string"&&N!==""||typeof N=="number")return y=y.get(C)||null,a(w,y,""+N,I);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case CN:return y=y.get(N.key===null?C:N.key)||null,c(w,y,N,I);case Nb:return y=y.get(N.key===null?C:N.key)||null,l(w,y,N,I);case xp:var k=N._init;return f(y,w,C,k(N._payload),I)}if(H1(N)||n1(N))return y=y.get(C)||null,u(w,y,N,I,null);ON(w,N)}return null}function p(y,w,C,N){for(var I=null,k=null,P=w,U=w=0,M=null;P!==null&&U<C.length;U++){P.index>U?(M=P,P=null):M=P.sibling;var W=h(y,P,C[U],N);if(W===null){P===null&&(P=M);break}t&&P&&W.alternate===null&&e(y,P),w=i(W,w,U),k===null?I=W:k.sibling=W,k=W,P=M}if(U===C.length)return n(y,P),Ss&&Km(y,U),I;if(P===null){for(;U<C.length;U++)P=d(y,C[U],N),P!==null&&(w=i(P,w,U),k===null?I=P:k.sibling=P,k=P);return Ss&&Km(y,U),I}for(P=r(y,P);U<C.length;U++)M=f(P,y,U,C[U],N),M!==null&&(t&&M.alternate!==null&&P.delete(M.key===null?U:M.key),w=i(M,w,U),k===null?I=M:k.sibling=M,k=M);return t&&P.forEach(function(j){return e(y,j)}),Ss&&Km(y,U),I}function g(y,w,C,N){var I=n1(C);if(typeof I!="function")throw Error(Be(150));if(C=I.call(C),C==null)throw Error(Be(151));for(var k=I=null,P=w,U=w=0,M=null,W=C.next();P!==null&&!W.done;U++,W=C.next()){P.index>U?(M=P,P=null):M=P.sibling;var j=h(y,P,W.value,N);if(j===null){P===null&&(P=M);break}t&&P&&j.alternate===null&&e(y,P),w=i(j,w,U),k===null?I=j:k.sibling=j,k=j,P=M}if(W.done)return n(y,P),Ss&&Km(y,U),I;if(P===null){for(;!W.done;U++,W=C.next())W=d(y,W.value,N),W!==null&&(w=i(W,w,U),k===null?I=W:k.sibling=W,k=W);return Ss&&Km(y,U),I}for(P=r(y,P);!W.done;U++,W=C.next())W=f(P,y,U,W.value,N),W!==null&&(t&&W.alternate!==null&&P.delete(W.key===null?U:W.key),w=i(W,w,U),k===null?I=W:k.sibling=W,k=W);return t&&P.forEach(function(K){return e(y,K)}),Ss&&Km(y,U),I}function m(y,w,C,N){if(typeof C=="object"&&C!==null&&C.type===xb&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case CN:e:{for(var I=C.key,k=w;k!==null;){if(k.key===I){if(I=C.type,I===xb){if(k.tag===7){n(y,k.sibling),w=s(k,C.props.children),w.return=y,y=w;break e}}else if(k.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===xp&&p9(I)===k.type){n(y,k.sibling),w=s(k,C.props),w.ref=a1(y,k,C),w.return=y,y=w;break e}n(y,k);break}else e(y,k);k=k.sibling}C.type===xb?(w=a0(C.props.children,y.mode,N,C.key),w.return=y,y=w):(N=oT(C.type,C.key,C.props,null,y.mode,N),N.ref=a1(y,w,C),N.return=y,y=N)}return o(y);case Nb:e:{for(k=C.key;w!==null;){if(w.key===k)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){n(y,w.sibling),w=s(w,C.children||[]),w.return=y,y=w;break e}else{n(y,w);break}else e(y,w);w=w.sibling}w=nD(C,y.mode,N),w.return=y,y=w}return o(y);case xp:return k=C._init,m(y,w,k(C._payload),N)}if(H1(C))return p(y,w,C,N);if(n1(C))return g(y,w,C,N);ON(y,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(n(y,w.sibling),w=s(w,C),w.return=y,y=w):(n(y,w),w=tD(C,y.mode,N),w.return=y,y=w),o(y)):n(y,w)}return m}var NE=MJ(!0),BJ=MJ(!1),AR=vm(null),SR=null,Bb=null,N8=null;function x8(){N8=Bb=SR=null}function T8(t){var e=AR.current;ps(AR),t._currentValue=e}function UB(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function iv(t,e){SR=t,N8=Bb=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Xa=!0),t.firstContext=null)}function Ul(t){var e=t._currentValue;if(N8!==t)if(t={context:t,memoizedValue:e,next:null},Bb===null){if(SR===null)throw Error(Be(308));Bb=t,SR.dependencies={lanes:0,firstContext:t}}else Bb=Bb.next=t;return e}var wy=null;function R8(t){wy===null?wy=[t]:wy.push(t)}function LJ(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,R8(e)):(n.next=s.next,s.next=n),e.interleaved=n,xf(t,r)}function xf(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Tp=!1;function k8(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function UJ(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gf(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Mg(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,nr&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,xf(t,n)}return s=r.interleaved,s===null?(e.next=e,R8(r)):(e.next=s.next,s.next=e),r.interleaved=e,xf(t,n)}function eT(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,m8(t,n)}}function g9(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function IR(t,e,n,r){var s=t.updateQueue;Tp=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Ls({},d,h);break e;case 2:Tp=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);I0|=o,t.lanes=o,t.memoizedState=d}}function m9(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Be(191,s));s.call(r)}}}var bI={},Gd=vm(bI),EA=vm(bI),CA=vm(bI);function by(t){if(t===bI)throw Error(Be(174));return t}function P8(t,e){switch(as(CA,e),as(EA,t),as(Gd,bI),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:wB(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=wB(e,t)}ps(Gd),as(Gd,e)}function xE(){ps(Gd),ps(EA),ps(CA)}function $J(t){by(CA.current);var e=by(Gd.current),n=wB(e,t.type);e!==n&&(as(EA,t),as(Gd,n))}function O8(t){EA.current===t&&(ps(Gd),ps(EA))}var Rs=vm(0);function NR(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var YO=[];function D8(){for(var t=0;t<YO.length;t++)YO[t]._workInProgressVersionPrimary=null;YO.length=0}var tT=Ff.ReactCurrentDispatcher,QO=Ff.ReactCurrentBatchConfig,S0=0,Bs=null,yi=null,Mi=null,xR=!1,I_=!1,_A=0,Kme=0;function _o(){throw Error(Be(321))}function M8(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zu(t[n],e[n]))return!1;return!0}function B8(t,e,n,r,s,i){if(S0=i,Bs=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tT.current=t===null||t.memoizedState===null?Zme:Xme,t=n(r,s),I_){i=0;do{if(I_=!1,_A=0,25<=i)throw Error(Be(301));i+=1,Mi=yi=null,e.updateQueue=null,tT.current=eye,t=n(r,s)}while(I_)}if(tT.current=TR,e=yi!==null&&yi.next!==null,S0=0,Mi=yi=Bs=null,xR=!1,e)throw Error(Be(300));return t}function L8(){var t=_A!==0;return _A=0,t}function pd(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mi===null?Bs.memoizedState=Mi=t:Mi=Mi.next=t,Mi}function $l(){if(yi===null){var t=Bs.alternate;t=t!==null?t.memoizedState:null}else t=yi.next;var e=Mi===null?Bs.memoizedState:Mi.next;if(e!==null)Mi=e,yi=t;else{if(t===null)throw Error(Be(310));yi=t,t={memoizedState:yi.memoizedState,baseState:yi.baseState,baseQueue:yi.baseQueue,queue:yi.queue,next:null},Mi===null?Bs.memoizedState=Mi=t:Mi=Mi.next=t}return Mi}function AA(t,e){return typeof e=="function"?e(t):e}function JO(t){var e=$l(),n=e.queue;if(n===null)throw Error(Be(311));n.lastRenderedReducer=t;var r=yi,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((S0&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,Bs.lanes|=u,I0|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,zu(r,e.memoizedState)||(Xa=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Bs.lanes|=i,I0|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ZO(t){var e=$l(),n=e.queue;if(n===null)throw Error(Be(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);zu(i,e.memoizedState)||(Xa=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function FJ(){}function jJ(t,e){var n=Bs,r=$l(),s=e(),i=!zu(r.memoizedState,s);if(i&&(r.memoizedState=s,Xa=!0),r=r.queue,U8(HJ.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Mi!==null&&Mi.memoizedState.tag&1){if(n.flags|=2048,SA(9,zJ.bind(null,n,r,s,e),void 0,null),Hi===null)throw Error(Be(349));S0&30||WJ(n,e,s)}return s}function WJ(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Bs.updateQueue,e===null?(e={lastEffect:null,stores:null},Bs.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function zJ(t,e,n,r){e.value=n,e.getSnapshot=r,GJ(e)&&qJ(t)}function HJ(t,e,n){return n(function(){GJ(e)&&qJ(t)})}function GJ(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zu(t,n)}catch{return!0}}function qJ(t){var e=xf(t,1);e!==null&&$u(e,t,1,-1)}function y9(t){var e=pd();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:AA,lastRenderedState:t},e.queue=t,t=t.dispatch=Jme.bind(null,Bs,t),[e.memoizedState,t]}function SA(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Bs.updateQueue,e===null?(e={lastEffect:null,stores:null},Bs.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function VJ(){return $l().memoizedState}function nT(t,e,n,r){var s=pd();Bs.flags|=t,s.memoizedState=SA(1|e,n,void 0,r===void 0?null:r)}function v2(t,e,n,r){var s=$l();r=r===void 0?null:r;var i=void 0;if(yi!==null){var o=yi.memoizedState;if(i=o.destroy,r!==null&&M8(r,o.deps)){s.memoizedState=SA(e,n,i,r);return}}Bs.flags|=t,s.memoizedState=SA(1|e,n,i,r)}function w9(t,e){return nT(8390656,8,t,e)}function U8(t,e){return v2(2048,8,t,e)}function KJ(t,e){return v2(4,2,t,e)}function YJ(t,e){return v2(4,4,t,e)}function QJ(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function JJ(t,e,n){return n=n!=null?n.concat([t]):null,v2(4,4,QJ.bind(null,e,t),n)}function $8(){}function ZJ(t,e){var n=$l();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&M8(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function XJ(t,e){var n=$l();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&M8(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function eZ(t,e,n){return S0&21?(zu(n,e)||(n=iJ(),Bs.lanes|=n,I0|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Xa=!0),t.memoizedState=n)}function Yme(t,e){var n=Tr;Tr=n!==0&&4>n?n:4,t(!0);var r=QO.transition;QO.transition={};try{t(!1),e()}finally{Tr=n,QO.transition=r}}function tZ(){return $l().memoizedState}function Qme(t,e,n){var r=Lg(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},nZ(t))rZ(e,n);else if(n=LJ(t,e,n,r),n!==null){var s=fa();$u(n,t,r,s),sZ(n,e,r)}}function Jme(t,e,n){var r=Lg(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(nZ(t))rZ(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,zu(a,o)){var c=e.interleaved;c===null?(s.next=s,R8(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=LJ(t,e,s,r),n!==null&&(s=fa(),$u(n,t,r,s),sZ(n,e,r))}}function nZ(t){var e=t.alternate;return t===Bs||e!==null&&e===Bs}function rZ(t,e){I_=xR=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function sZ(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,m8(t,n)}}var TR={readContext:Ul,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},Zme={readContext:Ul,useCallback:function(t,e){return pd().memoizedState=[t,e===void 0?null:e],t},useContext:Ul,useEffect:w9,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,nT(4194308,4,QJ.bind(null,e,t),n)},useLayoutEffect:function(t,e){return nT(4194308,4,t,e)},useInsertionEffect:function(t,e){return nT(4,2,t,e)},useMemo:function(t,e){var n=pd();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=pd();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Qme.bind(null,Bs,t),[r.memoizedState,t]},useRef:function(t){var e=pd();return t={current:t},e.memoizedState=t},useState:y9,useDebugValue:$8,useDeferredValue:function(t){return pd().memoizedState=t},useTransition:function(){var t=y9(!1),e=t[0];return t=Yme.bind(null,t[1]),pd().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Bs,s=pd();if(Ss){if(n===void 0)throw Error(Be(407));n=n()}else{if(n=e(),Hi===null)throw Error(Be(349));S0&30||WJ(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,w9(HJ.bind(null,r,i,t),[t]),r.flags|=2048,SA(9,zJ.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=pd(),e=Hi.identifierPrefix;if(Ss){var n=lf,r=cf;n=(r&~(1<<32-Uu(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=_A++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Kme++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Xme={readContext:Ul,useCallback:ZJ,useContext:Ul,useEffect:U8,useImperativeHandle:JJ,useInsertionEffect:KJ,useLayoutEffect:YJ,useMemo:XJ,useReducer:JO,useRef:VJ,useState:function(){return JO(AA)},useDebugValue:$8,useDeferredValue:function(t){var e=$l();return eZ(e,yi.memoizedState,t)},useTransition:function(){var t=JO(AA)[0],e=$l().memoizedState;return[t,e]},useMutableSource:FJ,useSyncExternalStore:jJ,useId:tZ,unstable_isNewReconciler:!1},eye={readContext:Ul,useCallback:ZJ,useContext:Ul,useEffect:U8,useImperativeHandle:JJ,useInsertionEffect:KJ,useLayoutEffect:YJ,useMemo:XJ,useReducer:ZO,useRef:VJ,useState:function(){return ZO(AA)},useDebugValue:$8,useDeferredValue:function(t){var e=$l();return yi===null?e.memoizedState=t:eZ(e,yi.memoizedState,t)},useTransition:function(){var t=ZO(AA)[0],e=$l().memoizedState;return[t,e]},useMutableSource:FJ,useSyncExternalStore:jJ,useId:tZ,unstable_isNewReconciler:!1};function pu(t,e){if(t&&t.defaultProps){e=Ls({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function $B(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ls({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var E2={isMounted:function(t){return(t=t._reactInternals)?sw(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=fa(),s=Lg(t),i=gf(r,s);i.payload=e,n!=null&&(i.callback=n),e=Mg(t,i,s),e!==null&&($u(e,t,s,r),eT(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=fa(),s=Lg(t),i=gf(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Mg(t,i,s),e!==null&&($u(e,t,s,r),eT(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=fa(),r=Lg(t),s=gf(n,r);s.tag=2,e!=null&&(s.callback=e),e=Mg(t,s,r),e!==null&&($u(e,t,r,n),eT(e,t,r))}};function b9(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!yA(n,r)||!yA(s,i):!0}function iZ(t,e,n){var r=!1,s=rm,i=e.contextType;return typeof i=="object"&&i!==null?i=Ul(i):(s=rc(e)?_0:jo.current,r=e.contextTypes,i=(r=r!=null)?SE(t,s):rm),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=E2,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function v9(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&E2.enqueueReplaceState(e,e.state,null)}function FB(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},k8(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ul(i):(i=rc(e)?_0:jo.current,s.context=SE(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&($B(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&E2.enqueueReplaceState(s,s.state,null),IR(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function TE(t,e){try{var n="",r=e;do n+=xge(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function XO(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function jB(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var tye=typeof WeakMap=="function"?WeakMap:Map;function oZ(t,e,n){n=gf(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){kR||(kR=!0,JB=r),jB(t,e)},n}function aZ(t,e,n){n=gf(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){jB(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){jB(t,e),typeof r!="function"&&(Bg===null?Bg=new Set([this]):Bg.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function E9(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new tye;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=gye.bind(null,t,e,n),e.then(t,t))}function C9(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _9(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=gf(-1,1),e.tag=2,Mg(n,e,1))),n.lanes|=1),t)}var nye=Ff.ReactCurrentOwner,Xa=!1;function Xo(t,e,n,r){e.child=t===null?BJ(e,null,n,r):NE(e,t.child,n,r)}function A9(t,e,n,r,s){n=n.render;var i=e.ref;return iv(e,s),r=B8(t,e,n,r,i,s),n=L8(),t!==null&&!Xa?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Tf(t,e,s)):(Ss&&n&&A8(e),e.flags|=1,Xo(t,e,r,s),e.child)}function S9(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!V8(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,cZ(t,e,i,r,s)):(t=oT(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:yA,n(o,r)&&t.ref===e.ref)return Tf(t,e,s)}return e.flags|=1,t=Ug(i,r),t.ref=e.ref,t.return=e,e.child=t}function cZ(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(yA(i,r)&&t.ref===e.ref)if(Xa=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Xa=!0);else return e.lanes=t.lanes,Tf(t,e,s)}return WB(t,e,n,r,s)}function lZ(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},as(Ub,kc),kc|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,as(Ub,kc),kc|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,as(Ub,kc),kc|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,as(Ub,kc),kc|=r;return Xo(t,e,s,n),e.child}function uZ(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function WB(t,e,n,r,s){var i=rc(n)?_0:jo.current;return i=SE(e,i),iv(e,s),n=B8(t,e,n,r,i,s),r=L8(),t!==null&&!Xa?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Tf(t,e,s)):(Ss&&r&&A8(e),e.flags|=1,Xo(t,e,n,s),e.child)}function I9(t,e,n,r,s){if(rc(n)){var i=!0;ER(e)}else i=!1;if(iv(e,s),e.stateNode===null)rT(t,e),iZ(e,n,r),FB(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Ul(l):(l=rc(n)?_0:jo.current,l=SE(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&v9(e,o,r,l),Tp=!1;var h=e.memoizedState;o.state=h,IR(e,r,o,s),c=e.memoizedState,a!==r||h!==c||nc.current||Tp?(typeof u=="function"&&($B(e,n,u,r),c=e.memoizedState),(a=Tp||b9(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,UJ(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:pu(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ul(c):(c=rc(n)?_0:jo.current,c=SE(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&v9(e,o,r,c),Tp=!1,h=e.memoizedState,o.state=h,IR(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||nc.current||Tp?(typeof f=="function"&&($B(e,n,f,r),p=e.memoizedState),(l=Tp||b9(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return zB(t,e,n,r,i,s)}function zB(t,e,n,r,s,i){uZ(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&d9(e,n,!1),Tf(t,e,i);r=e.stateNode,nye.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=NE(e,t.child,null,i),e.child=NE(e,null,a,i)):Xo(t,e,a,i),e.memoizedState=r.state,s&&d9(e,n,!0),e.child}function dZ(t){var e=t.stateNode;e.pendingContext?u9(t,e.pendingContext,e.pendingContext!==e.context):e.context&&u9(t,e.context,!1),P8(t,e.containerInfo)}function N9(t,e,n,r,s){return IE(),I8(s),e.flags|=256,Xo(t,e,n,r),e.child}var HB={dehydrated:null,treeContext:null,retryLane:0};function GB(t){return{baseLanes:t,cachePool:null,transitions:null}}function hZ(t,e,n){var r=e.pendingProps,s=Rs.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),as(Rs,s&1),t===null)return LB(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=A2(o,r,0,null),t=a0(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=GB(n),e.memoizedState=HB,t):F8(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return rye(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ug(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Ug(a,i):(i=a0(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?GB(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=HB,r}return i=t.child,t=i.sibling,r=Ug(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function F8(t,e){return e=A2({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function DN(t,e,n,r){return r!==null&&I8(r),NE(e,t.child,null,n),t=F8(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rye(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=XO(Error(Be(422))),DN(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=A2({mode:"visible",children:r.children},s,0,null),i=a0(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&NE(e,t.child,null,o),e.child.memoizedState=GB(o),e.memoizedState=HB,i);if(!(e.mode&1))return DN(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Be(419)),r=XO(i,r,void 0),DN(t,e,o,r)}if(a=(o&t.childLanes)!==0,Xa||a){if(r=Hi,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,xf(t,s),$u(r,t,s,-1))}return q8(),r=XO(Error(Be(421))),DN(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=mye.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,jc=Dg(s.nextSibling),Hc=e,Ss=!0,Su=null,t!==null&&(Rl[kl++]=cf,Rl[kl++]=lf,Rl[kl++]=A0,cf=t.id,lf=t.overflow,A0=e),e=F8(e,r.children),e.flags|=4096,e)}function x9(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),UB(t.return,e,n)}function eD(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function fZ(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Xo(t,e,r.children,n),r=Rs.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&x9(t,n,e);else if(t.tag===19)x9(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(as(Rs,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&NR(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),eD(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&NR(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}eD(e,!0,n,null,i);break;case"together":eD(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rT(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Tf(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),I0|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Be(153));if(e.child!==null){for(t=e.child,n=Ug(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ug(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sye(t,e,n){switch(e.tag){case 3:dZ(e),IE();break;case 5:$J(e);break;case 1:rc(e.type)&&ER(e);break;case 4:P8(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;as(AR,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(as(Rs,Rs.current&1),e.flags|=128,null):n&e.child.childLanes?hZ(t,e,n):(as(Rs,Rs.current&1),t=Tf(t,e,n),t!==null?t.sibling:null);as(Rs,Rs.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return fZ(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),as(Rs,Rs.current),r)break;return null;case 22:case 23:return e.lanes=0,lZ(t,e,n)}return Tf(t,e,n)}var pZ,qB,gZ,mZ;pZ=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qB=function(){};gZ=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,by(Gd.current);var i=null;switch(n){case"input":s=pB(t,s),r=pB(t,r),i=[];break;case"select":s=Ls({},s,{value:void 0}),r=Ls({},r,{value:void 0}),i=[];break;case"textarea":s=yB(t,s),r=yB(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=bR)}bB(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(uA.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(uA.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&ds("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};mZ=function(t,e,n,r){n!==r&&(e.flags|=4)};function c1(t,e){if(!Ss)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ao(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function iye(t,e,n){var r=e.pendingProps;switch(S8(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ao(e),null;case 1:return rc(e.type)&&vR(),Ao(e),null;case 3:return r=e.stateNode,xE(),ps(nc),ps(jo),D8(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(PN(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Su!==null&&(eL(Su),Su=null))),qB(t,e),Ao(e),null;case 5:O8(e);var s=by(CA.current);if(n=e.type,t!==null&&e.stateNode!=null)gZ(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Be(166));return Ao(e),null}if(t=by(Gd.current),PN(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Bd]=e,r[vA]=i,t=(e.mode&1)!==0,n){case"dialog":ds("cancel",r),ds("close",r);break;case"iframe":case"object":case"embed":ds("load",r);break;case"video":case"audio":for(s=0;s<q1.length;s++)ds(q1[s],r);break;case"source":ds("error",r);break;case"img":case"image":case"link":ds("error",r),ds("load",r);break;case"details":ds("toggle",r);break;case"input":Lj(r,i),ds("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ds("invalid",r);break;case"textarea":$j(r,i),ds("invalid",r)}bB(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&kN(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&kN(r.textContent,a,t),s=["children",""+a]):uA.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ds("scroll",r)}switch(n){case"input":_N(r),Uj(r,i,!0);break;case"textarea":_N(r),Fj(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=bR)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=HQ(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Bd]=e,t[vA]=r,pZ(t,e,!1,!1),e.stateNode=t;e:{switch(o=vB(n,r),n){case"dialog":ds("cancel",t),ds("close",t),s=r;break;case"iframe":case"object":case"embed":ds("load",t),s=r;break;case"video":case"audio":for(s=0;s<q1.length;s++)ds(q1[s],t);s=r;break;case"source":ds("error",t),s=r;break;case"img":case"image":case"link":ds("error",t),ds("load",t),s=r;break;case"details":ds("toggle",t),s=r;break;case"input":Lj(t,r),s=pB(t,r),ds("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ls({},r,{value:void 0}),ds("invalid",t);break;case"textarea":$j(t,r),s=yB(t,r),ds("invalid",t);break;default:s=r}bB(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?VQ(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&GQ(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&dA(t,c):typeof c=="number"&&dA(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(uA.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ds("scroll",t):c!=null&&u8(t,i,c,o))}switch(n){case"input":_N(t),Uj(t,r,!1);break;case"textarea":_N(t),Fj(t);break;case"option":r.value!=null&&t.setAttribute("value",""+nm(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?tv(t,!!r.multiple,i,!1):r.defaultValue!=null&&tv(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=bR)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ao(e),null;case 6:if(t&&e.stateNode!=null)mZ(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Be(166));if(n=by(CA.current),by(Gd.current),PN(e)){if(r=e.stateNode,n=e.memoizedProps,r[Bd]=e,(i=r.nodeValue!==n)&&(t=Hc,t!==null))switch(t.tag){case 3:kN(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&kN(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bd]=e,e.stateNode=r}return Ao(e),null;case 13:if(ps(Rs),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ss&&jc!==null&&e.mode&1&&!(e.flags&128))DJ(),IE(),e.flags|=98560,i=!1;else if(i=PN(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Be(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Be(317));i[Bd]=e}else IE(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ao(e),i=!1}else Su!==null&&(eL(Su),Su=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Rs.current&1?Ci===0&&(Ci=3):q8())),e.updateQueue!==null&&(e.flags|=4),Ao(e),null);case 4:return xE(),qB(t,e),t===null&&wA(e.stateNode.containerInfo),Ao(e),null;case 10:return T8(e.type._context),Ao(e),null;case 17:return rc(e.type)&&vR(),Ao(e),null;case 19:if(ps(Rs),i=e.memoizedState,i===null)return Ao(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)c1(i,!1);else{if(Ci!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=NR(t),o!==null){for(e.flags|=128,c1(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return as(Rs,Rs.current&1|2),e.child}t=t.sibling}i.tail!==null&&ti()>RE&&(e.flags|=128,r=!0,c1(i,!1),e.lanes=4194304)}else{if(!r)if(t=NR(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),c1(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ss)return Ao(e),null}else 2*ti()-i.renderingStartTime>RE&&n!==1073741824&&(e.flags|=128,r=!0,c1(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ti(),e.sibling=null,n=Rs.current,as(Rs,r?n&1|2:n&1),e):(Ao(e),null);case 22:case 23:return G8(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?kc&1073741824&&(Ao(e),e.subtreeFlags&6&&(e.flags|=8192)):Ao(e),null;case 24:return null;case 25:return null}throw Error(Be(156,e.tag))}function oye(t,e){switch(S8(e),e.tag){case 1:return rc(e.type)&&vR(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xE(),ps(nc),ps(jo),D8(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return O8(e),null;case 13:if(ps(Rs),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Be(340));IE()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ps(Rs),null;case 4:return xE(),null;case 10:return T8(e.type._context),null;case 22:case 23:return G8(),null;case 24:return null;default:return null}}var MN=!1,Uo=!1,aye=typeof WeakSet=="function"?WeakSet:Set,yt=null;function Lb(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Hs(t,e,r)}else n.current=null}function VB(t,e,n){try{n()}catch(r){Hs(t,e,r)}}var T9=!1;function cye(t,e){if(RB=mR,t=EJ(),_8(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(kB={focusedElem:t,selectionRange:n},mR=!1,yt=e;yt!==null;)if(e=yt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,yt=t;else for(;yt!==null;){e=yt;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,m=p.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:pu(e.type,g),m);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Be(163))}}catch(N){Hs(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,yt=t;break}yt=e.return}return p=T9,T9=!1,p}function N_(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&VB(e,n,i)}s=s.next}while(s!==r)}}function C2(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function KB(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function yZ(t){var e=t.alternate;e!==null&&(t.alternate=null,yZ(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Bd],delete e[vA],delete e[DB],delete e[Hme],delete e[Gme])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function wZ(t){return t.tag===5||t.tag===3||t.tag===4}function R9(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wZ(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function YB(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=bR));else if(r!==4&&(t=t.child,t!==null))for(YB(t,e,n),t=t.sibling;t!==null;)YB(t,e,n),t=t.sibling}function QB(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(QB(t,e,n),t=t.sibling;t!==null;)QB(t,e,n),t=t.sibling}var to=null,Au=!1;function Jf(t,e,n){for(n=n.child;n!==null;)bZ(t,e,n),n=n.sibling}function bZ(t,e,n){if(Hd&&typeof Hd.onCommitFiberUnmount=="function")try{Hd.onCommitFiberUnmount(p2,n)}catch{}switch(n.tag){case 5:Uo||Lb(n,e);case 6:var r=to,s=Au;to=null,Jf(t,e,n),to=r,Au=s,to!==null&&(Au?(t=to,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):to.removeChild(n.stateNode));break;case 18:to!==null&&(Au?(t=to,n=n.stateNode,t.nodeType===8?VO(t.parentNode,n):t.nodeType===1&&VO(t,n),gA(t)):VO(to,n.stateNode));break;case 4:r=to,s=Au,to=n.stateNode.containerInfo,Au=!0,Jf(t,e,n),to=r,Au=s;break;case 0:case 11:case 14:case 15:if(!Uo&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&VB(n,e,o),s=s.next}while(s!==r)}Jf(t,e,n);break;case 1:if(!Uo&&(Lb(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Hs(n,e,a)}Jf(t,e,n);break;case 21:Jf(t,e,n);break;case 22:n.mode&1?(Uo=(r=Uo)||n.memoizedState!==null,Jf(t,e,n),Uo=r):Jf(t,e,n);break;default:Jf(t,e,n)}}function k9(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new aye),e.forEach(function(r){var s=yye.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function su(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:to=a.stateNode,Au=!1;break e;case 3:to=a.stateNode.containerInfo,Au=!0;break e;case 4:to=a.stateNode.containerInfo,Au=!0;break e}a=a.return}if(to===null)throw Error(Be(160));bZ(i,o,s),to=null,Au=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){Hs(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vZ(e,t),e=e.sibling}function vZ(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(su(e,t),td(t),r&4){try{N_(3,t,t.return),C2(3,t)}catch(g){Hs(t,t.return,g)}try{N_(5,t,t.return)}catch(g){Hs(t,t.return,g)}}break;case 1:su(e,t),td(t),r&512&&n!==null&&Lb(n,n.return);break;case 5:if(su(e,t),td(t),r&512&&n!==null&&Lb(n,n.return),t.flags&32){var s=t.stateNode;try{dA(s,"")}catch(g){Hs(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&WQ(s,i),vB(a,o);var l=vB(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?VQ(s,d):u==="dangerouslySetInnerHTML"?GQ(s,d):u==="children"?dA(s,d):u8(s,u,d,l)}switch(a){case"input":gB(s,i);break;case"textarea":zQ(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?tv(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?tv(s,!!i.multiple,i.defaultValue,!0):tv(s,!!i.multiple,i.multiple?[]:"",!1))}s[vA]=i}catch(g){Hs(t,t.return,g)}}break;case 6:if(su(e,t),td(t),r&4){if(t.stateNode===null)throw Error(Be(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Hs(t,t.return,g)}}break;case 3:if(su(e,t),td(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{gA(e.containerInfo)}catch(g){Hs(t,t.return,g)}break;case 4:su(e,t),td(t);break;case 13:su(e,t),td(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(z8=ti())),r&4&&k9(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Uo=(l=Uo)||u,su(e,t),Uo=l):su(e,t),td(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(yt=t,u=t.child;u!==null;){for(d=yt=u;yt!==null;){switch(h=yt,f=h.child,h.tag){case 0:case 11:case 14:case 15:N_(4,h,h.return);break;case 1:Lb(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Hs(r,n,g)}}break;case 5:Lb(h,h.return);break;case 22:if(h.memoizedState!==null){O9(d);continue}}f!==null?(f.return=h,yt=f):O9(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=qQ("display",o))}catch(g){Hs(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){Hs(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:su(e,t),td(t),r&4&&k9(t);break;case 21:break;default:su(e,t),td(t)}}function td(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(wZ(n)){var r=n;break e}n=n.return}throw Error(Be(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(dA(s,""),r.flags&=-33);var i=R9(t);QB(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=R9(t);YB(t,a,o);break;default:throw Error(Be(161))}}catch(c){Hs(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function lye(t,e,n){yt=t,EZ(t)}function EZ(t,e,n){for(var r=(t.mode&1)!==0;yt!==null;){var s=yt,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||MN;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Uo;a=MN;var l=Uo;if(MN=o,(Uo=c)&&!l)for(yt=s;yt!==null;)o=yt,c=o.child,o.tag===22&&o.memoizedState!==null?D9(s):c!==null?(c.return=o,yt=c):D9(s);for(;i!==null;)yt=i,EZ(i),i=i.sibling;yt=s,MN=a,Uo=l}P9(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,yt=i):P9(t)}}function P9(t){for(;yt!==null;){var e=yt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Uo||C2(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Uo)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:pu(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&m9(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}m9(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&gA(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Be(163))}Uo||e.flags&512&&KB(e)}catch(h){Hs(e,e.return,h)}}if(e===t){yt=null;break}if(n=e.sibling,n!==null){n.return=e.return,yt=n;break}yt=e.return}}function O9(t){for(;yt!==null;){var e=yt;if(e===t){yt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,yt=n;break}yt=e.return}}function D9(t){for(;yt!==null;){var e=yt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{C2(4,e)}catch(c){Hs(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Hs(e,s,c)}}var i=e.return;try{KB(e)}catch(c){Hs(e,i,c)}break;case 5:var o=e.return;try{KB(e)}catch(c){Hs(e,o,c)}}}catch(c){Hs(e,e.return,c)}if(e===t){yt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,yt=a;break}yt=e.return}}var uye=Math.ceil,RR=Ff.ReactCurrentDispatcher,j8=Ff.ReactCurrentOwner,Ml=Ff.ReactCurrentBatchConfig,nr=0,Hi=null,li=null,fo=0,kc=0,Ub=vm(0),Ci=0,IA=null,I0=0,_2=0,W8=0,x_=null,qa=null,z8=0,RE=1/0,Mh=null,kR=!1,JB=null,Bg=null,BN=!1,gg=null,PR=0,T_=0,ZB=null,sT=-1,iT=0;function fa(){return nr&6?ti():sT!==-1?sT:sT=ti()}function Lg(t){return t.mode&1?nr&2&&fo!==0?fo&-fo:Vme.transition!==null?(iT===0&&(iT=iJ()),iT):(t=Tr,t!==0||(t=window.event,t=t===void 0?16:hJ(t.type)),t):1}function $u(t,e,n,r){if(50<T_)throw T_=0,ZB=null,Error(Be(185));mI(t,n,r),(!(nr&2)||t!==Hi)&&(t===Hi&&(!(nr&2)&&(_2|=n),Ci===4&&Bp(t,fo)),sc(t,r),n===1&&nr===0&&!(e.mode&1)&&(RE=ti()+500,b2&&Em()))}function sc(t,e){var n=t.callbackNode;Vge(t,e);var r=gR(t,t===Hi?fo:0);if(r===0)n!==null&&zj(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&zj(n),e===1)t.tag===0?qme(M9.bind(null,t)):kJ(M9.bind(null,t)),Wme(function(){!(nr&6)&&Em()}),n=null;else{switch(oJ(r)){case 1:n=g8;break;case 4:n=rJ;break;case 16:n=pR;break;case 536870912:n=sJ;break;default:n=pR}n=TZ(n,CZ.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function CZ(t,e){if(sT=-1,iT=0,nr&6)throw Error(Be(327));var n=t.callbackNode;if(ov()&&t.callbackNode!==n)return null;var r=gR(t,t===Hi?fo:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=OR(t,r);else{e=r;var s=nr;nr|=2;var i=AZ();(Hi!==t||fo!==e)&&(Mh=null,RE=ti()+500,o0(t,e));do try{fye();break}catch(a){_Z(t,a)}while(!0);x8(),RR.current=i,nr=s,li!==null?e=0:(Hi=null,fo=0,e=Ci)}if(e!==0){if(e===2&&(s=SB(t),s!==0&&(r=s,e=XB(t,s))),e===1)throw n=IA,o0(t,0),Bp(t,r),sc(t,ti()),n;if(e===6)Bp(t,r);else{if(s=t.current.alternate,!(r&30)&&!dye(s)&&(e=OR(t,r),e===2&&(i=SB(t),i!==0&&(r=i,e=XB(t,i))),e===1))throw n=IA,o0(t,0),Bp(t,r),sc(t,ti()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Be(345));case 2:Ym(t,qa,Mh);break;case 3:if(Bp(t,r),(r&130023424)===r&&(e=z8+500-ti(),10<e)){if(gR(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){fa(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=OB(Ym.bind(null,t,qa,Mh),e);break}Ym(t,qa,Mh);break;case 4:if(Bp(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Uu(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ti()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*uye(r/1960))-r,10<r){t.timeoutHandle=OB(Ym.bind(null,t,qa,Mh),r);break}Ym(t,qa,Mh);break;case 5:Ym(t,qa,Mh);break;default:throw Error(Be(329))}}}return sc(t,ti()),t.callbackNode===n?CZ.bind(null,t):null}function XB(t,e){var n=x_;return t.current.memoizedState.isDehydrated&&(o0(t,e).flags|=256),t=OR(t,e),t!==2&&(e=qa,qa=n,e!==null&&eL(e)),t}function eL(t){qa===null?qa=t:qa.push.apply(qa,t)}function dye(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!zu(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bp(t,e){for(e&=~W8,e&=~_2,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Uu(e),r=1<<n;t[n]=-1,e&=~r}}function M9(t){if(nr&6)throw Error(Be(327));ov();var e=gR(t,0);if(!(e&1))return sc(t,ti()),null;var n=OR(t,e);if(t.tag!==0&&n===2){var r=SB(t);r!==0&&(e=r,n=XB(t,r))}if(n===1)throw n=IA,o0(t,0),Bp(t,e),sc(t,ti()),n;if(n===6)throw Error(Be(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ym(t,qa,Mh),sc(t,ti()),null}function H8(t,e){var n=nr;nr|=1;try{return t(e)}finally{nr=n,nr===0&&(RE=ti()+500,b2&&Em())}}function N0(t){gg!==null&&gg.tag===0&&!(nr&6)&&ov();var e=nr;nr|=1;var n=Ml.transition,r=Tr;try{if(Ml.transition=null,Tr=1,t)return t()}finally{Tr=r,Ml.transition=n,nr=e,!(nr&6)&&Em()}}function G8(){kc=Ub.current,ps(Ub)}function o0(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,jme(n)),li!==null)for(n=li.return;n!==null;){var r=n;switch(S8(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vR();break;case 3:xE(),ps(nc),ps(jo),D8();break;case 5:O8(r);break;case 4:xE();break;case 13:ps(Rs);break;case 19:ps(Rs);break;case 10:T8(r.type._context);break;case 22:case 23:G8()}n=n.return}if(Hi=t,li=t=Ug(t.current,null),fo=kc=e,Ci=0,IA=null,W8=_2=I0=0,qa=x_=null,wy!==null){for(e=0;e<wy.length;e++)if(n=wy[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}wy=null}return t}function _Z(t,e){do{var n=li;try{if(x8(),tT.current=TR,xR){for(var r=Bs.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}xR=!1}if(S0=0,Mi=yi=Bs=null,I_=!1,_A=0,j8.current=null,n===null||n.return===null){Ci=1,IA=e,li=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=fo,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=C9(o);if(f!==null){f.flags&=-257,_9(f,o,a,i,e),f.mode&1&&E9(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){E9(i,l,e),q8();break e}c=Error(Be(426))}}else if(Ss&&a.mode&1){var m=C9(o);if(m!==null){!(m.flags&65536)&&(m.flags|=256),_9(m,o,a,i,e),I8(TE(c,a));break e}}i=c=TE(c,a),Ci!==4&&(Ci=2),x_===null?x_=[i]:x_.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=oZ(i,c,e);g9(i,y);break e;case 1:a=c;var w=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Bg===null||!Bg.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=aZ(i,a,e);g9(i,N);break e}}i=i.return}while(i!==null)}IZ(n)}catch(I){e=I,li===n&&n!==null&&(li=n=n.return);continue}break}while(!0)}function AZ(){var t=RR.current;return RR.current=TR,t===null?TR:t}function q8(){(Ci===0||Ci===3||Ci===2)&&(Ci=4),Hi===null||!(I0&268435455)&&!(_2&268435455)||Bp(Hi,fo)}function OR(t,e){var n=nr;nr|=2;var r=AZ();(Hi!==t||fo!==e)&&(Mh=null,o0(t,e));do try{hye();break}catch(s){_Z(t,s)}while(!0);if(x8(),nr=n,RR.current=r,li!==null)throw Error(Be(261));return Hi=null,fo=0,Ci}function hye(){for(;li!==null;)SZ(li)}function fye(){for(;li!==null&&!Uge();)SZ(li)}function SZ(t){var e=xZ(t.alternate,t,kc);t.memoizedProps=t.pendingProps,e===null?IZ(t):li=e,j8.current=null}function IZ(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=oye(n,e),n!==null){n.flags&=32767,li=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ci=6,li=null;return}}else if(n=iye(n,e,kc),n!==null){li=n;return}if(e=e.sibling,e!==null){li=e;return}li=e=t}while(e!==null);Ci===0&&(Ci=5)}function Ym(t,e,n){var r=Tr,s=Ml.transition;try{Ml.transition=null,Tr=1,pye(t,e,n,r)}finally{Ml.transition=s,Tr=r}return null}function pye(t,e,n,r){do ov();while(gg!==null);if(nr&6)throw Error(Be(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Be(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Kge(t,i),t===Hi&&(li=Hi=null,fo=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||BN||(BN=!0,TZ(pR,function(){return ov(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ml.transition,Ml.transition=null;var o=Tr;Tr=1;var a=nr;nr|=4,j8.current=null,cye(t,n),vZ(n,t),Dme(kB),mR=!!RB,kB=RB=null,t.current=n,lye(n),$ge(),nr=a,Tr=o,Ml.transition=i}else t.current=n;if(BN&&(BN=!1,gg=t,PR=s),i=t.pendingLanes,i===0&&(Bg=null),Wge(n.stateNode),sc(t,ti()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(kR)throw kR=!1,t=JB,JB=null,t;return PR&1&&t.tag!==0&&ov(),i=t.pendingLanes,i&1?t===ZB?T_++:(T_=0,ZB=t):T_=0,Em(),null}function ov(){if(gg!==null){var t=oJ(PR),e=Ml.transition,n=Tr;try{if(Ml.transition=null,Tr=16>t?16:t,gg===null)var r=!1;else{if(t=gg,gg=null,PR=0,nr&6)throw Error(Be(331));var s=nr;for(nr|=4,yt=t.current;yt!==null;){var i=yt,o=i.child;if(yt.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(yt=l;yt!==null;){var u=yt;switch(u.tag){case 0:case 11:case 15:N_(8,u,i)}var d=u.child;if(d!==null)d.return=u,yt=d;else for(;yt!==null;){u=yt;var h=u.sibling,f=u.return;if(yZ(u),u===l){yt=null;break}if(h!==null){h.return=f,yt=h;break}yt=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(g!==null)}}yt=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,yt=o;else e:for(;yt!==null;){if(i=yt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:N_(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,yt=y;break e}yt=i.return}}var w=t.current;for(yt=w;yt!==null;){o=yt;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,yt=C;else e:for(o=w;yt!==null;){if(a=yt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:C2(9,a)}}catch(I){Hs(a,a.return,I)}if(a===o){yt=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,yt=N;break e}yt=a.return}}if(nr=s,Em(),Hd&&typeof Hd.onPostCommitFiberRoot=="function")try{Hd.onPostCommitFiberRoot(p2,t)}catch{}r=!0}return r}finally{Tr=n,Ml.transition=e}}return!1}function B9(t,e,n){e=TE(n,e),e=oZ(t,e,1),t=Mg(t,e,1),e=fa(),t!==null&&(mI(t,1,e),sc(t,e))}function Hs(t,e,n){if(t.tag===3)B9(t,t,n);else for(;e!==null;){if(e.tag===3){B9(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bg===null||!Bg.has(r))){t=TE(n,t),t=aZ(e,t,1),e=Mg(e,t,1),t=fa(),e!==null&&(mI(e,1,t),sc(e,t));break}}e=e.return}}function gye(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=fa(),t.pingedLanes|=t.suspendedLanes&n,Hi===t&&(fo&n)===n&&(Ci===4||Ci===3&&(fo&130023424)===fo&&500>ti()-z8?o0(t,0):W8|=n),sc(t,e)}function NZ(t,e){e===0&&(t.mode&1?(e=IN,IN<<=1,!(IN&130023424)&&(IN=4194304)):e=1);var n=fa();t=xf(t,e),t!==null&&(mI(t,e,n),sc(t,n))}function mye(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),NZ(t,n)}function yye(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Be(314))}r!==null&&r.delete(e),NZ(t,n)}var xZ;xZ=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nc.current)Xa=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Xa=!1,sye(t,e,n);Xa=!!(t.flags&131072)}else Xa=!1,Ss&&e.flags&1048576&&PJ(e,_R,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;rT(t,e),t=e.pendingProps;var s=SE(e,jo.current);iv(e,n),s=B8(null,e,r,t,s,n);var i=L8();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rc(r)?(i=!0,ER(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,k8(e),s.updater=E2,e.stateNode=s,s._reactInternals=e,FB(e,r,t,n),e=zB(null,e,r,!0,i,n)):(e.tag=0,Ss&&i&&A8(e),Xo(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(rT(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=bye(r),t=pu(r,t),s){case 0:e=WB(null,e,r,t,n);break e;case 1:e=I9(null,e,r,t,n);break e;case 11:e=A9(null,e,r,t,n);break e;case 14:e=S9(null,e,r,pu(r.type,t),n);break e}throw Error(Be(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pu(r,s),WB(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pu(r,s),I9(t,e,r,s,n);case 3:e:{if(dZ(e),t===null)throw Error(Be(387));r=e.pendingProps,i=e.memoizedState,s=i.element,UJ(t,e),IR(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=TE(Error(Be(423)),e),e=N9(t,e,r,n,s);break e}else if(r!==s){s=TE(Error(Be(424)),e),e=N9(t,e,r,n,s);break e}else for(jc=Dg(e.stateNode.containerInfo.firstChild),Hc=e,Ss=!0,Su=null,n=BJ(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(IE(),r===s){e=Tf(t,e,n);break e}Xo(t,e,r,n)}e=e.child}return e;case 5:return $J(e),t===null&&LB(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,PB(r,s)?o=null:i!==null&&PB(r,i)&&(e.flags|=32),uZ(t,e),Xo(t,e,o,n),e.child;case 6:return t===null&&LB(e),null;case 13:return hZ(t,e,n);case 4:return P8(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=NE(e,null,r,n):Xo(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pu(r,s),A9(t,e,r,s,n);case 7:return Xo(t,e,e.pendingProps,n),e.child;case 8:return Xo(t,e,e.pendingProps.children,n),e.child;case 12:return Xo(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,as(AR,r._currentValue),r._currentValue=o,i!==null)if(zu(i.value,o)){if(i.children===s.children&&!nc.current){e=Tf(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=gf(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),UB(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Be(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),UB(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Xo(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,iv(e,n),s=Ul(s),r=r(s),e.flags|=1,Xo(t,e,r,n),e.child;case 14:return r=e.type,s=pu(r,e.pendingProps),s=pu(r.type,s),S9(t,e,r,s,n);case 15:return cZ(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pu(r,s),rT(t,e),e.tag=1,rc(r)?(t=!0,ER(e)):t=!1,iv(e,n),iZ(e,r,s),FB(e,r,s,n),zB(null,e,r,!0,t,n);case 19:return fZ(t,e,n);case 22:return lZ(t,e,n)}throw Error(Be(156,e.tag))};function TZ(t,e){return nJ(t,e)}function wye(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ol(t,e,n,r){return new wye(t,e,n,r)}function V8(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bye(t){if(typeof t=="function")return V8(t)?1:0;if(t!=null){if(t=t.$$typeof,t===h8)return 11;if(t===f8)return 14}return 2}function Ug(t,e){var n=t.alternate;return n===null?(n=Ol(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function oT(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")V8(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case xb:return a0(n.children,s,i,e);case d8:o=8,s|=8;break;case uB:return t=Ol(12,n,e,s|2),t.elementType=uB,t.lanes=i,t;case dB:return t=Ol(13,n,e,s),t.elementType=dB,t.lanes=i,t;case hB:return t=Ol(19,n,e,s),t.elementType=hB,t.lanes=i,t;case $Q:return A2(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case LQ:o=10;break e;case UQ:o=9;break e;case h8:o=11;break e;case f8:o=14;break e;case xp:o=16,r=null;break e}throw Error(Be(130,t==null?t:typeof t,""))}return e=Ol(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function a0(t,e,n,r){return t=Ol(7,t,r,e),t.lanes=n,t}function A2(t,e,n,r){return t=Ol(22,t,r,e),t.elementType=$Q,t.lanes=n,t.stateNode={isHidden:!1},t}function tD(t,e,n){return t=Ol(6,t,null,e),t.lanes=n,t}function nD(t,e,n){return e=Ol(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function vye(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=BO(0),this.expirationTimes=BO(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=BO(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function K8(t,e,n,r,s,i,o,a,c){return t=new vye(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ol(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},k8(i),t}function Eye(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Nb,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function RZ(t){if(!t)return rm;t=t._reactInternals;e:{if(sw(t)!==t||t.tag!==1)throw Error(Be(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rc(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Be(171))}if(t.tag===1){var n=t.type;if(rc(n))return RJ(t,n,e)}return e}function kZ(t,e,n,r,s,i,o,a,c){return t=K8(n,r,!0,t,s,i,o,a,c),t.context=RZ(null),n=t.current,r=fa(),s=Lg(n),i=gf(r,s),i.callback=e??null,Mg(n,i,s),t.current.lanes=s,mI(t,s,r),sc(t,r),t}function S2(t,e,n,r){var s=e.current,i=fa(),o=Lg(s);return n=RZ(n),e.context===null?e.context=n:e.pendingContext=n,e=gf(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Mg(s,e,o),t!==null&&($u(t,s,o,i),eT(t,s,o)),o}function DR(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function L9(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Y8(t,e){L9(t,e),(t=t.alternate)&&L9(t,e)}function Cye(){return null}var PZ=typeof reportError=="function"?reportError:function(t){console.error(t)};function Q8(t){this._internalRoot=t}I2.prototype.render=Q8.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Be(409));S2(t,e,null,null)};I2.prototype.unmount=Q8.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;N0(function(){S2(null,t,null,null)}),e[Nf]=null}};function I2(t){this._internalRoot=t}I2.prototype.unstable_scheduleHydration=function(t){if(t){var e=lJ();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Mp.length&&e!==0&&e<Mp[n].priority;n++);Mp.splice(n,0,t),n===0&&dJ(t)}};function J8(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function N2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function U9(){}function _ye(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=DR(o);i.call(l)}}var o=kZ(e,r,t,0,null,!1,!1,"",U9);return t._reactRootContainer=o,t[Nf]=o.current,wA(t.nodeType===8?t.parentNode:t),N0(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=DR(c);a.call(l)}}var c=K8(t,0,!1,null,null,!1,!1,"",U9);return t._reactRootContainer=c,t[Nf]=c.current,wA(t.nodeType===8?t.parentNode:t),N0(function(){S2(e,c,n,r)}),c}function x2(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=DR(o);a.call(c)}}S2(e,o,t,s)}else o=_ye(n,e,t,s,r);return DR(o)}aJ=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=G1(e.pendingLanes);n!==0&&(m8(e,n|1),sc(e,ti()),!(nr&6)&&(RE=ti()+500,Em()))}break;case 13:N0(function(){var r=xf(t,1);if(r!==null){var s=fa();$u(r,t,1,s)}}),Y8(t,1)}};y8=function(t){if(t.tag===13){var e=xf(t,134217728);if(e!==null){var n=fa();$u(e,t,134217728,n)}Y8(t,134217728)}};cJ=function(t){if(t.tag===13){var e=Lg(t),n=xf(t,e);if(n!==null){var r=fa();$u(n,t,e,r)}Y8(t,e)}};lJ=function(){return Tr};uJ=function(t,e){var n=Tr;try{return Tr=t,e()}finally{Tr=n}};CB=function(t,e,n){switch(e){case"input":if(gB(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=w2(r);if(!s)throw Error(Be(90));jQ(r),gB(r,s)}}}break;case"textarea":zQ(t,n);break;case"select":e=n.value,e!=null&&tv(t,!!n.multiple,e,!1)}};QQ=H8;JQ=N0;var Aye={usingClientEntryPoint:!1,Events:[wI,Pb,w2,KQ,YQ,H8]},l1={findFiberByHostInstance:yy,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Sye={bundleType:l1.bundleType,version:l1.version,rendererPackageName:l1.rendererPackageName,rendererConfig:l1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ff.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=eJ(t),t===null?null:t.stateNode},findFiberByHostInstance:l1.findFiberByHostInstance||Cye,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var LN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!LN.isDisabled&&LN.supportsFiber)try{p2=LN.inject(Sye),Hd=LN}catch{}}Qc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Aye;Qc.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!J8(e))throw Error(Be(200));return Eye(t,e,null,n)};Qc.createRoot=function(t,e){if(!J8(t))throw Error(Be(299));var n=!1,r="",s=PZ;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=K8(t,1,!1,null,null,n,!1,r,s),t[Nf]=e.current,wA(t.nodeType===8?t.parentNode:t),new Q8(e)};Qc.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Be(188)):(t=Object.keys(t).join(","),Error(Be(268,t)));return t=eJ(e),t=t===null?null:t.stateNode,t};Qc.flushSync=function(t){return N0(t)};Qc.hydrate=function(t,e,n){if(!N2(e))throw Error(Be(200));return x2(null,t,e,!0,n)};Qc.hydrateRoot=function(t,e,n){if(!J8(t))throw Error(Be(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=PZ;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=kZ(e,null,t,1,n??null,s,!1,i,o),t[Nf]=e.current,wA(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new I2(e)};Qc.render=function(t,e,n){if(!N2(e))throw Error(Be(200));return x2(null,t,e,!1,n)};Qc.unmountComponentAtNode=function(t){if(!N2(t))throw Error(Be(40));return t._reactRootContainer?(N0(function(){x2(null,null,t,!1,function(){t._reactRootContainer=null,t[Nf]=null})}),!0):!1};Qc.unstable_batchedUpdates=H8;Qc.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!N2(n))throw Error(Be(200));if(t==null||t._reactInternals===void 0)throw Error(Be(38));return x2(t,e,n,!1,r)};Qc.version="18.3.1-next-f1338f8080-20240426";function OZ(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(OZ)}catch(t){console.error(t)}}OZ(),OQ.exports=Qc;var Z8=OQ.exports,$9=Z8;cB.createRoot=$9.createRoot,cB.hydrateRoot=$9.hydrateRoot;const DZ="2.32.0";let u1={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${DZ}`},Te=class tL extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof tL?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof tL&&n.cause.docsPath||n.docsPath,i=(a=u1.getDocsUrl)==null?void 0:a.call(u1,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...u1.version?[`Version: ${u1.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=DZ}walk(e){return MZ(this,e)}};function MZ(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?MZ(t.cause,e):e?null:t}let BZ=class extends Te{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class Iye extends Te{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class Nye extends Te{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let xye=class extends Te{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}},LZ=class extends Te{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},UZ=class extends Te{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class F9 extends Te{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function CC(t,{dir:e,size:n=32}={}){return typeof t=="string"?$g(t,{dir:e,size:n}):Tye(t,{dir:e,size:n})}function $g(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new UZ({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function Tye(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new UZ({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function Xd(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function qs(t){return Xd(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function qd(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const Rye=new TextEncoder;function _C(t,e={}){return typeof t=="number"||typeof t=="bigint"?Pye(t,e):typeof t=="boolean"?kye(t,e):Xd(t)?Fl(t,e):c0(t,e)}function kye(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(ql(n,{size:e.size}),CC(n,{size:e.size})):n}const mh={zero:48,nine:57,A:65,F:70,a:97,f:102};function j9(t){if(t>=mh.zero&&t<=mh.nine)return t-mh.zero;if(t>=mh.A&&t<=mh.F)return t-(mh.A-10);if(t>=mh.a&&t<=mh.f)return t-(mh.a-10)}function Fl(t,e={}){let n=t;e.size&&(ql(n,{size:e.size}),n=CC(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=j9(r.charCodeAt(a++)),l=j9(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new Te(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function Pye(t,e){const n=St(t,e);return Fl(n)}function c0(t,e={}){const n=Rye.encode(t);return typeof e.size=="number"?(ql(n,{size:e.size}),CC(n,{dir:"right",size:e.size})):n}function ql(t,{size:e}){if(qs(t)>e)throw new xye({givenSize:qs(t),maxSize:e})}function Kc(t,e={}){const{signed:n}=e;e.size&&ql(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Oye(t,e={}){let n=t;if(e.size&&(ql(n,{size:e.size}),n=qd(n)),qd(n)==="0x00")return!1;if(qd(n)==="0x01")return!0;throw new Nye(n)}function Hu(t,e={}){return Number(Kc(t,e))}function $Z(t,e={}){let n=Fl(t);return e.size&&(ql(n,{size:e.size}),n=qd(n,{dir:"right"})),new TextDecoder().decode(n)}const Dye=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function jl(t,e={}){return typeof t=="number"||typeof t=="bigint"?St(t,e):typeof t=="string"?kE(t,e):typeof t=="boolean"?FZ(t,e):Ii(t,e)}function FZ(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(ql(n,{size:e.size}),CC(n,{size:e.size})):n}function Ii(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Dye[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(ql(r,{size:e.size}),CC(r,{dir:"right",size:e.size})):r}function St(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new BZ({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?CC(a,{size:r}):a}const Mye=new TextEncoder;function kE(t,e={}){const n=Mye.encode(t);return Ii(n,e)}async function Bye(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:St(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function Gu(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new Yye(t.type);return`${t.name}(${T2(t.inputs,{includeName:e})})`}function T2(t,{includeName:e=!1}={}){return t?t.map(n=>Lye(n,{includeName:e})).join(e?", ":","):""}function Lye(t,{includeName:e}){return t.type.startsWith("tuple")?`(${T2(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class Uye extends Te{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class W9 extends Te{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class jZ extends Te{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${T2(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class vI extends Te{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class $ye extends Te{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class Fye extends Te{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${qs(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class jye extends Te{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class Wye extends Te{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class z9 extends Te{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class WZ extends Te{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class zye extends Te{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class zZ extends Te{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class H9 extends Te{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class PE extends Te{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class HZ extends Te{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class Hye extends Te{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class Gye extends Te{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Gu(e.abiItem)}\`, and`,`\`${n.type}\` in \`${Gu(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let qye=class extends Te{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class NA extends Te{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${T2(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class R2 extends Te{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Gu(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class Vye extends Te{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class Kye extends Te{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let GZ=class extends Te{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class Yye extends Te{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function Wl(t){return typeof t[0]=="string"?AC(t):Qye(t)}function Qye(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function AC(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}let sm=class extends Te{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},k2=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const UN=BigInt(2**32-1),G9=BigInt(32);function Jye(t,e=!1){return e?{h:Number(t&UN),l:Number(t>>G9&UN)}:{h:Number(t>>G9&UN)|0,l:Number(t&UN)|0}}function qZ(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=Jye(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const q9=(t,e,n)=>t>>>n,V9=(t,e,n)=>t<<32-n|e>>>n,Pw=(t,e,n)=>t>>>n|e<<32-n,Ow=(t,e,n)=>t<<32-n|e>>>n,$N=(t,e,n)=>t<<64-n|e>>>n-32,FN=(t,e,n)=>t>>>n-32|e<<64-n,Zye=(t,e,n)=>t<<n|e>>>32-n,Xye=(t,e,n)=>e<<n|t>>>32-n,e0e=(t,e,n)=>e<<n-32|t>>>64-n,t0e=(t,e,n)=>t<<n-32|e>>>64-n;function yh(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const n0e=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),r0e=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,s0e=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),i0e=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,o0e=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),a0e=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Dw=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function X8(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function xA(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function zl(t,...e){if(!X8(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function c0e(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");xA(t.outputLen),xA(t.blockLen)}function OE(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function VZ(t,e){zl(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function l0e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function im(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function rD(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function nd(t,e){return t<<32-e|t>>>e}const u0e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function d0e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function h0e(t){for(let e=0;e<t.length;e++)t[e]=d0e(t[e]);return t}const K9=u0e?t=>t:h0e,KZ=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",f0e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function DE(t){if(zl(t),KZ)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=f0e[t[n]];return e}const wh={_0:48,_9:57,A:65,F:70,a:97,f:102};function Y9(t){if(t>=wh._0&&t<=wh._9)return t-wh._0;if(t>=wh.A&&t<=wh.F)return t-(wh.A-10);if(t>=wh.a&&t<=wh.f)return t-(wh.a-10)}function e$(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(KZ)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=Y9(t.charCodeAt(i)),a=Y9(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function p0e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function EI(t){return typeof t=="string"&&(t=p0e(t)),zl(t),t}function uf(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];zl(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let t$=class{};function n$(t){const e=r=>t().update(EI(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function g0e(t){const e=(r,s)=>t(s).update(EI(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function YZ(t=32){if(Dw&&typeof Dw.getRandomValues=="function")return Dw.getRandomValues(new Uint8Array(t));if(Dw&&typeof Dw.randomBytes=="function")return Uint8Array.from(Dw.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const m0e=BigInt(0),d1=BigInt(1),y0e=BigInt(2),w0e=BigInt(7),b0e=BigInt(256),v0e=BigInt(113),QZ=[],JZ=[],ZZ=[];for(let t=0,e=d1,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],QZ.push(2*(5*r+n)),JZ.push((t+1)*(t+2)/2%64);let s=m0e;for(let i=0;i<7;i++)e=(e<<d1^(e>>w0e)*v0e)%b0e,e&y0e&&(s^=d1<<(d1<<BigInt(i))-d1);ZZ.push(s)}const XZ=qZ(ZZ,!0),E0e=XZ[0],C0e=XZ[1],Q9=(t,e,n)=>n>32?e0e(t,e,n):Zye(t,e,n),J9=(t,e,n)=>n>32?t0e(t,e,n):Xye(t,e,n);function eX(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=Q9(l,u,1)^n[a],h=J9(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=JZ[o],c=Q9(s,i,a),l=J9(s,i,a),u=QZ[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=E0e[r],t[1]^=C0e[r]}im(n)}let r$=class tX extends t${constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,xA(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=l0e(this.state)}clone(){return this._cloneInto()}keccak(){K9(this.state32),eX(this.state32,this.rounds),K9(this.state32),this.posOut=0,this.pos=0}update(e){OE(this),e=EI(e),zl(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){OE(this,!1),zl(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return xA(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(VZ(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,im(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new tX(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Cm=(t,e,n)=>n$(()=>new r$(e,t,n)),_0e=Cm(6,144,224/8),A0e=Cm(6,136,256/8),S0e=Cm(6,104,384/8),I0e=Cm(6,72,512/8),N0e=Cm(1,144,224/8),s$=Cm(1,136,256/8),x0e=Cm(1,104,384/8),T0e=Cm(1,72,512/8),nX=(t,e,n)=>g0e((r={})=>new r$(e,t,r.dkLen===void 0?n:r.dkLen,!0)),R0e=nX(31,168,128/8),k0e=nX(31,136,256/8),Dit=Object.freeze(Object.defineProperty({__proto__:null,Keccak:r$,keccakP:eX,keccak_224:N0e,keccak_256:s$,keccak_384:x0e,keccak_512:T0e,sha3_224:_0e,sha3_256:A0e,sha3_384:S0e,sha3_512:I0e,shake128:R0e,shake256:k0e},Symbol.toStringTag,{value:"Module"}));function ho(t,e){const n=e||"hex",r=s$(Xd(t,{strict:!1})?_C(t):t);return n==="bytes"?r:jl(r)}const sD=new k2(8192);function CI(t,e){if(sD.has(`${t}.${e}`))return sD.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=ho(c0(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return sD.set(`${t}.${e}`,i),i}function df(t,e){if(!Hl(t,{strict:!1}))throw new sm({address:t});return CI(t,e)}const P0e=/^0x[a-fA-F0-9]{40}$/,iD=new k2(8192);function Hl(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(iD.has(r))return iD.get(r);const s=P0e.test(t)?t.toLowerCase()===t?!0:n?CI(t)===t:!0:!1;return iD.set(r,s),s}function ME(t,e,n,{strict:r}={}){return Xd(t,{strict:!1})?MR(t,e,n,{strict:r}):iX(t,e,n,{strict:r})}function rX(t,e){if(typeof e=="number"&&e>0&&e>qs(t)-1)throw new LZ({offset:e,position:"start",size:qs(t)})}function sX(t,e,n){if(typeof e=="number"&&typeof n=="number"&&qs(t)!==n-e)throw new LZ({offset:n,position:"end",size:qs(t)})}function iX(t,e,n,{strict:r}={}){rX(t,e);const s=t.slice(e,n);return r&&sX(s,e,n),s}function MR(t,e,n,{strict:r}={}){rX(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&sX(s,e,n),s}const O0e=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,oX=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function _m(t,e){if(t.length!==e.length)throw new jye({expectedLength:t.length,givenLength:e.length});const n=D0e({params:t,values:e}),r=o$(n);return r.length===0?"0x":r}function D0e({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(i$({param:t[r],value:e[r]}));return n}function i$({param:t,value:e}){const n=a$(t.type);if(n){const[r,s]=n;return B0e(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return j0e(e,{param:t});if(t.type==="address")return M0e(e);if(t.type==="bool")return U0e(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=oX.exec(t.type)??[];return $0e(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return L0e(e,{param:t});if(t.type==="string")return F0e(e);throw new Vye(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function o$(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=qs(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(St(e+s,{size:32})),r.push(a),s+=qs(a)):n.push(a)}return Wl([...n,...r])}function M0e(t){if(!Hl(t))throw new sm({address:t});return{dynamic:!1,encoded:$g(t.toLowerCase())}}function B0e(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new GZ(t);if(!r&&t.length!==e)throw new $ye({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=i$({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=o$(i);if(r){const a=St(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?Wl([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Wl(i.map(({encoded:o})=>o))}}function L0e(t,{param:e}){const[,n]=e.type.split("bytes"),r=qs(t);if(!n){let s=t;return r%32!==0&&(s=$g(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Wl([$g(St(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new Fye({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:$g(t,{dir:"right"})}}function U0e(t){if(typeof t!="boolean")throw new Te(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:$g(FZ(t))}}function $0e(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new BZ({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:St(t,{size:32,signed:e})}}function F0e(t){const e=kE(t),n=Math.ceil(qs(e)/32),r=[];for(let s=0;s<n;s++)r.push($g(ME(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Wl([$g(St(qs(e),{size:32})),...r])}}function j0e(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=i$({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?o$(r):Wl(r.map(({encoded:s})=>s))}}function a$(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const oD="/docs/contract/encodeDeployData";function P2(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new Uye({docsPath:oD});if(!("inputs"in s))throw new W9({docsPath:oD});if(!s.inputs||s.inputs.length===0)throw new W9({docsPath:oD});const i=_m(s.inputs,n);return AC([r,i])}function Ks(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class iw extends Te{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class aT extends Te{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function W0e(t){const e=ho(`0x${t.substring(4)}`).substring(26);return CI(`0x${e}`)}const z0e="modulepreload",H0e=function(t){return"/"+t},Z9={},no=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=H0e(c),c in Z9)return;Z9[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":z0e,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function G0e({hash:t,signature:e}){const n=Xd(t)?t:jl(t),{secp256k1:r}=await no(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>i1e);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=X9(f);return new r.Signature(Kc(l),Kc(u)).addRecoveryBit(p)}const o=Xd(e)?e:jl(e);if(qs(o)!==65)throw new Error("invalid signature length");const a=Hu(`0x${o.slice(130)}`),c=X9(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function X9(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function aX({hash:t,signature:e}){return W0e(await G0e({hash:t,signature:e}))}class e7 extends Te{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class cX extends Te{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class q0e extends Te{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const V0e={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new q0e({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new cX({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new e7({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new e7({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function c$(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(V0e);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function K0e(t,e="hex"){const n=lX(t),r=c$(new Uint8Array(n.length));return n.encode(r),e==="hex"?Ii(r.bytes):r.bytes}function lX(t){return Array.isArray(t)?Y0e(t.map(e=>lX(e))):Q0e(t)}function Y0e(t){const e=t.reduce((s,i)=>s+i.length,0),n=uX(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function Q0e(t){const e=typeof t=="string"?Fl(t):t,n=uX(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function uX(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new Te("Length is too large.")}function J0e(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=ho(AC(["0x05",K0e([e?St(e):"0x",s,n?St(n):"0x"])]));return r==="bytes"?Fl(i):i}async function dX(t){const{authorization:e,signature:n}=t;return aX({hash:J0e(e),signature:n??e})}class nL extends Te{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class Z0e extends Te{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class X0e extends Te{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class hX extends Te{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function fX({chain:t,currentChainId:e}){if(!t)throw new X0e;if(e!==t.id)throw new Z0e({chain:t,currentChainId:e})}const ewe={gwei:9,wei:18},twe={ether:-9,wei:9},nwe={ether:-18,gwei:-9};function Am(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function ic(t,e="wei"){return Am(t,twe[e])}class vy extends Te{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(vy,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(vy,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class BR extends Te{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ic(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(BR,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class rL extends Te{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ic(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(rL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class sL extends Te{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(sL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class iL extends Te{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(iL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class oL extends Te{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(oL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class aL extends Te{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(aL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class cL extends Te{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(cL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class lL extends Te{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(lL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class uL extends Te{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(uL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class LR extends Te{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${ic(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${ic(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(LR,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class _I extends Te{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function l$(t,e="wei"){return Am(t,ewe[e])}function AI(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class rwe extends Te{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class swe extends Te{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",AI(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class iwe extends Te{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=AI({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${l$(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ic(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ic(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ic(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class pX extends Te{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class gX extends Te{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class owe extends Te{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const Ai=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),awe=t=>t,u$=t=>t;class R_ extends Te{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${u$(o)}`,e&&`Request body: ${Ai(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class d$ extends Te{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${u$(r)}`,`Request body: ${Ai(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class t7 extends Te{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${u$(n)}`,`Request body: ${Ai(e)}`],name:"TimeoutError"})}}const cwe=-1;class dc extends Te{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof d$?e.code:n??cwe}}class Zc extends dc{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class TA extends dc{constructor(e){super(e,{code:TA.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(TA,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class RA extends dc{constructor(e){super(e,{code:RA.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(RA,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class kA extends dc{constructor(e,{method:n}={}){super(e,{code:kA.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(kA,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class PA extends dc{constructor(e){super(e,{code:PA.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(PA,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class x0 extends dc{constructor(e){super(e,{code:x0.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(x0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class T0 extends dc{constructor(e){super(e,{code:T0.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(T0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class OA extends dc{constructor(e){super(e,{code:OA.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(OA,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Fg extends dc{constructor(e){super(e,{code:Fg.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Fg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class BE extends dc{constructor(e){super(e,{code:BE.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(BE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Ey extends dc{constructor(e,{method:n}={}){super(e,{code:Ey.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Ey,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class LE extends dc{constructor(e){super(e,{code:LE.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(LE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class DA extends dc{constructor(e){super(e,{code:DA.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(DA,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class mi extends Zc{constructor(e){super(e,{code:mi.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(mi,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class MA extends Zc{constructor(e){super(e,{code:MA.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(MA,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class BA extends Zc{constructor(e,{method:n}={}){super(e,{code:BA.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(BA,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class LA extends Zc{constructor(e){super(e,{code:LA.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(LA,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class UA extends Zc{constructor(e){super(e,{code:UA.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(UA,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class eh extends Zc{constructor(e){super(e,{code:eh.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(eh,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class UE extends Zc{constructor(e){super(e,{code:UE.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(UE,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class $A extends Zc{constructor(e){super(e,{code:$A.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty($A,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class FA extends Zc{constructor(e){super(e,{code:FA.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(FA,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class jA extends Zc{constructor(e){super(e,{code:jA.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(jA,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class WA extends Zc{constructor(e){super(e,{code:WA.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(WA,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class zA extends Zc{constructor(e){super(e,{code:zA.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(zA,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class $E extends Zc{constructor(e){super(e,{code:$E.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty($E,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class lwe extends dc{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function O2(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof Te?t.walk(s=>(s==null?void 0:s.code)===vy.code):t;return r instanceof Te?new vy({cause:t,message:r.details}):vy.nodeMessage.test(n)?new vy({cause:t,message:t.details}):BR.nodeMessage.test(n)?new BR({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):rL.nodeMessage.test(n)?new rL({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):sL.nodeMessage.test(n)?new sL({cause:t,nonce:e==null?void 0:e.nonce}):iL.nodeMessage.test(n)?new iL({cause:t,nonce:e==null?void 0:e.nonce}):oL.nodeMessage.test(n)?new oL({cause:t,nonce:e==null?void 0:e.nonce}):aL.nodeMessage.test(n)?new aL({cause:t}):cL.nodeMessage.test(n)?new cL({cause:t,gas:e==null?void 0:e.gas}):lL.nodeMessage.test(n)?new lL({cause:t,gas:e==null?void 0:e.gas}):uL.nodeMessage.test(n)?new uL({cause:t}):LR.nodeMessage.test(n)?new LR({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new _I({cause:t})}function mX(t,{docsPath:e,...n}){const r=(()=>{const s=O2(t,n);return s instanceof _I?t:s})();return new iwe(r,{docsPath:e,...n})}function D2(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const uwe={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function SC(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=dwe(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>Ii(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=St(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=St(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=St(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=St(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=St(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=St(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=uwe[t.type]),typeof t.value<"u"&&(e.value=St(t.value)),e}function dwe(t){return t.map(e=>({address:e.address,r:e.r?St(BigInt(e.r)):e.r,s:e.s?St(BigInt(e.s)):e.s,chainId:St(e.chainId),nonce:St(e.nonce),...typeof e.yParity<"u"?{yParity:St(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:St(e.v)}:{}}))}function Ft(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const hwe=2n**256n-1n;function ow(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?Ks(e):void 0;if(o&&!Hl(o.address))throw new sm({address:o.address});if(i&&!Hl(i))throw new sm({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new rwe;if(r&&r>hwe)throw new BR({maxFeePerGas:r});if(s&&r&&s>r)throw new LR({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function IC(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Hu(e)}class fwe extends Te{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class h$ extends Te{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class pwe extends Te{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${ic(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class yX extends Te{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const wX={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function bX(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Hu(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Hu(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?wX[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=gwe(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function gwe(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function vX(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:bX(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function Wd(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?St(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new yX({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||vX)(c)}async function f$(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function mwe(t,e){return EX(t,e)}async function EX(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await Ft(t,Wd,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return Kc(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):Ft(t,Wd,"getBlock")({}),Ft(t,f$,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new h$;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function ywe(t,e){return dL(t,e)}async function dL(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new fwe;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await Ft(t,Wd,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new h$;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await EX(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await Ft(t,f$,"getGasPrice")({}))}}class wwe extends Te{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=AI({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${l$(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ic(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ic(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ic(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function bwe(t,{docsPath:e,...n}){const r=(()=>{const s=O2(t,n);return s instanceof _I?t:s})();return new wwe(r,{docsPath:e,...n})}class vwe extends Te{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class Ewe extends Te{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function n7(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function Cwe(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=n7(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=n7(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function r7(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new F9({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new F9({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function _we(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=St(e)),n!==void 0&&(o.nonce=St(n)),r!==void 0&&(o.state=r7(r)),s!==void 0){if(o.state)throw new Ewe;o.stateDiff=r7(s)}return o}function p$(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Hl(n,{strict:!1}))throw new sm({address:n});if(e[n])throw new vwe({address:n});e[n]=_we(r)}return e}async function g$(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?St(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function M2(t,e){var s,i,o;const{account:n=t.account}=e,r=n?Ks(n):void 0;try{let v=function(_){const{block:O,request:x,rpcStateOverride:B}=_;return t.request({method:"eth_estimateGas",params:B?[x,O??"latest",B]:O?[x,O]:[x]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:m,maxFeePerGas:y,maxPriorityFeePerGas:w,nonce:C,value:N,stateOverride:I,...k}=await SI(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),U=(typeof d=="bigint"?St(d):void 0)||h,M=p$(I),W=await(async()=>{if(k.to)return k.to;if(c&&c.length>0)return await dX({authorization:c[0]}).catch(()=>{throw new Te("`to` is required. Could not infer from `authorizationList`")})})();ow(e);const j=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,$=(j||SC)({...D2(k,{format:j}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:m,maxFeePerGas:y,maxPriorityFeePerGas:w,nonce:C,to:W,value:N});let E=BigInt(await v({block:U,request:$,rpcStateOverride:M}));if(c){const _=await g$(t,{address:$.from}),O=await Promise.all(c.map(async x=>{const{address:B}=x,F=await v({block:U,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:B,value:St(_)},rpcStateOverride:M}).catch(()=>100000n);return 2n*BigInt(F)}));E+=O.reduce((x,B)=>x+B,0n)}return E}catch(a){throw bwe(a,{...e,account:r,chain:t.chain})}}async function m$(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?St(r):n]},{dedupe:!!r});return Hu(s)}function CX(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>Fl(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>Ii(i))}function _X(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>Fl(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>Fl(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>Ii(o))}function Awe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function Swe(t,e,n){return t&e^~t&n}function Iwe(t,e,n){return t&e^t&n^e&n}class AX extends t${constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=rD(this.buffer)}update(e){OE(this),e=EI(e),zl(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=rD(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){OE(this),VZ(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,im(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Awe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=rD(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Zf=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),So=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Nwe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Xf=new Uint32Array(64);let xwe=class extends AX{constructor(e=32){super(64,e,8,!1),this.A=Zf[0]|0,this.B=Zf[1]|0,this.C=Zf[2]|0,this.D=Zf[3]|0,this.E=Zf[4]|0,this.F=Zf[5]|0,this.G=Zf[6]|0,this.H=Zf[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Xf[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Xf[d-15],f=Xf[d-2],p=nd(h,7)^nd(h,18)^h>>>3,g=nd(f,17)^nd(f,19)^f>>>10;Xf[d]=g+Xf[d-7]+p+Xf[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=nd(a,6)^nd(a,11)^nd(a,25),f=u+h+Swe(a,c,l)+Nwe[d]+Xf[d]|0,g=(nd(r,2)^nd(r,13)^nd(r,22))+Iwe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){im(Xf)}destroy(){this.set(0,0,0,0,0,0,0,0),im(this.buffer)}};const SX=qZ(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Twe=SX[0],Rwe=SX[1],ep=new Uint32Array(80),tp=new Uint32Array(80);let kwe=class extends AX{constructor(e=64){super(128,e,16,!1),this.Ah=So[0]|0,this.Al=So[1]|0,this.Bh=So[2]|0,this.Bl=So[3]|0,this.Ch=So[4]|0,this.Cl=So[5]|0,this.Dh=So[6]|0,this.Dl=So[7]|0,this.Eh=So[8]|0,this.El=So[9]|0,this.Fh=So[10]|0,this.Fl=So[11]|0,this.Gh=So[12]|0,this.Gl=So[13]|0,this.Hh=So[14]|0,this.Hl=So[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:m}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,m]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=m|0}process(e,n){for(let C=0;C<16;C++,n+=4)ep[C]=e.getUint32(n),tp[C]=e.getUint32(n+=4);for(let C=16;C<80;C++){const N=ep[C-15]|0,I=tp[C-15]|0,k=Pw(N,I,1)^Pw(N,I,8)^q9(N,I,7),P=Ow(N,I,1)^Ow(N,I,8)^V9(N,I,7),U=ep[C-2]|0,M=tp[C-2]|0,W=Pw(U,M,19)^$N(U,M,61)^q9(U,M,6),j=Ow(U,M,19)^FN(U,M,61)^V9(U,M,6),K=s0e(P,j,tp[C-7],tp[C-16]),$=i0e(K,k,W,ep[C-7],ep[C-16]);ep[C]=$|0,tp[C]=K|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:m,Hh:y,Hl:w}=this;for(let C=0;C<80;C++){const N=Pw(d,h,14)^Pw(d,h,18)^$N(d,h,41),I=Ow(d,h,14)^Ow(d,h,18)^FN(d,h,41),k=d&f^~d&g,P=h&p^~h&m,U=o0e(w,I,P,Rwe[C],tp[C]),M=a0e(U,y,N,k,Twe[C],ep[C]),W=U|0,j=Pw(r,s,28)^$N(r,s,34)^$N(r,s,39),K=Ow(r,s,28)^FN(r,s,34)^FN(r,s,39),$=r&i^r&a^i&a,v=s&o^s&c^o&c;y=g|0,w=m|0,g=f|0,m=p|0,f=d|0,p=h|0,{h:d,l:h}=yh(l|0,u|0,M|0,W|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const E=n0e(W,K,v);r=r0e(E,M,j,$),s=E|0}({h:r,l:s}=yh(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=yh(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=yh(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=yh(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=yh(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=yh(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:m}=yh(this.Gh|0,this.Gl|0,g|0,m|0),{h:y,l:w}=yh(this.Hh|0,this.Hl|0,y|0,w|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,m,y,w)}roundClean(){im(ep,tp)}destroy(){im(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const IX=n$(()=>new xwe),Pwe=n$(()=>new kwe),hL=IX;function Owe(t,e){return hL(Xd(t,{strict:!1})?_C(t):t)}function Dwe(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=Owe(e);return s.set([n],0),r==="bytes"?s:Ii(s)}function Mwe(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(Dwe({commitment:i,to:r,version:n}));return s}const s7=6,NX=32,y$=4096,xX=NX*y$,i7=xX*s7-1-1*y$*s7;class Bwe extends Te{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class Lwe extends Te{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function Uwe(t){const e=typeof t.data=="string"?Fl(t.data):t.data,n=qs(e);if(!n)throw new Lwe;if(n>i7)throw new Bwe({maxSize:i7,size:n});const r=[];let s=!0,i=0;for(;s;){const o=c$(new Uint8Array(xX));let a=0;for(;a<y$;){const c=e.slice(i,i+(NX-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>Ii(o.bytes))}function $we(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??Uwe({data:e}),i=t.commitments??CX({blobs:s,kzg:n,to:r}),o=t.proofs??_X({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function Fwe(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new swe({transaction:t})}const TX=["blobVersionedHashes","chainId","fees","gas","nonce","type"],o7=new Map;async function SI(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=TX,type:u}=e,d=n&&Ks(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await Ft(t,Wd,"getBlock")({blockTag:"latest"}),f)}let g;async function m(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await Ft(t,IC,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const y=await m();h.nonce=await c.consume({address:d.address,chainId:y,client:t})}else h.nonce=await Ft(t,m$,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const y=CX({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const w=Mwe({commitments:y,to:"hex"});h.blobVersionedHashes=w}if(l.includes("sidecars")){const w=_X({blobs:r,commitments:y,kzg:o}),C=$we({blobs:r,commitments:y,proofs:w,to:"hex"});h.sidecars=C}}if(l.includes("chainId")&&(h.chainId=await m()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=Fwe(h)}catch{let y=o7.get(t.uid);if(typeof y>"u"){const w=await p();y=typeof(w==null?void 0:w.baseFeePerGas)=="bigint",o7.set(t.uid,y)}h.type=y?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const y=await p(),{maxFeePerGas:w,maxPriorityFeePerGas:C}=await dL(t,{block:y,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<C)throw new pwe({maxPriorityFeePerGas:C});h.maxPriorityFeePerGas=C,h.maxFeePerGas=w}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new h$;if(typeof e.gasPrice>"u"){const y=await p(),{gasPrice:w}=await dL(t,{block:y,chain:s,request:h,type:"legacy"});h.gasPrice=w}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await Ft(t,M2,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),ow(h),delete h.parameters,h}async function w$(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const aD=new k2(128);async function II(t,e){var w,C,N,I;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...m}=e;if(typeof n>"u")throw new iw({docsPath:"/docs/actions/wallet/sendTransaction"});const y=n?Ks(n):null;try{ow(e);const k=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await dX({authorization:i[0]}).catch(()=>{throw new Te("`to` is required. Could not infer from `authorizationList`.")})})();if((y==null?void 0:y.type)==="json-rpc"||y===null){let P;r!==null&&(P=await Ft(t,IC,"getChainId")({}),fX({currentChainId:P,chain:r}));const U=(N=(C=(w=t.chain)==null?void 0:w.formatters)==null?void 0:C.transactionRequest)==null?void 0:N.format,W=(U||SC)({...D2(m,{format:U}),accessList:s,authorizationList:i,blobs:o,chainId:P,data:a,from:y==null?void 0:y.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:k,type:p,value:g}),j=aD.get(t.uid),K=j?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:K,params:[W]},{retryCount:0})}catch($){if(j===!1)throw $;const v=$;if(v.name==="InvalidInputRpcError"||v.name==="InvalidParamsRpcError"||v.name==="MethodNotFoundRpcError"||v.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[W]},{retryCount:0}).then(E=>(aD.set(t.uid,!0),E)).catch(E=>{const _=E;throw _.name==="MethodNotFoundRpcError"||_.name==="MethodNotSupportedRpcError"?(aD.set(t.uid,!1),v):_});throw v}}if((y==null?void 0:y.type)==="local"){const P=await Ft(t,SI,"prepareTransactionRequest")({account:y,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:y.nonceManager,parameters:[...TX,"sidecars"],type:p,value:g,...m,to:k}),U=(I=r==null?void 0:r.serializers)==null?void 0:I.transaction,M=await y.signTransaction(P,{serializer:U});return await Ft(t,w$,"sendRawTransaction")({serializedTransaction:M})}throw(y==null?void 0:y.type)==="smart"?new aT({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new aT({docsPath:"/docs/actions/wallet/sendTransaction",type:y==null?void 0:y.type})}catch(k){throw k instanceof aT?k:mX(k,{...e,account:y,chain:e.chain||void 0})}}function jwe(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=P2({abi:n,args:r,bytecode:s});return II(t,{...i,...i.authorizationList?{to:null}:{},data:o})}const fL=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],pL=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],RX=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],kX=[...RX,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],Wwe=[...RX,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],a7=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],c7=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],l7=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}];function zwe(t,e={}){typeof e.size<"u"&&ql(t,{size:e.size});const n=Ii(t,e);return Kc(n,e)}function Hwe(t,e={}){let n=t;if(typeof e.size<"u"&&(ql(n,{size:e.size}),n=qd(n)),n.length>1||n[0]>1)throw new Iye(n);return!!n[0]}function mf(t,e={}){typeof e.size<"u"&&ql(t,{size:e.size});const n=Ii(t,e);return Hu(n,e)}function Gwe(t,e={}){let n=t;return typeof e.size<"u"&&(ql(n,{size:e.size}),n=qd(n,{dir:"right"})),new TextDecoder().decode(n)}function NI(t,e){const n=typeof e=="string"?Fl(e):e,r=c$(n);if(qs(n)===0&&t.length>0)throw new vI;if(qs(e)&&qs(e)<32)throw new jZ({data:typeof e=="string"?e:Ii(e),params:t,size:qs(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=av(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function av(t,e,{staticPosition:n}){const r=a$(e.type);if(r){const[s,i]=r;return Vwe(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return Jwe(t,e,{staticPosition:n});if(e.type==="address")return qwe(t);if(e.type==="bool")return Kwe(t);if(e.type.startsWith("bytes"))return Ywe(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return Qwe(t,e);if(e.type==="string")return Zwe(t,{staticPosition:n});throw new Kye(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const u7=32,gL=32;function qwe(t){const e=t.readBytes(32);return[CI(Ii(iX(e,-20))),32]}function Vwe(t,e,{length:n,staticPosition:r}){if(!n){const o=mf(t.readBytes(gL)),a=r+o,c=a+u7;t.setPosition(a);const l=mf(t.readBytes(u7)),u=HA(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=av(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(HA(e)){const o=mf(t.readBytes(gL)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=av(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=av(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function Kwe(t){return[Hwe(t.readBytes(32),{size:32}),32]}function Ywe(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=mf(t.readBytes(32));t.setPosition(n+o);const a=mf(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Ii(c),32]}return[Ii(t.readBytes(Number.parseInt(s),32)),32]}function Qwe(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?zwe(s,{signed:n}):mf(s,{signed:n}),32]}function Jwe(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(HA(e)){const o=mf(t.readBytes(gL)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=av(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=av(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function Zwe(t,{staticPosition:e}){const n=mf(t.readBytes(32)),r=e+n;t.setPosition(r);const s=mf(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=Gwe(qd(i));return t.setPosition(e+32),[o,32]}function HA(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(HA);const n=a$(t.type);return!!(n&&HA({...t,type:n[1]}))}const Xwe=t=>ho(_C(t));function ebe(t){return Xwe(t)}const tbe="1.0.8";let Xc=class mL extends Error{constructor(e,n={}){var o;const r=n.cause instanceof mL?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof mL&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${tbe}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function jf(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const PX=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,OX=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,DX=/^\(.+?\).*?$/,d7=/^tuple(?<array>(\[(\d*)\])*)$/;function yL(t){let e=t.type;if(d7.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=yL(i),s<n-1&&(e+=", ")}const r=jf(d7,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,yL({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function h1(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=yL(s),r!==n-1&&(e+=", ")}return e}function UR(t){var e;return t.type==="function"?`function ${t.name}(${h1(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${h1(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${h1(t.inputs)})`:t.type==="error"?`error ${t.name}(${h1(t.inputs)})`:t.type==="constructor"?`constructor(${h1(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const MX=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function nbe(t){return MX.test(t)}function rbe(t){return jf(MX,t)}const BX=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function sbe(t){return BX.test(t)}function ibe(t){return jf(BX,t)}const LX=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function obe(t){return LX.test(t)}function abe(t){return jf(LX,t)}const UX=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function b$(t){return UX.test(t)}function cbe(t){return jf(UX,t)}const $X=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function lbe(t){return $X.test(t)}function ube(t){return jf($X,t)}const FX=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function dbe(t){return FX.test(t)}function hbe(t){return jf(FX,t)}const fbe=/^receive\(\) external payable$/;function pbe(t){return fbe.test(t)}const gbe=new Set(["indexed"]),wL=new Set(["calldata","memory","storage"]);class mbe extends Xc{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class ybe extends Xc{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class wbe extends Xc{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class bbe extends Xc{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class vbe extends Xc{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class Ebe extends Xc{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class Cbe extends Xc{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class _be extends Xc{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class NC extends Xc{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class Abe extends Xc{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class Sbe extends Xc{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class Ibe extends Xc{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class Nbe extends Xc{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function xbe(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const cD=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function bL(t,e={}){if(obe(t))return Tbe(t,e);if(sbe(t))return Rbe(t,e);if(nbe(t))return kbe(t,e);if(lbe(t))return Pbe(t,e);if(dbe(t))return Obe(t);if(pbe(t))return{type:"receive",stateMutability:"payable"};throw new Abe({signature:t})}function Tbe(t,e={}){const n=abe(t);if(!n)throw new NC({signature:t,type:"function"});const r=Ru(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(R0(r[a],{modifiers:wL,structs:e,type:"function"}));const o=[];if(n.returns){const a=Ru(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(R0(a[l],{modifiers:wL,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function Rbe(t,e={}){const n=ibe(t);if(!n)throw new NC({signature:t,type:"event"});const r=Ru(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(R0(r[o],{modifiers:gbe,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function kbe(t,e={}){const n=rbe(t);if(!n)throw new NC({signature:t,type:"error"});const r=Ru(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(R0(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function Pbe(t,e={}){const n=ube(t);if(!n)throw new NC({signature:t,type:"constructor"});const r=Ru(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(R0(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function Obe(t){const e=hbe(t);if(!e)throw new NC({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const Dbe=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Mbe=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Bbe=/^u?int$/;function R0(t,e){var d,h;const n=xbe(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(cD.has(n))return cD.get(n);const r=DX.test(t),s=jf(r?Mbe:Dbe,t);if(!s)throw new bbe({param:t});if(s.name&&Ube(s.name))throw new vbe({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=Ru(s.type),p=[],g=f.length;for(let m=0;m<g;m++)p.push(R0(f[m],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(Bbe.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!jX(c))throw new wbe({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new Ebe({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(wL.has(s.modifier)&&!$be(c,!!s.array))throw new Cbe({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return cD.set(n,u),u}function Ru(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?Ru(a,[...e,n.trim()]):Ru(a,e,`${n}${o}`,r);case"(":return Ru(a,e,`${n}${o}`,r+1);case")":return Ru(a,e,`${n}${o}`,r-1);default:return Ru(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new Nbe({current:n,depth:r});return e.push(n.trim()),e}function jX(t){return t==="address"||t==="bool"||t==="function"||t==="string"||PX.test(t)||OX.test(t)}const Lbe=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function Ube(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||PX.test(t)||OX.test(t)||Lbe.test(t)}function $be(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function WX(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!b$(a))continue;const c=cbe(a);if(!c)throw new NC({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=R0(p,{type:"struct"});u.push(g)}if(!u.length)throw new Sbe({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=zX(c,e)}return r}const Fbe=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function zX(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(DX.test(o.type))r.push(o);else{const c=jf(Fbe,o.type);if(!(c!=null&&c.type))throw new _be({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new Ibe({type:u});r.push({...o,type:`tuple${l??""}`,components:zX(e[u]??[],e,new Set([...n,u]))})}else if(jX(u))r.push(o);else throw new ybe({type:u})}}return r}function HX(t){const e=WX(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];b$(i)||n.push(bL(i,e))}return n}function h7(t){let e;if(typeof t=="string")e=bL(t);else{const n=WX(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!b$(i)){e=bL(i,n);break}}}if(!e)throw new mbe({signature:t});return e}function jbe(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new Te("Unable to normalize signature.");return s}const Wbe=t=>{const e=typeof t=="string"?t:UR(t);return jbe(e)};function GX(t){return ebe(Wbe(t))}const B2=GX,xI=t=>ME(GX(t),0,4);function aw(t){const{abi:e,args:n=[],name:r}=t,s=Xd(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?xI(a)===r:a.type==="event"?B2(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?vL(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=qX(a.inputs,o.inputs,n);if(l)throw new Gye({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function vL(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Hl(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>vL(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>vL(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function qX(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return qX(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Hl(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Hl(n[r],{strict:!1}):!1)return o}}const lD="/docs/contract/decodeFunctionResult";function cw(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=aw({abi:e,args:n,name:r});if(!a)throw new PE(r,{docsPath:lD});i=a}if(i.type!=="function")throw new PE(void 0,{docsPath:lD});if(!i.outputs)throw new HZ(i.name,{docsPath:lD});const o=NI(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const f7="/docs/contract/encodeFunctionData";function zbe(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=aw({abi:e,args:n,name:r});if(!i)throw new PE(r,{docsPath:f7});s=i}if(s.type!=="function")throw new PE(void 0,{docsPath:f7});return{abi:[s],functionName:xI(Gu(s))}}function Vl(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:zbe(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?_m(s.inputs,e??[]):void 0;return AC([i,o??"0x"])}function xC({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new nL({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new nL({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const VX={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},KX={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Hbe={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function Gbe(t){const{abi:e,data:n}=t,r=ME(n,0,4);if(r==="0x")throw new vI;const i=[...e||[],KX,Hbe].find(o=>o.type==="error"&&r===xI(Gu(o)));if(!i)throw new WZ(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?NI(i.inputs,ME(n,4)):void 0,errorName:i.name}}function YX({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Ai(e[i]):e[i]}`).join(", ")})`}class QX extends Te{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var m;const p=n?Ks(n):void 0;let g=AI({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${l$(h)} ${((m=s==null?void 0:s.nativeCurrency)==null?void 0:m.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ic(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ic(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ic(l)} gwei`,nonce:u});f&&(g+=`
${Cwe(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class JX extends Te{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=aw({abi:n,args:r,name:o}),l=c?YX({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?Gu(c,{includeName:!0}):void 0,d=AI({address:s&&awe(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class EL extends Te{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=Gbe({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=VX[f]}else{const f=u?Gu(u,{includeName:!0}):void 0,p=u&&h?YX({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof WZ&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class qbe extends Te{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class Vbe extends Te{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class L2 extends Te{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function v$(t,e){var r,s,i,o,a,c;if(!(t instanceof Te))return!1;const n=t.walk(l=>l instanceof EL);return n instanceof EL?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&n.reason===VX[50]):!1}function Kbe(t){const{abi:e,data:n}=t,r=ME(n,0,4),s=e.find(i=>i.type==="function"&&r===xI(Gu(i)));if(!s)throw new Hye(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?NI(s.inputs,ME(n,4)):void 0}}const uD="/docs/contract/encodeErrorResult";function p7(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const c=aw({abi:e,args:r,name:n});if(!c)throw new z9(n,{docsPath:uD});s=c}if(s.type!=="error")throw new z9(void 0,{docsPath:uD});const i=Gu(s),o=xI(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new Wye(s.name,{docsPath:uD});a=_m(s.inputs,r)}return AC([o,a])}const dD="/docs/contract/encodeFunctionResult";function Ybe(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const o=aw({abi:e,name:n});if(!o)throw new PE(n,{docsPath:dD});s=o}if(s.type!=="function")throw new PE(void 0,{docsPath:dD});if(!s.outputs)throw new HZ(s.name,{docsPath:dD});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new GZ(r)})();return _m(s.outputs,i)}const E$="x-batch-gateway:true";async function Qbe(t){const{data:e,ccipRequest:n}=t,{args:[r]}=Kbe({abi:pL,data:e}),s=[],i=[];return await Promise.all(r.map(async(o,a)=>{try{i[a]=o.urls.includes(E$)?await Qbe({data:o.data,ccipRequest:n}):await n(o),s[a]=!1}catch(c){s[a]=!0,i[a]=Jbe(c)}})),Ybe({abi:pL,functionName:"query",result:[s,i]})}function Jbe(t){return t.name==="HttpRequestError"&&t.status?p7({abi:pL,errorName:"HttpError",args:[t.status,t.shortMessage]}):p7({abi:[KX],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function ZX(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return Xd(e)?e:null}function cT(t){let e=new Uint8Array(32).fill(0);if(!t)return Ii(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=ZX(n[r]),i=s?_C(s):ho(c0(n[r]),"bytes");e=ho(Wl([e,i]),"bytes")}return Ii(e)}function Zbe(t){return`[${t.slice(2)}]`}function Xbe(t){const e=new Uint8Array(32).fill(0);return t?ZX(t)||ho(c0(t)):Ii(e)}function U2(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(c0(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=c0(s[i]);o.byteLength>255&&(o=c0(Zbe(Xbe(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const eve=3;function k0(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof L2?t:t instanceof Te?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof vI?new qbe({functionName:i}):[eve,x0.code].includes(c)&&(l||u||d||h)?new EL({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof d$?u:h??d}):t;return new JX(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const C$=BigInt(0),CL=BigInt(1);function P0(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function jN(t){const e=t.toString(16);return e.length&1?"0"+e:e}function XX(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?C$:BigInt("0x"+t)}function $2(t){return XX(DE(t))}function GA(t){return zl(t),XX(DE(Uint8Array.from(t).reverse()))}function _$(t,e){return e$(t.toString(16).padStart(e*2,"0"))}function F2(t,e){return _$(t,e).reverse()}function Js(t,e,n){let r;if(typeof e=="string")try{r=e$(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(X8(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const hD=t=>typeof t=="bigint"&&C$<=t;function tve(t,e,n){return hD(t)&&hD(e)&&hD(n)&&e<=t&&t<n}function $b(t,e,n,r){if(!tve(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function nve(t){let e;for(e=0;t>C$;t>>=CL,e+=1);return e}const j2=t=>(CL<<BigInt(t))-CL;function rve(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...f)=>n(o,i,...f),u=(f=r(0))=>{o=l(s(0),f),i=l(),f.length!==0&&(o=l(s(1),f),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=l();const g=i.slice();p.push(g),f+=i.length}return uf(...p)};return(f,p)=>{c(),u(f);let g;for(;!(g=p(d()));)u();return c(),g}}function TI(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function $R(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const sve="0.1.1";function ive(){return sve}let ii=class _L extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof _L){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof _L&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${ive()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return eee(this,e)}};function eee(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?eee(t.cause,e):e?null:t}const ove="#__bigint";function ave(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+ove:s,n)}function cve(t,e){if(m7(t)>e)throw new wve({givenSize:m7(t),maxSize:e})}const bh={zero:48,nine:57,A:65,F:70,a:97,f:102};function g7(t){if(t>=bh.zero&&t<=bh.nine)return t-bh.zero;if(t>=bh.A&&t<=bh.F)return t-(bh.A-10);if(t>=bh.a&&t<=bh.f)return t-(bh.a-10)}function lve(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new bve({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function A$(t,e){if(Gl(t)>e)throw new Ave({givenSize:Gl(t),maxSize:e})}function uve(t,e){if(typeof e=="number"&&e>0&&e>Gl(t)-1)throw new iee({offset:e,position:"start",size:Gl(t)})}function dve(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Gl(t)!==n-e)throw new iee({offset:n,position:"end",size:Gl(t)})}function tee(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new Sve({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const hve=new TextEncoder;function fve(t){return t instanceof Uint8Array?t:typeof t=="string"?gve(t):pve(t)}function pve(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function gve(t,e={}){const{size:n}=e;let r=t;n&&(A$(t,n),r=D0(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const l=g7(s.charCodeAt(c++)),u=g7(s.charCodeAt(c++));if(l===void 0||u===void 0)throw new ii(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=l*16+u}return o}function mve(t,e={}){const{size:n}=e,r=hve.encode(t);return typeof n=="number"?(cve(r,n),yve(r,n)):r}function yve(t,e){return lve(t,{dir:"right",size:e})}function m7(t){return t.length}let wve=class extends ii{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},bve=class extends ii{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const vve=new TextEncoder,Eve=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Cve(t,e={}){const{strict:n=!1}=e;if(!t)throw new y7(t);if(typeof t!="string")throw new y7(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new w7(t);if(!t.startsWith("0x"))throw new w7(t)}function th(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function nee(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(A$(n,e.size),O0(n,e.size)):n}function ree(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Eve[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(A$(r,e.size),D0(r,e.size)):r}function na(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new see({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?O0(c,r):c}function S$(t,e={}){return ree(vve.encode(t),e)}function O0(t,e){return tee(t,{dir:"left",size:e})}function D0(t,e){return tee(t,{dir:"right",size:e})}function I$(t,e,n,r={}){const{strict:s}=r;uve(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&dve(i,e,n),i}function Gl(t){return Math.ceil((t.length-2)/2)}function _ve(t,e={}){const{strict:n=!1}=e;try{return Cve(t,{strict:n}),!0}catch{return!1}}let see=class extends ii{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class y7 extends ii{constructor(e){super(`Value \`${typeof e=="object"?ave(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class w7 extends ii{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let Ave=class extends ii{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class iee extends ii{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let Sve=class extends ii{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function Ive(t){return{address:t.address,amount:na(t.amount),index:na(t.index),validatorIndex:na(t.validatorIndex)}}function oee(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:na(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:na(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:na(t.gasLimit)},...typeof t.number=="bigint"&&{number:na(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:na(t.prevRandao)},...typeof t.time=="bigint"&&{time:na(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(Ive)}}}const Nve="0x82ad56cb",aee="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",xve="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",Tve="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";function cee(t,{docsPath:e,...n}){const r=(()=>{const s=O2(t,n);return s instanceof _I?t:s})();return new QX(r,{docsPath:e,...n})}function N$(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const fD=new Map;function lee({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>fD.delete(e),a=()=>c().map(({args:u})=>u),c=()=>fD.get(e)||[],l=u=>fD.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=N$();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function RI(t,e){var $,v,E,_;const{account:n=t.account,authorizationList:r,batch:s=!!(($=t.batch)!=null&&$.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:m,maxFeePerGas:y,maxPriorityFeePerGas:w,nonce:C,to:N,value:I,stateOverride:k,...P}=e,U=n?Ks(n):void 0;if(u&&(h||f))throw new Te("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&N)throw new Te("Cannot provide both `code` & `to` as parameters.");const M=u&&d,W=h&&f&&N&&d,j=M||W,K=M?Pve({code:u,data:d}):W?Ove({data:d,factory:h,factoryData:f,to:N}):d;try{ow(e);const x=(typeof i=="bigint"?St(i):void 0)||o,B=l?oee(l):void 0,F=p$(k),L=(_=(E=(v=t.chain)==null?void 0:v.formatters)==null?void 0:E.transactionRequest)==null?void 0:_.format,H=(L||SC)({...D2(P,{format:L}),from:U==null?void 0:U.address,accessList:a,authorizationList:r,blobs:c,data:K,gas:p,gasPrice:g,maxFeePerBlobGas:m,maxFeePerGas:y,maxPriorityFeePerGas:w,nonce:C,to:j?void 0:N,value:I});if(s&&Rve({request:H})&&!F&&!B)try{return await kve(t,{...H,blockNumber:i,blockTag:o})}catch(ge){if(!(ge instanceof hX)&&!(ge instanceof nL))throw ge}const re=(()=>{const ge=[H,x];return F&&B?[...ge,F,B]:F?[...ge,F]:B?[...ge,{},B]:ge})(),se=await t.request({method:"eth_call",params:re});return se==="0x"?{data:void 0}:{data:se}}catch(O){const x=Dve(O),{offchainLookup:B,offchainLookupSignature:F}=await no(async()=>{const{offchainLookup:L,offchainLookupSignature:A}=await import("./ccip-bt3eQfqP.js");return{offchainLookup:L,offchainLookupSignature:A}},[]);if(t.ccipRead!==!1&&(x==null?void 0:x.slice(0,10))===F&&N)return{data:await B(t,{data:x,to:N})};throw j&&(x==null?void 0:x.slice(0,10))==="0x101bb98d"?new Vbe({factory:h}):cee(O,{...e,account:U,chain:t.chain})}}function Rve({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(Nve)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function kve(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new hX;l=xC({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?St(s):void 0)||i,{schedule:h}=lee({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(m){return m.reduce((w,{data:C})=>w+(C.length-2),0)>n*2},fn:async m=>{const y=m.map(N=>({allowFailure:!0,callData:N.data,target:N.to})),w=Vl({abi:fL,args:[y],functionName:"aggregate3"}),C=await t.request({method:"eth_call",params:[{data:w,to:l},d]});return cw({abi:fL,args:[y],functionName:"aggregate3",data:C||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new L2({data:f});return f==="0x"?{data:void 0}:{data:f}}function Pve(t){const{code:e,data:n}=t;return P2({abi:HX(["constructor(bytes, bytes)"]),bytecode:aee,args:[e,n]})}function Ove(t){const{data:e,factory:n,factoryData:r,to:s}=t;return P2({abi:HX(["constructor(address, bytes, address, bytes)"]),bytecode:xve,args:[s,e,n,r]})}function Dve(t){var n;if(!(t instanceof Te))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function nh(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=Vl({abi:n,args:s,functionName:i});try{const{data:c}=await Ft(t,RI,"call")({...o,data:a,to:r});return cw({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw k0(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function Mve(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return xC({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d=Vl({abi:c7,functionName:"addr",...s!=null?{args:[cT(i),BigInt(s)]}:{args:[cT(i)]}}),h={address:l,abi:kX,functionName:"resolve",args:[jl(U2(i)),d,o??[E$]],blockNumber:n,blockTag:r},p=await Ft(t,nh,"readContract")(h);if(p[0]==="0x")return null;const g=cw({abi:c7,args:s!=null?[cT(i),BigInt(s)]:void 0,functionName:"addr",data:p[0]});return g==="0x"||qd(g)==="0x00"?null:g}catch(d){if(a)throw d;if(v$(d,"resolve"))return null;throw d}}class Bve extends Te{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class f1 extends Te{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class x$ extends Te{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class Lve extends Te{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const Uve=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,$ve=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Fve=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,jve=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function Wve(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function b7(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function uee({uri:t,gatewayUrls:e}){const n=Fve.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=b7(e==null?void 0:e.ipfs,"https://ipfs.io"),s=b7(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(Uve),{protocol:o,subpath:a,target:c,subtarget:l=""}=(i==null?void 0:i.groups)||{},u=o==="ipns:/"||a==="ipns/",d=o==="ipfs:/"||a==="ipfs/"||$ve.test(t);if(t.startsWith("http")&&!u&&!d){let f=t;return e!=null&&e.arweave&&(f=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:f,isOnChain:!1,isEncoded:!1}}if((u||d)&&c)return{uri:`${r}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${s}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace(jve,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new x$({uri:t})}function dee(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new Bve({data:t});return t.image||t.image_url||t.image_data}async function zve({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await T$({gatewayUrls:t,uri:dee(n)})}catch{throw new x$({uri:e})}}async function T$({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=uee({uri:e,gatewayUrls:t});if(r||await Wve(n))return n;throw new x$({uri:e})}function Hve(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,o]=n.split(":"),[a,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new f1({reason:"Only EIP-155 supported"});if(!o)throw new f1({reason:"Chain ID not found"});if(!c)throw new f1({reason:"Contract address not found"});if(!s)throw new f1({reason:"Token ID not found"});if(!a)throw new f1({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function Gve(t,{nft:e}){if(e.namespace==="erc721")return nh(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return nh(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new Lve({namespace:e.namespace})}async function qve(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?Vve(t,{gatewayUrls:e,record:n}):T$({uri:n,gatewayUrls:e})}async function Vve(t,{gatewayUrls:e,record:n}){const r=Hve(n),s=await Gve(t,{nft:r}),{uri:i,isOnChain:o,isEncoded:a}=uee({uri:s,gatewayUrls:e});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const l=a?atob(i.replace("data:application/json;base64,","")):i,u=JSON.parse(l);return T$({uri:dee(u),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),zve({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function hee(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return xC({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d={address:l,abi:kX,functionName:"resolve",args:[jl(U2(i)),Vl({abi:a7,functionName:"text",args:[cT(i),s]}),o??[E$]],blockNumber:n,blockTag:r},f=await Ft(t,nh,"readContract")(d);if(f[0]==="0x")return null;const p=cw({abi:a7,functionName:"text",data:f[0]});return p===""?null:p}catch(d){if(a)throw d;if(v$(d,"resolve"))return null;throw d}}async function Kve(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const c=await Ft(t,hee,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!c)return null;try{return await qve(t,{record:c,gatewayUrls:r})}catch{return null}}async function fee(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=xC({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:Wwe,functionName:"reverse",args:[jl(U2(c))],blockNumber:n,blockTag:r},u=Ft(t,nh,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(v$(l,"reverse"))return null;throw l}}async function Yve(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return xC({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),a=i==null?void 0:i.ensTlds;if(a&&!a.some(l=>s.endsWith(l)))throw new Error(`${s} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await Ft(t,nh,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[jl(U2(s))],blockNumber:n,blockTag:r});return c}async function pee(t,e){var m,y,w;const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f,...p}=e,g=n?Ks(n):void 0;try{ow(e);const N=(typeof r=="bigint"?St(r):void 0)||s,I=(w=(y=(m=t.chain)==null?void 0:m.formatters)==null?void 0:y.transactionRequest)==null?void 0:w.format,P=(I||SC)({...D2(p,{format:I}),from:g==null?void 0:g.address,blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f}),U=await t.request({method:"eth_createAccessList",params:[P,N]});return{accessList:U.accessList,gasUsed:BigInt(U.gasUsed)}}catch(C){throw cee(C,{...e,account:g,chain:t.chain})}}function W2(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function Qve(t){const e=W2(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}class Jve extends Te{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const v7="/docs/contract/encodeEventTopics";function kI(t){var c;const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const l=aw({abi:e,name:n});if(!l)throw new H9(n,{docsPath:v7});s=l}if(s.type!=="event")throw new H9(void 0,{docsPath:v7});const i=Gu(s),o=B2(i);let a=[];if(r&&"inputs"in s){const l=(c=s.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?(l==null?void 0:l.map(d=>r[d.name]))??[]:[];u.length>0&&(a=(l==null?void 0:l.map((d,h)=>Array.isArray(u[h])?u[h].map((f,p)=>E7({param:d,value:u[h][p]})):typeof u[h]<"u"&&u[h]!==null?E7({param:d,value:u[h]}):null))??[])}return[o,...a]}function E7({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return ho(_C(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new Jve(t.type);return _m([t],[e])}async function gee(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:a,toBlock:c}=e,l=W2(t,{method:"eth_newFilter"}),u=i?kI({abi:r,args:s,eventName:i}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?St(o):o,toBlock:typeof c=="bigint"?St(c):c,topics:u}]});return{abi:r,args:s,eventName:i,id:d,request:l(d),strict:!!a,type:"event"}}async function mee(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:a}={}){const c=s??(r?[r]:void 0),l=W2(t,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap(f=>kI({abi:[f],eventName:f.name,args:n}))],r&&(u=u[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?St(i):i,toBlock:typeof a=="bigint"?St(a):a,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:l(d),strict:!!o,toBlock:a,type:"event"}}async function yee(t){const e=W2(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function Zve(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...a}=e,c=Vl({abi:n,args:s,functionName:i});try{return await Ft(t,M2,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(l){const u=a.account?Ks(a.account):void 0;throw k0(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:u==null?void 0:u.address})}}async function Xve(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}const eEe=new Map,tEe=new Map;function nEe(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,eEe),r=e(t,tEe);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function rEe(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=nEe(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const sEe=t=>`blockNumber.${t}`;async function PI(t,{cacheTime:e=t.cacheTime}={}){const n=await rEe(()=>t.request({method:"eth_blockNumber"}),{cacheKey:sEe(t.uid),cacheTime:e});return BigInt(n)}async function iEe(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?St(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),Hu(i)}async function C7(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?St(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}function z2(t,e){if(!Hl(t,{strict:!1}))throw new sm({address:t});if(!Hl(e,{strict:!1}))throw new sm({address:e});return t.toLowerCase()===e.toLowerCase()}const _7="/docs/contract/decodeEventLog";function R$(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new zye({docsPath:_7});const c=e.find(g=>g.type==="event"&&o===B2(Gu(g)));if(!(c&&"name"in c)||c.type!=="event")throw new zZ(o,{docsPath:_7});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,m)=>[g,m]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[m,y]=f[g],w=a[g];if(!w)throw new R2({abiItem:c,param:m});h[d?y:m.name||y]=oEe({param:m,value:w})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=NI(p,n);if(g)if(d)for(let m=0;m<u.length;m++)h[m]=h[m]??g.shift();else for(let m=0;m<p.length;m++)h[p[m].name]=g[m]}catch(g){if(i)throw g instanceof jZ||g instanceof cX?new NA({abiItem:c,data:n,params:p,size:qs(n)}):g}else if(i)throw new NA({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function oEe({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(NI([t],e)||[])[0]}function k$(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===B2(u));if(!c)return null;const l=R$({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!aEe({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof zZ)return null;if(c instanceof NA||c instanceof R2){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function aEe(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?z2(o,a):i.type==="string"||i.type==="bytes"?ho(_C(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function Rf(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function P$(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:a,strict:c}={}){const l=c??!1,u=o??(i?[i]:void 0);let d=[];u&&(d=[u.flatMap(g=>kI({abi:[g],eventName:g.name,args:o?void 0:a}))],i&&(d=d[0]));let h;n?h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:n}]}):h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof r=="bigint"?St(r):r,toBlock:typeof s=="bigint"?St(s):s}]});const f=h.map(p=>Rf(p));return u?k$({abi:u,args:a,logs:f,strict:l}):f}async function wee(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:a,toBlock:c,strict:l}=e,u=o?aw({abi:n,name:o}):void 0,d=u?void 0:n.filter(h=>h.type==="event");return Ft(t,P$,"getLogs")({address:r,args:s,blockHash:i,event:u,events:d,fromBlock:a,toBlock:c,strict:l})}class cEe extends Te{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function lEe(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,o,a,c,l,u,d]=await Ft(t,nh,"readContract")({abi:uEe,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:l,salt:u},extensions:d,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new cEe({address:n}):o}}const uEe=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function dEe(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function hEe(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?St(n):void 0,o=await t.request({method:"eth_feeHistory",params:[St(e),i||r,s]},{dedupe:!!i});return dEe(o)}async function H2(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>Rf(i));return!("abi"in e)||!e.abi?s:k$({abi:e.abi,logs:s,strict:n})}async function fEe(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>Rf(i));return e.abi?k$({abi:e.abi,logs:s,strict:n}):s}async function pEe(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?St(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function G2(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?St(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,St(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,St(i)]},{dedupe:!!a}),!c)throw new pX({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||bX)(c)}async function gEe(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([Ft(t,PI,"getBlockNumber")({}),e?Ft(t,G2,"getTransaction")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}const bee={"0x0":"reverted","0x1":"success"};function mEe(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>Rf(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Hu(t.transactionIndex):null,status:t.status?bee[t.status]:null,type:t.type?wX[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function AL(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new gX({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||mEe)(n)}async function vee(t,e){var y;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((y=t.batch)==null?void 0:y.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=xC({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let w=0;w<l.length;w++){const{abi:C,address:N,args:I,functionName:k}=l[w];try{const P=Vl({abi:C,args:I,functionName:k});p+=(P.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(P.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:P,target:N}]}catch(P){const U=k0(P,{abi:C,address:N,args:I,docsPath:"/docs/contract/multicall",functionName:k,sender:n});if(!r)throw U;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:N}]}}const g=await Promise.allSettled(h.map(w=>Ft(t,nh,"readContract")({abi:fL,account:n,address:d,args:[w],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),m=[];for(let w=0;w<g.length;w++){const C=g[w];if(C.status==="rejected"){if(!r)throw C.reason;for(let I=0;I<h[w].length;I++)m.push({status:"failure",error:C.reason,result:void 0});continue}const N=C.value;for(let I=0;I<N.length;I++){const{returnData:k,success:P}=N[I],{callData:U}=h[w][I],{abi:M,address:W,functionName:j,args:K}=l[m.length];try{if(U==="0x")throw new vI;if(!P)throw new L2({data:k});const $=cw({abi:M,args:K,data:k,functionName:j});m.push(r?{result:$,status:"success"}:$)}catch($){const v=k0($,{abi:M,address:W,args:K,docsPath:"/docs/contract/multicall",functionName:j});if(!r)throw v;m.push({error:v,result:void 0,status:"failure"})}}}if(m.length!==l.length)throw new Te("multicall results mismatch");return m}async function SL(t,e){const{blockNumber:n,blockTag:r="latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:a}=e;try{const c=[];for(const h of s){const f=h.blockOverrides?oee(h.blockOverrides):void 0,p=h.calls.map(m=>{const y=m,w=y.account?Ks(y.account):void 0,C=y.abi?Vl(y):y.data,N={...y,data:y.dataSuffix?Wl([C||"0x",y.dataSuffix]):C,from:y.from??(w==null?void 0:w.address)};return ow(N),SC(N)}),g=h.stateOverrides?p$(h.stateOverrides):void 0;c.push({blockOverrides:f,calls:p,stateOverrides:g})}const u=(typeof n=="bigint"?St(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:o,validation:a},u]})).map((h,f)=>({...vX(h),calls:h.calls.map((p,g)=>{var W,j;const{abi:m,args:y,functionName:w,to:C}=s[f].calls[g],N=((W=p.error)==null?void 0:W.data)??p.returnData,I=BigInt(p.gasUsed),k=(j=p.logs)==null?void 0:j.map(K=>Rf(K)),P=p.status==="0x1"?"success":"failure",U=m&&P==="success"&&N!=="0x"?cw({abi:m,data:N,functionName:w}):null,M=(()=>{var $;if(P==="success")return;let K;if((($=p.error)==null?void 0:$.data)==="0x"?K=new vI:p.error&&(K=new L2(p.error)),!!K)return k0(K,{abi:m??[],address:C??"0x",args:y,functionName:w??"<unknown>"})})();return{data:N,gasUsed:I,logs:k,status:P,...P==="success"?{result:U}:{error:M}}})}))}catch(c){const l=c,u=O2(l,{});throw u instanceof _I?l:u}}function Eee(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=s$(fve(t));return n==="Bytes"?r:ree(r)}let yEe=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const wEe={checksum:new yEe(8192)},pD=wEe.checksum,bEe=/^0x[a-fA-F0-9]{40}$/;function q2(t,e={}){const{strict:n=!0}=e;if(!bEe.test(t))throw new A7({address:t,cause:new EEe});if(n){if(t.toLowerCase()===t)return;if(vEe(t)!==t)throw new A7({address:t,cause:new CEe})}}function vEe(t){if(pD.has(t))return pD.get(t);q2(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=Eee(mve(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return pD.set(t,s),s}function IL(t,e={}){const{strict:n=!0}=e??{};try{return q2(t,{strict:n}),!0}catch{return!1}}class A7 extends ii{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class EEe extends ii{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class CEe extends ii{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function NL(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new ii("Unable to normalize signature.");return s}function xL(t,e){const n=typeof t,r=e.type;switch(r){case"address":return IL(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>xL(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>xL(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Cee(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return Cee(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?IL(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?IL(n[r],{strict:!1}):!1)return o}}function _ee(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?h7(t):t;return{...r,...n?{hash:Fb(r)}:{}}}function _Ee(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=_ve(e,{strict:!1}),o=t.filter(l=>i?l.type==="function"||l.type==="error"?Aee(l)===I$(e,0,4):l.type==="event"?Fb(l)===e:!1:"name"in l&&l.name===e);if(o.length===0)throw new TL({name:e});if(o.length===1)return{...o[0],...s?{hash:Fb(o[0])}:{}};let a;for(const l of o){if(!("inputs"in l))continue;if(!r||r.length===0){if(!l.inputs||l.inputs.length===0)return{...l,...s?{hash:Fb(l)}:{}};continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==r.length)continue;if(r.every((d,h)=>{const f="inputs"in l&&l.inputs[h];return f?xL(d,f):!1})){if(a&&"inputs"in a&&a.inputs){const d=Cee(l.inputs,a.inputs,r);if(d)throw new SEe({abiItem:l,type:d[0]},{abiItem:a,type:d[1]})}a=l}}const c=(()=>{if(a)return a;const[l,...u]=o;return{...l,overloads:u}})();if(!c)throw new TL({name:e});return{...c,...s?{hash:Fb(c)}:{}}}function Aee(t){return I$(Fb(t),0,4)}function AEe(t){const e=typeof t=="string"?t:UR(t);return NL(e)}function Fb(t){return typeof t!="string"&&"hash"in t&&t.hash?t.hash:Eee(S$(AEe(t)))}class SEe extends ii{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${NL(UR(e.abiItem))}\`, and`,`\`${n.type}\` in \`${NL(UR(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class TL extends ii{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const IEe=/^(.*)\[([0-9]*)\]$/,NEe=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,See=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function xEe({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(O$({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function O$({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=BEe(r.type);if(s){const[i,o]=s;return REe(n,{checksumAddress:t,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return MEe(n,{checksumAddress:t,parameter:r});if(r.type==="address")return TEe(n,{checksum:t});if(r.type==="bool")return PEe(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=See.exec(r.type)??[];return OEe(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return kEe(n,{type:r.type});if(r.type==="string")return DEe(n);throw new Tee(r.type)}function D$(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Gl(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(na(e+s,{size:32})),r.push(a),s+=Gl(a)):n.push(a)}return th(...n,...r)}function TEe(t,e){const{checksum:n=!1}=e;return q2(t,{strict:n}),{dynamic:!1,encoded:O0(t.toLowerCase())}}function REe(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new UEe(t);if(!i&&t.length!==r)throw new LEe({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const l=O$({checksumAddress:n,parameter:s,value:t[c]});l.dynamic&&(o=!0),a.push(l)}if(i||o){const c=D$(a);if(i){const l=na(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?th(l,c):l}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:th(...a.map(({encoded:c})=>c))}}function kEe(t,{type:e}){const[,n]=e.split("bytes"),r=Gl(t);if(!n){let s=t;return r%32!==0&&(s=D0(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:th(O0(na(r,{size:32})),s)}}if(r!==Number.parseInt(n))throw new Nee({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:D0(t)}}function PEe(t){if(typeof t!="boolean")throw new ii(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:O0(nee(t))}}function OEe(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new see({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:na(t,{size:32,signed:e})}}function DEe(t){const e=S$(t),n=Math.ceil(Gl(e)/32),r=[];for(let s=0;s<n;s++)r.push(D0(I$(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:th(D0(na(Gl(e),{size:32})),...r)}}function MEe(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,l=O$({checksumAddress:n,parameter:a,value:t[c]});i.push(l),l.dynamic&&(s=!0)}return{dynamic:s,encoded:s?D$(i):th(...i.map(({encoded:o})=>o))}}function BEe(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function Iee(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new xee({expectedLength:t.length,givenLength:e.length});const s=xEe({checksumAddress:r,parameters:t,values:e}),i=D$(s);return i.length===0?"0x":i}function RL(t,e){if(t.length!==e.length)throw new xee({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(RL.encode(s,i))}return th(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return q2(c),O0(c.toLowerCase(),s?32:0)}if(n==="string")return S$(r);if(n==="bytes")return r;if(n==="bool")return O0(nee(r),s?32:1);const i=n.match(See);if(i){const[c,l,u="256"]=i,d=Number.parseInt(u)/8;return na(r,{size:s?32:d,signed:l==="int"})}const o=n.match(NEe);if(o){const[c,l]=o;if(Number.parseInt(l)!==(r.length-2)/2)throw new Nee({expectedSize:Number.parseInt(l),value:r});return D0(r,s?32:0)}const a=n.match(IEe);if(a&&Array.isArray(r)){const[c,l]=a,u=[];for(let d=0;d<r.length;d++)u.push(e(l,r[d],!0));return u.length===0?"0x":th(...u)}throw new Tee(n)}t.encode=e})(RL||(RL={}));class LEe extends ii{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class Nee extends ii{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Gl(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class xee extends ii{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class UEe extends ii{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class Tee extends ii{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function $Ee(t,e){var s;const{bytecode:n,args:r}=e;return th(n,(s=t.inputs)!=null&&s.length&&(r!=null&&r.length)?Iee(t.inputs,r):"0x")}function FEe(t){return _ee(t)}function jEe(t,...e){const{overloads:n}=t,r=n?WEe([t,...n],t.name,{args:e[0]}):t,s=zEe(r),i=e.length>0?Iee(r.inputs,e[0]):void 0;return i?th(s,i):s}function Mw(t,e={}){return _ee(t,e)}function WEe(t,e,n){const r=_Ee(t,e,n);if(r.type!=="function")throw new TL({name:e,type:"function"});return r}function zEe(t){return Aee(t)}const HEe="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",rd="0x0000000000000000000000000000000000000000",WN=new k2(8192);function GEe(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(WN.get(n))return WN.get(n);const r=t().finally(()=>WN.delete(n));return WN.set(n,r),r}async function FR(t){return new Promise(e=>setTimeout(e,t))}function jR(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await FR(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function qEe(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new Ey(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new Ey(new Error("method not supported"),{method:l});const u=s?kE(`${c}.${Ai(n)}`):void 0;return GEe(()=>jR(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case TA.code:throw new TA(f);case RA.code:throw new RA(f);case kA.code:throw new kA(f,{method:n.method});case PA.code:throw new PA(f);case x0.code:throw new x0(f);case T0.code:throw new T0(f);case OA.code:throw new OA(f);case Fg.code:throw new Fg(f);case BE.code:throw new BE(f);case Ey.code:throw new Ey(f,{method:n.method});case LE.code:throw new LE(f);case DA.code:throw new DA(f);case mi.code:throw new mi(f);case MA.code:throw new MA(f);case BA.code:throw new BA(f);case LA.code:throw new LA(f);case UA.code:throw new UA(f);case eh.code:throw new eh(f);case UE.code:throw new UE(f);case $A.code:throw new $A(f);case FA.code:throw new FA(f);case jA.code:throw new jA(f);case WA.code:throw new WA(f);case zA.code:throw new zA(f);case $E.code:throw new $E(f);case 5e3:throw new mi(f);default:throw h instanceof Te?h:new lwe(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof R_){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>VEe(h)}),{enabled:s,id:u})}}function VEe(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===LE.code||t.code===x0.code:t instanceof R_&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function Ree(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function kee(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function KEe(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const S7=KEe();function YEe(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await kee(async({signal:p})=>{const g={...a,body:Array.isArray(r)?Ai(r.map(C=>({jsonrpc:"2.0",id:C.id??S7.take(),...C}))):Ai({jsonrpc:"2.0",id:r.id??S7.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},m=new Request(t,g),y=await(s==null?void 0:s(m,g))??{...g,url:t};return await fetch(y.url??t,y)},{errorInstance:new t7({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new R_({body:r,details:Ai(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof R_||h instanceof t7?h:new R_({body:r,cause:h,url:t})}}}}class QEe extends Te{constructor({domain:e}){super(`Invalid domain "${Ai(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class JEe extends Te{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class ZEe extends Te{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function XEe(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:Lee({domain:e}),...t.types};Bee({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(eCe({domain:e,types:s})),r!=="EIP712Domain"&&i.push(Pee({data:n,primaryType:r,types:s})),ho(Wl(i))}function eCe({domain:t,types:e}){return Pee({data:t,primaryType:"EIP712Domain",types:e})}function Pee({data:t,primaryType:e,types:n}){const r=Oee({data:t,primaryType:e,types:n});return ho(r)}function Oee({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[tCe({primaryType:e,types:n})];for(const i of n[e]){const[o,a]=Mee({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(o),s.push(a)}return _m(r,s)}function tCe({primaryType:t,types:e}){const n=jl(nCe({primaryType:t,types:e}));return ho(n)}function nCe({primaryType:t,types:e}){let n="";const r=Dee({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function Dee({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])Dee({primaryType:i.type,types:e},n);return n}function Mee({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},ho(Oee({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},ho(r)];if(n==="string")return[{type:"bytes32"},ho(jl(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(o=>Mee({name:e,type:s,types:t,value:o}));return[{type:"bytes32"},ho(_m(i.map(([o])=>o),i.map(([,o])=>o)))]}return[{type:n},r]}function rCe(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return Ai({domain:o,message:a,primaryType:r,types:s})}function Bee(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(oX);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,m,y]=h;St(d,{signed:m==="int",size:Number.parseInt(y)/8})}if(u==="address"&&typeof d=="string"&&!Hl(d))throw new sm({address:d});const f=u.match(O0e);if(f){const[g,m]=f;if(m&&qs(d)!==Number.parseInt(m))throw new qye({expectedSize:Number.parseInt(m),givenSize:qs(d)})}const p=s[u];p&&(sCe(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new QEe({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new JEe({primaryType:r,types:s})}function Lee({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function sCe(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new ZEe({type:t})}const iCe=`Ethereum Signed Message:
`;function oCe(t){const e=typeof t=="string"?kE(t):typeof t.raw=="string"?t.raw:Ii(t.raw),n=kE(`${iCe}${qs(e)}`);return Wl([n,e])}function Uee(t,e){return ho(oCe(t),e)}const $ee="0x6492649264926492649264926492649264926492649264926492649264926492";function aCe(t){return MR(t,-32)===$ee}function cCe(t){const{address:e,data:n,signature:r,to:s="hex"}=t,i=AC([_m([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),$ee]);return s==="hex"?i:Fl(i)}class lCe extends Te{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function uCe(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new lCe({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const dCe="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function hCe(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:a,validation:c}=e,l=e.account?Ks(e.account):void 0;if(o&&!l)throw new Te("`account` is required when `traceAssetChanges` is true");const u=l?$Ee(FEe("constructor(bytes, bytes)"),{bytecode:aee,args:[dCe,jEe(Mw("function getBalance(address)"),[l.address])]}):void 0,d=o?await Promise.all(e.calls.map(async x=>{if(!x.data&&!x.abi)return;const{accessList:B}=await pee(t,{account:l.address,...x,data:x.abi?Vl(x):x.data});return B.map(({address:F,storageKeys:L})=>L.length>0?F:null)})).then(x=>x.flat().filter(Boolean)):[],h=await SL(t,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:u}],stateOverrides:i},{calls:d.map((x,B)=>({abi:[Mw("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:x,from:rd,nonce:B})),stateOverrides:[{address:rd,nonce:0}]}]:[],{calls:[...s,{}].map(x=>({...x,from:l==null?void 0:l.address})),stateOverrides:i},...o?[{calls:[{data:u}]},{calls:d.map((x,B)=>({abi:[Mw("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:x,from:rd,nonce:B})),stateOverrides:[{address:rd,nonce:0}]},{calls:d.map((x,B)=>({to:x,abi:[Mw("function decimals() returns (uint256)")],functionName:"decimals",from:rd,nonce:B})),stateOverrides:[{address:rd,nonce:0}]},{calls:d.map((x,B)=>({to:x,abi:[Mw("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:rd,nonce:B})),stateOverrides:[{address:rd,nonce:0}]},{calls:d.map((x,B)=>({to:x,abi:[Mw("function symbol() returns (string)")],functionName:"symbol",from:rd,nonce:B})),stateOverrides:[{address:rd,nonce:0}]}]:[]],traceTransfers:a,validation:c}),f=o?h[2]:h[0],[p,g,,m,y,w,C,N]=o?h:[],{calls:I,...k}=f,P=I.slice(0,-1)??[],U=(p==null?void 0:p.calls)??[],M=(g==null?void 0:g.calls)??[],W=[...U,...M].map(x=>x.status==="success"?Kc(x.data):null),j=(m==null?void 0:m.calls)??[],K=(y==null?void 0:y.calls)??[],$=[...j,...K].map(x=>x.status==="success"?Kc(x.data):null),v=((w==null?void 0:w.calls)??[]).map(x=>x.status==="success"?x.result:null),E=((N==null?void 0:N.calls)??[]).map(x=>x.status==="success"?x.result:null),_=((C==null?void 0:C.calls)??[]).map(x=>x.status==="success"?x.result:null),O=[];for(const[x,B]of $.entries()){const F=W[x];if(typeof B!="bigint"||typeof F!="bigint")continue;const L=v[x-1],A=E[x-1],H=_[x-1],re=x===0?{address:HEe,decimals:18,symbol:"ETH"}:{address:d[x-1],decimals:H||L?Number(L??1):void 0,symbol:A??void 0};O.some(se=>se.token.address===re.address)||O.push({token:re,value:{pre:F,post:B,diff:B-F}})}return{assetChanges:O,block:k,results:P}}const gD=new Map,I7=new Map;let fCe=0;function kf(t,e,n){const r=++fCe,s=()=>gD.get(t)||[],i=()=>{const u=s();gD.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=I7.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(gD.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&I7.set(t,l),o}function TC(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await FR(c);const l=async()=>{s&&(await t({unpoll:i}),await FR(r),l())};l()})(),i}function pCe(t,{blockTag:e="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:a,pollingInterval:c=t.pollingInterval}){const l=typeof a<"u"?a:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),u=o??!1;let d;return l?(()=>{const p=Ai(["watchBlocks",t.uid,e,n,r,u,c]);return kf(p,{onBlock:s,onError:i},g=>TC(async()=>{var m;try{const y=await Ft(t,Wd,"getBlock")({blockTag:e,includeTransactions:u});if(y.number!==null&&(d==null?void 0:d.number)!=null){if(y.number===d.number)return;if(y.number-d.number>1&&n)for(let w=(d==null?void 0:d.number)+1n;w<y.number;w++){const C=await Ft(t,Wd,"getBlock")({blockNumber:w,includeTransactions:u});g.onBlock(C,d),d=C}}((d==null?void 0:d.number)==null||e==="pending"&&(y==null?void 0:y.number)==null||y.number!==null&&y.number>d.number)&&(g.onBlock(y,d),d=y)}catch(y){(m=g.onError)==null||m.call(g,y)}},{emitOnBegin:r,interval:c}))})():(()=>{let p=!0,g=!0,m=()=>p=!1;return(async()=>{try{r&&Ft(t,Wd,"getBlock")({blockTag:e,includeTransactions:u}).then(C=>{p&&g&&(s(C,void 0),g=!1)}).catch(i);const y=(()=>{if(t.transport.type==="fallback"){const C=t.transport.transports.find(N=>N.config.type==="webSocket"||N.config.type==="ipc");return C?C.value:t.transport}return t.transport})(),{unsubscribe:w}=await y.subscribe({params:["newHeads"],async onData(C){var I;if(!p)return;const N=await Ft(t,Wd,"getBlock")({blockNumber:(I=C.result)==null?void 0:I.number,includeTransactions:u}).catch(()=>{});p&&(s(N,d),g=!1,d=N)},onError(C){i==null||i(C)}});m=w,p||m()}catch(y){i==null||i(y)}})(),()=>m()})()}function Fee(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=Ai(["watchBlockNumber",t.uid,e,n,o]);return kf(d,{onBlockNumber:r,onError:s},h=>TC(async()=>{var f;try{const p=await Ft(t,PI,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=Ai(["watchBlockNumber",t.uid,e,n]);return kf(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const y=t.transport.transports.find(w=>w.config.type==="webSocket"||w.config.type==="ipc");return y?y.value:t.transport}return t.transport})(),{unsubscribe:m}=await g.subscribe({params:["newHeads"],onData(y){var C;if(!f)return;const w=Kc((C=y.result)==null?void 0:C.number);h.onBlockNumber(w,c),c=w},onError(y){var w;(w=h.onError)==null||w.call(h,y)}});p=m,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function V2(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function gCe(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:a,onLogs:c,poll:l,pollingInterval:u=t.pollingInterval,strict:d}){const h=typeof l<"u"?l:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),f=d??!1;return h?(()=>{const m=Ai(["watchEvent",e,n,r,t.uid,s,u,o]);return kf(m,{onLogs:c,onError:a},y=>{let w;o!==void 0&&(w=o-1n);let C,N=!1;const I=TC(async()=>{var k;if(!N){try{C=await Ft(t,mee,"createEventFilter")({address:e,args:n,event:s,events:i,strict:f,fromBlock:o})}catch{}N=!0;return}try{let P;if(C)P=await Ft(t,H2,"getFilterChanges")({filter:C});else{const U=await Ft(t,PI,"getBlockNumber")({});w&&w!==U?P=await Ft(t,P$,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:w+1n,toBlock:U}):P=[],w=U}if(P.length===0)return;if(r)y.onLogs(P);else for(const U of P)y.onLogs([U])}catch(P){C&&P instanceof T0&&(N=!1),(k=y.onError)==null||k.call(y,P)}},{emitOnBegin:!0,interval:u});return async()=>{C&&await Ft(t,V2,"uninstallFilter")({filter:C}),I()}})})():(()=>{let m=!0,y=()=>m=!1;return(async()=>{try{const w=(()=>{if(t.transport.type==="fallback"){const k=t.transport.transports.find(P=>P.config.type==="webSocket"||P.config.type==="ipc");return k?k.value:t.transport}return t.transport})(),C=i??(s?[s]:void 0);let N=[];C&&(N=[C.flatMap(P=>kI({abi:[P],eventName:P.name,args:n}))],s&&(N=N[0]));const{unsubscribe:I}=await w.subscribe({params:["logs",{address:e,topics:N}],onData(k){var U;if(!m)return;const P=k.result;try{const{eventName:M,args:W}=R$({abi:C??[],data:P.data,topics:P.topics,strict:f}),j=Rf(P,{args:W,eventName:M});c([j])}catch(M){let W,j;if(M instanceof NA||M instanceof R2){if(d)return;W=M.abiItem.name,j=(U=M.abiItem.inputs)==null?void 0:U.some($=>!("name"in $&&$.name))}const K=Rf(P,{args:j?[]:{},eventName:W});c([K])}},onError(k){a==null||a(k)}});y=I,m||y()}catch(w){a==null||a(w)}})(),()=>y()})()}function jee(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=Ai(["watchPendingTransactions",t.uid,e,i]);return kf(l,{onTransactions:r,onError:n},u=>{let d;const h=TC(async()=>{var f;try{if(!d)try{d=await Ft(t,yee,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await Ft(t,H2,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await Ft(t,V2,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function mCe(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>CI(r))}async function yCe(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function wCe(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?Ks(n):void 0,i=r?[s==null?void 0:s.address,[St(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}const Wee="0x5792579257925792579257925792579257925792579257925792579257925792",zee=St(0,{size:32});async function bCe(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?Ks(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?Vl({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?Wl([p,f.dataSuffix]):p,to:f.to,value:f.value?St(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:St(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(w=>!w.optional)){const w="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new UE(new Te(w,{details:w}))}if(a&&d.length>1){const y="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new $E(new Te(y,{details:y}))}const p=[];for(const y of d){const w=II(t,{account:u,chain:s,data:y.data,to:y.to,value:y.value?Kc(y.value):void 0});p.push(w),o>0&&await new Promise(C=>setTimeout(C,o))}const g=await Promise.allSettled(p);if(g.every(y=>y.status==="rejected"))throw g[0].reason;const m=g.map(y=>y.status==="fulfilled"?y.value:zee);return{id:Wl([...m,St(s.id,{size:32}),Wee])}}throw mX(h,{...e,account:u,chain:e.chain})}}async function Hee(t,e){async function n(u){if(u.endsWith(Wee.slice(2))){const h=qd(MR(u,-64,-32)),f=MR(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(m=>zee.slice(2)!==m?t.request({method:"eth_getTransactionReceipt",params:[`0x${m}`]},{dedupe:!0}):void 0)),g=p.some(m=>m===null)?100:p.every(m=>(m==null?void 0:m.status)==="0x1")?200:p.every(m=>(m==null?void 0:m.status)==="0x0")?500:600;return{atomic:!1,chainId:Hu(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?Hu(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:Kc(u.blockNumber),gasUsed:Kc(u.gasUsed),status:bee[u.status]})))??[],statusCode:l,status:c,version:o}}async function vCe(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function ECe(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=Ai(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=N$();let u;const d=kf(o,{resolve:c,reject:l},h=>{const f=TC(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await Hee(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new CCe({id:n}))},i):void 0,await a}class CCe extends Te{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}function _Ce(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function ACe(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?Hu(t.nonce):void 0,storageProof:t.storageProof?_Ce(t.storageProof):void 0}}async function SCe(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?St(n):void 0,a=await t.request({method:"eth_getProof",params:[e,s,o||i]});return ACe(a)}async function Gee(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=Ai(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:m,reject:y}=N$(),w=a?setTimeout(()=>{p(),f(),y(new owe({hash:n}))},a):void 0;return f=kf(c,{onReplaced:r,resolve:m,reject:y},C=>{p=Ft(t,Fee,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(N){const I=P=>{clearTimeout(w),p(),P(),f()};let k=N;if(!h)try{if(d){if(e>1&&(!d.blockNumber||k-d.blockNumber+1n<e))return;I(()=>C.resolve(d));return}if(l||(h=!0,await jR(async()=>{l=await Ft(t,G2,"getTransaction")({hash:n}),l.blockNumber&&(k=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await Ft(t,AL,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||k-d.blockNumber+1n<e))return;I(()=>C.resolve(d))}catch(P){if(P instanceof pX||P instanceof gX){if(!l){h=!1;return}try{u=l,h=!0;const U=await jR(()=>Ft(t,Wd,"getBlock")({blockNumber:k,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:j})=>j instanceof yX});h=!1;const M=U.transactions.find(({from:j,nonce:K})=>j===u.from&&K===u.nonce);if(!M||(d=await Ft(t,AL,"getTransactionReceipt")({hash:M.hash}),e>1&&(!d.blockNumber||k-d.blockNumber+1n<e)))return;let W="replaced";M.to===u.to&&M.value===u.value&&M.input===u.input?W="repriced":M.from===M.to&&M.value===0n&&(W="cancelled"),I(()=>{var j;(j=C.onReplaced)==null||j.call(C,{reason:W,replacedTransaction:u,transaction:M,transactionReceipt:d}),C.resolve(d)})}catch(U){I(()=>C.reject(U))}}else I(()=>C.reject(P))}}})}),g}async function ICe(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>df(n))}async function NCe(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function qee(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new iw({docsPath:"/docs/eip7702/prepareAuthorization"});const i=Ks(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:Ks(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await Ft(t,IC,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await Ft(t,m$,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&z2(o.address,i.address))&&(a.nonce+=1)),a}async function xCe(t,e){const{account:n=t.account}=e;if(!n)throw new iw({docsPath:"/docs/eip7702/signAuthorization"});const r=Ks(n);if(!r.signAuthorization)throw new aT({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await qee(t,e);return r.signAuthorization(s)}async function TCe(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new iw({docsPath:"/docs/actions/wallet/signTransaction"});const i=Ks(n);ow({account:i,...e});const o=await Ft(t,IC,"getChainId")({});r!==null&&fX({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||SC;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:St(o),from:i.address}]},{retryCount:0})}async function Vee(t,{account:e=t.account,message:n}){if(!e)throw new iw({docsPath:"/docs/actions/wallet/signMessage"});const r=Ks(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?kE(n):n.raw instanceof Uint8Array?jl(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function RCe(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new iw({docsPath:"/docs/actions/wallet/signTypedData"});const o=Ks(n),a={EIP712Domain:Lee({domain:r}),...e.types};if(Bee({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=rCe({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function kCe(t,e){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...a}=e,c=a.account?Ks(a.account):t.account,l=Vl({abi:n,args:s,functionName:o});try{const{data:u}=await Ft(t,RI,"call")({batch:!1,data:`${l}${i?i.replace("0x",""):""}`,to:r,...a,account:c}),d=cw({abi:n,args:s,functionName:o,data:u||"0x"}),h=n.filter(f=>"name"in f&&f.name===e.functionName);return{result:d,request:{abi:h,address:r,args:s,dataSuffix:i,functionName:o,...a,account:c}}}catch(u){throw k0(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}async function PCe(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:St(e)}]},{retryCount:0})}let Kee=class extends t${constructor(e,n){super(),this.finished=!1,this.destroyed=!1,c0e(e);const r=EI(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),im(i)}update(e){return OE(this),this.iHash.update(e),this}digestInto(e){OE(this),zl(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Yee=(t,e,n)=>new Kee(t,e).update(n).digest();Yee.create=(t,e)=>new Kee(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ec=BigInt(0),po=BigInt(1),Cy=BigInt(2),OCe=BigInt(3),Qee=BigInt(4),Jee=BigInt(5),Zee=BigInt(8);function Zs(t,e){const n=t%e;return n>=ec?n:e+n}function Ws(t,e,n){let r=t;for(;e-- >ec;)r*=r,r%=n;return r}function N7(t,e){if(t===ec)throw new Error("invert: expected non-zero number");if(e<=ec)throw new Error("invert: expected positive modulus, got "+e);let n=Zs(t,e),r=e,s=ec,i=po;for(;n!==ec;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==po)throw new Error("invert: does not exist");return Zs(s,e)}function Xee(t,e){const n=(t.ORDER+po)/Qee,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function DCe(t,e){const n=(t.ORDER-Jee)/Zee,r=t.mul(e,Cy),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Cy),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function MCe(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-po,n=0;for(;e%Cy===ec;)e/=Cy,n++;let r=Cy;const s=RC(t);for(;x7(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Xee;let i=s.pow(r,e);const o=(e+po)/Cy;return function(c,l){if(c.is0(l))return l;if(x7(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),h=c.pow(l,e),f=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,g=c.sqr(h);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===u)throw new Error("Cannot find square root");const m=po<<BigInt(u-p-1),y=c.pow(d,m);u=p,d=c.sqr(y),h=c.mul(h,d),f=c.mul(f,y)}return f}}function BCe(t){return t%Qee===OCe?Xee:t%Zee===Jee?DCe:MCe(t)}const LCe=(t,e)=>(Zs(t,e)&po)===po,UCe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function $Ce(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=UCe.reduce((r,s)=>(r[s]="function",r),e);return TI(t,n),t}function FCe(t,e,n){if(n<ec)throw new Error("invalid exponent, negatives unsupported");if(n===ec)return t.ONE;if(n===po)return e;let r=t.ONE,s=e;for(;n>ec;)n&po&&(r=t.mul(r,s)),s=t.sqr(s),n>>=po;return r}function ete(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function x7(t,e){const n=(t.ORDER-po)/Cy,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function jCe(t,e){e!==void 0&&xA(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function RC(t,e,n=!1,r={}){if(t<=ec)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=jCe(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:j2(o),ZERO:ec,ONE:po,create:u=>Zs(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return ec<=u&&u<t},is0:u=>u===ec,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&po)===po,neg:u=>Zs(-u,t),eql:(u,d)=>u===d,sqr:u=>Zs(u*u,t),add:(u,d)=>Zs(u+d,t),sub:(u,d)=>Zs(u-d,t),mul:(u,d)=>Zs(u*d,t),pow:(u,d)=>FCe(l,u,d),div:(u,d)=>Zs(u*N7(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>N7(u,t),sqrt:i||(u=>(c||(c=BCe(t)),c(l,u))),toBytes:u=>n?F2(u,a):_$(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?GA(u):$2(u)},invertBatch:u=>ete(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function tte(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function nte(t){const e=tte(t);return e+Math.ceil(e/2)}function WCe(t,e,n=!1){const r=t.length,s=tte(e),i=nte(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?GA(t):$2(t),a=Zs(o,e-po)+po;return n?F2(a,s):_$(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const FE=BigInt(0),_y=BigInt(1);function k_(t,e){const n=e.negate();return t?n:e}function rte(t,e,n){const r=e==="pz"?o=>o.pz:o=>o.ez,s=ete(t.Fp,n.map(r));return n.map((o,a)=>o.toAffine(s[a])).map(t.fromAffine)}function ste(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function mD(t,e){ste(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=j2(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function T7(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=_y);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function zCe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function HCe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const yD=new WeakMap,ite=new WeakMap;function wD(t){return ite.get(t)||1}function R7(t){if(t!==FE)throw new Error("invalid wNAF")}function ote(t,e){return{constTimeNegate:k_,hasPrecomputes(n){return wD(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>FE;)r&_y&&(s=s.add(i)),i=i.double(),r>>=_y;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=mD(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=mD(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=T7(s,c,a);s=l,d?o=o.add(k_(f,r[p])):i=i.add(k_(h,r[u]))}return R7(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=mD(n,e);for(let a=0;a<o.windows&&s!==FE;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=T7(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return R7(s),i},getPrecomputes(n,r,s){let i=yD.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),yD.set(r,i))),i},wNAFCached(n,r,s){const i=wD(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=wD(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){ste(r,e),ite.set(n,r),yD.delete(n)}}}function GCe(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>FE||r>FE;)n&_y&&(i=i.add(s)),r&_y&&(o=o.add(s)),s=s.double(),n>>=_y,r>>=_y;return{p1:i,p2:o}}function ate(t,e,n,r){zCe(n,t),HCe(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=nve(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=j2(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const m=r[g],y=Number(m>>BigInt(f)&l);u[y]=u[y].add(n[g])}let p=o;for(let g=u.length-1,m=o;g>0;g--)m=m.add(u[g]),p=p.add(m);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function k7(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return $Ce(e),e}else return RC(t)}function cte(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>FE))throw new Error(`CURVE.${a} must be positive bigint`)}const r=k7(e.p,n.Fp),s=k7(e.n,n.Fn),o=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const a of o)if(!r.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function P7(t){t.lowS!==void 0&&P0("lowS",t.lowS),t.prehash!==void 0&&P0("prehash",t.prehash)}class qCe extends Error{constructor(e=""){super(e)}}const $h={Err:qCe,_tlv:{encode:(t,e)=>{const{Err:n}=$h;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=jN(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?jN(s.length/2|128):"";return jN(t)+i+s+e},decode(t,e){const{Err:n}=$h;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=$h;if(t<P_)throw new e("integer: negative integers are not allowed");let n=jN(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=$h;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return $2(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=$h,s=Js("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=$h,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},P_=BigInt(0),O_=BigInt(1),VCe=BigInt(2),zN=BigInt(3),KCe=BigInt(4);function YCe(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function lte(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=Js("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function QCe(t,e={}){const{Fp:n,Fn:r}=cte("weierstrass",t,e),{h:s,n:i}=t;TI(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(U,M,W){const{x:j,y:K}=M.toAffine(),$=n.toBytes(j);if(P0("isCompressed",W),W){a();const v=!n.isOdd(K);return uf(ute(v),$)}else return uf(Uint8Array.of(4),$,n.toBytes(K))}function l(U){zl(U);const M=n.BYTES,W=M+1,j=2*M+1,K=U.length,$=U[0],v=U.subarray(1);if(K===W&&($===2||$===3)){const E=n.fromBytes(v);if(!n.isValid(E))throw new Error("bad point: is not on curve, wrong x");const _=h(E);let O;try{O=n.sqrt(_)}catch(F){const L=F instanceof Error?": "+F.message:"";throw new Error("bad point: is not on curve, sqrt error"+L)}a();const x=n.isOdd(O);return($&1)===1!==x&&(O=n.neg(O)),{x:E,y:O}}else if(K===j&&$===4){const E=n.fromBytes(v.subarray(M*0,M*1)),_=n.fromBytes(v.subarray(M*1,M*2));if(!f(E,_))throw new Error("bad point: is not on curve");return{x:E,y:_}}else throw new Error(`bad point: got length ${K}, expected compressed=${W} or uncompressed=${j}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=YCe(n,t.a,t.b);function f(U,M){const W=n.sqr(M),j=h(U);return n.eql(W,j)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,zN),KCe),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function m(U,M,W=!1){if(!n.isValid(M)||W&&n.is0(M))throw new Error(`bad point coordinate ${U}`);return M}function y(U){if(!(U instanceof I))throw new Error("ProjectivePoint expected")}const w=$R((U,M)=>{const{px:W,py:j,pz:K}=U;if(n.eql(K,n.ONE))return{x:W,y:j};const $=U.is0();M==null&&(M=$?n.ONE:n.inv(K));const v=n.mul(W,M),E=n.mul(j,M),_=n.mul(K,M);if($)return{x:n.ZERO,y:n.ZERO};if(!n.eql(_,n.ONE))throw new Error("invZ was invalid");return{x:v,y:E}}),C=$R(U=>{if(U.is0()){if(e.allowInfinityPoint&&!n.is0(U.py))return;throw new Error("bad point: ZERO")}const{x:M,y:W}=U.toAffine();if(!n.isValid(M)||!n.isValid(W))throw new Error("bad point: x or y not field elements");if(!f(M,W))throw new Error("bad point: equation left != right");if(!U.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function N(U,M,W,j,K){return W=new I(n.mul(W.px,U),W.py,W.pz),M=k_(j,M),W=k_(K,W),M.add(W)}class I{constructor(M,W,j){this.px=m("x",M),this.py=m("y",W,!0),this.pz=m("z",j),Object.freeze(this)}static fromAffine(M){const{x:W,y:j}=M||{};if(!M||!n.isValid(W)||!n.isValid(j))throw new Error("invalid affine point");if(M instanceof I)throw new Error("projective point not allowed");return n.is0(W)&&n.is0(j)?I.ZERO:new I(W,j,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(M){return rte(I,"pz",M)}static fromBytes(M){return zl(M),I.fromHex(M)}static fromHex(M){const W=I.fromAffine(d(Js("pointHex",M)));return W.assertValidity(),W}static fromPrivateKey(M){const W=lte(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return I.BASE.multiply(W(M))}static msm(M,W){return ate(I,r,M,W)}precompute(M=8,W=!0){return P.setWindowSize(this,M),W||this.multiply(zN),this}_setWindowSize(M){this.precompute(M)}assertValidity(){C(this)}hasEvenY(){const{y:M}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(M)}equals(M){y(M);const{px:W,py:j,pz:K}=this,{px:$,py:v,pz:E}=M,_=n.eql(n.mul(W,E),n.mul($,K)),O=n.eql(n.mul(j,E),n.mul(v,K));return _&&O}negate(){return new I(this.px,n.neg(this.py),this.pz)}double(){const{a:M,b:W}=t,j=n.mul(W,zN),{px:K,py:$,pz:v}=this;let E=n.ZERO,_=n.ZERO,O=n.ZERO,x=n.mul(K,K),B=n.mul($,$),F=n.mul(v,v),L=n.mul(K,$);return L=n.add(L,L),O=n.mul(K,v),O=n.add(O,O),E=n.mul(M,O),_=n.mul(j,F),_=n.add(E,_),E=n.sub(B,_),_=n.add(B,_),_=n.mul(E,_),E=n.mul(L,E),O=n.mul(j,O),F=n.mul(M,F),L=n.sub(x,F),L=n.mul(M,L),L=n.add(L,O),O=n.add(x,x),x=n.add(O,x),x=n.add(x,F),x=n.mul(x,L),_=n.add(_,x),F=n.mul($,v),F=n.add(F,F),x=n.mul(F,L),E=n.sub(E,x),O=n.mul(F,B),O=n.add(O,O),O=n.add(O,O),new I(E,_,O)}add(M){y(M);const{px:W,py:j,pz:K}=this,{px:$,py:v,pz:E}=M;let _=n.ZERO,O=n.ZERO,x=n.ZERO;const B=t.a,F=n.mul(t.b,zN);let L=n.mul(W,$),A=n.mul(j,v),H=n.mul(K,E),re=n.add(W,j),se=n.add($,v);re=n.mul(re,se),se=n.add(L,A),re=n.sub(re,se),se=n.add(W,K);let ge=n.add($,E);return se=n.mul(se,ge),ge=n.add(L,H),se=n.sub(se,ge),ge=n.add(j,K),_=n.add(v,E),ge=n.mul(ge,_),_=n.add(A,H),ge=n.sub(ge,_),x=n.mul(B,se),_=n.mul(F,H),x=n.add(_,x),_=n.sub(A,x),x=n.add(A,x),O=n.mul(_,x),A=n.add(L,L),A=n.add(A,L),H=n.mul(B,H),se=n.mul(F,se),A=n.add(A,H),H=n.sub(L,H),H=n.mul(B,H),se=n.add(se,H),L=n.mul(A,se),O=n.add(O,L),L=n.mul(ge,se),_=n.mul(re,_),_=n.sub(_,L),L=n.mul(re,A),x=n.mul(ge,x),x=n.add(x,L),new I(_,O,x)}subtract(M){return this.add(M.negate())}is0(){return this.equals(I.ZERO)}multiply(M){const{endo:W}=e;if(!r.isValidNot0(M))throw new Error("invalid scalar: out of range");let j,K;const $=v=>P.wNAFCached(this,v,I.normalizeZ);if(W){const{k1neg:v,k1:E,k2neg:_,k2:O}=W.splitScalar(M),{p:x,f:B}=$(E),{p:F,f:L}=$(O);K=B.add(L),j=N(W.beta,x,F,v,_)}else{const{p:v,f:E}=$(M);j=v,K=E}return I.normalizeZ([j,K])[0]}multiplyUnsafe(M){const{endo:W}=e,j=this;if(!r.isValid(M))throw new Error("invalid scalar: out of range");if(M===P_||j.is0())return I.ZERO;if(M===O_)return j;if(P.hasPrecomputes(this))return this.multiply(M);if(W){const{k1neg:K,k1:$,k2neg:v,k2:E}=W.splitScalar(M),{p1:_,p2:O}=GCe(I,j,$,E);return N(W.beta,_,O,K,v)}else return P.wNAFCachedUnsafe(j,M)}multiplyAndAddUnsafe(M,W,j){const K=this.multiplyUnsafe(W).add(M.multiplyUnsafe(j));return K.is0()?void 0:K}toAffine(M){return w(this,M)}isTorsionFree(){const{isTorsionFree:M}=e;return s===O_?!0:M?M(I,this):P.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:M}=e;return s===O_?this:M?M(I,this):this.multiplyUnsafe(s)}toBytes(M=!0){return P0("isCompressed",M),this.assertValidity(),u(I,this,M)}toRawBytes(M=!0){return this.toBytes(M)}toHex(M=!0){return DE(this.toBytes(M))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}I.BASE=new I(t.Gx,t.Gy,n.ONE),I.ZERO=new I(n.ZERO,n.ONE,n.ZERO),I.Fp=n,I.Fn=r;const k=r.BITS,P=ote(I,e.endo?Math.ceil(k/2):k);return I}function ute(t){return Uint8Array.of(t?2:3)}function JCe(t,e,n={}){TI(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||YZ,s=e.hmac||((j,...K)=>Yee(e.hash,j,uf(...K))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(j){const K=a>>O_;return j>K}function u(j){return l(j)?o.neg(j):j}function d(j,K){if(!o.isValidNot0(K))throw new Error(`invalid signature ${j}: out of range 1..CURVE.n`)}class h{constructor(K,$,v){d("r",K),d("s",$),this.r=K,this.s=$,v!=null&&(this.recovery=v),Object.freeze(this)}static fromCompact(K){const $=o.BYTES,v=Js("compactSignature",K,$*2);return new h(o.fromBytes(v.subarray(0,$)),o.fromBytes(v.subarray($,$*2)))}static fromDER(K){const{r:$,s:v}=$h.toSig(Js("DER",K));return new h($,v)}assertValidity(){}addRecoveryBit(K){return new h(this.r,this.s,K)}recoverPublicKey(K){const $=i.ORDER,{r:v,s:E,recovery:_}=this;if(_==null||![0,1,2,3].includes(_))throw new Error("recovery id invalid");if(a*VCe<$&&_>1)throw new Error("recovery id is ambiguous for h>1 curve");const x=_===2||_===3?v+a:v;if(!i.isValid(x))throw new Error("recovery id 2 or 3 invalid");const B=i.toBytes(x),F=t.fromHex(uf(ute((_&1)===0),B)),L=o.inv(x),A=C(Js("msgHash",K)),H=o.create(-A*L),re=o.create(E*L),se=t.BASE.multiplyUnsafe(H).add(F.multiplyUnsafe(re));if(se.is0())throw new Error("point at infinify");return se.assertValidity(),se}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(K){if(K==="compact")return uf(o.toBytes(this.r),o.toBytes(this.s));if(K==="der")return e$($h.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return DE(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return DE(this.toBytes("compact"))}}const f=lte(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(j){try{return f(j),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const j=a;return WCe(r(nte(j)),j)},precompute(j=8,K=t.BASE){return K.precompute(j,!1)}};function g(j,K=!0){return t.fromPrivateKey(j).toBytes(K)}function m(j){if(typeof j=="bigint")return!1;if(j instanceof t)return!0;const $=Js("key",j).length,v=i.BYTES,E=v+1,_=2*v+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===E))return $===E||$===_}function y(j,K,$=!0){if(m(j)===!0)throw new Error("first arg must be private key");if(m(K)===!1)throw new Error("second arg must be public key");return t.fromHex(K).multiply(f(j)).toBytes($)}const w=e.bits2int||function(j){if(j.length>8192)throw new Error("input is too large");const K=$2(j),$=j.length*8-c;return $>0?K>>BigInt($):K},C=e.bits2int_modN||function(j){return o.create(w(j))},N=j2(c);function I(j){return $b("num < 2^"+c,j,P_,N),o.toBytes(j)}function k(j,K,$=P){if(["recovered","canonical"].some(re=>re in $))throw new Error("sign() legacy options not supported");const{hash:v}=e;let{lowS:E,prehash:_,extraEntropy:O}=$;E==null&&(E=!0),j=Js("msgHash",j),P7($),_&&(j=Js("prehashed msgHash",v(j)));const x=C(j),B=f(K),F=[I(B),I(x)];if(O!=null&&O!==!1){const re=O===!0?r(i.BYTES):O;F.push(Js("extraEntropy",re))}const L=uf(...F),A=x;function H(re){const se=w(re);if(!o.isValidNot0(se))return;const ge=o.inv(se),ae=t.BASE.multiply(se).toAffine(),fe=o.create(ae.x);if(fe===P_)return;const ye=o.create(ge*o.create(A+fe*B));if(ye===P_)return;let ve=(ae.x===fe?0:2)|Number(ae.y&O_),_e=ye;return E&&l(ye)&&(_e=u(ye),ve^=1),new h(fe,_e,ve)}return{seed:L,k2sig:H}}const P={lowS:e.lowS,prehash:!1},U={lowS:e.lowS,prehash:!1};function M(j,K,$=P){const{seed:v,k2sig:E}=k(j,K,$);return rve(e.hash.outputLen,o.BYTES,s)(v,E)}t.BASE.precompute(8);function W(j,K,$,v=U){const E=j;K=Js("msgHash",K),$=Js("publicKey",$),P7(v);const{lowS:_,prehash:O,format:x}=v;if("strict"in v)throw new Error("options.strict was renamed to lowS");if(x!==void 0&&!["compact","der","js"].includes(x))throw new Error('format must be "compact", "der" or "js"');const B=typeof E=="string"||X8(E),F=!B&&!x&&typeof E=="object"&&E!==null&&typeof E.r=="bigint"&&typeof E.s=="bigint";if(!B&&!F)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let L,A;try{if(F)if(x===void 0||x==="js")L=new h(E.r,E.s);else throw new Error("invalid format");if(B){try{x!=="compact"&&(L=h.fromDER(E))}catch(_e){if(!(_e instanceof $h.Err))throw _e}!L&&x!=="der"&&(L=h.fromCompact(E))}A=t.fromHex($)}catch{return!1}if(!L||_&&L.hasHighS())return!1;O&&(K=e.hash(K));const{r:H,s:re}=L,se=C(K),ge=o.inv(re),ae=o.create(se*ge),fe=o.create(H*ge),ye=t.BASE.multiplyUnsafe(ae).add(A.multiplyUnsafe(fe));return ye.is0()?!1:o.create(ye.x)===H}return Object.freeze({getPublicKey:g,getSharedSecret:y,sign:M,verify:W,utils:p,Point:t,Signature:h})}function ZCe(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=RC(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function XCe(t){const{CURVE:e,curveOpts:n}=ZCe(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function e1e(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function t1e(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=XCe(t),s=QCe(e,n),i=JCe(s,r,n);return e1e(t,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function n1e(t,e){const n=r=>t1e({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const WR={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const r1e=BigInt(1),kL=BigInt(2),O7=(t,e)=>(t+e/kL)/e;function s1e(t){const e=WR.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=Ws(u,n,e)*u%e,h=Ws(d,n,e)*u%e,f=Ws(h,kL,e)*l%e,p=Ws(f,s,e)*f%e,g=Ws(p,i,e)*p%e,m=Ws(g,a,e)*g%e,y=Ws(m,c,e)*m%e,w=Ws(y,a,e)*g%e,C=Ws(w,n,e)*u%e,N=Ws(C,o,e)*p%e,I=Ws(N,r,e)*l%e,k=Ws(I,kL,e);if(!PL.eql(PL.sqr(k),t))throw new Error("Cannot find square root");return k}const PL=RC(WR.p,void 0,void 0,{sqrt:s1e}),K2=n1e({...WR,Fp:PL,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=WR.n,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-r1e*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=O7(i*t,e),c=O7(-r*t,e);let l=Zs(t-a*n-c*s,e),u=Zs(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},IX),i1e=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:K2},Symbol.toStringTag,{value:"Module"}));function o1e({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new K2.Signature(Kc(t),Kc(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:Fl(o)}async function M$(t,e){var d,h,f;const{address:n,factory:r,factoryData:s,hash:i,signature:o,universalSignatureVerifierAddress:a=(f=(h=(d=t.chain)==null?void 0:d.contracts)==null?void 0:h.universalSignatureVerifier)==null?void 0:f.address,...c}=e,l=Xd(o)?o:typeof o=="object"&&"r"in o&&"s"in o?o1e(o):Ii(o),u=await(async()=>!r&&!s||aCe(l)?l:cCe({address:r,data:s,signature:l}))();try{const p=a?{to:a,data:Vl({abi:l7,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:P2({abi:l7,args:[n,i,u],bytecode:Tve}),...c},{data:g}=await Ft(t,RI,"call")(p);return Oye(g??"0x0")}catch(p){try{if(z2(df(n),await aX({hash:i,signature:o})))return!0}catch{}if(p instanceof QX)return!1;throw p}}async function a1e(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...o}){const a=Uee(n);return M$(t,{address:e,factory:r,factoryData:s,hash:a,signature:i,...o})}async function c1e(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:a,types:c,domain:l,...u}=e,d=XEe({message:o,primaryType:a,types:c,domain:l});return M$(t,{address:n,factory:r,factoryData:s,hash:d,signature:i,...u})}async function l1e(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function u1e(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:a,onError:c,onLogs:l,poll:u,pollingInterval:d=t.pollingInterval,strict:h}=e;return(typeof u<"u"?u:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{const m=h??!1,y=Ai(["watchContractEvent",r,s,i,t.uid,o,d,m,a]);return kf(y,{onLogs:l,onError:c},w=>{let C;a!==void 0&&(C=a-1n);let N,I=!1;const k=TC(async()=>{var P;if(!I){try{N=await Ft(t,gee,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:m,fromBlock:a})}catch{}I=!0;return}try{let U;if(N)U=await Ft(t,H2,"getFilterChanges")({filter:N});else{const M=await Ft(t,PI,"getBlockNumber")({});C&&C<M?U=await Ft(t,wee,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:C+1n,toBlock:M,strict:m}):U=[],C=M}if(U.length===0)return;if(i)w.onLogs(U);else for(const M of U)w.onLogs([M])}catch(U){N&&U instanceof T0&&(I=!1),(P=w.onError)==null||P.call(w,U)}},{emitOnBegin:!0,interval:d});return async()=>{N&&await Ft(t,V2,"uninstallFilter")({filter:N}),k()}})})():(()=>{const m=h??!1,y=Ai(["watchContractEvent",r,s,i,t.uid,o,d,m]);let w=!0,C=()=>w=!1;return kf(y,{onLogs:l,onError:c},N=>((async()=>{try{const I=(()=>{if(t.transport.type==="fallback"){const U=t.transport.transports.find(M=>M.config.type==="webSocket"||M.config.type==="ipc");return U?U.value:t.transport}return t.transport})(),k=o?kI({abi:n,eventName:o,args:s}):[],{unsubscribe:P}=await I.subscribe({params:["logs",{address:r,topics:k}],onData(U){var W;if(!w)return;const M=U.result;try{const{eventName:j,args:K}=R$({abi:n,data:M.data,topics:M.topics,strict:h}),$=Rf(M,{args:K,eventName:j});N.onLogs([$])}catch(j){let K,$;if(j instanceof NA||j instanceof R2){if(h)return;K=j.abiItem.name,$=(W=j.abiItem.inputs)==null?void 0:W.some(E=>!("name"in E&&E.name))}const v=Rf(M,{args:$?[]:{},eventName:K});N.onLogs([v])}},onError(U){var M;(M=N.onError)==null||M.call(N,U)}});C=P,w||C()}catch(I){c==null||c(I)}})(),()=>C()))})()}async function dte(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new iw({docsPath:"/docs/contract/writeContract"});const l=r?Ks(r):null,u=Vl({abi:n,args:i,functionName:a});try{return await Ft(t,II,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw k0(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function Gc(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const lT="2.17.3",d1e=()=>`@wagmi/core@${lT}`;var hte=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},zR,fte;let Wf=class OL extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return d1e()}constructor(e,n={}){var i;super(),zR.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof OL?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof OL&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return hte(this,zR,"m",fte).call(this,this,e)}};zR=new WeakSet,fte=function t(e,n){return n!=null&&n(e)?e:e.cause?hte(this,zR,"m",t).call(this,e.cause,n):e};class qA extends Wf{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class h1e extends Wf{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class f1e extends Wf{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class p1e extends Wf{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class g1e extends Wf{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class m1e extends Wf{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function uT(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new h1e;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const DL=256;let HN=DL,GN;function pte(t=11){if(!GN||HN+t>DL*2){GN="",HN=0;for(let e=0;e<DL;e++)GN+=(256+Math.random()*256|0).toString(16).substring(1)}return GN.substring(HN,HN+++t)}function gte(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?Ks(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},m={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:pte()};function y(w){return C=>{const N=C(w);for(const k in m)delete N[k];const I={...w,...N};return Object.assign(I,{extend:y(I)})}}return Object.assign(m,{extend:y(m)})}function B$({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=pte();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:qEe(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function y1e(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>B$({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function HR(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=w1e,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=B$({key:n,name:r,async request({method:g,params:m}){let y;const w=async(C=0)=>{const N=h[C]({...d,chain:c,retryCount:0,timeout:u});try{const I=await N.request({method:g,params:m});return f({method:g,params:m,response:I,transport:N,status:"success"}),I}catch(I){if(f({error:I,method:g,params:m,transport:N,status:"error"}),i(I)||C===h.length-1||(y??(y=h.slice(C+1).some(k=>{const{include:P,exclude:U}=k({chain:c}).config.methods||{};return P?P.includes(g):U?!U.includes(g):!0})),!y))throw I;return w(C+1)}};return w()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};b1e({chain:c,interval:g.interval??l,onTransports:m=>h=m,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function w1e(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===BE.code||t.code===mi.code||vy.nodeMessage.test(t.message)||t.code===5e3))}function b1e({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const m=g({chain:t,retryCount:0,timeout:i}),y=Date.now();let w,C;try{await(r?r({transport:m}):m.request({method:"net_listening"})),C=1}catch{C=0}finally{w=Date.now()}return{latency:w-y,success:C}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:m})=>m)))),p=o.map((g,m)=>{const y=u.map(k=>k[m].latency),C=1-y.reduce((k,P)=>k+P,0)/y.length/f,N=u.map(k=>k[m].success),I=N.reduce((k,P)=>k+P,0)/N.length;return I===0?[0,m]:[l*C+c*I,m]}).sort((g,m)=>m[0]-g[0]);n(p.map(([,g])=>o[g])),await FR(e),d()};d()}class v1e extends Te{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function mg(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},m=e.retryCount??h,y=f??e.timeout??1e4,w=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!w)throw new v1e;const C=YEe(w,{fetchOptions:r,onRequest:a,onResponse:c,timeout:y});return B$({key:s,methods:i,name:o,async request({method:N,params:I}){const k={method:N,params:I},{schedule:P}=lee({id:w,wait:g,shouldSplitBatch(j){return j.length>p},fn:j=>C.request({body:j}),sort:(j,K)=>j.id-K.id}),U=async j=>n?P(j):[await C.request({body:j})],[{error:M,result:W}]=await U(k);if(u)return{error:M,result:W};if(M)throw new d$({body:k,error:M,url:w});return W},retryCount:m,retryDelay:l,timeout:y,type:"http"},{fetchOptions:r,url:w})}}function E1e(t){var d,h,f;const{scheme:e,statement:n,...r}=((d=t.match(C1e))==null?void 0:d.groups)??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...l}=((h=t.match(_1e))==null?void 0:h.groups)??{},u=(f=t.split("Resources:")[1])==null?void 0:f.split(`
- `).slice(1);return{...r,...l,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...u?{resources:u}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const C1e=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,_1e=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function A1e(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!Hl(r.address,{strict:!1})||e&&!z2(r.address,e))return!1}catch{return!1}return!0}async function S1e(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...l}=e,u=E1e(s);if(!u.address||!A1e({address:n,domain:r,message:u,nonce:i,scheme:o,time:c}))return!1;const h=Uee(s);return M$(t,{address:u.address,hash:h,signature:a,...l})}function I1e(t){return{call:e=>RI(t,e),createAccessList:e=>pee(t,e),createBlockFilter:()=>Qve(t),createContractEventFilter:e=>gee(t,e),createEventFilter:e=>mee(t,e),createPendingTransactionFilter:()=>yee(t),estimateContractGas:e=>Zve(t,e),estimateGas:e=>M2(t,e),getBalance:e=>g$(t,e),getBlobBaseFee:()=>Xve(t),getBlock:e=>Wd(t,e),getBlockNumber:e=>PI(t,e),getBlockTransactionCount:e=>iEe(t,e),getBytecode:e=>C7(t,e),getChainId:()=>IC(t),getCode:e=>C7(t,e),getContractEvents:e=>wee(t,e),getEip712Domain:e=>lEe(t,e),getEnsAddress:e=>Mve(t,e),getEnsAvatar:e=>Kve(t,e),getEnsName:e=>fee(t,e),getEnsResolver:e=>Yve(t,e),getEnsText:e=>hee(t,e),getFeeHistory:e=>hEe(t,e),estimateFeesPerGas:e=>ywe(t,e),getFilterChanges:e=>H2(t,e),getFilterLogs:e=>fEe(t,e),getGasPrice:()=>f$(t),getLogs:e=>P$(t,e),getProof:e=>SCe(t,e),estimateMaxPriorityFeePerGas:e=>mwe(t,e),getStorageAt:e=>pEe(t,e),getTransaction:e=>G2(t,e),getTransactionConfirmations:e=>gEe(t,e),getTransactionCount:e=>m$(t,e),getTransactionReceipt:e=>AL(t,e),multicall:e=>vee(t,e),prepareTransactionRequest:e=>SI(t,e),readContract:e=>nh(t,e),sendRawTransaction:e=>w$(t,e),simulate:e=>SL(t,e),simulateBlocks:e=>SL(t,e),simulateCalls:e=>hCe(t,e),simulateContract:e=>kCe(t,e),verifyMessage:e=>a1e(t,e),verifySiweMessage:e=>S1e(t,e),verifyTypedData:e=>c1e(t,e),uninstallFilter:e=>V2(t,e),waitForTransactionReceipt:e=>Gee(t,e),watchBlocks:e=>pCe(t,e),watchBlockNumber:e=>Fee(t,e),watchContractEvent:e=>u1e(t,e),watchEvent:e=>gCe(t,e),watchPendingTransactions:e=>jee(t,e)}}function N1e(t){return{addChain:e=>Bye(t,e),deployContract:e=>jwe(t,e),getAddresses:()=>mCe(t),getCallsStatus:e=>Hee(t,e),getCapabilities:e=>wCe(t,e),getChainId:()=>IC(t),getPermissions:()=>yCe(t),prepareAuthorization:e=>qee(t,e),prepareTransactionRequest:e=>SI(t,e),requestAddresses:()=>ICe(t),requestPermissions:e=>NCe(t,e),sendCalls:e=>bCe(t,e),sendRawTransaction:e=>w$(t,e),sendTransaction:e=>II(t,e),showCallsStatus:e=>vCe(t,e),signAuthorization:e=>xCe(t,e),signMessage:e=>Vee(t,e),signTransaction:e=>TCe(t,e),signTypedData:e=>RCe(t,e),switchChain:e=>PCe(t,e),waitForCallsStatus:e=>ECe(t,e),watchAsset:e=>l1e(t,e),writeContract:e=>dte(t,e)}}async function OI(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new m1e({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new f1e;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new g1e({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=Ks(e.account??n.accounts[0]);if(o&&(o.address=df(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new p1e({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return gte({account:o,chain:a,name:"Connector Client",transport:l=>y1e(c)({...l,retryCount:0})})}async function ML(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function x1e(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await OI(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return Gc(o,M2,"estimateGas")({...s,account:i})}function mte(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(nwe[t])}function cv(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function T1e(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return Gc(o,vee,"multicall")({allowFailure:n,contracts:s,...i})}function yte(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Gc(s,nh,"readContract")(r)}async function R1e(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>T1e(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof JX)throw c;const l=()=>o.map(u=>yte(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function k1e(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await D7(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await D7(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=$Z(qd(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await Gc(c,g$,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:Am(u,mte(a)),symbol:d.nativeCurrency.symbol,value:u}}async function D7(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await R1e(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=Am(c??"0",mte(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function M7(t){return t.state.chainId}function om(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!om(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!om(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let bD=[];function B7(t){const e=t.chains;return om(bD,e)?bD:(bD=e,e)}function P1e(t,e={}){let n;try{n=t.getClient(e)}catch{}return n}let qN=[];function gu(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||om(qN,e)?qN:(qN=e,e)}let vD=[];function L7(t){const e=t.connectors;return om(vD,e)?vD:(vD=e,e)}function O1e(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Gc(s,fee,"getEnsName")(r)}function BL(t,e={}){const n=P1e(t,e);return n==null?void 0:n.extend(I1e)}async function D1e(t,e={}){return(await OI(t,e)).extend(N1e)}async function M1e(t,e){const{account:n,chainId:r,...s}=e,i=n??cv(t).address,o=t.getClient({chainId:r});return Gc(o,SI,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let ED=!1;async function LL(t,e={}){var l,u;if(ED)return[];ED=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const m=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:m}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),ED=!1,a}async function B1e(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await OI(t,{account:n??void 0,chainId:r,connector:s}),await Gc(o,II,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function L1e(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await OI(t,{account:n,connector:r}),Gc(i,Vee,"signMessage")({...s,...n?{account:n}:{}})}class Rp extends Wf{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class U1e extends Wf{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function UL(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new U1e({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new qA;return t.setState(a=>({...a,chainId:r})),i}function wte(t,e){const{onChange:n}=e;return t.subscribe(()=>cv(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return om(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function $1e(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function bte(t,e){const{onChange:n}=e;return t.subscribe(()=>gu(t),n,{equalityFn:om})}function vte(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function F1e(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=Gc(l,jee,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}function j1e(t,e){const{onChange:n}=e;return t.subscribe(()=>BL(t),n,{equalityFn(r,s){return(r==null?void 0:r.uid)===(s==null?void 0:s.uid)}})}async function Ete(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await Gc(i,Gee,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await Gc(i,G2,"getTransaction")({hash:a.transactionHash}),d=await Gc(i,RI,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?$Z(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function Cte(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await OI(t,{account:n??void 0,chainId:r,connector:s}),await Gc(o,dte,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function Hit(t){return t}Y2.type="injected";function Y2(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...W1e[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:Y2.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,m,y,w;const d=await this.getProvider();if(!d)throw new Rp;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(m=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:m.map(N=>df(N)),h.length>0&&(h=await this.getAccounts())}catch(C){const N=C;if(N.code===mi.code)throw new mi(N);if(N.code===Fg.code)throw N}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(I=>df(I))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let C=await this.getChainId();if(l&&C!==l){const N=await this.switchChain({chainId:l}).catch(I=>{if(I.code===mi.code)throw I;return{id:C}});C=(N==null?void 0:N.id)??C}return e&&await((y=c.storage)==null?void 0:y.removeItem(`${this.id}.disconnected`)),t.target||await((w=c.storage)==null?void 0:w.setItem("injected.connected",!0)),{accounts:h,chainId:C}}catch(C){const N=C;throw N.code===mi.code?new mi(N):N.code===Fg.code?new Fg(N):N}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new Rp;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await kee(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new Rp;return(await l.request({method:"eth_accounts"})).map(d=>df(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new Rp;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=dT(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(y=>window.addEventListener("ethereum#initialized",()=>y(p()),{once:!0}))]:[],new Promise(y=>setTimeout(()=>y(p()),g))]))return!0}throw new Rp}return!!(await jR(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,m,y;const d=await this.getProvider();if(!d)throw new Rp;const h=c.chains.find(w=>w.id===u);if(!h)throw new eh(new qA);const f=new Promise(w=>{const C=N=>{"chainId"in N&&N.chainId===u&&(c.emitter.off("change",C),w())};c.emitter.on("change",C)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:St(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(w){const C=w;if(C.code===4902||((g=(p=C==null?void 0:C.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:N,...I}=h.blockExplorers??{};let k;l!=null&&l.blockExplorerUrls?k=l.blockExplorerUrls:N&&(k=[N.url,...Object.values(I).map(M=>M.url)]);let P;(m=l==null?void 0:l.rpcUrls)!=null&&m.length?P=l.rpcUrls:P=[((y=h.rpcUrls.default)==null?void 0:y.http[0])??""];const U={blockExplorerUrls:k,chainId:St(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:P};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[U]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new mi(new Error("User rejected switch after adding network."))}),f]),h}catch(N){throw new mi(N)}throw C.code===mi.code?new mi(C):new eh(C)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>df(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const W1e={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:dT(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return dT(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:dT(t,"isPhantom")}}};function dT(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function z1e(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function H1e(){const t=new Set;let e=[];const n=()=>z1e(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const G1e=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},q1e=G1e;function V1e(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const $L=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return $L(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return $L(r)(n)}}}},K1e=(t,e)=>(n,r,s)=>{let i={storage:V1e(()=>localStorage),partialize:g=>g,version:0,merge:(g,m)=>({...m,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,m)=>{d(g,m),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,m;if(!l)return;o=!1,a.forEach(w=>{var C;return w((C=r())!=null?C:h)});const y=((m=i.onRehydrateStorage)==null?void 0:m.call(i,(g=r())!=null?g:h))||void 0;return $L(l.getItem.bind(l))(i.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==i.version){if(i.migrate)return[!0,i.migrate(w.state,w.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var C;const[N,I]=w;if(f=i.merge(I,(C=r())!=null?C:h),n(f,!0),N)return u()}).then(()=>{y==null||y(f,void 0),f=r(),o=!0,c.forEach(w=>w(f))}).catch(w=>{y==null||y(void 0,w)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},Y1e=K1e,U7=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},CD=t=>t?U7(t):U7;var _te={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var m=this._events[g],y=arguments.length,w,C;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,u),!0;case 3:return m.fn.call(m.context,u,d),!0;case 4:return m.fn.call(m.context,u,d,h),!0;case 5:return m.fn.call(m.context,u,d,h,f),!0;case 6:return m.fn.call(m.context,u,d,h,f,p),!0}for(C=1,w=new Array(y-1);C<y;C++)w[C-1]=arguments[C];m.fn.apply(m.context,w)}else{var N=m.length,I;for(C=0;C<N;C++)switch(m[C].once&&this.removeListener(l,m[C].fn,void 0,!0),y){case 1:m[C].fn.call(m[C].context);break;case 2:m[C].fn.call(m[C].context,u);break;case 3:m[C].fn.call(m[C].context,u,d);break;case 4:m[C].fn.call(m[C].context,u,d,h);break;default:if(!w)for(I=1,w=new Array(y-1);I<y;I++)w[I-1]=arguments[I];m[C].fn.apply(m[C].context,w)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,m=[],y=p.length;g<y;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&m.push(p[g]);m.length?this._events[f]=m.length===1?m[0]:m:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(_te);var Q1e=_te.exports;const L$=ch(Q1e);class J1e{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new L$})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function Z1e(t){return new J1e(t)}function X1e(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function $7(t,e){return t.slice(0,e).join(".")||"."}function F7(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function e_e(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=F7(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=F7(s,c);if(u!==0)return r?e.call(this,a,c,$7(i,u)):`[ref=${$7(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function t_e(t,e,n,r){return JSON.stringify(t,e_e((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function n_e(t){const{deserialize:e=X1e,key:n="wagmi",serialize:r=t_e,storage:s=Ate}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const Ate={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function r_e(){const t=typeof window<"u"&&window.localStorage?window.localStorage:Ate;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const FL=256;let VN=FL,KN;function s_e(t=11){if(!KN||VN+t>FL*2){KN="",VN=0;for(let e=0;e<FL;e++)KN+=(256+Math.random()*256|0).toString(16).substring(1)}return KN.substring(VN,VN+++t)}function i_e(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=n_e({storage:r_e()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?H1e():void 0,a=CD(()=>i.chains),c=CD(()=>{const I=[],k=new Set;for(const P of i.connectors??[]){const U=l(P);if(I.push(U),!s&&U.rdns){const M=typeof U.rdns=="string"?[U.rdns]:U.rdns;for(const W of M)k.add(W)}}if(!s&&o){const P=o.getProviders();for(const U of P)k.has(U.info.rdns)||I.push(l(u(U)))}return I});function l(I){var U;const k=Z1e(s_e()),P={...I({emitter:k,chains:a.getState(),storage:n,transports:i.transports}),emitter:k,uid:k.uid};return k.on("connect",C),(U=P.setup)==null||U.call(P),P}function u(I){const{info:k}=I,P=I.provider;return Y2({target:{...k,id:k.rdns,provider:P}})}const d=new Map;function h(I={}){const k=I.chainId??m.getState().chainId,P=a.getState().find(M=>M.id===k);if(I.chainId&&!P)throw new qA;{const M=d.get(m.getState().chainId);if(M&&!P)return M;if(!P)throw new qA}{const M=d.get(k);if(M)return M}let U;if(i.client)U=i.client({chain:P});else{const M=P.id,W=a.getState().map($=>$.id),j={},K=Object.entries(i);for(const[$,v]of K)if(!($==="chains"||$==="client"||$==="connectors"||$==="transports"))if(typeof v=="object")if(M in v)j[$]=v[M];else{if(W.some(_=>_ in v))continue;j[$]=v}else j[$]=v;U=gte({...j,chain:P,batch:j.batch??{multicall:!0},transport:$=>i.transports[M]({...$,connectors:c})})}return d.set(k,U),U}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";lT.startsWith(g)?p=Number.parseInt(lT.replace(g,"")):p=Number.parseInt(lT.split(".")[0]??"0");const m=CD(q1e(n?Y1e(f,{migrate(I,k){if(k===p)return I;const P=f(),U=y(I,P.chainId);return{...P,chainId:U}},name:"store",partialize(I){return{connections:{__type:"Map",value:Array.from(I.connections.entries()).map(([k,P])=>{const{id:U,name:M,type:W,uid:j}=P.connector;return[k,{...P,connector:{id:U,name:M,type:W,uid:j}}]})},chainId:I.chainId,current:I.current}},merge(I,k){typeof I=="object"&&I&&"status"in I&&delete I.status;const P=y(I,k.chainId);return{...k,...I,chainId:P}},skipHydration:s,storage:n,version:p}):f));m.setState(f());function y(I,k){return I&&typeof I=="object"&&"chainId"in I&&typeof I.chainId=="number"&&a.getState().some(P=>P.id===I.chainId)?I.chainId:k}r&&m.subscribe(({connections:I,current:k})=>{var P;return k?(P=I.get(k))==null?void 0:P.chainId:void 0},I=>{if(a.getState().some(P=>P.id===I))return m.setState(P=>({...P,chainId:I??P.chainId}))}),o==null||o.subscribe(I=>{const k=new Set,P=new Set;for(const M of c.getState())if(k.add(M.id),M.rdns){const W=typeof M.rdns=="string"?[M.rdns]:M.rdns;for(const j of W)P.add(j)}const U=[];for(const M of I){if(P.has(M.info.rdns))continue;const W=l(u(M));k.has(W.id)||U.push(W)}n&&!m.persist.hasHydrated()||c.setState(M=>[...M,...U],!0)});function w(I){m.setState(k=>{const P=k.connections.get(I.uid);return P?{...k,connections:new Map(k.connections).set(I.uid,{accounts:I.accounts??P.accounts,chainId:I.chainId??P.chainId,connector:P.connector})}:k})}function C(I){m.getState().status==="connecting"||m.getState().status==="reconnecting"||m.setState(k=>{const P=c.getState().find(U=>U.uid===I.uid);return P?(P.emitter.listenerCount("connect")&&P.emitter.off("connect",w),P.emitter.listenerCount("change")||P.emitter.on("change",w),P.emitter.listenerCount("disconnect")||P.emitter.on("disconnect",N),{...k,connections:new Map(k.connections).set(I.uid,{accounts:I.accounts,chainId:I.chainId,connector:P}),current:I.uid,status:"connected"}):k})}function N(I){m.setState(k=>{const P=k.connections.get(I.uid);if(P){const M=P.connector;M.emitter.listenerCount("change")&&P.connector.emitter.off("change",w),M.emitter.listenerCount("disconnect")&&P.connector.emitter.off("disconnect",N),M.emitter.listenerCount("connect")||P.connector.emitter.on("connect",C)}if(k.connections.delete(I.uid),k.connections.size===0)return{...k,connections:new Map,current:null,status:"disconnected"};const U=k.connections.values().next().value;return{...k,connections:new Map(k.connections),current:U.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return m.getState()},setState(I){let k;typeof I=="function"?k=I(m.getState()):k=I;const P=f();typeof k!="object"&&(k=P),Object.keys(P).some(M=>!(M in k))&&(k=P),m.setState(k,!0)},subscribe(I,k,P){return m.subscribe(I,k,P?{...P,fireImmediately:P.emitImmediately}:void 0)},_internal:{mipd:o,store:m,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(I){const k=typeof I=="function"?I(a.getState()):I;if(k.length!==0)return a.setState(k,!0)},subscribe(I){return a.subscribe(I)}},connectors:{providerDetailToConnector:u,setup:l,setState(I){return c.setState(typeof I=="function"?I(c.getState()):I,!0)},subscribe(I){return c.subscribe(I)}},events:{change:w,connect:C,disconnect:N}}}}function o_e(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?LL(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function a_e(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=o_e(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=G.useRef(!0);return G.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const Ste=G.createContext(void 0);function c_e(t){const{children:e,config:n}=t,r={value:n};return G.createElement(a_e,t,G.createElement(Ste.Provider,r,e))}const l_e="2.15.6",u_e=()=>`wagmi@${l_e}`;let d_e=class extends Wf{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return u_e()}};class h_e extends d_e{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function hc(t={}){const e=t.config??G.useContext(Ste);if(!e)throw new h_e;return e}function f_e(t,e){const{onChange:n}=e;return t._internal.chains.subscribe((r,s)=>{n(r,s)})}var Ite={exports:{}},Nte={},xte={exports:{}},Tte={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jE=G;function p_e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var g_e=typeof Object.is=="function"?Object.is:p_e,m_e=jE.useState,y_e=jE.useEffect,w_e=jE.useLayoutEffect,b_e=jE.useDebugValue;function v_e(t,e){var n=e(),r=m_e({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return w_e(function(){s.value=n,s.getSnapshot=e,_D(s)&&i({inst:s})},[t,n,e]),y_e(function(){return _D(s)&&i({inst:s}),t(function(){_D(s)&&i({inst:s})})},[t]),b_e(n),n}function _D(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!g_e(t,n)}catch{return!0}}function E_e(t,e){return e()}var C_e=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?E_e:v_e;Tte.useSyncExternalStore=jE.useSyncExternalStore!==void 0?jE.useSyncExternalStore:C_e;xte.exports=Tte;var Rte=xte.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q2=G,__e=Rte;function A_e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var S_e=typeof Object.is=="function"?Object.is:A_e,I_e=__e.useSyncExternalStore,N_e=Q2.useRef,x_e=Q2.useEffect,T_e=Q2.useMemo,R_e=Q2.useDebugValue;Nte.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=N_e(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=T_e(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,S_e(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=I_e(t,i[0],i[1]);return x_e(function(){o.hasValue=!0,o.value=a},[a]),R_e(a),a};Ite.exports=Nte;var kte=Ite.exports;const AD=t=>typeof t=="object"&&!Array.isArray(t);function k_e(t,e,n=e,r=om){const s=G.useRef([]),i=kte.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(AD(o)&&AD(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return G.useMemo(()=>{if(AD(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function DI(t={}){const e=hc(t);return k_e(n=>wte(e,{onChange:n}),()=>cv(e))}var kC=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},M0=typeof window>"u"||"Deno"in globalThis;function ta(){}function P_e(t,e){return typeof t=="function"?t(e):t}function jL(t){return typeof t=="number"&&t>=0&&t!==1/0}function Pte(t,e){return Math.max(t+(e||0)-Date.now(),0)}function jg(t,e){return typeof t=="function"?t(e):t}function xl(t,e){return typeof t=="function"?t(e):t}function j7(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==U$(o,e.options))return!1}else if(!VA(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function W7(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(B0(e.options.mutationKey)!==B0(i))return!1}else if(!VA(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function U$(t,e){return((e==null?void 0:e.queryKeyHashFn)||B0)(t)}function B0(t){return JSON.stringify(t,(e,n)=>WL(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function VA(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>VA(t[n],e[n])):!1}function $$(t,e){if(t===e)return t;const n=z7(t)&&z7(e);if(n||WL(t)&&WL(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=$$(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function GR(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function z7(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function WL(t){if(!H7(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!H7(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function H7(t){return Object.prototype.toString.call(t)==="[object Object]"}function O_e(t){return new Promise(e=>{setTimeout(e,t)})}function zL(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?$$(t,e):e}function D_e(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function M_e(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var F$=Symbol();function Ote(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===F$?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Dte(t,e){return typeof t=="function"?t(...e):!!t}var ky,jp,Cv,TK,B_e=(TK=class extends kC{constructor(){super();ne(this,ky);ne(this,jp);ne(this,Cv);q(this,Cv,e=>{if(!M0&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){R(this,jp)||this.setEventListener(R(this,Cv))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,jp))==null||e.call(this),q(this,jp,void 0))}setEventListener(e){var n;q(this,Cv,e),(n=R(this,jp))==null||n.call(this),q(this,jp,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){R(this,ky)!==e&&(q(this,ky,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof R(this,ky)=="boolean"?R(this,ky):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ky=new WeakMap,jp=new WeakMap,Cv=new WeakMap,TK),j$=new B_e,_v,Wp,Av,RK,L_e=(RK=class extends kC{constructor(){super();ne(this,_v,!0);ne(this,Wp);ne(this,Av);q(this,Av,e=>{if(!M0&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){R(this,Wp)||this.setEventListener(R(this,Av))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,Wp))==null||e.call(this),q(this,Wp,void 0))}setEventListener(e){var n;q(this,Av,e),(n=R(this,Wp))==null||n.call(this),q(this,Wp,e(this.setOnline.bind(this)))}setOnline(e){R(this,_v)!==e&&(q(this,_v,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return R(this,_v)}},_v=new WeakMap,Wp=new WeakMap,Av=new WeakMap,RK),qR=new L_e;function HL(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function U_e(t){return Math.min(1e3*2**t,3e4)}function Mte(t){return(t??"online")==="online"?qR.isOnline():!0}var Bte=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function SD(t){return t instanceof Bte}function Lte(t){let e=!1,n=0,r=!1,s;const i=HL(),o=g=>{var m;r||(h(new Bte(g)),(m=t.abort)==null||m.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>j$.isFocused()&&(t.networkMode==="always"||qR.isOnline())&&t.canRun(),u=()=>Mte(t.networkMode)&&t.canRun(),d=g=>{var m;r||(r=!0,(m=t.onSuccess)==null||m.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var m;r||(r=!0,(m=t.onError)==null||m.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var m;s=y=>{(r||l())&&g(y)},(m=t.onPause)==null||m.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const m=n===0?t.initialPromise:void 0;try{g=m??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(d).catch(y=>{var k;if(r)return;const w=t.retry??(M0?0:3),C=t.retryDelay??U_e,N=typeof C=="function"?C(n,y):C,I=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,y);if(e||!I){h(y);return}n++,(k=t.onFail)==null||k.call(t,n,y),O_e(N).then(()=>l()?void 0:f()).then(()=>{e?h(y):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var $_e=t=>setTimeout(t,0);function F_e(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=$_e;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var bi=F_e(),Py,kK,Ute=(kK=class{constructor(){ne(this,Py)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),jL(this.gcTime)&&q(this,Py,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(M0?1/0:5*60*1e3))}clearGcTimeout(){R(this,Py)&&(clearTimeout(R(this,Py)),q(this,Py,void 0))}},Py=new WeakMap,kK),Sv,Oy,El,Dy,Po,GS,My,yu,Oh,PK,j_e=(PK=class extends Ute{constructor(e){super();ne(this,yu);ne(this,Sv);ne(this,Oy);ne(this,El);ne(this,Dy);ne(this,Po);ne(this,GS);ne(this,My);q(this,My,!1),q(this,GS,e.defaultOptions),this.setOptions(e.options),this.observers=[],q(this,Dy,e.client),q(this,El,R(this,Dy).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,q(this,Sv,W_e(this.options)),this.state=e.state??R(this,Sv),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=R(this,Po))==null?void 0:e.promise}setOptions(e){this.options={...R(this,GS),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&R(this,El).remove(this)}setData(e,n){const r=zL(this.state.data,e,this.options);return Ie(this,yu,Oh).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Ie(this,yu,Oh).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=R(this,Po))==null?void 0:r.promise;return(s=R(this,Po))==null||s.cancel(e),n?n.then(ta).catch(ta):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(R(this,Sv))}isActive(){return this.observers.some(e=>xl(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===F$||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>jg(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Pte(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=R(this,Po))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=R(this,Po))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),R(this,El).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(R(this,Po)&&(R(this,My)?R(this,Po).cancel({revert:!0}):R(this,Po).cancelRetry()),this.scheduleGc()),R(this,El).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ie(this,yu,Oh).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(R(this,Po))return R(this,Po).continueRetry(),R(this,Po).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(q(this,My,!0),r.signal)})},i=()=>{const h=Ote(this.options,n),p=(()=>{const g={client:R(this,Dy),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return q(this,My,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:R(this,Dy),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),q(this,Oy,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&Ie(this,yu,Oh).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,m;SD(h)&&h.silent||Ie(this,yu,Oh).call(this,{type:"error",error:h}),SD(h)||((p=(f=R(this,El).config).onError)==null||p.call(f,h,this),(m=(g=R(this,El).config).onSettled)==null||m.call(g,this.state.data,h,this)),this.scheduleGc()};return q(this,Po,Lte({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,m;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){c(y);return}(p=(f=R(this,El).config).onSuccess)==null||p.call(f,h,this),(m=(g=R(this,El).config).onSettled)==null||m.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{Ie(this,yu,Oh).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{Ie(this,yu,Oh).call(this,{type:"pause"})},onContinue:()=>{Ie(this,yu,Oh).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),R(this,Po).start()}},Sv=new WeakMap,Oy=new WeakMap,El=new WeakMap,Dy=new WeakMap,Po=new WeakMap,GS=new WeakMap,My=new WeakMap,yu=new WeakSet,Oh=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...$te(r.data,this.options),fetchMeta:e.meta??null};case"success":return q(this,Oy,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return SD(s)&&s.revert&&R(this,Oy)?{...R(this,Oy),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),bi.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),R(this,El).notify({query:this,type:"updated",action:e})})},PK);function $te(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Mte(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function W_e(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var wd,OK,z_e=(OK=class extends kC{constructor(e={}){super();ne(this,wd);this.config=e,q(this,wd,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??U$(s,n);let o=this.get(i);return o||(o=new j_e({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){R(this,wd).has(e.queryHash)||(R(this,wd).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=R(this,wd).get(e.queryHash);n&&(e.destroy(),n===e&&R(this,wd).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){bi.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return R(this,wd).get(e)}getAll(){return[...R(this,wd).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>j7(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>j7(e,r)):n}notify(e){bi.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){bi.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){bi.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},wd=new WeakMap,OK),bd,Qo,By,vd,_p,DK,H_e=(DK=class extends Ute{constructor(e){super();ne(this,vd);ne(this,bd);ne(this,Qo);ne(this,By);this.mutationId=e.mutationId,q(this,Qo,e.mutationCache),q(this,bd,[]),this.state=e.state||Fte(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){R(this,bd).includes(e)||(R(this,bd).push(e),this.clearGcTimeout(),R(this,Qo).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){q(this,bd,R(this,bd).filter(n=>n!==e)),this.scheduleGc(),R(this,Qo).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){R(this,bd).length||(this.state.status==="pending"?this.scheduleGc():R(this,Qo).remove(this))}continue(){var e;return((e=R(this,By))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,m,y,w,C,N,I,k,P,U;const n=()=>{Ie(this,vd,_p).call(this,{type:"continue"})};q(this,By,Lte({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(M,W)=>{Ie(this,vd,_p).call(this,{type:"failed",failureCount:M,error:W})},onPause:()=>{Ie(this,vd,_p).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>R(this,Qo).canRun(this)}));const r=this.state.status==="pending",s=!R(this,By).canStart();try{if(r)n();else{Ie(this,vd,_p).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=R(this,Qo).config).onMutate)==null?void 0:o.call(i,e,this));const W=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));W!==this.state.context&&Ie(this,vd,_p).call(this,{type:"pending",context:W,variables:e,isPaused:s})}const M=await R(this,By).start();return await((u=(l=R(this,Qo).config).onSuccess)==null?void 0:u.call(l,M,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,M,e,this.state.context)),await((p=(f=R(this,Qo).config).onSettled)==null?void 0:p.call(f,M,null,this.state.variables,this.state.context,this)),await((m=(g=this.options).onSettled)==null?void 0:m.call(g,M,null,e,this.state.context)),Ie(this,vd,_p).call(this,{type:"success",data:M}),M}catch(M){try{throw await((w=(y=R(this,Qo).config).onError)==null?void 0:w.call(y,M,e,this.state.context,this)),await((N=(C=this.options).onError)==null?void 0:N.call(C,M,e,this.state.context)),await((k=(I=R(this,Qo).config).onSettled)==null?void 0:k.call(I,void 0,M,this.state.variables,this.state.context,this)),await((U=(P=this.options).onSettled)==null?void 0:U.call(P,void 0,M,e,this.state.context)),M}finally{Ie(this,vd,_p).call(this,{type:"error",error:M})}}finally{R(this,Qo).runNext(this)}}},bd=new WeakMap,Qo=new WeakMap,By=new WeakMap,vd=new WeakSet,_p=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),bi.batch(()=>{R(this,bd).forEach(r=>{r.onMutationUpdate(e)}),R(this,Qo).notify({mutation:this,type:"updated",action:e})})},DK);function Fte(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Wh,wu,qS,MK,G_e=(MK=class extends kC{constructor(e={}){super();ne(this,Wh);ne(this,wu);ne(this,qS);this.config=e,q(this,Wh,new Set),q(this,wu,new Map),q(this,qS,0)}build(e,n,r){const s=new H_e({mutationCache:this,mutationId:++Qf(this,qS)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){R(this,Wh).add(e);const n=YN(e);if(typeof n=="string"){const r=R(this,wu).get(n);r?r.push(e):R(this,wu).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(R(this,Wh).delete(e)){const n=YN(e);if(typeof n=="string"){const r=R(this,wu).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&R(this,wu).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=YN(e);if(typeof n=="string"){const r=R(this,wu).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=YN(e);if(typeof n=="string"){const s=(r=R(this,wu).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){bi.batch(()=>{R(this,Wh).forEach(e=>{this.notify({type:"removed",mutation:e})}),R(this,Wh).clear(),R(this,wu).clear()})}getAll(){return Array.from(R(this,Wh))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>W7(n,r))}findAll(e={}){return this.getAll().filter(n=>W7(e,n))}notify(e){bi.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return bi.batch(()=>Promise.all(e.map(n=>n.continue().catch(ta))))}},Wh=new WeakMap,wu=new WeakMap,qS=new WeakMap,MK);function YN(t){var e;return(e=t.options.scope)==null?void 0:e.id}function G7(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const m=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},y=Ote(e.options,e.fetchOptions),w=async(C,N,I)=>{if(g)return Promise.reject();if(N==null&&C.pages.length)return Promise.resolve(C);const P=(()=>{const j={client:e.client,queryKey:e.queryKey,pageParam:N,direction:I?"backward":"forward",meta:e.options.meta};return m(j),j})(),U=await y(P),{maxPages:M}=e.options,W=I?M_e:D_e;return{pages:W(C.pages,U,M),pageParams:W(C.pageParams,N,M)}};if(s&&i.length){const C=s==="backward",N=C?q_e:q7,I={pages:i,pageParams:o},k=N(r,I);a=await w(I,k,C)}else{const C=t??i.length;do{const N=c===0?o[0]??r.initialPageParam:q7(r,a);if(c>0&&N==null)break;a=await w(a,N),c++}while(c<C)}return a};e.options.persister?e.fetchFn=()=>{var g,m;return(m=(g=e.options).persister)==null?void 0:m.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function q7(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function q_e(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var js,zp,Hp,Iv,Nv,Gp,xv,Tv,BK,V_e=(BK=class{constructor(t={}){ne(this,js);ne(this,zp);ne(this,Hp);ne(this,Iv);ne(this,Nv);ne(this,Gp);ne(this,xv);ne(this,Tv);q(this,js,t.queryCache||new z_e),q(this,zp,t.mutationCache||new G_e),q(this,Hp,t.defaultOptions||{}),q(this,Iv,new Map),q(this,Nv,new Map),q(this,Gp,0)}mount(){Qf(this,Gp)._++,R(this,Gp)===1&&(q(this,xv,j$.subscribe(async t=>{t&&(await this.resumePausedMutations(),R(this,js).onFocus())})),q(this,Tv,qR.subscribe(async t=>{t&&(await this.resumePausedMutations(),R(this,js).onOnline())})))}unmount(){var t,e;Qf(this,Gp)._--,R(this,Gp)===0&&((t=R(this,xv))==null||t.call(this),q(this,xv,void 0),(e=R(this,Tv))==null||e.call(this),q(this,Tv,void 0))}isFetching(t){return R(this,js).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return R(this,zp).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=R(this,js).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=R(this,js).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(jg(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return R(this,js).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=R(this,js).get(r.queryHash),i=s==null?void 0:s.state.data,o=P_e(e,i);if(o!==void 0)return R(this,js).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return bi.batch(()=>R(this,js).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=R(this,js).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=R(this,js);bi.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=R(this,js);return bi.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=bi.batch(()=>R(this,js).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(ta).catch(ta)}invalidateQueries(t,e={}){return bi.batch(()=>(R(this,js).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=bi.batch(()=>R(this,js).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(ta)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(ta)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=R(this,js).build(this,e);return n.isStaleByTime(jg(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ta).catch(ta)}fetchInfiniteQuery(t){return t.behavior=G7(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ta).catch(ta)}ensureInfiniteQueryData(t){return t.behavior=G7(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return qR.isOnline()?R(this,zp).resumePausedMutations():Promise.resolve()}getQueryCache(){return R(this,js)}getMutationCache(){return R(this,zp)}getDefaultOptions(){return R(this,Hp)}setDefaultOptions(t){q(this,Hp,t)}setQueryDefaults(t,e){R(this,Iv).set(B0(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...R(this,Iv).values()],n={};return e.forEach(r=>{VA(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){R(this,Nv).set(B0(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...R(this,Nv).values()],n={};return e.forEach(r=>{VA(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...R(this,Hp).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=U$(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===F$&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...R(this,Hp).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){R(this,js).clear(),R(this,zp).clear()}},js=new WeakMap,zp=new WeakMap,Hp=new WeakMap,Iv=new WeakMap,Nv=new WeakMap,Gp=new WeakMap,xv=new WeakMap,Tv=new WeakMap,BK),La,Vn,VS,Jo,Ly,Rv,qp,Vp,KS,kv,Pv,Uy,$y,Kp,Ov,Sr,V1,GL,qL,VL,KL,YL,QL,JL,jte,LK,K_e=(LK=class extends kC{constructor(e,n){super();ne(this,Sr);ne(this,La);ne(this,Vn);ne(this,VS);ne(this,Jo);ne(this,Ly);ne(this,Rv);ne(this,qp);ne(this,Vp);ne(this,KS);ne(this,kv);ne(this,Pv);ne(this,Uy);ne(this,$y);ne(this,Kp);ne(this,Ov,new Set);this.options=n,q(this,La,e),q(this,Vp,null),q(this,qp,HL()),this.options.experimental_prefetchInRender||R(this,qp).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(R(this,Vn).addObserver(this),V7(R(this,Vn),this.options)?Ie(this,Sr,V1).call(this):this.updateResult(),Ie(this,Sr,KL).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ZL(R(this,Vn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ZL(R(this,Vn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ie(this,Sr,YL).call(this),Ie(this,Sr,QL).call(this),R(this,Vn).removeObserver(this)}setOptions(e){const n=this.options,r=R(this,Vn);if(this.options=R(this,La).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof xl(this.options.enabled,R(this,Vn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ie(this,Sr,JL).call(this),R(this,Vn).setOptions(this.options),n._defaulted&&!GR(this.options,n)&&R(this,La).getQueryCache().notify({type:"observerOptionsUpdated",query:R(this,Vn),observer:this});const s=this.hasListeners();s&&K7(R(this,Vn),r,this.options,n)&&Ie(this,Sr,V1).call(this),this.updateResult(),s&&(R(this,Vn)!==r||xl(this.options.enabled,R(this,Vn))!==xl(n.enabled,R(this,Vn))||jg(this.options.staleTime,R(this,Vn))!==jg(n.staleTime,R(this,Vn)))&&Ie(this,Sr,GL).call(this);const i=Ie(this,Sr,qL).call(this);s&&(R(this,Vn)!==r||xl(this.options.enabled,R(this,Vn))!==xl(n.enabled,R(this,Vn))||i!==R(this,Kp))&&Ie(this,Sr,VL).call(this,i)}getOptimisticResult(e){const n=R(this,La).getQueryCache().build(R(this,La),e),r=this.createResult(n,e);return Q_e(this,r)&&(q(this,Jo,r),q(this,Rv,this.options),q(this,Ly,R(this,Vn).state)),r}getCurrentResult(){return R(this,Jo)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){R(this,Ov).add(e)}getCurrentQuery(){return R(this,Vn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=R(this,La).defaultQueryOptions(e),r=R(this,La).getQueryCache().build(R(this,La),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Ie(this,Sr,V1).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),R(this,Jo)))}createResult(e,n){var M;const r=R(this,Vn),s=this.options,i=R(this,Jo),o=R(this,Ly),a=R(this,Rv),l=e!==r?e.state:R(this,VS),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const W=this.hasListeners(),j=!W&&V7(e,n),K=W&&K7(e,r,n,s);(j||K)&&(d={...d,...$te(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:m}=d;f=d.data;let y=!1;if(n.placeholderData!==void 0&&f===void 0&&m==="pending"){let W;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(W=i.data,y=!0):W=typeof n.placeholderData=="function"?n.placeholderData((M=R(this,Pv))==null?void 0:M.state.data,R(this,Pv)):n.placeholderData,W!==void 0&&(m="success",f=zL(i==null?void 0:i.data,W,n),h=!0)}if(n.select&&f!==void 0&&!y)if(i&&f===(o==null?void 0:o.data)&&n.select===R(this,KS))f=R(this,kv);else try{q(this,KS,n.select),f=n.select(f),f=zL(i==null?void 0:i.data,f,n),q(this,kv,f),q(this,Vp,null)}catch(W){q(this,Vp,W)}R(this,Vp)&&(p=R(this,Vp),f=R(this,kv),g=Date.now(),m="error");const w=d.fetchStatus==="fetching",C=m==="pending",N=m==="error",I=C&&w,k=f!==void 0,U={status:m,fetchStatus:d.fetchStatus,isPending:C,isSuccess:m==="success",isError:N,isInitialLoading:I,isLoading:I,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:w,isRefetching:w&&!C,isLoadingError:N&&!k,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:N&&k,isStale:W$(e,n),refetch:this.refetch,promise:R(this,qp),isEnabled:xl(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const W=$=>{U.status==="error"?$.reject(U.error):U.data!==void 0&&$.resolve(U.data)},j=()=>{const $=q(this,qp,U.promise=HL());W($)},K=R(this,qp);switch(K.status){case"pending":e.queryHash===r.queryHash&&W(K);break;case"fulfilled":(U.status==="error"||U.data!==K.value)&&j();break;case"rejected":(U.status!=="error"||U.error!==K.reason)&&j();break}}return U}updateResult(){const e=R(this,Jo),n=this.createResult(R(this,Vn),this.options);if(q(this,Ly,R(this,Vn).state),q(this,Rv,this.options),R(this,Ly).data!==void 0&&q(this,Pv,R(this,Vn)),GR(n,e))return;q(this,Jo,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!R(this,Ov).size)return!0;const o=new Set(i??R(this,Ov));return this.options.throwOnError&&o.add("error"),Object.keys(R(this,Jo)).some(a=>{const c=a;return R(this,Jo)[c]!==e[c]&&o.has(c)})};Ie(this,Sr,jte).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ie(this,Sr,KL).call(this)}},La=new WeakMap,Vn=new WeakMap,VS=new WeakMap,Jo=new WeakMap,Ly=new WeakMap,Rv=new WeakMap,qp=new WeakMap,Vp=new WeakMap,KS=new WeakMap,kv=new WeakMap,Pv=new WeakMap,Uy=new WeakMap,$y=new WeakMap,Kp=new WeakMap,Ov=new WeakMap,Sr=new WeakSet,V1=function(e){Ie(this,Sr,JL).call(this);let n=R(this,Vn).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(ta)),n},GL=function(){Ie(this,Sr,YL).call(this);const e=jg(this.options.staleTime,R(this,Vn));if(M0||R(this,Jo).isStale||!jL(e))return;const r=Pte(R(this,Jo).dataUpdatedAt,e)+1;q(this,Uy,setTimeout(()=>{R(this,Jo).isStale||this.updateResult()},r))},qL=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(R(this,Vn)):this.options.refetchInterval)??!1},VL=function(e){Ie(this,Sr,QL).call(this),q(this,Kp,e),!(M0||xl(this.options.enabled,R(this,Vn))===!1||!jL(R(this,Kp))||R(this,Kp)===0)&&q(this,$y,setInterval(()=>{(this.options.refetchIntervalInBackground||j$.isFocused())&&Ie(this,Sr,V1).call(this)},R(this,Kp)))},KL=function(){Ie(this,Sr,GL).call(this),Ie(this,Sr,VL).call(this,Ie(this,Sr,qL).call(this))},YL=function(){R(this,Uy)&&(clearTimeout(R(this,Uy)),q(this,Uy,void 0))},QL=function(){R(this,$y)&&(clearInterval(R(this,$y)),q(this,$y,void 0))},JL=function(){const e=R(this,La).getQueryCache().build(R(this,La),this.options);if(e===R(this,Vn))return;const n=R(this,Vn);q(this,Vn,e),q(this,VS,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},jte=function(e){bi.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(R(this,Jo))}),R(this,La).getQueryCache().notify({query:R(this,Vn),type:"observerResultsUpdated"})})},LK);function Y_e(t,e){return xl(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function V7(t,e){return Y_e(t,e)||t.state.data!==void 0&&ZL(t,e,e.refetchOnMount)}function ZL(t,e,n){if(xl(e.enabled,t)!==!1&&jg(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&W$(t,e)}return!1}function K7(t,e,n,r){return(t!==e||xl(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&W$(t,n)}function W$(t,e){return xl(e.enabled,t)!==!1&&t.isStaleByTime(jg(e.staleTime,t))}function Q_e(t,e){return!GR(t.getCurrentResult(),e)}var Yp,Qp,Ua,zh,_f,hT,XL,UK,J_e=(UK=class extends kC{constructor(n,r){super();ne(this,_f);ne(this,Yp);ne(this,Qp);ne(this,Ua);ne(this,zh);q(this,Yp,n),this.setOptions(r),this.bindMethods(),Ie(this,_f,hT).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=R(this,Yp).defaultMutationOptions(n),GR(this.options,r)||R(this,Yp).getMutationCache().notify({type:"observerOptionsUpdated",mutation:R(this,Ua),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&B0(r.mutationKey)!==B0(this.options.mutationKey)?this.reset():((s=R(this,Ua))==null?void 0:s.state.status)==="pending"&&R(this,Ua).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=R(this,Ua))==null||n.removeObserver(this)}onMutationUpdate(n){Ie(this,_f,hT).call(this),Ie(this,_f,XL).call(this,n)}getCurrentResult(){return R(this,Qp)}reset(){var n;(n=R(this,Ua))==null||n.removeObserver(this),q(this,Ua,void 0),Ie(this,_f,hT).call(this),Ie(this,_f,XL).call(this)}mutate(n,r){var s;return q(this,zh,r),(s=R(this,Ua))==null||s.removeObserver(this),q(this,Ua,R(this,Yp).getMutationCache().build(R(this,Yp),this.options)),R(this,Ua).addObserver(this),R(this,Ua).execute(n)}},Yp=new WeakMap,Qp=new WeakMap,Ua=new WeakMap,zh=new WeakMap,_f=new WeakSet,hT=function(){var r;const n=((r=R(this,Ua))==null?void 0:r.state)??Fte();q(this,Qp,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},XL=function(n){bi.batch(()=>{var r,s,i,o,a,c,l,u;if(R(this,zh)&&this.hasListeners()){const d=R(this,Qp).variables,h=R(this,Qp).context;(n==null?void 0:n.type)==="success"?((s=(r=R(this,zh)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=R(this,zh)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=R(this,zh)).onError)==null||c.call(a,n.error,d,h),(u=(l=R(this,zh)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(R(this,Qp))})})},UK);function Z_e(t,e){return $$(t,e)}function X_e(t){return JSON.stringify(t,(e,n)=>eAe(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function eAe(t){if(!Y7(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!Y7(n)||!n.hasOwnProperty("isPrototypeOf"))}function Y7(t){return Object.prototype.toString.call(t)==="[object Object]"}function J2(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:m,getNextPageParam:y,initialPageParam:w,_optimisticResults:C,enabled:N,notifyOnChangeProps:I,placeholderData:k,refetchInterval:P,refetchIntervalInBackground:U,refetchOnMount:M,refetchOnReconnect:W,refetchOnWindowFocus:j,retryOnMount:K,select:$,staleTime:v,suspense:E,throwOnError:_,config:O,connector:x,query:B,...F}=t;return F}function tAe(t){return{mutationFn(e){return uT(t,e)},mutationKey:["connect"]}}function nAe(t){return{mutationFn(e){return ML(t,e)},mutationKey:["disconnect"]}}function rAe(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return O1e(t,{...i,address:r})},queryKey:sAe(e)}}function sAe(t={}){return["ensName",J2(t)]}function iAe(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return D1e(t,{...o,connector:r})},queryKey:oAe(e)}}function oAe(t={}){const{connector:e,...n}=t;return["walletClient",{...J2(n),connectorUid:e==null?void 0:e.uid}]}function aAe(t,e={}){return{async queryFn({queryKey:n}){const r=e.abi;if(!r)throw new Error("abi is required");const{functionName:s,scopeKey:i,...o}=n[1],a=(()=>{const c=n[1];if(c.address)return{address:c.address};if(c.code)return{code:c.code};throw new Error("address or code is required")})();if(!s)throw new Error("functionName is required");return yte(t,{abi:r,functionName:s,args:o.args,...a,...o})},queryKey:cAe(e)}}function cAe(t={}){const{abi:e,...n}=t;return["readContract",J2(n)]}function lAe(t){return{mutationFn(e){return UL(t,e)},mutationKey:["switchChain"]}}function uAe(t,e={}){return{async queryFn({queryKey:n}){const{hash:r,...s}=n[1];if(!r)throw new Error("hash is required");return Ete(t,{...s,onReplaced:e.onReplaced,hash:r})},queryKey:dAe(e)}}function dAe(t={}){const{onReplaced:e,...n}=t;return["waitForTransactionReceipt",J2(n)]}function hAe(t){return{mutationFn(e){return Cte(t,e)},mutationKey:["writeContract"]}}var Wte=G.createContext(void 0),z$=t=>{const e=G.useContext(Wte);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},fAe=({client:t,children:e})=>(G.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),b.jsx(Wte.Provider,{value:t,children:e})),zte=G.createContext(!1),pAe=()=>G.useContext(zte);zte.Provider;function gAe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var mAe=G.createContext(gAe()),yAe=()=>G.useContext(mAe),wAe=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},bAe=t=>{G.useEffect(()=>{t.clearReset()},[t])},vAe=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||Dte(n,[t.error,r])),EAe=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},CAe=(t,e)=>t.isLoading&&t.isFetching&&!e,_Ae=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Q7=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function AAe(t,e,n){var d,h,f,p,g;const r=pAe(),s=yAe(),i=z$(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",EAe(o),wAe(o,s),bAe(s);const a=!i.getQueryCache().get(o.queryHash),[c]=G.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(G.useSyncExternalStore(G.useCallback(m=>{const y=u?c.subscribe(bi.batchCalls(m)):ta;return c.updateResult(),y},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),G.useEffect(()=>{c.setOptions(o)},[o,c]),_Ae(o,l))throw Q7(o,c,s);if(vAe({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!M0&&CAe(l,r)){const m=a?Q7(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;m==null||m.catch(ta).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function SAe(t,e){return AAe(t,K_e)}function Z2(t,e){const n=z$(),[r]=G.useState(()=>new J_e(n,t));G.useEffect(()=>{r.setOptions(t)},[r,t]);const s=G.useSyncExternalStore(G.useCallback(o=>r.subscribe(bi.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=G.useCallback((o,a)=>{r.mutate(o,a).catch(ta)},[r]);if(s.error&&Dte(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function X2(t){const e=SAe({...t,queryKeyHashFn:X_e});return e.queryKey=t.queryKey,e}function MI(t={}){const e=hc(t);return G.useSyncExternalStore(n=>$1e(e,{onChange:n}),()=>M7(e),()=>M7(e))}function IAe(t={}){const e=hc(t);return G.useSyncExternalStore(n=>f_e(e,{onChange:n}),()=>B7(e),()=>B7(e))}function NAe(t={}){const e=hc(t);return G.useSyncExternalStore(n=>vte(e,{onChange:n}),()=>L7(e),()=>L7(e))}function Hte(t={}){const{mutation:e}=t,n=hc(t),r=tAe(n),{mutate:s,mutateAsync:i,...o}=Z2({...e,...r});return G.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:NAe({config:n})}}function xAe(t={}){const e=hc(t);return G.useSyncExternalStore(n=>bte(e,{onChange:n}),()=>gu(e),()=>gu(e))}function Gte(t={}){const{mutation:e}=t,n=hc(t),r=nAe(n),{mutate:s,mutateAsync:i,...o}=Z2({...e,...r});return{...o,connectors:xAe({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function qte(t={}){const{address:e,query:n={}}=t,r=hc(t),s=MI({config:r}),i=rAe(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return X2({...n,...i,enabled:o})}function TAe(t={}){const e=hc(t);return kte.useSyncExternalStoreWithSelector(n=>j1e(e,{onChange:n}),()=>BL(e,t),()=>BL(e,t),n=>n,(n,r)=>(n==null?void 0:n.uid)===(r==null?void 0:r.uid))}function J7(t={}){const{abi:e,address:n,functionName:r,query:s={}}=t,i=t.code,o=hc(t),a=MI({config:o}),c=aAe(o,{...t,chainId:t.chainId??a}),l=!!((n||i)&&e&&r&&(s.enabled??!0));return X2({...s,...c,enabled:l,structuralSharing:s.structuralSharing??Z_e})}function RAe(t={}){const{mutation:e}=t,n=hc(t),r=lAe(n),{mutate:s,mutateAsync:i,...o}=Z2({...e,...r});return{...o,chains:IAe({config:n}),switchChain:s,switchChainAsync:i}}function Vte(t={}){const{query:e={},...n}=t,r=hc(n),s=z$(),{address:i,connector:o,status:a}=DI({config:r}),c=MI({config:r}),l=t.connector??o,{queryKey:u,...d}=iAe(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=G.useRef(i);return G.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),X2({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}function QN(t={}){const{hash:e,query:n={}}=t,r=hc(t),s=MI({config:r}),i=uAe(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return X2({...n,...i,enabled:o})}function JN(t={}){const{mutation:e}=t,n=hc(t),r=hAe(n),{mutate:s,mutateAsync:i,...o}=Z2({...e,...r});return{...o,writeContract:s,writeContractAsync:i}}const kAe="_verified_lvyh0_1",H$={verified:kAe},PAe=()=>b.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:H$.verified,children:b.jsx("g",{children:b.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),OAe=()=>b.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:H$.verified,children:b.jsxs("g",{children:[b.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[b.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),b.jsx("stop",{offset:".539",stopColor:"#cd8105"}),b.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),b.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),b.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),b.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[b.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),b.jsx("stop",{offset:".406",stopColor:"#e2b719"}),b.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),b.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[b.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),b.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),b.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),DAe=()=>b.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:H$.verified,children:b.jsx("g",{children:b.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function Kte(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=Kte(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Wg(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=Kte(t))&&(r&&(r+=" "),r+=e);return r}const MAe="_root_98iqw_1",BAe="_article_98iqw_21",Z7={root:MAe,article:BAe},G$=({className:t,children:e})=>b.jsx("div",{className:Wg("react-tweet-theme",Z7.root,t),children:b.jsx("article",{className:Z7.article,children:e})}),Yte=t=>b.jsx("img",{...t}),LAe="_header_nqq4j_1",UAe="_avatar_nqq4j_11",$Ae="_avatarOverflow_nqq4j_16",FAe="_avatarSquare_nqq4j_23",jAe="_avatarShadow_nqq4j_26",WAe="_author_nqq4j_37",zAe="_authorLink_nqq4j_44",HAe="_authorVerified_nqq4j_53",GAe="_authorLinkText_nqq4j_56",qAe="_authorMeta_nqq4j_63",VAe="_authorFollow_nqq4j_66",KAe="_username_nqq4j_69",YAe="_follow_nqq4j_74",QAe="_separator_nqq4j_82",JAe="_brand_nqq4j_86",ZAe="_twitterIcon_nqq4j_90",qi={header:LAe,avatar:UAe,avatarOverflow:$Ae,avatarSquare:FAe,avatarShadow:jAe,author:WAe,authorLink:zAe,authorVerified:HAe,authorLinkText:GAe,authorMeta:qAe,authorFollow:VAe,username:KAe,follow:YAe,separator:QAe,brand:JAe,twitterIcon:ZAe},XAe="_verifiedOld_lcna5_1",eSe="_verifiedBlue_lcna5_4",tSe="_verifiedGovernment_lcna5_7",ID={verifiedOld:XAe,verifiedBlue:eSe,verifiedGovernment:tSe},Qte=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=b.jsx(PAe,{}),s=ID.verifiedBlue;if(n)switch(t.is_blue_verified||(s=ID.verifiedOld),t.verified_type){case"Government":r=b.jsx(DAe,{}),s=ID.verifiedGovernment;break;case"Business":r=b.jsx(OAe,{}),s=null;break}return n?b.jsx("div",{className:Wg(e,s),children:r}):null},nSe=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:Yte,{user:s}=t;return b.jsxs("div",{className:qi.header,children:[b.jsxs("a",{href:t.url,className:qi.avatar,target:"_blank",rel:"noopener noreferrer",children:[b.jsx("div",{className:Wg(qi.avatarOverflow,s.profile_image_shape==="Square"&&qi.avatarSquare),children:b.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),b.jsx("div",{className:qi.avatarOverflow,children:b.jsx("div",{className:qi.avatarShadow})})]}),b.jsxs("div",{className:qi.author,children:[b.jsxs("a",{href:t.url,className:qi.authorLink,target:"_blank",rel:"noopener noreferrer",children:[b.jsx("div",{className:qi.authorLinkText,children:b.jsx("span",{title:s.name,children:s.name})}),b.jsx(Qte,{user:s,className:qi.authorVerified})]}),b.jsxs("div",{className:qi.authorMeta,children:[b.jsx("a",{href:t.url,className:qi.username,target:"_blank",rel:"noopener noreferrer",children:b.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),b.jsxs("div",{className:qi.authorFollow,children:[b.jsx("span",{className:qi.separator,children:"·"}),b.jsx("a",{href:s.follow_url,className:qi.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),b.jsx("a",{href:t.url,className:qi.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:b.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:qi.twitterIcon,children:b.jsx("g",{children:b.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},rSe="_root_1ec15_1",sSe={root:rSe},iSe=({tweet:t})=>b.jsxs("a",{href:t.in_reply_to_url,className:sSe.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),oSe="_root_eihfa_1",aSe={root:oSe},cSe=({href:t,children:e})=>b.jsx("a",{href:t,className:aSe.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),lSe="_root_1xq52_1",uSe={root:lSe},dSe=({tweet:t})=>b.jsx("p",{className:uSe.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return b.jsx(cSe,{href:e.href,children:e.text},n);case"media":return;default:return b.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),X7=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,Jte=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,hSe=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,fSe=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,pSe=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,gSe=t=>`https://x.com/hashtag/${t.text}`,mSe=t=>`https://x.com/search?q=%24${t.text}`,ySe=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,Zte=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},wSe=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},bSe=t=>{const e=wSe(t);return e.length>1?e[1]:e[0]},eU=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function eW(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return p1(n,"hashtag",t.entities.hashtags),p1(n,"mention",t.entities.user_mentions),p1(n,"url",t.entities.urls),p1(n,"symbol",t.entities.symbols),t.entities.media&&p1(n,"media",t.entities.media),vSe(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:gSe(r),text:s});case"mention":return Object.assign(r,{href:Jte(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:mSe(r),text:s});default:return Object.assign(r,{text:s})}})}function p1(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function vSe(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const ESe=t=>({...t,url:X7(t),user:{...t.user,url:Jte(t),follow_url:pSe(t)},like_url:hSe(t),reply_url:fSe(t),in_reply_to_url:t.in_reply_to_screen_name?ySe(t):void 0,entities:eW(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:X7(t.quoted_tweet),entities:eW(t.quoted_tweet)}:void 0}),CSe="_root_g9tkv_1",_Se="_rounded_g9tkv_6",ASe="_mediaWrapper_g9tkv_10",SSe="_grid2Columns_g9tkv_17",ISe="_grid3_g9tkv_20",NSe="_grid2x2_g9tkv_23",xSe="_mediaContainer_g9tkv_26",TSe="_mediaLink_g9tkv_34",RSe="_skeleton_g9tkv_38",kSe="_image_g9tkv_43",vc={root:CSe,rounded:_Se,mediaWrapper:ASe,grid2Columns:SSe,grid3:ISe,grid2x2:NSe,mediaContainer:xSe,mediaLink:TSe,skeleton:RSe,image:kSe},PSe="_anchor_fp31d_1",OSe="_videoButton_fp31d_17",DSe="_videoButtonIcon_fp31d_35",MSe="_watchOnTwitter_fp31d_44",BSe="_viewReplies_fp31d_60",Bw={anchor:PSe,videoButton:OSe,videoButtonIcon:DSe,watchOnTwitter:MSe,viewReplies:BSe},LSe=({tweet:t,media:e})=>{const[n,r]=G.useState(!0),[s,i]=G.useState(!1),[o,a]=G.useState(!1),c=bSe(e);let l=0;return b.jsxs(b.Fragment,{children:[b.jsx("video",{className:vc.image,poster:Zte(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:b.jsx("source",{src:c.url,type:c.content_type})}),n&&b.jsx("button",{type:"button",className:Bw.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:b.jsx("svg",{viewBox:"0 0 24 24",className:Bw.videoButtonIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&b.jsx("div",{className:Bw.watchOnTwitter,children:b.jsx("a",{href:t.url,className:Bw.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&b.jsx("a",{href:t.url,className:Wg(Bw.anchor,Bw.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},USe=t=>b.jsx("img",{...t}),tW=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},Xte=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:USe;return b.jsx("div",{className:Wg(vc.root,!n&&vc.rounded),children:b.jsx("div",{className:Wg(vc.mediaWrapper,o>1&&vc.grid2Columns,o===3&&vc.grid3,o>4&&vc.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>b.jsx(G.Fragment,{children:l.type==="photo"?b.jsxs("a",{href:t.url,className:Wg(vc.mediaContainer,vc.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[b.jsx("div",{className:vc.skeleton,style:tW(l,o)}),b.jsx(c,{src:Zte(l,"small"),alt:l.ext_alt_text||"Image",className:vc.image,draggable:!0})]},l.media_url_https):b.jsxs("div",{className:vc.mediaContainer,children:[b.jsx("div",{className:vc.skeleton,style:tW(l,o)}),b.jsx(LSe,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},$Se={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},FSe=new Intl.DateTimeFormat("en-US",$Se),jSe=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},WSe=t=>{const e=jSe(FSe.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n} · ${r}`},zSe="_root_i24yn_1",HSe={root:zSe},GSe=({tweet:t})=>{const e=new Date(t.created_at),n=WSe(e);return b.jsx("a",{className:HSe.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:b.jsx("time",{dateTime:e.toISOString(),children:n})})},qSe="_info_19qcj_1",VSe="_infoLink_19qcj_10",KSe="_infoIcon_19qcj_30",ND={info:qSe,infoLink:VSe,infoIcon:KSe},YSe=({tweet:t})=>b.jsxs("div",{className:ND.info,children:[b.jsx(GSe,{tweet:t}),b.jsx("a",{className:ND.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:b.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:ND.infoIcon,children:b.jsx("g",{children:b.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),QSe="_actions_n2anf_1",JSe="_like_n2anf_13",ZSe="_reply_n2anf_14",XSe="_copy_n2anf_15",eIe="_likeIconWrapper_n2anf_27",tIe="_likeCount_n2anf_30",nIe="_replyIconWrapper_n2anf_35",rIe="_copyIconWrapper_n2anf_36",sIe="_likeIcon_n2anf_27",iIe="_replyIcon_n2anf_35",oIe="_copyIcon_n2anf_36",aIe="_replyText_n2anf_56",cIe="_copyText_n2anf_57",ja={actions:QSe,like:JSe,reply:ZSe,copy:XSe,likeIconWrapper:eIe,likeCount:tIe,replyIconWrapper:nIe,copyIconWrapper:rIe,likeIcon:sIe,replyIcon:iIe,copyIcon:oIe,replyText:aIe,copyText:cIe},lIe=({tweet:t})=>{const[e,n]=G.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return G.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),b.jsxs("button",{type:"button",className:ja.copy,"aria-label":"Copy link",onClick:r,children:[b.jsx("div",{className:ja.copyIconWrapper,children:e?b.jsx("svg",{viewBox:"0 0 24 24",className:ja.copyIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):b.jsx("svg",{viewBox:"0 0 24 24",className:ja.copyIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),b.jsx("span",{className:ja.copyText,children:e?"Copied!":"Copy link"})]})},uIe=({tweet:t})=>{const e=eU(t.favorite_count);return b.jsxs("div",{className:ja.actions,children:[b.jsxs("a",{className:ja.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[b.jsx("div",{className:ja.likeIconWrapper,children:b.jsx("svg",{viewBox:"0 0 24 24",className:ja.likeIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),b.jsx("span",{className:ja.likeCount,children:e})]}),b.jsxs("a",{className:ja.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[b.jsx("div",{className:ja.replyIconWrapper,children:b.jsx("svg",{viewBox:"0 0 24 24",className:ja.replyIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),b.jsx("span",{className:ja.replyText,children:"Reply"})]}),b.jsx(lIe,{tweet:t})]})},dIe="_replies_1cutb_1",hIe="_link_1cutb_4",fIe="_text_1cutb_23",xD={replies:dIe,link:hIe,text:fIe},pIe=({tweet:t})=>b.jsx("div",{className:xD.replies,children:b.jsx("a",{className:xD.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:b.jsx("span",{className:xD.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${eU(t.conversation_count)} reply`:`Read ${eU(t.conversation_count)} replies`})})}),gIe="_root_q5799_1",mIe="_article_q5799_16",nW={root:gIe,article:mIe},yIe=({tweet:t,children:e})=>b.jsx("div",{className:nW.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:b.jsx("article",{className:nW.article,children:e})}),wIe="_header_r31i5_1",bIe="_avatar_r31i5_11",vIe="_avatarSquare_r31i5_17",EIe="_author_r31i5_21",CIe="_authorText_r31i5_26",_Ie="_username_r31i5_33",Dm={header:wIe,avatar:bIe,avatarSquare:vIe,author:EIe,authorText:CIe,username:_Ie},AIe=({tweet:t})=>{const{user:e}=t;return b.jsxs("div",{className:Dm.header,children:[b.jsx("a",{href:t.url,className:Dm.avatar,target:"_blank",rel:"noopener noreferrer",children:b.jsx("div",{className:Wg(Dm.avatarOverflow,e.profile_image_shape==="Square"&&Dm.avatarSquare),children:b.jsx(Yte,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),b.jsxs("div",{className:Dm.author,children:[b.jsx("div",{className:Dm.authorText,children:b.jsx("span",{title:e.name,children:e.name})}),b.jsx(Qte,{user:e}),b.jsx("div",{className:Dm.username,children:b.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},SIe="_root_175ot_1",IIe={root:SIe},NIe=({tweet:t})=>b.jsx("p",{className:IIe.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>b.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),xIe=({tweet:t})=>{var e;return b.jsxs(yIe,{tweet:t,children:[b.jsx(AIe,{tweet:t}),b.jsx(NIe,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?b.jsx(Xte,{quoted:!0,tweet:t}):null]})},TIe=({tweet:t,components:e})=>{var n;const r=G.useMemo(()=>ESe(t),[t]);return b.jsxs(G$,{children:[b.jsx(nSe,{tweet:r,components:e}),r.in_reply_to_status_id_str&&b.jsx(iSe,{tweet:r}),b.jsx(dSe,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?b.jsx(Xte,{tweet:r,components:e}):null,r.quoted_tweet&&b.jsx(xIe,{tweet:r.quoted_tweet}),b.jsx(YSe,{tweet:r}),b.jsx(uIe,{tweet:r}),b.jsx(pIe,{tweet:r})]})},RIe="_root_16yxa_1",kIe={root:RIe},PIe=t=>b.jsx(G$,{children:b.jsxs("div",{className:kIe.root,children:[b.jsx("h3",{children:"Tweet not found"}),b.jsx("p",{children:"The embedded tweet could not be found…"})]})}),OIe="_skeleton_oi7hr_1",DIe={skeleton:OIe},ZN=({style:t})=>b.jsx("span",{className:DIe.skeleton,style:t}),MIe="_root_17qqv_1",BIe={root:MIe},LIe=()=>b.jsxs(G$,{className:BIe.root,children:[b.jsx(ZN,{style:{height:"3rem",marginBottom:"0.75rem"}}),b.jsx(ZN,{style:{height:"6rem",margin:"0.5rem 0"}}),b.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),b.jsx(ZN,{style:{height:"2rem"}}),b.jsx(ZN,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]}),ene=0,tne=1,nne=2,rW=3;var sW=Object.prototype.hasOwnProperty;function tU(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&tU(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(sW.call(t,n)&&++r&&!sW.call(e,n)||!(n in e)||!tU(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const tf=new WeakMap,yg=()=>{},ra=yg(),nU=Object,tr=t=>t===ra,Ld=t=>typeof t=="function",am=(t,e)=>({...t,...e}),rne=t=>Ld(t.then),TD={},XN={},q$="undefined",BI=typeof window!=q$,rU=typeof document!=q$,UIe=BI&&"Deno"in window,$Ie=()=>BI&&typeof window.requestAnimationFrame!=q$,sne=(t,e)=>{const n=tf.get(t);return[()=>!tr(e)&&t.get(e)||TD,r=>{if(!tr(e)){const s=t.get(e);e in XN||(XN[e]=s),n[5](e,am(s,r),s||TD)}},n[6],()=>!tr(e)&&e in XN?XN[e]:!tr(e)&&t.get(e)||TD]};let sU=!0;const FIe=()=>sU,[iU,oU]=BI&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[yg,yg],jIe=()=>{const t=rU&&document.visibilityState;return tr(t)||t!=="hidden"},WIe=t=>(rU&&document.addEventListener("visibilitychange",t),iU("focus",t),()=>{rU&&document.removeEventListener("visibilitychange",t),oU("focus",t)}),zIe=t=>{const e=()=>{sU=!0,t()},n=()=>{sU=!1};return iU("online",e),iU("offline",n),()=>{oU("online",e),oU("offline",n)}},HIe={isOnline:FIe,isVisible:jIe},GIe={initFocus:WIe,initReconnect:zIe},iW=!zc.useId,KA=!BI||UIe,qIe=t=>$Ie()?window.requestAnimationFrame(t):setTimeout(t,1),RD=KA?G.useEffect:G.useLayoutEffect,kD=typeof navigator<"u"&&navigator.connection,oW=!KA&&kD&&(["slow-2g","2g"].includes(kD.effectiveType)||kD.saveData),ex=new WeakMap,VIe=t=>nU.prototype.toString.call(t),PD=(t,e)=>t===`[object ${e}]`;let KIe=0;const aU=t=>{const e=typeof t,n=VIe(t),r=PD(n,"Date"),s=PD(n,"RegExp"),i=PD(n,"Object");let o,a;if(nU(t)===t&&!r&&!s){if(o=ex.get(t),o)return o;if(o=++KIe+"~",ex.set(t,o),Array.isArray(t)){for(o="@",a=0;a<t.length;a++)o+=aU(t[a])+",";ex.set(t,o)}if(i){o="#";const c=nU.keys(t).sort();for(;!tr(a=c.pop());)tr(t[a])||(o+=a+":"+aU(t[a])+",");ex.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},V$=t=>{if(Ld(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?aU(t):"",[t,e]};let YIe=0;const cU=()=>++YIe;async function ine(...t){const[e,n,r,s]=t,i=am({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(Ld(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=V$(h);if(!f)return;const[p,g]=sne(e,f),[m,y,w,C]=tf.get(e),N=()=>{const v=m[f];return(Ld(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete w[f],delete C[f],v&&v[0])?v[0](nne).then(()=>p().data):p().data};if(t.length<3)return N();let I=r,k,P=!1;const U=cU();y[f]=[U,0];const M=!tr(c),W=p(),j=W.data,K=W._c,$=tr(K)?j:K;if(M&&(c=Ld(c)?c($,j):c,g({data:c,_c:$})),Ld(I))try{I=I($)}catch(v){k=v,P=!0}if(I&&rne(I))if(I=await I.catch(v=>{k=v,P=!0}),U!==y[f][0]){if(P)throw k;return I}else P&&M&&l(k)&&(o=!0,g({data:$,_c:ra}));if(o&&!P)if(Ld(o)){const v=o(I,$);g({data:v,error:ra,_c:ra})}else g({data:I,error:ra,_c:ra});if(y[f][1]=cU(),Promise.resolve(N()).then(()=>{g({_c:ra})}),P){if(u)throw k;return}return I}}const aW=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},QIe=(t,e)=>{if(!tf.has(t)){const n=am(GIe,e),r=Object.create(null),s=ine.bind(ra,t);let i=yg;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!tf.has(t)&&(tf.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!KA)){const u=n.initFocus(setTimeout.bind(ra,aW.bind(ra,r,ene))),d=n.initReconnect(setTimeout.bind(ra,aW.bind(ra,r,tne)));i=()=>{u&&u(),d&&d(),tf.delete(t)}}};return l(),[t,s,l,i]}return[t,tf.get(t)[4]]},JIe=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!tr(i)&&o>i||setTimeout(r,a,s)},ZIe=tU,[one,XIe]=QIe(new Map),eNe=am({onLoadingSlow:yg,onSuccess:yg,onError:yg,onErrorRetry:JIe,onDiscarded:yg,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:oW?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:oW?5e3:3e3,compare:ZIe,isPaused:()=>!1,cache:one,mutate:XIe,fallback:{}},HIe),tNe=(t,e)=>{const n=am(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=am(s,o))}return n},nNe=G.createContext({}),rNe="$inf$",ane=BI&&window.__SWR_DEVTOOLS_USE__,sNe=ane?window.__SWR_DEVTOOLS_USE__:[],iNe=()=>{ane&&(window.__SWR_DEVTOOLS_REACT__=zc)},oNe=t=>Ld(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],aNe=()=>am(eNe,G.useContext(nNe)),cNe=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=V$(e),[,,,a]=tf.get(one);if(o.startsWith(rNe))return n(...i);const c=a[o];return tr(c)?n(...i):(delete a[o],c)}),r),lNe=sNe.concat(cNe),uNe=t=>function(...n){const r=aNe(),[s,i,o]=oNe(n),a=tNe(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(lNe);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},dNe=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};iNe();const OD=zc.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),DD={dedupe:!0},hNe=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,m]=tf.get(r),[y,w]=V$(t),C=G.useRef(!1),N=G.useRef(!1),I=G.useRef(y),k=G.useRef(e),P=G.useRef(n),U=()=>P.current,M=()=>U().isVisible()&&U().isOnline(),[W,j,K,$]=sne(r,y),v=G.useRef({}).current,E=tr(o)?tr(n.fallback)?ra:n.fallback[y]:o,_=(Re,xe)=>{for(const Fe in v){const Ut=Fe;if(Ut==="data"){if(!s(Re[Ut],xe[Ut])&&(!tr(Re[Ut])||!s(se,xe[Ut])))return!1}else if(xe[Ut]!==Re[Ut])return!1}return!0},O=G.useMemo(()=>{const Re=!y||!e?!1:tr(a)?U().isPaused()||i?!1:c!==!1:a,xe=Bt=>{const ze=am(Bt);return delete ze._k,Re?{isValidating:!0,isLoading:!0,...ze}:ze},Fe=W(),Ut=$(),at=xe(Fe),wn=Fe===Ut?at:xe(Ut);let Qn=at;return[()=>{const Bt=xe(W());return _(Bt,Qn)?(Qn.data=Bt.data,Qn.isLoading=Bt.isLoading,Qn.isValidating=Bt.isValidating,Qn.error=Bt.error,Qn):(Qn=Bt,Bt)},()=>wn]},[r,y]),x=Rte.useSyncExternalStore(G.useCallback(Re=>K(y,(xe,Fe)=>{_(Fe,xe)||Re()}),[r,y]),O[0],O[1]),B=!C.current,F=f[y]&&f[y].length>0,L=x.data,A=tr(L)?E&&rne(E)?OD(E):E:L,H=x.error,re=G.useRef(A),se=h?tr(L)?tr(re.current)?A:re.current:L:A,ge=F&&!tr(H)?!1:B&&!tr(a)?a:U().isPaused()?!1:i?tr(A)?!1:c:tr(A)||c,ae=!!(y&&e&&B&&ge),fe=tr(x.isValidating)?ae:x.isValidating,ye=tr(x.isLoading)?ae:x.isLoading,ve=G.useCallback(async Re=>{const xe=k.current;if(!y||!xe||N.current||U().isPaused())return!1;let Fe,Ut,at=!0;const wn=Re||{},Qn=!g[y]||!wn.dedupe,Bt=()=>iW?!N.current&&y===I.current&&C.current:y===I.current,ze={isValidating:!1,isLoading:!1},Jn=()=>{j(ze)},qt=()=>{const un=g[y];un&&un[1]===Ut&&delete g[y]},qe={isValidating:!0};tr(W().data)&&(qe.isLoading=!0);try{if(Qn&&(j(qe),n.loadingTimeout&&tr(W().data)&&setTimeout(()=>{at&&Bt()&&U().onLoadingSlow(y,n)},n.loadingTimeout),g[y]=[xe(w),cU()]),[Fe,Ut]=g[y],Fe=await Fe,Qn&&setTimeout(qt,n.dedupingInterval),!g[y]||g[y][1]!==Ut)return Qn&&Bt()&&U().onDiscarded(y),!1;ze.error=ra;const un=p[y];if(!tr(un)&&(Ut<=un[0]||Ut<=un[1]||un[1]===0))return Jn(),Qn&&Bt()&&U().onDiscarded(y),!1;const In=W().data;ze.data=s(In,Fe)?In:Fe,Qn&&Bt()&&U().onSuccess(Fe,y,n)}catch(un){qt();const In=U(),{shouldRetryOnError:z}=In;In.isPaused()||(ze.error=un,Qn&&Bt()&&(In.onError(un,y,In),(z===!0||Ld(z)&&z(un))&&(!U().revalidateOnFocus||!U().revalidateOnReconnect||M())&&In.onErrorRetry(un,y,In,T=>{const D=f[y];D&&D[0]&&D[0](rW,T)},{retryCount:(wn.retryCount||0)+1,dedupe:!0})))}return at=!1,Jn(),!0},[y,r]),_e=G.useCallback((...Re)=>ine(r,I.current,...Re),[]);if(RD(()=>{k.current=e,P.current=n,tr(L)||(re.current=L)}),RD(()=>{if(!y)return;const Re=ve.bind(ra,DD);let xe=0;U().revalidateOnFocus&&(xe=Date.now()+U().focusThrottleInterval);const Ut=dNe(y,f,(at,wn={})=>{if(at==ene){const Qn=Date.now();U().revalidateOnFocus&&Qn>xe&&M()&&(xe=Qn+U().focusThrottleInterval,Re())}else if(at==tne)U().revalidateOnReconnect&&M()&&Re();else{if(at==nne)return ve();if(at==rW)return ve(wn)}});return N.current=!1,I.current=y,C.current=!0,j({_k:w}),ge&&(g[y]||(tr(A)||KA?Re():qIe(Re))),()=>{N.current=!0,Ut()}},[y]),RD(()=>{let Re;function xe(){const Ut=Ld(l)?l(W().data):l;Ut&&Re!==-1&&(Re=setTimeout(Fe,Ut))}function Fe(){!W().error&&(u||U().isVisible())&&(d||U().isOnline())?ve(DD).then(xe):xe()}return xe(),()=>{Re&&(clearTimeout(Re),Re=-1)}},[l,u,d,y]),G.useDebugValue(se),i&&tr(A)&&y){if(!iW&&KA)throw new Error("Fallback data is required when using Suspense in SSR.");k.current=e,P.current=n,N.current=!1;const Re=m[y];if(!tr(Re)){const xe=_e(Re);OD(xe)}if(tr(H)){const xe=ve(DD);tr(se)||(xe.status="fulfilled",xe.value=!0),OD(xe)}else throw H}return{mutate:_e,get data(){return v.data=!0,se},get error(){return v.error=!0,H},get isValidating(){return v.isValidating=!0,fe},get isLoading(){return v.isLoading=!0,ye}}},cW=uNe(hNe);class fNe extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const pNe=cW.default||cW,gNe="https://react-tweet.vercel.app";async function mNe([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new fNe({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const yNe=(t,e,n)=>{const{isLoading:r,data:s,error:i}=pNe(()=>e||t?[e||t&&`${gNe}/api/tweet/${t}`,n]:null,mNe,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},wNe=({id:t,apiUrl:e,fallback:n=b.jsx(LIe,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=yNe(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||PIe;return b.jsx(l,{error:i?i(a):a})}return b.jsx(TIe,{tweet:o,components:r})};var eP={exports:{}},cne={},lne={exports:{}},bNe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",vNe=bNe,ENe=vNe;function une(){}function dne(){}dne.resetWarningCache=une;var CNe=function(){function t(r,s,i,o,a,c){if(c!==ENe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:dne,resetWarningCache:une};return n.PropTypes=n,n};lne.exports=CNe();var hne=lne.exports,lU={exports:{}};function fne(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=fne(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function lW(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=fne(t))&&(r&&(r+=" "),r+=e);return r}lU.exports=lW,lU.exports.clsx=lW;var _Ne=lU.exports,Ys={},lh={};Object.defineProperty(lh,"__esModule",{value:!0});lh.dontSetMe=xNe;lh.findInArray=ANe;lh.int=NNe;lh.isFunction=SNe;lh.isNum=INe;function ANe(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function SNe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function INe(t){return typeof t=="number"&&!isNaN(t)}function NNe(t){return parseInt(t,10)}function xNe(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var lw={};Object.defineProperty(lw,"__esModule",{value:!0});lw.browserPrefixToKey=gne;lw.browserPrefixToStyle=TNe;lw.default=void 0;lw.getPrefix=pne;const MD=["Moz","Webkit","O","ms"];function pne(){var n,r;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(r=(n=window.document)==null?void 0:n.documentElement)==null?void 0:r.style;if(!e||t in e)return"";for(let s=0;s<MD.length;s++)if(gne(t,MD[s])in e)return MD[s];return""}function gne(t,e){return e?`${e}${RNe(t)}`:t}function TNe(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function RNe(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}lw.default=pne();Object.defineProperty(Ys,"__esModule",{value:!0});Ys.addClassName=wne;Ys.addEvent=PNe;Ys.addUserSelectStyles=zNe;Ys.createCSSTransform=$Ne;Ys.createSVGTransform=FNe;Ys.getTouch=jNe;Ys.getTouchIdentifier=WNe;Ys.getTranslation=K$;Ys.innerHeight=BNe;Ys.innerWidth=LNe;Ys.matchesSelector=yne;Ys.matchesSelectorAndParentsTo=kNe;Ys.offsetXYFromParent=UNe;Ys.outerHeight=DNe;Ys.outerWidth=MNe;Ys.removeClassName=bne;Ys.removeEvent=ONe;Ys.scheduleRemoveUserSelectStyles=HNe;var qc=lh,uW=mne(lw);function mne(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(mne=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}let tx="";function yne(t,e){return tx||(tx=(0,qc.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,qc.isFunction)(t[n])})),(0,qc.isFunction)(t[tx])?t[tx](e):!1}function kNe(t,e,n){let r=t;do{if(yne(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function PNe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function ONe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function DNe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,qc.int)(n.borderTopWidth),e+=(0,qc.int)(n.borderBottomWidth),e}function MNe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,qc.int)(n.borderLeftWidth),e+=(0,qc.int)(n.borderRightWidth),e}function BNe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,qc.int)(n.paddingTop),e-=(0,qc.int)(n.paddingBottom),e}function LNe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,qc.int)(n.paddingLeft),e-=(0,qc.int)(n.paddingRight),e}function UNe(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function $Ne(t,e){const n=K$(t,e,"px");return{[(0,uW.browserPrefixToKey)("transform",uW.default)]:n}}function FNe(t,e){return K$(t,e,"")}function K$(t,e,n){let{x:r,y:s}=t,i=`translate(${r}${n},${s}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function jNe(t,e){return t.targetTouches&&(0,qc.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,qc.findInArray)(t.changedTouches,n=>e===n.identifier)}function WNe(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function zNe(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&wne(t.body,"react-draggable-transparent-selection")}function HNe(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{dW(t)}):dW(t)}function dW(t){if(t)try{if(t.body&&bne(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function wne(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function bne(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var uh={};Object.defineProperty(uh,"__esModule",{value:!0});uh.canDragX=VNe;uh.canDragY=KNe;uh.createCoreData=QNe;uh.createDraggableData=JNe;uh.getBoundPosition=GNe;uh.getControlPosition=YNe;uh.snapToGrid=qNe;var Ec=lh,jb=Ys;function GNe(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:ZNe(r);const s=Y$(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=s.getRootNode().querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,Ec.int)(u.paddingLeft)+(0,Ec.int)(l.marginLeft),top:-s.offsetTop+(0,Ec.int)(u.paddingTop)+(0,Ec.int)(l.marginTop),right:(0,jb.innerWidth)(c)-(0,jb.outerWidth)(s)-s.offsetLeft+(0,Ec.int)(u.paddingRight)-(0,Ec.int)(l.marginRight),bottom:(0,jb.innerHeight)(c)-(0,jb.outerHeight)(s)-s.offsetTop+(0,Ec.int)(u.paddingBottom)-(0,Ec.int)(l.marginBottom)}}return(0,Ec.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,Ec.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,Ec.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,Ec.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function qNe(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function VNe(t){return t.props.axis==="both"||t.props.axis==="x"}function KNe(t){return t.props.axis==="both"||t.props.axis==="y"}function YNe(t,e,n){const r=typeof e=="number"?(0,jb.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=Y$(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,jb.offsetXYFromParent)(r||t,i,n.props.scale)}function QNe(t,e,n){const r=!(0,Ec.isNum)(t.lastX),s=Y$(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function JNe(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function ZNe(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function Y$(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var tP={},nP={};Object.defineProperty(nP,"__esModule",{value:!0});nP.default=XNe;function XNe(){}Object.defineProperty(tP,"__esModule",{value:!0});tP.default=void 0;var BD=vne(G),qo=Q$(hne),exe=Q$(Z8),Io=Ys,np=uh,LD=lh,g1=Q$(nP);function Q$(t){return t&&t.__esModule?t:{default:t}}function vne(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(vne=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}function Yo(t,e,n){return(e=txe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function txe(t){var e=nxe(t,"string");return typeof e=="symbol"?e:e+""}function nxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const lu={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let rp=lu.mouse,rP=class extends BD.Component{constructor(){super(...arguments),Yo(this,"dragging",!1),Yo(this,"lastX",NaN),Yo(this,"lastY",NaN),Yo(this,"touchIdentifier",null),Yo(this,"mounted",!1),Yo(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,Io.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,Io.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const s=(0,Io.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,np.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,np.createCoreData)(this,o,a);(0,g1.default)("DraggableCore: handleDragStart: %j",c),(0,g1.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,Io.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,Io.addEvent)(r,rp.move,this.handleDrag),(0,Io.addEvent)(r,rp.stop,this.handleDragStop))}),Yo(this,"handleDrag",e=>{const n=(0,np.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,np.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,np.createCoreData)(this,r,s);if((0,g1.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),Yo(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,np.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,np.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,np.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,Io.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,g1.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,g1.default)("DraggableCore: Removing handlers"),(0,Io.removeEvent)(a.ownerDocument,rp.move,this.handleDrag),(0,Io.removeEvent)(a.ownerDocument,rp.stop,this.handleDragStop))}),Yo(this,"onMouseDown",e=>(rp=lu.mouse,this.handleDragStart(e))),Yo(this,"onMouseUp",e=>(rp=lu.mouse,this.handleDragStop(e))),Yo(this,"onTouchStart",e=>(rp=lu.touch,this.handleDragStart(e))),Yo(this,"onTouchEnd",e=>(rp=lu.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,Io.addEvent)(e,lu.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,Io.removeEvent)(n,lu.mouse.move,this.handleDrag),(0,Io.removeEvent)(n,lu.touch.move,this.handleDrag),(0,Io.removeEvent)(n,lu.mouse.stop,this.handleDragStop),(0,Io.removeEvent)(n,lu.touch.stop,this.handleDragStop),(0,Io.removeEvent)(e,lu.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Io.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,r;return(e=this.props)!=null&&e.nodeRef?(r=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:r.current:exe.default.findDOMNode(this)}render(){return BD.cloneElement(BD.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};tP.default=rP;Yo(rP,"displayName","DraggableCore");Yo(rP,"propTypes",{allowAnyClick:qo.default.bool,allowMobileScroll:qo.default.bool,children:qo.default.node.isRequired,disabled:qo.default.bool,enableUserSelectHack:qo.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:qo.default.arrayOf(qo.default.number),handle:qo.default.string,cancel:qo.default.string,nodeRef:qo.default.object,onStart:qo.default.func,onDrag:qo.default.func,onStop:qo.default.func,onMouseDown:qo.default.func,scale:qo.default.number,className:LD.dontSetMe,style:LD.dontSetMe,transform:LD.dontSetMe});Yo(rP,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=d(G),n=u(hne),r=u(Z8),s=_Ne,i=Ys,o=uh,a=lh,c=u(tP),l=u(nP);function u(y){return y&&y.__esModule?y:{default:y}}function d(y,w){if(typeof WeakMap=="function")var C=new WeakMap,N=new WeakMap;return(d=function(I,k){if(!k&&I&&I.__esModule)return I;var P,U,M={__proto__:null,default:I};if(I===null||typeof I!="object"&&typeof I!="function")return M;if(P=k?N:C){if(P.has(I))return P.get(I);P.set(I,M)}for(const W in I)W!=="default"&&{}.hasOwnProperty.call(I,W)&&((U=(P=Object.defineProperty)&&Object.getOwnPropertyDescriptor(I,W))&&(U.get||U.set)?P(M,W,U):M[W]=I[W]);return M})(y,w)}function h(){return h=Object.assign?Object.assign.bind():function(y){for(var w=1;w<arguments.length;w++){var C=arguments[w];for(var N in C)({}).hasOwnProperty.call(C,N)&&(y[N]=C[N])}return y},h.apply(null,arguments)}function f(y,w,C){return(w=p(w))in y?Object.defineProperty(y,w,{value:C,enumerable:!0,configurable:!0,writable:!0}):y[w]=C,y}function p(y){var w=g(y,"string");return typeof w=="symbol"?w:w+""}function g(y,w){if(typeof y!="object"||!y)return y;var C=y[Symbol.toPrimitive];if(C!==void 0){var N=C.call(y,w);if(typeof N!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(y)}class m extends e.Component{static getDerivedStateFromProps(w,C){let{position:N}=w,{prevPropsPosition:I}=C;return N&&(!I||N.x!==I.x||N.y!==I.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:N,prevPropsPosition:I}),{x:N.x,y:N.y,prevPropsPosition:{...N}}):null}constructor(w){super(w),f(this,"onDragStart",(C,N)=>{if((0,l.default)("Draggable: onDragStart: %j",N),this.props.onStart(C,(0,o.createDraggableData)(this,N))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),f(this,"onDrag",(C,N)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",N);const I=(0,o.createDraggableData)(this,N),k={x:I.x,y:I.y,slackX:0,slackY:0};if(this.props.bounds){const{x:U,y:M}=k;k.x+=this.state.slackX,k.y+=this.state.slackY;const[W,j]=(0,o.getBoundPosition)(this,k.x,k.y);k.x=W,k.y=j,k.slackX=this.state.slackX+(U-k.x),k.slackY=this.state.slackY+(M-k.y),I.x=k.x,I.y=k.y,I.deltaX=k.x-this.state.x,I.deltaY=k.y-this.state.y}if(this.props.onDrag(C,I)===!1)return!1;this.setState(k)}),f(this,"onDragStop",(C,N)=>{if(!this.state.dragging||this.props.onStop(C,(0,o.createDraggableData)(this,N))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",N);const k={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:U,y:M}=this.props.position;k.x=U,k.y=M}this.setState(k)}),this.state={dragging:!1,dragged:!1,x:w.position?w.position.x:w.defaultPosition.x,y:w.position?w.position.y:w.defaultPosition.y,prevPropsPosition:{...w.position},slackX:0,slackY:0,isElementSVG:!1},w.position&&!(w.onDrag||w.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var w,C;return((C=(w=this.props)==null?void 0:w.nodeRef)==null?void 0:C.current)??r.default.findDOMNode(this)}render(){const{axis:w,bounds:C,children:N,defaultPosition:I,defaultClassName:k,defaultClassNameDragging:P,defaultClassNameDragged:U,position:M,positionOffset:W,scale:j,...K}=this.props;let $={},v=null;const _=!!!M||this.state.dragging,O=M||I,x={x:(0,o.canDragX)(this)&&_?this.state.x:O.x,y:(0,o.canDragY)(this)&&_?this.state.y:O.y};this.state.isElementSVG?v=(0,i.createSVGTransform)(x,W):$=(0,i.createCSSTransform)(x,W);const B=(0,s.clsx)(N.props.className||"",k,{[P]:this.state.dragging,[U]:this.state.dragged});return e.createElement(c.default,h({},K,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(N),{className:B,style:{...N.props.style,...$},transform:v}))}}t.default=m,f(m,"displayName","Draggable"),f(m,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),f(m,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(cne);const{default:Ene,DraggableCore:rxe}=cne;eP.exports=Ene;eP.exports.default=Ene;eP.exports.DraggableCore=rxe;var sxe=eP.exports;const LI=ch(sxe);function Ms(){return Ms=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ms.apply(null,arguments)}function Cne(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var _ne={exports:{}},Pr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gi=typeof Symbol=="function"&&Symbol.for,J$=Gi?Symbol.for("react.element"):60103,Z$=Gi?Symbol.for("react.portal"):60106,sP=Gi?Symbol.for("react.fragment"):60107,iP=Gi?Symbol.for("react.strict_mode"):60108,oP=Gi?Symbol.for("react.profiler"):60114,aP=Gi?Symbol.for("react.provider"):60109,cP=Gi?Symbol.for("react.context"):60110,X$=Gi?Symbol.for("react.async_mode"):60111,lP=Gi?Symbol.for("react.concurrent_mode"):60111,uP=Gi?Symbol.for("react.forward_ref"):60112,dP=Gi?Symbol.for("react.suspense"):60113,ixe=Gi?Symbol.for("react.suspense_list"):60120,hP=Gi?Symbol.for("react.memo"):60115,fP=Gi?Symbol.for("react.lazy"):60116,oxe=Gi?Symbol.for("react.block"):60121,axe=Gi?Symbol.for("react.fundamental"):60117,cxe=Gi?Symbol.for("react.responder"):60118,lxe=Gi?Symbol.for("react.scope"):60119;function el(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case J$:switch(t=t.type,t){case X$:case lP:case sP:case oP:case iP:case dP:return t;default:switch(t=t&&t.$$typeof,t){case cP:case uP:case fP:case hP:case aP:return t;default:return e}}case Z$:return e}}}function Ane(t){return el(t)===lP}Pr.AsyncMode=X$;Pr.ConcurrentMode=lP;Pr.ContextConsumer=cP;Pr.ContextProvider=aP;Pr.Element=J$;Pr.ForwardRef=uP;Pr.Fragment=sP;Pr.Lazy=fP;Pr.Memo=hP;Pr.Portal=Z$;Pr.Profiler=oP;Pr.StrictMode=iP;Pr.Suspense=dP;Pr.isAsyncMode=function(t){return Ane(t)||el(t)===X$};Pr.isConcurrentMode=Ane;Pr.isContextConsumer=function(t){return el(t)===cP};Pr.isContextProvider=function(t){return el(t)===aP};Pr.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===J$};Pr.isForwardRef=function(t){return el(t)===uP};Pr.isFragment=function(t){return el(t)===sP};Pr.isLazy=function(t){return el(t)===fP};Pr.isMemo=function(t){return el(t)===hP};Pr.isPortal=function(t){return el(t)===Z$};Pr.isProfiler=function(t){return el(t)===oP};Pr.isStrictMode=function(t){return el(t)===iP};Pr.isSuspense=function(t){return el(t)===dP};Pr.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===sP||t===lP||t===oP||t===iP||t===dP||t===ixe||typeof t=="object"&&t!==null&&(t.$$typeof===fP||t.$$typeof===hP||t.$$typeof===aP||t.$$typeof===cP||t.$$typeof===uP||t.$$typeof===axe||t.$$typeof===cxe||t.$$typeof===lxe||t.$$typeof===oxe)};Pr.typeOf=el;_ne.exports=Pr;var uxe=_ne.exports,e4=uxe,dxe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},hxe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},fxe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Sne={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},t4={};t4[e4.ForwardRef]=fxe;t4[e4.Memo]=Sne;function hW(t){return e4.isMemo(t)?Sne:t4[t.$$typeof]||dxe}var pxe=Object.defineProperty,gxe=Object.getOwnPropertyNames,fW=Object.getOwnPropertySymbols,mxe=Object.getOwnPropertyDescriptor,yxe=Object.getPrototypeOf,pW=Object.prototype;function Ine(t,e,n){if(typeof e!="string"){if(pW){var r=yxe(e);r&&r!==pW&&Ine(t,r,n)}var s=gxe(e);fW&&(s=s.concat(fW(e)));for(var i=hW(t),o=hW(e),a=0;a<s.length;++a){var c=s[a];if(!hxe[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=mxe(e,c);try{pxe(t,c,l)}catch{}}}}return t}var wxe=Ine;const bxe=ch(wxe);var Nne={};Object.defineProperty(Nne,"__esModule",{value:!0});Nne.default=vxe;function vxe(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function nx(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VR(){return VR=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VR.apply(this,arguments)}function Exe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function sp(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cxe(t){var e=function(n){Exe(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,nx(sp(sp(i)),"cachedTheme",void 0),nx(sp(sp(i)),"lastOuterTheme",void 0),nx(sp(sp(i)),"lastTheme",void 0),nx(sp(sp(i)),"renderProvider",function(l){var u=i.props.children;return zc.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?VR({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?zc.createElement(t.Consumer,null,this.renderProvider):null},r}(zc.Component);return e}function _xe(t){return function(n){var r=zc.forwardRef(function(s,i){return zc.createElement(t.Consumer,null,function(o){return zc.createElement(n,VR({theme:o,ref:i},s))})});return bxe(r,n),r}}function Axe(t){var e=function(){var r=zc.useContext(t);return r};return e}function Sxe(t){return{context:t,withTheme:_xe(t),useTheme:Axe(t),ThemeProvider:Cxe(t)}}var xne=G.createContext();Sxe(xne);var gW=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},PC=(typeof window>"u"?"undefined":gW(window))==="object"&&(typeof document>"u"?"undefined":gW(document))==="object"&&document.nodeType===9;function YA(t){"@babel/helpers - typeof";return YA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YA(t)}function Ixe(t,e){if(YA(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(YA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Nxe(t){var e=Ixe(t,"string");return YA(e)=="symbol"?e:e+""}function xxe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Nxe(r.key),r)}}function n4(t,e,n){return e&&xxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function uU(t,e){return uU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},uU(t,e)}function Tne(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,uU(t,e)}function mW(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Txe={}.constructor;function dU(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(dU);if(t.constructor!==Txe)return t;var e={};for(var n in t)e[n]=dU(t[n]);return e}function pP(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=dU(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var yW=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},l0=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=yW(e[r]," ");else n=yW(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function OC(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function m1(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function QA(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=OC(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=m1(f+":"+u+l0(p)+";",o))}}else for(var g in a){var m=a[g];m!=null&&(r&&(r+=l),r+=m1(g+":"+u+l0(m)+";",o))}for(var y in e){var w=e[y];w!=null&&y!=="fallbacks"&&(r&&(r+=l),r+=m1(y+":"+u+l0(w)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),m1(""+t+u+"{"+r,o)+m1("}",o))}var Rxe=/([[\].#*$><+~=|^:(),"'`\s])/g,wW=typeof CSS<"u"&&CSS.escape,r4=function(t){return wW?wW(t):t.replace(Rxe,"\\$1")},Rne=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),hU=function(t){Tne(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(mW(mW(o)),l),o.selectorText="."+r4(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=l0(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Ms({},s,{allowEmpty:!0}):s;return QA(this.selectorText,this.style,a)},n4(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(Rne),kxe={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new hU(e,n,r)}},UD={indent:1,children:!0},Pxe=/@([\w-]+)/,Oxe=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(Pxe);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new gP(Ms({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=UD);var s=OC(r),i=s.linebreak;if(r.indent==null&&(r.indent=UD.indent),r.children==null&&(r.children=UD.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),Dxe=/@container|@media|@supports\s+/,Mxe={onCreateRule:function(e,n,r){return Dxe.test(e)?new Oxe(e,n,r):null}},$D={indent:1,children:!0},Bxe=/@keyframes\s+([\w-]+)/,fU=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(Bxe);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:r4(c(this,a)),this.rules=new gP(Ms({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],Ms({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=$D);var s=OC(r),i=s.linebreak;if(r.indent==null&&(r.indent=$D.indent),r.children==null&&(r.children=$D.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),Lxe=/@keyframes\s+/,Uxe=/\$([\w-]+)/g,pU=function(e,n){return typeof e=="string"?e.replace(Uxe,function(r,s){return s in n?n[s]:r}):e},bW=function(e,n,r){var s=e[n],i=pU(s,r);i!==s&&(e[n]=i)},$xe={onCreateRule:function(e,n,r){return typeof e=="string"&&Lxe.test(e)?new fU(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&bW(e,"animation-name",r.keyframes),"animation"in e&&bW(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return pU(e,s.keyframes);case"animation-name":return pU(e,s.keyframes);default:return e}}},Fxe=function(t){Tne(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Ms({},s,{allowEmpty:!0}):s;return QA(this.key,this.style,a)},e}(Rne),jxe={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new Fxe(e,n,r):null}},Wxe=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=OC(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=QA(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return QA(this.at,this.style,r)},t}(),zxe=/@font-face/,Hxe={onCreateRule:function(e,n,r){return zxe.test(e)?new Wxe(e,n,r):null}},Gxe=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return QA(this.key,this.style,r)},t}(),qxe={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new Gxe(e,n,r):null}},Vxe=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),Kxe={"@charset":!0,"@import":!0,"@namespace":!0},Yxe={onCreateRule:function(e,n,r){return e in Kxe?new Vxe(e,n,r):null}},vW=[kxe,Mxe,$xe,jxe,Hxe,qxe,Yxe],Qxe={process:!0},EW={force:!0,process:!0},gP=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=Ms({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+r4(this.classes[p]));var g=pP(p,s,f);if(!g)return null;this.register(g);var m=f.index===void 0?this.index.length:f.index;return this.index.splice(m,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=Ms({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof hU?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof fU&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof hU?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof fU&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=Qxe);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,EW)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,EW)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=OC(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),kne=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Ms({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new gP(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),Jxe=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),Zxe=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=Cne(s,["attached"]),a=OC(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},n4(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),D_=new Zxe,gU=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),mU="2f1acc6c3a606b082e5eef5e54414ffb";gU[mU]==null&&(gU[mU]=0);var CW=gU[mU]++,_W=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+CW+a+n:c+i.key+"-"+CW+(a?"-"+a:"")+"-"+n};return r},Pne=function(e){var n;return function(){return n||(n=e()),n}},Xxe=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},eTe=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=l0(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},tTe=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},nTe=function(e,n){return e.selectorText=n,e.selectorText===n},One=Pne(function(){return document.querySelector("head")});function rTe(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function sTe(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function iTe(t){for(var e=One(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function oTe(t){var e=D_.registry;if(e.length>0){var n=rTe(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=sTe(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=iTe(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function aTe(t,e){var n=e.insertionPoint,r=oTe(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}One().appendChild(t)}var cTe=Pne(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),AW=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},SW=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},lTe=function(){var e=document.createElement("style");return e.textContent=`
`,e},uTe=function(){function t(n){this.getPropertyValue=Xxe,this.setProperty=eTe,this.removeProperty=tTe,this.setSelector=nTe,this.hasInsertedRules=!1,this.cssRules=[],n&&D_.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||lTe(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=cTe();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){aTe(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=SW(i,s);if(a=AW(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=SW(i,s),d=AW(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof kne&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),dTe=0,hTe=function(){function t(n){this.id=dTe++,this.version="10.10.0",this.plugins=new Jxe,this.options={id:{minify:!1},createGenerateId:_W,Renderer:PC?uTe:null,plugins:[]},this.generateId=_W({minify:!1});for(var r=0;r<vW.length;r++)this.plugins.use(vW[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=Ms({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=D_.index===0?0:D_.index+1);var a=new kne(r,Ms({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),D_.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=Ms({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=pP(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),Dne=function(e){return new hTe(e)},IW=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},n4(t,[{key:"size",get:function(){return this.length}}]),t}(),s4=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function Mne(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=Mne(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */Dne();var Bne=Date.now(),FD="fnValues"+Bne,jD="fnStyle"+ ++Bne,fTe=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=pP(n,{},s);return i[jD]=r,i},onProcessStyle:function(n,r){if(FD in r||jD in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[FD]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[jD];a&&(o.style=a(n)||{});var c=o[FD];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function pTe(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var gb;typeof self<"u"?gb=self:typeof window<"u"?gb=window:typeof global<"u"?gb=global:typeof module<"u"?gb=module:gb=Function("return this")();var NW=pTe(gb),xW=function(e){return e&&e[NW]&&e===e[NW]()},gTe=function(e){return{onCreateRule:function(r,s,i){if(!xW(s))return null;var o=s,a=pP(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!xW(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},mTe=/;\n/,yTe=function(e){for(var n={},r=e.split(mTe),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},wTe=function(e){typeof e.style=="string"&&(e.style=yTe(e.style))};function bTe(){return{onProcessRule:wTe}}var zg="@global",yU="@global ",vTe=function(){function t(n,r,s){this.type="global",this.at=zg,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new gP(Ms({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),ETe=function(){function t(n,r,s){this.type="global",this.at=zg,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(yU.length);this.rule=s.jss.createRule(i,r,Ms({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),CTe=/\s*,\s*/g;function Lne(t,e){for(var n=t.split(CTe),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function _Te(t,e){var n=t.options,r=t.style,s=r?r[zg]:null;if(s){for(var i in s)e.addRule(i,s[i],Ms({},n,{selector:Lne(i,t.selector)}));delete r[zg]}}function ATe(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,zg.length)!==zg)){var i=Lne(s.substr(zg.length),t.selector);e.addRule(i,r[s],Ms({},n,{selector:i})),delete r[s]}}function STe(){function t(n,r,s){if(!n)return null;if(n===zg)return new vTe(n,r,s);if(n[0]==="@"&&n.substr(0,yU.length)===yU)return new ETe(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(_Te(n,r),ATe(n,r))}return{onCreateRule:t,onProcessRule:e}}var fT=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},WD="extendCurrValue"+Date.now();function ITe(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];Ay(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?Ms({},t,{extend:l}):t.extend[c];Ay(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){Ay(t.extend.extend,e,n,r);continue}if(fT(t.extend[d])){d in r||(r[d]={}),Ay(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function NTe(t,e,n,r){for(var s in t)if(s!=="extend"){if(fT(r[s])&&fT(t[s])){Ay(t[s],e,n,r[s]);continue}if(fT(t[s])){r[s]=Ay(t[s],e,n);continue}r[s]=t[s]}}function Ay(t,e,n,r){return r===void 0&&(r={}),ITe(t,e,n,r),NTe(t,e,n,r),r}function xTe(){function t(n,r,s){return"extend"in n?Ay(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[WD])s.prop(i,null);return s[WD]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[WD]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var TW=/\s*,\s*/g,TTe=/&/g,RTe=/\$([\w-]+)/g;function kTe(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(TW),a=s.split(TW),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(TTe,u):u+" "+h}return c}function n(s,i,o){if(o)return Ms({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=Ms({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(RTe,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],Ms({},l,{selector:p})):c.addRule(g,s[d],Ms({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function wU(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=wU(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return wU(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function PTe(){function t(e,n){return"composes"in e&&(wU(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var OTe=/[A-Z]/g,DTe=/^ms-/,zD={};function MTe(t){return"-"+t.toLowerCase()}function Une(t){if(zD.hasOwnProperty(t))return zD[t];var e=t.replace(OTe,MTe);return zD[t]=DTe.test(e)?"-"+e:e}function KR(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:Une(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(KR):e.fallbacks=KR(t.fallbacks)),e}function BTe(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=KR(n[r]);return n}return KR(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=Une(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var Ae=s4&&CSS?CSS.px:"px",rx=s4&&CSS?CSS.ms:"ms",Lw=s4&&CSS?CSS.percent:"%",LTe={"animation-delay":rx,"animation-duration":rx,"background-position":Ae,"background-position-x":Ae,"background-position-y":Ae,"background-size":Ae,border:Ae,"border-bottom":Ae,"border-bottom-left-radius":Ae,"border-bottom-right-radius":Ae,"border-bottom-width":Ae,"border-left":Ae,"border-left-width":Ae,"border-radius":Ae,"border-right":Ae,"border-right-width":Ae,"border-top":Ae,"border-top-left-radius":Ae,"border-top-right-radius":Ae,"border-top-width":Ae,"border-width":Ae,"border-block":Ae,"border-block-end":Ae,"border-block-end-width":Ae,"border-block-start":Ae,"border-block-start-width":Ae,"border-block-width":Ae,"border-inline":Ae,"border-inline-end":Ae,"border-inline-end-width":Ae,"border-inline-start":Ae,"border-inline-start-width":Ae,"border-inline-width":Ae,"border-start-start-radius":Ae,"border-start-end-radius":Ae,"border-end-start-radius":Ae,"border-end-end-radius":Ae,margin:Ae,"margin-bottom":Ae,"margin-left":Ae,"margin-right":Ae,"margin-top":Ae,"margin-block":Ae,"margin-block-end":Ae,"margin-block-start":Ae,"margin-inline":Ae,"margin-inline-end":Ae,"margin-inline-start":Ae,padding:Ae,"padding-bottom":Ae,"padding-left":Ae,"padding-right":Ae,"padding-top":Ae,"padding-block":Ae,"padding-block-end":Ae,"padding-block-start":Ae,"padding-inline":Ae,"padding-inline-end":Ae,"padding-inline-start":Ae,"mask-position-x":Ae,"mask-position-y":Ae,"mask-size":Ae,height:Ae,width:Ae,"min-height":Ae,"max-height":Ae,"min-width":Ae,"max-width":Ae,bottom:Ae,left:Ae,top:Ae,right:Ae,inset:Ae,"inset-block":Ae,"inset-block-end":Ae,"inset-block-start":Ae,"inset-inline":Ae,"inset-inline-end":Ae,"inset-inline-start":Ae,"box-shadow":Ae,"text-shadow":Ae,"column-gap":Ae,"column-rule":Ae,"column-rule-width":Ae,"column-width":Ae,"font-size":Ae,"font-size-delta":Ae,"letter-spacing":Ae,"text-decoration-thickness":Ae,"text-indent":Ae,"text-stroke":Ae,"text-stroke-width":Ae,"word-spacing":Ae,motion:Ae,"motion-offset":Ae,outline:Ae,"outline-offset":Ae,"outline-width":Ae,perspective:Ae,"perspective-origin-x":Lw,"perspective-origin-y":Lw,"transform-origin":Lw,"transform-origin-x":Lw,"transform-origin-y":Lw,"transform-origin-z":Lw,"transition-delay":rx,"transition-duration":rx,"vertical-align":Ae,"flex-basis":Ae,"shape-margin":Ae,size:Ae,gap:Ae,grid:Ae,"grid-gap":Ae,"row-gap":Ae,"grid-row-gap":Ae,"grid-column-gap":Ae,"grid-template-rows":Ae,"grid-template-columns":Ae,"grid-auto-rows":Ae,"grid-auto-columns":Ae,"box-shadow-x":Ae,"box-shadow-y":Ae,"box-shadow-blur":Ae,"box-shadow-spread":Ae,"font-line-height":Ae,"text-shadow-x":Ae,"text-shadow-y":Ae,"text-shadow-blur":Ae};function $ne(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var UTe=$ne(LTe);function M_(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=M_(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=M_(s,e[s],n);else for(var i in e)e[i]=M_(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||UTe[t];return o&&!(e===0&&o===Ae)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function $Te(t){t===void 0&&(t={});var e=$ne(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=M_(o,s[o],e);return s}function r(s,i){return M_(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var FTe={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},jTe={position:!0,size:!0},sx={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},HD={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function WTe(t,e,n){return t.map(function(r){return jne(r,e,n,!1,!0)})}function Fne(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?Fne(t[0],e,n,r):typeof t[0]=="object"?WTe(t,e,r):[t]}function jne(t,e,n,r,s){if(!(sx[e]||HD[e]))return[];var i=[];if(HD[e]&&(t=zTe(t,n,HD[e],r)),Object.keys(t).length)for(var o in sx[e]){if(t[o]){Array.isArray(t[o])?i.push(jTe[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}sx[e][o]!=null&&i.push(sx[e][o])}return!i.length||s?i:[i]}function zTe(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=JA((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function JA(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=JA(t.fallbacks[i],e,!0);continue}t[r]=Fne(s,r,FTe,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=JA(t.fallbacks,e,!0);continue}t[r]=jne(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function HTe(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=JA(e[r],n);return e}return JA(e,n)}return{onProcessStyle:t}}function bU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function GTe(t){if(Array.isArray(t))return bU(t)}function qTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function VTe(t,e){if(t){if(typeof t=="string")return bU(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bU(t,e):void 0}}function KTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YTe(t){return GTe(t)||qTe(t)||VTe(t)||KTe()}var K1="",vU="",Wne="",zne="",QTe=PC&&"ontouchstart"in document.documentElement;if(PC){var GD={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},JTe=document.createElement("p"),qD=JTe.style,ZTe="Transform";for(var VD in GD)if(VD+ZTe in qD){K1=VD,vU=GD[VD];break}K1==="Webkit"&&"msHyphens"in qD&&(K1="ms",vU=GD.ms,zne="edge"),K1==="Webkit"&&"-apple-trailing-word"in qD&&(Wne="apple")}var An={js:K1,css:vU,vendor:Wne,browser:zne,isTouch:QTe};function XTe(t){return t[1]==="-"||An.js==="ms"?t:"@"+An.css+"keyframes"+t.substr(10)}var eRe={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:An.js==="ms"?"-webkit-"+e:An.css+e}},tRe={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:An.js==="Webkit"?An.css+"print-"+e:e}},nRe=/[-\s]+(.)?/g;function rRe(t,e){return e?e.toUpperCase():""}function i4(t){return t.replace(nRe,rRe)}function cm(t){return i4("-"+t)}var sRe={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(An.js==="Webkit"){var r="mask-image";if(i4(r)in n)return e;if(An.js+cm(r)in n)return An.css+e}return e}},iRe={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:An.vendor==="apple"&&!An.isTouch?An.css+e:e}},oRe={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:An.css+e}},aRe={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:An.css+e}},cRe={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:An.js==="Webkit"||An.js==="ms"&&An.browser!=="edge"?An.css+e:e}},lRe={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:An.js==="Moz"||An.js==="ms"||An.vendor==="apple"?An.css+e:e}},uRe={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(An.js==="Webkit"){var r="WebkitColumn"+cm(e);return r in n?An.css+"column-"+e:!1}if(An.js==="Moz"){var s="page"+cm(e);return s in n?"page-"+e:!1}return!1}},dRe={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(An.js==="Moz")return e;var r=e.replace("-inline","");return An.js+cm(r)in n?An.css+r:!1}},hRe={supportedProperty:function(e,n){return i4(e)in n?e:!1}},fRe={supportedProperty:function(e,n){var r=cm(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:An.js+r in n?An.css+e:An.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},pRe={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:An.js==="ms"?""+An.css+e:e}},gRe={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:An.js==="ms"?An.css+"scroll-chaining":e}},mRe={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},yRe={supportedProperty:function(e,n){var r=mRe[e];return r&&An.js+cm(r)in n?An.css+r:!1}},Hne={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},wRe=Object.keys(Hne),bRe=function(e){return An.css+e},vRe={supportedProperty:function(e,n,r){var s=r.multiple;if(wRe.indexOf(e)>-1){var i=Hne[e];if(!Array.isArray(i))return An.js+cm(i)in n?An.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(An.js+cm(i[0])in n))return!1;return i.map(bRe)}return!1}},Gne=[eRe,tRe,sRe,iRe,oRe,aRe,cRe,lRe,uRe,dRe,hRe,fRe,pRe,gRe,yRe,vRe],RW=Gne.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),ERe=Gne.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,YTe(e.noPrefill)),t},[]),Y1,ry={};if(PC){Y1=document.createElement("p");var KD=window.getComputedStyle(document.documentElement,"");for(var YD in KD)isNaN(YD)||(ry[KD[YD]]=KD[YD]);ERe.forEach(function(t){return delete ry[t]})}function EU(t,e){if(e===void 0&&(e={}),!Y1)return t;if(ry[t]!=null)return ry[t];(t==="transition"||t==="transform")&&(e[t]=t in Y1.style);for(var n=0;n<RW.length&&(ry[t]=RW[n](t,Y1.style,e),!ry[t]);n++);try{Y1.style[t]=""}catch{return!1}return ry[t]}var Uw={},CRe={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},_Re=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Ap;function ARe(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?EU(e):", "+EU(n);return r||e||n}PC&&(Ap=document.createElement("p"));function kW(t,e){var n=e;if(!Ap||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(Uw[r]!=null)return Uw[r];try{Ap.style[t]=n}catch{return Uw[r]=!1,!1}if(CRe[t])n=n.replace(_Re,ARe);else if(Ap.style[t]===""&&(n=An.css+n,n==="-ms-flex"&&(Ap.style[t]="-ms-flexbox"),Ap.style[t]=n,Ap.style[t]===""))return Uw[r]=!1,!1;return Ap.style[t]="",Uw[r]=n,Uw[r]}function SRe(){function t(s){if(s.type==="keyframes"){var i=s;i.at=XTe(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=EU(i);c&&c!==i&&(a=!0);var l=!1,u=kW(c,l0(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return kW(i,l0(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function IRe(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var NRe=function(e){return e===void 0&&(e={}),{plugins:[fTe(),gTe(e.observable),bTe(),STe(),xTe(),kTe(),PTe(),BTe(),$Te(e.defaultUnit),HTe(),SRe(),IRe()]}},xRe=Number.MIN_SAFE_INTEGER||-1e9,TRe=function(){return xRe++},RRe=G.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!PC}),PW=new Map,o4=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new IW),r[n];var s=PW.get(n);return s||(s=new IW,PW.set(n,s)),s},OW=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=o4(r,s);o.manage(i),r.registry&&r.registry.add(n)}},kRe=function(e){if(e.sheet){var n=o4(e.context,e.index);n.unmanage(e.theme)}},PRe=Dne(NRe()),qne=new WeakMap,Vne=function(e){return qne.get(e)},ORe=function(e,n){qne.set(e,n)},DRe=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function MRe(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",Ms({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var BRe=function(e){if(!e.context.disableStylesGeneration){var n=o4(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||PRe,i=DRe(e),o=Mne(i),a=s.createStyleSheet(i,MRe(e,o!==null));return ORe(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},LRe=function(e,n){for(var r in n)e.deleteRule(n[r])},URe=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},$Re=function(e,n){var r=Vne(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},FRe=function(e,n){if(!n)return e.classes;var r=Vne(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function DW(t){return t?G.useEffect:zc.useInsertionEffect||G.useLayoutEffect}var QD={},Yu=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?TRe():s,o=r.theming,a=r.name,c=Cne(r,["index","theming","name"]),l=o&&o.context||xne,u=function(f){return typeof e=="function"&&(f||G.useContext(l))||QD},d={};return function(f){var p=G.useRef(!0),g=G.useContext(RRe),m=u(f&&f.theme),y=G.useMemo(function(){var I=BRe({context:g,styles:e,name:a,theme:m,index:i,sheetOptions:c});return I&&g.isSSR&&OW({index:i,context:g,sheet:I,theme:m}),[I,I?$Re(I,f):null]},[g,m]),w=y[0],C=y[1];DW(g.isSSR)(function(){w&&C&&!p.current&&URe(f,w,C)},[f]),DW(g.isSSR)(function(){return w&&OW({index:i,context:g,sheet:w,theme:m}),function(){w&&(kRe({index:i,context:g,sheet:w,theme:m}),C&&LRe(w,C))}},[w]);var N=G.useMemo(function(){return w&&C?FRe(w,C):d},[w,C]);return G.useDebugValue(N),G.useDebugValue(m===QD?"No theme":m),G.useEffect(function(){p.current=!1}),N}};const jRe=Yu({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function JD({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=jRe(),d=G.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=b.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[b.jsx("img",{src:t,alt:e,className:u.iconImage}),b.jsx("span",{className:u.iconLabel,children:e})]});return o?f:b.jsx(LI,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const WRe=Yu({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function ml({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=WRe({isOpen:e}),u=G.useRef(null),d=()=>{r&&r(t)};return b.jsx(LI,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:b.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[b.jsxs("div",{className:l.header,children:[b.jsx("span",{children:i||t.replace("-popup","")}),b.jsxs("div",{className:l.titleBarButtons,children:[b.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),b.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:"✕"})]})]}),b.jsx("div",{className:l.content,children:s})]})})}const ZD=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],zRe=80,HRe=80,GRe=10,qRe=10,VRe=10,KRe=10,YRe=({onIconClick:t})=>{const e=ZD.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:VRe+d*(zRe+GRe),y:KRe+u*(HRe+qRe)},u++,u>=4&&(u=0,d++)}),l},[r,s]=G.useState(n()),[i,o]=G.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return b.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:b.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>b.jsx(JD,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&b.jsx(ml,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:b.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:ZD.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>b.jsx(JD,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&b.jsx(ml,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:b.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:ZD.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>b.jsx(JD,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},QRe=Yu({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),JRe=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=G.useState(!1),[o,a]=G.useState(new Date),c=QRe({isOpen:s});G.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return b.jsxs("div",{className:c.taskbar,children:[b.jsxs("div",{className:c.leftSection,children:[b.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),b.jsx("div",{className:c.windows,children:t.map(h=>b.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),b.jsxs("div",{className:c.rightSection,children:[b.jsxs("div",{className:c.statusSection,children:[b.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:b.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),b.jsx("div",{className:c.clock,children:l(o)})]}),s&&b.jsxs("div",{className:c.menu,children:[b.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),b.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),b.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),b.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),b.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),b.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),b.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),b.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function Kne(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function a4(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function Yne(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function c4(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function Qne(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function Jne(t,e=50){var r;const n="https://mainnet.helius-rpc.com/?api-key=f2330fce-2a97-416b-ada9-ce0ba94ddadc";try{console.log("Using Helius DAS API for Solana collection:",t);const i={lawbstation:"9CU9LUX7UWkBEG4oP8YrgDUkNJKNHLt2wGdVfX6NY4EY",lawbnexus:"AfXkPjcfTWHz9WDjvXxZBkHSWQ1H7xsg7jT2fFLkAAi"}[t];if(!i)return console.log("No collection mint found for collection:",t),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]};const o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"my-id",method:"getAssetsByGroup",params:{groupKey:"collection",groupValue:i,page:1,limit:e}})});if(!o.ok)throw console.log("Helius DAS API response status:",o.status),console.log("Helius DAS API response text:",await o.text()),new Error(`Helius DAS API error: ${o.statusText}`);const a=await o.json();if(console.log("Helius DAS API response:",a),a.error)throw new Error(`Helius DAS API error: ${a.error.message}`);const l=(((r=a.result)==null?void 0:r.items)||[]).map(u=>{var d,h,f,p,g,m,y,w,C,N,I,k,P,U,M,W,j,K,$,v,E,_,O,x,B,F,L,A,H,re;return{id:u.id||u.mint||"unknown",address:u.mint||"",token_id:parseInt(((f=(h=(d=u.content)==null?void 0:d.metadata)==null?void 0:h.name)==null?void 0:f.replace(/\D/g,""))||"0",10),attributes:JSON.stringify(((g=(p=u.content)==null?void 0:p.metadata)==null?void 0:g.attributes)||[]),name:((y=(m=u.content)==null?void 0:m.metadata)==null?void 0:y.name)||((N=(C=(w=u.content)==null?void 0:w.files)==null?void 0:C[0])==null?void 0:N.name)||`#${(I=u.mint)==null?void 0:I.slice(0,8)}`,image_url:((U=(P=(k=u.content)==null?void 0:k.files)==null?void 0:P[0])==null?void 0:U.uri)||((W=(M=u.content)==null?void 0:M.metadata)==null?void 0:W.image)||"",owner_of:"",block_minted:0,contract_type:"SOL",description:((K=(j=u.content)==null?void 0:j.metadata)==null?void 0:K.description)||"",image:((E=(v=($=u.content)==null?void 0:$.files)==null?void 0:v[0])==null?void 0:E.uri)||((O=(_=u.content)==null?void 0:_.metadata)==null?void 0:O.image)||"",image_url_shrunk:((F=(B=(x=u.content)==null?void 0:x.files)==null?void 0:B[0])==null?void 0:F.uri)||((A=(L=u.content)==null?void 0:L.metadata)==null?void 0:A.image)||"",animation_url:((re=(H=u.content)==null?void 0:H.metadata)==null?void 0:re.animation_url)||"",metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),owners:[]}});return{page:1,pageSize:e,totalCount:l.length,totalPages:1,data:l}}catch(s){throw console.error("Error getting Solana NFTs from Helius:",s),s}}async function ZRe(t,e=50){var r;const n="https://mainnet.helius-rpc.com/?api-key=f2330fce-2a97-416b-ada9-ce0ba94ddadc";try{console.log("Using Helius DAS API for Solana owner:",t);const s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"my-id",method:"getAssetsByOwner",params:{ownerAddress:t,page:1,limit:e}})});if(!s.ok)throw console.log("Helius DAS API response status:",s.status),console.log("Helius DAS API response text:",await s.text()),new Error(`Helius DAS API error: ${s.statusText}`);const i=await s.json();if(console.log("Helius DAS API owner response:",i),i.error)throw new Error(`Helius DAS API error: ${i.error.message}`);const o=((r=i.result)==null?void 0:r.items)||[],a={lawbstation:"6cz67ciatfhDaxyWw3rdC9rZHXAxQvYnq5qkqmnG3G1Q",lawbnexus:"35pjVXpTg2PCdBZ1zdUckNfnAxULJQBRSjWLXREo6692"},l=o.filter(u=>{const d=u.mintAuthority||u.authority;return d&&Object.values(a).includes(d)}).slice(0,e).map(u=>{var d,h,f,p,g,m,y,w,C,N,I,k,P,U,M,W,j,K,$,v,E,_,O,x,B,F,L,A,H,re,se,ge;return{id:u.id||u.mint||"unknown",address:u.mint||"",token_id:parseInt(((f=(h=(d=u.content)==null?void 0:d.metadata)==null?void 0:h.name)==null?void 0:f.replace(/\D/g,""))||"0",10),attributes:JSON.stringify(((g=(p=u.content)==null?void 0:p.metadata)==null?void 0:g.attributes)||[]),name:((y=(m=u.content)==null?void 0:m.metadata)==null?void 0:y.name)||((N=(C=(w=u.content)==null?void 0:w.files)==null?void 0:C[0])==null?void 0:N.name)||`#${(I=u.mint)==null?void 0:I.slice(0,8)}`,image_url:((U=(P=(k=u.content)==null?void 0:k.files)==null?void 0:P[0])==null?void 0:U.uri)||((W=(M=u.content)==null?void 0:M.metadata)==null?void 0:W.image)||"",owner_of:t,block_minted:0,contract_type:"SOL",description:((K=(j=u.content)==null?void 0:j.metadata)==null?void 0:K.description)||"",image:((E=(v=($=u.content)==null?void 0:$.files)==null?void 0:v[0])==null?void 0:E.uri)||((O=(_=u.content)==null?void 0:_.metadata)==null?void 0:O.image)||"",image_url_shrunk:((F=(B=(x=u.content)==null?void 0:x.files)==null?void 0:B[0])==null?void 0:F.uri)||((A=(L=u.content)==null?void 0:L.metadata)==null?void 0:A.image)||"",animation_url:((re=(H=u.content)==null?void 0:H.metadata)==null?void 0:re.animation_url)||"",metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:((ge=(se=u.grouping)==null?void 0:se.find(ae=>ae.group_key==="collection"))==null?void 0:ge.group_value)||"",num_items:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}});return{page:1,pageSize:e,totalCount:l.length,totalPages:1,data:l}}catch(s){throw console.error("Error getting Solana NFTs by owner from Helius:",s),s}}const XRe=Yu({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),eke=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=XRe({isOpen:t}),i=G.useRef(null),[o,a]=G.useState([]),[c,l]=G.useState(!1),[u,d]=G.useState(!1),[h,f]=G.useState({}),[p,g]=G.useState(null),{data:m}=Vte();G.useEffect(()=>{t&&r&&y()},[t,r]);const y=async()=>{l(!0),g(null);try{const k=await Kne(r);a(k);const P={};k.forEach(U=>{P[U.id]=0}),f(P)}catch(k){g(k.message)}finally{l(!1)}},w=(k,P)=>{f(U=>({...U,[k]:Math.max(0,P)}))},C=async()=>{const k=Object.entries(h).filter(([,P])=>P>0).map(([P,U])=>({id:P,quantity:U}));if(k.length===0){g("Please select at least one item to mint");return}if(!m){g("Wallet not connected");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const P=await Yne(r,k);if(console.log("Mint API result:",P),P.success&&P.mintTransaction){console.log("Got mint transaction:",P.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const U=await m.sendTransaction({to:P.mintTransaction.to,value:BigInt(P.mintTransaction.value),data:P.mintTransaction.data});console.log("Transaction sent successfully:",U),alert(`NFT Minted Successfully: Transaction Hash - ${U}`),e()}catch(U){console.error("Transaction sending failed:",U),g("Transaction failed: "+U.message)}}else throw new Error(P.message||"Could not retrieve minting transaction.")}catch(P){console.error("Minting failed:",P),g("Minting failed: "+P.message)}finally{d(!1)}},N=(k,P)=>`${parseFloat(k)} ${P}`,I=()=>{n&&n()};return t?b.jsx(LI,{nodeRef:i,handle:`.${s.header}`,children:b.jsxs("div",{ref:i,className:s.popup,children:[b.jsxs("div",{className:s.header,children:[b.jsx("span",{children:"Mint Pixelawbster"}),b.jsxs("div",{className:s.titleBarButtons,children:[b.jsx("button",{className:s.titleBarButton,onClick:I,title:"Minimize",children:"_"}),b.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),b.jsxs("div",{className:s.content,children:[p&&b.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?b.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?b.jsx("div",{children:"No eligible invite lists found for your wallet."}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{marginBottom:"20px"},children:[b.jsx("h3",{children:"Available Lists:"}),o.map(k=>b.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[b.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:k.name}),b.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",N(k.token_price,k.currency_symbol)]}),b.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",k.wallet_limit===4294967295?"Unlimited":k.wallet_limit," per wallet"]}),b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[b.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),b.jsx("input",{type:"number",min:"0",max:k.wallet_limit===4294967295?999:k.wallet_limit,value:h[k.id]||0,onChange:P=>w(k.id,parseInt(P.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},k.id))]}),b.jsx("button",{onClick:()=>void C(),disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},Zne=t=>[t.image_url,t.image,t.image_url_shrunk,t.old_image_url].filter(Boolean)[0]||"",Xne=({src:t,alt:e,style:n})=>{const[r,s]=G.useState(t),[i,o]=G.useState(!1),[a,c]=G.useState(0);G.useEffect(()=>{s(t),o(!1),c(0)},[t]);const l=()=>{a===0?(s(t),c(1)):a===1?(s(`https://images.weserv.nl/?url=${encodeURIComponent(t)}`),c(2)):o(!0)};return i?b.jsx("div",{style:{...n,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#666",backgroundColor:"#f0f0f0",width:(n==null?void 0:n.width)||"100%",height:(n==null?void 0:n.height)||"150px"},children:"Image not available"}):b.jsx("img",{src:r,alt:e,style:n,crossOrigin:a===0?"anonymous":void 0,onError:l})},tke=Yu({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),nke=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},rke=({nft:t,onClose:e})=>{const n=tke(),r=G.useRef(null),s=nke(t.attributes);return b.jsx(LI,{nodeRef:r,handle:`.${n.header}`,children:b.jsxs("div",{className:n.popup,ref:r,children:[b.jsxs("div",{className:n.header,children:[b.jsxs("span",{children:[t.name," - Details"]}),b.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),b.jsxs("div",{className:n.content,children:[b.jsx(Xne,{src:Zne(t),alt:t.name,style:{width:"100%",height:"auto",marginBottom:"10px"}}),b.jsx("h3",{children:"Traits"}),b.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>b.jsxs("li",{children:[b.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):b.jsx("li",{children:"No traits found."})})]})]})})},ske=Symbol(),MW=Object.getPrototypeOf,CU=new WeakMap,ike=t=>t&&(CU.has(t)?CU.get(t):MW(t)===Object.prototype||MW(t)===Array.prototype),oke=t=>ike(t)&&t[ske]||null,BW=(t,e=!0)=>{CU.set(t,e)},YR={},XD=t=>typeof t=="object"&&t!==null,kp=new WeakMap,Q1=new WeakSet,ake=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>XD(l)&&!Q1.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return BW(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:m}=Reflect.getOwnPropertyDescriptor(l,p),y={value:g,enumerable:m,configurable:!0};if(Q1.has(g))BW(g,!1);else if(g instanceof Promise)delete y.value,y.get=()=>d(g);else if(kp.has(g)){const[w,C]=kp.get(g);y.value=i(w,C(),d)}Object.defineProperty(f,p,y)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!XD(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(M,W=++a[0])=>{d!==W&&(d=W,h.forEach(j=>j(M,W)))};let p=a[1];const g=(M=++a[1])=>(p!==M&&!h.size&&(p=M,y.forEach(([W])=>{const j=W[1](M);j>d&&(d=j)})),d),m=M=>(W,j)=>{const K=[...W];K[1]=[M,...K[1]],f(K,j)},y=new Map,w=(M,W)=>{if((YR?"production":void 0)!=="production"&&y.has(M))throw new Error("prop listener already exists");if(h.size){const j=W[3](m(M));y.set(M,[W,j])}else y.set(M,[W])},C=M=>{var W;const j=y.get(M);j&&(y.delete(M),(W=j[1])==null||W.call(j))},N=M=>(h.add(M),h.size===1&&y.forEach(([j,K],$)=>{if((YR?"production":void 0)!=="production"&&K)throw new Error("remove already exists");const v=j[3](m($));y.set($,[j,v])}),()=>{h.delete(M),h.size===0&&y.forEach(([j,K],$)=>{K&&(K(),y.set($,[j]))})}),I=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),P=e(I,{deleteProperty(M,W){const j=Reflect.get(M,W);C(W);const K=Reflect.deleteProperty(M,W);return K&&f(["delete",[W],j]),K},set(M,W,j,K){const $=Reflect.has(M,W),v=Reflect.get(M,W,K);if($&&(t(v,j)||o.has(j)&&t(v,o.get(j))))return!0;C(W),XD(j)&&(j=oke(j)||j);let E=j;if(j instanceof Promise)j.then(_=>{j.status="fulfilled",j.value=_,f(["resolve",[W],_])}).catch(_=>{j.status="rejected",j.reason=_,f(["reject",[W],_])});else{!kp.has(j)&&n(j)&&(E=c(j));const _=!Q1.has(E)&&kp.get(E);_&&w(W,_)}return Reflect.set(M,W,E,K),f(["set",[W],j,v]),!0}});o.set(l,P);const U=[I,g,i,N];return kp.set(P,U),Reflect.ownKeys(l).forEach(M=>{const W=Object.getOwnPropertyDescriptor(l,M);"value"in W&&(P[M]=l[M],delete W.value,delete W.writable),Object.defineProperty(I,M,W)}),P})=>[c,kp,Q1,t,e,n,r,s,i,o,a],[cke]=ake();function gs(t={}){return cke(t)}function Wo(t,e,n){const r=kp.get(t);(YR?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function ZA(t,e){const n=kp.get(t);(YR?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function L0(t){return Q1.add(t),t}function Ho(t,e,n,r){let s=t[e];return Wo(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function lke(t){const e=gs({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var LW={};const dt={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof LW<"u"?LW.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},ere={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=dt.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var uke=20,dke=1,U0=1e6,UW=1e6,hke=-7,fke=21,pke=!1,UI="[big.js] ",uw=UI+"Invalid ",mP=uw+"decimal places",gke=uw+"rounding mode",tre=UI+"Division by zero",Rr={},Vd=void 0,mke=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function nre(){function t(e){var n=this;if(!(n instanceof t))return e===Vd?nre():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(uw+"value");e=e===0&&1/e<0?"-0":String(e)}yke(n,e)}n.constructor=t}return t.prototype=Rr,t.DP=uke,t.RM=dke,t.NE=hke,t.PE=fke,t.strict=pke,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function yke(t,e){var n,r,s;if(!mke.test(e))throw Error(uw+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function dw(t,e,n,r){var s=t.c;if(n===Vd&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(gke);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Vd))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Vd||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function hw(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}Rr.abs=function(){var t=new this.constructor(this);return t.s=1,t};Rr.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};Rr.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>U0)throw Error(mP);if(!s[0])throw Error(tre);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),m=g.length,y=t,w=y.c=[],C=0,N=o+(y.e=e.e-t.e)+1;for(y.s=i,i=N<0?0:N,h.unshift(0);m++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(m=g.length))u=a>m?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=m==a?s:h;m;){if(g[--m]<c[m]){for(d=m;d&&!g[--d];)g[d]=9;--g[d],g[m]+=10}g[m]-=c[m]}for(;!g[0];)g.shift()}else break}w[C++]=u?l:++l,g[0]&&u?g[m]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==Vd)&&i--);return!w[0]&&C!=1&&(w.shift(),y.e--,N--),C>N&&dw(y,N,n.RM,g[0]!==Vd),y};Rr.eq=function(t){return this.cmp(t)===0};Rr.gt=function(t){return this.cmp(t)>0};Rr.gte=function(t){return this.cmp(t)>-1};Rr.lt=function(t){return this.cmp(t)<0};Rr.lte=function(t){return this.cmp(t)<1};Rr.minus=Rr.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};Rr.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(tre);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};Rr.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};Rr.plus=Rr.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};Rr.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-UW||t>UW)throw Error(uw+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};Rr.prec=function(t,e){if(t!==~~t||t<1||t>U0)throw Error(uw+"precision");return dw(new this.constructor(this),t,e)};Rr.round=function(t,e){if(t===Vd)t=0;else if(t!==~~t||t<-U0||t>U0)throw Error(mP);return dw(new this.constructor(this),t+this.e+1,e)};Rr.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(UI+"No square root");i=Math.sqrt(+hw(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return dw(t,(s.DP-=4)+t.e+1,s.RM)};Rr.times=Rr.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};Rr.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Vd){if(t!==~~t||t<0||t>U0)throw Error(mP);for(n=dw(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return hw(n,!0,!!r)};Rr.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Vd){if(t!==~~t||t<0||t>U0)throw Error(mP);for(n=dw(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return hw(n,!1,!!r)};Rr[Symbol.for("nodejs.util.inspect.custom")]=Rr.toJSON=Rr.toString=function(){var t=this,e=t.constructor;return hw(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};Rr.toNumber=function(){var t=+hw(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(UI+"Imprecise conversion");return t};Rr.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==Vd){if(t!==~~t||t<1||t>U0)throw Error(uw+"precision");for(n=dw(new r(n),t,e);n.c.length<t;)n.c.push(0)}return hw(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};Rr.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(UI+"valueOf disallowed");return hw(t,t.e<=e.NE||t.e>=e.PE,!0)};var sa=nre();const wke={bigNumber(t){return t?new sa(t):new sa(0)},multiply(t,e){if(t===void 0||e===void 0)return new sa(0);const n=new sa(t),r=new sa(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},bke=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],vke=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],Eke=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Cke={getERC20Abi:t=>dt.USDT_CONTRACT_ADDRESSES.includes(t)?Eke:bke,getSwapAbi:()=>vke},ip={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},vn={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections"};function e3(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const dn={setItem(t,e){J1()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(J1())return localStorage.getItem(t)||void 0},removeItem(t){J1()&&localStorage.removeItem(t)},clear(){J1()&&localStorage.clear()}};function J1(){return typeof window<"u"&&typeof localStorage<"u"}function hf(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var $W={};const t3=(typeof process<"u"&&typeof $W<"u"?$W.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",rre=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],_ke="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",$r={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:t3,SECURE_SITE_DASHBOARD:`${t3}/dashboard`,SECURE_SITE_FAVICON:`${t3}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["coinbase","meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},bt={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=bt.getActiveNamespace(),e=bt.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{dn.setItem(vn.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=dn.getItem(vn.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{dn.removeItem(vn.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{dn.setItem(vn.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{dn.setItem(vn.ACTIVE_CAIP_NETWORK_ID,t),bt.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return dn.getItem(vn.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{dn.removeItem(vn.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=e3(t);dn.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=bt.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),dn.setItem(vn.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=dn.getItem(vn.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=e3(t);dn.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return dn.getItem(vn.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=e3(t);return dn.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{dn.setItem(vn.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return dn.getItem(vn.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{dn.removeItem(vn.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return dn.getItem(vn.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=dn.getItem(vn.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{dn.setItem(vn.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return dn.getItem(vn.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=dn.getItem(vn.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));dn.setItem(vn.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=bt.getConnectedNamespaces();e.includes(t)||(e.push(t),bt.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=bt.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),bt.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return dn.getItem(vn.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{dn.setItem(vn.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{dn.removeItem(vn.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=dn.getItem(vn.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=bt.getBalanceCache();dn.setItem(vn.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=bt.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;bt.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=bt.getBalanceCache();e[t.caipAddress]=t,dn.setItem(vn.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=dn.getItem(vn.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=bt.getBalanceCache();dn.setItem(vn.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=bt.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),bt.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=bt.getNativeBalanceCache();e[t.caipAddress]=t,dn.setItem(vn.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=dn.getItem(vn.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=bt.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;bt.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=bt.getEnsCache();e[t.address]=t,dn.setItem(vn.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=bt.getEnsCache();dn.setItem(vn.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=dn.getItem(vn.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=bt.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;bt.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=bt.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},dn.setItem(vn.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=bt.getIdentityCache();dn.setItem(vn.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{dn.removeItem(vn.PORTFOLIO_CACHE),dn.removeItem(vn.NATIVE_BALANCE_CACHE),dn.removeItem(vn.ENS_CACHE),dn.removeItem(vn.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{dn.setItem(vn.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=dn.getItem(vn.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n={...bt.getConnections(),[e]:t};dn.setItem(vn.CONNECTIONS,JSON.stringify(n))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=dn.getItem(vn.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}}},Mt={isMobile(){var t;return this.isClient()?!!(typeof(window==null?void 0:window.matchMedia)=="function"&&((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return Mt.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=$r.TEN_SEC_MS:!0},isAllowedRetry(t,e=$r.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(Mt.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+$r.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(Mt.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!Mt.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?bt.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r,s;if(typeof window>"u")return!1;const t=(r=(n=window.matchMedia)==null?void 0:n.call(window,"(display-mode: standalone)"))==null?void 0:r.matches,e=(s=window==null?void 0:window.navigator)==null?void 0:s.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,Mt.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return dt.W3M_API_URL},getBlockchainApiUrl(){return dt.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return dt.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?$r.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in dt.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function y1(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}let $I=class{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await y1(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await y1(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await y1(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await y1(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await y1(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}};const Ake={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?$r.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(Mt.isTelegram()){if(Mt.isIos())return t.filter(e=>e!=="google");if(Mt.isMac())return t.filter(e=>e!=="x");if(Mt.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},zt=gs({features:$r.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:$r.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),De={state:zt,subscribeKey(t,e){return Ho(zt,t,e)},setOptions(t){Object.assign(zt,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...zt.remoteFeatures,...t};zt.remoteFeatures=e,(n=zt.remoteFeatures)!=null&&n.socials&&(zt.remoteFeatures.socials=Ake.filterSocialsByPlatform(zt.remoteFeatures.socials))},setFeatures(t){if(!t)return;zt.features||(zt.features=$r.DEFAULT_FEATURES);const e={...zt.features,...t};zt.features=e},setProjectId(t){zt.projectId=t},setCustomRpcUrls(t){zt.customRpcUrls=t},setAllWallets(t){zt.allWallets=t},setIncludeWalletIds(t){zt.includeWalletIds=t},setExcludeWalletIds(t){zt.excludeWalletIds=t},setFeaturedWalletIds(t){zt.featuredWalletIds=t},setTokens(t){zt.tokens=t},setTermsConditionsUrl(t){zt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){zt.privacyPolicyUrl=t},setCustomWallets(t){zt.customWallets=t},setIsSiweEnabled(t){zt.isSiweEnabled=t},setIsUniversalProvider(t){zt.isUniversalProvider=t},setSdkVersion(t){zt.sdkVersion=t},setMetadata(t){zt.metadata=t},setDisableAppend(t){zt.disableAppend=t},setEIP6963Enabled(t){zt.enableEIP6963=t},setDebug(t){zt.debug=t},setEnableWalletConnect(t){zt.enableWalletConnect=t},setEnableWalletGuide(t){zt.enableWalletGuide=t},setEnableAuthLogger(t){zt.enableAuthLogger=t},setEnableWallets(t){zt.enableWallets=t},setPreferUniversalLinks(t){zt.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){zt.hasMultipleAddresses=t},setSIWX(t){zt.siwx=t},setConnectMethodsOrder(t){zt.features={...zt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){zt.features={...zt.features,walletFeaturesOrder:t}},setSocialsOrder(t){zt.remoteFeatures={...zt.remoteFeatures,socials:t}},setCollapseWallets(t){zt.features={...zt.features,collapseWallets:t}},setEnableEmbedded(t){zt.enableEmbedded=t},setAllowUnsupportedChain(t){zt.allowUnsupportedChain=t},setManualWCControl(t){zt.manualWCControl=t},setEnableNetworkSwitch(t){zt.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(zt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){zt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return zt.universalProviderConfigOverride},getSnapshot(){return ZA(zt)}},Ske=Object.freeze({enabled:!0,events:[]}),Ike=new $I({baseUrl:Mt.getAnalyticsUrl(),clientId:null}),Nke=5,xke=60*1e3,op=gs({...Ske}),Tke={state:op,subscribeKey(t,e){return Ho(op,t,e)},async sendError(t,e){if(!op.enabled)return;const n=Date.now();if(op.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<xke}).length>=Nke)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};op.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=De.state;await Ike.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:Mt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){op.enabled=!0},disable(){op.enabled=!1},clearEvents(){op.events=[]}};let _U=class AU extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,AU.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,AU):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function FW(t,e){const n=t instanceof _U?t:new _U(t instanceof Error?t.message:String(t),e,t);throw Tke.sendError(n,n.category),n}function tl(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return FW(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return FW(a,e)}},n[r]=i}else n[r]=s}),n}const Rd={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},Rke={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Rd.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Rd.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Rd.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Rd.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===dt.CHAIN.SOLANA&&t===Rd.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Rd.COINBASE.url}/dapp?cb_url=${r}`)}},gc=gs({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),kke={state:gc,subscribeNetworkImages(t){return Wo(gc.networkImages,()=>t(gc.networkImages))},subscribeKey(t,e){return Ho(gc,t,e)},subscribe(t){return Wo(gc,()=>t(gc))},setWalletImage(t,e){gc.walletImages[t]=e},setNetworkImage(t,e){gc.networkImages[t]=e},setChainImage(t,e){gc.chainImages[t]=e},setConnectorImage(t,e){gc.connectorImages={...gc.connectorImages,[t]:e}},setTokenImage(t,e){gc.tokenImages[t]=e},setCurrencyImage(t,e){gc.currencyImages[t]=e}},Iu=tl(kke),Pke={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},n3=gs({networkImagePromises:{}}),sre={async fetchWalletImage(t){if(t)return await Lt._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(n3.networkImagePromises[t]||(n3.networkImagePromises[t]=Lt._fetchNetworkImage(t)),await n3.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Iu.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Iu.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Iu.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Iu.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return Iu.state.connectorImages[t.imageId]},getChainImage(t){return Iu.state.networkImages[Pke[t]]}},ap=gs({message:"",variant:"info",open:!1}),Oke={state:ap,subscribeKey(t,e){return Ho(ap,t,e)},open(t,e){const{debug:n}=De.state,{shortMessage:r,longMessage:s}=t;n&&(ap.message=r,ap.variant=e,ap.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){ap.open=!1,ap.message="",ap.variant="info"}},Ud=tl(Oke),Dke=Mt.getAnalyticsUrl(),Mke=new $I({baseUrl:Dke,clientId:null}),Bke=["MODAL_CREATED"],vh=gs({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Is={state:vh,subscribe(t){return Wo(vh,()=>t(vh))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=De.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=wt.state.address;if(Bke.includes(t.data.event)||typeof window>"u")return;await Mke.post({path:"/e",params:Is.getSdkProperties(),body:{eventId:Mt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),vh.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===dt.HTTP_STATUS_CODES.FORBIDDEN&&!vh.reportedErrors.FORBIDDEN&&(Ud.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${J1()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),vh.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;vh.timestamp=Date.now(),vh.data=t,(e=De.state.features)!=null&&e.analytics&&Is._sendAnalyticsEvent(vh)}},Lke=Mt.getApiUrl(),_a=new $I({baseUrl:Lke,clientId:null}),Uke=40,jW=4,$ke=20,En=gs({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Lt={state:En,subscribeKey(t,e){return Ho(En,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=De.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return De.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${_a.baseUrl}/getWalletImage/${t}`,n=await _a.getBlob({path:e,params:Lt._getSdkProperties()});Iu.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${_a.baseUrl}/public/getAssetImage/${t}`,n=await _a.getBlob({path:e,params:Lt._getSdkProperties()});Iu.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${_a.baseUrl}/public/getAssetImage/${t}`,n=await _a.getBlob({path:e,params:Lt._getSdkProperties()});Iu.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${_a.baseUrl}/public/getCurrencyImage/${t}`,n=await _a.getBlob({path:e,params:Lt._getSdkProperties()});Iu.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${_a.baseUrl}/public/getTokenImage/${t}`,n=await _a.getBlob({path:e,params:Lt._getSdkProperties()});Iu.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return Mt.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Rd.COINBASE.id?!0:J.state.activeChain==="solana"&&(n.id===Rd.SOLFLARE.id||n.id===Rd.PHANTOM.id)):t},async fetchProjectConfig(){return(await _a.get({path:"/appkit/v1/config",params:Lt._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await _a.get({path:"/projects/v1/origins",params:Lt._getSdkProperties()});return t}catch{return[]}},async fetchNetworkImages(){const t=J.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!sre.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Lt._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=ut.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Lt._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Lt._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Lt._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];Lt._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Rd).map(o=>o.id));const r=await _a.get({path:"/getWallets",params:{...Lt._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:Lt._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=De.state;if(t!=null&&t.length){const e={...Lt._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??jW,include:t},{data:n}=await Lt.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Lt._fetchWalletImage(i))),En.featured=r,En.allFeatured=r}},async fetchRecommendedWallets(){try{En.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=De.state,r=[...e??[],...n??[]].filter(Boolean),s=J.getRequestedCaipNetworkIds().join(","),i={page:1,entries:jW,include:t,exclude:r,chains:s},{data:o,count:a}=await Lt.fetchWallets(i),c=bt.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>Lt._fetchWalletImage(d))),En.recommended=o,En.allRecommended=o,En.count=a??0}catch{}finally{En.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=De.state,s=J.getRequestedCaipNetworkIds().join(","),i=[...En.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:Uke,include:e,exclude:i,chains:s},{data:a,count:c}=await Lt.fetchWallets(o),l=a.slice(0,$ke).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>Lt._fetchWalletImage(u))),En.wallets=Mt.uniqueBy([...En.wallets,...Lt._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),En.count=c>En.count?c:En.count,En.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Lt.fetchWallets(e);n&&n.forEach(r=>{En.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=De.state,s=J.getRequestedCaipNetworkIds().join(",");En.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await Lt.fetchWallets(i);Is.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Lt._fetchWalletImage(c)),Mt.wait(300)]),En.search=Lt._filterOutExtensions(o)},initPromise(t,e){const n=En.promises[t];return n||(En.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&Lt.initPromise("connectorImages",Lt.fetchConnectorImages),e&&Lt.initPromise("featuredWallets",Lt.fetchFeaturedWallets),n&&Lt.initPromise("recommendedWallets",Lt.fetchRecommendedWallets),r&&Lt.initPromise("networkImages",Lt.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=De.state.features)!=null&&t.analytics&&Lt.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await _a.get({path:"/getAnalyticsConfig",params:Lt._getSdkProperties()});De.setFeatures({analytics:t})}catch{De.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){En.featured=En.allFeatured,En.recommended=En.allRecommended;return}const e=J.getRequestedCaipNetworkIds().join(",");En.featured=En.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),En.recommended=En.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),En.filteredWallets=En.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){En.filteredWallets=[]},setFilterByNamespace(t){if(!t){En.featured=En.allFeatured,En.recommended=En.allRecommended;return}const e=J.getRequestedCaipNetworkIds().join(",");En.featured=En.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),En.recommended=En.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),En.filteredWallets=En.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Dr=gs({view:"Connect",history:["Connect"],transactionStack:[]}),Fke={state:Dr,subscribeKey(t,e){return Ho(Dr,t,e)},pushTransactionStack(t){Dr.transactionStack.push(t)},popTransactionStack(t){const e=Dr.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Rn.goBack();break;case"cancel":s==null||s(),Rn.goBack();break}},push(t,e){t!==Dr.view&&(Dr.view=t,Dr.history.push(t),Dr.data=e)},reset(t,e){Dr.view=t,Dr.history=[t],Dr.data=e},replace(t,e){Dr.history.at(-1)===t||(Dr.view=t,Dr.history[Dr.history.length-1]=t,Dr.data=e)},goBack(){var r;const t=J.state.activeCaipAddress,e=Rn.state.view==="ConnectingFarcaster",n=!t&&e;if(Dr.history.length>1){Dr.history.pop();const[s]=Dr.history.slice(-1);s&&(t&&s==="Connect"?Dr.view="Account":Dr.view=s)}else Fi.close();(r=Dr.data)!=null&&r.wallet&&(Dr.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){wt.setFarcasterUrl(void 0,J.state.activeChain);const a=ut.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=ZA(De.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Dr.history.length>1){Dr.history=Dr.history.slice(0,t+1);const[e]=Dr.history.slice(-1);e&&(Dr.view=e)}},goBackOrCloseModal(){Rn.state.history.length>1?Rn.goBack():Fi.close()}},Rn=tl(Fke),Eh=gs({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),SU={state:Eh,subscribe(t){return Wo(Eh,()=>t(Eh))},setThemeMode(t){Eh.themeMode=t;try{const e=ut.getAuthConnector();if(e){const n=SU.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:hf(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Eh.themeVariables={...Eh.themeVariables,...t};try{const e=ut.getAuthConnector();if(e){const n=SU.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:hf(Eh.themeVariables,Eh.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return ZA(Eh)}},Wa=tl(SU),ire={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},or=gs({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...ire},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),jke={state:or,subscribe(t){return Wo(or,()=>{t(or)})},subscribeKey(t,e){return Ho(or,t,e)},initialize(t){t.forEach(e=>{const n=bt.getConnectedConnectorId(e);n&&ut.setConnectorId(n,e)})},setActiveConnector(t){t&&(or.activeConnector=L0(t))},setConnectors(t){t.filter(s=>!or.allConnectors.some(i=>i.id===s.id&&ut.getConnectorName(i.name)===ut.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&or.allConnectors.push(L0(s))});const n=ut.getEnabledNamespaces(),r=ut.getEnabledConnectors(n);or.connectors=ut.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(or.filterByNamespaceMap).forEach(e=>{or.filterByNamespaceMap[e]=!1}),t.forEach(e=>{or.filterByNamespaceMap[e]=!0}),ut.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){or.filterByNamespaceMap[t]=e,ut.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=ut.getEnabledNamespaces(),e=ut.getEnabledConnectors(t),n=ut.areAllNamespacesEnabled();or.connectors=ut.mergeMultiChainConnectors(e),n?Lt.clearFilterByNamespaces():Lt.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(or.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return or.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(or.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=ut.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===dt.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=ut.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===dt.CONNECTOR_ID.AUTH){const s=t,i=ZA(De.state),o=Wa.getSnapshot().themeMode,a=Wa.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:hf(a,o)}),ut.setConnectors([t])}else ut.setConnectors([t])},getAuthConnector(t){var r;const e=t||J.state.activeChain,n=or.connectors.find(s=>s.id===dt.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return or.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return or.allConnectors.find(e=>e.id===t)},getConnector(t,e){return or.allConnectors.filter(r=>r.chain===J.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=ZA(De.state),r=Wa.getSnapshot().themeMode,s=Wa.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:hf(s,r)})},getConnectorsByNamespace(t){const e=or.allConnectors.filter(n=>n.chain===t);return ut.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=ut.getConnector(t.id,t.rdns),n=J.state.activeChain;Rke.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?Rn.push("ConnectingExternal",{connector:e}):Rn.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?ut.getConnectorsByNamespace(t):ut.mergeMultiChainConnectors(or.allConnectors)},setFilterByNamespace(t){or.filterByNamespace=t,or.connectors=ut.getConnectors(t),Lt.setFilterByNamespace(t)},setConnectorId(t,e){t&&(or.activeConnectorIds={...or.activeConnectorIds,[e]:t},bt.setConnectedConnectorId(e,t))},removeConnectorId(t){or.activeConnectorIds={...or.activeConnectorIds,[t]:void 0},bt.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return or.activeConnectorIds[t]},isConnected(t){return t?!!or.activeConnectorIds[t]:Object.values(or.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){or.activeConnectorIds={...ire}}},ut=tl(jke);var WE={};const Wke="https://secure.walletconnect.org/sdk",zke=(typeof process<"u"&&typeof WE<"u"?WE.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||Wke,Hke=(typeof process<"u"&&typeof WE<"u"?WE.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",Gke=(typeof process<"u"&&typeof WE<"u"?WE.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",mt={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},go={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Qm=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),hi=gs({...Qm}),qke={state:hi,subscribeKey(t,e){return Ho(hi,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=Mt.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){hi.message=Qm.message,hi.variant=Qm.variant,hi.svg=Qm.svg,hi.open=Qm.open,hi.autoClose=Qm.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Qm.autoClose}){hi.open?(hi.open=!1,setTimeout(()=>{hi.message=t,hi.variant=n,hi.svg=e,hi.open=!0,hi.autoClose=r},150)):(hi.message=t,hi.variant=n,hi.svg=e,hi.open=!0,hi.autoClose=r)}},ku=qke,Zr=gs({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),Vke={state:Zr,subscribe(t){return Wo(Zr,()=>t(Zr))},setLastNetworkInView(t){Zr.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Zr.loading=!0;try{const s=await Kt.fetchTransactions({account:t,cursor:Zr.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=Z1.filterSpamTransactions(s.data),o=Z1.filterByConnectedChain(i),a=[...Zr.transactions,...o];Zr.loading=!1,e==="coinbase"?Zr.coinbaseTransactions=Z1.groupTransactionsByYearAndMonth(Zr.coinbaseTransactions,s.data):(Zr.transactions=a,Zr.transactionsByYear=Z1.groupTransactionsByYearAndMonth(Zr.transactionsByYear,o)),Zr.empty=a.length===0,Zr.next=s.next?s.next:void 0}catch{const i=J.state.activeChain;Is.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:De.state.projectId,cursor:Zr.next,isSmartAccount:((r=wt.state.preferredAccountTypes)==null?void 0:r[i])===go.ACCOUNT_TYPES.SMART_ACCOUNT}}),ku.showError("Failed to fetch transactions"),Zr.loading=!1,Zr.empty=!0,Zr.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Zr.next=void 0},resetTransactions(){Zr.transactions=[],Zr.transactionsByYear={},Zr.lastNetworkInView=void 0,Zr.loading=!1,Zr.empty=!1,Zr.next=void 0}},Z1=tl(Vke,"API_ERROR"),Hr=gs({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"});let Mm;const Kke={state:Hr,subscribeKey(t,e){return Ho(Hr,t,e)},_getClient(){return Hr._client},setClient(t){Hr._client=L0(t)},async connectWalletConnect(){var t,e,n,r;if(Mt.isTelegram()||Mt.isSafari()&&Mt.isIos()){if(Mm){await Mm,Mm=void 0;return}if(!Mt.isPairingExpired(Hr==null?void 0:Hr.wcPairingExpiry)){const s=Hr.wcUri;Hr.wcUri=s;return}Mm=(e=(t=Yt._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),Yt.state.status="connecting",await Mm,Mm=void 0,Hr.wcPairingExpiry=void 0,Yt.state.status="connected"}else await((r=(n=Yt._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var r,s;await((s=(r=Yt._getClient())==null?void 0:r.connectExternal)==null?void 0:s.call(r,t)),n&&J.setActiveNamespace(e)},async reconnectExternal(t){var n,r;await((r=(n=Yt._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||J.state.activeChain;e&&ut.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;Fi.setLoading(!0,J.state.activeChain);const n=ut.getAuthConnector();n&&(wt.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),bt.setPreferredAccountTypes(wt.state.preferredAccountTypes??{[e]:t}),await Yt.reconnectExternal(n),Fi.setLoading(!1,J.state.activeChain),Is.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=Yt._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=Yt._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=Yt._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=Yt._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=Yt._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=Yt._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=Yt._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=Yt._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=Yt._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=Yt._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=Yt._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=Yt._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Hr.wcUri=void 0,Hr.wcPairingExpiry=void 0,Hr.wcLinking=void 0,Hr.recentWallet=void 0,Hr.status="disconnected",Z1.resetTransactions(),bt.deleteWalletConnectDeepLink()},resetUri(){Hr.wcUri=void 0,Hr.wcPairingExpiry=void 0,Mm=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=Yt.state;t&&bt.setWalletConnectDeepLink(t),e&&bt.setAppKitRecent(e),Is.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Rn.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Hr.wcBasic=t},setUri(t){Hr.wcUri=t,Hr.wcPairingExpiry=Mt.getPairingExpiry()},setWcLinking(t){Hr.wcLinking=t},setWcError(t){Hr.wcError=t,Hr.buffering=!1},setRecentWallet(t){Hr.recentWallet=t},setBuffering(t){Hr.buffering=t},setStatus(t){Hr.status=t},async disconnect(t){var e;try{await((e=Yt._getClient())==null?void 0:e.disconnect(t))}catch(n){throw new _U("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},setConnections(t,e){Hr.connections.set(e,t)},switchAccount({connection:t,address:e,namespace:n}){if(ut.state.activeConnectorIds[n]===t.connectorId){const i=J.state.activeCaipNetwork;if(i){const o=`${n}:${i.id}:${e}`;wt.setCaipAddress(o,n)}else console.warn(`No current network found for namespace "${n}"`)}else{const i=ut.getConnector(t.connectorId);i?Yt.connectExternal(i,n):console.warn(`No connector found for namespace "${n}"`)}}},Yt=tl(Kke),$w=gs({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Kd={state:$w,subscribe(t){return Wo($w,()=>t($w))},subscribeOpen(t){return Ho($w,"open",t)},set(t){Object.assign($w,{...$w,...t})}},r3={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Am(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},WW={async getMyTokensWithBalance(t){const e=wt.state.address,n=J.state.activeCaipNetwork;if(!e||!n)return[];if(n.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,n);if(s)return this.filterLowQualityTokens(s)}const r=await Kt.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(r.balances)},async getEIP155Balances(t,e){var n,r;try{const s=r3.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await Yt.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await Yt.walletGetAssets({account:t,chainFilter:[s]});return r3.isWalletGetAssetsResponse(o)?(o[s]||[]).map(c=>r3.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:J.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Ir=gs({tokenBalances:[],loading:!1}),Yke={state:Ir,subscribe(t){return Wo(Ir,()=>t(Ir))},subscribeKey(t,e){return Ho(Ir,t,e)},setToken(t){t&&(Ir.token=L0(t))},setTokenAmount(t){Ir.sendTokenAmount=t},setReceiverAddress(t){Ir.receiverAddress=t},setReceiverProfileImageUrl(t){Ir.receiverProfileImageUrl=t},setReceiverProfileName(t){Ir.receiverProfileName=t},setNetworkBalanceInUsd(t){Ir.networkBalanceInUSD=t},setLoading(t){Ir.loading=t},async sendToken(){var t;try{switch(wr.setLoading(!0),(t=J.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await wr.sendEvmToken();return;case"solana":await wr.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{wr.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=J.state.activeChain,e=(n=wt.state.preferredAccountTypes)==null?void 0:n[t];if(!wr.state.sendTokenAmount||!wr.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!wr.state.token)throw new Error("A token is required");(r=wr.state.token)!=null&&r.address?(Is.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===go.ACCOUNT_TYPES.SMART_ACCOUNT,token:wr.state.token.address,amount:wr.state.sendTokenAmount,network:((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await wr.sendERC20Token({receiverAddress:wr.state.receiverAddress,tokenAddress:wr.state.token.address,sendTokenAmount:wr.state.sendTokenAmount,decimals:wr.state.token.quantity.decimals})):(Is.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===go.ACCOUNT_TYPES.SMART_ACCOUNT,token:wr.state.token.symbol||"",amount:wr.state.sendTokenAmount,network:((i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await wr.sendNativeToken({receiverAddress:wr.state.receiverAddress,sendTokenAmount:wr.state.sendTokenAmount,decimals:wr.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Ir.loading=!0;const e=(i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=J.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=J.state.activeCaipAddress,s=r?Mt.getPlainAddress(r):void 0;if(Ir.lastRetry&&!Mt.isAllowedRetry(Ir.lastRetry,30*$r.ONE_SEC_MS))return Ir.loading=!1,[];try{if(s&&e&&n){const a=await WW.getMyTokensWithBalance();return Ir.tokenBalances=a,Ir.lastRetry=void 0,a}}catch(a){Ir.lastRetry=Date.now(),t==null||t(a),ku.showError("Token Balance Unavailable")}finally{Ir.loading=!1}return[]},fetchNetworkBalance(){if(Ir.tokenBalances.length===0)return;const t=WW.mapBalancesToSwapTokens(Ir.tokenBalances);if(!t)return;const e=t.find(n=>n.address===J.getActiveNetworkTokenAddress());e&&(Ir.networkBalanceInUSD=e?wke.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;Rn.pushTransactionStack({});const e=t.receiverAddress,n=wt.state.address,r=Yt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await Yt.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),Is.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=wt.state.preferredAccountTypes)==null?void 0:i.eip155)===go.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=wr.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=J.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=Yt._getClient())==null||c.updateBalance("eip155"),wr.resetSend()},async sendERC20Token(t){Rn.pushTransactionStack({onSuccess(){Rn.replace("Account")}});const e=Yt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(wt.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=Mt.getPlainAddress(t.tokenAddress);await Yt.writeContract({fromAddress:wt.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:Cke.getERC20Abi(n),chainNamespace:"eip155"}),wr.resetSend()}},async sendSolanaToken(){var t;if(!wr.state.sendTokenAmount||!wr.state.receiverAddress)throw new Error("An amount and receiver address are required");Rn.pushTransactionStack({onSuccess(){Rn.replace("Account")}}),await Yt.sendTransaction({chainNamespace:"solana",to:wr.state.receiverAddress,value:wr.state.sendTokenAmount}),(t=Yt._getClient())==null||t.updateBalance("solana"),wr.resetSend()},resetSend(){Ir.token=void 0,Ir.sendTokenAmount=void 0,Ir.receiverAddress=void 0,Ir.receiverProfileImageUrl=void 0,Ir.receiverProfileName=void 0,Ir.loading=!1,Ir.tokenBalances=[]}},wr=tl(Yke),s3={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},ix={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},nt=gs({chains:lke(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),Qke={state:nt,subscribe(t){return Wo(nt,()=>{t(nt)})},subscribeKey(t,e){return Ho(nt,t,e)},subscribeChainProp(t,e,n){let r;return Wo(nt.chains,()=>{var i;const s=n||nt.activeChain;if(s){const o=(i=nt.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=bt.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=De.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(nt.noAdapters=!0),nt.noAdapters||(nt.activeChain=a==null?void 0:a.namespace,nt.activeCaipNetwork=i,J.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),nt.activeChain&&Kd.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);J.state.chains.set(u,{namespace:u,networkState:gs({...ix,caipNetwork:d==null?void 0:d[0]}),accountState:gs(s3),caipNetworks:d??[],...n}),J.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(nt.activeChain===t){const r=Array.from(nt.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&J.setActiveCaipNetwork(s)}}nt.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){nt.chains.set(t.namespace,{namespace:t.namespace,networkState:{...ix,caipNetwork:r[0]},accountState:s3,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),J.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=nt.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),nt.chains.set(t.chainNamespace,{...e,caipNetworks:r}),J.setRequestedCaipNetworks(r,t.chainNamespace),ut.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=nt.chains.get(t);if(n){const o=((r=nt.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&J.setActiveCaipNetwork(n.caipNetworks[0]),nt.chains.set(t,{...n,caipNetworks:a}),J.setRequestedCaipNetworks(a||[],t),a.length===0&&ut.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=nt.chains.get(t);n&&(n.networkState={...n.networkState||ix,...e},nt.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=nt.chains.get(t);if(r){const s={...r.accountState||s3,...e};nt.chains.set(t,{...r,accountState:s}),(nt.chains.size===1||nt.activeChain===t)&&(e.caipAddress&&(nt.activeCaipAddress=e.caipAddress),wt.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=nt.chains.get(t);if(n){const r={...n.networkState||ix,...e};nt.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){J.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&ut.removeConnectorId(n)},setActiveNamespace(t){var r,s;nt.activeChain=t;const e=t?nt.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(nt.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,nt.activeCaipNetwork=n,J.setChainNetworkData(t,{caipNetwork:n}),bt.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Kd.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;nt.activeChain!==t.chainNamespace&&J.setIsSwitchingNamespace(!0);const e=nt.chains.get(t.chainNamespace);nt.activeChain=t.chainNamespace,nt.activeCaipNetwork=t,J.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?nt.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:nt.activeCaipAddress=void 0,J.setAccountProp("caipAddress",nt.activeCaipAddress,t.chainNamespace),e&&wt.replaceState(e.accountState),wr.resetSend(),Kd.set({activeChain:nt.activeChain,selectedNetworkId:(i=nt.activeCaipNetwork)==null?void 0:i.caipNetworkId}),bt.setActiveCaipNetworkId(t.caipNetworkId),!J.checkIfSupportedNetwork(t.chainNamespace)&&De.state.enableNetworkSwitch&&!De.state.allowUnsupportedChain&&!Yt.state.wcBasic&&J.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=nt.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==J.state.activeChain,n=(s=J.getNetworkData(t))==null?void 0:s.caipNetwork,r=J.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await J.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=J.state.chains.get(J.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=nt.activeCaipNetwork)==null?void 0:o.id)})),r=J.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&Fi.close()}catch{Rn.goBack()}Is.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||nt.activeChain,n=nt.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||nt.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=nt.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=nt.activeChain;if(e&&(n=e),!n)return;const r=(s=nt.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=nt.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=nt.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return Mt.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return nt.chains.forEach(e=>{const n=J.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){J.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=J.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));ut.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return nt.chains.forEach(e=>{const n=J.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return nt.activeCaipNetwork},getActiveCaipAddress(){return nt.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=nt.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=J.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());J.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||nt.activeCaipNetwork,r=J.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!nt.activeChain)return!0;const e=J.getRequestedCaipNetworks(nt.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){J.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=ere.caipNetworkIdToNumber((r=nt.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=nt.activeChain;if(!e||!t)return!1;const n=J.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},getActiveNetworkTokenAddress(){var r,s;const t=((r=nt.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=nt.activeCaipNetwork)==null?void 0:s.id)||1,n=$r.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`},showUnsupportedChainUI(){Fi.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=nt.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&$r.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){J.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");nt.activeCaipAddress=void 0,J.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),ut.removeConnectorId(e)},setIsSwitchingNamespace(t){nt.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(nt.chains.forEach(s=>{dt.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=nt.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=J.state.chains.get(t))==null?void 0:e.accountState:wt.state},getNetworkData(t){var n;const e=t||nt.activeChain;if(e)return(n=J.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=J.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=ut.state.filterByNamespace;return(t?[nt.chains.get(t)]:Array.from(nt.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?J.getRequestedCaipNetworks(t):J.getAllRequestedCaipNetworks()}},J=tl(Qke),Jke={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},ore=Mt.getBlockchainApiUrl(),Aa=gs({clientId:null,api:new $I({baseUrl:ore,clientId:null}),supportedChains:{http:[],ws:[]}}),Kt={state:Aa,async get(t){const{st:e,sv:n}=Kt.getSdkProperties(),r=De.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Aa.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=De.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Aa.supportedChains.http.length||await Kt.getSupportedNetworks()}catch{return!1}return Aa.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await Kt.get({path:"v1/supported-chains"});return Aa.supportedChains=t,t}catch{return Aa.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await Kt.isNetworkSupported(e))return{avatar:"",name:""};const r=bt.getIdentityFromCacheForAddress(t);if(r)return r;const s=await Kt.get({path:`/v1/identity/${t}`,params:{sender:J.state.activeCaipAddress?Mt.getPlainAddress(J.state.activeCaipAddress):void 0}});return bt.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await Kt.isNetworkSupported((a=J.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?Kt.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await Kt.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?Kt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await Kt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Kt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await Kt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Aa.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:De.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await Kt.isNetworkSupported((r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Kt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=Kt.getSdkProperties();if(!await Kt.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return Kt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await Kt.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Aa.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:$r.CONVERT_SLIPPAGE_TOLERANCE},projectId:De.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=Kt.getSdkProperties();if(!await Kt.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Kt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=Kt.getSdkProperties();if(!await Kt.isNetworkSupported((l=J.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return ku.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=bt.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await Kt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return bt.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await Kt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Kt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await Kt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Kt.get({path:`/v1/profile/reverse/${t}`,params:{sender:wt.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await Kt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Kt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await Kt.isNetworkSupported((i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Aa.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await Kt.isNetworkSupported((a=J.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Aa.api.post({path:"/v1/generators/onrampurl",params:{projectId:De.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await Kt.isNetworkSupported((e=J.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Kt.get({path:"/v1/onramp/options"})}catch{return Jke}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await Kt.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Aa.api.post({path:"/v1/onramp/quote",params:{projectId:De.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await Kt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Kt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await Kt.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Aa.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:De.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Aa.clientId=t,Aa.api=new $I({baseUrl:ore,clientId:t})}},il=gs({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),Zke={state:il,replaceState(t){t&&Object.assign(il,L0(t))},subscribe(t){return J.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return J.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){J.setAccountProp("status",t,e)},getCaipAddress(t){return J.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?Mt.getPlainAddress(t):void 0;e===J.state.activeChain&&(J.state.activeCaipAddress=t),J.setAccountProp("caipAddress",t,e),J.setAccountProp("address",n,e)},setBalance(t,e,n){J.setAccountProp("balance",t,n),J.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){J.setAccountProp("profileName",t,e)},setProfileImage(t,e){J.setAccountProp("profileImage",t,e)},setUser(t,e){J.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){J.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){J.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){J.setAccountProp("currentTab",t,J.state.activeChain)},setTokenBalance(t,e){t&&J.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){J.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){J.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=J.getAccountProp("addressLabels",n)||new Map;r.set(t,e),J.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=J.getAccountProp("addressLabels",e)||new Map;n.delete(t),J.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){J.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){J.setAccountProp("preferredAccountTypes",{...il.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){il.preferredAccountTypes=t},setSocialProvider(t,e){t&&J.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){J.setAccountProp("socialWindow",t?L0(t):void 0,e)},setFarcasterUrl(t,e){J.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;il.balanceLoading=!0;const e=(i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=J.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=J.state.activeCaipAddress,s=r?Mt.getPlainAddress(r):void 0;if(il.lastRetry&&!Mt.isAllowedRetry(il.lastRetry,30*$r.ONE_SEC_MS))return il.balanceLoading=!1,[];try{if(s&&e&&n){const c=(await Kt.getBalance(s,e)).balances.filter(l=>l.quantity.decimals!=="0");return wt.setTokenBalance(c,n),il.lastRetry=void 0,il.balanceLoading=!1,c}}catch(a){il.lastRetry=Date.now(),t==null||t(a),ku.showError("Token Balance Unavailable")}finally{il.balanceLoading=!1}return[]},resetAccount(t){J.resetAccount(t)}},wt=tl(Zke),Xke={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=J.state.activeCaipNetwork,r=Rn.state.data;if(t.id===(n==null?void 0:n.id))return;const i=wt.getCaipAddress(J.state.activeChain),o=t.chainNamespace!==J.state.activeChain,a=wt.getCaipAddress(t.chainNamespace),l=ut.getConnectorId(J.state.activeChain)===dt.CONNECTOR_ID.AUTH,u=dt.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Rn.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Rn.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Rn.push("SwitchNetwork",{...r,network:t})}},Sa=gs({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),e2e={state:Sa,subscribe(t){return Wo(Sa,()=>t(Sa))},subscribeKey(t,e){return Ho(Sa,t,e)},async open(t){var o,a;const e=wt.state.status==="connected",n=t==null?void 0:t.namespace,r=J.state.activeChain,s=n&&n!==r,i=(o=J.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(Yt.state.wcBasic?Lt.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Lt.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),ut.setFilterByNamespace(t==null?void 0:t.namespace),Fi.setLoading(!0,n),n&&s){const c=((a=J.getNetworkData(n))==null?void 0:a.caipNetwork)||J.getRequestedCaipNetworks(n)[0];c&&Xke.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=J.state.noAdapters;De.state.manualWCControl||c&&!i?Mt.isMobile()?Rn.reset("AllWallets"):Rn.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Rn.reset(t.view,t.data):i?Rn.reset("Account"):Rn.reset("Connect")}Sa.open=!0,Kd.set({open:!0}),Is.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=De.state.enableEmbedded,e=!!J.state.activeCaipAddress;Sa.open&&Is.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Sa.open=!1,Rn.reset("Connect"),Fi.clearLoading(),t?e?Rn.replace("Account"):Rn.push("Connect"):Kd.set({open:!1}),Yt.resetUri()},setLoading(t,e){e&&Sa.loadingNamespaceMap.set(e,t),Sa.loading=t,Kd.set({loading:t})},clearLoading(){Sa.loadingNamespaceMap.clear(),Sa.loading=!1},shake(){Sa.shake||(Sa.shake=!0,setTimeout(()=>{Sa.shake=!1},500))}},Fi=tl(e2e),B_={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},IU={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},t2e={providers:rre,selectedProvider:null,error:null,purchaseCurrency:B_,paymentCurrency:IU,purchaseCurrencies:[B_],paymentCurrencies:[],quotesLoading:!1},er=gs(t2e),n2e={state:er,subscribe(t){return Wo(er,()=>t(er))},subscribeKey(t,e){return Ho(er,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=J.state.activeChain===dt.CHAIN.SOLANA?"SOL":"USDC",n=wt.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",_ke),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",De.state.projectId),er.selectedProvider={...t,url:r.toString()}}else er.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=rre.filter(r=>e.includes(r.name));er.providers=n}else er.providers=[]},setPurchaseCurrency(t){er.purchaseCurrency=t},setPaymentCurrency(t){er.paymentCurrency=t},setPurchaseAmount(t){NU.state.purchaseAmount=t},setPaymentAmount(t){NU.state.paymentAmount=t},async getAvailableCurrencies(){const t=await Kt.getOnrampOptions();er.purchaseCurrencies=t.purchaseCurrencies,er.paymentCurrencies=t.paymentCurrencies,er.paymentCurrency=t.paymentCurrencies[0]||IU,er.purchaseCurrency=t.purchaseCurrencies[0]||B_,await Lt.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await Lt.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;er.quotesLoading=!0;try{const n=await Kt.getOnrampQuote({purchaseCurrency:er.purchaseCurrency,paymentCurrency:er.paymentCurrency,amount:((t=er.paymentAmount)==null?void 0:t.toString())||"0",network:(e=er.purchaseCurrency)==null?void 0:e.symbol});return er.quotesLoading=!1,er.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return er.error=n.message,er.quotesLoading=!1,null}finally{er.quotesLoading=!1}},resetState(){er.selectedProvider=null,er.error=null,er.purchaseCurrency=B_,er.paymentCurrency=IU,er.purchaseCurrencies=[B_],er.paymentCurrencies=[],er.paymentAmount=void 0,er.purchaseAmount=void 0,er.quotesLoading=!1}},NU=tl(n2e),zW=2147483648,r2e={convertEVMChainIdToCoinType(t){if(t>=zW)throw new Error("Invalid chainId");return(zW|t)>>>0}},ol=gs({suggestions:[],loading:!1}),s2e={state:ol,subscribe(t){return Wo(ol,()=>t(ol))},subscribeKey(t,e){return Ho(ol,t,e)},async resolveName(t){var e,n;try{return await Kt.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await Kt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{ol.loading=!0,ol.suggestions=[];const e=await Kt.getEnsNameSuggestions(t);return ol.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],ol.suggestions}catch(e){const n=L_.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{ol.loading=!1}},async getNamesForAddress(t){try{if(!J.state.activeCaipNetwork)return[];const n=bt.getEnsFromCacheForAddress(t);if(n)return n;const r=await Kt.reverseLookupEnsName({address:t});return bt.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=L_.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=J.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=wt.state.address,r=ut.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");ol.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Rn.pushTransactionStack({onCancel(){Rn.replace("RegisterAccountName")}});const i=await Yt.signMessage(s);ol.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=r2e.convertEVMChainIdToCoinType(Number(o));await Kt.registerEnsName({coinType:a,address:n,signature:i,message:s}),wt.setProfileName(t,e.chainNamespace),Rn.replace("RegisterAccountNameSuccess")}catch(s){const i=L_.parseEnsApiError(s,`Error registering name ${t}`);throw Rn.replace("RegisterAccountName"),new Error(i)}finally{ol.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},L_=tl(s2e);var l4={exports:{}},lv=typeof Reflect=="object"?Reflect:null,HW=lv&&typeof lv.apply=="function"?lv.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},pT;lv&&typeof lv.ownKeys=="function"?pT=lv.ownKeys:Object.getOwnPropertySymbols?pT=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:pT=function(e){return Object.getOwnPropertyNames(e)};function i2e(t){console&&console.warn&&console.warn(t)}var are=Number.isNaN||function(e){return e!==e};function jr(){jr.init.call(this)}l4.exports=jr;l4.exports.once=l2e;jr.EventEmitter=jr;jr.prototype._events=void 0;jr.prototype._eventsCount=0;jr.prototype._maxListeners=void 0;var GW=10;function yP(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(jr,"defaultMaxListeners",{enumerable:!0,get:function(){return GW},set:function(t){if(typeof t!="number"||t<0||are(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");GW=t}});jr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};jr.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||are(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function cre(t){return t._maxListeners===void 0?jr.defaultMaxListeners:t._maxListeners}jr.prototype.getMaxListeners=function(){return cre(this)};jr.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")HW(c,this,n);else for(var l=c.length,u=fre(c,l),r=0;r<l;++r)HW(u[r],this,n);return!0};function lre(t,e,n,r){var s,i,o;if(yP(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=cre(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,i2e(a)}return t}jr.prototype.addListener=function(e,n){return lre(this,e,n,!1)};jr.prototype.on=jr.prototype.addListener;jr.prototype.prependListener=function(e,n){return lre(this,e,n,!0)};function o2e(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ure(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=o2e.bind(r);return s.listener=n,r.wrapFn=s,s}jr.prototype.once=function(e,n){return yP(n),this.on(e,ure(this,e,n)),this};jr.prototype.prependOnceListener=function(e,n){return yP(n),this.prependListener(e,ure(this,e,n)),this};jr.prototype.removeListener=function(e,n){var r,s,i,o,a;if(yP(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():a2e(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};jr.prototype.off=jr.prototype.removeListener;jr.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function dre(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?c2e(s):fre(s,s.length)}jr.prototype.listeners=function(e){return dre(this,e,!0)};jr.prototype.rawListeners=function(e){return dre(this,e,!1)};jr.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):hre.call(t,e)};jr.prototype.listenerCount=hre;function hre(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}jr.prototype.eventNames=function(){return this._eventsCount>0?pT(this._events):[]};function fre(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function a2e(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function c2e(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function l2e(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}pre(t,e,i,{once:!0}),e!=="error"&&u2e(t,s,{once:!0})})}function u2e(t,e,n){typeof t.on=="function"&&pre(t,"error",e,n)}function pre(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Kl=l4.exports;const u4=ch(Kl);var je={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var xU=function(t,e){return xU=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},xU(t,e)};function d2e(t,e){xU(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var TU=function(){return TU=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},TU.apply(this,arguments)};function h2e(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function f2e(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function p2e(t,e){return function(n,r){e(n,r,t)}}function g2e(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function m2e(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function y2e(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function w2e(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function b2e(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function RU(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function gre(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function v2e(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(gre(arguments[e]));return t}function E2e(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function XA(t){return this instanceof XA?(this.v=t,this):new XA(t)}function C2e(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof XA?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function _2e(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:XA(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function A2e(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof RU=="function"?RU(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function S2e(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function I2e(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function N2e(t){return t&&t.__esModule?t:{default:t}}function x2e(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function T2e(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const R2e=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return TU},__asyncDelegator:_2e,__asyncGenerator:C2e,__asyncValues:A2e,__await:XA,__awaiter:m2e,__classPrivateFieldGet:x2e,__classPrivateFieldSet:T2e,__createBinding:w2e,__decorate:f2e,__exportStar:b2e,__extends:d2e,__generator:y2e,__importDefault:N2e,__importStar:I2e,__makeTemplateObject:S2e,__metadata:g2e,__param:p2e,__read:gre,__rest:h2e,__spread:v2e,__spreadArrays:E2e,__values:RU},Symbol.toStringTag,{value:"Module"})),wP=aI(R2e);var i3={},w1={},qW;function k2e(){if(qW)return w1;qW=1,Object.defineProperty(w1,"__esModule",{value:!0}),w1.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return w1.delay=t,w1}var Bm={},o3={},Lm={},VW;function P2e(){return VW||(VW=1,Object.defineProperty(Lm,"__esModule",{value:!0}),Lm.ONE_THOUSAND=Lm.ONE_HUNDRED=void 0,Lm.ONE_HUNDRED=100,Lm.ONE_THOUSAND=1e3),Lm}var a3={},KW;function O2e(){return KW||(KW=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(a3)),a3}var YW;function mre(){return YW||(YW=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=wP;e.__exportStar(P2e(),t),e.__exportStar(O2e(),t)}(o3)),o3}var QW;function D2e(){if(QW)return Bm;QW=1,Object.defineProperty(Bm,"__esModule",{value:!0}),Bm.fromMiliseconds=Bm.toMiliseconds=void 0;const t=mre();function e(r){return r*t.ONE_THOUSAND}Bm.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Bm.fromMiliseconds=n,Bm}var JW;function M2e(){return JW||(JW=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=wP;e.__exportStar(k2e(),t),e.__exportStar(D2e(),t)}(i3)),i3}var Fw={},ZW;function B2e(){if(ZW)return Fw;ZW=1,Object.defineProperty(Fw,"__esModule",{value:!0}),Fw.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Fw.Watch=t,Fw.default=t,Fw}var c3={},b1={},XW;function L2e(){if(XW)return b1;XW=1,Object.defineProperty(b1,"__esModule",{value:!0}),b1.IWatch=void 0;class t{}return b1.IWatch=t,b1}var ez;function U2e(){return ez||(ez=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),wP.__exportStar(L2e(),t)}(c3)),c3}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=wP;e.__exportStar(M2e(),t),e.__exportStar(B2e(),t),e.__exportStar(U2e(),t),e.__exportStar(mre(),t)})(je);class fw{}let $2e=class extends fw{constructor(e){super()}};const tz=je.FIVE_SECONDS,pw={pulse:"heartbeat_pulse"};let F2e=class yre extends $2e{constructor(e){super(e),this.events=new Kl.EventEmitter,this.interval=tz,this.interval=(e==null?void 0:e.interval)||tz}static async init(e){const n=new yre(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),je.toMiliseconds(this.interval))}pulse(){this.events.emit(pw.pulse)}};const j2e=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,W2e=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,z2e=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function H2e(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){G2e(t);return}return e}function G2e(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function ox(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!z2e.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(j2e.test(t)||W2e.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,H2e)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function gw(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function wre(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=gw(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let l3;function FI(){return l3||(l3=wre("keyval-store","keyval")),l3}function nz(t,e=FI()){return e("readonly",n=>gw(n.get(t)))}function q2e(t,e,n=FI()){return n("readwrite",r=>(r.put(e,t),gw(r.transaction)))}function V2e(t,e=FI()){return e("readwrite",n=>(n.delete(t),gw(n.transaction)))}function K2e(t=FI()){return t("readwrite",e=>(e.clear(),gw(e.transaction)))}function Y2e(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},gw(t.transaction)}function Q2e(t=FI()){return t("readonly",e=>{if(e.getAllKeys)return gw(e.getAllKeys());const n=[];return Y2e(e,r=>n.push(r.key)).then(()=>n)})}const J2e=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),Z2e=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function $0(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return Z2e(t)}catch{return t}}function Pf(t){return typeof t=="string"?t:J2e(t)||""}function X2e(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var ePe=tPe;function tPe(t,e,n){var r=n&&n.stringify||X2e,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const rz=ePe;var mb=Yd;const eS=dPe().console||{},nPe={mapHttpRequest:ax,mapHttpResponse:ax,wrapRequestSerializer:u3,wrapResponseSerializer:u3,wrapErrorSerializer:u3,req:ax,res:ax,err:aPe};function rPe(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Yd(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||eS;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=rPe(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=tS),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:cPe(t)};c.levels=Yd.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=tS,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=kU());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,jw(l,c,"error","log"),jw(l,c,"fatal","error"),jw(l,c,"warn","error"),jw(l,c,"info","log"),jw(l,c,"debug","log"),jw(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const m=g.serializers;if(s&&m){var y=Object.assign({},r,m),w=t.browser.serialize===!0?Object.keys(y):s;delete p.serializers,bP([p],w,y,this._stdErrSerialize)}function C(N){this._childLevel=(N._childLevel|0)+1,this.error=Ww(N,p,"error"),this.fatal=Ww(N,p,"fatal"),this.warn=Ww(N,p,"warn"),this.info=Ww(N,p,"info"),this.debug=Ww(N,p,"debug"),this.trace=Ww(N,p,"trace"),y&&(this.serializers=y,this._serialize=w),e&&(this._logEvent=kU([].concat(N._logEvent.bindings,p)))}return C.prototype=this,new C(this)}return c}Yd.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Yd.stdSerializers=nPe;Yd.stdTimeFunctions=Object.assign({},{nullTime:bre,epochTime:vre,unixTime:lPe,isoTime:uPe});function jw(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?tS:s[n]?s[n]:eS[n]||eS[r]||tS,sPe(t,e,n)}function sPe(t,e,n){!t.transmit&&e[n]===tS||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===eS?eS:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&bP(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,iPe(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Yd.levels.values[l],d=Yd.levels.values[n];if(d<u)return;oPe(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:Yd.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function iPe(t,e,n,r){t._serialize&&bP(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=Yd.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?rz(s.shift(),s):void 0}else typeof i=="string"&&(i=rz(s.shift(),s));return i!==void 0&&(o.msg=i),o}function bP(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Yd.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Ww(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function oPe(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;bP(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=kU(c)}function kU(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function aPe(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function cPe(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?bre:vre}function ax(){return{}}function u3(t){return t}function tS(){}function bre(){return!1}function vre(){return Date.now()}function lPe(){return Math.round(Date.now()/1e3)}function uPe(){return new Date(Date.now()).toISOString()}function dPe(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const jI=ch(mb),hPe={level:"info"},WI="custom_context",d4=1e3*1024;let fPe=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},sz=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new fPe(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},Ere=class{constructor(e,n=d4){this.level=e??"error",this.levelValue=mb.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new sz(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===mb.levels.values.error?console.error(e):n===mb.levels.values.warn?console.warn(e):n===mb.levels.values.debug?console.debug(e):n===mb.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Pf({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new sz(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Pf({extraMetadata:e})),new Blob(n,{type:"application/json"})}},pPe=class{constructor(e,n=d4){this.baseChunkLogger=new Ere(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},gPe=class{constructor(e,n=d4){this.baseChunkLogger=new Ere(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var mPe=Object.defineProperty,yPe=Object.defineProperties,wPe=Object.getOwnPropertyDescriptors,iz=Object.getOwnPropertySymbols,bPe=Object.prototype.hasOwnProperty,vPe=Object.prototype.propertyIsEnumerable,oz=(t,e,n)=>e in t?mPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,QR=(t,e)=>{for(var n in e||(e={}))bPe.call(e,n)&&oz(t,n,e[n]);if(iz)for(var n of iz(e))vPe.call(e,n)&&oz(t,n,e[n]);return t},JR=(t,e)=>yPe(t,wPe(e));function mw(t){return JR(QR({},t),{level:(t==null?void 0:t.level)||hPe.level})}function EPe(t,e=WI){return t[e]||""}function CPe(t,e,n=WI){return t[n]=e,t}function fc(t,e=WI){let n="";return typeof t.bindings>"u"?n=EPe(t,e):n=t.bindings().context||"",n}function _Pe(t,e,n=WI){const r=fc(t,n);return r.trim()?`${r}/${e}`:e}function bo(t,e,n=WI){const r=_Pe(t,e,n),s=t.child({context:r});return CPe(s,r,n)}function APe(t){var e,n;const r=new pPe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:jI(JR(QR({},t.opts),{level:"trace",browser:JR(QR({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function SPe(t){var e;const n=new gPe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:jI(JR(QR({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function vP(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?APe(t):SPe(t)}function IPe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Cre(t,...e){if(!IPe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function az(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function NPe(t,e){Cre(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const zw=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const d3=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function xPe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function _re(t){return typeof t=="string"&&(t=xPe(t)),Cre(t),t}let TPe=class{clone(){return this._cloneInto()}};function RPe(t){const e=r=>t().update(_re(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Are(t=32){if(zw&&typeof zw.getRandomValues=="function")return zw.getRandomValues(new Uint8Array(t));if(zw&&typeof zw.randomBytes=="function")return zw.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function kPe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let PPe=class extends TPe{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=d3(this.buffer)}update(e){az(this);const{view:n,buffer:r,blockLen:s}=this;e=_re(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=d3(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){az(this),NPe(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;kPe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=d3(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const cx=BigInt(2**32-1),PU=BigInt(32);function Sre(t,e=!1){return e?{h:Number(t&cx),l:Number(t>>PU&cx)}:{h:Number(t>>PU&cx)|0,l:Number(t&cx)|0}}function OPe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=Sre(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const DPe=(t,e)=>BigInt(t>>>0)<<PU|BigInt(e>>>0),MPe=(t,e,n)=>t>>>n,BPe=(t,e,n)=>t<<32-n|e>>>n,LPe=(t,e,n)=>t>>>n|e<<32-n,UPe=(t,e,n)=>t<<32-n|e>>>n,$Pe=(t,e,n)=>t<<64-n|e>>>n-32,FPe=(t,e,n)=>t>>>n-32|e<<64-n,jPe=(t,e)=>e,WPe=(t,e)=>t,zPe=(t,e,n)=>t<<n|e>>>32-n,HPe=(t,e,n)=>e<<n|t>>>32-n,GPe=(t,e,n)=>e<<n-32|t>>>64-n,qPe=(t,e,n)=>t<<n-32|e>>>64-n;function VPe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const KPe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),YPe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,QPe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),JPe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,ZPe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),XPe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Nn={fromBig:Sre,split:OPe,toBig:DPe,shrSH:MPe,shrSL:BPe,rotrSH:LPe,rotrSL:UPe,rotrBH:$Pe,rotrBL:FPe,rotr32H:jPe,rotr32L:WPe,rotlSH:zPe,rotlSL:HPe,rotlBH:GPe,rotlBL:qPe,add:VPe,add3L:KPe,add3H:YPe,add4L:QPe,add4H:JPe,add5H:XPe,add5L:ZPe},[eOe,tOe]=Nn.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),cp=new Uint32Array(80),lp=new Uint32Array(80);let nOe=class extends PPe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:m}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,m]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=m|0}process(e,n){for(let C=0;C<16;C++,n+=4)cp[C]=e.getUint32(n),lp[C]=e.getUint32(n+=4);for(let C=16;C<80;C++){const N=cp[C-15]|0,I=lp[C-15]|0,k=Nn.rotrSH(N,I,1)^Nn.rotrSH(N,I,8)^Nn.shrSH(N,I,7),P=Nn.rotrSL(N,I,1)^Nn.rotrSL(N,I,8)^Nn.shrSL(N,I,7),U=cp[C-2]|0,M=lp[C-2]|0,W=Nn.rotrSH(U,M,19)^Nn.rotrBH(U,M,61)^Nn.shrSH(U,M,6),j=Nn.rotrSL(U,M,19)^Nn.rotrBL(U,M,61)^Nn.shrSL(U,M,6),K=Nn.add4L(P,j,lp[C-7],lp[C-16]),$=Nn.add4H(K,k,W,cp[C-7],cp[C-16]);cp[C]=$|0,lp[C]=K|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:m,Hh:y,Hl:w}=this;for(let C=0;C<80;C++){const N=Nn.rotrSH(d,h,14)^Nn.rotrSH(d,h,18)^Nn.rotrBH(d,h,41),I=Nn.rotrSL(d,h,14)^Nn.rotrSL(d,h,18)^Nn.rotrBL(d,h,41),k=d&f^~d&g,P=h&p^~h&m,U=Nn.add5L(w,I,P,tOe[C],lp[C]),M=Nn.add5H(U,y,N,k,eOe[C],cp[C]),W=U|0,j=Nn.rotrSH(r,s,28)^Nn.rotrBH(r,s,34)^Nn.rotrBH(r,s,39),K=Nn.rotrSL(r,s,28)^Nn.rotrBL(r,s,34)^Nn.rotrBL(r,s,39),$=r&i^r&a^i&a,v=s&o^s&c^o&c;y=g|0,w=m|0,g=f|0,m=p|0,f=d|0,p=h|0,{h:d,l:h}=Nn.add(l|0,u|0,M|0,W|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const E=Nn.add3L(W,K,v);r=Nn.add3H(E,M,j,$),s=E|0}({h:r,l:s}=Nn.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Nn.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Nn.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Nn.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Nn.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Nn.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:m}=Nn.add(this.Gh|0,this.Gl|0,g|0,m|0),{h:y,l:w}=Nn.add(this.Hh|0,this.Hl|0,y|0,w|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,m,y,w)}roundClean(){cp.fill(0),lp.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const rOe=RPe(()=>new nOe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const h4=BigInt(0),Ire=BigInt(1),sOe=BigInt(2);function f4(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function p4(t){if(!f4(t))throw new Error("Uint8Array expected")}function h3(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const iOe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function g4(t){p4(t);let e="";for(let n=0;n<t.length;n++)e+=iOe[t[n]];return e}function Nre(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?h4:BigInt("0x"+t)}const Ch={_0:48,_9:57,A:65,F:70,a:97,f:102};function cz(t){if(t>=Ch._0&&t<=Ch._9)return t-Ch._0;if(t>=Ch.A&&t<=Ch.F)return t-(Ch.A-10);if(t>=Ch.a&&t<=Ch.f)return t-(Ch.a-10)}function xre(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=cz(t.charCodeAt(i)),a=cz(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function oOe(t){return Nre(g4(t))}function gT(t){return p4(t),Nre(g4(Uint8Array.from(t).reverse()))}function Tre(t,e){return xre(t.toString(16).padStart(e*2,"0"))}function OU(t,e){return Tre(t,e).reverse()}function _h(t,e,n){let r;if(typeof e=="string")try{r=xre(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(f4(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function lz(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];p4(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const f3=t=>typeof t=="bigint"&&h4<=t;function aOe(t,e,n){return f3(t)&&f3(e)&&f3(n)&&e<=t&&t<n}function v1(t,e,n,r){if(!aOe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function cOe(t){let e;for(e=0;t>h4;t>>=Ire,e+=1);return e}const lOe=t=>(sOe<<BigInt(t-1))-Ire,uOe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||f4(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function m4(t,e,n={}){const r=(s,i,o)=>{const a=uOe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function uz(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const ji=BigInt(0),ni=BigInt(1),sy=BigInt(2),dOe=BigInt(3),DU=BigInt(4),dz=BigInt(5),hz=BigInt(8);function wi(t,e){const n=t%e;return n>=ji?n:e+n}function hOe(t,e,n){if(e<ji)throw new Error("invalid exponent, negatives unsupported");if(n<=ji)throw new Error("invalid modulus");if(n===ni)return ji;let r=ni;for(;e>ji;)e&ni&&(r=r*t%n),t=t*t%n,e>>=ni;return r}function sd(t,e,n){let r=t;for(;e-- >ji;)r*=r,r%=n;return r}function fz(t,e){if(t===ji)throw new Error("invert: expected non-zero number");if(e<=ji)throw new Error("invert: expected positive modulus, got "+e);let n=wi(t,e),r=e,s=ji,i=ni;for(;n!==ji;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==ni)throw new Error("invert: does not exist");return wi(s,e)}function fOe(t){const e=(t-ni)/sy;let n,r,s;for(n=t-ni,r=0;n%sy===ji;n/=sy,r++);for(s=sy;s<t&&hOe(s,e,t)!==t-ni;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+ni)/DU;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+ni)/sy;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,ni<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function pOe(t){if(t%DU===dOe){const e=(t+ni)/DU;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%hz===dz){const e=(t-dz)/hz;return function(n,r){const s=n.mul(r,sy),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,sy),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return fOe(t)}const gOe=(t,e)=>(wi(t,e)&ni)===ni,mOe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function yOe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=mOe.reduce((r,s)=>(r[s]="function",r),e);return m4(t,n)}function wOe(t,e,n){if(n<ji)throw new Error("invalid exponent, negatives unsupported");if(n===ji)return t.ONE;if(n===ni)return e;let r=t.ONE,s=e;for(;n>ji;)n&ni&&(r=t.mul(r,s)),s=t.sqr(s),n>>=ni;return r}function bOe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function Rre(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function kre(t,e,n=!1,r={}){if(t<=ji)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=Rre(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:lOe(s),ZERO:ji,ONE:ni,create:c=>wi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ji<=c&&c<t},is0:c=>c===ji,isOdd:c=>(c&ni)===ni,neg:c=>wi(-c,t),eql:(c,l)=>c===l,sqr:c=>wi(c*c,t),add:(c,l)=>wi(c+l,t),sub:(c,l)=>wi(c-l,t),mul:(c,l)=>wi(c*l,t),pow:(c,l)=>wOe(a,c,l),div:(c,l)=>wi(c*fz(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>fz(c,t),sqrt:r.sqrt||(c=>(o||(o=pOe(t)),o(a,c))),invertBatch:c=>bOe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?OU(c,i):Tre(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?gT(c):oOe(c)}});return Object.freeze(a)}const pz=BigInt(0),lx=BigInt(1);function p3(t,e){const n=e.negate();return t?n:e}function Pre(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function g3(t,e){Pre(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function vOe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function EOe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const m3=new WeakMap,Ore=new WeakMap;function y3(t){return Ore.get(t)||1}function COe(t,e){return{constTimeNegate:p3,hasPrecomputes(n){return y3(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>pz;)r&lx&&(s=s.add(i)),i=i.double(),r>>=lx;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=g3(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=g3(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=lx);const g=f,m=f+Math.abs(p)-1,y=h%2!==0,w=p<0;p===0?c=c.add(p3(y,r[g])):a=a.add(p3(w,r[m]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=g3(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===pz)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=lx),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=m3.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&m3.set(r,s(i))),i},wNAFCached(n,r,s){const i=y3(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=y3(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){Pre(r,e),Ore.set(n,r),m3.delete(n)}}}function _Oe(t,e,n,r){if(vOe(n,t),EOe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=cOe(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function AOe(t){return yOe(t.Fp),m4(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Rre(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const iu=BigInt(0),Ia=BigInt(1),ux=BigInt(2),SOe=BigInt(8),IOe={zip215:!0};function NOe(t){const e=AOe(t);return m4(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function xOe(t){const e=NOe(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=ux<<BigInt(a*8)-Ia,u=n.create,d=kre(e.n,e.nBitLength),h=e.uvRatio||((E,_)=>{try{return{isValid:!0,value:n.sqrt(E*n.inv(_))}}catch{return{isValid:!1,value:iu}}}),f=e.adjustScalarBytes||(E=>E),p=e.domain||((E,_,O)=>{if(h3("phflag",O),_.length||O)throw new Error("Contexts/pre-hash are not supported");return E});function g(E,_){v1("coordinate "+E,_,iu,l)}function m(E){if(!(E instanceof C))throw new Error("ExtendedPoint expected")}const y=uz((E,_)=>{const{ex:O,ey:x,ez:B}=E,F=E.is0();_==null&&(_=F?SOe:n.inv(B));const L=u(O*_),A=u(x*_),H=u(B*_);if(F)return{x:iu,y:Ia};if(H!==Ia)throw new Error("invZ was invalid");return{x:L,y:A}}),w=uz(E=>{const{a:_,d:O}=e;if(E.is0())throw new Error("bad point: ZERO");const{ex:x,ey:B,ez:F,et:L}=E,A=u(x*x),H=u(B*B),re=u(F*F),se=u(re*re),ge=u(A*_),ae=u(re*u(ge+H)),fe=u(se+u(O*u(A*H)));if(ae!==fe)throw new Error("bad point: equation left != right (1)");const ye=u(x*B),ve=u(F*L);if(ye!==ve)throw new Error("bad point: equation left != right (2)");return!0});class C{constructor(_,O,x,B){this.ex=_,this.ey=O,this.ez=x,this.et=B,g("x",_),g("y",O),g("z",x),g("t",B),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(_){if(_ instanceof C)throw new Error("extended point not allowed");const{x:O,y:x}=_||{};return g("x",O),g("y",x),new C(O,x,Ia,u(O*x))}static normalizeZ(_){const O=n.invertBatch(_.map(x=>x.ez));return _.map((x,B)=>x.toAffine(O[B])).map(C.fromAffine)}static msm(_,O){return _Oe(C,d,_,O)}_setWindowSize(_){k.setWindowSize(this,_)}assertValidity(){w(this)}equals(_){m(_);const{ex:O,ey:x,ez:B}=this,{ex:F,ey:L,ez:A}=_,H=u(O*A),re=u(F*B),se=u(x*A),ge=u(L*B);return H===re&&se===ge}is0(){return this.equals(C.ZERO)}negate(){return new C(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:_}=e,{ex:O,ey:x,ez:B}=this,F=u(O*O),L=u(x*x),A=u(ux*u(B*B)),H=u(_*F),re=O+x,se=u(u(re*re)-F-L),ge=H+L,ae=ge-A,fe=H-L,ye=u(se*ae),ve=u(ge*fe),_e=u(se*fe),Se=u(ae*ge);return new C(ye,ve,Se,_e)}add(_){m(_);const{a:O,d:x}=e,{ex:B,ey:F,ez:L,et:A}=this,{ex:H,ey:re,ez:se,et:ge}=_;if(O===BigInt(-1)){const Qn=u((F-B)*(re+H)),Bt=u((F+B)*(re-H)),ze=u(Bt-Qn);if(ze===iu)return this.double();const Jn=u(L*ux*ge),qt=u(A*ux*se),qe=qt+Jn,un=Bt+Qn,In=qt-Jn,z=u(qe*ze),T=u(un*In),D=u(qe*In),Y=u(ze*un);return new C(z,T,Y,D)}const ae=u(B*H),fe=u(F*re),ye=u(A*x*ge),ve=u(L*se),_e=u((B+F)*(H+re)-ae-fe),Se=ve-ye,Re=ve+ye,xe=u(fe-O*ae),Fe=u(_e*Se),Ut=u(Re*xe),at=u(_e*xe),wn=u(Se*Re);return new C(Fe,Ut,wn,at)}subtract(_){return this.add(_.negate())}wNAF(_){return k.wNAFCached(this,_,C.normalizeZ)}multiply(_){const O=_;v1("scalar",O,Ia,r);const{p:x,f:B}=this.wNAF(O);return C.normalizeZ([x,B])[0]}multiplyUnsafe(_,O=C.ZERO){const x=_;return v1("scalar",x,iu,r),x===iu?I:this.is0()||x===Ia?this:k.wNAFCachedUnsafe(this,x,C.normalizeZ,O)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return k.unsafeLadder(this,r).is0()}toAffine(_){return y(this,_)}clearCofactor(){const{h:_}=e;return _===Ia?this:this.multiplyUnsafe(_)}static fromHex(_,O=!1){const{d:x,a:B}=e,F=n.BYTES;_=_h("pointHex",_,F),h3("zip215",O);const L=_.slice(),A=_[F-1];L[F-1]=A&-129;const H=gT(L),re=O?l:n.ORDER;v1("pointHex.y",H,iu,re);const se=u(H*H),ge=u(se-Ia),ae=u(x*se-B);let{isValid:fe,value:ye}=h(ge,ae);if(!fe)throw new Error("Point.fromHex: invalid y coordinate");const ve=(ye&Ia)===Ia,_e=(A&128)!==0;if(!O&&ye===iu&&_e)throw new Error("Point.fromHex: x=0 and x_0=1");return _e!==ve&&(ye=u(-ye)),C.fromAffine({x:ye,y:H})}static fromPrivateKey(_){return M(_).point}toRawBytes(){const{x:_,y:O}=this.toAffine(),x=OU(O,n.BYTES);return x[x.length-1]|=_&Ia?128:0,x}toHex(){return g4(this.toRawBytes())}}C.BASE=new C(e.Gx,e.Gy,Ia,u(e.Gx*e.Gy)),C.ZERO=new C(iu,Ia,Ia,iu);const{BASE:N,ZERO:I}=C,k=COe(C,a*8);function P(E){return wi(E,r)}function U(E){return P(gT(E))}function M(E){const _=n.BYTES;E=_h("private key",E,_);const O=_h("hashed private key",i(E),2*_),x=f(O.slice(0,_)),B=O.slice(_,2*_),F=U(x),L=N.multiply(F),A=L.toRawBytes();return{head:x,prefix:B,scalar:F,point:L,pointBytes:A}}function W(E){return M(E).pointBytes}function j(E=new Uint8Array,..._){const O=lz(..._);return U(i(p(O,_h("context",E),!!s)))}function K(E,_,O={}){E=_h("message",E),s&&(E=s(E));const{prefix:x,scalar:B,pointBytes:F}=M(_),L=j(O.context,x,E),A=N.multiply(L).toRawBytes(),H=j(O.context,A,F,E),re=P(L+H*B);v1("signature.s",re,iu,r);const se=lz(A,OU(re,n.BYTES));return _h("result",se,n.BYTES*2)}const $=IOe;function v(E,_,O,x=$){const{context:B,zip215:F}=x,L=n.BYTES;E=_h("signature",E,2*L),_=_h("message",_),O=_h("publicKey",O,L),F!==void 0&&h3("zip215",F),s&&(_=s(_));const A=gT(E.slice(L,2*L));let H,re,se;try{H=C.fromHex(O,F),re=C.fromHex(E.slice(0,L),F),se=N.multiplyUnsafe(A)}catch{return!1}if(!F&&H.isSmallOrder())return!1;const ge=j(B,re.toRawBytes(),H.toRawBytes(),_);return re.add(H.multiplyUnsafe(ge)).subtract(se).clearCofactor().equals(C.ZERO)}return N._setWindowSize(8),{CURVE:e,getPublicKey:W,sign:K,verify:v,ExtendedPoint:C,utils:{getExtendedPublicKey:M,randomPrivateKey:()=>o(n.BYTES),precompute(E=8,_=C.BASE){return _._setWindowSize(E),_.multiply(BigInt(3)),_}}}}BigInt(0),BigInt(1);const y4=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),gz=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const TOe=BigInt(1),mz=BigInt(2);BigInt(3);const ROe=BigInt(5),kOe=BigInt(8);function POe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=y4,o=t*t%i*t%i,a=sd(o,mz,i)*o%i,c=sd(a,TOe,i)*t%i,l=sd(c,ROe,i)*c%i,u=sd(l,e,i)*l%i,d=sd(u,n,i)*u%i,h=sd(d,r,i)*d%i,f=sd(h,s,i)*h%i,p=sd(f,s,i)*h%i,g=sd(p,e,i)*l%i;return{pow_p_5_8:sd(g,mz,i)*t%i,b2:o}}function OOe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function DOe(t,e){const n=y4,r=wi(e*e*e,n),s=wi(r*r*e,n),i=POe(t*s).pow_p_5_8;let o=wi(t*r*i,n);const a=wi(e*o*o,n),c=o,l=wi(o*gz,n),u=a===t,d=a===wi(-t,n),h=a===wi(-t*gz,n);return u&&(o=c),(d||h)&&(o=l),gOe(o,n)&&(o=wi(-o,n)),{isValid:u||d,value:o}}const MOe=kre(y4,void 0,!0),BOe={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:MOe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:kOe,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:rOe,randomBytes:Are,adjustScalarBytes:OOe,uvRatio:DOe},Dre=xOe(BOe),LOe="EdDSA",UOe="JWT",ZR=".",EP="base64url",Mre="utf8",Bre="utf8",$Oe=":",FOe="did",jOe="key",yz="base58btc",WOe="z",zOe="K36",HOe=32;function w4(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Lre(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?w4(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Ure(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=Lre(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return w4(n)}function GOe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,y=0,w=p.length;y!==w&&p[y]===0;)y++,g++;for(var C=(w-y)*u+1>>>0,N=new Uint8Array(C);y!==w;){for(var I=p[y],k=0,P=C-1;(I!==0||k<m)&&P!==-1;P--,k++)I+=256*N[P]>>>0,N[P]=I%a>>>0,I=I/a>>>0;if(I!==0)throw new Error("Non-zero carry");m=k,y++}for(var U=C-m;U!==C&&N[U]===0;)U++;for(var M=c.repeat(g);U<C;++U)M+=t.charAt(N[U]);return M}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,y=0;p[g]===c;)m++,g++;for(var w=(p.length-g)*l+1>>>0,C=new Uint8Array(w);p[g];){var N=n[p.charCodeAt(g)];if(N===255)return;for(var I=0,k=w-1;(N!==0||I<y)&&k!==-1;k--,I++)N+=a*C[k]>>>0,C[k]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");y=I,g++}if(p[g]!==" "){for(var P=w-y;P!==w&&C[P]===0;)P++;for(var U=new Uint8Array(m+(w-P)),M=m;P!==w;)U[M++]=C[P++];return U}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var qOe=GOe,VOe=qOe;const $re=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},KOe=t=>new TextEncoder().encode(t),YOe=t=>new TextDecoder().decode(t);let QOe=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},JOe=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Fre(this,e)}},ZOe=class{constructor(e){this.decoders=e}or(e){return Fre(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const Fre=(t,e)=>new ZOe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let XOe=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new QOe(e,n,r),this.decoder=new JOe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const CP=({name:t,prefix:e,encode:n,decode:r})=>new XOe(t,e,n,r),zI=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=VOe(n,e);return CP({prefix:t,name:e,encode:r,decode:i=>$re(s(i))})},eDe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},tDe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},vo=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>CP({prefix:e,name:t,encode(s){return tDe(s,r,n)},decode(s){return eDe(s,r,n,t)}}),nDe=CP({prefix:"\0",name:"identity",encode:t=>YOe(t),decode:t=>KOe(t)});var rDe=Object.freeze({__proto__:null,identity:nDe});const sDe=vo({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var iDe=Object.freeze({__proto__:null,base2:sDe});const oDe=vo({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var aDe=Object.freeze({__proto__:null,base8:oDe});const cDe=zI({prefix:"9",name:"base10",alphabet:"0123456789"});var lDe=Object.freeze({__proto__:null,base10:cDe});const uDe=vo({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),dDe=vo({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var hDe=Object.freeze({__proto__:null,base16:uDe,base16upper:dDe});const fDe=vo({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),pDe=vo({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),gDe=vo({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),mDe=vo({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),yDe=vo({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),wDe=vo({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),bDe=vo({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),vDe=vo({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),EDe=vo({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var CDe=Object.freeze({__proto__:null,base32:fDe,base32upper:pDe,base32pad:gDe,base32padupper:mDe,base32hex:yDe,base32hexupper:wDe,base32hexpad:bDe,base32hexpadupper:vDe,base32z:EDe});const _De=zI({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ADe=zI({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var SDe=Object.freeze({__proto__:null,base36:_De,base36upper:ADe});const IDe=zI({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),NDe=zI({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var xDe=Object.freeze({__proto__:null,base58btc:IDe,base58flickr:NDe});const TDe=vo({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),RDe=vo({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),kDe=vo({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),PDe=vo({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var ODe=Object.freeze({__proto__:null,base64:TDe,base64pad:RDe,base64url:kDe,base64urlpad:PDe});const jre=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),DDe=jre.reduce((t,e,n)=>(t[n]=e,t),[]),MDe=jre.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function BDe(t){return t.reduce((e,n)=>(e+=DDe[n],e),"")}function LDe(t){const e=[];for(const n of t){const r=MDe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const UDe=CP({prefix:"🚀",name:"base256emoji",encode:BDe,decode:LDe});var $De=Object.freeze({__proto__:null,base256emoji:UDe}),FDe=Wre,wz=128,jDe=-128,WDe=Math.pow(2,31);function Wre(t,e,n){e=e||[],n=n||0;for(var r=n;t>=WDe;)e[n++]=t&255|wz,t/=128;for(;t&jDe;)e[n++]=t&255|wz,t>>>=7;return e[n]=t|0,Wre.bytes=n-r+1,e}var zDe=MU,HDe=128,bz=127;function MU(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw MU.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&bz)<<s:(o&bz)*Math.pow(2,s),s+=7}while(o>=HDe);return MU.bytes=i-r,n}var GDe=Math.pow(2,7),qDe=Math.pow(2,14),VDe=Math.pow(2,21),KDe=Math.pow(2,28),YDe=Math.pow(2,35),QDe=Math.pow(2,42),JDe=Math.pow(2,49),ZDe=Math.pow(2,56),XDe=Math.pow(2,63),e3e=function(t){return t<GDe?1:t<qDe?2:t<VDe?3:t<KDe?4:t<YDe?5:t<QDe?6:t<JDe?7:t<ZDe?8:t<XDe?9:10},t3e={encode:FDe,decode:zDe,encodingLength:e3e},zre=t3e;const vz=(t,e,n=0)=>(zre.encode(t,e,n),e),Ez=t=>zre.encodingLength(t),BU=(t,e)=>{const n=e.byteLength,r=Ez(t),s=r+Ez(n),i=new Uint8Array(s+n);return vz(t,i,0),vz(n,i,r),i.set(e,s),new n3e(t,n,e,i)};let n3e=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const Hre=({name:t,code:e,encode:n})=>new r3e(t,e,n);let r3e=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?BU(this.code,n):n.then(r=>BU(this.code,r))}else throw Error("Unknown type, must be binary type")}};const Gre=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),s3e=Hre({name:"sha2-256",code:18,encode:Gre("SHA-256")}),i3e=Hre({name:"sha2-512",code:19,encode:Gre("SHA-512")});var o3e=Object.freeze({__proto__:null,sha256:s3e,sha512:i3e});const qre=0,a3e="identity",Vre=$re,c3e=t=>BU(qre,Vre(t)),l3e={code:qre,name:a3e,encode:Vre,digest:c3e};var u3e=Object.freeze({__proto__:null,identity:l3e});new TextEncoder,new TextDecoder;const Cz={...rDe,...iDe,...aDe,...lDe,...hDe,...CDe,...SDe,...xDe,...ODe,...$De};({...o3e,...u3e});function Kre(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const _z=Kre("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),w3=Kre("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Lre(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),Yre={utf8:_z,"utf-8":_z,hex:Cz.base16,latin1:w3,ascii:w3,binary:w3,...Cz};function _P(t,e="utf8"){const n=Yre[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function DC(t,e="utf8"){const n=Yre[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?w4(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function Az(t){return $0(_P(DC(t,EP),Mre))}function XR(t){return _P(DC(Pf(t),Mre),EP)}function Qre(t){const e=DC(zOe,yz),n=WOe+_P(Ure([e,t]),yz);return[FOe,jOe,n].join($Oe)}function d3e(t){return _P(t,EP)}function h3e(t){return DC(t,EP)}function f3e(t){return DC([XR(t.header),XR(t.payload)].join(ZR),Bre)}function p3e(t){return[XR(t.header),XR(t.payload),d3e(t.signature)].join(ZR)}function LU(t){const e=t.split(ZR),n=Az(e[0]),r=Az(e[1]),s=h3e(e[2]),i=DC(e.slice(0,2).join(ZR),Bre);return{header:n,payload:r,signature:s,data:i}}function Sz(t=Are(HOe)){const e=Dre.getPublicKey(t);return{secretKey:Ure([t,e]),publicKey:e}}async function g3e(t,e,n,r,s=je.fromMiliseconds(Date.now())){const i={alg:LOe,typ:UOe},o=Qre(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=f3e({header:i,payload:c}),u=Dre.sign(l,r.secretKey.slice(0,32));return p3e({header:i,payload:c,signature:u})}var Iz=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},m3e=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),y3e=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),w3e=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),b3e=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),v3e=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),E3e=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,C3e=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Nz=3,_3e=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",E3e]],xz=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function A3e(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new v3e:typeof navigator<"u"?I3e(navigator.userAgent):x3e()}function S3e(t){return t!==""&&_3e.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function I3e(t){var e=S3e(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new b3e;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<Nz&&(s=Iz(Iz([],s,!0),T3e(Nz-s.length),!0)):s=[];var i=s.join("."),o=N3e(t),a=C3e.exec(t);return a&&a[1]?new w3e(n,i,o,a[1]):new m3e(n,i,o)}function N3e(t){for(var e=0,n=xz.length;e<n;e++){var r=xz[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function x3e(){var t=typeof process<"u"&&process.version;return t?new y3e(process.version.slice(1)):null}function T3e(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var ns={};Object.defineProperty(ns,"__esModule",{value:!0});ns.getLocalStorage=ns.getLocalStorageOrThrow=ns.getCrypto=ns.getCryptoOrThrow=Jre=ns.getLocation=ns.getLocationOrThrow=b4=ns.getNavigator=ns.getNavigatorOrThrow=F0=ns.getDocument=ns.getDocumentOrThrow=ns.getFromWindowOrThrow=ns.getFromWindow=void 0;function yw(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}ns.getFromWindow=yw;function MC(t){const e=yw(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}ns.getFromWindowOrThrow=MC;function R3e(){return MC("document")}ns.getDocumentOrThrow=R3e;function k3e(){return yw("document")}var F0=ns.getDocument=k3e;function P3e(){return MC("navigator")}ns.getNavigatorOrThrow=P3e;function O3e(){return yw("navigator")}var b4=ns.getNavigator=O3e;function D3e(){return MC("location")}ns.getLocationOrThrow=D3e;function M3e(){return yw("location")}var Jre=ns.getLocation=M3e;function B3e(){return MC("crypto")}ns.getCryptoOrThrow=B3e;function L3e(){return yw("crypto")}ns.getCrypto=L3e;function U3e(){return MC("localStorage")}ns.getLocalStorageOrThrow=U3e;function $3e(){return yw("localStorage")}ns.getLocalStorage=$3e;var v4={};Object.defineProperty(v4,"__esModule",{value:!0});var Zre=v4.getWindowMetadata=void 0;const Tz=ns;function F3e(){let t,e;try{t=Tz.getDocumentOrThrow(),e=Tz.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const m=p.getAttribute("href");if(m)if(m.toLowerCase().indexOf("https:")===-1&&m.toLowerCase().indexOf("http:")===-1&&m.indexOf("//")!==0){let y=e.protocol+"//"+e.host;if(m.indexOf("/")===0)y+=m;else{const w=e.pathname.split("/");w.pop();const C=w.join("/");y+=C+"/"+m}h.push(y)}else if(m.indexOf("//")===0){const y=e.protocol+m;h.push(y)}else h.push(m)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(m=>p.getAttribute(m)).filter(m=>m?d.includes(m):!1);if(g.length&&g){const m=p.getAttribute("content");if(m)return m}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}Zre=v4.getWindowMetadata=F3e;function j3e(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let w=l[h],C=0;for(let N=p-1;(w!==0||C<d)&&N!==-1;N--,C++)w+=256*g[N]>>>0,g[N]=w%n>>>0,w=w/n>>>0;if(w!==0)throw new Error("Non-zero carry");d=C,h++}let m=p-d;for(;m!==p&&g[m]===0;)m++;let y=r.repeat(u);for(;m<p;++m)y+=t.charAt(g[m]);return y}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const w=l.charCodeAt(u);if(w>255)return;let C=e[w];if(C===255)return;let N=0;for(let I=f-1;(C!==0||N<h)&&I!==-1;I--,N++)C+=n*p[I]>>>0,p[I]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");h=N,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const m=new Uint8Array(d+(f-g));let y=d;for(;g!==f;)m[y++]=p[g++];return m}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var W3e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Ka=j3e(W3e);function Xre(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function U_(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=Xre(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function z3e(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,y=0,w=p.length;y!==w&&p[y]===0;)y++,g++;for(var C=(w-y)*u+1>>>0,N=new Uint8Array(C);y!==w;){for(var I=p[y],k=0,P=C-1;(I!==0||k<m)&&P!==-1;P--,k++)I+=256*N[P]>>>0,N[P]=I%a>>>0,I=I/a>>>0;if(I!==0)throw new Error("Non-zero carry");m=k,y++}for(var U=C-m;U!==C&&N[U]===0;)U++;for(var M=c.repeat(g);U<C;++U)M+=t.charAt(N[U]);return M}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,y=0;p[g]===c;)m++,g++;for(var w=(p.length-g)*l+1>>>0,C=new Uint8Array(w);p[g];){var N=n[p.charCodeAt(g)];if(N===255)return;for(var I=0,k=w-1;(N!==0||I<y)&&k!==-1;k--,I++)N+=a*C[k]>>>0,C[k]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");y=I,g++}if(p[g]!==" "){for(var P=w-y;P!==w&&C[P]===0;)P++;for(var U=new Uint8Array(m+(w-P)),M=m;P!==w;)U[M++]=C[P++];return U}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var H3e=z3e,G3e=H3e;const q3e=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},V3e=t=>new TextEncoder().encode(t),K3e=t=>new TextDecoder().decode(t);class Y3e{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Q3e{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ese(this,e)}}class J3e{constructor(e){this.decoders=e}or(e){return ese(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ese=(t,e)=>new J3e({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Z3e{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Y3e(e,n,r),this.decoder=new Q3e(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const AP=({name:t,prefix:e,encode:n,decode:r})=>new Z3e(t,e,n,r),HI=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=G3e(n,e);return AP({prefix:t,name:e,encode:r,decode:i=>q3e(s(i))})},X3e=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},eMe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Eo=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>AP({prefix:e,name:t,encode(s){return eMe(s,r,n)},decode(s){return X3e(s,r,n,t)}}),tMe=AP({prefix:"\0",name:"identity",encode:t=>K3e(t),decode:t=>V3e(t)}),nMe=Object.freeze(Object.defineProperty({__proto__:null,identity:tMe},Symbol.toStringTag,{value:"Module"})),rMe=Eo({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),sMe=Object.freeze(Object.defineProperty({__proto__:null,base2:rMe},Symbol.toStringTag,{value:"Module"})),iMe=Eo({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),oMe=Object.freeze(Object.defineProperty({__proto__:null,base8:iMe},Symbol.toStringTag,{value:"Module"})),aMe=HI({prefix:"9",name:"base10",alphabet:"0123456789"}),cMe=Object.freeze(Object.defineProperty({__proto__:null,base10:aMe},Symbol.toStringTag,{value:"Module"})),lMe=Eo({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),uMe=Eo({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),dMe=Object.freeze(Object.defineProperty({__proto__:null,base16:lMe,base16upper:uMe},Symbol.toStringTag,{value:"Module"})),hMe=Eo({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),fMe=Eo({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),pMe=Eo({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),gMe=Eo({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),mMe=Eo({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),yMe=Eo({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),wMe=Eo({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),bMe=Eo({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),vMe=Eo({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),EMe=Object.freeze(Object.defineProperty({__proto__:null,base32:hMe,base32hex:mMe,base32hexpad:wMe,base32hexpadupper:bMe,base32hexupper:yMe,base32pad:pMe,base32padupper:gMe,base32upper:fMe,base32z:vMe},Symbol.toStringTag,{value:"Module"})),CMe=HI({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),_Me=HI({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),AMe=Object.freeze(Object.defineProperty({__proto__:null,base36:CMe,base36upper:_Me},Symbol.toStringTag,{value:"Module"})),SMe=HI({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),IMe=HI({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),NMe=Object.freeze(Object.defineProperty({__proto__:null,base58btc:SMe,base58flickr:IMe},Symbol.toStringTag,{value:"Module"})),xMe=Eo({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),TMe=Eo({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),RMe=Eo({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),kMe=Eo({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),PMe=Object.freeze(Object.defineProperty({__proto__:null,base64:xMe,base64pad:TMe,base64url:RMe,base64urlpad:kMe},Symbol.toStringTag,{value:"Module"})),tse=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),OMe=tse.reduce((t,e,n)=>(t[n]=e,t),[]),DMe=tse.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function MMe(t){return t.reduce((e,n)=>(e+=OMe[n],e),"")}function BMe(t){const e=[];for(const n of t){const r=DMe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const LMe=AP({prefix:"🚀",name:"base256emoji",encode:MMe,decode:BMe}),UMe=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:LMe},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Rz={...nMe,...sMe,...oMe,...cMe,...dMe,...EMe,...AMe,...NMe,...PMe,...UMe};function nse(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const kz=nse("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),b3=nse("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Xre(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),rse={utf8:kz,"utf-8":kz,hex:Rz.base16,latin1:b3,ascii:b3,binary:b3,...Rz};function Dl(t,e="utf8"){const n=rse[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function oc(t,e="utf8"){const n=rse[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const $Me={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},FMe="PARSE_ERROR",jMe="INVALID_REQUEST",WMe="METHOD_NOT_FOUND",zMe="INVALID_PARAMS",sse="INTERNAL_ERROR",E4="SERVER_ERROR",HMe=[-32700,-32600,-32601,-32602,-32603],$_={[FMe]:{code:-32700,message:"Parse error"},[jMe]:{code:-32600,message:"Invalid Request"},[WMe]:{code:-32601,message:"Method not found"},[zMe]:{code:-32602,message:"Invalid params"},[sse]:{code:-32603,message:"Internal error"},[E4]:{code:-32e3,message:"Server error"}},ise=E4;function GMe(t){return HMe.includes(t)}function Pz(t){return Object.keys($_).includes(t)?$_[t]:$_[ise]}function qMe(t){const e=Object.values($_).find(n=>n.code===t);return e||$_[ise]}function ose(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var ase={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var UU=function(t,e){return UU=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},UU(t,e)};function VMe(t,e){UU(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var $U=function(){return $U=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},$U.apply(this,arguments)};function KMe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function YMe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function QMe(t,e){return function(n,r){e(n,r,t)}}function JMe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ZMe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function XMe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function eBe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function tBe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function FU(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function cse(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function nBe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(cse(arguments[e]));return t}function rBe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function nS(t){return this instanceof nS?(this.v=t,this):new nS(t)}function sBe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof nS?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function iBe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:nS(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function oBe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof FU=="function"?FU(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function aBe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function cBe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function lBe(t){return t&&t.__esModule?t:{default:t}}function uBe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function dBe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const hBe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return $U},__asyncDelegator:iBe,__asyncGenerator:sBe,__asyncValues:oBe,__await:nS,__awaiter:ZMe,__classPrivateFieldGet:uBe,__classPrivateFieldSet:dBe,__createBinding:eBe,__decorate:YMe,__exportStar:tBe,__extends:VMe,__generator:XMe,__importDefault:lBe,__importStar:cBe,__makeTemplateObject:aBe,__metadata:JMe,__param:QMe,__read:cse,__rest:KMe,__spread:nBe,__spreadArrays:rBe,__values:FU},Symbol.toStringTag,{value:"Module"})),fBe=aI(hBe);var Ah={},Oz;function pBe(){if(Oz)return Ah;Oz=1,Object.defineProperty(Ah,"__esModule",{value:!0}),Ah.isBrowserCryptoAvailable=Ah.getSubtleCrypto=Ah.getBrowerCrypto=void 0;function t(){return(ei==null?void 0:ei.crypto)||(ei==null?void 0:ei.msCrypto)||{}}Ah.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}Ah.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return Ah.isBrowserCryptoAvailable=n,Ah}var Sh={},Dz;function gBe(){if(Dz)return Sh;Dz=1,Object.defineProperty(Sh,"__esModule",{value:!0}),Sh.isBrowser=Sh.isNode=Sh.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Sh.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Sh.isNode=e;function n(){return!t()&&!e()}return Sh.isBrowser=n,Sh}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=fBe;e.__exportStar(pBe(),t),e.__exportStar(gBe(),t)})(ase);function gd(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function Sy(t=6){return BigInt(gd(t))}function wg(t,e,n){return{id:n||gd(),jsonrpc:"2.0",method:t,params:e}}function SP(t,e){return{id:t,jsonrpc:"2.0",result:e}}function IP(t,e,n){return{id:t,jsonrpc:"2.0",error:mBe(e)}}function mBe(t,e){return typeof t>"u"?Pz(sse):(typeof t=="string"&&(t=Object.assign(Object.assign({},Pz(E4)),{message:t})),GMe(t.code)&&(t=qMe(t.code)),t)}let yBe=class{},wBe=class extends yBe{constructor(){super()}},bBe=class extends wBe{constructor(e){super()}};const vBe="^https?:",EBe="^wss?:";function CBe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function lse(t,e){const n=CBe(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function Mz(t){return lse(t,vBe)}function Bz(t){return lse(t,EBe)}function _Be(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function use(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function C4(t){return use(t)&&"method"in t}function NP(t){return use(t)&&(md(t)||Il(t))}function md(t){return"result"in t}function Il(t){return"error"in t}let Yl=class extends bBe{constructor(e){super(e),this.events=new Kl.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(wg(e.method,e.params||[],e.id||Sy().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Il(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),NP(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const ABe=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),SBe=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Lz=t=>t.split("?")[0],Uz=10,IBe=ABe();let NBe=class{constructor(e){if(this.url=e,this.events=new Kl.EventEmitter,this.registering=!1,!Bz(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Pf(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!Bz(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=ase.isReactNative()?void 0:{rejectUnauthorized:!_Be(e)},i=new IBe(e,[],s);SBe()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?$0(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=IP(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return ose(e,Lz(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Uz&&this.events.setMaxListeners(Uz)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${Lz(this.url)}`));return this.events.emit("register_error",n),n}};var jU={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof ei<"u"&&ei,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof ei<"u"&&ei||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(E){return E&&DataView.prototype.isPrototypeOf(E)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(E){return E&&u.indexOf(Object.prototype.toString.call(E))>-1};function h(E){if(typeof E!="string"&&(E=String(E)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(E)||E==="")throw new TypeError('Invalid character in header field name: "'+E+'"');return E.toLowerCase()}function f(E){return typeof E!="string"&&(E=String(E)),E}function p(E){var _={next:function(){var O=E.shift();return{done:O===void 0,value:O}}};return c.iterable&&(_[Symbol.iterator]=function(){return _}),_}function g(E){this.map={},E instanceof g?E.forEach(function(_,O){this.append(O,_)},this):Array.isArray(E)?E.forEach(function(_){if(_.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+_.length);this.append(_[0],_[1])},this):E&&Object.getOwnPropertyNames(E).forEach(function(_){this.append(_,E[_])},this)}g.prototype.append=function(E,_){E=h(E),_=f(_);var O=this.map[E];this.map[E]=O?O+", "+_:_},g.prototype.delete=function(E){delete this.map[h(E)]},g.prototype.get=function(E){return E=h(E),this.has(E)?this.map[E]:null},g.prototype.has=function(E){return this.map.hasOwnProperty(h(E))},g.prototype.set=function(E,_){this.map[h(E)]=f(_)},g.prototype.forEach=function(E,_){for(var O in this.map)this.map.hasOwnProperty(O)&&E.call(_,this.map[O],O,this)},g.prototype.keys=function(){var E=[];return this.forEach(function(_,O){E.push(O)}),p(E)},g.prototype.values=function(){var E=[];return this.forEach(function(_){E.push(_)}),p(E)},g.prototype.entries=function(){var E=[];return this.forEach(function(_,O){E.push([O,_])}),p(E)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function m(E){if(!E._noBody){if(E.bodyUsed)return Promise.reject(new TypeError("Already read"));E.bodyUsed=!0}}function y(E){return new Promise(function(_,O){E.onload=function(){_(E.result)},E.onerror=function(){O(E.error)}})}function w(E){var _=new FileReader,O=y(_);return _.readAsArrayBuffer(E),O}function C(E){var _=new FileReader,O=y(_),x=/charset=([A-Za-z0-9_-]+)/.exec(E.type),B=x?x[1]:"utf-8";return _.readAsText(E,B),O}function N(E){for(var _=new Uint8Array(E),O=new Array(_.length),x=0;x<_.length;x++)O[x]=String.fromCharCode(_[x]);return O.join("")}function I(E){if(E.slice)return E.slice(0);var _=new Uint8Array(E.byteLength);return _.set(new Uint8Array(E)),_.buffer}function k(){return this.bodyUsed=!1,this._initBody=function(E){this.bodyUsed=this.bodyUsed,this._bodyInit=E,E?typeof E=="string"?this._bodyText=E:c.blob&&Blob.prototype.isPrototypeOf(E)?this._bodyBlob=E:c.formData&&FormData.prototype.isPrototypeOf(E)?this._bodyFormData=E:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(E)?this._bodyText=E.toString():c.arrayBuffer&&c.blob&&l(E)?(this._bodyArrayBuffer=I(E.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(E)||d(E))?this._bodyArrayBuffer=I(E):this._bodyText=E=Object.prototype.toString.call(E):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof E=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(E)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var E=m(this);if(E)return E;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var E=m(this);return E||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(w);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var E=m(this);if(E)return E;if(this._bodyBlob)return C(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(N(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(W)}),this.json=function(){return this.text().then(JSON.parse)},this}var P=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function U(E){var _=E.toUpperCase();return P.indexOf(_)>-1?_:E}function M(E,_){if(!(this instanceof M))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');_=_||{};var O=_.body;if(E instanceof M){if(E.bodyUsed)throw new TypeError("Already read");this.url=E.url,this.credentials=E.credentials,_.headers||(this.headers=new g(E.headers)),this.method=E.method,this.mode=E.mode,this.signal=E.signal,!O&&E._bodyInit!=null&&(O=E._bodyInit,E.bodyUsed=!0)}else this.url=String(E);if(this.credentials=_.credentials||this.credentials||"same-origin",(_.headers||!this.headers)&&(this.headers=new g(_.headers)),this.method=U(_.method||this.method||"GET"),this.mode=_.mode||this.mode||null,this.signal=_.signal||this.signal||function(){if("AbortController"in a){var F=new AbortController;return F.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&O)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(O),(this.method==="GET"||this.method==="HEAD")&&(_.cache==="no-store"||_.cache==="no-cache")){var x=/([?&])_=[^&]*/;if(x.test(this.url))this.url=this.url.replace(x,"$1_="+new Date().getTime());else{var B=/\?/;this.url+=(B.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}M.prototype.clone=function(){return new M(this,{body:this._bodyInit})};function W(E){var _=new FormData;return E.trim().split("&").forEach(function(O){if(O){var x=O.split("="),B=x.shift().replace(/\+/g," "),F=x.join("=").replace(/\+/g," ");_.append(decodeURIComponent(B),decodeURIComponent(F))}}),_}function j(E){var _=new g,O=E.replace(/\r?\n[\t ]+/g," ");return O.split("\r").map(function(x){return x.indexOf(`
`)===0?x.substr(1,x.length):x}).forEach(function(x){var B=x.split(":"),F=B.shift().trim();if(F){var L=B.join(":").trim();try{_.append(F,L)}catch(A){console.warn("Response "+A.message)}}}),_}k.call(M.prototype);function K(E,_){if(!(this instanceof K))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(_||(_={}),this.type="default",this.status=_.status===void 0?200:_.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=_.statusText===void 0?"":""+_.statusText,this.headers=new g(_.headers),this.url=_.url||"",this._initBody(E)}k.call(K.prototype),K.prototype.clone=function(){return new K(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},K.error=function(){var E=new K(null,{status:200,statusText:""});return E.ok=!1,E.status=0,E.type="error",E};var $=[301,302,303,307,308];K.redirect=function(E,_){if($.indexOf(_)===-1)throw new RangeError("Invalid status code");return new K(null,{status:_,headers:{location:E}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(_,O){this.message=_,this.name=O;var x=Error(_);this.stack=x.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function v(E,_){return new Promise(function(O,x){var B=new M(E,_);if(B.signal&&B.signal.aborted)return x(new o.DOMException("Aborted","AbortError"));var F=new XMLHttpRequest;function L(){F.abort()}F.onload=function(){var re={statusText:F.statusText,headers:j(F.getAllResponseHeaders()||"")};B.url.indexOf("file://")===0&&(F.status<200||F.status>599)?re.status=200:re.status=F.status,re.url="responseURL"in F?F.responseURL:re.headers.get("X-Request-URL");var se="response"in F?F.response:F.responseText;setTimeout(function(){O(new K(se,re))},0)},F.onerror=function(){setTimeout(function(){x(new TypeError("Network request failed"))},0)},F.ontimeout=function(){setTimeout(function(){x(new TypeError("Network request timed out"))},0)},F.onabort=function(){setTimeout(function(){x(new o.DOMException("Aborted","AbortError"))},0)};function A(re){try{return re===""&&a.location.href?a.location.href:re}catch{return re}}if(F.open(B.method,A(B.url),!0),B.credentials==="include"?F.withCredentials=!0:B.credentials==="omit"&&(F.withCredentials=!1),"responseType"in F&&(c.blob?F.responseType="blob":c.arrayBuffer&&(F.responseType="arraybuffer")),_&&typeof _.headers=="object"&&!(_.headers instanceof g||a.Headers&&_.headers instanceof a.Headers)){var H=[];Object.getOwnPropertyNames(_.headers).forEach(function(re){H.push(h(re)),F.setRequestHeader(re,f(_.headers[re]))}),B.headers.forEach(function(re,se){H.indexOf(se)===-1&&F.setRequestHeader(se,re)})}else B.headers.forEach(function(re,se){F.setRequestHeader(se,re)});B.signal&&(B.signal.addEventListener("abort",L),F.onreadystatechange=function(){F.readyState===4&&B.signal.removeEventListener("abort",L)}),F.send(typeof B._bodyInit>"u"?null:B._bodyInit)})}return v.polyfill=!0,a.fetch||(a.fetch=v,a.Headers=g,a.Request=M,a.Response=K),o.Headers=g,o.Request=M,o.Response=K,o.fetch=v,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(jU,jU.exports);var xBe=jU.exports;const $z=ch(xBe);var TBe=Object.defineProperty,RBe=Object.defineProperties,kBe=Object.getOwnPropertyDescriptors,Fz=Object.getOwnPropertySymbols,PBe=Object.prototype.hasOwnProperty,OBe=Object.prototype.propertyIsEnumerable,jz=(t,e,n)=>e in t?TBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wz=(t,e)=>{for(var n in e||(e={}))PBe.call(e,n)&&jz(t,n,e[n]);if(Fz)for(var n of Fz(e))OBe.call(e,n)&&jz(t,n,e[n]);return t},zz=(t,e)=>RBe(t,kBe(e));const DBe={Accept:"application/json","Content-Type":"application/json"},MBe="POST",Hz={headers:DBe,method:MBe},Gz=10;let Qu=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new Kl.EventEmitter,this.isAvailable=!1,this.registering=!1,!Mz(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=Pf(e),r=await(await $z(this.url,zz(Wz({},Hz),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!Mz(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=Pf({id:1,jsonrpc:"2.0",method:"test",params:[]});await $z(e,zz(Wz({},Hz),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?$0(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=IP(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return ose(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Gz&&this.events.setMaxListeners(Gz)}};const F_={getSIWX(){return De.state.siwx},async initializeIfEnabled(){var i;const t=De.state.siwx,e=J.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(J.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await Fi.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),Is.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=Yt._getClient())==null?void 0:i.disconnect().catch(console.error)),Rn.reset("Connect"),ku.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=De.state.siwx,e=Mt.getPlainAddress(J.getActiveCaipAddress()),n=J.getActiveCaipNetwork(),r=Yt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();ut.getConnectorId(n.chainNamespace)===dt.CONNECTOR_ID.AUTH&&Rn.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),Fi.close(),Is.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Fi.state.open||Rn.state.view==="ApproveTransaction")&&await Fi.open({view:"SIWXSignMessage"}),i.isSmartAccount?ku.showError("This application might not support Smart Accounts"):ku.showError("Signature declined"),Is.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await Yt.disconnect():Fi.close(),Rn.reset("Connect"),Is.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=De.state.siwx,e=Mt.getPlainAddress(J.getActiveCaipAddress()),n=J.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Rn.state.view==="ApproveTransaction",r=Rn.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=F_.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=J.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(ku.showLoading("Authenticating...",{autoClose:!1}),wt.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),Is.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:F_.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),Is.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:F_.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{ku.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=J.state.activeChain;return{network:((e=J.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=wt.state.preferredAccountTypes)==null?void 0:n[t])===go.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};function dx(t,e){return ut.getConnectorId(t)===e}function BBe(t){const e=Array.from(J.state.chains.keys());let n=[];return t?(n.push([t,J.state.chains.get(t)]),dx(t,dt.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&dx(r,dt.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,J.state.chains.get(r)])}):dx(t,dt.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&dx(r,dt.CONNECTOR_ID.AUTH)&&n.push([r,J.state.chains.get(r)])})):n=Array.from(J.state.chains.entries()),n}const za={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},ek={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[dt.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[dt.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[dt.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[dt.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[dt.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[dt.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[dt.CONNECTOR_ID.INJECTED]:"Browser Wallet",[dt.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[dt.CONNECTOR_ID.COINBASE]:"Coinbase",[dt.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[dt.CONNECTOR_ID.LEDGER]:"Ledger",[dt.CONNECTOR_ID.SAFE]:"Safe"}},xP={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${za.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},LBe=new AbortController,kd={EmbeddedWalletAbortController:LBe,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${UBe()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function UBe(){return typeof window<"u"}const $Be={createLogger(t,e="error"){const n=mw({level:e}),{logger:r}=vP({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},FBe="rpc.walletconnect.org";function qz(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const v3=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],yb={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===FBe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:dt.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${dt.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return v3.includes(e)?qz(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,m;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((m=r==null?void 0:r[i])==null?void 0:m.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:ek.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>yb.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(mg(a.url,a.config))}),v3.includes(t.caipNetworkId)&&r.push(mg(qz(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(mg(a))}),HR(r)},extendWagmiTransports(t,e,n){if(v3.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return HR([n,mg(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:dt.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=bt.getActiveCaipNetworkId(),n=J.getAllRequestedCaipNetworks(),r=Array.from(((c=J.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},tk={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Na=gs({providers:{...tk},providerIds:{...tk}}),Lr={state:Na,subscribeKey(t,e){return Ho(Na,t,e)},subscribe(t){return Wo(Na,()=>{t(Na)})},subscribeProviders(t){return Wo(Na.providers,()=>t(Na.providers))},setProvider(t,e){e&&(Na.providers[t]=L0(e))},getProvider(t){return Na.providers[t]},setProviderId(t,e){e&&(Na.providerIds[t]=e)},getProviderId(t){if(t)return Na.providerIds[t]},reset(){Na.providers={...tk},Na.providerIds={...tk}},resetChain(t){Na.providers[t]=void 0,Na.providerIds[t]=void 0}};var mn={},TP={};TP.byteLength=zBe;TP.toByteArray=GBe;TP.fromByteArray=KBe;var $d=[],vl=[],jBe=typeof Uint8Array<"u"?Uint8Array:Array,E3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Hw=0,WBe=E3.length;Hw<WBe;++Hw)$d[Hw]=E3[Hw],vl[E3.charCodeAt(Hw)]=Hw;vl[45]=62;vl[95]=63;function dse(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function zBe(t){var e=dse(t),n=e[0],r=e[1];return(n+r)*3/4-r}function HBe(t,e,n){return(e+n)*3/4-n}function GBe(t){var e,n=dse(t),r=n[0],s=n[1],i=new jBe(HBe(t,r,s)),o=0,a=s>0?r-4:r,c;for(c=0;c<a;c+=4)e=vl[t.charCodeAt(c)]<<18|vl[t.charCodeAt(c+1)]<<12|vl[t.charCodeAt(c+2)]<<6|vl[t.charCodeAt(c+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=vl[t.charCodeAt(c)]<<2|vl[t.charCodeAt(c+1)]>>4,i[o++]=e&255),s===1&&(e=vl[t.charCodeAt(c)]<<10|vl[t.charCodeAt(c+1)]<<4|vl[t.charCodeAt(c+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function qBe(t){return $d[t>>18&63]+$d[t>>12&63]+$d[t>>6&63]+$d[t&63]}function VBe(t,e,n){for(var r,s=[],i=e;i<n;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(qBe(r));return s.join("")}function KBe(t){for(var e,n=t.length,r=n%3,s=[],i=16383,o=0,a=n-r;o<a;o+=i)s.push(VBe(t,o,o+i>a?a:o+i));return r===1?(e=t[n-1],s.push($d[e>>2]+$d[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],s.push($d[e>>10]+$d[e>>4&63]+$d[e<<2&63]+"=")),s.join("")}var _4={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */_4.read=function(t,e,n,r,s){var i,o,a=s*8-r-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?s-1:0,h=n?-1:1,f=t[e+d];for(d+=h,i=f&(1<<-u)-1,f>>=-u,u+=a;u>0;i=i*256+t[e+d],d+=h,u-=8);for(o=i&(1<<-u)-1,i>>=-u,u+=r;u>0;o=o*256+t[e+d],d+=h,u-=8);if(i===0)i=1-l;else{if(i===c)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-l}return(f?-1:1)*o*Math.pow(2,i-r)};_4.write=function(t,e,n,r,s,i){var o,a,c,l=i*8-s-1,u=(1<<l)-1,d=u>>1,h=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,p=r?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?e+=h/c:e+=h*Math.pow(2,1-d),e*c>=2&&(o++,c/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(e*c-1)*Math.pow(2,s),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,s),o=0));s>=8;t[n+f]=a&255,f+=p,a/=256,s-=8);for(o=o<<s|a,l+=s;l>0;t[n+f]=o&255,f+=p,o/=256,l-=8);t[n+f-p]|=g*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=TP,n=_4,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=w,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const z=new Uint8Array(1),T={foo:function(){return 42}};return Object.setPrototypeOf(T,Uint8Array.prototype),Object.setPrototypeOf(z,T),z.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(z){if(z>s)throw new RangeError('The value "'+z+'" is invalid for option "size"');const T=new Uint8Array(z);return Object.setPrototypeOf(T,a.prototype),T}function a(z,T,D){if(typeof z=="number"){if(typeof T=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(z)}return c(z,T,D)}a.poolSize=8192;function c(z,T,D){if(typeof z=="string")return h(z,T);if(ArrayBuffer.isView(z))return p(z);if(z==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z);if(Jn(z,ArrayBuffer)||z&&Jn(z.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Jn(z,SharedArrayBuffer)||z&&Jn(z.buffer,SharedArrayBuffer)))return g(z,T,D);if(typeof z=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Y=z.valueOf&&z.valueOf();if(Y!=null&&Y!==z)return a.from(Y,T,D);const ee=m(z);if(ee)return ee;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof z[Symbol.toPrimitive]=="function")return a.from(z[Symbol.toPrimitive]("string"),T,D);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z)}a.from=function(z,T,D){return c(z,T,D)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(z){if(typeof z!="number")throw new TypeError('"size" argument must be of type number');if(z<0)throw new RangeError('The value "'+z+'" is invalid for option "size"')}function u(z,T,D){return l(z),z<=0?o(z):T!==void 0?typeof D=="string"?o(z).fill(T,D):o(z).fill(T):o(z)}a.alloc=function(z,T,D){return u(z,T,D)};function d(z){return l(z),o(z<0?0:y(z)|0)}a.allocUnsafe=function(z){return d(z)},a.allocUnsafeSlow=function(z){return d(z)};function h(z,T){if((typeof T!="string"||T==="")&&(T="utf8"),!a.isEncoding(T))throw new TypeError("Unknown encoding: "+T);const D=C(z,T)|0;let Y=o(D);const ee=Y.write(z,T);return ee!==D&&(Y=Y.slice(0,ee)),Y}function f(z){const T=z.length<0?0:y(z.length)|0,D=o(T);for(let Y=0;Y<T;Y+=1)D[Y]=z[Y]&255;return D}function p(z){if(Jn(z,Uint8Array)){const T=new Uint8Array(z);return g(T.buffer,T.byteOffset,T.byteLength)}return f(z)}function g(z,T,D){if(T<0||z.byteLength<T)throw new RangeError('"offset" is outside of buffer bounds');if(z.byteLength<T+(D||0))throw new RangeError('"length" is outside of buffer bounds');let Y;return T===void 0&&D===void 0?Y=new Uint8Array(z):D===void 0?Y=new Uint8Array(z,T):Y=new Uint8Array(z,T,D),Object.setPrototypeOf(Y,a.prototype),Y}function m(z){if(a.isBuffer(z)){const T=y(z.length)|0,D=o(T);return D.length===0||z.copy(D,0,0,T),D}if(z.length!==void 0)return typeof z.length!="number"||qt(z.length)?o(0):f(z);if(z.type==="Buffer"&&Array.isArray(z.data))return f(z.data)}function y(z){if(z>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return z|0}function w(z){return+z!=z&&(z=0),a.alloc(+z)}a.isBuffer=function(T){return T!=null&&T._isBuffer===!0&&T!==a.prototype},a.compare=function(T,D){if(Jn(T,Uint8Array)&&(T=a.from(T,T.offset,T.byteLength)),Jn(D,Uint8Array)&&(D=a.from(D,D.offset,D.byteLength)),!a.isBuffer(T)||!a.isBuffer(D))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(T===D)return 0;let Y=T.length,ee=D.length;for(let de=0,we=Math.min(Y,ee);de<we;++de)if(T[de]!==D[de]){Y=T[de],ee=D[de];break}return Y<ee?-1:ee<Y?1:0},a.isEncoding=function(T){switch(String(T).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(T,D){if(!Array.isArray(T))throw new TypeError('"list" argument must be an Array of Buffers');if(T.length===0)return a.alloc(0);let Y;if(D===void 0)for(D=0,Y=0;Y<T.length;++Y)D+=T[Y].length;const ee=a.allocUnsafe(D);let de=0;for(Y=0;Y<T.length;++Y){let we=T[Y];if(Jn(we,Uint8Array))de+we.length>ee.length?(a.isBuffer(we)||(we=a.from(we)),we.copy(ee,de)):Uint8Array.prototype.set.call(ee,we,de);else if(a.isBuffer(we))we.copy(ee,de);else throw new TypeError('"list" argument must be an Array of Buffers');de+=we.length}return ee};function C(z,T){if(a.isBuffer(z))return z.length;if(ArrayBuffer.isView(z)||Jn(z,ArrayBuffer))return z.byteLength;if(typeof z!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof z);const D=z.length,Y=arguments.length>2&&arguments[2]===!0;if(!Y&&D===0)return 0;let ee=!1;for(;;)switch(T){case"ascii":case"latin1":case"binary":return D;case"utf8":case"utf-8":return at(z).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D*2;case"hex":return D>>>1;case"base64":return Bt(z).length;default:if(ee)return Y?-1:at(z).length;T=(""+T).toLowerCase(),ee=!0}}a.byteLength=C;function N(z,T,D){let Y=!1;if((T===void 0||T<0)&&(T=0),T>this.length||((D===void 0||D>this.length)&&(D=this.length),D<=0)||(D>>>=0,T>>>=0,D<=T))return"";for(z||(z="utf8");;)switch(z){case"hex":return B(this,T,D);case"utf8":case"utf-8":return v(this,T,D);case"ascii":return O(this,T,D);case"latin1":case"binary":return x(this,T,D);case"base64":return $(this,T,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,T,D);default:if(Y)throw new TypeError("Unknown encoding: "+z);z=(z+"").toLowerCase(),Y=!0}}a.prototype._isBuffer=!0;function I(z,T,D){const Y=z[T];z[T]=z[D],z[D]=Y}a.prototype.swap16=function(){const T=this.length;if(T%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let D=0;D<T;D+=2)I(this,D,D+1);return this},a.prototype.swap32=function(){const T=this.length;if(T%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let D=0;D<T;D+=4)I(this,D,D+3),I(this,D+1,D+2);return this},a.prototype.swap64=function(){const T=this.length;if(T%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let D=0;D<T;D+=8)I(this,D,D+7),I(this,D+1,D+6),I(this,D+2,D+5),I(this,D+3,D+4);return this},a.prototype.toString=function(){const T=this.length;return T===0?"":arguments.length===0?v(this,0,T):N.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(T){if(!a.isBuffer(T))throw new TypeError("Argument must be a Buffer");return this===T?!0:a.compare(this,T)===0},a.prototype.inspect=function(){let T="";const D=t.INSPECT_MAX_BYTES;return T=this.toString("hex",0,D).replace(/(.{2})/g,"$1 ").trim(),this.length>D&&(T+=" ... "),"<Buffer "+T+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(T,D,Y,ee,de){if(Jn(T,Uint8Array)&&(T=a.from(T,T.offset,T.byteLength)),!a.isBuffer(T))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof T);if(D===void 0&&(D=0),Y===void 0&&(Y=T?T.length:0),ee===void 0&&(ee=0),de===void 0&&(de=this.length),D<0||Y>T.length||ee<0||de>this.length)throw new RangeError("out of range index");if(ee>=de&&D>=Y)return 0;if(ee>=de)return-1;if(D>=Y)return 1;if(D>>>=0,Y>>>=0,ee>>>=0,de>>>=0,this===T)return 0;let we=de-ee,It=Y-D;const Vt=Math.min(we,It),et=this.slice(ee,de),bn=T.slice(D,Y);for(let tt=0;tt<Vt;++tt)if(et[tt]!==bn[tt]){we=et[tt],It=bn[tt];break}return we<It?-1:It<we?1:0};function k(z,T,D,Y,ee){if(z.length===0)return-1;if(typeof D=="string"?(Y=D,D=0):D>2147483647?D=2147483647:D<-2147483648&&(D=-2147483648),D=+D,qt(D)&&(D=ee?0:z.length-1),D<0&&(D=z.length+D),D>=z.length){if(ee)return-1;D=z.length-1}else if(D<0)if(ee)D=0;else return-1;if(typeof T=="string"&&(T=a.from(T,Y)),a.isBuffer(T))return T.length===0?-1:P(z,T,D,Y,ee);if(typeof T=="number")return T=T&255,typeof Uint8Array.prototype.indexOf=="function"?ee?Uint8Array.prototype.indexOf.call(z,T,D):Uint8Array.prototype.lastIndexOf.call(z,T,D):P(z,[T],D,Y,ee);throw new TypeError("val must be string, number or Buffer")}function P(z,T,D,Y,ee){let de=1,we=z.length,It=T.length;if(Y!==void 0&&(Y=String(Y).toLowerCase(),Y==="ucs2"||Y==="ucs-2"||Y==="utf16le"||Y==="utf-16le")){if(z.length<2||T.length<2)return-1;de=2,we/=2,It/=2,D/=2}function Vt(bn,tt){return de===1?bn[tt]:bn.readUInt16BE(tt*de)}let et;if(ee){let bn=-1;for(et=D;et<we;et++)if(Vt(z,et)===Vt(T,bn===-1?0:et-bn)){if(bn===-1&&(bn=et),et-bn+1===It)return bn*de}else bn!==-1&&(et-=et-bn),bn=-1}else for(D+It>we&&(D=we-It),et=D;et>=0;et--){let bn=!0;for(let tt=0;tt<It;tt++)if(Vt(z,et+tt)!==Vt(T,tt)){bn=!1;break}if(bn)return et}return-1}a.prototype.includes=function(T,D,Y){return this.indexOf(T,D,Y)!==-1},a.prototype.indexOf=function(T,D,Y){return k(this,T,D,Y,!0)},a.prototype.lastIndexOf=function(T,D,Y){return k(this,T,D,Y,!1)};function U(z,T,D,Y){D=Number(D)||0;const ee=z.length-D;Y?(Y=Number(Y),Y>ee&&(Y=ee)):Y=ee;const de=T.length;Y>de/2&&(Y=de/2);let we;for(we=0;we<Y;++we){const It=parseInt(T.substr(we*2,2),16);if(qt(It))return we;z[D+we]=It}return we}function M(z,T,D,Y){return ze(at(T,z.length-D),z,D,Y)}function W(z,T,D,Y){return ze(wn(T),z,D,Y)}function j(z,T,D,Y){return ze(Bt(T),z,D,Y)}function K(z,T,D,Y){return ze(Qn(T,z.length-D),z,D,Y)}a.prototype.write=function(T,D,Y,ee){if(D===void 0)ee="utf8",Y=this.length,D=0;else if(Y===void 0&&typeof D=="string")ee=D,Y=this.length,D=0;else if(isFinite(D))D=D>>>0,isFinite(Y)?(Y=Y>>>0,ee===void 0&&(ee="utf8")):(ee=Y,Y=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const de=this.length-D;if((Y===void 0||Y>de)&&(Y=de),T.length>0&&(Y<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");ee||(ee="utf8");let we=!1;for(;;)switch(ee){case"hex":return U(this,T,D,Y);case"utf8":case"utf-8":return M(this,T,D,Y);case"ascii":case"latin1":case"binary":return W(this,T,D,Y);case"base64":return j(this,T,D,Y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,T,D,Y);default:if(we)throw new TypeError("Unknown encoding: "+ee);ee=(""+ee).toLowerCase(),we=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function $(z,T,D){return T===0&&D===z.length?e.fromByteArray(z):e.fromByteArray(z.slice(T,D))}function v(z,T,D){D=Math.min(z.length,D);const Y=[];let ee=T;for(;ee<D;){const de=z[ee];let we=null,It=de>239?4:de>223?3:de>191?2:1;if(ee+It<=D){let Vt,et,bn,tt;switch(It){case 1:de<128&&(we=de);break;case 2:Vt=z[ee+1],(Vt&192)===128&&(tt=(de&31)<<6|Vt&63,tt>127&&(we=tt));break;case 3:Vt=z[ee+1],et=z[ee+2],(Vt&192)===128&&(et&192)===128&&(tt=(de&15)<<12|(Vt&63)<<6|et&63,tt>2047&&(tt<55296||tt>57343)&&(we=tt));break;case 4:Vt=z[ee+1],et=z[ee+2],bn=z[ee+3],(Vt&192)===128&&(et&192)===128&&(bn&192)===128&&(tt=(de&15)<<18|(Vt&63)<<12|(et&63)<<6|bn&63,tt>65535&&tt<1114112&&(we=tt))}}we===null?(we=65533,It=1):we>65535&&(we-=65536,Y.push(we>>>10&1023|55296),we=56320|we&1023),Y.push(we),ee+=It}return _(Y)}const E=4096;function _(z){const T=z.length;if(T<=E)return String.fromCharCode.apply(String,z);let D="",Y=0;for(;Y<T;)D+=String.fromCharCode.apply(String,z.slice(Y,Y+=E));return D}function O(z,T,D){let Y="";D=Math.min(z.length,D);for(let ee=T;ee<D;++ee)Y+=String.fromCharCode(z[ee]&127);return Y}function x(z,T,D){let Y="";D=Math.min(z.length,D);for(let ee=T;ee<D;++ee)Y+=String.fromCharCode(z[ee]);return Y}function B(z,T,D){const Y=z.length;(!T||T<0)&&(T=0),(!D||D<0||D>Y)&&(D=Y);let ee="";for(let de=T;de<D;++de)ee+=qe[z[de]];return ee}function F(z,T,D){const Y=z.slice(T,D);let ee="";for(let de=0;de<Y.length-1;de+=2)ee+=String.fromCharCode(Y[de]+Y[de+1]*256);return ee}a.prototype.slice=function(T,D){const Y=this.length;T=~~T,D=D===void 0?Y:~~D,T<0?(T+=Y,T<0&&(T=0)):T>Y&&(T=Y),D<0?(D+=Y,D<0&&(D=0)):D>Y&&(D=Y),D<T&&(D=T);const ee=this.subarray(T,D);return Object.setPrototypeOf(ee,a.prototype),ee};function L(z,T,D){if(z%1!==0||z<0)throw new RangeError("offset is not uint");if(z+T>D)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(T,D,Y){T=T>>>0,D=D>>>0,Y||L(T,D,this.length);let ee=this[T],de=1,we=0;for(;++we<D&&(de*=256);)ee+=this[T+we]*de;return ee},a.prototype.readUintBE=a.prototype.readUIntBE=function(T,D,Y){T=T>>>0,D=D>>>0,Y||L(T,D,this.length);let ee=this[T+--D],de=1;for(;D>0&&(de*=256);)ee+=this[T+--D]*de;return ee},a.prototype.readUint8=a.prototype.readUInt8=function(T,D){return T=T>>>0,D||L(T,1,this.length),this[T]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(T,D){return T=T>>>0,D||L(T,2,this.length),this[T]|this[T+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(T,D){return T=T>>>0,D||L(T,2,this.length),this[T]<<8|this[T+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(T,D){return T=T>>>0,D||L(T,4,this.length),(this[T]|this[T+1]<<8|this[T+2]<<16)+this[T+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(T,D){return T=T>>>0,D||L(T,4,this.length),this[T]*16777216+(this[T+1]<<16|this[T+2]<<8|this[T+3])},a.prototype.readBigUInt64LE=un(function(T){T=T>>>0,Re(T,"offset");const D=this[T],Y=this[T+7];(D===void 0||Y===void 0)&&xe(T,this.length-8);const ee=D+this[++T]*2**8+this[++T]*2**16+this[++T]*2**24,de=this[++T]+this[++T]*2**8+this[++T]*2**16+Y*2**24;return BigInt(ee)+(BigInt(de)<<BigInt(32))}),a.prototype.readBigUInt64BE=un(function(T){T=T>>>0,Re(T,"offset");const D=this[T],Y=this[T+7];(D===void 0||Y===void 0)&&xe(T,this.length-8);const ee=D*2**24+this[++T]*2**16+this[++T]*2**8+this[++T],de=this[++T]*2**24+this[++T]*2**16+this[++T]*2**8+Y;return(BigInt(ee)<<BigInt(32))+BigInt(de)}),a.prototype.readIntLE=function(T,D,Y){T=T>>>0,D=D>>>0,Y||L(T,D,this.length);let ee=this[T],de=1,we=0;for(;++we<D&&(de*=256);)ee+=this[T+we]*de;return de*=128,ee>=de&&(ee-=Math.pow(2,8*D)),ee},a.prototype.readIntBE=function(T,D,Y){T=T>>>0,D=D>>>0,Y||L(T,D,this.length);let ee=D,de=1,we=this[T+--ee];for(;ee>0&&(de*=256);)we+=this[T+--ee]*de;return de*=128,we>=de&&(we-=Math.pow(2,8*D)),we},a.prototype.readInt8=function(T,D){return T=T>>>0,D||L(T,1,this.length),this[T]&128?(255-this[T]+1)*-1:this[T]},a.prototype.readInt16LE=function(T,D){T=T>>>0,D||L(T,2,this.length);const Y=this[T]|this[T+1]<<8;return Y&32768?Y|4294901760:Y},a.prototype.readInt16BE=function(T,D){T=T>>>0,D||L(T,2,this.length);const Y=this[T+1]|this[T]<<8;return Y&32768?Y|4294901760:Y},a.prototype.readInt32LE=function(T,D){return T=T>>>0,D||L(T,4,this.length),this[T]|this[T+1]<<8|this[T+2]<<16|this[T+3]<<24},a.prototype.readInt32BE=function(T,D){return T=T>>>0,D||L(T,4,this.length),this[T]<<24|this[T+1]<<16|this[T+2]<<8|this[T+3]},a.prototype.readBigInt64LE=un(function(T){T=T>>>0,Re(T,"offset");const D=this[T],Y=this[T+7];(D===void 0||Y===void 0)&&xe(T,this.length-8);const ee=this[T+4]+this[T+5]*2**8+this[T+6]*2**16+(Y<<24);return(BigInt(ee)<<BigInt(32))+BigInt(D+this[++T]*2**8+this[++T]*2**16+this[++T]*2**24)}),a.prototype.readBigInt64BE=un(function(T){T=T>>>0,Re(T,"offset");const D=this[T],Y=this[T+7];(D===void 0||Y===void 0)&&xe(T,this.length-8);const ee=(D<<24)+this[++T]*2**16+this[++T]*2**8+this[++T];return(BigInt(ee)<<BigInt(32))+BigInt(this[++T]*2**24+this[++T]*2**16+this[++T]*2**8+Y)}),a.prototype.readFloatLE=function(T,D){return T=T>>>0,D||L(T,4,this.length),n.read(this,T,!0,23,4)},a.prototype.readFloatBE=function(T,D){return T=T>>>0,D||L(T,4,this.length),n.read(this,T,!1,23,4)},a.prototype.readDoubleLE=function(T,D){return T=T>>>0,D||L(T,8,this.length),n.read(this,T,!0,52,8)},a.prototype.readDoubleBE=function(T,D){return T=T>>>0,D||L(T,8,this.length),n.read(this,T,!1,52,8)};function A(z,T,D,Y,ee,de){if(!a.isBuffer(z))throw new TypeError('"buffer" argument must be a Buffer instance');if(T>ee||T<de)throw new RangeError('"value" argument is out of bounds');if(D+Y>z.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(T,D,Y,ee){if(T=+T,D=D>>>0,Y=Y>>>0,!ee){const It=Math.pow(2,8*Y)-1;A(this,T,D,Y,It,0)}let de=1,we=0;for(this[D]=T&255;++we<Y&&(de*=256);)this[D+we]=T/de&255;return D+Y},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(T,D,Y,ee){if(T=+T,D=D>>>0,Y=Y>>>0,!ee){const It=Math.pow(2,8*Y)-1;A(this,T,D,Y,It,0)}let de=Y-1,we=1;for(this[D+de]=T&255;--de>=0&&(we*=256);)this[D+de]=T/we&255;return D+Y},a.prototype.writeUint8=a.prototype.writeUInt8=function(T,D,Y){return T=+T,D=D>>>0,Y||A(this,T,D,1,255,0),this[D]=T&255,D+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(T,D,Y){return T=+T,D=D>>>0,Y||A(this,T,D,2,65535,0),this[D]=T&255,this[D+1]=T>>>8,D+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(T,D,Y){return T=+T,D=D>>>0,Y||A(this,T,D,2,65535,0),this[D]=T>>>8,this[D+1]=T&255,D+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(T,D,Y){return T=+T,D=D>>>0,Y||A(this,T,D,4,4294967295,0),this[D+3]=T>>>24,this[D+2]=T>>>16,this[D+1]=T>>>8,this[D]=T&255,D+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(T,D,Y){return T=+T,D=D>>>0,Y||A(this,T,D,4,4294967295,0),this[D]=T>>>24,this[D+1]=T>>>16,this[D+2]=T>>>8,this[D+3]=T&255,D+4};function H(z,T,D,Y,ee){Se(T,Y,ee,z,D,7);let de=Number(T&BigInt(4294967295));z[D++]=de,de=de>>8,z[D++]=de,de=de>>8,z[D++]=de,de=de>>8,z[D++]=de;let we=Number(T>>BigInt(32)&BigInt(4294967295));return z[D++]=we,we=we>>8,z[D++]=we,we=we>>8,z[D++]=we,we=we>>8,z[D++]=we,D}function re(z,T,D,Y,ee){Se(T,Y,ee,z,D,7);let de=Number(T&BigInt(4294967295));z[D+7]=de,de=de>>8,z[D+6]=de,de=de>>8,z[D+5]=de,de=de>>8,z[D+4]=de;let we=Number(T>>BigInt(32)&BigInt(4294967295));return z[D+3]=we,we=we>>8,z[D+2]=we,we=we>>8,z[D+1]=we,we=we>>8,z[D]=we,D+8}a.prototype.writeBigUInt64LE=un(function(T,D=0){return H(this,T,D,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=un(function(T,D=0){return re(this,T,D,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(T,D,Y,ee){if(T=+T,D=D>>>0,!ee){const Vt=Math.pow(2,8*Y-1);A(this,T,D,Y,Vt-1,-Vt)}let de=0,we=1,It=0;for(this[D]=T&255;++de<Y&&(we*=256);)T<0&&It===0&&this[D+de-1]!==0&&(It=1),this[D+de]=(T/we>>0)-It&255;return D+Y},a.prototype.writeIntBE=function(T,D,Y,ee){if(T=+T,D=D>>>0,!ee){const Vt=Math.pow(2,8*Y-1);A(this,T,D,Y,Vt-1,-Vt)}let de=Y-1,we=1,It=0;for(this[D+de]=T&255;--de>=0&&(we*=256);)T<0&&It===0&&this[D+de+1]!==0&&(It=1),this[D+de]=(T/we>>0)-It&255;return D+Y},a.prototype.writeInt8=function(T,D,Y){return T=+T,D=D>>>0,Y||A(this,T,D,1,127,-128),T<0&&(T=255+T+1),this[D]=T&255,D+1},a.prototype.writeInt16LE=function(T,D,Y){return T=+T,D=D>>>0,Y||A(this,T,D,2,32767,-32768),this[D]=T&255,this[D+1]=T>>>8,D+2},a.prototype.writeInt16BE=function(T,D,Y){return T=+T,D=D>>>0,Y||A(this,T,D,2,32767,-32768),this[D]=T>>>8,this[D+1]=T&255,D+2},a.prototype.writeInt32LE=function(T,D,Y){return T=+T,D=D>>>0,Y||A(this,T,D,4,2147483647,-2147483648),this[D]=T&255,this[D+1]=T>>>8,this[D+2]=T>>>16,this[D+3]=T>>>24,D+4},a.prototype.writeInt32BE=function(T,D,Y){return T=+T,D=D>>>0,Y||A(this,T,D,4,2147483647,-2147483648),T<0&&(T=4294967295+T+1),this[D]=T>>>24,this[D+1]=T>>>16,this[D+2]=T>>>8,this[D+3]=T&255,D+4},a.prototype.writeBigInt64LE=un(function(T,D=0){return H(this,T,D,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=un(function(T,D=0){return re(this,T,D,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function se(z,T,D,Y,ee,de){if(D+Y>z.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("Index out of range")}function ge(z,T,D,Y,ee){return T=+T,D=D>>>0,ee||se(z,T,D,4),n.write(z,T,D,Y,23,4),D+4}a.prototype.writeFloatLE=function(T,D,Y){return ge(this,T,D,!0,Y)},a.prototype.writeFloatBE=function(T,D,Y){return ge(this,T,D,!1,Y)};function ae(z,T,D,Y,ee){return T=+T,D=D>>>0,ee||se(z,T,D,8),n.write(z,T,D,Y,52,8),D+8}a.prototype.writeDoubleLE=function(T,D,Y){return ae(this,T,D,!0,Y)},a.prototype.writeDoubleBE=function(T,D,Y){return ae(this,T,D,!1,Y)},a.prototype.copy=function(T,D,Y,ee){if(!a.isBuffer(T))throw new TypeError("argument should be a Buffer");if(Y||(Y=0),!ee&&ee!==0&&(ee=this.length),D>=T.length&&(D=T.length),D||(D=0),ee>0&&ee<Y&&(ee=Y),ee===Y||T.length===0||this.length===0)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(Y<0||Y>=this.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("sourceEnd out of bounds");ee>this.length&&(ee=this.length),T.length-D<ee-Y&&(ee=T.length-D+Y);const de=ee-Y;return this===T&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(D,Y,ee):Uint8Array.prototype.set.call(T,this.subarray(Y,ee),D),de},a.prototype.fill=function(T,D,Y,ee){if(typeof T=="string"){if(typeof D=="string"?(ee=D,D=0,Y=this.length):typeof Y=="string"&&(ee=Y,Y=this.length),ee!==void 0&&typeof ee!="string")throw new TypeError("encoding must be a string");if(typeof ee=="string"&&!a.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);if(T.length===1){const we=T.charCodeAt(0);(ee==="utf8"&&we<128||ee==="latin1")&&(T=we)}}else typeof T=="number"?T=T&255:typeof T=="boolean"&&(T=Number(T));if(D<0||this.length<D||this.length<Y)throw new RangeError("Out of range index");if(Y<=D)return this;D=D>>>0,Y=Y===void 0?this.length:Y>>>0,T||(T=0);let de;if(typeof T=="number")for(de=D;de<Y;++de)this[de]=T;else{const we=a.isBuffer(T)?T:a.from(T,ee),It=we.length;if(It===0)throw new TypeError('The value "'+T+'" is invalid for argument "value"');for(de=0;de<Y-D;++de)this[de+D]=we[de%It]}return this};const fe={};function ye(z,T,D){fe[z]=class extends D{constructor(){super(),Object.defineProperty(this,"message",{value:T.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${z}]`,this.stack,delete this.name}get code(){return z}set code(ee){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ee,writable:!0})}toString(){return`${this.name} [${z}]: ${this.message}`}}}ye("ERR_BUFFER_OUT_OF_BOUNDS",function(z){return z?`${z} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ye("ERR_INVALID_ARG_TYPE",function(z,T){return`The "${z}" argument must be of type number. Received type ${typeof T}`},TypeError),ye("ERR_OUT_OF_RANGE",function(z,T,D){let Y=`The value of "${z}" is out of range.`,ee=D;return Number.isInteger(D)&&Math.abs(D)>2**32?ee=ve(String(D)):typeof D=="bigint"&&(ee=String(D),(D>BigInt(2)**BigInt(32)||D<-(BigInt(2)**BigInt(32)))&&(ee=ve(ee)),ee+="n"),Y+=` It must be ${T}. Received ${ee}`,Y},RangeError);function ve(z){let T="",D=z.length;const Y=z[0]==="-"?1:0;for(;D>=Y+4;D-=3)T=`_${z.slice(D-3,D)}${T}`;return`${z.slice(0,D)}${T}`}function _e(z,T,D){Re(T,"offset"),(z[T]===void 0||z[T+D]===void 0)&&xe(T,z.length-(D+1))}function Se(z,T,D,Y,ee,de){if(z>D||z<T){const we=typeof T=="bigint"?"n":"";let It;throw T===0||T===BigInt(0)?It=`>= 0${we} and < 2${we} ** ${(de+1)*8}${we}`:It=`>= -(2${we} ** ${(de+1)*8-1}${we}) and < 2 ** ${(de+1)*8-1}${we}`,new fe.ERR_OUT_OF_RANGE("value",It,z)}_e(Y,ee,de)}function Re(z,T){if(typeof z!="number")throw new fe.ERR_INVALID_ARG_TYPE(T,"number",z)}function xe(z,T,D){throw Math.floor(z)!==z?(Re(z,D),new fe.ERR_OUT_OF_RANGE("offset","an integer",z)):T<0?new fe.ERR_BUFFER_OUT_OF_BOUNDS:new fe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${T}`,z)}const Fe=/[^+/0-9A-Za-z-_]/g;function Ut(z){if(z=z.split("=")[0],z=z.trim().replace(Fe,""),z.length<2)return"";for(;z.length%4!==0;)z=z+"=";return z}function at(z,T){T=T||1/0;let D;const Y=z.length;let ee=null;const de=[];for(let we=0;we<Y;++we){if(D=z.charCodeAt(we),D>55295&&D<57344){if(!ee){if(D>56319){(T-=3)>-1&&de.push(239,191,189);continue}else if(we+1===Y){(T-=3)>-1&&de.push(239,191,189);continue}ee=D;continue}if(D<56320){(T-=3)>-1&&de.push(239,191,189),ee=D;continue}D=(ee-55296<<10|D-56320)+65536}else ee&&(T-=3)>-1&&de.push(239,191,189);if(ee=null,D<128){if((T-=1)<0)break;de.push(D)}else if(D<2048){if((T-=2)<0)break;de.push(D>>6|192,D&63|128)}else if(D<65536){if((T-=3)<0)break;de.push(D>>12|224,D>>6&63|128,D&63|128)}else if(D<1114112){if((T-=4)<0)break;de.push(D>>18|240,D>>12&63|128,D>>6&63|128,D&63|128)}else throw new Error("Invalid code point")}return de}function wn(z){const T=[];for(let D=0;D<z.length;++D)T.push(z.charCodeAt(D)&255);return T}function Qn(z,T){let D,Y,ee;const de=[];for(let we=0;we<z.length&&!((T-=2)<0);++we)D=z.charCodeAt(we),Y=D>>8,ee=D%256,de.push(ee),de.push(Y);return de}function Bt(z){return e.toByteArray(Ut(z))}function ze(z,T,D,Y){let ee;for(ee=0;ee<Y&&!(ee+D>=T.length||ee>=z.length);++ee)T[ee+D]=z[ee];return ee}function Jn(z,T){return z instanceof T||z!=null&&z.constructor!=null&&z.constructor.name!=null&&z.constructor.name===T.name}function qt(z){return z!==z}const qe=function(){const z="0123456789abcdef",T=new Array(256);for(let D=0;D<16;++D){const Y=D*16;for(let ee=0;ee<16;++ee)T[Y+ee]=z[D]+z[ee]}return T}();function un(z){return typeof BigInt>"u"?In:z}function In(){throw new Error("BigInt not supported")}})(mn);const Vz={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Ji={set(t,e){$c.isClient&&localStorage.setItem(`${mt.STORAGE_KEY}${t}`,e)},get(t){return $c.isClient?localStorage.getItem(`${mt.STORAGE_KEY}${t}`):null},delete(t,e){$c.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${mt.STORAGE_KEY}${t}`))}},hx=30*1e3,$c={checkIfAllowedToTriggerEmail(){const t=Ji.get(mt.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<hx){const n=Math.ceil((hx-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Ji.get(mt.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<hx)return Math.ceil((hx-e)/1e3)}return 0},checkIfRequestExists(t){return go.NOT_SAFE_RPC_METHODS.includes(t.method)||go.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(Vz.transactionHash))||(t==null?void 0:t.match(Vz.signedMessage)))?mt.RPC_RESPONSE_TYPE_TX:mt.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return go.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var hr;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(hr||(hr={}));var WU;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(WU||(WU={}));const ot=hr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Lp=t=>{switch(typeof t){case"undefined":return ot.undefined;case"string":return ot.string;case"number":return isNaN(t)?ot.nan:ot.number;case"boolean":return ot.boolean;case"function":return ot.function;case"bigint":return ot.bigint;case"symbol":return ot.symbol;case"object":return Array.isArray(t)?ot.array:t===null?ot.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ot.promise:typeof Map<"u"&&t instanceof Map?ot.map:typeof Set<"u"&&t instanceof Set?ot.set:typeof Date<"u"&&t instanceof Date?ot.date:ot.object;default:return ot.unknown}},Le=hr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),YBe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Fu extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,hr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Fu.create=t=>new Fu(t);const rS=(t,e)=>{let n;switch(t.code){case Le.invalid_type:t.received===ot.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Le.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,hr.jsonStringifyReplacer)}`;break;case Le.unrecognized_keys:n=`Unrecognized key(s) in object: ${hr.joinValues(t.keys,", ")}`;break;case Le.invalid_union:n="Invalid input";break;case Le.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${hr.joinValues(t.options)}`;break;case Le.invalid_enum_value:n=`Invalid enum value. Expected ${hr.joinValues(t.options)}, received '${t.received}'`;break;case Le.invalid_arguments:n="Invalid function arguments";break;case Le.invalid_return_type:n="Invalid function return type";break;case Le.invalid_date:n="Invalid date";break;case Le.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:hr.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Le.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Le.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Le.custom:n="Invalid input";break;case Le.invalid_intersection_types:n="Intersection results could not be merged";break;case Le.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Le.not_finite:n="Number must be finite";break;default:n=e.defaultError,hr.assertNever(t)}return{message:n}};let hse=rS;function QBe(t){hse=t}function nk(){return hse}const rk=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},JBe=[];function pt(t,e){const n=rk({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,nk(),rS].filter(r=>!!r)});t.common.issues.push(n)}class zo{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return gn;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return zo.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return gn;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const gn=Object.freeze({status:"aborted"}),fse=t=>({status:"dirty",value:t}),ga=t=>({status:"valid",value:t}),zU=t=>t.status==="aborted",HU=t=>t.status==="dirty",sS=t=>t.status==="valid",sk=t=>typeof Promise<"u"&&t instanceof Promise;var $t;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})($t||($t={}));class rh{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Kz=(t,e)=>{if(sS(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Fu(t.common.issues);return this._error=n,this._error}}};function Sn(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class kn{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Lp(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Lp(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new zo,ctx:{common:e.parent.common,data:e.data,parsedType:Lp(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(sk(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Lp(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Kz(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Lp(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(sk(s)?s:Promise.resolve(s));return Kz(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Le.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new qu({schema:this,typeName:rn.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return yf.create(this,this._def)}nullable(){return z0.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ju.create(this,this._def)}promise(){return HE.create(this,this._def)}or(e){return cS.create([this,e],this._def)}and(e){return lS.create(this,e,this._def)}transform(e){return new qu({...Sn(this._def),schema:this,typeName:rn.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new pS({...Sn(this._def),innerType:this,defaultValue:n,typeName:rn.ZodDefault})}brand(){return new gse({typeName:rn.ZodBranded,type:this,...Sn(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new ck({...Sn(this._def),innerType:this,catchValue:n,typeName:rn.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return GI.create(this,e)}readonly(){return uk.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ZBe=/^c[^\s-]{8,}$/i,XBe=/^[a-z][a-z0-9]*$/,eLe=/^[0-9A-HJKMNP-TV-Z]{26}$/,tLe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nLe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,rLe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let C3;const sLe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,iLe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,oLe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function aLe(t,e){return!!((e==="v4"||!e)&&sLe.test(t)||(e==="v6"||!e)&&iLe.test(t))}class Mu extends kn{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ot.string){const i=this._getOrReturnCtx(e);return pt(i,{code:Le.invalid_type,expected:ot.string,received:i.parsedType}),gn}const r=new zo;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),pt(s,{code:Le.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),pt(s,{code:Le.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?pt(s,{code:Le.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&pt(s,{code:Le.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")nLe.test(e.data)||(s=this._getOrReturnCtx(e,s),pt(s,{validation:"email",code:Le.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")C3||(C3=new RegExp(rLe,"u")),C3.test(e.data)||(s=this._getOrReturnCtx(e,s),pt(s,{validation:"emoji",code:Le.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")tLe.test(e.data)||(s=this._getOrReturnCtx(e,s),pt(s,{validation:"uuid",code:Le.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")ZBe.test(e.data)||(s=this._getOrReturnCtx(e,s),pt(s,{validation:"cuid",code:Le.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")XBe.test(e.data)||(s=this._getOrReturnCtx(e,s),pt(s,{validation:"cuid2",code:Le.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")eLe.test(e.data)||(s=this._getOrReturnCtx(e,s),pt(s,{validation:"ulid",code:Le.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),pt(s,{validation:"url",code:Le.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),pt(s,{validation:"regex",code:Le.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),pt(s,{code:Le.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),pt(s,{code:Le.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),pt(s,{code:Le.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?oLe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),pt(s,{code:Le.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?aLe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),pt(s,{validation:"ip",code:Le.invalid_string,message:i.message}),r.dirty()):hr.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Le.invalid_string,...$t.errToObj(r)})}_addCheck(e){return new Mu({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...$t.errToObj(e)})}url(e){return this._addCheck({kind:"url",...$t.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...$t.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...$t.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...$t.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...$t.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...$t.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...$t.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...$t.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...$t.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...$t.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...$t.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...$t.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...$t.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...$t.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...$t.errToObj(n)})}nonempty(e){return this.min(1,$t.errToObj(e))}trim(){return new Mu({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Mu({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Mu({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Mu.create=t=>{var e;return new Mu({checks:[],typeName:rn.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Sn(t)})};function cLe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class lm extends kn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ot.number){const i=this._getOrReturnCtx(e);return pt(i,{code:Le.invalid_type,expected:ot.number,received:i.parsedType}),gn}let r;const s=new zo;for(const i of this._def.checks)i.kind==="int"?hr.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),pt(r,{code:Le.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),pt(r,{code:Le.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),pt(r,{code:Le.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?cLe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),pt(r,{code:Le.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),pt(r,{code:Le.not_finite,message:i.message}),s.dirty()):hr.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,$t.toString(n))}gt(e,n){return this.setLimit("min",e,!1,$t.toString(n))}lte(e,n){return this.setLimit("max",e,!0,$t.toString(n))}lt(e,n){return this.setLimit("max",e,!1,$t.toString(n))}setLimit(e,n,r,s){return new lm({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:$t.toString(s)}]})}_addCheck(e){return new lm({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:$t.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:$t.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:$t.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:$t.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:$t.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:$t.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:$t.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:$t.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:$t.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&hr.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}lm.create=t=>new lm({checks:[],typeName:rn.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Sn(t)});class um extends kn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ot.bigint){const i=this._getOrReturnCtx(e);return pt(i,{code:Le.invalid_type,expected:ot.bigint,received:i.parsedType}),gn}let r;const s=new zo;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),pt(r,{code:Le.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),pt(r,{code:Le.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),pt(r,{code:Le.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):hr.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,$t.toString(n))}gt(e,n){return this.setLimit("min",e,!1,$t.toString(n))}lte(e,n){return this.setLimit("max",e,!0,$t.toString(n))}lt(e,n){return this.setLimit("max",e,!1,$t.toString(n))}setLimit(e,n,r,s){return new um({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:$t.toString(s)}]})}_addCheck(e){return new um({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:$t.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:$t.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:$t.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:$t.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:$t.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}um.create=t=>{var e;return new um({checks:[],typeName:rn.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Sn(t)})};class iS extends kn{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ot.boolean){const r=this._getOrReturnCtx(e);return pt(r,{code:Le.invalid_type,expected:ot.boolean,received:r.parsedType}),gn}return ga(e.data)}}iS.create=t=>new iS({typeName:rn.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Sn(t)});class j0 extends kn{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ot.date){const i=this._getOrReturnCtx(e);return pt(i,{code:Le.invalid_type,expected:ot.date,received:i.parsedType}),gn}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return pt(i,{code:Le.invalid_date}),gn}const r=new zo;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),pt(s,{code:Le.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),pt(s,{code:Le.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):hr.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new j0({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:$t.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:$t.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}j0.create=t=>new j0({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:rn.ZodDate,...Sn(t)});class ik extends kn{_parse(e){if(this._getType(e)!==ot.symbol){const r=this._getOrReturnCtx(e);return pt(r,{code:Le.invalid_type,expected:ot.symbol,received:r.parsedType}),gn}return ga(e.data)}}ik.create=t=>new ik({typeName:rn.ZodSymbol,...Sn(t)});class oS extends kn{_parse(e){if(this._getType(e)!==ot.undefined){const r=this._getOrReturnCtx(e);return pt(r,{code:Le.invalid_type,expected:ot.undefined,received:r.parsedType}),gn}return ga(e.data)}}oS.create=t=>new oS({typeName:rn.ZodUndefined,...Sn(t)});class aS extends kn{_parse(e){if(this._getType(e)!==ot.null){const r=this._getOrReturnCtx(e);return pt(r,{code:Le.invalid_type,expected:ot.null,received:r.parsedType}),gn}return ga(e.data)}}aS.create=t=>new aS({typeName:rn.ZodNull,...Sn(t)});class zE extends kn{constructor(){super(...arguments),this._any=!0}_parse(e){return ga(e.data)}}zE.create=t=>new zE({typeName:rn.ZodAny,...Sn(t)});class u0 extends kn{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ga(e.data)}}u0.create=t=>new u0({typeName:rn.ZodUnknown,...Sn(t)});class Of extends kn{_parse(e){const n=this._getOrReturnCtx(e);return pt(n,{code:Le.invalid_type,expected:ot.never,received:n.parsedType}),gn}}Of.create=t=>new Of({typeName:rn.ZodNever,...Sn(t)});class ok extends kn{_parse(e){if(this._getType(e)!==ot.undefined){const r=this._getOrReturnCtx(e);return pt(r,{code:Le.invalid_type,expected:ot.void,received:r.parsedType}),gn}return ga(e.data)}}ok.create=t=>new ok({typeName:rn.ZodVoid,...Sn(t)});class ju extends kn{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==ot.array)return pt(n,{code:Le.invalid_type,expected:ot.array,received:n.parsedType}),gn;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(pt(n,{code:o?Le.too_big:Le.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(pt(n,{code:Le.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(pt(n,{code:Le.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new rh(n,o,n.path,a)))).then(o=>zo.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new rh(n,o,n.path,a)));return zo.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new ju({...this._def,minLength:{value:e,message:$t.toString(n)}})}max(e,n){return new ju({...this._def,maxLength:{value:e,message:$t.toString(n)}})}length(e,n){return new ju({...this._def,exactLength:{value:e,message:$t.toString(n)}})}nonempty(e){return this.min(1,e)}}ju.create=(t,e)=>new ju({type:t,minLength:null,maxLength:null,exactLength:null,typeName:rn.ZodArray,...Sn(e)});function wb(t){if(t instanceof Ts){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=yf.create(wb(r))}return new Ts({...t._def,shape:()=>e})}else return t instanceof ju?new ju({...t._def,type:wb(t.element)}):t instanceof yf?yf.create(wb(t.unwrap())):t instanceof z0?z0.create(wb(t.unwrap())):t instanceof sh?sh.create(t.items.map(e=>wb(e))):t}class Ts extends kn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=hr.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ot.object){const l=this._getOrReturnCtx(e);return pt(l,{code:Le.invalid_type,expected:ot.object,received:l.parsedType}),gn}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Of&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new rh(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof Of){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(pt(s,{code:Le.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new rh(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>zo.mergeObjectSync(r,l)):zo.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return $t.errToObj,new Ts({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=$t.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new Ts({...this._def,unknownKeys:"strip"})}passthrough(){return new Ts({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ts({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ts({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:rn.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Ts({...this._def,catchall:e})}pick(e){const n={};return hr.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Ts({...this._def,shape:()=>n})}omit(e){const n={};return hr.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Ts({...this._def,shape:()=>n})}deepPartial(){return wb(this)}partial(e){const n={};return hr.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new Ts({...this._def,shape:()=>n})}required(e){const n={};return hr.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof yf;)i=i._def.innerType;n[r]=i}}),new Ts({...this._def,shape:()=>n})}keyof(){return pse(hr.objectKeys(this.shape))}}Ts.create=(t,e)=>new Ts({shape:()=>t,unknownKeys:"strip",catchall:Of.create(),typeName:rn.ZodObject,...Sn(e)});Ts.strictCreate=(t,e)=>new Ts({shape:()=>t,unknownKeys:"strict",catchall:Of.create(),typeName:rn.ZodObject,...Sn(e)});Ts.lazycreate=(t,e)=>new Ts({shape:t,unknownKeys:"strip",catchall:Of.create(),typeName:rn.ZodObject,...Sn(e)});class cS extends kn{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Fu(a.ctx.common.issues));return pt(n,{code:Le.invalid_union,unionErrors:o}),gn}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Fu(c));return pt(n,{code:Le.invalid_union,unionErrors:a}),gn}}get options(){return this._def.options}}cS.create=(t,e)=>new cS({options:t,typeName:rn.ZodUnion,...Sn(e)});const mT=t=>t instanceof dS?mT(t.schema):t instanceof qu?mT(t.innerType()):t instanceof hS?[t.value]:t instanceof dm?t.options:t instanceof fS?Object.keys(t.enum):t instanceof pS?mT(t._def.innerType):t instanceof oS?[void 0]:t instanceof aS?[null]:null;class RP extends kn{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ot.object)return pt(n,{code:Le.invalid_type,expected:ot.object,received:n.parsedType}),gn;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(pt(n,{code:Le.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),gn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=mT(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new RP({typeName:rn.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Sn(r)})}}function GU(t,e){const n=Lp(t),r=Lp(e);if(t===e)return{valid:!0,data:t};if(n===ot.object&&r===ot.object){const s=hr.objectKeys(e),i=hr.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=GU(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===ot.array&&r===ot.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=GU(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===ot.date&&r===ot.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class lS extends kn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(zU(i)||zU(o))return gn;const a=GU(i.value,o.value);return a.valid?((HU(i)||HU(o))&&n.dirty(),{status:n.value,value:a.data}):(pt(r,{code:Le.invalid_intersection_types}),gn)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}lS.create=(t,e,n)=>new lS({left:t,right:e,typeName:rn.ZodIntersection,...Sn(n)});class sh extends kn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ot.array)return pt(r,{code:Le.invalid_type,expected:ot.array,received:r.parsedType}),gn;if(r.data.length<this._def.items.length)return pt(r,{code:Le.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),gn;!this._def.rest&&r.data.length>this._def.items.length&&(pt(r,{code:Le.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new rh(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>zo.mergeArray(n,o)):zo.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new sh({...this._def,rest:e})}}sh.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new sh({items:t,typeName:rn.ZodTuple,rest:null,...Sn(e)})};class uS extends kn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ot.object)return pt(r,{code:Le.invalid_type,expected:ot.object,received:r.parsedType}),gn;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new rh(r,a,r.path,a)),value:o._parse(new rh(r,r.data[a],r.path,a))});return r.common.async?zo.mergeObjectAsync(n,s):zo.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof kn?new uS({keyType:e,valueType:n,typeName:rn.ZodRecord,...Sn(r)}):new uS({keyType:Mu.create(),valueType:e,typeName:rn.ZodRecord,...Sn(n)})}}class ak extends kn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ot.map)return pt(r,{code:Le.invalid_type,expected:ot.map,received:r.parsedType}),gn;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new rh(r,a,r.path,[l,"key"])),value:i._parse(new rh(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return gn;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return gn;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}ak.create=(t,e,n)=>new ak({valueType:e,keyType:t,typeName:rn.ZodMap,...Sn(n)});class W0 extends kn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ot.set)return pt(r,{code:Le.invalid_type,expected:ot.set,received:r.parsedType}),gn;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(pt(r,{code:Le.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(pt(r,{code:Le.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return gn;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new rh(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new W0({...this._def,minSize:{value:e,message:$t.toString(n)}})}max(e,n){return new W0({...this._def,maxSize:{value:e,message:$t.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}W0.create=(t,e)=>new W0({valueType:t,minSize:null,maxSize:null,typeName:rn.ZodSet,...Sn(e)});class uv extends kn{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ot.function)return pt(n,{code:Le.invalid_type,expected:ot.function,received:n.parsedType}),gn;function r(a,c){return rk({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,nk(),rS].filter(l=>!!l),issueData:{code:Le.invalid_arguments,argumentsError:c}})}function s(a,c){return rk({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,nk(),rS].filter(l=>!!l),issueData:{code:Le.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof HE){const a=this;return ga(async function(...c){const l=new Fu([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return ga(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new Fu([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new Fu([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new uv({...this._def,args:sh.create(e).rest(u0.create())})}returns(e){return new uv({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new uv({args:e||sh.create([]).rest(u0.create()),returns:n||u0.create(),typeName:rn.ZodFunction,...Sn(r)})}}class dS extends kn{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}dS.create=(t,e)=>new dS({getter:t,typeName:rn.ZodLazy,...Sn(e)});class hS extends kn{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return pt(n,{received:n.data,code:Le.invalid_literal,expected:this._def.value}),gn}return{status:"valid",value:e.data}}get value(){return this._def.value}}hS.create=(t,e)=>new hS({value:t,typeName:rn.ZodLiteral,...Sn(e)});function pse(t,e){return new dm({values:t,typeName:rn.ZodEnum,...Sn(e)})}class dm extends kn{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return pt(n,{expected:hr.joinValues(r),received:n.parsedType,code:Le.invalid_type}),gn}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return pt(n,{received:n.data,code:Le.invalid_enum_value,options:r}),gn}return ga(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return dm.create(e)}exclude(e){return dm.create(this.options.filter(n=>!e.includes(n)))}}dm.create=pse;class fS extends kn{_parse(e){const n=hr.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ot.string&&r.parsedType!==ot.number){const s=hr.objectValues(n);return pt(r,{expected:hr.joinValues(s),received:r.parsedType,code:Le.invalid_type}),gn}if(n.indexOf(e.data)===-1){const s=hr.objectValues(n);return pt(r,{received:r.data,code:Le.invalid_enum_value,options:s}),gn}return ga(e.data)}get enum(){return this._def.values}}fS.create=(t,e)=>new fS({values:t,typeName:rn.ZodNativeEnum,...Sn(e)});class HE extends kn{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ot.promise&&n.common.async===!1)return pt(n,{code:Le.invalid_type,expected:ot.promise,received:n.parsedType}),gn;const r=n.parsedType===ot.promise?n.data:Promise.resolve(n.data);return ga(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}HE.create=(t,e)=>new HE({type:t,typeName:rn.ZodPromise,...Sn(e)});class qu extends kn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===rn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{pt(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?gn:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?gn:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!sS(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>sS(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);hr.assertNever(s)}}qu.create=(t,e,n)=>new qu({schema:t,typeName:rn.ZodEffects,effect:e,...Sn(n)});qu.createWithPreprocess=(t,e,n)=>new qu({schema:e,effect:{type:"preprocess",transform:t},typeName:rn.ZodEffects,...Sn(n)});class yf extends kn{_parse(e){return this._getType(e)===ot.undefined?ga(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}yf.create=(t,e)=>new yf({innerType:t,typeName:rn.ZodOptional,...Sn(e)});class z0 extends kn{_parse(e){return this._getType(e)===ot.null?ga(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}z0.create=(t,e)=>new z0({innerType:t,typeName:rn.ZodNullable,...Sn(e)});class pS extends kn{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ot.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}pS.create=(t,e)=>new pS({innerType:t,typeName:rn.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Sn(e)});class ck extends kn{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return sk(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Fu(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Fu(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ck.create=(t,e)=>new ck({innerType:t,typeName:rn.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Sn(e)});class lk extends kn{_parse(e){if(this._getType(e)!==ot.nan){const r=this._getOrReturnCtx(e);return pt(r,{code:Le.invalid_type,expected:ot.nan,received:r.parsedType}),gn}return{status:"valid",value:e.data}}}lk.create=t=>new lk({typeName:rn.ZodNaN,...Sn(t)});const lLe=Symbol("zod_brand");class gse extends kn{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class GI extends kn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?gn:i.status==="dirty"?(n.dirty(),fse(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?gn:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new GI({in:e,out:n,typeName:rn.ZodPipeline})}}class uk extends kn{_parse(e){const n=this._def.innerType._parse(e);return sS(n)&&(n.value=Object.freeze(n.value)),n}}uk.create=(t,e)=>new uk({innerType:t,typeName:rn.ZodReadonly,...Sn(e)});const mse=(t,e={},n)=>t?zE.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):zE.create(),uLe={object:Ts.lazycreate};var rn;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(rn||(rn={}));const dLe=(t,e={message:`Input not instance of ${t.name}`})=>mse(n=>n instanceof t,e),yse=Mu.create,wse=lm.create,hLe=lk.create,fLe=um.create,bse=iS.create,pLe=j0.create,gLe=ik.create,mLe=oS.create,yLe=aS.create,wLe=zE.create,bLe=u0.create,vLe=Of.create,ELe=ok.create,CLe=ju.create,_Le=Ts.create,ALe=Ts.strictCreate,SLe=cS.create,ILe=RP.create,NLe=lS.create,xLe=sh.create,TLe=uS.create,RLe=ak.create,kLe=W0.create,PLe=uv.create,OLe=dS.create,DLe=hS.create,MLe=dm.create,BLe=fS.create,LLe=HE.create,Yz=qu.create,ULe=yf.create,$Le=z0.create,FLe=qu.createWithPreprocess,jLe=GI.create,WLe=()=>yse().optional(),zLe=()=>wse().optional(),HLe=()=>bse().optional(),GLe={string:t=>Mu.create({...t,coerce:!0}),number:t=>lm.create({...t,coerce:!0}),boolean:t=>iS.create({...t,coerce:!0}),bigint:t=>um.create({...t,coerce:!0}),date:t=>j0.create({...t,coerce:!0})},qLe=gn;var S=Object.freeze({__proto__:null,defaultErrorMap:rS,setErrorMap:QBe,getErrorMap:nk,makeIssue:rk,EMPTY_PATH:JBe,addIssueToContext:pt,ParseStatus:zo,INVALID:gn,DIRTY:fse,OK:ga,isAborted:zU,isDirty:HU,isValid:sS,isAsync:sk,get util(){return hr},get objectUtil(){return WU},ZodParsedType:ot,getParsedType:Lp,ZodType:kn,ZodString:Mu,ZodNumber:lm,ZodBigInt:um,ZodBoolean:iS,ZodDate:j0,ZodSymbol:ik,ZodUndefined:oS,ZodNull:aS,ZodAny:zE,ZodUnknown:u0,ZodNever:Of,ZodVoid:ok,ZodArray:ju,ZodObject:Ts,ZodUnion:cS,ZodDiscriminatedUnion:RP,ZodIntersection:lS,ZodTuple:sh,ZodRecord:uS,ZodMap:ak,ZodSet:W0,ZodFunction:uv,ZodLazy:dS,ZodLiteral:hS,ZodEnum:dm,ZodNativeEnum:fS,ZodPromise:HE,ZodEffects:qu,ZodTransformer:qu,ZodOptional:yf,ZodNullable:z0,ZodDefault:pS,ZodCatch:ck,ZodNaN:lk,BRAND:lLe,ZodBranded:gse,ZodPipeline:GI,ZodReadonly:uk,custom:mse,Schema:kn,ZodSchema:kn,late:uLe,get ZodFirstPartyTypeKind(){return rn},coerce:GLe,any:wLe,array:CLe,bigint:fLe,boolean:bse,date:pLe,discriminatedUnion:ILe,effect:Yz,enum:MLe,function:PLe,instanceof:dLe,intersection:NLe,lazy:OLe,literal:DLe,map:RLe,nan:hLe,nativeEnum:BLe,never:vLe,null:yLe,nullable:$Le,number:wse,object:_Le,oboolean:HLe,onumber:zLe,optional:ULe,ostring:WLe,pipeline:jLe,preprocess:FLe,promise:LLe,record:TLe,set:kLe,strictObject:ALe,string:yse,symbol:gLe,transformer:Yz,tuple:xLe,undefined:mLe,union:SLe,unknown:bLe,void:ELe,NEVER:qLe,ZodIssueCode:Le,quotelessJson:YBe,ZodError:Fu});const $s=S.object({message:S.string()});function ht(t){return S.literal(mt[t])}S.object({accessList:S.array(S.string()),blockHash:S.string().nullable(),blockNumber:S.string().nullable(),chainId:S.string().or(S.number()),from:S.string(),gas:S.string(),hash:S.string(),input:S.string().nullable(),maxFeePerGas:S.string(),maxPriorityFeePerGas:S.string(),nonce:S.string(),r:S.string(),s:S.string(),to:S.string(),transactionIndex:S.string().nullable(),type:S.string(),v:S.string(),value:S.string()});const VLe=S.object({chainId:S.string().or(S.number())}),KLe=S.object({email:S.string().email()}),YLe=S.object({otp:S.string()}),QLe=S.object({uri:S.string(),preferredAccountType:S.optional(S.string()),chainId:S.optional(S.string().or(S.number()))}),JLe=S.object({chainId:S.optional(S.string().or(S.number())),preferredAccountType:S.optional(S.string()),socialUri:S.optional(S.string())}),ZLe=S.object({provider:S.enum(["google","github","apple","facebook","x","discord"])}),XLe=S.object({email:S.string().email()}),eUe=S.object({otp:S.string()}),tUe=S.object({otp:S.string()}),nUe=S.object({themeMode:S.optional(S.enum(["light","dark"])),themeVariables:S.optional(S.record(S.string(),S.string().or(S.number()))),w3mThemeVariables:S.optional(S.record(S.string(),S.string()))}),rUe=S.object({metadata:S.object({name:S.string(),description:S.string(),url:S.string(),icons:S.array(S.string())}).optional(),sdkVersion:S.string().optional(),sdkType:S.string().optional(),projectId:S.string()}),sUe=S.object({type:S.string()}),iUe=S.object({action:S.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),oUe=S.object({url:S.string()}),aUe=S.object({userName:S.string()}),cUe=S.object({email:S.string().optional().nullable(),address:S.string(),chainId:S.string().or(S.number()),accounts:S.array(S.object({address:S.string(),type:S.enum([go.ACCOUNT_TYPES.EOA,go.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:S.string().optional().nullable(),preferredAccountType:S.optional(S.string())}),lUe=S.object({action:S.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),uUe=S.object({email:S.string().email().optional().nullable(),address:S.string(),chainId:S.string().or(S.number()),smartAccountDeployed:S.optional(S.boolean()),accounts:S.array(S.object({address:S.string(),type:S.enum([go.ACCOUNT_TYPES.EOA,go.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:S.optional(S.string())}),dUe=S.object({uri:S.string()}),hUe=S.object({isConnected:S.boolean()}),fUe=S.object({chainId:S.string().or(S.number())}),pUe=S.object({chainId:S.string().or(S.number())}),gUe=S.object({newEmail:S.string().email()}),mUe=S.object({smartAccountEnabledNetworks:S.array(S.number())});S.object({address:S.string(),isDeployed:S.boolean()});const yUe=S.object({version:S.string().optional()}),wUe=S.object({type:S.string(),address:S.string()}),bUe=S.any(),vUe=S.object({method:S.literal("eth_accounts")}),EUe=S.object({method:S.literal("eth_blockNumber")}),CUe=S.object({method:S.literal("eth_call"),params:S.array(S.any())}),_Ue=S.object({method:S.literal("eth_chainId")}),AUe=S.object({method:S.literal("eth_estimateGas"),params:S.array(S.any())}),SUe=S.object({method:S.literal("eth_feeHistory"),params:S.array(S.any())}),IUe=S.object({method:S.literal("eth_gasPrice")}),NUe=S.object({method:S.literal("eth_getAccount"),params:S.array(S.any())}),xUe=S.object({method:S.literal("eth_getBalance"),params:S.array(S.any())}),TUe=S.object({method:S.literal("eth_getBlockByHash"),params:S.array(S.any())}),RUe=S.object({method:S.literal("eth_getBlockByNumber"),params:S.array(S.any())}),kUe=S.object({method:S.literal("eth_getBlockReceipts"),params:S.array(S.any())}),PUe=S.object({method:S.literal("eth_getBlockTransactionCountByHash"),params:S.array(S.any())}),OUe=S.object({method:S.literal("eth_getBlockTransactionCountByNumber"),params:S.array(S.any())}),DUe=S.object({method:S.literal("eth_getCode"),params:S.array(S.any())}),MUe=S.object({method:S.literal("eth_getFilterChanges"),params:S.array(S.any())}),BUe=S.object({method:S.literal("eth_getFilterLogs"),params:S.array(S.any())}),LUe=S.object({method:S.literal("eth_getLogs"),params:S.array(S.any())}),UUe=S.object({method:S.literal("eth_getProof"),params:S.array(S.any())}),$Ue=S.object({method:S.literal("eth_getStorageAt"),params:S.array(S.any())}),FUe=S.object({method:S.literal("eth_getTransactionByBlockHashAndIndex"),params:S.array(S.any())}),jUe=S.object({method:S.literal("eth_getTransactionByBlockNumberAndIndex"),params:S.array(S.any())}),WUe=S.object({method:S.literal("eth_getTransactionByHash"),params:S.array(S.any())}),zUe=S.object({method:S.literal("eth_getTransactionCount"),params:S.array(S.any())}),HUe=S.object({method:S.literal("eth_getTransactionReceipt"),params:S.array(S.any())}),GUe=S.object({method:S.literal("eth_getUncleCountByBlockHash"),params:S.array(S.any())}),qUe=S.object({method:S.literal("eth_getUncleCountByBlockNumber"),params:S.array(S.any())}),VUe=S.object({method:S.literal("eth_maxPriorityFeePerGas")}),KUe=S.object({method:S.literal("eth_newBlockFilter")}),YUe=S.object({method:S.literal("eth_newFilter"),params:S.array(S.any())}),QUe=S.object({method:S.literal("eth_newPendingTransactionFilter")}),JUe=S.object({method:S.literal("eth_sendRawTransaction"),params:S.array(S.any())}),ZUe=S.object({method:S.literal("eth_syncing"),params:S.array(S.any())}),XUe=S.object({method:S.literal("eth_uninstallFilter"),params:S.array(S.any())}),Qz=S.object({method:S.literal("personal_sign"),params:S.array(S.any())}),e5e=S.object({method:S.literal("eth_signTypedData_v4"),params:S.array(S.any())}),t5e=S.object({method:S.literal("eth_sendTransaction"),params:S.array(S.any())}),n5e=S.object({method:S.literal("solana_signMessage"),params:S.object({message:S.string(),pubkey:S.string()})}),r5e=S.object({method:S.literal("solana_signTransaction"),params:S.object({transaction:S.string()})}),s5e=S.object({method:S.literal("solana_signAllTransactions"),params:S.object({transactions:S.array(S.string())})}),i5e=S.object({method:S.literal("solana_signAndSendTransaction"),params:S.object({transaction:S.string(),options:S.object({skipPreflight:S.boolean().optional(),preflightCommitment:S.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:S.number().optional(),minContextSlot:S.number().optional()}).optional()})}),o5e=S.object({method:S.literal("wallet_sendCalls"),params:S.array(S.object({chainId:S.string().or(S.number()).optional(),from:S.string().optional(),version:S.string().optional(),capabilities:S.any().optional(),calls:S.array(S.object({to:S.string().startsWith("0x"),data:S.string().startsWith("0x").optional(),value:S.string().optional()}))}))}),a5e=S.object({method:S.literal("wallet_getCallsStatus"),params:S.array(S.string())}),c5e=S.object({method:S.literal("wallet_getCapabilities")}),l5e=S.object({method:S.literal("wallet_grantPermissions"),params:S.array(S.any())}),u5e=S.object({method:S.literal("wallet_revokePermissions"),params:S.any()}),d5e=S.object({method:S.literal("wallet_getAssets"),params:S.any()}),Jz=S.object({token:S.string()}),ft=S.object({id:S.string().optional()}),E1={appEvent:ft.extend({type:ht("APP_SWITCH_NETWORK"),payload:VLe}).or(ft.extend({type:ht("APP_CONNECT_EMAIL"),payload:KLe})).or(ft.extend({type:ht("APP_CONNECT_DEVICE")})).or(ft.extend({type:ht("APP_CONNECT_OTP"),payload:YLe})).or(ft.extend({type:ht("APP_CONNECT_SOCIAL"),payload:QLe})).or(ft.extend({type:ht("APP_GET_FARCASTER_URI")})).or(ft.extend({type:ht("APP_CONNECT_FARCASTER")})).or(ft.extend({type:ht("APP_GET_USER"),payload:S.optional(JLe)})).or(ft.extend({type:ht("APP_GET_SOCIAL_REDIRECT_URI"),payload:ZLe})).or(ft.extend({type:ht("APP_SIGN_OUT")})).or(ft.extend({type:ht("APP_IS_CONNECTED"),payload:S.optional(Jz)})).or(ft.extend({type:ht("APP_GET_CHAIN_ID")})).or(ft.extend({type:ht("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(ft.extend({type:ht("APP_INIT_SMART_ACCOUNT")})).or(ft.extend({type:ht("APP_SET_PREFERRED_ACCOUNT"),payload:sUe})).or(ft.extend({type:ht("APP_RPC_REQUEST"),payload:Qz.or(d5e).or(vUe).or(EUe).or(CUe).or(_Ue).or(AUe).or(SUe).or(IUe).or(NUe).or(xUe).or(TUe).or(RUe).or(kUe).or(PUe).or(OUe).or(DUe).or(MUe).or(BUe).or(LUe).or(UUe).or($Ue).or(FUe).or(jUe).or(WUe).or(zUe).or(HUe).or(GUe).or(qUe).or(VUe).or(KUe).or(YUe).or(QUe).or(JUe).or(ZUe).or(XUe).or(Qz).or(e5e).or(t5e).or(n5e).or(r5e).or(s5e).or(i5e).or(a5e).or(o5e).or(c5e).or(l5e).or(u5e)})).or(ft.extend({type:ht("APP_UPDATE_EMAIL"),payload:XLe})).or(ft.extend({type:ht("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:eUe})).or(ft.extend({type:ht("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:tUe})).or(ft.extend({type:ht("APP_SYNC_THEME"),payload:nUe})).or(ft.extend({type:ht("APP_SYNC_DAPP_DATA"),payload:rUe})).or(ft.extend({type:ht("APP_RELOAD")})),frameEvent:ft.extend({type:ht("FRAME_SWITCH_NETWORK_ERROR"),payload:$s}).or(ft.extend({type:ht("FRAME_SWITCH_NETWORK_SUCCESS"),payload:pUe})).or(ft.extend({type:ht("FRAME_CONNECT_EMAIL_SUCCESS"),payload:iUe})).or(ft.extend({type:ht("FRAME_CONNECT_EMAIL_ERROR"),payload:$s})).or(ft.extend({type:ht("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:oUe})).or(ft.extend({type:ht("FRAME_GET_FARCASTER_URI_ERROR"),payload:$s})).or(ft.extend({type:ht("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:aUe})).or(ft.extend({type:ht("FRAME_CONNECT_FARCASTER_ERROR"),payload:$s})).or(ft.extend({type:ht("FRAME_CONNECT_OTP_ERROR"),payload:$s})).or(ft.extend({type:ht("FRAME_CONNECT_OTP_SUCCESS")})).or(ft.extend({type:ht("FRAME_CONNECT_DEVICE_ERROR"),payload:$s})).or(ft.extend({type:ht("FRAME_CONNECT_DEVICE_SUCCESS")})).or(ft.extend({type:ht("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:cUe})).or(ft.extend({type:ht("FRAME_CONNECT_SOCIAL_ERROR"),payload:$s})).or(ft.extend({type:ht("FRAME_GET_USER_ERROR"),payload:$s})).or(ft.extend({type:ht("FRAME_GET_USER_SUCCESS"),payload:uUe})).or(ft.extend({type:ht("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:$s})).or(ft.extend({type:ht("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:dUe})).or(ft.extend({type:ht("FRAME_SIGN_OUT_ERROR"),payload:$s})).or(ft.extend({type:ht("FRAME_SIGN_OUT_SUCCESS")})).or(ft.extend({type:ht("FRAME_IS_CONNECTED_ERROR"),payload:$s})).or(ft.extend({type:ht("FRAME_IS_CONNECTED_SUCCESS"),payload:hUe})).or(ft.extend({type:ht("FRAME_GET_CHAIN_ID_ERROR"),payload:$s})).or(ft.extend({type:ht("FRAME_GET_CHAIN_ID_SUCCESS"),payload:fUe})).or(ft.extend({type:ht("FRAME_RPC_REQUEST_ERROR"),payload:$s})).or(ft.extend({type:ht("FRAME_RPC_REQUEST_SUCCESS"),payload:bUe})).or(ft.extend({type:ht("FRAME_SESSION_UPDATE"),payload:Jz})).or(ft.extend({type:ht("FRAME_UPDATE_EMAIL_ERROR"),payload:$s})).or(ft.extend({type:ht("FRAME_UPDATE_EMAIL_SUCCESS"),payload:lUe})).or(ft.extend({type:ht("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:$s})).or(ft.extend({type:ht("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(ft.extend({type:ht("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:$s})).or(ft.extend({type:ht("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:gUe})).or(ft.extend({type:ht("FRAME_SYNC_THEME_ERROR"),payload:$s})).or(ft.extend({type:ht("FRAME_SYNC_THEME_SUCCESS")})).or(ft.extend({type:ht("FRAME_SYNC_DAPP_DATA_ERROR"),payload:$s})).or(ft.extend({type:ht("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(ft.extend({type:ht("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:mUe})).or(ft.extend({type:ht("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:$s})).or(ft.extend({type:ht("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:$s})).or(ft.extend({type:ht("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:wUe})).or(ft.extend({type:ht("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:$s})).or(ft.extend({type:ht("FRAME_READY"),payload:yUe})).or(ft.extend({type:ht("FRAME_RELOAD_ERROR"),payload:$s})).or(ft.extend({type:ht("FRAME_RELOAD_SUCCESS")}))};function _3(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}let h5e=class{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=dt.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!_3(mt.FRAME_EVENT_KEY,l))return;const u=E1.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}$c.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{$c.isClient&&window.addEventListener("message",({data:o})=>{if(!_3(mt.FRAME_EVENT_KEY,o))return;const a=E1.frameEvent.parse(o);i(a)})},onAppEvent:i=>{$c.isClient&&window.addEventListener("message",({data:o})=>{if(!_3(mt.APP_EVENT_KEY,o))return;const a=E1.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if($c.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");E1.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if($c.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");E1.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),$c.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${zke}?projectId=${e}&chainId=${r}&version=${Gke}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}},f5e=class{constructor(e){var i;const n=mw({level:Hke}),{logger:r,chunkLoggerController:s}=vP({opts:n});this.logger=bo(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}},p5e=class{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new f5e(e)),this.abortController=i,this.w3mFrame=new h5e({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===mt.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Ji.get(mt.EMAIL_LOGIN_USED_KEY)}getEmail(){return Ji.get(mt.EMAIL)}getUsername(){return Ji.get(mt.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:mt.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{$c.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:mt.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:mt.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:mt.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:mt.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:mt.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:mt.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:mt.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:mt.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:mt.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:mt.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:mt.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:mt.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:mt.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:mt.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:mt.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:mt.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:mt.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:mt.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:mt.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:mt.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(go.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:mt.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===mt.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===mt.FRAME_IS_CONNECTED_ERROR&&e(),n.type===mt.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===mt.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===mt.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===mt.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===mt.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:go.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===mt.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===mt.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{go.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[mt.APP_SYNC_DAPP_DATA,mt.APP_SYNC_THEME,mt.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[mt.APP_CONNECT_EMAIL,mt.APP_CONNECT_DEVICE,mt.APP_CONNECT_OTP,mt.APP_CONNECT_SOCIAL,mt.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},3e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const m=e;this.openRpcRequests=[...this.openRpcRequests,{...m.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(m,y){var w,C,N;m.id===u&&((C=y==null?void 0:(w=y.logger).info)==null||C.call(w,{framEvent:m,id:u},"Received frame response"),m.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in m&&c(m.payload),c(void 0)):m.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in m&&l(new Error(((N=m.payload)==null?void 0:N.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,m=>h(m,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Ji.set(mt.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Ji.set(mt.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Ji.set(mt.EMAIL,e),Ji.set(mt.EMAIL_LOGIN_USED_KEY,"true"),Ji.delete(mt.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Ji.delete(mt.EMAIL_LOGIN_USED_KEY),Ji.delete(mt.EMAIL),Ji.delete(mt.LAST_USED_CHAIN_KEY),Ji.delete(mt.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Ji.set(mt.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Ji.get(mt.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Ji.set(mt.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}},g5e=class yT{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return yT.instance||(yT.instance=new p5e({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),yT.instance}};function m5e(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Ri(t,...e){try{return m5e(t(...e))}catch(n){return Promise.reject(n)}}function y5e(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function w5e(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function wT(t){if(y5e(t))return String(t);if(w5e(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return wT(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const qU="base64:";function b5e(t){return typeof t=="string"?t:qU+C5e(t)}function v5e(t){return typeof t!="string"||!t.startsWith(qU)?t:E5e(t.slice(qU.length))}function E5e(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function C5e(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Ma(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function _5e(...t){return Ma(t.join(":"))}function fx(t){return t=Ma(t),t?t+":":""}function A5e(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function S5e(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const I5e="memory",N5e=()=>{const t=new Map;return{name:I5e,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function x5e(t={}){const e={mounts:{"":t.driver||N5e()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=Ma(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await Zz(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",m=Ma(g?p:p.key),y=g?void 0:p.value,w=g||!p.options?u:{...u,...p.options},C=n(m);f(C).items.push({key:m,value:y,relativeKey:C.relativeKey,options:w})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=Ma(l);const{relativeKey:d,driver:h}=n(l);return Ri(h.hasItem,d,u)},getItem(l,u={}){l=Ma(l);const{relativeKey:d,driver:h}=n(l);return Ri(h.getItem,d,u).then(f=>ox(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?Ri(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:_5e(d.base,f.key),value:ox(f.value)}))):Promise.all(d.items.map(h=>Ri(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:ox(f)})))))},getItemRaw(l,u={}){l=Ma(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?Ri(h.getItemRaw,d,u):Ri(h.getItem,d,u).then(f=>v5e(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Ma(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await Ri(f.setItem,h,wT(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return Ri(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:wT(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>Ri(d.driver.setItem,h.relativeKey,wT(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Ma(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await Ri(f.setItemRaw,h,u,d);else if(f.setItem)await Ri(f.setItem,h,b5e(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Ma(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await Ri(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await Ri(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Ma(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await Ri(h.getMeta,d,u)),!u.nativeOnly){const p=await Ri(h.getItem,d+"$",u).then(g=>ox(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var m;l=fx(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const y of d){(m=y.driver.flags)!=null&&m.maxDepth||(p=!1);const w=await Ri(y.driver.getKeys,y.relativeBase,u);for(const C of w){const N=y.mountpoint+Ma(C);h.some(I=>N.startsWith(I))||f.push(N)}h=[y.mountpoint,...h.filter(C=>!C.startsWith(y.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(y=>(!g||A5e(y,u.maxDepth))&&S5e(y,l))},async clear(l,u={}){l=fx(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return Ri(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>Xz(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=fx(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(Zz(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=fx(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await Xz(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Ma(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Ma(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function Zz(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function Xz(t){typeof t.dispose=="function"&&await Ri(t.dispose)}const T5e="idb-keyval";var R5e=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=wre(t.dbName,t.storeName)),{name:T5e,options:t,async hasItem(s){return!(typeof await nz(n(s),r)>"u")},async getItem(s){return await nz(n(s),r)??null},setItem(s,i){return q2e(n(s),i,r)},removeItem(s){return V2e(n(s),r)},getKeys(){return Q2e(r)},clear(){return K2e(r)}}};const k5e="WALLET_CONNECT_V2_INDEXED_DB",P5e="keyvaluestorage";let O5e=class{constructor(){this.indexedDb=x5e({driver:R5e({dbName:k5e,storeName:P5e})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,Pf(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var A3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bT={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof A3<"u"&&A3.localStorage?bT.exports=A3.localStorage:typeof window<"u"&&window.localStorage?bT.exports=window.localStorage:bT.exports=new e})();function D5e(t){var e;return[t[0],$0((e=t[1])!=null?e:"")]}let M5e=class{constructor(){this.localStorage=bT.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(D5e)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return $0(n)}async setItem(e,n){this.localStorage.setItem(e,Pf(n))}async removeItem(e){this.localStorage.removeItem(e)}};const B5e="wc_storage_version",eH=1,L5e=async(t,e,n)=>{const r=B5e,s=await e.getItem(r);if(s&&s>=eH){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,eH),n(e),U5e(t,o)},U5e=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let $5e=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new M5e;this.storage=e;try{const n=new O5e;L5e(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var F5e=Object.defineProperty,j5e=(t,e,n)=>e in t?F5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tH=(t,e,n)=>j5e(t,typeof e!="symbol"?e+"":e,n);let W5e=class extends fw{constructor(e){super(),this.opts=e,tH(this,"protocol","wc"),tH(this,"version",2)}};var z5e=Object.defineProperty,H5e=(t,e,n)=>e in t?z5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,G5e=(t,e,n)=>H5e(t,e+"",n);let q5e=class extends fw{constructor(e,n){super(),this.core=e,this.logger=n,G5e(this,"records",new Map)}},V5e=class{constructor(e,n){this.logger=e,this.core=n}},K5e=class extends fw{constructor(e,n){super(),this.relayer=e,this.logger=n}},Y5e=class extends fw{constructor(e){super()}},Q5e=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},J5e=class extends fw{constructor(e,n){super(),this.relayer=e,this.logger=n}},Z5e=class extends fw{constructor(e,n){super(),this.core=e,this.logger=n}},X5e=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},e6e=class{constructor(e,n){this.projectId=e,this.logger=n}},t6e=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var n6e=Object.defineProperty,r6e=(t,e,n)=>e in t?n6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nH=(t,e,n)=>r6e(t,typeof e!="symbol"?e+"":e,n);let s6e=class{constructor(e){this.opts=e,nH(this,"protocol","wc"),nH(this,"version",2)}},i6e=class{constructor(e){this.client=e}};function gS(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function rH(t){return gS(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const vse="2.23.2";let C1={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${vse}`};class H0 extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof H0?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof H0&&n.cause.docsPath||n.docsPath,i=(a=C1.getDocsUrl)==null?void 0:a.call(C1,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...C1.version?[`Version: ${C1.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=vse}walk(e){return Ese(this,e)}}function Ese(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?Ese(t.cause,e):e?null:t}class Cse extends H0{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function BC(t,{dir:e,size:n=32}={}){return typeof t=="string"?o6e(t,{dir:e,size:n}):a6e(t,{dir:e,size:n})}function o6e(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new Cse({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function a6e(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new Cse({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class c6e extends H0{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class l6e extends H0{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function LC(t,{size:e}){if(rH(t)>e)throw new l6e({givenSize:rH(t),maxSize:e})}function VU(t,e={}){const{signed:n}=e;e.size&&LC(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function u6e(t,e={}){return Number(VU(t,e))}const d6e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function KU(t,e={}){return typeof t=="number"||typeof t=="bigint"?Ase(t,e):typeof t=="string"?p6e(t,e):typeof t=="boolean"?h6e(t,e):_se(t,e)}function h6e(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(LC(n,{size:e.size}),BC(n,{size:e.size})):n}function _se(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=d6e[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(LC(r,{size:e.size}),BC(r,{dir:"right",size:e.size})):r}function Ase(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new c6e({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?BC(a,{size:r}):a}const f6e=new TextEncoder;function p6e(t,e={}){const n=f6e.encode(t);return _se(n,e)}const g6e=new TextEncoder;function m6e(t,e={}){return typeof t=="number"||typeof t=="bigint"?w6e(t,e):typeof t=="boolean"?y6e(t,e):gS(t)?Sse(t,e):Ise(t,e)}function y6e(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(LC(n,{size:e.size}),BC(n,{size:e.size})):n}const Ih={zero:48,nine:57,A:65,F:70,a:97,f:102};function sH(t){if(t>=Ih.zero&&t<=Ih.nine)return t-Ih.zero;if(t>=Ih.A&&t<=Ih.F)return t-(Ih.A-10);if(t>=Ih.a&&t<=Ih.f)return t-(Ih.a-10)}function Sse(t,e={}){let n=t;e.size&&(LC(n,{size:e.size}),n=BC(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=sH(r.charCodeAt(a++)),l=sH(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new H0(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function w6e(t,e){const n=Ase(t,e);return Sse(n)}function Ise(t,e={}){const n=g6e.encode(t);return typeof e.size=="number"?(LC(n,{size:e.size}),BC(n,{dir:"right",size:e.size})):n}function dk(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function b6e(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function kP(t,...e){if(!b6e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Bot(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");dk(t.outputLen),dk(t.blockLen)}function iH(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function v6e(t,e){kP(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const px=BigInt(2**32-1),oH=BigInt(32);function E6e(t,e=!1){return e?{h:Number(t&px),l:Number(t>>oH&px)}:{h:Number(t>>oH&px)|0,l:Number(t&px)|0}}function C6e(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=E6e(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const _6e=(t,e,n)=>t<<n|e>>>32-n,A6e=(t,e,n)=>e<<n|t>>>32-n,S6e=(t,e,n)=>e<<n-32|t>>>64-n,I6e=(t,e,n)=>t<<n-32|e>>>64-n,Gw=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function N6e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Lot(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Uot(t,e){return t<<32-e|t>>>e}const aH=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function x6e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function cH(t){for(let e=0;e<t.length;e++)t[e]=x6e(t[e])}function T6e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Nse(t){return typeof t=="string"&&(t=T6e(t)),kP(t),t}function $ot(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];kP(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let R6e=class{clone(){return this._cloneInto()}};function k6e(t){const e=r=>t().update(Nse(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function jot(t=32){if(Gw&&typeof Gw.getRandomValues=="function")return Gw.getRandomValues(new Uint8Array(t));if(Gw&&typeof Gw.randomBytes=="function")return Gw.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const xse=[],Tse=[],Rse=[],P6e=BigInt(0),_1=BigInt(1),O6e=BigInt(2),D6e=BigInt(7),M6e=BigInt(256),B6e=BigInt(113);for(let t=0,e=_1,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],xse.push(2*(5*r+n)),Tse.push((t+1)*(t+2)/2%64);let s=P6e;for(let i=0;i<7;i++)e=(e<<_1^(e>>D6e)*B6e)%M6e,e&O6e&&(s^=_1<<(_1<<BigInt(i))-_1);Rse.push(s)}const[L6e,U6e]=C6e(Rse,!0),lH=(t,e,n)=>n>32?S6e(t,e,n):_6e(t,e,n),uH=(t,e,n)=>n>32?I6e(t,e,n):A6e(t,e,n);function $6e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=lH(l,u,1)^n[a],h=uH(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Tse[o],c=lH(s,i,a),l=uH(s,i,a),u=xse[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=L6e[r],t[1]^=U6e[r]}n.fill(0)}let F6e=class kse extends R6e{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,dk(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=N6e(this.state)}keccak(){aH||cH(this.state32),$6e(this.state32,this.rounds),aH||cH(this.state32),this.posOut=0,this.pos=0}update(e){iH(this);const{blockLen:n,state:r}=this;e=Nse(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){iH(this,!1),kP(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return dk(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(v6e(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new kse(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const j6e=(t,e,n)=>k6e(()=>new F6e(e,t,n)),W6e=j6e(1,136,256/8);function Pse(t,e){const n=e||"hex",r=W6e(gS(t,{strict:!1})?m6e(t):t);return n==="bytes"?r:KU(r)}class z6e extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const S3=new z6e(8192);function H6e(t,e){if(S3.has(`${t}.${e}`))return S3.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=Pse(Ise(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return S3.set(`${t}.${e}`,i),i}function G6e(t){const e=Pse(`0x${t.substring(4)}`).substring(26);return H6e(`0x${e}`)}async function q6e({hash:t,signature:e}){const n=gS(t)?t:KU(t),{secp256k1:r}=await no(async()=>{const{secp256k1:o}=await import("./secp256k1-CqvTm_4Z.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=dH(f);return new r.Signature(VU(l),VU(u)).addRecoveryBit(p)}const o=gS(e)?e:KU(e),a=u6e(`0x${o.slice(130)}`),c=dH(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function dH(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function V6e({hash:t,signature:e}){return G6e(await q6e({hash:t,signature:e}))}var K6e={};const Y6e=":";function dv(t){const[e,n]=t.split(Y6e);return{namespace:e,reference:n}}function Ose(t,e){return t.includes(":")?[t]:e.chains||[]}var Q6e=Object.defineProperty,J6e=Object.defineProperties,Z6e=Object.getOwnPropertyDescriptors,hH=Object.getOwnPropertySymbols,X6e=Object.prototype.hasOwnProperty,e8e=Object.prototype.propertyIsEnumerable,fH=(t,e,n)=>e in t?Q6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pH=(t,e)=>{for(var n in e||(e={}))X6e.call(e,n)&&fH(t,n,e[n]);if(hH)for(var n of hH(e))e8e.call(e,n)&&fH(t,n,e[n]);return t},t8e=(t,e)=>J6e(t,Z6e(e));const n8e="ReactNative",Wc={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},r8e="js";function hk(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Sm(){return!F0()&&!!b4()&&navigator.product===n8e}function s8e(){return Sm()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function i8e(){return Sm()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function UC(){return!hk()&&!!b4()&&!!F0()}function qI(){return Sm()?Wc.reactNative:hk()?Wc.node:UC()?Wc.browser:Wc.unknown}function gH(){var t;try{return Sm()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function o8e(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function a8e(t){var e,n;const r=Dse();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),t8e(pH(pH({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function Dse(){return Zre()||{name:"",description:"",url:"",icons:[""]}}function c8e(){if(qI()===Wc.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=A3e();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function l8e(){var t;const e=qI();return e===Wc.browser?[e,((t=Jre())==null?void 0:t.host)||"unknown"].join(":"):e}function Mse(t,e,n){const r=c8e(),s=l8e();return[[t,e].join("-"),[r8e,n].join("-"),r,s].join("/")}function u8e({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=Mse(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=o8e(l[1]||"",d);return l[0]+"?"+h}function Iy(t,e){return t.filter(n=>e.includes(n)).length===t.length}function YU(t){return Object.fromEntries(t.entries())}function QU(t){return new Map(Object.entries(t))}function Jm(t=je.FIVE_MINUTES,e){const n=je.toMiliseconds(t||je.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function bg(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function Bse(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function d8e(t){return Bse("topic",t)}function h8e(t){return Bse("id",t)}function Lse(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function gi(t,e){return je.fromMiliseconds(Date.now()+je.toMiliseconds(t))}function Pp(t){return Date.now()>=je.toMiliseconds(t)}function _r(t,e){return`${t}${e?`:${e}`:""}`}function Qd(t=[],e=[]){return[...new Set([...t,...e])]}async function f8e({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=p8e(i,t,e),a=qI();if(a===Wc.browser){if(!((r=F0())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}g8e(o)}else a===Wc.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function p8e(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${b8e(r,!0)}`}else s=`${s}/wc?${r}`;return s}function g8e(t){let e="_self";w8e()?e="_top":(y8e()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function m8e(t,e){let n="";try{if(UC()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function mH(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function yH(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function A4(){return typeof process<"u"&&K6e.IS_VITEST==="true"}function y8e(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function w8e(){try{return window.self!==window.top}catch{return!1}}function b8e(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function Use(t){return Buffer.from(t,"base64").toString("utf-8")}function v8e(t){return new Promise(e=>setTimeout(e,t))}function mS(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function E8e(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function VI(t,...e){if(!E8e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function S4(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");mS(t.outputLen),mS(t.blockLen)}function GE(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function $se(t,e){VI(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const gx=BigInt(2**32-1),wH=BigInt(32);function C8e(t,e=!1){return e?{h:Number(t&gx),l:Number(t>>wH&gx)}:{h:Number(t>>wH&gx)|0,l:Number(t&gx)|0}}function _8e(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=C8e(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const A8e=(t,e,n)=>t<<n|e>>>32-n,S8e=(t,e,n)=>e<<n|t>>>32-n,I8e=(t,e,n)=>e<<n-32|t>>>64-n,N8e=(t,e,n)=>t<<n-32|e>>>64-n,qw=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function x8e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function I3(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function id(t,e){return t<<32-e|t>>>e}const bH=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function T8e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function vH(t){for(let e=0;e<t.length;e++)t[e]=T8e(t[e])}function R8e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function qE(t){return typeof t=="string"&&(t=R8e(t)),VI(t),t}function k8e(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];VI(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let I4=class{clone(){return this._cloneInto()}};function Fse(t){const e=r=>t().update(qE(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function $C(t=32){if(qw&&typeof qw.getRandomValues=="function")return qw.getRandomValues(new Uint8Array(t));if(qw&&typeof qw.randomBytes=="function")return qw.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const jse=[],Wse=[],zse=[],P8e=BigInt(0),A1=BigInt(1),O8e=BigInt(2),D8e=BigInt(7),M8e=BigInt(256),B8e=BigInt(113);for(let t=0,e=A1,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],jse.push(2*(5*r+n)),Wse.push((t+1)*(t+2)/2%64);let s=P8e;for(let i=0;i<7;i++)e=(e<<A1^(e>>D8e)*B8e)%M8e,e&O8e&&(s^=A1<<(A1<<BigInt(i))-A1);zse.push(s)}const[L8e,U8e]=_8e(zse,!0),EH=(t,e,n)=>n>32?I8e(t,e,n):A8e(t,e,n),CH=(t,e,n)=>n>32?N8e(t,e,n):S8e(t,e,n);function $8e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=EH(l,u,1)^n[a],h=CH(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Wse[o],c=EH(s,i,a),l=CH(s,i,a),u=jse[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=L8e[r],t[1]^=U8e[r]}n.fill(0)}let F8e=class Hse extends I4{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,mS(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=x8e(this.state)}keccak(){bH||vH(this.state32),$8e(this.state32,this.rounds),bH||vH(this.state32),this.posOut=0,this.pos=0}update(e){GE(this);const{blockLen:n,state:r}=this;e=qE(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){GE(this,!1),VI(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return mS(e),this.xofInto(new Uint8Array(e))}digestInto(e){if($se(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Hse(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const j8e=(t,e,n)=>Fse(()=>new F8e(e,t,n)),W8e=j8e(1,136,256/8),z8e="https://rpc.walletconnect.org/v1";function Gse(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(W8e(n)).toString("hex")}async function H8e(t,e,n,r,s,i){switch(n.t){case"eip191":return await G8e(t,e,n.s);case"eip1271":return await q8e(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function G8e(t,e,n){return(await V6e({hash:Gse(e),signature:n})).toLowerCase()===t.toLowerCase()}async function q8e(t,e,n,r,s,i){const o=dv(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=Gse(e).substring(2),h=a+d+c+l+u,f=await fetch(`${i||z8e}/?chainId=${r}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:V8e(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function V8e(){return Date.now()+Math.floor(Math.random()*1e3)}function K8e(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return Ka.encode(i)}var Y8e=Object.defineProperty,Q8e=Object.defineProperties,J8e=Object.getOwnPropertyDescriptors,_H=Object.getOwnPropertySymbols,Z8e=Object.prototype.hasOwnProperty,X8e=Object.prototype.propertyIsEnumerable,AH=(t,e,n)=>e in t?Y8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,e$e=(t,e)=>{for(var n in e||(e={}))Z8e.call(e,n)&&AH(t,n,e[n]);if(_H)for(var n of _H(e))X8e.call(e,n)&&AH(t,n,e[n]);return t},t$e=(t,e)=>Q8e(t,J8e(e));const n$e="did:pkh:",N4=t=>t==null?void 0:t.split(":"),r$e=t=>{const e=t&&N4(t);if(e)return t.includes(n$e)?e[3]:e[1]},JU=t=>{const e=t&&N4(t);if(e)return e[2]+":"+e[3]},fk=t=>{const e=t&&N4(t);if(e)return e.pop()};async function SH(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=qse(s,s.iss),o=fk(s.iss);return await H8e(o,i,r,JU(s.iss),n)}const qse=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=fk(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${r$e(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=vT(t.resources);if(p){const g=yS(p);s=h$e(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function s$e(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function i$e(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function G0(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function o$e(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:a$e(e,n,r)}}}function a$e(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function Vse(t){return G0(t),`urn:recap:${s$e(t).replace(/=/g,"")}`}function yS(t){const e=i$e(t.replace("urn:recap:",""));return G0(e),e}function c$e(t,e,n){const r=o$e(t,e,n);return Vse(r)}function l$e(t){return t&&t.includes("urn:recap:")}function u$e(t,e){const n=yS(t),r=yS(e),s=d$e(n,r);return Vse(s)}function d$e(t,e){G0(t),G0(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=t$e(e$e({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function h$e(t="",e){G0(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function IH(t){var e;const n=yS(t);G0(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function NH(t){const e=yS(t);G0(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function vT(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return l$e(e)?e:void 0}function N3(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Kse(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Dc(t,...e){if(!Kse(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function xH(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function f$e(t,e){Dc(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function TH(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const Hg=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),p$e=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),g$e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!g$e)throw new Error("Non little-endian hardware is not supported");function m$e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function ZU(t){if(typeof t=="string")t=m$e(t);else if(Kse(t))t=XU(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function y$e(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function w$e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const b$e=(t,e)=>{function n(r,...s){if(Dc(r),t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Dc(l):Dc(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Dc(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Dc(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Dc(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Dc(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function RH(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!v$e(e))throw new Error("invalid output, must be aligned");return e}function kH(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function v$e(t){return t.byteOffset%4===0}function XU(t){return Uint8Array.from(t)}function VE(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const Yse=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),E$e=Yse("expand 16-byte k"),C$e=Yse("expand 32-byte k"),_$e=Hg(E$e),A$e=Hg(C$e);function ar(t,e){return t<<e|t>>>32-e}function e5(t){return t.byteOffset%4===0}const mx=64,S$e=16,Qse=2**32-1,PH=new Uint32Array;function I$e(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(mx),u=Hg(l),d=e5(s)&&e5(i),h=d?Hg(s):PH,f=d?Hg(i):PH;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=Qse)throw new Error("arx: counter overflow");const g=Math.min(mx,c-p);if(d&&g===mx){const m=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let y=0,w;y<S$e;y++)w=m+y,f[w]=h[w]^u[y];p+=mx;continue}for(let m=0,y;m<g;m++)y=p+m,i[y]=s[y]^l[m];p+=g}}function N$e(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=y$e({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return N3(s),N3(o),TH(i),TH(n),(a,c,l,u,d=0)=>{Dc(a),Dc(c),Dc(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),Dc(u),N3(d),d<0||d>=Qse)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,m;if(p===32)f.push(g=XU(a)),m=A$e;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),m=_$e,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);e5(c)||f.push(c=XU(c));const y=Hg(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(m,y,Hg(c.subarray(0,16)),y),c=c.subarray(16)}const w=16-s;if(w!==c.length)throw new Error(`arx: nonce must be ${w} or 16 bytes`);if(w!==12){const N=new Uint8Array(12);N.set(c,i?0:12-c.length),c=N,f.push(c)}const C=Hg(c);return I$e(t,m,y,C,l,u,d,o),VE(...f),u}}const Vi=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class x$e{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=ZU(e),Dc(e,32);const n=Vi(e,0),r=Vi(e,2),s=Vi(e,4),i=Vi(e,6),o=Vi(e,8),a=Vi(e,10),c=Vi(e,12),l=Vi(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Vi(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],m=o[9],y=Vi(e,n+0),w=Vi(e,n+2),C=Vi(e,n+4),N=Vi(e,n+6),I=Vi(e,n+8),k=Vi(e,n+10),P=Vi(e,n+12),U=Vi(e,n+14);let M=i[0]+(y&8191),W=i[1]+((y>>>13|w<<3)&8191),j=i[2]+((w>>>10|C<<6)&8191),K=i[3]+((C>>>7|N<<9)&8191),$=i[4]+((N>>>4|I<<12)&8191),v=i[5]+(I>>>1&8191),E=i[6]+((I>>>14|k<<2)&8191),_=i[7]+((k>>>11|P<<5)&8191),O=i[8]+((P>>>8|U<<8)&8191),x=i[9]+(U>>>5|s),B=0,F=B+M*a+W*(5*m)+j*(5*g)+K*(5*p)+$*(5*f);B=F>>>13,F&=8191,F+=v*(5*h)+E*(5*d)+_*(5*u)+O*(5*l)+x*(5*c),B+=F>>>13,F&=8191;let L=B+M*c+W*a+j*(5*m)+K*(5*g)+$*(5*p);B=L>>>13,L&=8191,L+=v*(5*f)+E*(5*h)+_*(5*d)+O*(5*u)+x*(5*l),B+=L>>>13,L&=8191;let A=B+M*l+W*c+j*a+K*(5*m)+$*(5*g);B=A>>>13,A&=8191,A+=v*(5*p)+E*(5*f)+_*(5*h)+O*(5*d)+x*(5*u),B+=A>>>13,A&=8191;let H=B+M*u+W*l+j*c+K*a+$*(5*m);B=H>>>13,H&=8191,H+=v*(5*g)+E*(5*p)+_*(5*f)+O*(5*h)+x*(5*d),B+=H>>>13,H&=8191;let re=B+M*d+W*u+j*l+K*c+$*a;B=re>>>13,re&=8191,re+=v*(5*m)+E*(5*g)+_*(5*p)+O*(5*f)+x*(5*h),B+=re>>>13,re&=8191;let se=B+M*h+W*d+j*u+K*l+$*c;B=se>>>13,se&=8191,se+=v*a+E*(5*m)+_*(5*g)+O*(5*p)+x*(5*f),B+=se>>>13,se&=8191;let ge=B+M*f+W*h+j*d+K*u+$*l;B=ge>>>13,ge&=8191,ge+=v*c+E*a+_*(5*m)+O*(5*g)+x*(5*p),B+=ge>>>13,ge&=8191;let ae=B+M*p+W*f+j*h+K*d+$*u;B=ae>>>13,ae&=8191,ae+=v*l+E*c+_*a+O*(5*m)+x*(5*g),B+=ae>>>13,ae&=8191;let fe=B+M*g+W*p+j*f+K*h+$*d;B=fe>>>13,fe&=8191,fe+=v*u+E*l+_*c+O*a+x*(5*m),B+=fe>>>13,fe&=8191;let ye=B+M*m+W*g+j*p+K*f+$*h;B=ye>>>13,ye&=8191,ye+=v*d+E*u+_*l+O*c+x*a,B+=ye>>>13,ye&=8191,B=(B<<2)+B|0,B=B+F|0,F=B&8191,B=B>>>13,L+=B,i[0]=F,i[1]=L,i[2]=A,i[3]=H,i[4]=re,i[5]=se,i[6]=ge,i[7]=ae,i[8]=fe,i[9]=ye}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;VE(r)}update(e){xH(this);const{buffer:n,blockLen:r}=this;e=ZU(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){VE(this.h,this.r,this.buffer,this.pad)}digestInto(e){xH(this),f$e(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function T$e(t){const e=(r,s)=>t(s).update(ZU(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const R$e=T$e(t=>new x$e(t));function k$e(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],m=e[6],y=e[7],w=s,C=n[0],N=n[1],I=n[2],k=o,P=a,U=c,M=l,W=u,j=d,K=h,$=f,v=p,E=g,_=m,O=y,x=w,B=C,F=N,L=I;for(let H=0;H<i;H+=2)k=k+W|0,x=ar(x^k,16),v=v+x|0,W=ar(W^v,12),k=k+W|0,x=ar(x^k,8),v=v+x|0,W=ar(W^v,7),P=P+j|0,B=ar(B^P,16),E=E+B|0,j=ar(j^E,12),P=P+j|0,B=ar(B^P,8),E=E+B|0,j=ar(j^E,7),U=U+K|0,F=ar(F^U,16),_=_+F|0,K=ar(K^_,12),U=U+K|0,F=ar(F^U,8),_=_+F|0,K=ar(K^_,7),M=M+$|0,L=ar(L^M,16),O=O+L|0,$=ar($^O,12),M=M+$|0,L=ar(L^M,8),O=O+L|0,$=ar($^O,7),k=k+j|0,L=ar(L^k,16),_=_+L|0,j=ar(j^_,12),k=k+j|0,L=ar(L^k,8),_=_+L|0,j=ar(j^_,7),P=P+K|0,x=ar(x^P,16),O=O+x|0,K=ar(K^O,12),P=P+K|0,x=ar(x^P,8),O=O+x|0,K=ar(K^O,7),U=U+$|0,B=ar(B^U,16),v=v+B|0,$=ar($^v,12),U=U+$|0,B=ar(B^U,8),v=v+B|0,$=ar($^v,7),M=M+W|0,F=ar(F^M,16),E=E+F|0,W=ar(W^E,12),M=M+W|0,F=ar(F^M,8),E=E+F|0,W=ar(W^E,7);let A=0;r[A++]=o+k|0,r[A++]=a+P|0,r[A++]=c+U|0,r[A++]=l+M|0,r[A++]=u+W|0,r[A++]=d+j|0,r[A++]=h+K|0,r[A++]=f+$|0,r[A++]=p+v|0,r[A++]=g+E|0,r[A++]=m+_|0,r[A++]=y+O|0,r[A++]=w+x|0,r[A++]=C+B|0,r[A++]=N+F|0,r[A++]=I+L|0}const P$e=N$e(k$e,{counterRight:!1,counterLength:4,allowShortKeys:!1}),O$e=new Uint8Array(16),OH=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(O$e.subarray(n))},D$e=new Uint8Array(32);function DH(t,e,n,r,s){const i=t(e,n,D$e),o=R$e.create(i);s&&OH(o,s),OH(o,r);const a=new Uint8Array(16),c=p$e(a);kH(c,0,BigInt(s?s.length:0),!0),kH(c,8,BigInt(r.length),!0),o.update(a);const l=o.digest();return VE(i,a),l}const M$e=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=RH(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=DH(t,e,n,a,r);return i.set(c,o),VE(c),i},decrypt(s,i){i=RH(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=DH(t,e,n,o,r);if(!w$e(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),VE(c),i}}),Jse=b$e({blockSize:64,nonceLength:12,tagLength:16},M$e(P$e));let Zse=class extends I4{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,S4(e);const r=qE(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return GE(this),this.iHash.update(e),this}digestInto(e){GE(this),VI(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const PP=(t,e,n)=>new Zse(t,e).update(n).digest();PP.create=(t,e)=>new Zse(t,e);function B$e(t,e,n){return S4(t),n===void 0&&(n=new Uint8Array(t.outputLen)),PP(t,qE(n),qE(e))}const x3=new Uint8Array([0]),MH=new Uint8Array;function L$e(t,e,n,r=32){if(S4(t),mS(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/t.outputLen);n===void 0&&(n=MH);const i=new Uint8Array(s*t.outputLen),o=PP.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<s;l++)x3[0]=l+1,a.update(l===0?MH:c).update(n).update(x3).digestInto(c),i.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),x3.fill(0),i.slice(0,r)}const U$e=(t,e,n,r,s)=>L$e(t,B$e(t,e,n),r,s);function $$e(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function F$e(t,e,n){return t&e^~t&n}function j$e(t,e,n){return t&e^t&n^e&n}let W$e=class extends I4{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=I3(this.buffer)}update(e){GE(this);const{view:n,buffer:r,blockLen:s}=this;e=qE(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=I3(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){GE(this),$se(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;$$e(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=I3(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const z$e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),up=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),dp=new Uint32Array(64);class H$e extends W$e{constructor(){super(64,32,8,!1),this.A=up[0]|0,this.B=up[1]|0,this.C=up[2]|0,this.D=up[3]|0,this.E=up[4]|0,this.F=up[5]|0,this.G=up[6]|0,this.H=up[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)dp[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=dp[d-15],f=dp[d-2],p=id(h,7)^id(h,18)^h>>>3,g=id(f,17)^id(f,19)^f>>>10;dp[d]=g+dp[d-7]+p+dp[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=id(a,6)^id(a,11)^id(a,25),f=u+h+F$e(a,c,l)+z$e[d]+dp[d]|0,p=(id(r,2)^id(r,13)^id(r,22))+j$e(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){dp.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const KI=Fse(()=>new H$e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const OP=BigInt(0),DP=BigInt(1),G$e=BigInt(2);function q0(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function YI(t){if(!q0(t))throw new Error("Uint8Array expected")}function KE(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const q$e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function YE(t){YI(t);let e="";for(let n=0;n<t.length;n++)e+=q$e[t[n]];return e}function Wb(t){const e=t.toString(16);return e.length&1?"0"+e:e}function x4(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?OP:BigInt("0x"+t)}const Nh={_0:48,_9:57,A:65,F:70,a:97,f:102};function BH(t){if(t>=Nh._0&&t<=Nh._9)return t-Nh._0;if(t>=Nh.A&&t<=Nh.F)return t-(Nh.A-10);if(t>=Nh.a&&t<=Nh.f)return t-(Nh.a-10)}function QE(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=BH(t.charCodeAt(i)),a=BH(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function d0(t){return x4(YE(t))}function wS(t){return YI(t),x4(YE(Uint8Array.from(t).reverse()))}function JE(t,e){return QE(t.toString(16).padStart(e*2,"0"))}function MP(t,e){return JE(t,e).reverse()}function V$e(t){return QE(Wb(t))}function Pc(t,e,n){let r;if(typeof e=="string")try{r=QE(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(q0(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function bS(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];YI(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function K$e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function Y$e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const T3=t=>typeof t=="bigint"&&OP<=t;function BP(t,e,n){return T3(t)&&T3(e)&&T3(n)&&e<=t&&t<n}function wf(t,e,n,r){if(!BP(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Xse(t){let e;for(e=0;t>OP;t>>=DP,e+=1);return e}function Q$e(t,e){return t>>BigInt(e)&DP}function J$e(t,e,n){return t|(n?DP:OP)<<BigInt(e)}const T4=t=>(G$e<<BigInt(t-1))-DP,R3=t=>new Uint8Array(t),LH=t=>Uint8Array.from(t);function eie(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=R3(t),s=R3(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...u)=>n(s,r,...u),c=(u=R3())=>{s=a(LH([0]),u),r=a(),u.length!==0&&(s=a(LH([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return bS(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const Z$e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||q0(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function FC(t,e,n={}){const r=(s,i,o)=>{const a=Z$e[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const X$e=()=>{throw new Error("not implemented")};function t5(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}var e4e=Object.freeze({__proto__:null,isBytes:q0,abytes:YI,abool:KE,bytesToHex:YE,numberToHexUnpadded:Wb,hexToNumber:x4,hexToBytes:QE,bytesToNumberBE:d0,bytesToNumberLE:wS,numberToBytesBE:JE,numberToBytesLE:MP,numberToVarBytesBE:V$e,ensureBytes:Pc,concatBytes:bS,equalBytes:K$e,utf8ToBytes:Y$e,inRange:BP,aInRange:wf,bitLen:Xse,bitGet:Q$e,bitSet:J$e,bitMask:T4,createHmacDrbg:eie,validateObject:FC,notImplemented:X$e,memoized:t5});const Wi=BigInt(0),ri=BigInt(1),iy=BigInt(2),t4e=BigInt(3),n5=BigInt(4),UH=BigInt(5),$H=BigInt(8);function Ha(t,e){const n=t%e;return n>=Wi?n:e+n}function tie(t,e,n){if(e<Wi)throw new Error("invalid exponent, negatives unsupported");if(n<=Wi)throw new Error("invalid modulus");if(n===ri)return Wi;let r=ri;for(;e>Wi;)e&ri&&(r=r*t%n),t=t*t%n,e>>=ri;return r}function uu(t,e,n){let r=t;for(;e-- >Wi;)r*=r,r%=n;return r}function r5(t,e){if(t===Wi)throw new Error("invert: expected non-zero number");if(e<=Wi)throw new Error("invert: expected positive modulus, got "+e);let n=Ha(t,e),r=e,s=Wi,i=ri;for(;n!==Wi;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==ri)throw new Error("invert: does not exist");return Ha(s,e)}function n4e(t){const e=(t-ri)/iy;let n,r,s;for(n=t-ri,r=0;n%iy===Wi;n/=iy,r++);for(s=iy;s<t&&tie(s,e,t)!==t-ri;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+ri)/n5;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+ri)/iy;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,ri<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function r4e(t){if(t%n5===t4e){const e=(t+ri)/n5;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%$H===UH){const e=(t-UH)/$H;return function(n,r){const s=n.mul(r,iy),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,iy),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return n4e(t)}const s4e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function i4e(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=s4e.reduce((r,s)=>(r[s]="function",r),e);return FC(t,n)}function o4e(t,e,n){if(n<Wi)throw new Error("invalid exponent, negatives unsupported");if(n===Wi)return t.ONE;if(n===ri)return e;let r=t.ONE,s=e;for(;n>Wi;)n&ri&&(r=t.mul(r,s)),s=t.sqr(s),n>>=ri;return r}function a4e(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function nie(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function rie(t,e,n=!1,r={}){if(t<=Wi)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=nie(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:T4(s),ZERO:Wi,ONE:ri,create:c=>Ha(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Wi<=c&&c<t},is0:c=>c===Wi,isOdd:c=>(c&ri)===ri,neg:c=>Ha(-c,t),eql:(c,l)=>c===l,sqr:c=>Ha(c*c,t),add:(c,l)=>Ha(c+l,t),sub:(c,l)=>Ha(c-l,t),mul:(c,l)=>Ha(c*l,t),pow:(c,l)=>o4e(a,c,l),div:(c,l)=>Ha(c*r5(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>r5(c,t),sqrt:r.sqrt||(c=>(o||(o=r4e(t)),o(a,c))),invertBatch:c=>a4e(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?MP(c,i):JE(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?wS(c):d0(c)}});return Object.freeze(a)}function sie(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function iie(t){const e=sie(t);return e+Math.ceil(e/2)}function c4e(t,e,n=!1){const r=t.length,s=sie(e),i=iie(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?wS(t):d0(t),a=Ha(o,e-ri)+ri;return n?MP(a,s):JE(a,s)}const FH=BigInt(0),yx=BigInt(1);function k3(t,e){const n=e.negate();return t?n:e}function oie(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function P3(t,e){oie(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function l4e(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function u4e(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const O3=new WeakMap,aie=new WeakMap;function D3(t){return aie.get(t)||1}function d4e(t,e){return{constTimeNegate:k3,hasPrecomputes(n){return D3(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>FH;)r&yx&&(s=s.add(i)),i=i.double(),r>>=yx;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=P3(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=P3(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=yx);const g=f,m=f+Math.abs(p)-1,y=h%2!==0,w=p<0;p===0?c=c.add(k3(y,r[g])):a=a.add(k3(w,r[m]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=P3(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===FH)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=yx),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=O3.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&O3.set(r,s(i))),i},wNAFCached(n,r,s){const i=D3(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=D3(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){oie(r,e),aie.set(n,r),O3.delete(n)}}}function h4e(t,e,n,r){if(l4e(n,t),u4e(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=Xse(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function cie(t){return i4e(t.Fp),FC(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nie(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Vw=BigInt(0),M3=BigInt(1);function f4e(t){return FC(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function p4e(t){const e=f4e(t),{P:n}=e,r=w=>Ha(w,n),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(w=>w),c=e.powPminus2||(w=>tie(w,n-BigInt(2),n));function l(w,C,N){const I=r(w*(C-N));return C=r(C-I),N=r(N+I),[C,N]}const u=(e.a-BigInt(2))/BigInt(4);function d(w,C){wf("u",w,Vw,n),wf("scalar",C,Vw,n);const N=C,I=w;let k=M3,P=Vw,U=w,M=M3,W=Vw,j;for(let $=BigInt(s-1);$>=Vw;$--){const v=N>>$&M3;W^=v,j=l(W,k,U),k=j[0],U=j[1],j=l(W,P,M),P=j[0],M=j[1],W=v;const E=k+P,_=r(E*E),O=k-P,x=r(O*O),B=_-x,F=U+M,L=U-M,A=r(L*E),H=r(F*O),re=A+H,se=A-H;U=r(re*re),M=r(I*r(se*se)),k=r(_*x),P=r(B*(_+r(u*B)))}j=l(W,k,U),k=j[0],U=j[1],j=l(W,P,M),P=j[0],M=j[1];const K=c(P);return r(k*K)}function h(w){return MP(r(w),i)}function f(w){const C=Pc("u coordinate",w,i);return o===32&&(C[31]&=127),wS(C)}function p(w){const C=Pc("scalar",w),N=C.length;if(N!==i&&N!==o){let I=""+i+" or "+o;throw new Error("invalid scalar, expected "+I+" bytes, got "+N)}return wS(a(C))}function g(w,C){const N=f(C),I=p(w),k=d(N,I);if(k===Vw)throw new Error("invalid private or public key received");return h(k)}const m=h(e.Gu);function y(w){return g(w,m)}return{scalarMult:g,scalarMultBase:y,getSharedSecret:(w,C)=>g(w,C),getPublicKey:w=>y(w),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:m}}const s5=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const g4e=BigInt(1),jH=BigInt(2),m4e=BigInt(3),y4e=BigInt(5);BigInt(8);function w4e(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=s5,o=t*t%i*t%i,a=uu(o,jH,i)*o%i,c=uu(a,g4e,i)*t%i,l=uu(c,y4e,i)*c%i,u=uu(l,e,i)*l%i,d=uu(u,n,i)*u%i,h=uu(d,r,i)*d%i,f=uu(h,s,i)*h%i,p=uu(f,s,i)*h%i,g=uu(p,e,i)*l%i;return{pow_p_5_8:uu(g,jH,i)*t%i,b2:o}}function b4e(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const i5=p4e({P:s5,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=s5,{pow_p_5_8:n,b2:r}=w4e(t);return Ha(uu(n,m4e,e)*r,e)},adjustScalarBytes:b4e,randomBytes:$C});function WH(t){t.lowS!==void 0&&KE("lowS",t.lowS),t.prehash!==void 0&&KE("prehash",t.prehash)}function v4e(t){const e=cie(t);FC(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:E4e,hexToBytes:C4e}=e4e;class _4e extends Error{constructor(e=""){super(e)}}const Fh={Err:_4e,_tlv:{encode:(t,e)=>{const{Err:n}=Fh;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Wb(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Wb(s.length/2|128):"";return Wb(t)+i+s+e},decode(t,e){const{Err:n}=Fh;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Fh;if(t<nf)throw new e("integer: negative integers are not allowed");let n=Wb(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Fh;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return E4e(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Fh,s=typeof t=="string"?C4e(t):t;YI(s);const{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Fh,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},nf=BigInt(0),Pi=BigInt(1);BigInt(2);const zH=BigInt(3);BigInt(4);function A4e(t){const e=v4e(t),{Fp:n}=e,r=rie(e.n,e.nBitLength),s=e.toBytes||((g,m,y)=>{const w=m.toAffine();return bS(Uint8Array.from([4]),n.toBytes(w.x),n.toBytes(w.y))}),i=e.fromBytes||(g=>{const m=g.subarray(1),y=n.fromBytes(m.subarray(0,n.BYTES)),w=n.fromBytes(m.subarray(n.BYTES,2*n.BYTES));return{x:y,y:w}});function o(g){const{a:m,b:y}=e,w=n.sqr(g),C=n.mul(w,g);return n.add(n.add(C,n.mul(g,m)),y)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return BP(g,Pi,e.n)}function c(g){const{allowedPrivateKeyLengths:m,nByteLength:y,wrapPrivateKey:w,n:C}=e;if(m&&typeof g!="bigint"){if(q0(g)&&(g=YE(g)),typeof g!="string"||!m.includes(g.length))throw new Error("invalid private key");g=g.padStart(y*2,"0")}let N;try{N=typeof g=="bigint"?g:d0(Pc("private key",g,y))}catch{throw new Error("invalid private key, expected hex or "+y+" bytes, got "+typeof g)}return w&&(N=Ha(N,C)),wf("private key",N,Pi,C),N}function l(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const u=t5((g,m)=>{const{px:y,py:w,pz:C}=g;if(n.eql(C,n.ONE))return{x:y,y:w};const N=g.is0();m==null&&(m=N?n.ONE:n.inv(C));const I=n.mul(y,m),k=n.mul(w,m),P=n.mul(C,m);if(N)return{x:n.ZERO,y:n.ZERO};if(!n.eql(P,n.ONE))throw new Error("invZ was invalid");return{x:I,y:k}}),d=t5(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:m,y}=g.toAffine();if(!n.isValid(m)||!n.isValid(y))throw new Error("bad point: x or y not FE");const w=n.sqr(y),C=o(m);if(!n.eql(w,C))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(m,y,w){if(this.px=m,this.py=y,this.pz=w,m==null||!n.isValid(m))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(w==null||!n.isValid(w))throw new Error("z required");Object.freeze(this)}static fromAffine(m){const{x:y,y:w}=m||{};if(!m||!n.isValid(y)||!n.isValid(w))throw new Error("invalid affine point");if(m instanceof h)throw new Error("projective point not allowed");const C=N=>n.eql(N,n.ZERO);return C(y)&&C(w)?h.ZERO:new h(y,w,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const y=n.invertBatch(m.map(w=>w.pz));return m.map((w,C)=>w.toAffine(y[C])).map(h.fromAffine)}static fromHex(m){const y=h.fromAffine(i(Pc("pointHex",m)));return y.assertValidity(),y}static fromPrivateKey(m){return h.BASE.multiply(c(m))}static msm(m,y){return h4e(h,r,m,y)}_setWindowSize(m){p.setWindowSize(this,m)}assertValidity(){d(this)}hasEvenY(){const{y:m}=this.toAffine();if(n.isOdd)return!n.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){l(m);const{px:y,py:w,pz:C}=this,{px:N,py:I,pz:k}=m,P=n.eql(n.mul(y,k),n.mul(N,C)),U=n.eql(n.mul(w,k),n.mul(I,C));return P&&U}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:m,b:y}=e,w=n.mul(y,zH),{px:C,py:N,pz:I}=this;let k=n.ZERO,P=n.ZERO,U=n.ZERO,M=n.mul(C,C),W=n.mul(N,N),j=n.mul(I,I),K=n.mul(C,N);return K=n.add(K,K),U=n.mul(C,I),U=n.add(U,U),k=n.mul(m,U),P=n.mul(w,j),P=n.add(k,P),k=n.sub(W,P),P=n.add(W,P),P=n.mul(k,P),k=n.mul(K,k),U=n.mul(w,U),j=n.mul(m,j),K=n.sub(M,j),K=n.mul(m,K),K=n.add(K,U),U=n.add(M,M),M=n.add(U,M),M=n.add(M,j),M=n.mul(M,K),P=n.add(P,M),j=n.mul(N,I),j=n.add(j,j),M=n.mul(j,K),k=n.sub(k,M),U=n.mul(j,W),U=n.add(U,U),U=n.add(U,U),new h(k,P,U)}add(m){l(m);const{px:y,py:w,pz:C}=this,{px:N,py:I,pz:k}=m;let P=n.ZERO,U=n.ZERO,M=n.ZERO;const W=e.a,j=n.mul(e.b,zH);let K=n.mul(y,N),$=n.mul(w,I),v=n.mul(C,k),E=n.add(y,w),_=n.add(N,I);E=n.mul(E,_),_=n.add(K,$),E=n.sub(E,_),_=n.add(y,C);let O=n.add(N,k);return _=n.mul(_,O),O=n.add(K,v),_=n.sub(_,O),O=n.add(w,C),P=n.add(I,k),O=n.mul(O,P),P=n.add($,v),O=n.sub(O,P),M=n.mul(W,_),P=n.mul(j,v),M=n.add(P,M),P=n.sub($,M),M=n.add($,M),U=n.mul(P,M),$=n.add(K,K),$=n.add($,K),v=n.mul(W,v),_=n.mul(j,_),$=n.add($,v),v=n.sub(K,v),v=n.mul(W,v),_=n.add(_,v),K=n.mul($,_),U=n.add(U,K),K=n.mul(O,_),P=n.mul(E,P),P=n.sub(P,K),K=n.mul(E,$),M=n.mul(O,M),M=n.add(M,K),new h(P,U,M)}subtract(m){return this.add(m.negate())}is0(){return this.equals(h.ZERO)}wNAF(m){return p.wNAFCached(this,m,h.normalizeZ)}multiplyUnsafe(m){const{endo:y,n:w}=e;wf("scalar",m,nf,w);const C=h.ZERO;if(m===nf)return C;if(this.is0()||m===Pi)return this;if(!y||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,m,h.normalizeZ);let{k1neg:N,k1:I,k2neg:k,k2:P}=y.splitScalar(m),U=C,M=C,W=this;for(;I>nf||P>nf;)I&Pi&&(U=U.add(W)),P&Pi&&(M=M.add(W)),W=W.double(),I>>=Pi,P>>=Pi;return N&&(U=U.negate()),k&&(M=M.negate()),M=new h(n.mul(M.px,y.beta),M.py,M.pz),U.add(M)}multiply(m){const{endo:y,n:w}=e;wf("scalar",m,Pi,w);let C,N;if(y){const{k1neg:I,k1:k,k2neg:P,k2:U}=y.splitScalar(m);let{p:M,f:W}=this.wNAF(k),{p:j,f:K}=this.wNAF(U);M=p.constTimeNegate(I,M),j=p.constTimeNegate(P,j),j=new h(n.mul(j.px,y.beta),j.py,j.pz),C=M.add(j),N=W.add(K)}else{const{p:I,f:k}=this.wNAF(m);C=I,N=k}return h.normalizeZ([C,N])[0]}multiplyAndAddUnsafe(m,y,w){const C=h.BASE,N=(k,P)=>P===nf||P===Pi||!k.equals(C)?k.multiplyUnsafe(P):k.multiply(P),I=N(this,y).add(N(m,w));return I.is0()?void 0:I}toAffine(m){return u(this,m)}isTorsionFree(){const{h:m,isTorsionFree:y}=e;if(m===Pi)return!0;if(y)return y(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:y}=e;return m===Pi?this:y?y(h,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return KE("isCompressed",m),this.assertValidity(),s(h,this,m)}toHex(m=!0){return KE("isCompressed",m),YE(this.toRawBytes(m))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=d4e(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function S4e(t){const e=cie(t);return FC(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function I4e(t){const e=S4e(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(v){return Ha(v,r)}function a(v){return r5(v,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=A4e({...e,toBytes(v,E,_){const O=E.toAffine(),x=n.toBytes(O.x),B=bS;return KE("isCompressed",_),_?B(Uint8Array.from([E.hasEvenY()?2:3]),x):B(Uint8Array.from([4]),x,n.toBytes(O.y))},fromBytes(v){const E=v.length,_=v[0],O=v.subarray(1);if(E===s&&(_===2||_===3)){const x=d0(O);if(!BP(x,Pi,n.ORDER))throw new Error("Point is not on curve");const B=u(x);let F;try{F=n.sqrt(B)}catch(A){const H=A instanceof Error?": "+A.message:"";throw new Error("Point is not on curve"+H)}const L=(F&Pi)===Pi;return(_&1)===1!==L&&(F=n.neg(F)),{x,y:F}}else if(E===i&&_===4){const x=n.fromBytes(O.subarray(0,n.BYTES)),B=n.fromBytes(O.subarray(n.BYTES,2*n.BYTES));return{x,y:B}}else{const x=s,B=i;throw new Error("invalid Point, expected length of "+x+", or uncompressed "+B+", got "+E)}}}),h=v=>YE(JE(v,e.nByteLength));function f(v){const E=r>>Pi;return v>E}function p(v){return f(v)?o(-v):v}const g=(v,E,_)=>d0(v.slice(E,_));class m{constructor(E,_,O){this.r=E,this.s=_,this.recovery=O,this.assertValidity()}static fromCompact(E){const _=e.nByteLength;return E=Pc("compactSignature",E,_*2),new m(g(E,0,_),g(E,_,2*_))}static fromDER(E){const{r:_,s:O}=Fh.toSig(Pc("DER",E));return new m(_,O)}assertValidity(){wf("r",this.r,Pi,r),wf("s",this.s,Pi,r)}addRecoveryBit(E){return new m(this.r,this.s,E)}recoverPublicKey(E){const{r:_,s:O,recovery:x}=this,B=k(Pc("msgHash",E));if(x==null||![0,1,2,3].includes(x))throw new Error("recovery id invalid");const F=x===2||x===3?_+e.n:_;if(F>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const L=x&1?"03":"02",A=c.fromHex(L+h(F)),H=a(F),re=o(-B*H),se=o(O*H),ge=c.BASE.multiplyAndAddUnsafe(A,re,se);if(!ge)throw new Error("point at infinify");return ge.assertValidity(),ge}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return QE(this.toDERHex())}toDERHex(){return Fh.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return QE(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(v){try{return l(v),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const v=iie(e.n);return c4e(e.randomBytes(v),e.n)},precompute(v=8,E=c.BASE){return E._setWindowSize(v),E.multiply(BigInt(3)),E}};function w(v,E=!0){return c.fromPrivateKey(v).toRawBytes(E)}function C(v){const E=q0(v),_=typeof v=="string",O=(E||_)&&v.length;return E?O===s||O===i:_?O===2*s||O===2*i:v instanceof c}function N(v,E,_=!0){if(C(v))throw new Error("first arg must be private key");if(!C(E))throw new Error("second arg must be public key");return c.fromHex(E).multiply(l(v)).toRawBytes(_)}const I=e.bits2int||function(v){if(v.length>8192)throw new Error("input is too large");const E=d0(v),_=v.length*8-e.nBitLength;return _>0?E>>BigInt(_):E},k=e.bits2int_modN||function(v){return o(I(v))},P=T4(e.nBitLength);function U(v){return wf("num < 2^"+e.nBitLength,v,nf,P),JE(v,e.nByteLength)}function M(v,E,_=W){if(["recovered","canonical"].some(fe=>fe in _))throw new Error("sign() legacy options not supported");const{hash:O,randomBytes:x}=e;let{lowS:B,prehash:F,extraEntropy:L}=_;B==null&&(B=!0),v=Pc("msgHash",v),WH(_),F&&(v=Pc("prehashed msgHash",O(v)));const A=k(v),H=l(E),re=[U(H),U(A)];if(L!=null&&L!==!1){const fe=L===!0?x(n.BYTES):L;re.push(Pc("extraEntropy",fe))}const se=bS(...re),ge=A;function ae(fe){const ye=I(fe);if(!d(ye))return;const ve=a(ye),_e=c.BASE.multiply(ye).toAffine(),Se=o(_e.x);if(Se===nf)return;const Re=o(ve*o(ge+Se*H));if(Re===nf)return;let xe=(_e.x===Se?0:2)|Number(_e.y&Pi),Fe=Re;return B&&f(Re)&&(Fe=p(Re),xe^=1),new m(Se,Fe,xe)}return{seed:se,k2sig:ae}}const W={lowS:e.lowS,prehash:!1},j={lowS:e.lowS,prehash:!1};function K(v,E,_=W){const{seed:O,k2sig:x}=M(v,E,_),B=e;return eie(B.hash.outputLen,B.nByteLength,B.hmac)(O,x)}c.BASE._setWindowSize(8);function $(v,E,_,O=j){var Re;const x=v;E=Pc("msgHash",E),_=Pc("publicKey",_);const{lowS:B,prehash:F,format:L}=O;if(WH(O),"strict"in O)throw new Error("options.strict was renamed to lowS");if(L!==void 0&&L!=="compact"&&L!=="der")throw new Error("format must be compact or der");const A=typeof x=="string"||q0(x),H=!A&&!L&&typeof x=="object"&&x!==null&&typeof x.r=="bigint"&&typeof x.s=="bigint";if(!A&&!H)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let re,se;try{if(H&&(re=new m(x.r,x.s)),A){try{L!=="compact"&&(re=m.fromDER(x))}catch(xe){if(!(xe instanceof Fh.Err))throw xe}!re&&L!=="der"&&(re=m.fromCompact(x))}se=c.fromHex(_)}catch{return!1}if(!re||B&&re.hasHighS())return!1;F&&(E=e.hash(E));const{r:ge,s:ae}=re,fe=k(E),ye=a(ae),ve=o(fe*ye),_e=o(ge*ye),Se=(Re=c.BASE.multiplyAndAddUnsafe(se,ve,_e))==null?void 0:Re.toAffine();return Se?o(Se.x)===ge:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:N,sign:K,verify:$,ProjectivePoint:c,Signature:m,utils:y}}function N4e(t){return{hash:t,hmac:(e,...n)=>PP(t,e,k8e(...n)),randomBytes:$C}}function x4e(t,e){const n=r=>I4e({...t,...N4e(r)});return{...n(e),create:n}}const lie=rie(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),T4e=lie.create(BigInt("-3")),R4e=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),k4e=x4e({a:T4e,b:R4e,Fp:lie,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},KI),uie="base10",pa="base16",Bu="base64pad",Up="base64url",QI="utf8",die=0,bf=1,JI=2,P4e=0,HH=1,j_=12,R4=32;function O4e(){const t=i5.utils.randomPrivateKey(),e=i5.getPublicKey(t);return{privateKey:oc(t,pa),publicKey:oc(e,pa)}}function o5(){const t=$C(R4);return oc(t,pa)}function D4e(t,e){const n=i5.getSharedSecret(Dl(t,pa),Dl(e,pa)),r=U$e(KI,n,void 0,void 0,R4);return oc(r,pa)}function ET(t){const e=KI(Dl(t,pa));return oc(e,pa)}function Pd(t){const e=KI(Dl(t,QI));return oc(e,pa)}function hie(t){return Dl(`${t}`,uie)}function V0(t){return Number(oc(t,uie))}function fie(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function pie(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function M4e(t){const e=hie(typeof t.type<"u"?t.type:die);if(V0(e)===bf&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?Dl(t.senderPublicKey,pa):void 0,r=typeof t.iv<"u"?Dl(t.iv,pa):$C(j_),s=Dl(t.symKey,pa),i=Jse(s,r).encrypt(Dl(t.message,QI)),o=gie({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===Up?fie(o):o}function B4e(t){const e=Dl(t.symKey,pa),{sealed:n,iv:r}=vS({encoded:t.encoded,encoding:t.encoding}),s=Jse(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return oc(s,QI)}function L4e(t,e){const n=hie(JI),r=$C(j_),s=Dl(t,QI),i=gie({type:n,sealed:s,iv:r});return e===Up?fie(i):i}function U4e(t,e){const{sealed:n}=vS({encoded:t,encoding:e});return oc(n,QI)}function gie(t){if(V0(t.type)===JI)return oc(U_([t.type,t.sealed]),Bu);if(V0(t.type)===bf){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return oc(U_([t.type,t.senderPublicKey,t.iv,t.sealed]),Bu)}return oc(U_([t.type,t.iv,t.sealed]),Bu)}function vS(t){const e=(t.encoding||Bu)===Up?pie(t.encoded):t.encoded,n=Dl(e,Bu),r=n.slice(P4e,HH),s=HH;if(V0(r)===bf){const c=s+R4,l=c+j_,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(V0(r)===JI){const c=n.slice(s),l=$C(j_);return{type:r,sealed:c,iv:l}}const i=s+j_,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function $4e(t,e){const n=vS({encoded:t,encoding:e==null?void 0:e.encoding});return mie({type:V0(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?oc(n.senderPublicKey,pa):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function mie(t){const e=(t==null?void 0:t.type)||die;if(e===bf){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function GH(t){return t.type===bf&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function qH(t){return t.type===JI}function F4e(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return U_([new Uint8Array([4]),e,n])}function j4e(t,e){const[n,r,s]=t.split("."),i=Buffer.from(pie(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=KI(c),u=F4e(e);if(!k4e.verify(U_([o,a]),l,u))throw new Error("Invalid signature");return LU(t).payload}const W4e="irn";function pk(t){return(t==null?void 0:t.relay)||{protocol:W4e}}function X1(t){const e=$Me[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function z4e(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function VH(t){if(!t.includes("wc:")){const l=Use(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:H4e(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:z4e(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function H4e(t){return t.startsWith("//")?t.substring(2):t}function G4e(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function KH(t){const e=new URLSearchParams,n=G4e(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function wx(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var q4e=Object.defineProperty,V4e=Object.defineProperties,K4e=Object.getOwnPropertyDescriptors,YH=Object.getOwnPropertySymbols,Y4e=Object.prototype.hasOwnProperty,Q4e=Object.prototype.propertyIsEnumerable,QH=(t,e,n)=>e in t?q4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,J4e=(t,e)=>{for(var n in e||(e={}))Y4e.call(e,n)&&QH(t,n,e[n]);if(YH)for(var n of YH(e))Q4e.call(e,n)&&QH(t,n,e[n]);return t},Z4e=(t,e)=>V4e(t,K4e(e));function jC(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function X4e(t){const e=[];return Object.values(t).forEach(n=>{e.push(...jC(n.accounts))}),e}function eFe(t,e){const n=[];return Object.values(t).forEach(r=>{jC(r.accounts).includes(e)&&n.push(...r.methods)}),n}function tFe(t,e){const n=[];return Object.values(t).forEach(r=>{jC(r.accounts).includes(e)&&n.push(...r.events)}),n}function LP(t){return t.includes(":")}function zb(t){return LP(t)?t.split(":")[0]:t}function JH(t){var e,n,r;const s={};if(!qg(t))return s;for(const[i,o]of Object.entries(t)){const a=LP(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=zb(i);s[u]=Z4e(J4e({},s[u]),{chains:Qd(a,(e=s[u])==null?void 0:e.chains),methods:Qd(c,(n=s[u])==null?void 0:n.methods),events:Qd(l,(r=s[u])==null?void 0:r.events)})}return s}function nFe(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function ZH(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=nFe(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Qd(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function rFe(t,e){var n,r,s,i,o,a;const c=JH(t),l=JH(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:Qd((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:Qd((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:Qd((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const sFe={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},iFe={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function He(t,e){const{message:n,code:r}=iFe[t];return{message:e?`${n} ${e}`:n,code:r}}function Ur(t,e){const{message:n,code:r}=sFe[t];return{message:e?`${n} ${e}`:n,code:r}}function Gg(t,e){return!!Array.isArray(t)}function qg(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function ao(t){return typeof t>"u"}function ci(t,e){return e&&ao(t)?!0:typeof t=="string"&&!!t.trim().length}function k4(t,e){return e&&ao(t)?!0:typeof t=="number"&&!isNaN(t)}function oFe(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return Iy(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=jC(a),d=n[o];(!Iy(Ose(o,d),u)||!Iy(d.methods,c)||!Iy(d.events,l))&&(i=!1)}),i):!1}function gk(t){return ci(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function aFe(t){if(ci(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&gk(n)}}return!1}function cFe(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(ci(t,!1)){if(e(t))return!0;const n=Use(t);return e(n)}}catch{}return!1}function lFe(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function uFe(t){return t==null?void 0:t.topic}function dFe(t,e){let n=null;return ci(t==null?void 0:t.publicKey,!1)||(n=He("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function XH(t){let e=!0;return Gg(t)?t.length&&(e=t.every(n=>ci(n,!1))):e=!1,e}function hFe(t,e,n){let r=null;return Gg(e)&&e.length?e.forEach(s=>{r||gk(s)||(r=Ur("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):gk(t)||(r=Ur("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function fFe(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=hFe(s,Ose(s,i),`${e} ${n}`);o&&(r=o)}),r}function pFe(t,e){let n=null;return Gg(t)?t.forEach(r=>{n||aFe(r)||(n=Ur("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Ur("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function gFe(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=pFe(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function mFe(t,e){let n=null;return XH(t==null?void 0:t.methods)?XH(t==null?void 0:t.events)||(n=Ur("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=Ur("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function yie(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=mFe(r,`${e}, namespace`);s&&(n=s)}),n}function yFe(t,e,n){let r=null;if(t&&qg(t)){const s=yie(t,e);s&&(r=s);const i=fFe(t,e,n);i&&(r=i)}else r=He("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function B3(t,e){let n=null;if(t&&qg(t)){const r=yie(t,e);r&&(n=r);const s=gFe(t,e);s&&(n=s)}else n=He("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function wie(t){return ci(t.protocol,!0)}function wFe(t,e){let n=!1;return t?t&&Gg(t)&&t.length&&t.forEach(r=>{n=wie(r)}):n=!0,n}function bFe(t){return typeof t=="number"}function Ba(t){return typeof t<"u"&&typeof t!==null}function vFe(t){return!(!t||typeof t!="object"||!t.code||!k4(t.code,!1)||!t.message||!ci(t.message,!1))}function EFe(t){return!(ao(t)||!ci(t.method,!1))}function CFe(t){return!(ao(t)||ao(t.result)&&ao(t.error)||!k4(t.id,!1)||!ci(t.jsonrpc,!1))}function _Fe(t){return!(ao(t)||!ci(t.name,!1))}function eG(t,e){return!(!gk(e)||!X4e(t).includes(e))}function AFe(t,e,n){return ci(n,!1)?eFe(t,e).includes(n):!1}function SFe(t,e,n){return ci(n,!1)?tFe(t,e).includes(n):!1}function tG(t,e,n){let r=null;const s=IFe(t),i=NFe(e),o=Object.keys(s),a=Object.keys(i),c=nG(Object.keys(t)),l=nG(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=He("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Iy(o,a)||(r=He("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=jC(e[d].accounts);h.includes(d)||(r=He("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(Iy(s[d].methods,i[d].methods)?Iy(s[d].events,i[d].events)||(r=He("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=He("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function IFe(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function nG(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function NFe(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=jC(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function xFe(t,e){return k4(t,!1)&&t<=e.max&&t>=e.min}function rG(){const t=qI();return new Promise(e=>{switch(t){case Wc.browser:e(TFe());break;case Wc.reactNative:e(RFe());break;case Wc.node:e(kFe());break;default:e(!0)}})}function TFe(){return UC()&&(navigator==null?void 0:navigator.onLine)}async function RFe(){if(Sm()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function kFe(){return!0}function PFe(t){switch(qI()){case Wc.browser:OFe(t);break;case Wc.reactNative:DFe(t);break}}function OFe(t){!Sm()&&UC()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function DFe(t){Sm()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function MFe(){var t;return UC()&&F0()?((t=F0())==null?void 0:t.visibilityState)==="visible":!0}const L3={};class S1{static get(e){return L3[e]}static set(e,n){L3[e]=n}static delete(e){delete L3[e]}}var BFe={};const bie="wc",vie=2,a5="core",ih=`${bie}@2:${a5}:`,LFe={logger:"error"},UFe={database:":memory:"},$Fe="crypto",sG="client_ed25519_seed",FFe=je.ONE_DAY,jFe="keychain",WFe="0.3",zFe="messages",HFe="0.3",iG=je.SIX_HOURS,GFe="publisher",Eie="irn",qFe="error",Cie="wss://relay.walletconnect.org",VFe="relayer",Ui={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},KFe="_subscription",al={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},YFe=.1,c5="2.21.0",hs={link_mode:"link_mode",relay:"relay"},CT={inbound:"inbound",outbound:"outbound"},QFe="0.3",JFe="WALLETCONNECT_CLIENT_ID",oG="WALLETCONNECT_LINK_MODE_APPS",Ac={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},ZFe="subscription",XFe="0.3",eje="pairing",tje="0.3",I1={wc_pairingDelete:{req:{ttl:je.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:je.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:je.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:je.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:je.ONE_DAY,prompt:!1,tag:0},res:{ttl:je.ONE_DAY,prompt:!1,tag:0}}},oy={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},ou={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},nje="history",rje="0.3",sje="expirer",yl={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},ije="0.3",oje="verify-api",aje="https://verify.walletconnect.com",_ie="https://verify.walletconnect.org",W_=_ie,cje=`${W_}/v3`,lje=[aje,_ie],uje="echo",dje="https://echo.walletconnect.com",hd={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Dh={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},au={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Um={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},$m={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},N1={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},hje=.1,fje="event-client",pje=86400,gje="https://pulse.walletconnect.org/batch";function mje(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,y=0,w=p.length;y!==w&&p[y]===0;)y++,g++;for(var C=(w-y)*u+1>>>0,N=new Uint8Array(C);y!==w;){for(var I=p[y],k=0,P=C-1;(I!==0||k<m)&&P!==-1;P--,k++)I+=256*N[P]>>>0,N[P]=I%a>>>0,I=I/a>>>0;if(I!==0)throw new Error("Non-zero carry");m=k,y++}for(var U=C-m;U!==C&&N[U]===0;)U++;for(var M=c.repeat(g);U<C;++U)M+=t.charAt(N[U]);return M}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,y=0;p[g]===c;)m++,g++;for(var w=(p.length-g)*l+1>>>0,C=new Uint8Array(w);p[g];){var N=n[p.charCodeAt(g)];if(N===255)return;for(var I=0,k=w-1;(N!==0||I<y)&&k!==-1;k--,I++)N+=a*C[k]>>>0,C[k]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");y=I,g++}if(p[g]!==" "){for(var P=w-y;P!==w&&C[P]===0;)P++;for(var U=new Uint8Array(m+(w-P)),M=m;P!==w;)U[M++]=C[P++];return U}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var yje=mje,wje=yje;const Aie=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},bje=t=>new TextEncoder().encode(t),vje=t=>new TextDecoder().decode(t);class Eje{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Cje{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Sie(this,e)}}class _je{constructor(e){this.decoders=e}or(e){return Sie(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Sie=(t,e)=>new _je({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Aje{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Eje(e,n,r),this.decoder=new Cje(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const UP=({name:t,prefix:e,encode:n,decode:r})=>new Aje(t,e,n,r),ZI=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=wje(n,e);return UP({prefix:t,name:e,encode:r,decode:i=>Aie(s(i))})},Sje=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Ije=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Co=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>UP({prefix:e,name:t,encode(s){return Ije(s,r,n)},decode(s){return Sje(s,r,n,t)}}),Nje=UP({prefix:"\0",name:"identity",encode:t=>vje(t),decode:t=>bje(t)});var xje=Object.freeze({__proto__:null,identity:Nje});const Tje=Co({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Rje=Object.freeze({__proto__:null,base2:Tje});const kje=Co({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Pje=Object.freeze({__proto__:null,base8:kje});const Oje=ZI({prefix:"9",name:"base10",alphabet:"0123456789"});var Dje=Object.freeze({__proto__:null,base10:Oje});const Mje=Co({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Bje=Co({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Lje=Object.freeze({__proto__:null,base16:Mje,base16upper:Bje});const Uje=Co({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),$je=Co({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Fje=Co({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),jje=Co({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Wje=Co({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),zje=Co({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Hje=Co({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Gje=Co({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),qje=Co({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Vje=Object.freeze({__proto__:null,base32:Uje,base32upper:$je,base32pad:Fje,base32padupper:jje,base32hex:Wje,base32hexupper:zje,base32hexpad:Hje,base32hexpadupper:Gje,base32z:qje});const Kje=ZI({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Yje=ZI({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Qje=Object.freeze({__proto__:null,base36:Kje,base36upper:Yje});const Jje=ZI({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Zje=ZI({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Xje=Object.freeze({__proto__:null,base58btc:Jje,base58flickr:Zje});const e9e=Co({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),t9e=Co({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),n9e=Co({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),r9e=Co({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var s9e=Object.freeze({__proto__:null,base64:e9e,base64pad:t9e,base64url:n9e,base64urlpad:r9e});const Iie=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),i9e=Iie.reduce((t,e,n)=>(t[n]=e,t),[]),o9e=Iie.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function a9e(t){return t.reduce((e,n)=>(e+=i9e[n],e),"")}function c9e(t){const e=[];for(const n of t){const r=o9e[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const l9e=UP({prefix:"🚀",name:"base256emoji",encode:a9e,decode:c9e});var u9e=Object.freeze({__proto__:null,base256emoji:l9e}),d9e=Nie,aG=128,h9e=-128,f9e=Math.pow(2,31);function Nie(t,e,n){e=e||[],n=n||0;for(var r=n;t>=f9e;)e[n++]=t&255|aG,t/=128;for(;t&h9e;)e[n++]=t&255|aG,t>>>=7;return e[n]=t|0,Nie.bytes=n-r+1,e}var p9e=l5,g9e=128,cG=127;function l5(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw l5.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&cG)<<s:(o&cG)*Math.pow(2,s),s+=7}while(o>=g9e);return l5.bytes=i-r,n}var m9e=Math.pow(2,7),y9e=Math.pow(2,14),w9e=Math.pow(2,21),b9e=Math.pow(2,28),v9e=Math.pow(2,35),E9e=Math.pow(2,42),C9e=Math.pow(2,49),_9e=Math.pow(2,56),A9e=Math.pow(2,63),S9e=function(t){return t<m9e?1:t<y9e?2:t<w9e?3:t<b9e?4:t<v9e?5:t<E9e?6:t<C9e?7:t<_9e?8:t<A9e?9:10},I9e={encode:d9e,decode:p9e,encodingLength:S9e},xie=I9e;const lG=(t,e,n=0)=>(xie.encode(t,e,n),e),uG=t=>xie.encodingLength(t),u5=(t,e)=>{const n=e.byteLength,r=uG(t),s=r+uG(n),i=new Uint8Array(s+n);return lG(t,i,0),lG(n,i,r),i.set(e,s),new N9e(t,n,e,i)};class N9e{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const Tie=({name:t,code:e,encode:n})=>new x9e(t,e,n);class x9e{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?u5(this.code,n):n.then(r=>u5(this.code,r))}else throw Error("Unknown type, must be binary type")}}const Rie=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),T9e=Tie({name:"sha2-256",code:18,encode:Rie("SHA-256")}),R9e=Tie({name:"sha2-512",code:19,encode:Rie("SHA-512")});var k9e=Object.freeze({__proto__:null,sha256:T9e,sha512:R9e});const kie=0,P9e="identity",Pie=Aie,O9e=t=>u5(kie,Pie(t)),D9e={code:kie,name:P9e,encode:Pie,digest:O9e};var M9e=Object.freeze({__proto__:null,identity:D9e});new TextEncoder,new TextDecoder;const dG={...xje,...Rje,...Pje,...Dje,...Lje,...Vje,...Qje,...Xje,...s9e,...u9e};({...k9e,...M9e});function B9e(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Oie(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const hG=Oie("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),U3=Oie("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=B9e(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),L9e={utf8:hG,"utf-8":hG,hex:dG.base16,latin1:U3,ascii:U3,binary:U3,...dG};function U9e(t,e="utf8"){const n=L9e[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var $9e=Object.defineProperty,F9e=(t,e,n)=>e in t?$9e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,od=(t,e,n)=>F9e(t,typeof e!="symbol"?e+"":e,n);class j9e{constructor(e,n){this.core=e,this.logger=n,od(this,"keychain",new Map),od(this,"name",jFe),od(this,"version",WFe),od(this,"initialized",!1),od(this,"storagePrefix",ih),od(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),od(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),od(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),od(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=He("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),od(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=bo(n,this.name)}get context(){return fc(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,YU(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?QU(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=He("NOT_INITIALIZED",this.name);throw new Error(e)}}}var W9e=Object.defineProperty,z9e=(t,e,n)=>e in t?W9e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ki=(t,e,n)=>z9e(t,typeof e!="symbol"?e+"":e,n);class H9e{constructor(e,n,r){this.core=e,this.logger=n,Ki(this,"name",$Fe),Ki(this,"keychain"),Ki(this,"randomSessionIdentifier",o5()),Ki(this,"initialized",!1),Ki(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Ki(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Ki(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=Sz(s);return Qre(i.publicKey)}),Ki(this,"generateKeyPair",()=>{this.isInitialized();const s=O4e();return this.setPrivateKey(s.publicKey,s.privateKey)}),Ki(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=Sz(i),a=this.randomSessionIdentifier;return await g3e(a,s,FFe,o)}),Ki(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=D4e(a,i);return this.setSymKey(c,o)}),Ki(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||ET(s);return await this.keychain.set(o,s),o}),Ki(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Ki(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Ki(this,"encode",async(s,i,o)=>{this.isInitialized();const a=mie(o),c=Pf(i);if(qH(a))return L4e(c,o==null?void 0:o.encoding);if(GH(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return M4e({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),Ki(this,"decode",async(s,i,o)=>{this.isInitialized();const a=$4e(i,o);if(qH(a)){const c=U4e(i,o==null?void 0:o.encoding);return $0(c)}if(GH(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=B4e({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return $0(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Ki(this,"getPayloadType",(s,i=Bu)=>{const o=vS({encoded:s,encoding:i});return V0(o.type)}),Ki(this,"getPayloadSenderPublicKey",(s,i=Bu)=>{const o=vS({encoded:s,encoding:i});return o.senderPublicKey?oc(o.senderPublicKey,pa):void 0}),this.core=e,this.logger=bo(n,this.name),this.keychain=r||new j9e(this.core,this.logger)}get context(){return fc(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(sG)}catch{e=o5(),await this.keychain.set(sG,e)}return U9e(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=He("NOT_INITIALIZED",this.name);throw new Error(e)}}}var G9e=Object.defineProperty,q9e=Object.defineProperties,V9e=Object.getOwnPropertyDescriptors,fG=Object.getOwnPropertySymbols,K9e=Object.prototype.hasOwnProperty,Y9e=Object.prototype.propertyIsEnumerable,d5=(t,e,n)=>e in t?G9e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Q9e=(t,e)=>{for(var n in e||(e={}))K9e.call(e,n)&&d5(t,n,e[n]);if(fG)for(var n of fG(e))Y9e.call(e,n)&&d5(t,n,e[n]);return t},J9e=(t,e)=>q9e(t,V9e(e)),mc=(t,e,n)=>d5(t,typeof e!="symbol"?e+"":e,n);class Z9e extends V5e{constructor(e,n){super(e,n),this.logger=e,this.core=n,mc(this,"messages",new Map),mc(this,"messagesWithoutClientAck",new Map),mc(this,"name",zFe),mc(this,"version",HFe),mc(this,"initialized",!1),mc(this,"storagePrefix",ih),mc(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),mc(this,"set",async(r,s,i)=>{this.isInitialized();const o=Pd(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===CT.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,J9e(Q9e({},c),{[o]:s}))}return await this.persist(),o}),mc(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),mc(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),mc(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Pd(s);return typeof i[o]<"u"}),mc(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Pd(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),mc(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=bo(e,this.name),this.core=n}get context(){return fc(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,YU(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,YU(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?QU(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?QU(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=He("NOT_INITIALIZED",this.name);throw new Error(e)}}}var X9e=Object.defineProperty,e7e=Object.defineProperties,t7e=Object.getOwnPropertyDescriptors,pG=Object.getOwnPropertySymbols,n7e=Object.prototype.hasOwnProperty,r7e=Object.prototype.propertyIsEnumerable,h5=(t,e,n)=>e in t?X9e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bx=(t,e)=>{for(var n in e||(e={}))n7e.call(e,n)&&h5(t,n,e[n]);if(pG)for(var n of pG(e))r7e.call(e,n)&&h5(t,n,e[n]);return t},$3=(t,e)=>e7e(t,t7e(e)),cu=(t,e,n)=>h5(t,typeof e!="symbol"?e+"":e,n);class s7e extends K5e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,cu(this,"events",new Kl.EventEmitter),cu(this,"name",GFe),cu(this,"queue",new Map),cu(this,"publishTimeout",je.toMiliseconds(je.ONE_MINUTE)),cu(this,"initialPublishTimeout",je.toMiliseconds(je.ONE_SECOND*15)),cu(this,"needsTransportRestart",!1),cu(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||iG,c=pk(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||Sy().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const m=({id:w})=>{h.opts.id===w&&(this.removeRequestFromQueue(w),this.relayer.events.removeListener(Ui.publish,m),g(h))};this.relayer.events.on(Ui.publish,m);const y=bg(new Promise((w,C)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(w).catch(N=>{this.logger.warn(N,N==null?void 0:N.message),C(N)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await y,this.events.removeListener(Ui.publish,m)}catch(w){this.queue.set(d,$3(bx({},h),{attempt:1})),this.logger.warn(w,w==null?void 0:w.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await bg(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),cu(this,"on",(r,s)=>{this.events.on(r,s)}),cu(this,"once",(r,s)=>{this.events.once(r,s)}),cu(this,"off",(r,s)=>{this.events.off(r,s)}),cu(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=bo(n,this.name),this.registerEventListeners()}get context(){return fc(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=iG,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:X1(pk().protocol).publish,params:bx({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};ao((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),ao((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(Ui.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,$3(bx({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish($3(bx({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(pw.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Ui.connection_stalled);return}this.checkQueue()}),this.relayer.on(Ui.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var i7e=Object.defineProperty,o7e=(t,e,n)=>e in t?i7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Kw=(t,e,n)=>o7e(t,typeof e!="symbol"?e+"":e,n);class a7e{constructor(){Kw(this,"map",new Map),Kw(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),Kw(this,"get",e=>this.map.get(e)||[]),Kw(this,"exists",(e,n)=>this.get(e).includes(n)),Kw(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Kw(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var c7e=Object.defineProperty,l7e=Object.defineProperties,u7e=Object.getOwnPropertyDescriptors,gG=Object.getOwnPropertySymbols,d7e=Object.prototype.hasOwnProperty,h7e=Object.prototype.propertyIsEnumerable,f5=(t,e,n)=>e in t?c7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,x1=(t,e)=>{for(var n in e||(e={}))d7e.call(e,n)&&f5(t,n,e[n]);if(gG)for(var n of gG(e))h7e.call(e,n)&&f5(t,n,e[n]);return t},F3=(t,e)=>l7e(t,u7e(e)),Gr=(t,e,n)=>f5(t,typeof e!="symbol"?e+"":e,n);class f7e extends J5e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Gr(this,"subscriptions",new Map),Gr(this,"topicMap",new a7e),Gr(this,"events",new Kl.EventEmitter),Gr(this,"name",ZFe),Gr(this,"version",XFe),Gr(this,"pending",new Map),Gr(this,"cached",[]),Gr(this,"initialized",!1),Gr(this,"storagePrefix",ih),Gr(this,"subscribeTimeout",je.toMiliseconds(je.ONE_MINUTE)),Gr(this,"initialSubscribeTimeout",je.toMiliseconds(je.ONE_SECOND*15)),Gr(this,"clientId"),Gr(this,"batchSubscribeTopicsLimit",500),Gr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Gr(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=pk(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),Gr(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),Gr(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),Gr(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),Gr(this,"on",(r,s)=>{this.events.on(r,s)}),Gr(this,"once",(r,s)=>{this.events.once(r,s)}),Gr(this,"off",(r,s)=>{this.events.off(r,s)}),Gr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),Gr(this,"start",async()=>{await this.onConnect()}),Gr(this,"stop",async()=>{await this.onDisconnect()}),Gr(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Gr(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),Gr(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(pw.pulse,async()=>{await this.checkPending()}),this.events.on(Ac.created,async r=>{const s=Ac.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Ac.deleted,async r=>{const s=Ac.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=bo(n,this.name),this.clientId=""}get context(){return fc(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=pk(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=Ur("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===hs.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:X1(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===hs.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},je.toMiliseconds(je.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(Ac.created,d),u(h.id))};this.events.on(Ac.created,d);try{const h=await bg(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Ac.created,d),u(h)}catch{}}),l=await bg(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Ui.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:X1(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await bg(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Ui.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:X1(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await bg(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Ui.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:X1(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,F3(x1({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,x1({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,x1({},n)),this.topicMap.set(n.topic,e),this.events.emit(Ac.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=He("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Ac.deleted,F3(x1({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Ac.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Ac.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=He("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>F3(x1({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await v8e(je.toMiliseconds(je.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=He("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Pd(e+await this.getClientId())}}var p7e=Object.defineProperty,mG=Object.getOwnPropertySymbols,g7e=Object.prototype.hasOwnProperty,m7e=Object.prototype.propertyIsEnumerable,p5=(t,e,n)=>e in t?p7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yG=(t,e)=>{for(var n in e||(e={}))g7e.call(e,n)&&p5(t,n,e[n]);if(mG)for(var n of mG(e))m7e.call(e,n)&&p5(t,n,e[n]);return t},cr=(t,e,n)=>p5(t,typeof e!="symbol"?e+"":e,n);class y7e extends Y5e{constructor(e){super(e),cr(this,"protocol","wc"),cr(this,"version",2),cr(this,"core"),cr(this,"logger"),cr(this,"events",new Kl.EventEmitter),cr(this,"provider"),cr(this,"messages"),cr(this,"subscriber"),cr(this,"publisher"),cr(this,"name",VFe),cr(this,"transportExplicitlyClosed",!1),cr(this,"initialized",!1),cr(this,"connectionAttemptInProgress",!1),cr(this,"relayUrl"),cr(this,"projectId"),cr(this,"packageName"),cr(this,"bundleId"),cr(this,"hasExperiencedNetworkDisruption",!1),cr(this,"pingTimeout"),cr(this,"heartBeatTimeout",je.toMiliseconds(je.THIRTY_SECONDS+je.FIVE_SECONDS)),cr(this,"reconnectTimeout"),cr(this,"connectPromise"),cr(this,"reconnectInProgress",!1),cr(this,"requestsInFlight",[]),cr(this,"connectTimeout",je.toMiliseconds(je.ONE_SECOND*15)),cr(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||Sy().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),cr(this,"resetPingTimeout",()=>{hk()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),cr(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),cr(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(Ui.connect)}),cr(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),cr(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(Ui.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),cr(this,"registerProviderListeners",()=>{this.provider.on(al.payload,this.onPayloadHandler),this.provider.on(al.connect,this.onConnectHandler),this.provider.on(al.disconnect,this.onDisconnectHandler),this.provider.on(al.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?bo(e.logger,this.name):jI(mw({level:e.logger||qFe})),this.messages=new Z9e(this.logger,e.core),this.subscriber=new f7e(this,this.logger),this.publisher=new s7e(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Cie,this.projectId=e.projectId,s8e()?this.packageName=gH():i8e()&&(this.bundleId=gH()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return fc(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:hs.relay},CT.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Ac.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Ac.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,yG({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await bg(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await rG())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=gi(je.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(Ui.message,e),await this.recordMessageEvent(e,CT.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(al.disconnect,i),await bg(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(al.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(al.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(al.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,je.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(hk())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Yl(new NBe(u8e({sdkVersion:c5,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),C4(e)){if(!e.method.endsWith(KFe))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:hs.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(yG({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else NP(e)&&this.events.emit(Ui.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,CT.inbound),this.events.emit(Ui.message,e))}async acknowledgePayload(e){const n=SP(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(al.payload,this.onPayloadHandler),this.provider.off(al.connect,this.onConnectHandler),this.provider.off(al.disconnect,this.onDisconnectHandler),this.provider.off(al.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await rG();PFe(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(pw.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&MFe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Ui.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},je.toMiliseconds(YFe)))))}isInitialized(){if(!this.initialized){const{message:e}=He("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function w7e(){}function wG(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function bG(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function vG(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const b7e="[object RegExp]",v7e="[object String]",E7e="[object Number]",C7e="[object Boolean]",EG="[object Arguments]",_7e="[object Symbol]",A7e="[object Date]",S7e="[object Map]",I7e="[object Set]",N7e="[object Array]",x7e="[object Function]",T7e="[object ArrayBuffer]",j3="[object Object]",R7e="[object Error]",k7e="[object DataView]",P7e="[object Uint8Array]",O7e="[object Uint8ClampedArray]",D7e="[object Uint16Array]",M7e="[object Uint32Array]",B7e="[object BigUint64Array]",L7e="[object Int8Array]",U7e="[object Int16Array]",$7e="[object Int32Array]",F7e="[object BigInt64Array]",j7e="[object Float32Array]",W7e="[object Float64Array]";function z7e(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function H7e(t,e,n){return e_(t,e,void 0,void 0,void 0,void 0,n)}function e_(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return z_(t,e,i,o)}return z_(t,e,i,o)}function z_(t,e,n,r){if(Object.is(t,e))return!0;let s=vG(t),i=vG(e);if(s===EG&&(s=j3),i===EG&&(i=j3),s!==i)return!1;switch(s){case v7e:return t.toString()===e.toString();case E7e:{const c=t.valueOf(),l=e.valueOf();return z7e(c,l)}case C7e:case A7e:case _7e:return Object.is(t.valueOf(),e.valueOf());case b7e:return t.source===e.source&&t.flags===e.flags;case x7e:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case S7e:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!e_(l,e.get(c),c,t,e,n,r))return!1;return!0}case I7e:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>e_(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case N7e:case P7e:case O7e:case D7e:case M7e:case B7e:case L7e:case U7e:case $7e:case F7e:case j7e:case W7e:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!e_(t[c],e[c],c,t,e,n,r))return!1;return!0}case T7e:return t.byteLength!==e.byteLength?!1:z_(new Uint8Array(t),new Uint8Array(e),n,r);case k7e:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:z_(new Uint8Array(t),new Uint8Array(e),n,r);case R7e:return t.name===e.name&&t.message===e.message;case j3:{if(!(z_(t.constructor,e.constructor,n,r)||wG(t)&&wG(e)))return!1;const c=[...Object.keys(t),...bG(t)],l=[...Object.keys(e),...bG(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!e_(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function G7e(t,e){return H7e(t,e,w7e)}var q7e=Object.defineProperty,CG=Object.getOwnPropertySymbols,V7e=Object.prototype.hasOwnProperty,K7e=Object.prototype.propertyIsEnumerable,g5=(t,e,n)=>e in t?q7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_G=(t,e)=>{for(var n in e||(e={}))V7e.call(e,n)&&g5(t,n,e[n]);if(CG)for(var n of CG(e))K7e.call(e,n)&&g5(t,n,e[n]);return t},xa=(t,e,n)=>g5(t,typeof e!="symbol"?e+"":e,n);class ww extends Q5e{constructor(e,n,r,s=ih,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,xa(this,"map",new Map),xa(this,"version",QFe),xa(this,"cached",[]),xa(this,"initialized",!1),xa(this,"getKey"),xa(this,"storagePrefix",ih),xa(this,"recentlyDeleted",[]),xa(this,"recentlyDeletedLimit",200),xa(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!ao(o)?this.map.set(this.getKey(o),o):lFe(o)?this.map.set(o.id,o):uFe(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),xa(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),xa(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),xa(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>G7e(a[c],o[c]))):this.values)),xa(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=_G(_G({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),xa(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=bo(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return fc(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=He("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=He("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=He("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=He("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Y7e=Object.defineProperty,Q7e=(t,e,n)=>e in t?Y7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gn=(t,e,n)=>Q7e(t,typeof e!="symbol"?e+"":e,n);class J7e{constructor(e,n){this.core=e,this.logger=n,Gn(this,"name",eje),Gn(this,"version",tje),Gn(this,"events",new u4),Gn(this,"pairings"),Gn(this,"initialized",!1),Gn(this,"storagePrefix",ih),Gn(this,"ignoredPayloadTypes",[bf]),Gn(this,"registeredMethods",[]),Gn(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Gn(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Gn(this,"create",async r=>{this.isInitialized();const s=o5(),i=await this.core.crypto.setSymKey(s),o=gi(je.FIVE_MINUTES),a={protocol:Eie},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=KH({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(oy.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),Gn(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[hd.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=VH(r.uri);s.props.properties.topic=i,s.addTrace(hd.pairing_uri_validation_success),s.addTrace(hd.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(hd.existing_pairing),u.active)throw s.setError(Dh.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(hd.pairing_not_expired)}const d=c||gi(je.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(hd.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(oy.create,h),s.addTrace(hd.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(hd.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Dh.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(Dh.subscribe_pairing_topic_failure),f}return s.addTrace(hd.subscribe_pairing_topic_success),h}),Gn(this,"activate",async({topic:r})=>{this.isInitialized();const s=gi(je.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Gn(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Jm();this.events.once(_r("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),Gn(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Gn(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Gn(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Gn(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Ur("USER_DISCONNECTED")),await this.deletePairing(s))}),Gn(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return KH({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),Gn(this,"sendRequest",async(r,s,i)=>{const o=wg(s,i),a=await this.core.crypto.encode(r,o),c=I1[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),Gn(this,"sendResult",async(r,s,i)=>{const o=SP(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=I1[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Gn(this,"sendError",async(r,s,i)=>{const o=IP(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=I1[c]?I1[c].res:I1.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Gn(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Ur("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Gn(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Pp(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Gn(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Gn(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Gn(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(oy.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Gn(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{md(s)?this.events.emit(_r("pairing_ping",i),{}):Il(s)&&this.events.emit(_r("pairing_ping",i),{error:s.error})},500)}),Gn(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(oy.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Gn(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=Ur("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),Gn(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Ur("WC_METHOD_UNSUPPORTED",r))}),Gn(this,"isValidPair",(r,s)=>{var i;if(!Ba(r)){const{message:a}=He("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(Dh.malformed_pairing_uri),new Error(a)}if(!cFe(r.uri)){const{message:a}=He("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(Dh.malformed_pairing_uri),new Error(a)}const o=VH(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=He("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Dh.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=He("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Dh.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&je.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(Dh.pairing_expired);const{message:a}=He("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Gn(this,"isValidPing",async r=>{if(!Ba(r)){const{message:i}=He("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Gn(this,"isValidDisconnect",async r=>{if(!Ba(r)){const{message:i}=He("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Gn(this,"isValidPairingTopic",async r=>{if(!ci(r,!1)){const{message:s}=He("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=He("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Pp(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=He("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=bo(n,this.name),this.pairings=new ww(this.core,this.logger,this.name,this.storagePrefix)}get context(){return fc(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=He("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Ui.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==hs.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);C4(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):NP(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(yl.expired,async e=>{const{topic:n}=Lse(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(oy.expire,{topic:n}))})}}var Z7e=Object.defineProperty,X7e=(t,e,n)=>e in t?Z7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yi=(t,e,n)=>X7e(t,typeof e!="symbol"?e+"":e,n);class eWe extends q5e{constructor(e,n){super(e,n),this.core=e,this.logger=n,Yi(this,"records",new Map),Yi(this,"events",new Kl.EventEmitter),Yi(this,"name",nje),Yi(this,"version",rje),Yi(this,"cached",[]),Yi(this,"initialized",!1),Yi(this,"storagePrefix",ih),Yi(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Yi(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:gi(je.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(ou.created,o)}),Yi(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Il(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(ou.updated,s))}),Yi(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),Yi(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(ou.deleted,i)}}),this.persist()}),Yi(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),Yi(this,"on",(r,s)=>{this.events.on(r,s)}),Yi(this,"once",(r,s)=>{this.events.once(r,s)}),Yi(this,"off",(r,s)=>{this.events.off(r,s)}),Yi(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=bo(n,this.name)}get context(){return fc(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:wg(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=He("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ou.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=He("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ou.created,e=>{const n=ou.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(ou.updated,e=>{const n=ou.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(ou.deleted,e=>{const n=ou.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(pw.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{je.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(ou.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=He("NOT_INITIALIZED",this.name);throw new Error(e)}}}var tWe=Object.defineProperty,nWe=(t,e,n)=>e in t?tWe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,No=(t,e,n)=>nWe(t,typeof e!="symbol"?e+"":e,n);class rWe extends Z5e{constructor(e,n){super(e,n),this.core=e,this.logger=n,No(this,"expirations",new Map),No(this,"events",new Kl.EventEmitter),No(this,"name",sje),No(this,"version",ije),No(this,"cached",[]),No(this,"initialized",!1),No(this,"storagePrefix",ih),No(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),No(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),No(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(yl.created,{target:i,expiration:o})}),No(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),No(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(yl.deleted,{target:s,expiration:i})}}),No(this,"on",(r,s)=>{this.events.on(r,s)}),No(this,"once",(r,s)=>{this.events.once(r,s)}),No(this,"off",(r,s)=>{this.events.off(r,s)}),No(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=bo(n,this.name)}get context(){return fc(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return d8e(e);if(typeof e=="number")return h8e(e);const{message:n}=He("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(yl.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=He("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=He("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;je.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(yl.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(pw.pulse,()=>this.checkExpirations()),this.events.on(yl.created,e=>{const n=yl.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(yl.expired,e=>{const n=yl.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(yl.deleted,e=>{const n=yl.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=He("NOT_INITIALIZED",this.name);throw new Error(e)}}}var sWe=Object.defineProperty,iWe=(t,e,n)=>e in t?sWe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ai=(t,e,n)=>iWe(t,typeof e!="symbol"?e+"":e,n);class oWe extends X5e{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,ai(this,"name",oje),ai(this,"abortController"),ai(this,"isDevEnv"),ai(this,"verifyUrlV3",cje),ai(this,"storagePrefix",ih),ai(this,"version",vie),ai(this,"publicKey"),ai(this,"fetchPromise"),ai(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&je.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),ai(this,"register",async s=>{if(!UC()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=F0(),u=this.startAbortTimer(je.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",m),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const m=y=>{if(y.data&&typeof y.data=="string")try{const w=JSON.parse(y.data);if(w.type==="verify_attestation"){if(LU(w.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",m),h(w.attestation===null?"":w.attestation)}}catch(w){this.logger.warn(w)}};l.body.appendChild(g),window.addEventListener("message",m,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),ai(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(LU(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),ai(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(je.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),ai(this,"getVerifyUrl",s=>{let i=s||W_;return lje.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${W_}`),i=W_),i}),ai(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(je.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),ai(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),ai(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),ai(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),ai(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),ai(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),ai(this,"validateAttestation",(s,i)=>{const o=j4e(s,i.publicKey),a={hasExpired:je.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=bo(n,this.name),this.abortController=new AbortController,this.isDevEnv=A4(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return fc(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),je.toMiliseconds(e))}}var aWe=Object.defineProperty,cWe=(t,e,n)=>e in t?aWe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,AG=(t,e,n)=>cWe(t,typeof e!="symbol"?e+"":e,n);class lWe extends e6e{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,AG(this,"context",uje),AG(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${dje}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=bo(n,this.context)}}var uWe=Object.defineProperty,SG=Object.getOwnPropertySymbols,dWe=Object.prototype.hasOwnProperty,hWe=Object.prototype.propertyIsEnumerable,m5=(t,e,n)=>e in t?uWe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,T1=(t,e)=>{for(var n in e||(e={}))dWe.call(e,n)&&m5(t,n,e[n]);if(SG)for(var n of SG(e))hWe.call(e,n)&&m5(t,n,e[n]);return t},Ni=(t,e,n)=>m5(t,typeof e!="symbol"?e+"":e,n);class fWe extends t6e{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,Ni(this,"context",fje),Ni(this,"storagePrefix",ih),Ni(this,"storageVersion",hje),Ni(this,"events",new Map),Ni(this,"shouldPersist",!1),Ni(this,"init",async()=>{if(!A4())try{const s={eventId:yH(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:Mse(this.core.relayer.protocol,this.core.relayer.version,c5)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Ni(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=yH(),u=this.core.projectId||"",d=Date.now(),h=T1({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),Ni(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return T1(T1({},a),this.setMethods(a.eventId))}),Ni(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Ni(this,"setEventListeners",()=>{this.core.heartbeat.on(pw.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{je.fromMiliseconds(Date.now())-je.fromMiliseconds(s.timestamp)>pje&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Ni(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Ni(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Ni(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Ni(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Ni(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,T1(T1({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Ni(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Ni(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${gje}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${c5}${i}`,{method:"POST",body:JSON.stringify(s)})}),Ni(this,"getAppDomain",()=>Dse().url),this.logger=bo(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var pWe=Object.defineProperty,IG=Object.getOwnPropertySymbols,gWe=Object.prototype.hasOwnProperty,mWe=Object.prototype.propertyIsEnumerable,y5=(t,e,n)=>e in t?pWe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,NG=(t,e)=>{for(var n in e||(e={}))gWe.call(e,n)&&y5(t,n,e[n]);if(IG)for(var n of IG(e))mWe.call(e,n)&&y5(t,n,e[n]);return t},Xr=(t,e,n)=>y5(t,typeof e!="symbol"?e+"":e,n);let yWe=class Die extends W5e{constructor(e){var n;super(e),Xr(this,"protocol",bie),Xr(this,"version",vie),Xr(this,"name",a5),Xr(this,"relayUrl"),Xr(this,"projectId"),Xr(this,"customStoragePrefix"),Xr(this,"events",new Kl.EventEmitter),Xr(this,"logger"),Xr(this,"heartbeat"),Xr(this,"relayer"),Xr(this,"crypto"),Xr(this,"storage"),Xr(this,"history"),Xr(this,"expirer"),Xr(this,"pairing"),Xr(this,"verify"),Xr(this,"echoClient"),Xr(this,"linkModeSupportedApps"),Xr(this,"eventClient"),Xr(this,"initialized",!1),Xr(this,"logChunkController"),Xr(this,"on",(a,c)=>this.events.on(a,c)),Xr(this,"once",(a,c)=>this.events.once(a,c)),Xr(this,"off",(a,c)=>this.events.off(a,c)),Xr(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Xr(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:hs.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Cie,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=mw({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:LFe.logger,name:a5}),{logger:i,chunkLoggerController:o}=vP({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=bo(i,this.name),this.heartbeat=new F2e,this.crypto=new H9e(this,this.logger,e==null?void 0:e.keychain),this.history=new eWe(this,this.logger),this.expirer=new rWe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new $5e(NG(NG({},UFe),e==null?void 0:e.storageOptions)),this.relayer=new y7e({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new J7e(this,this.logger),this.verify=new oWe(this,this.logger,this.storage),this.echoClient=new lWe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new fWe(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new Die(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(JFe,r),n}get context(){return fc(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(oG,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(oG)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&BFe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const wWe=yWe,Mie="wc",Bie=2,Lie="client",P4=`${Mie}@${Bie}:${Lie}:`,W3={name:Lie,logger:"error"},xG="WALLETCONNECT_DEEPLINK_CHOICE",bWe="proposal",TG="Proposal expired",vWe="session",Yw=je.SEVEN_DAYS,EWe="engine",xi={wc_sessionPropose:{req:{ttl:je.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:je.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:je.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:je.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:je.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:je.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:je.ONE_DAY,prompt:!1,tag:1104},res:{ttl:je.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:je.ONE_DAY,prompt:!1,tag:1106},res:{ttl:je.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:je.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:je.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:je.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:je.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:je.ONE_DAY,prompt:!1,tag:1112},res:{ttl:je.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:je.ONE_DAY,prompt:!1,tag:1114},res:{ttl:je.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:je.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:je.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:je.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:je.FIVE_MINUTES,prompt:!1,tag:1119}}},z3={min:je.FIVE_MINUTES,max:je.SEVEN_DAYS},ad={idle:"IDLE",active:"ACTIVE"},RG={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},CWe="request",_We=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],AWe="wc",SWe="auth",IWe="authKeys",NWe="pairingTopics",xWe="requests",$P=`${AWe}@${1.5}:${SWe}:`,_T=`${$P}:PUB_KEY`;var TWe=Object.defineProperty,RWe=Object.defineProperties,kWe=Object.getOwnPropertyDescriptors,kG=Object.getOwnPropertySymbols,PWe=Object.prototype.hasOwnProperty,OWe=Object.prototype.propertyIsEnumerable,w5=(t,e,n)=>e in t?TWe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qr=(t,e)=>{for(var n in e||(e={}))PWe.call(e,n)&&w5(t,n,e[n]);if(kG)for(var n of kG(e))OWe.call(e,n)&&w5(t,n,e[n]);return t},Vo=(t,e)=>RWe(t,kWe(e)),Oe=(t,e,n)=>w5(t,typeof e!="symbol"?e+"":e,n);class DWe extends i6e{constructor(e){super(e),Oe(this,"name",EWe),Oe(this,"events",new u4),Oe(this,"initialized",!1),Oe(this,"requestQueue",{state:ad.idle,queue:[]}),Oe(this,"sessionRequestQueue",{state:ad.idle,queue:[]}),Oe(this,"requestQueueDelay",je.ONE_SECOND),Oe(this,"expectedPairingMethodMap",new Map),Oe(this,"recentlyDeletedMap",new Map),Oe(this,"recentlyDeletedLimit",200),Oe(this,"relayMessageCache",[]),Oe(this,"pendingSessions",new Map),Oe(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(xi)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},je.toMiliseconds(this.requestQueueDelay)))}),Oe(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=Vo(qr({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=rFe(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const k=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=k.active}}catch(k){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),k}if(!u||!h){const{topic:k,uri:P}=await this.client.core.pairing.create();u=k,d=P}if(!u){const{message:k}=He("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(k)}const f=await this.client.core.crypto.generateKeyPair(),p=xi.wc_sessionPropose.req.ttl||je.FIVE_MINUTES,g=gi(p),m=Vo(qr(qr({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:Eie}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:gd()}),y=_r("session_connect",m.id),{reject:w,resolve:C,done:N}=Jm(p,TG),I=({id:k})=>{k===m.id&&(this.client.events.off("proposal_expire",I),this.pendingSessions.delete(m.id),this.events.emit(y,{error:{message:TG,code:0}}))};return this.client.events.on("proposal_expire",I),this.events.once(y,({error:k,session:P})=>{this.client.events.off("proposal_expire",I),k?w(k):P&&C(P)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:m,throwOnFailedPublish:!0,clientRpcId:m.id}),await this.setProposal(m.id,m),{uri:d,approval:N}}),Oe(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),Oe(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[au.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(M){throw o.setError(Um.no_internet_connection),M}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(M){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(Um.proposal_not_found),M}try{await this.isValidApprove(n)}catch(M){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Um.session_approve_namespace_validation_failure),M}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:m,optionalNamespaces:y}=f;let w=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});w||(w=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:au.session_approve_started,properties:{topic:p,trace:[au.session_approve_started,au.session_namespaces_validation_success]}}));const C=await this.client.core.crypto.generateKeyPair(),N=g.publicKey,I=await this.client.core.crypto.generateSharedKey(C,N),k=qr(qr(qr({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:C,metadata:this.client.metadata},expiry:gi(Yw)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),P=hs.relay;w.addTrace(au.subscribing_session_topic);try{await this.client.core.relayer.subscribe(I,{transportType:P})}catch(M){throw w.setError(Um.subscribe_session_topic_failure),M}w.addTrace(au.subscribe_session_topic_success);const U=Vo(qr({},k),{topic:I,requiredNamespaces:m,optionalNamespaces:y,pairingTopic:p,acknowledged:!1,self:k.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:C,transportType:hs.relay});await this.client.session.set(I,U),w.addTrace(au.store_session);try{w.addTrace(au.publishing_session_settle),await this.sendRequest({topic:I,method:"wc_sessionSettle",params:k,throwOnFailedPublish:!0}).catch(M=>{throw w==null||w.setError(Um.session_settle_publish_failure),M}),w.addTrace(au.session_settle_publish_success),w.addTrace(au.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:C},throwOnFailedPublish:!0}).catch(M=>{throw w==null||w.setError(Um.session_approve_publish_failure),M}),w.addTrace(au.session_approve_publish_success)}catch(M){throw this.client.logger.error(M),this.client.session.delete(I,Ur("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(I),M}return this.client.core.eventClient.deleteEvent({eventId:w.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,Ur("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(I,gi(Yw)),{topic:I,acknowledged:()=>Promise.resolve(this.client.session.get(I))}}),Oe(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&(await this.sendError({id:r,topic:i,error:s,rpcOpts:xi.wc_sessionPropose.reject}),await this.client.proposal.delete(r,Ur("USER_DISCONNECTED")))}),Oe(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=Jm(),c=gd(),l=Sy().toString(),u=this.client.session.get(r).namespaces;return this.events.once(_r("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),Oe(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=gd(),{done:i,resolve:o,reject:a}=Jm();return this.events.once(_r("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,gi(Yw)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),Oe(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:s,topic:i,expiry:o=xi.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===hs.relay&&await this.confirmOnlineStateOrThrow();const c=gd(),l=Sy().toString(),{done:u,resolve:d,reject:h}=Jm(o,"Request expired. Please try again.");this.events.once(_r("session_request",c),({error:y,result:w})=>{y?h(y):d(w)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:Vo(qr({},s),{expiryTimestamp:gi(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:Vo(qr({},s),{expiryTimestamp:gi(o)}),chainId:r},m=this.shouldSetTVF(f,g);return await Promise.all([new Promise(async y=>{await this.sendRequest(qr({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0},m&&{tvf:this.getTVFParams(c,g)})).catch(w=>h(w)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),y()}),new Promise(async y=>{var w;if(!((w=a.sessionConfig)!=null&&w.disableDeepLink)){const C=await m8e(this.client.core.storage,xG);await f8e({id:c,topic:i,wcDeepLink:C})}y()}),u()]).then(y=>y[2])}),Oe(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===hs.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);md(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):Il(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),Oe(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=gd(),i=Sy().toString(),{done:o,resolve:a,reject:c}=Jm();this.events.once(_r("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),Oe(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=Sy().toString(),a=gd();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),Oe(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Ur("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=He("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),Oe(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>oFe(r,n)))),Oe(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),Oe(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?hs.link_mode:hs.relay;o===hs.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:m}=n,y=[...n.resources||[]],{topic:w,uri:C}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:w,uri:C}});const N=await this.client.core.crypto.generateKeyPair(),I=ET(N);if(await Promise.all([this.client.auth.authKeys.set(_T,{responseTopic:I,publicKey:N}),this.client.auth.pairingTopics.set(I,{topic:I,pairingTopic:w})]),await this.client.core.relayer.subscribe(I,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${w}`),g.length>0){const{namespace:B}=dv(a[0]);let F=c$e(B,"request",g);vT(y)&&(F=u$e(F,y.pop())),y.push(F)}const k=m&&m>xi.wc_sessionAuthenticate.req.ttl?m:xi.wc_sessionAuthenticate.req.ttl,P={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:y},requester:{publicKey:N,metadata:this.client.metadata},expiryTimestamp:gi(k)},U={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},M={requiredNamespaces:{},optionalNamespaces:U,relays:[{protocol:"irn"}],pairingTopic:w,proposer:{publicKey:N,metadata:this.client.metadata},expiryTimestamp:gi(xi.wc_sessionPropose.req.ttl),id:gd()},{done:W,resolve:j,reject:K}=Jm(k,"Request expired"),$=gd(),v=_r("session_connect",M.id),E=_r("session_request",$),_=async({error:B,session:F})=>{this.events.off(E,O),B?K(B):F&&j({session:F})},O=async B=>{var F,L,A;if(await this.deletePendingAuthRequest($,{message:"fulfilled",code:0}),B.error){const ye=Ur("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return B.error.code===ye.code?void 0:(this.events.off(v,_),K(B.error.message))}await this.deleteProposal(M.id),this.events.off(v,_);const{cacaos:H,responder:re}=B.result,se=[],ge=[];for(const ye of H){await SH({cacao:ye,projectId:this.client.core.projectId})||(this.client.logger.error(ye,"Signature verification failed"),K(Ur("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:ve}=ye,_e=vT(ve.resources),Se=[JU(ve.iss)],Re=fk(ve.iss);if(_e){const xe=IH(_e),Fe=NH(_e);se.push(...xe),Se.push(...Fe)}for(const xe of Se)ge.push(`${xe}:${Re}`)}const ae=await this.client.core.crypto.generateSharedKey(N,re.publicKey);let fe;se.length>0&&(fe={topic:ae,acknowledged:!0,self:{publicKey:N,metadata:this.client.metadata},peer:re,controller:re.publicKey,expiry:gi(Yw),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:w,namespaces:ZH([...new Set(se)],[...new Set(ge)]),transportType:o},await this.client.core.relayer.subscribe(ae,{transportType:o}),await this.client.session.set(ae,fe),w&&await this.client.core.pairing.updateMetadata({topic:w,metadata:re.metadata}),fe=this.client.session.get(ae)),(F=this.client.metadata.redirect)!=null&&F.linkMode&&(L=re.metadata.redirect)!=null&&L.linkMode&&(A=re.metadata.redirect)!=null&&A.universal&&r&&(this.client.core.addLinkModeSupportedApp(re.metadata.redirect.universal),this.client.session.update(ae,{transportType:hs.link_mode})),j({auths:H,session:fe})};this.events.once(v,_),this.events.once(E,O);let x;try{if(i){const B=wg("wc_sessionAuthenticate",P,$);this.client.core.history.set(w,B);const F=await this.client.core.crypto.encode("",B,{type:JI,encoding:Up});x=wx(r,w,F)}else await Promise.all([this.sendRequest({topic:w,method:"wc_sessionAuthenticate",params:P,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:$}),this.sendRequest({topic:w,method:"wc_sessionPropose",params:M,expiry:xi.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:M.id})])}catch(B){throw this.events.off(v,_),this.events.off(E,O),B}return await this.setProposal(M.id,M),await this.setAuthRequest($,{request:Vo(qr({},P),{verifyContext:{}}),pairingTopic:w,transportType:o}),{uri:x??C,response:W}}),Oe(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[$m.authenticated_session_approve_started]}});try{this.isInitialized()}catch(m){throw i.setError(N1.no_internet_connection),m}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(N1.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||hs.relay;a===hs.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=ET(c),d={type:bf,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const m of s){if(!await SH({cacao:m,projectId:this.client.core.projectId})){i.setError(N1.invalid_cacao);const I=Ur("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:I,encodeOpts:d}),new Error(I.message)}i.addTrace($m.cacaos_verified);const{p:y}=m,w=vT(y.resources),C=[JU(y.iss)],N=fk(y.iss);if(w){const I=IH(w),k=NH(w);h.push(...I),C.push(...k)}for(const I of C)f.push(`${I}:${N}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace($m.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:gi(Yw),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:ZH([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace($m.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(m){throw i.setError(N1.subscribe_authenticated_session_topic_failure),m}i.addTrace($m.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace($m.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace($m.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(m){throw i.setError(N1.authenticated_session_approve_publish_failure),m}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),Oe(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===hs.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=ET(o),l={type:bf,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:xi.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,Ur("USER_DISCONNECTED"))}),Oe(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return qse(r,s)}),Oe(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),Oe(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),Oe(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Ur("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(xG).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,Ur("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=ad.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),Oe(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Um.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,Ur("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),Oe(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=ad.idle,this.client.events.emit("session_request_expire",{id:n}))}),Oe(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),Oe(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),Oe(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,gi(xi.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),Oe(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=hs.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),Oe(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||gi(xi.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),Oe(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=wg(s,i,c);let f;const p=!!u;try{const y=p?Up:Bu;f=await this.client.core.crypto.encode(r,h,{encoding:y})}catch(y){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),y}let g;if(_We.includes(s)){const y=Pd(JSON.stringify(h)),w=Pd(f);g=await this.client.core.verify.register({id:w,decryptedId:y})}const m=xi[s].req;if(m.attestation=g,o&&(m.ttl=o),a&&(m.id=a),this.client.core.history.set(r,h),p){const y=wx(u,r,f);await global.Linking.openURL(y,this.client.name)}else{const y=xi[s].req;o&&(y.ttl=o),a&&(y.id=a),y.tvf=Vo(qr({},d),{correlationId:h.id}),l?(y.internal=Vo(qr({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,y)):this.client.core.relayer.publish(r,f,y).catch(w=>this.client.logger.error(w))}return h.id}),Oe(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=SP(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?Up:Bu;u=await this.client.core.crypto.encode(s,l,Vo(qr({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{this.shouldSetTVF(p.method,p.params)&&(f=this.getTVFParams(r,p.params,i))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=wx(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=xi[p].res;g.tvf=Vo(qr({},f),{correlationId:r}),o?(g.internal=Vo(qr({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(m=>this.client.logger.error(m))}await this.client.core.history.resolve(l)}),Oe(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=IP(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?Up:Bu;u=await this.client.core.crypto.encode(s,l,Vo(qr({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=wx(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||xi[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),Oe(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Pp(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Pp(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),Oe(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),Oe(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),Oe(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===ad.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ad.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=ad.idle}),Oe(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),Oe(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),Oe(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=He("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),Oe(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),Oe(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Dh.proposal_listener_not_found)),this.isValidConnect(qr({},s.params));const u=a.expiryTimestamp||gi(xi.wc_sessionPropose.req.ttl),d=qr({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:Pd(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(hd.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:xi.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),Oe(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(md(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Il(r)){await this.client.proposal.delete(i,Ur("USER_DISCONNECTED"));const o=_r("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),Oe(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(m=>m.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=Vo(qr(qr(qr({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:hs.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(_r("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),Oe(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;md(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(_r("session_approve",s),{})):Il(r)&&(await this.client.session.delete(n,Ur("USER_DISCONNECTED")),this.events.emit(_r("session_approve",s),{error:r.error}))}),Oe(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=S1.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:Ur("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(qr({topic:n},s));try{S1.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw S1.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),Oe(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),Oe(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=_r("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);md(r)?this.events.emit(_r("session_update",s),{}):Il(r)&&this.events.emit(_r("session_update",s),{error:r.error})}),Oe(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,gi(Yw)),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),Oe(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=_r("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);md(r)?this.events.emit(_r("session_extend",s),{}):Il(r)&&this.events.emit(_r("session_extend",s),{error:r.error})}),Oe(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),Oe(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=_r("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);md(r)?this.events.emit(_r("session_ping",s),{}):Il(r)&&this.events.emit(_r("session_ping",s),{error:r.error})},500)}),Oe(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(Ui.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:Ur("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),Oe(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(qr({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Pd(JSON.stringify(wg("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===hs.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),Oe(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=_r("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);md(r)?this.events.emit(_r("session_request",s),{result:r.result}):Il(r)&&this.events.emit(_r("session_request",s),{error:r.error})}),Oe(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=S1.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(qr({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),S1.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),Oe(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),md(r)?this.events.emit(_r("session_request",s),{result:r.result}):Il(r)&&this.events.emit(_r("session_request",s),{error:r.error})}),Oe(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:Pd(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===hs.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:bf,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:xi.wc_sessionAuthenticate.autoReject,appLink:h})}}),Oe(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),Oe(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ad.idle,this.processSessionRequestQueue()},je.toMiliseconds(this.requestQueueDelay))}),Oe(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=_r("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(_r("session_request",i.request.id),{error:r})})}),Oe(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===ad.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=ad.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),Oe(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),Oe(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:wg("wc_sessionPropose",Vo(qr({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),Oe(this,"isValidConnect",async n=>{if(!Ba(n)){const{message:l}=He("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(ao(r)||await this.isValidPairingTopic(r),!wFe(c)){const{message:l}=He("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!ao(s)&&qg(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!ao(i)&&qg(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),ao(o)||this.validateSessionProps(o,"sessionProperties"),!ao(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),Oe(this,"validateNamespaces",(n,r)=>{const s=yFe(n,"connect()",r);if(s)throw new Error(s.message)}),Oe(this,"isValidApprove",async n=>{if(!Ba(n))throw new Error(He("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=B3(s,"approve()");if(l)throw new Error(l.message);const u=tG(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!ci(i,!0)){const{message:d}=He("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(ao(o)||this.validateSessionProps(o,"sessionProperties"),!ao(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),Oe(this,"isValidReject",async n=>{if(!Ba(n)){const{message:i}=He("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!vFe(s)){const{message:i}=He("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),Oe(this,"isValidSessionSettleRequest",n=>{if(!Ba(n)){const{message:l}=He("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!wie(r)){const{message:l}=He("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=dFe(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=B3(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Pp(o)){const{message:l}=He("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),Oe(this,"isValidUpdate",async n=>{if(!Ba(n)){const{message:c}=He("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=B3(s,"update()");if(o)throw new Error(o.message);const a=tG(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),Oe(this,"isValidExtend",async n=>{if(!Ba(n)){const{message:s}=He("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),Oe(this,"isValidRequest",async n=>{if(!Ba(n)){const{message:c}=He("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!eG(a,i)){const{message:c}=He("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!EFe(s)){const{message:c}=He("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!AFe(a,i,s.method)){const{message:c}=He("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!xFe(o,z3)){const{message:c}=He("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${z3.min} and ${z3.max}`);throw new Error(c)}}),Oe(this,"isValidRespond",async n=>{var r;if(!Ba(n)){const{message:o}=He("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!CFe(i)){const{message:o}=He("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),Oe(this,"isValidPing",async n=>{if(!Ba(n)){const{message:s}=He("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),Oe(this,"isValidEmit",async n=>{if(!Ba(n)){const{message:a}=He("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!eG(o,i)){const{message:a}=He("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!_Fe(s)){const{message:a}=He("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!SFe(o,i,s.name)){const{message:a}=He("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),Oe(this,"isValidDisconnect",async n=>{if(!Ba(n)){const{message:s}=He("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),Oe(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!ci(s,!1))throw new Error("uri is required parameter");if(!ci(i,!1))throw new Error("domain is required parameter");if(!ci(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>dv(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=dv(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),Oe(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||W_,validation:"UNKNOWN",origin:o.url||""}};try{if(a===hs.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),Oe(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=He("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),Oe(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),Oe(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),Oe(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=He("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),Oe(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==hs.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),Oe(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),Oe(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=mH(n,"topic")||"",s=decodeURIComponent(mH(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:hs.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),Oe(this,"registerLinkModeListeners",async()=>{var n;if(A4()||Sm()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),Oe(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:s}=r;return Object.keys(RG).includes(s.method)}),Oe(this,"getTVFParams",(n,r,s)=>{var i,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,s);return Vo(qr({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(i=r.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),Oe(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),Oe(this,"extractTxHashesFromResult",(n,r)=>{try{const s=RG[n];if(typeof r=="string")return[r];const i=r[s.key];if(Gg(i))return n==="solana_signAllTransactions"?i.map(o=>K8e(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=He("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Ui.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(_T)?this.client.auth.authKeys.get(_T):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===hs.link_mode?Up:Bu});C4(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Pd(r)})):NP(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(yl.expired,async e=>{const{topic:n,id:r}=Lse(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,He("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,He("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(oy.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(oy.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!ci(e,!1)){const{message:n}=He("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=He("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Pp(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=He("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!ci(e,!1)){const{message:n}=He("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=He("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Pp(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=He("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=He("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(ci(e,!1)){const{message:n}=He("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=He("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!bFe(e)){const{message:n}=He("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=He("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Pp(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=He("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class MWe extends ww{constructor(e,n){super(e,n,bWe,P4),this.core=e,this.logger=n}}let BWe=class extends ww{constructor(e,n){super(e,n,vWe,P4),this.core=e,this.logger=n}};class LWe extends ww{constructor(e,n){super(e,n,CWe,P4,r=>r.id),this.core=e,this.logger=n}}class UWe extends ww{constructor(e,n){super(e,n,IWe,$P,()=>_T),this.core=e,this.logger=n}}class $We extends ww{constructor(e,n){super(e,n,NWe,$P),this.core=e,this.logger=n}}class FWe extends ww{constructor(e,n){super(e,n,xWe,$P,r=>r.id),this.core=e,this.logger=n}}var jWe=Object.defineProperty,WWe=(t,e,n)=>e in t?jWe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,H3=(t,e,n)=>WWe(t,typeof e!="symbol"?e+"":e,n);class zWe{constructor(e,n){this.core=e,this.logger=n,H3(this,"authKeys"),H3(this,"pairingTopics"),H3(this,"requests"),this.authKeys=new UWe(this.core,this.logger),this.pairingTopics=new $We(this.core,this.logger),this.requests=new FWe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var HWe=Object.defineProperty,GWe=(t,e,n)=>e in t?HWe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qn=(t,e,n)=>GWe(t,typeof e!="symbol"?e+"":e,n);let qWe=class Uie extends s6e{constructor(e){super(e),qn(this,"protocol",Mie),qn(this,"version",Bie),qn(this,"name",W3.name),qn(this,"metadata"),qn(this,"core"),qn(this,"logger"),qn(this,"events",new Kl.EventEmitter),qn(this,"engine"),qn(this,"session"),qn(this,"proposal"),qn(this,"pendingRequest"),qn(this,"auth"),qn(this,"signConfig"),qn(this,"on",(r,s)=>this.events.on(r,s)),qn(this,"once",(r,s)=>this.events.once(r,s)),qn(this,"off",(r,s)=>this.events.off(r,s)),qn(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),qn(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),qn(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),qn(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),qn(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),qn(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),qn(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),qn(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),qn(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),qn(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),qn(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),qn(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),qn(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),qn(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),qn(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),qn(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),qn(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),qn(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),qn(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||W3.name,this.metadata=a8e(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:jI(mw({level:(e==null?void 0:e.logger)||W3.logger}));this.core=(e==null?void 0:e.core)||new wWe(e),this.logger=bo(n,this.name),this.session=new BWe(this.core,this.logger),this.proposal=new MWe(this.core,this.logger),this.pendingRequest=new LWe(this.core,this.logger),this.engine=new DWe(this),this.auth=new zWe(this.core,this.logger)}static async init(e){const n=new Uie(e);return await n.initialize(),n}get context(){return fc(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},je.toMiliseconds(je.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const PG="error",VWe="wss://relay.walletconnect.org",KWe="wc",YWe="universal_provider",vx=`${KWe}@2:${YWe}:`,$ie="https://rpc.walletconnect.org/v1/",bb="generic",QWe=`${$ie}bundler`,Ql={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function JWe(){}function O4(t){return t==null||typeof t!="object"&&typeof t!="function"}function D4(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ZWe(t){if(O4(t))return t;if(Array.isArray(t)||D4(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function OG(t){return typeof t=="object"&&t!==null}function Fie(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function jie(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const XWe="[object RegExp]",Wie="[object String]",zie="[object Number]",Hie="[object Boolean]",Gie="[object Arguments]",eze="[object Symbol]",tze="[object Date]",nze="[object Map]",rze="[object Set]",sze="[object Array]",ize="[object ArrayBuffer]",oze="[object Object]",aze="[object DataView]",cze="[object Uint8Array]",lze="[object Uint8ClampedArray]",uze="[object Uint16Array]",dze="[object Uint32Array]",hze="[object Int8Array]",fze="[object Int16Array]",pze="[object Int32Array]",gze="[object Float32Array]",mze="[object Float64Array]";function yze(t,e){return Hb(t,void 0,t,new Map,e)}function Hb(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(O4(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Hb(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,Hb(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(Hb(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(D4(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Hb(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),ay(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),ay(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),ay(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,ay(o,t,n,r,s),o}if(typeof t=="object"&&wze(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),ay(o,t,n,r,s),o}return t}function ay(t,e,n=t,r,s){const i=[...Object.keys(e),...Fie(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Hb(e[a],a,n,r,s))}}function wze(t){switch(jie(t)){case Gie:case sze:case ize:case aze:case Hie:case tze:case gze:case mze:case hze:case fze:case pze:case nze:case zie:case oze:case XWe:case rze:case Wie:case eze:case cze:case lze:case uze:case dze:return!0;default:return!1}}function bze(t,e){return yze(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case zie:case Wie:case Hie:{const o=new t.constructor(t==null?void 0:t.valueOf());return ay(o,t),o}case Gie:{const o={};return ay(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function DG(t){return bze(t)}function MG(t){return t!==null&&typeof t=="object"&&jie(t)==="[object Arguments]"}function vze(t){return D4(t)}function Eze(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Cze(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=b5(s,o,r,new Map)}return s}function b5(t,e,n,r){if(O4(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return ZWe(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...Fie(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(MG(a)&&(a={...a}),MG(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=DG(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||OG(c)&&OG(a)?t[o]=b5(c,a,n,r):c==null&&Eze(a)?t[o]=b5({},a,n,r):c==null&&vze(a)?t[o]=DG(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function _ze(t,...e){return Cze(t,...e,JWe)}var Aze=Object.defineProperty,Sze=Object.defineProperties,Ize=Object.getOwnPropertyDescriptors,BG=Object.getOwnPropertySymbols,Nze=Object.prototype.hasOwnProperty,xze=Object.prototype.propertyIsEnumerable,LG=(t,e,n)=>e in t?Aze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ex=(t,e)=>{for(var n in e||(e={}))Nze.call(e,n)&&LG(t,n,e[n]);if(BG)for(var n of BG(e))xze.call(e,n)&&LG(t,n,e[n]);return t},Tze=(t,e)=>Sze(t,Ize(e));function Yc(t,e,n){var r;const s=dv(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${$ie}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function bw(t){return t.includes(":")?t.split(":")[1]:t}function qie(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function Rze(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function Cx(t={},e={}){const n=UG(t),r=UG(e);return _ze(n,r)}function UG(t){var e,n,r,s,i;const o={};if(!qg(t))return o;for(const[a,c]of Object.entries(t)){const l=LP(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=zb(a);o[f]=Tze(Ex(Ex({},o[f]),c),{chains:Qd(l,(e=o[f])==null?void 0:e.chains),methods:Qd(u,(n=o[f])==null?void 0:n.methods),events:Qd(d,(r=o[f])==null?void 0:r.events)}),(qg(h)||qg(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=Ex(Ex({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function $G(t){return t.includes(":")?t.split(":")[2]:t}function FG(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=LP(n)?[n]:r.chains?r.chains:qie(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function G3(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const Vie={},pr=t=>Vie[t],q3=(t,e)=>{Vie[t]=e};var kze=Object.defineProperty,Pze=(t,e,n)=>e in t?kze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qw=(t,e,n)=>Pze(t,typeof e!="symbol"?e+"":e,n);class Oze{constructor(e){Qw(this,"name","polkadot"),Qw(this,"client"),Qw(this,"httpProviders"),Qw(this,"events"),Qw(this,"namespace"),Qw(this,"chainId"),this.namespace=e.namespace,this.events=pr("events"),this.client=pr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Ql.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=bw(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yc(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yl(new Qu(r,pr("disableProviderPing")))}}var Dze=Object.defineProperty,Mze=Object.defineProperties,Bze=Object.getOwnPropertyDescriptors,jG=Object.getOwnPropertySymbols,Lze=Object.prototype.hasOwnProperty,Uze=Object.prototype.propertyIsEnumerable,v5=(t,e,n)=>e in t?Dze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,WG=(t,e)=>{for(var n in e||(e={}))Lze.call(e,n)&&v5(t,n,e[n]);if(jG)for(var n of jG(e))Uze.call(e,n)&&v5(t,n,e[n]);return t},zG=(t,e)=>Mze(t,Bze(e)),Jw=(t,e,n)=>v5(t,typeof e!="symbol"?e+"":e,n);class $ze{constructor(e){Jw(this,"name","eip155"),Jw(this,"client"),Jw(this,"chainId"),Jw(this,"namespace"),Jw(this,"httpProviders"),Jw(this,"events"),this.namespace=e.namespace,this.events=pr("events"),this.client=pr("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(Ql.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||Yc(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yl(new Qu(r,pr("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(bw(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:zG(WG({},u.sessionProperties||{}),{capabilities:zG(WG({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(wg("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${QWe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var Fze=Object.defineProperty,jze=(t,e,n)=>e in t?Fze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zw=(t,e,n)=>jze(t,typeof e!="symbol"?e+"":e,n);class Wze{constructor(e){Zw(this,"name","solana"),Zw(this,"client"),Zw(this,"httpProviders"),Zw(this,"events"),Zw(this,"namespace"),Zw(this,"chainId"),this.namespace=e.namespace,this.events=pr("events"),this.client=pr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Ql.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=bw(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yc(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yl(new Qu(r,pr("disableProviderPing")))}}var zze=Object.defineProperty,Hze=(t,e,n)=>e in t?zze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xw=(t,e,n)=>Hze(t,typeof e!="symbol"?e+"":e,n);class Gze{constructor(e){Xw(this,"name","cosmos"),Xw(this,"client"),Xw(this,"httpProviders"),Xw(this,"events"),Xw(this,"namespace"),Xw(this,"chainId"),this.namespace=e.namespace,this.events=pr("events"),this.client=pr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Ql.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=bw(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yc(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yl(new Qu(r,pr("disableProviderPing")))}}var qze=Object.defineProperty,Vze=(t,e,n)=>e in t?qze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,eb=(t,e,n)=>Vze(t,typeof e!="symbol"?e+"":e,n);class Kze{constructor(e){eb(this,"name","algorand"),eb(this,"client"),eb(this,"httpProviders"),eb(this,"events"),eb(this,"namespace"),eb(this,"chainId"),this.namespace=e.namespace,this.events=pr("events"),this.client=pr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||Yc(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(Ql.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yc(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Yl(new Qu(r,pr("disableProviderPing")))}}var Yze=Object.defineProperty,Qze=(t,e,n)=>e in t?Yze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tb=(t,e,n)=>Qze(t,typeof e!="symbol"?e+"":e,n);class Jze{constructor(e){tb(this,"name","cip34"),tb(this,"client"),tb(this,"httpProviders"),tb(this,"events"),tb(this,"namespace"),tb(this,"chainId"),this.namespace=e.namespace,this.events=pr("events"),this.client=pr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Ql.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=bw(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yl(new Qu(r,pr("disableProviderPing")))}}var Zze=Object.defineProperty,Xze=(t,e,n)=>e in t?Zze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nb=(t,e,n)=>Xze(t,typeof e!="symbol"?e+"":e,n);class eHe{constructor(e){nb(this,"name","elrond"),nb(this,"client"),nb(this,"httpProviders"),nb(this,"events"),nb(this,"namespace"),nb(this,"chainId"),this.namespace=e.namespace,this.events=pr("events"),this.client=pr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Ql.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=bw(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yc(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yl(new Qu(r,pr("disableProviderPing")))}}var tHe=Object.defineProperty,nHe=(t,e,n)=>e in t?tHe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rb=(t,e,n)=>nHe(t,typeof e!="symbol"?e+"":e,n);class rHe{constructor(e){rb(this,"name","multiversx"),rb(this,"client"),rb(this,"httpProviders"),rb(this,"events"),rb(this,"namespace"),rb(this,"chainId"),this.namespace=e.namespace,this.events=pr("events"),this.client=pr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Ql.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=bw(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yc(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yl(new Qu(r,pr("disableProviderPing")))}}var sHe=Object.defineProperty,iHe=(t,e,n)=>e in t?sHe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sb=(t,e,n)=>iHe(t,typeof e!="symbol"?e+"":e,n);class oHe{constructor(e){sb(this,"name","near"),sb(this,"client"),sb(this,"httpProviders"),sb(this,"events"),sb(this,"namespace"),sb(this,"chainId"),this.namespace=e.namespace,this.events=pr("events"),this.client=pr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Yc(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Ql.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yc(e,this.namespace);return typeof r>"u"?void 0:new Yl(new Qu(r,pr("disableProviderPing")))}}var aHe=Object.defineProperty,cHe=(t,e,n)=>e in t?aHe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ib=(t,e,n)=>cHe(t,typeof e!="symbol"?e+"":e,n);class lHe{constructor(e){ib(this,"name","tezos"),ib(this,"client"),ib(this,"httpProviders"),ib(this,"events"),ib(this,"namespace"),ib(this,"chainId"),this.namespace=e.namespace,this.events=pr("events"),this.client=pr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Yc(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Ql.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yc(e,this.namespace);return typeof r>"u"?void 0:new Yl(new Qu(r))}}var uHe=Object.defineProperty,dHe=(t,e,n)=>e in t?uHe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ob=(t,e,n)=>dHe(t,typeof e!="symbol"?e+"":e,n);class hHe{constructor(e){ob(this,"name",bb),ob(this,"client"),ob(this,"httpProviders"),ob(this,"events"),ob(this,"namespace"),ob(this,"chainId"),this.namespace=e.namespace,this.events=pr("events"),this.client=pr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Ql.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=dv(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Yc(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yl(new Qu(r,pr("disableProviderPing")))}}var fHe=Object.defineProperty,pHe=Object.defineProperties,gHe=Object.getOwnPropertyDescriptors,HG=Object.getOwnPropertySymbols,mHe=Object.prototype.hasOwnProperty,yHe=Object.prototype.propertyIsEnumerable,E5=(t,e,n)=>e in t?fHe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_x=(t,e)=>{for(var n in e||(e={}))mHe.call(e,n)&&E5(t,n,e[n]);if(HG)for(var n of HG(e))yHe.call(e,n)&&E5(t,n,e[n]);return t},V3=(t,e)=>pHe(t,gHe(e)),cl=(t,e,n)=>E5(t,typeof e!="symbol"?e+"":e,n);let wHe=class Kie{constructor(e){cl(this,"client"),cl(this,"namespaces"),cl(this,"optionalNamespaces"),cl(this,"sessionProperties"),cl(this,"scopedProperties"),cl(this,"events",new u4),cl(this,"rpcProviders",{}),cl(this,"session"),cl(this,"providerOpts"),cl(this,"logger"),cl(this,"uri"),cl(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:jI(mw({level:(e==null?void 0:e.logger)||PG})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new Kie(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:_x({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,SP(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Ur("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=FG(this.session.namespaces);this.namespaces=Cx(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=FG(s.namespaces);return this.namespaces=Cx(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===bb?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(Gg(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await qWe.init({core:this.providerOpts.core,logger:this.providerOpts.logger||PG,relayUrl:this.providerOpts.relayUrl||VWe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>zb(n)))];q3("client",this.client),q3("events",this.events),q3("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=Rze(n,this.session),s=qie(r),i=Cx(this.namespaces,this.optionalNamespaces),o=V3(_x({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new $ze({namespace:o});break;case"algorand":this.rpcProviders[n]=new Kze({namespace:o});break;case"solana":this.rpcProviders[n]=new Wze({namespace:o});break;case"cosmos":this.rpcProviders[n]=new Gze({namespace:o});break;case"polkadot":this.rpcProviders[n]=new Oze({namespace:o});break;case"cip34":this.rpcProviders[n]=new Jze({namespace:o});break;case"elrond":this.rpcProviders[n]=new eHe({namespace:o});break;case"multiversx":this.rpcProviders[n]=new rHe({namespace:o});break;case"near":this.rpcProviders[n]=new oHe({namespace:o});break;case"tezos":this.rpcProviders[n]=new lHe({namespace:o});break;default:this.rpcProviders[bb]?this.rpcProviders[bb].updateNamespace(o):this.rpcProviders[bb]=new hHe({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&Gg(o)&&this.events.emit("accountsChanged",o.map($G))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=zb(o),l=G3(o)!==G3(a)?`${c}:${G3(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=V3(_x({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",V3(_x({},Ur("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Ql.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[bb]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=Cx(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>zb(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=zb(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map($G);if(!Gg(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${vx}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${vx}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${vx}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(vx)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};var GG={};const bHe={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof GG<"u"?GG.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},C5={filterOutDuplicatesByRDNS(t){const e=De.state.enableEIP6963?ut.state.connectors:[],n=bt.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&Mt.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=ut.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=bt.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=ut.state,{featuredWalletIds:n}=De.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=De.state.features)==null?void 0:c.connectMethodsOrder),r=e||ut.state.connectors;if(n)return n;const{injected:s,announced:i}=AT.getConnectorsByType(r,Lt.state.recommended,Lt.state.featured),o=s.filter(AT.showConnector),a=i.filter(AT.showConnector);return o.length||a.length?["wallet","email","social"]:bHe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Lt.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&Lt.state.excludedWallets.some(r=>xP.isLowerCaseMatch(r.name,t.name));return e||n}},AT={getConnectorsByType(t,e,n){const{customWallets:r}=De.state,s=bt.getRecentWallets(),i=C5.filterOutDuplicateWallets(e),o=C5.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&Lt.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&Lt.state.excludedWallets.some(i=>xP.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!Mt.isMobile()||Mt.isMobile()&&!e&&!Yt.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(J.state.chains.values()).some(n=>ut.getConnectorId(n.namespace)===dt.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=De.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=AT.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:De.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(y=>y.isEnabled),p=new Set(f.map(y=>y.type)),g=c.filter(y=>p.has(y)).map(y=>({type:y,isEnabled:!0})),m=f.filter(({type:y})=>!g.some(({type:C})=>C===y));return Array.from(new Set([...g,...m].map(({type:y})=>y)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ST=globalThis,M4=ST.ShadowRoot&&(ST.ShadyCSS===void 0||ST.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,B4=Symbol(),qG=new WeakMap;let Yie=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==B4)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(M4&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=qG.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&qG.set(n,e))}return e}toString(){return this.cssText}};const fl=t=>new Yie(typeof t=="string"?t:t+"",void 0,B4),Bl=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new Yie(n,t,B4)},vHe=(t,e)=>{if(M4)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=ST.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},VG=M4?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return fl(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:EHe,defineProperty:CHe,getOwnPropertyDescriptor:_He,getOwnPropertyNames:AHe,getOwnPropertySymbols:SHe,getPrototypeOf:IHe}=Object,Vg=globalThis,KG=Vg.trustedTypes,NHe=KG?KG.emptyScript:"",K3=Vg.reactiveElementPolyfillSupport,H_=(t,e)=>t,_5={toAttribute(t,e){switch(e){case Boolean:t=t?NHe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},Qie=(t,e)=>!EHe(t,e),YG={attribute:!0,type:String,converter:_5,reflect:!1,useDefault:!1,hasChanged:Qie};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Vg.litPropertyMetadata??(Vg.litPropertyMetadata=new WeakMap);let vb=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=YG){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&CHe(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=_He(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??YG}static _$Ei(){if(this.hasOwnProperty(H_("elementProperties")))return;const e=IHe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(H_("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(H_("properties"))){const n=this.properties,r=[...AHe(n),...SHe(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(VG(s))}else e!==void 0&&n.push(VG(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return vHe(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:_5).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:_5;this._$Em=s;const l=c.fromAttribute(n,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??Qie)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};vb.elementStyles=[],vb.shadowRootOptions={mode:"open"},vb[H_("elementProperties")]=new Map,vb[H_("finalized")]=new Map,K3==null||K3({ReactiveElement:vb}),(Vg.reactiveElementVersions??(Vg.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const G_=globalThis,mk=G_.trustedTypes,QG=mk?mk.createPolicy("lit-html",{createHTML:t=>t}):void 0,Jie="$lit$",$p=`lit$${Math.random().toFixed(9).slice(2)}$`,Zie="?"+$p,xHe=`<${Zie}>`,K0=document,ES=()=>K0.createComment(""),CS=t=>t===null||typeof t!="object"&&typeof t!="function",L4=Array.isArray,THe=t=>L4(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",Y3=`[ 	
\f\r]`,R1=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,JG=/-->/g,ZG=/>/g,Fm=RegExp(`>|${Y3}(?:([^\\s"'>=/]+)(${Y3}*=${Y3}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),XG=/'/g,eq=/"/g,Xie=/^(?:script|style|textarea|title)$/i,eoe=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),Kot=eoe(1),Yot=eoe(2),ZE=Symbol.for("lit-noChange"),$i=Symbol.for("lit-nothing"),tq=new WeakMap,Ny=K0.createTreeWalker(K0,129);function toe(t,e){if(!L4(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return QG!==void 0?QG.createHTML(e):e}const RHe=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=R1;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===R1?u[1]==="!--"?o=JG:u[1]!==void 0?o=ZG:u[2]!==void 0?(Xie.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=Fm):u[3]!==void 0&&(o=Fm):o===Fm?u[0]===">"?(o=s??R1,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Fm:u[3]==='"'?eq:XG):o===eq||o===XG?o=Fm:o===JG||o===ZG?o=R1:(o=Fm,s=void 0);const f=o===Fm&&t[a+1].startsWith("/>")?" ":"";i+=o===R1?c+xHe:d>=0?(r.push(l),c.slice(0,d)+Jie+c.slice(d)+$p+f):c+$p+(d===-2?a:f)}return[toe(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class _S{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=RHe(e,n);if(this.el=_S.createElement(l,r),Ny.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Ny.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(Jie)){const h=u[o++],f=s.getAttribute(d).split($p),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?PHe:p[1]==="?"?OHe:p[1]==="@"?DHe:FP}),s.removeAttribute(d)}else d.startsWith($p)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(Xie.test(s.tagName)){const d=s.textContent.split($p),h=d.length-1;if(h>0){s.textContent=mk?mk.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],ES()),Ny.nextNode(),c.push({type:2,index:++i});s.append(d[h],ES())}}}else if(s.nodeType===8)if(s.data===Zie)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf($p,d+1))!==-1;)c.push({type:7,index:i}),d+=$p.length-1}i++}}static createElement(e,n){const r=K0.createElement("template");return r.innerHTML=e,r}}function XE(t,e,n=t,r){var o,a;if(e===ZE)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=CS(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=XE(t,s._$AS(t,e.values),s,r)),e}class kHe{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??K0).importNode(n,!0);Ny.currentNode=s;let i=Ny.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new XI(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new MHe(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=Ny.nextNode(),o++)}return Ny.currentNode=K0,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class XI{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=$i,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=XE(this,e,n),CS(e)?e===$i||e==null||e===""?(this._$AH!==$i&&this._$AR(),this._$AH=$i):e!==this._$AH&&e!==ZE&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):THe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==$i&&CS(this._$AH)?this._$AA.nextSibling.data=e:this.T(K0.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=_S.createElement(toe(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new kHe(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=tq.get(e.strings);return n===void 0&&tq.set(e.strings,n=new _S(e)),n}k(e){L4(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new XI(this.O(ES()),this.O(ES()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class FP{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=$i,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=$i}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=XE(this,e,n,0),o=!CS(e)||e!==this._$AH&&e!==ZE,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=XE(this,a[r+c],n,c),l===ZE&&(l=this._$AH[c]),o||(o=!CS(l)||l!==this._$AH[c]),l===$i?e=$i:e!==$i&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===$i?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class PHe extends FP{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===$i?void 0:e}}class OHe extends FP{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==$i)}}class DHe extends FP{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=XE(this,e,n,0)??$i)===ZE)return;const r=this._$AH,s=e===$i&&r!==$i||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==$i&&(r===$i||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class MHe{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){XE(this,e)}}const Q3=G_.litHtmlPolyfillSupport;Q3==null||Q3(_S,XI),(G_.litHtmlVersions??(G_.litHtmlVersions=[])).push("3.3.1");const BHe=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new XI(e.insertBefore(ES(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const h0=globalThis;let IT=class extends vb{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=BHe(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return ZE}};var $K;IT._$litElement$=!0,IT.finalized=!0,($K=h0.litElementHydrateSupport)==null||$K.call(h0,{LitElement:IT});const J3=h0.litElementPolyfillSupport;J3==null||J3({LitElement:IT});(h0.litElementVersions??(h0.litElementVersions=[])).push("4.2.1");let q_,Kg,Yg;function Jot(t,e){q_=document.createElement("style"),Kg=document.createElement("style"),Yg=document.createElement("style"),q_.textContent=hv(t).core.cssText,Kg.textContent=hv(t).dark.cssText,Yg.textContent=hv(t).light.cssText,document.head.appendChild(q_),document.head.appendChild(Kg),document.head.appendChild(Yg),noe(e)}function noe(t){Kg&&Yg&&(t==="light"?(Kg.removeAttribute("media"),Yg.media="enabled"):(Yg.removeAttribute("media"),Kg.media="enabled"))}function LHe(t){q_&&Kg&&Yg&&(q_.textContent=hv(t).core.cssText,Kg.textContent=hv(t).dark.cssText,Yg.textContent=hv(t).light.cssText)}function hv(t){return{core:Bl`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${fl(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${fl((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${fl((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${fl((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${fl((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Bl`
      :root {
        --w3m-color-mix: ${fl((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${fl(hf(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${fl(hf(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Bl`
      :root {
        --w3m-color-mix: ${fl((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${fl(hf(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${fl(hf(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const Zot=Bl`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,Xot=Bl`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,eat=Bl`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,t_={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},roe=Ree({id:42161,name:"Arbitrum One",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://arbiscan.io",apiUrl:"https://api.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}}),soe=Ree({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function eN(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const A5=eN({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),S5=eN({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),UHe=eN({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});eN({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});eN({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const $He={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},NT={getMethodsByChainNamespace(t){return $He[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case A5.caipNetworkId:u.chains.push(A5.deprecatedCaipNetworkId);break;case S5.caipNetworkId:u.chains.push(S5.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await L_.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};let ioe=class{constructor({provider:e,namespace:n}){this.id=dt.CONNECTOR_ID.WALLET_CONNECT,this.name=ek.ConnectorNamesMap[dt.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=ek.ConnectorImageIds[dt.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=J.getCaipNetworks.bind(J),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=De.state.universalProviderConfigOverride,s=NT.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return F_.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:FHe})}};const FHe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];let jHe=class{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>J.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:dt.CONNECTOR_ID.AUTH,type:"AUTH",name:dt.CONNECTOR_NAMES.AUTH,provider:e,imageId:ek.ConnectorImageIds[dt.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){wt.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=wt.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof ioe);if(!e)throw new Error("WalletConnectConnector not found");return e}};class WHe extends jHe{setUniversalProvider(e){this.addConnector(new ioe({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>Mt.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&$r.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(wt.state.balanceLoading&&e.chainId===((c=J.state.activeCaipNetwork)==null?void 0:c.id))return{balance:wt.state.balance||"0.00",symbol:wt.state.balanceSymbol||""};const s=(await wt.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=J.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===dt.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:Ka.encode(new TextEncoder().encode(r)),pubkey:s}},(a=J.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=J.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===dt.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:jl(n.id)}]}))}catch(u){if(u.code===t_.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===t_.ERROR_INVALID_CHAIN_ID||u.code===t_.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===t_.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:jl(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const zHe=["email","socials","swaps","onramp","activity","reownBranding"],Ax={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?$r.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?$r.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?$r.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?$r.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?$r.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?$r.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?$r.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?$r.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?$r.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},HHe={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=Ax[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=Ax[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return Ax[t].processApi(e)},processFallbackFeature(t,e){return Ax[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await Lt.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?$r.DEFAULT_REMOTE_FEATURES:$r.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of zHe){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),$r.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Ud.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class GHe{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=J.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=J.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=J.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return J.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>J.getCaipNetworks(n),this.getActiveChainNamespace=()=>J.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{J.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>J.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>J.state.activeChain===n||!n?J.state.activeCaipAddress:J.getAccountProp("caipAddress",n),this.setClientId=n=>{Kt.setClientId(n)},this.getProvider=n=>Lr.getProvider(n),this.getProviderType=n=>Lr.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=wt.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{wt.setCaipAddress(n,r),n&&De.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{wt.setBalance(n,r,s)},this.setProfileName=(n,r)=>{wt.setProfileName(n,r)},this.setProfileImage=(n,r)=>{wt.setProfileImage(n,r)},this.setUser=(n,r)=>{wt.setUser(n,r)},this.resetAccount=n=>{wt.resetAccount(n)},this.setCaipNetwork=n=>{J.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{J.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{wt.setAllAccounts(n,r),De.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{wt.setStatus(n,r),ut.isConnected()?bt.setConnectionStatus("connected"):bt.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>J.getAccountProp("address",n),this.setConnectors=n=>{const r=[...ut.state.allConnectors,...n];ut.setConnectors(r)},this.setConnections=(n,r)=>{Yt.setConnections(n,r)},this.fetchIdentity=n=>Kt.fetchIdentity(n),this.getReownName=n=>L_.getNamesForAddress(n),this.getConnectors=()=>ut.getConnectors(),this.getConnectorImage=n=>sre.getConnectorImage(n),this.setConnectedWalletInfo=(n,r)=>{const s=Lr.getProviderId(r),i=n?{...n,type:s}:void 0;wt.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!J.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{wt.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{wt.removeAddressLabel(n,r)},this.getAddress=n=>J.state.activeChain===n||!n?wt.state.address:J.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>J.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{J.resetNetwork(n)},this.addConnector=n=>{ut.addConnector(n)},this.resetWcConnection=()=>{Yt.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{wt.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{wt.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{J.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{wt.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{De.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await HHe.fetchRemoteFeatures(e),De.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&NU.setOnrampProviders(this.remoteFeatures.onramp),((n=De.state.remoteFeatures)!=null&&n.email||Array.isArray((r=De.state.remoteFeatures)==null?void 0:r.socials)&&((s=De.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){const e=await Lt.fetchAllowedOrigins();if(e&&Mt.isClient()){const n=window.location.origin;NT.isOriginAllowed(n,e,t_.DEFAULT_ALLOWED_ANCESTORS)||Ud.open(kd.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else Ud.open(kd.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,Is.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Wa.setThemeMode(e.themeMode),e.themeVariables&&Wa.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");J.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&J.setActiveCaipNetwork(n)}initializeConnectionController(e){Yt.setWcBasic(e.basic??!1)}initializeConnectorController(){ut.initialize(this.chainNamespaces)}initializeProjectSettings(e){De.setProjectId(e.projectId),De.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;De.setDebug(e.debug!==!1),De.setEnableWalletConnect(e.enableWalletConnect!==!1),De.setEnableWalletGuide(e.enableWalletGuide!==!1),De.setEnableWallets(e.enableWallets!==!1),De.setEIP6963Enabled(e.enableEIP6963!==!1),De.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),De.setEnableAuthLogger(e.enableAuthLogger!==!1),De.setCustomRpcUrls(e.customRpcUrls),De.setEnableEmbedded(e.enableEmbedded),De.setAllWallets(e.allWallets),De.setIncludeWalletIds(e.includeWalletIds),De.setExcludeWalletIds(e.excludeWalletIds),De.setFeaturedWalletIds(e.featuredWalletIds),De.setTokens(e.tokens),De.setTermsConditionsUrl(e.termsConditionsUrl),De.setPrivacyPolicyUrl(e.privacyPolicyUrl),De.setCustomWallets(e.customWallets),De.setFeatures(e.features),De.setAllowUnsupportedChain(e.allowUnsupportedChain),De.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),De.setPreferUniversalLinks(e.experimental_preferUniversalLinks),De.setDefaultAccountTypes(e.defaultAccountTypes);const n=bt.getPreferredAccountTypes()||{},r={...De.state.defaultAccountTypes,...n};wt.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),De.setMetadata(e.metadata),De.setDisableAppend(e.disableAppend),De.setEnableEmbedded(e.enableEmbedded),De.setSIWX(e.siwx),!e.projectId){Ud.open(kd.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===dt.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");De.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return Mt.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=yb.getUnsupportedNetwork(`${n}:${e}`);J.setActiveCaipNetwork(r)}}getDefaultNetwork(){return yb.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return yb.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return yb.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?yb.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=Lr.getProvider(e),s=Lr.getProviderId(e),{caipAddress:i}=J.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),bt.removeConnectedNamespace(e),Lr.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),ut.removeConnectorId(e),J.resetAccount(e),J.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=J.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),bt.setConnectedNamespaces([...J.state.chains.keys()]),this.chainNamespaces.forEach(o=>{ut.setConnectorId(za.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,m,y,w,C,N;const c=J.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const I=this.getCaipNetworks().find(k=>k.chainNamespace===i);I&&this.setCaipNetwork(I)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((y=(m=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:m.http)==null?void 0:y[0])||((N=(C=(w=d==null?void 0:d.rpcUrls)==null?void 0:w.default)==null?void 0:C.http)==null?void 0:N[0])});if(!h)return;bt.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=wt.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=J.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),bt.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const n=BBe(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));wr.resetSend(),Yt.resetWcConnection(),await F_.clearSessions(),ut.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));bt.deleteConnectedSocialProvider(),Is.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(J.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:wt.state.address,provider:Lr.getProvider(J.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if($r.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(J.state.activeChain),s=Lr.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===dt.CHAIN.EVM){const n=this.getAdapter(J.state.activeChain),r=Lr.getProvider(J.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:wt.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:J.state.activeChain}),wt.state.profileImage||!1},getEnsAddress:async e=>await NT.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(J.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=Lr.getProvider(J.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(J.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(J.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(J.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(J.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(J.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(J.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!wt.state.address||this.updateNativeBalance(wt.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},Yt.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(Lr.getProviderId(J.state.activeChain)===za.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Lr.getProvider(n),i=Lr.getProviderId(n);if(e.chainNamespace===J.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===za.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=ip.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new WHe({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=bt.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(bt.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=J.state.activeChain===e,c=J.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=wt.state.address,i=J.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=J.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=J.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=J.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===dt.CHAIN.EVM&&Mt.isSafeApp()&&ut.setConnectorId(dt.CONNECTOR_ID.SAFE,e);const n=ut.getConnectorId(e);switch(this.setStatus("connecting",e),n){case dt.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case dt.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=ut.getConnectorId(e),s=this.getCaipNetwork(e),o=ut.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([Mt.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async n=>{var a,c,l,u,d;const r=this.getAdapter(n),s=((u=(l=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:l[n])==null?void 0:u.accounts)||[],i=(d=J.state.activeCaipNetwork)==null?void 0:d.id,o=s.find(h=>{const{chainId:f}=ip.parseCaipAddress(h);return f===(i==null?void 0:i.toString())})||s[0];if(o){const h=ip.validateCaipAddress(o),{chainId:f,address:p}=ip.parseCaipAddress(h);if(Lr.setProviderId(n,za.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&J.state.activeCaipNetwork&&(r==null?void 0:r.namespace)!==dt.CHAIN.EVM){const g=r==null?void 0:r.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:J.state.activeCaipNetwork});Lr.setProvider(n,g)}else Lr.setProvider(n,this.universalProvider);ut.setConnectorId(dt.CONNECTOR_ID.WALLET_CONNECT,n),bt.addConnectedNamespace(n),this.syncWalletConnectAccounts(n),await this.syncAccount({address:p,chainId:f,chainNamespace:n})}else this.setStatus("disconnected",n);this.syncConnectedWalletInfo(n),await J.setApprovedCaipNetworksData(n)});await Promise.all(e)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=ip.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>Mt.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){Lr.setProviderId(s,e),Lr.setProvider(s,n),ut.setConnectorId(r,s)}async syncAllAccounts(e){const n=ut.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===J.state.activeChain,r=J.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=bt.getActiveNetworkProps(),c=i||a,l=((d=J.state.activeCaipNetwork)==null?void 0:d.name)===dt.UNSUPPORTED_NETWORK_NAME,u=J.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(m=>m.id.toString()===c.toString()),p=this.getCaipNetworks().find(m=>m.chainNamespace===o);if(!u&&!f&&!p){const m=this.getApprovedCaipNetworkIds()||[],y=m.find(C=>{var N;return((N=ip.parseCaipNetworkId(C))==null?void 0:N.chainId)===c.toString()}),w=m.find(C=>{var N;return((N=ip.parseCaipNetworkId(C))==null?void 0:N.chainNamespace)===o});f=this.getCaipNetworks().find(C=>C.caipNetworkId===y),p=this.getCaipNetworks().find(C=>C.caipNetworkId===w||"deprecatedCaipNetworkId"in C&&C.deprecatedCaipNetworkId===w)}const g=f||p;(g==null?void 0:g.chainNamespace)===J.state.activeChain?De.state.enableNetworkSwitch&&!De.state.allowUnsupportedChain&&((h=J.state.activeCaipNetwork)==null?void 0:h.name)===dt.UNSUPPORTED_NETWORK_NAME?J.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),xP.isLowerCaseMatch(s,wt.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=ut.getConnectorId(e),r=Lr.getProviderId(e);if(r===za.CONNECTOR_TYPE_ANNOUNCED||r===za.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===za.CONNECTOR_TYPE_WALLET_CONNECT){const i=Lr.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===dt.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===dt.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!ere.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=J.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=$Be.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};De.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await wHe.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{Yt.setUri(e)}),this.universalProvider.on("connect",Yt.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),Yt.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(NT.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&Mt.isCaipAddress(r[0])&&this.syncAccount(ip.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&Mt.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Is.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(kd.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=kd.ALERT_ERRORS[o];a&&(Ud.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&Yt.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return Fi.open({...e,data:{swap:e.arguments}})}return Fi.open(e)}async close(){await this.injectModalUi(),Fi.close()}setLoading(e,n){Fi.setLoading(e,n)}async disconnect(e){await Yt.disconnect(e)}getSIWX(){return De.state.siwx}getError(){return""}getChainId(){var e;return(e=J.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){Ud.open(kd.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await J.switchActiveNetwork(n)}getWalletProvider(){return J.state.activeChain?Lr.state.providers[J.state.activeChain]:null}getWalletProviderType(){return Lr.getProviderId(J.state.activeChain)}subscribeProviders(e){return Lr.subscribeProviders(e)}getThemeMode(){return Wa.state.themeMode}getThemeVariables(){return Wa.state.themeVariables}setThemeMode(e){Wa.setThemeMode(e),noe(Wa.state.themeMode)}setTermsConditionsUrl(e){De.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){De.setPrivacyPolicyUrl(e)}setThemeVariables(e){Wa.setThemeVariables(e),LHe(Wa.state.themeVariables)}subscribeTheme(e){return Wa.subscribe(e)}getWalletInfo(){return wt.state.connectedWalletInfo}getAccount(e){var o;const n=ut.getAuthConnector(e),r=J.getAccountData(e),s=J.state.activeChain,i=bt.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:Mt.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===dt.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:bt.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?J.subscribeChainProp("accountState",r,n):J.subscribe(r),ut.subscribe(r)}subscribeNetwork(e){return J.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e){return wt.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){wt.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){J.subscribeKey("activeCaipNetwork",e)}getState(){return Kd.state}subscribeState(e){return Kd.subscribe(e)}showErrorMessage(e){ku.showError(e)}showSuccessMessage(e){ku.showSuccess(e)}getEvent(){return{...Is.state}}subscribeEvents(e){return Is.subscribe(e)}replace(e){Rn.replace(e)}redirect(e){Rn.push(e)}popTransactionStack(e){Rn.popTransactionStack(e)}isOpen(){return Fi.state.open}isTransactionStackEmpty(){return Rn.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){De.setFeatures(e)}updateRemoteFeatures(e){De.setRemoteFeatures(e)}updateOptions(e){const r={...De.state||{},...e};De.setOptions(r)}setConnectMethodsOrder(e){De.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){De.setWalletFeaturesOrder(e)}setCollapseWallets(e){De.setCollapseWallets(e)}setSocialsOrder(e){De.setSocialsOrder(e)}getConnectMethodsOrder(){return C5.getConnectOrderMethod(De.state.features,ut.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||J.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&J.removeNetwork(e,n)}}let nq=!1;class qHe extends GHe{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{$c.checkIfRequestExists(n)?$c.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(go.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(go.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=$c.checkIfRequestIsSafe(r),i=wt.state.address,o=J.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=J.state.activeChain;ut.getConnectorId(n)===dt.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=J.state.activeChain,s=r===dt.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=De.state.defaultAccountTypes[r],o=(l=wt.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;xP.isLowerCaseMatch(n.address,wt.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...wt.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>Mt.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[Mt.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...wt.state.user||{},username:n},J.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,J.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,J.state.activeChain)})}async syncAuthConnector(e,n){var u,d,h,f;const r=dt.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!r)return;this.setLoading(!0,n);const s=e.getLoginEmailUsed();this.setLoading(s,n),s&&this.setStatus("connecting",n);const i=e.getEmail(),o=e.getUsername();this.setUser({...((u=wt.state)==null?void 0:u.user)||{},username:o,email:i},n),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),c=Wa.getSnapshot(),l=De.getSnapshot();await Promise.all([e.syncDappData({metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:hf(c.themeVariables,c.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&(a&&((d=this.connectionControllerClient)!=null&&d.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:dt.CONNECTOR_ID.AUTH,info:{name:dt.CONNECTOR_ID.AUTH},type:za.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=J.state.activeCaipNetwork)==null?void 0:h.id,chain:n})),this.setStatus("connected",n)):ut.getConnectorId(n)===dt.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),bt.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!Mt.isTelegram())return;const r=bt.getTelegramSocialProvider();if(!r||!Mt.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;wt.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=ut.getAuthConnector();r&&o&&(this.setLoading(!0,e),await Yt.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),bt.setConnectedSocialProvider(r),bt.removeTelegramSocialProvider(),Is.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var o,a,c,l;if(!dt.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(o=this.remoteFeatures)==null?void 0:o.email,s=Array.isArray((a=this.remoteFeatures)==null?void 0:a.socials)&&this.remoteFeatures.socials.length>0,i=r||s;!this.authProvider&&((c=this.options)!=null&&c.projectId)&&i&&(this.authProvider=g5e.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(l=this.getCaipNetwork(e))==null?void 0:l.caipNetworkId,abortController:kd.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?Ud.open(kd.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?Ud.open(kd.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&Ud.open(kd.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),Kd.subscribeOpen(u=>{var d;!u&&this.isTransactionStackEmpty()&&((d=this.authProvider)==null||d.rejectRpcRequests())}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&Lt.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=J.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=Lr.getProvider(r),u=Lr.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=Lr.getProviderId(n)===za.CONNECTOR_TYPE_AUTH,u=Lr.getProviderId(r),d=u===za.CONNECTOR_TYPE_AUTH,h=dt.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(J.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:dt.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:za.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===za.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Kd.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==dt.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=Lr.getProviderId(e);if(n===za.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=bt.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(Mt.isClient()&&!nq)try{const e={...$r.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),Mt.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!De.state.disableAppend&&!De.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}nq=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!Mt.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(no(()=>import("./embedded-wallet-D5XngYq6.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),n.email&&r.push(no(()=>import("./email-CZ0d_cjC.js"),__vite__mapDeps([12,1,11,5,10,4,9,13,6]))),n.socials&&r.push(no(()=>import("./socials-CATFVkNw.js"),__vite__mapDeps([14,1,15,4,16,17,10,18,9,5,11,19,3,20]))),n.swaps&&n.swaps.length>0&&r.push(no(()=>import("./swaps-BAq74lDe.js"),__vite__mapDeps([21,1,9,5,22,23,24,3,10,20,6,4]))),e.send&&r.push(no(()=>import("./send-B8sehWPX.js"),__vite__mapDeps([25,1,9,5,10,4,16,11,24,3,6,26,27]))),e.receive&&r.push(no(()=>import("./receive-CmyMxGCI.js"),__vite__mapDeps([28,1,29,3,19]))),n.onramp&&n.onramp.length>0&&r.push(no(()=>import("./onramp-C8jGrGO3.js"),__vite__mapDeps([30,1,31,20,10,3,5,32,15,4,16,33,11,9,18,6]))),n.activity&&r.push(no(()=>import("./transactions-DrYzBhc7.js"),__vite__mapDeps([34,1,35,31,20,10,11,3]))),e.pay&&r.push(no(()=>import("./index-DnF4L0xA.js"),__vite__mapDeps([36,1,9,5,37,3,10,7,32,27,18]))),await Promise.all([...r,no(()=>import("./index-KS5xB8XA.js"),__vite__mapDeps([38,1,3,5,26,10,39,23,7,32,9,8,37,35,31,20,11,22,4,6,27,13,15,16,17,2,18,29,19,33])),no(()=>import("./w3m-modal-Bc2lN8pB.js"),__vite__mapDeps([40,1,7,3,10,8,5,23,39]))])}}let Sp;function VHe(t){t&&(Sp=t)}function tN(){if(!Sp)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(Sp==null?void 0:Sp.open(n))}async function e(){await(Sp==null?void 0:Sp.close())}return{open:t,close:e}}const KHe="1.7.8";let Sx;function YHe(t){return Sx||(Sx=new qHe({...t,sdkVersion:Mt.generateSdkVersion(t.adapters??[],"react",KHe)}),VHe(Sx)),Sx}const QHe=Yu({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),rq=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],JHe=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=QHe({isOpen:t}),{open:i}=tN(),o=G.useRef(null),[a,c]=G.useState([]),[l,u]=G.useState(!0),[d,h]=G.useState(null),[f,p]=G.useState("all"),[g,m]=G.useState(1),[y,w]=G.useState(1),[C,N]=G.useState(0),[I,k]=G.useState(null),[P,U]=G.useState(rq[0]),[M,W]=G.useState(!1),[j,K]=G.useState(null),$=G.useCallback(async()=>{var B,F;try{if((B=window.solana)!=null&&B.isPhantom){const L=await window.solana.connect();K(L.publicKey.toString());return}if((F=window.solflare)!=null&&F.isSolflare){const L=await window.solflare.connect();K(L.publicKey.toString());return}i()}catch(L){console.error("Failed to connect Solana wallet:",L),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}W(!1)},[i]);G.useEffect(()=>{var B,F;(B=window.solana)!=null&&B.publicKey?K(window.solana.publicKey.toString()):(F=window.solflare)!=null&&F.publicKey&&K(window.solflare.publicKey.toString())},[]),G.useEffect(()=>{t&&(async()=>{var F;u(!0),h(null);try{let L,A=f==="owned"&&r||void 0;if(P.api==="opensea-solana"){if(f==="owned"&&!j){W(!0),u(!1);return}A=j||void 0,L=await Jne(P.slug,50),console.log("Fetched Solana NFTs from collection:",L.data.length),f==="owned"&&j&&(console.log("Filtering for owner:",j),console.log("Sample NFT owner data:",(F=L.data[0])==null?void 0:F.owners),console.log("All NFTs owner data:",L.data.map(re=>({name:re.name,owners:re.owners,owner_of:re.owner_of}))),L.data.some(re=>re.owners&&re.owners.length>0)?(L.data=L.data.filter(re=>{const se=re.owners.some(ge=>ge.owner_of&&ge.owner_of.toLowerCase()===j.toLowerCase());return se&&console.log("Found owned NFT:",re.name),se}),console.log("NFTs after filtering:",L.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else P.api==="opensea"?L=await c4(P.slug,50,A):L=await a4(P.slug,g,50,A);c(L.data),w(L.totalPages),N(L.totalCount)}catch(L){L instanceof Error?h(L.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,P,j]),G.useEffect(()=>{M&&$()},[M,$]);const v=B=>new Date(B).toLocaleDateString(),E=B=>P.api==="opensea-solana"?B.owner_of&&B.owner_of.length>0?`${B.owner_of.substring(0,6)}...${B.owner_of.substring(-4)}`:B.owners&&B.owners.length>0?`${B.owners[0].owner_of.substring(0,6)}...${B.owners[0].owner_of.substring(-4)}`:"Owner data unavailable":B.owner_of&&B.owner_of.length>0?`${B.owner_of.substring(0,6)}...${B.owner_of.substring(-4)}`:B.owners&&B.owners.length>0?`${B.owners[0].owner_of.substring(0,6)}...${B.owners[0].owner_of.substring(-4)}`:"N/A",_=()=>{n&&n()},O=async B=>{if(P.api==="opensea"&&P.chain)try{const F=await Qne(P.chain,B.address,B.token_id.toString()),L={...B,attributes:JSON.stringify(F.traits||[])};k(L)}catch(F){console.error("Failed to fetch full NFT details",F),k(B)}else k(B)},x=B=>{U(B),m(1)};return t?b.jsxs(b.Fragment,{children:[b.jsx(LI,{nodeRef:o,handle:`.${s.header}`,children:b.jsxs("div",{ref:o,className:s.popup,children:[b.jsxs("div",{className:s.header,children:[b.jsx("span",{children:"LAWB NFT GALLERY"}),b.jsxs("div",{className:s.titleBarButtons,children:[b.jsx("button",{className:s.titleBarButton,onClick:_,title:"Minimize",children:"_"}),b.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),b.jsx("div",{className:s.collectionSelector,children:rq.map(B=>b.jsx("button",{className:`${s.collectionButton} ${P.slug===B.slug?"active":""}`,onClick:()=>x(B),children:B.name},B.slug))}),b.jsxs("div",{className:s.content,children:[b.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[b.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),b.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),b.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!j,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||j?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||j?1:.6},children:"My NFTs"}),P.api==="opensea-solana"&&b.jsx("button",{onClick:()=>{$()},style:{background:j?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:j?"white":"black",marginLeft:"auto"},children:j?`Solana: ${j.slice(0,4)}...${j.slice(-4)}`:"Connect Solana"})]}),P.api==="opensea-solana"&&!j&&b.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&b.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?b.jsx("div",{children:"Loading NFTs..."}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${C} total)`,f==="recent"&&`Recently minted NFTs by ${P.api==="opensea-solana"?(j==null?void 0:j.slice(0,6))+"..."+(j==null?void 0:j.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${P.api==="opensea-solana"?(j==null?void 0:j.slice(0,6))+"..."+(j==null?void 0:j.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?b.jsx("div",{children:"No NFTs found."}):b.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map(B=>b.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{O(B)},children:[b.jsx(Xne,{src:Zne(B),alt:`NFT #${B.token_id}`,style:{width:"100%",height:"150px",objectFit:"cover",marginBottom:"10px",border:"1px solid #ccc",backgroundColor:"#f0f0f0"}}),b.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:b.jsxs("strong",{children:["#",B.token_id]})}),b.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",E(B)]}),b.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",v(B.created_at)]})]},B.id))}),f!=="recent"&&y>1&&b.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[b.jsx("button",{onClick:()=>m(B=>Math.max(1,B-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),b.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",y]}),b.jsx("button",{onClick:()=>m(B=>Math.min(y,B+1)),disabled:g===y,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===y?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),I&&b.jsx(rke,{nft:I,onClose:()=>k(null)})]}):null};var Ix,ZHe=new Uint8Array(16);function ooe(){if(!Ix&&(Ix=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Ix))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ix(ZHe)}const XHe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function jP(t){return typeof t=="string"&&XHe.test(t)}var Qi=[];for(var Z3=0;Z3<256;++Z3)Qi.push((Z3+256).toString(16).substr(1));function WP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Qi[t[e+0]]+Qi[t[e+1]]+Qi[t[e+2]]+Qi[t[e+3]]+"-"+Qi[t[e+4]]+Qi[t[e+5]]+"-"+Qi[t[e+6]]+Qi[t[e+7]]+"-"+Qi[t[e+8]]+Qi[t[e+9]]+"-"+Qi[t[e+10]]+Qi[t[e+11]]+Qi[t[e+12]]+Qi[t[e+13]]+Qi[t[e+14]]+Qi[t[e+15]]).toLowerCase();if(!jP(n))throw TypeError("Stringified UUID is invalid");return n}var sq,X3,eM=0,tM=0;function eGe(t,e,n){var r=e&&n||0,s=e||new Array(16);t=t||{};var i=t.node||sq,o=t.clockseq!==void 0?t.clockseq:X3;if(i==null||o==null){var a=t.random||(t.rng||ooe)();i==null&&(i=sq=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=X3=(a[6]<<8|a[7])&16383)}var c=t.msecs!==void 0?t.msecs:Date.now(),l=t.nsecs!==void 0?t.nsecs:tM+1,u=c-eM+(l-tM)/1e4;if(u<0&&t.clockseq===void 0&&(o=o+1&16383),(u<0||c>eM)&&t.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");eM=c,tM=l,X3=o,c+=122192928e5;var d=((c&268435455)*1e4+l)%4294967296;s[r++]=d>>>24&255,s[r++]=d>>>16&255,s[r++]=d>>>8&255,s[r++]=d&255;var h=c/4294967296*1e4&268435455;s[r++]=h>>>8&255,s[r++]=h&255,s[r++]=h>>>24&15|16,s[r++]=h>>>16&255,s[r++]=o>>>8|128,s[r++]=o&255;for(var f=0;f<6;++f)s[r+f]=i[f];return e||WP(s)}function aoe(t){if(!jP(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}function tGe(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var nGe="6ba7b810-9dad-11d1-80b4-00c04fd430c8",rGe="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function coe(t,e,n){function r(s,i,o,a){if(typeof s=="string"&&(s=tGe(s)),typeof i=="string"&&(i=aoe(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+s.length);if(c.set(i),c.set(s,i.length),c=n(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){a=a||0;for(var l=0;l<16;++l)o[a+l]=c[l];return o}return WP(c)}try{r.name=t}catch{}return r.DNS=nGe,r.URL=rGe,r}function sGe(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return iGe(oGe(aGe(t),t.length*8))}function iGe(t){for(var e=[],n=t.length*32,r="0123456789abcdef",s=0;s<n;s+=8){var i=t[s>>5]>>>s%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);e.push(o)}return e}function loe(t){return(t+64>>>9<<4)+14+1}function oGe(t,e){t[e>>5]|=128<<e%32,t[loe(e)-1]=e;for(var n=1732584193,r=-271733879,s=-1732584194,i=271733878,o=0;o<t.length;o+=16){var a=n,c=r,l=s,u=i;n=xo(n,r,s,i,t[o],7,-680876936),i=xo(i,n,r,s,t[o+1],12,-389564586),s=xo(s,i,n,r,t[o+2],17,606105819),r=xo(r,s,i,n,t[o+3],22,-1044525330),n=xo(n,r,s,i,t[o+4],7,-176418897),i=xo(i,n,r,s,t[o+5],12,1200080426),s=xo(s,i,n,r,t[o+6],17,-1473231341),r=xo(r,s,i,n,t[o+7],22,-45705983),n=xo(n,r,s,i,t[o+8],7,1770035416),i=xo(i,n,r,s,t[o+9],12,-1958414417),s=xo(s,i,n,r,t[o+10],17,-42063),r=xo(r,s,i,n,t[o+11],22,-1990404162),n=xo(n,r,s,i,t[o+12],7,1804603682),i=xo(i,n,r,s,t[o+13],12,-40341101),s=xo(s,i,n,r,t[o+14],17,-1502002290),r=xo(r,s,i,n,t[o+15],22,1236535329),n=To(n,r,s,i,t[o+1],5,-165796510),i=To(i,n,r,s,t[o+6],9,-1069501632),s=To(s,i,n,r,t[o+11],14,643717713),r=To(r,s,i,n,t[o],20,-373897302),n=To(n,r,s,i,t[o+5],5,-701558691),i=To(i,n,r,s,t[o+10],9,38016083),s=To(s,i,n,r,t[o+15],14,-660478335),r=To(r,s,i,n,t[o+4],20,-405537848),n=To(n,r,s,i,t[o+9],5,568446438),i=To(i,n,r,s,t[o+14],9,-1019803690),s=To(s,i,n,r,t[o+3],14,-187363961),r=To(r,s,i,n,t[o+8],20,1163531501),n=To(n,r,s,i,t[o+13],5,-1444681467),i=To(i,n,r,s,t[o+2],9,-51403784),s=To(s,i,n,r,t[o+7],14,1735328473),r=To(r,s,i,n,t[o+12],20,-1926607734),n=Ro(n,r,s,i,t[o+5],4,-378558),i=Ro(i,n,r,s,t[o+8],11,-2022574463),s=Ro(s,i,n,r,t[o+11],16,1839030562),r=Ro(r,s,i,n,t[o+14],23,-35309556),n=Ro(n,r,s,i,t[o+1],4,-1530992060),i=Ro(i,n,r,s,t[o+4],11,1272893353),s=Ro(s,i,n,r,t[o+7],16,-155497632),r=Ro(r,s,i,n,t[o+10],23,-1094730640),n=Ro(n,r,s,i,t[o+13],4,681279174),i=Ro(i,n,r,s,t[o],11,-358537222),s=Ro(s,i,n,r,t[o+3],16,-722521979),r=Ro(r,s,i,n,t[o+6],23,76029189),n=Ro(n,r,s,i,t[o+9],4,-640364487),i=Ro(i,n,r,s,t[o+12],11,-421815835),s=Ro(s,i,n,r,t[o+15],16,530742520),r=Ro(r,s,i,n,t[o+2],23,-995338651),n=ko(n,r,s,i,t[o],6,-198630844),i=ko(i,n,r,s,t[o+7],10,1126891415),s=ko(s,i,n,r,t[o+14],15,-1416354905),r=ko(r,s,i,n,t[o+5],21,-57434055),n=ko(n,r,s,i,t[o+12],6,1700485571),i=ko(i,n,r,s,t[o+3],10,-1894986606),s=ko(s,i,n,r,t[o+10],15,-1051523),r=ko(r,s,i,n,t[o+1],21,-2054922799),n=ko(n,r,s,i,t[o+8],6,1873313359),i=ko(i,n,r,s,t[o+15],10,-30611744),s=ko(s,i,n,r,t[o+6],15,-1560198380),r=ko(r,s,i,n,t[o+13],21,1309151649),n=ko(n,r,s,i,t[o+4],6,-145523070),i=ko(i,n,r,s,t[o+11],10,-1120210379),s=ko(s,i,n,r,t[o+2],15,718787259),r=ko(r,s,i,n,t[o+9],21,-343485551),n=vg(n,a),r=vg(r,c),s=vg(s,l),i=vg(i,u)}return[n,r,s,i]}function aGe(t){if(t.length===0)return[];for(var e=t.length*8,n=new Uint32Array(loe(e)),r=0;r<e;r+=8)n[r>>5]|=(t[r/8]&255)<<r%32;return n}function vg(t,e){var n=(t&65535)+(e&65535),r=(t>>16)+(e>>16)+(n>>16);return r<<16|n&65535}function cGe(t,e){return t<<e|t>>>32-e}function zP(t,e,n,r,s,i){return vg(cGe(vg(vg(e,t),vg(r,i)),s),n)}function xo(t,e,n,r,s,i,o){return zP(e&n|~e&r,t,e,s,i,o)}function To(t,e,n,r,s,i,o){return zP(e&r|n&~r,t,e,s,i,o)}function Ro(t,e,n,r,s,i,o){return zP(e^n^r,t,e,s,i,o)}function ko(t,e,n,r,s,i,o){return zP(n^(e|~r),t,e,s,i,o)}var lGe=coe("v3",48,sGe);function uoe(t,e,n){t=t||{};var r=t.random||(t.rng||ooe)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var s=0;s<16;++s)e[n+s]=r[s];return e}return WP(r)}function uGe(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function nM(t,e){return t<<e|t>>>32-e}function dGe(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var s=0;s<r.length;++s)t.push(r.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var i=t.length/4+2,o=Math.ceil(i/16),a=new Array(o),c=0;c<o;++c){for(var l=new Uint32Array(16),u=0;u<16;++u)l[u]=t[c*64+u*4]<<24|t[c*64+u*4+1]<<16|t[c*64+u*4+2]<<8|t[c*64+u*4+3];a[c]=l}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var d=0;d<o;++d){for(var h=new Uint32Array(80),f=0;f<16;++f)h[f]=a[d][f];for(var p=16;p<80;++p)h[p]=nM(h[p-3]^h[p-8]^h[p-14]^h[p-16],1);for(var g=n[0],m=n[1],y=n[2],w=n[3],C=n[4],N=0;N<80;++N){var I=Math.floor(N/20),k=nM(g,5)+uGe(I,m,y,w)+C+e[I]+h[N]>>>0;C=w,w=y,y=nM(m,30)>>>0,m=g,g=k}n[0]=n[0]+g>>>0,n[1]=n[1]+m>>>0,n[2]=n[2]+y>>>0,n[3]=n[3]+w>>>0,n[4]=n[4]+C>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var hGe=coe("v5",80,dGe);const fGe="00000000-0000-0000-0000-000000000000";function pGe(t){if(!jP(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const gGe=Object.freeze(Object.defineProperty({__proto__:null,NIL:fGe,parse:aoe,stringify:WP,v1:eGe,v3:lGe,v4:uoe,v5:hGe,validate:jP,version:pGe},Symbol.toStringTag,{value:"Module"})),mGe=Yu({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000",textTransform:"uppercase"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),yGe=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}],wGe=["/images/sticker1.png","/images/sticker2.png","/images/sticker3.png","/images/sticker4.png","/images/sticker5.png"],yc=500;function doe(){const t=mGe(),e=G.useRef(null),[n,r]=G.useState(null),[s,i]=G.useState(""),[o,a]=G.useState(""),[c,l]=G.useState(36),[u,d]=G.useState(36),[h,f]=G.useState(!1),[p,g]=G.useState(!1),[m,y]=G.useState(!1),[w,C]=G.useState(!1),[N,I]=G.useState(!1),[k,P]=G.useState([]),[U,M]=G.useState(null),W=G.useRef(null),[j,K]=G.useState(null),$=async ae=>{const fe=ae.getContext("2d");if(!fe)return;fe.clearRect(0,0,ae.width,ae.height),n?await new Promise(ve=>{const _e=new window.Image;_e.crossOrigin="anonymous",_e.onload=()=>{const Se=Math.min(ae.width/_e.width,ae.height/_e.height),Re=(ae.width-_e.width*Se)/2,xe=(ae.height-_e.height*Se)/2;fe.drawImage(_e,Re,xe,_e.width*Se,_e.height*Se),ve()},_e.onerror=()=>ve(),_e.src=n}):(fe.fillStyle="#333",fe.fillRect(0,0,ae.width,ae.height)),(ve=>{ve.textAlign="center",ve.strokeStyle="black",ve.lineWidth=3,ve.fillStyle="white";const _e=(Se,Re)=>{const xe=Se.toUpperCase().split(" "),Fe=[];let Ut=xe[0];for(let at=1;at<xe.length;at++){const wn=xe[at];ve.measureText(Ut+" "+wn).width<Re?Ut+=" "+wn:(Fe.push(Ut),Ut=wn)}return Fe.push(Ut),Fe};if(s&&(ve.font=`${c}px Impact`,_e(s,yc-20).forEach((Re,xe)=>{const Fe=c+xe*c*1.2;ve.strokeText(Re,yc/2,Fe),ve.fillText(Re,yc/2,Fe)})),o){ve.font=`${u}px Impact`;const Se=_e(o,yc-20);Se.forEach((Re,xe)=>{const Fe=yc-(Se.length-xe)*u*1.2+u;ve.strokeText(Re,yc/2,Fe),ve.fillText(Re,yc/2,Fe)})}})(fe),await Promise.all(k.map(ve=>new Promise(_e=>{const Se=new window.Image;Se.src=ve.src,Se.onload=()=>{fe.save(),fe.translate(ve.x,ve.y),fe.rotate(ve.rotation*Math.PI/180),fe.scale(ve.scale,ve.scale),fe.drawImage(Se,-40,-40,80,80),fe.restore(),_e()},Se.onerror=()=>_e()})));try{h&&v(ae),p&&E(ae),m&&_(ae)}catch(ve){console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead.",ve),f(!1),g(!1),y(!1)}},v=ae=>{const fe=ae.getContext("2d");if(!fe)return;const ye=fe.getImageData(0,0,ae.width,ae.height),ve=ye.data;for(let _e=0;_e<ve.length;_e+=4){const Se=ve[_e],Re=ve[_e+1],xe=ve[_e+2],Fe=(Se+Re+xe)/3,Ut=1.8;ve[_e]=Math.min(255,Fe+(Se-Fe)*Ut),ve[_e+1]=Math.min(255,Fe+(Re-Fe)*Ut*.7),ve[_e+2]=Math.min(255,Fe+(xe-Fe)*Ut*.4);const at=1.3;ve[_e]=Math.min(255,Math.max(0,ve[_e]*at)),ve[_e+1]=Math.min(255,Math.max(0,ve[_e+1]*at)),ve[_e+2]=Math.min(255,Math.max(0,ve[_e+2]*at))}fe.putImageData(ye,0,0)},E=ae=>{const fe=ae.getContext("2d");if(!fe)return;const ye=4,_e=fe.getImageData(0,0,ae.width,ae.height).data,Se=new Uint8ClampedArray(_e);for(let Re=0;Re<ae.height;Re+=ye)for(let xe=0;xe<ae.width;xe+=ye){const Fe=(Re*ae.width+xe)*4,Ut=_e[Fe],at=_e[Fe+1],wn=_e[Fe+2],Qn=_e[Fe+3];for(let Bt=0;Bt<ye&&Re+Bt<ae.height;Bt++)for(let ze=0;ze<ye&&xe+ze<ae.width;ze++){const Jn=((Re+Bt)*ae.width+(xe+ze))*4;Se[Jn]=Ut,Se[Jn+1]=at,Se[Jn+2]=wn,Se[Jn+3]=Qn}}fe.putImageData(new ImageData(Se,ae.width,ae.height),0,0)},_=ae=>{const fe=ae.getContext("2d");if(!fe)return;const ye=fe.getImageData(0,0,ae.width,ae.height),ve=ye.data;for(let _e=0;_e<ve.length;_e+=4){const Se=(Math.random()-.5)*50;ve[_e]=Math.max(0,Math.min(255,ve[_e]+Se)),ve[_e+1]=Math.max(0,Math.min(255,ve[_e+1]+Se)),ve[_e+2]=Math.max(0,Math.min(255,ve[_e+2]+Se))}fe.putImageData(ye,0,0)};G.useEffect(()=>{e.current&&$(e.current)},[$]);const O=ae=>{var ye;const fe=(ye=ae.target.files)==null?void 0:ye[0];fe&&r(URL.createObjectURL(fe))},x=()=>{r(null),i(""),a(""),l(36),d(36),f(!1),g(!1),y(!1)},B=async()=>{const ae=e.current;if(!ae)return;await $(ae);const fe=document.createElement("a");fe.download="meme.png",fe.href=ae.toDataURL("image/png"),document.body.appendChild(fe),fe.click(),document.body.removeChild(fe)},F=async ae=>{I(!0),C(!1);try{console.log("Fetching NFTs for collection:",ae);let fe;if(ae.api==="opensea"){console.log("Using OpenSea API for:",ae.slug);const ye=await c4(ae.slug,50);fe=ye.data,console.log("OpenSea response:",ye)}else if(ae.api==="opensea-solana"){console.log("Using Helius API for Solana collection:",ae.slug);const ye=await Jne(ae.slug,50);if(fe=ye.data,console.log("Helius Solana response:",ye),!fe||fe.length===0){alert("No NFTs found in this Solana collection. Try uploading your own image or use other collections.");return}}else{console.log("Using Scatter API for:",ae.slug);const ye=await a4(ae.slug,1,50);fe=ye.data,console.log("Scatter response:",ye)}if(fe&&fe.length>0){const ye=fe[Math.floor(Math.random()*fe.length)],ve=ye.image||ye.image_url||ye.image_url_shrunk;console.log("Selected NFT:",ye),console.log("Image URL:",ve),r(ve)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(fe){console.error("Error fetching NFTs:",fe),alert("Failed to fetch NFT images. Check console for details.")}finally{I(!1)}},L=ae=>{const fe={id:uoe(),src:ae,x:80,y:80,scale:1,rotation:0};P(ye=>ye.length>=2||ye.some(ve=>ve.src===ae&&!ve.id.startsWith("upload-"))?ye:[...ye,fe]),K(fe.id)},A=ae=>{var ye;const fe=(ye=ae.target.files)==null?void 0:ye[0];if(fe){const ve=URL.createObjectURL(fe);L(ve)}},H=(ae,fe,ye)=>{P(ve=>ve.map(_e=>{if(_e.id!==ae)return _e;let Se=_e.x+fe/1.2,Re=_e.y+ye/1.2;const xe=40*_e.scale,Fe=40*_e.scale;return Se=Math.max(xe,Math.min(yc-xe,Se)),Re=Math.max(Fe,Math.min(yc-Fe,Re)),{..._e,x:Se,y:Re}}))},re=(ae,fe,ye,ve,_e)=>{P(Se=>Se.map(Re=>{if(Re.id!==ae)return Re;const xe=Re.x,Fe=Re.y,Ut=Math.atan2(_e-Fe,ve-xe)*180/Math.PI;return{...Re,rotation:ye+(Ut-fe)*.5}}))},se=ae=>{P(fe=>fe.filter(ye=>ye.id!==ae))},ge=(ae,fe)=>{P(ye=>ye.map(ve=>ve.id===ae?{...ve,scale:Math.max(.2,ve.scale*(1+(fe-1)*.2))}:ve))};return b.jsxs("div",{className:t.container,children:[b.jsxs("div",{className:t.header,children:[b.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),b.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",b.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),b.jsxs("div",{className:t.content,children:[b.jsxs("div",{className:t.section,children:[b.jsx("div",{className:t.sectionTitle,children:"Collections"}),b.jsxs("div",{className:t.row,children:[b.jsxs("div",{className:t.dropdown,children:[b.jsx("button",{className:t.button,onClick:()=>C(ae=>!ae),children:"Collections"}),w&&b.jsx("div",{className:t.dropdownContent,children:yGe.map(ae=>b.jsx("div",{className:t.dropdownItem,onClick:()=>{F(ae)},children:ae.name},ae.id))})]}),b.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",b.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:O})]}),N&&b.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),b.jsxs("div",{className:t.section,children:[b.jsx("div",{className:t.sectionTitle,children:"Text"}),b.jsxs("div",{className:t.row,children:[b.jsx("span",{className:t.label,children:"Top Text:"}),b.jsx("input",{className:t.input,type:"text",value:s,onChange:ae=>i(ae.target.value),placeholder:"Enter top text..."}),b.jsx("span",{className:t.label,children:"Size:"}),b.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:ae=>l(Number(ae.target.value)),style:{width:60,textAlign:"center"}})]}),b.jsxs("div",{className:t.row,children:[b.jsx("span",{className:t.label,children:"Bottom Text:"}),b.jsx("input",{className:t.input,type:"text",value:o,onChange:ae=>a(ae.target.value),placeholder:"Enter bottom text..."}),b.jsx("span",{className:t.label,children:"Size:"}),b.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:ae=>d(Number(ae.target.value)),style:{width:60,textAlign:"center"}})]})]}),b.jsxs("div",{className:t.section,children:[b.jsx("div",{className:t.sectionTitle,children:"Effects"}),b.jsxs("div",{className:t.row,children:[b.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(ae=>!ae),children:"Deep Fry"}),b.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(ae=>!ae),children:"Pixelate"}),b.jsx("button",{className:t.effectButton,style:{background:m?"#00ffff":void 0},onClick:()=>y(ae=>!ae),children:"Grain"})]})]}),b.jsxs("div",{className:t.section,children:[b.jsx("div",{className:t.sectionTitle,children:"Stickers"}),b.jsxs("div",{className:t.row,children:[wGe.map((ae,fe)=>b.jsx("img",{src:ae,alt:`sticker${fe+1}`,style:{width:32,height:32,cursor:"pointer",border:"1px solid #888",marginRight:4},onClick:()=>L(ae)},ae)),b.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Sticker",b.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:W,onChange:A})]})]})]}),b.jsxs("div",{className:t.actions,children:[b.jsx("button",{className:t.button,onClick:B,children:"Save Image"}),b.jsx("button",{className:t.button,onClick:x,children:"Restart"})]})]}),b.jsx("div",{className:t.memeArea,children:b.jsx("canvas",{ref:e,width:yc,height:yc,className:t.canvas})}),b.jsx("div",{style:{position:"absolute",left:0,top:0,width:yc,height:yc,pointerEvents:"none"},children:k.map(ae=>j===ae.id?b.jsxs("div",{style:{position:"absolute",left:ae.x,top:ae.y,width:80*ae.scale,height:80*ae.scale,transform:`rotate(${ae.rotation}deg)`,cursor:"move",pointerEvents:"auto",zIndex:10,border:"2px solid #00f",boxShadow:"0 0 8px #00f"},onMouseDown:fe=>{M(ae.id),fe.stopPropagation()},onMouseUp:()=>M(null),onMouseMove:fe=>{U===ae.id&&fe.buttons===1&&H(ae.id,fe.movementX,fe.movementY)},children:[b.jsx("img",{src:ae.src,alt:"sticker",style:{width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},draggable:!1}),b.jsx("div",{style:{position:"absolute",right:-12,top:"40%",width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"grab",zIndex:11},onMouseDown:fe=>{var Ut;fe.stopPropagation();const ye=(Ut=fe.currentTarget.parentElement)==null?void 0:Ut.getBoundingClientRect(),ve=ye?ye.left+ye.width/2:0,_e=ye?ye.top+ye.height/2:0,Se=Math.atan2(fe.clientY-_e,fe.clientX-ve)*180/Math.PI,Re=ae.rotation,xe=at=>{re(ae.id,Se,Re,at.clientX,at.clientY)},Fe=()=>{window.removeEventListener("mousemove",xe),window.removeEventListener("mouseup",Fe)};window.addEventListener("mousemove",xe),window.addEventListener("mouseup",Fe)}}),b.jsx("div",{style:{position:"absolute",bottom:-12,right:-12,width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"nwse-resize",zIndex:11},onMouseDown:fe=>{fe.stopPropagation();const ye=fe.clientX,ve=Se=>{const Re=(Se.clientX-ye)/80;ge(ae.id,1+Re)},_e=()=>{window.removeEventListener("mousemove",ve),window.removeEventListener("mouseup",_e)};window.addEventListener("mousemove",ve),window.addEventListener("mouseup",_e)}}),b.jsx("button",{style:{position:"absolute",top:-12,left:-12,width:16,height:16,background:"#f00",color:"#fff",border:"none",borderRadius:"50%",fontSize:10,cursor:"pointer",zIndex:12},onClick:()=>se(ae.id),children:"×"}),b.jsx("button",{style:{position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:40,height:18,background:"#0f0",color:"#000",border:"1px solid #888",borderRadius:4,fontSize:8,cursor:"pointer",zIndex:12},onClick:()=>K(null),children:"Place"})]},ae.id):null)})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function AS(){return AS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AS.apply(this,arguments)}var Eg;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Eg||(Eg={}));const iq="popstate";function bGe(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return I5("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:foe(s)}return EGe(e,n,null,t)}function Si(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function hoe(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vGe(){return Math.random().toString(36).substr(2,8)}function oq(t,e){return{usr:t.state,key:t.key,idx:e}}function I5(t,e,n,r){return n===void 0&&(n=null),AS({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?WC(e):e,{state:n,key:e&&e.key||r||vGe()})}function foe(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function WC(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function EGe(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Eg.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(AS({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Eg.Pop;let m=u(),y=m==null?null:m-l;l=m,c&&c({action:a,location:g.location,delta:y})}function h(m,y){a=Eg.Push;let w=I5(g.location,m,y);l=u()+1;let C=oq(w,l),N=g.createHref(w);try{o.pushState(C,"",N)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;s.location.assign(N)}i&&c&&c({action:a,location:g.location,delta:1})}function f(m,y){a=Eg.Replace;let w=I5(g.location,m,y);l=u();let C=oq(w,l),N=g.createHref(w);o.replaceState(C,"",N),i&&c&&c({action:a,location:g.location,delta:0})}function p(m){let y=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof m=="string"?m:foe(m);return w=w.replace(/ $/,"%20"),Si(y,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,y)}let g={get action(){return a},get location(){return t(s,o)},listen(m){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(iq,d),c=m,()=>{s.removeEventListener(iq,d),c=null}},createHref(m){return e(s,m)},createURL:p,encodeLocation(m){let y=p(m);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(m){return o.go(m)}};return g}var aq;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(aq||(aq={}));function CGe(t,e,n){return n===void 0&&(n="/"),_Ge(t,e,n)}function _Ge(t,e,n,r){let s=typeof e=="string"?WC(e):e,i=moe(s.pathname||"/",n);if(i==null)return null;let o=poe(t);AGe(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=BGe(i);a=OGe(o[c],l)}return a}function poe(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Si(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=f0([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(Si(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),poe(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:kGe(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of goe(i.path))s(i,o,c)}),e}function goe(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=goe(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function AGe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:PGe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const SGe=/^:[\w-]+$/,IGe=3,NGe=2,xGe=1,TGe=10,RGe=-2,cq=t=>t==="*";function kGe(t,e){let n=t.split("/"),r=n.length;return n.some(cq)&&(r+=RGe),e&&(r+=NGe),n.filter(s=>!cq(s)).reduce((s,i)=>s+(SGe.test(i)?IGe:i===""?xGe:TGe),r)}function PGe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function OGe(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=DGe({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:f0([i,d.pathname]),pathnameBase:WGe(f0([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=f0([i,d.pathnameBase]))}return o}function DGe(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=MGe(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function MGe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),hoe(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function BGe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hoe(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function moe(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function LGe(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?WC(t):t;return{pathname:n?n.startsWith("/")?n:UGe(n,e):e,search:zGe(r),hash:HGe(s)}}function UGe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function rM(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $Ge(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function FGe(t,e){let n=$Ge(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function jGe(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=WC(t):(s=AS({},t),Si(!s.pathname||!s.pathname.includes("?"),rM("?","pathname","search",s)),Si(!s.pathname||!s.pathname.includes("#"),rM("#","pathname","hash",s)),Si(!s.search||!s.search.includes("#"),rM("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=LGe(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const f0=t=>t.join("/").replace(/\/\/+/g,"/"),WGe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),zGe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,HGe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function GGe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const yoe=["post","put","patch","delete"];new Set(yoe);const qGe=["get",...yoe];new Set(qGe);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function SS(){return SS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SS.apply(this,arguments)}const U4=G.createContext(null),VGe=G.createContext(null),HP=G.createContext(null),GP=G.createContext(null),zC=G.createContext({outlet:null,matches:[],isDataRoute:!1}),woe=G.createContext(null);function qP(){return G.useContext(GP)!=null}function boe(){return qP()||Si(!1),G.useContext(GP).location}function voe(t){G.useContext(HP).static||G.useLayoutEffect(t)}function KGe(){let{isDataRoute:t}=G.useContext(zC);return t?aqe():YGe()}function YGe(){qP()||Si(!1);let t=G.useContext(U4),{basename:e,future:n,navigator:r}=G.useContext(HP),{matches:s}=G.useContext(zC),{pathname:i}=boe(),o=JSON.stringify(FGe(s,n.v7_relativeSplatPath)),a=G.useRef(!1);return voe(()=>{a.current=!0}),G.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=jGe(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:f0([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function QGe(t,e){return JGe(t,e)}function JGe(t,e,n,r){qP()||Si(!1);let{navigator:s}=G.useContext(HP),{matches:i}=G.useContext(zC),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=boe(),u;if(e){var d;let m=typeof e=="string"?WC(e):e;c==="/"||(d=m.pathname)!=null&&d.startsWith(c)||Si(!1),u=m}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let m=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(m.length).join("/")}let p=CGe(t,{pathname:f}),g=nqe(p&&p.map(m=>Object.assign({},m,{params:Object.assign({},a,m.params),pathname:f0([c,s.encodeLocation?s.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?c:f0([c,s.encodeLocation?s.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),i,n,r);return e&&g?G.createElement(GP.Provider,{value:{location:SS({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Eg.Pop}},g):g}function ZGe(){let t=oqe(),e=GGe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),n?G.createElement("pre",{style:s},n):null,null)}const XGe=G.createElement(ZGe,null);class eqe extends G.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?G.createElement(zC.Provider,{value:this.props.routeContext},G.createElement(woe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tqe(t){let{routeContext:e,match:n,children:r}=t,s=G.useContext(U4);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),G.createElement(zC.Provider,{value:e},r)}function nqe(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||Si(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,m=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||XGe,c&&(l<0&&h===0?(cqe("route-fallback"),p=!0,m=null):l===h&&(p=!0,m=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,h+1)),w=()=>{let C;return f?C=g:p?C=m:d.route.Component?C=G.createElement(d.route.Component,null):d.route.element?C=d.route.element:C=u,G.createElement(tqe,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:C})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?G.createElement(eqe,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):w()},null)}var Eoe=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Eoe||{}),Coe=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Coe||{});function rqe(t){let e=G.useContext(U4);return e||Si(!1),e}function sqe(t){let e=G.useContext(VGe);return e||Si(!1),e}function iqe(t){let e=G.useContext(zC);return e||Si(!1),e}function _oe(t){let e=iqe(),n=e.matches[e.matches.length-1];return n.route.id||Si(!1),n.route.id}function oqe(){var t;let e=G.useContext(woe),n=sqe(),r=_oe();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function aqe(){let{router:t}=rqe(Eoe.UseNavigateStable),e=_oe(Coe.UseNavigateStable),n=G.useRef(!1);return voe(()=>{n.current=!0}),G.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,SS({fromRouteId:e},i)))},[t,e])}const lq={};function cqe(t,e,n){lq[t]||(lq[t]=!0)}function lqe(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function xT(t){Si(!1)}function uqe(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Eg.Pop,navigator:i,static:o=!1,future:a}=t;qP()&&Si(!1);let c=e.replace(/^\/*/,"/"),l=G.useMemo(()=>({basename:c,navigator:i,static:o,future:SS({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=WC(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=G.useMemo(()=>{let m=moe(u,c);return m==null?null:{location:{pathname:m,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:G.createElement(HP.Provider,{value:l},G.createElement(GP.Provider,{children:n,value:g}))}function dqe(t){let{children:e,location:n}=t;return QGe(N5(e),n)}new Promise(()=>{});function N5(t,e){e===void 0&&(e=[]);let n=[];return G.Children.forEach(t,(r,s)=>{if(!G.isValidElement(r))return;let i=[...e,s];if(r.type===G.Fragment){n.push.apply(n,N5(r.props.children,i));return}r.type!==xT&&Si(!1),!r.props.index||!r.props.children||Si(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=N5(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const hqe="6";try{window.__reactRouterVersion=hqe}catch{}const fqe="startTransition",uq=_ue[fqe];function pqe(t){let{basename:e,children:n,future:r,window:s}=t,i=G.useRef();i.current==null&&(i.current=bGe({window:s,v5Compat:!0}));let o=i.current,[a,c]=G.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=G.useCallback(d=>{l&&uq?uq(()=>c(d)):c(d)},[c,l]);return G.useLayoutEffect(()=>o.listen(u),[o,u]),G.useEffect(()=>lqe(r),[r]),G.createElement(uqe,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var dq;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(dq||(dq={}));var hq;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(hq||(hq={}));const gqe=Yu({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function mqe(){const t=gqe(),{open:e}=tN(),{address:n,isConnected:r}=DI(),{isPending:s}=Hte(),{disconnect:i}=Gte(),{data:o}=qte({address:n}),[a,c]=G.useState("pixelawbs-popup"),[l,u]=G.useState(new Set),[d,h]=G.useState(!1),[f,p]=G.useState(!1),[g,m]=G.useState(!1),[y,w]=G.useState(!1),C=KGe(),N=G.useRef(null);G.useEffect(()=>{if(a==="halloween-popup"&&N.current){const _=N.current.querySelector("script[data-tiktok-embed]");_&&_.remove();const O=document.createElement("script");O.src="https://www.tiktok.com/embed.js",O.async=!0,O.setAttribute("data-tiktok-embed","true"),N.current.appendChild(O)}},[a]);const I=(_,O,x)=>{if(_==="url"&&x)window.open(x,"_blank");else if(_==="popup"&&O)c(O),u(B=>{const F=new Set(B);return F.delete(O),F}),document.body.offsetWidth;else if(_==="wallet")r?i():e();else if(_==="mint"){if(!n){alert("Please connect your wallet first!");return}h(!0)}else _==="nft-gallery"?p(!0):_==="meme-generator"?m(!0):_==="chess"&&(r?w(!0):e().then(()=>{const B=()=>{window.ethereum&&window.ethereum.selectedAddress?w(!0):setTimeout(B,200)};B()}))},k=()=>c(null),P=_=>{u(O=>new Set(O).add(_)),c(null)},U=_=>{_==="mint-popup"?h(!0):_==="nft-gallery-popup"?p(!0):_==="meme-generator-popup"?m(!0):c(_),u(O=>{const x=new Set(O);return x.delete(_),x})},M=()=>h(!1),W=()=>p(!1),j=()=>m(!1),K=()=>{h(!1),u(_=>new Set(_).add("mint-popup"))},$=()=>{p(!1),u(_=>new Set(_).add("nft-gallery-popup"))},v=()=>{m(!1),u(_=>new Set(_).add("meme-generator-popup"))},E=b.jsxs("div",{onClick:()=>{r?i():e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:r?"limegreen":"red",fontWeight:"bold"},children:[b.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?"Connecting...":r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return b.jsxs("div",{className:t.body,children:[y&&b.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[b.jsx("video",{src:"/images/loadingchess.mp4",style:{width:120,height:120,marginBottom:32},autoPlay:!0,muted:!0,onEnded:()=>{w(!1),C("/chess")}}),b.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),b.jsx(YRe,{onIconClick:I}),b.jsx(JRe,{minimizedWindows:Array.from(l),onRestoreWindow:U,walletButton:E,connectionStatus:{connected:r,address:n,ens:o||void 0}}),b.jsxs(ml,{id:"chat-popup",isOpen:a==="chat-popup",onClose:k,onMinimize:P,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",b.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),b.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),b.jsxs(ml,{id:"purity-popup",isOpen:a==="purity-popup",onClose:k,onMinimize:P,children:[b.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),b.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),b.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),b.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),b.jsxs(ml,{id:"lawbstarz-popup",isOpen:a==="lawbstarz-popup",onClose:k,onMinimize:P,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",b.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",b.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",b.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",b.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),b.jsx("p",{children:"Chain: Ethereum"}),b.jsxs("p",{children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),b.jsxs("blockquote",{className:"twitter-tweet","data-media-max-width":"560",children:[b.jsxs("p",{lang:"en",dir:"ltr",children:["The following 🧵 has been transcripted from a live news broadcast:",b.jsx("br",{}),b.jsx("br",{}),"Anchor: “Good evening, viewers. Tonight, we embark on an extraordinary journey that defies rational explanation. It all began with February's Cigawrette Packs cargo ship hijacking, little did we know that the.. ",b.jsx("a",{href:"https://t.co/BWgLOk59N4",children:"pic.twitter.com/BWgLOk59N4"})]}),"— wables (@wables411) ",b.jsx("a",{href:"https://twitter.com/wables411/status/1669009492007354369?ref_src=twsrc%5Etfw",children:"June 14, 2023"})]}),b.jsx("script",{async:!0,src:"https://platform.twitter.com/widgets.js"}),b.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),b.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),b.jsxs(ml,{id:"lawbstation-popup",isOpen:a==="lawbstation-popup",onClose:k,onMinimize:P,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",b.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),b.jsx("p",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),b.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),b.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),b.jsxs(ml,{id:"nexus-popup",isOpen:a==="nexus-popup",onClose:k,onMinimize:P,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",b.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),b.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),b.jsxs(ml,{id:"lawbsters-popup",isOpen:a==="lawbsters-popup",onClose:k,onMinimize:P,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",b.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),b.jsx("p",{children:"Chain: Ethereum"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",b.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),b.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:b.jsx(wNe,{id:"1620879129850834944"})}),b.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),b.jsx(ml,{id:"pixelawbs-popup",isOpen:a==="pixelawbs-popup",onClose:k,onMinimize:P,children:(()=>{const _=O=>{O.preventDefault(),c(null),h(!0)};return b.jsxs(b.Fragment,{children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",b.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:_,children:"COLLECT HERE"})," OR VISIT ",b.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),b.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",b.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),b.jsxs(ml,{id:"halloween-popup",isOpen:a==="halloween-popup",onClose:k,onMinimize:P,children:[b.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),b.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),b.jsx("div",{ref:N,style:{maxWidth:"400px",margin:"0 auto"},children:b.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:b.jsxs("section",{children:[b.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore 🦞🎃 minting rn on @ourzora via @PC69 ",b.jsx("a",{target:"_blank",rel:"noreferrer",title:"♬ original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:"♬ original sound - wables.eth"})]})})})]}),b.jsxs(ml,{id:"lawb-popup",isOpen:a==="lawb-popup",onClose:k,onMinimize:P,children:[b.jsx("h1",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"🦞 $LAWB"})}),b.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",b.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),b.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, visit ",b.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),b.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",b.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),b.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),b.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:b.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),b.jsx(eke,{isOpen:d,onClose:M,onMinimize:K,walletAddress:n||""}),b.jsx(JHe,{isOpen:f,onClose:W,onMinimize:$,walletAddress:n}),b.jsx(ml,{id:"meme-generator-popup",isOpen:g,onClose:j,onMinimize:v,children:b.jsx(doe,{})})]})}const yqe=Yu({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),fq=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],wqe=({onBack:t,walletAddress:e})=>{const n=yqe(),{open:r}=tN(),[s,i]=G.useState([]),[o,a]=G.useState(!0),[c,l]=G.useState(null),[u,d]=G.useState(fq[0]),[h,f]=G.useState(!1),[p,g]=G.useState(null),[m,y]=G.useState("all"),[w,C]=G.useState(null),N=G.useCallback(async()=>{var U,M;try{if((U=window.solana)!=null&&U.isPhantom){const W=await window.solana.connect();g(W.publicKey.toString());return}if((M=window.solflare)!=null&&M.isSolflare){const W=await window.solflare.connect();g(W.publicKey.toString());return}r()}catch(W){console.error("Failed to connect Solana wallet:",W),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);G.useEffect(()=>{var U,M;(U=window.solana)!=null&&U.publicKey?g(window.solana.publicKey.toString()):(M=window.solflare)!=null&&M.publicKey&&g(window.solflare.publicKey.toString())},[]),G.useEffect(()=>{(async()=>{a(!0);try{let M,W=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}W=p,M=await ZRe(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",M.data.length)}else u.api==="opensea"?M=await c4(u.slug,100,W):M=await a4(u.slug,1,100,W);m==="owned"&&p&&(console.log("Filtering for owner:",p),M.data.some(K=>K.owners&&K.owners.length>0)?M.data=M.data.filter(K=>K.owners.some(v=>v.owner_of&&v.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),C("Owner data not available for this Solana collection. Showing all NFTs."))),i(M.data)}catch(M){console.error(M)}finally{a(!1)}})()},[e,u,p,m]),G.useEffect(()=>{h&&N()},[h,N]);const I=async U=>{if(a(!0),u.api==="opensea"&&u.chain)try{const M=await Qne(u.chain,U.address,U.token_id.toString()),W={...U,attributes:JSON.stringify(M.traits||[])};l(W)}catch(M){console.error("Failed to fetch full NFT details",M),l(U)}else l(U);a(!1)},k=()=>{if(!c)return null;let U=[];try{U=JSON.parse(c.attributes||"[]")}catch(M){console.error("Failed to parse NFT attributes:",M)}return b.jsxs("div",{className:n.detailView,children:[b.jsx("img",{src:c.image,alt:c.name}),b.jsx("h2",{children:c.name}),b.jsx("h4",{children:"Traits:"}),b.jsx("ul",{children:U.map((M,W)=>b.jsxs("li",{children:[b.jsxs("strong",{children:[M.trait_type,":"]})," ",M.value]},W))})]})},P=()=>b.jsxs(b.Fragment,{children:[b.jsx("div",{className:n.collectionSelector,children:fq.map(U=>b.jsx("button",{className:`${n.collectionButton} ${u.slug===U.slug?"active":""}`,onClick:()=>d(U),children:U.name},U.slug))}),b.jsxs("div",{className:n.content,children:[b.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[b.jsx("button",{onClick:()=>y("all"),style:{background:m==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:m==="all"?"white":"black"},children:"All NFTs"}),b.jsx("button",{onClick:()=>y("owned"),disabled:!e&&!p,style:{background:m==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:m==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&b.jsx("button",{onClick:()=>{N()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),w&&b.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:w}),u.api==="opensea-solana"&&!p&&b.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?b.jsx("div",{className:n.loading,children:"Loading NFTs..."}):b.jsx("div",{className:n.grid,children:s.map(U=>{let M=U.image||U.image_url||U.image_url_shrunk||"/assets/pixelawb.png";return b.jsxs("div",{className:n.gridItem,onClick:()=>void I(U),children:[b.jsx("img",{src:M,alt:U.name,onError:W=>{W.currentTarget.src!==U.image_url&&U.image_url?W.currentTarget.src=U.image_url:W.currentTarget.src!==U.image_url_shrunk&&U.image_url_shrunk?W.currentTarget.src=U.image_url_shrunk:W.currentTarget.src="/assets/pixelawb.png"}}),b.jsx("span",{children:U.name})]},U.id)})})]})]});return b.jsxs("div",{className:n.galleryContainer,children:[b.jsxs("header",{className:n.header,children:[b.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),b.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),b.jsx("div",{className:n.content,children:o?b.jsx("p",{className:n.loading,children:"Loading..."}):c?k():P()})]})},bqe=Yu({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),du=({isOpen:t,onClose:e,title:n,children:r})=>{const s=bqe();return t?b.jsx("div",{className:s.overlay,children:b.jsxs("div",{className:s.popup,children:[b.jsxs("div",{className:s.titleBar,children:[b.jsx("span",{children:n}),b.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:"✕"})]}),b.jsx("div",{className:s.content,children:r})]})}):null},vqe=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=G.useState([]),[i,o]=G.useState(!1),[a,c]=G.useState(!1),[l,u]=G.useState({}),[d,h]=G.useState(null),{data:f}=Vte();G.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const N=await Kne(n);s(N);const I={};N.forEach(k=>{I[k.id]=0}),u(I)}catch(N){h(N.message)}finally{o(!1)}},g=(N,I)=>{u(k=>({...k,[N]:Math.max(0,I)}))},m=async()=>{const N=Object.entries(l).filter(([,I])=>I>0).map(([I,k])=>({id:I,quantity:k}));if(N.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const I=await Yne(n,N);if(I.success&&I.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const k=await f.sendTransaction({to:I.mintTransaction.to,value:BigInt(I.mintTransaction.value),data:I.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${k}`),e()}catch(k){h("Transaction failed: "+k.message)}}else throw new Error(I.message||"Could not retrieve minting transaction.")}catch(I){h("Minting failed: "+I.message)}finally{c(!1)}},y=(N,I)=>`${parseFloat(N)} ${I}`,w={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},C={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return b.jsxs(du,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&b.jsx("div",{style:C,children:d}),i?b.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?b.jsx("div",{children:"No eligible invite lists found for your wallet."}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{marginBottom:"20px"},children:[b.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(N=>b.jsxs("div",{style:w,children:[b.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:N.name}),b.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",y(N.token_price,N.currency_symbol)]}),b.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",N.wallet_limit===4294967295?"Unlimited":N.wallet_limit," per wallet"]}),b.jsx("input",{type:"number",min:0,max:N.wallet_limit===4294967295?void 0:N.wallet_limit,value:l[N.id]||"",onChange:I=>g(N.id,parseInt(I.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),b.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},N.id))]}),b.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:m,disabled:a,children:a?"Minting...":"Mint"})]})]})},Eqe=Yu({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),Cqe=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],_qe=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],Aqe=()=>{const t=Eqe(),{open:e}=tN(),{address:n,isConnected:r}=DI(),{isPending:s}=Hte(),{disconnect:i}=Gte(),{data:o}=qte({address:n}),[a,c]=G.useState("main"),[l,u]=G.useState(!1),[d,h]=G.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=G.useState(!1),[g,m]=G.useState(!1),[y,w]=G.useState(!1),[C,N]=G.useState(!1),[I,k]=G.useState(!1),[P,U]=G.useState(!1),[M,W]=G.useState(!1),[j,K]=G.useState(!1),[$,v]=G.useState(!1),[E,_]=G.useState(!1),[O,x]=G.useState(!1),[B,F]=G.useState(!1),L=[{label:"Mint",icon:"/assets/mint.gif",action:()=>m(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>w(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>N(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>k(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],A=se=>{se.disabled||se.action()};if(G.useEffect(()=>{const se=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(se)},[]),G.useEffect(()=>{u(!0)},[]),a==="gallery")return b.jsx(wqe,{onBack:()=>c("main"),walletAddress:n||void 0});function H({open:se,onClose:ge,title:ae,nfts:fe}){const ye=ve=>{switch(ve){case"lawbsters":U(!0);break;case"lawbstarz":W(!0);break;case"pixelawbs":K(!0);break;case"halloween":v(!0);break;case"lawbstation":_(!0);break;case"nexus":x(!0);break}};return b.jsx(du,{isOpen:se,onClose:ge,title:ae,children:b.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:fe.map(ve=>b.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>ye(ve.id),children:[b.jsx("img",{src:ve.image,alt:ve.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),b.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:ve.name}),b.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:ve.description})]},ve.id))})})}function re({open:se,onClose:ge}){return se?b.jsxs(du,{isOpen:se,onClose:ge,title:"$LAWB",children:[b.jsx("h1",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"🦞 $LAWB"})}),b.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",b.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),b.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, visit ",b.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),b.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",b.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),b.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),b.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:b.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return b.jsxs("div",{className:t.mobileContainer,children:[b.jsx("header",{className:t.header,children:b.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),b.jsx("div",{className:t.iconGrid,children:L.map(se=>b.jsxs("div",{className:t.icon,onClick:()=>A(se),children:[b.jsx("img",{src:se.icon,alt:se.label}),b.jsx("span",{children:se.label})]},se.label))}),l&&b.jsxs(du,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",b.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),m(!0)},children:"COLLECT HERE"})," OR VISIT ",b.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),b.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",b.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),b.jsx("p",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&b.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:b.jsxs("div",{className:t.menuModal,onClick:se=>se.stopPropagation(),children:[b.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),b.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),b.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),b.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),b.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),b.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),b.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),b.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),b.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),b.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),F(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),b.jsx(vqe,{isOpen:g,onClose:()=>m(!1),walletAddress:n||""}),b.jsx(H,{open:y,onClose:()=>w(!1),title:"EVM NFT'S FOLDER",nfts:Cqe}),b.jsx(H,{open:C,onClose:()=>N(!1),title:"SOL NFTS FOLDER",nfts:_qe}),b.jsx(re,{open:I,onClose:()=>k(!1)}),b.jsxs(du,{isOpen:P,onClose:()=>U(!1),title:"Lawbsters",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",b.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),b.jsx("p",{children:"Chain: Ethereum"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",b.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),b.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),b.jsxs(du,{isOpen:M,onClose:()=>W(!1),title:"Lawbstarz",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",b.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",b.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",b.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",b.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),b.jsx("p",{children:"Chain: Ethereum"}),b.jsxs("p",{children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),b.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),b.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),b.jsxs(du,{isOpen:j,onClose:()=>K(!1),title:"Pixelawbs",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",b.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{K(!1),m(!0)},children:"COLLECT HERE"})," OR VISIT ",b.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),b.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",b.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),b.jsxs(du,{isOpen:$,onClose:()=>v(!1),title:"A Lawbster Halloween",children:[b.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),b.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),b.jsxs(du,{isOpen:E,onClose:()=>_(!1),title:"Lawbstation",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",b.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),b.jsx("p",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),b.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),b.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),b.jsxs(du,{isOpen:O,onClose:()=>x(!1),title:"Nexus",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",b.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),b.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),b.jsx(du,{isOpen:B,onClose:()=>F(!1),title:"Meme Generator",children:b.jsx(doe,{})}),b.jsxs("div",{className:t.taskbar,children:[b.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),b.jsxs("div",{className:t.walletStatus,children:[b.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),b.jsx("span",{className:t.clock,children:d})]})]})};function Sqe(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=G.useState(e(t));function s(){r(e(t))}return G.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}const Iqe=Symbol(),pq=Object.getPrototypeOf,x5=new WeakMap,Nqe=t=>t&&(x5.has(t)?x5.get(t):pq(t)===Object.prototype||pq(t)===Array.prototype),xqe=t=>Nqe(t)&&t[Iqe]||null,gq=(t,e=!0)=>{x5.set(t,e)},yk={},$4=t=>typeof t=="object"&&t!==null,Tqe=t=>$4(t)&&!nN.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),Aoe=(t,e)=>{const n=T5.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return gq(r,!0),T5.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(nN.has(i))gq(i,!1);else if(hm.has(i)){const[c,l]=hm.get(i);a.value=Aoe(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},Rqe=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(mq(l,o)||IS.has(o)&&mq(l,IS.get(o))))return!0;n(i),$4(o)&&(o=xqe(o)||o);const u=!hm.has(o)&&Pqe(o)?ms(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),hm=new WeakMap,nN=new WeakSet,T5=new WeakMap,n_=[1,1],IS=new WeakMap;let mq=Object.is,kqe=(t,e)=>new Proxy(t,e),Pqe=Tqe,Oqe=Aoe,Dqe=Rqe;function ms(t={}){if(!$4(t))throw new Error("object required");const e=IS.get(t);if(e)return e;let n=n_[0];const r=new Set,s=(m,y=++n_[0])=>{n!==y&&(n=y,r.forEach(w=>w(m,y)))};let i=n_[1];const o=(m=++n_[1])=>(i!==m&&!r.size&&(i=m,c.forEach(([y])=>{const w=y[1](m);w>n&&(n=w)})),n),a=m=>(y,w)=>{const C=[...y];C[1]=[m,...C[1]],s(C,w)},c=new Map,l=(m,y)=>{const w=!nN.has(y)&&hm.get(y);if(w){if((yk?"production":void 0)!=="production"&&c.has(m))throw new Error("prop listener already exists");if(r.size){const C=w[2](a(m));c.set(m,[w,C])}else c.set(m,[w])}},u=m=>{var y;const w=c.get(m);w&&(c.delete(m),(y=w[1])==null||y.call(w))},d=m=>(r.add(m),r.size===1&&c.forEach(([w,C],N)=>{if((yk?"production":void 0)!=="production"&&C)throw new Error("remove already exists");const I=w[2](a(N));c.set(N,[w,I])}),()=>{r.delete(m),r.size===0&&c.forEach(([w,C],N)=>{C&&(C(),c.set(N,[w]))})});let h=!0;const f=Dqe(()=>h,l,u,s),p=kqe(t,f);IS.set(t,p);const g=[t,o,d];return hm.set(p,g),Reflect.ownKeys(t).forEach(m=>{const y=Object.getOwnPropertyDescriptor(t,m);"value"in y&&y.writable&&(p[m]=t[m])}),h=!1,p}function lc(t,e,n){const r=hm.get(t);(yk?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function NS(t){const e=hm.get(t);(yk?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return Oqe(n,r())}function eC(t){return nN.add(t),t}function Mqe(){return{proxyStateMap:hm,refSet:nN,snapCache:T5,versionHolder:n_,proxyCache:IS}}function va(t,e,n,r){let s=t[e];return lc(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:Bqe,snapCache:Lqe}=Mqe(),Nx=t=>Bqe.has(t);function Uqe(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=Lqe.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return Nx(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!Nx(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!Nx(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!Nx(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=ms(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var yq={};const Ne={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof yq<"u"?yq.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},wk={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=Ne.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},$qe={bigNumber(t){return t?new sa(t):new sa(0)},multiply(t,e){if(t===void 0||e===void 0)return new sa(0);const n=new sa(t),r=new sa(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},Fqe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],jqe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],Wqe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],zqe={getERC20Abi:t=>Ne.USDT_CONTRACT_ADDRESSES.includes(t)?Wqe:Fqe,getSwapAbi:()=>jqe},Cg={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},cn={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function sM(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Zt={setItem(t,e){r_()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(r_())return localStorage.getItem(t)||void 0},removeItem(t){r_()&&localStorage.removeItem(t)},clear(){r_()&&localStorage.clear()}};function r_(){return typeof window<"u"&&typeof localStorage<"u"}function bk(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const aa={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,NAMES_SUPPORTED_CHAIN_NAMESPACES:[Ne.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,DEFAULT_REMOTE_FEATURES:{socials:["google","x","discord","farcaster","github","apple","facebook"]},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},_t={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=_t.getActiveNamespace(),e=_t.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Zt.setItem(cn.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Zt.getItem(cn.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Zt.removeItem(cn.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Zt.setItem(cn.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Zt.setItem(cn.ACTIVE_CAIP_NETWORK_ID,t),_t.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Zt.getItem(cn.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Zt.removeItem(cn.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=sM(t);Zt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=_t.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Zt.setItem(cn.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Zt.getItem(cn.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=sM(t);Zt.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Zt.getItem(cn.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=sM(t);return Zt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{Zt.setItem(cn.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Zt.getItem(cn.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Zt.removeItem(cn.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Zt.getItem(cn.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Zt.getItem(cn.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Zt.setItem(cn.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Zt.getItem(cn.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Zt.getItem(cn.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Zt.setItem(cn.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=_t.getConnectedNamespaces();e.includes(t)||(e.push(t),_t.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=_t.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),_t.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Zt.getItem(cn.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Zt.setItem(cn.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Zt.removeItem(cn.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Zt.getItem(cn.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=_t.getBalanceCache();Zt.setItem(cn.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=_t.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;_t.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=_t.getBalanceCache();e[t.caipAddress]=t,Zt.setItem(cn.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Zt.getItem(cn.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=_t.getBalanceCache();Zt.setItem(cn.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=_t.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),_t.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=_t.getNativeBalanceCache();e[t.caipAddress]=t,Zt.setItem(cn.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Zt.getItem(cn.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=_t.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;_t.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=_t.getEnsCache();e[t.address]=t,Zt.setItem(cn.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=_t.getEnsCache();Zt.setItem(cn.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Zt.getItem(cn.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=_t.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;_t.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=_t.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Zt.setItem(cn.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=_t.getIdentityCache();Zt.setItem(cn.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Zt.removeItem(cn.PORTFOLIO_CACHE),Zt.removeItem(cn.NATIVE_BALANCE_CACHE),Zt.removeItem(cn.ENS_CACHE),Zt.removeItem(cn.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Zt.setItem(cn.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Zt.getItem(cn.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=_t.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===Ne.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};Zt.setItem(cn.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Zt.getItem(cn.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=_t.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),Zt.setItem(cn.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=Zt.getItem(cn.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=_t.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),Zt.setItem(cn.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=_t.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),Zt.setItem(cn.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(_t.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},jt={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return jt.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=aa.TEN_SEC_MS:!0},isAllowedRetry(t,e=aa.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(jt.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+aa.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(jt.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!jt.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?_t.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,jt.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return Ne.W3M_API_URL},getBlockchainApiUrl(){return Ne.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return Ne.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?aa.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in Ne.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function k1(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}let rN=class{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await k1(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await k1(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await k1(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await k1(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await k1(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}};const Hqe={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?aa.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(jt.isTelegram()){if(jt.isIos())return t.filter(e=>e!=="google");if(jt.isMac())return t.filter(e=>e!=="x");if(jt.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},Ht=ms({features:aa.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:aa.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),pn={state:Ht,subscribeKey(t,e){return va(Ht,t,e)},setOptions(t){Object.assign(Ht,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...Ht.remoteFeatures,...t};Ht.remoteFeatures=e,(n=Ht.remoteFeatures)!=null&&n.socials&&(Ht.remoteFeatures.socials=Hqe.filterSocialsByPlatform(Ht.remoteFeatures.socials))},setFeatures(t){if(!t)return;Ht.features||(Ht.features=aa.DEFAULT_FEATURES);const e={...Ht.features,...t};Ht.features=e},setProjectId(t){Ht.projectId=t},setCustomRpcUrls(t){Ht.customRpcUrls=t},setAllWallets(t){Ht.allWallets=t},setIncludeWalletIds(t){Ht.includeWalletIds=t},setExcludeWalletIds(t){Ht.excludeWalletIds=t},setFeaturedWalletIds(t){Ht.featuredWalletIds=t},setTokens(t){Ht.tokens=t},setTermsConditionsUrl(t){Ht.termsConditionsUrl=t},setPrivacyPolicyUrl(t){Ht.privacyPolicyUrl=t},setCustomWallets(t){Ht.customWallets=t},setIsSiweEnabled(t){Ht.isSiweEnabled=t},setIsUniversalProvider(t){Ht.isUniversalProvider=t},setSdkVersion(t){Ht.sdkVersion=t},setMetadata(t){Ht.metadata=t},setDisableAppend(t){Ht.disableAppend=t},setEIP6963Enabled(t){Ht.enableEIP6963=t},setDebug(t){Ht.debug=t},setEnableWalletConnect(t){Ht.enableWalletConnect=t},setEnableWalletGuide(t){Ht.enableWalletGuide=t},setEnableAuthLogger(t){Ht.enableAuthLogger=t},setEnableWallets(t){Ht.enableWallets=t},setPreferUniversalLinks(t){Ht.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(aa.SIWX_DEFAULTS))t[e]??(t[e]=n);Ht.siwx=t},setConnectMethodsOrder(t){Ht.features={...Ht.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){Ht.features={...Ht.features,walletFeaturesOrder:t}},setSocialsOrder(t){Ht.remoteFeatures={...Ht.remoteFeatures,socials:t}},setCollapseWallets(t){Ht.features={...Ht.features,collapseWallets:t}},setEnableEmbedded(t){Ht.enableEmbedded=t},setAllowUnsupportedChain(t){Ht.allowUnsupportedChain=t},setManualWCControl(t){Ht.manualWCControl=t},setEnableNetworkSwitch(t){Ht.enableNetworkSwitch=t},setEnableReconnect(t){Ht.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(Ht.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){Ht.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return Ht.universalProviderConfigOverride},getSnapshot(){return NS(Ht)}},Gqe=Object.freeze({enabled:!0,events:[]}),qqe=new rN({baseUrl:jt.getAnalyticsUrl(),clientId:null}),Vqe=5,Kqe=60*1e3,hp=ms({...Gqe}),Yqe={state:hp,subscribeKey(t,e){return va(hp,t,e)},async sendError(t,e){if(!hp.enabled)return;const n=Date.now();if(hp.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<Kqe}).length>=Vqe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};hp.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=pn.state;await qqe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:jt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){hp.enabled=!0},disable(){hp.enabled=!1},clearEvents(){hp.events=[]}};let R5=class k5 extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,k5.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,k5):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function wq(t,e){const n=t instanceof R5?t:new R5(t instanceof Error?t.message:String(t),e,t);throw Yqe.sendError(n,n.category),n}function Jl(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return wq(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return wq(a,e)}},n[r]=i}else n[r]=s}),n}var tC={};const Qqe="https://secure.walletconnect.org/sdk",Jqe=(typeof process<"u"&&typeof tC<"u"?tC.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||Qqe,Zqe=(typeof process<"u"&&typeof tC<"u"?tC.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",Xqe=(typeof process<"u"&&typeof tC<"u"?tC.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",vt={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},mo={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Od={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},eVe={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Od.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Od.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Od.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Od.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===Ne.CHAIN.SOLANA&&t===Od.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Od.COINBASE.url}/dapp?cb_url=${r}`)}},wc=ms({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),tVe={state:wc,subscribeNetworkImages(t){return lc(wc.networkImages,()=>t(wc.networkImages))},subscribeKey(t,e){return va(wc,t,e)},subscribe(t){return lc(wc,()=>t(wc))},setWalletImage(t,e){wc.walletImages[t]=e},setNetworkImage(t,e){wc.networkImages[t]=e},setChainImage(t,e){wc.chainImages[t]=e},setConnectorImage(t,e){wc.connectorImages={...wc.connectorImages,[t]:e}},setTokenImage(t,e){wc.tokenImages[t]=e},setCurrencyImage(t,e){wc.currencyImages[t]=e}},Nu=Jl(tVe),nVe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},iM=ms({networkImagePromises:{}}),rVe={async fetchWalletImage(t){if(t)return await en._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(iM.networkImagePromises[t]||(iM.networkImagePromises[t]=en._fetchNetworkImage(t)),await iM.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Nu.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Nu.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Nu.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Nu.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return Nu.state.connectorImages[t.imageId]},getChainImage(t){return Nu.state.networkImages[nVe[t]]}},fp=ms({message:"",variant:"info",open:!1}),sVe={state:fp,subscribeKey(t,e){return va(fp,t,e)},open(t,e){const{debug:n}=pn.state,{shortMessage:r,longMessage:s}=t;n&&(fp.message=r,fp.variant=e,fp.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){fp.open=!1,fp.message="",fp.variant="info"}},Zm=Jl(sVe),iVe=jt.getAnalyticsUrl(),oVe=new rN({baseUrl:iVe,clientId:null}),aVe=["MODAL_CREATED"],xh=ms({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Ps={state:xh,subscribe(t){return lc(xh,()=>t(xh))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=pn.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=br.state.address;if(aVe.includes(t.data.event)||typeof window>"u")return;await oVe.post({path:"/e",params:Ps.getSdkProperties(),body:{eventId:jt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),xh.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===Ne.HTTP_STATUS_CODES.FORBIDDEN&&!xh.reportedErrors.FORBIDDEN&&(Zm.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${r_()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),xh.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;xh.timestamp=Date.now(),xh.data=t,(e=pn.state.features)!=null&&e.analytics&&Ps._sendAnalyticsEvent(xh)}},cVe=jt.getApiUrl(),Ta=new rN({baseUrl:cVe,clientId:null}),lVe=40,bq=4,uVe=20,Cn=ms({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),en={state:Cn,subscribeKey(t,e){return va(Cn,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=pn.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return pn.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Ta.baseUrl}/getWalletImage/${t}`,n=await Ta.getBlob({path:e,params:en._getSdkProperties()});Nu.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Ta.baseUrl}/public/getAssetImage/${t}`,n=await Ta.getBlob({path:e,params:en._getSdkProperties()});Nu.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Ta.baseUrl}/public/getAssetImage/${t}`,n=await Ta.getBlob({path:e,params:en._getSdkProperties()});Nu.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Ta.baseUrl}/public/getCurrencyImage/${t}`,n=await Ta.getBlob({path:e,params:en._getSdkProperties()});Nu.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Ta.baseUrl}/public/getTokenImage/${t}`,n=await Ta.getBlob({path:e,params:en._getSdkProperties()});Nu.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return jt.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Od.COINBASE.id?!0:ie.state.activeChain==="solana"&&(n.id===Od.SOLFLARE.id||n.id===Od.PHANTOM.id)):t},async fetchProjectConfig(){return(await Ta.get({path:"/appkit/v1/config",params:en._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Ta.get({path:"/projects/v1/origins",params:en._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===Ne.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=Ne.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=ie.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!rVe.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>en._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Ot.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>en._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>en._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>en._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];en._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Od).map(o=>o.id));const r=await Ta.get({path:"/getWallets",params:{...en._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:en._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=pn.state;if(t!=null&&t.length){const e={...en._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??bq,include:t},{data:n}=await en.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>en._fetchWalletImage(i))),Cn.featured=r,Cn.allFeatured=r}},async fetchRecommendedWallets(){try{Cn.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=pn.state,r=[...e??[],...n??[]].filter(Boolean),s=ie.getRequestedCaipNetworkIds().join(","),i={page:1,entries:bq,include:t,exclude:r,chains:s},{data:o,count:a}=await en.fetchWallets(i),c=_t.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>en._fetchWalletImage(d))),Cn.recommended=o,Cn.allRecommended=o,Cn.count=a??0}catch{}finally{Cn.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=pn.state,s=ie.getRequestedCaipNetworkIds().join(","),i=[...Cn.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:lVe,include:e,exclude:i,chains:s},{data:a,count:c}=await en.fetchWallets(o),l=a.slice(0,uVe).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>en._fetchWalletImage(u))),Cn.wallets=jt.uniqueBy([...Cn.wallets,...en._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Cn.count=c>Cn.count?c:Cn.count,Cn.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await en.fetchWallets(e);n&&n.forEach(r=>{Cn.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=pn.state,s=ie.getRequestedCaipNetworkIds().join(",");Cn.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await en.fetchWallets(i);Ps.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>en._fetchWalletImage(c)),jt.wait(300)]),Cn.search=en._filterOutExtensions(o)},initPromise(t,e){const n=Cn.promises[t];return n||(Cn.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&en.initPromise("connectorImages",en.fetchConnectorImages),e&&en.initPromise("featuredWallets",en.fetchFeaturedWallets),n&&en.initPromise("recommendedWallets",en.fetchRecommendedWallets),r&&en.initPromise("networkImages",en.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=pn.state.features)!=null&&t.analytics&&en.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Ta.get({path:"/getAnalyticsConfig",params:en._getSdkProperties()});pn.setFeatures({analytics:t})}catch{pn.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Cn.featured=Cn.allFeatured,Cn.recommended=Cn.allRecommended;return}const e=ie.getRequestedCaipNetworkIds().join(",");Cn.featured=Cn.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Cn.recommended=Cn.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Cn.filteredWallets=Cn.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Cn.filteredWallets=[]},setFilterByNamespace(t){if(!t){Cn.featured=Cn.allFeatured,Cn.recommended=Cn.allRecommended;return}const e=ie.getRequestedCaipNetworkIds().join(",");Cn.featured=Cn.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Cn.recommended=Cn.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Cn.filteredWallets=Cn.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Mr=ms({view:"Connect",history:["Connect"],transactionStack:[]}),dVe={state:Mr,subscribeKey(t,e){return va(Mr,t,e)},pushTransactionStack(t){Mr.transactionStack.push(t)},popTransactionStack(t){const e=Mr.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),hn.goBack();break;case"cancel":s==null||s(),hn.goBack();break}},push(t,e){t!==Mr.view&&(Mr.view=t,Mr.history.push(t),Mr.data=e)},reset(t,e){Mr.view=t,Mr.history=[t],Mr.data=e},replace(t,e){Mr.history.at(-1)===t||(Mr.view=t,Mr.history[Mr.history.length-1]=t,Mr.data=e)},goBack(){var r;const t=ie.state.activeCaipAddress,e=hn.state.view==="ConnectingFarcaster",n=!t&&e;if(Mr.history.length>1){Mr.history.pop();const[s]=Mr.history.slice(-1);s&&(t&&s==="Connect"?Mr.view="Account":Mr.view=s)}else ss.close();(r=Mr.data)!=null&&r.wallet&&(Mr.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){br.setFarcasterUrl(void 0,ie.state.activeChain);const a=Ot.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=NS(pn.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Mr.history.length>1){Mr.history=Mr.history.slice(0,t+1);const[e]=Mr.history.slice(-1);e&&(Mr.view=e)}},goBackOrCloseModal(){hn.state.history.length>1?hn.goBack():ss.close()}},hn=Jl(dVe),Th=ms({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),P5={state:Th,subscribe(t){return lc(Th,()=>t(Th))},setThemeMode(t){Th.themeMode=t;try{const e=Ot.getAuthConnector();if(e){const n=P5.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:bk(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Th.themeVariables={...Th.themeVariables,...t};try{const e=Ot.getAuthConnector();if(e){const n=P5.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:bk(Th.themeVariables,Th.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return NS(Th)}},xx=Jl(P5),Soe={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},lr=ms({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...Soe},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),hVe={state:lr,subscribe(t){return lc(lr,()=>{t(lr)})},subscribeKey(t,e){return va(lr,t,e)},initialize(t){t.forEach(e=>{const n=_t.getConnectedConnectorId(e);n&&Ot.setConnectorId(n,e)})},setActiveConnector(t){t&&(lr.activeConnector=eC(t))},setConnectors(t){t.filter(s=>!lr.allConnectors.some(i=>i.id===s.id&&Ot.getConnectorName(i.name)===Ot.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&lr.allConnectors.push(eC(s))});const n=Ot.getEnabledNamespaces(),r=Ot.getEnabledConnectors(n);lr.connectors=Ot.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(lr.filterByNamespaceMap).forEach(e=>{lr.filterByNamespaceMap[e]=!1}),t.forEach(e=>{lr.filterByNamespaceMap[e]=!0}),Ot.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){lr.filterByNamespaceMap[t]=e,Ot.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Ot.getEnabledNamespaces(),e=Ot.getEnabledConnectors(t),n=Ot.areAllNamespacesEnabled();lr.connectors=Ot.mergeMultiChainConnectors(e),n?en.clearFilterByNamespaces():en.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(lr.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return lr.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(lr.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Ot.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===Ne.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Ot.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===Ne.CONNECTOR_ID.AUTH){const s=t,i=NS(pn.state),o=xx.getSnapshot().themeMode,a=xx.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:bk(a,o)}),Ot.setConnectors([t])}else Ot.setConnectors([t])},getAuthConnector(t){var r;const e=t||ie.state.activeChain,n=lr.connectors.find(s=>s.id===Ne.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return lr.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return lr.allConnectors.find(e=>e.id===t)},getConnector(t,e){return lr.allConnectors.filter(r=>r.chain===ie.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=NS(pn.state),r=xx.getSnapshot().themeMode,s=xx.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:bk(s,r)})},getConnectorsByNamespace(t){const e=lr.allConnectors.filter(n=>n.chain===t);return Ot.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return ie.checkIfSmartAccountEnabled()&&oh(t)===mo.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=Ot.getConnector(t.id,t.rdns);eVe.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,ie.state.activeChain),e?hn.push("ConnectingExternal",{connector:e}):hn.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Ot.getConnectorsByNamespace(t):Ot.mergeMultiChainConnectors(lr.allConnectors)},setFilterByNamespace(t){lr.filterByNamespace=t,lr.connectors=Ot.getConnectors(t),en.setFilterByNamespace(t)},setConnectorId(t,e){t&&(lr.activeConnectorIds={...lr.activeConnectorIds,[e]:t},_t.setConnectedConnectorId(e,t))},removeConnectorId(t){lr.activeConnectorIds={...lr.activeConnectorIds,[t]:void 0},_t.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return lr.activeConnectorIds[t]},isConnected(t){return t?!!lr.activeConnectorIds[t]:Object.values(lr.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){lr.activeConnectorIds={...Soe}}},Ot=Jl(hVe),fVe=1e3,P1={checkNamespaceConnectorId(t,e){return Ot.getConnectorId(t)===e},isSocialProvider(t){return aa.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&Ot.setActiveConnector(e),s==null||s(jt.isMobile()&&t),r){const l=ss.subscribeKey("open",u=>{u||(hn.state.view!==r&&hn.replace(r),l(),a(new Error("Modal closed")))})}const c=ie.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&ss.close(),c(),o(Cg.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=ie.subscribeKey("activeCaipAddress",s=>{s&&(ss.close(),r(),e(Cg.parseCaipAddress(s)))});kt.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=br.state.socialWindow,i=br.state.socialProvider,o=!1,a=null;const c=ie.subscribeKey("activeCaipAddress",l=>{l&&(e&&ss.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===Ne.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=Ot.getAuthConnector();if(g&&!o){s&&(s.close(),br.setSocialWindow(void 0,ie.state.activeChain),s=br.state.socialWindow),o=!0;const m=f.data.resultUri;i&&Ps.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}});const y=ie.state.activeCaipNetwork;if(await g.provider.connectSocial({uri:m,chainId:y==null?void 0:y.caipNetworkId}),i){_t.setConnectedSocialProvider(i),await kt.connectExternal({id:g.id,type:g.type,socialUri:m},g.chain);const w=ie.state.activeCaipAddress;if(!w){u(new Error("Failed to connect"));return}l(Cg.parseCaipAddress(w)),Ps.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&Ps.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&Ps.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(br.setSocialProvider(t,ie.state.activeChain),i=br.state.socialProvider,Ps.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=ss.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=Ot.getAuthConnector();if(p&&!br.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();br.setFarcasterUrl(g,ie.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=Ot.getAuthConnector();a=jt.returnOpenHref(`${Ne.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){br.setSocialWindow(a,ie.state.activeChain),s=br.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=ss.subscribeKey("open",c=>{c||(hn.state.view!==e&&hn.replace(e),a(),i(new Error("Modal closed")))})}const o=ie.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&ss.close(),o(),s(Cg.parseCaipAddress(a)))})})},async updateEmail(){const t=_t.getConnectedConnectorId(ie.state.activeChain),e=Ot.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==Ne.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return hn.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(ss.close(),clearInterval(i),o(),r({email:a}))},fVe),o=ss.subscribeKey("open",a=>{a||(hn.state.view!=="Connect"&&hn.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return ie.checkIfSmartAccountEnabled()&&oh(t)===mo.ACCOUNT_TYPES.EOA}};function Ioe(){var r,s;const t=((r=ie.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=ie.state.activeCaipNetwork)==null?void 0:s.id)||1,n=aa.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function oh(t){var n;return(n=ie.getAccountData(t))==null?void 0:n.preferredAccountType}const Noe={getConnectionStatus(t,e){const n=Ot.state.activeConnectorIds[e],r=kt.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=pn.state.remoteFeatures)!=null&&a.multiWallet),n=Ot.state.activeConnectorIds[t],r=kt.getConnections(t),i=(kt.state.recentConnections.get(t)??[]).filter(c=>Ot.getConnectorById(c.connectorId)),o=Noe.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},Xm=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),fi=ms({...Xm}),pVe={state:fi,subscribeKey(t,e){return va(fi,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=jt.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){fi.message=Xm.message,fi.variant=Xm.variant,fi.svg=Xm.svg,fi.open=Xm.open,fi.autoClose=Xm.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Xm.autoClose}){fi.open?(fi.open=!1,setTimeout(()=>{fi.message=t,fi.variant=n,fi.svg=e,fi.open=!0,fi.autoClose=r},150)):(fi.message=t,fi.variant=n,fi.svg=e,fi.open=!0,fi.autoClose=r)}},_g=pVe,es=ms({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),gVe={state:es,subscribe(t){return lc(es,()=>t(es))},setLastNetworkInView(t){es.lastNetworkInView=t},async fetchTransactions(t,e){var n;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");es.loading=!0;try{const r=await on.fetchTransactions({account:t,cursor:es.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=ie.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),s=s_.filterSpamTransactions(r.data),i=s_.filterByConnectedChain(s),o=[...es.transactions,...i];es.loading=!1,e==="coinbase"?es.coinbaseTransactions=s_.groupTransactionsByYearAndMonth(es.coinbaseTransactions,r.data):(es.transactions=o,es.transactionsByYear=s_.groupTransactionsByYearAndMonth(es.transactionsByYear,i)),es.empty=o.length===0,es.next=r.next?r.next:void 0}catch{const s=ie.state.activeChain;Ps.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:pn.state.projectId,cursor:es.next,isSmartAccount:oh(s)===mo.ACCOUNT_TYPES.SMART_ACCOUNT}}),_g.showError("Failed to fetch transactions"),es.loading=!1,es.empty=!0,es.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=ie.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){es.next=void 0},resetTransactions(){es.transactions=[],es.transactionsByYear={},es.lastNetworkInView=void 0,es.loading=!1,es.empty=!1,es.next=void 0}},s_=Jl(gVe,"API_ERROR"),Zn=ms({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let jm;const mVe={state:Zn,subscribe(t){return lc(Zn,()=>t(Zn))},subscribeKey(t,e){return va(Zn,t,e)},_getClient(){return Zn._client},setClient(t){Zn._client=eC(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);kt.syncStorageConnections(e)},syncStorageConnections(t){const e=_t.getConnections(),n=t??Array.from(ie.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(Zn.recentConnections);i.set(r,s),Zn.recentConnections=i}},getConnections(t){return t?Zn.connections.get(t)??[]:[]},hasAnyConnection(t){const e=kt.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(jt.isTelegram()||jt.isSafari()&&jt.isIos()){if(jm){await jm,jm=void 0;return}if(!jt.isPairingExpired(Zn==null?void 0:Zn.wcPairingExpiry)){const s=Zn.wcUri;Zn.wcUri=s;return}jm=(e=(t=kt._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),kt.state.status="connecting",await jm,jm=void 0,Zn.wcPairingExpiry=void 0,kt.state.status="connected"}else await((r=(n=kt._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=kt._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&ie.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=kt._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||ie.state.activeChain;e&&Ot.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;ss.setLoading(!0,ie.state.activeChain);const n=Ot.getAuthConnector();n&&(br.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),_t.setPreferredAccountTypes(Object.entries(ie.state.chains).reduce((s,[i,o])=>{const a=i,c=oh(a);return c!==void 0&&(s[a]=c),s},{})),await kt.reconnectExternal(n),ss.setLoading(!1,ie.state.activeChain),Ps.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=ie.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=kt._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=kt._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=kt._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=kt._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=kt._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=kt._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=kt._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=kt._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=kt._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=kt._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=kt._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=kt._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Zn.wcUri=void 0,Zn.wcPairingExpiry=void 0,Zn.wcLinking=void 0,Zn.recentWallet=void 0,Zn.status="disconnected",s_.resetTransactions(),_t.deleteWalletConnectDeepLink()},resetUri(){Zn.wcUri=void 0,Zn.wcPairingExpiry=void 0,jm=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=kt.state;t&&_t.setWalletConnectDeepLink(t),e&&_t.setAppKitRecent(e),Ps.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=hn.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Zn.wcBasic=t},setUri(t){Zn.wcUri=t,Zn.wcPairingExpiry=jt.getPairingExpiry()},setWcLinking(t){Zn.wcLinking=t},setWcError(t){Zn.wcError=t,Zn.buffering=!1},setRecentWallet(t){Zn.recentWallet=t},setBuffering(t){Zn.buffering=t},setStatus(t){Zn.status=t},setIsSwitchingConnection(t){Zn.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=kt._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new R5("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(Zn.connections);n.set(e,t),Zn.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=br.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&P1.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await kt.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=Ot.getConnectorById(t.connectorId),s=t.connectorId===Ne.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await kt.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await kt.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=Ot.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===Ne.CONNECTOR_ID.AUTH,a=t.connectorId===Ne.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&P1.isSocialProvider(i)){const{address:d}=await P1.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){ss.open({view:"ConnectingFarcaster"})},onConnect(){hn.replace("ProfileWallets")}});c=d}else{const{address:d}=await P1.connectEmail({closeModalOnConnect:r,onOpen(){ss.open({view:"EmailLogin"})},onConnect(){hn.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await P1.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){ss.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){hn.replace("ProfileWallets")}});c=d}else{const d=await kt.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await kt.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=br.getCaipAddress(n);if(o){const{address:c}=Cg.parseCaipAddress(o);i=c}const a=Noe.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await kt.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await kt.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},kt=Jl(mVe),ab=ms({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),fv={state:ab,subscribe(t){return lc(ab,()=>t(ab))},subscribeOpen(t){return va(ab,"open",t)},set(t){Object.assign(ab,{...ab,...t})}},yVe={async getTokenList(){var r;const t=ie.state.activeCaipNetwork,e=await on.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=ie.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(kt==null?void 0:kt.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await on.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await on.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=kt.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await F4.getMyTokensWithBalance(t);return br.setTokenBalance(e,ie.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:Ioe(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Nr=ms({tokenBalances:[],loading:!1}),wVe={state:Nr,subscribe(t){return lc(Nr,()=>t(Nr))},subscribeKey(t,e){return va(Nr,t,e)},setToken(t){t&&(Nr.token=eC(t))},setTokenAmount(t){Nr.sendTokenAmount=t},setReceiverAddress(t){Nr.receiverAddress=t},setReceiverProfileImageUrl(t){Nr.receiverProfileImageUrl=t},setReceiverProfileName(t){Nr.receiverProfileName=t},setNetworkBalanceInUsd(t){Nr.networkBalanceInUSD=t},setLoading(t){Nr.loading=t},async sendToken(){var t;try{switch(Er.setLoading(!0),(t=ie.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await Er.sendEvmToken();return;case"solana":await Er.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Er.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=ie.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=oh(t);if(!Er.state.sendTokenAmount||!Er.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Er.state.token)throw new Error("A token is required");(n=Er.state.token)!=null&&n.address?(Ps.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===mo.ACCOUNT_TYPES.SMART_ACCOUNT,token:Er.state.token.address,amount:Er.state.sendTokenAmount,network:((r=ie.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await Er.sendERC20Token({receiverAddress:Er.state.receiverAddress,tokenAddress:Er.state.token.address,sendTokenAmount:Er.state.sendTokenAmount,decimals:Er.state.token.quantity.decimals})):(Ps.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===mo.ACCOUNT_TYPES.SMART_ACCOUNT,token:Er.state.token.symbol||"",amount:Er.state.sendTokenAmount,network:((s=ie.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await Er.sendNativeToken({receiverAddress:Er.state.receiverAddress,sendTokenAmount:Er.state.sendTokenAmount,decimals:Er.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Nr.loading=!0;const e=(i=ie.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=ie.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=ie.state.activeCaipAddress,s=r?jt.getPlainAddress(r):void 0;if(Nr.lastRetry&&!jt.isAllowedRetry(Nr.lastRetry,30*aa.ONE_SEC_MS))return Nr.loading=!1,[];try{if(s&&e&&n){const a=await F4.getMyTokensWithBalance();return Nr.tokenBalances=a,Nr.lastRetry=void 0,a}}catch(a){Nr.lastRetry=Date.now(),t==null||t(a),_g.showError("Token Balance Unavailable")}finally{Nr.loading=!1}return[]},fetchNetworkBalance(){if(Nr.tokenBalances.length===0)return;const t=yVe.mapBalancesToSwapTokens(Nr.tokenBalances);if(!t)return;const e=t.find(n=>n.address===Ioe());e&&(Nr.networkBalanceInUSD=e?$qe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;hn.pushTransactionStack({});const e=t.receiverAddress,n=br.state.address,r=kt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await kt.sendTransaction({chainNamespace:Ne.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),Ps.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:oh("eip155")===mo.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=Er.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=ie.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=kt._getClient())==null||a.updateBalance("eip155"),Er.resetSend()},async sendERC20Token(t){hn.pushTransactionStack({onSuccess(){hn.replace("Account")}});const e=kt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(br.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=jt.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await kt.writeContract({fromAddress:br.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:zqe.getERC20Abi(n),chainNamespace:Ne.CHAIN.EVM}),Er.resetSend()}},async sendSolanaToken(){var t;if(!Er.state.sendTokenAmount||!Er.state.receiverAddress)throw new Error("An amount and receiver address are required");hn.pushTransactionStack({onSuccess(){hn.replace("Account")}}),await kt.sendTransaction({chainNamespace:"solana",to:Er.state.receiverAddress,value:Er.state.sendTokenAmount}),(t=kt._getClient())==null||t.updateBalance("solana"),Er.resetSend()},resetSend(){Nr.token=void 0,Nr.sendTokenAmount=void 0,Nr.receiverAddress=void 0,Nr.receiverProfileImageUrl=void 0,Nr.receiverProfileName=void 0,Nr.loading=!1,Nr.tokenBalances=[]}},Er=Jl(wVe),oM={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},Tx={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Je=ms({chains:Uqe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),bVe={state:Je,subscribe(t){return lc(Je,()=>{t(Je)})},subscribeKey(t,e){return va(Je,t,e)},subscribeChainProp(t,e,n){let r;return lc(Je.chains,()=>{var i;const s=n||Je.activeChain;if(s){const o=(i=Je.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=_t.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=pn.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Je.noAdapters=!0),Je.noAdapters||(Je.activeChain=a==null?void 0:a.namespace,Je.activeCaipNetwork=i,ie.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Je.activeChain&&fv.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),h=_t.getPreferredAccountTypes()||{},f={...pn.state.defaultAccountTypes,...h};ie.state.chains.set(u,{namespace:u,networkState:ms({...Tx,caipNetwork:d==null?void 0:d[0]}),accountState:ms({...oM,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),ie.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Je.activeChain===t){const r=Array.from(Je.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&ie.setActiveCaipNetwork(s)}}Je.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Je.chains.set(t.namespace,{namespace:t.namespace,networkState:{...Tx,caipNetwork:r[0]},accountState:oM,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),ie.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Je.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Je.chains.set(t.chainNamespace,{...e,caipNetworks:r}),ie.setRequestedCaipNetworks(r,t.chainNamespace),Ot.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Je.chains.get(t);if(n){const o=((r=Je.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&ie.setActiveCaipNetwork(n.caipNetworks[0]),Je.chains.set(t,{...n,caipNetworks:a}),ie.setRequestedCaipNetworks(a||[],t),a.length===0&&Ot.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Je.chains.get(t);n&&(n.networkState={...n.networkState||Tx,...e},Je.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Je.chains.get(t);if(r){const s={...r.accountState||oM,...e};Je.chains.set(t,{...r,accountState:s}),(Je.chains.size===1||Je.activeChain===t)&&(e.caipAddress&&(Je.activeCaipAddress=e.caipAddress),br.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Je.chains.get(t);if(n){const r={...n.networkState||Tx,...e};Je.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){ie.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;Je.activeChain=t;const e=t?Je.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Je.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Je.activeCaipNetwork=n,ie.setChainNetworkData(t,{caipNetwork:n}),_t.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),fv.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Je.activeChain!==t.chainNamespace&&ie.setIsSwitchingNamespace(!0);const e=Je.chains.get(t.chainNamespace);Je.activeChain=t.chainNamespace,Je.activeCaipNetwork=t,ie.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Je.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Je.activeCaipAddress=void 0,ie.setAccountProp("caipAddress",Je.activeCaipAddress,t.chainNamespace),e&&br.replaceState(e.accountState),Er.resetSend(),fv.set({activeChain:Je.activeChain,selectedNetworkId:(i=Je.activeCaipNetwork)==null?void 0:i.caipNetworkId}),_t.setActiveCaipNetworkId(t.caipNetworkId),!ie.checkIfSupportedNetwork(t.chainNamespace)&&pn.state.enableNetworkSwitch&&!pn.state.allowUnsupportedChain&&!kt.state.wcBasic&&ie.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Je.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==ie.state.activeChain,n=(s=ie.getNetworkData(t))==null?void 0:s.caipNetwork,r=ie.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await ie.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=ie.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=ie.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=Je.activeCaipNetwork)==null?void 0:a.id)})),s=ie.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&ss.close()}catch{hn.goBack()}Ps.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Je.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=Je.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Je.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Je.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Je.activeChain;if(e&&(n=e),!n)return;const r=(s=Je.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Je.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Je.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return jt.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Je.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=ie.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){ie.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=ie.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Ot.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Je.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=ie.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=Je.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:Je.activeCaipNetwork},getActiveCaipAddress(){return Je.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Je.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=ie.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());ie.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Je.activeCaipNetwork,r=ie.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Je.activeChain)return!0;const e=ie.getRequestedCaipNetworks(Je.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){ie.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=wk.caipNetworkIdToNumber((r=Je.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Je.activeChain;if(!e||!t)return!1;const n=ie.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){ss.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Je.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&aa.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){ie.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=ie.getAccountProp("preferredAccountType",e);Je.activeCaipAddress=void 0,ie.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),Ot.removeConnectorId(e)},setIsSwitchingNamespace(t){Je.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Je.chains.forEach(s=>{Ne.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Je.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=ie.state.chains.get(t))==null?void 0:e.accountState:br.state},getNetworkData(t){var n;const e=t||Je.activeChain;if(e)return(n=ie.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=ie.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Ot.state.filterByNamespace;return(t?[Je.chains.get(t)]:Array.from(Je.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?ie.getRequestedCaipNetworks(t):ie.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){Je.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Je.lastConnectedSIWECaipNetwork}},ie=Jl(bVe),vVe={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},xoe=jt.getBlockchainApiUrl(),Ra=ms({clientId:null,api:new rN({baseUrl:xoe,clientId:null}),supportedChains:{http:[],ws:[]}}),on={state:Ra,async get(t){const{st:e,sv:n}=on.getSdkProperties(),r=pn.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Ra.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=pn.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Ra.supportedChains.http.length||await on.getSupportedNetworks()}catch{return!1}return Ra.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await on.get({path:"v1/supported-chains"});return Ra.supportedChains=t,t}catch{return Ra.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await on.isNetworkSupported(e))return{avatar:"",name:""};const r=_t.getIdentityFromCacheForAddress(t);if(r)return r;const s=await on.get({path:`/v1/identity/${t}`,params:{sender:ie.state.activeCaipAddress?jt.getPlainAddress(ie.state.activeCaipAddress):void 0}});return _t.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await on.isNetworkSupported((a=ie.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?on.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await on.isNetworkSupported((o=ie.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?on.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await on.isNetworkSupported((n=ie.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?on.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await on.isNetworkSupported((n=ie.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ra.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:pn.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await on.isNetworkSupported((r=ie.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?on.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=on.getSdkProperties();if(!await on.isNetworkSupported((s=ie.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return on.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await on.isNetworkSupported((o=ie.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Ra.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:aa.CONVERT_SLIPPAGE_TOLERANCE},projectId:pn.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=on.getSdkProperties();if(!await on.isNetworkSupported((o=ie.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return on.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=on.getSdkProperties();if(!await on.isNetworkSupported((l=ie.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return _g.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=_t.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await on.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return _t.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await on.isNetworkSupported((n=ie.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?on.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await on.isNetworkSupported((n=ie.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?on.get({path:`/v1/profile/reverse/${t}`,params:{sender:br.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await on.isNetworkSupported((n=ie.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?on.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await on.isNetworkSupported((i=ie.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Ra.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await on.isNetworkSupported((a=ie.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Ra.api.post({path:"/v1/generators/onrampurl",params:{projectId:pn.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await on.isNetworkSupported((e=ie.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await on.get({path:"/v1/onramp/options"})}catch{return vVe}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await on.isNetworkSupported((s=ie.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Ra.api.post({path:"/v1/onramp/quote",params:{projectId:pn.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await on.isNetworkSupported((n=ie.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?on.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await on.isNetworkSupported((s=ie.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Ra.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:pn.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Ra.clientId=t,Ra.api=new rN({baseUrl:xoe,clientId:t})}},aM={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Am(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},F4={async getMyTokensWithBalance(t){const e=br.state.address,n=ie.state.activeCaipNetwork,r=Ot.getConnectorId("eip155")===Ne.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=_t.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===Ne.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await on.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=aM.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await kt.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await kt.walletGetAssets({account:t,chainFilter:[s]});if(!aM.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>aM.createBalance(l,e.caipNetworkId));return _t.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},cd=ms({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),EVe={state:cd,replaceState(t){t&&Object.assign(cd,eC(t))},subscribe(t){return ie.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return ie.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){ie.setAccountProp("status",t,e)},getCaipAddress(t){return ie.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?jt.getPlainAddress(t):void 0;e===ie.state.activeChain&&(ie.state.activeCaipAddress=t),ie.setAccountProp("caipAddress",t,e),ie.setAccountProp("address",n,e)},setBalance(t,e,n){ie.setAccountProp("balance",t,n),ie.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){ie.setAccountProp("profileName",t,e)},setProfileImage(t,e){ie.setAccountProp("profileImage",t,e)},setUser(t,e){ie.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){ie.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){ie.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){ie.setAccountProp("currentTab",t,ie.state.activeChain)},setTokenBalance(t,e){t&&ie.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){ie.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=ie.getAccountProp("addressLabels",n)||new Map;r.set(t,e),ie.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=ie.getAccountProp("addressLabels",e)||new Map;n.delete(t),ie.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){ie.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){ie.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&ie.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){ie.setAccountProp("socialWindow",t?eC(t):void 0,e)},setFarcasterUrl(t,e){ie.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;cd.balanceLoading=!0;const e=(i=ie.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=ie.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=ie.state.activeCaipAddress,s=r?jt.getPlainAddress(r):void 0;if(cd.lastRetry&&!jt.isAllowedRetry(cd.lastRetry,30*aa.ONE_SEC_MS))return cd.balanceLoading=!1,[];try{if(s&&e&&n){const a=await F4.getMyTokensWithBalance();return br.setTokenBalance(a,n),cd.lastRetry=void 0,cd.balanceLoading=!1,a}}catch(a){cd.lastRetry=Date.now(),t==null||t(a),_g.showError("Token Balance Unavailable")}finally{cd.balanceLoading=!1}return[]},resetAccount(t){ie.resetAccount(t)}},br=Jl(EVe),CVe={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=ie.state.activeCaipNetwork,r=hn.state.data;if(t.id===(n==null?void 0:n.id))return;const i=br.getCaipAddress(ie.state.activeChain),o=t.chainNamespace!==ie.state.activeChain,a=br.getCaipAddress(t.chainNamespace),l=Ot.getConnectorId(ie.state.activeChain)===Ne.CONNECTOR_ID.AUTH,u=Ne.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?hn.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?hn.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):hn.push("SwitchNetwork",{...r,network:t})}},ka=ms({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),_Ve={state:ka,subscribe(t){return lc(ka,()=>t(ka))},subscribeKey(t,e){return va(ka,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=ie.state.activeChain,r=e&&e!==n,s=(i=ie.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(kt.state.wcBasic?en.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await en.prefetch(),Ot.setFilterByNamespace(t==null?void 0:t.namespace),ss.setLoading(!0,e),e&&r){const a=((o=ie.getNetworkData(e))==null?void 0:o.caipNetwork)||ie.getRequestedCaipNetworks(e)[0];a&&CVe.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=ie.state.noAdapters;pn.state.manualWCControl||a&&!s?jt.isMobile()?hn.reset("AllWallets"):hn.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?hn.reset(t.view,t.data):s?hn.reset("Account"):hn.reset("Connect")}ka.open=!0,fv.set({open:!0}),Ps.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=pn.state.enableEmbedded,e=!!ie.state.activeCaipAddress;ka.open&&Ps.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),ka.open=!1,hn.reset("Connect"),ss.clearLoading(),t?e?hn.replace("Account"):hn.push("Connect"):fv.set({open:!1}),kt.resetUri()},setLoading(t,e){e&&ka.loadingNamespaceMap.set(e,t),ka.loading=t,fv.set({loading:t})},clearLoading(){ka.loadingNamespaceMap.clear(),ka.loading=!1},shake(){ka.shake||(ka.shake=!0,setTimeout(()=>{ka.shake=!1},500))}},ss=Jl(_Ve),vq=2147483648,AVe={convertEVMChainIdToCoinType(t){if(t>=vq)throw new Error("Invalid chainId");return(vq|t)>>>0}},ll=ms({suggestions:[],loading:!1}),SVe={state:ll,subscribe(t){return lc(ll,()=>t(ll))},subscribeKey(t,e){return va(ll,t,e)},async resolveName(t){var e,n;try{return await on.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await on.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{ll.loading=!0,ll.suggestions=[];const e=await on.getEnsNameSuggestions(t);return ll.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],ll.suggestions}catch(e){const n=TT.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{ll.loading=!1}},async getNamesForAddress(t){try{if(!ie.state.activeCaipNetwork)return[];const n=_t.getEnsFromCacheForAddress(t);if(n)return n;const r=await on.reverseLookupEnsName({address:t});return _t.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=TT.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=ie.state.activeCaipNetwork,n=br.state.address,r=Ot.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");ll.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});hn.pushTransactionStack({onCancel(){hn.replace("RegisterAccountName")}});const i=await kt.signMessage(s);ll.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=AVe.convertEVMChainIdToCoinType(Number(o));await on.registerEnsName({coinType:a,address:n,signature:i,message:s}),br.setProfileName(t,e.chainNamespace),hn.replace("RegisterAccountNameSuccess")}catch(s){const i=TT.parseEnsApiError(s,`Error registering name ${t}`);throw hn.replace("RegisterAccountName"),new Error(i)}finally{ll.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},TT=Jl(SVe);let Wm=null;const Op={getSIWX(){return pn.state.siwx},async initializeIfEnabled(){var i;const t=pn.state.siwx,e=ie.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(ie.checkIfSupportedNetwork(n))try{if(Wm&&await Wm,(await t.getSessions(`${n}:${r}`,s)).length)return;await ss.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),Ps.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=kt._getClient())==null?void 0:i.disconnect().catch(console.error)),hn.reset("Connect"),_g.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=pn.state.siwx,e=jt.getPlainAddress(ie.getActiveCaipAddress()),n=ie.getActiveCaipNetwork(),r=kt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Ot.getConnectorId(n.chainNamespace)===Ne.CONNECTOR_ID.AUTH&&hn.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),ie.setLastConnectedSIWECaipNetwork(n),ss.close(),Ps.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!ss.state.open||hn.state.view==="ApproveTransaction")&&await ss.open({view:"SIWXSignMessage"}),_g.showError("Error signing message"),Ps.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=ie.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,jt.getPlainAddress(ie.getActiveCaipAddress())||""));s&&s.length>0?await ie.switchActiveNetwork(r):await kt.disconnect()}else await kt.disconnect()}else ss.close();ss.close(),Ps.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=ie.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,jt.getPlainAddress(ie.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=pn.state.siwx,e=jt.getPlainAddress(ie.getActiveCaipAddress()),n=ie.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=hn.state.view==="ApproveTransaction",r=hn.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var l;const i=Op.getSIWX();if(!i||!s.includes(Ne.CHAIN.EVM)){const u=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:u.address,chainId:u.chainId,accounts:u.accounts}}const o=await i.createMessage({chainId:((l=ie.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),a={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},c=await t.connect({chainId:e,socialUri:n,siwxMessage:a,preferredAccountType:r});return a.accountAddress=c.address,a.serializedMessage=c.message||"",c.signature&&c.message&&await Op.addEmbeddedWalletSession(a,c.message,c.signature),{address:c.address,chainId:c.chainId,accounts:c.accounts}},async addEmbeddedWalletSession(t,e,n){if(Wm)return Wm;const r=Op.getSIWX();return r?(Wm=r.addSession({data:t,message:e,signature:n}).finally(()=>{Wm=null}),Wm):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=Op.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=ie.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(_g.showLoading("Authenticating...",{autoClose:!1}),br.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),Ps.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Op.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),Ps.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Op.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{_g.hide()}}return!0},getSIWXEventProperties(){var e;const t=ie.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=ie.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:oh(t)===mo.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Cc={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:Ne.CHAIN.EVM,CONNECTOR_TYPE_AUTH:"AUTH"},Oc={ConnectorExplorerIds:{[Ne.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[Ne.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[Ne.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[Ne.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[Ne.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Cc.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Cc.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Cc.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Cc.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Cc.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Cc.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Cc.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Cc.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Cc.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Cc.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Cc.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[Ne.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Ne.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Ne.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[Ne.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[Ne.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[Ne.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[Ne.CONNECTOR_ID.INJECTED]:"Browser Wallet",[Ne.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[Ne.CONNECTOR_ID.COINBASE]:"Coinbase",[Ne.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[Ne.CONNECTOR_ID.LEDGER]:"Ledger",[Ne.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[Ne.CONNECTOR_ID.INJECTED]:"INJECTED",[Ne.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[Ne.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[Ne.CONNECTOR_ID.AUTH]:"AUTH",[Cc.CONNECTOR_TYPE_AUTH]:"AUTH"}},Ya={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Cc.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=ie.state.activeChain;return Ne.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>Ot.getConnectorId(e)===Ne.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},IVe=new AbortController,pp={EmbeddedWalletAbortController:IVe,ALERT_ERRORS:{IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"}}},NVe="rpc.walletconnect.org";function Eq(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const cM=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],i_={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===NVe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:Ne.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${Ne.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return cM.includes(e)?Eq(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,m;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((m=r==null?void 0:r[i])==null?void 0:m.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Oc.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>i_.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(mg(a.url,a.config))}),cM.includes(t.caipNetworkId)&&r.push(mg(Eq(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(mg(a))}),HR(r)},extendWagmiTransports(t,e,n){if(cM.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return HR([n,mg(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:Ne.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=_t.getActiveCaipNetworkId(),n=ie.getAllRequestedCaipNetworks(),r=Array.from(((c=ie.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},Cq={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Zi={set(t,e){Dd.isClient&&localStorage.setItem(`${vt.STORAGE_KEY}${t}`,e)},get(t){return Dd.isClient?localStorage.getItem(`${vt.STORAGE_KEY}${t}`):null},delete(t,e){Dd.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${vt.STORAGE_KEY}${t}`))}},Rx=30*1e3,Dd={checkIfAllowedToTriggerEmail(){const t=Zi.get(vt.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Rx){const n=Math.ceil((Rx-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Zi.get(vt.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Rx)return Math.ceil((Rx-e)/1e3)}return 0},checkIfRequestExists(t){return mo.NOT_SAFE_RPC_METHODS.includes(t.method)||mo.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(Cq.transactionHash))||(t==null?void 0:t.match(Cq.signedMessage)))?vt.RPC_RESPONSE_TYPE_TX:vt.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return mo.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"},Fs=S.object({message:S.string()});function ct(t){return S.literal(vt[t])}const VP=S.object({serializedMessage:S.string().optional(),accountAddress:S.string(),chainId:S.string(),notBefore:S.string().optional(),domain:S.string(),uri:S.string(),version:S.string(),nonce:S.string(),statement:S.string().optional(),resources:S.array(S.string()).optional(),requestId:S.string().optional(),issuedAt:S.string().optional(),expirationTime:S.string().optional()});S.object({accessList:S.array(S.string()),blockHash:S.string().nullable(),blockNumber:S.string().nullable(),chainId:S.string().or(S.number()),from:S.string(),gas:S.string(),hash:S.string(),input:S.string().nullable(),maxFeePerGas:S.string(),maxPriorityFeePerGas:S.string(),nonce:S.string(),r:S.string(),s:S.string(),to:S.string(),transactionIndex:S.string().nullable(),type:S.string(),v:S.string(),value:S.string()});const xVe=S.object({chainId:S.string().or(S.number()),rpcUrl:S.optional(S.string())}),TVe=S.object({email:S.string().email()}),RVe=S.object({otp:S.string()}),kVe=S.object({uri:S.string(),preferredAccountType:S.optional(S.string()),chainId:S.optional(S.string().or(S.number())),siwxMessage:S.optional(VP),rpcUrl:S.optional(S.string())}),PVe=S.object({chainId:S.optional(S.string().or(S.number())),preferredAccountType:S.optional(S.string()),socialUri:S.optional(S.string()),siwxMessage:S.optional(VP),rpcUrl:S.optional(S.string())}),OVe=S.object({provider:S.enum(["google","github","apple","facebook","x","discord"])}),DVe=S.object({email:S.string().email()}),MVe=S.object({otp:S.string()}),BVe=S.object({otp:S.string()}),LVe=S.object({themeMode:S.optional(S.enum(["light","dark"])),themeVariables:S.optional(S.record(S.string(),S.string().or(S.number()))),w3mThemeVariables:S.optional(S.record(S.string(),S.string()))}),UVe=S.object({metadata:S.object({name:S.string(),description:S.string(),url:S.string(),icons:S.array(S.string())}).optional(),sdkVersion:S.string().optional(),sdkType:S.string().optional(),projectId:S.string()}),$Ve=S.object({type:S.string()}),FVe=S.object({action:S.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),jVe=S.object({url:S.string()}),WVe=S.object({userName:S.string()}),zVe=S.object({email:S.string().optional().nullable(),address:S.string(),chainId:S.string().or(S.number()),accounts:S.array(S.object({address:S.string(),type:S.enum([mo.ACCOUNT_TYPES.EOA,mo.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:S.string().optional().nullable(),preferredAccountType:S.optional(S.string()),signature:S.string().optional(),message:S.string().optional(),siwxMessage:S.optional(VP)}),HVe=S.object({action:S.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),GVe=S.object({email:S.string().email().optional().nullable(),address:S.string(),chainId:S.string().or(S.number()),smartAccountDeployed:S.optional(S.boolean()),accounts:S.array(S.object({address:S.string(),type:S.enum([mo.ACCOUNT_TYPES.EOA,mo.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:S.optional(S.string()),signature:S.string().optional(),message:S.string().optional(),siwxMessage:S.optional(VP)}),qVe=S.object({uri:S.string()}),VVe=S.object({isConnected:S.boolean()}),KVe=S.object({chainId:S.string().or(S.number())}),YVe=S.object({chainId:S.string().or(S.number())}),QVe=S.object({newEmail:S.string().email()}),JVe=S.object({smartAccountEnabledNetworks:S.array(S.number())});S.object({address:S.string(),isDeployed:S.boolean()});const ZVe=S.object({version:S.string().optional()}),XVe=S.object({type:S.string(),address:S.string()}),eKe=S.any(),tKe=S.object({method:S.literal("eth_accounts")}),nKe=S.object({method:S.literal("eth_blockNumber")}),rKe=S.object({method:S.literal("eth_call"),params:S.array(S.any())}),sKe=S.object({method:S.literal("eth_chainId")}),iKe=S.object({method:S.literal("eth_estimateGas"),params:S.array(S.any())}),oKe=S.object({method:S.literal("eth_feeHistory"),params:S.array(S.any())}),aKe=S.object({method:S.literal("eth_gasPrice")}),cKe=S.object({method:S.literal("eth_getAccount"),params:S.array(S.any())}),lKe=S.object({method:S.literal("eth_getBalance"),params:S.array(S.any())}),uKe=S.object({method:S.literal("eth_getBlockByHash"),params:S.array(S.any())}),dKe=S.object({method:S.literal("eth_getBlockByNumber"),params:S.array(S.any())}),hKe=S.object({method:S.literal("eth_getBlockReceipts"),params:S.array(S.any())}),fKe=S.object({method:S.literal("eth_getBlockTransactionCountByHash"),params:S.array(S.any())}),pKe=S.object({method:S.literal("eth_getBlockTransactionCountByNumber"),params:S.array(S.any())}),gKe=S.object({method:S.literal("eth_getCode"),params:S.array(S.any())}),mKe=S.object({method:S.literal("eth_getFilterChanges"),params:S.array(S.any())}),yKe=S.object({method:S.literal("eth_getFilterLogs"),params:S.array(S.any())}),wKe=S.object({method:S.literal("eth_getLogs"),params:S.array(S.any())}),bKe=S.object({method:S.literal("eth_getProof"),params:S.array(S.any())}),vKe=S.object({method:S.literal("eth_getStorageAt"),params:S.array(S.any())}),EKe=S.object({method:S.literal("eth_getTransactionByBlockHashAndIndex"),params:S.array(S.any())}),CKe=S.object({method:S.literal("eth_getTransactionByBlockNumberAndIndex"),params:S.array(S.any())}),_Ke=S.object({method:S.literal("eth_getTransactionByHash"),params:S.array(S.any())}),AKe=S.object({method:S.literal("eth_getTransactionCount"),params:S.array(S.any())}),SKe=S.object({method:S.literal("eth_getTransactionReceipt"),params:S.array(S.any())}),IKe=S.object({method:S.literal("eth_getUncleCountByBlockHash"),params:S.array(S.any())}),NKe=S.object({method:S.literal("eth_getUncleCountByBlockNumber"),params:S.array(S.any())}),xKe=S.object({method:S.literal("eth_maxPriorityFeePerGas")}),TKe=S.object({method:S.literal("eth_newBlockFilter")}),RKe=S.object({method:S.literal("eth_newFilter"),params:S.array(S.any())}),kKe=S.object({method:S.literal("eth_newPendingTransactionFilter")}),PKe=S.object({method:S.literal("eth_sendRawTransaction"),params:S.array(S.any())}),OKe=S.object({method:S.literal("eth_syncing"),params:S.array(S.any())}),DKe=S.object({method:S.literal("eth_uninstallFilter"),params:S.array(S.any())}),_q=S.object({method:S.literal("personal_sign"),params:S.array(S.any())}),MKe=S.object({method:S.literal("eth_signTypedData_v4"),params:S.array(S.any())}),BKe=S.object({method:S.literal("eth_sendTransaction"),params:S.array(S.any())}),LKe=S.object({method:S.literal("solana_signMessage"),params:S.object({message:S.string(),pubkey:S.string()})}),UKe=S.object({method:S.literal("solana_signTransaction"),params:S.object({transaction:S.string()})}),$Ke=S.object({method:S.literal("solana_signAllTransactions"),params:S.object({transactions:S.array(S.string())})}),FKe=S.object({method:S.literal("solana_signAndSendTransaction"),params:S.object({transaction:S.string(),options:S.object({skipPreflight:S.boolean().optional(),preflightCommitment:S.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:S.number().optional(),minContextSlot:S.number().optional()}).optional()})}),jKe=S.object({method:S.literal("wallet_sendCalls"),params:S.array(S.object({chainId:S.string().or(S.number()).optional(),from:S.string().optional(),version:S.string().optional(),capabilities:S.any().optional(),calls:S.array(S.object({to:S.string().startsWith("0x"),data:S.string().startsWith("0x").optional(),value:S.string().optional()}))}))}),WKe=S.object({method:S.literal("wallet_getCallsStatus"),params:S.array(S.string())}),zKe=S.object({method:S.literal("wallet_getCapabilities"),params:S.array(S.string().or(S.number()).optional()).optional()}),HKe=S.object({method:S.literal("wallet_grantPermissions"),params:S.array(S.any())}),GKe=S.object({method:S.literal("wallet_revokePermissions"),params:S.any()}),qKe=S.object({method:S.literal("wallet_getAssets"),params:S.any()}),Aq=S.object({token:S.string()}),lt=S.object({id:S.string().optional()}),O1={appEvent:lt.extend({type:ct("APP_SWITCH_NETWORK"),payload:xVe}).or(lt.extend({type:ct("APP_CONNECT_EMAIL"),payload:TVe})).or(lt.extend({type:ct("APP_CONNECT_DEVICE")})).or(lt.extend({type:ct("APP_CONNECT_OTP"),payload:RVe})).or(lt.extend({type:ct("APP_CONNECT_SOCIAL"),payload:kVe})).or(lt.extend({type:ct("APP_GET_FARCASTER_URI")})).or(lt.extend({type:ct("APP_CONNECT_FARCASTER")})).or(lt.extend({type:ct("APP_GET_USER"),payload:S.optional(PVe)})).or(lt.extend({type:ct("APP_GET_SOCIAL_REDIRECT_URI"),payload:OVe})).or(lt.extend({type:ct("APP_SIGN_OUT")})).or(lt.extend({type:ct("APP_IS_CONNECTED"),payload:S.optional(Aq)})).or(lt.extend({type:ct("APP_GET_CHAIN_ID")})).or(lt.extend({type:ct("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(lt.extend({type:ct("APP_INIT_SMART_ACCOUNT")})).or(lt.extend({type:ct("APP_SET_PREFERRED_ACCOUNT"),payload:$Ve})).or(lt.extend({type:ct("APP_RPC_REQUEST"),payload:_q.or(qKe).or(tKe).or(nKe).or(rKe).or(sKe).or(iKe).or(oKe).or(aKe).or(cKe).or(lKe).or(uKe).or(dKe).or(hKe).or(fKe).or(pKe).or(gKe).or(mKe).or(yKe).or(wKe).or(bKe).or(vKe).or(EKe).or(CKe).or(_Ke).or(AKe).or(SKe).or(IKe).or(NKe).or(xKe).or(TKe).or(RKe).or(kKe).or(PKe).or(OKe).or(DKe).or(_q).or(MKe).or(BKe).or(LKe).or(UKe).or($Ke).or(FKe).or(WKe).or(jKe).or(zKe).or(HKe).or(GKe).and(S.object({chainId:S.string().or(S.number()).optional(),chainNamespace:S.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:S.string().optional()}))})).or(lt.extend({type:ct("APP_UPDATE_EMAIL"),payload:DVe})).or(lt.extend({type:ct("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:MVe})).or(lt.extend({type:ct("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:BVe})).or(lt.extend({type:ct("APP_SYNC_THEME"),payload:LVe})).or(lt.extend({type:ct("APP_SYNC_DAPP_DATA"),payload:UVe})).or(lt.extend({type:ct("APP_RELOAD")})).or(lt.extend({type:ct("APP_RPC_ABORT")})),frameEvent:lt.extend({type:ct("FRAME_SWITCH_NETWORK_ERROR"),payload:Fs}).or(lt.extend({type:ct("FRAME_SWITCH_NETWORK_SUCCESS"),payload:YVe})).or(lt.extend({type:ct("FRAME_CONNECT_EMAIL_SUCCESS"),payload:FVe})).or(lt.extend({type:ct("FRAME_CONNECT_EMAIL_ERROR"),payload:Fs})).or(lt.extend({type:ct("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:jVe})).or(lt.extend({type:ct("FRAME_GET_FARCASTER_URI_ERROR"),payload:Fs})).or(lt.extend({type:ct("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:WVe})).or(lt.extend({type:ct("FRAME_CONNECT_FARCASTER_ERROR"),payload:Fs})).or(lt.extend({type:ct("FRAME_CONNECT_OTP_ERROR"),payload:Fs})).or(lt.extend({type:ct("FRAME_CONNECT_OTP_SUCCESS")})).or(lt.extend({type:ct("FRAME_CONNECT_DEVICE_ERROR"),payload:Fs})).or(lt.extend({type:ct("FRAME_CONNECT_DEVICE_SUCCESS")})).or(lt.extend({type:ct("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:zVe})).or(lt.extend({type:ct("FRAME_CONNECT_SOCIAL_ERROR"),payload:Fs})).or(lt.extend({type:ct("FRAME_GET_USER_ERROR"),payload:Fs})).or(lt.extend({type:ct("FRAME_GET_USER_SUCCESS"),payload:GVe})).or(lt.extend({type:ct("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Fs})).or(lt.extend({type:ct("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:qVe})).or(lt.extend({type:ct("FRAME_SIGN_OUT_ERROR"),payload:Fs})).or(lt.extend({type:ct("FRAME_SIGN_OUT_SUCCESS")})).or(lt.extend({type:ct("FRAME_IS_CONNECTED_ERROR"),payload:Fs})).or(lt.extend({type:ct("FRAME_IS_CONNECTED_SUCCESS"),payload:VVe})).or(lt.extend({type:ct("FRAME_GET_CHAIN_ID_ERROR"),payload:Fs})).or(lt.extend({type:ct("FRAME_GET_CHAIN_ID_SUCCESS"),payload:KVe})).or(lt.extend({type:ct("FRAME_RPC_REQUEST_ERROR"),payload:Fs})).or(lt.extend({type:ct("FRAME_RPC_REQUEST_SUCCESS"),payload:eKe})).or(lt.extend({type:ct("FRAME_SESSION_UPDATE"),payload:Aq})).or(lt.extend({type:ct("FRAME_UPDATE_EMAIL_ERROR"),payload:Fs})).or(lt.extend({type:ct("FRAME_UPDATE_EMAIL_SUCCESS"),payload:HVe})).or(lt.extend({type:ct("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Fs})).or(lt.extend({type:ct("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(lt.extend({type:ct("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Fs})).or(lt.extend({type:ct("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:QVe})).or(lt.extend({type:ct("FRAME_SYNC_THEME_ERROR"),payload:Fs})).or(lt.extend({type:ct("FRAME_SYNC_THEME_SUCCESS")})).or(lt.extend({type:ct("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Fs})).or(lt.extend({type:ct("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(lt.extend({type:ct("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:JVe})).or(lt.extend({type:ct("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Fs})).or(lt.extend({type:ct("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Fs})).or(lt.extend({type:ct("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:XVe})).or(lt.extend({type:ct("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Fs})).or(lt.extend({type:ct("FRAME_READY"),payload:ZVe})).or(lt.extend({type:ct("FRAME_RELOAD_ERROR"),payload:Fs})).or(lt.extend({type:ct("FRAME_RELOAD_SUCCESS")}))};function lM(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function VKe({projectId:t,chainId:e,version:n,enableLogger:r,rpcUrl:s=Ne.BLOCKCHAIN_API_RPC_URL}){const i=new URL(Jqe);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",n),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class KKe{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=Ne.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,a,c)=>{function l({data:u}){if(!lM(vt.FRAME_EVENT_KEY,u))return;const d=O1.frameEvent.parse(u);d.id===o&&(a(d),window.removeEventListener("message",l))}Dd.isClient&&(window.addEventListener("message",l),c.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:o=>{Dd.isClient&&window.addEventListener("message",({data:a})=>{if(!lM(vt.FRAME_EVENT_KEY,a))return;const c=O1.frameEvent.parse(a);o(c)})},onAppEvent:o=>{Dd.isClient&&window.addEventListener("message",({data:a})=>{if(!lM(vt.APP_EVENT_KEY,a))return;const c=O1.appEvent.parse(a);o(c)})},postAppEvent:o=>{var a;if(Dd.isClient){if(!((a=this.iframe)!=null&&a.contentWindow))throw new Error("W3mFrame: iframe is not set");O1.appEvent.parse(o),this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if(Dd.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");O1.frameEvent.parse(o),parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),this.rpcUrl=i,n&&(this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),Dd.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=VKe({projectId:e,chainId:r,version:Xqe,enableLogger:s,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{var a;(a=this.frameLoadPromiseResolver)==null||a.reject("Unable to load email login dependency")},this.events.onFrameEvent(a=>{var c;a.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(c=this.frameLoadPromiseResolver)==null||c.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class YKe{constructor(e){var i;const n=mw({level:Zqe}),{logger:r,chunkLoggerController:s}=vP({opts:n});this.logger=bo(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class QKe{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new YKe(e)),this.abortController=i,this.getActiveCaipNetwork=o;const a=this.getRpcUrl(n);this.w3mFrame=new KKe({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:a}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===vt.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Zi.get(vt.EMAIL_LOGIN_USED_KEY)}getEmail(){return Zi.get(vt.EMAIL)}getUsername(){return Zi.get(vt.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:vt.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Dd.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:vt.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:vt.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:vt.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:vt.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:vt.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:vt.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:vt.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:vt.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:vt.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:vt.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:vt.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:vt.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:vt.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:vt.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:vt.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:vt.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:vt.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:vt.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:vt.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:vt.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(mo.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=l,n.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:vt.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,u,n),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===vt.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===vt.FRAME_IS_CONNECTED_ERROR&&e(),n.type===vt.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===vt.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===vt.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===vt.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===vt.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:mo.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:n,method:r})=>{mo.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:vt.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[vt.APP_SYNC_DAPP_DATA,vt.APP_SYNC_THEME,vt.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[vt.APP_CONNECT_EMAIL,vt.APP_CONNECT_DEVICE,vt.APP_CONNECT_OTP,vt.APP_CONNECT_SOCIAL,vt.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const m=e;this.openRpcRequests=[...this.openRpcRequests,{...m.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(m,y){var w,C,N;m.id===u&&((C=y==null?void 0:(w=y.logger).info)==null||C.call(w,{framEvent:m,id:u},"Received frame response"),m.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in m&&c(m.payload),c(void 0)):m.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in m&&l(new Error(((N=m.payload)==null?void 0:N.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,m=>h(m,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Zi.set(vt.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Zi.set(vt.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Zi.set(vt.EMAIL,e),Zi.set(vt.EMAIL_LOGIN_USED_KEY,"true"),Zi.delete(vt.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Zi.delete(vt.EMAIL_LOGIN_USED_KEY),Zi.delete(vt.EMAIL),Zi.delete(vt.LAST_USED_CHAIN_KEY),Zi.delete(vt.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Zi.set(vt.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Zi.get(vt.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Zi.set(vt.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var s,i;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(s=Cg.parseCaipNetworkId(e))==null?void 0:s.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getActiveCaipNetwork(n);return(i=r==null?void 0:r.rpcUrls.default.http)==null?void 0:i[0]}}class pv{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){return pv.instance||(pv.instance=new QKe({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o})),pv.instance}}const JKe={DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]},Sq={filterOutDuplicatesByRDNS(t){const e=pn.state.enableEIP6963?Ot.state.connectors:[],n=_t.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&jt.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=Ot.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=_t.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Ot.state,{featuredWalletIds:n}=pn.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=pn.state.features)==null?void 0:c.connectMethodsOrder),r=e||Ot.state.connectors;if(n)return n;const{injected:s,announced:i}=RT.getConnectorsByType(r,en.state.recommended,en.state.featured),o=s.filter(RT.showConnector),a=i.filter(RT.showConnector);return o.length||a.length?["wallet","email","social"]:JKe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&en.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&en.state.excludedWallets.some(r=>Ya.isLowerCaseMatch(r.name,t.name));return e||n}},RT={getConnectorsByType(t,e,n){const{customWallets:r}=pn.state,s=_t.getRecentWallets(),i=Sq.filterOutDuplicateWallets(e),o=Sq.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&en.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&en.state.excludedWallets.some(i=>Ya.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!jt.isMobile()||jt.isMobile()&&!e&&!kt.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(ie.state.chains.values()).some(n=>Ot.getConnectorId(n.namespace)===Ne.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=pn.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const h=[{type:"walletConnect",isEnabled:pn.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(m=>m.isEnabled),f=new Set(h.map(m=>m.type)),p=c.filter(m=>f.has(m)).map(m=>({type:m,isEnabled:!0})),g=h.filter(({type:m})=>!p.some(({type:w})=>w===m));return Array.from(new Set([...p,...g].map(({type:m})=>m)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!jt.isMobile())return{accounts:[],chainId:void 0};if(t.id===Ne.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};Bl`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`;Bl`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`;Bl`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;const kT={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([kT.getAddresses(t),kT.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:kT.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[Oc.NetworkImageIds[e.id]]}]})}},cb={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function sN(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const Iq=sN({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),Nq=sN({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});sN({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});sN({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});sN({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const ZKe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},p0={getMethodsByChainNamespace(t){return ZKe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case Iq.caipNetworkId:u.chains.push(Iq.deprecatedCaipNetworkId);break;case Nq.caipNetworkId:u.chains.push(Nq.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await TT.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=p0.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(p0.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(d=>jt.isCaipAddress(d)).map(d=>Cg.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(u)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>Cg.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};let XKe=class{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case Ne.CHAIN.EVM:await this.syncEVMConnections(e);break;case Ne.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case Ne.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===Ne.CONNECTOR_ID.WALLET_CONNECT){const c=p0.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>{var d,h;return u.chainNamespace===this.namespace&&u.id.toString()===((h=(d=c[0])==null?void 0:d.chainId)==null?void 0:h.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await RT.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==Ne.CONNECTOR_ID.AUTH&&a.id!==Ne.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===Ne.CONNECTOR_ID.WALLET_CONNECT){const c=p0.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var h,f,p,g,m,y;if(a.id===Ne.CONNECTOR_ID.WALLET_CONNECT){const w=p0.getWalletConnectAccounts(r,this.namespace);w.length>0&&i({connectorId:a.id,accounts:w.map(C=>({address:C.address})),caipNetwork:n});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(w=>jt.createAccount(Ne.CHAIN.BITCOIN,w.address,w.purpose||"payment",w.publicKey,w.path));if(u&&u.length>1&&(u=[{namespace:Ne.CHAIN.BITCOIN,publicKey:((h=u[cb.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.publicKey)??"",path:((f=u[cb.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.path)??"",address:((p=u[cb.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:Ne.CHAIN.BITCOIN,publicKey:((g=u[cb.ACCOUNT_INDEXES.ORDINAL])==null?void 0:g.publicKey)??"",path:((m=u[cb.ACCOUNT_INDEXES.ORDINAL])==null?void 0:m.path)??"",address:((y=u[cb.ACCOUNT_INDEXES.ORDINAL])==null?void 0:y.address)??"",type:"ordinal"}]),!(a.chains.find(w=>w.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(w=>({address:w.address,type:w.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>Ya.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>Ya.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>Ya.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>Ya.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>Ya.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}},Toe=class{constructor({provider:e,namespace:n}){this.id=Ne.CONNECTOR_ID.WALLET_CONNECT,this.name=Oc.ConnectorNamesMap[Ne.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Oc.ConnectorImageIds[Ne.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=ie.getCaipNetworks.bind(ie),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=pn.state.universalProviderConfigOverride,s=p0.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Op.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:eYe})}};const eYe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],tYe=[Ne.CONNECTOR_ID.AUTH,Ne.CONNECTOR_ID.WALLET_CONNECT];let nYe=class{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>ie.getCaipNetworks(n),this.getConnectorId=n=>Ot.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new XKe({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:Ne.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:Ne.CONNECTOR_ID.AUTH,type:"AUTH",name:Ne.CONNECTOR_NAMES.AUTH,provider:e,imageId:Oc.ConnectorImageIds[Ne.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!Ya.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){br.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=oh(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof Toe);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=jt.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=jt.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=jt.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&Ya.isLowerCaseMatch(this.getConnectorId(Ne.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=jt.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),Ya.isLowerCaseMatch(this.getConnectorId(Ne.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?kT.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),Ya.isLowerCaseMatch(this.getConnectorId(Ne.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(tYe.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}};function rYe(t){let e=[],n,r;function s(a){return wk.parseEvmChainId(a)||1}function i(){var a;return n||(n=pv.getInstance({projectId:t.options.projectId,chainId:(a=ie.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?Zm.open(pp.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?Zm.open(pp.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&Zm.open(pp.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:pp.EmbeddedWalletAbortController,getActiveCaipNetwork:c=>ie.getActiveCaipNetwork(c)})),n}async function o(a={}){var g;const c=i();let l=a.chainId;if(a.isReconnecting){const m=wk.parseEvmChainId(c.getLastUsedChainId()||""),y=(g=t.chains)==null?void 0:g[0].id;if(l=m||y,!l)throw new Error("ChainId not found in provider")}const u=oh("eip155"),{address:d,chainId:h,accounts:f}=await Op.authConnectorAuthenticate({authConnector:c,chainId:l,preferredAccountType:u,socialUri:a.socialUri,chainNamespace:Ne.CHAIN.EVM});e=(f==null?void 0:f.map(m=>m.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:Ne.CONNECTOR_ID.AUTH,name:Ne.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:Ne.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=pv.getInstance({projectId:t.options.projectId,chainId:(c=ie.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:pp.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?Zm.open(pp.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?Zm.open(pp.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&Zm.open(pp.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:l=>ie.getActiveCaipNetwork(l)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=ie.state.activeChain===Ne.CHAIN.EVM;if(Ne.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>Ot.getConnectorId(h)===Ne.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l;try{const u=a.chains.find(p=>p.id===c);if(!u)throw new eh(new Error("chain not found on connector."));const d=await this.getProvider(),h=oh("eip155"),f=await d.connect({chainId:c,preferredAccountType:h});return e=((l=f==null?void 0:f.accounts)==null?void 0:l.map(p=>p.address))||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),u}catch(u){throw u instanceof Error?new eh(u):u}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(df)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}j4.type="walletConnect";function j4(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:j4.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=ie.getCaipNetworks(),m=await this.getProvider();if(!m)throw new Rp;a||(a=this.onDisplayUri,m.on("display_uri",a));const y=await this.isChainsStale();m.session&&y&&await m.disconnect();const w=pn.state.universalProviderConfigOverride;if(!m.session||y){const M=p0.createNamespaces(g,w);await m.connect({optionalNamespaces:M,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(W=>Number(W.id)))}const C=await this.getAccounts(),N=await this.getChainId(),I=(p=(f=(h=m.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,k=I==null?void 0:I.some(M=>Number(M.split(":")[1])===N);let P=1;k?P=N:I!=null&&I[0]&&(P=Number(I[0].split(":")[1])),a&&(m.removeListener("display_uri",a),a=void 0),o&&(m.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),m.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),m.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),m.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),m.on("session_delete",c));const U=w==null?void 0:w.defaultChain;return m.setDefaultChain(U??`eip155:${P}`),{accounts:C,chainId:P}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new mi(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var m,y,w;const d=await this.getProvider();if(!((m=d==null?void 0:d.session)!=null&&m.namespaces))return[];const h=(w=(y=d==null?void 0:d.session)==null?void 0:y.namespaces[Ne.CHAIN.EVM])==null?void 0:w.accounts,f=(h==null?void 0:h.map(C=>C.split(":")[2]))??[],p=new Set;return f.filter(C=>{const N=C==null?void 0:C.toLowerCase();return p.has(N)?!1:(p.add(N),!0)})},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=_t.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const m=_t.getStoredActiveCaipNetworkId(),y=h?e.getCaipNetworks(h):[],w=y==null?void 0:y.find(C=>C.id===m);w&&w.chainNamespace===Ne.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(w.id)}))}return r},async getChainId(){var g,m,y,w;const d=(g=e.getCaipNetwork(Ne.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(w=(y=(m=(await this.getProvider()).session)==null?void 0:m.namespaces[Ne.CHAIN.EVM])==null?void 0:y.chains)==null?void 0:w[0],p=ie.getCaipNetworks().find(C=>C.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,m,y,w;const f=await this.getProvider();if(!f)throw new Rp;const p=ie.getCaipNetworks().find(C=>C.id===h);if(!p)throw new eh(new qA);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:St(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const C=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...C,h]),{...p,id:p.id}}catch(C){const N=C;if(/(?:user rejected)/iu.test(N.message))throw new mi(N);try{let I;d!=null&&d.blockExplorerUrls?I=d.blockExplorerUrls:I=(g=p.blockExplorers)!=null&&g.default.url?[(m=p.blockExplorers)==null?void 0:m.default.url]:[];const k=((w=(y=p.rpcUrls)==null?void 0:y.chainDefault)==null?void 0:w.http)||[],P={blockExplorerUrls:I,chainId:St(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:k};await f.request({method:"wallet_addEthereumChain",params:[P]});const U=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...U,h]),{...p,id:p.id}}catch(I){throw new mi(I)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>df(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(ie.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[Ne.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(m=>Number.parseInt(m.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const D1=ms({pendingTransactions:0}),xq={state:D1,subscribeKey(t,e){return va(D1,t,e)},increase(t){D1[t]+=1},decrease(t){D1[t]-=1},reset(t){D1[t]=0}};function sYe(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function iYe(t){if(jt.isSafeApp()){const{safe:e}=await no(async()=>{const{safe:n}=await import("./index-CgLQkzHx.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function oYe(t){try{const{coinbaseWallet:e}=await no(async()=>{const{coinbaseWallet:n}=await import("./index-CgLQkzHx.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const aYe={enable:!1,pollingInterval:3e4};class cYe extends nYe{constructor(e){const n=i_.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=Ne.CHAIN.EVM,this.adapterType=Ne.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...aYe,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===Ne.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>jt.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=cv(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>jt.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=cv(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===Ne.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=i_.getCaipNetworkId(s);i?n[s.id]=i_.extendWagmiTransports(s,e.projectId,i):n[s.id]=i_.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=i_e({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=F1e(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),xq.increase("pendingTransactions")}});const e=xq.subscribeKey("pendingTransactions",n=>{var r;n>=Ne.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){wte(this.wagmiConfig,{onChange:(e,n)=>{var r;if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const s=e.address!==(n==null?void 0:n.address),i=e.connector.id!==((r=n.connector)==null?void 0:r.id),o=n.status!=="connected";(s||i||o)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}}),bte(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===Ne.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:i})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:_t.getConnectedSocialProvider(),username:_t.getConnectedSocialUsername()}:void 0}}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await oYe(this.wagmiConfig.connectors);s&&n.push(s)}const r=await iYe(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(j4(e,n)),e.enableEIP6963!==!1&&r.push(Y2({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(rYe({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:e,chainId:n,connector:{id:r.id,name:Oc.ConnectorNamesMap[r.id]??r.name,imageId:Oc.ConnectorImageIds[r.id],type:Oc.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===Ne.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await L1e(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=cv(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await M1e(this.wagmiConfig,s);const i=await B1e(this.wagmiConfig,s);return await Ete(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(wk.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await Cte(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await x1e(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return uCe(e.value,e.decimals)}formatUnits(e){return Am(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(e.type===Ne.CONNECTOR_ID.INJECTED&&n.enableEIP6963===!1||e.id===Ne.CONNECTOR_ID.AUTH||e.id===Ne.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:Oc.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:Oc.ConnectorNamesMap[e.id]??e.name,imageId:Oc.ConnectorImageIds[e.id],type:Oc.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===Ne.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){vte(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=gu(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(jt.isSafeApp()&&n===Ne.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await uT(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await uT(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await UL(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var h,f,p,g,m;const{id:n,address:r,provider:s,type:i,info:o,chainId:a,socialUri:c}=e,l=this.getWagmiConnector(n);if(!l)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&o&&l.id===Ne.CONNECTOR_ID.EIP6963&&((h=l.setEip6963Wallet)==null||h.call(l,{provider:s,info:o}));const u=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(l.uid);if(u){await((g=this.wagmiConfig.storage)==null?void 0:g.setItem("recentConnectorId",l.id));const y=[...u.accounts].sort((w,C)=>Ya.isLowerCaseMatch(w,r)?-1:Ya.isLowerCaseMatch(C,r)?1:0);return(m=this.wagmiConfig)==null||m.setState(w=>({...w,connections:new Map(w.connections).set(l.uid,{accounts:y,chainId:u.chainId,connector:u.connector}),current:l.uid,status:"connected"})),{address:y[0],chainId:u.chainId,provider:s,type:i,id:n}}const d=await uT(this.wagmiConfig,{connector:l,chainId:a?Number(a):void 0,socialUri:c});return{address:d.accounts[0],chainId:d.chainId,provider:s,type:i,id:n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:n})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await LL(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=_t.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await k1e(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});_t.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=gu(this.wagmiConfig).find(i=>Ya.isLowerCaseMatch(i.connector.id,e.id));return await ML(this.wagmiConfig,{connector:n}),pn.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:i})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=gu(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await ML(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:s})),connectorId:r.connector.id}))}}async switchNetwork(e){var s,i,o,a,c,l,u,d,h,f;const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(p=>p.id.toString()===n.id.toString());await UL(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:(r==null?void 0:r.name)??n.name,nativeCurrency:(r==null?void 0:r.nativeCurrency)??n.nativeCurrency,rpcUrls:[((o=(i=(s=n.rpcUrls)==null?void 0:s.chainDefault)==null?void 0:i.http)==null?void 0:o[0])??((l=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0])??""],blockExplorerUrls:[((d=(u=r==null?void 0:r.blockExplorers)==null?void 0:u.default)==null?void 0:d.url)??((f=(h=n.blockExplorers)==null?void 0:h.default)==null?void 0:f.url)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=gu(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=sYe(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=gu(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=gu(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=gu(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:Ne.CONNECTOR_ID.AUTH,type:"AUTH",name:Ne.CONNECTOR_NAMES.AUTH,provider:e,imageId:Oc.ConnectorImageIds[Ne.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const n=gu(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(ie.state.activeChain==="eip155")return;LL(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new Toe({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}}const lYe=Symbol(),Tq=Object.getPrototypeOf,O5=new WeakMap,uYe=t=>t&&(O5.has(t)?O5.get(t):Tq(t)===Object.prototype||Tq(t)===Array.prototype),dYe=t=>uYe(t)&&t[lYe]||null,Rq=(t,e=!0)=>{O5.set(t,e)},vk={},W4=t=>typeof t=="object"&&t!==null,hYe=t=>W4(t)&&!iN.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),Roe=(t,e)=>{const n=D5.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return Rq(r,!0),D5.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(iN.has(i))Rq(i,!1);else if(fm.has(i)){const[c,l]=fm.get(i);a.value=Roe(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},fYe=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(kq(l,o)||xS.has(o)&&kq(l,xS.get(o))))return!0;n(i),W4(o)&&(o=dYe(o)||o);const u=!fm.has(o)&&gYe(o)?ys(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),fm=new WeakMap,iN=new WeakSet,D5=new WeakMap,o_=[1,1],xS=new WeakMap;let kq=Object.is,pYe=(t,e)=>new Proxy(t,e),gYe=hYe,mYe=Roe,yYe=fYe;function ys(t={}){if(!W4(t))throw new Error("object required");const e=xS.get(t);if(e)return e;let n=o_[0];const r=new Set,s=(m,y=++o_[0])=>{n!==y&&(n=y,r.forEach(w=>w(m,y)))};let i=o_[1];const o=(m=++o_[1])=>(i!==m&&!r.size&&(i=m,c.forEach(([y])=>{const w=y[1](m);w>n&&(n=w)})),n),a=m=>(y,w)=>{const C=[...y];C[1]=[m,...C[1]],s(C,w)},c=new Map,l=(m,y)=>{const w=!iN.has(y)&&fm.get(y);if(w){if((vk?"production":void 0)!=="production"&&c.has(m))throw new Error("prop listener already exists");if(r.size){const C=w[2](a(m));c.set(m,[w,C])}else c.set(m,[w])}},u=m=>{var y;const w=c.get(m);w&&(c.delete(m),(y=w[1])==null||y.call(w))},d=m=>(r.add(m),r.size===1&&c.forEach(([w,C],N)=>{if((vk?"production":void 0)!=="production"&&C)throw new Error("remove already exists");const I=w[2](a(N));c.set(N,[w,I])}),()=>{r.delete(m),r.size===0&&c.forEach(([w,C],N)=>{C&&(C(),c.set(N,[w]))})});let h=!0;const f=yYe(()=>h,l,u,s),p=pYe(t,f);xS.set(t,p);const g=[t,o,d];return fm.set(p,g),Reflect.ownKeys(t).forEach(m=>{const y=Object.getOwnPropertyDescriptor(t,m);"value"in y&&y.writable&&(p[m]=t[m])}),h=!1,p}function ma(t,e,n){const r=fm.get(t);(vk?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function TS(t){const e=fm.get(t);(vk?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return mYe(n,r())}function Y0(t){return iN.add(t),t}function wYe(){return{proxyStateMap:fm,refSet:iN,snapCache:D5,versionHolder:o_,proxyCache:xS}}function Ea(t,e,n,r){let s=t[e];return ma(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:bYe,snapCache:vYe}=wYe(),kx=t=>bYe.has(t);function EYe(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=vYe.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return kx(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!kx(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!kx(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!kx(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=ys(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}const M1=ys({connection:null}),lb={state:M1,subscribeKey(t,e){return Ea(M1,t,e)},subscribe(t){return ma(M1,()=>t(M1))},setConnection(t){M1.connection=Y0(t)}};/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fd=BigInt(0),Ko=BigInt(1),uM=BigInt(2),CYe=BigInt(8),_Ye={zip215:!0};function AYe(t,e,n,r){const s=t.sqr(n),i=t.sqr(r),o=t.add(t.mul(e.a,s),i),a=t.add(t.ONE,t.mul(e.d,t.mul(s,i)));return t.eql(o,a)}function SYe(t,e={}){const{Fp:n,Fn:r}=cte("edwards",t,e),{h:s,n:i}=t;TI(e,{},{uvRatio:"function"});const o=uM<<BigInt(r.BYTES*8)-Ko,a=g=>n.create(g),c=e.uvRatio||((g,m)=>{try{return{isValid:!0,value:n.sqrt(n.div(g,m))}}catch{return{isValid:!1,value:fd}}});if(!AYe(n,t,t.Gx,t.Gy))throw new Error("bad curve params: generator point");function l(g,m,y=!1){const w=y?Ko:fd;return $b("coordinate "+g,m,w,o),m}function u(g){if(!(g instanceof f))throw new Error("ExtendedPoint expected")}const d=$R((g,m)=>{const{ex:y,ey:w,ez:C}=g,N=g.is0();m==null&&(m=N?CYe:n.inv(C));const I=a(y*m),k=a(w*m),P=a(C*m);if(N)return{x:fd,y:Ko};if(P!==Ko)throw new Error("invZ was invalid");return{x:I,y:k}}),h=$R(g=>{const{a:m,d:y}=t;if(g.is0())throw new Error("bad point: ZERO");const{ex:w,ey:C,ez:N,et:I}=g,k=a(w*w),P=a(C*C),U=a(N*N),M=a(U*U),W=a(k*m),j=a(U*a(W+P)),K=a(M+a(y*a(k*P)));if(j!==K)throw new Error("bad point: equation left != right (1)");const $=a(w*C),v=a(N*I);if($!==v)throw new Error("bad point: equation left != right (2)");return!0});class f{constructor(m,y,w,C){this.ex=l("x",m),this.ey=l("y",y),this.ez=l("z",w,!0),this.et=l("t",C),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(m){if(m instanceof f)throw new Error("extended point not allowed");const{x:y,y:w}=m||{};return l("x",y),l("y",w),new f(y,w,Ko,a(y*w))}static normalizeZ(m){return rte(f,"ez",m)}static msm(m,y){return ate(f,r,m,y)}_setWindowSize(m){this.precompute(m)}precompute(m=8,y=!0){return p.setWindowSize(this,m),y||this.multiply(uM),this}assertValidity(){h(this)}equals(m){u(m);const{ex:y,ey:w,ez:C}=this,{ex:N,ey:I,ez:k}=m,P=a(y*k),U=a(N*C),M=a(w*k),W=a(I*C);return P===U&&M===W}is0(){return this.equals(f.ZERO)}negate(){return new f(a(-this.ex),this.ey,this.ez,a(-this.et))}double(){const{a:m}=t,{ex:y,ey:w,ez:C}=this,N=a(y*y),I=a(w*w),k=a(uM*a(C*C)),P=a(m*N),U=y+w,M=a(a(U*U)-N-I),W=P+I,j=W-k,K=P-I,$=a(M*j),v=a(W*K),E=a(M*K),_=a(j*W);return new f($,v,_,E)}add(m){u(m);const{a:y,d:w}=t,{ex:C,ey:N,ez:I,et:k}=this,{ex:P,ey:U,ez:M,et:W}=m,j=a(C*P),K=a(N*U),$=a(k*w*W),v=a(I*M),E=a((C+N)*(P+U)-j-K),_=v-$,O=v+$,x=a(K-y*j),B=a(E*_),F=a(O*x),L=a(E*x),A=a(_*O);return new f(B,F,A,L)}subtract(m){return this.add(m.negate())}multiply(m){const y=m;$b("scalar",y,Ko,i);const{p:w,f:C}=p.wNAFCached(this,y,f.normalizeZ);return f.normalizeZ([w,C])[0]}multiplyUnsafe(m,y=f.ZERO){const w=m;return $b("scalar",w,fd,i),w===fd?f.ZERO:this.is0()||w===Ko?this:p.wNAFCachedUnsafe(this,w,f.normalizeZ,y)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}isTorsionFree(){return p.wNAFCachedUnsafe(this,i).is0()}toAffine(m){return d(this,m)}clearCofactor(){return s===Ko?this:this.multiplyUnsafe(s)}static fromBytes(m,y=!1){return zl(m),this.fromHex(m,y)}static fromHex(m,y=!1){const{d:w,a:C}=t,N=n.BYTES;m=Js("pointHex",m,N),P0("zip215",y);const I=m.slice(),k=m[N-1];I[N-1]=k&-129;const P=GA(I),U=y?o:n.ORDER;$b("pointHex.y",P,fd,U);const M=a(P*P),W=a(M-Ko),j=a(w*M-C);let{isValid:K,value:$}=c(W,j);if(!K)throw new Error("Point.fromHex: invalid y coordinate");const v=($&Ko)===Ko,E=(k&128)!==0;if(!y&&$===fd&&E)throw new Error("Point.fromHex: x=0 and x_0=1");return E!==v&&($=a(-$)),f.fromAffine({x:$,y:P})}static fromPrivateScalar(m){return f.BASE.multiply(m)}toBytes(){const{x:m,y}=this.toAffine(),w=F2(y,n.BYTES);return w[w.length-1]|=m&Ko?128:0,w}toRawBytes(){return this.toBytes()}toHex(){return DE(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}f.BASE=new f(t.Gx,t.Gy,Ko,a(t.Gx*t.Gy)),f.ZERO=new f(fd,Ko,Ko,fd),f.Fp=n,f.Fn=r;const p=ote(f,r.BYTES*8);return f}function IYe(t,e){TI(e,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n,hash:r}=e,{BASE:s,Fp:i,Fn:o}=t,a=o.ORDER,c=e.randomBytes||YZ,l=e.adjustScalarBytes||(I=>I),u=e.domain||((I,k,P)=>{if(P0("phflag",P),k.length||P)throw new Error("Contexts/pre-hash are not supported");return I});function d(I){return o.create(I)}function h(I){return d(GA(I))}function f(I){const k=i.BYTES;I=Js("private key",I,k);const P=Js("hashed private key",r(I),2*k),U=l(P.slice(0,k)),M=P.slice(k,2*k),W=h(U);return{head:U,prefix:M,scalar:W}}function p(I){const{head:k,prefix:P,scalar:U}=f(I),M=s.multiply(U),W=M.toBytes();return{head:k,prefix:P,scalar:U,point:M,pointBytes:W}}function g(I){return p(I).pointBytes}function m(I=Uint8Array.of(),...k){const P=uf(...k);return h(r(u(P,Js("context",I),!!n)))}function y(I,k,P={}){I=Js("message",I),n&&(I=n(I));const{prefix:U,scalar:M,pointBytes:W}=p(k),j=m(P.context,U,I),K=s.multiply(j).toBytes(),$=m(P.context,K,W,I),v=d(j+$*M);$b("signature.s",v,fd,a);const E=i.BYTES,_=uf(K,F2(v,E));return Js("result",_,E*2)}const w=_Ye;function C(I,k,P,U=w){const{context:M,zip215:W}=U,j=i.BYTES;I=Js("signature",I,2*j),k=Js("message",k),P=Js("publicKey",P,j),W!==void 0&&P0("zip215",W),n&&(k=n(k));const K=GA(I.slice(j,2*j));let $,v,E;try{$=t.fromHex(P,W),v=t.fromHex(I.slice(0,j),W),E=s.multiplyUnsafe(K)}catch{return!1}if(!W&&$.isSmallOrder())return!1;const _=m(M,v.toBytes(),$.toBytes(),k);return v.add($.multiplyUnsafe(_)).subtract(E).clearCofactor().is0()}return s.precompute(8),{getPublicKey:g,sign:y,verify:C,utils:{getExtendedPublicKey:p,randomPrivateKey:()=>c(i.BYTES),precompute(I=8,k=t.BASE){return k.precompute(I,!1)}},Point:t}}function NYe(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=RC(e.n,t.nBitLength,!0),s={Fp:n,Fn:r,uvRatio:t.uvRatio},i={hash:t.hash,randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:s,eddsaOpts:i}}function xYe(t,e){return Object.assign({},e,{ExtendedPoint:e.Point,CURVE:t})}function TYe(t){const{CURVE:e,curveOpts:n,eddsaOpts:r}=NYe(t),s=SYe(e,n),i=IYe(s,r);return xYe(t,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const RYe=BigInt(1),Pq=BigInt(2);BigInt(3);const kYe=BigInt(5),PYe=BigInt(8),KP={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:PYe,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function OYe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=KP.p,a=t*t%i*t%i,c=Ws(a,Pq,i)*a%i,l=Ws(c,RYe,i)*t%i,u=Ws(l,kYe,i)*l%i,d=Ws(u,e,i)*u%i,h=Ws(d,n,i)*d%i,f=Ws(h,r,i)*h%i,p=Ws(f,s,i)*f%i,g=Ws(p,s,i)*f%i,m=Ws(g,e,i)*u%i;return{pow_p_5_8:Ws(m,Pq,i)*t%i,b2:a}}function DYe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const Oq=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function MYe(t,e){const n=KP.p,r=Zs(e*e*e,n),s=Zs(r*r*e,n),i=OYe(t*s).pow_p_5_8;let o=Zs(t*r*i,n);const a=Zs(e*o*o,n),c=o,l=Zs(o*Oq,n),u=a===t,d=a===Zs(-t,n),h=a===Zs(-t*Oq,n);return u&&(o=c),(d||h)&&(o=l),LCe(o,n)&&(o=Zs(-o,n)),{isValid:u||d,value:o}}const BYe=RC(KP.p,void 0,!0),LYe={...KP,Fp:BYe,hash:Pwe,adjustScalarBytes:DYe,uvRatio:MYe},oN=TYe(LYe);var z4={exports:{}};const UYe={},$Ye=Object.freeze(Object.defineProperty({__proto__:null,default:UYe},Symbol.toStringTag,{value:"Module"})),FYe=aI($Ye);z4.exports;(function(t){(function(e,n){function r($,v){if(!$)throw new Error(v||"Assertion failed")}function s($,v){$.super_=v;var E=function(){};E.prototype=v.prototype,$.prototype=new E,$.prototype.constructor=$}function i($,v,E){if(i.isBN($))return $;this.negative=0,this.words=null,this.length=0,this.red=null,$!==null&&((v==="le"||v==="be")&&(E=v,v=10),this._init($||0,v||10,E||"be"))}typeof e=="object"?e.exports=i:n.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=FYe.Buffer}catch{}i.isBN=function(v){return v instanceof i?!0:v!==null&&typeof v=="object"&&v.constructor.wordSize===i.wordSize&&Array.isArray(v.words)},i.max=function(v,E){return v.cmp(E)>0?v:E},i.min=function(v,E){return v.cmp(E)<0?v:E},i.prototype._init=function(v,E,_){if(typeof v=="number")return this._initNumber(v,E,_);if(typeof v=="object")return this._initArray(v,E,_);E==="hex"&&(E=16),r(E===(E|0)&&E>=2&&E<=36),v=v.toString().replace(/\s+/g,"");var O=0;v[0]==="-"&&(O++,this.negative=1),O<v.length&&(E===16?this._parseHex(v,O,_):(this._parseBase(v,E,O),_==="le"&&this._initArray(this.toArray(),E,_)))},i.prototype._initNumber=function(v,E,_){v<0&&(this.negative=1,v=-v),v<67108864?(this.words=[v&67108863],this.length=1):v<4503599627370496?(this.words=[v&67108863,v/67108864&67108863],this.length=2):(r(v<9007199254740992),this.words=[v&67108863,v/67108864&67108863,1],this.length=3),_==="le"&&this._initArray(this.toArray(),E,_)},i.prototype._initArray=function(v,E,_){if(r(typeof v.length=="number"),v.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(v.length/3),this.words=new Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var x,B,F=0;if(_==="be")for(O=v.length-1,x=0;O>=0;O-=3)B=v[O]|v[O-1]<<8|v[O-2]<<16,this.words[x]|=B<<F&67108863,this.words[x+1]=B>>>26-F&67108863,F+=24,F>=26&&(F-=26,x++);else if(_==="le")for(O=0,x=0;O<v.length;O+=3)B=v[O]|v[O+1]<<8|v[O+2]<<16,this.words[x]|=B<<F&67108863,this.words[x+1]=B>>>26-F&67108863,F+=24,F>=26&&(F-=26,x++);return this._strip()};function a($,v){var E=$.charCodeAt(v);if(E>=48&&E<=57)return E-48;if(E>=65&&E<=70)return E-55;if(E>=97&&E<=102)return E-87;r(!1,"Invalid character in "+$)}function c($,v,E){var _=a($,E);return E-1>=v&&(_|=a($,E-1)<<4),_}i.prototype._parseHex=function(v,E,_){this.length=Math.ceil((v.length-E)/6),this.words=new Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var x=0,B=0,F;if(_==="be")for(O=v.length-1;O>=E;O-=2)F=c(v,E,O)<<x,this.words[B]|=F&67108863,x>=18?(x-=18,B+=1,this.words[B]|=F>>>26):x+=8;else{var L=v.length-E;for(O=L%2===0?E+1:E;O<v.length;O+=2)F=c(v,E,O)<<x,this.words[B]|=F&67108863,x>=18?(x-=18,B+=1,this.words[B]|=F>>>26):x+=8}this._strip()};function l($,v,E,_){for(var O=0,x=0,B=Math.min($.length,E),F=v;F<B;F++){var L=$.charCodeAt(F)-48;O*=_,L>=49?x=L-49+10:L>=17?x=L-17+10:x=L,r(L>=0&&x<_,"Invalid character"),O+=x}return O}i.prototype._parseBase=function(v,E,_){this.words=[0],this.length=1;for(var O=0,x=1;x<=67108863;x*=E)O++;O--,x=x/E|0;for(var B=v.length-_,F=B%O,L=Math.min(B,B-F)+_,A=0,H=_;H<L;H+=O)A=l(v,H,H+O,E),this.imuln(x),this.words[0]+A<67108864?this.words[0]+=A:this._iaddn(A);if(F!==0){var re=1;for(A=l(v,H,v.length,E),H=0;H<F;H++)re*=E;this.imuln(re),this.words[0]+A<67108864?this.words[0]+=A:this._iaddn(A)}this._strip()},i.prototype.copy=function(v){v.words=new Array(this.length);for(var E=0;E<this.length;E++)v.words[E]=this.words[E];v.length=this.length,v.negative=this.negative,v.red=this.red};function u($,v){$.words=v.words,$.length=v.length,$.negative=v.negative,$.red=v.red}if(i.prototype._move=function(v){u(v,this)},i.prototype.clone=function(){var v=new i(null);return this.copy(v),v},i.prototype._expand=function(v){for(;this.length<v;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch{i.prototype.inspect=d}else i.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(v,E){v=v||10,E=E|0||1;var _;if(v===16||v==="hex"){_="";for(var O=0,x=0,B=0;B<this.length;B++){var F=this.words[B],L=((F<<O|x)&16777215).toString(16);x=F>>>24-O&16777215,O+=2,O>=26&&(O-=26,B--),x!==0||B!==this.length-1?_=h[6-L.length]+L+_:_=L+_}for(x!==0&&(_=x.toString(16)+_);_.length%E!==0;)_="0"+_;return this.negative!==0&&(_="-"+_),_}if(v===(v|0)&&v>=2&&v<=36){var A=f[v],H=p[v];_="";var re=this.clone();for(re.negative=0;!re.isZero();){var se=re.modrn(H).toString(v);re=re.idivn(H),re.isZero()?_=se+_:_=h[A-se.length]+se+_}for(this.isZero()&&(_="0"+_);_.length%E!==0;)_="0"+_;return this.negative!==0&&(_="-"+_),_}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var v=this.words[0];return this.length===2?v+=this.words[1]*67108864:this.length===3&&this.words[2]===1?v+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-v:v},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(v,E){return this.toArrayLike(o,v,E)}),i.prototype.toArray=function(v,E){return this.toArrayLike(Array,v,E)};var g=function(v,E){return v.allocUnsafe?v.allocUnsafe(E):new v(E)};i.prototype.toArrayLike=function(v,E,_){this._strip();var O=this.byteLength(),x=_||Math.max(1,O);r(O<=x,"byte array longer than desired length"),r(x>0,"Requested array length <= 0");var B=g(v,x),F=E==="le"?"LE":"BE";return this["_toArrayLike"+F](B,O),B},i.prototype._toArrayLikeLE=function(v,E){for(var _=0,O=0,x=0,B=0;x<this.length;x++){var F=this.words[x]<<B|O;v[_++]=F&255,_<v.length&&(v[_++]=F>>8&255),_<v.length&&(v[_++]=F>>16&255),B===6?(_<v.length&&(v[_++]=F>>24&255),O=0,B=0):(O=F>>>24,B+=2)}if(_<v.length)for(v[_++]=O;_<v.length;)v[_++]=0},i.prototype._toArrayLikeBE=function(v,E){for(var _=v.length-1,O=0,x=0,B=0;x<this.length;x++){var F=this.words[x]<<B|O;v[_--]=F&255,_>=0&&(v[_--]=F>>8&255),_>=0&&(v[_--]=F>>16&255),B===6?(_>=0&&(v[_--]=F>>24&255),O=0,B=0):(O=F>>>24,B+=2)}if(_>=0)for(v[_--]=O;_>=0;)v[_--]=0},Math.clz32?i.prototype._countBits=function(v){return 32-Math.clz32(v)}:i.prototype._countBits=function(v){var E=v,_=0;return E>=4096&&(_+=13,E>>>=13),E>=64&&(_+=7,E>>>=7),E>=8&&(_+=4,E>>>=4),E>=2&&(_+=2,E>>>=2),_+E},i.prototype._zeroBits=function(v){if(v===0)return 26;var E=v,_=0;return E&8191||(_+=13,E>>>=13),E&127||(_+=7,E>>>=7),E&15||(_+=4,E>>>=4),E&3||(_+=2,E>>>=2),E&1||_++,_},i.prototype.bitLength=function(){var v=this.words[this.length-1],E=this._countBits(v);return(this.length-1)*26+E};function m($){for(var v=new Array($.bitLength()),E=0;E<v.length;E++){var _=E/26|0,O=E%26;v[E]=$.words[_]>>>O&1}return v}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var v=0,E=0;E<this.length;E++){var _=this._zeroBits(this.words[E]);if(v+=_,_!==26)break}return v},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(v){return this.negative!==0?this.abs().inotn(v).iaddn(1):this.clone()},i.prototype.fromTwos=function(v){return this.testn(v-1)?this.notn(v).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(v){for(;this.length<v.length;)this.words[this.length++]=0;for(var E=0;E<v.length;E++)this.words[E]=this.words[E]|v.words[E];return this._strip()},i.prototype.ior=function(v){return r((this.negative|v.negative)===0),this.iuor(v)},i.prototype.or=function(v){return this.length>v.length?this.clone().ior(v):v.clone().ior(this)},i.prototype.uor=function(v){return this.length>v.length?this.clone().iuor(v):v.clone().iuor(this)},i.prototype.iuand=function(v){var E;this.length>v.length?E=v:E=this;for(var _=0;_<E.length;_++)this.words[_]=this.words[_]&v.words[_];return this.length=E.length,this._strip()},i.prototype.iand=function(v){return r((this.negative|v.negative)===0),this.iuand(v)},i.prototype.and=function(v){return this.length>v.length?this.clone().iand(v):v.clone().iand(this)},i.prototype.uand=function(v){return this.length>v.length?this.clone().iuand(v):v.clone().iuand(this)},i.prototype.iuxor=function(v){var E,_;this.length>v.length?(E=this,_=v):(E=v,_=this);for(var O=0;O<_.length;O++)this.words[O]=E.words[O]^_.words[O];if(this!==E)for(;O<E.length;O++)this.words[O]=E.words[O];return this.length=E.length,this._strip()},i.prototype.ixor=function(v){return r((this.negative|v.negative)===0),this.iuxor(v)},i.prototype.xor=function(v){return this.length>v.length?this.clone().ixor(v):v.clone().ixor(this)},i.prototype.uxor=function(v){return this.length>v.length?this.clone().iuxor(v):v.clone().iuxor(this)},i.prototype.inotn=function(v){r(typeof v=="number"&&v>=0);var E=Math.ceil(v/26)|0,_=v%26;this._expand(E),_>0&&E--;for(var O=0;O<E;O++)this.words[O]=~this.words[O]&67108863;return _>0&&(this.words[O]=~this.words[O]&67108863>>26-_),this._strip()},i.prototype.notn=function(v){return this.clone().inotn(v)},i.prototype.setn=function(v,E){r(typeof v=="number"&&v>=0);var _=v/26|0,O=v%26;return this._expand(_+1),E?this.words[_]=this.words[_]|1<<O:this.words[_]=this.words[_]&~(1<<O),this._strip()},i.prototype.iadd=function(v){var E;if(this.negative!==0&&v.negative===0)return this.negative=0,E=this.isub(v),this.negative^=1,this._normSign();if(this.negative===0&&v.negative!==0)return v.negative=0,E=this.isub(v),v.negative=1,E._normSign();var _,O;this.length>v.length?(_=this,O=v):(_=v,O=this);for(var x=0,B=0;B<O.length;B++)E=(_.words[B]|0)+(O.words[B]|0)+x,this.words[B]=E&67108863,x=E>>>26;for(;x!==0&&B<_.length;B++)E=(_.words[B]|0)+x,this.words[B]=E&67108863,x=E>>>26;if(this.length=_.length,x!==0)this.words[this.length]=x,this.length++;else if(_!==this)for(;B<_.length;B++)this.words[B]=_.words[B];return this},i.prototype.add=function(v){var E;return v.negative!==0&&this.negative===0?(v.negative=0,E=this.sub(v),v.negative^=1,E):v.negative===0&&this.negative!==0?(this.negative=0,E=v.sub(this),this.negative=1,E):this.length>v.length?this.clone().iadd(v):v.clone().iadd(this)},i.prototype.isub=function(v){if(v.negative!==0){v.negative=0;var E=this.iadd(v);return v.negative=1,E._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(v),this.negative=1,this._normSign();var _=this.cmp(v);if(_===0)return this.negative=0,this.length=1,this.words[0]=0,this;var O,x;_>0?(O=this,x=v):(O=v,x=this);for(var B=0,F=0;F<x.length;F++)E=(O.words[F]|0)-(x.words[F]|0)+B,B=E>>26,this.words[F]=E&67108863;for(;B!==0&&F<O.length;F++)E=(O.words[F]|0)+B,B=E>>26,this.words[F]=E&67108863;if(B===0&&F<O.length&&O!==this)for(;F<O.length;F++)this.words[F]=O.words[F];return this.length=Math.max(this.length,F),O!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(v){return this.clone().isub(v)};function y($,v,E){E.negative=v.negative^$.negative;var _=$.length+v.length|0;E.length=_,_=_-1|0;var O=$.words[0]|0,x=v.words[0]|0,B=O*x,F=B&67108863,L=B/67108864|0;E.words[0]=F;for(var A=1;A<_;A++){for(var H=L>>>26,re=L&67108863,se=Math.min(A,v.length-1),ge=Math.max(0,A-$.length+1);ge<=se;ge++){var ae=A-ge|0;O=$.words[ae]|0,x=v.words[ge]|0,B=O*x+re,H+=B/67108864|0,re=B&67108863}E.words[A]=re|0,L=H|0}return L!==0?E.words[A]=L|0:E.length--,E._strip()}var w=function(v,E,_){var O=v.words,x=E.words,B=_.words,F=0,L,A,H,re=O[0]|0,se=re&8191,ge=re>>>13,ae=O[1]|0,fe=ae&8191,ye=ae>>>13,ve=O[2]|0,_e=ve&8191,Se=ve>>>13,Re=O[3]|0,xe=Re&8191,Fe=Re>>>13,Ut=O[4]|0,at=Ut&8191,wn=Ut>>>13,Qn=O[5]|0,Bt=Qn&8191,ze=Qn>>>13,Jn=O[6]|0,qt=Jn&8191,qe=Jn>>>13,un=O[7]|0,In=un&8191,z=un>>>13,T=O[8]|0,D=T&8191,Y=T>>>13,ee=O[9]|0,de=ee&8191,we=ee>>>13,It=x[0]|0,Vt=It&8191,et=It>>>13,bn=x[1]|0,tt=bn&8191,ws=bn>>>13,Go=x[2]|0,mr=Go&8191,Ns=Go>>>13,Iw=x[3]|0,xs=Iw&8191,Yr=Iw>>>13,Nw=x[4]|0,Wr=Nw&8191,Qr=Nw>>>13,Zu=x[5]|0,zr=Zu&8191,rr=Zu>>>13,Xl=x[6]|0,ls=Xl&8191,bs=Xl>>>13,Xu=x[7]|0,sr=Xu&8191,Wn=Xu>>>13,Nm=x[8]|0,Or=Nm&8191,vs=Nm>>>13,ed=x[9]|0,Es=ed&8191,ir=ed>>>13;_.negative=v.negative^E.negative,_.length=19,L=Math.imul(se,Vt),A=Math.imul(se,et),A=A+Math.imul(ge,Vt)|0,H=Math.imul(ge,et);var pc=(F+L|0)+((A&8191)<<13)|0;F=(H+(A>>>13)|0)+(pc>>>26)|0,pc&=67108863,L=Math.imul(fe,Vt),A=Math.imul(fe,et),A=A+Math.imul(ye,Vt)|0,H=Math.imul(ye,et),L=L+Math.imul(se,tt)|0,A=A+Math.imul(se,ws)|0,A=A+Math.imul(ge,tt)|0,H=H+Math.imul(ge,ws)|0;var ph=(F+L|0)+((A&8191)<<13)|0;F=(H+(A>>>13)|0)+(ph>>>26)|0,ph&=67108863,L=Math.imul(_e,Vt),A=Math.imul(_e,et),A=A+Math.imul(Se,Vt)|0,H=Math.imul(Se,et),L=L+Math.imul(fe,tt)|0,A=A+Math.imul(fe,ws)|0,A=A+Math.imul(ye,tt)|0,H=H+Math.imul(ye,ws)|0,L=L+Math.imul(se,mr)|0,A=A+Math.imul(se,Ns)|0,A=A+Math.imul(ge,mr)|0,H=H+Math.imul(ge,Ns)|0;var xm=(F+L|0)+((A&8191)<<13)|0;F=(H+(A>>>13)|0)+(xm>>>26)|0,xm&=67108863,L=Math.imul(xe,Vt),A=Math.imul(xe,et),A=A+Math.imul(Fe,Vt)|0,H=Math.imul(Fe,et),L=L+Math.imul(_e,tt)|0,A=A+Math.imul(_e,ws)|0,A=A+Math.imul(Se,tt)|0,H=H+Math.imul(Se,ws)|0,L=L+Math.imul(fe,mr)|0,A=A+Math.imul(fe,Ns)|0,A=A+Math.imul(ye,mr)|0,H=H+Math.imul(ye,Ns)|0,L=L+Math.imul(se,xs)|0,A=A+Math.imul(se,Yr)|0,A=A+Math.imul(ge,xs)|0,H=H+Math.imul(ge,Yr)|0;var eu=(F+L|0)+((A&8191)<<13)|0;F=(H+(A>>>13)|0)+(eu>>>26)|0,eu&=67108863,L=Math.imul(at,Vt),A=Math.imul(at,et),A=A+Math.imul(wn,Vt)|0,H=Math.imul(wn,et),L=L+Math.imul(xe,tt)|0,A=A+Math.imul(xe,ws)|0,A=A+Math.imul(Fe,tt)|0,H=H+Math.imul(Fe,ws)|0,L=L+Math.imul(_e,mr)|0,A=A+Math.imul(_e,Ns)|0,A=A+Math.imul(Se,mr)|0,H=H+Math.imul(Se,Ns)|0,L=L+Math.imul(fe,xs)|0,A=A+Math.imul(fe,Yr)|0,A=A+Math.imul(ye,xs)|0,H=H+Math.imul(ye,Yr)|0,L=L+Math.imul(se,Wr)|0,A=A+Math.imul(se,Qr)|0,A=A+Math.imul(ge,Wr)|0,H=H+Math.imul(ge,Qr)|0;var Gf=(F+L|0)+((A&8191)<<13)|0;F=(H+(A>>>13)|0)+(Gf>>>26)|0,Gf&=67108863,L=Math.imul(Bt,Vt),A=Math.imul(Bt,et),A=A+Math.imul(ze,Vt)|0,H=Math.imul(ze,et),L=L+Math.imul(at,tt)|0,A=A+Math.imul(at,ws)|0,A=A+Math.imul(wn,tt)|0,H=H+Math.imul(wn,ws)|0,L=L+Math.imul(xe,mr)|0,A=A+Math.imul(xe,Ns)|0,A=A+Math.imul(Fe,mr)|0,H=H+Math.imul(Fe,Ns)|0,L=L+Math.imul(_e,xs)|0,A=A+Math.imul(_e,Yr)|0,A=A+Math.imul(Se,xs)|0,H=H+Math.imul(Se,Yr)|0,L=L+Math.imul(fe,Wr)|0,A=A+Math.imul(fe,Qr)|0,A=A+Math.imul(ye,Wr)|0,H=H+Math.imul(ye,Qr)|0,L=L+Math.imul(se,zr)|0,A=A+Math.imul(se,rr)|0,A=A+Math.imul(ge,zr)|0,H=H+Math.imul(ge,rr)|0;var qf=(F+L|0)+((A&8191)<<13)|0;F=(H+(A>>>13)|0)+(qf>>>26)|0,qf&=67108863,L=Math.imul(qt,Vt),A=Math.imul(qt,et),A=A+Math.imul(qe,Vt)|0,H=Math.imul(qe,et),L=L+Math.imul(Bt,tt)|0,A=A+Math.imul(Bt,ws)|0,A=A+Math.imul(ze,tt)|0,H=H+Math.imul(ze,ws)|0,L=L+Math.imul(at,mr)|0,A=A+Math.imul(at,Ns)|0,A=A+Math.imul(wn,mr)|0,H=H+Math.imul(wn,Ns)|0,L=L+Math.imul(xe,xs)|0,A=A+Math.imul(xe,Yr)|0,A=A+Math.imul(Fe,xs)|0,H=H+Math.imul(Fe,Yr)|0,L=L+Math.imul(_e,Wr)|0,A=A+Math.imul(_e,Qr)|0,A=A+Math.imul(Se,Wr)|0,H=H+Math.imul(Se,Qr)|0,L=L+Math.imul(fe,zr)|0,A=A+Math.imul(fe,rr)|0,A=A+Math.imul(ye,zr)|0,H=H+Math.imul(ye,rr)|0,L=L+Math.imul(se,ls)|0,A=A+Math.imul(se,bs)|0,A=A+Math.imul(ge,ls)|0,H=H+Math.imul(ge,bs)|0;var tu=(F+L|0)+((A&8191)<<13)|0;F=(H+(A>>>13)|0)+(tu>>>26)|0,tu&=67108863,L=Math.imul(In,Vt),A=Math.imul(In,et),A=A+Math.imul(z,Vt)|0,H=Math.imul(z,et),L=L+Math.imul(qt,tt)|0,A=A+Math.imul(qt,ws)|0,A=A+Math.imul(qe,tt)|0,H=H+Math.imul(qe,ws)|0,L=L+Math.imul(Bt,mr)|0,A=A+Math.imul(Bt,Ns)|0,A=A+Math.imul(ze,mr)|0,H=H+Math.imul(ze,Ns)|0,L=L+Math.imul(at,xs)|0,A=A+Math.imul(at,Yr)|0,A=A+Math.imul(wn,xs)|0,H=H+Math.imul(wn,Yr)|0,L=L+Math.imul(xe,Wr)|0,A=A+Math.imul(xe,Qr)|0,A=A+Math.imul(Fe,Wr)|0,H=H+Math.imul(Fe,Qr)|0,L=L+Math.imul(_e,zr)|0,A=A+Math.imul(_e,rr)|0,A=A+Math.imul(Se,zr)|0,H=H+Math.imul(Se,rr)|0,L=L+Math.imul(fe,ls)|0,A=A+Math.imul(fe,bs)|0,A=A+Math.imul(ye,ls)|0,H=H+Math.imul(ye,bs)|0,L=L+Math.imul(se,sr)|0,A=A+Math.imul(se,Wn)|0,A=A+Math.imul(ge,sr)|0,H=H+Math.imul(ge,Wn)|0;var Tm=(F+L|0)+((A&8191)<<13)|0;F=(H+(A>>>13)|0)+(Tm>>>26)|0,Tm&=67108863,L=Math.imul(D,Vt),A=Math.imul(D,et),A=A+Math.imul(Y,Vt)|0,H=Math.imul(Y,et),L=L+Math.imul(In,tt)|0,A=A+Math.imul(In,ws)|0,A=A+Math.imul(z,tt)|0,H=H+Math.imul(z,ws)|0,L=L+Math.imul(qt,mr)|0,A=A+Math.imul(qt,Ns)|0,A=A+Math.imul(qe,mr)|0,H=H+Math.imul(qe,Ns)|0,L=L+Math.imul(Bt,xs)|0,A=A+Math.imul(Bt,Yr)|0,A=A+Math.imul(ze,xs)|0,H=H+Math.imul(ze,Yr)|0,L=L+Math.imul(at,Wr)|0,A=A+Math.imul(at,Qr)|0,A=A+Math.imul(wn,Wr)|0,H=H+Math.imul(wn,Qr)|0,L=L+Math.imul(xe,zr)|0,A=A+Math.imul(xe,rr)|0,A=A+Math.imul(Fe,zr)|0,H=H+Math.imul(Fe,rr)|0,L=L+Math.imul(_e,ls)|0,A=A+Math.imul(_e,bs)|0,A=A+Math.imul(Se,ls)|0,H=H+Math.imul(Se,bs)|0,L=L+Math.imul(fe,sr)|0,A=A+Math.imul(fe,Wn)|0,A=A+Math.imul(ye,sr)|0,H=H+Math.imul(ye,Wn)|0,L=L+Math.imul(se,Or)|0,A=A+Math.imul(se,vs)|0,A=A+Math.imul(ge,Or)|0,H=H+Math.imul(ge,vs)|0;var Vf=(F+L|0)+((A&8191)<<13)|0;F=(H+(A>>>13)|0)+(Vf>>>26)|0,Vf&=67108863,L=Math.imul(de,Vt),A=Math.imul(de,et),A=A+Math.imul(we,Vt)|0,H=Math.imul(we,et),L=L+Math.imul(D,tt)|0,A=A+Math.imul(D,ws)|0,A=A+Math.imul(Y,tt)|0,H=H+Math.imul(Y,ws)|0,L=L+Math.imul(In,mr)|0,A=A+Math.imul(In,Ns)|0,A=A+Math.imul(z,mr)|0,H=H+Math.imul(z,Ns)|0,L=L+Math.imul(qt,xs)|0,A=A+Math.imul(qt,Yr)|0,A=A+Math.imul(qe,xs)|0,H=H+Math.imul(qe,Yr)|0,L=L+Math.imul(Bt,Wr)|0,A=A+Math.imul(Bt,Qr)|0,A=A+Math.imul(ze,Wr)|0,H=H+Math.imul(ze,Qr)|0,L=L+Math.imul(at,zr)|0,A=A+Math.imul(at,rr)|0,A=A+Math.imul(wn,zr)|0,H=H+Math.imul(wn,rr)|0,L=L+Math.imul(xe,ls)|0,A=A+Math.imul(xe,bs)|0,A=A+Math.imul(Fe,ls)|0,H=H+Math.imul(Fe,bs)|0,L=L+Math.imul(_e,sr)|0,A=A+Math.imul(_e,Wn)|0,A=A+Math.imul(Se,sr)|0,H=H+Math.imul(Se,Wn)|0,L=L+Math.imul(fe,Or)|0,A=A+Math.imul(fe,vs)|0,A=A+Math.imul(ye,Or)|0,H=H+Math.imul(ye,vs)|0,L=L+Math.imul(se,Es)|0,A=A+Math.imul(se,ir)|0,A=A+Math.imul(ge,Es)|0,H=H+Math.imul(ge,ir)|0;var Ca=(F+L|0)+((A&8191)<<13)|0;F=(H+(A>>>13)|0)+(Ca>>>26)|0,Ca&=67108863,L=Math.imul(de,tt),A=Math.imul(de,ws),A=A+Math.imul(we,tt)|0,H=Math.imul(we,ws),L=L+Math.imul(D,mr)|0,A=A+Math.imul(D,Ns)|0,A=A+Math.imul(Y,mr)|0,H=H+Math.imul(Y,Ns)|0,L=L+Math.imul(In,xs)|0,A=A+Math.imul(In,Yr)|0,A=A+Math.imul(z,xs)|0,H=H+Math.imul(z,Yr)|0,L=L+Math.imul(qt,Wr)|0,A=A+Math.imul(qt,Qr)|0,A=A+Math.imul(qe,Wr)|0,H=H+Math.imul(qe,Qr)|0,L=L+Math.imul(Bt,zr)|0,A=A+Math.imul(Bt,rr)|0,A=A+Math.imul(ze,zr)|0,H=H+Math.imul(ze,rr)|0,L=L+Math.imul(at,ls)|0,A=A+Math.imul(at,bs)|0,A=A+Math.imul(wn,ls)|0,H=H+Math.imul(wn,bs)|0,L=L+Math.imul(xe,sr)|0,A=A+Math.imul(xe,Wn)|0,A=A+Math.imul(Fe,sr)|0,H=H+Math.imul(Fe,Wn)|0,L=L+Math.imul(_e,Or)|0,A=A+Math.imul(_e,vs)|0,A=A+Math.imul(Se,Or)|0,H=H+Math.imul(Se,vs)|0,L=L+Math.imul(fe,Es)|0,A=A+Math.imul(fe,ir)|0,A=A+Math.imul(ye,Es)|0,H=H+Math.imul(ye,ir)|0;var Rm=(F+L|0)+((A&8191)<<13)|0;F=(H+(A>>>13)|0)+(Rm>>>26)|0,Rm&=67108863,L=Math.imul(de,mr),A=Math.imul(de,Ns),A=A+Math.imul(we,mr)|0,H=Math.imul(we,Ns),L=L+Math.imul(D,xs)|0,A=A+Math.imul(D,Yr)|0,A=A+Math.imul(Y,xs)|0,H=H+Math.imul(Y,Yr)|0,L=L+Math.imul(In,Wr)|0,A=A+Math.imul(In,Qr)|0,A=A+Math.imul(z,Wr)|0,H=H+Math.imul(z,Qr)|0,L=L+Math.imul(qt,zr)|0,A=A+Math.imul(qt,rr)|0,A=A+Math.imul(qe,zr)|0,H=H+Math.imul(qe,rr)|0,L=L+Math.imul(Bt,ls)|0,A=A+Math.imul(Bt,bs)|0,A=A+Math.imul(ze,ls)|0,H=H+Math.imul(ze,bs)|0,L=L+Math.imul(at,sr)|0,A=A+Math.imul(at,Wn)|0,A=A+Math.imul(wn,sr)|0,H=H+Math.imul(wn,Wn)|0,L=L+Math.imul(xe,Or)|0,A=A+Math.imul(xe,vs)|0,A=A+Math.imul(Fe,Or)|0,H=H+Math.imul(Fe,vs)|0,L=L+Math.imul(_e,Es)|0,A=A+Math.imul(_e,ir)|0,A=A+Math.imul(Se,Es)|0,H=H+Math.imul(Se,ir)|0;var xw=(F+L|0)+((A&8191)<<13)|0;F=(H+(A>>>13)|0)+(xw>>>26)|0,xw&=67108863,L=Math.imul(de,xs),A=Math.imul(de,Yr),A=A+Math.imul(we,xs)|0,H=Math.imul(we,Yr),L=L+Math.imul(D,Wr)|0,A=A+Math.imul(D,Qr)|0,A=A+Math.imul(Y,Wr)|0,H=H+Math.imul(Y,Qr)|0,L=L+Math.imul(In,zr)|0,A=A+Math.imul(In,rr)|0,A=A+Math.imul(z,zr)|0,H=H+Math.imul(z,rr)|0,L=L+Math.imul(qt,ls)|0,A=A+Math.imul(qt,bs)|0,A=A+Math.imul(qe,ls)|0,H=H+Math.imul(qe,bs)|0,L=L+Math.imul(Bt,sr)|0,A=A+Math.imul(Bt,Wn)|0,A=A+Math.imul(ze,sr)|0,H=H+Math.imul(ze,Wn)|0,L=L+Math.imul(at,Or)|0,A=A+Math.imul(at,vs)|0,A=A+Math.imul(wn,Or)|0,H=H+Math.imul(wn,vs)|0,L=L+Math.imul(xe,Es)|0,A=A+Math.imul(xe,ir)|0,A=A+Math.imul(Fe,Es)|0,H=H+Math.imul(Fe,ir)|0;var Kf=(F+L|0)+((A&8191)<<13)|0;F=(H+(A>>>13)|0)+(Kf>>>26)|0,Kf&=67108863,L=Math.imul(de,Wr),A=Math.imul(de,Qr),A=A+Math.imul(we,Wr)|0,H=Math.imul(we,Qr),L=L+Math.imul(D,zr)|0,A=A+Math.imul(D,rr)|0,A=A+Math.imul(Y,zr)|0,H=H+Math.imul(Y,rr)|0,L=L+Math.imul(In,ls)|0,A=A+Math.imul(In,bs)|0,A=A+Math.imul(z,ls)|0,H=H+Math.imul(z,bs)|0,L=L+Math.imul(qt,sr)|0,A=A+Math.imul(qt,Wn)|0,A=A+Math.imul(qe,sr)|0,H=H+Math.imul(qe,Wn)|0,L=L+Math.imul(Bt,Or)|0,A=A+Math.imul(Bt,vs)|0,A=A+Math.imul(ze,Or)|0,H=H+Math.imul(ze,vs)|0,L=L+Math.imul(at,Es)|0,A=A+Math.imul(at,ir)|0,A=A+Math.imul(wn,Es)|0,H=H+Math.imul(wn,ir)|0;var Tw=(F+L|0)+((A&8191)<<13)|0;F=(H+(A>>>13)|0)+(Tw>>>26)|0,Tw&=67108863,L=Math.imul(de,zr),A=Math.imul(de,rr),A=A+Math.imul(we,zr)|0,H=Math.imul(we,rr),L=L+Math.imul(D,ls)|0,A=A+Math.imul(D,bs)|0,A=A+Math.imul(Y,ls)|0,H=H+Math.imul(Y,bs)|0,L=L+Math.imul(In,sr)|0,A=A+Math.imul(In,Wn)|0,A=A+Math.imul(z,sr)|0,H=H+Math.imul(z,Wn)|0,L=L+Math.imul(qt,Or)|0,A=A+Math.imul(qt,vs)|0,A=A+Math.imul(qe,Or)|0,H=H+Math.imul(qe,vs)|0,L=L+Math.imul(Bt,Es)|0,A=A+Math.imul(Bt,ir)|0,A=A+Math.imul(ze,Es)|0,H=H+Math.imul(ze,ir)|0;var Yf=(F+L|0)+((A&8191)<<13)|0;F=(H+(A>>>13)|0)+(Yf>>>26)|0,Yf&=67108863,L=Math.imul(de,ls),A=Math.imul(de,bs),A=A+Math.imul(we,ls)|0,H=Math.imul(we,bs),L=L+Math.imul(D,sr)|0,A=A+Math.imul(D,Wn)|0,A=A+Math.imul(Y,sr)|0,H=H+Math.imul(Y,Wn)|0,L=L+Math.imul(In,Or)|0,A=A+Math.imul(In,vs)|0,A=A+Math.imul(z,Or)|0,H=H+Math.imul(z,vs)|0,L=L+Math.imul(qt,Es)|0,A=A+Math.imul(qt,ir)|0,A=A+Math.imul(qe,Es)|0,H=H+Math.imul(qe,ir)|0;var km=(F+L|0)+((A&8191)<<13)|0;F=(H+(A>>>13)|0)+(km>>>26)|0,km&=67108863,L=Math.imul(de,sr),A=Math.imul(de,Wn),A=A+Math.imul(we,sr)|0,H=Math.imul(we,Wn),L=L+Math.imul(D,Or)|0,A=A+Math.imul(D,vs)|0,A=A+Math.imul(Y,Or)|0,H=H+Math.imul(Y,vs)|0,L=L+Math.imul(In,Es)|0,A=A+Math.imul(In,ir)|0,A=A+Math.imul(z,Es)|0,H=H+Math.imul(z,ir)|0;var gh=(F+L|0)+((A&8191)<<13)|0;F=(H+(A>>>13)|0)+(gh>>>26)|0,gh&=67108863,L=Math.imul(de,Or),A=Math.imul(de,vs),A=A+Math.imul(we,Or)|0,H=Math.imul(we,vs),L=L+Math.imul(D,Es)|0,A=A+Math.imul(D,ir)|0,A=A+Math.imul(Y,Es)|0,H=H+Math.imul(Y,ir)|0;var rl=(F+L|0)+((A&8191)<<13)|0;F=(H+(A>>>13)|0)+(rl>>>26)|0,rl&=67108863,L=Math.imul(de,Es),A=Math.imul(de,ir),A=A+Math.imul(we,Es)|0,H=Math.imul(we,ir);var nu=(F+L|0)+((A&8191)<<13)|0;return F=(H+(A>>>13)|0)+(nu>>>26)|0,nu&=67108863,B[0]=pc,B[1]=ph,B[2]=xm,B[3]=eu,B[4]=Gf,B[5]=qf,B[6]=tu,B[7]=Tm,B[8]=Vf,B[9]=Ca,B[10]=Rm,B[11]=xw,B[12]=Kf,B[13]=Tw,B[14]=Yf,B[15]=km,B[16]=gh,B[17]=rl,B[18]=nu,F!==0&&(B[19]=F,_.length++),_};Math.imul||(w=y);function C($,v,E){E.negative=v.negative^$.negative,E.length=$.length+v.length;for(var _=0,O=0,x=0;x<E.length-1;x++){var B=O;O=0;for(var F=_&67108863,L=Math.min(x,v.length-1),A=Math.max(0,x-$.length+1);A<=L;A++){var H=x-A,re=$.words[H]|0,se=v.words[A]|0,ge=re*se,ae=ge&67108863;B=B+(ge/67108864|0)|0,ae=ae+F|0,F=ae&67108863,B=B+(ae>>>26)|0,O+=B>>>26,B&=67108863}E.words[x]=F,_=B,B=O}return _!==0?E.words[x]=_:E.length--,E._strip()}function N($,v,E){return C($,v,E)}i.prototype.mulTo=function(v,E){var _,O=this.length+v.length;return this.length===10&&v.length===10?_=w(this,v,E):O<63?_=y(this,v,E):O<1024?_=C(this,v,E):_=N(this,v,E),_},i.prototype.mul=function(v){var E=new i(null);return E.words=new Array(this.length+v.length),this.mulTo(v,E)},i.prototype.mulf=function(v){var E=new i(null);return E.words=new Array(this.length+v.length),N(this,v,E)},i.prototype.imul=function(v){return this.clone().mulTo(v,this)},i.prototype.imuln=function(v){var E=v<0;E&&(v=-v),r(typeof v=="number"),r(v<67108864);for(var _=0,O=0;O<this.length;O++){var x=(this.words[O]|0)*v,B=(x&67108863)+(_&67108863);_>>=26,_+=x/67108864|0,_+=B>>>26,this.words[O]=B&67108863}return _!==0&&(this.words[O]=_,this.length++),this.length=v===0?1:this.length,E?this.ineg():this},i.prototype.muln=function(v){return this.clone().imuln(v)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(v){var E=m(v);if(E.length===0)return new i(1);for(var _=this,O=0;O<E.length&&E[O]===0;O++,_=_.sqr());if(++O<E.length)for(var x=_.sqr();O<E.length;O++,x=x.sqr())E[O]!==0&&(_=_.mul(x));return _},i.prototype.iushln=function(v){r(typeof v=="number"&&v>=0);var E=v%26,_=(v-E)/26,O=67108863>>>26-E<<26-E,x;if(E!==0){var B=0;for(x=0;x<this.length;x++){var F=this.words[x]&O,L=(this.words[x]|0)-F<<E;this.words[x]=L|B,B=F>>>26-E}B&&(this.words[x]=B,this.length++)}if(_!==0){for(x=this.length-1;x>=0;x--)this.words[x+_]=this.words[x];for(x=0;x<_;x++)this.words[x]=0;this.length+=_}return this._strip()},i.prototype.ishln=function(v){return r(this.negative===0),this.iushln(v)},i.prototype.iushrn=function(v,E,_){r(typeof v=="number"&&v>=0);var O;E?O=(E-E%26)/26:O=0;var x=v%26,B=Math.min((v-x)/26,this.length),F=67108863^67108863>>>x<<x,L=_;if(O-=B,O=Math.max(0,O),L){for(var A=0;A<B;A++)L.words[A]=this.words[A];L.length=B}if(B!==0)if(this.length>B)for(this.length-=B,A=0;A<this.length;A++)this.words[A]=this.words[A+B];else this.words[0]=0,this.length=1;var H=0;for(A=this.length-1;A>=0&&(H!==0||A>=O);A--){var re=this.words[A]|0;this.words[A]=H<<26-x|re>>>x,H=re&F}return L&&H!==0&&(L.words[L.length++]=H),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(v,E,_){return r(this.negative===0),this.iushrn(v,E,_)},i.prototype.shln=function(v){return this.clone().ishln(v)},i.prototype.ushln=function(v){return this.clone().iushln(v)},i.prototype.shrn=function(v){return this.clone().ishrn(v)},i.prototype.ushrn=function(v){return this.clone().iushrn(v)},i.prototype.testn=function(v){r(typeof v=="number"&&v>=0);var E=v%26,_=(v-E)/26,O=1<<E;if(this.length<=_)return!1;var x=this.words[_];return!!(x&O)},i.prototype.imaskn=function(v){r(typeof v=="number"&&v>=0);var E=v%26,_=(v-E)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=_)return this;if(E!==0&&_++,this.length=Math.min(_,this.length),E!==0){var O=67108863^67108863>>>E<<E;this.words[this.length-1]&=O}return this._strip()},i.prototype.maskn=function(v){return this.clone().imaskn(v)},i.prototype.iaddn=function(v){return r(typeof v=="number"),r(v<67108864),v<0?this.isubn(-v):this.negative!==0?this.length===1&&(this.words[0]|0)<=v?(this.words[0]=v-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(v),this.negative=1,this):this._iaddn(v)},i.prototype._iaddn=function(v){this.words[0]+=v;for(var E=0;E<this.length&&this.words[E]>=67108864;E++)this.words[E]-=67108864,E===this.length-1?this.words[E+1]=1:this.words[E+1]++;return this.length=Math.max(this.length,E+1),this},i.prototype.isubn=function(v){if(r(typeof v=="number"),r(v<67108864),v<0)return this.iaddn(-v);if(this.negative!==0)return this.negative=0,this.iaddn(v),this.negative=1,this;if(this.words[0]-=v,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var E=0;E<this.length&&this.words[E]<0;E++)this.words[E]+=67108864,this.words[E+1]-=1;return this._strip()},i.prototype.addn=function(v){return this.clone().iaddn(v)},i.prototype.subn=function(v){return this.clone().isubn(v)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(v,E,_){var O=v.length+_,x;this._expand(O);var B,F=0;for(x=0;x<v.length;x++){B=(this.words[x+_]|0)+F;var L=(v.words[x]|0)*E;B-=L&67108863,F=(B>>26)-(L/67108864|0),this.words[x+_]=B&67108863}for(;x<this.length-_;x++)B=(this.words[x+_]|0)+F,F=B>>26,this.words[x+_]=B&67108863;if(F===0)return this._strip();for(r(F===-1),F=0,x=0;x<this.length;x++)B=-(this.words[x]|0)+F,F=B>>26,this.words[x]=B&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(v,E){var _=this.length-v.length,O=this.clone(),x=v,B=x.words[x.length-1]|0,F=this._countBits(B);_=26-F,_!==0&&(x=x.ushln(_),O.iushln(_),B=x.words[x.length-1]|0);var L=O.length-x.length,A;if(E!=="mod"){A=new i(null),A.length=L+1,A.words=new Array(A.length);for(var H=0;H<A.length;H++)A.words[H]=0}var re=O.clone()._ishlnsubmul(x,1,L);re.negative===0&&(O=re,A&&(A.words[L]=1));for(var se=L-1;se>=0;se--){var ge=(O.words[x.length+se]|0)*67108864+(O.words[x.length+se-1]|0);for(ge=Math.min(ge/B|0,67108863),O._ishlnsubmul(x,ge,se);O.negative!==0;)ge--,O.negative=0,O._ishlnsubmul(x,1,se),O.isZero()||(O.negative^=1);A&&(A.words[se]=ge)}return A&&A._strip(),O._strip(),E!=="div"&&_!==0&&O.iushrn(_),{div:A||null,mod:O}},i.prototype.divmod=function(v,E,_){if(r(!v.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var O,x,B;return this.negative!==0&&v.negative===0?(B=this.neg().divmod(v,E),E!=="mod"&&(O=B.div.neg()),E!=="div"&&(x=B.mod.neg(),_&&x.negative!==0&&x.iadd(v)),{div:O,mod:x}):this.negative===0&&v.negative!==0?(B=this.divmod(v.neg(),E),E!=="mod"&&(O=B.div.neg()),{div:O,mod:B.mod}):this.negative&v.negative?(B=this.neg().divmod(v.neg(),E),E!=="div"&&(x=B.mod.neg(),_&&x.negative!==0&&x.isub(v)),{div:B.div,mod:x}):v.length>this.length||this.cmp(v)<0?{div:new i(0),mod:this}:v.length===1?E==="div"?{div:this.divn(v.words[0]),mod:null}:E==="mod"?{div:null,mod:new i(this.modrn(v.words[0]))}:{div:this.divn(v.words[0]),mod:new i(this.modrn(v.words[0]))}:this._wordDiv(v,E)},i.prototype.div=function(v){return this.divmod(v,"div",!1).div},i.prototype.mod=function(v){return this.divmod(v,"mod",!1).mod},i.prototype.umod=function(v){return this.divmod(v,"mod",!0).mod},i.prototype.divRound=function(v){var E=this.divmod(v);if(E.mod.isZero())return E.div;var _=E.div.negative!==0?E.mod.isub(v):E.mod,O=v.ushrn(1),x=v.andln(1),B=_.cmp(O);return B<0||x===1&&B===0?E.div:E.div.negative!==0?E.div.isubn(1):E.div.iaddn(1)},i.prototype.modrn=function(v){var E=v<0;E&&(v=-v),r(v<=67108863);for(var _=(1<<26)%v,O=0,x=this.length-1;x>=0;x--)O=(_*O+(this.words[x]|0))%v;return E?-O:O},i.prototype.modn=function(v){return this.modrn(v)},i.prototype.idivn=function(v){var E=v<0;E&&(v=-v),r(v<=67108863);for(var _=0,O=this.length-1;O>=0;O--){var x=(this.words[O]|0)+_*67108864;this.words[O]=x/v|0,_=x%v}return this._strip(),E?this.ineg():this},i.prototype.divn=function(v){return this.clone().idivn(v)},i.prototype.egcd=function(v){r(v.negative===0),r(!v.isZero());var E=this,_=v.clone();E.negative!==0?E=E.umod(v):E=E.clone();for(var O=new i(1),x=new i(0),B=new i(0),F=new i(1),L=0;E.isEven()&&_.isEven();)E.iushrn(1),_.iushrn(1),++L;for(var A=_.clone(),H=E.clone();!E.isZero();){for(var re=0,se=1;!(E.words[0]&se)&&re<26;++re,se<<=1);if(re>0)for(E.iushrn(re);re-- >0;)(O.isOdd()||x.isOdd())&&(O.iadd(A),x.isub(H)),O.iushrn(1),x.iushrn(1);for(var ge=0,ae=1;!(_.words[0]&ae)&&ge<26;++ge,ae<<=1);if(ge>0)for(_.iushrn(ge);ge-- >0;)(B.isOdd()||F.isOdd())&&(B.iadd(A),F.isub(H)),B.iushrn(1),F.iushrn(1);E.cmp(_)>=0?(E.isub(_),O.isub(B),x.isub(F)):(_.isub(E),B.isub(O),F.isub(x))}return{a:B,b:F,gcd:_.iushln(L)}},i.prototype._invmp=function(v){r(v.negative===0),r(!v.isZero());var E=this,_=v.clone();E.negative!==0?E=E.umod(v):E=E.clone();for(var O=new i(1),x=new i(0),B=_.clone();E.cmpn(1)>0&&_.cmpn(1)>0;){for(var F=0,L=1;!(E.words[0]&L)&&F<26;++F,L<<=1);if(F>0)for(E.iushrn(F);F-- >0;)O.isOdd()&&O.iadd(B),O.iushrn(1);for(var A=0,H=1;!(_.words[0]&H)&&A<26;++A,H<<=1);if(A>0)for(_.iushrn(A);A-- >0;)x.isOdd()&&x.iadd(B),x.iushrn(1);E.cmp(_)>=0?(E.isub(_),O.isub(x)):(_.isub(E),x.isub(O))}var re;return E.cmpn(1)===0?re=O:re=x,re.cmpn(0)<0&&re.iadd(v),re},i.prototype.gcd=function(v){if(this.isZero())return v.abs();if(v.isZero())return this.abs();var E=this.clone(),_=v.clone();E.negative=0,_.negative=0;for(var O=0;E.isEven()&&_.isEven();O++)E.iushrn(1),_.iushrn(1);do{for(;E.isEven();)E.iushrn(1);for(;_.isEven();)_.iushrn(1);var x=E.cmp(_);if(x<0){var B=E;E=_,_=B}else if(x===0||_.cmpn(1)===0)break;E.isub(_)}while(!0);return _.iushln(O)},i.prototype.invm=function(v){return this.egcd(v).a.umod(v)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(v){return this.words[0]&v},i.prototype.bincn=function(v){r(typeof v=="number");var E=v%26,_=(v-E)/26,O=1<<E;if(this.length<=_)return this._expand(_+1),this.words[_]|=O,this;for(var x=O,B=_;x!==0&&B<this.length;B++){var F=this.words[B]|0;F+=x,x=F>>>26,F&=67108863,this.words[B]=F}return x!==0&&(this.words[B]=x,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(v){var E=v<0;if(this.negative!==0&&!E)return-1;if(this.negative===0&&E)return 1;this._strip();var _;if(this.length>1)_=1;else{E&&(v=-v),r(v<=67108863,"Number is too big");var O=this.words[0]|0;_=O===v?0:O<v?-1:1}return this.negative!==0?-_|0:_},i.prototype.cmp=function(v){if(this.negative!==0&&v.negative===0)return-1;if(this.negative===0&&v.negative!==0)return 1;var E=this.ucmp(v);return this.negative!==0?-E|0:E},i.prototype.ucmp=function(v){if(this.length>v.length)return 1;if(this.length<v.length)return-1;for(var E=0,_=this.length-1;_>=0;_--){var O=this.words[_]|0,x=v.words[_]|0;if(O!==x){O<x?E=-1:O>x&&(E=1);break}}return E},i.prototype.gtn=function(v){return this.cmpn(v)===1},i.prototype.gt=function(v){return this.cmp(v)===1},i.prototype.gten=function(v){return this.cmpn(v)>=0},i.prototype.gte=function(v){return this.cmp(v)>=0},i.prototype.ltn=function(v){return this.cmpn(v)===-1},i.prototype.lt=function(v){return this.cmp(v)===-1},i.prototype.lten=function(v){return this.cmpn(v)<=0},i.prototype.lte=function(v){return this.cmp(v)<=0},i.prototype.eqn=function(v){return this.cmpn(v)===0},i.prototype.eq=function(v){return this.cmp(v)===0},i.red=function(v){return new j(v)},i.prototype.toRed=function(v){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),v.convertTo(this)._forceRed(v)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(v){return this.red=v,this},i.prototype.forceRed=function(v){return r(!this.red,"Already a number in reduction context"),this._forceRed(v)},i.prototype.redAdd=function(v){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,v)},i.prototype.redIAdd=function(v){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,v)},i.prototype.redSub=function(v){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,v)},i.prototype.redISub=function(v){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,v)},i.prototype.redShl=function(v){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,v)},i.prototype.redMul=function(v){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,v),this.red.mul(this,v)},i.prototype.redIMul=function(v){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,v),this.red.imul(this,v)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(v){return r(this.red&&!v.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,v)};var I={k256:null,p224:null,p192:null,p25519:null};function k($,v){this.name=$,this.p=new i(v,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}k.prototype._tmp=function(){var v=new i(null);return v.words=new Array(Math.ceil(this.n/13)),v},k.prototype.ireduce=function(v){var E=v,_;do this.split(E,this.tmp),E=this.imulK(E),E=E.iadd(this.tmp),_=E.bitLength();while(_>this.n);var O=_<this.n?-1:E.ucmp(this.p);return O===0?(E.words[0]=0,E.length=1):O>0?E.isub(this.p):E.strip!==void 0?E.strip():E._strip(),E},k.prototype.split=function(v,E){v.iushrn(this.n,0,E)},k.prototype.imulK=function(v){return v.imul(this.k)};function P(){k.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(P,k),P.prototype.split=function(v,E){for(var _=4194303,O=Math.min(v.length,9),x=0;x<O;x++)E.words[x]=v.words[x];if(E.length=O,v.length<=9){v.words[0]=0,v.length=1;return}var B=v.words[9];for(E.words[E.length++]=B&_,x=10;x<v.length;x++){var F=v.words[x]|0;v.words[x-10]=(F&_)<<4|B>>>22,B=F}B>>>=22,v.words[x-10]=B,B===0&&v.length>10?v.length-=10:v.length-=9},P.prototype.imulK=function(v){v.words[v.length]=0,v.words[v.length+1]=0,v.length+=2;for(var E=0,_=0;_<v.length;_++){var O=v.words[_]|0;E+=O*977,v.words[_]=E&67108863,E=O*64+(E/67108864|0)}return v.words[v.length-1]===0&&(v.length--,v.words[v.length-1]===0&&v.length--),v};function U(){k.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(U,k);function M(){k.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(M,k);function W(){k.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(W,k),W.prototype.imulK=function(v){for(var E=0,_=0;_<v.length;_++){var O=(v.words[_]|0)*19+E,x=O&67108863;O>>>=26,v.words[_]=x,E=O}return E!==0&&(v.words[v.length++]=E),v},i._prime=function(v){if(I[v])return I[v];var E;if(v==="k256")E=new P;else if(v==="p224")E=new U;else if(v==="p192")E=new M;else if(v==="p25519")E=new W;else throw new Error("Unknown prime "+v);return I[v]=E,E};function j($){if(typeof $=="string"){var v=i._prime($);this.m=v.p,this.prime=v}else r($.gtn(1),"modulus must be greater than 1"),this.m=$,this.prime=null}j.prototype._verify1=function(v){r(v.negative===0,"red works only with positives"),r(v.red,"red works only with red numbers")},j.prototype._verify2=function(v,E){r((v.negative|E.negative)===0,"red works only with positives"),r(v.red&&v.red===E.red,"red works only with red numbers")},j.prototype.imod=function(v){return this.prime?this.prime.ireduce(v)._forceRed(this):(u(v,v.umod(this.m)._forceRed(this)),v)},j.prototype.neg=function(v){return v.isZero()?v.clone():this.m.sub(v)._forceRed(this)},j.prototype.add=function(v,E){this._verify2(v,E);var _=v.add(E);return _.cmp(this.m)>=0&&_.isub(this.m),_._forceRed(this)},j.prototype.iadd=function(v,E){this._verify2(v,E);var _=v.iadd(E);return _.cmp(this.m)>=0&&_.isub(this.m),_},j.prototype.sub=function(v,E){this._verify2(v,E);var _=v.sub(E);return _.cmpn(0)<0&&_.iadd(this.m),_._forceRed(this)},j.prototype.isub=function(v,E){this._verify2(v,E);var _=v.isub(E);return _.cmpn(0)<0&&_.iadd(this.m),_},j.prototype.shl=function(v,E){return this._verify1(v),this.imod(v.ushln(E))},j.prototype.imul=function(v,E){return this._verify2(v,E),this.imod(v.imul(E))},j.prototype.mul=function(v,E){return this._verify2(v,E),this.imod(v.mul(E))},j.prototype.isqr=function(v){return this.imul(v,v.clone())},j.prototype.sqr=function(v){return this.mul(v,v)},j.prototype.sqrt=function(v){if(v.isZero())return v.clone();var E=this.m.andln(3);if(r(E%2===1),E===3){var _=this.m.add(new i(1)).iushrn(2);return this.pow(v,_)}for(var O=this.m.subn(1),x=0;!O.isZero()&&O.andln(1)===0;)x++,O.iushrn(1);r(!O.isZero());var B=new i(1).toRed(this),F=B.redNeg(),L=this.m.subn(1).iushrn(1),A=this.m.bitLength();for(A=new i(2*A*A).toRed(this);this.pow(A,L).cmp(F)!==0;)A.redIAdd(F);for(var H=this.pow(A,O),re=this.pow(v,O.addn(1).iushrn(1)),se=this.pow(v,O),ge=x;se.cmp(B)!==0;){for(var ae=se,fe=0;ae.cmp(B)!==0;fe++)ae=ae.redSqr();r(fe<ge);var ye=this.pow(H,new i(1).iushln(ge-fe-1));re=re.redMul(ye),H=ye.redSqr(),se=se.redMul(H),ge=fe}return re},j.prototype.invm=function(v){var E=v._invmp(this.m);return E.negative!==0?(E.negative=0,this.imod(E).redNeg()):this.imod(E)},j.prototype.pow=function(v,E){if(E.isZero())return new i(1).toRed(this);if(E.cmpn(1)===0)return v.clone();var _=4,O=new Array(1<<_);O[0]=new i(1).toRed(this),O[1]=v;for(var x=2;x<O.length;x++)O[x]=this.mul(O[x-1],v);var B=O[0],F=0,L=0,A=E.bitLength()%26;for(A===0&&(A=26),x=E.length-1;x>=0;x--){for(var H=E.words[x],re=A-1;re>=0;re--){var se=H>>re&1;if(B!==O[0]&&(B=this.sqr(B)),se===0&&F===0){L=0;continue}F<<=1,F|=se,L++,!(L!==_&&(x!==0||re!==0))&&(B=this.mul(B,O[F]),L=0,F=0)}A=26}return B},j.prototype.convertTo=function(v){var E=v.umod(this.m);return E===v?E.clone():E},j.prototype.convertFrom=function(v){var E=v.clone();return E.red=null,E},i.mont=function(v){return new K(v)};function K($){j.call(this,$),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(K,j),K.prototype.convertTo=function(v){return this.imod(v.ushln(this.shift))},K.prototype.convertFrom=function(v){var E=this.imod(v.mul(this.rinv));return E.red=null,E},K.prototype.imul=function(v,E){if(v.isZero()||E.isZero())return v.words[0]=0,v.length=1,v;var _=v.imul(E),O=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=_.isub(O).iushrn(this.shift),B=x;return x.cmp(this.m)>=0?B=x.isub(this.m):x.cmpn(0)<0&&(B=x.iadd(this.m)),B._forceRed(this)},K.prototype.mul=function(v,E){if(v.isZero()||E.isZero())return new i(0)._forceRed(this);var _=v.mul(E),O=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=_.isub(O).iushrn(this.shift),B=x;return x.cmp(this.m)>=0?B=x.isub(this.m):x.cmpn(0)<0&&(B=x.iadd(this.m)),B._forceRed(this)},K.prototype.invm=function(v){var E=this.imod(v._invmp(this.m).mul(this.r2));return E._forceRed(this)}})(t,ei)})(z4);var koe=z4.exports;const Dq=ch(koe);var M5={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var n=mn,r=n.Buffer;function s(o,a){for(var c in o)a[c]=o[c]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(s(n,e),e.Buffer=i);function i(o,a,c){return r(o,a,c)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,c)},i.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var l=r(o);return a!==void 0?typeof c=="string"?l.fill(a,c):l.fill(a):l.fill(0),l},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})(M5,M5.exports);var Poe=M5.exports,Px=Poe.Buffer;function jYe(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var s=t.charAt(r),i=s.charCodeAt(0);if(e[i]!==255)throw new TypeError(s+" is ambiguous");e[i]=r}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(f){if((Array.isArray(f)||f instanceof Uint8Array)&&(f=Px.from(f)),!Px.isBuffer(f))throw new TypeError("Expected Buffer");if(f.length===0)return"";for(var p=0,g=0,m=0,y=f.length;m!==y&&f[m]===0;)m++,p++;for(var w=(y-m)*l+1>>>0,C=new Uint8Array(w);m!==y;){for(var N=f[m],I=0,k=w-1;(N!==0||I<g)&&k!==-1;k--,I++)N+=256*C[k]>>>0,C[k]=N%o>>>0,N=N/o>>>0;if(N!==0)throw new Error("Non-zero carry");g=I,m++}for(var P=w-g;P!==w&&C[P]===0;)P++;for(var U=a.repeat(p);P<w;++P)U+=t.charAt(C[P]);return U}function d(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return Px.alloc(0);for(var p=0,g=0,m=0;f[p]===a;)g++,p++;for(var y=(f.length-p)*c+1>>>0,w=new Uint8Array(y);p<f.length;){var C=f.charCodeAt(p);if(C>255)return;var N=e[C];if(N===255)return;for(var I=0,k=y-1;(N!==0||I<m)&&k!==-1;k--,I++)N+=o*w[k]>>>0,w[k]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");m=I,p++}for(var P=y-m;P!==y&&w[P]===0;)P++;var U=Px.allocUnsafe(g+(y-P));U.fill(0,0,g);for(var M=g;P!==y;)U[M++]=w[P++];return U}function h(f){var p=d(f);if(p)return p;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:d,decode:h}}var WYe=jYe,zYe=WYe,HYe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",GYe=zYe(HYe);const co=ch(GYe);var oo={},Ox=Poe.Buffer;function qYe(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var s=t.charAt(r),i=s.charCodeAt(0);if(e[i]!==255)throw new TypeError(s+" is ambiguous");e[i]=r}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(f){if((Array.isArray(f)||f instanceof Uint8Array)&&(f=Ox.from(f)),!Ox.isBuffer(f))throw new TypeError("Expected Buffer");if(f.length===0)return"";for(var p=0,g=0,m=0,y=f.length;m!==y&&f[m]===0;)m++,p++;for(var w=(y-m)*l+1>>>0,C=new Uint8Array(w);m!==y;){for(var N=f[m],I=0,k=w-1;(N!==0||I<g)&&k!==-1;k--,I++)N+=256*C[k]>>>0,C[k]=N%o>>>0,N=N/o>>>0;if(N!==0)throw new Error("Non-zero carry");g=I,m++}for(var P=w-g;P!==w&&C[P]===0;)P++;for(var U=a.repeat(p);P<w;++P)U+=t.charAt(C[P]);return U}function d(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return Ox.alloc(0);for(var p=0,g=0,m=0;f[p]===a;)g++,p++;for(var y=(f.length-p)*c+1>>>0,w=new Uint8Array(y);p<f.length;){var C=f.charCodeAt(p);if(C>255)return;var N=e[C];if(N===255)return;for(var I=0,k=y-1;(N!==0||I<m)&&k!==-1;k--,I++)N+=o*w[k]>>>0,w[k]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");m=I,p++}for(var P=y-m;P!==y&&w[P]===0;)P++;var U=Ox.allocUnsafe(g+(y-P));U.fill(0,0,g);for(var M=g;P!==y;)U[M++]=w[P++];return U}function h(f){var p=d(f);if(p)return p;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:d,decode:h}}var VYe=qYe,KYe=VYe,YYe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",QYe=KYe(YYe);function rf(t,e,n){return e<=t&&t<=n}function YP(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function JYe(t){for(var e=String(t),n=e.length,r=0,s=[];r<n;){var i=e.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===n-1)s.push(65533);else{var o=t.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=i&1023,c=o&1023;s.push(65536+(a<<10)+c),r+=1}else s.push(65533)}r+=1}return s}function ZYe(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var Ek=-1;function H4(t){this.tokens=[].slice.call(t)}H4.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Ek},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var nC=-1;function dM(t,e){if(t)throw TypeError("Decoder error");return e||65533}var Ck="utf-8";function _k(t,e){if(!(this instanceof _k))return new _k(t,e);if(t=t!==void 0?String(t).toLowerCase():Ck,t!==Ck)throw new Error("Encoding not supported. Only utf-8 is supported");e=YP(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}_k.prototype={decode:function(e,n){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),n=YP(n),this._streaming||(this._decoder=new XYe({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!n.stream;for(var s=new H4(r),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==nC);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===nC)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),ZYe(i)}};function Ak(t,e){if(!(this instanceof Ak))return new Ak(t,e);if(t=t!==void 0?String(t).toLowerCase():Ck,t!==Ck)throw new Error("Encoding not supported. Only utf-8 is supported");e=YP(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Ak.prototype={encode:function(e,n){e=e?String(e):"",n=YP(n),this._streaming||(this._encoder=new eQe(this._options)),this._streaming=!!n.stream;for(var r=[],s=new H4(JYe(e)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==nC);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==nC;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function XYe(t){var e=t.fatal,n=0,r=0,s=0,i=128,o=191;this.handler=function(a,c){if(c===Ek&&s!==0)return s=0,dM(e);if(c===Ek)return nC;if(s===0){if(rf(c,0,127))return c;if(rf(c,194,223))s=1,n=c-192;else if(rf(c,224,239))c===224&&(i=160),c===237&&(o=159),s=2,n=c-224;else if(rf(c,240,244))c===240&&(i=144),c===244&&(o=143),s=3,n=c-240;else return dM(e);return n=n<<6*s,null}if(!rf(c,i,o))return n=s=r=0,i=128,o=191,a.prepend(c),dM(e);if(i=128,o=191,r+=1,n+=c-128<<6*(s-r),r!==s)return null;var l=n;return n=s=r=0,l}}function eQe(t){t.fatal,this.handler=function(e,n){if(n===Ek)return nC;if(rf(n,0,127))return n;var r,s;rf(n,128,2047)?(r=1,s=192):rf(n,2048,65535)?(r=2,s=224):rf(n,65536,1114111)&&(r=3,s=240);for(var i=[(n>>6*r)+s];r>0;){var o=n>>6*(r-1);i.push(128|o&63),r-=1}return i}}const tQe=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:_k,TextEncoder:Ak},Symbol.toStringTag,{value:"Module"})),nQe=aI(tQe);var rQe=ei&&ei.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),sQe=ei&&ei.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),dh=ei&&ei.__decorate||function(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},iQe=ei&&ei.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.hasOwnProperty.call(t,n)&&rQe(e,t,n);return sQe(e,t),e},Ooe=ei&&ei.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oo,"__esModule",{value:!0});var Doe=oo.deserializeUnchecked=Foe=oo.deserialize=$oe=oo.serialize=oo.BinaryReader=oo.BinaryWriter=oo.BorshError=oo.baseDecode=oo.baseEncode=void 0;const Ag=Ooe(koe),Moe=Ooe(QYe),oQe=iQe(nQe),aQe=typeof TextDecoder!="function"?oQe.TextDecoder:TextDecoder,cQe=new aQe("utf-8",{fatal:!0});function lQe(t){return typeof t=="string"&&(t=Buffer.from(t,"utf8")),Moe.default.encode(Buffer.from(t))}oo.baseEncode=lQe;function uQe(t){return Buffer.from(Moe.default.decode(t))}oo.baseDecode=uQe;const hM=1024;class ca extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}oo.BorshError=ca;class Boe{constructor(){this.buf=Buffer.alloc(hM),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(hM)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ag.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ag.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ag.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ag.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(hM)]),this.length+=e.length}writeString(e){this.maybeResize();const n=Buffer.from(e,"utf8");this.writeU32(n.length),this.writeBuffer(n)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,n){this.maybeResize(),this.writeU32(e.length);for(const r of e)this.maybeResize(),n(r)}toArray(){return this.buf.subarray(0,this.length)}}oo.BinaryWriter=Boe;function hh(t,e,n){const r=n.value;n.value=function(...s){try{return r.apply(this,s)}catch(i){if(i instanceof RangeError){const o=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new ca("Reached the end of buffer when deserializing")}throw i}}}class nl{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new Ag.default(e,"le")}readU128(){const e=this.readBuffer(16);return new Ag.default(e,"le")}readU256(){const e=this.readBuffer(32);return new Ag.default(e,"le")}readU512(){const e=this.readBuffer(64);return new Ag.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new ca(`Expected buffer length ${e} isn't within bounds`);const n=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,n}readString(){const e=this.readU32(),n=this.readBuffer(e);try{return cQe.decode(n)}catch(r){throw new ca(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const n=this.readU32(),r=Array();for(let s=0;s<n;++s)r.push(e());return r}}dh([hh],nl.prototype,"readU8",null);dh([hh],nl.prototype,"readU16",null);dh([hh],nl.prototype,"readU32",null);dh([hh],nl.prototype,"readU64",null);dh([hh],nl.prototype,"readU128",null);dh([hh],nl.prototype,"readU256",null);dh([hh],nl.prototype,"readU512",null);dh([hh],nl.prototype,"readString",null);dh([hh],nl.prototype,"readFixedArray",null);dh([hh],nl.prototype,"readArray",null);oo.BinaryReader=nl;function Loe(t){return t.charAt(0).toUpperCase()+t.slice(1)}function cy(t,e,n,r,s){try{if(typeof r=="string")s[`write${Loe(r)}`](n);else if(r instanceof Array)if(typeof r[0]=="number"){if(n.length!==r[0])throw new ca(`Expecting byte array of length ${r[0]}, but got ${n.length} bytes`);s.writeFixedArray(n)}else if(r.length===2&&typeof r[1]=="number"){if(n.length!==r[1])throw new ca(`Expecting byte array of length ${r[1]}, but got ${n.length} bytes`);for(let i=0;i<r[1];i++)cy(t,null,n[i],r[0],s)}else s.writeArray(n,i=>{cy(t,e,i,r[0],s)});else if(r.kind!==void 0)switch(r.kind){case"option":{n==null?s.writeU8(0):(s.writeU8(1),cy(t,e,n,r.type,s));break}case"map":{s.writeU32(n.size),n.forEach((i,o)=>{cy(t,e,o,r.key,s),cy(t,e,i,r.value,s)});break}default:throw new ca(`FieldType ${r} unrecognized`)}else Uoe(t,n,s)}catch(i){throw i instanceof ca&&i.addToFieldPath(e),i}}function Uoe(t,e,n){if(typeof e.borshSerialize=="function"){e.borshSerialize(n);return}const r=t.get(e.constructor);if(!r)throw new ca(`Class ${e.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([s,i])=>{cy(t,s,e[s],i,n)});else if(r.kind==="enum"){const s=e[r.field];for(let i=0;i<r.values.length;++i){const[o,a]=r.values[i];if(o===s){n.writeU8(i),cy(t,o,e[o],a,n);break}}}else throw new ca(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function dQe(t,e,n=Boe){const r=new n;return Uoe(t,e,r),r.toArray()}var $oe=oo.serialize=dQe;function ly(t,e,n,r){try{if(typeof n=="string")return r[`read${Loe(n)}`]();if(n instanceof Array){if(typeof n[0]=="number")return r.readFixedArray(n[0]);if(typeof n[1]=="number"){const s=[];for(let i=0;i<n[1];i++)s.push(ly(t,null,n[0],r));return s}else return r.readArray(()=>ly(t,e,n[0],r))}if(n.kind==="option")return r.readU8()?ly(t,e,n.type,r):void 0;if(n.kind==="map"){let s=new Map;const i=r.readU32();for(let o=0;o<i;o++){const a=ly(t,e,n.key,r),c=ly(t,e,n.value,r);s.set(a,c)}return s}return G4(t,n,r)}catch(s){throw s instanceof ca&&s.addToFieldPath(e),s}}function G4(t,e,n){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(n);const r=t.get(e);if(!r)throw new ca(`Class ${e.name} is missing in schema`);if(r.kind==="struct"){const s={};for(const[i,o]of t.get(e).fields)s[i]=ly(t,i,o,n);return new e(s)}if(r.kind==="enum"){const s=n.readU8();if(s>=r.values.length)throw new ca(`Enum index: ${s} is out of range`);const[i,o]=r.values[s],a=ly(t,i,o,n);return new e({[i]:a})}throw new ca(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function hQe(t,e,n,r=nl){const s=new r(n),i=G4(t,e,s);if(s.offset<n.length)throw new ca(`Unexpected ${n.length-s.offset} bytes after deserialized data`);return i}var Foe=oo.deserialize=hQe;function fQe(t,e,n,r=nl){const s=new r(n);return G4(t,e,s)}Doe=oo.deserializeUnchecked=fQe;var me={};Object.defineProperty(me,"__esModule",{value:!0});me.s16=me.s8=me.nu64be=me.u48be=me.u40be=me.u32be=me.u24be=me.u16be=Xi=me.nu64=me.u48=me.u40=Rt=me.u32=me.u24=Tl=me.u16=Fn=me.u8=g0=me.offset=me.greedy=me.Constant=me.UTF8=me.CString=me.Blob=me.Boolean=me.BitField=me.BitStructure=me.VariantLayout=me.Union=me.UnionLayoutDiscriminator=me.UnionDiscriminator=me.Structure=me.Sequence=me.DoubleBE=me.Double=me.FloatBE=me.Float=me.NearInt64BE=me.NearInt64=me.NearUInt64BE=me.NearUInt64=me.IntBE=me.Int=me.UIntBE=me.UInt=me.OffsetLayout=me.GreedyCount=me.ExternalLayout=me.bindConstructorLayout=me.nameWithProperty=me.Layout=me.uint8ArrayToBuffer=me.checkUint8Array=void 0;me.constant=me.utf8=me.cstr=Vr=me.blob=me.unionLayoutDiscriminator=me.union=$o=me.seq=me.bits=Et=me.struct=me.f64be=me.f64=me.f32be=me.f32=me.ns64be=me.s48be=me.s40be=me.s32be=me.s24be=me.s16be=Mc=me.ns64=me.s48=me.s40=me.s32=me.s24=void 0;const q4=mn;function HC(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}me.checkUint8Array=HC;function gr(t){return HC(t),q4.Buffer.from(t.buffer,t.byteOffset,t.length)}me.uint8ArrayToBuffer=gr;class kr{constructor(e,n){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=n}makeDestinationObject(){return{}}getSpan(e,n){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const n=Object.create(this.constructor.prototype);return Object.assign(n,this),n.property=e,n}fromArray(e){}}me.Layout=kr;function V4(t,e){return e.property?t+"["+e.property+"]":t}me.nameWithProperty=V4;function pQe(t,e){if(typeof t!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof kr))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(n,r){return e.encode(this,n,r)},writable:!0}),Object.defineProperty(t,"decode",{value(n,r){return e.decode(n,r)},writable:!0})}me.bindConstructorLayout=pQe;class Qa extends kr{isCount(){throw new Error("ExternalLayout is abstract")}}me.ExternalLayout=Qa;class joe extends Qa{constructor(e=1,n){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,n),this.elementSpan=e}isCount(){return!0}decode(e,n=0){HC(e);const r=e.length-n;return Math.floor(r/this.elementSpan)}encode(e,n,r){return 0}}me.GreedyCount=joe;class K4 extends Qa{constructor(e,n=0,r){if(!(e instanceof kr))throw new TypeError("layout must be a Layout");if(!Number.isInteger(n))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=n}isCount(){return this.layout instanceof Ll||this.layout instanceof Wu}decode(e,n=0){return this.layout.decode(e,n+this.offset)}encode(e,n,r=0){return this.layout.encode(e,n,r+this.offset)}}me.OffsetLayout=K4;class Ll extends kr{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return gr(e).readUIntLE(n,this.span)}encode(e,n,r=0){return gr(n).writeUIntLE(e,r,this.span),this.span}}me.UInt=Ll;class Wu extends kr{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return gr(e).readUIntBE(n,this.span)}encode(e,n,r=0){return gr(n).writeUIntBE(e,r,this.span),this.span}}me.UIntBE=Wu;class vw extends kr{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return gr(e).readIntLE(n,this.span)}encode(e,n,r=0){return gr(n).writeIntLE(e,r,this.span),this.span}}me.Int=vw;class GC extends kr{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return gr(e).readIntBE(n,this.span)}encode(e,n,r=0){return gr(n).writeIntBE(e,r,this.span),this.span}}me.IntBE=GC;const B5=Math.pow(2,32);function QP(t){const e=Math.floor(t/B5),n=t-e*B5;return{hi32:e,lo32:n}}function JP(t,e){return t*B5+e}class Woe extends kr{constructor(e){super(8,e)}decode(e,n=0){const r=gr(e),s=r.readUInt32LE(n),i=r.readUInt32LE(n+4);return JP(i,s)}encode(e,n,r=0){const s=QP(e),i=gr(n);return i.writeUInt32LE(s.lo32,r),i.writeUInt32LE(s.hi32,r+4),8}}me.NearUInt64=Woe;class zoe extends kr{constructor(e){super(8,e)}decode(e,n=0){const r=gr(e),s=r.readUInt32BE(n),i=r.readUInt32BE(n+4);return JP(s,i)}encode(e,n,r=0){const s=QP(e),i=gr(n);return i.writeUInt32BE(s.hi32,r),i.writeUInt32BE(s.lo32,r+4),8}}me.NearUInt64BE=zoe;class Hoe extends kr{constructor(e){super(8,e)}decode(e,n=0){const r=gr(e),s=r.readUInt32LE(n),i=r.readInt32LE(n+4);return JP(i,s)}encode(e,n,r=0){const s=QP(e),i=gr(n);return i.writeUInt32LE(s.lo32,r),i.writeInt32LE(s.hi32,r+4),8}}me.NearInt64=Hoe;class Goe extends kr{constructor(e){super(8,e)}decode(e,n=0){const r=gr(e),s=r.readInt32BE(n),i=r.readUInt32BE(n+4);return JP(s,i)}encode(e,n,r=0){const s=QP(e),i=gr(n);return i.writeInt32BE(s.hi32,r),i.writeUInt32BE(s.lo32,r+4),8}}me.NearInt64BE=Goe;class qoe extends kr{constructor(e){super(4,e)}decode(e,n=0){return gr(e).readFloatLE(n)}encode(e,n,r=0){return gr(n).writeFloatLE(e,r),4}}me.Float=qoe;class Voe extends kr{constructor(e){super(4,e)}decode(e,n=0){return gr(e).readFloatBE(n)}encode(e,n,r=0){return gr(n).writeFloatBE(e,r),4}}me.FloatBE=Voe;class Koe extends kr{constructor(e){super(8,e)}decode(e,n=0){return gr(e).readDoubleLE(n)}encode(e,n,r=0){return gr(n).writeDoubleLE(e,r),8}}me.Double=Koe;class Yoe extends kr{constructor(e){super(8,e)}decode(e,n=0){return gr(e).readDoubleBE(n)}encode(e,n,r=0){return gr(n).writeDoubleBE(e,r),8}}me.DoubleBE=Yoe;class Qoe extends kr{constructor(e,n,r){if(!(e instanceof kr))throw new TypeError("elementLayout must be a Layout");if(!(n instanceof Qa&&n.isCount()||Number.isInteger(n)&&0<=n))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(n instanceof Qa)&&0<e.span&&(s=n*e.span),super(s,r),this.elementLayout=e,this.count=n}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0,s=this.count;if(s instanceof Qa&&(s=s.decode(e,n)),0<this.elementLayout.span)r=s*this.elementLayout.span;else{let i=0;for(;i<s;)r+=this.elementLayout.getSpan(e,n+r),++i}return r}decode(e,n=0){const r=[];let s=0,i=this.count;for(i instanceof Qa&&(i=i.decode(e,n));s<i;)r.push(this.elementLayout.decode(e,n)),n+=this.elementLayout.getSpan(e,n),s+=1;return r}encode(e,n,r=0){const s=this.elementLayout,i=e.reduce((o,a)=>o+s.encode(a,n,r+o),0);return this.count instanceof Qa&&this.count.encode(e.length,n,r),i}}me.Sequence=Qoe;class Joe extends kr{constructor(e,n,r){if(!(Array.isArray(e)&&e.reduce((i,o)=>i&&o instanceof kr,!0)))throw new TypeError("fields must be array of Layout instances");typeof n=="boolean"&&r===void 0&&(r=n,n=void 0);for(const i of e)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=e.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,n),this.fields=e,this.decodePrefixes=!!r}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((s,i)=>{const o=i.getSpan(e,n);return n+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(e,n=0){HC(e);const r=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(r[s.property]=s.decode(e,n)),n+=s.getSpan(e,n),this.decodePrefixes&&e.length===n)break;return r}encode(e,n,r=0){const s=r;let i=0,o=0;for(const a of this.fields){let c=a.span;if(o=0<c?c:0,a.property!==void 0){const l=e[a.property];l!==void 0&&(o=a.encode(l,n,r),0>c&&(c=a.getSpan(n,r)))}i=r,r+=c}return i+o-s}fromArray(e){const n=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<e.length&&(n[r.property]=e.shift());return n}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const n of this.fields)if(n.property===e)return n}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let n=0;for(const r of this.fields){if(r.property===e)return n;0>r.span?n=-1:0<=n&&(n+=r.span)}}}me.Structure=Joe;class Y4{constructor(e){this.property=e}decode(e,n){throw new Error("UnionDiscriminator is abstract")}encode(e,n,r){throw new Error("UnionDiscriminator is abstract")}}me.UnionDiscriminator=Y4;class Sk extends Y4{constructor(e,n){if(!(e instanceof Qa&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(n||e.property||"variant"),this.layout=e}decode(e,n){return this.layout.decode(e,n)}encode(e,n,r){return this.layout.encode(e,n,r)}}me.UnionLayoutDiscriminator=Sk;class Q4 extends kr{constructor(e,n,r){let s;if(e instanceof Ll||e instanceof Wu)s=new Sk(new K4(e));else if(e instanceof Qa&&e.isCount())s=new Sk(e);else if(e instanceof Y4)s=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(n===void 0&&(n=null),!(n===null||n instanceof kr))throw new TypeError("defaultLayout must be null or a Layout");if(n!==null){if(0>n.span)throw new Error("defaultLayout must have constant span");n.property===void 0&&(n=n.replicate("content"))}let i=-1;n&&(i=n.span,0<=i&&(e instanceof Ll||e instanceof Wu)&&(i+=s.layout.span)),super(i,r),this.discriminator=s,this.usesPrefixDiscriminator=e instanceof Ll||e instanceof Wu,this.defaultLayout=n,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(e,n=0){if(0<=this.span)return this.span;const r=this.getVariant(e,n);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,n)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const n=this.registry[e[this.discriminator.property]];if(n&&(!n.layout||n.property&&Object.prototype.hasOwnProperty.call(e,n.property)))return n}else for(const n in this.registry){const r=this.registry[n];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e,n=0){let r;const s=this.discriminator,i=s.decode(e,n),o=this.registry[i];if(o===void 0){const a=this.defaultLayout;let c=0;this.usesPrefixDiscriminator&&(c=s.layout.span),r=this.makeDestinationObject(),r[s.property]=i,r[a.property]=a.decode(e,n+c)}else r=o.decode(e,n);return r}encode(e,n,r=0){const s=this.getSourceVariant(e);if(s===void 0){const i=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=i.layout.span),i.encode(e[i.property],n,r),a+o.encode(e[o.property],n,r+a)}return s.encode(e,n,r)}addVariant(e,n,r){const s=new Zoe(this,e,n,r);return this.registry[e]=s,s}getVariant(e,n=0){let r;return e instanceof Uint8Array?r=this.discriminator.decode(e,n):r=e,this.registry[r]}}me.Union=Q4;class Zoe extends kr{constructor(e,n,r,s){if(!(e instanceof Q4))throw new TypeError("union must be a Union");if(!Number.isInteger(n)||0>n)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&s===void 0&&(s=r,r=null),r){if(!(r instanceof kr))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=e.span;0>e.span&&(i=r?r.span:0,0<=i&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span)),super(i,s),this.union=e,this.variant=n,this.layout=r||null}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(e,n+r)),r+s}decode(e,n=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(e,n))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,n+s):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,n,r=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,n,r);let i=s;if(this.layout&&(this.layout.encode(e[this.property],n,r+s),i+=this.layout.getSpan(n,r+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}me.VariantLayout=Zoe;function Eb(t){return 0>t&&(t+=4294967296),t}class J4 extends kr{constructor(e,n,r){if(!(e instanceof Ll||e instanceof Wu))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof n=="string"&&r===void 0&&(r=n,n=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!n,this.fields=[];let s=0;this._packedSetValue=function(i){return s=Eb(i),this},this._packedGetValue=function(){return s}}decode(e,n=0){const r=this.makeDestinationObject(),s=this.word.decode(e,n);this._packedSetValue(s);for(const i of this.fields)i.property!==void 0&&(r[i.property]=i.decode(e));return r}encode(e,n,r=0){const s=this.word.decode(n,r);this._packedSetValue(s);for(const i of this.fields)if(i.property!==void 0){const o=e[i.property];o!==void 0&&i.encode(o)}return this.word.encode(this._packedGetValue(),n,r)}addField(e,n){const r=new Z4(this,e,n);return this.fields.push(r),r}addBoolean(e){const n=new Xoe(this,e);return this.fields.push(n),n}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const n of this.fields)if(n.property===e)return n}}me.BitStructure=J4;class Z4{constructor(e,n,r){if(!(e instanceof J4))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(n)||0>=n)throw new TypeError("bits must be positive integer");const s=8*e.span,i=e.fields.reduce((o,a)=>o+a.bits,0);if(n+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=e,this.bits=n,this.valueMask=(1<<n)-1,n===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-n),this.wordMask=Eb(this.valueMask<<this.start),this.property=r}decode(e,n){const r=this.container._packedGetValue();return Eb(r&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==Eb(e&this.valueMask))throw new TypeError(V4("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const n=this.container._packedGetValue(),r=Eb(e<<this.start);this.container._packedSetValue(Eb(n&~this.wordMask)|r)}}me.BitField=Z4;let Xoe=class extends Z4{constructor(e,n){super(e,1,n)}decode(e,n){return!!super.decode(e,n)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};me.Boolean=Xoe;let eae=class extends kr{constructor(e,n){if(!(e instanceof Qa&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof Qa||(r=e),super(r,n),this.length=e}getSpan(e,n){let r=this.span;return 0>r&&(r=this.length.decode(e,n)),r}decode(e,n=0){let r=this.span;return 0>r&&(r=this.length.decode(e,n)),gr(e).slice(n,n+r)}encode(e,n,r){let s=this.length;if(this.length instanceof Qa&&(s=e.length),!(e instanceof Uint8Array&&s===e.length))throw new TypeError(V4("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(r+s>n.length)throw new RangeError("encoding overruns Uint8Array");const i=gr(e);return gr(n).write(i.toString("hex"),r,s,"hex"),this.length instanceof Qa&&this.length.encode(s,n,r),s}};me.Blob=eae;class tae extends kr{constructor(e){super(-1,e)}getSpan(e,n=0){HC(e);let r=n;for(;r<e.length&&e[r]!==0;)r+=1;return 1+r-n}decode(e,n=0){const r=this.getSpan(e,n);return gr(e).slice(n,n+r-1).toString("utf-8")}encode(e,n,r=0){typeof e!="string"&&(e=String(e));const s=q4.Buffer.from(e,"utf8"),i=s.length;if(r+i>n.length)throw new RangeError("encoding overruns Buffer");const o=gr(n);return s.copy(o,r),o[r+i]=0,i+1}}me.CString=tae;class nae extends kr{constructor(e,n){if(typeof e=="string"&&n===void 0&&(n=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,n),this.maxSpan=e}getSpan(e,n=0){return HC(e),e.length-n}decode(e,n=0){const r=this.getSpan(e,n);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return gr(e).slice(n,n+r).toString("utf-8")}encode(e,n,r=0){typeof e!="string"&&(e=String(e));const s=q4.Buffer.from(e,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>n.length)throw new RangeError("encoding overruns Buffer");return s.copy(gr(n),r),i}}me.UTF8=nae;class rae extends kr{constructor(e,n){super(0,n),this.value=e}decode(e,n){return this.value}encode(e,n,r){return 0}}me.Constant=rae;me.greedy=(t,e)=>new joe(t,e);var g0=me.offset=(t,e,n)=>new K4(t,e,n),Fn=me.u8=t=>new Ll(1,t),Tl=me.u16=t=>new Ll(2,t);me.u24=t=>new Ll(3,t);var Rt=me.u32=t=>new Ll(4,t);me.u40=t=>new Ll(5,t);me.u48=t=>new Ll(6,t);var Xi=me.nu64=t=>new Woe(t);me.u16be=t=>new Wu(2,t);me.u24be=t=>new Wu(3,t);me.u32be=t=>new Wu(4,t);me.u40be=t=>new Wu(5,t);me.u48be=t=>new Wu(6,t);me.nu64be=t=>new zoe(t);me.s8=t=>new vw(1,t);me.s16=t=>new vw(2,t);me.s24=t=>new vw(3,t);me.s32=t=>new vw(4,t);me.s40=t=>new vw(5,t);me.s48=t=>new vw(6,t);var Mc=me.ns64=t=>new Hoe(t);me.s16be=t=>new GC(2,t);me.s24be=t=>new GC(3,t);me.s32be=t=>new GC(4,t);me.s40be=t=>new GC(5,t);me.s48be=t=>new GC(6,t);me.ns64be=t=>new Goe(t);me.f32=t=>new qoe(t);me.f32be=t=>new Voe(t);me.f64=t=>new Koe(t);me.f64be=t=>new Yoe(t);var Et=me.struct=(t,e,n)=>new Joe(t,e,n);me.bits=(t,e,n)=>new J4(t,e,n);var $o=me.seq=(t,e,n)=>new Qoe(t,e,n);me.union=(t,e,n)=>new Q4(t,e,n);me.unionLayoutDiscriminator=(t,e)=>new Sk(t,e);var Vr=me.blob=(t,e)=>new eae(t,e);me.cstr=t=>new tae(t);me.utf8=(t,e)=>new nae(t,e);me.constant=(t,e)=>new rae(t,e);var gQe=8078e3,mQe=8078001,yQe=8078004,wQe=8078005,bQe=8078006,vQe=8078011;function sae(t){return Array.isArray(t)?"%5B"+t.map(sae).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function EQe([t,e]){return`${t}=${sae(e)}`}function CQe(t){const e=Object.entries(t).map(EQe).join("&");return btoa(e)}function _Qe(t,e={}){{let n=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(n+=` '${CQe(e)}'`),`${n}\``}}var gv=class extends Error{constructor(...[e,n]){let r,s;if(n){const{cause:o,...a}=n;o&&(s={cause:o}),Object.keys(a).length>0&&(r=a)}const i=_Qe(e,r);super(i,s);le(this,"cause",this.cause);le(this,"context");this.context={__code:e,...r},this.name="SolanaError"}};function AQe(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}function SQe(t){return Object.freeze({...t,encode:e=>{const n=new Uint8Array(AQe(e,t));return t.write(e,n,0),n}})}function IQe(t){return Object.freeze({...t,decode:(e,n=0)=>t.read(e,n)[0]})}function ub(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function NQe(t,e){if(ub(t)!==ub(e))throw new gv(yQe);if(ub(t)&&ub(e)&&t.fixedSize!==e.fixedSize)throw new gv(wQe,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!ub(t)&&!ub(e)&&t.maxSize!==e.maxSize)throw new gv(bQe,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}function xQe(t,e,n=0){if(e.length-n<=0)throw new gv(gQe,{codecDescription:t})}function TQe(t,e,n,r=0){const s=n.length-r;if(s<e)throw new gv(mQe,{bytesLength:s,codecDescription:t,expected:e})}function RQe(t,e,n,r){if(r<e||r>n)throw new gv(vQe,{codecDescription:t,max:n,min:e,value:r})}function iae(t){return(t==null?void 0:t.endian)!==1}function kQe(t){return SQe({fixedSize:t.size,write(e,n,r){t.range&&RQe(t.name,t.range[0],t.range[1],e);const s=new ArrayBuffer(t.size);return t.set(new DataView(s),e,iae(t.config)),n.set(new Uint8Array(s),r),r+t.size}})}function PQe(t){return IQe({fixedSize:t.size,read(e,n=0){xQe(t.name,e,n),TQe(t.name,t.size,e,n);const r=new DataView(OQe(e,n,t.size));return[t.get(r,iae(t.config)),n+t.size]}})}function OQe(t,e,n){const r=t.byteOffset+(e??0),s=n??t.byteLength;return t.buffer.slice(r,r+s)}var DQe=(t={})=>kQe({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,n,r)=>e.setBigUint64(0,BigInt(n),r),size:8}),MQe=(t={})=>PQe({config:t,get:(e,n)=>e.getBigUint64(0,n),name:"u64",size:8}),BQe=(t={})=>NQe(DQe(t),MQe(t));class LQe extends TypeError{constructor(e,n){let r;const{message:s,explanation:i,...o}=e,{path:a}=e,c=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(i??c),i!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}}function UQe(t){return aN(t)&&typeof t[Symbol.iterator]=="function"}function aN(t){return typeof t=="object"&&t!=null}function Ik(t){return aN(t)&&!Array.isArray(t)}function Vu(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function $Qe(t){const{done:e,value:n}=t.next();return e?void 0:n}function FQe(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:s,branch:i}=e,{type:o}=n,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Vu(r)}\``}=t;return{value:r,type:o,refinement:a,key:s[s.length-1],path:s,branch:i,...t,message:c}}function*Mq(t,e,n,r){UQe(t)||(t=[t]);for(const s of t){const i=FQe(s,e,n,r);i&&(yield i)}}function*X4(t,e,n={}){const{path:r=[],branch:s=[t],coerce:i=!1,mask:o=!1}=n,a={path:r,branch:s,mask:o};i&&(t=e.coercer(t,a));let c="valid";for(const l of e.validator(t,a))l.explanation=n.message,c="not_valid",yield[l,void 0];for(let[l,u,d]of e.entries(t,a)){const h=X4(u,d,{path:l===void 0?r:[...r,l],branch:l===void 0?s:[...s,u],coerce:i,mask:o,message:n.message});for(const f of h)f[0]?(c=f[0].refinement!=null?"not_refined":"not_valid",yield[f[0],void 0]):i&&(u=f[1],l===void 0?t=u:t instanceof Map?t.set(l,u):t instanceof Set?t.add(u):aN(t)&&(u!==void 0||l in t)&&(t[l]=u))}if(c!=="not_valid")for(const l of e.refiner(t,a))l.explanation=n.message,c="not_refined",yield[l,void 0];c==="valid"&&(yield[void 0,t])}let fh=class{constructor(e){const{type:n,schema:r,validator:s,refiner:i,coercer:o=c=>c,entries:a=function*(){}}=e;this.type=n,this.schema=r,this.entries=a,this.coercer=o,s?this.validator=(c,l)=>{const u=s(c,l);return Mq(u,l,this,c)}:this.validator=()=>[],i?this.refiner=(c,l)=>{const u=i(c,l);return Mq(u,l,this,c)}:this.refiner=()=>[]}assert(e,n){return jQe(e,this,n)}create(e,n){return Ve(e,this,n)}is(e){return oae(e,this)}mask(e,n){return WQe(e,this,n)}validate(e,n={}){return cN(e,this,n)}};function jQe(t,e,n){const r=cN(t,e,{message:n});if(r[0])throw r[0]}function Ve(t,e,n){const r=cN(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function WQe(t,e,n){const r=cN(t,e,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function oae(t,e){return!cN(t,e)[0]}function cN(t,e,n={}){const r=X4(t,e,n),s=$Qe(r);return s[0]?[new LQe(s[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function Ew(t,e){return new fh({type:t,schema:null,validator:e})}function zQe(){return Ew("any",()=>!0)}function Qe(t){return new fh({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Vu(e)}`}})}function ah(){return Ew("boolean",t=>typeof t=="boolean")}function eF(t){return Ew("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${Vu(e)}`)}function ks(t){const e=Vu(t),n=typeof t;return new fh({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator(r){return r===t||`Expected the literal \`${e}\`, but received: ${Vu(r)}`}})}function HQe(){return Ew("never",()=>!1)}function Xe(t){return new fh({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})}function pe(){return Ew("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${Vu(t)}`)}function Gt(t){return new fh({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function aae(t,e){return new fh({type:"record",schema:null,*entries(n){if(aN(n))for(const r in n){const s=n[r];yield[r,r,t],yield[r,s,e]}},validator(n){return Ik(n)||`Expected an object, but received: ${Vu(n)}`},coercer(n){return Ik(n)?{...n}:n}})}function $e(){return Ew("string",t=>typeof t=="string"||`Expected a string, but received: ${Vu(t)}`)}function tF(t){const e=HQe();return new fh({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(t.length,n.length);for(let s=0;s<r;s++)yield[s,n[s],t[s]||e]}},validator(n){return Array.isArray(n)||`Expected an array, but received: ${Vu(n)}`},coercer(n){return Array.isArray(n)?n.slice():n}})}function Pe(t){const e=Object.keys(t);return new fh({type:"type",schema:t,*entries(n){if(aN(n))for(const r of e)yield[r,n[r],t[r]]},validator(n){return Ik(n)||`Expected an object, but received: ${Vu(n)}`},coercer(n){return Ik(n)?{...n}:n}})}function ya(t){const e=t.map(n=>n.type).join(" | ");return new fh({type:"union",schema:null,coercer(n,r){for(const s of t){const[i,o]=s.validate(n,{coerce:!0,mask:r.mask});if(!i)return o}return n},validator(n,r){const s=[];for(const i of t){const[...o]=X4(n,i,r),[a]=o;if(a[0])for(const[c]of o)c&&s.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Vu(n)}`,...s]}})}function qC(){return Ew("unknown",()=>!0)}function lN(t,e,n){return new fh({...t,coercer:(r,s)=>oae(r,e)?t.coercer(n(r,s),s):t.coercer(r,s)})}const cae=aI(gGe),GQe=cae.v4,qQe=function(t,e,n,r){if(typeof t!="string")throw new TypeError(t+" must be a string");r=r||{};const s=typeof r.version=="number"?r.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const i={method:t};if(s===2&&(i.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");i.params=e}if(typeof n>"u"){const o=typeof r.generator=="function"?r.generator:function(){return GQe()};i.id=o(i,r)}else s===2&&n===null?r.notificationIdNull&&(i.id=null):i.id=n;return i};var VQe=qQe;const KQe=cae.v4,YQe=VQe,RS=function(t,e){if(!(this instanceof RS))return new RS(t,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return KQe()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=t};var QQe=RS;RS.prototype.request=function(t,e,n,r){const s=this;let i=null;const o=Array.isArray(t)&&typeof e=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&t&&typeof t=="object"&&typeof e=="function")r=e,i=t;else{typeof n=="function"&&(r=n,n=void 0);const l=typeof r=="function";try{i=YQe(t,e,n,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(u){if(l)return r(u);throw u}if(!l)return i}let c;try{c=JSON.stringify(i,this.options.replacer)}catch(l){return r(l)}return this.callServer(c,function(l,u){s._parseResponse(l,u,r)}),i};RS.prototype._parseResponse=function(t,e,n){if(t){n(t);return}if(!e)return n();let r;try{r=JSON.parse(e,this.options.reviver)}catch(s){return n(s)}if(n.length===3)if(Array.isArray(r)){const s=function(o){return typeof o.error<"u"},i=function(o){return!s(o)};return n(null,r.filter(s),r.filter(i))}else return n(null,r.error,r.result);n(null,r)};const JQe=ch(QQe);var ZQe=class extends L${constructor(e,n,r){super();le(this,"socket");this.socket=new window.WebSocket(e,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=s=>this.emit("message",s.data),this.socket.onerror=s=>this.emit("error",s),this.socket.onclose=s=>{this.emit("close",s.code,s.reason)}}send(e,n,r){const s=r||n;try{this.socket.send(e),s()}catch(i){s(i)}}close(e,n){this.socket.close(e,n)}addEventListener(e,n,r){this.socket.addEventListener(e,n,r)}};function XQe(t,e){return new ZQe(t,e)}var eJe=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},tJe=class extends L${constructor(e,n="ws://localhost:8080",{autoconnect:r=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...a}={},c,l){super();le(this,"address");le(this,"rpc_id");le(this,"queue");le(this,"options");le(this,"autoconnect");le(this,"ready");le(this,"reconnect");le(this,"reconnect_timer_id");le(this,"reconnect_interval");le(this,"max_reconnects");le(this,"rest_options");le(this,"current_reconnects");le(this,"generate_request_id");le(this,"socket");le(this,"webSocketFactory");le(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=n,this.autoconnect=r,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=c||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),l?this.dataPack=l:this.dataPack=new eJe,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,n,r,s){return!s&&typeof r=="object"&&(s=r,r=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(e,n),c={jsonrpc:"2.0",method:e,params:n||void 0,id:a};this.socket.send(this.dataPack.encode(c),s,l=>{if(l)return o(l);this.queue[a]={promise:[i,o]},r&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},r))})})}async login(e){const n=await this.call("rpc.login",e);if(!n)throw new Error("authentication failed");return n}async listMethods(){return await this.call("__listMethods")}notify(e,n){return new Promise((r,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:e,params:n};this.socket.send(this.dataPack.encode(i),o=>{if(o)return s(o);r()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.on",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+n[e]);return n}async unsubscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.off",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+n);return n}close(e,n){this.socket.close(e||1e3,n)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,n){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,n),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=mn.Buffer.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const s=[r.notification];if(r.params.constructor===Object)s.push(r.params);else for(let i=0;i<r.params.length;i++)s.push(r.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",r,s),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(e,n),this.reconnect_interval)))})}};oN.utils.randomPrivateKey;oN.getPublicKey;function Bq(t){try{return oN.ExtendedPoint.fromHex(t),!0}catch{return!1}}const lae=(t,e)=>oN.sign(t,e.slice(0,32)),nJe=oN.verify,ro=t=>mn.Buffer.isBuffer(t)?t:t instanceof Uint8Array?mn.Buffer.from(t.buffer,t.byteOffset,t.byteLength):mn.Buffer.from(t);class rJe{constructor(e){Object.assign(this,e)}encode(){return mn.Buffer.from($oe(PT,this))}static decode(e){return Foe(PT,this,e)}static decodeUnchecked(e){return Doe(PT,this,e)}}const PT=new Map;var uae;const sJe=32,Qg=32;function iJe(t){return t._bn!==void 0}let Lq=1;class st extends rJe{constructor(e){if(super({}),this._bn=void 0,iJe(e))this._bn=e._bn;else{if(typeof e=="string"){const n=co.decode(e);if(n.length!=Qg)throw new Error("Invalid public key input");this._bn=new Dq(n)}else this._bn=new Dq(e);if(this._bn.byteLength()>Qg)throw new Error("Invalid public key input")}}static unique(){const e=new st(Lq);return Lq+=1,new st(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return co.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(mn.Buffer);if(e.length===Qg)return e;const n=mn.Buffer.alloc(32);return e.copy(n,32-e.length),n}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,n,r){const s=mn.Buffer.concat([e.toBuffer(),mn.Buffer.from(n),r.toBuffer()]),i=hL(s);return new st(i)}static createProgramAddressSync(e,n){let r=mn.Buffer.alloc(0);e.forEach(function(i){if(i.length>sJe)throw new TypeError("Max seed length exceeded");r=mn.Buffer.concat([r,ro(i)])}),r=mn.Buffer.concat([r,n.toBuffer(),mn.Buffer.from("ProgramDerivedAddress")]);const s=hL(r);if(Bq(s))throw new Error("Invalid seeds, address must fall off the curve");return new st(s)}static async createProgramAddress(e,n){return this.createProgramAddressSync(e,n)}static findProgramAddressSync(e,n){let r=255,s;for(;r!=0;){try{const i=e.concat(mn.Buffer.from([r]));s=this.createProgramAddressSync(i,n)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,n){return this.findProgramAddressSync(e,n)}static isOnCurve(e){const n=new st(e);return Bq(n.toBytes())}}uae=st;st.default=new uae("11111111111111111111111111111111");PT.set(st,{kind:"struct",fields:[["_bn","u256"]]});new st("BPFLoader1111111111111111111111111111111111");const mv=1232,nF=127,Nk=64;class dae extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(dae.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class hae extends Error{constructor(e,n){super(`Transaction was not confirmed in ${n.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(hae.prototype,"name",{value:"TransactionExpiredTimeoutError"});class a_ extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(a_.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class xk{constructor(e,n){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=n}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const n of this.keySegments()){if(e<n.length)return n[e];e-=n.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,o)=>{r.set(i.toBase58(),o)});const s=i=>{const o=r.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const Un=(t="publicKey")=>Vr(32,t),oJe=(t="signature")=>Vr(64,t),Gb=(t="string")=>{const e=Et([Rt("length"),Rt("lengthPadding"),Vr(g0(Rt(),-8),"chars")],t),n=e.decode.bind(e),r=e.encode.bind(e),s=e;return s.decode=(i,o)=>n(i,o).chars.toString(),s.encode=(i,o,a)=>{const c={chars:mn.Buffer.from(i,"utf8")};return r(c,o,a)},s.alloc=i=>Rt().span+Rt().span+mn.Buffer.from(i,"utf8").length,s},aJe=(t="authorized")=>Et([Un("staker"),Un("withdrawer")],t),cJe=(t="lockup")=>Et([Mc("unixTimestamp"),Mc("epoch"),Un("custodian")],t),lJe=(t="voteInit")=>Et([Un("nodePubkey"),Un("authorizedVoter"),Un("authorizedWithdrawer"),Fn("commission")],t),uJe=(t="voteAuthorizeWithSeedArgs")=>Et([Rt("voteAuthorizationType"),Un("currentAuthorityDerivedKeyOwnerPubkey"),Gb("currentAuthorityDerivedKeySeed"),Un("newAuthorized")],t);function fae(t,e){const n=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(e[s.property]);if("count"in s&&"elementLayout"in s){const i=e[s.property];if(Array.isArray(i))return i.length*n(s.elementLayout)}else if("fields"in s)return fae({layout:s},e[s.property]);return 0};let r=0;return t.layout.fields.forEach(s=>{r+=n(s)}),r}function Bc(t){let e=0,n=0;for(;;){let r=t.shift();if(e|=(r&127)<<n*7,n+=1,!(r&128))break}return e}function Lc(t,e){let n=e;for(;;){let r=n&127;if(n>>=7,n==0){t.push(r);break}else r|=128,t.push(r)}}function As(t,e){if(!t)throw new Error(e||"Assertion failed")}class ZP{constructor(e,n){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=n}static compile(e,n){const r=new Map,s=o=>{const a=o.toBase58();let c=r.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,c)),c},i=s(n);i.isSigner=!0,i.isWritable=!0;for(const o of e){s(o.programId).isInvoked=!0;for(const a of o.keys){const c=s(a.pubkey);c.isSigner||(c.isSigner=a.isSigner),c.isWritable||(c.isWritable=a.isWritable)}}return new ZP(n,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];As(e.length<=256,"Max static account keys length exceeded");const n=e.filter(([,c])=>c.isSigner&&c.isWritable),r=e.filter(([,c])=>c.isSigner&&!c.isWritable),s=e.filter(([,c])=>!c.isSigner&&c.isWritable),i=e.filter(([,c])=>!c.isSigner&&!c.isWritable),o={numRequiredSignatures:n.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{As(n.length>0,"Expected at least one writable signer key");const[c]=n[0];As(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...n.map(([c])=>new st(c)),...r.map(([c])=>new st(c)),...s.map(([c])=>new st(c)),...i.map(([c])=>new st(c))];return[o,a]}extractTableLookup(e){const[n,r]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(n.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(e,n){const r=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(n(o)){const a=new st(i),c=e.findIndex(l=>l.equals(a));c>=0&&(As(c<256,"Max lookup table index exceeded"),r.push(c),s.push(a),this.keyMetaMap.delete(i))}return[r,s]}}const pae="Reached end of buffer unexpectedly";function sf(t){if(t.length===0)throw new Error(pae);return t.shift()}function Uc(t,...e){const[n]=e;if(e.length===2?n+(e[1]??0)>t.length:n>=t.length)throw new Error(pae);return t.splice(...e)}class Df{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(n=>new st(n)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(n=>this.indexToProgramIds.set(n.programIdIndex,this.accountKeys[n.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:co.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new xk(this.staticAccountKeys)}static compile(e){const n=ZP.compile(e.instructions,e.payerKey),[r,s]=n.getMessageComponents(),o=new xk(s).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:co.encode(a.data)}));return new Df({header:r,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-n,i=this.accountKeys.length-n-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=n-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,n)=>!this.isProgramId(n))}serialize(){const e=this.accountKeys.length;let n=[];Lc(n,e);const r=this.instructions.map(d=>{const{accounts:h,programIdIndex:f}=d,p=Array.from(co.decode(d.data));let g=[];Lc(g,h.length);let m=[];return Lc(m,p.length),{programIdIndex:f,keyIndicesCount:mn.Buffer.from(g),keyIndices:h,dataLength:mn.Buffer.from(m),data:p}});let s=[];Lc(s,r.length);let i=mn.Buffer.alloc(mv);mn.Buffer.from(s).copy(i);let o=s.length;r.forEach(d=>{const f=Et([Fn("programIdIndex"),Vr(d.keyIndicesCount.length,"keyIndicesCount"),$o(Fn("keyIndex"),d.keyIndices.length,"keyIndices"),Vr(d.dataLength.length,"dataLength"),$o(Fn("userdatum"),d.data.length,"data")]).encode(d,i,o);o+=f}),i=i.slice(0,o);const a=Et([Vr(1,"numRequiredSignatures"),Vr(1,"numReadonlySignedAccounts"),Vr(1,"numReadonlyUnsignedAccounts"),Vr(n.length,"keyCount"),$o(Un("key"),e,"keys"),Un("recentBlockhash")]),c={numRequiredSignatures:mn.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:mn.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:mn.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:mn.Buffer.from(n),keys:this.accountKeys.map(d=>ro(d.toBytes())),recentBlockhash:co.decode(this.recentBlockhash)};let l=mn.Buffer.alloc(2048);const u=a.encode(c,l);return i.copy(l,u),l.slice(0,u+i.length)}static from(e){let n=[...e];const r=sf(n);if(r!==(r&nF))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=sf(n),i=sf(n),o=Bc(n);let a=[];for(let h=0;h<o;h++){const f=Uc(n,0,Qg);a.push(new st(mn.Buffer.from(f)))}const c=Uc(n,0,Qg),l=Bc(n);let u=[];for(let h=0;h<l;h++){const f=sf(n),p=Bc(n),g=Uc(n,0,p),m=Bc(n),y=Uc(n,0,m),w=co.encode(mn.Buffer.from(y));u.push({programIdIndex:f,accounts:g,data:w})}const d={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:co.encode(mn.Buffer.from(c)),accountKeys:a,instructions:u};return new Df(d)}}class kS{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const n of this.addressTableLookups)e+=n.readonlyIndexes.length+n.writableIndexes.length;return e}getAccountKeys(e){let n;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");n=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)n=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new xk(this.staticAccountKeys,n)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const s=e-r,i=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return s<i}else if(e>=this.header.numRequiredSignatures){const s=e-n,o=r-n-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=n-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){const n={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=e.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)n.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)n.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return n}static compile(e){const n=ZP.compile(e.instructions,e.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const u of i){const d=n.extractTableLookup(u);if(d!==void 0){const[h,{writable:f,readonly:p}]=d;r.push(h),s.writable.push(...f),s.readonly.push(...p)}}const[o,a]=n.getMessageComponents(),l=new xk(a,s).compileInstructions(e.instructions);return new kS({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:l,addressTableLookups:r})}serialize(){const e=Array();Lc(e,this.staticAccountKeys.length);const n=this.serializeInstructions(),r=Array();Lc(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Lc(i,this.addressTableLookups.length);const o=Et([Fn("prefix"),Et([Fn("numRequiredSignatures"),Fn("numReadonlySignedAccounts"),Fn("numReadonlyUnsignedAccounts")],"header"),Vr(e.length,"staticAccountKeysLength"),$o(Un(),this.staticAccountKeys.length,"staticAccountKeys"),Un("recentBlockhash"),Vr(r.length,"instructionsLength"),Vr(n.length,"serializedInstructions"),Vr(i.length,"addressTableLookupsLength"),Vr(s.length,"serializedAddressTableLookups")]),a=new Uint8Array(mv),l=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(u=>u.toBytes()),recentBlockhash:co.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:n,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},a);return a.slice(0,l)}serializeInstructions(){let e=0;const n=new Uint8Array(mv);for(const r of this.compiledInstructions){const s=Array();Lc(s,r.accountKeyIndexes.length);const i=Array();Lc(i,r.data.length);const o=Et([Fn("programIdIndex"),Vr(s.length,"encodedAccountKeyIndexesLength"),$o(Fn(),r.accountKeyIndexes.length,"accountKeyIndexes"),Vr(i.length,"encodedDataLength"),Vr(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},n,e)}return n.slice(0,e)}serializeAddressTableLookups(){let e=0;const n=new Uint8Array(mv);for(const r of this.addressTableLookups){const s=Array();Lc(s,r.writableIndexes.length);const i=Array();Lc(i,r.readonlyIndexes.length);const o=Et([Un("accountKey"),Vr(s.length,"encodedWritableIndexesLength"),$o(Fn(),r.writableIndexes.length,"writableIndexes"),Vr(i.length,"encodedReadonlyIndexesLength"),$o(Fn(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},n,e)}return n.slice(0,e)}static deserialize(e){let n=[...e];const r=sf(n),s=r&nF;As(r!==s,"Expected versioned message but received legacy message");const i=s;As(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:sf(n),numReadonlySignedAccounts:sf(n),numReadonlyUnsignedAccounts:sf(n)},a=[],c=Bc(n);for(let p=0;p<c;p++)a.push(new st(Uc(n,0,Qg)));const l=co.encode(Uc(n,0,Qg)),u=Bc(n),d=[];for(let p=0;p<u;p++){const g=sf(n),m=Bc(n),y=Uc(n,0,m),w=Bc(n),C=new Uint8Array(Uc(n,0,w));d.push({programIdIndex:g,accountKeyIndexes:y,data:C})}const h=Bc(n),f=[];for(let p=0;p<h;p++){const g=new st(Uc(n,0,Qg)),m=Bc(n),y=Uc(n,0,m),w=Bc(n),C=Uc(n,0,w);f.push({accountKey:g,writableIndexes:y,readonlyIndexes:C})}return new kS({header:o,staticAccountKeys:a,recentBlockhash:l,compiledInstructions:d,addressTableLookups:f})}}const gae={deserializeMessageVersion(t){const e=t[0],n=e&nF;return n===e?"legacy":n},deserialize:t=>{const e=gae.deserializeMessageVersion(t);if(e==="legacy")return Df.from(t);if(e===0)return kS.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let gp=function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t}({});const dJe=mn.Buffer.alloc(Nk).fill(0);class io{constructor(e){this.keys=void 0,this.programId=void 0,this.data=mn.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:n,isWritable:r})=>({pubkey:e.toJSON(),isSigner:n,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}let Ja=class L5{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:n,nonceInfo:r}=e;this.minNonceContextSlot=n,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:n,lastValidBlockHeight:r}=e;this.recentBlockhash=n,this.lastValidBlockHeight=r}else{const{recentBlockhash:n,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=n}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(n=>{"instructions"in n?this.instructions=this.instructions.concat(n.instructions):"data"in n&&"programId"in n&&"keys"in n?this.instructions.push(n):this.instructions.push(new io(n))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,n;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?n=[this.nonceInfo.nonceInstruction,...this.instructions]:n=this.instructions):(e=this.recentBlockhash,n=this.instructions),!e)throw new Error("Transaction recentBlockhash required");n.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let g=0;g<n.length;g++)if(n[g].programId===void 0)throw new Error(`Transaction instruction index ${g} has undefined program id`);const s=[],i=[];n.forEach(g=>{g.keys.forEach(y=>{i.push({...y})});const m=g.programId.toString();s.includes(m)||s.push(m)}),s.forEach(g=>{i.push({pubkey:new st(g),isSigner:!1,isWritable:!1})});const o=[];i.forEach(g=>{const m=g.pubkey.toString(),y=o.findIndex(w=>w.pubkey.toString()===m);y>-1?(o[y].isWritable=o[y].isWritable||g.isWritable,o[y].isSigner=o[y].isSigner||g.isSigner):o.push(g)}),o.sort(function(g,m){if(g.isSigner!==m.isSigner)return g.isSigner?-1:1;if(g.isWritable!==m.isWritable)return g.isWritable?-1:1;const y={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return g.pubkey.toBase58().localeCompare(m.pubkey.toBase58(),"en",y)});const a=o.findIndex(g=>g.pubkey.equals(r));if(a>-1){const[g]=o.splice(a,1);g.isSigner=!0,g.isWritable=!0,o.unshift(g)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const g of this.signatures){const m=o.findIndex(y=>y.pubkey.equals(g.publicKey));if(m>-1)o[m].isSigner||(o[m].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${g.publicKey.toString()}`)}let c=0,l=0,u=0;const d=[],h=[];o.forEach(({pubkey:g,isSigner:m,isWritable:y})=>{m?(d.push(g.toString()),c+=1,y||(l+=1)):(h.push(g.toString()),y||(u+=1))});const f=d.concat(h),p=n.map(g=>{const{data:m,programId:y}=g;return{programIdIndex:f.indexOf(y.toString()),accounts:g.keys.map(w=>f.indexOf(w.pubkey.toString())),data:co.encode(m)}});return p.forEach(g=>{As(g.programIdIndex>=0),g.accounts.forEach(m=>As(m>=0))}),new Df({header:{numRequiredSignatures:c,numReadonlySignedAccounts:l,numReadonlyUnsignedAccounts:u},accountKeys:f,recentBlockhash:e,instructions:p})}_compile(){const e=this.compileMessage(),n=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===n.length&&this.signatures.every((s,i)=>n[i].equals(s.publicKey))||(this.signatures=n.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const n=new Set;this.signatures=e.filter(r=>{const s=r.toString();return n.has(s)?!1:(n.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const i of e){const o=i.publicKey.toString();n.has(o)||(n.add(o),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const i of e){const o=i.publicKey.toString();n.has(o)||(n.add(o),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(e,...n){const r=e.serialize();n.forEach(s=>{const i=lae(r,s.secretKey);this._addSignature(s.publicKey,ro(i))})}addSignature(e,n){this._compile(),this._addSignature(e,n)}_addSignature(e,n){As(n.length===64);const r=this.signatures.findIndex(s=>e.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=mn.Buffer.from(n)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,n){const r={};for(const{signature:s,publicKey:i}of this.signatures)s===null?n&&(r.missing||(r.missing=[])).push(i):nJe(s,e,i.toBytes())||(r.invalid||(r.invalid=[])).push(i);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:n,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(s,n);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(e){const{signatures:n}=this,r=[];Lc(r,n.length);const s=r.length+n.length*64+e.length,i=mn.Buffer.alloc(s);return As(n.length<256),mn.Buffer.from(r).copy(i,0),n.forEach(({signature:o},a)=>{o!==null&&(As(o.length===64,"signature has invalid length"),mn.Buffer.from(o).copy(i,r.length+a*64))}),e.copy(i,r.length+n.length*64),As(i.length<=mv,`Transaction too large: ${i.length} > ${mv}`),i}get keys(){return As(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return As(this.instructions.length===1),this.instructions[0].programId}get data(){return As(this.instructions.length===1),this.instructions[0].data}static from(e){let n=[...e];const r=Bc(n);let s=[];for(let i=0;i<r;i++){const o=Uc(n,0,Nk);s.push(co.encode(mn.Buffer.from(o)))}return L5.populate(Df.from(n),s)}static populate(e,n=[]){const r=new L5;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),n.forEach((s,i)=>{const o={signature:s==co.encode(dJe)?null:co.decode(s),publicKey:e.accountKeys[i]};r.signatures.push(o)}),e.instructions.forEach(s=>{const i=s.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:r.signatures.some(c=>c.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});r.instructions.push(new io({keys:i,programId:e.accountKeys[s.programIdIndex],data:co.decode(s.data)}))}),r._message=e,r._json=r.toJSON(),r}};class pm{get version(){return this.message.version}constructor(e,n){if(this.signatures=void 0,this.message=void 0,n!==void 0)As(n.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=n;else{const r=[];for(let s=0;s<e.header.numRequiredSignatures;s++)r.push(new Uint8Array(Nk));this.signatures=r}this.message=e}serialize(){const e=this.message.serialize(),n=Array();Lc(n,this.signatures.length);const r=Et([Vr(n.length,"encodedSignaturesLength"),$o(oJe(),this.signatures.length,"signatures"),Vr(e.length,"serializedMessage")]),s=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(n),signatures:this.signatures,serializedMessage:e},s);return s.slice(0,i)}static deserialize(e){let n=[...e];const r=[],s=Bc(n);for(let o=0;o<s;o++)r.push(new Uint8Array(Uc(n,0,Nk)));const i=gae.deserialize(new Uint8Array(n));return new pm(i,r)}sign(e){const n=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of e){const i=r.findIndex(o=>o.equals(s.publicKey));As(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=lae(n,s.secretKey)}}addSignature(e,n){As(n.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(e));As(s>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=n}}const hJe=160,fJe=64,pJe=hJe/fJe,gJe=1e3/pJe;new st("SysvarC1ock11111111111111111111111111111111");new st("SysvarEpochSchedu1e111111111111111111111111");new st("Sysvar1nstructions1111111111111111111111111");const fM=new st("SysvarRecentB1ockHashes11111111111111111111"),Uq=new st("SysvarRent111111111111111111111111111111111");new st("SysvarRewards111111111111111111111111111111");new st("SysvarS1otHashes111111111111111111111111111");new st("SysvarS1otHistory11111111111111111111111111");new st("SysvarStakeHistory1111111111111111111111111");class $q extends Error{constructor({action:e,signature:n,transactionMessage:r,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${n} resulted in an error. 
${r}. `+i+o;break;case"simulate":a=`Simulation failed. 
Message: ${r}. 
`+i+o;break;default:a=`Unknown action '${(c=>c)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=n,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((n,r)=>{e.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,n(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class Tt extends Error{constructor({code:e,message:n,data:r},s){super(s!=null?`${s}: ${n}`:n),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}function Cb(t){return new Promise(e=>setTimeout(e,t))}function Bo(t,e){const n=t.layout.span>=0?t.layout.span:fae(t,e),r=mn.Buffer.alloc(n),s=Object.assign({instruction:t.index},e);return t.layout.encode(s,r),r}const mJe=Xi("lamportsPerSignature"),mae=Et([Rt("version"),Rt("state"),Un("authorizedPubkey"),Un("nonce"),Et([mJe],"feeCalculator")]),Fq=mae.span;class rF{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const n=mae.decode(ro(e),0);return new rF({authorizedPubkey:new st(n.authorizedPubkey),nonce:new st(n.nonce).toString(),feeCalculator:n.feeCalculator})}}function rC(t){const e=Vr(8,t),n=e.decode.bind(e),r=e.encode.bind(e),s=e,i=BQe();return s.decode=(o,a)=>{const c=n(o,a);return i.decode(c)},s.encode=(o,a,c)=>{const l=i.encode(o);return r(l,a,c)},s}const ul=Object.freeze({Create:{index:0,layout:Et([Rt("instruction"),Mc("lamports"),Mc("space"),Un("programId")])},Assign:{index:1,layout:Et([Rt("instruction"),Un("programId")])},Transfer:{index:2,layout:Et([Rt("instruction"),rC("lamports")])},CreateWithSeed:{index:3,layout:Et([Rt("instruction"),Un("base"),Gb("seed"),Mc("lamports"),Mc("space"),Un("programId")])},AdvanceNonceAccount:{index:4,layout:Et([Rt("instruction")])},WithdrawNonceAccount:{index:5,layout:Et([Rt("instruction"),Mc("lamports")])},InitializeNonceAccount:{index:6,layout:Et([Rt("instruction"),Un("authorized")])},AuthorizeNonceAccount:{index:7,layout:Et([Rt("instruction"),Un("authorized")])},Allocate:{index:8,layout:Et([Rt("instruction"),Mc("space")])},AllocateWithSeed:{index:9,layout:Et([Rt("instruction"),Un("base"),Gb("seed"),Mc("space"),Un("programId")])},AssignWithSeed:{index:10,layout:Et([Rt("instruction"),Un("base"),Gb("seed"),Un("programId")])},TransferWithSeed:{index:11,layout:Et([Rt("instruction"),rC("lamports"),Gb("seed"),Un("programId")])},UpgradeNonceAccount:{index:12,layout:Et([Rt("instruction")])}});class sC{constructor(){}static createAccount(e){const n=ul.Create,r=Bo(n,{lamports:e.lamports,space:e.space,programId:ro(e.programId.toBuffer())});return new io({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let n,r;if("basePubkey"in e){const s=ul.TransferWithSeed;n=Bo(s,{lamports:BigInt(e.lamports),seed:e.seed,programId:ro(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=ul.Transfer;n=Bo(s,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new io({keys:r,programId:this.programId,data:n})}static assign(e){let n,r;if("basePubkey"in e){const s=ul.AssignWithSeed;n=Bo(s,{base:ro(e.basePubkey.toBuffer()),seed:e.seed,programId:ro(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=ul.Assign;n=Bo(s,{programId:ro(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new io({keys:r,programId:this.programId,data:n})}static createAccountWithSeed(e){const n=ul.CreateWithSeed,r=Bo(n,{base:ro(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:ro(e.programId.toBuffer())});let s=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||s.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new io({keys:s,programId:this.programId,data:r})}static createNonceAccount(e){const n=new Ja;"basePubkey"in e&&"seed"in e?n.add(sC.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Fq,programId:this.programId})):n.add(sC.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Fq,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return n.add(this.nonceInitialize(r)),n}static nonceInitialize(e){const n=ul.InitializeNonceAccount,r=Bo(n,{authorized:ro(e.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:fM,isSigner:!1,isWritable:!1},{pubkey:Uq,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new io(s)}static nonceAdvance(e){const n=ul.AdvanceNonceAccount,r=Bo(n),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:fM,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new io(s)}static nonceWithdraw(e){const n=ul.WithdrawNonceAccount,r=Bo(n,{lamports:e.lamports});return new io({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:fM,isSigner:!1,isWritable:!1},{pubkey:Uq,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){const n=ul.AuthorizeNonceAccount,r=Bo(n,{authorized:ro(e.newAuthorizedPubkey.toBuffer())});return new io({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let n,r;if("basePubkey"in e){const s=ul.AllocateWithSeed;n=Bo(s,{base:ro(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:ro(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=ul.Allocate;n=Bo(s,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new io({keys:r,programId:this.programId,data:n})}}sC.programId=new st("11111111111111111111111111111111");new st("BPFLoader2111111111111111111111111111111111");function yJe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pM,jq;function wJe(){if(jq)return pM;jq=1;var t=Object.prototype.toString,e=Object.keys||function(r){var s=[];for(var i in r)s.push(i);return s};function n(r,s){var i,o,a,c,l,u,d;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return n(r.toJSON(),s);if(d=t.call(r),d==="[object Array]"){for(a="[",o=r.length-1,i=0;i<o;i++)a+=n(r[i],!0)+",";return o>-1&&(a+=n(r[i],!0)),a+"]"}else if(d==="[object Object]"){for(c=e(r).sort(),o=c.length,a="",i=0;i<o;)l=c[i],u=n(r[l],!1),u!==void 0&&(a&&(a+=","),a+=JSON.stringify(l)+":"+u),i++;return"{"+a+"}"}else return JSON.stringify(r);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return pM=function(r){var s=n(r,!1);if(s!==void 0)return""+s},pM}var bJe=wJe(),Wq=yJe(bJe);const B1=32;function gM(t){let e=0;for(;t>1;)t/=2,e++;return e}function vJe(t){return t===0?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class EJe{constructor(e,n,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=n,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const n=gM(vJe(e+B1+1))-gM(B1)-1,r=this.getSlotsInEpoch(n),s=e-(r-B1);return[n,s]}else{const n=e-this.firstNormalSlot,r=Math.floor(n/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=n%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*B1:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+gM(B1)):this.slotsPerEpoch}}var CJe=globalThis.fetch;class _Je extends tJe{constructor(e,n,r){const s=i=>{const o=XQe(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...n});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,e,n,r),this.underlyingSocket=void 0}call(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}notify(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}function AJe(t,e){let n;try{n=t.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(n.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${n.typeIndex} != ${t.index}`);return n}const zq=56;class Hq{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const n=AJe(SJe,e),r=e.length-zq;As(r>=0,"lookup table is invalid"),As(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=Et([$o(Un(),s,"addresses")]).decode(e.slice(zq));return{deactivationSlot:n.deactivationSlot,lastExtendedSlot:n.lastExtendedSlot,lastExtendedSlotStartIndex:n.lastExtendedStartIndex,authority:n.authority.length!==0?new st(n.authority[0]):void 0,addresses:i.map(o=>new st(o))}}}const SJe={index:1,layout:Et([Rt("typeIndex"),rC("deactivationSlot"),Xi("lastExtendedSlot"),Fn("lastExtendedStartIndex"),Fn(),$o(Un(),g0(Fn(),-1),"authority")])},IJe=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function NJe(t){const e=t.match(IJe);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[n,r,s,i]=e,o=t.startsWith("https:")?"wss:":"ws:",a=s==null?null:parseInt(s.slice(1),10),c=a==null?"":`:${a+1}`;return`${o}//${r}${c}${i}`}const Us=lN(eF(st),$e(),t=>new st(t)),yae=tF([$e(),ks("base64")]),sF=lN(eF(mn.Buffer),yae,t=>mn.Buffer.from(t[0],"base64")),xJe=30*1e3;function TJe(t){if(/^https?:/.test(t)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function ts(t){let e,n;if(typeof t=="string")e=t;else if(t){const{commitment:r,...s}=t;e=r,n=s}return{commitment:e,config:n}}function Gq(t){return t.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function wae(t){return ya([Pe({jsonrpc:ks("2.0"),id:$e(),result:t}),Pe({jsonrpc:ks("2.0"),id:$e(),error:Pe({code:qC(),message:$e(),data:Gt(zQe())})})])}const RJe=wae(qC());function Tn(t){return lN(wae(t),RJe,e=>"error"in e?e:{...e,result:Ve(e.result,t)})}function Qs(t){return Tn(Pe({context:Pe({slot:pe()}),value:t}))}function XP(t){return Pe({context:Pe({slot:pe()}),value:t})}function mM(t,e){return t===0?new kS({header:e.header,staticAccountKeys:e.accountKeys.map(n=>new st(n)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(n=>({programIdIndex:n.programIdIndex,accountKeyIndexes:n.accounts,data:co.decode(n.data)})),addressTableLookups:e.addressTableLookups}):new Df(e)}const kJe=Pe({foundation:pe(),foundationTerm:pe(),initial:pe(),taper:pe(),terminal:pe()}),PJe=Tn(Qe(Xe(Pe({epoch:pe(),effectiveSlot:pe(),amount:pe(),postBalance:pe(),commission:Gt(Xe(pe()))})))),OJe=Qe(Pe({slot:pe(),prioritizationFee:pe()})),DJe=Pe({total:pe(),validator:pe(),foundation:pe(),epoch:pe()}),MJe=Pe({epoch:pe(),slotIndex:pe(),slotsInEpoch:pe(),absoluteSlot:pe(),blockHeight:Gt(pe()),transactionCount:Gt(pe())}),BJe=Pe({slotsPerEpoch:pe(),leaderScheduleSlotOffset:pe(),warmup:ah(),firstNormalEpoch:pe(),firstNormalSlot:pe()}),LJe=aae($e(),Qe(pe())),Cw=Xe(ya([Pe({}),$e()])),UJe=Pe({err:Cw}),$Je=ks("receivedSignature"),FJe=Pe({"solana-core":$e(),"feature-set":Gt(pe())}),jJe=Pe({program:$e(),programId:Us,parsed:qC()}),WJe=Pe({programId:Us,accounts:Qe(Us),data:$e()}),qq=Qs(Pe({err:Xe(ya([Pe({}),$e()])),logs:Xe(Qe($e())),accounts:Gt(Xe(Qe(Xe(Pe({executable:ah(),owner:$e(),lamports:pe(),data:Qe($e()),rentEpoch:Gt(pe())}))))),unitsConsumed:Gt(pe()),returnData:Gt(Xe(Pe({programId:$e(),data:tF([$e(),ks("base64")])}))),innerInstructions:Gt(Xe(Qe(Pe({index:pe(),instructions:Qe(ya([jJe,WJe]))}))))})),zJe=Qs(Pe({byIdentity:aae($e(),Qe(pe())),range:Pe({firstSlot:pe(),lastSlot:pe()})}));function HJe(t,e,n,r,s,i){const o=n||CJe;let a;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return r&&(c=async(u,d)=>{const h=await new Promise((f,p)=>{try{r(u,d,(g,m)=>f([g,m]))}catch(g){p(g)}});return await o(...h)}),new JQe(async(u,d)=>{const h={method:"POST",body:u,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},HZe)};try{let f=5,p,g=500;for(;c?p=await c(t,h):p=await o(t,h),!(p.status!==429||s===!0||(f-=1,f===0));)console.error(`Server responded with ${p.status} ${p.statusText}.  Retrying after ${g}ms delay...`),await Cb(g),g*=2;const m=await p.text();p.ok?d(null,m):d(new Error(`${p.status} ${p.statusText}: ${m}`))}catch(f){f instanceof Error&&d(f)}},{})}function GJe(t){return(e,n)=>new Promise((r,s)=>{t.request(e,n,(i,o)=>{if(i){s(i);return}r(o)})})}function qJe(t){return e=>new Promise((n,r)=>{e.length===0&&n([]);const s=e.map(i=>t.request(i.methodName,i.args));t.request(s,(i,o)=>{if(i){r(i);return}n(o)})})}const VJe=Tn(kJe),KJe=Tn(DJe),YJe=Tn(OJe),QJe=Tn(MJe),JJe=Tn(BJe),ZJe=Tn(LJe),XJe=Tn(pe()),eZe=Qs(Pe({total:pe(),circulating:pe(),nonCirculating:pe(),nonCirculatingAccounts:Qe(Us)})),U5=Pe({amount:$e(),uiAmount:Xe(pe()),decimals:pe(),uiAmountString:Gt($e())}),tZe=Qs(Qe(Pe({address:Us,amount:$e(),uiAmount:Xe(pe()),decimals:pe(),uiAmountString:Gt($e())}))),nZe=Qs(Qe(Pe({pubkey:Us,account:Pe({executable:ah(),owner:Us,lamports:pe(),data:sF,rentEpoch:pe()})}))),$5=Pe({program:$e(),parsed:qC(),space:pe()}),rZe=Qs(Qe(Pe({pubkey:Us,account:Pe({executable:ah(),owner:Us,lamports:pe(),data:$5,rentEpoch:pe()})}))),sZe=Qs(Qe(Pe({lamports:pe(),address:Us}))),PS=Pe({executable:ah(),owner:Us,lamports:pe(),data:sF,rentEpoch:pe()}),iZe=Pe({pubkey:Us,account:PS}),oZe=lN(ya([eF(mn.Buffer),$5]),ya([yae,$5]),t=>Array.isArray(t)?Ve(t,sF):t),F5=Pe({executable:ah(),owner:Us,lamports:pe(),data:oZe,rentEpoch:pe()}),aZe=Pe({pubkey:Us,account:F5}),cZe=Pe({state:ya([ks("active"),ks("inactive"),ks("activating"),ks("deactivating")]),active:pe(),inactive:pe()}),lZe=Tn(Qe(Pe({signature:$e(),slot:pe(),err:Cw,memo:Xe($e()),blockTime:Gt(Xe(pe()))}))),uZe=Tn(Qe(Pe({signature:$e(),slot:pe(),err:Cw,memo:Xe($e()),blockTime:Gt(Xe(pe()))}))),dZe=Pe({subscription:pe(),result:XP(PS)}),hZe=Pe({pubkey:Us,account:PS}),fZe=Pe({subscription:pe(),result:XP(hZe)}),pZe=Pe({parent:pe(),slot:pe(),root:pe()}),gZe=Pe({subscription:pe(),result:pZe}),mZe=ya([Pe({type:ya([ks("firstShredReceived"),ks("completed"),ks("optimisticConfirmation"),ks("root")]),slot:pe(),timestamp:pe()}),Pe({type:ks("createdBank"),parent:pe(),slot:pe(),timestamp:pe()}),Pe({type:ks("frozen"),slot:pe(),timestamp:pe(),stats:Pe({numTransactionEntries:pe(),numSuccessfulTransactions:pe(),numFailedTransactions:pe(),maxTransactionsPerEntry:pe()})}),Pe({type:ks("dead"),slot:pe(),timestamp:pe(),err:$e()})]),yZe=Pe({subscription:pe(),result:mZe}),wZe=Pe({subscription:pe(),result:XP(ya([UJe,$Je]))}),bZe=Pe({subscription:pe(),result:pe()}),vZe=Pe({pubkey:$e(),gossip:Xe($e()),tpu:Xe($e()),rpc:Xe($e()),version:Xe($e())}),Vq=Pe({votePubkey:$e(),nodePubkey:$e(),activatedStake:pe(),epochVoteAccount:ah(),epochCredits:Qe(tF([pe(),pe(),pe()])),commission:pe(),lastVote:pe(),rootSlot:Xe(pe())}),EZe=Tn(Pe({current:Qe(Vq),delinquent:Qe(Vq)})),CZe=ya([ks("processed"),ks("confirmed"),ks("finalized")]),_Ze=Pe({slot:pe(),confirmations:Xe(pe()),err:Cw,confirmationStatus:Gt(CZe)}),AZe=Qs(Qe(Xe(_Ze))),SZe=Tn(pe()),bae=Pe({accountKey:Us,writableIndexes:Qe(pe()),readonlyIndexes:Qe(pe())}),iF=Pe({signatures:Qe($e()),message:Pe({accountKeys:Qe($e()),header:Pe({numRequiredSignatures:pe(),numReadonlySignedAccounts:pe(),numReadonlyUnsignedAccounts:pe()}),instructions:Qe(Pe({accounts:Qe(pe()),data:$e(),programIdIndex:pe()})),recentBlockhash:$e(),addressTableLookups:Gt(Qe(bae))})}),vae=Pe({pubkey:Us,signer:ah(),writable:ah(),source:Gt(ya([ks("transaction"),ks("lookupTable")]))}),Eae=Pe({accountKeys:Qe(vae),signatures:Qe($e())}),Cae=Pe({parsed:qC(),program:$e(),programId:Us}),_ae=Pe({accounts:Qe(Us),data:$e(),programId:Us}),IZe=ya([_ae,Cae]),NZe=ya([Pe({parsed:qC(),program:$e(),programId:$e()}),Pe({accounts:Qe($e()),data:$e(),programId:$e()})]),Aae=lN(IZe,NZe,t=>"accounts"in t?Ve(t,_ae):Ve(t,Cae)),Sae=Pe({signatures:Qe($e()),message:Pe({accountKeys:Qe(vae),instructions:Qe(Aae),recentBlockhash:$e(),addressTableLookups:Gt(Xe(Qe(bae)))})}),Tk=Pe({accountIndex:pe(),mint:$e(),owner:Gt($e()),programId:Gt($e()),uiTokenAmount:U5}),Iae=Pe({writable:Qe(Us),readonly:Qe(Us)}),eO=Pe({err:Cw,fee:pe(),innerInstructions:Gt(Xe(Qe(Pe({index:pe(),instructions:Qe(Pe({accounts:Qe(pe()),data:$e(),programIdIndex:pe()}))})))),preBalances:Qe(pe()),postBalances:Qe(pe()),logMessages:Gt(Xe(Qe($e()))),preTokenBalances:Gt(Xe(Qe(Tk))),postTokenBalances:Gt(Xe(Qe(Tk))),loadedAddresses:Gt(Iae),computeUnitsConsumed:Gt(pe())}),oF=Pe({err:Cw,fee:pe(),innerInstructions:Gt(Xe(Qe(Pe({index:pe(),instructions:Qe(Aae)})))),preBalances:Qe(pe()),postBalances:Qe(pe()),logMessages:Gt(Xe(Qe($e()))),preTokenBalances:Gt(Xe(Qe(Tk))),postTokenBalances:Gt(Xe(Qe(Tk))),loadedAddresses:Gt(Iae),computeUnitsConsumed:Gt(pe())}),VC=ya([ks(0),ks("legacy")]),_w=Pe({pubkey:$e(),lamports:pe(),postBalance:Xe(pe()),rewardType:Xe($e()),commission:Gt(Xe(pe()))}),xZe=Tn(Xe(Pe({blockhash:$e(),previousBlockhash:$e(),parentSlot:pe(),transactions:Qe(Pe({transaction:iF,meta:Xe(eO),version:Gt(VC)})),rewards:Gt(Qe(_w)),blockTime:Xe(pe()),blockHeight:Xe(pe())}))),TZe=Tn(Xe(Pe({blockhash:$e(),previousBlockhash:$e(),parentSlot:pe(),rewards:Gt(Qe(_w)),blockTime:Xe(pe()),blockHeight:Xe(pe())}))),RZe=Tn(Xe(Pe({blockhash:$e(),previousBlockhash:$e(),parentSlot:pe(),transactions:Qe(Pe({transaction:Eae,meta:Xe(eO),version:Gt(VC)})),rewards:Gt(Qe(_w)),blockTime:Xe(pe()),blockHeight:Xe(pe())}))),kZe=Tn(Xe(Pe({blockhash:$e(),previousBlockhash:$e(),parentSlot:pe(),transactions:Qe(Pe({transaction:Sae,meta:Xe(oF),version:Gt(VC)})),rewards:Gt(Qe(_w)),blockTime:Xe(pe()),blockHeight:Xe(pe())}))),PZe=Tn(Xe(Pe({blockhash:$e(),previousBlockhash:$e(),parentSlot:pe(),transactions:Qe(Pe({transaction:Eae,meta:Xe(oF),version:Gt(VC)})),rewards:Gt(Qe(_w)),blockTime:Xe(pe()),blockHeight:Xe(pe())}))),OZe=Tn(Xe(Pe({blockhash:$e(),previousBlockhash:$e(),parentSlot:pe(),rewards:Gt(Qe(_w)),blockTime:Xe(pe()),blockHeight:Xe(pe())}))),DZe=Tn(Xe(Pe({blockhash:$e(),previousBlockhash:$e(),parentSlot:pe(),transactions:Qe(Pe({transaction:iF,meta:Xe(eO)})),rewards:Gt(Qe(_w)),blockTime:Xe(pe())}))),Kq=Tn(Xe(Pe({blockhash:$e(),previousBlockhash:$e(),parentSlot:pe(),signatures:Qe($e()),blockTime:Xe(pe())}))),yM=Tn(Xe(Pe({slot:pe(),meta:Xe(eO),blockTime:Gt(Xe(pe())),transaction:iF,version:Gt(VC)}))),Dx=Tn(Xe(Pe({slot:pe(),transaction:Sae,meta:Xe(oF),blockTime:Gt(Xe(pe())),version:Gt(VC)}))),MZe=Qs(Pe({blockhash:$e(),lastValidBlockHeight:pe()})),BZe=Qs(ah()),LZe=Pe({slot:pe(),numTransactions:pe(),numSlots:pe(),samplePeriodSecs:pe()}),UZe=Tn(Qe(LZe)),$Ze=Qs(Xe(Pe({feeCalculator:Pe({lamportsPerSignature:pe()})}))),FZe=Tn($e()),jZe=Tn($e()),WZe=Pe({err:Cw,logs:Qe($e()),signature:$e()}),zZe=Pe({result:XP(WZe),subscription:pe()}),HZe={"solana-client":"js/1.0.0-maintenance"};class L1{constructor(e,n){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const l={};return async u=>{const{commitment:d,config:h}=ts(u),f=this._buildArgs([],d,void 0,h),p=Wq(f);return l[p]=l[p]??(async()=>{try{const g=await this._rpcRequest("getBlockHeight",f),m=Ve(g,Tn(pe()));if("error"in m)throw new Tt(m.error,"failed to get block height information");return m.result}finally{delete l[p]}})(),await l[p]}})();let r,s,i,o,a,c;n&&typeof n=="string"?this._commitment=n:n&&(this._commitment=n.commitment,this._confirmTransactionInitialTimeout=n.confirmTransactionInitialTimeout,r=n.wsEndpoint,s=n.httpHeaders,i=n.fetch,o=n.fetchMiddleware,a=n.disableRetryOnRateLimit,c=n.httpAgent),this._rpcEndpoint=TJe(e),this._rpcWsEndpoint=r||NJe(e),this._rpcClient=HJe(e,s,i,o,a,c),this._rpcRequest=GJe(this._rpcClient),this._rpcBatchRequest=qJe(this._rpcClient),this._rpcWebSocket=new _Je(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,n){const{commitment:r,config:s}=ts(n),i=this._buildArgs([e.toBase58()],r,void 0,s),o=await this._rpcRequest("getBalance",i),a=Ve(o,Qs(pe()));if("error"in a)throw new Tt(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,n){return await this.getBalanceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const n=await this._rpcRequest("getBlockTime",[e]),r=Ve(n,Tn(Xe(pe())));if("error"in r)throw new Tt(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),n=Ve(e,Tn(pe()));if("error"in n)throw new Tt(n.error,"failed to get minimum ledger slot");return n.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),n=Ve(e,XJe);if("error"in n)throw new Tt(n.error,"failed to get first available block");return n.result}async getSupply(e){let n={};typeof e=="string"?n={commitment:e}:e?n={...e,commitment:e&&e.commitment||this.commitment}:n={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[n]),s=Ve(r,eZe);if("error"in s)throw new Tt(s.error,"failed to get supply");return s.result}async getTokenSupply(e,n){const r=this._buildArgs([e.toBase58()],n),s=await this._rpcRequest("getTokenSupply",r),i=Ve(s,Qs(U5));if("error"in i)throw new Tt(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(e,n){const r=this._buildArgs([e.toBase58()],n),s=await this._rpcRequest("getTokenAccountBalance",r),i=Ve(s,Qs(U5));if("error"in i)throw new Tt(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(e,n,r){const{commitment:s,config:i}=ts(r);let o=[e.toBase58()];"mint"in n?o.push({mint:n.mint.toBase58()}):o.push({programId:n.programId.toBase58()});const a=this._buildArgs(o,s,"base64",i),c=await this._rpcRequest("getTokenAccountsByOwner",a),l=Ve(c,nZe);if("error"in l)throw new Tt(l.error,`failed to get token accounts owned by account ${e.toBase58()}`);return l.result}async getParsedTokenAccountsByOwner(e,n,r){let s=[e.toBase58()];"mint"in n?s.push({mint:n.mint.toBase58()}):s.push({programId:n.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),a=Ve(o,rZe);if("error"in a)throw new Tt(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const n={...e,commitment:e&&e.commitment||this.commitment},r=n.filter||n.commitment?[n]:[],s=await this._rpcRequest("getLargestAccounts",r),i=Ve(s,sZe);if("error"in i)throw new Tt(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(e,n){const r=this._buildArgs([e.toBase58()],n),s=await this._rpcRequest("getTokenLargestAccounts",r),i=Ve(s,tZe);if("error"in i)throw new Tt(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(e,n){const{commitment:r,config:s}=ts(n),i=this._buildArgs([e.toBase58()],r,"base64",s),o=await this._rpcRequest("getAccountInfo",i),a=Ve(o,Qs(Xe(PS)));if("error"in a)throw new Tt(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,n){const{commitment:r,config:s}=ts(n),i=this._buildArgs([e.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),a=Ve(o,Qs(Xe(F5)));if("error"in a)throw new Tt(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,n){try{return(await this.getAccountInfoAndContext(e,n)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,n){const{commitment:r,config:s}=ts(n),i=e.map(l=>l.toBase58()),o=this._buildArgs([i],r,"jsonParsed",s),a=await this._rpcRequest("getMultipleAccounts",o),c=Ve(a,Qs(Qe(Xe(F5))));if("error"in c)throw new Tt(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfoAndContext(e,n){const{commitment:r,config:s}=ts(n),i=e.map(l=>l.toBase58()),o=this._buildArgs([i],r,"base64",s),a=await this._rpcRequest("getMultipleAccounts",o),c=Ve(a,Qs(Qe(Xe(PS))));if("error"in c)throw new Tt(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfo(e,n){return(await this.getMultipleAccountsInfoAndContext(e,n)).value}async getStakeActivation(e,n,r){const{commitment:s,config:i}=ts(n),o=this._buildArgs([e.toBase58()],s,void 0,{...i,epoch:r??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getStakeActivation",o),c=Ve(a,Tn(cZe));if("error"in c)throw new Tt(c.error,`failed to get Stake Activation ${e.toBase58()}`);return c.result}async getProgramAccounts(e,n){const{commitment:r,config:s}=ts(n),{encoding:i,...o}=s||{},a=this._buildArgs([e.toBase58()],r,i||"base64",{...o,...o.filters?{filters:Gq(o.filters)}:null}),c=await this._rpcRequest("getProgramAccounts",a),l=Qe(iZe),u=o.withContext===!0?Ve(c,Qs(l)):Ve(c,Tn(l));if("error"in u)throw new Tt(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async getParsedProgramAccounts(e,n){const{commitment:r,config:s}=ts(n),i=this._buildArgs([e.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),a=Ve(o,Tn(Qe(aZe)));if("error"in a)throw new Tt(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,n){var i;let r;if(typeof e=="string")r=e;else{const o=e;if((i=o.abortSignal)!=null&&i.aborted)return Promise.reject(o.abortSignal.reason);r=o.signature}let s;try{s=co.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return As(s.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:n||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:n||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:n||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((n,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:n}){let r,s,i=!1;const o=new Promise((c,l)=>{try{r=this.onSignature(n,(d,h)=>{r=void 0;const f={context:h,value:d};c({__type:gp.PROCESSED,response:f})},e);const u=new Promise(d=>{r==null?d():s=this._onSubscriptionStateChange(r,h=>{h==="subscribed"&&d()})});(async()=>{if(await u,i)return;const d=await this.getSignatureStatus(n);if(i||d==null)return;const{context:h,value:f}=d;if(f!=null)if(f!=null&&f.err)l(f.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(f.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(f.confirmationStatus==="processed"||f.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,c({__type:gp.PROCESSED,response:{context:h,value:f}})}})()}catch(u){l(u)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:n,lastValidBlockHeight:r,signature:s}}){let i=!1;const o=new Promise(d=>{const h=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let f=await h();if(!i){for(;f<=r;)if(await Cb(1e3),i||(f=await h(),i))return;d({__type:gp.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),l=this.getCancellationPromise(n);let u;try{const d=await Promise.race([l,c,o]);if(d.__type===gp.PROCESSED)u=d.response;else throw new dae(s)}finally{i=!0,a()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:n,minContextSlot:r,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let a=!1;const c=new Promise(f=>{let p=i,g=null;const m=async()=>{try{const{context:y,value:w}=await this.getNonceAndContext(s,{commitment:e,minContextSlot:r});return g=y.slot,w==null?void 0:w.nonce}catch{return p}};(async()=>{if(p=await m(),!a)for(;;){if(i!==p){f({__type:gp.NONCE_INVALID,slotInWhichNonceDidAdvance:g});return}if(await Cb(2e3),a||(p=await m(),a))return}})()}),{abortConfirmation:l,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),d=this.getCancellationPromise(n);let h;try{const f=await Promise.race([d,u,c]);if(f.__type===gp.PROCESSED)h=f.response;else{let p;for(;;){const g=await this.getSignatureStatus(o);if(g==null)break;if(g.context.slot<(f.slotInWhichNonceDidAdvance??r)){await Cb(400);continue}p=g;break}if(p!=null&&p.value){const g=e||"finalized",{confirmationStatus:m}=p.value;switch(g){case"processed":case"recent":if(m!=="processed"&&m!=="confirmed"&&m!=="finalized")throw new a_(o);break;case"confirmed":case"single":case"singleGossip":if(m!=="confirmed"&&m!=="finalized")throw new a_(o);break;case"finalized":case"max":case"root":if(m!=="finalized")throw new a_(o);break;default:}h={context:p.context,value:{err:p.value.err}}}else throw new a_(o)}}finally{a=!0,l()}return h}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:n}){let r;const s=new Promise(c=>{let l=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{l=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>c({__type:gp.TIMED_OUT,timeoutMs:l}),l)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:n});let a;try{const c=await Promise.race([o,s]);if(c.__type===gp.PROCESSED)a=c.response;else throw new hae(n,c.timeoutMs/1e3)}finally{clearTimeout(r),i()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),n=Ve(e,Tn(Qe(vZe)));if("error"in n)throw new Tt(n.error,"failed to get cluster nodes");return n.result}async getVoteAccounts(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",n),s=Ve(r,EZe);if("error"in s)throw new Tt(s.error,"failed to get vote accounts");return s.result}async getSlot(e){const{commitment:n,config:r}=ts(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getSlot",s),o=Ve(i,Tn(pe()));if("error"in o)throw new Tt(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:n,config:r}=ts(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getSlotLeader",s),o=Ve(i,Tn($e()));if("error"in o)throw new Tt(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,n){const r=[e,n],s=await this._rpcRequest("getSlotLeaders",r),i=Ve(s,Tn(Qe(Us)));if("error"in i)throw new Tt(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(e,n){const{context:r,value:s}=await this.getSignatureStatuses([e],n);As(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(e,n){const r=[e];n&&r.push(n);const s=await this._rpcRequest("getSignatureStatuses",r),i=Ve(s,AZe);if("error"in i)throw new Tt(i.error,"failed to get signature status");return i.result}async getTransactionCount(e){const{commitment:n,config:r}=ts(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getTransactionCount",s),o=Ve(i,Tn(pe()));if("error"in o)throw new Tt(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",n),s=Ve(r,VJe);if("error"in s)throw new Tt(s.error,"failed to get inflation");return s.result}async getInflationReward(e,n,r){const{commitment:s,config:i}=ts(r),o=this._buildArgs([e.map(l=>l.toBase58())],s,void 0,{...i,epoch:n??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getInflationReward",o),c=Ve(a,PJe);if("error"in c)throw new Tt(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),n=Ve(e,KJe);if("error"in n)throw new Tt(n.error,"failed to get inflation rate");return n.result}async getEpochInfo(e){const{commitment:n,config:r}=ts(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getEpochInfo",s),o=Ve(i,QJe);if("error"in o)throw new Tt(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),n=Ve(e,JJe);if("error"in n)throw new Tt(n.error,"failed to get epoch schedule");const r=n.result;return new EJe(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),n=Ve(e,ZJe);if("error"in n)throw new Tt(n.error,"failed to get leader schedule");return n.result}async getMinimumBalanceForRentExemption(e,n){const r=this._buildArgs([e],n),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=Ve(s,SZe);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(e){const{context:n,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:n,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const n=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=Ve(n,UZe);if("error"in r)throw new Tt(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,n){const r=this._buildArgs([e],n),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=Ve(s,$Ze);if("error"in i)throw new Tt(i.error,"failed to get fee calculator");const{context:o,value:a}=i.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,n){const r=ro(e.serialize()).toString("base64"),s=this._buildArgs([r],n),i=await this._rpcRequest("getFeeForMessage",s),o=Ve(i,Qs(Xe(pe())));if("error"in o)throw new Tt(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const n=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),r=n!=null&&n.length?[n]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),i=Ve(s,YJe);if("error"in i)throw new Tt(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhashAndContext(e){const{commitment:n,config:r}=ts(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),o=Ve(i,MZe);if("error"in o)throw new Tt(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,n){const{commitment:r,config:s}=ts(n),i=this._buildArgs([e],r,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),a=Ve(o,BZe);if("error"in a)throw new Tt(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),n=Ve(e,Tn(FJe));if("error"in n)throw new Tt(n.error,"failed to get version");return n.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),n=Ve(e,Tn($e()));if("error"in n)throw new Tt(n.error,"failed to get genesis hash");return n.result}async getBlock(e,n){const{commitment:r,config:s}=ts(n),i=this._buildArgsAtLeastConfirmed([e],r,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=Ve(o,RZe);if("error"in a)throw a.error;return a.result}case"none":{const a=Ve(o,TZe);if("error"in a)throw a.error;return a.result}default:{const a=Ve(o,xZe);if("error"in a)throw a.error;const{result:c}=a;return c?{...c,transactions:c.transactions.map(({transaction:l,meta:u,version:d})=>({meta:u,transaction:{...l,message:mM(d,l.message)},version:d}))}:null}}}catch(a){throw new Tt(a,"failed to get confirmed block")}}async getParsedBlock(e,n){const{commitment:r,config:s}=ts(n),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=Ve(o,PZe);if("error"in a)throw a.error;return a.result}case"none":{const a=Ve(o,OZe);if("error"in a)throw a.error;return a.result}default:{const a=Ve(o,kZe);if("error"in a)throw a.error;return a.result}}}catch(a){throw new Tt(a,"failed to get block")}}async getBlockProduction(e){let n,r;if(typeof e=="string")r=e;else if(e){const{commitment:a,...c}=e;r=a,n=c}const s=this._buildArgs([],r,"base64",n),i=await this._rpcRequest("getBlockProduction",s),o=Ve(i,zJe);if("error"in o)throw new Tt(o.error,"failed to get block production information");return o.result}async getTransaction(e,n){const{commitment:r,config:s}=ts(n),i=this._buildArgsAtLeastConfirmed([e],r,void 0,s),o=await this._rpcRequest("getTransaction",i),a=Ve(o,yM);if("error"in a)throw new Tt(a.error,"failed to get transaction");const c=a.result;return c&&{...c,transaction:{...c.transaction,message:mM(c.version,c.transaction.message)}}}async getParsedTransaction(e,n){const{commitment:r,config:s}=ts(n),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),a=Ve(o,Dx);if("error"in a)throw new Tt(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,n){const{commitment:r,config:s}=ts(n),i=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(c=>{const l=Ve(c,Dx);if("error"in l)throw new Tt(l.error,"failed to get transactions");return l.result})}async getTransactions(e,n){const{commitment:r,config:s}=ts(n),i=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],r,void 0,s)}));return(await this._rpcBatchRequest(i)).map(c=>{const l=Ve(c,yM);if("error"in l)throw new Tt(l.error,"failed to get transactions");const u=l.result;return u&&{...u,transaction:{...u.transaction,message:mM(u.version,u.transaction.message)}}})}async getConfirmedBlock(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),s=await this._rpcRequest("getBlock",r),i=Ve(s,DZe);if("error"in i)throw new Tt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:c,meta:l})=>{const u=new Df(c.message);return{meta:l,transaction:{...c,message:u}}})};return{...a,transactions:a.transactions.map(({transaction:c,meta:l})=>({meta:l,transaction:Ja.populate(c.message,c.signatures)}))}}async getBlocks(e,n,r){const s=this._buildArgsAtLeastConfirmed(n!==void 0?[e,n]:[e],r),i=await this._rpcRequest("getBlocks",s),o=Ve(i,Tn(Qe(pe())));if("error"in o)throw new Tt(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=Ve(s,Kq);if("error"in i)throw new Tt(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=Ve(s,Kq);if("error"in i)throw new Tt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),s=await this._rpcRequest("getTransaction",r),i=Ve(s,yM);if("error"in i)throw new Tt(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const a=new Df(o.transaction.message),c=o.transaction.signatures;return{...o,transaction:Ja.populate(a,c)}}async getParsedConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed"),s=await this._rpcRequest("getTransaction",r),i=Ve(s,Dx);if("error"in i)throw new Tt(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(e,n){const r=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],n,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const a=Ve(o,Dx);if("error"in a)throw new Tt(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,n,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(n--,!(n<=0||n<i));)try{const c=await this.getConfirmedBlockSignatures(n,"finalized");c.signatures.length>0&&(s.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let o=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>o));)try{const c=await this.getConfirmedBlockSignatures(r);c.signatures.length>0&&(s.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(e,s)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(e,n,r){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=Ve(i,lZe);if("error"in o)throw new Tt(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,n,r){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),i=await this._rpcRequest("getSignaturesForAddress",s),o=Ve(i,uZe);if("error"in o)throw new Tt(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,n){const{context:r,value:s}=await this.getAccountInfoAndContext(e,n);let i=null;return s!==null&&(i=new Hq({key:e,state:Hq.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(e,n){const{context:r,value:s}=await this.getAccountInfoAndContext(e,n);let i=null;return s!==null&&(i=rF.fromAccountData(s.data)),{context:r,value:i}}async getNonce(e,n){return await this.getNonceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,n){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),n]),s=Ve(r,FZe);if("error"in s)throw new Tt(s.error,`airdrop to ${e.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Cb(100);const r=Date.now()-this._blockhashInfo.lastFetch>=xJe;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),n=this._blockhashInfo.latestBlockhash,r=n?n.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Cb(gJe/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:n,config:r}=ts(e),s=this._buildArgs([],n,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=Ve(i,Qs(pe()));if("error"in o)throw new Tt(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,n,r){if("message"in e){const g=e.serialize(),m=mn.Buffer.from(g).toString("base64");if(Array.isArray(n)||r!==void 0)throw new Error("Invalid arguments");const y=n||{};y.encoding="base64","commitment"in y||(y.commitment=this.commitment),n&&typeof n=="object"&&"innerInstructions"in n&&(y.innerInstructions=n.innerInstructions);const w=[m,y],C=await this._rpcRequest("simulateTransaction",w),N=Ve(C,qq);if("error"in N)throw new Error("failed to simulate transaction: "+N.error.message);return N.result}let s;if(e instanceof Ja){let p=e;s=new Ja,s.feePayer=p.feePayer,s.instructions=e.instructions,s.nonceInfo=p.nonceInfo,s.signatures=p.signatures}else s=Ja.populate(e),s._message=s._json=void 0;if(n!==void 0&&!Array.isArray(n))throw new Error("Invalid arguments");const i=n;if(s.nonceInfo&&i)s.sign(...i);else{let p=this._disableBlockhashCaching;for(;;){const g=await this._blockhashWithExpiryBlockHeight(p);if(s.lastValidBlockHeight=g.lastValidBlockHeight,s.recentBlockhash=g.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const m=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(m)&&!this._blockhashInfo.transactionSignatures.includes(m)){this._blockhashInfo.simulatedSignatures.push(m);break}else p=!0}}const o=s._compile(),a=o.serialize(),l=s._serialize(a).toString("base64"),u={encoding:"base64",commitment:this.commitment};if(r){const p=(Array.isArray(r)?r:o.nonProgramIds()).map(g=>g.toBase58());u.accounts={encoding:"base64",addresses:p}}i&&(u.sigVerify=!0),n&&typeof n=="object"&&"innerInstructions"in n&&(u.innerInstructions=n.innerInstructions);const d=[l,u],h=await this._rpcRequest("simulateTransaction",d),f=Ve(h,qq);if("error"in f){let p;if("data"in f.error&&(p=f.error.data.logs,p&&Array.isArray(p))){const g=`
    `,m=g+p.join(g);console.error(f.error.message,m)}throw new $q({action:"simulate",signature:"",transactionMessage:f.error.message,logs:p})}return f.result}async sendTransaction(e,n,r){if("version"in e){if(n&&Array.isArray(n))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,n)}if(n===void 0||!Array.isArray(n))throw new Error("Invalid arguments");const s=n;if(e.nonceInfo)e.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...s),!e.signature)throw new Error("!signature");const c=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))o=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}const i=e.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(e,n){const r=ro(e).toString("base64");return await this.sendEncodedTransaction(r,n)}async sendEncodedTransaction(e,n){const r={encoding:"base64"},s=n&&n.skipPreflight,i=s===!0?"processed":n&&n.preflightCommitment||this.commitment;n&&n.maxRetries!=null&&(r.maxRetries=n.maxRetries),n&&n.minContextSlot!=null&&(r.minContextSlot=n.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const o=[e,r],a=await this._rpcRequest("sendTransaction",o),c=Ve(a,jZe);if("error"in c){let l;throw"data"in c.error&&(l=c.error.data.logs),new $q({action:s?"send":"simulate",signature:"",transactionMessage:c.error.message,logs:l})}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([n,r])=>{this._setSubscription(n,{...r,state:"pending"})})}_setSubscription(e,n){var s;const r=(s=this._subscriptionsByHash[e])==null?void 0:s.state;if(this._subscriptionsByHash[e]=n,r!==n.state){const i=this._subscriptionStateChangeCallbacksByHash[e];i&&i.forEach(o=>{try{o(n.state)}catch{}})}}_onSubscriptionStateChange(e,n){var i;const r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};const s=(i=this._subscriptionStateChangeCallbacksByHash)[r]||(i[r]=new Set);return s.add(n),()=>{s.delete(n),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,n=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const a=await this._rpcWebSocket.call(o,i);this._setSubscription(r,{...s,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=s.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:a}),!n())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!n())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,n){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(s=>{try{s(...n)}catch(i){console.error(i)}})}_wsOnAccountNotification(e){const{result:n,subscription:r}=Ve(e,dZe);this._handleServerNotification(r,[n.value,n.context])}_makeSubscription(e,n){const r=this._nextClientSubscriptionId++,s=Wq([e.method,n]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...e,args:n,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[s];As(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,n,r){const{commitment:s,config:i}=ts(r),o=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:n,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:n,subscription:r}=Ve(e,fZe);this._handleServerNotification(r,[{accountId:n.value.pubkey,accountInfo:n.value.account},n.context])}onProgramAccountChange(e,n,r,s){const{commitment:i,config:o}=ts(r),a=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:Gq(s)}:void 0));return this._makeSubscription({callback:n,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,n,r){const s=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:n,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:n,subscription:r}=Ve(e,zZe);this._handleServerNotification(r,[n.value,n.context])}_wsOnSlotNotification(e){const{result:n,subscription:r}=Ve(e,gZe);this._handleServerNotification(r,[n])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:n,subscription:r}=Ve(e,yZe);this._handleServerNotification(r,[n])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,n){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${n}' events could not be found.`)}_buildArgs(e,n,r,s){const i=n||this._commitment;if(i||r||s){let o={};r&&(o.encoding=r),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,n,r,s){const i=n||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,n,r,s)}_wsOnSignatureNotification(e){const{result:n,subscription:r}=Ve(e,wZe);n.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,n.value==="receivedSignature"?[{type:"received"},n.context]:[{type:"status",result:n.value},n.context])}onSignature(e,n,r){const s=this._buildArgs([e],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){n(o.result,a);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(e,n,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],s,void 0,i),a=this._makeSubscription({callback:(c,l)=>{n(c,l);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:n,subscription:r}=Ve(e,bZe);this._handleServerNotification(r,[n])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:Et([Rt("instruction"),rC("recentSlot"),Fn("bumpSeed")])},FreezeLookupTable:{index:1,layout:Et([Rt("instruction")])},ExtendLookupTable:{index:2,layout:Et([Rt("instruction"),rC(),$o(Un(),g0(Rt(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Et([Rt("instruction")])},CloseLookupTable:{index:4,layout:Et([Rt("instruction")])}});new st("AddressLookupTab1e1111111111111111111111111");const Mx=Object.freeze({RequestUnits:{index:0,layout:Et([Fn("instruction"),Rt("units"),Rt("additionalFee")])},RequestHeapFrame:{index:1,layout:Et([Fn("instruction"),Rt("bytes")])},SetComputeUnitLimit:{index:2,layout:Et([Fn("instruction"),Rt("units")])},SetComputeUnitPrice:{index:3,layout:Et([Fn("instruction"),rC("microLamports")])}});class OS{constructor(){}static requestUnits(e){const n=Mx.RequestUnits,r=Bo(n,e);return new io({keys:[],programId:this.programId,data:r})}static requestHeapFrame(e){const n=Mx.RequestHeapFrame,r=Bo(n,e);return new io({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(e){const n=Mx.SetComputeUnitLimit,r=Bo(n,e);return new io({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(e){const n=Mx.SetComputeUnitPrice,r=Bo(n,{microLamports:BigInt(e.microLamports)});return new io({keys:[],programId:this.programId,data:r})}}OS.programId=new st("ComputeBudget111111111111111111111111111111");Et([Fn("numSignatures"),Fn("padding"),Tl("signatureOffset"),Tl("signatureInstructionIndex"),Tl("publicKeyOffset"),Tl("publicKeyInstructionIndex"),Tl("messageDataOffset"),Tl("messageDataSize"),Tl("messageInstructionIndex")]);new st("Ed25519SigVerify111111111111111111111111111");K2.utils.isValidPrivateKey;K2.getPublicKey;Et([Fn("numSignatures"),Tl("signatureOffset"),Fn("signatureInstructionIndex"),Tl("ethAddressOffset"),Fn("ethAddressInstructionIndex"),Tl("messageDataOffset"),Tl("messageDataSize"),Fn("messageInstructionIndex"),Vr(20,"ethAddress"),Vr(64,"signature"),Fn("recoveryId")]);new st("KeccakSecp256k11111111111111111111111111111");var Nae;new st("StakeConfig11111111111111111111111111111111");class xae{constructor(e,n,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=n,this.custodian=r}}Nae=xae;xae.default=new Nae(0,0,st.default);Object.freeze({Initialize:{index:0,layout:Et([Rt("instruction"),aJe(),cJe()])},Authorize:{index:1,layout:Et([Rt("instruction"),Un("newAuthorized"),Rt("stakeAuthorizationType")])},Delegate:{index:2,layout:Et([Rt("instruction")])},Split:{index:3,layout:Et([Rt("instruction"),Mc("lamports")])},Withdraw:{index:4,layout:Et([Rt("instruction"),Mc("lamports")])},Deactivate:{index:5,layout:Et([Rt("instruction")])},Merge:{index:7,layout:Et([Rt("instruction")])},AuthorizeWithSeed:{index:8,layout:Et([Rt("instruction"),Un("newAuthorized"),Rt("stakeAuthorizationType"),Gb("authoritySeed"),Un("authorityOwner")])}});new st("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:Et([Rt("instruction"),lJe()])},Authorize:{index:1,layout:Et([Rt("instruction"),Un("newAuthorized"),Rt("voteAuthorizationType")])},Withdraw:{index:3,layout:Et([Rt("instruction"),Mc("lamports")])},UpdateValidatorIdentity:{index:4,layout:Et([Rt("instruction")])},AuthorizeWithSeed:{index:10,layout:Et([Rt("instruction"),uJe()])}});new st("Vote111111111111111111111111111111111111111");new st("Va1idator1nfo111111111111111111111111111111");Pe({name:$e(),website:Gt($e()),details:Gt($e()),iconUrl:Gt($e()),keybaseUsername:Gt($e())});new st("Vote111111111111111111111111111111111111111");Et([Un("nodePubkey"),Un("authorizedWithdrawer"),Fn("commission"),Xi(),$o(Et([Xi("slot"),Rt("confirmationCount")]),g0(Rt(),-8),"votes"),Fn("rootSlotValid"),Xi("rootSlot"),Xi(),$o(Et([Xi("epoch"),Un("authorizedVoter")]),g0(Rt(),-8),"authorizedVoters"),Et([$o(Et([Un("authorizedPubkey"),Xi("epochOfLastAuthorizedSwitch"),Xi("targetEpoch")]),32,"buf"),Xi("idx"),Fn("isEmpty")],"priorVoters"),Xi(),$o(Et([Xi("epoch"),Xi("credits"),Xi("prevCredits")]),g0(Rt(),-8),"epochCredits"),Et([Xi("slot"),Xi("timestamp")],"lastTimestamp")]);const GZe=1e9;var Yq={};const Me={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof Yq<"u"?Yq.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},qZe={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=Me.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},VZe={bigNumber(t){return t?new sa(t):new sa(0)},multiply(t,e){if(t===void 0||e===void 0)return new sa(0);const n=new sa(t),r=new sa(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},KZe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],YZe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],QZe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],JZe={getERC20Abi:t=>Me.USDT_CONTRACT_ADDRESSES.includes(t)?QZe:KZe,getSwapAbi:()=>YZe},Sg={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},ln={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function wM(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Xt={setItem(t,e){c_()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(c_())return localStorage.getItem(t)||void 0},removeItem(t){c_()&&localStorage.removeItem(t)},clear(){c_()&&localStorage.clear()}};function c_(){return typeof window<"u"&&typeof localStorage<"u"}function Rk(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const hu={UNIVERSAL_PROVIDER_RELAY_URL:"wss://relay.walletconnect.org",HASH_PREFIX:"SPL Name Service",ROOT_DOMAIN_ACCOUNT:new st("58PwtjSDuFHuUkYjH9BYnnQKHfwo9reZhC2zMJv9JPkx"),NAME_PROGRAM_ID:new st("namesLPneVptA9Z5rqUDD9tMTWEJwofgaYwp8cawRkX"),REVERSE_LOOKUP_CLASS:new st("33m47vH6Eav6jr5Ry86XjhRft2jRBLDnDgPSHoquXi2Z"),DEFAULT_CHAIN:{id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",chainNamespace:Me.CHAIN.SOLANA,nativeCurrency:{name:"Solana",decimals:9,symbol:"SOL"},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},rpcUrls:{default:{http:[`${Me.BLOCKCHAIN_API_RPC_URL}/v1`]}}},CHAIN_IDS:{Mainnet:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",Devnet:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",Testnet:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",Deprecated_Mainnet:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",Deprecated_Devnet:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"},LAMPORTS_PER_SOL:1e9},bM={UNIT_PRICE_MICRO_LAMPORTS:2e7,UNIT_LIMIT_TRANSFER_ONLY:3e5,UNIT_LIMIT_WITH_ATA_CREATION:4e5},la={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,NAMES_SUPPORTED_CHAIN_NAMESPACES:[Me.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,DEFAULT_REMOTE_FEATURES:{socials:["google","x","discord","farcaster","github","apple","facebook"]},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},At={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=At.getActiveNamespace(),e=At.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Xt.setItem(ln.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Xt.getItem(ln.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Xt.removeItem(ln.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Xt.setItem(ln.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Xt.setItem(ln.ACTIVE_CAIP_NETWORK_ID,t),At.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Xt.getItem(ln.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Xt.removeItem(ln.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=wM(t);Xt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=At.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Xt.setItem(ln.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Xt.getItem(ln.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=wM(t);Xt.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Xt.getItem(ln.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=wM(t);return Xt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{Xt.setItem(ln.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Xt.getItem(ln.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Xt.removeItem(ln.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Xt.getItem(ln.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Xt.getItem(ln.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Xt.setItem(ln.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Xt.getItem(ln.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Xt.getItem(ln.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Xt.setItem(ln.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=At.getConnectedNamespaces();e.includes(t)||(e.push(t),At.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=At.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),At.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Xt.getItem(ln.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Xt.setItem(ln.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Xt.removeItem(ln.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Xt.getItem(ln.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=At.getBalanceCache();Xt.setItem(ln.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=At.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;At.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=At.getBalanceCache();e[t.caipAddress]=t,Xt.setItem(ln.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Xt.getItem(ln.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=At.getBalanceCache();Xt.setItem(ln.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=At.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),At.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=At.getNativeBalanceCache();e[t.caipAddress]=t,Xt.setItem(ln.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Xt.getItem(ln.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=At.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;At.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=At.getEnsCache();e[t.address]=t,Xt.setItem(ln.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=At.getEnsCache();Xt.setItem(ln.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Xt.getItem(ln.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=At.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;At.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=At.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Xt.setItem(ln.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=At.getIdentityCache();Xt.setItem(ln.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Xt.removeItem(ln.PORTFOLIO_CACHE),Xt.removeItem(ln.NATIVE_BALANCE_CACHE),Xt.removeItem(ln.ENS_CACHE),Xt.removeItem(ln.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Xt.setItem(ln.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Xt.getItem(ln.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=At.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===Me.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};Xt.setItem(ln.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Xt.getItem(ln.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=At.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),Xt.setItem(ln.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=Xt.getItem(ln.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=At.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),Xt.setItem(ln.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=At.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),Xt.setItem(ln.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(At.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},Qt={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return Qt.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=la.TEN_SEC_MS:!0},isAllowedRetry(t,e=la.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(Qt.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+la.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(Qt.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!Qt.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?At.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,Qt.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return Me.W3M_API_URL},getBlockchainApiUrl(){return Me.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return Me.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?la.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in Me.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function U1(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class uN{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await U1(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await U1(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await U1(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await U1(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await U1(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const ZZe={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?la.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(Qt.isTelegram()){if(Qt.isIos())return t.filter(e=>e!=="google");if(Qt.isMac())return t.filter(e=>e!=="x");if(Qt.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},xt=ys({features:la.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:la.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),yn={state:xt,subscribeKey(t,e){return Ea(xt,t,e)},setOptions(t){Object.assign(xt,t)},setRemoteFeatures(t){var n,r;if(!t)return;const e={...xt.remoteFeatures,...t};xt.remoteFeatures=e,(n=xt.remoteFeatures)!=null&&n.socials&&(xt.remoteFeatures.socials=ZZe.filterSocialsByPlatform(xt.remoteFeatures.socials)),(r=xt.features)!=null&&r.pay&&(xt.remoteFeatures.email=!1,xt.remoteFeatures.socials=!1)},setFeatures(t){var n;if(!t)return;xt.features||(xt.features=la.DEFAULT_FEATURES);const e={...xt.features,...t};xt.features=e,(n=xt.features)!=null&&n.pay&&xt.remoteFeatures&&(xt.remoteFeatures.email=!1,xt.remoteFeatures.socials=!1)},setProjectId(t){xt.projectId=t},setCustomRpcUrls(t){xt.customRpcUrls=t},setAllWallets(t){xt.allWallets=t},setIncludeWalletIds(t){xt.includeWalletIds=t},setExcludeWalletIds(t){xt.excludeWalletIds=t},setFeaturedWalletIds(t){xt.featuredWalletIds=t},setTokens(t){xt.tokens=t},setTermsConditionsUrl(t){xt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){xt.privacyPolicyUrl=t},setCustomWallets(t){xt.customWallets=t},setIsSiweEnabled(t){xt.isSiweEnabled=t},setIsUniversalProvider(t){xt.isUniversalProvider=t},setSdkVersion(t){xt.sdkVersion=t},setMetadata(t){xt.metadata=t},setDisableAppend(t){xt.disableAppend=t},setEIP6963Enabled(t){xt.enableEIP6963=t},setDebug(t){xt.debug=t},setEnableWalletConnect(t){xt.enableWalletConnect=t},setEnableWalletGuide(t){xt.enableWalletGuide=t},setEnableAuthLogger(t){xt.enableAuthLogger=t},setEnableWallets(t){xt.enableWallets=t},setPreferUniversalLinks(t){xt.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(la.SIWX_DEFAULTS))t[e]??(t[e]=n);xt.siwx=t},setConnectMethodsOrder(t){xt.features={...xt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){xt.features={...xt.features,walletFeaturesOrder:t}},setSocialsOrder(t){xt.remoteFeatures={...xt.remoteFeatures,socials:t}},setCollapseWallets(t){xt.features={...xt.features,collapseWallets:t}},setEnableEmbedded(t){xt.enableEmbedded=t},setAllowUnsupportedChain(t){xt.allowUnsupportedChain=t},setManualWCControl(t){xt.manualWCControl=t},setEnableNetworkSwitch(t){xt.enableNetworkSwitch=t},setEnableReconnect(t){xt.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(xt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){xt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return xt.universalProviderConfigOverride},getSnapshot(){return TS(xt)}},XZe=Object.freeze({enabled:!0,events:[]}),eXe=new uN({baseUrl:Qt.getAnalyticsUrl(),clientId:null}),tXe=5,nXe=60*1e3,mp=ys({...XZe}),rXe={state:mp,subscribeKey(t,e){return Ea(mp,t,e)},async sendError(t,e){if(!mp.enabled)return;const n=Date.now();if(mp.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<nXe}).length>=tXe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};mp.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=yn.state;await eXe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:Qt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){mp.enabled=!0},disable(){mp.enabled=!1},clearEvents(){mp.events=[]}};class iC extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,iC.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,iC):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function Qq(t,e){const n=t instanceof iC?t:new iC(t instanceof Error?t.message:String(t),e,t);throw rXe.sendError(n,n.category),n}function Zl(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return Qq(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return Qq(a,e)}},n[r]=i}else n[r]=s}),n}const m0={ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Md={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},sXe={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Md.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Md.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Md.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Md.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===Me.CHAIN.SOLANA&&t===Md.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Md.COINBASE.url}/dapp?cb_url=${r}`)}},bc=ys({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),iXe={state:bc,subscribeNetworkImages(t){return ma(bc.networkImages,()=>t(bc.networkImages))},subscribeKey(t,e){return Ea(bc,t,e)},subscribe(t){return ma(bc,()=>t(bc))},setWalletImage(t,e){bc.walletImages[t]=e},setNetworkImage(t,e){bc.networkImages[t]=e},setChainImage(t,e){bc.chainImages[t]=e},setConnectorImage(t,e){bc.connectorImages={...bc.connectorImages,[t]:e}},setTokenImage(t,e){bc.tokenImages[t]=e},setCurrencyImage(t,e){bc.currencyImages[t]=e}},Pl=Zl(iXe),oXe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},vM=ys({networkImagePromises:{}}),aXe={async fetchWalletImage(t){if(t)return await tn._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(vM.networkImagePromises[t]||(vM.networkImagePromises[t]=tn._fetchNetworkImage(t)),await vM.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Pl.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Pl.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Pl.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Pl.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return Pl.state.connectorImages[t.imageId]},getChainImage(t){return Pl.state.networkImages[oXe[t]]}},yp=ys({message:"",variant:"info",open:!1}),cXe={state:yp,subscribeKey(t,e){return Ea(yp,t,e)},open(t,e){const{debug:n}=yn.state,{shortMessage:r,longMessage:s}=t;n&&(yp.message=r,yp.variant=e,yp.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){yp.open=!1,yp.message="",yp.variant="info"}},Tae=Zl(cXe),lXe=Qt.getAnalyticsUrl(),uXe=new uN({baseUrl:lXe,clientId:null}),dXe=["MODAL_CREATED"],Rh=ys({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Os={state:Rh,subscribe(t){return ma(Rh,()=>t(Rh))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=yn.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=vr.state.address;if(dXe.includes(t.data.event)||typeof window>"u")return;await uXe.post({path:"/e",params:Os.getSdkProperties(),body:{eventId:Qt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),Rh.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===Me.HTTP_STATUS_CODES.FORBIDDEN&&!Rh.reportedErrors.FORBIDDEN&&(Tae.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${c_()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),Rh.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;Rh.timestamp=Date.now(),Rh.data=t,((e=yn.state.features)!=null&&e.analytics||t.event==="INITIALIZE")&&Os._sendAnalyticsEvent(Rh)}},hXe=Qt.getApiUrl(),Pa=new uN({baseUrl:hXe,clientId:null}),fXe=40,Jq=4,pXe=20,_n=ys({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),tn={state:_n,subscribeKey(t,e){return Ea(_n,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=yn.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return yn.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Pa.baseUrl}/getWalletImage/${t}`,n=await Pa.getBlob({path:e,params:tn._getSdkProperties()});Pl.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Pa.baseUrl}/public/getAssetImage/${t}`,n=await Pa.getBlob({path:e,params:tn._getSdkProperties()});Pl.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Pa.baseUrl}/public/getAssetImage/${t}`,n=await Pa.getBlob({path:e,params:tn._getSdkProperties()});Pl.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Pa.baseUrl}/public/getCurrencyImage/${t}`,n=await Pa.getBlob({path:e,params:tn._getSdkProperties()});Pl.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Pa.baseUrl}/public/getTokenImage/${t}`,n=await Pa.getBlob({path:e,params:tn._getSdkProperties()});Pl.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return Qt.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Md.COINBASE.id?!0:ce.state.activeChain==="solana"&&(n.id===Md.SOLFLARE.id||n.id===Md.PHANTOM.id)):t},async fetchProjectConfig(){return(await Pa.get({path:"/appkit/v1/config",params:tn._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Pa.get({path:"/projects/v1/origins",params:tn._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===Me.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=Me.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=ce.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!aXe.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>tn._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Dt.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>tn._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>tn._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>tn._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];tn._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Md).map(o=>o.id));const r=await Pa.get({path:"/getWallets",params:{...tn._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:tn._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=yn.state;if(t!=null&&t.length){const e={...tn._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??Jq,include:t},{data:n}=await tn.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>tn._fetchWalletImage(i))),_n.featured=r,_n.allFeatured=r}},async fetchRecommendedWallets(){try{_n.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=yn.state,r=[...e??[],...n??[]].filter(Boolean),s=ce.getRequestedCaipNetworkIds().join(","),i={page:1,entries:Jq,include:t,exclude:r,chains:s},{data:o,count:a}=await tn.fetchWallets(i),c=At.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>tn._fetchWalletImage(d))),_n.recommended=o,_n.allRecommended=o,_n.count=a??0}catch{}finally{_n.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=yn.state,s=ce.getRequestedCaipNetworkIds().join(","),i=[..._n.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:fXe,include:e,exclude:i,chains:s},{data:a,count:c}=await tn.fetchWallets(o),l=a.slice(0,pXe).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>tn._fetchWalletImage(u))),_n.wallets=Qt.uniqueBy([..._n.wallets,...tn._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),_n.count=c>_n.count?c:_n.count,_n.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await tn.fetchWallets(e);n&&n.forEach(r=>{_n.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=yn.state,s=ce.getRequestedCaipNetworkIds().join(",");_n.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await tn.fetchWallets(i);Os.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>tn._fetchWalletImage(c)),Qt.wait(300)]),_n.search=tn._filterOutExtensions(o)},initPromise(t,e){const n=_n.promises[t];return n||(_n.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&tn.initPromise("connectorImages",tn.fetchConnectorImages),e&&tn.initPromise("featuredWallets",tn.fetchFeaturedWallets),n&&tn.initPromise("recommendedWallets",tn.fetchRecommendedWallets),r&&tn.initPromise("networkImages",tn.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=yn.state.features)!=null&&t.analytics&&tn.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Pa.get({path:"/getAnalyticsConfig",params:tn._getSdkProperties()});yn.setFeatures({analytics:t})}catch{yn.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){_n.featured=_n.allFeatured,_n.recommended=_n.allRecommended;return}const e=ce.getRequestedCaipNetworkIds().join(",");_n.featured=_n.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),_n.recommended=_n.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),_n.filteredWallets=_n.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){_n.filteredWallets=[]},setFilterByNamespace(t){if(!t){_n.featured=_n.allFeatured,_n.recommended=_n.allRecommended;return}const e=ce.getRequestedCaipNetworkIds().join(",");_n.featured=_n.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),_n.recommended=_n.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),_n.filteredWallets=_n.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Br=ys({view:"Connect",history:["Connect"],transactionStack:[]}),gXe={state:Br,subscribeKey(t,e){return Ea(Br,t,e)},pushTransactionStack(t){Br.transactionStack.push(t)},popTransactionStack(t){const e=Br.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),fn.goBack();break;case"cancel":s==null||s(),fn.goBack();break}},push(t,e){t!==Br.view&&(Br.view=t,Br.history.push(t),Br.data=e)},reset(t,e){Br.view=t,Br.history=[t],Br.data=e},replace(t,e){Br.history.at(-1)===t||(Br.view=t,Br.history[Br.history.length-1]=t,Br.data=e)},goBack(){var r;const t=ce.state.activeCaipAddress,e=fn.state.view==="ConnectingFarcaster",n=!t&&e;if(Br.history.length>1){Br.history.pop();const[s]=Br.history.slice(-1);s&&(t&&s==="Connect"?Br.view="Account":Br.view=s)}else is.close();(r=Br.data)!=null&&r.wallet&&(Br.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){vr.setFarcasterUrl(void 0,ce.state.activeChain);const a=Dt.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=TS(yn.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Br.history.length>1){Br.history=Br.history.slice(0,t+1);const[e]=Br.history.slice(-1);e&&(Br.view=e)}},goBackOrCloseModal(){fn.state.history.length>1?fn.goBack():is.close()}},fn=Zl(gXe),kh=ys({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),j5={state:kh,subscribe(t){return ma(kh,()=>t(kh))},setThemeMode(t){kh.themeMode=t;try{const e=Dt.getAuthConnector();if(e){const n=j5.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Rk(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){kh.themeVariables={...kh.themeVariables,...t};try{const e=Dt.getAuthConnector();if(e){const n=j5.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Rk(kh.themeVariables,kh.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return TS(kh)}},Bx=Zl(j5),Rae={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},ur=ys({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...Rae},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),mXe={state:ur,subscribe(t){return ma(ur,()=>{t(ur)})},subscribeKey(t,e){return Ea(ur,t,e)},initialize(t){t.forEach(e=>{const n=At.getConnectedConnectorId(e);n&&Dt.setConnectorId(n,e)})},setActiveConnector(t){t&&(ur.activeConnector=Y0(t))},setConnectors(t){t.filter(s=>!ur.allConnectors.some(i=>i.id===s.id&&Dt.getConnectorName(i.name)===Dt.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&ur.allConnectors.push(Y0(s))});const n=Dt.getEnabledNamespaces(),r=Dt.getEnabledConnectors(n);ur.connectors=Dt.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(ur.filterByNamespaceMap).forEach(e=>{ur.filterByNamespaceMap[e]=!1}),t.forEach(e=>{ur.filterByNamespaceMap[e]=!0}),Dt.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){ur.filterByNamespaceMap[t]=e,Dt.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Dt.getEnabledNamespaces(),e=Dt.getEnabledConnectors(t),n=Dt.areAllNamespacesEnabled();ur.connectors=Dt.mergeMultiChainConnectors(e),n?tn.clearFilterByNamespaces():tn.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(ur.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return ur.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(ur.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Dt.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===Me.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Dt.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===Me.CONNECTOR_ID.AUTH){const s=t,i=TS(yn.state),o=Bx.getSnapshot().themeMode,a=Bx.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Rk(a,o)}),Dt.setConnectors([t])}else Dt.setConnectors([t])},getAuthConnector(t){var r;const e=t||ce.state.activeChain,n=ur.connectors.find(s=>s.id===Me.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return ur.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return ur.allConnectors.find(e=>e.id===t)},getConnector(t,e){return ur.allConnectors.filter(r=>r.chain===ce.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=TS(yn.state),r=Bx.getSnapshot().themeMode,s=Bx.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Rk(s,r)})},getConnectorsByNamespace(t){const e=ur.allConnectors.filter(n=>n.chain===t);return Dt.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return ce.checkIfSmartAccountEnabled()&&Mf(t)===m0.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=Dt.getConnector(t.id,t.rdns);sXe.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,ce.state.activeChain),e?fn.push("ConnectingExternal",{connector:e}):fn.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Dt.getConnectorsByNamespace(t):Dt.mergeMultiChainConnectors(ur.allConnectors)},setFilterByNamespace(t){ur.filterByNamespace=t,ur.connectors=Dt.getConnectors(t),tn.setFilterByNamespace(t)},setConnectorId(t,e){t&&(ur.activeConnectorIds={...ur.activeConnectorIds,[e]:t},At.setConnectedConnectorId(e,t))},removeConnectorId(t){ur.activeConnectorIds={...ur.activeConnectorIds,[t]:void 0},At.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return ur.activeConnectorIds[t]},isConnected(t){return t?!!ur.activeConnectorIds[t]:Object.values(ur.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){ur.activeConnectorIds={...Rae}}},Dt=Zl(mXe),yXe=1e3,$1={checkNamespaceConnectorId(t,e){return Dt.getConnectorId(t)===e},isSocialProvider(t){return la.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&Dt.setActiveConnector(e),s==null||s(Qt.isMobile()&&t),r){const l=is.subscribeKey("open",u=>{u||(fn.state.view!==r&&fn.replace(r),l(),a(new Error("Modal closed")))})}const c=ce.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&is.close(),c(),o(Sg.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=ce.subscribeKey("activeCaipAddress",s=>{s&&(is.close(),r(),e(Sg.parseCaipAddress(s)))});Pt.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=vr.state.socialWindow,i=vr.state.socialProvider,o=!1,a=null;const c=ce.subscribeKey("activeCaipAddress",l=>{l&&(e&&is.close(),c())});return new Promise((l,u)=>{async function d(f){var p,g;if((p=f.data)!=null&&p.resultUri)if(f.origin===Me.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const m=Dt.getAuthConnector();if(m&&!o){s&&(s.close(),vr.setSocialWindow(void 0,ce.state.activeChain),s=vr.state.socialWindow),o=!0;const y=f.data.resultUri;if(i&&Os.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}}),i){At.setConnectedSocialProvider(i),await Pt.connectExternal({id:m.id,type:m.type,socialUri:y},m.chain);const w=ce.state.activeCaipAddress;if(!w){u(new Error("Failed to connect"));return}l(Sg.parseCaipAddress(w)),Os.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i,caipNetworkId:(g=ce.getActiveCaipNetwork())==null?void 0:g.caipNetworkId}})}}}catch{i&&Os.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&Os.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(vr.setSocialProvider(t,ce.state.activeChain),i=vr.state.socialProvider,Os.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=is.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=Dt.getAuthConnector();if(p&&!vr.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();vr.setFarcasterUrl(g,ce.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=Dt.getAuthConnector();a=Qt.returnOpenHref(`${Me.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){vr.setSocialWindow(a,ce.state.activeChain),s=vr.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=is.subscribeKey("open",c=>{c||(fn.state.view!==e&&fn.replace(e),a(),i(new Error("Modal closed")))})}const o=ce.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&is.close(),o(),s(Sg.parseCaipAddress(a)))})})},async updateEmail(){const t=At.getConnectedConnectorId(ce.state.activeChain),e=Dt.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==Me.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return fn.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(is.close(),clearInterval(i),o(),r({email:a}))},yXe),o=is.subscribeKey("open",a=>{a||(fn.state.view!=="Connect"&&fn.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return ce.checkIfSmartAccountEnabled()&&Mf(t)===m0.ACCOUNT_TYPES.EOA}};function kae(){var r,s;const t=((r=ce.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=ce.state.activeCaipNetwork)==null?void 0:s.id)||1,n=la.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function Mf(t){var n;return(n=ce.getAccountData(t))==null?void 0:n.preferredAccountType}const Pae={getConnectionStatus(t,e){const n=Dt.state.activeConnectorIds[e],r=Pt.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=yn.state.remoteFeatures)!=null&&a.multiWallet),n=Dt.state.activeConnectorIds[t],r=Pt.getConnections(t),i=(Pt.state.recentConnections.get(t)??[]).filter(c=>Dt.getConnectorById(c.connectorId)),o=Pae.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},ey=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),pi=ys({...ey}),wXe={state:pi,subscribeKey(t,e){return Ea(pi,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=Qt.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){pi.message=ey.message,pi.variant=ey.variant,pi.svg=ey.svg,pi.open=ey.open,pi.autoClose=ey.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=ey.autoClose}){pi.open?(pi.open=!1,setTimeout(()=>{pi.message=t,pi.variant=n,pi.svg=e,pi.open=!0,pi.autoClose=r},150)):(pi.message=t,pi.variant=n,pi.svg=e,pi.open=!0,pi.autoClose=r)}},Ig=wXe,Cs=ys({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),bXe={state:Cs,subscribe(t){return ma(Cs,()=>t(Cs))},setLastNetworkInView(t){Cs.lastNetworkInView=t},async fetchTransactions(t){var e;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Cs.loading=!0;try{const n=await an.fetchTransactions({account:t,cursor:Cs.next,chainId:(e=ce.state.activeCaipNetwork)==null?void 0:e.caipNetworkId}),r=OT.filterSpamTransactions(n.data),s=OT.filterByConnectedChain(r),i=[...Cs.transactions,...s];Cs.loading=!1,Cs.transactions=i,Cs.transactionsByYear=OT.groupTransactionsByYearAndMonth(Cs.transactionsByYear,s),Cs.empty=i.length===0,Cs.next=n.next?n.next:void 0}catch{const r=ce.state.activeChain;Os.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:yn.state.projectId,cursor:Cs.next,isSmartAccount:Mf(r)===m0.ACCOUNT_TYPES.SMART_ACCOUNT}}),Ig.showError("Failed to fetch transactions"),Cs.loading=!1,Cs.empty=!0,Cs.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=ce.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Cs.next=void 0},resetTransactions(){Cs.transactions=[],Cs.transactionsByYear={},Cs.lastNetworkInView=void 0,Cs.loading=!1,Cs.empty=!1,Cs.next=void 0}},OT=Zl(bXe,"API_ERROR"),Xn=ys({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let zm;const vXe={state:Xn,subscribe(t){return ma(Xn,()=>t(Xn))},subscribeKey(t,e){return Ea(Xn,t,e)},_getClient(){return Xn._client},setClient(t){Xn._client=Y0(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);Pt.syncStorageConnections(e)},syncStorageConnections(t){const e=At.getConnections(),n=t??Array.from(ce.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(Xn.recentConnections);i.set(r,s),Xn.recentConnections=i}},getConnections(t){return t?Xn.connections.get(t)??[]:[]},hasAnyConnection(t){const e=Pt.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(Qt.isTelegram()||Qt.isSafari()&&Qt.isIos()){if(zm){await zm,zm=void 0;return}if(!Qt.isPairingExpired(Xn==null?void 0:Xn.wcPairingExpiry)){const s=Xn.wcUri;Xn.wcUri=s;return}zm=(e=(t=Pt._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),Pt.state.status="connecting",await zm,zm=void 0,Xn.wcPairingExpiry=void 0,Pt.state.status="connected"}else await((r=(n=Pt._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=Pt._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&ce.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=Pt._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||ce.state.activeChain;e&&Dt.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;is.setLoading(!0,ce.state.activeChain);const n=Dt.getAuthConnector();n&&(vr.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),At.setPreferredAccountTypes(Object.entries(ce.state.chains).reduce((s,[i,o])=>{const a=i,c=Mf(a);return c!==void 0&&(s[a]=c),s},{})),await Pt.reconnectExternal(n),is.setLoading(!1,ce.state.activeChain),Os.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=ce.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=Pt._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=Pt._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=Pt._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=Pt._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=Pt._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=Pt._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=Pt._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=Pt._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=Pt._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=Pt._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=Pt._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=Pt._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Xn.wcUri=void 0,Xn.wcPairingExpiry=void 0,Xn.wcLinking=void 0,Xn.recentWallet=void 0,Xn.status="disconnected",OT.resetTransactions(),At.deleteWalletConnectDeepLink()},resetUri(){Xn.wcUri=void 0,Xn.wcPairingExpiry=void 0,zm=void 0},finalizeWcConnection(){var n,r,s;const{wcLinking:t,recentWallet:e}=Pt.state;t&&At.setWalletConnectDeepLink(t),e&&At.setAppKitRecent(e),Os.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=fn.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown",caipNetworkId:(s=ce.getActiveCaipNetwork())==null?void 0:s.caipNetworkId}})},setWcBasic(t){Xn.wcBasic=t},setUri(t){Xn.wcUri=t,Xn.wcPairingExpiry=Qt.getPairingExpiry()},setWcLinking(t){Xn.wcLinking=t},setWcError(t){Xn.wcError=t,Xn.buffering=!1},setRecentWallet(t){Xn.recentWallet=t},setBuffering(t){Xn.buffering=t},setStatus(t){Xn.status=t},setIsSwitchingConnection(t){Xn.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=Pt._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new iC("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(Xn.connections);n.set(e,t),Xn.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=vr.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&$1.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await Pt.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=Dt.getConnectorById(t.connectorId),s=t.connectorId===Me.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await Pt.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await Pt.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=Dt.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===Me.CONNECTOR_ID.AUTH,a=t.connectorId===Me.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&$1.isSocialProvider(i)){const{address:d}=await $1.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){is.open({view:"ConnectingFarcaster"})},onConnect(){fn.replace("ProfileWallets")}});c=d}else{const{address:d}=await $1.connectEmail({closeModalOnConnect:r,onOpen(){is.open({view:"EmailLogin"})},onConnect(){fn.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await $1.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){is.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){fn.replace("ProfileWallets")}});c=d}else{const d=await Pt.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await Pt.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=vr.getCaipAddress(n);if(o){const{address:c}=Sg.parseCaipAddress(o);i=c}const a=Pae.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await Pt.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await Pt.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},Pt=Zl(vXe),db=ys({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),yv={state:db,subscribe(t){return ma(db,()=>t(db))},subscribeOpen(t){return Ea(db,"open",t)},set(t){Object.assign(db,{...db,...t})}},EXe={async getTokenList(){var r;const t=ce.state.activeCaipNetwork,e=await an.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=ce.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(Pt==null?void 0:Pt.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await an.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await an.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=Pt.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await aF.getMyTokensWithBalance(t);return vr.setTokenBalance(e,ce.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:kae(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},xr=ys({tokenBalances:[],loading:!1}),CXe={state:xr,subscribe(t){return ma(xr,()=>t(xr))},subscribeKey(t,e){return Ea(xr,t,e)},setToken(t){t&&(xr.token=Y0(t))},setTokenAmount(t){xr.sendTokenAmount=t},setReceiverAddress(t){xr.receiverAddress=t},setReceiverProfileImageUrl(t){xr.receiverProfileImageUrl=t},setReceiverProfileName(t){xr.receiverProfileName=t},setNetworkBalanceInUsd(t){xr.networkBalanceInUSD=t},setLoading(t){xr.loading=t},async sendToken(){var t;try{switch(Cr.setLoading(!0),(t=ce.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await Cr.sendEvmToken();return;case"solana":await Cr.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Cr.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=ce.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=Mf(t);if(!Cr.state.sendTokenAmount||!Cr.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Cr.state.token)throw new Error("A token is required");(n=Cr.state.token)!=null&&n.address?(Os.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===m0.ACCOUNT_TYPES.SMART_ACCOUNT,token:Cr.state.token.address,amount:Cr.state.sendTokenAmount,network:((r=ce.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await Cr.sendERC20Token({receiverAddress:Cr.state.receiverAddress,tokenAddress:Cr.state.token.address,sendTokenAmount:Cr.state.sendTokenAmount,decimals:Cr.state.token.quantity.decimals})):(Os.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===m0.ACCOUNT_TYPES.SMART_ACCOUNT,token:Cr.state.token.symbol||"",amount:Cr.state.sendTokenAmount,network:((s=ce.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await Cr.sendNativeToken({receiverAddress:Cr.state.receiverAddress,sendTokenAmount:Cr.state.sendTokenAmount,decimals:Cr.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;xr.loading=!0;const e=(i=ce.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=ce.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=ce.state.activeCaipAddress,s=r?Qt.getPlainAddress(r):void 0;if(xr.lastRetry&&!Qt.isAllowedRetry(xr.lastRetry,30*la.ONE_SEC_MS))return xr.loading=!1,[];try{if(s&&e&&n){const a=await aF.getMyTokensWithBalance();return xr.tokenBalances=a,xr.lastRetry=void 0,a}}catch(a){xr.lastRetry=Date.now(),t==null||t(a),Ig.showError("Token Balance Unavailable")}finally{xr.loading=!1}return[]},fetchNetworkBalance(){if(xr.tokenBalances.length===0)return;const t=EXe.mapBalancesToSwapTokens(xr.tokenBalances);if(!t)return;const e=t.find(n=>n.address===kae());e&&(xr.networkBalanceInUSD=e?VZe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;fn.pushTransactionStack({});const e=t.receiverAddress,n=vr.state.address,r=Pt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await Pt.sendTransaction({chainNamespace:Me.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),Os.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Mf("eip155")===m0.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=Cr.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=ce.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=Pt._getClient())==null||a.updateBalance("eip155"),Cr.resetSend()},async sendERC20Token(t){fn.pushTransactionStack({onSuccess(){fn.replace("Account")}});const e=Pt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(vr.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=Qt.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await Pt.writeContract({fromAddress:vr.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:JZe.getERC20Abi(n),chainNamespace:Me.CHAIN.EVM}),Cr.resetSend()}},async sendSolanaToken(){var t;if(!Cr.state.sendTokenAmount||!Cr.state.receiverAddress)throw new Error("An amount and receiver address are required");fn.pushTransactionStack({onSuccess(){fn.replace("Account")}}),await Pt.sendTransaction({chainNamespace:"solana",to:Cr.state.receiverAddress,value:Cr.state.sendTokenAmount}),(t=Pt._getClient())==null||t.updateBalance("solana"),Cr.resetSend()},resetSend(){xr.token=void 0,xr.sendTokenAmount=void 0,xr.receiverAddress=void 0,xr.receiverProfileImageUrl=void 0,xr.receiverProfileName=void 0,xr.loading=!1,xr.tokenBalances=[]}},Cr=Zl(CXe),EM={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},Lx={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Ze=ys({chains:EYe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),_Xe={state:Ze,subscribe(t){return ma(Ze,()=>{t(Ze)})},subscribeKey(t,e){return Ea(Ze,t,e)},subscribeChainProp(t,e,n){let r;return ma(Ze.chains,()=>{var i;const s=n||Ze.activeChain;if(s){const o=(i=Ze.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=At.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=yn.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Ze.noAdapters=!0),Ze.noAdapters||(Ze.activeChain=a==null?void 0:a.namespace,Ze.activeCaipNetwork=i,ce.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Ze.activeChain&&yv.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),h=At.getPreferredAccountTypes()||{},f={...yn.state.defaultAccountTypes,...h};ce.state.chains.set(u,{namespace:u,networkState:ys({...Lx,caipNetwork:d==null?void 0:d[0]}),accountState:ys({...EM,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),ce.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Ze.activeChain===t){const r=Array.from(Ze.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&ce.setActiveCaipNetwork(s)}}Ze.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Ze.chains.set(t.namespace,{namespace:t.namespace,networkState:{...Lx,caipNetwork:r[0]},accountState:EM,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),ce.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Ze.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Ze.chains.set(t.chainNamespace,{...e,caipNetworks:r}),ce.setRequestedCaipNetworks(r,t.chainNamespace),Dt.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Ze.chains.get(t);if(n){const o=((r=Ze.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&ce.setActiveCaipNetwork(n.caipNetworks[0]),Ze.chains.set(t,{...n,caipNetworks:a}),ce.setRequestedCaipNetworks(a||[],t),a.length===0&&Dt.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Ze.chains.get(t);n&&(n.networkState={...n.networkState||Lx,...e},Ze.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Ze.chains.get(t);if(r){const s={...r.accountState||EM,...e};Ze.chains.set(t,{...r,accountState:s}),(Ze.chains.size===1||Ze.activeChain===t)&&(e.caipAddress&&(Ze.activeCaipAddress=e.caipAddress),vr.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Ze.chains.get(t);if(n){const r={...n.networkState||Lx,...e};Ze.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){ce.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;Ze.activeChain=t;const e=t?Ze.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Ze.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Ze.activeCaipNetwork=n,ce.setChainNetworkData(t,{caipNetwork:n}),At.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),yv.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Ze.activeChain!==t.chainNamespace&&ce.setIsSwitchingNamespace(!0);const e=Ze.chains.get(t.chainNamespace);Ze.activeChain=t.chainNamespace,Ze.activeCaipNetwork=t,ce.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Ze.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Ze.activeCaipAddress=void 0,ce.setAccountProp("caipAddress",Ze.activeCaipAddress,t.chainNamespace),e&&vr.replaceState(e.accountState),Cr.resetSend(),yv.set({activeChain:Ze.activeChain,selectedNetworkId:(i=Ze.activeCaipNetwork)==null?void 0:i.caipNetworkId}),At.setActiveCaipNetworkId(t.caipNetworkId),!ce.checkIfSupportedNetwork(t.chainNamespace)&&yn.state.enableNetworkSwitch&&!yn.state.allowUnsupportedChain&&!Pt.state.wcBasic&&ce.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Ze.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==ce.state.activeChain,n=(s=ce.getNetworkData(t))==null?void 0:s.caipNetwork,r=ce.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await ce.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=ce.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=ce.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=Ze.activeCaipNetwork)==null?void 0:a.id)})),s=ce.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&is.close()}catch{fn.goBack()}Os.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Ze.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=Ze.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Ze.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Ze.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Ze.activeChain;if(e&&(n=e),!n)return;const r=(s=Ze.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Ze.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Ze.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return Qt.sortRequestedNetworks(n,r).filter(o=>o==null?void 0:o.id)},getAllRequestedCaipNetworks(){const t=[];return Ze.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=ce.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){ce.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=ce.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Dt.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Ze.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=ce.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=Ze.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:Ze.activeCaipNetwork},getActiveCaipAddress(){return Ze.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Ze.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=ce.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());ce.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Ze.activeCaipNetwork,r=ce.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Ze.activeChain)return!0;const e=ce.getRequestedCaipNetworks(Ze.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){ce.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=qZe.caipNetworkIdToNumber((r=Ze.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Ze.activeChain;if(!e||!t)return!1;const n=ce.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){is.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Ze.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&la.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){ce.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=yn.state.defaultAccountTypes[e],r=ce.getAccountProp("preferredAccountType",e);Ze.activeCaipAddress=void 0,ce.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n||r,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),Dt.removeConnectorId(e)},setIsSwitchingNamespace(t){Ze.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Ze.chains.forEach(s=>{Me.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Ze.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=ce.state.chains.get(t))==null?void 0:e.accountState:vr.state},getNetworkData(t){var n;const e=t||Ze.activeChain;if(e)return(n=ce.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=ce.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Dt.state.filterByNamespace;return(t?[Ze.chains.get(t)]:Array.from(Ze.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?ce.getRequestedCaipNetworks(t):ce.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){Ze.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Ze.lastConnectedSIWECaipNetwork}},ce=Zl(_Xe),AXe={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},Oae=Qt.getBlockchainApiUrl(),Oa=ys({clientId:null,api:new uN({baseUrl:Oae,clientId:null}),supportedChains:{http:[],ws:[]}}),an={state:Oa,async get(t){const{st:e,sv:n}=an.getSdkProperties(),r=yn.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Oa.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=yn.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Oa.supportedChains.http.length||await an.getSupportedNetworks()}catch{return!1}return Oa.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await an.get({path:"v1/supported-chains"});return Oa.supportedChains=t,t}catch{return Oa.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await an.isNetworkSupported(e))return{avatar:"",name:""};const r=At.getIdentityFromCacheForAddress(t);if(r)return r;const s=await an.get({path:`/v1/identity/${t}`,params:{sender:ce.state.activeCaipAddress?Qt.getPlainAddress(ce.state.activeCaipAddress):void 0}});return At.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,signal:n,cache:r,chainId:s}){var o;return await an.isNetworkSupported((o=ce.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?an.get({path:`/v1/account/${t}/history`,params:{cursor:e,chainId:s},signal:n,cache:r}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await an.isNetworkSupported((o=ce.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?an.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await an.isNetworkSupported((n=ce.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?an.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await an.isNetworkSupported((n=ce.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Oa.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:yn.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await an.isNetworkSupported((r=ce.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?an.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=an.getSdkProperties();if(!await an.isNetworkSupported((s=ce.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return an.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await an.isNetworkSupported((o=ce.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Oa.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:la.CONVERT_SLIPPAGE_TOLERANCE},projectId:yn.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=an.getSdkProperties();if(!await an.isNetworkSupported((o=ce.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return an.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=an.getSdkProperties();if(!await an.isNetworkSupported((l=ce.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Ig.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=At.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await an.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return At.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await an.isNetworkSupported((n=ce.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?an.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await an.isNetworkSupported((n=ce.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?an.get({path:`/v1/profile/reverse/${t}`,params:{sender:vr.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await an.isNetworkSupported((n=ce.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?an.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await an.isNetworkSupported((i=ce.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Oa.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await an.isNetworkSupported((a=ce.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Oa.api.post({path:"/v1/generators/onrampurl",params:{projectId:yn.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await an.isNetworkSupported((e=ce.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await an.get({path:"/v1/onramp/options"})}catch{return AXe}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await an.isNetworkSupported((s=ce.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Oa.api.post({path:"/v1/onramp/quote",params:{projectId:yn.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await an.isNetworkSupported((n=ce.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?an.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await an.isNetworkSupported((s=ce.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Oa.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:yn.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Oa.clientId=t,Oa.api=new uN({baseUrl:Oae,clientId:t})}},CM={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Am(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},aF={async getMyTokensWithBalance(t){const e=vr.state.address,n=ce.state.activeCaipNetwork,r=Dt.getConnectorId("eip155")===Me.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=At.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===Me.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await an.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=CM.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await Pt.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await Pt.walletGetAssets({account:t,chainFilter:[s]});if(!CM.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>CM.createBalance(l,e.caipNetworkId));return At.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},ld=ys({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),SXe={state:ld,replaceState(t){t&&Object.assign(ld,Y0(t))},subscribe(t){return ce.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return ce.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){ce.setAccountProp("status",t,e)},getCaipAddress(t){return ce.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?Qt.getPlainAddress(t):void 0;e===ce.state.activeChain&&(ce.state.activeCaipAddress=t),ce.setAccountProp("caipAddress",t,e),ce.setAccountProp("address",n,e)},setBalance(t,e,n){ce.setAccountProp("balance",t,n),ce.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){ce.setAccountProp("profileName",t,e)},setProfileImage(t,e){ce.setAccountProp("profileImage",t,e)},setUser(t,e){ce.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){ce.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){ce.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){ce.setAccountProp("currentTab",t,ce.state.activeChain)},setTokenBalance(t,e){t&&ce.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){ce.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=ce.getAccountProp("addressLabels",n)||new Map;r.set(t,e),ce.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=ce.getAccountProp("addressLabels",e)||new Map;n.delete(t),ce.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){ce.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){ce.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&ce.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){ce.setAccountProp("socialWindow",t?Y0(t):void 0,e)},setFarcasterUrl(t,e){ce.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;ld.balanceLoading=!0;const e=(i=ce.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=ce.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=ce.state.activeCaipAddress,s=r?Qt.getPlainAddress(r):void 0;if(ld.lastRetry&&!Qt.isAllowedRetry(ld.lastRetry,30*la.ONE_SEC_MS))return ld.balanceLoading=!1,[];try{if(s&&e&&n){const a=await aF.getMyTokensWithBalance();return vr.setTokenBalance(a,n),ld.lastRetry=void 0,ld.balanceLoading=!1,a}}catch(a){ld.lastRetry=Date.now(),t==null||t(a),Ig.showError("Token Balance Unavailable")}finally{ld.balanceLoading=!1}return[]},resetAccount(t){ce.resetAccount(t)}},vr=Zl(SXe),IXe={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=ce.state.activeCaipNetwork,r=fn.state.data;if(t.id===(n==null?void 0:n.id))return;const i=vr.getCaipAddress(ce.state.activeChain),o=t.chainNamespace!==ce.state.activeChain,a=vr.getCaipAddress(t.chainNamespace),l=Dt.getConnectorId(ce.state.activeChain)===Me.CONNECTOR_ID.AUTH,u=Me.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?fn.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?fn.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):fn.push("SwitchNetwork",{...r,network:t})}},Da=ys({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),NXe={state:Da,subscribe(t){return ma(Da,()=>t(Da))},subscribeKey(t,e){return Ea(Da,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=ce.state.activeChain,r=e&&e!==n,s=(i=ce.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(Pt.state.wcBasic?tn.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await tn.prefetch(),Dt.setFilterByNamespace(t==null?void 0:t.namespace),is.setLoading(!0,e),e&&r){const a=((o=ce.getNetworkData(e))==null?void 0:o.caipNetwork)||ce.getRequestedCaipNetworks(e)[0];a&&IXe.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=ce.state.noAdapters;yn.state.manualWCControl||a&&!s?Qt.isMobile()?fn.reset("AllWallets"):fn.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?fn.reset(t.view,t.data):s?fn.reset("Account"):fn.reset("Connect")}Da.open=!0,yv.set({open:!0}),Os.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=yn.state.enableEmbedded,e=!!ce.state.activeCaipAddress;Da.open&&Os.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Da.open=!1,fn.reset("Connect"),is.clearLoading(),t?e?fn.replace("Account"):fn.push("Connect"):yv.set({open:!1}),Pt.resetUri()},setLoading(t,e){e&&Da.loadingNamespaceMap.set(e,t),Da.loading=t,yv.set({loading:t})},clearLoading(){Da.loadingNamespaceMap.clear(),Da.loading=!1},shake(){Da.shake||(Da.shake=!0,setTimeout(()=>{Da.shake=!1},500))}},is=Zl(NXe),Zq=2147483648,xXe={convertEVMChainIdToCoinType(t){if(t>=Zq)throw new Error("Invalid chainId");return(Zq|t)>>>0}},dl=ys({suggestions:[],loading:!1}),TXe={state:dl,subscribe(t){return ma(dl,()=>t(dl))},subscribeKey(t,e){return Ea(dl,t,e)},async resolveName(t){var e,n;try{return await an.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await an.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{dl.loading=!0,dl.suggestions=[];const e=await an.getEnsNameSuggestions(t);return dl.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],dl.suggestions}catch(e){const n=DT.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{dl.loading=!1}},async getNamesForAddress(t){try{if(!ce.state.activeCaipNetwork)return[];const n=At.getEnsFromCacheForAddress(t);if(n)return n;const r=await an.reverseLookupEnsName({address:t});return At.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=DT.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=ce.state.activeCaipNetwork,n=vr.state.address,r=Dt.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");dl.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});fn.pushTransactionStack({onCancel(){fn.replace("RegisterAccountName")}});const i=await Pt.signMessage(s);dl.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=xXe.convertEVMChainIdToCoinType(Number(o));await an.registerEnsName({coinType:a,address:n,signature:i,message:s}),vr.setProfileName(t,e.chainNamespace),fn.replace("RegisterAccountNameSuccess")}catch(s){const i=DT.parseEnsApiError(s,`Error registering name ${t}`);throw fn.replace("RegisterAccountName"),new Error(i)}finally{dl.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},DT=Zl(TXe);let Hm=null;const Dp={getSIWX(){return yn.state.siwx},async initializeIfEnabled(){var i;const t=yn.state.siwx,e=ce.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(ce.checkIfSupportedNetwork(n))try{if(Hm&&await Hm,(await t.getSessions(`${n}:${r}`,s)).length)return;await is.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),Os.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=Pt._getClient())==null?void 0:i.disconnect().catch(console.error)),fn.reset("Connect"),Ig.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=yn.state.siwx,e=Qt.getPlainAddress(ce.getActiveCaipAddress()),n=ce.getActiveCaipNetwork(),r=Pt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Dt.getConnectorId(n.chainNamespace)===Me.CONNECTOR_ID.AUTH&&fn.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),ce.setLastConnectedSIWECaipNetwork(n),is.close(),Os.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!is.state.open||fn.state.view==="ApproveTransaction")&&await is.open({view:"SIWXSignMessage"}),Ig.showError("Error signing message"),Os.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=ce.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,Qt.getPlainAddress(ce.getActiveCaipAddress())||""));s&&s.length>0?await ce.switchActiveNetwork(r):await Pt.disconnect()}else await Pt.disconnect()}else is.close();is.close(),Os.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=ce.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,Qt.getPlainAddress(ce.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(t){const e=yn.state.siwx;let n=t==null?void 0:t.address;if(!n){const s=ce.getActiveCaipAddress();n=Qt.getPlainAddress(s)}let r=t==null?void 0:t.caipNetworkId;if(!r){const s=ce.getActiveCaipNetwork();r=s==null?void 0:s.caipNetworkId}return e&&n&&r?e.getSessions(r,n):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=fn.state.view==="ApproveTransaction",r=fn.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var l;const i=Dp.getSIWX();if(!i||!s.includes(Me.CHAIN.EVM)){const u=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:u.address,chainId:u.chainId,accounts:u.accounts}}const o=await i.createMessage({chainId:((l=ce.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),a={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},c=await t.connect({chainId:e,socialUri:n,siwxMessage:a,preferredAccountType:r});return a.accountAddress=c.address,a.serializedMessage=c.message||"",c.signature&&c.message&&await Dp.addEmbeddedWalletSession(a,c.message,c.signature),{address:c.address,chainId:c.chainId,accounts:c.accounts}},async addEmbeddedWalletSession(t,e,n){if(Hm)return Hm;const r=Dp.getSIWX();return r?(Hm=r.addSession({data:t,message:e,signature:n}).finally(()=>{Hm=null}),Hm):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=Dp.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=ce.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Ig.showLoading("Authenticating...",{autoClose:!1}),vr.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),Os.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Dp.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),Os.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Dp.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Ig.hide()}}return!0},getSIWXEventProperties(){var e;const t=ce.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=ce.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:Mf(t)===m0.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},pl={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:Me.CHAIN.EVM},vf={ConnectorExplorerIds:{[Me.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[Me.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[Me.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[Me.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[Me.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[pl.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[pl.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[pl.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[pl.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[pl.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[pl.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[pl.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[pl.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[pl.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[pl.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[pl.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[Me.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Me.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Me.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[Me.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[Me.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[Me.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[Me.CONNECTOR_ID.INJECTED]:"Browser Wallet",[Me.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[Me.CONNECTOR_ID.COINBASE]:"Coinbase",[Me.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[Me.CONNECTOR_ID.LEDGER]:"Ledger",[Me.CONNECTOR_ID.SAFE]:"Safe"}},Fc={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${pl.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=ce.state.activeChain;return Me.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>Dt.getConnectorId(e)===Me.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}};new AbortController;const RXe={ALERT_ERRORS:{PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured. Please update your project configurations on dashboard.reown.com."}}},kXe={DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]},Xq={filterOutDuplicatesByRDNS(t){const e=yn.state.enableEIP6963?Dt.state.connectors:[],n=At.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&Qt.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=Dt.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=At.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Dt.state,{featuredWalletIds:n}=yn.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=yn.state.features)==null?void 0:c.connectMethodsOrder),r=e||Dt.state.connectors;if(n)return n;const{injected:s,announced:i}=MT.getConnectorsByType(r,tn.state.recommended,tn.state.featured),o=s.filter(MT.showConnector),a=i.filter(MT.showConnector);return o.length||a.length?["wallet","email","social"]:kXe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&tn.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&tn.state.excludedWallets.some(r=>Fc.isLowerCaseMatch(r.name,t.name));return e||n}},MT={getConnectorsByType(t,e,n){const{customWallets:r}=yn.state,s=At.getRecentWallets(),i=Xq.filterOutDuplicateWallets(e),o=Xq.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&tn.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&tn.state.excludedWallets.some(i=>Fc.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!Qt.isMobile()||Qt.isMobile()&&!e&&!Pt.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(ce.state.chains.values()).some(n=>Dt.getConnectorId(n.namespace)===Me.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=yn.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const h=[{type:"walletConnect",isEnabled:yn.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(m=>m.isEnabled),f=new Set(h.map(m=>m.type)),p=c.filter(m=>f.has(m)).map(m=>({type:m,isEnabled:!0})),g=h.filter(({type:m})=>!p.some(({type:w})=>w===m));return Array.from(new Set([...p,...g].map(({type:m})=>m)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!Qt.isMobile())return{accounts:[],chainId:void 0};if(t.id===Me.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};Bl`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`;Bl`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`;Bl`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;const BT={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([BT.getAddresses(t),BT.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:BT.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[vf.NetworkImageIds[e.id]]}]})}},hb={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function dN(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const kk=dN({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),W5=dN({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),PXe=dN({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});dN({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});dN({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const OXe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Jg={getMethodsByChainNamespace(t){return OXe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case kk.caipNetworkId:u.chains.push(kk.deprecatedCaipNetworkId);break;case W5.caipNetworkId:u.chains.push(W5.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await DT.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=Jg.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(Jg.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(d=>Qt.isCaipAddress(d)).map(d=>Sg.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(u)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>Sg.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};class DXe{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case Me.CHAIN.EVM:await this.syncEVMConnections(e);break;case Me.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case Me.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===Me.CONNECTOR_ID.WALLET_CONNECT){const c=Jg.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>{var d,h;return u.chainNamespace===this.namespace&&u.id.toString()===((h=(d=c[0])==null?void 0:d.chainId)==null?void 0:h.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await MT.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==Me.CONNECTOR_ID.AUTH&&a.id!==Me.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===Me.CONNECTOR_ID.WALLET_CONNECT){const c=Jg.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var h,f,p,g,m,y;if(a.id===Me.CONNECTOR_ID.WALLET_CONNECT){const w=Jg.getWalletConnectAccounts(r,this.namespace);w.length>0&&i({connectorId:a.id,accounts:w.map(C=>({address:C.address})),caipNetwork:n});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(w=>Qt.createAccount(Me.CHAIN.BITCOIN,w.address,w.purpose||"payment",w.publicKey,w.path));if(u&&u.length>1&&(u=[{namespace:Me.CHAIN.BITCOIN,publicKey:((h=u[hb.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.publicKey)??"",path:((f=u[hb.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.path)??"",address:((p=u[hb.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:Me.CHAIN.BITCOIN,publicKey:((g=u[hb.ACCOUNT_INDEXES.ORDINAL])==null?void 0:g.publicKey)??"",path:((m=u[hb.ACCOUNT_INDEXES.ORDINAL])==null?void 0:m.path)??"",address:((y=u[hb.ACCOUNT_INDEXES.ORDINAL])==null?void 0:y.address)??"",type:"ordinal"}]),!(a.chains.find(w=>w.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(w=>({address:w.address,type:w.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>Fc.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>Fc.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>Fc.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>Fc.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>Fc.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}class Dae{constructor({provider:e,namespace:n}){this.id=Me.CONNECTOR_ID.WALLET_CONNECT,this.name=vf.ConnectorNamesMap[Me.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=vf.ConnectorImageIds[Me.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=ce.getCaipNetworks.bind(ce),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=yn.state.universalProviderConfigOverride,s=Jg.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Dp.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:MXe})}}const MXe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],BXe=[Me.CONNECTOR_ID.AUTH,Me.CONNECTOR_ID.WALLET_CONNECT];class LXe{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>ce.getCaipNetworks(n),this.getConnectorId=n=>Dt.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new DXe({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:Me.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:Me.CONNECTOR_ID.AUTH,type:"AUTH",name:Me.CONNECTOR_NAMES.AUTH,provider:e,imageId:vf.ConnectorImageIds[Me.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!Fc.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){vr.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=Mf(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof Dae);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=Qt.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=Qt.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=Qt.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&Fc.isLowerCaseMatch(this.getConnectorId(Me.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=Qt.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),Fc.isLowerCaseMatch(this.getConnectorId(Me.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?BT.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),Fc.isLowerCaseMatch(this.getConnectorId(Me.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(BXe.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}class tO extends Error{constructor(e,n){super(e),this.error=n}}class UXe extends tO{constructor(){super(...arguments),this.name="WalletAccountError"}}class $Xe extends tO{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class eV extends tO{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class FXe extends tO{constructor(){super(...arguments),this.name="WalletSignMessageError"}}function y0(t){return"version"in t}const Mae="solana:signAndSendTransaction",jXe="solana:signMessage",z5="solana:signTransaction",Bae="standard:connect",WXe="standard:disconnect",Lae="standard:events";function zXe(t){return Bae in t.features&&Lae in t.features&&(Mae in t.features||z5 in t.features)}function HXe(t){if(typeof t=="string")return`solana:${t}`}class nO{constructor(){this.listeners={accountsChanged:[],chainChanged:[],connect:[],disconnect:[],pendingTransaction:[],auth_rpcRequest:[],auth_rpcSuccess:[],auth_rpcError:[]}}on(e,n){this.listeners[e].push(n)}removeListener(e,n){this.listeners[e]=this.listeners[e].filter(r=>r!==n)}emit(e,n){this.listeners[e].forEach(r=>r(n))}}class GXe extends nO{constructor(e){super(),this.id=Me.CONNECTOR_ID.AUTH,this.name=Me.CONNECTOR_NAMES.AUTH,this.type="AUTH",this.chain=Me.CHAIN.SOLANA,this.provider=e.w3mFrameProvider,this.requestedChains=e.chains,this.getActiveChain=e.getActiveChain}get publicKey(){var n,r;const e=(r=(n=ce.state.chains.get(Me.CHAIN.SOLANA))==null?void 0:n.accountState)==null?void 0:r.address;return e?new st(e):void 0}get chains(){const e=this.provider.getAvailableChainIds();return this.requestedChains.filter(n=>e.includes(n.caipNetworkId))}async connect(e={}){var s;const n=e.chainId||((s=this.getActiveChain())==null?void 0:s.id),r=Mf("solana");if(await Dp.authConnectorAuthenticate({authConnector:this.provider,chainId:HXe(n),socialUri:e.socialUri,preferredAccountType:r,chainNamespace:Me.CHAIN.SOLANA}),!this.publicKey)throw new Error("Failed to connect to the wallet");return this.emit("connect",this.publicKey),this.publicKey.toBase58()}async disconnect(){await this.provider.disconnect(),this.emit("disconnect",void 0)}async signMessage(e){if(!this.publicKey)throw new Error("Wallet not connected");const n=await this.provider.request({method:"solana_signMessage",params:{message:Ka.encode(e),pubkey:this.publicKey.toBase58()},chainNamespace:this.chain});return Ka.decode(n.signature)}async signTransaction(e){const n=await this.provider.request({method:"solana_signTransaction",params:{transaction:this.serializeTransaction(e)},chainNamespace:this.chain}),r=Ka.decode(n.transaction);return y0(e)?pm.deserialize(r):Ja.from(r)}async signAndSendTransaction(e,n){const r=this.serializeTransaction(e);return(await this.provider.request({method:"solana_signAndSendTransaction",params:{transaction:r,options:n},chainNamespace:this.chain})).signature}async sendTransaction(e,n,r){const s=await this.signTransaction(e);return await n.sendRawTransaction(s.serialize(),r)}async signAllTransactions(e){return(await this.provider.request({method:"solana_signAllTransactions",params:{transactions:e.map(r=>this.serializeTransaction(r))},chainNamespace:this.chain})).transactions.map((r,s)=>{const i=e[s];if(!i)throw new Error("Invalid solana_signAllTransactions response");const o=Ka.decode(r);return y0(i)?pm.deserialize(o):Ja.from(o)})}async request(e){return this.provider.request({method:e.method,params:e.params,chainNamespace:this.chain})}async getAccounts(){return this.publicKey?Promise.resolve([{namespace:this.chain,address:this.publicKey.toBase58(),type:"eoa"}]):Promise.resolve([])}serializeTransaction(e){return Ka.encode(new Uint8Array(e.serialize({verifySignatures:!1})))}}class qXe extends nO{constructor(e){super(),this.name="Coinbase Wallet",this.id=vf.ConnectorExplorerIds[Me.CONNECTOR_ID.COINBASE_SDK],this.explorerId=vf.ConnectorExplorerIds[Me.CONNECTOR_ID.COINBASE_SDK],this.type="ANNOUNCED",this.imageUrl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8Y2lyY2xlIGN4PSI1MTIiIGN5PSI1MTIiIHI9IjUxMiIgZmlsbD0iIzAwNTJGRiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1MiA1MTJDMTUyIDcxMC44MjMgMzEzLjE3NyA4NzIgNTEyIDg3MkM3MTAuODIzIDg3MiA4NzIgNzEwLjgyMyA4NzIgNTEyQzg3MiAzMTMuMTc3IDcxMC44MjMgMTUyIDUxMiAxNTJDMzEzLjE3NyAxNTIgMTUyIDMxMy4xNzcgMTUyIDUxMlpNNDIwIDM5NkM0MDYuNzQ1IDM5NiAzOTYgNDA2Ljc0NSAzOTYgNDIwVjYwNEMzOTYgNjE3LjI1NSA0MDYuNzQ1IDYyOCA0MjAgNjI4SDYwNEM2MTcuMjU1IDYyOCA2MjggNjE3LjI1NSA2MjggNjA0VjQyMEM2MjggNDA2Ljc0NSA2MTcuMjU1IDM5NiA2MDQgMzk2SDQyMFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=",this.chain=Me.CHAIN.SOLANA,this.provider=this,this.coinbase=e.provider,this.requestedChains=e.chains}get chains(){return this.requestedChains.filter(e=>e.id===kk.id)}get publicKey(){return this.coinbase.publicKey}get imageId(){return vf.ConnectorImageIds[Me.CONNECTOR_ID.COINBASE]}async connect(){try{await this.coinbase.connect();const e=this.getAccount(!0);return this.coinbase.emit("connect",this.coinbase.publicKey),this.emit("connect",e),e.toBase58()}catch(e){throw this.coinbase.emit("error",e),e}}async disconnect(){await this.coinbase.disconnect(),this.coinbase.emit("disconnect",void 0),this.emit("disconnect",void 0)}async signMessage(e){return(await this.coinbase.signMessage(e)).signature}async signTransaction(e){return this.coinbase.signTransaction(e)}async signAndSendTransaction(e,n){return(await this.coinbase.signAndSendTransaction(e,n)).signature}async sendTransaction(e,n,r){const s=await this.signTransaction(e);return await n.sendRawTransaction(s.serialize(),r)}async signAllTransactions(e){return await this.coinbase.signAllTransactions(e)}async request(e){return Promise.reject(new Error('The "request" method is not supported on Coinbase Wallet'))}async getAccounts(){const e=this.getAccount();return e?Promise.resolve([{namespace:this.chain,address:e.toBase58(),type:"eoa"}]):Promise.resolve([])}getAccount(e){const n=this.coinbase.publicKey;if(e&&!n)throw new Error("Not connected");return n}}class tV extends Error{constructor(e){super(`The wallet does not support the "${e}" feature`)}}class nV extends Error{constructor(e){super(`The method "${e}" is not supported by the wallet`)}}var VXe=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},H5;class rV extends Dae{constructor({provider:e,chains:n,getActiveChain:r}){super({caipNetworks:n,namespace:"solana",provider:e}),this.eventEmitter=new nO,this.emit=this.eventEmitter.emit.bind(this.eventEmitter),this.on=this.eventEmitter.on.bind(this.eventEmitter),this.removeListener=this.eventEmitter.removeListener.bind(this.eventEmitter),H5.set(this,"1.0.0"),this.getActiveChain=r}get session(){return this.provider.session}get chains(){return this.sessionChains.map(e=>{let n=e;return n===hu.CHAIN_IDS.Deprecated_Mainnet?n=hu.CHAIN_IDS.Mainnet:n===hu.CHAIN_IDS.Deprecated_Devnet&&(n=hu.CHAIN_IDS.Devnet),this.caipNetworks.find(r=>r.caipNetworkId===n)}).filter(Boolean)}get icon(){return Pl.state.connectorImages[this.id]}get version(){return VXe(this,H5,"f")}get publicKey(){const e=this.getAccount(!1);if(e)return new st(e.publicKey)}async connect(){await super.connectWalletConnect();const e=this.getAccount(!0);return this.emit("connect",new st(e.publicKey)),e.address}async disconnect(){await super.disconnect(),this.emit("disconnect",void 0)}async signMessage(e){this.checkIfMethodIsSupported("solana_signMessage");const n=await this.internalRequest("solana_signMessage",{message:Ka.encode(e),pubkey:this.getAccount(!0).address});return Ka.decode(n.signature)}async signTransaction(e){this.checkIfMethodIsSupported("solana_signTransaction");const n=this.serializeTransaction(e),r=await this.internalRequest("solana_signTransaction",{transaction:n,pubkey:this.getAccount(!0).address,...this.getRawRPCParams(e)});if("signature"in r){const i=Ka.decode(r.signature);return e.addSignature(new st(this.getAccount(!0).publicKey),Buffer.from(i)),e}const s=Buffer.from(r.transaction,"base64");return y0(e)?pm.deserialize(new Uint8Array(s)):Ja.from(s)}async signAndSendTransaction(e,n){this.checkIfMethodIsSupported("solana_signAndSendTransaction");const r=this.serializeTransaction(e),s=await this.internalRequest("solana_signAndSendTransaction",{transaction:r,pubkey:this.getAccount(!0).address,sendOptions:n});return this.emit("pendingTransaction",void 0),s.signature}async sendTransaction(e,n,r){const s=await this.signTransaction(e),i=await n.sendRawTransaction(s.serialize(),r);return this.emit("pendingTransaction",void 0),i}async signAllTransactions(e){try{return this.checkIfMethodIsSupported("solana_signAllTransactions"),(await this.internalRequest("solana_signAllTransactions",{transactions:e.map(r=>this.serializeTransaction(r))})).transactions.map((r,s)=>{const i=e[s];if(!i)throw new Error("Invalid transactions response");const o=Buffer.from(r,"base64");return y0(i)?pm.deserialize(new Uint8Array(o)):(this.emit("pendingTransaction",void 0),Ja.from(o))})}catch(n){if(n instanceof nV){const r=[];for(const s of e)r.push(await this.signTransaction(s));return r}throw n}}request(e){return this.internalRequest(e.method,e.params)}async getAccounts(){var n,r;const e=((r=(n=this.session)==null?void 0:n.namespaces.solana)==null?void 0:r.accounts)||[];return Promise.resolve(e.map(s=>({namespace:this.chain,address:Sg.parseCaipAddress(s).address,type:"eoa"})))}internalRequest(e,n){var i;const r=this.chains.find(o=>{var a;return((a=this.getActiveChain())==null?void 0:a.id)===o.id});let s=r==null?void 0:r.caipNetworkId;switch(s){case hu.CHAIN_IDS.Mainnet:this.sessionChains.includes(hu.CHAIN_IDS.Mainnet)||(s=hu.CHAIN_IDS.Deprecated_Mainnet);break;case hu.CHAIN_IDS.Devnet:this.sessionChains.includes(hu.CHAIN_IDS.Devnet)||(s=hu.CHAIN_IDS.Deprecated_Devnet);break}return(i=this.provider)==null?void 0:i.request({method:e,params:n},s)}get sessionChains(){var e;return Jg.getChainsFromNamespaces((e=this.session)==null?void 0:e.namespaces)}serializeTransaction(e){return Buffer.from(new Uint8Array(e.serialize({verifySignatures:!1}))).toString("base64")}getAccount(e){var s,i;const n=(i=(s=this.session)==null?void 0:s.namespaces.solana)==null?void 0:i.accounts[0];if(!n){if(e)throw new Error("Account not found");return}const r=n.split(":")[2];if(!r){if(e)throw new Error("Address not found");return}return{address:r,publicKey:Ka.decode(r)}}getRawRPCParams(e){var n;return y0(e)?{}:{feePayer:((n=e.feePayer)==null?void 0:n.toBase58())??"",instructions:e.instructions.map(r=>({data:Ka.encode(new Uint8Array(r.data)),keys:r.keys.map(s=>({isWritable:s.isWritable,isSigner:s.isSigner,pubkey:s.pubkey.toBase58()})),programId:r.programId.toBase58()})),recentBlockhash:e.recentBlockhash??""}}checkIfMethodIsSupported(e){var n,r;if(!((r=(n=this.session)==null?void 0:n.namespaces.solana)!=null&&r.methods.includes(e)))throw new nV(e)}}H5=new WeakMap;const zf=new st("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new st("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");const cF=new st("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new st("So11111111111111111111111111111111111111112");new st("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const lF=t=>{const e=t.decode.bind(t),n=t.encode.bind(t);return{decode:e,encode:n}};var hN={};Object.defineProperty(hN,"__esModule",{value:!0});function KXe(t){{const e=Buffer.from(t);e.reverse();const n=e.toString("hex");return n.length===0?BigInt(0):BigInt(`0x${n}`)}}var YXe=hN.toBigIntLE=KXe;function QXe(t){{const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}hN.toBigIntBE=QXe;function JXe(t,e){{const n=t.toString(16),r=Buffer.from(n.padStart(e*2,"0").slice(0,e*2),"hex");return r.reverse(),r}}var ZXe=hN.toBufferLE=JXe;function XXe(t,e){{const n=t.toString(16);return Buffer.from(n.padStart(e*2,"0").slice(0,e*2),"hex")}}hN.toBufferBE=XXe;const eet=t=>e=>{const n=Vr(t,e),{encode:r,decode:s}=lF(n),i=n;return i.decode=(o,a)=>{const c=s(o,a);return YXe(Buffer.from(c))},i.encode=(o,a,c)=>{const l=ZXe(o,t);return r(l,a,c)},i},V_=eet(8),Uae=t=>{const e=Fn(t),{encode:n,decode:r}=lF(e),s=e;return s.decode=(i,o)=>!!r(i,o),s.encode=(i,o,a)=>{const c=Number(i);return n(c,o,a)},s},so=t=>{const e=Vr(32,t),{encode:n,decode:r}=lF(e),s=e;return s.decode=(i,o)=>{const a=r(i,o);return new st(a)},s.encode=(i,o,a)=>{const c=i.toBuffer();return n(c,o,a)},s};class KC extends Error{constructor(e){super(e)}}class Pk extends KC{constructor(){super(...arguments),this.name="TokenAccountNotFoundError"}}class tet extends KC{constructor(){super(...arguments),this.name="TokenInvalidAccountError"}}class $ae extends KC{constructor(){super(...arguments),this.name="TokenInvalidAccountOwnerError"}}class K_ extends KC{constructor(){super(...arguments),this.name="TokenInvalidAccountSizeError"}}class net extends KC{constructor(){super(...arguments),this.name="TokenInvalidMintError"}}class ret extends KC{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}var G5;(function(t){t[t.InitializeMint=0]="InitializeMint",t[t.InitializeAccount=1]="InitializeAccount",t[t.InitializeMultisig=2]="InitializeMultisig",t[t.Transfer=3]="Transfer",t[t.Approve=4]="Approve",t[t.Revoke=5]="Revoke",t[t.SetAuthority=6]="SetAuthority",t[t.MintTo=7]="MintTo",t[t.Burn=8]="Burn",t[t.CloseAccount=9]="CloseAccount",t[t.FreezeAccount=10]="FreezeAccount",t[t.ThawAccount=11]="ThawAccount",t[t.TransferChecked=12]="TransferChecked",t[t.ApproveChecked=13]="ApproveChecked",t[t.MintToChecked=14]="MintToChecked",t[t.BurnChecked=15]="BurnChecked",t[t.InitializeAccount2=16]="InitializeAccount2",t[t.SyncNative=17]="SyncNative",t[t.InitializeAccount3=18]="InitializeAccount3",t[t.InitializeMultisig2=19]="InitializeMultisig2",t[t.InitializeMint2=20]="InitializeMint2",t[t.GetAccountDataSize=21]="GetAccountDataSize",t[t.InitializeImmutableOwner=22]="InitializeImmutableOwner",t[t.AmountToUiAmount=23]="AmountToUiAmount",t[t.UiAmountToAmount=24]="UiAmountToAmount",t[t.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",t[t.TransferFeeExtension=26]="TransferFeeExtension",t[t.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",t[t.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",t[t.Reallocate=29]="Reallocate",t[t.MemoTransferExtension=30]="MemoTransferExtension",t[t.CreateNativeMint=31]="CreateNativeMint",t[t.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",t[t.InterestBearingMintExtension=33]="InterestBearingMintExtension",t[t.CpiGuardExtension=34]="CpiGuardExtension",t[t.InitializePermanentDelegate=35]="InitializePermanentDelegate",t[t.TransferHookExtension=36]="TransferHookExtension",t[t.MetadataPointerExtension=39]="MetadataPointerExtension",t[t.GroupPointerExtension=40]="GroupPointerExtension",t[t.GroupMemberPointerExtension=41]="GroupMemberPointerExtension",t[t.ScaledUiAmountExtension=43]="ScaledUiAmountExtension",t[t.PausableExtension=44]="PausableExtension"})(G5||(G5={}));var Ok;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Mint=1]="Mint",t[t.Account=2]="Account"})(Ok||(Ok={}));const Fae=1,set=Et([Fn("m"),Fn("n"),Uae("isInitialized"),so("signer1"),so("signer2"),so("signer3"),so("signer4"),so("signer5"),so("signer6"),so("signer7"),so("signer8"),so("signer9"),so("signer10"),so("signer11")]),jae=set.span;var Dk;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initialized=1]="Initialized",t[t.Frozen=2]="Frozen"})(Dk||(Dk={}));const Wae=Et([so("mint"),so("owner"),V_("amount"),Rt("delegateOption"),so("delegate"),Fn("state"),Rt("isNativeOption"),V_("isNative"),V_("delegatedAmount"),Rt("closeAuthorityOption"),so("closeAuthority")]),Fp=Wae.span;async function sV(t,e,n,r=zf){const s=await t.getAccountInfo(e,n);return iet(e,s,r)}function iet(t,e,n=zf){if(!e)throw new Pk;if(!e.owner.equals(n))throw new $ae;if(e.data.length<Fp)throw new K_;const r=Wae.decode(e.data.slice(0,Fp));let s=Buffer.alloc(0);if(e.data.length>Fp){if(e.data.length===jae)throw new K_;if(e.data[Fp]!=Ok.Account)throw new tet;s=e.data.slice(Fp+Fae)}return{address:t,mint:r.mint,owner:r.owner,amount:r.amount,delegate:r.delegateOption?r.delegate:null,delegatedAmount:r.delegatedAmount,isInitialized:r.state!==Dk.Uninitialized,isFrozen:r.state===Dk.Frozen,isNative:!!r.isNativeOption,rentExemptReserve:r.isNativeOption?r.isNative:null,closeAuthority:r.closeAuthorityOption?r.closeAuthority:null,tlvData:s}}function oet(t,e,n){if(n.length){t.push({pubkey:e,isSigner:!1,isWritable:!1});for(const r of n)t.push({pubkey:r instanceof st?r:r.publicKey,isSigner:!0,isWritable:!1})}else t.push({pubkey:e,isSigner:!0,isWritable:!1});return t}const zae=Et([Rt("mintAuthorityOption"),so("mintAuthority"),V_("supply"),Fn("decimals"),Uae("isInitialized"),Rt("freezeAuthorityOption"),so("freezeAuthority")]),_M=zae.span;async function aet(t,e,n,r=zf){const s=await t.getAccountInfo(e,n);return cet(e,s,r)}function cet(t,e,n=zf){if(!e)throw new Pk;if(!e.owner.equals(n))throw new $ae;if(e.data.length<_M)throw new K_;const r=zae.decode(e.data.slice(0,_M));let s=Buffer.alloc(0);if(e.data.length>_M){if(e.data.length<=Fp)throw new K_;if(e.data.length===jae)throw new K_;if(e.data[Fp]!=Ok.Mint)throw new net;s=e.data.slice(Fp+Fae)}return{address:t,mintAuthority:r.mintAuthorityOption?r.mintAuthority:null,supply:r.supply,decimals:r.decimals,isInitialized:r.isInitialized,freezeAuthority:r.freezeAuthorityOption?r.freezeAuthority:null,tlvData:s}}function iV(t,e,n=!1,r=zf,s=cF){if(!n&&!st.isOnCurve(e.toBuffer()))throw new ret;const[i]=st.findProgramAddressSync([e.toBuffer(),r.toBuffer(),t.toBuffer()],s);return i}function uet(t,e,n,r,s=zf,i=cF){return det(t,e,n,r,Buffer.alloc(0),s,i)}function det(t,e,n,r,s,i=zf,o=cF){const a=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:sC.programId,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}];return new io({keys:a,programId:o,data:s})}const oV=Et([Fn("instruction"),V_("amount")]);function het(t,e,n,r,s=[],i=zf){const o=oet([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],n,s),a=Buffer.alloc(oV.span);return oV.encode({instruction:G5.Transfer,amount:BigInt(r)},a),new io({keys:o,programId:i,data:a})}async function fet({provider:t,to:e,amount:n,tokenMint:r,connection:s}){if(!t.publicKey)throw new Error("No public key found");if(n<=0)throw new Error("Amount must be greater than 0");try{const i=t.publicKey,o=new st(e),a=new st(r),l=(await aet(s,a)).decimals;if(l<0)throw new Error("Invalid token decimals");const u=Math.floor(n*10**l),d=iV(a,i),h=iV(a,o);try{if((await sV(s,d)).amount<BigInt(u))throw new Error("Insufficient token balance")}catch(w){throw w instanceof Pk?new Error("Sender does not have a token account for this mint"):w}let f=!1;try{await sV(s,h)}catch(w){if(w instanceof Pk)f=!0;else throw w}const p=[],g=f?bM.UNIT_LIMIT_WITH_ATA_CREATION:bM.UNIT_LIMIT_TRANSFER_ONLY;p.push(OS.setComputeUnitPrice({microLamports:bM.UNIT_PRICE_MICRO_LAMPORTS}),OS.setComputeUnitLimit({units:g})),f&&p.push(uet(i,h,o,a)),p.push(het(d,h,i,u,[],zf));const{blockhash:m,lastValidBlockHeight:y}=await s.getLatestBlockhash();return new Ja({feePayer:i,blockhash:m,lastValidBlockHeight:y}).add(...p)}catch(i){throw new Error(`Failed to create SPL token transaction: ${i instanceof Error?i.message:"Unknown error"}`)}}const aV={UNIT_PRICE_MICRO_LAMPORTS:2e7,UNIT_LIMIT:500};async function cV({provider:t,to:e,value:n,connection:r}){if(!t.publicKey)throw Error("No public key found");const s=new st(e),i=Math.floor(n*GZe),{blockhash:o,lastValidBlockHeight:a}=await r.getLatestBlockhash(),c=[OS.setComputeUnitPrice({microLamports:aV.UNIT_PRICE_MICRO_LAMPORTS}),OS.setComputeUnitLimit({units:aV.UNIT_LIMIT}),sC.transfer({fromPubkey:t.publicKey,toPubkey:s,lamports:i})];return new Ja({feePayer:t.publicKey,blockhash:o,lastValidBlockHeight:a}).add(...c)}var pet=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},get=function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},LT;let F1;const rO=new Set;function met(t){Y_=void 0,rO.add(t)}function yet(t){Y_=void 0,rO.delete(t)}const qb={};function wet(){if(F1||(F1=Object.freeze({register:lV,get:bet,on:vet}),typeof window>"u"))return F1;const t=Object.freeze({register:lV});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(t))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new Eet(t))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return F1}function lV(...t){var e;return t=t.filter(n=>!rO.has(n)),t.length?(t.forEach(n=>met(n)),(e=qb.register)==null||e.forEach(n=>uV(()=>n(...t))),function(){var r;t.forEach(s=>yet(s)),(r=qb.unregister)==null||r.forEach(s=>uV(()=>s(...t)))}):()=>{}}let Y_;function bet(){return Y_||(Y_=[...rO]),Y_}function vet(t,e){var n;return(n=qb[t])!=null&&n.push(e)||(qb[t]=[e]),function(){var s;qb[t]=(s=qb[t])==null?void 0:s.filter(i=>e!==i)}}function uV(t){try{t()}catch(e){console.error(e)}}class Eet extends Event{get detail(){return pet(this,LT,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),LT.set(this,void 0),get(this,LT,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}LT=new WeakMap;function Cet(t){switch(t){case"processed":case"confirmed":case"finalized":case void 0:return t;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const dV={"solana:mainnet":kk,"solana:testnet":PXe,"solana:devnet":W5};class _et extends nO{constructor({wallet:e,getActiveChain:n,requestedChains:r}){super(),this.chain=Me.CHAIN.SOLANA,this.provider=this,this.wallet=e,this.getActiveChain=n,this.requestedChains=r,this.bindEvents()}get id(){const e=this.name;return vf.ConnectorExplorerIds[e]||e}get name(){return this.wallet.name==="Trust"?"Trust Wallet":this.wallet.name}get type(){return"ANNOUNCED"}get explorerId(){return vf.ConnectorExplorerIds[this.name]}get publicKey(){const e=this.getAccount(!1);if(e)return new st(e.publicKey)}get imageUrl(){return this.wallet.icon}get chains(){return this.wallet.chains.map(e=>this.requestedChains.find(n=>{var r;return n.id===e||n.id===((r=dV[e])==null?void 0:r.id)})).filter(Boolean)}async connect(){await this.getWalletFeature(Bae).connect();const n=this.getAccount(!0),r=new st(n.publicKey);return this.emit("connect",r),n.address}async disconnect(){await this.getWalletFeature(WXe).disconnect(),this.emit("disconnect",void 0)}async signMessage(e){const n=this.getWalletFeature(jXe),r=this.getAccount(!0),[s]=await n.signMessage({message:e,account:r});if(!s)throw new FXe("Empty result");return s.signature}async signTransaction(e){const n=this.getWalletFeature(z5),r=this.getAccount(!0),s=this.serializeTransaction(e),[i]=await n.signTransaction({account:r,transaction:new Uint8Array(s),chain:this.getActiveChainName()});if(!i)throw new eV("Empty result");return this.emit("pendingTransaction",void 0),y0(e)?pm.deserialize(i.signedTransaction):Ja.from(i.signedTransaction)}async signAndSendTransaction(e,n){const r=this.getWalletFeature(Mae),s=this.getAccount(!0),[i]=await r.signAndSendTransaction({account:s,transaction:new Uint8Array(this.serializeTransaction(e)),options:{...n,preflightCommitment:Cet(n==null?void 0:n.preflightCommitment)},chain:this.getActiveChainName()});if(!i)throw new $Xe("Empty result");return this.emit("pendingTransaction",void 0),Ka.encode(i.signature)}async sendTransaction(e,n,r){const s=await this.signTransaction(e);return await n.sendRawTransaction(s.serialize(),r)}async signAllTransactions(e){const n=this.getWalletFeature(z5),r=this.getAccount(!0),s=this.getActiveChainName();return(await n.signTransaction(...e.map(o=>({transaction:new Uint8Array(this.serializeTransaction(o)),account:r,chain:s})))).map(({signedTransaction:o},a)=>{const c=e[a];if(!c)throw new eV("Invalid transaction signature response");return this.emit("pendingTransaction",void 0),y0(c)?pm.deserialize(o):Ja.from(o)})}async request(e){return Promise.reject(new tV("request"))}async getAccounts(){return Promise.resolve(this.wallet.accounts.map(e=>({namespace:this.chain,address:e.address,type:"eoa"})))}serializeTransaction(e){return e.serialize({verifySignatures:!1})}getAccount(e){const n=this.wallet.accounts[0];if(e&&!n)throw new UXe;return n}getWalletFeature(e){if(!(e in this.wallet.features))throw new tV(e);return this.wallet.features[e]}getActiveChainName(){const e=Object.entries(dV).find(([,n])=>{var r;return n.id===((r=this.getActiveChain())==null?void 0:r.id)});if(!e)throw new Error("Invalid chain id");return e[0]}bindEvents(){this.getWalletFeature(Lae).on("change",n=>{if(n.accounts){const r=n.accounts[0];r&&this.emit("accountsChanged",new st(r.publicKey))}})}}const{get:Aet,on:hV}=wet();let wp=[];function Iet(t,e,n){const r=[hV("register",(...s)=>{wp=[...wp,...fV(s,t,e)],n(...wp)}),hV("unregister",(...s)=>{wp=wp.filter(i=>s.some(o=>o.name===i.wallet.name)),n(...wp)})];return wp=fV(Aet(),t,e),n(...wp),()=>r.forEach(s=>s())}function fV(t,e,n){return t.filter(r=>r.name!=="WalletConnect"&&zXe(r)).map(r=>new _et({wallet:r,requestedChains:e,getActiveChain:n}))}const Net=[Me.CONNECTOR_ID.AUTH,Me.CONNECTOR_ID.WALLET_CONNECT];class xet extends LXe{constructor(e={}){super({adapterType:Me.ADAPTER_TYPES.SOLANA,namespace:Me.CHAIN.SOLANA}),this.balancePromises={},this.connectionSettings=e.connectionSettings||"confirmed",this.wallets=e.wallets,this.registerWalletStandard=e.registerWalletStandard}construct(e){var i,o;super.construct(e);const n=At.getActiveCaipNetworkId(),r=((i=e.networks)==null?void 0:i.find(a=>a.caipNetworkId===n))||((o=e.networks)==null?void 0:o[0]),s=r==null?void 0:r.rpcUrls.default.http[0];s&&lb.setConnection(new L1(s,this.connectionSettings))}setAuthProvider(e){this.addConnector(new GXe({w3mFrameProvider:e,getActiveChain:()=>ce.getCaipNetworkByNamespace(this.namespace),chains:this.getCaipNetworks()}))}syncConnectors(e,n){e.projectId||Tae.open(RXe.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");const r=()=>n.getCaipNetwork(this.namespace);Qt.isClient()&&"coinbaseSolana"in window&&this.addConnector(new qXe({provider:window.coinbaseSolana,chains:this.getCaipNetworks(),getActiveChain:r})),Iet(this.getCaipNetworks(),r,this.addConnector.bind(this))}async writeContract(){return Promise.resolve({hash:""})}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async walletGetAssets(e){return Promise.resolve({})}async getAccounts(e){const n=this.connectors.find(r=>r.id===e.id);return n?{accounts:await n.getAccounts()}:{accounts:[]}}async signMessage(e){const n=e.provider;if(!n)throw new Error("connectionControllerClient:signMessage - provider is undefined");const r=await n.signMessage(new TextEncoder().encode(e.message));return{signature:Ka.encode(r)}}async estimateGas(e){const n=lb.state.connection;if(!n||!e.provider)throw new Error("Connection is not set");const s=await(await cV({provider:e.provider,connection:n,to:"11111111111111111111111111111111",value:1})).getEstimatedFee(n);return{gas:BigInt(s||0)}}async sendTransaction(e){const n=lb.state.connection;if(!n||!e.provider)throw new Error("Connection is not set");const r=e.provider,s=e.tokenMint?await fet({provider:r,connection:n,to:e.to,amount:Number(e.value),tokenMint:e.tokenMint}):await cV({provider:r,connection:n,to:e.to,value:Number.isNaN(Number(e.value))?0:Number(e.value)}),i=await r.sendTransaction(s,n);return await new Promise(o=>{const a=setInterval(async()=>{const c=await n.getSignatureStatus(i);c!=null&&c.value&&(clearInterval(a),o())},1e3)}),{hash:i}}parseUnits(){return 0n}formatUnits(){return""}async connect(e){var l,u,d,h,f;const n=this.connectors.find(p=>p.id===e.id);if(!n)throw new Error("Provider not found");const r={...n,...e.id===Me.CONNECTOR_ID.AUTH?{provider:n}:{}},s=e.rpcUrl||((u=(l=this.getCaipNetworks())==null?void 0:l.find(p=>p.id===e.chainId))==null?void 0:u.rpcUrls.default.http[0]);if(!s)throw new Error(`RPC URL not found for chainId: ${e.chainId}`);const i=(d=this.connectionManager)==null?void 0:d.getConnection({address:e.address,connectorId:n.id,connections:this.connections,connectors:this.connectors});if(i!=null&&i.account)return this.emit("accountChanged",{address:i.account.address,chainId:(h=i.caipNetwork)==null?void 0:h.id,connector:r}),{id:n.id,address:i.account.address,chainId:e.chainId,provider:n,type:n.type};const o=await n.connect({chainId:e.chainId,socialUri:e.socialUri});lb.setConnection(new L1(s,this.connectionSettings)),this.emit("accountChanged",{address:o,chainId:e.chainId,connector:r});const a=n.id===Me.CONNECTOR_ID.AUTH,c=(f=this.getCaipNetworks())==null?void 0:f.find(p=>p.id===e.chainId);return this.addConnection({connectorId:n.id,accounts:[{address:o}],caipNetwork:c,auth:a?{name:At.getConnectedSocialProvider(),username:At.getConnectedSocialUsername()}:void 0}),n.id!==Me.CONNECTOR_ID.WALLET_CONNECT&&this.listenSolanaProviderEvents(n.id,n.provider),{id:n.id,address:o,chainId:e.chainId,provider:n,type:n.type}}async getBalance(e){var c,l,u,d;const n=e.address,r=(c=this.getCaipNetworks())==null?void 0:c.find(h=>h.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"SOL"});const s=new L1((d=(u=(l=r==null?void 0:r.rpcUrls)==null?void 0:l.default)==null?void 0:u.http)==null?void 0:d[0],this.connectionSettings),i=`${r==null?void 0:r.caipNetworkId}:${e.address}`,o=this.balancePromises[i];if(o)return o;const a=At.getNativeBalanceCacheForCaipAddress(i);return a?{balance:a.balance,symbol:a.symbol}:(this.balancePromises[i]=new Promise(async h=>{var f,p;try{const m=(await s.getBalance(new st(n))/hu.LAMPORTS_PER_SOL).toString();if(At.updateNativeBalanceCache({caipAddress:i,balance:m,symbol:((f=e.caipNetwork)==null?void 0:f.nativeCurrency.symbol)||"SOL",timestamp:Date.now()}),!e.caipNetwork)throw new Error("caipNetwork is required");h({balance:m,symbol:(p=e.caipNetwork)==null?void 0:p.nativeCurrency.symbol})}catch{h({balance:"0.00",symbol:"SOL"})}}).finally(()=>{delete this.balancePromises[i]}),this.balancePromises[i]||{balance:"0.00",symbol:"SOL"})}async switchNetwork(e){var r,s,i;await super.switchNetwork(e);const{caipNetwork:n}=e;(i=(s=(r=n==null?void 0:n.rpcUrls)==null?void 0:r.default)==null?void 0:s.http)!=null&&i[0]&&lb.setConnection(new L1(n.rpcUrls.default.http[0],this.connectionSettings))}listenProviderEvents(){}listenSolanaProviderEvents(e,n){if(Net.includes(e))return;const r=i=>{this.onAccountsChanged([i.toBase58()],e,!1)},s=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",s),n.on("accountsChanged",r),n.on("connect",r),this.providerHandlers[e]={provider:n,disconnect:s,accountsChanged:r,chainChanged:()=>{}})}async setUniversalProvider(e){this.universalProvider=e;const n=Me.CONNECTOR_ID.WALLET_CONNECT;Jg.listenWcProvider({universalProvider:e,namespace:Me.CHAIN.SOLANA,onConnect:s=>this.onConnect(s,n),onDisconnect:()=>this.onDisconnect(n),onAccountsChanged:s=>this.onAccountsChanged(s,n,!1)});const r=new rV({provider:e,chains:this.getCaipNetworks(),getActiveChain:()=>ce.getCaipNetworkByNamespace(this.namespace)});if(this.registerWalletStandard){const{SolanaWalletConnectStandardWallet:s}=await no(async()=>{const{SolanaWalletConnectStandardWallet:i}=await import("./wallet-standard-CUKp6EH2.js");return{SolanaWalletConnectStandardWallet:i}},[]);s.register(e)}return this.addConnector(r),Promise.resolve()}async connectWalletConnect(e){var i,o;const n=await super.connectWalletConnect(e),r=(o=(i=this.getCaipNetworks())==null?void 0:i.find(a=>a.id===e))==null?void 0:o.rpcUrls.default.http[0],s=new L1(r,this.connectionSettings);return lb.setConnection(s),n}async disconnect(e){if(e.id){const n=this.connectors.find(s=>s.id===e.id);if(!n)throw new Error("Provider not found");const r=this.connections.find(s=>Fc.isLowerCaseMatch(s.connectorId,e.id));return await n.provider.disconnect(),this.deleteConnection(n.id),this.connections.length===0?this.emit("disconnect"):this.emitFirstAvailableConnection(),{connections:r?[r]:[]}}return this.disconnectAll()}async syncConnection(e){return this.connect({...e,type:""})}async syncConnections({connectToFirstConnector:e,caipNetwork:n,getConnectorStorageInfo:r}){var s;await((s=this.connectionManager)==null?void 0:s.syncConnections({connectors:this.connectors,caipNetwork:n,caipNetworks:this.getCaipNetworks(),universalProvider:this.universalProvider,onConnection:this.addConnection.bind(this),onListenProvider:this.listenSolanaProviderEvents.bind(this),getConnectionStatusInfo:r})),e&&this.emitFirstAvailableConnection()}getWalletConnectProvider(e){return new rV({provider:e.provider,chains:e.caipNetworks,getActiveChain:()=>ce.getCaipNetworkByNamespace(this.namespace)})}async disconnectAll(){return{connections:await Promise.all(this.connections.map(async n=>{const r=this.connectors.find(s=>Fc.isLowerCaseMatch(s.id,n.connectorId));if(!r)throw new Error("Connector not found");return await this.disconnect({id:r.id}),n}))}}}const Hae={id:1992,name:"Sanko Testnet",network:"sanko",nativeCurrency:{decimals:18,name:"tDMT",symbol:"tDMT"},rpcUrls:{public:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]},default:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}},blockExplorers:{default:{name:"SankoScan",url:"https://sanko-scan.caldera.xyz"}}},Gae="7c65f27254d6ddd24cf7eedf2685c4fb",Tet={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},Ret=new xet,qae=new cYe({networks:[soe,roe,Hae],projectId:Gae,ssr:!1});YHe({adapters:[qae,Ret],networks:[soe,roe,Hae,A5,UHe,S5],projectId:Gae,metadata:Tet,features:{analytics:!1}});const uF=()=>{if(!uR)throw new Error("[FIREBASE] Database not initialized");return uR},Q0=t=>!t||t.length<10?t:`${t.slice(0,6)}...${t.slice(-4)}`,Mk=async(t,e)=>{try{if(!t)return console.error("[LEADERBOARD] No wallet address provided"),!1;if(t==="0x0000000000000000000000000000000000000000")return console.warn("[LEADERBOARD] Skipping leaderboard update for zero address"),!1;const n=new Date().toISOString(),r=uF(),s=Sc(r,`leaderboard/${t}`),i=await ny(s),o=i.exists()?i.val():null,a=e==="win"?3:e==="draw"?1:0,c={username:t,chain_type:"sanko",wins:((o==null?void 0:o.wins)||0)+(e==="win"?1:0),losses:((o==null?void 0:o.losses)||0)+(e==="loss"?1:0),draws:((o==null?void 0:o.draws)||0)+(e==="draw"?1:0),total_games:((o==null?void 0:o.total_games)||0)+1,points:((o==null?void 0:o.points)||0)+a,created_at:(o==null?void 0:o.created_at)||n,updated_at:n};return await v_(s,c),console.log("[LEADERBOARD] Successfully updated entry for:",Q0(t),"Result:",e),!0}catch(n){return console.error("[LEADERBOARD] Error updating leaderboard entry:",n),!1}},ket=async(t,e,n)=>{try{return!e||!n?(console.error("[LEADERBOARD] Missing player addresses"),!1):e==="0x0000000000000000000000000000000000000000"||n==="0x0000000000000000000000000000000000000000"?(console.warn("[LEADERBOARD] Skipping leaderboard update - one or both players have zero addresses:",{bluePlayer:e,redPlayer:n}),!1):(console.log("[LEADERBOARD] Updating both players scores:",{winner:t,bluePlayer:Q0(e),redPlayer:Q0(n)}),await Mk(e,t==="blue"?"win":t==="red"?"loss":"draw"),await Mk(n,t==="red"?"win":t==="blue"?"loss":"draw"),console.log("[LEADERBOARD] Successfully updated both players scores"),!0)}catch(r){return console.error("[LEADERBOARD] Error updating both players scores:",r),!1}},Vae=async(t=20)=>{try{const e=uF(),n=Sc(e,"leaderboard"),r=await ny(n);if(!r.exists())return[];const s=[];return r.forEach(i=>{const o=i.val();o&&s.push(o)}),s.sort((i,o)=>o.points!==i.points?o.points-i.points:o.wins!==i.wins?o.wins-i.wins:i.total_games-o.total_games),s.slice(0,t)}catch(e){return console.error("[LEADERBOARD] Error getting top entries:",e),[]}},Kae=async()=>{try{const t=uF(),e=Sc(t,"leaderboard/0x0000000000000000000000000000000000000000");return await PQ(e),console.log("[LEADERBOARD] Removed zero address entry from leaderboard"),!0}catch(t){return console.error("[LEADERBOARD] Error removing zero address entry:",t),!1}},ud=()=>{if(!uR)throw new Error("[FIREBASE] Database not initialized");return uR},Ti={async getGame(t){try{const e=ud(),n=Sc(e,`chess_games/${t}`),r=await ny(n);return r.exists()?r.val():null}catch(e){return console.error("[FIREBASE] Error getting game:",e),null}},async updateGame(t,e){if(!t)throw console.error("[FIREBASE] Tried to update game with undefined inviteCode!",e),new Error("inviteCode is required for updateGame");try{const n=ud(),r=Sc(n,`chess_games/${t}`);await v_(r,{...e,updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game updated successfully")}catch(n){console.error("[FIREBASE] Error updating game:",n)}},subscribeToGame(t,e){try{const n=ud(),r=Sc(n,`chess_games/${t}`);console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",t);const s=Oj(r,i=>{if(i.exists()){const o=i.val();console.log("[FIREBASE] Game update received:",o),e(o)}});return console.log("[FIREBASE] Firebase subscription setup complete for game:",t),s}catch(n){return console.error("[FIREBASE] Error subscribing to game:",n),()=>{}}},async createGame(t){const e=t.invite_code;if(!e)throw console.error("[FIREBASE] Tried to create game with undefined inviteCode!",t),new Error("inviteCode is required for createGame");try{const n=ud(),r=Sc(n,`chess_games/${e}`);console.log("[FIREBASE] Creating game with data:",t),await v_(r,{...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game created successfully:",e);const s=await ny(r);s.exists()?console.log("[FIREBASE] Game verification successful:",s.val()):console.error("[FIREBASE] Game creation verification failed - game not found after creation")}catch(n){throw console.error("[FIREBASE] Error creating game:",n),n}},async getActiveGames(){try{const t=ud(),e=Sc(t,"chess_games"),n=await ny(e);if(!n.exists())return[];const r=n.val();return Object.values(r).filter(s=>s.game_state==="waiting"||s.game_state==="active")}catch(t){return console.error("[FIREBASE] Error getting active games:",t),[]}},async getOpenGames(){try{const t=ud(),e=Sc(t,"chess_games"),n=await ny(e);if(!n.exists())return console.log("[FIREBASE] No games found in database"),[];const r=n.val();console.log("[FIREBASE] All games in database:",r);const s=Object.values(r).filter(i=>{const o=i.game_state==="waiting",a=i.is_public,c=!i.red_player||i.red_player==="0x0000000000000000000000000000000000000000";return console.log("[FIREBASE] Game filter check:",{inviteCode:i.invite_code,gameState:i.game_state,isPublic:i.is_public,redPlayer:i.red_player,isWaiting:o,noRedPlayer:c,passes:o&&a&&c}),o&&a&&c});return s.sort((i,o)=>new Date(o.created_at).getTime()-new Date(i.created_at).getTime()),console.log("[FIREBASE] Open games found:",s.length,s),s}catch(t){return console.error("[FIREBASE] Error getting open games:",t),[]}},async deleteGame(t){try{const e=ud(),n=Sc(e,`chess_games/${t}`);await PQ(n),console.log("[FIREBASE] Game deleted:",t)}catch(e){console.error("[FIREBASE] Error deleting game:",e)}},async updateLeaderboard(t){try{const e=ud(),n=Sc(e,`leaderboard/${t.username}`);await v_(n,{...t,updated_at:new Date().toISOString()})}catch(e){console.error("[FIREBASE] Error updating leaderboard:",e)}},async getLeaderboard(){try{const t=ud(),e=Sc(t,"leaderboard"),n=await ny(e);if(!n.exists())return[];const r=n.val();return Object.values(r).sort((s,i)=>i.points-s.points)}catch(t){return console.error("[FIREBASE] Error getting leaderboard:",t),[]}},subscribeToLeaderboard(t){try{const e=ud(),n=Sc(e,"leaderboard");return Oj(n,s=>{if(s.exists()){const i=s.val(),o=Object.values(i).sort((a,c)=>c.points-a.points);console.log("[FIREBASE] Leaderboard update received:",o),t(o)}})}catch(e){return console.error("[FIREBASE] Error subscribing to leaderboard:",e),()=>{}}}},Pet="6.15.0";function Oet(t,e,n){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=t,s}async function ea(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function Jt(t,e,n){for(let r in e){let s=e[r];const i=n?n[r]:null;i&&Oet(s,i,r),Object.defineProperty(t,r,{enumerable:!0,value:s,writable:!1})}}function Vb(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>Vb(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let s=0;s<t.length;s++)r+=n[t[s]>>4],r+=n[t[s]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return Vb(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${Vb(r,e)}: ${Vb(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function uo(t,e){return t&&t.code===e}function dF(t){return uo(t,"CALL_EXCEPTION")}function _s(t,e,n){let r=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${Vb(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+Vb(a))}}i.push(`code=${e}`),i.push(`version=${Pet}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return Jt(s,{code:e}),n&&Object.assign(s,n),s.shortMessage==null&&Jt(s,{shortMessage:r}),s}function ke(t,e,n,r){if(!t)throw _s(e,n,r)}function oe(t,e,n,r){ke(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function Yae(t,e,n){n==null&&(n=""),n&&(n=": "+n),ke(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),ke(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");t.push(e)}catch{}return t},[]);function sO(t,e,n){if(n==null&&(n=""),t!==e){let r=n,s="new";n&&(r+=".",s+=" "+n),ke(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function Qae(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(t.substring(s,s+2),16),s+=2;return r}oe(!1,"invalid BytesLike value",e||"value",t)}function Bn(t,e){return Qae(t,e,!1)}function ia(t,e){return Qae(t,e,!0)}function cs(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function hF(t){return cs(t,!0)||t instanceof Uint8Array}const pV="0123456789abcdef";function rt(t){const e=Bn(t);let n="0x";for(let r=0;r<e.length;r++){const s=e[r];n+=pV[(s&240)>>4]+pV[s&15]}return n}function Vs(t){return"0x"+t.map(e=>rt(e).substring(2)).join("")}function wv(t){return cs(t,!0)?(t.length-2)/2:Bn(t).length}function zs(t,e,n){const r=Bn(t);return n!=null&&n>r.length&&ke(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),rt(r.slice(e??0,n??r.length))}function Jae(t,e,n){const r=Bn(t);ke(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),n?s.set(r,e-r.length):s.set(r,0),rt(s)}function Bf(t,e){return Jae(t,e,!0)}function Det(t,e){return Jae(t,e,!1)}const iO=BigInt(0),Pu=BigInt(1),Kb=9007199254740991;function Met(t,e){const n=oO(t,"value"),r=BigInt(Ln(e,"width"));if(ke(n>>r===iO,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-Pu){const s=(Pu<<r)-Pu;return-((~n&s)+Pu)}return n}function Zae(t,e){let n=Ct(t,"value");const r=BigInt(Ln(e,"width")),s=Pu<<r-Pu;if(n<iO){n=-n,ke(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(Pu<<r)-Pu;return(~n&i)+Pu}else ke(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function l_(t,e){const n=oO(t,"value"),r=BigInt(Ln(e,"bits"));return n&(Pu<<r)-Pu}function Ct(t,e){switch(typeof t){case"bigint":return t;case"number":return oe(Number.isInteger(t),"underflow",e||"value",t),oe(t>=-Kb&&t<=Kb,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){oe(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}oe(!1,"invalid BigNumberish value",e||"value",t)}function oO(t,e){const n=Ct(t,e);return ke(n>=iO,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const gV="0123456789abcdef";function fF(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=gV[n>>4],e+=gV[n&15];return BigInt(e)}return Ct(t)}function Ln(t,e){switch(typeof t){case"bigint":return oe(t>=-Kb&&t<=Kb,"overflow",e||"value",t),Number(t);case"number":return oe(Number.isInteger(t),"underflow",e||"value",t),oe(t>=-Kb&&t<=Kb,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Ln(BigInt(t),e)}catch(n){oe(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}oe(!1,"invalid numeric value",e||"value",t)}function Bet(t){return Ln(fF(t))}function gm(t,e){let r=oO(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=Ln(e,"width");for(ke(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<s*2;)r="0"+r}return"0x"+r}function _i(t){const e=oO(t,"value");if(e===iO)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(n.substring(i,i+2),16)}return r}function xu(t){let e=rt(hF(t)?t:_i(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const mV="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const yV=BigInt(58);function Let(t){const e=Bn(t);let n=fF(e),r="";for(;n;)r=mV[Number(n%yV)]+r,n/=yV;for(let s=0;s<e.length&&!e[s];s++)r=mV[0]+r;return r}function Uet(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return Bn(e)}function $et(t){const e=Bn(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var Dv;class Xae{constructor(e,n,r){le(this,"filter");le(this,"emitter");ne(this,Dv);q(this,Dv,n),Jt(this,{emitter:e,filter:r})}async removeListener(){R(this,Dv)!=null&&await this.emitter.off(this.filter,R(this,Dv))}}Dv=new WeakMap;function Fet(t,e,n,r,s){oe(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function ece(t,e,n,r,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)i++;return i}return t==="OVERRUN"?n.length-e-1:0}function jet(t,e,n,r,s){return t==="OVERLONG"?(oe(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),ece(t,e,n))}const Wet=Object.freeze({error:Fet,ignore:ece,replace:jet});function zet(t,e){e==null&&(e=Wet.error);const n=Bn(t,"bytes"),r=[];let s=0;for(;s<n.length;){const i=n[s++];if(!(i>>7)){r.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,n,r):s+=e("BAD_PREFIX",s-1,n,r);continue}if(s-1+o>=n.length){s+=e("OVERRUN",s-1,n,r);continue}let c=i&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=n[s];if((u&192)!=128){s+=e("MISSING_CONTINUE",s,n,r),c=null;break}c=c<<6|u&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,n,r,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,n,r,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,n,r,c);continue}r.push(c)}}return r}function Ef(t,e){oe(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(s&63|128);else if((s&64512)==55296){r++;const i=t.charCodeAt(r);oe(r<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((s&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128)}return new Uint8Array(n)}function Het(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Bk(t,e){return Het(zet(t,e))}function tce(t){async function e(n,r){ke(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=n.url.split(":")[0].toLowerCase();ke(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),ke(s==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=_s("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{i=_s("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let l;try{l=await fetch(n.url,c)}catch(f){throw clearTimeout(a),i||f}clearTimeout(a);const u={};l.headers.forEach((f,p)=>{u[p.toLowerCase()]=f});const d=await l.arrayBuffer(),h=d==null?null:new Uint8Array(d);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:h}}return e}const Get=12,qet=250;let wV=tce();const Vet=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Ket=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let AM=!1;async function nce(t,e){try{const n=t.match(Vet);if(!n)throw new Error("invalid data");return new Zg(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?Uet(n[3]):Qet(n[3]))}catch{return new Zg(599,"BAD REQUEST (invalid data: URI)",{},null,new mm(t))}}function rce(t){async function e(n,r){try{const s=n.match(Ket);if(!s)throw new Error("invalid link");return new mm(`${t}${s[2]}`)}catch{return new Zg(599,"BAD REQUEST (invalid IPFS URI)",{},null,new mm(n))}}return e}const Ux={data:nce,ipfs:rce("https://gateway.ipfs.io/ipfs/")},sce=new WeakMap;var Fy,Jp;class Yet{constructor(e){ne(this,Fy);ne(this,Jp);q(this,Fy,[]),q(this,Jp,!1),sce.set(e,()=>{if(!R(this,Jp)){q(this,Jp,!0);for(const n of R(this,Fy))setTimeout(()=>{n()},0);q(this,Fy,[])}})}addListener(e){ke(!R(this,Jp),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),R(this,Fy).push(e)}get cancelled(){return R(this,Jp)}checkSignal(){ke(!this.cancelled,"cancelled","CANCELLED",{})}}Fy=new WeakMap,Jp=new WeakMap;function $x(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var Mv,Bv,bu,Hh,Lv,Uv,ki,Nc,Gh,jy,Wy,zy,Ed,vu,Zp,Hy,u_;const Kk=class Kk{constructor(e){ne(this,Hy);ne(this,Mv);ne(this,Bv);ne(this,bu);ne(this,Hh);ne(this,Lv);ne(this,Uv);ne(this,ki);ne(this,Nc);ne(this,Gh);ne(this,jy);ne(this,Wy);ne(this,zy);ne(this,Ed);ne(this,vu);ne(this,Zp);q(this,Uv,String(e)),q(this,Mv,!1),q(this,Bv,!0),q(this,bu,{}),q(this,Hh,""),q(this,Lv,3e5),q(this,vu,{slotInterval:qet,maxAttempts:Get}),q(this,Zp,null)}get url(){return R(this,Uv)}set url(e){q(this,Uv,String(e))}get body(){return R(this,ki)==null?null:new Uint8Array(R(this,ki))}set body(e){if(e==null)q(this,ki,void 0),q(this,Nc,void 0);else if(typeof e=="string")q(this,ki,Ef(e)),q(this,Nc,"text/plain");else if(e instanceof Uint8Array)q(this,ki,e),q(this,Nc,"application/octet-stream");else if(typeof e=="object")q(this,ki,Ef(JSON.stringify(e))),q(this,Nc,"application/json");else throw new Error("invalid body")}hasBody(){return R(this,ki)!=null}get method(){return R(this,Hh)?R(this,Hh):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),q(this,Hh,String(e).toUpperCase())}get headers(){const e=Object.assign({},R(this,bu));return R(this,Gh)&&(e.authorization=`Basic ${$et(Ef(R(this,Gh)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&R(this,Nc)&&(e["content-type"]=R(this,Nc)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){R(this,bu)[String(e).toLowerCase()]=String(n)}clearHeaders(){q(this,bu,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return R(this,Gh)||null}setCredentials(e,n){oe(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),q(this,Gh,`${e}:${n}`)}get allowGzip(){return R(this,Bv)}set allowGzip(e){q(this,Bv,!!e)}get allowInsecureAuthentication(){return!!R(this,Mv)}set allowInsecureAuthentication(e){q(this,Mv,!!e)}get timeout(){return R(this,Lv)}set timeout(e){oe(e>=0,"timeout must be non-zero","timeout",e),q(this,Lv,e)}get preflightFunc(){return R(this,jy)||null}set preflightFunc(e){q(this,jy,e)}get processFunc(){return R(this,Wy)||null}set processFunc(e){q(this,Wy,e)}get retryFunc(){return R(this,zy)||null}set retryFunc(e){q(this,zy,e)}get getUrlFunc(){return R(this,Zp)||wV}set getUrlFunc(e){q(this,Zp,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${R(this,ki)?rt(R(this,ki)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(R(this,vu).slotInterval=e.slotInterval),e.maxAttempts!=null&&(R(this,vu).maxAttempts=e.maxAttempts)}send(){return ke(R(this,Ed)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),q(this,Ed,new Yet(this)),Ie(this,Hy,u_).call(this,0,bV()+this.timeout,0,this,new Zg(0,"",{},null,this))}cancel(){ke(R(this,Ed)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=sce.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();ke(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new Kk(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,q(s,bu,Object.assign({},R(this,bu))),R(this,ki)&&q(s,ki,new Uint8Array(R(this,ki))),q(s,Nc,R(this,Nc)),s}clone(){const e=new Kk(this.url);return q(e,Hh,R(this,Hh)),R(this,ki)&&q(e,ki,R(this,ki)),q(e,Nc,R(this,Nc)),q(e,bu,Object.assign({},R(this,bu))),q(e,Gh,R(this,Gh)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),q(e,jy,R(this,jy)),q(e,Wy,R(this,Wy)),q(e,zy,R(this,zy)),q(e,vu,Object.assign({},R(this,vu))),q(e,Zp,R(this,Zp)),e}static lockConfig(){AM=!0}static getGateway(e){return Ux[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(AM)throw new Error("gateways locked");Ux[e]=n}static registerGetUrl(e){if(AM)throw new Error("gateways locked");wV=e}static createGetUrlFunc(e){return tce(e)}static createDataGateway(){return nce}static createIpfsGatewayFunc(e){return rce(e)}};Mv=new WeakMap,Bv=new WeakMap,bu=new WeakMap,Hh=new WeakMap,Lv=new WeakMap,Uv=new WeakMap,ki=new WeakMap,Nc=new WeakMap,Gh=new WeakMap,jy=new WeakMap,Wy=new WeakMap,zy=new WeakMap,Ed=new WeakMap,vu=new WeakMap,Zp=new WeakMap,Hy=new WeakSet,u_=async function(e,n,r,s,i){var u,d,h;if(e>=R(this,vu).maxAttempts)return i.makeServerError("exceeded maximum retry limit");ke(bV()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await Jet(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in Ux){const f=await Ux[a](o.url,$x(R(s,Ed)));if(f instanceof Zg){let p=f;if(this.processFunc){$x(R(s,Ed));try{p=await this.processFunc(o,p)}catch(g){(g.throttle==null||typeof g.stall!="number")&&p.makeServerError("error in post-processing function",g).assertOk()}}return p}o=f}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,$x(R(s,Ed)));let l=new Zg(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{const f=l.headers.location||"";return Ie(u=o.redirect(f),Hy,u_).call(u,e+1,n,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,e))){const f=l.headers["retry-after"];let p=R(this,vu).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof f=="string"&&f.match(/^[1-9][0-9]*$/)&&(p=parseInt(f)),Ie(d=o.clone(),Hy,u_).call(d,e+1,n,p,s,l)}if(this.processFunc){$x(R(s,Ed));try{l=await this.processFunc(o,l)}catch(f){(f.throttle==null||typeof f.stall!="number")&&l.makeServerError("error in post-processing function",f).assertOk();let p=R(this,vu).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return f.stall>=0&&(p=f.stall),Ie(h=o.clone(),Hy,u_).call(h,e+1,n,p,s,l)}}return l};let mm=Kk;var YS,QS,JS,xc,$v,Gy;const kF=class kF{constructor(e,n,r,s,i){ne(this,YS);ne(this,QS);ne(this,JS);ne(this,xc);ne(this,$v);ne(this,Gy);q(this,YS,e),q(this,QS,n),q(this,JS,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),q(this,xc,s==null?null:new Uint8Array(s)),q(this,$v,i||null),q(this,Gy,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${R(this,xc)?rt(R(this,xc)):"null"}>`}get statusCode(){return R(this,YS)}get statusMessage(){return R(this,QS)}get headers(){return Object.assign({},R(this,JS))}get body(){return R(this,xc)==null?null:new Uint8Array(R(this,xc))}get bodyText(){try{return R(this,xc)==null?"":Bk(R(this,xc))}catch{ke(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{ke(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new kF(599,r,this.headers,this.body,R(this,$v)||void 0);return q(s,Gy,{message:e,error:n}),s}throwThrottleError(e,n){n==null?n=-1:oe(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw Jt(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return R(this,xc)!=null}get request(){return R(this,$v)}ok(){return R(this,Gy).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=R(this,Gy);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{R(this,xc)&&(s=Bk(R(this,xc)))}catch{}ke(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};YS=new WeakMap,QS=new WeakMap,JS=new WeakMap,xc=new WeakMap,$v=new WeakMap,Gy=new WeakMap;let Zg=kF;function bV(){return new Date().getTime()}function Qet(t){return Ef(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function Jet(t){return new Promise(e=>setTimeout(e,t))}function Zet(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function vV(t,e,n){let r=0;for(let s=0;s<n;s++)r=r*256+t[e+s];return r}function EV(t,e,n,r){const s=[];for(;n<e+1+r;){const i=ice(t,n);s.push(i.result),n+=i.consumed,ke(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:s}}function ice(t,e){ke(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{ke(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const s=vV(t,e+1,r);return n(e+1+r+s),EV(t,e,e+1+r,r+s)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),EV(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const s=vV(t,e+1,r);n(e+1+r+s);const i=rt(t.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:i}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const s=rt(t.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:Zet(t[e])}}function fN(t){const e=Bn(t,"data"),n=ice(e,0);return oe(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function CV(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function oce(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(i){r=r.concat(oce(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=CV(r.length);return s.unshift(247+s.length),s.concat(r)}const e=Array.prototype.slice.call(Bn(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=CV(e.length);return n.unshift(183+n.length),n.concat(e)}const _V="0123456789abcdef";function ym(t){let e="0x";for(const n of oce(t))e+=_V[n>>4],e+=_V[n&15];return e}const ua=32,q5=new Uint8Array(ua),Xet=["then"],Fx={},ace=new WeakMap;function uy(t){return ace.get(t)}function AV(t,e){ace.set(t,e)}function j1(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function V5(t,e,n){return t.indexOf(null)>=0?e.map((r,s)=>r instanceof oC?V5(uy(r),r,n):r):t.reduce((r,s,i)=>{let o=e.getValue(s);return s in r||(n&&o instanceof oC&&(o=V5(uy(o),o,n)),r[s]=o),r},{})}var Fv;const Yb=class Yb extends Array{constructor(...n){const r=n[0];let s=n[1],i=(n[2]||[]).slice(),o=!0;r!==Fx&&(s=n,i=[],o=!1);super(s.length);ne(this,Fv);s.forEach((l,u)=>{this[u]=l});const a=i.reduce((l,u)=>(typeof u=="string"&&l.set(u,(l.get(u)||0)+1),l),new Map);if(AV(this,Object.freeze(s.map((l,u)=>{const d=i[u];return d!=null&&a.get(d)===1?d:null}))),q(this,Fv,[]),R(this,Fv)==null&&R(this,Fv),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(l,u,d)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const f=Ln(u,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const p=l[f];return p instanceof Error&&j1(`index ${f}`,p),p}if(Xet.indexOf(u)>=0)return Reflect.get(l,u,d);const h=l[u];if(h instanceof Function)return function(...f){return h.apply(this===d?l:this,f)};if(!(u in l))return l.getValue.apply(this===d?l:this,[u])}return Reflect.get(l,u,d)}});return AV(c,uy(this)),c}toArray(n){const r=[];return this.forEach((s,i)=>{s instanceof Error&&j1(`index ${i}`,s),n&&s instanceof Yb&&(s=s.toArray(n)),r.push(s)}),r}toObject(n){const r=uy(this);return r.reduce((s,i,o)=>(ke(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),V5(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=uy(this),i=[],o=[];for(let a=n;a<r;a++)i.push(this[a]),o.push(s[a]);return new Yb(Fx,i,o)}filter(n,r){const s=uy(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&j1(`index ${a}`,c),n.call(r,c,a,this)&&(i.push(c),o.push(s[a]))}return new Yb(Fx,i,o)}map(n,r){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&j1(`index ${i}`,o),s.push(n.call(r,o,i,this))}return s}getValue(n){const r=uy(this).indexOf(n);if(r===-1)return;const s=this[r];return s instanceof Error&&j1(`property ${JSON.stringify(n)}`,s.error),s}static fromItems(n,r){return new Yb(Fx,n,r)}};Fv=new WeakMap;let oC=Yb;function SV(t){let e=_i(t);return ke(e.length<=ua,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:ua,offset:e.length}),e.length!==ua&&(e=ia(Vs([q5.slice(e.length%ua),e]))),e}class Hf{constructor(e,n,r,s){le(this,"name");le(this,"type");le(this,"localName");le(this,"dynamic");Jt(this,{name:e,type:n,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){oe(!1,e,this.localName,n)}}var qh,qy,jv,UT;class K5{constructor(){ne(this,jv);ne(this,qh);ne(this,qy);q(this,qh,[]),q(this,qy,0)}get data(){return Vs(R(this,qh))}get length(){return R(this,qy)}appendWriter(e){return Ie(this,jv,UT).call(this,ia(e.data))}writeBytes(e){let n=ia(e);const r=n.length%ua;return r&&(n=ia(Vs([n,q5.slice(r)]))),Ie(this,jv,UT).call(this,n)}writeValue(e){return Ie(this,jv,UT).call(this,SV(e))}writeUpdatableValue(){const e=R(this,qh).length;return R(this,qh).push(q5),q(this,qy,R(this,qy)+ua),n=>{R(this,qh)[e]=SV(n)}}}qh=new WeakMap,qy=new WeakMap,jv=new WeakSet,UT=function(e){return R(this,qh).push(e),q(this,qy,R(this,qy)+e.length),e.length};var $a,Tc,Vy,Ky,Xp,tw,Q5,cce;const PF=class PF{constructor(e,n,r){ne(this,tw);le(this,"allowLoose");ne(this,$a);ne(this,Tc);ne(this,Vy);ne(this,Ky);ne(this,Xp);Jt(this,{allowLoose:!!n}),q(this,$a,ia(e)),q(this,Vy,0),q(this,Ky,null),q(this,Xp,r??1024),q(this,Tc,0)}get data(){return rt(R(this,$a))}get dataLength(){return R(this,$a).length}get consumed(){return R(this,Tc)}get bytes(){return new Uint8Array(R(this,$a))}subReader(e){const n=new PF(R(this,$a).slice(R(this,Tc)+e),this.allowLoose,R(this,Xp));return q(n,Ky,this),n}readBytes(e,n){let r=Ie(this,tw,cce).call(this,0,e,!!n);return Ie(this,tw,Q5).call(this,e),q(this,Tc,R(this,Tc)+r.length),r.slice(0,e)}readValue(){return fF(this.readBytes(ua))}readIndex(){return Bet(this.readBytes(ua))}};$a=new WeakMap,Tc=new WeakMap,Vy=new WeakMap,Ky=new WeakMap,Xp=new WeakMap,tw=new WeakSet,Q5=function(e){var n;if(R(this,Ky))return Ie(n=R(this,Ky),tw,Q5).call(n,e);q(this,Vy,R(this,Vy)+e),ke(R(this,Xp)<1||R(this,Vy)<=R(this,Xp)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${R(this,Xp)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:ia(R(this,$a)),offset:R(this,Tc),length:e,info:{bytesRead:R(this,Vy),dataLength:this.dataLength}})},cce=function(e,n,r){let s=Math.ceil(n/ua)*ua;return R(this,Tc)+s>R(this,$a).length&&(this.allowLoose&&r&&R(this,Tc)+n<=R(this,$a).length?s=n:ke(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:ia(R(this,$a)),length:R(this,$a).length,offset:R(this,Tc)+s})),R(this,$a).slice(R(this,Tc),R(this,Tc)+s)};let Y5=PF;function Lk(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function pF(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function ett(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Lk(t.outputLen),Lk(t.blockLen)}function aC(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function lce(t,e){pF(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const SM=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const uce=t=>t instanceof Uint8Array,ttt=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),IM=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),dd=(t,e)=>t<<32-e|t>>>e,ntt=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!ntt)throw new Error("Non little-endian hardware is not supported");function rtt(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function aO(t){if(typeof t=="string"&&(t=rtt(t)),!uce(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function stt(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!uce(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class gF{clone(){return this._cloneInto()}}function mF(t){const e=r=>t().update(aO(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function itt(t=32){if(SM&&typeof SM.getRandomValues=="function")return SM.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class dce extends gF{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,ett(e);const r=aO(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return aC(this),this.iHash.update(e),this}digestInto(e){aC(this),pF(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const hce=(t,e,n)=>new dce(t,e).update(n).digest();hce.create=(t,e)=>new dce(t,e);function ott(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}class fce extends gF{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=IM(this.buffer)}update(e){aC(this);const{view:n,buffer:r,blockLen:s}=this;e=aO(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=IM(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){aC(this),lce(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;ott(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=IM(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const att=(t,e,n)=>t&e^~t&n,ctt=(t,e,n)=>t&e^t&n^e&n,ltt=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),bp=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),vp=new Uint32Array(64);class utt extends fce{constructor(){super(64,32,8,!1),this.A=bp[0]|0,this.B=bp[1]|0,this.C=bp[2]|0,this.D=bp[3]|0,this.E=bp[4]|0,this.F=bp[5]|0,this.G=bp[6]|0,this.H=bp[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)vp[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=vp[d-15],f=vp[d-2],p=dd(h,7)^dd(h,18)^h>>>3,g=dd(f,17)^dd(f,19)^f>>>10;vp[d]=g+vp[d-7]+p+vp[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=dd(a,6)^dd(a,11)^dd(a,25),f=u+h+att(a,c,l)+ltt[d]+vp[d]|0,g=(dd(r,2)^dd(r,13)^dd(r,22))+ctt(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){vp.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const pce=mF(()=>new utt),jx=BigInt(2**32-1),J5=BigInt(32);function gce(t,e=!1){return e?{h:Number(t&jx),l:Number(t>>J5&jx)}:{h:Number(t>>J5&jx)|0,l:Number(t&jx)|0}}function mce(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=gce(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const dtt=(t,e)=>BigInt(t>>>0)<<J5|BigInt(e>>>0),htt=(t,e,n)=>t>>>n,ftt=(t,e,n)=>t<<32-n|e>>>n,ptt=(t,e,n)=>t>>>n|e<<32-n,gtt=(t,e,n)=>t<<32-n|e>>>n,mtt=(t,e,n)=>t<<64-n|e>>>n-32,ytt=(t,e,n)=>t>>>n-32|e<<64-n,wtt=(t,e)=>e,btt=(t,e)=>t,yce=(t,e,n)=>t<<n|e>>>32-n,wce=(t,e,n)=>e<<n|t>>>32-n,bce=(t,e,n)=>e<<n-32|t>>>64-n,vce=(t,e,n)=>t<<n-32|e>>>64-n;function vtt(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const Ett=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Ctt=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,_tt=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Att=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,Stt=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),Itt=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,xn={fromBig:gce,split:mce,toBig:dtt,shrSH:htt,shrSL:ftt,rotrSH:ptt,rotrSL:gtt,rotrBH:mtt,rotrBL:ytt,rotr32H:wtt,rotr32L:btt,rotlSH:yce,rotlSL:wce,rotlBH:bce,rotlBL:vce,add:vtt,add3L:Ett,add3H:Ctt,add4L:_tt,add4H:Att,add5H:Itt,add5L:Stt},[Ntt,xtt]=xn.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ep=new Uint32Array(80),Cp=new Uint32Array(80);class Ttt extends fce{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:m}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,m]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=m|0}process(e,n){for(let C=0;C<16;C++,n+=4)Ep[C]=e.getUint32(n),Cp[C]=e.getUint32(n+=4);for(let C=16;C<80;C++){const N=Ep[C-15]|0,I=Cp[C-15]|0,k=xn.rotrSH(N,I,1)^xn.rotrSH(N,I,8)^xn.shrSH(N,I,7),P=xn.rotrSL(N,I,1)^xn.rotrSL(N,I,8)^xn.shrSL(N,I,7),U=Ep[C-2]|0,M=Cp[C-2]|0,W=xn.rotrSH(U,M,19)^xn.rotrBH(U,M,61)^xn.shrSH(U,M,6),j=xn.rotrSL(U,M,19)^xn.rotrBL(U,M,61)^xn.shrSL(U,M,6),K=xn.add4L(P,j,Cp[C-7],Cp[C-16]),$=xn.add4H(K,k,W,Ep[C-7],Ep[C-16]);Ep[C]=$|0,Cp[C]=K|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:m,Hh:y,Hl:w}=this;for(let C=0;C<80;C++){const N=xn.rotrSH(d,h,14)^xn.rotrSH(d,h,18)^xn.rotrBH(d,h,41),I=xn.rotrSL(d,h,14)^xn.rotrSL(d,h,18)^xn.rotrBL(d,h,41),k=d&f^~d&g,P=h&p^~h&m,U=xn.add5L(w,I,P,xtt[C],Cp[C]),M=xn.add5H(U,y,N,k,Ntt[C],Ep[C]),W=U|0,j=xn.rotrSH(r,s,28)^xn.rotrBH(r,s,34)^xn.rotrBH(r,s,39),K=xn.rotrSL(r,s,28)^xn.rotrBL(r,s,34)^xn.rotrBL(r,s,39),$=r&i^r&a^i&a,v=s&o^s&c^o&c;y=g|0,w=m|0,g=f|0,m=p|0,f=d|0,p=h|0,{h:d,l:h}=xn.add(l|0,u|0,M|0,W|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const E=xn.add3L(W,K,v);r=xn.add3H(E,M,j,$),s=E|0}({h:r,l:s}=xn.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=xn.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=xn.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=xn.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=xn.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=xn.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:m}=xn.add(this.Gh|0,this.Gl|0,g|0,m|0),{h:y,l:w}=xn.add(this.Hh|0,this.Hl|0,y|0,w|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,m,y,w)}roundClean(){Ep.fill(0),Cp.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Rtt=mF(()=>new Ttt);function ktt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const IV=ktt();IV.crypto||IV.msCrypto;function Ptt(t){switch(t){case"sha256":return pce.create();case"sha512":return Rtt.create()}oe(!1,"invalid hashing algorithm name","algorithm",t)}const[Ece,Cce,_ce]=[[],[],[]],Ott=BigInt(0),W1=BigInt(1),Dtt=BigInt(2),Mtt=BigInt(7),Btt=BigInt(256),Ltt=BigInt(113);for(let t=0,e=W1,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Ece.push(2*(5*r+n)),Cce.push((t+1)*(t+2)/2%64);let s=Ott;for(let i=0;i<7;i++)e=(e<<W1^(e>>Mtt)*Ltt)%Btt,e&Dtt&&(s^=W1<<(W1<<BigInt(i))-W1);_ce.push(s)}const[Utt,$tt]=mce(_ce,!0),NV=(t,e,n)=>n>32?bce(t,e,n):yce(t,e,n),xV=(t,e,n)=>n>32?vce(t,e,n):wce(t,e,n);function Ftt(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=NV(l,u,1)^n[a],h=xV(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Cce[o],c=NV(s,i,a),l=xV(s,i,a),u=Ece[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Utt[r],t[1]^=$tt[r]}n.fill(0)}class yF extends gF{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Lk(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=ttt(this.state)}keccak(){Ftt(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){aC(this);const{blockLen:n,state:r}=this;e=aO(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){aC(this,!1),pF(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Lk(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(lce(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new yF(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const jtt=(t,e,n)=>mF(()=>new yF(e,t,n)),Wtt=jtt(1,136,256/8);let Ace=!1;const Sce=function(t){return Wtt(t)};let Ice=Sce;function ui(t){const e=Bn(t,"data");return rt(Ice(e))}ui._=Sce;ui.lock=function(){Ace=!0};ui.register=function(t){if(Ace)throw new TypeError("keccak256 is locked");Ice=t};Object.freeze(ui);const Nce=function(t){return Ptt("sha256").update(t).digest()};let xce=Nce,Tce=!1;function YC(t){const e=Bn(t,"data");return rt(xce(e))}YC._=Nce;YC.lock=function(){Tce=!0};YC.register=function(t){if(Tce)throw new Error("sha256 is locked");xce=t};Object.freeze(YC);Object.freeze(YC);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Rce=BigInt(0),cO=BigInt(1),ztt=BigInt(2),lO=t=>t instanceof Uint8Array,Htt=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function cC(t){if(!lO(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=Htt[t[n]];return e}function kce(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function wF(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function lC(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const s=r*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function w0(t){return wF(cC(t))}function bF(t){if(!lO(t))throw new Error("Uint8Array expected");return wF(cC(Uint8Array.from(t).reverse()))}function uC(t,e){return lC(t.toString(16).padStart(e*2,"0"))}function vF(t,e){return uC(t,e).reverse()}function Gtt(t){return lC(kce(t))}function mu(t,e,n){let r;if(typeof e=="string")try{r=lC(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(lO(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function DS(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!lO(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function qtt(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Vtt(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Ktt(t){let e;for(e=0;t>Rce;t>>=cO,e+=1);return e}function Ytt(t,e){return t>>BigInt(e)&cO}const Qtt=(t,e,n)=>t|(n?cO:Rce)<<BigInt(e),EF=t=>(ztt<<BigInt(t-1))-cO,NM=t=>new Uint8Array(t),TV=t=>Uint8Array.from(t);function Pce(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=NM(t),s=NM(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=NM())=>{s=a(TV([0]),d),r=a(),d.length!==0&&(s=a(TV([1]),d),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return DS(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const Jtt={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function pN(t,e,n={}){const r=(s,i,o)=>{const a=Jtt[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const Ztt=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Ytt,bitLen:Ktt,bitMask:EF,bitSet:Qtt,bytesToHex:cC,bytesToNumberBE:w0,bytesToNumberLE:bF,concatBytes:DS,createHmacDrbg:Pce,ensureBytes:mu,equalBytes:qtt,hexToBytes:lC,hexToNumber:wF,numberToBytesBE:uC,numberToBytesLE:vF,numberToHexUnpadded:kce,numberToVarBytesBE:Gtt,utf8ToBytes:Vtt,validateObject:pN},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zi=BigInt(0),si=BigInt(1),dy=BigInt(2),Xtt=BigInt(3),Z5=BigInt(4),RV=BigInt(5),kV=BigInt(8);BigInt(9);BigInt(16);function Ga(t,e){const n=t%e;return n>=zi?n:e+n}function ent(t,e,n){if(n<=zi||e<zi)throw new Error("Expected power/modulo > 0");if(n===si)return zi;let r=si;for(;e>zi;)e&si&&(r=r*t%n),t=t*t%n,e>>=si;return r}function hl(t,e,n){let r=t;for(;e-- >zi;)r*=r,r%=n;return r}function X5(t,e){if(t===zi||e<=zi)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Ga(t,e),r=e,s=zi,i=si;for(;n!==zi;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==si)throw new Error("invert: does not exist");return Ga(s,e)}function tnt(t){const e=(t-si)/dy;let n,r,s;for(n=t-si,r=0;n%dy===zi;n/=dy,r++);for(s=dy;s<t&&ent(s,e,t)!==t-si;s++);if(r===1){const o=(t+si)/Z5;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(n+si)/dy;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,s),n),d=a.pow(c,i),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(h);f<l&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const p=a.pow(u,si<<BigInt(l-f-1));u=a.sqr(p),d=a.mul(d,p),h=a.mul(h,u),l=f}return d}}function nnt(t){if(t%Z5===Xtt){const e=(t+si)/Z5;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%kV===RV){const e=(t-RV)/kV;return function(r,s){const i=r.mul(s,dy),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,dy),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return tnt(t)}const rnt=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function snt(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=rnt.reduce((r,s)=>(r[s]="function",r),e);return pN(t,n)}function int(t,e,n){if(n<zi)throw new Error("Expected power > 0");if(n===zi)return t.ONE;if(n===si)return e;let r=t.ONE,s=e;for(;n>zi;)n&si&&(r=t.mul(r,s)),s=t.sqr(s),n>>=si;return r}function ont(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function Oce(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function ant(t,e,n=!1,r={}){if(t<=zi)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=Oce(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=nnt(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:EF(s),ZERO:zi,ONE:si,create:c=>Ga(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return zi<=c&&c<t},is0:c=>c===zi,isOdd:c=>(c&si)===si,neg:c=>Ga(-c,t),eql:(c,l)=>c===l,sqr:c=>Ga(c*c,t),add:(c,l)=>Ga(c+l,t),sub:(c,l)=>Ga(c-l,t),mul:(c,l)=>Ga(c*l,t),pow:(c,l)=>int(a,c,l),div:(c,l)=>Ga(c*X5(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>X5(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>ont(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?vF(c,i):uC(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?bF(c):w0(c)}});return Object.freeze(a)}function Dce(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Mce(t){const e=Dce(t);return e+Math.ceil(e/2)}function cnt(t,e,n=!1){const r=t.length,s=Dce(e),i=Mce(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=n?w0(t):bF(t),a=Ga(o,e-si)+si;return n?vF(a,s):uC(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const lnt=BigInt(0),xM=BigInt(1);function unt(t,e){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>lnt;)i&xM&&(o=o.add(a)),a=a.double(),i>>=xM;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),c=[];let l=s,u=l;for(let d=0;d<o;d++){u=l,c.push(u);for(let h=1;h<a;h++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=r(s);let l=t.ZERO,u=t.BASE;const d=BigInt(2**s-1),h=2**s,f=BigInt(s);for(let p=0;p<a;p++){const g=p*c;let m=Number(o&d);o>>=f,m>c&&(m-=h,o+=xM);const y=g,w=g+Math.abs(m)-1,C=p%2!==0,N=m<0;m===0?u=u.add(n(C,i[y])):l=l.add(n(N,i[w]))}return{p:l,f:u}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function Bce(t){return snt(t.Fp),pN(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Oce(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function dnt(t){const e=Bce(t);pN(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:hnt,hexToBytes:fnt}=Ztt,xy={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=xy;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:hnt(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=xy,n=typeof t=="string"?fnt(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=xy._parseInt(n.subarray(2)),{d:o,l:a}=xy._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,o=s.length/2,a=n(i),c=n(o);return`30${n(o+i+4)}02${c}${s}02${a}${r}`}},of=BigInt(0),Nl=BigInt(1);BigInt(2);const PV=BigInt(3);BigInt(4);function pnt(t){const e=dnt(t),{Fp:n}=e,r=e.toBytes||((p,g,m)=>{const y=g.toAffine();return DS(Uint8Array.from([4]),n.toBytes(y.x),n.toBytes(y.y))}),s=e.fromBytes||(p=>{const g=p.subarray(1),m=n.fromBytes(g.subarray(0,n.BYTES)),y=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:m,y}});function i(p){const{a:g,b:m}=e,y=n.sqr(p),w=n.mul(y,p);return n.add(n.add(w,n.mul(p,g)),m)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&of<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:m,wrapPrivateKey:y,n:w}=e;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=cC(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(m*2,"0")}let C;try{C=typeof p=="bigint"?p:w0(mu("private key",p,m))}catch{throw new Error(`private key must be ${m} bytes, hex or bigint, not ${typeof p}`)}return y&&(C=Ga(C,w)),a(C),C}const l=new Map;function u(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(g,m,y){if(this.px=g,this.py=m,this.pz=y,g==null||!n.isValid(g))throw new Error("x required");if(m==null||!n.isValid(m))throw new Error("y required");if(y==null||!n.isValid(y))throw new Error("z required")}static fromAffine(g){const{x:m,y}=g||{};if(!g||!n.isValid(m)||!n.isValid(y))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const w=C=>n.eql(C,n.ZERO);return w(m)&&w(y)?d.ZERO:new d(m,y,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const m=n.invertBatch(g.map(y=>y.pz));return g.map((y,w)=>y.toAffine(m[w])).map(d.fromAffine)}static fromHex(g){const m=d.fromAffine(s(mu("pointHex",g)));return m.assertValidity(),m}static fromPrivateKey(g){return d.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y:m}=this.toAffine();if(!n.isValid(g)||!n.isValid(m))throw new Error("bad point: x or y not FE");const y=n.sqr(m),w=i(g);if(!n.eql(y,w))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:m,py:y,pz:w}=this,{px:C,py:N,pz:I}=g,k=n.eql(n.mul(m,I),n.mul(C,w)),P=n.eql(n.mul(y,I),n.mul(N,w));return k&&P}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:m}=e,y=n.mul(m,PV),{px:w,py:C,pz:N}=this;let I=n.ZERO,k=n.ZERO,P=n.ZERO,U=n.mul(w,w),M=n.mul(C,C),W=n.mul(N,N),j=n.mul(w,C);return j=n.add(j,j),P=n.mul(w,N),P=n.add(P,P),I=n.mul(g,P),k=n.mul(y,W),k=n.add(I,k),I=n.sub(M,k),k=n.add(M,k),k=n.mul(I,k),I=n.mul(j,I),P=n.mul(y,P),W=n.mul(g,W),j=n.sub(U,W),j=n.mul(g,j),j=n.add(j,P),P=n.add(U,U),U=n.add(P,U),U=n.add(U,W),U=n.mul(U,j),k=n.add(k,U),W=n.mul(C,N),W=n.add(W,W),U=n.mul(W,j),I=n.sub(I,U),P=n.mul(W,M),P=n.add(P,P),P=n.add(P,P),new d(I,k,P)}add(g){u(g);const{px:m,py:y,pz:w}=this,{px:C,py:N,pz:I}=g;let k=n.ZERO,P=n.ZERO,U=n.ZERO;const M=e.a,W=n.mul(e.b,PV);let j=n.mul(m,C),K=n.mul(y,N),$=n.mul(w,I),v=n.add(m,y),E=n.add(C,N);v=n.mul(v,E),E=n.add(j,K),v=n.sub(v,E),E=n.add(m,w);let _=n.add(C,I);return E=n.mul(E,_),_=n.add(j,$),E=n.sub(E,_),_=n.add(y,w),k=n.add(N,I),_=n.mul(_,k),k=n.add(K,$),_=n.sub(_,k),U=n.mul(M,E),k=n.mul(W,$),U=n.add(k,U),k=n.sub(K,U),U=n.add(K,U),P=n.mul(k,U),K=n.add(j,j),K=n.add(K,j),$=n.mul(M,$),E=n.mul(W,E),K=n.add(K,$),$=n.sub(j,$),$=n.mul(M,$),E=n.add(E,$),j=n.mul(K,E),P=n.add(P,j),j=n.mul(_,E),k=n.mul(v,k),k=n.sub(k,j),j=n.mul(v,K),U=n.mul(_,U),U=n.add(U,j),new d(k,P,U)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return f.wNAFCached(this,l,g,m=>{const y=n.invertBatch(m.map(w=>w.pz));return m.map((w,C)=>w.toAffine(y[C])).map(d.fromAffine)})}multiplyUnsafe(g){const m=d.ZERO;if(g===of)return m;if(a(g),g===Nl)return this;const{endo:y}=e;if(!y)return f.unsafeLadder(this,g);let{k1neg:w,k1:C,k2neg:N,k2:I}=y.splitScalar(g),k=m,P=m,U=this;for(;C>of||I>of;)C&Nl&&(k=k.add(U)),I&Nl&&(P=P.add(U)),U=U.double(),C>>=Nl,I>>=Nl;return w&&(k=k.negate()),N&&(P=P.negate()),P=new d(n.mul(P.px,y.beta),P.py,P.pz),k.add(P)}multiply(g){a(g);let m=g,y,w;const{endo:C}=e;if(C){const{k1neg:N,k1:I,k2neg:k,k2:P}=C.splitScalar(m);let{p:U,f:M}=this.wNAF(I),{p:W,f:j}=this.wNAF(P);U=f.constTimeNegate(N,U),W=f.constTimeNegate(k,W),W=new d(n.mul(W.px,C.beta),W.py,W.pz),y=U.add(W),w=M.add(j)}else{const{p:N,f:I}=this.wNAF(m);y=N,w=I}return d.normalizeZ([y,w])[0]}multiplyAndAddUnsafe(g,m,y){const w=d.BASE,C=(I,k)=>k===of||k===Nl||!I.equals(w)?I.multiplyUnsafe(k):I.multiply(k),N=C(this,m).add(C(g,y));return N.is0()?void 0:N}toAffine(g){const{px:m,py:y,pz:w}=this,C=this.is0();g==null&&(g=C?n.ONE:n.inv(w));const N=n.mul(m,g),I=n.mul(y,g),k=n.mul(w,g);if(C)return{x:n.ZERO,y:n.ZERO};if(!n.eql(k,n.ONE))throw new Error("invZ was invalid");return{x:N,y:I}}isTorsionFree(){const{h:g,isTorsionFree:m}=e;if(g===Nl)return!0;if(m)return m(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:m}=e;return g===Nl?this:m?m(d,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(d,this,g)}toHex(g=!0){return cC(this.toRawBytes(g))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=unt(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function gnt(t){const e=Bce(t);return pN(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function mnt(t){const e=gnt(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(E){return of<E&&E<n.ORDER}function a(E){return Ga(E,r)}function c(E){return X5(E,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=pnt({...e,toBytes(E,_,O){const x=_.toAffine(),B=n.toBytes(x.x),F=DS;return O?F(Uint8Array.from([_.hasEvenY()?2:3]),B):F(Uint8Array.from([4]),B,n.toBytes(x.y))},fromBytes(E){const _=E.length,O=E[0],x=E.subarray(1);if(_===s&&(O===2||O===3)){const B=w0(x);if(!o(B))throw new Error("Point is not on curve");const F=d(B);let L=n.sqrt(F);const A=(L&Nl)===Nl;return(O&1)===1!==A&&(L=n.neg(L)),{x:B,y:L}}else if(_===i&&O===4){const B=n.fromBytes(x.subarray(0,n.BYTES)),F=n.fromBytes(x.subarray(n.BYTES,2*n.BYTES));return{x:B,y:F}}else throw new Error(`Point of length ${_} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=E=>cC(uC(E,e.nByteLength));function p(E){const _=r>>Nl;return E>_}function g(E){return p(E)?a(-E):E}const m=(E,_,O)=>w0(E.slice(_,O));class y{constructor(_,O,x){this.r=_,this.s=O,this.recovery=x,this.assertValidity()}static fromCompact(_){const O=e.nByteLength;return _=mu("compactSignature",_,O*2),new y(m(_,0,O),m(_,O,2*O))}static fromDER(_){const{r:O,s:x}=xy.toSig(mu("DER",_));return new y(O,x)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(_){return new y(this.r,this.s,_)}recoverPublicKey(_){const{r:O,s:x,recovery:B}=this,F=P(mu("msgHash",_));if(B==null||![0,1,2,3].includes(B))throw new Error("recovery id invalid");const L=B===2||B===3?O+e.n:O;if(L>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const A=B&1?"03":"02",H=l.fromHex(A+f(L)),re=c(L),se=a(-F*re),ge=a(x*re),ae=l.BASE.multiplyAndAddUnsafe(H,se,ge);if(!ae)throw new Error("point at infinify");return ae.assertValidity(),ae}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return lC(this.toDERHex())}toDERHex(){return xy.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return lC(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const w={isValidPrivateKey(E){try{return u(E),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const E=Mce(e.n);return cnt(e.randomBytes(E),e.n)},precompute(E=8,_=l.BASE){return _._setWindowSize(E),_.multiply(BigInt(3)),_}};function C(E,_=!0){return l.fromPrivateKey(E).toRawBytes(_)}function N(E){const _=E instanceof Uint8Array,O=typeof E=="string",x=(_||O)&&E.length;return _?x===s||x===i:O?x===2*s||x===2*i:E instanceof l}function I(E,_,O=!0){if(N(E))throw new Error("first arg must be private key");if(!N(_))throw new Error("second arg must be public key");return l.fromHex(_).multiply(u(E)).toRawBytes(O)}const k=e.bits2int||function(E){const _=w0(E),O=E.length*8-e.nBitLength;return O>0?_>>BigInt(O):_},P=e.bits2int_modN||function(E){return a(k(E))},U=EF(e.nBitLength);function M(E){if(typeof E!="bigint")throw new Error("bigint expected");if(!(of<=E&&E<U))throw new Error(`bigint expected < 2^${e.nBitLength}`);return uC(E,e.nByteLength)}function W(E,_,O=j){if(["recovered","canonical"].some(ye=>ye in O))throw new Error("sign() legacy options not supported");const{hash:x,randomBytes:B}=e;let{lowS:F,prehash:L,extraEntropy:A}=O;F==null&&(F=!0),E=mu("msgHash",E),L&&(E=mu("prehashed msgHash",x(E)));const H=P(E),re=u(_),se=[M(re),M(H)];if(A!=null){const ye=A===!0?B(n.BYTES):A;se.push(mu("extraEntropy",ye))}const ge=DS(...se),ae=H;function fe(ye){const ve=k(ye);if(!h(ve))return;const _e=c(ve),Se=l.BASE.multiply(ve).toAffine(),Re=a(Se.x);if(Re===of)return;const xe=a(_e*a(ae+Re*re));if(xe===of)return;let Fe=(Se.x===Re?0:2)|Number(Se.y&Nl),Ut=xe;return F&&p(xe)&&(Ut=g(xe),Fe^=1),new y(Re,Ut,Fe)}return{seed:ge,k2sig:fe}}const j={lowS:e.lowS,prehash:!1},K={lowS:e.lowS,prehash:!1};function $(E,_,O=j){const{seed:x,k2sig:B}=W(E,_,O),F=e;return Pce(F.hash.outputLen,F.nByteLength,F.hmac)(x,B)}l.BASE._setWindowSize(8);function v(E,_,O,x=K){var Se;const B=E;if(_=mu("msgHash",_),O=mu("publicKey",O),"strict"in x)throw new Error("options.strict was renamed to lowS");const{lowS:F,prehash:L}=x;let A,H;try{if(typeof B=="string"||B instanceof Uint8Array)try{A=y.fromDER(B)}catch(Re){if(!(Re instanceof xy.Err))throw Re;A=y.fromCompact(B)}else if(typeof B=="object"&&typeof B.r=="bigint"&&typeof B.s=="bigint"){const{r:Re,s:xe}=B;A=new y(Re,xe)}else throw new Error("PARSE");H=l.fromHex(O)}catch(Re){if(Re.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(F&&A.hasHighS())return!1;L&&(_=e.hash(_));const{r:re,s:se}=A,ge=P(_),ae=c(se),fe=a(ge*ae),ye=a(re*ae),ve=(Se=l.BASE.multiplyAndAddUnsafe(H,fe,ye))==null?void 0:Se.toAffine();return ve?a(ve.x)===re:!1}return{CURVE:e,getPublicKey:C,getSharedSecret:I,sign:$,verify:v,ProjectivePoint:l,Signature:y,utils:w}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ynt(t){return{hash:t,hmac:(e,...n)=>hce(t,e,stt(...n)),randomBytes:itt}}function wnt(t,e){const n=r=>mnt({...t,...ynt(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Lce=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),OV=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),bnt=BigInt(1),e6=BigInt(2),DV=(t,e)=>(t+e/e6)/e;function vnt(t){const e=Lce,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=hl(u,n,e)*u%e,h=hl(d,n,e)*u%e,f=hl(h,e6,e)*l%e,p=hl(f,s,e)*f%e,g=hl(p,i,e)*p%e,m=hl(g,a,e)*g%e,y=hl(m,c,e)*m%e,w=hl(y,a,e)*g%e,C=hl(w,n,e)*u%e,N=hl(C,o,e)*p%e,I=hl(N,r,e)*l%e,k=hl(I,e6,e);if(!t6.eql(t6.sqr(k),t))throw new Error("Cannot find square root");return k}const t6=ant(Lce,void 0,void 0,{sqrt:vnt}),Ip=wnt({a:BigInt(0),b:BigInt(7),Fp:t6,n:OV,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=OV,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-bnt*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=DV(i*t,e),c=DV(-r*t,e);let l=Ga(t-a*n-c*s,e),u=Ga(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},pce);BigInt(0);Ip.ProjectivePoint;const MS="0x0000000000000000000000000000000000000000",MV="0x0000000000000000000000000000000000000000000000000000000000000000",BV=BigInt(0),LV=BigInt(1),UV=BigInt(2),$V=BigInt(27),FV=BigInt(28),Wx=BigInt(35),fb={};function jV(t){return Bf(_i(t),32)}var Wv,Cd,zv,Yy;const fu=class fu{constructor(e,n,r,s){ne(this,Wv);ne(this,Cd);ne(this,zv);ne(this,Yy);sO(e,fb,"Signature"),q(this,Wv,n),q(this,Cd,r),q(this,zv,s),q(this,Yy,null)}get r(){return R(this,Wv)}set r(e){oe(wv(e)===32,"invalid r","value",e),q(this,Wv,rt(e))}get s(){return oe(parseInt(R(this,Cd).substring(0,3))<8,"non-canonical s; use ._s","s",R(this,Cd)),R(this,Cd)}set s(e){oe(wv(e)===32,"invalid s","value",e),q(this,Cd,rt(e))}get _s(){return R(this,Cd)}isValid(){return parseInt(R(this,Cd).substring(0,3))<8}get v(){return R(this,zv)}set v(e){const n=Ln(e,"value");oe(n===27||n===28,"invalid v","v",e),q(this,zv,n)}get networkV(){return R(this,Yy)}get legacyChainId(){const e=this.networkV;return e==null?null:fu.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Bn(this.s);return this.yParity&&(e[0]|=128),rt(e)}get compactSerialized(){return Vs([this.r,this.yParityAndS])}get serialized(){return Vs([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new fu(fb,this.r,this._s,this.v);return this.networkV&&q(e,Yy,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const n=Ct(e,"v");return n==$V||n==FV?BV:(oe(n>=Wx,"invalid EIP-155 v","v",e),(n-Wx)/UV)}static getChainIdV(e,n){return Ct(e)*UV+BigInt(35+n-27)}static getNormalizedV(e){const n=Ct(e);return n===BV||n===$V?27:n===LV||n===FV?28:(oe(n>=Wx,"invalid v","v",e),n&LV?27:28)}static from(e){function n(l,u){oe(l,u,"signature",e)}if(e==null)return new fu(fb,MV,MV,27);if(typeof e=="string"){const l=Bn(e,"signature");if(l.length===64){const u=rt(l.slice(0,32)),d=l.slice(32,64),h=d[0]&128?28:27;return d[0]&=127,new fu(fb,u,rt(d),h)}if(l.length===65){const u=rt(l.slice(0,32)),d=rt(l.slice(32,64)),h=fu.getNormalizedV(l[64]);return new fu(fb,u,d,h)}n(!1,"invalid raw signature length")}if(e instanceof fu)return e.clone();const r=e.r;n(r!=null,"missing r");const s=jV(r),i=function(l,u){if(l!=null)return jV(l);if(u!=null){n(cs(u,32),"invalid yParityAndS");const d=Bn(u);return d[0]&=127,rt(d)}n(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(l,u,d){if(l!=null){const h=Ct(l);return{networkV:h>=Wx?h:void 0,v:fu.getNormalizedV(h)}}if(u!=null)return n(cs(u,32),"invalid yParityAndS"),{v:Bn(u)[0]&128?28:27};if(d!=null){switch(Ln(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new fu(fb,s,i,a);return o&&q(c,Yy,o),n(e.yParity==null||Ln(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};Wv=new WeakMap,Cd=new WeakMap,zv=new WeakMap,Yy=new WeakMap;let ac=fu;var Vh;const hy=class hy{constructor(e){ne(this,Vh);oe(wv(e)===32,"invalid private key","privateKey","[REDACTED]"),q(this,Vh,rt(e))}get privateKey(){return R(this,Vh)}get publicKey(){return hy.computePublicKey(R(this,Vh))}get compressedPublicKey(){return hy.computePublicKey(R(this,Vh),!0)}sign(e){oe(wv(e)===32,"invalid digest length","digest",e);const n=Ip.sign(ia(e),ia(R(this,Vh)),{lowS:!0});return ac.from({r:gm(n.r,32),s:gm(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=hy.computePublicKey(e);return rt(Ip.getSharedSecret(ia(R(this,Vh)),Bn(n),!1))}static computePublicKey(e,n){let r=Bn(e,"key");if(r.length===32){const i=Ip.getPublicKey(r,!!n);return rt(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=Ip.ProjectivePoint.fromHex(r);return rt(s.toRawBytes(n))}static recoverPublicKey(e,n){oe(wv(e)===32,"invalid digest length","digest",e);const r=ac.from(n);let s=Ip.Signature.fromCompact(ia(Vs([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(ia(e));return oe(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,r){const s=Ip.ProjectivePoint.fromHex(hy.computePublicKey(e).substring(2)),i=Ip.ProjectivePoint.fromHex(hy.computePublicKey(n).substring(2));return"0x"+s.add(i).toHex(!!r)}};Vh=new WeakMap;let BS=hy;const Ent=BigInt(0),Cnt=BigInt(36);function WV(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=e[s].charCodeAt(0);const r=Bn(ui(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const CF={};for(let t=0;t<10;t++)CF[String(t)]=String(t);for(let t=0;t<26;t++)CF[String.fromCharCode(65+t)]=String(10+t);const zV=15;function _nt(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>CF[r]).join("");for(;e.length>=zV;){let r=e.substring(0,zV);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const Ant=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function Snt(t){t=t.toLowerCase();let e=Ent;for(let n=0;n<t.length;n++)e=e*Cnt+Ant[t[n]];return e}function Ar(t){if(oe(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=WV(t);return oe(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){oe(t.substring(2,4)===_nt(t),"bad icap checksum","address",t);let e=Snt(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return WV("0x"+e)}oe(!1,"invalid address","address",t)}function Int(t){const e=Ar(t.from);let r=Ct(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,Ar(zs(ui(ym([e,r])),12))}function Uce(t){return t&&typeof t.getAddress=="function"}async function TM(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(ke(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),oe(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),Ar(n)}function da(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?Ar(t):(ke(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),TM(t,e.resolveName(t)));if(Uce(t))return TM(t,t.getAddress());if(t&&typeof t.then=="function")return TM(t,t);oe(!1,"unsupported addressable value","target",t)}const Bh={};function gt(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new Fo(Bh,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function dr(t,e){return new Fo(Bh,`bytes${e||""}`,t,{size:e})}const HV=Symbol.for("_ethers_typed");var Qy;const Lh=class Lh{constructor(e,n,r,s){le(this,"type");le(this,"value");ne(this,Qy);le(this,"_typedSymbol");s==null&&(s=null),sO(Bh,e,"Typed"),Jt(this,{_typedSymbol:HV,type:n,value:r}),q(this,Qy,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return R(this,Qy)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return R(this,Qy)===!0?-1:R(this,Qy)===!1?this.value.length:null}static from(e,n){return new Lh(Bh,e,n)}static uint8(e){return gt(e,8)}static uint16(e){return gt(e,16)}static uint24(e){return gt(e,24)}static uint32(e){return gt(e,32)}static uint40(e){return gt(e,40)}static uint48(e){return gt(e,48)}static uint56(e){return gt(e,56)}static uint64(e){return gt(e,64)}static uint72(e){return gt(e,72)}static uint80(e){return gt(e,80)}static uint88(e){return gt(e,88)}static uint96(e){return gt(e,96)}static uint104(e){return gt(e,104)}static uint112(e){return gt(e,112)}static uint120(e){return gt(e,120)}static uint128(e){return gt(e,128)}static uint136(e){return gt(e,136)}static uint144(e){return gt(e,144)}static uint152(e){return gt(e,152)}static uint160(e){return gt(e,160)}static uint168(e){return gt(e,168)}static uint176(e){return gt(e,176)}static uint184(e){return gt(e,184)}static uint192(e){return gt(e,192)}static uint200(e){return gt(e,200)}static uint208(e){return gt(e,208)}static uint216(e){return gt(e,216)}static uint224(e){return gt(e,224)}static uint232(e){return gt(e,232)}static uint240(e){return gt(e,240)}static uint248(e){return gt(e,248)}static uint256(e){return gt(e,256)}static uint(e){return gt(e,256)}static int8(e){return gt(e,-8)}static int16(e){return gt(e,-16)}static int24(e){return gt(e,-24)}static int32(e){return gt(e,-32)}static int40(e){return gt(e,-40)}static int48(e){return gt(e,-48)}static int56(e){return gt(e,-56)}static int64(e){return gt(e,-64)}static int72(e){return gt(e,-72)}static int80(e){return gt(e,-80)}static int88(e){return gt(e,-88)}static int96(e){return gt(e,-96)}static int104(e){return gt(e,-104)}static int112(e){return gt(e,-112)}static int120(e){return gt(e,-120)}static int128(e){return gt(e,-128)}static int136(e){return gt(e,-136)}static int144(e){return gt(e,-144)}static int152(e){return gt(e,-152)}static int160(e){return gt(e,-160)}static int168(e){return gt(e,-168)}static int176(e){return gt(e,-176)}static int184(e){return gt(e,-184)}static int192(e){return gt(e,-192)}static int200(e){return gt(e,-200)}static int208(e){return gt(e,-208)}static int216(e){return gt(e,-216)}static int224(e){return gt(e,-224)}static int232(e){return gt(e,-232)}static int240(e){return gt(e,-240)}static int248(e){return gt(e,-248)}static int256(e){return gt(e,-256)}static int(e){return gt(e,-256)}static bytes1(e){return dr(e,1)}static bytes2(e){return dr(e,2)}static bytes3(e){return dr(e,3)}static bytes4(e){return dr(e,4)}static bytes5(e){return dr(e,5)}static bytes6(e){return dr(e,6)}static bytes7(e){return dr(e,7)}static bytes8(e){return dr(e,8)}static bytes9(e){return dr(e,9)}static bytes10(e){return dr(e,10)}static bytes11(e){return dr(e,11)}static bytes12(e){return dr(e,12)}static bytes13(e){return dr(e,13)}static bytes14(e){return dr(e,14)}static bytes15(e){return dr(e,15)}static bytes16(e){return dr(e,16)}static bytes17(e){return dr(e,17)}static bytes18(e){return dr(e,18)}static bytes19(e){return dr(e,19)}static bytes20(e){return dr(e,20)}static bytes21(e){return dr(e,21)}static bytes22(e){return dr(e,22)}static bytes23(e){return dr(e,23)}static bytes24(e){return dr(e,24)}static bytes25(e){return dr(e,25)}static bytes26(e){return dr(e,26)}static bytes27(e){return dr(e,27)}static bytes28(e){return dr(e,28)}static bytes29(e){return dr(e,29)}static bytes30(e){return dr(e,30)}static bytes31(e){return dr(e,31)}static bytes32(e){return dr(e,32)}static address(e){return new Lh(Bh,"address",e)}static bool(e){return new Lh(Bh,"bool",!!e)}static bytes(e){return new Lh(Bh,"bytes",e)}static string(e){return new Lh(Bh,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new Lh(Bh,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===HV}static dereference(e,n){if(Lh.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};Qy=new WeakMap;let Fo=Lh;class Nnt extends Hf{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=Fo.dereference(n,"string");try{r=Ar(r)}catch(s){return this._throwError(s.message,n)}return e.writeValue(r)}decode(e){return Ar(gm(e.readValue(),20))}}class xnt extends Hf{constructor(n){super(n.name,n.type,"_",n.dynamic);le(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function $ce(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(l=>{const u=l.localName;return ke(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),ke(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),c[u]=!0,n[u]})}else oe(!1,"invalid tuple value","tuple",n);oe(e.length===r.length,"types/value length mismatch","tuple",n);let s=new K5,i=new K5,o=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let d=i.length;c.encode(i,u);let h=s.writeUpdatableValue();o.push(f=>{h(f+d)})}else c.encode(s,u)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function Fce(t,e){let n=[],r=[],s=t.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(l){if(uo(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if(uo(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");n.push(o),r.push(i.localName||null)}),oC.fromItems(n,r)}class Tnt extends Hf{constructor(n,r,s){const i=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",i,s,o);le(this,"coder");le(this,"length");Jt(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(n);return r}encode(n,r){const s=Fo.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,n.writeValue(s.length)),Yae(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return $ce(n,o,s)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),ke(r*ua<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*ua,length:n.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new xnt(this.coder));return Fce(n,s)}}class Rnt extends Hf{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=Fo.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class jce extends Hf{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=ia(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class knt extends jce{constructor(e){super("bytes",e)}decode(e){return rt(super.decode(e))}}class Pnt extends Hf{constructor(n,r){let s="bytes"+String(n);super(s,s,r,!1);le(this,"size");Jt(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let s=ia(Fo.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(s)}decode(n){return rt(n.readBytes(this.size))}}const Ont=new Uint8Array([]);class Dnt extends Hf{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(Ont)}decode(e){return e.readBytes(0),null}}const Mnt=BigInt(0),Bnt=BigInt(1),Lnt=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Unt extends Hf{constructor(n,r,s){const i=(r?"int":"uint")+n*8;super(i,i,s,!1);le(this,"size");le(this,"signed");Jt(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let s=Ct(Fo.dereference(r,this.type)),i=l_(Lnt,ua*8);if(this.signed){let o=l_(i,this.size*8-1);(s>o||s<-(o+Bnt))&&this._throwError("value out-of-bounds",r),s=Zae(s,8*ua)}else(s<Mnt||s>l_(i,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(s)}decode(n){let r=l_(n.readValue(),this.size*8);return this.signed&&(r=Met(r,this.size*8)),r}}class $nt extends jce{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,Ef(Fo.dereference(n,"string")))}decode(e){return Bk(super.decode(e))}}class zx extends Hf{constructor(n,r){let s=!1;const i=[];n.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,r,s);le(this,"coders");Jt(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(s=>{n.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[i]))}),Object.freeze(n)}encode(n,r){const s=Fo.dereference(r,"tuple");return $ce(n,this.coders,s)}decode(n){return Fce(n,this.coders)}}function RM(t,e){return{address:Ar(t),storageKeys:e.map((n,r)=>(oe(cs(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function Aw(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(oe(n.length===2,"invalid slot set",`value[${r}]`,n),RM(n[0],n[1])):(oe(n!=null&&typeof n=="object","invalid address-slot set","value",t),RM(n.address,n.storageKeys)));oe(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((s,i)=>(s[i]=!0,s),{});return RM(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function Wce(t){return{address:Ar(t.address),nonce:Ct(t.nonce!=null?t.nonce:0),chainId:Ct(t.chainId!=null?t.chainId:0),signature:ac.from(t.signature)}}function Fnt(t){let e;return typeof t=="string"?e=BS.computePublicKey(t,!1):e=t.publicKey,Ar(ui("0x"+e.substring(4)).substring(26))}function jnt(t,e){return Fnt(BS.recoverPublicKey(t,e))}const Bi=BigInt(0),Wnt=BigInt(2),znt=BigInt(27),Hnt=BigInt(28),Gnt=BigInt(35),qnt=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),kM=4096*32;function Vnt(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Bn(t.blobToKzgCommitment(rt(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Bn(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return Bn(t.blobToKZGCommitment(rt(r)));oe(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return Bn(t.computeBlobProof(rt(r),rt(s)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return Bn(t.computeBlobKZGProof(rt(r),rt(s)));oe(!1,"unsupported KZG library","kzg",t)}}}function GV(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=YC(e).substring(4),"0x"+n}function QC(t){return t==="0x"?null:Ar(t)}function uO(t,e){try{return Aw(t)}catch(n){oe(!1,n.message,e,t)}}function Knt(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const s=t[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);n.push({address:QC(s[1]),nonce:Fr(s[2],"nonce"),chainId:Fr(s[0],"chainId"),signature:ac.from({yParity:Sw(s[3],"yParity"),r:Bf(s[4],32),s:Bf(s[5],32)})})}return n}catch(n){oe(!1,n.message,e,t)}}function Sw(t,e){return t==="0x"?0:Ln(t,e)}function Fr(t,e){if(t==="0x")return Bi;const n=Ct(t,e);return oe(n<=qnt,"value exceeds uint size",e,n),n}function Yn(t,e){const n=Ct(t,"value"),r=_i(n);return oe(r.length<=32,"value too large",`tx.${e}`,n),r}function dO(t){return Aw(t).map(e=>[e.address,e.storageKeys])}function Ynt(t){return t.map(e=>[Yn(e.chainId,"chainId"),e.address,Yn(e.nonce,"nonce"),Yn(e.signature.yParity,"yParity"),_i(e.signature.r),_i(e.signature.s)])}function Qnt(t,e){oe(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)oe(cs(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function Jnt(t){const e=fN(t);oe(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:Sw(e[0],"nonce"),gasPrice:Fr(e[1],"gasPrice"),gasLimit:Fr(e[2],"gasLimit"),to:QC(e[3]),value:Fr(e[4],"value"),data:rt(e[5]),chainId:Bi};if(e.length===6)return n;const r=Fr(e[6],"v"),s=Fr(e[7],"r"),i=Fr(e[8],"s");if(s===Bi&&i===Bi)n.chainId=r;else{let o=(r-Gnt)/Wnt;o<Bi&&(o=Bi),n.chainId=o,oe(o!==Bi||r===znt||r===Hnt,"non-canonical legacy v","v",e[6]),n.signature=ac.from({r:Bf(e[7],32),s:Bf(e[8],32),v:r})}return n}function Znt(t,e){const n=[Yn(t.nonce,"nonce"),Yn(t.gasPrice||0,"gasPrice"),Yn(t.gasLimit,"gasLimit"),t.to||"0x",Yn(t.value,"value"),t.data];let r=Bi;if(t.chainId!=Bi)r=Ct(t.chainId,"tx.chainId"),oe(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==Bi&&(n.push(_i(r)),n.push("0x"),n.push("0x")),ym(n);let s=BigInt(27+e.yParity);return r!==Bi?s=ac.getChainIdV(r,e.v):BigInt(e.v)!==s&&oe(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(_i(s)),n.push(_i(e.r)),n.push(_i(e.s)),ym(n)}function hO(t,e){let n;try{if(n=Sw(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{oe(!1,"invalid yParity","yParity",e[0])}const r=Bf(e[1],32),s=Bf(e[2],32),i=ac.from({r,s,yParity:n});t.signature=i}function Xnt(t){const e=fN(Bn(t).slice(1));oe(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",rt(t));const n={type:2,chainId:Fr(e[0],"chainId"),nonce:Sw(e[1],"nonce"),maxPriorityFeePerGas:Fr(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Fr(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Fr(e[4],"gasLimit"),to:QC(e[5]),value:Fr(e[6],"value"),data:rt(e[7]),accessList:uO(e[8],"accessList")};return e.length===9||hO(n,e.slice(9)),n}function ert(t,e){const n=[Yn(t.chainId,"chainId"),Yn(t.nonce,"nonce"),Yn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Yn(t.maxFeePerGas||0,"maxFeePerGas"),Yn(t.gasLimit,"gasLimit"),t.to||"0x",Yn(t.value,"value"),t.data,dO(t.accessList||[])];return e&&(n.push(Yn(e.yParity,"yParity")),n.push(_i(e.r)),n.push(_i(e.s))),Vs(["0x02",ym(n)])}function trt(t){const e=fN(Bn(t).slice(1));oe(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",rt(t));const n={type:1,chainId:Fr(e[0],"chainId"),nonce:Sw(e[1],"nonce"),gasPrice:Fr(e[2],"gasPrice"),gasLimit:Fr(e[3],"gasLimit"),to:QC(e[4]),value:Fr(e[5],"value"),data:rt(e[6]),accessList:uO(e[7],"accessList")};return e.length===8||hO(n,e.slice(8)),n}function nrt(t,e){const n=[Yn(t.chainId,"chainId"),Yn(t.nonce,"nonce"),Yn(t.gasPrice||0,"gasPrice"),Yn(t.gasLimit,"gasLimit"),t.to||"0x",Yn(t.value,"value"),t.data,dO(t.accessList||[])];return e&&(n.push(Yn(e.yParity,"recoveryParam")),n.push(_i(e.r)),n.push(_i(e.s))),Vs(["0x01",ym(n)])}function rrt(t){let e=fN(Bn(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const i=e[1],o=e[2],a=e[3];oe(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),oe(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),oe(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),oe(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),oe(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:i[c],commitment:o[c],proof:a[c]});e=e[0]}oe(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",rt(t));const s={type:3,chainId:Fr(e[0],"chainId"),nonce:Sw(e[1],"nonce"),maxPriorityFeePerGas:Fr(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Fr(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Fr(e[4],"gasLimit"),to:QC(e[5]),value:Fr(e[6],"value"),data:rt(e[7]),accessList:uO(e[8],"accessList"),maxFeePerBlobGas:Fr(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(s.blobs=r),oe(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),oe(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<s.blobVersionedHashes.length;i++)oe(cs(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||hO(s,e.slice(11)),s}function srt(t,e,n){const r=[Yn(t.chainId,"chainId"),Yn(t.nonce,"nonce"),Yn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Yn(t.maxFeePerGas||0,"maxFeePerGas"),Yn(t.gasLimit,"gasLimit"),t.to||MS,Yn(t.value,"value"),t.data,dO(t.accessList||[]),Yn(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),Qnt(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(Yn(e.yParity,"yParity")),r.push(_i(e.r)),r.push(_i(e.s)),n)?Vs(["0x03",ym([r,n.map(s=>s.data),n.map(s=>s.commitment),n.map(s=>s.proof)])]):Vs(["0x03",ym(r)])}function irt(t){const e=fN(Bn(t).slice(1));oe(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",rt(t));const n={type:4,chainId:Fr(e[0],"chainId"),nonce:Sw(e[1],"nonce"),maxPriorityFeePerGas:Fr(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Fr(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Fr(e[4],"gasLimit"),to:QC(e[5]),value:Fr(e[6],"value"),data:rt(e[7]),accessList:uO(e[8],"accessList"),authorizationList:Knt(e[9],"authorizationList")};return e.length===10||hO(n,e.slice(10)),n}function ort(t,e){const n=[Yn(t.chainId,"chainId"),Yn(t.nonce,"nonce"),Yn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Yn(t.maxFeePerGas||0,"maxFeePerGas"),Yn(t.gasLimit,"gasLimit"),t.to||"0x",Yn(t.value,"value"),t.data,dO(t.accessList||[]),Ynt(t.authorizationList||[])];return e&&(n.push(Yn(e.yParity,"yParity")),n.push(_i(e.r)),n.push(_i(e.s))),Vs(["0x04",ym(n)])}var Eu,Hv,Gv,qv,Vv,Kv,Yv,Qv,Jv,Zv,Xv,eE,Jy,eg,_d,tg,tE,nE,$T;const yd=class yd{constructor(){ne(this,nE);ne(this,Eu);ne(this,Hv);ne(this,Gv);ne(this,qv);ne(this,Vv);ne(this,Kv);ne(this,Yv);ne(this,Qv);ne(this,Jv);ne(this,Zv);ne(this,Xv);ne(this,eE);ne(this,Jy);ne(this,eg);ne(this,_d);ne(this,tg);ne(this,tE);q(this,Eu,null),q(this,Hv,null),q(this,qv,0),q(this,Vv,Bi),q(this,Kv,null),q(this,Yv,null),q(this,Qv,null),q(this,Gv,"0x"),q(this,Jv,Bi),q(this,Zv,Bi),q(this,Xv,null),q(this,eE,null),q(this,Jy,null),q(this,eg,null),q(this,_d,null),q(this,tg,null),q(this,tE,null)}get type(){return R(this,Eu)}set type(e){switch(e){case null:q(this,Eu,null);break;case 0:case"legacy":q(this,Eu,0);break;case 1:case"berlin":case"eip-2930":q(this,Eu,1);break;case 2:case"london":case"eip-1559":q(this,Eu,2);break;case 3:case"cancun":case"eip-4844":q(this,Eu,3);break;case 4:case"pectra":case"eip-7702":q(this,Eu,4);break;default:oe(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=R(this,Hv);return e==null&&this.type===3?MS:e}set to(e){q(this,Hv,e==null?null:Ar(e))}get nonce(){return R(this,qv)}set nonce(e){q(this,qv,Ln(e,"value"))}get gasLimit(){return R(this,Vv)}set gasLimit(e){q(this,Vv,Ct(e))}get gasPrice(){const e=R(this,Kv);return e==null&&(this.type===0||this.type===1)?Bi:e}set gasPrice(e){q(this,Kv,e==null?null:Ct(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=R(this,Yv);return e??(this.type===2||this.type===3?Bi:null)}set maxPriorityFeePerGas(e){q(this,Yv,e==null?null:Ct(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=R(this,Qv);return e??(this.type===2||this.type===3?Bi:null)}set maxFeePerGas(e){q(this,Qv,e==null?null:Ct(e,"maxFeePerGas"))}get data(){return R(this,Gv)}set data(e){q(this,Gv,rt(e))}get value(){return R(this,Jv)}set value(e){q(this,Jv,Ct(e,"value"))}get chainId(){return R(this,Zv)}set chainId(e){q(this,Zv,Ct(e))}get signature(){return R(this,Xv)||null}set signature(e){q(this,Xv,e==null?null:ac.from(e))}get accessList(){const e=R(this,eE)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){q(this,eE,e==null?null:Aw(e))}get authorizationList(){const e=R(this,tE)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){q(this,tE,e==null?null:e.map(n=>Wce(n)))}get maxFeePerBlobGas(){const e=R(this,Jy);return e==null&&this.type===3?Bi:e}set maxFeePerBlobGas(e){q(this,Jy,e==null?null:Ct(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=R(this,eg);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){oe(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)oe(cs(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}q(this,eg,e)}get blobs(){return R(this,tg)==null?null:R(this,tg).map(e=>Object.assign({},e))}set blobs(e){if(e==null){q(this,tg,null);return}const n=[],r=[];for(let s=0;s<e.length;s++){const i=e[s];if(hF(i)){ke(R(this,_d),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Bn(i);if(oe(o.length<=kM,"blob is too large",`blobs[${s}]`,i),o.length!==kM){const l=new Uint8Array(kM);l.set(o),o=l}const a=R(this,_d).blobToKzgCommitment(o),c=rt(R(this,_d).computeBlobKzgProof(o,a));n.push({data:rt(o),commitment:rt(a),proof:c}),r.push(GV(1,a))}else{const o=rt(i.commitment);n.push({data:rt(i.data),commitment:o,proof:rt(i.proof)}),r.push(GV(1,o))}}q(this,tg,n),q(this,eg,r)}get kzg(){return R(this,_d)}set kzg(e){e==null?q(this,_d,null):q(this,_d,Vnt(e))}get hash(){return this.signature==null?null:ui(Ie(this,nE,$T).call(this,!0,!1))}get unsignedHash(){return ui(this.unsignedSerialized)}get from(){return this.signature==null?null:jnt(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:BS.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return Ie(this,nE,$T).call(this,!0,!0)}get unsignedSerialized(){return Ie(this,nE,$T).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=R(this,Jy)!=null||R(this,eg);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&ke(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),ke(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),ke(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return yd.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new yd;if(typeof e=="string"){const r=Bn(e);if(r[0]>=127)return yd.from(Jnt(r));switch(r[0]){case 1:return yd.from(trt(r));case 2:return yd.from(Xnt(r));case 3:return yd.from(rrt(r));case 4:return yd.from(irt(r))}ke(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new yd;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=ac.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(oe(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),oe(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(oe(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),oe(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};Eu=new WeakMap,Hv=new WeakMap,Gv=new WeakMap,qv=new WeakMap,Vv=new WeakMap,Kv=new WeakMap,Yv=new WeakMap,Qv=new WeakMap,Jv=new WeakMap,Zv=new WeakMap,Xv=new WeakMap,eE=new WeakMap,Jy=new WeakMap,eg=new WeakMap,_d=new WeakMap,tg=new WeakMap,tE=new WeakMap,nE=new WeakSet,$T=function(e,n){ke(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return Znt(this,r);case 1:return nrt(this,r);case 2:return ert(this,r);case 3:return srt(this,r,n?this.blobs:null);case 4:return ort(this,r)}ke(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let Uk=yd;function J0(t){return ui(Ef(t))}var art="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const qV=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),VV=4;function crt(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),s=1,i=[0,1];for(let I=1;I<r;I++)i.push(s+=n());let o=n(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const d=31,h=2**d,f=h>>>1,p=f>>1,g=h-1;let m=0;for(let I=0;I<d;I++)m=m<<1|u();let y=[],w=0,C=h;for(;;){let I=Math.floor(((m-w+1)*s-1)/C),k=0,P=r;for(;P-k>1;){let W=k+P>>>1;I<i[W]?P=W:k=W}if(k==0)break;y.push(k);let U=w+Math.floor(C*i[k]/s),M=w+Math.floor(C*i[k+1]/s)-1;for(;!((U^M)&f);)m=m<<1&g|u(),U=U<<1&g,M=M<<1&g|1;for(;U&~M&p;)m=m&f|m<<1&g>>>1|u(),U=U<<1^f,M=(M^f)<<1|f|1;w=U,C=1+M-U}let N=r-4;return y.map(I=>{switch(I-N){case 3:return N+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return N+256+(t[a++]<<8|t[a++]);case 1:return N+t[a++];default:return I-1}})}function lrt(t){let e=0;return()=>t[e++]}function zce(t){return lrt(crt(urt(t)))}function urt(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let n=t.length,r=new Uint8Array(6*n>>3);for(let s=0,i=0,o=0,a=0;s<n;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(r[i++]=a>>(o-=8));return r}function drt(t){return t&1?~t>>1:t>>1}function hrt(t,e){let n=Array(t);for(let r=0,s=0;r<t;r++)n[r]=s+=drt(e());return n}function LS(t,e=0){let n=[];for(;;){let r=t(),s=t();if(!s)break;e+=r;for(let i=0;i<s;i++)n.push(e+i);e+=s+1}return n}function Hce(t){return US(()=>{let e=LS(t);if(e.length)return e})}function Gce(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(frt(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(prt(n,t))}return e.flat()}function US(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function qce(t,e,n){let r=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)hrt(t,n).forEach((i,o)=>r[o].push(i));return r}function frt(t,e){let n=1+e(),r=e(),s=US(e);return qce(s.length,1+t,e).flatMap((o,a)=>{let[c,...l]=o;return Array(s[a]).fill().map((u,d)=>{let h=d*r;return[c+d*n,l.map(f=>f+h)]})})}function prt(t,e){let n=1+e();return qce(n,1+t,e).map(s=>[s[0],s.slice(1)])}function grt(t){let e=[],n=LS(t);return s(r([]),[]),e;function r(i){let o=t(),a=US(()=>{let c=LS(t).map(l=>n[l]);if(c.length)return r(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let l of o)for(let u of l.Q)s(l,[...a,u],c)}}}function mrt(t){return t.toString(16).toUpperCase().padStart(2,"0")}function Vce(t){return`{${mrt(t)}}`}function yrt(t){let e=[];for(let n=0,r=t.length;n<r;){let s=t.codePointAt(n);n+=s<65536?1:2,e.push(s)}return e}function dC(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let s=0;s<n;)r.push(String.fromCodePoint(...t.slice(s,s+=4096)));return r.join("")}function wrt(t,e){let n=t.length,r=n-e.length;for(let s=0;r==0&&s<n;s++)r=t[s]-e[s];return r}var brt="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const $S=44032,$k=4352,Fk=4449,jk=4519,Kce=19,Yce=21,hC=28,Wk=Yce*hC,vrt=Kce*Wk,Ert=$S+vrt,Crt=$k+Kce,_rt=Fk+Yce,Art=jk+hC;function d_(t){return t>>24&255}function Qce(t){return t&16777215}let n6,KV,r6,FT;function Srt(){let t=zce(brt);n6=new Map(Hce(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),KV=new Set(LS(t)),r6=new Map,FT=new Map;for(let[e,n]of Gce(t)){if(!KV.has(e)&&n.length==2){let[r,s]=n,i=FT.get(r);i||(i=new Map,FT.set(r,i)),i.set(s,e)}r6.set(e,n.reverse())}}function Jce(t){return t>=$S&&t<Ert}function Irt(t,e){if(t>=$k&&t<Crt&&e>=Fk&&e<_rt)return $S+(t-$k)*Wk+(e-Fk)*hC;if(Jce(t)&&e>jk&&e<Art&&(t-$S)%hC==0)return t+(e-jk);{let n=FT.get(t);return n&&(n=n.get(e),n)?n:-1}}function Zce(t){n6||Srt();let e=[],n=[],r=!1;function s(i){let o=n6.get(i);o&&(r=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(Jce(i)){let o=i-$S,a=o/Wk|0,c=o%Wk/hC|0,l=o%hC;s($k+a),s(Fk+c),l>0&&s(jk+l)}else{let o=r6.get(i);o?n.push(...o):s(i)}if(!n.length)break;i=n.pop()}if(r&&e.length>1){let i=d_(e[0]);for(let o=1;o<e.length;o++){let a=d_(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(i=d_(e[--c]),i<=a))break}i=d_(e[o])}}return e}function Nrt(t){let e=[],n=[],r=-1,s=0;for(let i of t){let o=d_(i),a=Qce(i);if(r==-1)o==0?r=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),s=o;else{let c=Irt(r,a);c>=0?r=c:s==0&&o==0?(e.push(r),r=a):(n.push(a),s=o)}}return r>=0&&e.push(r,...n),e}function Xce(t){return Zce(t).map(Qce)}function xrt(t){return Nrt(Zce(t))}const YV=45,ele=".",tle=65039,nle=1,zk=t=>Array.from(t);function FS(t,e){return t.P.has(e)||t.Q.has(e)}class Trt extends Array{get is_emoji(){return!0}}let s6,rle,Ty,i6,sle,bv,PM,_b,ty,QV,o6;function _F(){if(s6)return;let t=zce(art);const e=()=>LS(t),n=()=>new Set(e()),r=(u,d)=>d.forEach(h=>u.add(h));s6=new Map(Gce(t)),rle=n(),Ty=e(),i6=new Set(e().map(u=>Ty[u])),Ty=new Set(Ty),sle=n(),n();let s=Hce(t),i=t();const o=()=>{let u=new Set;return e().forEach(d=>r(u,s[d])),r(u,e()),u};bv=US(u=>{let d=US(t).map(h=>h+96);if(d.length){let h=u>=i;d[0]-=32,d=dC(d),h&&(d=`Restricted[${d}]`);let f=o(),p=o(),g=!t();return{N:d,P:f,Q:p,M:g,R:h}}}),PM=n(),_b=new Map;let a=e().concat(zk(PM)).sort((u,d)=>u-d);a.forEach((u,d)=>{let h=t(),f=a[d]=h?a[d-h]:{V:[],M:new Map};f.V.push(u),PM.has(u)||_b.set(u,f)});for(let{V:u,M:d}of new Set(_b.values())){let h=[];for(let p of u){let g=bv.filter(y=>FS(y,p)),m=h.find(({G:y})=>g.some(w=>y.has(w)));m||(m={G:new Set,V:[]},h.push(m)),m.V.push(p),r(m.G,g)}let f=h.flatMap(p=>zk(p.G));for(let{G:p,V:g}of h){let m=new Set(f.filter(y=>!p.has(y)));for(let y of g)d.set(y,m)}}ty=new Set;let c=new Set;const l=u=>ty.has(u)?c.add(u):ty.add(u);for(let u of bv){for(let d of u.P)l(d);for(let d of u.Q)l(d)}for(let u of ty)!_b.has(u)&&!c.has(u)&&_b.set(u,nle);r(ty,Xce(ty)),QV=grt(t).map(u=>Trt.from(u)).sort(wrt),o6=new Map;for(let u of QV){let d=[o6];for(let h of u){let f=d.map(p=>{let g=p.get(h);return g||(g=new Map,p.set(h,g)),g});h===tle?d.push(...f):d=f}for(let h of d)h.V=u}}function AF(t){return(ile(t)?"":`${SF(fO([t]))} `)+Vce(t)}function SF(t){return`"${t}"‎`}function Rrt(t){if(t.length>=4&&t[2]==YV&&t[3]==YV)throw new Error(`invalid label extension: "${dC(t.slice(0,4))}"`)}function krt(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function Prt(t){let e=t[0],n=qV.get(e);if(n)throw Q_(`leading ${n}`);let r=t.length,s=-1;for(let i=1;i<r;i++){e=t[i];let o=qV.get(e);if(o){if(s==i)throw Q_(`${n} + ${o}`);s=i+1,n=o}}if(s==r)throw Q_(`trailing ${n}`)}function fO(t,e=1/0,n=Vce){let r=[];Ort(t[0])&&r.push("◌"),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];ile(a)&&(r.push(dC(t.slice(s,o))),r.push(n(a)),s=o+1)}return r.push(dC(t.slice(s,i))),r.join("")}function Ort(t){return _F(),Ty.has(t)}function ile(t){return _F(),sle.has(t)}function Drt(t){return Urt(Mrt(t,xrt,jrt))}function Mrt(t,e,n){if(!t)return[];_F();let r=0;return t.split(ele).map(s=>{let i=yrt(s),o={input:i,offset:r};r+=i.length+1;try{let a=o.tokens=Frt(i,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(krt(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(h=>h<128))Rrt(u),l="ASCII";else{let h=a.flatMap(f=>f.is_emoji?[]:f);if(!h.length)l="Emoji";else{if(Ty.has(u[0]))throw Q_("leading combining mark");for(let g=1;g<c;g++){let m=a[g];if(!m.is_emoji&&Ty.has(m[0]))throw Q_(`emoji + combining mark: "${dC(a[g-1])} + ${fO([m[0]])}"`)}Prt(u);let f=zk(new Set(h)),[p]=Lrt(f);$rt(p,h),Brt(p,f),l=p.N}}o.type=l}catch(a){o.error=a}return o})}function Brt(t,e){let n,r=[];for(let s of e){let i=_b.get(s);if(i===nle)return;if(i){let o=i.M.get(s);if(n=n?n.filter(a=>o.has(a)):zk(o),!n.length)return}else r.push(s)}if(n){for(let s of n)if(r.every(i=>FS(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function Lrt(t){let e=bv;for(let n of t){let r=e.filter(s=>FS(s,n));if(!r.length)throw bv.some(s=>FS(s,n))?ale(e[0],n):ole(n);if(e=r,r.length==1)break}return e}function Urt(t){return t.map(({input:e,error:n,output:r})=>{if(n){let s=n.message;throw new Error(t.length==1?s:`Invalid label ${SF(fO(e,63))}: ${s}`)}return dC(r)}).join(ele)}function ole(t){return new Error(`disallowed character: ${AF(t)}`)}function ale(t,e){let n=AF(e),r=bv.find(s=>s.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function Q_(t){return new Error(`illegal placement: ${t}`)}function $rt(t,e){for(let n of e)if(!FS(t,n))throw ale(t,n);if(t.M){let n=Xce(e);for(let r=1,s=n.length;r<s;r++)if(i6.has(n[r])){let i=r+1;for(let o;i<s&&i6.has(o=n[i]);i++)for(let a=r;a<i;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${AF(o)}`);if(i-r>VV)throw new Error(`excessive non-spacing marks: ${SF(fO(n.slice(r-1,i)))} (${i-r}/${VV})`);r=i}}}function Frt(t,e,n){let r=[],s=[];for(t=t.slice().reverse();t.length;){let i=Wrt(t);if(i)s.length&&(r.push(e(s)),s=[]),r.push(n(i));else{let o=t.pop();if(ty.has(o))s.push(o);else{let a=s6.get(o);if(a)s.push(...a);else if(!rle.has(o))throw ole(o)}}}return s.length&&r.push(e(s)),r}function jrt(t){return t.filter(e=>e!=tle)}function Wrt(t,e){let n=o6,r,s=t.length;for(;s&&(n=n.get(t[--s]),!!n);){let{V:i}=n;i&&(r=i,t.length=s)}return r}const cle=new Uint8Array(32);cle.fill(0);function JV(t){return oe(t.length!==0,"invalid ENS name; empty component","comp",t),t}function lle(t){const e=Ef(zrt(t)),n=[];if(t.length===0)return n;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(n.push(JV(e.slice(r,s))),r=s+1);return oe(r<e.length,"invalid ENS name; empty component","name",t),n.push(JV(e.slice(r))),n}function zrt(t){try{if(t.length===0)throw new Error("empty label");return Drt(t)}catch(e){oe(!1,`invalid ENS name (${e.message})`,"name",t)}}function a6(t){oe(typeof t=="string","invalid ENS name; not a string","name",t),oe(t.length,"invalid ENS name (empty label)","name",t);let e=cle;const n=lle(t);for(;n.length;)e=ui(Vs([e,ui(n.pop())]));return rt(e)}function Hrt(t,e){const n=e;return oe(n<=255,"DNS encoded label cannot exceed 255","length",n),rt(Vs(lle(t).map(r=>{oe(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const ule=new Uint8Array(32);ule.fill(0);const Grt=BigInt(-1),dle=BigInt(0),hle=BigInt(1),qrt=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Vrt(t){const e=Bn(t),n=e.length%32;return n?Vs([e,ule.slice(n)]):rt(e)}const Krt=gm(hle,32),Yrt=gm(dle,32),ZV={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},OM=["name","version","chainId","verifyingContract","salt"];function XV(t){return function(e){return oe(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const Qrt={name:XV("name"),version:XV("version"),chainId:function(t){const e=Ct(t,"domain.chainId");return oe(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):xu(e)},verifyingContract:function(t){try{return Ar(t).toLowerCase()}catch{}oe(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=Bn(t,"domain.salt");return oe(e.length===32,'invalid domain value "salt"',"domain.salt",t),rt(e)}};function DM(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);oe(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const s=l_(qrt,n?r-1:r),i=n?(s+hle)*Grt:dle;return function(o){const a=Ct(o,"value");return oe(a>=i&&a<=s,`value out-of-bounds for ${t}`,"value",a),gm(n?Zae(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return oe(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const s=Bn(r);return oe(s.length===n,`invalid length for ${t}`,"value",r),Vrt(r)}}}switch(t){case"address":return function(e){return Bf(Ar(e),32)};case"bool":return function(e){return e?Krt:Yrt};case"bytes":return function(e){return ui(e)};case"string":return function(e){return J0(e)}}return null}function eK(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function Hx(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var ZS,Kh,rE,Yk,fle;const wl=class wl{constructor(e){ne(this,Yk);le(this,"primaryType");ne(this,ZS);ne(this,Kh);ne(this,rE);q(this,Kh,new Map),q(this,rE,new Map);const n=new Map,r=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:l,type:u})=>{let{base:d,index:h}=Hx(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:l,type:d+(h||"")}}),n.set(c,new Set),r.set(c,[]),s.set(c,new Set)}),q(this,ZS,JSON.stringify(i));for(const c in i){const l=new Set;for(const u of i[c]){oe(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const d=Hx(u.type).base;oe(d!==c,`circular type reference to ${JSON.stringify(d)}`,"types",e),!DM(d)&&(oe(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),r.get(d).push(c),n.get(c).add(d))}}const o=Array.from(r.keys()).filter(c=>r.get(c).length===0);oe(o.length!==0,"missing primary type","types",e),oe(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),Jt(this,{primaryType:o[0]});function a(c,l){oe(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of n.get(c))if(r.has(u)){a(u,l);for(const d of l)s.get(d).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of s){const u=Array.from(l);u.sort(),R(this,Kh).set(c,eK(c,i[c])+u.map(d=>eK(d,i[d])).join(""))}}get types(){return JSON.parse(R(this,ZS))}getEncoder(e){let n=R(this,rE).get(e);return n||(n=Ie(this,Yk,fle).call(this,e),R(this,rE).set(e,n)),n}encodeType(e){const n=R(this,Kh).get(e);return oe(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return ui(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(DM(e))return r(e,n);const s=Hx(e).array;if(s)return oe(s.count===-1||s.count===n.length,`array length mismatch; expected length ${s.count}`,"value",n),n.map(o=>this._visit(s.prefix,o,r));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,n[a],r),o),{});oe(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new wl(e)}static getPrimaryType(e){return wl.from(e).primaryType}static hashStruct(e,n,r){return wl.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const s=ZV[r];oe(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:s})}return n.sort((r,s)=>OM.indexOf(r.name)-OM.indexOf(s.name)),wl.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return Vs(["0x1901",wl.hashDomain(e),wl.from(n).hash(r)])}static hash(e,n,r){return ui(wl.encode(e,n,r))}static async resolveNames(e,n,r,s){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!cs(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=wl.from(n);o.visit(r,(a,c)=>(a==="address"&&!cs(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:r}}static getPayload(e,n,r){wl.hashDomain(e);const s={},i=[];OM.forEach(c=>{const l=e[c];l!=null&&(s[c]=Qrt[c](l),i.push({name:c,type:ZV[c]}))});const o=wl.from(n);n=o.types;const a=Object.assign({},n);return oe(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(r),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return rt(Bn(l));if(c.match(/^u?int/))return Ct(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return oe(typeof l=="string","invalid string","value",l),l}oe(!1,"unsupported type","type",c)})}}};ZS=new WeakMap,Kh=new WeakMap,rE=new WeakMap,Yk=new WeakSet,fle=function(e){{const s=DM(e);if(s)return s}const n=Hx(e).array;if(n){const s=n.prefix,i=this.getEncoder(s);return o=>{oe(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return R(this,Kh).has(s)&&(a=a.map(ui)),ui(Vs(a))}}const r=this.types[e];if(r){const s=J0(R(this,Kh).get(e));return i=>{const o=r.map(({name:a,type:c})=>{const l=this.getEncoder(c)(i[a]);return R(this,Kh).has(c)?ui(l):l});return o.unshift(s),Vs(o)}}oe(!1,`unknown type: ${e}`,"type",e)};let Hk=wl;function ha(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const Jrt="external public payable override",Zrt=ha(Jrt.split(" ")),ple="constant external internal payable private public pure view override",Xrt=ha(ple.split(" ")),gle="constructor error event fallback function receive struct",mle=ha(gle.split(" ")),yle="calldata memory storage payable indexed",est=ha(yle.split(" ")),tst="tuple returns",nst=[gle,yle,tst,ple].join(" "),rst=ha(nst.split(" ")),sst={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},ist=new RegExp("^(\\s*)"),ost=new RegExp("^([0-9]+)"),ast=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),wle=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),ble=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var eo,Cu,XS,c6;const Qk=class Qk{constructor(e){ne(this,XS);ne(this,eo);ne(this,Cu);q(this,eo,0),q(this,Cu,e.slice())}get offset(){return R(this,eo)}get length(){return R(this,Cu).length-R(this,eo)}clone(){return new Qk(R(this,Cu))}reset(){q(this,eo,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=Ie(this,XS,c6).call(this,R(this,eo)+1,e.match+1);return q(this,eo,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;R(this,eo)<e.match-1;){const r=this.peek().linkNext;n.push(Ie(this,XS,c6).call(this,R(this,eo)+1,r)),q(this,eo,r)}return q(this,eo,e.match+1),n}peek(){if(R(this,eo)>=R(this,Cu).length)throw new Error("out-of-bounds");return R(this,Cu)[R(this,eo)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return Qf(this,eo)._++,e}toString(){const e=[];for(let n=R(this,eo);n<R(this,Cu).length;n++){const r=R(this,Cu)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};eo=new WeakMap,Cu=new WeakMap,XS=new WeakSet,c6=function(e=0,n=0){return new Qk(R(this,Cu).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let Ku=Qk;function Im(t){const e=[],n=o=>{const a=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let r=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(ist);a&&(i+=a[1].length,o=t.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=sst[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,l==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const d=e.pop().text;u=d+u,e[e.length-1].value=Ln(d)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(ast),a){if(c.text=a[1],i+=c.text.length,rst.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(ble)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(ost),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Ku(e.map(o=>Object.freeze(o)))}function tK(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function pO(t,e){if(e.peekKeyword(mle)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function Lf(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function vle(t){let e=Lf(t,Xrt);return tK(e,ha("constant payable nonpayable".split(" "))),tK(e,ha("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Cf(t,e){return t.popParams().map(n=>yo.from(n,e))}function Ele(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Ct(t.pop().text);throw new Error("invalid gas")}return null}function Z0(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const cst=new RegExp(/^(.*)\[([0-9]*)\]$/);function nK(t){const e=t.match(ble);if(oe(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);oe(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);oe(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const Ds={},uc=Symbol.for("_ethers_internal"),rK="_ParamTypeInternal",sK="_ErrorInternal",iK="_EventInternal",oK="_ConstructorInternal",aK="_FallbackInternal",cK="_FunctionInternal",lK="_StructInternal";var sE,jT;const bl=class bl{constructor(e,n,r,s,i,o,a,c){ne(this,sE);le(this,"name");le(this,"type");le(this,"baseType");le(this,"indexed");le(this,"components");le(this,"arrayLength");le(this,"arrayChildren");if(sO(e,Ds,"ParamType"),Object.defineProperty(this,uc,{value:rK}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");Jt(this,{name:n,type:r,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],s=[e];return Ie(this,sE,jT).call(this,r,e,n,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,n){if(bl.isParamType(e))return e;if(typeof e=="string")try{return bl.from(Im(e),n)}catch{oe(!1,"invalid param type","obj",e)}else if(e instanceof Ku){let a="",c="",l=null;Lf(e,ha(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(g=>bl.from(g)),a=`tuple(${l.map(g=>g.format()).join(",")})`):(a=nK(e.popType("TYPE")),c=a);let u=null,d=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();u=new bl(Ds,"",a,c,null,l,d,u),d=g.value,a+=g.text,c="array",l=null}let h=null;if(Lf(e,est).has("indexed")){if(!n)throw new Error("");h=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new bl(Ds,p,a,c,h,l,d,u)}const r=e.name;oe(!r||typeof r=="string"&&r.match(wle),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(oe(n,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(cst);if(o){const a=parseInt(o[2]||"-1"),c=bl.from({type:o[1],components:e.components});return new bl(Ds,r||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(l=>bl.from(l)):null;return new bl(Ds,r||"",i,"tuple",s,a,null,null)}return i=nK(e.type),new bl(Ds,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[uc]===rK}};sE=new WeakSet,jT=function(e,n,r,s){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((c,l)=>{var u;Ie(u=o,sE,jT).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{var u;Ie(u=o[l],sE,jT).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}const i=r(this.type,n);i.then?e.push(async function(){s(await i)}()):s(i)};let yo=bl;class X0{constructor(e,n,r){le(this,"type");le(this,"inputs");sO(e,Ds,"Fragment"),r=Object.freeze(r.slice()),Jt(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{X0.from(JSON.parse(e))}catch{}return X0.from(Im(e))}if(e instanceof Ku)switch(e.peekKeyword(mle)){case"constructor":return ff.from(e);case"error":return Va.from(e);case"event":return Fd.from(e);case"fallback":case"receive":return jh.from(e);case"function":return jd.from(e);case"struct":return b0.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return ff.from(e);case"error":return Va.from(e);case"event":return Fd.from(e);case"fallback":case"receive":return jh.from(e);case"function":return jd.from(e);case"struct":return b0.from(e)}ke(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}oe(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return ff.isFragment(e)}static isError(e){return Va.isFragment(e)}static isEvent(e){return Fd.isFragment(e)}static isFunction(e){return jd.isFragment(e)}static isStruct(e){return b0.isFragment(e)}}class gO extends X0{constructor(n,r,s,i){super(n,r,i);le(this,"name");oe(typeof s=="string"&&s.match(wle),"invalid identifier","name",s),i=Object.freeze(i.slice()),Jt(this,{name:s})}}function jS(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class Va extends gO{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,uc,{value:sK})}get selector(){return J0(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+jS(e,this.inputs)),n.join(" ")}static from(e){if(Va.isFragment(e))return e;if(typeof e=="string")return Va.from(Im(e));if(e instanceof Ku){const n=pO("error",e),r=Cf(e);return Z0(e),new Va(Ds,n,r)}return new Va(Ds,e.name,e.inputs?e.inputs.map(yo.from):[])}static isFragment(e){return e&&e[uc]===sK}}class Fd extends gO{constructor(n,r,s,i){super(n,"event",r,s);le(this,"anonymous");Object.defineProperty(this,uc,{value:iK}),Jt(this,{anonymous:i})}get topicHash(){return J0(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+jS(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(i=>yo.from(i)),new Fd(Ds,n,r,!1).topicHash}static from(n){if(Fd.isFragment(n))return n;if(typeof n=="string")try{return Fd.from(Im(n))}catch{oe(!1,"invalid event fragment","obj",n)}else if(n instanceof Ku){const r=pO("event",n),s=Cf(n,!0),i=!!Lf(n,ha(["anonymous"])).has("anonymous");return Z0(n),new Fd(Ds,r,s,i)}return new Fd(Ds,n.name,n.inputs?n.inputs.map(r=>yo.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[uc]===iK}}class ff extends X0{constructor(n,r,s,i,o){super(n,r,s);le(this,"payable");le(this,"gas");Object.defineProperty(this,uc,{value:oK}),Jt(this,{payable:i,gas:o})}format(n){if(ke(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[`constructor${jS(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(ff.isFragment(n))return n;if(typeof n=="string")try{return ff.from(Im(n))}catch{oe(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof Ku){Lf(n,ha(["constructor"]));const r=Cf(n),s=!!Lf(n,Zrt).has("payable"),i=Ele(n);return Z0(n),new ff(Ds,"constructor",r,s,i)}return new ff(Ds,"constructor",n.inputs?n.inputs.map(yo.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[uc]===oK}}class jh extends X0{constructor(n,r,s){super(n,"fallback",r);le(this,"payable");Object.defineProperty(this,uc,{value:aK}),Jt(this,{payable:s})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(n){if(jh.isFragment(n))return n;if(typeof n=="string")try{return jh.from(Im(n))}catch{oe(!1,"invalid fallback fragment","obj",n)}else if(n instanceof Ku){const r=n.toString(),s=n.peekKeyword(ha(["fallback","receive"]));if(oe(s,"type must be fallback or receive","obj",r),n.popKeyword(ha(["fallback","receive"]))==="receive"){const c=Cf(n);return oe(c.length===0,"receive cannot have arguments","obj.inputs",c),Lf(n,ha(["payable"])),Z0(n),new jh(Ds,[],!0)}let o=Cf(n);o.length?oe(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[yo.from("bytes")];const a=vle(n);if(oe(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),Lf(n,ha(["returns"])).has("returns")){const c=Cf(n);oe(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return Z0(n),new jh(Ds,o,a==="payable")}if(n.type==="receive")return new jh(Ds,[],!0);if(n.type==="fallback"){const r=[yo.from("bytes")],s=n.stateMutability==="payable";return new jh(Ds,r,s)}oe(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[uc]===aK}}class jd extends gO{constructor(n,r,s,i,o,a){super(n,"function",r,i);le(this,"constant");le(this,"outputs");le(this,"stateMutability");le(this,"payable");le(this,"gas");Object.defineProperty(this,uc,{value:cK}),o=Object.freeze(o.slice()),Jt(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return J0(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n))),outputs:this.outputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+jS(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(jS(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(i=>yo.from(i)),new jd(Ds,n,"view",r,[],null).selector}static from(n){if(jd.isFragment(n))return n;if(typeof n=="string")try{return jd.from(Im(n))}catch{oe(!1,"invalid function fragment","obj",n)}else if(n instanceof Ku){const s=pO("function",n),i=Cf(n),o=vle(n);let a=[];Lf(n,ha(["returns"])).has("returns")&&(a=Cf(n));const c=Ele(n);return Z0(n),new jd(Ds,s,o,i,a,c)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new jd(Ds,n.name,r,n.inputs?n.inputs.map(yo.from):[],n.outputs?n.outputs.map(yo.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[uc]===cK}}class b0 extends gO{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,uc,{value:lK})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return b0.from(Im(e))}catch{oe(!1,"invalid struct fragment","obj",e)}else if(e instanceof Ku){const n=pO("struct",e),r=Cf(e);return Z0(e),new b0(Ds,n,r)}return new b0(Ds,e.name,e.inputs?e.inputs.map(yo.from):[])}static isFragment(e){return e&&e[uc]===lK}}const Ju=new Map;Ju.set(0,"GENERIC_PANIC");Ju.set(1,"ASSERT_FALSE");Ju.set(17,"OVERFLOW");Ju.set(18,"DIVIDE_BY_ZERO");Ju.set(33,"ENUM_RANGE_ERROR");Ju.set(34,"BAD_STORAGE_DATA");Ju.set(49,"STACK_UNDERFLOW");Ju.set(50,"ARRAY_RANGE_ERROR");Ju.set(65,"OUT_OF_MEMORY");Ju.set(81,"UNINITIALIZED_FUNCTION_CALL");const lst=new RegExp(/^bytes([0-9]*)$/),ust=new RegExp(/^(u?int)([0-9]*)$/);let MM=null,uK=1024;function dst(t,e,n,r){let s="missing revert data",i=null;const o=null;let a=null;if(n){s="execution reverted";const l=Bn(n);if(n=rt(n),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(rt(l.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(rt(l.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},i=`Panic due to ${Ju.get(u)||"UNKNOWN"}(${u})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?Ar(e.to):null,data:e.data||"0x"};return e.from&&(c.from=Ar(e.from)),_s(s,"CALL_EXCEPTION",{action:t,data:n,reason:i,transaction:c,invocation:o,revert:a})}var ng,Ab;const Jk=class Jk{constructor(){ne(this,ng)}getDefaultValue(e){const n=e.map(s=>Ie(this,ng,Ab).call(this,yo.from(s)));return new zx(n,"_").defaultValue()}encode(e,n){Yae(n.length,e.length,"types/values length mismatch");const r=e.map(o=>Ie(this,ng,Ab).call(this,yo.from(o))),s=new zx(r,"_"),i=new K5;return s.encode(i,n),i.data}decode(e,n,r){const s=e.map(o=>Ie(this,ng,Ab).call(this,yo.from(o)));return new zx(s,"_").decode(new Y5(n,r,uK))}static _setDefaultMaxInflation(e){oe(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),uK=e}static defaultAbiCoder(){return MM==null&&(MM=new Jk),MM}static getBuiltinCallException(e,n,r){return dst(e,n,r,Jk.defaultAbiCoder())}};ng=new WeakSet,Ab=function(e){if(e.isArray())return new Tnt(Ie(this,ng,Ab).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new zx(e.components.map(r=>Ie(this,ng,Ab).call(this,r)),e.name);switch(e.baseType){case"address":return new Nnt(e.name);case"bool":return new Rnt(e.name);case"string":return new $nt(e.name);case"bytes":return new knt(e.name);case"":return new Dnt(e.name)}let n=e.type.match(ust);if(n){let r=parseInt(n[2]||"256");return oe(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new Unt(r/8,n[1]==="int",e.name)}if(n=e.type.match(lst),n){let r=parseInt(n[1]);return oe(r!==0&&r<=32,"invalid bytes length","param",e),new Pnt(r,e.name)}oe(!1,"invalid type","type",e.type)};let WS=Jk;class hst{constructor(e,n,r){le(this,"fragment");le(this,"name");le(this,"signature");le(this,"topic");le(this,"args");const s=e.name,i=e.format();Jt(this,{fragment:e,name:s,signature:i,topic:n,args:r})}}class fst{constructor(e,n,r,s){le(this,"fragment");le(this,"name");le(this,"args");le(this,"signature");le(this,"selector");le(this,"value");const i=e.name,o=e.format();Jt(this,{fragment:e,name:i,args:r,signature:o,selector:n,value:s})}}class pst{constructor(e,n,r){le(this,"fragment");le(this,"name");le(this,"args");le(this,"signature");le(this,"selector");const s=e.name,i=e.format();Jt(this,{fragment:e,name:s,args:r,signature:i,selector:n})}}class dK{constructor(e){le(this,"hash");le(this,"_isIndexed");Jt(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const hK={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},fK={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&hK[t.toString()]&&(e=hK[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var Ad,Sd,Id,Oo,Jd,WT,zT;const fy=class fy{constructor(e){ne(this,Jd);le(this,"fragments");le(this,"deploy");le(this,"fallback");le(this,"receive");ne(this,Ad);ne(this,Sd);ne(this,Id);ne(this,Oo);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,q(this,Id,new Map),q(this,Ad,new Map),q(this,Sd,new Map);const r=[];for(const o of n)try{r.push(X0.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}Jt(this,{fragments:Object.freeze(r)});let s=null,i=!1;q(this,Oo,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Jt(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(oe(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=R(this,Id);break;case"event":c=R(this,Sd);break;case"error":c=R(this,Ad);break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||Jt(this,{deploy:ff.from("constructor()")}),Jt(this,{fallback:s,receive:i})}format(e){const n=e?"minimal":"full";return this.fragments.map(s=>s.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return WS.defaultAbiCoder()}getFunctionName(e){const n=Ie(this,Jd,WT).call(this,e,null,!1);return oe(n,"no matching function","key",e),n.name}hasFunction(e){return!!Ie(this,Jd,WT).call(this,e,null,!1)}getFunction(e,n){return Ie(this,Jd,WT).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(R(this,Id).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(R(this,Id).get(s),r)}}getEventName(e){const n=Ie(this,Jd,zT).call(this,e,null,!1);return oe(n,"no matching event","key",e),n.name}hasEvent(e){return!!Ie(this,Jd,zT).call(this,e,null,!1)}getEvent(e,n){return Ie(this,Jd,zT).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(R(this,Sd).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(R(this,Sd).get(s),r)}}getError(e,n){if(cs(e)){const s=e.toLowerCase();if(fK[s])return Va.from(fK[s].signature);for(const i of R(this,Ad).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of R(this,Ad))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?Va.from("error Error(string)"):e==="Panic"?Va.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");oe(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=Va.from(e).format(),e==="Error(string)")return Va.from("error Error(string)");if(e==="Panic(uint256)")return Va.from("error Panic(uint256)");const r=R(this,Ad).get(e);return r||null}forEachError(e){const n=Array.from(R(this,Ad).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(R(this,Ad).get(s),r)}}_decodeParams(e,n){return R(this,Oo).decode(e,n)}_encodeParams(e,n){return R(this,Oo).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);oe(r,"unknown error","fragment",e),e=r}return oe(zs(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,zs(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);oe(r,"unknown error","fragment",e),e=r}return Vs([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);oe(r,"unknown function","fragment",e),e=r}return oe(zs(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,zs(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);oe(r,"unknown function","fragment",e),e=r}return Vs([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const i=this.getFunction(e);oe(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=ia(n);if(s.length%32===0)try{return R(this,Oo).decode(e.outputs,s)}catch{r="could not decode result data"}ke(!1,r,"BAD_DATA",{value:rt(s),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=Bn(e,"data"),s=WS.getBuiltinCallException("call",n,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=rt(r.slice(0,4)),c=this.getError(a);if(c)try{const l=R(this,Oo).decode(c.inputs,r.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);oe(r,"unknown function","fragment",e),e=r}return rt(R(this,Oo).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const i=this.getEvent(e);oe(i,"unknown event","eventFragment",e),e=i}ke(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,o)=>i.type==="string"?J0(o):i.type==="bytes"?ui(rt(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=gm(o):i.type.match(/^bytes/)?o=Det(o,32):i.type==="address"&&R(this,Oo).encode(["address"],[o]),Bf(rt(o),32));for(n.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){oe(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?oe(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?r.push(i.map(c=>s(a,c))):r.push(s(a,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);oe(o,"unknown event","eventFragment",e),e=o}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),oe(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const c=n[a];if(o.indexed)if(o.type==="string")r.push(J0(c));else if(o.type==="bytes")r.push(ui(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(R(this,Oo).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:R(this,Oo).encode(s,i),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const f=this.getEvent(e);oe(f,"unknown event","eventFragment",e),e=f}if(r!=null&&!e.anonymous){const f=e.topicHash;oe(cs(r[0],32)&&r[0].toLowerCase()===f,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(yo.from({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});const a=r!=null?R(this,Oo).decode(s,Vs(r)):null,c=R(this,Oo).decode(i,n,!0),l=[],u=[];let d=0,h=0;return e.inputs.forEach((f,p)=>{let g=null;if(f.indexed)if(a==null)g=new dK(null);else if(o[p])g=new dK(a[h++]);else try{g=a[h++]}catch(m){g=m}else try{g=c[d++]}catch(m){g=m}l.push(g),u.push(f.name||null)}),oC.fromItems(l,u)}parseTransaction(e){const n=Bn(e.data,"tx.data"),r=Ct(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(rt(n.slice(0,4)));if(!s)return null;const i=R(this,Oo).decode(s.inputs,n.slice(4));return new fst(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new hst(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=rt(e),r=this.getError(zs(n,0,4));if(!r)return null;const s=R(this,Oo).decode(r.inputs,zs(n,4));return new pst(r,r.selector,s)}static from(e){return e instanceof fy?e:typeof e=="string"?new fy(JSON.parse(e)):typeof e.formatJson=="function"?new fy(e.formatJson()):typeof e.format=="function"?new fy(e.format("json")):new fy(e)}};Ad=new WeakMap,Sd=new WeakMap,Id=new WeakMap,Oo=new WeakMap,Jd=new WeakSet,WT=function(e,n,r){if(cs(e)){const i=e.toLowerCase();for(const o of R(this,Id).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of R(this,Id))o.split("(")[0]===e&&i.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,c=!0;Fo.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=i.length-1;l>=0;l--){const u=i[l].inputs.length;u!==a&&(!c||u!==a-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const u=i[l].inputs;for(let d=0;d<n.length;d++)if(Fo.isTyped(n[d])){if(d>=u.length){if(n[d].type==="overrides")continue;i.splice(l,1);break}if(n[d].type!==u[d].baseType){i.splice(l,1);break}}}}if(i.length===1&&n&&n.length!==i[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");oe(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=R(this,Id).get(jd.from(e).format());return s||null},zT=function(e,n,r){if(cs(e)){const i=e.toLowerCase();for(const o of R(this,Sd).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of R(this,Sd))o.split("(")[0]===e&&i.push(a);if(n){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<n.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<n.length;c++)if(Fo.isTyped(n[c])&&n[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");oe(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=R(this,Sd).get(Fd.from(e).format());return s||null};let l6=fy;const Cle=BigInt(0);function vv(t){return t??null}function Xs(t){return t==null?null:t.toString()}class pK{constructor(e,n,r){le(this,"gasPrice");le(this,"maxFeePerGas");le(this,"maxPriorityFeePerGas");Jt(this,{gasPrice:vv(e),maxFeePerGas:vv(n),maxPriorityFeePerGas:vv(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Xs(e),maxFeePerGas:Xs(n),maxPriorityFeePerGas:Xs(r)}}}function Gk(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=rt(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=Ct(t[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=Ln(t[s],`request.${s}`));return t.accessList&&(e.accessList=Aw(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>hF(s)?rt(s):Object.assign({},s))),e}var Yh;class gst{constructor(e,n){le(this,"provider");le(this,"number");le(this,"hash");le(this,"timestamp");le(this,"parentHash");le(this,"parentBeaconBlockRoot");le(this,"nonce");le(this,"difficulty");le(this,"gasLimit");le(this,"gasUsed");le(this,"stateRoot");le(this,"receiptsRoot");le(this,"blobGasUsed");le(this,"excessBlobGas");le(this,"miner");le(this,"prevRandao");le(this,"extraData");le(this,"baseFeePerGas");ne(this,Yh);q(this,Yh,e.transactions.map(r=>typeof r!="string"?new zS(r,n):r)),Jt(this,{provider:n,hash:vv(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:vv(e.prevRandao),extraData:e.extraData,baseFeePerGas:vv(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return R(this,Yh).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=R(this,Yh).slice();return e.length===0?[]:(ke(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,timestamp:g,transactions:m}=this;return{_type:"Block",baseFeePerGas:Xs(e),difficulty:Xs(n),extraData:r,gasLimit:Xs(s),gasUsed:Xs(i),blobGasUsed:Xs(this.blobGasUsed),excessBlobGas:Xs(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,timestamp:g,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,transactions:m}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return R(this,Yh).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=R(this,Yh)[e];else{const r=e.toLowerCase();for(const s of R(this,Yh))if(typeof s=="string"){if(s!==r)continue;n=s;break}else{if(s.hash!==r)continue;n=s;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;oe(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return mst(this)}}Yh=new WeakMap;class gN{constructor(e,n){le(this,"provider");le(this,"transactionHash");le(this,"blockHash");le(this,"blockNumber");le(this,"removed");le(this,"address");le(this,"data");le(this,"topics");le(this,"index");le(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());Jt(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return ke(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return ke(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return ke(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return yst(this)}}var eI;class _le{constructor(e,n){le(this,"provider");le(this,"to");le(this,"from");le(this,"contractAddress");le(this,"hash");le(this,"index");le(this,"blockHash");le(this,"blockNumber");le(this,"logsBloom");le(this,"gasUsed");le(this,"blobGasUsed");le(this,"cumulativeGasUsed");le(this,"gasPrice");le(this,"blobGasPrice");le(this,"type");le(this,"status");le(this,"root");ne(this,eI);q(this,eI,Object.freeze(e.logs.map(s=>new gN(s,n))));let r=Cle;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),Jt(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return R(this,eI)}toJSON(){const{to:e,from:n,contractAddress:r,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:Xs(this.cumulativeGasUsed),from:n,gasPrice:Xs(this.gasPrice),blobGasUsed:Xs(this.blobGasUsed),blobGasPrice:Xs(this.blobGasPrice),gasUsed:Xs(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:d,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Sle(this)}reorderedEvent(e){return ke(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Ale(this,e)}}eI=new WeakMap;var rg;const OF=class OF{constructor(e,n){le(this,"provider");le(this,"blockNumber");le(this,"blockHash");le(this,"index");le(this,"hash");le(this,"type");le(this,"to");le(this,"from");le(this,"nonce");le(this,"gasLimit");le(this,"gasPrice");le(this,"maxPriorityFeePerGas");le(this,"maxFeePerGas");le(this,"maxFeePerBlobGas");le(this,"data");le(this,"value");le(this,"chainId");le(this,"signature");le(this,"accessList");le(this,"blobVersionedHashes");le(this,"authorizationList");ne(this,rg);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,q(this,rg,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:s,type:i,to:o,from:a,nonce:c,data:l,signature:u,accessList:d,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:n,blobVersionedHashes:h,chainId:Xs(this.chainId),data:l,from:a,gasLimit:Xs(this.gasLimit),gasPrice:Xs(this.gasPrice),hash:s,maxFeePerGas:Xs(this.maxFeePerGas),maxPriorityFeePerGas:Xs(this.maxPriorityFeePerGas),maxFeePerBlobGas:Xs(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:r,type:i,value:Xs(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await ea({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,s=n??0;let i=R(this,rg),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:h,nonce:f}=await ea({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(f<this.nonce){i=h;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(o===-1&&(o=i-3,o<R(this,rg)&&(o=R(this,rg)));o<=h;){if(a)return null;const g=await this.provider.getBlock(o,!0);if(g==null)return;for(const m of g)if(m===this.hash)return;for(let m=0;m<g.length;m++){const y=await g.getTransaction(m);if(y.from===this.from&&y.nonce===this.nonce){if(a)return null;const w=await this.provider.getTransactionReceipt(y.hash);if(w==null||h-w.blockNumber+1<r)return;let C="replaced";y.data===this.data&&y.to===this.to&&y.value===this.value?C="repriced":y.data==="0x"&&y.from===y.to&&y.value===Cle&&(C="cancelled"),ke(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:C==="replaced"||C==="cancelled",reason:C,replacement:y.replaceableTransaction(i),hash:y.hash,receipt:w})}}o++}},l=h=>{if(h==null||h.status!==0)return h;ke(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:h.to,from:h.from,data:""},receipt:h})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(r===1||await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((h,f)=>{const p=[],g=()=>{p.forEach(y=>y())};if(p.push(()=>{a=!0}),s>0){const y=setTimeout(()=>{g(),f(_s("wait for transaction timeout","TIMEOUT"))},s);p.push(()=>{clearTimeout(y)})}const m=async y=>{if(await y.confirmations()>=r){g();try{h(l(y))}catch(w){f(w)}}};if(p.push(()=>{this.provider.off(this.hash,m)}),this.provider.on(this.hash,m),i>=0){const y=async()=>{try{await c()}catch(w){if(uo(w,"TRANSACTION_REPLACED")){g(),f(w);return}}a||this.provider.once("block",y)};p.push(()=>{this.provider.off("block",y)}),this.provider.once("block",y)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return ke(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Sle(this)}reorderedEvent(e){return ke(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ke(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Ale(this,e)}replaceableTransaction(e){oe(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new OF(this,this.provider);return q(n,rg,e),n}};rg=new WeakMap;let zS=OF;function mst(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function Ale(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function Sle(t){return{orphan:"drop-transaction",tx:t}}function yst(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class IF extends gN{constructor(n,r,s){super(n,n.provider);le(this,"interface");le(this,"fragment");le(this,"args");const i=r.decodeEventLog(s,n.data,n.topics);Jt(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Ile extends gN{constructor(n,r){super(n,n.provider);le(this,"error");Jt(this,{error:r})}}var iE;class wst extends _le{constructor(n,r,s){super(s,r);ne(this,iE);q(this,iE,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?R(this,iE).getEvent(n.topics[0]):null;if(r)try{return new IF(n,R(this,iE),r)}catch(s){return new Ile(n,s)}return n})}}iE=new WeakMap;var tI;class NF extends zS{constructor(n,r,s){super(s,r);ne(this,tI);q(this,tI,n)}async wait(n,r){const s=await super.wait(n,r);return s==null?null:new wst(R(this,tI),this.provider,s)}}tI=new WeakMap;class Nle extends Xae{constructor(n,r,s,i){super(n,r,s);le(this,"log");Jt(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class bst extends Nle{constructor(e,n,r,s,i){super(e,n,r,new IF(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);Jt(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const gK=BigInt(0);function xle(t){return t&&typeof t.call=="function"}function Tle(t){return t&&typeof t.estimateGas=="function"}function mO(t){return t&&typeof t.resolveName=="function"}function Rle(t){return t&&typeof t.sendTransaction=="function"}function kle(t){if(t!=null){if(mO(t))return t;if(t.provider)return t.provider}}var nI;class vst{constructor(e,n,r){ne(this,nI);le(this,"fragment");if(Jt(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const s=ew(e.runner,"resolveName"),i=mO(s)?s:null;q(this,nI,async function(){const o=await Promise.all(n.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(u,d)=>u==="address"?Array.isArray(d)?Promise.all(d.map(h=>da(h,i))):da(d,i):d)));return e.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return R(this,nI)}}nI=new WeakMap;function ew(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function Ry(t){return t==null?null:t.provider||null}async function Ple(t,e){const n=Fo.dereference(t,"overrides");oe(typeof n=="object","invalid overrides parameter","overrides",t);const r=Gk(n);return oe(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),oe(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function Est(t,e,n){const r=ew(t,"resolveName"),s=mO(r)?r:null;return await Promise.all(e.map((i,o)=>i.walkAsync(n[o],(a,c)=>(c=Fo.dereference(c,a),a==="address"?da(c,s):c))))}function Cst(t){const e=async function(o){const a=await Ple(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await da(a.from,kle(t.runner)));const c=t.interface,l=Ct(a.value||gK,"overrides.value")===gK,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&oe(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),oe(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const d=c.receive||c.fallback&&c.fallback.payable;return oe(d||l,"cannot send value to non-payable fallback","overrides.value",a.value),oe(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=ew(t.runner,"call");ke(xle(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(l){throw dF(l)&&l.data?t.interface.makeError(l.data,c):l}},r=async function(o){const a=t.runner;ke(Rle(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),l=Ry(t.runner);return new NF(t.interface,l,c)},s=async function(o){const a=ew(t.runner,"estimateGas");return ke(Tle(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await r(o);return Jt(i,{_contract:t,estimateGas:s,populateTransaction:e,send:r,staticCall:n}),i}function _st(t,e){const n=function(...l){const u=t.interface.getFunction(e,l);return ke(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){const u=n(...l);let d={};if(u.inputs.length+1===l.length&&(d=await Ple(l.pop()),d.from&&(d.from=await da(d.from,kle(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const h=await Est(t.runner,u.inputs,l);return Object.assign({},d,await ea({to:t.getAddress(),data:t.interface.encodeFunctionData(u,h)}))},s=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},i=async function(...l){const u=t.runner;ke(Rle(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await u.sendTransaction(await r(...l)),h=Ry(t.runner);return new NF(t.interface,h,d)},o=async function(...l){const u=ew(t.runner,"estimateGas");return ke(Tle(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},a=async function(...l){const u=ew(t.runner,"call");ke(xle(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...l);let h="0x";try{h=await u.call(d)}catch(p){throw dF(p)&&p.data?t.interface.makeError(p.data,d):p}const f=n(...l);return t.interface.decodeFunctionResult(f,h)},c=async(...l)=>n(...l).constant?await s(...l):await i(...l);return Jt(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return ke(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function Ast(t,e){const n=function(...s){const i=t.interface.getEvent(e,s);return ke(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new vst(t,n(...s),s)};return Jt(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return ke(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const qk=Symbol.for("_ethersInternal_contract"),Ole=new WeakMap;function Sst(t,e){Ole.set(t[qk],e)}function Ic(t){return Ole.get(t[qk])}function Ist(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function xF(t,e){let n,r=null;if(Array.isArray(e)){const i=function(o){if(cs(o,32))return o;const a=t.interface.getEvent(o);return oe(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?n=[null]:typeof e=="string"?cs(e,32)?n=[e]:(r=t.interface.getEvent(e),oe(r,"unknown fragment","event",e),n=[r.topicHash]):Ist(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):oe(!1,"unknown event name","event",e);n=n.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=n.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:n}}async function h_(t,e){const{subs:n}=Ic(t);return n.get((await xF(t,e)).tag)||null}async function mK(t,e,n){const r=Ry(t.runner);ke(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await xF(t,n),{addr:a,subs:c}=Ic(t);let l=c.get(i);if(!l){const d={address:a||t,topics:o},h=m=>{let y=s;if(y==null)try{y=t.interface.getEvent(m.topics[0])}catch{}if(y){const w=y,C=s?t.interface.decodeEventLog(s,m.data,m.topics):[];d6(t,n,C,N=>new bst(t,N,n,w,m))}else d6(t,n,[],w=>new Nle(t,w,n,m))};let f=[];l={tag:i,listeners:[],start:()=>{f.length||f.push(r.on(d,h))},stop:async()=>{if(f.length==0)return;let m=f;f=[],await Promise.all(m),r.off(d,h)}},c.set(i,l)}return l}let u6=Promise.resolve();async function Nst(t,e,n,r){await u6;const s=await h_(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(n);r&&c.push(r(a?null:o));try{o.call(t,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),Ic(t).subs.delete(s.tag)),i>0}async function d6(t,e,n,r){try{await u6}catch{}const s=Nst(t,e,n,r);return u6=s,await s}const Gx=["then"];var FK;FK=qk;const J_=class J_{constructor(e,n,r,s){le(this,"target");le(this,"interface");le(this,"runner");le(this,"filters");le(this,FK);le(this,"fallback");oe(typeof e=="string"||Uce(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=l6.from(n);Jt(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,qk,{value:{}});let o,a=null,c=null;if(s){const d=Ry(r);c=new NF(this.interface,d,s)}let l=new Map;if(typeof e=="string")if(cs(e))a=e,o=Promise.resolve(e);else{const d=ew(r,"resolveName");if(!mO(d))throw _s("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(e).then(h=>{if(h==null)throw _s("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Ic(this).addr=h,h})}else o=e.getAddress().then(d=>{if(d==null)throw new Error("TODO");return Ic(this).addr=d,d});Sst(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(d,h,f)=>{if(typeof h=="symbol"||Gx.indexOf(h)>=0)return Reflect.get(d,h,f);try{return this.getEvent(h)}catch(p){if(!uo(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>Gx.indexOf(h)>=0?Reflect.has(d,h):Reflect.has(d,h)||this.interface.hasEvent(String(h))});return Jt(this,{filters:u}),Jt(this,{fallback:i.receive||i.fallback?Cst(this):null}),new Proxy(this,{get:(d,h,f)=>{if(typeof h=="symbol"||h in d||Gx.indexOf(h)>=0)return Reflect.get(d,h,f);try{return d.getFunction(h)}catch(p){if(!uo(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>typeof h=="symbol"||h in d||Gx.indexOf(h)>=0?Reflect.has(d,h):d.interface.hasFunction(h)})}connect(e){return new J_(this.target,this.interface,e)}attach(e){return new J_(e,this.interface,this.runner)}async getAddress(){return await Ic(this).addrPromise}async getDeployedCode(){const e=Ry(this.runner);ke(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Ry(this.runner);return ke(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return Ic(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),_st(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),Ast(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=Ic(this),o=s||await i,{fragment:a,topics:c}=await xF(this,e),l={address:o,topics:c,fromBlock:n,toBlock:r},u=Ry(this.runner);return ke(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(d=>{let h=a;if(h==null)try{h=this.interface.getEvent(d.topics[0])}catch{}if(h)try{return new IF(d,this.interface,h)}catch(f){return new Ile(d,f)}return new gN(d,u)})}async on(e,n){const r=await mK(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await mK(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await d6(this,e,n,null)}async listenerCount(e){if(e){const s=await h_(this,e);return s?s.listeners.length:0}const{subs:n}=Ic(this);let r=0;for(const{listeners:s}of n.values())r+=s.length;return r}async listeners(e){if(e){const s=await h_(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:n}=Ic(this);let r=[];for(const{listeners:s}of n.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,n){const r=await h_(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(n==null||r.listeners.length===0)&&(r.stop(),Ic(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await h_(this,e);if(!n)return this;n.stop(),Ic(this).subs.delete(n.tag)}else{const{subs:n}=Ic(this);for(const{tag:r,stop:s}of n.values())s(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends J_{constructor(s,i=null){super(s,e,i)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let h6=J_;function xst(){return h6}class Ev extends xst(){}function BM(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):oe(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class Tst{constructor(e){le(this,"name");Jt(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const Dle=new RegExp("^(ipfs)://(.*)$","i"),yK=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Dle,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var sg,Zy,ig,Sb,Zk,Mle;const Qb=class Qb{constructor(e,n,r){ne(this,ig);le(this,"provider");le(this,"address");le(this,"name");ne(this,sg);ne(this,Zy);Jt(this,{provider:e,address:n,name:r}),q(this,sg,null),q(this,Zy,new Ev(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return R(this,sg)==null&&q(this,sg,(async()=>{try{return await R(this,Zy).supportsInterface("0x9061b923")}catch(e){if(uo(e,"CALL_EXCEPTION"))return!1;throw q(this,sg,null),e}})()),await R(this,sg)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await Ie(this,ig,Sb).call(this,"addr(bytes32)");return i==null||i===MS?null:i}catch(i){if(uo(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await Ie(this,ig,Sb).call(this,"addr(bytes32,uint)",[i]);if(cs(o,20))return Ar(o)}let n=null;for(const i of this.provider.plugins)if(i instanceof Tst&&i.supportsCoinType(e)){n=i;break}if(n==null)return null;const r=await Ie(this,ig,Sb).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const s=await n.decodeAddress(e,r);if(s!=null)return s;ke(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await Ie(this,ig,Sb).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await Ie(this,ig,Sb).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const s=n[1]==="e3010170"?"ipfs":"ipns",i=parseInt(n[4],16);if(n[5].length===i*2)return`${s}://${Let("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;ke(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<yK.length;r++){const s=n.match(yK[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=BM(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const l=c[1],u=new Ev(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const g=await u.ownerOf(l);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(i==="erc1155"){const g=await u.balanceOf(a,l);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let d=await u[o](l);if(d==null||d==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),i==="erc1155"&&(d=d.replace("{id}",gm(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=BM(d)),e.push({type:"metadata-url",value:d});let h={};const f=await new mm(d).send();f.assertOk();try{h=f.bodyJson}catch{try{e.push({type:"!metadata",value:f.bodyText})}catch{const y=f.body;return y&&e.push({type:"!metadata",value:rt(y)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!h)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(h)});let p=h.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(Dle)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=BM(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return ke(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var s;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await Ie(s=Qb,Zk,Mle).call(s,e,r);if(i!=null){const o=new Qb(e,i,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};sg=new WeakMap,Zy=new WeakMap,ig=new WeakSet,Sb=async function(e,n){n=(n||[]).slice();const r=R(this,Zy).interface;n.unshift(a6(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),ke(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[Hrt(this.name,255),r.encodeFunctionData(s,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const i=await R(this,Zy)[e](...n);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!uo(i,"CALL_EXCEPTION"))throw i}return null},Zk=new WeakSet,Mle=async function(e,n){const r=await Qb.getEnsAddress(e);try{const i=await new Ev(r,["function resolver(bytes32) view returns (address)"],e).resolver(a6(n),{enableCcipRead:!0});return i===MS?null:i}catch(s){throw s}return null},ne(Qb,Zk);let Vk=Qb;const wK=BigInt(0);function Kn(t,e){return function(n){return n==null?e:t(n)}}function HS(t,e){return n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))}}function mN(t,e){return n=>{const r={};for(const s in t){let i=s;if(e&&s in e&&!(i in n)){for(const o of e[s])if(o in n){i=o;break}}try{const o=t[s](n[i]);o!==void 0&&(r[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";ke(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:n})}}return r}}function Rst(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}oe(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function fC(t){return oe(cs(t,!0),"invalid data","value",t),t}function lo(t){return oe(cs(t,32),"invalid hash","value",t),t}const kst=mN({address:Ar,blockHash:lo,blockNumber:Ln,data:fC,index:Ln,removed:Kn(Rst,!1),topics:HS(lo),transactionHash:lo,transactionIndex:Ln},{index:["logIndex"]});function Pst(t){return kst(t)}const Ost=mN({hash:Kn(lo),parentHash:lo,parentBeaconBlockRoot:Kn(lo,null),number:Ln,timestamp:Ln,nonce:Kn(fC),difficulty:Ct,gasLimit:Ct,gasUsed:Ct,stateRoot:Kn(lo,null),receiptsRoot:Kn(lo,null),blobGasUsed:Kn(Ct,null),excessBlobGas:Kn(Ct,null),miner:Kn(Ar),prevRandao:Kn(lo,null),extraData:fC,baseFeePerGas:Kn(Ct)},{prevRandao:["mixHash"]});function Dst(t){const e=Ost(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:Ble(n)),e}const Mst=mN({transactionIndex:Ln,blockNumber:Ln,transactionHash:lo,address:Ar,topics:HS(lo),data:fC,index:Ln,blockHash:lo},{index:["logIndex"]});function Bst(t){return Mst(t)}const Lst=mN({to:Kn(Ar,null),from:Kn(Ar,null),contractAddress:Kn(Ar,null),index:Ln,root:Kn(rt),gasUsed:Ct,blobGasUsed:Kn(Ct,null),logsBloom:Kn(fC),blockHash:lo,hash:lo,logs:HS(Bst),blockNumber:Ln,cumulativeGasUsed:Ct,effectiveGasPrice:Kn(Ct),blobGasPrice:Kn(Ct,null),status:Kn(Ln),type:Kn(Ln,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function Ust(t){return Lst(t)}function Ble(t){t.to&&Ct(t.to)===wK&&(t.to="0x0000000000000000000000000000000000000000");const e=mN({hash:lo,index:Kn(Ln,void 0),type:n=>n==="0x"||n==null?0:Ln(n),accessList:Kn(Aw,null),blobVersionedHashes:Kn(HS(lo,!0),null),authorizationList:Kn(HS(n=>{let r;if(n.signature)r=n.signature;else{let s=n.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},n,{yParity:s})}return{address:Ar(n.address),chainId:Ct(n.chainId),nonce:Ct(n.nonce),signature:ac.from(r)}},!1),null),blockHash:Kn(lo,null),blockNumber:Kn(Ln,null),transactionIndex:Kn(Ln,null),from:Ar,gasPrice:Kn(Ct),maxPriorityFeePerGas:Kn(Ct),maxFeePerGas:Kn(Ct),maxFeePerBlobGas:Kn(Ct,null),gasLimit:Ct,to:Kn(Ar,null),value:Ct,nonce:Ln,data:fC,creates:Kn(Ar,null),chainId:Kn(Ct,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=Int(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=ac.from(t.signature):e.signature=ac.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&Ct(e.blockHash)===wK&&(e.blockHash=null),e}const $st="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class yN{constructor(e){le(this,"name");Jt(this,{name:e})}clone(){return new yN(this.name)}}class yO extends yN{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);le(this,"effectiveBlock");le(this,"txBase");le(this,"txCreate");le(this,"txDataZero");le(this,"txDataNonzero");le(this,"txAccessListStorageKey");le(this,"txAccessListAddress");const s={effectiveBlock:n};function i(o,a){let c=(r||{})[o];c==null&&(c=a),oe(typeof c=="number",`invalud value for ${o}`,"costs",r),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),Jt(this,s)}clone(){return new yO(this.effectiveBlock,this)}}class wO extends yN{constructor(n,r){super("org.ethers.plugins.network.Ens");le(this,"address");le(this,"targetNetwork");Jt(this,{address:n||$st,targetNetwork:r??1})}clone(){return new wO(this.address,this.targetNetwork)}}var rI,sI;class Fst extends yN{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");ne(this,rI);ne(this,sI);q(this,rI,n),q(this,sI,r)}get url(){return R(this,rI)}get processFunc(){return R(this,sI)}clone(){return this}}rI=new WeakMap,sI=new WeakMap;const LM=new Map;var oE,aE,og;const Jb=class Jb{constructor(e,n){ne(this,oE);ne(this,aE);ne(this,og);q(this,oE,e),q(this,aE,Ct(n)),q(this,og,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return R(this,oE)}set name(e){q(this,oE,e)}get chainId(){return R(this,aE)}set chainId(e){q(this,aE,Ct(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Ct(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Ct(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Ct(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(R(this,og).values())}attachPlugin(e){if(R(this,og).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return R(this,og).set(e.name,e.clone()),this}getPlugin(e){return R(this,og).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new Jb(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new yO;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const s=Aw(e.accessList);for(const i in s)r+=n.txAccessListAddress+n.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(e){if(jst(),e==null)return Jb.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=LM.get(e);if(n)return n();if(typeof e=="bigint")return new Jb("unknown",e);oe(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){oe(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new Jb(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new wO(e.ensAddress,e.ensNetwork)),n}oe(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=LM.get(e);r&&oe(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),LM.set(e,n)}};oE=new WeakMap,aE=new WeakMap,og=new WeakMap;let zd=Jb;function bK(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function vK(t){return new Fst(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([r.send(),e()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:bK(a.maxFee,9),maxPriorityFeePerGas:bK(a.maxPriorityFee,9)}}catch(i){ke(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let EK=!1;function jst(){if(EK)return;EK=!0;function t(e,n,r){const s=function(){const i=new zd(e,n);return r.ensNetwork!=null&&i.attachPlugin(new wO(null,r.ensNetwork)),i.attachPlugin(new yO),(r.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};zd.register(e,s),zd.register(n,s),r.altNames&&r.altNames.forEach(i=>{zd.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[vK("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[vK("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function f6(t){return JSON.parse(JSON.stringify(t))}var Qh,Cl,ag,Nd,cE,HT;class Wst{constructor(e){ne(this,cE);ne(this,Qh);ne(this,Cl);ne(this,ag);ne(this,Nd);q(this,Qh,e),q(this,Cl,null),q(this,ag,4e3),q(this,Nd,-2)}get pollingInterval(){return R(this,ag)}set pollingInterval(e){q(this,ag,e)}start(){R(this,Cl)||(q(this,Cl,R(this,Qh)._setTimeout(Ie(this,cE,HT).bind(this),R(this,ag))),Ie(this,cE,HT).call(this))}stop(){R(this,Cl)&&(R(this,Qh)._clearTimeout(R(this,Cl)),q(this,Cl,null))}pause(e){this.stop(),e&&q(this,Nd,-2)}resume(){this.start()}}Qh=new WeakMap,Cl=new WeakMap,ag=new WeakMap,Nd=new WeakMap,cE=new WeakSet,HT=async function(){try{const e=await R(this,Qh).getBlockNumber();if(R(this,Nd)===-2){q(this,Nd,e);return}if(e!==R(this,Nd)){for(let n=R(this,Nd)+1;n<=e;n++){if(R(this,Cl)==null)return;await R(this,Qh).emit("block",n)}q(this,Nd,e)}}catch{}R(this,Cl)!=null&&q(this,Cl,R(this,Qh)._setTimeout(Ie(this,cE,HT).bind(this),R(this,ag)))};var Xy,e0,cg;class TF{constructor(e){ne(this,Xy);ne(this,e0);ne(this,cg);q(this,Xy,e),q(this,cg,!1),q(this,e0,n=>{this._poll(n,R(this,Xy))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){R(this,cg)||(q(this,cg,!0),R(this,e0).call(this,-2),R(this,Xy).on("block",R(this,e0)))}stop(){R(this,cg)&&(q(this,cg,!1),R(this,Xy).off("block",R(this,e0)))}pause(e){this.stop()}resume(){this.start()}}Xy=new WeakMap,e0=new WeakMap,cg=new WeakMap;var lE,Jh;class zst extends TF{constructor(n,r){super(n);ne(this,lE);ne(this,Jh);q(this,lE,r),q(this,Jh,-2)}pause(n){n&&q(this,Jh,-2),super.pause(n)}async _poll(n,r){const s=await r.getBlock(R(this,lE));s!=null&&(R(this,Jh)===-2?q(this,Jh,s.number):s.number>R(this,Jh)&&(r.emit(R(this,lE),s.number),q(this,Jh,s.number)))}}lE=new WeakMap,Jh=new WeakMap;var Xk;class Hst extends TF{constructor(n,r){super(n);ne(this,Xk);q(this,Xk,f6(r))}async _poll(n,r){throw new Error("@TODO")}}Xk=new WeakMap;var uE;class Gst extends TF{constructor(n,r){super(n);ne(this,uE);q(this,uE,r)}async _poll(n,r){const s=await r.getTransactionReceipt(R(this,uE));s&&r.emit(R(this,uE),s)}}uE=new WeakMap;var Zh,dE,hE,lg,_l,e2,Lle;class RF{constructor(e,n){ne(this,e2);ne(this,Zh);ne(this,dE);ne(this,hE);ne(this,lg);ne(this,_l);q(this,Zh,e),q(this,dE,f6(n)),q(this,hE,Ie(this,e2,Lle).bind(this)),q(this,lg,!1),q(this,_l,-2)}start(){R(this,lg)||(q(this,lg,!0),R(this,_l)===-2&&R(this,Zh).getBlockNumber().then(e=>{q(this,_l,e)}),R(this,Zh).on("block",R(this,hE)))}stop(){R(this,lg)&&(q(this,lg,!1),R(this,Zh).off("block",R(this,hE)))}pause(e){this.stop(),e&&q(this,_l,-2)}resume(){this.start()}}Zh=new WeakMap,dE=new WeakMap,hE=new WeakMap,lg=new WeakMap,_l=new WeakMap,e2=new WeakSet,Lle=async function(e){if(R(this,_l)===-2)return;const n=f6(R(this,dE));n.fromBlock=R(this,_l)+1,n.toBlock=e;const r=await R(this,Zh).getLogs(n);if(r.length===0){R(this,_l)<e-60&&q(this,_l,e-60);return}for(const s of r)R(this,Zh).emit(R(this,dE),s),q(this,_l,s.blockNumber)};const qst=BigInt(2),Vst=10;function qx(t){return t&&typeof t.then=="function"}function GT(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,o)=>(i[o]=r[o],i),{})}return r})}class Ule{constructor(e){le(this,"name");Jt(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function Kst(t){return JSON.parse(JSON.stringify(t))}function p6(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function UM(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(cs(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:GT("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:GT("orphan",n),filter:Kst(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(s=>s==null?null:Array.isArray(s)?p6(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(n.address){const s=[],i=[],o=a=>{cs(a)?s.push(a):i.push((async()=>{s.push(await da(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),i.length&&await Promise.all(i),r.address=p6(s.map(a=>a.toLowerCase()))}return{filter:r,tag:GT("event",r),type:"event"}}oe(!1,"unknown ProviderEvent","event",t)}function $M(){return new Date().getTime()}const Yst={cacheTimeout:250,pollingInterval:4e3};var Do,ug,Mo,fE,Rc,t0,dg,Xh,iI,Al,pE,gE,On,_c,g6,m6,f_,y6,p_,qT;class Qst{constructor(e,n){ne(this,On);ne(this,Do);ne(this,ug);ne(this,Mo);ne(this,fE);ne(this,Rc);ne(this,t0);ne(this,dg);ne(this,Xh);ne(this,iI);ne(this,Al);ne(this,pE);ne(this,gE);if(q(this,gE,Object.assign({},Yst,n||{})),e==="any")q(this,t0,!0),q(this,Rc,null);else if(e){const r=zd.from(e);q(this,t0,!1),q(this,Rc,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else q(this,t0,!1),q(this,Rc,null);q(this,Xh,-1),q(this,dg,new Map),q(this,Do,new Map),q(this,ug,new Map),q(this,Mo,null),q(this,fE,!1),q(this,iI,1),q(this,Al,new Map),q(this,pE,!1)}get pollingInterval(){return R(this,gE).pollingInterval}get provider(){return this}get plugins(){return Array.from(R(this,ug).values())}attachPlugin(e){if(R(this,ug).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return R(this,ug).set(e.name,e.connect(this)),this}getPlugin(e){return R(this,ug).get(e)||null}get disableCcipRead(){return R(this,pE)}set disableCcipRead(e){q(this,pE,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const c=r[a],l=c.replace("{sender}",s).replace("{data}",i),u=new mm(l);c.indexOf("{data}")===-1&&(u.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let d="unknown error",h;try{h=await u.send()}catch(f){o.push(f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:f}});continue}try{const f=h.bodyJson;if(f.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:f}),f.data;f.message&&(d=f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:f})}catch{}ke(h.statusCode<400||h.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:d}}),o.push(d)}ke(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new gst(Dst(e),this)}_wrapLog(e,n){return new gN(Pst(e),this)}_wrapTransactionReceipt(e,n){return new _le(Ust(e),this)}_wrapTransactionResponse(e,n){return new zS(Ble(e),this)}_detectNetwork(){ke(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){ke(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Ln(await Ie(this,On,_c).call(this,{method:"getBlockNumber"}),"%response");return R(this,Xh)>=0&&q(this,Xh,e),e}_getAddress(e){return da(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(cs(e))return cs(e,32)?e:xu(e);if(typeof e=="bigint"&&(e=Ln(e,"blockTag")),typeof e=="number")return e>=0?xu(e):R(this,Xh)>=0?xu(R(this,Xh)+e):this.getBlockNumber().then(n=>xu(n+e));oe(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?p6(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(c,l,u)=>{let d;switch(c.length){case 0:break;case 1:d=c[0];break;default:c.sort(),d=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");const h={};return d&&(h.address=d),n.length&&(h.topics=n),l&&(h.fromBlock=l),u&&(h.toBlock=u),r&&(h.blockHash=r),h};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(e){const n=Gk(e),r=[];if(["to","from"].forEach(s=>{if(n[s]==null)return;const i=da(n[s],this);qx(i)?r.push(async function(){n[s]=await i}()):n[s]=i}),n.blockTag!=null){const s=this._getBlockTag(n.blockTag);qx(s)?r.push(async function(){n.blockTag=await s}()):n.blockTag=s}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(R(this,Rc)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw R(this,Rc)===s&&q(this,Rc,null),i}})();return q(this,Rc,s),(await s).clone()}const e=R(this,Rc),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(R(this,t0)?(this.emit("network",r,n),R(this,Rc)===e&&q(this,Rc,Promise.resolve(r))):ke(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await ea({_block:Ie(this,On,y6).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await Ie(this,On,_c).call(this,{method:"getGasPrice"});return Ct(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await Ie(this,On,_c).call(this,{method:"getPriorityFee"});return Ct(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(s,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*qst+c),new pK(i,a,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new mm(r.url),i=await r.processFunc(n,this,s);return new pK(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return qx(n)&&(n=await n),Ct(await Ie(this,On,_c).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await ea({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await Ie(this,On,m6).call(this,Ie(this,On,g6).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return Ct(await Ie(this,On,f_).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return Ln(await Ie(this,On,f_).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return rt(await Ie(this,On,f_).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const s=Ct(n,"position");return rt(await Ie(this,On,f_).call(this,{method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:s}=await ea({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=Uk.from(e);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:s}=await ea({network:this.getNetwork(),params:Ie(this,On,y6).call(this,e,!!n)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:n,params:r}=await ea({network:this.getNetwork(),params:Ie(this,On,_c).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await ea({network:this.getNetwork(),params:Ie(this,On,_c).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await Ie(this,On,_c).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await ea({network:this.getNetwork(),result:Ie(this,On,_c).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:rt(n)}async getLogs(e){let n=this._getFilter(e);qx(n)&&(n=await n);const{network:r,params:s}=await ea({network:this.getNetwork(),params:Ie(this,On,_c).call(this,{method:"getLogs",filter:n})});return s.map(i=>this._wrapLog(i,r))}_getProvider(e){ke(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await Vk.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=Ar(e);const n=a6(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await Vk.getEnsAddress(this),i=await new Ev(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(i==null||i===MS)return null;const a=await new Ev(i,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(uo(r,"BAD_DATA")&&r.value==="0x"||uo(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const s=n??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const c=async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=s){i(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(_s("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){ke(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=R(this,Al).get(e);n&&(n.timer&&clearTimeout(n.timer),R(this,Al).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=Qf(this,iI)._++,s=()=>{R(this,Al).delete(r),e()};if(this.paused)R(this,Al).set(r,{timer:null,func:s,time:n});else{const i=setTimeout(s,n);R(this,Al).set(r,{timer:i,func:s,time:$M()})}return r}_forEachSubscriber(e){for(const n of R(this,Do).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new Ule(e.type);case"block":{const n=new Wst(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new zst(this,e.type);case"event":return new RF(this,e.filter);case"transaction":return new Gst(this,e.hash);case"orphan":return new Hst(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of R(this,Do).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),R(this,Mo)!=null&&n.pause(R(this,Mo));break}}async on(e,n){const r=await Ie(this,On,qT).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,R(this,Mo)!=null&&r.subscriber.pause(R(this,Mo))),this}async once(e,n){const r=await Ie(this,On,qT).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,R(this,Mo)!=null&&r.subscriber.pause(R(this,Mo))),this}async emit(e,...n){const r=await Ie(this,On,p_).call(this,e,n);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:o})=>{const a=new Xae(this,o?null:i,e);try{i.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),R(this,Do).delete(r.tag)),s>0}async listenerCount(e){if(e){const r=await Ie(this,On,p_).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of R(this,Do).values())n+=r.length;return n}async listeners(e){if(e){const r=await Ie(this,On,p_).call(this,e);return r?r.listeners.map(({listener:s})=>s):[]}let n=[];for(const{listeners:r}of R(this,Do).values())n=n.concat(r.map(({listener:s})=>s));return n}async off(e,n){const r=await Ie(this,On,p_).call(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),R(this,Do).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:s}=await Ie(this,On,qT).call(this,e);r&&s.stop(),R(this,Do).delete(n)}else for(const[n,{started:r,subscriber:s}]of R(this,Do))r&&s.stop(),R(this,Do).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return R(this,fE)}destroy(){this.removeAllListeners();for(const e of R(this,Al).keys())this._clearTimeout(e);q(this,fE,!0)}get paused(){return R(this,Mo)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(q(this,Xh,-1),R(this,Mo)!=null){if(R(this,Mo)==!!e)return;ke(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),q(this,Mo,!!e);for(const n of R(this,Al).values())n.timer&&clearTimeout(n.timer),n.time=$M()-n.time}resume(){if(R(this,Mo)!=null){this._forEachSubscriber(e=>e.resume()),q(this,Mo,null);for(const e of R(this,Al).values()){let n=e.time;n<0&&(n=0),e.time=$M(),setTimeout(e.func,n)}}}}Do=new WeakMap,ug=new WeakMap,Mo=new WeakMap,fE=new WeakMap,Rc=new WeakMap,t0=new WeakMap,dg=new WeakMap,Xh=new WeakMap,iI=new WeakMap,Al=new WeakMap,pE=new WeakMap,gE=new WeakMap,On=new WeakSet,_c=async function(e){const n=R(this,gE).cacheTimeout;if(n<0)return await this._perform(e);const r=GT(e.method,e);let s=R(this,dg).get(r);return s||(s=this._perform(e),R(this,dg).set(r,s),setTimeout(()=>{R(this,dg).get(r)===s&&R(this,dg).delete(r)},n)),await s},g6=async function(e,n,r){ke(r<Vst,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const s=Gk(e);try{return rt(await this._perform({method:"call",transaction:s,blockTag:n}))}catch(i){if(!this.disableCcipRead&&dF(i)&&i.data&&r>=0&&n==="latest"&&s.to!=null&&zs(i.data,0,4)==="0x556f1830"){const o=i.data,a=await da(s.to,this);let c;try{c=tit(zs(i.data,4))}catch(d){ke(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}ke(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(s,c.calldata,c.urls);ke(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const u={to:a,data:Vs([c.selector,eit([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const d=await Ie(this,On,g6).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:d}),d}}throw i}},m6=async function(e){const{value:n}=await ea({network:this.getNetwork(),value:e});return n},f_=async function(e,n,r){let s=this._getAddress(n),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await Ie(this,On,m6).call(this,Ie(this,On,_c).call(this,Object.assign(e,{address:s,blockTag:i})))},y6=async function(e,n){if(cs(e,32))return await Ie(this,On,_c).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await Ie(this,On,_c).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},p_=async function(e,n){let r=await UM(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await UM({orphan:"drop-log",log:n[0]},this)),R(this,Do).get(r.tag)||null},qT=async function(e){const n=await UM(e,this),r=n.tag;let s=R(this,Do).get(r);return s||(s={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},R(this,Do).set(r,s)),s};function Jst(t,e){try{const n=w6(t,e);if(n)return Bk(n)}catch{}return null}function w6(t,e){if(t==="0x")return null;try{const n=Ln(zs(t,e,e+32)),r=Ln(zs(t,n,n+32));return zs(t,n+32,n+32+r)}catch{}return null}function CK(t){const e=_i(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function Zst(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const Xst=new Uint8Array([]);function eit(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(Xst),n+=32;for(let r=0;r<t.length;r++){const s=Bn(t[r]);e[r]=CK(n),e.push(CK(s.length)),e.push(Zst(s)),n+=32+Math.ceil(s.length/32)*32}return Vs(e)}const _K="0x0000000000000000000000000000000000000000000000000000000000000000";function tit(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};ke(wv(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=zs(t,0,32);ke(zs(n,0,12)===zs(_K,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=zs(n,12);try{const r=[],s=Ln(zs(t,32,64)),i=Ln(zs(t,s,s+32)),o=zs(t,s+32);for(let a=0;a<i;a++){const c=Jst(o,a*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{ke(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=w6(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{ke(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}ke(zs(t,100,128)===zs(_K,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=zs(t,96,100);try{const r=w6(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{ke(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Gm(t,e){if(t.provider)return t.provider;ke(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function AK(t,e){let n=Gk(e);if(n.to!=null&&(n.to=da(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),da(r,t)]).then(([s,i])=>(oe(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else n.from=t.getAddress();return await ea(n)}class nit{constructor(e){le(this,"provider");Jt(this,{provider:e||null})}async getNonce(e){return Gm(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await AK(this,e)}async populateTransaction(e){const n=Gm(this,"populateTransaction"),r=await AK(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const o=Ct(r.chainId);oe(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?oe(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&i&&oe(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();ke(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(ke(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):ke(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await ea(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await Gm(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return Gm(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Gm(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Gm(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=Gm(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=Uk.from(r);return await n.broadcastTransaction(await this.signTransaction(s))}authorize(e){ke(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function rit(t){return JSON.parse(JSON.stringify(t))}var Zo,xd,n0,hg,r0,mE,wm,b6,v6;class $le{constructor(e){ne(this,wm);ne(this,Zo);ne(this,xd);ne(this,n0);ne(this,hg);ne(this,r0);ne(this,mE);q(this,Zo,e),q(this,xd,null),q(this,n0,Ie(this,wm,b6).bind(this)),q(this,hg,!1),q(this,r0,null),q(this,mE,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){R(this,hg)||(q(this,hg,!0),Ie(this,wm,b6).call(this,-2))}stop(){R(this,hg)&&(q(this,hg,!1),q(this,mE,!0),Ie(this,wm,v6).call(this),R(this,Zo).off("block",R(this,n0)))}pause(e){e&&Ie(this,wm,v6).call(this),R(this,Zo).off("block",R(this,n0))}resume(){this.start()}}Zo=new WeakMap,xd=new WeakMap,n0=new WeakMap,hg=new WeakMap,r0=new WeakMap,mE=new WeakMap,wm=new WeakSet,b6=async function(e){try{R(this,xd)==null&&q(this,xd,this._subscribe(R(this,Zo)));let n=null;try{n=await R(this,xd)}catch(i){if(!uo(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(n==null){q(this,xd,null),R(this,Zo)._recoverSubscriber(this,this._recover(R(this,Zo)));return}const r=await R(this,Zo).getNetwork();if(R(this,r0)||q(this,r0,r),R(this,r0).chainId!==r.chainId)throw new Error("chaid changed");if(R(this,mE))return;const s=await R(this,Zo).send("eth_getFilterChanges",[n]);await this._emitResults(R(this,Zo),s)}catch(n){console.log("@TODO",n)}R(this,Zo).once("block",R(this,n0))},v6=function(){const e=R(this,xd);e&&(q(this,xd,null),e.then(n=>{R(this,Zo).destroyed||R(this,Zo).send("eth_uninstallFilter",[n])}))};var s0;class sit extends $le{constructor(n,r){super(n);ne(this,s0);q(this,s0,rit(r))}_recover(n){return new RF(n,R(this,s0))}async _subscribe(n){return await n.send("eth_newFilter",[R(this,s0)])}async _emitResults(n,r){for(const s of r)n.emit(R(this,s0),n._wrapLog(s,n._network))}}s0=new WeakMap;class iit extends $le{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const oit="bigint,boolean,function,number,string,symbol".split(/,/g);function VT(t){if(t==null||oit.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(VT);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function ait(t){return new Promise(e=>{setTimeout(e,t)})}function pb(t){return t&&t.toLowerCase()}function SK(t){return t&&typeof t.pollingInterval=="number"}const Fle={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class FM extends nit{constructor(n,r){super(n);le(this,"address");r=Ar(r),Jt(this,{address:r})}connect(n){ke(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=VT(n),s=[];if(r.from){const o=r.from;s.push((async()=>{const a=await da(o,this.provider);oe(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;s.push((async()=>{r.to=await da(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(n);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const l=async()=>{try{const u=await this.provider.getTransaction(s);if(u!=null){i(u.replaceableTransaction(r));return}}catch(u){if(uo(u,"CANCELLED")||uo(u,"BAD_DATA")||uo(u,"NETWORK_ERROR")||uo(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=s,o(u);return}if(uo(u,"INVALID_ARGUMENT")&&(c++,u.info==null&&(u.info={}),u.info.sendTransactionHash=s,c>10)){o(u);return}this.provider.emit("error",_s("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{l()},a.pop()||4e3)};l()})}async signTransaction(n){const r=VT(n);if(r.from){const i=await da(r.from,this.provider);oe(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(n){const r=typeof n=="string"?Ef(n):n;return await this.provider.send("personal_sign",[rt(r),this.address.toLowerCase()])}async signTypedData(n,r,s){const i=VT(s),o=await Hk.resolveNames(n,r,i,async a=>{const c=await da(a);return oe(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Hk.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?Ef(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),rt(r)])}}var i0,yE,ef,Td,_u,Sl,Fa,oI,E6;class cit extends Qst{constructor(n,r){super(n,r);ne(this,oI);ne(this,i0);ne(this,yE);ne(this,ef);ne(this,Td);ne(this,_u);ne(this,Sl);ne(this,Fa);q(this,yE,1),q(this,i0,Object.assign({},Fle,r||{})),q(this,ef,[]),q(this,Td,null),q(this,Sl,null),q(this,Fa,null);{let i=null;const o=new Promise(a=>{i=a});q(this,_u,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(oe(!s||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&n!=null&&q(this,Sl,zd.from(n))):s&&(oe(n==null||s.matches(n),"staticNetwork MUST match network object","options",r),q(this,Sl,s))}_getOption(n){return R(this,i0)[n]}get _network(){return ke(R(this,Sl),"network is not available yet","NETWORK_ERROR"),R(this,Sl)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let s=n.transaction;if(s&&s.type!=null&&Ct(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(R(this,Sl))return R(this,Sl)}else return n;return R(this,Fa)?await R(this,Fa):this.ready?(q(this,Fa,(async()=>{try{const r=zd.from(Ct(await this.send("eth_chainId",[])));return q(this,Fa,null),r}catch(r){throw q(this,Fa,null),r}})()),await R(this,Fa)):(q(this,Fa,(async()=>{const r={id:Qf(this,yE)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],q(this,Fa,null)}catch(i){throw q(this,Fa,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return zd.from(Ct(s.result));throw this.getRpcError(r,s)})()),await R(this,Fa))}_start(){R(this,_u)==null||R(this,_u).resolve==null||(R(this,_u).resolve(),q(this,_u,null),(async()=>{for(;R(this,Sl)==null&&!this.destroyed;)try{q(this,Sl,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",_s("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await ait(1e3)}Ie(this,oI,E6).call(this)})())}async _waitUntilReady(){if(R(this,_u)!=null)return await R(this,_u).promise}_getSubscriber(n){return n.type==="pending"?new iit(this):n.type==="event"?this._getOption("polling")?new RF(this,n.filter):new sit(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new Ule("orphan"):super._getSubscriber(n)}get ready(){return R(this,_u)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(n[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=xu(Ct(n[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{n[s]!=null&&(r[s]=rt(n[s]))}),n.accessList&&(r.accessList=Aw(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(s=>s.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(s=>{const i=Wce(s);return{address:i.address,nonce:xu(i.nonce),chainId:xu(i.chainId),yParity:xu(i.signature.yParity),r:xu(i.signature.r),s:xu(i.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[pb(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[pb(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[pb(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[pb(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(pb):n.filter.address=pb(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:s}=n,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return _s("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:i}});if(c.match(/nonce/i)&&c.match(/too low/i))return _s("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=C6(i),l=WS.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",n.params[0],c?c.data:null);return l.info={error:i,payload:n},l}const o=JSON.stringify(uit(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return _s("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:n,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return _s("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return _s("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return _s("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return _s("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?_s("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:i,payload:n}}):_s("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(_s("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const s=Qf(this,yE)._++,i=new Promise((o,a)=>{R(this,ef).push({resolve:o,reject:a,payload:{method:n,params:r,id:s,jsonrpc:"2.0"}})});return Ie(this,oI,E6).call(this),i}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const i=await r;if(n>=i.length)throw new Error("no such account");return new FM(this,i[n])}const{accounts:s}=await ea({network:this.getNetwork(),accounts:r});n=Ar(n);for(const i of s)if(Ar(i)===n)return new FM(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new FM(this,r))}destroy(){R(this,Td)&&(clearTimeout(R(this,Td)),q(this,Td,null));for(const{payload:n,reject:r}of R(this,ef))r(_s("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));q(this,ef,[]),super.destroy()}}i0=new WeakMap,yE=new WeakMap,ef=new WeakMap,Td=new WeakMap,_u=new WeakMap,Sl=new WeakMap,Fa=new WeakMap,oI=new WeakSet,E6=function(){if(R(this,Td))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");q(this,Td,setTimeout(()=>{q(this,Td,null);const r=R(this,ef);for(q(this,ef,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==R(this,i0).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(o=>o.payload)).length>R(this,i0).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:l}of s){if(this.destroyed){c(_s("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const u=o.filter(d=>d.id===l.id)[0];if(u==null){const d=_s("missing response for request","BAD_DATA",{value:o,info:{payload:l}});this.emit("error",d),c(d);continue}if("error"in u){c(this.getRpcError(l,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},n))};var fg;class lit extends cit{constructor(n,r){super(n,r);ne(this,fg);let s=this._getOption("pollingInterval");s==null&&(s=Fle.pollingInterval),q(this,fg,s)}_getSubscriber(n){const r=super._getSubscriber(n);return SK(r)&&(r.pollingInterval=R(this,fg)),r}get pollingInterval(){return R(this,fg)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");q(this,fg,n),this._forEachSubscriber(r=>{SK(r)&&(r.pollingInterval=R(this,fg))})}}fg=new WeakMap;function C6(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&cs(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=C6(t[e]);if(n)return n}return null}if(typeof t=="string")try{return C6(JSON.parse(t))}catch{}return null}function _6(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)_6(t[n],e);if(typeof t=="string")try{return _6(JSON.parse(t),e)}catch{}}}function uit(t){const e=[];return _6(t,e),e}var wE,bE;const py=class py extends lit{constructor(n,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});oe(n&&n.request,"invalid EIP-1193 provider","ethereum",n);super(r,i);ne(this,wE);ne(this,bE);q(this,bE,null),s&&s.providerInfo&&q(this,bE,s.providerInfo),q(this,wE,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const l=await n.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const u=new Error(l.message);throw u.code=l.code,u.data=l.data,u.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}})}get providerInfo(){return R(this,bE)}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){oe(!Array.isArray(n),"EIP-1193 does not support batch request","payload",n);try{const r=await R(this,wE).call(this,n.method,n.params||[]);return[{id:n.id,result:r}]}catch(r){return[{id:n.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(n,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(n,r)}async hasSigner(n){n==null&&(n=0);const r=await this.send("eth_accounts",[]);return typeof n=="number"?r.length>n:(n=n.toLowerCase(),r.filter(s=>s.toLowerCase()===n).length!==0)}async getSigner(n){if(n==null&&(n=0),!await this.hasSigner(n))try{await R(this,wE).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(n)}static async discover(n){if(n==null&&(n={}),n.provider)return new py(n.provider);const r=n.window?n.window:typeof window<"u"?window:null;if(r==null)return null;const s=n.anyProvider;if(s&&r.ethereum)return new py(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=n.timeout?n.timeout:300;return i===0?null:await new Promise((o,a)=>{let c=[];const l=h=>{c.push(h.detail),s&&u()},u=()=>{if(clearTimeout(d),c.length)if(n&&n.filter){const h=n.filter(c.map(f=>Object.assign({},f.info)));if(h==null)o(null);else if(h instanceof py)o(h);else{let f=null;if(h.uuid&&(f=c.filter(g=>h.uuid===g.info.uuid)[0]),f){const{provider:p,info:g}=f;o(new py(p,void 0,{providerInfo:g}))}else a(_s("filter returned unknown info","UNSUPPORTED_OPERATION",{value:h}))}}else{const{provider:h,info:f}=c[0];o(new py(h,void 0,{providerInfo:f}))}else o(null);r.removeEventListener("eip6963:announceProvider",l)},d=setTimeout(()=>{u()},i);r.addEventListener("eip6963:announceProvider",l),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};wE=new WeakMap,bE=new WeakMap;let A6=py;const Np=[{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerToGame",outputs:[{internalType:"bytes6",name:"",type:"bytes6"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"games",outputs:[{internalType:"address",name:"player1",type:"address"},{internalType:"address",name:"player2",type:"address"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"address",name:"winner",type:"address"},{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"uint256",name:"wagerAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"createGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"joinGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"winner",type:"address"}],name:"endGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"cancelGame",outputs:[],stateMutability:"nonpayable",type:"function"}],gl="0x3112AF5728520F52FD1C6710dD7bD52285a68e47",us={LOBBY:"lobby",WAITING:"waiting",ACTIVE:"active",FINISHED:"finished"},jM={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},Ph=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],dit=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}];function hit(){const t=new Uint8Array(6);return window.crypto.getRandomValues(t),"0x"+Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}async function fit(t){try{if(typeof window>"u"||!window.ethereum)throw new Error("No Ethereum provider found. Please connect your wallet.");const e=new A6(window.ethereum);return await new Ev(gl,Np,e).playerToGame(t)}catch(e){return console.error("Error fetching invite code from contract:",e),null}}const jle=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s}=DI(),[i,o]=G.useState(""),[a,c]=G.useState(""),[l,u]=G.useState(!1),[d,h]=G.useState(!1),[f,p]=G.useState(!1),[g,m]=G.useState(!1),{writeContract:y,isPending:w,data:C}=JN(),{writeContract:N,isPending:I,data:k,error:P}=JN(),{writeContract:U,isPending:M,data:W}=JN(),{writeContract:j,isPending:K,data:$}=JN(),v=TAe(),{isLoading:E}=QN({hash:C}),{isLoading:_,data:O}=QN({hash:k}),{isLoading:x}=QN({hash:W}),{isLoading:B}=QN({hash:$});G.useEffect(()=>{$&&!B&&(console.log("[REFUND] Transaction completed successfully"),ze("Game refunded successfully! Your wager has been returned."),qt(us.LOBBY),H(""),un(null),se(0,"refund completed"),z(null),tu())},[$,B]);const{data:F}=J7({address:gl,abi:Np,functionName:"playerToGame",args:r?[r]:void 0,query:{enabled:!!r}}),{data:L}=J7({address:gl,abi:Np,functionName:"games",args:F?[F]:void 0,query:{enabled:!!F&&F!=="0x000000000000"}}),[A,H]=G.useState(""),re=(V,Z)=>{console.log(`[INVITE_DEBUG] Setting inviteCode to "${V}" from ${Z}`),A&&!V&&console.warn(`[INVITE_DEBUG] WARNING: Clearing inviteCode from "${A}" to "${V}" from ${Z}`),H(V)},se=(V,Z)=>{console.log(`[WAGER_DEBUG] Setting wager to ${V} TDMT from ${Z}`),T!==V&&console.log(`[WAGER_DEBUG] Wager changed from ${T} to ${V} TDMT`),D(V)},[ge,ae]=G.useState("moves"),fe=async()=>{if(!A||!r){alert("No game to refund or wallet not connected");return}try{console.log("[REFUND] Attempting to refund game:",A);const V=await Ti.getGame(A);if(!V||V.blue_player!==r){alert("Only the game creator can refund the game");return}if(V.red_player&&V.red_player!=="0x0000000000000000000000000000000000000000"){alert("Cannot refund game after opponent has joined");return}await j({address:gl,abi:Np,functionName:"cancelGame",args:[A]}),console.log("[REFUND] Cancel game transaction submitted")}catch(V){console.error("[REFUND] Error refunding game:",V),alert("Failed to refund game. Please try again.")}},ye=async()=>{if(!r||!qe){console.error("[CLAIM] Missing required data for claiming winnings");return}let V=A;if(!V&&r){console.log("[CLAIM] Invite code missing from state, trying to get from contract...");try{const Z=await fit(r);Z&&Z!=="0x000000000000"&&(V=Z,console.log("[CLAIM] Retrieved invite code from contract:",V))}catch(Z){console.error("[CLAIM] Error getting invite code from contract:",Z)}}if(!V){console.error("[CLAIM] Could not determine invite code for claiming winnings"),alert("Could not determine game invite code. Please try refreshing the page.");return}try{p(!0),console.log("[CLAIM] Claiming winnings for game:",V,"Player:",qe,"Address:",r);const Z=await Ti.getGame(V);if(!Z){console.error("[CLAIM] Error fetching game data:","Game data not found"),alert("Failed to fetch game data. Please try again.");return}console.log("[CLAIM] Firebase game data:",Z);let Q=null;if(Z.winner&&(Z.blue_player||Z.red_player)&&(Q=Z.winner==="blue"?Z.blue_player:Z.red_player,console.log("[CLAIM] Using Firebase winner data:",{winner:Z.winner,winnerAddress:Q})),!Q&&L)if(Z.winner&&(Z.winner==="blue"||Z.winner==="red")){console.log("[CLAIM] Using Firebase winner color with contract player addresses");let Ce,Ye,Ue,it,Wt,Pn;if(Array.isArray(L))[Ce,Ye,Ue,it,Wt,Pn]=L;else{console.error("[CLAIM] Unexpected contract data format:",L),alert("Failed to verify winner. Please try again.");return}Q=Z.winner==="blue"?Ce:Ye,console.log("[CLAIM] Winner from Firebase color + contract addresses:",{winnerColor:Z.winner,winnerAddress:Q,player1:Ce,player2:Ye})}else{console.log("[CLAIM] Using contract data for winner verification"),console.log("[CLAIM] Full contract data:",L);let Ce,Ye,Ue,it,Wt,Pn;if(Array.isArray(L))[Ce,Ye,Ue,it,Wt,Pn]=L;else{console.error("[CLAIM] Unexpected contract data format:",L),alert("Failed to verify winner. Please try again.");return}const sn=String(it);if(sn.startsWith("0x"))Q=sn;else if(sn==="blue"||sn==="red")Q=sn==="blue"?Ce:Ye;else if(sn==="1"||sn==="2")Q=sn==="1"?Ce:Ye;else{console.error("[CLAIM] Unknown winner format:",it,"as string:",sn),alert("Failed to verify winner. Please try again.");return}console.log("[CLAIM] Winner from contract:",{winner:it,winnerAddress:Q,player1:Ce,player2:Ye,winnerType:typeof it,winnerValue:it,address:r,addressType:typeof r})}if(!Q){console.error("[CLAIM] Could not determine winner address"),alert("Failed to verify winner. Please try again.");return}if(console.log("[CLAIM] Winner verification details:",{winnerAddress:Q,address:r,playerColor:qe,winnerAddressType:typeof Q,addressType:typeof r,addressesMatch:Q===r,winnerAddressLength:Q==null?void 0:Q.length,addressLength:r==null?void 0:r.length}),Q!==r){console.error("[CLAIM] Player is not the winner",{winnerAddress:Q,address:r,playerColor:qe}),alert("Only the winner can claim winnings.");return}console.log("[CLAIM] ✅ Winner verification passed! Proceeding with contract call...");let ue=V;if(!ue&&L){console.log("[CLAIM] Using invite code from contract data as fallback");let Ce,Ye,Ue,it,Wt,Pn;if(Array.isArray(L))[Ce,Ye,Ue,it,Wt,Pn]=L,ue=Wt;else{console.error("[CLAIM] Unexpected contract data format for invite code:",L),alert("Failed to get invite code. Please try again.");return}}if(!ue||typeof ue!="string"||!ue.startsWith("0x")||ue.length!==14){console.error("[CLAIM] Invalid invite code for contract claim:",ue),alert("Invalid invite code for contract claim.");return}console.log("[CLAIM] Calling contract with:",{inviteCode:ue,winner:Q,functionName:"endGame",inviteCodeSource:Z.invite_code?"Firebase":"Contract"}),U({address:gl,abi:Np,functionName:"endGame",args:[ue,Q]}),console.log("[CLAIM] Contract call initiated successfully"),M?console.log("[CLAIM] Contract call is pending..."):console.log("[CLAIM] Contract call status:",{isEndingGame:M,endGameHash:W})}catch(Z){console.error("[CLAIM] Error claiming winnings:",Z),alert("Failed to claim winnings. Please try again.")}finally{p(!1)}},[ve,_e]=G.useState(Ph),[Se,Re]=G.useState("blue"),[xe,Fe]=G.useState(null),[Ut,at]=G.useState([]),[wn,Qn]=G.useState([]),[Bt,ze]=G.useState("Waiting for opponent..."),[Jn,qt]=G.useState(us.LOBBY),[qe,un]=G.useState(null),[In,z]=G.useState(null),[T,D]=G.useState(0),[Y,ee]=G.useState([]),[de,we]=G.useState(!1),[It,Vt]=G.useState(null),[et,bn]=G.useState(null),[tt,ws]=G.useState(""),[Go,mr]=G.useState(0),[Ns]=G.useState(!0);G.useEffect(()=>{document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode")},[]);const[Iw,xs]=G.useState(!1),[Yr,Nw]=G.useState(null),[Wr,Qr]=G.useState(!1),[Zu,zr]=G.useState(null),[rr,Xl]=G.useState(!1),[ls,bs]=G.useState(!0),[Xu,sr]=G.useState(null),[Wn,Nm]=G.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),[Or,vs]=G.useState([]),[ed,Es]=G.useState(null),ir=G.useRef(null),pc=G.useRef(null),ph=G.useRef(r);G.useEffect(()=>{ph.current=r},[r]),G.useEffect(()=>{console.log("[JOIN RECEIPT DEBUG] - joinGameHash:",k),console.log("[JOIN RECEIPT DEBUG] - isWaitingForJoinReceipt:",_),console.log("[JOIN RECEIPT DEBUG] - pendingJoinGameData:",et),console.log("[JOIN RECEIPT DEBUG] - condition:",k&&!_&&et),k&&!_&&et&&(console.log("[CONTRACT] Join transaction confirmed:",k),r===et.address&&(console.log("[CONTRACT] Setting playerColor to red for confirmed join transaction"),un("red"),z(et.gameData.blue_player)),Ti.updateGame(et.inviteCode,{...et.gameData,red_player:et.address,game_state:"active"}).then(()=>{console.log("[CONTRACT] Firebase updated successfully after join confirmation"),qt(us.ACTIVE),ze("Game started!"),rl(et.inviteCode),console.log("[CONTRACT] Clearing pending join data"),bn(null)}).catch(V=>{console.error("Error updating game in database:",V),ze("Joined game on contract but failed to update database"),bn(null)}))},[k,_,et,r]),G.useEffect(()=>{W&&!x&&(console.log("[CLAIM] End game transaction confirmed:",W),ze("Winnings claimed successfully! Transaction hash: "+W.slice(0,10)+"..."),p(!1))},[W,x]),G.useEffect(()=>{M===!1&&f&&!W&&(console.log("[CLAIM] End game transaction rejected or failed"),ze("Claim transaction was rejected. Please try again."),p(!1))},[M,f,W]),G.useEffect(()=>{console.log("[CREATE DEBUG] Transaction receipt handler - createGameHash:",C),console.log("[CREATE DEBUG] Transaction receipt handler - isWaitingForCreateReceipt:",E),console.log("[CREATE DEBUG] Transaction receipt handler - pendingGameData:",It),console.log("[CREATE DEBUG] Transaction receipt handler - inviteCode:",A),console.log("[CREATE DEBUG] Transaction receipt handler - condition:",C&&!E&&It&&!A),console.log("[CREATE DEBUG] Transaction receipt handler - individual conditions:"),console.log("[CREATE DEBUG] - createGameHash exists:",!!C),console.log("[CREATE DEBUG] - not waiting for receipt:",!E),console.log("[CREATE DEBUG] - pendingGameData exists:",!!It),console.log("[CREATE DEBUG] - no inviteCode set:",!A),C&&!E&&It&&!A?(console.log("[CONTRACT] Create game transaction confirmed:",C),Ti.createGame(It).then(()=>{console.log("[FIREBASE] Game created successfully after transaction confirmation"),H(It.invite_code),un("blue"),se(Go,"create game success"),qt(us.WAITING),ze("Waiting for opponent to join..."),rl(It.invite_code),setTimeout(()=>{tu()},1e3),Vt(null),we(!1)}).catch(V=>{console.error("[FIREBASE] Error creating game after transaction:",V),ze("Transaction confirmed but failed to create game in database"),Vt(null),we(!1)})):C&&!E&&(console.log("[CREATE DEBUG] Transaction confirmed but conditions not met for Firebase update:"),console.log("[CREATE DEBUG] - pendingGameData missing:",!It),console.log("[CREATE DEBUG] - inviteCode already set:",!!A))},[C,E,It,Go]),G.useEffect(()=>{console.log("[PENDING DEBUG] pendingGameData changed:",It)},[It]),G.useEffect(()=>{if(console.log("[PENDING DEBUG] pendingJoinGameData changed:",et),et){const V=setTimeout(()=>{console.log("[AUTO-CLEAR] Pending join data has been stuck for too long, clearing automatically"),bn(null)},3e4);return()=>clearTimeout(V)}},[et]),G.useEffect(()=>{console.log("[CREATE REJECTION DEBUG] - isCreatingGameContract:",w),console.log("[CREATE REJECTION DEBUG] - pendingGameData:",It),console.log("[CREATE REJECTION DEBUG] - createGameHash:",C),console.log("[CREATE REJECTION DEBUG] - condition:",w===!1&&It&&!C),w===!1&&It&&!C&&(console.log("[CONTRACT] Create game transaction rejected or failed"),ze("Transaction was rejected. Please try again."),Vt(null),we(!1))},[w,It,C]),G.useEffect(()=>{I===!1&&et&&!k&&(console.log("[CONTRACT] Join game transaction rejected or failed"),console.log("[CONTRACT] Rejection details - isJoiningGameContract:",I),console.log("[CONTRACT] Rejection details - pendingJoinGameData:",et),console.log("[CONTRACT] Rejection details - joinGameHash:",k),console.log("[CONTRACT] Rejection details - address:",r),console.log("[CONTRACT] Rejection details - playerGameInviteCode:",F),ze("Transaction was rejected. Please try again."),re("","join transaction rejection"),un(null),se(0,"join transaction rejection"),z(null),qt(us.LOBBY),ze(""),bn(null))},[I,et,k,r,F]),G.useEffect(()=>{r&&F!==void 0&&(g||(F!=="0x000000000000"&&L||F==="0x000000000000")&&xm())},[r,F,L,g]),G.useEffect(()=>{m(!1)},[r]),G.useEffect(()=>()=>{gh(),ir.current&&ir.current(),pc.current&&clearTimeout(pc.current)},[]);const xm=async()=>{if(r)try{if(console.log("[GAME_STATE] Checking for active games for player:",r),F&&F!=="0x000000000000"&&!L){console.log("[GAME_STATE] Waiting for contract data...");return}if(F&&F!=="0x000000000000"&&(console.log("[GAME_STATE] Found game in contract:",F),L)){let Q,ue,Ce,Ye,Ue,it;if(Array.isArray(L))[Q,ue,Ce,Ye,Ue,it]=L;else{console.error("[GAME_STATE] Unexpected contract data format:",L);return}if(console.log("[GAME_STATE] Parsed contract game data:",{player1:Q,player2:ue,isActive:Ce,winner:Ye,inviteCode:Ue,wagerAmount:it}),!Ue){console.error("[GAME_STATE] Invalid invite code:",Ue);return}const Wt=Q===r?"blue":"red",Pn=Q===r?ue:Q;console.log("[GAME_STATE] Player is",Wt,"opponent is",Pn),console.log("[DEBUG] Contract address comparison:"),console.log("[DEBUG] - player1 (blue):",Q),console.log("[DEBUG] - player2 (red):",ue),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - player1 === address:",Q===r),console.log("[DEBUG] - player2 === address:",ue===r);const sn=await Ti.getGame(Ue);if(sn){if(console.log("[GAME_STATE] Found game in Firebase:",sn),H(Ue),un(Wt),se(parseFloat(sn.bet_amount)/1e18,"checkPlayerGameState Firebase"),z(Pn),sn.game_state==="waiting")qt(us.WAITING),ze("Waiting for opponent to join..."),console.log("[GAME_STATE] Setting game mode to WAITING");else if(sn.game_state==="active"||sn.game_state==="test_update"){if(qt(us.ACTIVE),ze("Game in progress"),console.log("[GAME_STATE] Setting game mode to ACTIVE (from state:",sn.game_state,")"),sn.board){const di=sn.board;_e(ru(di)),Re(sn.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state:",sn.game_state,"- treating as active"),qt(us.ACTIVE),ze("Game in progress"),sn.board){const di=sn.board;_e(ru(di)),Re(sn.current_player||"blue")}rl(Ue),m(!0),console.log("[GAME_STATE] Game state loaded from Firebase"),console.log("[GAME_STATE] Current game mode:",Jn),console.log("[GAME_STATE] Game state from Firebase:",sn.game_state);return}else{console.log("[GAME_STATE] Game exists in contract but not in Firebase, syncing...");const di={invite_code:Ue,game_title:`Game ${Ue.slice(-6)}`,bet_amount:it?it.toString():"0",blue_player:Q,red_player:ue,game_state:Ce?"active":"waiting",board:{positions:nu(Ph),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:gl,is_public:!0};if(await Ti.createGame(di),console.log("[GAME_STATE] Successfully synced game to Firebase:",di),H(Ue),un(Wt),se(parseFloat(di.bet_amount)/1e18,"checkPlayerGameState sync"),z(Pn),Ce?(qt(us.ACTIVE),ze("Game in progress")):(qt(us.WAITING),ze("Waiting for opponent to join...")),di.board){const sue=di.board;_e(ru(sue)),Re(di.current_player||"blue")}rl(Ue),m(!0),console.log("[GAME_STATE] Game state loaded after sync");return}}console.log("[GAME_STATE] No contract game found, checking Firebase...");const Z=(await Ti.getActiveGames()).filter(Q=>Q.chain==="sanko"&&(Q.blue_player===r||Q.red_player===r)&&["waiting","active"].includes(Q.game_state));if(Z&&Z.length>0){const Q=Z[0];if(console.log("[GAME_STATE] Found active game in Firebase:",Q),console.log("[DEBUG] Firebase fallback address comparison:"),console.log("[DEBUG] - blue_player:",Q.blue_player),console.log("[DEBUG] - red_player:",Q.red_player),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - blue_player === address:",Q.blue_player===r),console.log("[DEBUG] - red_player === address:",Q.red_player===r),H(Q.invite_code),un(Q.blue_player===r?"blue":"red"),se(parseFloat(Q.bet_amount)/1e18,"checkPlayerGameState fallback"),z(Q.blue_player===r?Q.red_player:Q.blue_player),Q.game_state==="waiting")qt(us.WAITING),ze("Waiting for opponent to join...");else if(Q.game_state==="active"||Q.game_state==="test_update"){if(qt(us.ACTIVE),ze("Game in progress"),Q.board){const ue=Q.board;_e(ru(ue)),Re(Q.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state in Firebase check:",Q.game_state,"- treating as active"),qt(us.ACTIVE),ze("Game in progress"),Q.board){const ue=Q.board;_e(ru(ue)),Re(Q.current_player||"blue")}rl(Q.invite_code),m(!0),console.log("[GAME_STATE] Game state loaded successfully from Firebase");return}console.log("[GAME_STATE] No active games found"),qt(us.LOBBY),we(!1),m(!0)}catch(V){console.error("[GAME_STATE] Error in checkPlayerGameState:",V)}},eu=async()=>{try{await Kae();const V=await Vae(20);vs(V)}catch(V){console.error("Error loading leaderboard:",V)}},Gf=async V=>{if(console.log("[SCORE] updateScore called with:",V,"for address:",r),!r){console.error("[SCORE] No address available for score update");return}try{console.log("[SCORE] Updating score for address:",Q0(r)),await Mk(r,V)?console.log("[SCORE] Successfully updated score for:",Q0(r)):console.error("[SCORE] Failed to update score"),console.log("[SCORE] updateScore completed successfully")}catch(Z){console.error("[SCORE] Error updating score:",Z)}},qf=async(V,Z,Q)=>{try{if(console.log("[SCORE] Updating both players scores:",{winner:V,bluePlayer:Z,redPlayer:Q}),!Z||!Q){console.error("[SCORE] Missing player addresses from contract");return}await ket(V,Z,Q)?(console.log("[SCORE] Successfully updated both players scores"),await eu()):console.error("[SCORE] Failed to update both players scores")}catch(ue){console.error("[SCORE] Error updating both players scores:",ue)}},tu=async()=>{try{const V=await Ti.getOpenGames();console.log("[FIREBASE] Loaded open games:",V),await Tm(V),ee(V)}catch(V){console.error("Error loading open games:",V)}},Tm=async V=>{if(console.log("[CLEANUP] Checking for ghost games..."),!v){console.log("[CLEANUP] Public client not available, skipping cleanup");return}for(const Z of V)try{const Q=Z.invite_code;if(!Q||typeof Q!="string"||!Q.startsWith("0x")||Q.length!==14){console.warn("[CLEANUP] Invalid invite code for game:",Z.invite_code,Q);continue}const ue=await v.readContract({address:gl,abi:Np,functionName:"games",args:[Q]});(!ue||Array.isArray(ue)&&ue[0]==="0x0000000000000000000000000000000000000000")&&(console.log("[CLEANUP] Found ghost game:",Z.invite_code,"- removing from Firebase"),await Ti.deleteGame(Z.invite_code),console.log("[CLEANUP] Ghost game removed:",Z.invite_code))}catch(Q){console.error("[CLEANUP] Error checking game:",Z.invite_code,Q)}},Vf=async()=>{if(!(!r||Go<=0)){console.log("[CREATE] Starting game creation - address:",r,"wager:",Go),we(!0);try{const V=hit();console.log("[CREATE] Generated invite code:",V);const Z={invite_code:V,game_title:`Chess Game ${V.slice(-6)}`,bet_amount:(Go*1e18).toString(),blue_player:r,game_state:"waiting",board:{positions:nu(Ph),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:gl,is_public:!0,created_at:new Date().toISOString()};console.log("[CREATE] Game data prepared:",Z),console.log("[CREATE] Calling contract with args:",[V,BigInt(Math.floor(Go*1e18))]),y({address:gl,abi:Np,functionName:"createGame",args:[V],value:BigInt(Math.floor(Go*1e18))}),console.log("[CREATE] Contract call initiated, setting pending data"),console.log("[CREATE] Pending game data being set:",Z),Vt(Z),ze("Creating game... Please confirm transaction in your wallet.")}catch(V){console.error("[CREATE] Error creating game:",V),ze("Failed to create game. Please try again.")}finally{we(!1)}}},Ca=async V=>{if(r)try{const Z=await Ti.getGame(V);if(!Z||Z.game_state!=="waiting"){ze("Game not found or already full");return}const Q=parseFloat(Z.bet_amount),ue=Q/1e18;if(H(V),un("red"),se(ue,"joinGame"),z(Z.blue_player),console.log("[JOIN] Setting up join game with data:",{inviteCode:V,playerColor:"red",wagerAmountTDMT:ue,opponent:Z.blue_player,address:r}),r===Z.blue_player){console.error("[JOIN] Player cannot join their own game"),ze("You cannot join your own game");return}if(F&&F!=="0x000000000000"){console.error("[JOIN] Player already has an active game:",F),ze("You already have an active game");return}if(typeof window<"u"&&window.ethereum)try{const Ye=await window.ethereum.request({method:"eth_chainId"}),Ue=await window.ethereum.request({method:"eth_accounts"});console.log("[JOIN] Wallet state check - chainId:",Ye),console.log("[JOIN] Wallet state check - connectedAccounts:",Ue),console.log("[JOIN] Wallet state check - currentAddress:",r),console.log("[JOIN] Wallet state check - isConnected:",s)}catch(Ye){console.error("[JOIN] Error checking wallet state:",Ye)}console.log("[JOIN] Contract call parameters - contractAddress:",gl),console.log("[JOIN] Contract call parameters - functionName: joinGame"),console.log("[JOIN] Contract call parameters - args:",[V]);const Ce=BigInt(Q);console.log("[JOIN] Contract call parameters - wagerAmount from Firebase (wei):",Q),console.log("[JOIN] Contract call parameters - wagerValue (wei):",Ce),console.log("[JOIN] Contract call parameters - value as hex:","0x"+Ce.toString(16)),console.log("[JOIN] Contract call parameters - value in wei:",Ce.toString()),ze("Joining game... Please confirm transaction in your wallet."),setTimeout(()=>{console.log("[JOIN] About to call writeJoinGame..."),console.log("[JOIN] Final contract call parameters:"),console.log("[JOIN] - address:",gl),console.log("[JOIN] - functionName: joinGame"),console.log("[JOIN] - args:",[V]),console.log("[JOIN] - value:",Ce),console.log("[JOIN] - value as BigInt:",Ce.toString()),N({address:gl,abi:Np,functionName:"joinGame",args:[V],value:Ce}),console.log("[JOIN] writeJoinGame called, setting pending data..."),bn({inviteCode:V,gameData:Z,address:r}),console.log("[JOIN] Pending data set"),console.log("[JOIN] Transaction initiated - waiting for user confirmation in MetaMask...")},500)}catch(Z){console.error("[JOIN] Error joining game:",Z),ze("Failed to join game. Please try again."),re("","join game error"),un(null),se(0,"join game error"),z(null)}},[Rm,xw]=G.useState(null),[Kf,Tw]=G.useState(""),[Yf,km]=G.useState(!0),gh=()=>{console.log("[FIREBASE] No fallback to stop")},rl=V=>{console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",V),ir.current&&(console.log("[FIREBASE] Removing existing subscription"),ir.current());const Z=Ti.subscribeToGame(V,Q=>{const ue=ph.current;if(console.log("=== [DEBUG] FIREBASE SUBSCRIPTION CALLBACK ==="),console.log("[DEBUG] Current wallet address (from addressRef):",ue),console.log("[DEBUG] Current wallet address (from useAccount):",r),console.log("[DEBUG] Game data received:",Q),console.log("[DEBUG] Blue player from Firebase:",Q==null?void 0:Q.blue_player),console.log("[DEBUG] Red player from Firebase:",Q==null?void 0:Q.red_player),console.log("[DEBUG] Blue player type:",typeof(Q==null?void 0:Q.blue_player)),console.log("[DEBUG] Red player type:",typeof(Q==null?void 0:Q.red_player)),console.log("[DEBUG] Current address type:",typeof ue),console.log("[DEBUG] Current playerColor state:",qe),console.log("[DEBUG] Pending join game data:",!!et),!Q){console.log("[DEBUG] No game data received");return}if(et&&ue===et.address)console.log("[DEBUG] Pending join transaction detected - preserving playerColor:",qe),Q.game_state==="active"&&(console.log("[AUTO-CLEAR] Game is active, clearing pending join data"),bn(null)),Q.blue_player&&Q.red_player&&Q.red_player!=="0x0000000000000000000000000000000000000000"&&z(Q.blue_player===ue?Q.red_player:Q.blue_player);else if(ue&&Q.blue_player&&Q.red_player&&Q.red_player!=="0x0000000000000000000000000000000000000000"){console.log("[DEBUG] Both players present, comparing addresses...");const Ye=ue.toLowerCase()===Q.blue_player.toLowerCase(),Ue=ue.toLowerCase()===Q.red_player.toLowerCase();console.log("[DEBUG] Blue player match:",Ye),console.log("[DEBUG] Red player match:",Ue),console.log("[DEBUG] Blue comparison:",`${ue.toLowerCase()} === ${Q.blue_player.toLowerCase()}`),console.log("[DEBUG] Red comparison:",`${ue.toLowerCase()} === ${Q.red_player.toLowerCase()}`),Ye&&qe!=="blue"?(console.log("[DEBUG] Setting player color to BLUE"),un("blue"),z(Q.red_player)):Ue&&qe!=="red"?(console.log("[DEBUG] Setting player color to RED"),un("red"),z(Q.blue_player)):!Ye&&!Ue&&qe!==null?(console.log("[DEBUG] No address match found - setting playerColor to null"),un(null),z(null)):console.log("[DEBUG] Player color already correctly set to:",qe)}else{if(console.log("[DEBUG] Missing player data or red player is zero address - using contract data as fallback"),console.log("[DEBUG] - currentAddress:",!!ue),console.log("[DEBUG] - blue_player:",!!Q.blue_player),console.log("[DEBUG] - red_player:",Q==null?void 0:Q.red_player),console.log("[DEBUG] - Current playerColor state:",qe),console.log("[DEBUG] - Contract game data available:",!!L),qe&&(qe==="blue"||qe==="red")){console.log("[DEBUG] Preserving existing valid playerColor:",qe);return}else if(L&&Array.isArray(L)&&ue){const[Ye,Ue]=L;if(Ye&&Ue){const it=Ye.toLowerCase()===ue.toLowerCase()?"blue":"red",Wt=Ye.toLowerCase()===ue.toLowerCase()?Ue:Ye;console.log("[DEBUG] Setting playerColor from contract fallback:",it),un(it),z(Wt)}}else console.log("[DEBUG] No valid data available, but preserving existing playerColor if valid"),(!qe||qe!=="blue"&&qe!=="red")&&(console.log("[DEBUG] Setting playerColor to null"),un(null));Q.blue_player&&Q.red_player&&Q.red_player!=="0x0000000000000000000000000000000000000000"&&z(Q.blue_player===ue?Q.red_player:Q.blue_player)}console.log("=== [DEBUG] END FIREBASE SUBSCRIPTION CALLBACK ==="),console.log("[WAGER DEBUG] bet_amount from Firebase:",Q.bet_amount),console.log("[WAGER DEBUG] bet_amount type:",typeof Q.bet_amount),console.log("[WAGER DEBUG] Full gameData:",Q),console.log("[WAGER DEBUG] parsed value:",Q.bet_amount?parseFloat(Q.bet_amount):"null"),console.log("[WAGER DEBUG] converted to TDMT:",Q.bet_amount?parseFloat(Q.bet_amount)/1e18:"null");let Ce=0;Q.bet_amount&&!isNaN(parseFloat(Q.bet_amount))?(Ce=parseFloat(Q.bet_amount)/1e18,console.log("[WAGER DEBUG] Setting wager from Firebase:",Ce)):L&&Array.isArray(L)&&L[5]?(Ce=parseFloat(L[5].toString())/1e18,console.log("[WAGER DEBUG] Setting wager from contract data:",Ce)):console.log("[WAGER DEBUG] Setting wager to 0 (no valid bet_amount found)"),se(Ce,"Firebase subscription"),Q.board&&_e(ru(Q.board)),Q.current_player&&Re(Q.current_player),Q.game_state==="active"?(qt(us.ACTIVE),ze("Game in progress")):Q.game_state==="finished"?(qt(us.FINISHED),ze("Game finished")):Q.game_state==="waiting"&&(qt(us.WAITING),ze("Waiting for opponent to join..."))});ir.current=Z,console.log("[FIREBASE] Firebase subscription setup complete for game:",V)};G.useEffect(()=>(A&&rl(A),()=>{ir.current&&ir.current()}),[A,r]),G.useEffect(()=>{if(L&&!qe&&r){console.log("[FALLBACK] Setting playerColor from contract data");let V,Z,Q,ue,Ce,Ye;if(Array.isArray(L))[V,Z,Q,ue,Ce,Ye]=L;else{console.error("[FALLBACK] Unexpected contract data format:",L);return}const Ue=V===r?"blue":"red",it=V===r?Z:V;console.log("[FALLBACK] Contract-based player assignment:"),console.log("[FALLBACK] - player1 (blue):",V),console.log("[FALLBACK] - player2 (red):",Z),console.log("[FALLBACK] - current address:",r),console.log("[FALLBACK] - assigned color:",Ue),console.log("[FALLBACK] - opponent:",it),console.log("[FALLBACK] - inviteCode from contract:",Ce),un(Ue),z(it),!A&&Ce&&(console.log("[FALLBACK] Setting missing inviteCode:",Ce),H(Ce)),A&&Ti.getGame(A).then(Wt=>{Wt&&(!Wt.blue_player||!Wt.red_player)&&(console.log("[AUTO-FIX] Detected missing player data, attempting to fix..."),Kle()),Wt&&Wt.game_state==="active"&&et&&(console.log("[AUTO-CLEAR] Game is confirmed active, clearing pending join data"),bn(null))}).catch(Wt=>{console.error("[AUTO-FIX] Error checking game data for auto-fix:",Wt)})}},[L,qe,r,A]),G.useEffect(()=>{if(O&&et){console.log("[RECEIPT] Join transaction confirmed!"),console.log("[RECEIPT] Transaction hash:",O.transactionHash),console.log("[RECEIPT] Pending data:",et);const{inviteCode:V,gameData:Z,address:Q}=et;Ti.updateGame(V,{red_player:Q,blue_player:Z.blue_player,bet_amount:Z.bet_amount,game_state:"active",last_move:null,board:{positions:nu(Ph),rows:8,cols:8},current_player:"blue"}).then(()=>{console.log("[RECEIPT] Firebase updated successfully after join confirmation"),ze("Game started! You are the red player."),qt(us.ACTIVE),bn(null)}).catch(ue=>{console.error("[RECEIPT] Error updating Firebase after join confirmation:",ue),ze("Game joined but failed to update game state. Please refresh.")})}},[O,et]),G.useEffect(()=>{P&&(console.error("[ERROR] Join transaction failed:",P),ze(`Failed to join game: ${P.message||"Transaction rejected"}`),re("","join game error effect"),un(null),se(0,"join game error effect"),z(null),bn(null))},[P]);const nu=V=>{const Z={};return V.forEach((Q,ue)=>{Q.forEach((Ce,Ye)=>{Z[`${ue}_${Ye}`]=Ce})}),Z},ru=V=>{if(!V||!V.positions)return console.warn("[BOARD] No board data available, using initial board"),Ph;if(console.log("[BOARD] Attempting to reconstruct board from:",V),console.log("[BOARD] Positions type:",typeof V.positions),console.log("[BOARD] Positions is array:",Array.isArray(V.positions)),console.log("[BOARD] Positions value:",V.positions),typeof V.positions=="object"&&!Array.isArray(V.positions)){const Z=V.positions,Q=V.rows||8,ue=V.cols||8,Ce=Array(Q).fill(null).map(()=>Array(ue).fill(null));for(let Ye=0;Ye<Q;Ye++)for(let Ue=0;Ue<ue;Ue++){const it=`${Ye}_${Ue}`;Ce[Ye][Ue]=Z[it]||null}return console.log("[BOARD] Reconstructed from flat structure:",Ce),Ce}return Array.isArray(V.positions)?(console.log("[BOARD] Found array structure, length:",V.positions.length),V.positions.length===8?V.positions.every((Q,ue)=>{const Ce=Array.isArray(Q)&&Q.length===8;return Ce||console.warn(`[BOARD] Row ${ue} is invalid:`,Q,"Type:",typeof Q,"Length:",Q==null?void 0:Q.length),Ce})?(console.log("[BOARD] Using legacy array structure"),V.positions):(console.warn("[BOARD] Legacy array structure is malformed, using initial board"),Ph):(console.warn("[BOARD] Array has wrong length:",V.positions.length,"expected 8"),Ph)):(console.warn("[BOARD] Unknown board structure, using initial board:",V),Ph)},sl=V=>`${V.slice(0,6)}...${V.slice(-4)}`,oi=V=>V&&V===V.toUpperCase()?"red":"blue",wN=(V,Z)=>V>=0&&V<8&&Z>=0&&Z<8,Pm=(V,Z)=>{const Q=Z==="red"?"K":"k";let ue=-1,Ce=-1;for(let Ue=0;Ue<8;Ue++){for(let it=0;it<8;it++)if(V[Ue][it]===Q){ue=Ue,Ce=it;break}if(ue!==-1)break}return ue===-1?!1:X(ue,Ce,Z==="red"?"blue":"red",V)},X=(V,Z,Q,ue)=>{if(!ue||!Array.isArray(ue)||ue.length!==8)return console.warn("[SAFETY] Invalid board structure in isSquareUnderAttack:",ue),!1;for(let Ce=0;Ce<8;Ce++){if(!ue[Ce]||!Array.isArray(ue[Ce])||ue[Ce].length!==8)return console.warn("[SAFETY] Invalid board row structure:",ue[Ce]),!1;for(let Ye=0;Ye<8;Ye++){const Ue=ue[Ce][Ye];if(Ue&&oi(Ue)===Q&&Hn(Ue,Ce,Ye,V,Z,!1,Q,ue,!0))return!0}}return!1},te=(V,Z,Q,ue,Ce,Ye=ve)=>{const Ue=Ye[V][Z];if(!Ue)return!1;const it=Ye.map(Wt=>[...Wt]);return it[Q][ue]=Ue,it[V][Z]=null,Pm(it,Ce)},Ee=(V,Z,Q,ue,Ce,Ye)=>{const Ue=V==="blue"?-1:1,it=V==="blue"?6:1;if(!wN(ue,Ce)||V==="blue"&&ue>=Z||V==="red"&&ue<=Z)return!1;if(Q===Ce&&ue===Z+Ue)return Ye[ue][Ce]===null;if(Q===Ce&&Z===it&&ue===Z+2*Ue)return Ye[Z+Ue][Q]===null&&Ye[ue][Ce]===null;if(Math.abs(Q-Ce)===1&&ue===Z+Ue){const Wt=Ye[ue][Ce];if(Wt!==null&&oi(Wt)!==V)return!0;if(Wt===null&&Wn.lastPawnDoubleMove){const{row:Pn,col:sn}=Wn.lastPawnDoubleMove;if(Pn===Z&&sn===Ce){const di=Ye[Z][Ce];if(di&&di.toLowerCase()==="p"&&oi(di)!==V)return!0}}}return!1},be=(V,Z,Q,ue,Ce)=>V===Q||Z===ue,he=(V,Z,Q,ue)=>{const Ce=Math.abs(V-Q),Ye=Math.abs(Z-ue);return Ce===2&&Ye===1||Ce===1&&Ye===2},Ge=(V,Z,Q,ue,Ce)=>Math.abs(V-Q)===Math.abs(Z-ue),Ke=(V,Z,Q,ue,Ce)=>be(V,Z,Q,ue)||Ge(V,Z,Q,ue),Nt=(V,Z,Q,ue,Ce)=>{const Ye=Math.abs(Z-ue),Ue=Math.abs(Q-Ce);if(Ye<=1&&Ue<=1)return!0;if(Ye===0&&Ue===2){if(V==="blue"&&!Wn.blueKingMoved){if(Ce===6&&!Wn.blueRooksMove.right||Ce===2&&!Wn.blueRooksMove.left)return!0}else if(V==="red"&&!Wn.redKingMoved&&(Ce===6&&!Wn.redRooksMove.right||Ce===2&&!Wn.redRooksMove.left))return!0}return!1},zn=(V,Z,Q,ue,Ce)=>{const Ye=V===Q?0:(Q-V)/Math.abs(Q-V),Ue=Z===ue?0:(ue-Z)/Math.abs(ue-Z);let it=V+Ye,Wt=Z+Ue;for(;it!==Q||Wt!==ue;){if(Ce[it][Wt]!==null)return!1;it+=Ye,Wt+=Ue}return!0},Hn=(V,Z,Q,ue,Ce,Ye=!0,Ue=oi(V),it=ve,Wt=!1)=>{if(!V||!wN(ue,Ce))return!1;const Pn=it[ue][Ce];if(Pn&&oi(Pn)===Ue)return!1;let sn=!1;switch(V.toUpperCase()){case"P":sn=Ee(Ue,Z,Q,ue,Ce,it);break;case"R":sn=be(Z,Q,ue,Ce)&&zn(Z,Q,ue,Ce,it);break;case"N":sn=he(Z,Q,ue,Ce);break;case"B":sn=Ge(Z,Q,ue,Ce)&&zn(Z,Q,ue,Ce,it);break;case"Q":sn=Ke(Z,Q,ue,Ce)&&zn(Z,Q,ue,Ce,it);break;case"K":sn=Nt(Ue,Z,Q,ue,Ce);break}return!(!sn||Ye&&te(Z,Q,ue,Ce,Ue,it))},Jr=(V,Z=ve,Q=Se)=>{const ue=[],Ce=Z[V.row][V.col];if(!Ce||oi(Ce)!==Q)return ue;const Ye=Ce.toLowerCase();if(Ye==="p"){const Ue=Q==="blue"?-1:1,it=Q==="blue"?6:1,Wt=V.row+Ue;if(Wt>=0&&Wt<8&&Hn(Ce,V.row,V.col,Wt,V.col,!0,Q,Z,!0)&&ue.push({row:Wt,col:V.col}),V.row===it){const Pn=V.row+2*Ue;Pn>=0&&Pn<8&&Hn(Ce,V.row,V.col,Pn,V.col,!0,Q,Z,!0)&&ue.push({row:Pn,col:V.col})}for(const Pn of[-1,1]){const sn=V.col+Pn,di=V.row+Ue;sn>=0&&sn<8&&di>=0&&di<8&&Hn(Ce,V.row,V.col,di,sn,!0,Q,Z,!0)&&ue.push({row:di,col:sn})}}else if(Ye==="n"){const Ue=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[it,Wt]of Ue){const Pn=V.row+it,sn=V.col+Wt;Pn>=0&&Pn<8&&sn>=0&&sn<8&&Hn(Ce,V.row,V.col,Pn,sn,!0,Q,Z,!0)&&ue.push({row:Pn,col:sn})}}else for(let Ue=0;Ue<8;Ue++)for(let it=0;it<8;it++)Hn(Ce,V.row,V.col,Ue,it,!0,Q,Z,!0)&&ue.push({row:Ue,col:it});return ue},yr=(V,Z=ve)=>{if(!Pm(Z,V))return!1;for(let Q=0;Q<8;Q++)for(let ue=0;ue<8;ue++){const Ce=Z[Q][ue];if(Ce&&oi(Ce)===V&&Jr({row:Q,col:ue},Z,V).length>0)return!1}return!0},JC=(V,Z=ve)=>{if(Pm(Z,V))return!1;for(let Q=0;Q<8;Q++)for(let ue=0;ue<8;ue++){const Ce=Z[Q][ue];if(Ce&&oi(Ce)===V&&Jr({row:Q,col:ue},Z,V).length>0)return!1}return!0},DF=(V,Z)=>{if(console.log("[CLICK] Square clicked:",{row:V,col:Z}),console.log("[CLICK] Game mode:",Jn,"Player color:",qe),console.log("[CLICK] Current player:",Se,"Player color:",qe),Jn!==us.ACTIVE||!qe){console.log("[CLICK] Game not active or no player color");return}const Q=ve[V][Z],ue=Q?oi(Q):null;if(console.log("[CLICK] Piece at square:",Q,"Piece color:",ue),Se!==qe){console.log("[CLICK] Not player's turn. Current:",Se,"Player:",qe);return}if(Q&&ue===qe){Fe({row:V,col:Z});const Ce=Jr({row:V,col:Z});at(Ce);return}if(xe&&Ut.some(Ce=>Ce.row===V&&Ce.col===Z)){Wle(xe,{row:V,col:Z}),Fe(null),at([]);return}Fe(null),at([])},Wle=async(V,Z)=>{if(console.log("[PROMOTION DEBUG] makeMove called with:",{from:V,to:Z,playerColor:qe,currentPlayer:Se}),!qe||Se!==qe){console.log("[PROMOTION DEBUG] Early return - playerColor:",qe,"currentPlayer:",Se);return}const Q=ve[V.row][V.col];if(!Q){console.log("[PROMOTION DEBUG] No piece at position:",V);return}if(console.log("[PROMOTION DEBUG] Piece:",Q,"isPawn:",Q.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] Current player:",Se,"to.row:",Z.row),console.log("[PROMOTION DEBUG] Player color:",qe),console.log("[PROMOTION DEBUG] Promotion condition check:"),console.log("[PROMOTION DEBUG] - piece.toUpperCase() === P:",Q.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] - currentPlayer === red && to.row === 7:",Se==="red"&&Z.row===7),console.log("[PROMOTION DEBUG] - currentPlayer === blue && to.row === 0:",Se==="blue"&&Z.row===0),console.log("[PROMOTION DEBUG] - Full condition:",Q.toUpperCase()==="P"&&(Se==="red"&&Z.row===7||Se==="blue"&&Z.row===0)),Q.toUpperCase()==="P"&&(Se==="red"&&Z.row===7||Se==="blue"&&Z.row===0)){console.log("[PROMOTION] Showing promotion dialog for piece:",Q,"at position:",Z),zr({from:V,to:Z}),Qr(!0);return}await MF(V,Z)},MF=async(V,Z,Q="q")=>{if(!qe||Se!==qe||!ve[V.row][V.col])return;const Ye=ve[Z.row][Z.col]!==null;if(Om(Ye?"capture":"move"),Ye){sr({row:Z.row,col:Z.col,show:!0}),setTimeout(()=>{BF(V,Z,Q),sr(null)},500);return}BF(V,Z,Q)},BF=async(V,Z,Q="q")=>{if(!qe||Se!==qe)return;const ue=ve[V.row][V.col];if(!ue)return;const Ce=ve.map(Pn=>[...Pn]);let Ye=ue;console.log("[PROMOTION DEBUG] executeMoveAfterAnimation - checking promotion:"),console.log("[PROMOTION DEBUG] - piece:",ue,"isPawn:",ue.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] - playerColor:",qe,"to.row:",Z.row),console.log("[PROMOTION DEBUG] - promotion condition:",ue.toUpperCase()==="P"&&(qe==="red"&&Z.row===7||qe==="blue"&&Z.row===0)),console.log("[PROMOTION DEBUG] - promotionPiece:",Q),ue.toUpperCase()==="P"&&(qe==="red"&&Z.row===7||qe==="blue"&&Z.row===0)&&(Ye=qe==="red"?Q.toUpperCase():Q.toLowerCase(),console.log("[PROMOTION DEBUG] - Promoting pawn to:",Ye)),Hle(Ce,V,Z,ue),Ce[Z.row][Z.col]=Ye,Ce[V.row][V.col]=null,Gle(V,Z,ue);const Ue=Se==="blue"?"red":"blue";Pm(Ce,Ue)&&Om("check");let it="active",Wt=null;if(yr(Ue,Ce))it="finished",Wt=Se,ze(`${Se==="red"?"Red":"Blue"} wins by checkmate!`),Om(Se===qe?"victory":"loser"),zle(),console.log("[SCORE] Updating scores - Winner:",Se,"Loser:",Ue),console.log("[SCORE] Contract game data:",L),console.log("[SCORE] Player game invite code:",F),L&&L.length>=2?(console.log("[SCORE] Using contract data for both players update"),await qf(Se,L[0],L[1])):(console.log("[SCORE] Contract data not available, falling back to single player update"),await Gf(Se===qe?"win":"loss"),await eu()),Wt===qe&&(console.log("[CONTRACT] Triggering automatic payout for winner:",Wt),setTimeout(()=>{ye()},2e3));else if(JC(Ue,Ce)){const Pn=Se;it="finished",ze(`${Pn==="red"?"Red":"Blue"} wins by stalemate!`),Om(Pn===qe?"victory":"loser"),console.log("[SCORE] Updating scores - Stalemate winner:",Pn,"Loser:",Ue),console.log("[SCORE] Contract game data:",L),console.log("[SCORE] Player game invite code:",F),L&&L.length>=2?(console.log("[SCORE] Using contract data for both players update"),await qf(Pn,L[0],L[1])):(console.log("[SCORE] Contract data not available, falling back to single player update"),await Gf(Pn===qe?"win":"loss"),await eu()),Pn===qe&&(console.log("[CONTRACT] Triggering automatic payout for stalemate winner:",Pn),setTimeout(()=>{ye()},2e3))}try{if(!A){console.error("[BUG] inviteCode is missing when trying to update game!"),ze("Game code missing. Please reload or rejoin the game.");return}console.log("[DEBUG] About to update game. inviteCode:",A,"gameData:",{board:{positions:Ce},current_player:Ue,game_state:it,winner:Wt,last_move:{from:V,to:Z}});const sn={...await Ti.getGame(A),board:{positions:nu(Ce),rows:8,cols:8},current_player:Ue,game_state:it,winner:Wt,last_move:{from:V,to:Z}};console.log("[FIREBASE] Storing data in Firebase:",sn),await Ti.updateGame(A,sn),console.log("[FIREBASE] Game updated successfully"),console.log("[FIREBASE] Real-time event should be delivered immediately")}catch(Pn){console.error("[DATABASE] Error updating game:",Pn)}_e(Ce),Re(Ue),Es({from:V,to:Z}),Qr(!1),zr(null)},zle=()=>{Xl(!0);for(let V=0;V<50;V++)setTimeout(()=>{const Z=document.createElement("div");Z.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(Z),setTimeout(()=>Z.remove(),300)},V*100);pc.current&&clearTimeout(pc.current),pc.current=setTimeout(()=>{Xl(!1)},5e3)},Hle=(V,Z,Q,ue)=>{if(ue.toLowerCase()==="k"&&Math.abs(Z.col-Q.col)===2){if(Q.col===6)V[Z.row][7]=null,V[Z.row][5]=oi(ue)==="blue"?"r":"R";else if(Q.col===2){const Ce=V[Z.row][3];V[Z.row][0]=null,V[Z.row][3]=oi(ue)==="blue"?"r":"R",Ce&&Ce.toLowerCase()==="q"&&(V[Z.row][4]=Ce)}}ue.toLowerCase()==="p"&&Math.abs(Z.col-Q.col)===1&&V[Q.row][Q.col]===null&&Wn.lastPawnDoubleMove&&Wn.lastPawnDoubleMove.row===Z.row&&Wn.lastPawnDoubleMove.col===Q.col&&(V[Z.row][Q.col]=null)},Gle=(V,Z,Q)=>{const ue={...Wn};Q.toLowerCase()==="k"?oi(Q)==="blue"?ue.blueKingMoved=!0:ue.redKingMoved=!0:Q.toLowerCase()==="r"&&(oi(Q)==="blue"?(V.col===0&&(ue.blueRooksMove.left=!0),V.col===7&&(ue.blueRooksMove.right=!0)):(V.col===0&&(ue.redRooksMove.left=!0),V.col===7&&(ue.redRooksMove.right=!0))),Q.toLowerCase()==="p"&&Math.abs(V.row-Z.row)===2?ue.lastPawnDoubleMove={row:Z.row,col:Z.col}:ue.lastPawnDoubleMove=null,Nm(ue)},Om=V=>{if(!ls)return;let Z="";switch(V){case"move":Z="/images/move.mp3";break;case"capture":Z="/images/capture.mp3";break;case"check":Z="/images/play.mp3";break;case"checkmate":Z="/images/victory.mp3";break;case"victory":Z="/images/victory.mp3";break;case"loser":Z="/images/loser.mp3";break;case"upgrade":Z="/images/upgrade.mp3";break;default:Z="/images/move.mp3"}try{const Q=new Audio(Z);Q.volume=.3,Q.play().catch(ue=>console.warn("Audio play failed:",ue))}catch(Q){console.warn("Sound play failed:",Q)}},qle=async()=>{if(A)try{console.log("[RESET] Resetting corrupted game data for:",A);const V={board:{positions:nu(Ph),rows:8,cols:8},current_player:"blue",game_state:"active",winner:null,last_move:null};await Ti.updateGame(A,V),console.log("[RESET] Successfully reset game data"),ze("Game reset successfully. You can now make moves.")}catch(V){console.error("[RESET] Error resetting game data:",V),ze("Failed to reset game. Please try again.")}},Vle=async()=>{try{console.warn("[STUCK GAMES] checkStuckGames is not implemented.")}catch(V){console.error("Error checking stuck games:",V)}},Kle=async()=>{if(console.log("[FIX] Attempting to fix missing player data..."),!A||!r){console.log("[FIX] Missing inviteCode or address");return}try{const V=await Ti.getGame(A);if(!V){console.log("[FIX] No game data found");return}if(console.log("[FIX] Current game data:",V),L&&Array.isArray(L)){const[Z,Q,ue,Ce,Ye,Ue]=L;console.log("[FIX] Contract data for fixing:"),console.log("[FIX] - Contract player1 (blue):",Z),console.log("[FIX] - Contract player2 (red):",Q),console.log("[FIX] - Contract isActive:",ue),console.log("[FIX] - Firebase blue_player:",V.blue_player),console.log("[FIX] - Firebase red_player:",V.red_player),console.log("[FIX] - Firebase game_state:",V.game_state);let it=!1;const Wt={};Q&&Q!=="0x0000000000000000000000000000000000000000"&&(!V.red_player||V.red_player==="0x0000000000000000000000000000000000000000")&&(console.log("[FIX] Fixing red player address in Firebase"),Wt.red_player=Q,it=!0),Z&&Z!=="0x0000000000000000000000000000000000000000"&&(!V.blue_player||V.blue_player==="0x0000000000000000000000000000000000000000")&&(console.log("[FIX] Fixing blue player address in Firebase"),Wt.blue_player=Z,it=!0),Z&&Q&&Z!=="0x0000000000000000000000000000000000000000"&&Q!=="0x0000000000000000000000000000000000000000"&&(V.game_state==="waiting"||!V.game_state)&&(console.log("[FIX] Activating game in Firebase"),Wt.game_state="active",Wt.current_player="blue",it=!0),ue&&V.game_state!=="active"&&(console.log("[FIX] Syncing game state to active"),Wt.game_state="active",it=!0),it?(console.log("[FIX] Updating Firebase with:",Wt),await Ti.updateGame(A,Wt),console.log("[FIX] Firebase updated successfully")):console.log("[FIX] No missing player data to fix")}else console.log("[FIX] No contract data available for fixing")}catch(V){console.error("[FIX] Error fixing missing player data:",V)}},Yle=(V,Z)=>{if(!ve||!Array.isArray(ve)||ve.length!==8||!ve[V]||!Array.isArray(ve[V])||ve[V].length!==8)return console.warn("[SAFETY] Invalid board structure in renderSquare:",{row:V,col:Z,board:ve}),b.jsx("div",{className:"square error",children:b.jsx("div",{className:"error-indicator",children:"!"})},`${V}-${Z}`);const Q=ve[V][Z],ue=(xe==null?void 0:xe.row)===V&&(xe==null?void 0:xe.col)===Z,Ce=Ut.some(it=>it.row===V&&it.col===Z),Ye=ed&&(ed.from.row===V&&ed.from.col===Z||ed.to.row===V&&ed.to.col===Z),Ue=Q&&Q.toUpperCase()==="K"&&Pm(ve,oi(Q));return b.jsxs("div",{className:`square ${ue?"selected":""} ${Ce?"legal-move":""} ${Ye?"last-move":""} ${Ue?"square-in-check":""}`,onClick:()=>DF(V,Z),onTouchStart:it=>nue(V,Z,it),onTouchMove:rue,children:[Q&&b.jsx("div",{className:"piece",style:{backgroundImage:jM[Q]?`url(${jM[Q]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),Ce&&b.jsx("div",{className:"legal-move-indicator"})]},`${V}-${Z}`)},Qle=()=>{if(console.log("[PROMOTION DEBUG] renderPromotionDialog called - showPromotion:",Wr,"promotionMove:",Zu),!Wr||!Zu)return console.log("[PROMOTION DEBUG] Not rendering dialog - showPromotion:",Wr,"promotionMove:",Zu),null;const V=Se==="blue"?["q","r","b","n"]:["Q","R","B","N"];return b.jsx("div",{className:"promotion-dialog",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.9)",border:"2px solid gold",borderRadius:"8px",padding:"20px",zIndex:1e3},children:b.jsxs("div",{className:"promotion-content",children:[b.jsx("h3",{style:{color:"white",marginBottom:"15px"},children:"Choose promotion piece:"}),b.jsx("div",{className:"promotion-pieces",style:{display:"flex",gap:"10px"},children:V.map(Z=>b.jsx("div",{className:"promotion-piece",onClick:()=>{console.log("[PROMOTION] Selected piece:",Z),MF(Zu.from,Zu.to,Z),Qr(!1),zr(null)},style:{cursor:"pointer",padding:"10px",border:"2px solid white",borderRadius:"4px",background:"rgba(255, 255, 255, 0.1)"},children:b.jsx("img",{src:jM[Z],alt:Z,style:{width:"40px",height:"40px"}})},Z))})]})})},Jle=()=>b.jsxs("div",{className:"piece-gallery",children:[b.jsx("h3",{children:"Chess Pieces"}),b.jsx("div",{className:"piece-gallery-grid",children:dit.map(V=>b.jsxs("div",{className:"piece-gallery-item",onClick:()=>{Nw(Yr===V.key?null:V.key)},children:[b.jsx("img",{src:V.img,alt:V.name,className:"piece-gallery-img"}),b.jsx("div",{className:"piece-gallery-name",children:V.name}),Yr===V.key&&b.jsx("div",{className:"piece-gallery-desc",children:V.desc})]},V.key))})]}),LF=()=>b.jsxs("div",{className:"chess-multiplayer-lobby",children:[b.jsx("h2",{children:"Multiplayer Chess Lobby"}),s?b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"status-bar",children:["Connected: ",sl(r)]}),b.jsxs("div",{className:"lobby-content",children:[b.jsxs("div",{className:"open-games",children:[b.jsx("h3",{children:"Open Games"}),b.jsxs("div",{className:"games-list",children:[Y.map(V=>b.jsxs("div",{className:"game-item",children:[b.jsxs("div",{className:"game-info",children:[b.jsx("div",{className:"game-id",children:V.game_title||"Untitled Game"}),b.jsxs("div",{className:"wager",children:["Wager: ",(parseFloat(V.bet_amount)/1e18).toFixed(2)," tDMT"]}),b.jsxs("div",{className:"title",children:["Created by: ",sl(V.blue_player)]})]}),b.jsx("button",{className:"join-btn",onClick:()=>Ca(V.invite_code),children:"Join Game"})]},V.invite_code)),Y.length===0&&b.jsx("div",{className:"no-games",children:"No open games available"})]})]}),b.jsxs("div",{className:"actions",children:[b.jsx("button",{className:"create-btn",onClick:()=>we(!0),disabled:de,children:"Create New Game"}),b.jsx("button",{onClick:tu,style:{marginTop:"10px",background:"rgba(0, 123, 255, 0.1)",border:"2px solid #007bff",color:"#007bff",padding:"8px 16px",borderRadius:"0px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"14px",fontWeight:"bold",transition:"all 0.3s ease"},children:"🔄 Refresh Lobby"}),b.jsx("button",{onClick:()=>window.location.href="/chess",style:{marginTop:"10px",background:"rgba(255, 193, 7, 0.1)",border:"2px solid #ffc107",color:"#ffc107",padding:"12px 24px",borderRadius:"0px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:"🏠 Back to Chess Home"})]}),de&&b.jsxs("div",{className:"create-form",children:[b.jsx("h3",{children:"Create New Game"}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Wager (tDMT):"}),b.jsx("input",{type:"number",value:Go,onChange:V=>mr(Number(V.target.value)),placeholder:"0.1",min:"0",step:"0.1"})]}),b.jsxs("div",{className:"form-actions",children:[b.jsx("button",{className:"create-confirm-btn",onClick:Vf,disabled:Go<=0,children:"Create Game"}),b.jsx("button",{className:"cancel-btn",onClick:()=>we(!1),children:"Cancel"})]})]})]})]}):b.jsx("div",{className:"wallet-notice",children:"Please connect your wallet to play multiplayer chess"})]}),Zle=()=>b.jsxs("div",{className:"chess-multiplayer-waiting",children:[b.jsx("h2",{children:"Waiting for Opponent"}),b.jsxs("div",{className:"game-code",children:["Invite Code: ",b.jsx("strong",{children:A})]}),b.jsxs("div",{className:"game-info",children:[b.jsxs("p",{children:["Wager: ",T," tDMT"]}),b.jsx("p",{children:"Share this invite code with your opponent"})]}),b.jsxs("div",{className:"waiting-actions",children:[b.jsx("button",{onClick:fe,disabled:K||B,className:"refund-game-btn",children:K||B?"⏳ Refunding...":"💰 Refund Game"}),b.jsx("p",{className:"refund-note",children:"You can refund your wager anytime before an opponent joins"})]})]}),Xle=()=>b.jsxs("div",{className:"chess-game",children:[b.jsxs("div",{className:"chess-header",children:[b.jsx("h2",{children:"♔ Multiplayer Chess"}),b.jsxs("div",{className:"chess-controls",children:[e&&b.jsx("button",{onClick:e,className:"minimize-btn",title:"Minimize",children:"_"}),b.jsx("button",{onClick:t,className:"close-btn",title:"Close",children:"×"})]})]}),b.jsxs("div",{className:"game-info",children:[b.jsxs("div",{className:"game-status-section",children:[b.jsx("span",{className:`status ${Bt.includes("Check")?"check-status":""}`,children:Bt}),b.jsxs("span",{className:`current-player ${Se==="red"?"red-turn":"blue-turn"}`,children:["Current: ",Se==="red"?"♔ Red":"♔ Blue"]})]}),b.jsxs("div",{className:"game-details-section",children:[b.jsxs("span",{className:"wager-display",children:["💰 ",T," tDMT"]}),In&&b.jsxs("span",{className:"opponent-info",children:["vs ",sl(In)]})]}),Jn===us.FINISHED&&b.jsxs("div",{className:"game-finished-actions",children:[b.jsx("button",{onClick:ye,disabled:f,className:"claim-winnings-btn",children:f?"⏳ Claiming...":"🏆 Claim Winnings"}),b.jsx("button",{onClick:()=>window.location.href="/chess",className:"back-to-chess-btn",children:"🏠 Back to Chess Home"})]})]}),b.jsxs("div",{className:"game-stable-layout",children:[b.jsxs("div",{className:"left-sidebar",children:[b.jsxs("div",{className:"sidebar-tabs",children:[b.jsx("button",{className:`tab-button ${ge==="moves"?"active":""}`,onClick:()=>ae("moves"),children:"📝 Moves"}),b.jsx("button",{className:`tab-button ${ge==="leaderboard"?"active":""}`,onClick:()=>ae("leaderboard"),children:"🏆 Leaderboard"})]}),ge==="moves"&&b.jsxs("div",{className:"move-history",children:[b.jsx("h4",{children:"Move History"}),b.jsx("div",{className:"moves",children:wn.slice().reverse().map((V,Z)=>b.jsx("div",{className:"move",children:V},wn.length-1-Z))})]}),ge==="leaderboard"&&b.jsxs("div",{className:"leaderboard",children:[b.jsx("h4",{children:"Leaderboard"}),b.jsx("div",{className:"leaderboard-table",children:b.jsxs("table",{children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{children:"#"}),b.jsx("th",{children:"Player"}),b.jsx("th",{children:"W"}),b.jsx("th",{children:"L"}),b.jsx("th",{children:"D"}),b.jsx("th",{children:"Pts"})]})}),b.jsx("tbody",{children:Or.map((V,Z)=>b.jsxs("tr",{children:[b.jsx("td",{children:Z+1}),b.jsx("td",{children:V.username}),b.jsx("td",{children:V.wins}),b.jsx("td",{children:V.losses}),b.jsx("td",{children:V.draws}),b.jsx("td",{children:V.points})]},V.username))})]})})]})]}),b.jsxs("div",{className:"center-area",children:[b.jsxs("div",{className:"chessboard-container",children:[b.jsx("div",{className:"chessboard",children:Array.from({length:8},(V,Z)=>b.jsx("div",{className:"board-row",children:Array.from({length:8},(Q,ue)=>Yle(Z,ue))},Z))}),Xu&&Xu.show&&b.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${Xu.row*12.5}%`,left:`${Xu.col*12.5}%`,width:"12.5%",height:"12.5%",pointerEvents:"none",zIndex:1e3},children:b.jsx("div",{className:"explosion-effect",children:"💥"})})]}),b.jsxs("div",{className:"game-controls",children:[b.jsx("div",{className:"control-section",children:Bt.includes("corrupted")&&b.jsx("button",{className:"reset-game-btn",onClick:qle,children:"🔄 Reset Game"})}),b.jsx("div",{className:"settings-section",children:b.jsxs("div",{className:"sound-controls",children:[b.jsxs("label",{className:"control-label",children:[b.jsx("input",{type:"checkbox",id:"sound-toggle",checked:ls,onChange:V=>bs(V.target.checked),className:"control-checkbox"}),b.jsx("span",{className:"control-text",children:"🎵 Sound Effects"})]}),b.jsxs("label",{className:"control-label",children:[b.jsx("input",{type:"checkbox",id:"victory-toggle",checked:rr,onChange:V=>Xl(V.target.checked),className:"control-checkbox"}),b.jsx("span",{className:"control-text",children:"🎉 Victory Celebration"})]})]})}),d&&b.jsx("button",{className:"claim-winnings-btn",onClick:ye,disabled:f||M||x,children:f||M||x?"⏳ Claiming...":"🏆 Claim Winnings"})]})]}),b.jsx("div",{className:"right-sidebar"})]}),Iw&&b.jsx("div",{className:"piece-gallery-panel",children:Jle()}),Qle(),rr&&b.jsxs("div",{className:"victory-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)"},children:[b.jsx("div",{className:"balloons-container"}),b.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:"320px",height:"auto",zIndex:2}}),b.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24},children:[b.jsx("button",{onClick:()=>qt(us.LOBBY),children:"Back to Lobby"}),b.jsx("button",{onClick:()=>window.location.reload(),children:"New Game"})]})]})]}),eue=()=>null;G.useEffect(()=>{eu(),tu(),Vle();const V=setInterval(tu,3e4);return()=>{clearInterval(V),ir.current&&ir.current(),pc.current&&clearTimeout(pc.current)}},[]),console.log("[RENDER] Current game mode:",Jn,"Game ID:",A);const tue=(()=>{switch(Jn){case us.LOBBY:return LF();case us.WAITING:return Zle();case us.ACTIVE:case us.FINISHED:return Xle();default:return LF()}})(),nue=(V,Z,Q)=>{Q.preventDefault(),DF(V,Z)},rue=V=>{V.preventDefault()};return b.jsxs(b.Fragment,{children:[tue,eue()]})},WM={AI:"ai"},pit=1992,Vx={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},IK=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],git=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],mit=()=>{const[t,e]=G.useState(!1),n=G.useRef(null),r=G.useRef(!1);G.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=new Worker("/stockfish.worker.js");a.onmessage=c=>{console.log("[DEBUG] Stockfish worker message:",c.data)},a.onerror=c=>{console.error("[DEBUG] Stockfish worker error:",c),e(!1),r.current=!1},console.log("[DEBUG] LawbBot initialized successfully"),n.current=a,e(!0),r.current=!1,console.log("[DEBUG] Stockfish worker ready for commands")}catch(a){console.error("[DEBUG] Failed to create Stockfish worker:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=G.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var p;const f=h.data;typeof f=="string"&&f.startsWith("bestmove ")&&(l=f.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(p=n.current)==null||p.removeEventListener("message",d),c(l)))};try{n.current.addEventListener("message",d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeEventListener("message",d)}catch(g){console.warn("[DEBUG] Error removing message listener:",g)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=G.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},yit=()=>{const[t,e]=G.useState(null),[n,r]=G.useState(!1),s=G.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=G.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},wit=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s}=DI(),i=MI();RAe();const{open:o}=tN(),[a,c]=G.useState(WM.AI),[l,u]=G.useState(()=>JSON.parse(JSON.stringify(IK))),[d,h]=G.useState("blue"),[f,p]=G.useState(null),[g,m]=G.useState("active"),[y,w]=G.useState("hard"),[C,N]=G.useState("Connect wallet to play"),[I,k]=G.useState([]),[P,U]=G.useState([]),[M,W]=G.useState([]),[j,K]=G.useState(null),[$,v]=G.useState(!1),[E,_]=G.useState(!1),[O,x]=G.useState(null),[B,F]=G.useState(null),[L]=G.useState(""),[A]=G.useState(.1),[H,re]=G.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),se=G.useRef(null),ge=G.useRef(!1),ae=G.useRef(l),fe=G.useRef(null),ye=G.useRef(null),ve=G.useRef(!1),_e=G.useRef(!1),[Se,Re]=G.useState(!1),[xe,Fe]=G.useState(!1),[Ut,at]=G.useState(!1),[wn]=G.useState(!0);G.useEffect(()=>{document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode")},[]);const{stockfishReady:Qn}=mit(),{getOpeningData:Bt}=yit(),[ze,Jn]=G.useState("loading"),[qt,qe]=G.useState(!1),[un,In]=G.useState([]),[z,T]=G.useState(!1),[D,Y]=G.useState(()=>{const X=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],te=Math.floor(Math.random()*X.length),Ee=X[te];return console.log("[DEBUG] Initial random chessboard selected:",Ee,"(index:",te,")"),Ee}),[ee,de]=G.useState(!0),[we,It]=G.useState(!1);G.useEffect(()=>{!s||!r?(N("Connect wallet to play"),v(!1),Re(!1),o()):i!==pit?(N("Switch to Sanko Testnet to play"),v(!1),Re(!1),o()):N("Select game mode")},[s,r,i,o]);const Vt=()=>{const X=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],te=Math.floor(Math.random()*X.length),Ee=X[te];return console.log("[DEBUG] Random chessboard selected:",Ee,"(index:",te,")"),Ee};G.useEffect(()=>{if(Qn)Jn("ready");else{const X=window.setTimeout(()=>{Qn||(Jn("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(X)}},[Qn]),G.useEffect(()=>{ae.current=l},[l]),G.useEffect(()=>(!se.current&&typeof Worker<"u"&&(se.current=new Worker("/aiWorker.js"),se.current.onmessage=X=>{console.log("[DEBUG] AI worker response received:",X.data);const{move:te,nodes:Ee}=X.data;te&&ge.current&&g==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",te),console.log("[DEBUG] AI searched",Ee,"nodes"),ge.current=!1,ye.current&&(window.clearTimeout(ye.current),ye.current=null),fe.current&&fe.current(te.from,te.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},se.current.onerror=X=>{console.error("[DEBUG] AI worker error:",X),N("AI worker error - using fallback mode"),ge.current=!1}),()=>{se.current&&(se.current.terminate(),se.current=null),ye.current&&(window.clearTimeout(ye.current),ye.current=null)}),[]),G.useEffect(()=>{et()},[]);const et=async()=>{try{await Kae();const X=await Vae(20);U(X),console.log("Leaderboard data loaded:",X)}catch(X){N("Failed to load leaderboard"),console.error("Leaderboard error:",X)}},bn=async X=>{if(console.log("[DEBUG] updateScore called with:",X),!r){console.log("[DEBUG] No wallet address, returning");return}try{console.log("[DEBUG] Updating score for address:",Q0(r)),await Mk(r,X)?(console.log("[DEBUG] Successfully updated score for:",Q0(r)),await et()):console.error("[DEBUG] Failed to update score")}catch(te){console.error("[DEBUG] Error in updateScore:",te)}},tt=X=>X&&X===X.toUpperCase()?"red":"blue",ws=(X,te)=>X>=0&&X<8&&te>=0&&te<8,Go=(X,te)=>`${String.fromCharCode(97+te)}${8-X}`,mr=(X,te)=>{const Ee=te==="blue"?"k":"K";let be=null;for(let Ke=0;Ke<8;Ke++){for(let Nt=0;Nt<8;Nt++)if(X[Ke][Nt]===Ee){be={row:Ke,col:Nt};break}if(be)break}if(!be)return console.log(`King not found for ${te}`),!1;const he=te==="blue"?"red":"blue",Ge=Ns(be.row,be.col,he,X);return console.log(`${te} king at ${be.row},${be.col} under attack: ${Ge}`),Ge},Ns=(X,te,Ee,be)=>{for(let he=0;he<8;he++)for(let Ge=0;Ge<8;Ge++){const Ke=be[he][Ge];if(Ke&&tt(Ke)===Ee&&rr(Ke,he,Ge,X,te,!1,Ee,be,!0))return!0}return!1},Iw=(X,te,Ee,be,he,Ge=l)=>{const Ke=Ge.map(zn=>[...zn]),Nt=Ke[X][te];return Ke[Ee][be]=Nt,Ke[X][te]=null,mr(Ke,he)},xs=(X,te,Ee,be,he,Ge)=>{const Ke=X==="blue"?-1:1,Nt=X==="blue"?6:1;if(!ws(be,he)||X==="blue"&&be>=te||X==="red"&&be<=te)return!1;const zn=Math.abs(be-te),Hn=Math.abs(he-Ee);if((zn===1&&Hn===0||zn===2&&Hn===0&&te===Nt||zn===1&&Hn===1)&&zn<=2&&Hn<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:X,from:`${te},${Ee}`,to:`${be},${he}`}),Ee===he&&be===te+Ke)return Ge[be][he]===null;if(Ee===he&&te===Nt&&be===te+2*Ke)return Ge[te+Ke][Ee]===null&&Ge[be][he]===null;if(Math.abs(Ee-he)===1&&be===te+Ke){const yr=Ge[be][he];return yr!==null&&tt(yr)!==X}if(Math.abs(Ee-he)===1&&be===te+Ke){const yr=Ge[te][he];if(yr&&tt(yr)!==X&&yr.toLowerCase()==="p"&&H.lastPawnDoubleMove&&H.lastPawnDoubleMove.row===te&&H.lastPawnDoubleMove.col===he)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},Yr=(X,te,Ee,be,he)=>X!==Ee&&te!==be?!1:zr(X,te,Ee,be,he),Nw=(X,te,Ee,be)=>{const he=Math.abs(X-Ee),Ge=Math.abs(te-be);return he===2&&Ge===1||he===1&&Ge===2},Wr=(X,te,Ee,be,he)=>Math.abs(X-Ee)!==Math.abs(te-be)?!1:zr(X,te,Ee,be,he),Qr=(X,te,Ee,be,he)=>Yr(X,te,Ee,be,he)||Wr(X,te,Ee,be,he),Zu=(X,te,Ee,be,he)=>{const Ge=Math.abs(te-be),Ke=Math.abs(Ee-he);if(Ge<=1&&Ke<=1)return!0;if(Ge===0&&Ke===2){if(X==="blue"&&!H.blueKingMoved){if(he===6&&!H.blueRooksMove.right||he===2&&!H.blueRooksMove.left)return!0}else if(X==="red"&&!H.redKingMoved&&(he===6&&!H.redRooksMove.right||he===2&&!H.redRooksMove.left))return!0}return!1},zr=(X,te,Ee,be,he)=>{const Ge=X===Ee?0:(Ee-X)/Math.abs(Ee-X),Ke=te===be?0:(be-te)/Math.abs(be-te);let Nt=X+Ge,zn=te+Ke;for(;Nt!==Ee||zn!==be;){if(he[Nt][zn]!==null)return!1;Nt+=Ge,zn+=Ke}return!0},rr=(X,te,Ee,be,he,Ge=!0,Ke=tt(X),Nt=l,zn=!1)=>{if(!ws(be,he))return zn||console.log("[ILLEGAL MOVE] Out of board:",{piece:X,startRow:te,startCol:Ee,endRow:be,endCol:he}),!1;const Hn=Nt[be][he];if(Hn&&tt(Hn)===Ke)return zn||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:X,startRow:te,startCol:Ee,endRow:be,endCol:he}),!1;const Jr=X.toLowerCase();let yr=!1;switch(Jr){case"p":yr=xs(Ke,te,Ee,be,he,Nt);break;case"r":yr=Yr(te,Ee,be,he,Nt);break;case"n":yr=Nw(te,Ee,be,he);break;case"b":yr=Wr(te,Ee,be,he,Nt);break;case"q":yr=Qr(te,Ee,be,he,Nt);break;case"k":yr=Zu(Ke,te,Ee,be,he);break}return yr?yr&&Ge&&Iw(te,Ee,be,he,Ke,Nt)?(zn||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:X,startRow:te,startCol:Ee,endRow:be,endCol:he}),!1):yr:(zn||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:X,startRow:te,startCol:Ee,endRow:be,endCol:he,playerColor:Ke,pieceType:Jr,targetPiece:Nt[be][he],targetPieceColor:Nt[be][he]?tt(Nt[be][he]):null}),!1)},Xl=(X,te=l,Ee=d)=>{const be=[],he=te[X.row][X.col];if(!he||tt(he)!==Ee)return be;const Ge=he.toLowerCase();if(Ge==="p"){const Ke=Ee==="blue"?-1:1,Nt=Ee==="blue"?6:1,zn=X.row+Ke;if(zn>=0&&zn<8&&rr(he,X.row,X.col,zn,X.col,!0,Ee,te,!0)&&be.push({row:zn,col:X.col}),X.row===Nt){const Hn=X.row+2*Ke;Hn>=0&&Hn<8&&rr(he,X.row,X.col,Hn,X.col,!0,Ee,te,!0)&&be.push({row:Hn,col:X.col})}for(const Hn of[-1,1]){const Jr=X.col+Hn,yr=X.row+Ke;Jr>=0&&Jr<8&&yr>=0&&yr<8&&rr(he,X.row,X.col,yr,Jr,!0,Ee,te,!0)&&be.push({row:yr,col:Jr})}}else if(Ge==="n"){const Ke=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[Nt,zn]of Ke){const Hn=X.row+Nt,Jr=X.col+zn;Hn>=0&&Hn<8&&Jr>=0&&Jr<8&&rr(he,X.row,X.col,Hn,Jr,!0,Ee,te,!0)&&be.push({row:Hn,col:Jr})}}else for(let Ke=0;Ke<8;Ke++)for(let Nt=0;Nt<8;Nt++)rr(he,X.row,X.col,Ke,Nt,!0,Ee,te,!0)&&be.push({row:Ke,col:Nt});return be},ls=(X,te=l)=>{if(!mr(te,X))return!1;for(let Ee=0;Ee<8;Ee++)for(let be=0;be<8;be++){const he=te[Ee][be];if(he&&tt(he)===X&&Xl({row:Ee,col:be},te,X).length>0)return!1}return!0},bs=(X,te=l)=>{if(mr(te,X))return!1;for(let Ee=0;Ee<8;Ee++)for(let be=0;be<8;be++){const he=te[Ee][be];if(he&&tt(he)===X&&Xl({row:Ee,col:be},te,X).length>0)return!1}return!0},Xu=(X,te)=>{if(g!=="active"||ge.current)return;const Ee=l[X][te],be=Ee?tt(Ee):null;if(f&&M.some(he=>he.row===X&&he.col===te)){sr(f,{row:X,col:te});return}if(Ee&&be===d){const he=Xl({row:X,col:te});p({row:X,col:te}),W(he);return}p(null),W([])},sr=(X,te,Ee=!1)=>{const be=l[X.row][X.col];if(console.log("[MOVE ATTEMPT]",{from:X,to:te,piece:be,isAIMove:Ee,board:JSON.parse(JSON.stringify(l)),moveHistory:I}),!!be){if(be.toLowerCase()==="p"&&(tt(be)==="blue"&&te.row===0||tt(be)==="red"&&te.row===7)){x({from:X,to:te}),_(!0);return}Vf(X,te,"q",Ee)}};fe.current=sr;const Wn=G.useCallback((X,te,Ee=!1)=>{T(!0);const be=l.map(Ke=>[...Ke]),he=be[X.row][X.col];if(!he)return;be[te.row][te.col]=he,be[X.row][X.col]=null,qf(be,X,te,he);const Ge=tu(X,te);if(k(Ke=>{const Nt=[...Ke,Ge];return console.log("[MOVE HISTORY UPDATED]",Nt),Nt}),K({from:X,to:te}),p(null),W([]),I.length<10&&!Ee){const Ke=NK(be,d==="blue"?"red":"blue");Bt(Ke).then(Nt=>{Nt&&Nt.moves&&Nt.moves.length>0&&(In(Nt.moves.slice(0,3)),qe(!0),setTimeout(()=>qe(!1),5e3))})}Tm(X,te,he),h(Ke=>{const Nt=Ke==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",Nt),Nm(be,Nt),Nt}),Nm(be,d==="blue"?"red":"blue"),u(be),ge.current=!1,ve.current=!1,_e.current=!1,T(!1)},[l,d,I,Bt]);G.useEffect(()=>{if(!ge.current&&a==="ai"&&d==="red"&&!ve.current&&!z)if(ge.current=!0,y==="easy")setTimeout(()=>{const X=Or(l);X?sr(X.from,X.to,!0):ge.current=!1},600);else{N("AI is calculating...");const X=NK(l,d);if(_e.current)return;_e.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:X,difficulty:y,movetime:3e3})}).then(Ee=>{if(Ee.ok)return Ee.json();throw new Error("API call failed")}).then(Ee=>{console.log("[DEBUG] Stockfish API response:",Ee);const be=Ee.bestmove||Ee.move;if(be&&be!=="(none)"&&be.length===4){const he=be.charCodeAt(0)-97,Ge=parseInt(be[1]),Ke=be.charCodeAt(2)-97,Nt=parseInt(be[3]),zn=8-Ge,Hn=8-Nt;if(console.log("[DEBUG] Parsed move:",{fromCol:he,fromRowStockfish:Ge,toCol:Ke,toRowStockfish:Nt,fromRow:zn,toRow:Hn}),he>=0&&he<8&&zn>=0&&zn<8&&Ke>=0&&Ke<8&&Hn>=0&&Hn<8){const Jr={from:{row:zn,col:he},to:{row:Hn,col:Ke}},yr=l[zn][he];if(console.log("[DEBUG] Move validation:",{piece:yr,moveObj:Jr,isValid:yr&&tt(yr)==="red"&&rr(yr,zn,he,Hn,Ke,!0,"red",l)}),yr&&tt(yr)==="red"&&rr(yr,zn,he,Hn,Ke,!0,"red",l))console.log("[DEBUG] Executing Stockfish move:",Jr),sr(Jr.from,Jr.to,!0);else{console.warn("[DEBUG] Invalid Stockfish move, falling back to random");const JC=Or(l);JC&&sr(JC.from,JC.to,!0),ge.current=!1,_e.current=!1}}else{console.warn("[DEBUG] Invalid move coordinates, falling back to random");const Jr=Or(l);Jr&&sr(Jr.from,Jr.to,!0),ge.current=!1,_e.current=!1}}else{console.warn("[DEBUG] Invalid move format from API, falling back to random");const he=Or(l);he&&sr(he.from,he.to,!0),ge.current=!1,_e.current=!1}}).catch(Ee=>{console.error("[DEBUG] Stockfish API error:",Ee),N("AI error. Falling back to random moves.");const be=Or(l);be&&sr(be.from,be.to,!0),ge.current=!1,_e.current=!1})}},[d,a,y,l,H,Qn]);const Nm=(X,te)=>{console.log("Checking game end for player:",te);const Ee=X.some(he=>he.some(Ge=>Ge==="k")),be=X.some(he=>he.some(Ge=>Ge==="K"));if(!Ee)return console.log("[GAME END] KING CAPTURED - Red wins!"),m("checkmate"),N("King captured! Red wins!"),bn("loss"),at(!0),setTimeout(()=>at(!1),3e3),"checkmate";if(!be)return console.log("[GAME END] KING CAPTURED - Blue wins!"),m("checkmate"),N("King captured! You win!"),bn("win"),at(!0),setTimeout(()=>at(!1),3e3),"checkmate";if(console.log("Is king in check:",mr(X,te)),ls(te,X)){console.log("[GAME END] CHECKMATE",{winner:te==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(X)),moveHistory:I}),m("checkmate");const he=te==="blue"?"red":"blue";return he==="blue"?(N("Checkmate! You win!"),Ca("victory"),Kf(!0),It(!0),Rm(),bn("win"),at(!0),setTimeout(()=>at(!1),3e3)):(N(`Checkmate! ${he==="red"?"AI":"Opponent"} wins!`),Ca("loser"),Yf(!0),bn("loss"),at(!0),setTimeout(()=>at(!1),3e3)),"checkmate"}if(bs(te,X)){console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(X)),moveHistory:I}),m("stalemate");const he=te==="blue"?"red":"blue";return he==="blue"?(N("Stalemate! You win!"),Ca("victory"),Kf(!0),It(!0),Rm(),bn("win"),at(!0),setTimeout(()=>at(!1),3e3)):(N(`Stalemate! ${he==="red"?"AI":"Opponent"} wins!`),Ca("loser"),Yf(!0),bn("loss"),at(!0),setTimeout(()=>at(!1),3e3)),"stalemate"}return mr(X,te)?(console.log("CHECK detected!"),Ca("check"),N(`${te==="blue"?"Blue":"Red"} is in check!`)):N("Your turn"),null},Or=X=>{const te=[];for(let he=0;he<8;he++)for(let Ge=0;Ge<8;Ge++){const Ke=X[he][Ge];Ke&&tt(Ke)==="red"&&te.push({row:he,col:Ge})}for(let he=te.length-1;he>0;he--){const Ge=Math.floor(Math.random()*(he+1));[te[he],te[Ge]]=[te[Ge],te[he]]}const Ee=[],be=[];for(const he of te){const Ge=Xl(he,X,"red");for(const Ke of Ge){const Nt=X[Ke.row][Ke.col];if(Nt&&tt(Nt)==="blue"){const Hn={p:100,n:320,b:330,r:500,q:900,k:2e4}[Nt.toLowerCase()]||0;Ee.push({from:he,to:Ke,value:Hn})}else be.push({from:he,to:Ke})}}if(Ee.length>0&&Math.random()<.3){Ee.sort((he,Ge)=>he.value-Ge.value);for(const he of Ee){const Ge=X.map(Nt=>[...Nt]),Ke=Ge[he.from.row][he.from.col];if(Ge[he.to.row][he.to.col]=Ke,Ge[he.from.row][he.from.col]=null,!mr(Ge,"red"))return{from:he.from,to:he.to}}}for(const he of be){const Ge=X.map(Nt=>[...Nt]),Ke=Ge[he.from.row][he.from.col];if(Ge[he.to.row][he.to.col]=Ke,Ge[he.from.row][he.from.col]=null,!mr(Ge,"red"))return he}Ee.sort((he,Ge)=>he.value-Ge.value);for(const he of Ee){const Ge=X.map(Nt=>[...Nt]),Ke=Ge[he.from.row][he.from.col];if(Ge[he.to.row][he.to.col]=Ke,Ge[he.from.row][he.from.col]=null,!mr(Ge,"red"))return{from:he.from,to:he.to}}return null},vs=()=>{u(JSON.parse(JSON.stringify(IK))),h("blue"),p(null),m("active"),k([]),W([]),K(null),v(!1),N("Select game mode"),re({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),ge.current&&(ge.current=!1)},ed=()=>{if(nu(),console.log("[DEBUG] startGame called, difficulty:",y,"gameMode:",a),a==="online"){v(!1),Re(!1);return}v(!0),Re(!1),N("Game started! Your turn");const X=Vt();Y(X),console.log("[DEBUG] Game started with chessboard:",X)},Es=X=>`${X.slice(0,6)}...${X.slice(-4)}`,ir=(X,te)=>{const Ee=l[X][te],be=(f==null?void 0:f.row)===X&&(f==null?void 0:f.col)===te,he=M.some(Ke=>Ke.row===X&&Ke.col===te),Ge=j&&(j.from.row===X&&j.from.col===te||j.to.row===X&&j.to.col===te);return b.jsxs("div",{className:`square ${be?"selected":""} ${he?"legal-move":""} ${Ge?"last-move":""}`,onClick:()=>Xu(X,te),onTouchStart:Ke=>wN(X,te,Ke),onTouchMove:Pm,children:[Ee&&b.jsx("div",{className:"piece",style:{backgroundImage:Vx[Ee]?`url(${Vx[Ee]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),he&&b.jsx("div",{className:"legal-move-indicator"})]},`${X}-${te}`)},pc=()=>{if(!E||!O)return null;const X=d==="blue"?["q","r","b","n"]:["Q","R","B","N"];return b.jsx("div",{className:"promotion-dialog",children:b.jsxs("div",{className:"promotion-content",children:[b.jsx("h3",{children:"Choose promotion piece:"}),b.jsx("div",{className:"promotion-pieces",children:X.map(te=>b.jsx("div",{className:"promotion-piece",onClick:()=>{Vf(O.from,O.to,te),_(!1),x(null)},style:{backgroundImage:Vx[te]?`url(${Vx[te]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},te))})]})})},[ph,xm]=G.useState(null),eu=(X=!1,te="Click a piece to learn more about it.")=>b.jsxs("div",{className:`piece-gallery${X?" piece-gallery-sm":""}`,children:[b.jsx("h3",{style:{color:"#32CD32"},children:"Lawbstation Chess Pieces"}),b.jsx("div",{className:"piece-gallery-grid",children:git.map(Ee=>b.jsxs("div",{className:"piece-gallery-item",onClick:()=>{xm(ph===Ee.key?null:Ee.key)},children:[b.jsx("img",{src:Ee.img,alt:Ee.name,className:"piece-gallery-img"}),b.jsx("div",{className:"piece-gallery-name",children:Ee.name}),ph===Ee.key&&b.jsx("div",{className:"piece-gallery-desc",children:Ee.desc})]},Ee.key))}),b.jsx("div",{className:"piece-gallery-tip",children:te})]}),Gf=()=>b.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:b.jsx("div",{className:"difficulty-controls-col",children:b.jsxs("div",{className:"difficulty-selection-panel",style:{background:"transparent",borderRadius:0,padding:"32px 24px",boxShadow:"none",textAlign:"center"},children:[b.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#00ff00",marginBottom:16,textShadow:"0 0 6px #00ff00, 0 0 2px #00ff00"},children:"Select Difficulty"}),b.jsx("p",{style:{fontSize:"1.1rem",color:"#00ff00",marginBottom:24,textShadow:"0 0 6px #00ff00, 0 0 2px #00ff00"},children:"Compete against the computer to climb the leaderboard."}),b.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[b.jsx("button",{className:`difficulty-btn${y==="easy"?" selected":""}`,style:{background:y==="easy"?"#00ff00":"transparent",color:y==="easy"?"#000":"#00ff00",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:0,border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,boxShadow:y==="easy"?"0 0 6px #00ff00, 0 0 2px #00ff00":"none"},onClick:()=>w("easy"),children:"Easy"}),b.jsx("button",{className:`difficulty-btn${y==="hard"?" selected":""}`,style:{background:y==="hard"?"#00ff00":"transparent",color:y==="hard"?"#000":"#00ff00",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:0,border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,boxShadow:y==="hard"?"0 0 6px #00ff00, 0 0 2px #00ff00":"none"},onClick:()=>w("hard"),children:"Hard"})]}),b.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{ed()},style:{background:"transparent",color:"#00ff00",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:0,boxShadow:"0 0 6px #00ff00, 0 0 2px #00ff00",border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[b.jsx("span",{role:"img","aria-label":"chess",children:"♟️"})," Start Game"]})]})})}),qf=(X,te,Ee,be)=>{if(be.toLowerCase()==="p"&&(tt(be)==="blue"&&Ee.row===0||tt(be)==="red"&&Ee.row===7)){const he=tt(be)==="blue"?"q":"Q";X[Ee.row][Ee.col]=he}if(be.toLowerCase()==="k"&&Math.abs(te.col-Ee.col)===2){if(Ee.col===6)X[te.row][7]=null,X[te.row][5]=tt(be)==="blue"?"r":"R";else if(Ee.col===2){const he=X[te.row][3];X[te.row][0]=null,X[te.row][3]=tt(be)==="blue"?"r":"R",he&&he.toLowerCase()==="q"&&(X[te.row][4]=he)}}},tu=(X,te,Ee,be)=>{const he=Go(X.row,X.col),Ge=Go(te.row,te.col);return`${he}-${Ge}`},Tm=(X,te,Ee)=>{const be={...H};Ee.toLowerCase()==="k"?tt(Ee)==="blue"?be.blueKingMoved=!0:be.redKingMoved=!0:Ee.toLowerCase()==="r"&&(tt(Ee)==="blue"?(X.col===0&&(be.blueRooksMove.left=!0),X.col===7&&(be.blueRooksMove.right=!0)):(X.col===0&&(be.redRooksMove.left=!0),X.col===7&&(be.redRooksMove.right=!0))),Ee.toLowerCase()==="p"&&Math.abs(X.row-te.row)===2?be.lastPawnDoubleMove={row:te.row,col:te.col}:be.lastPawnDoubleMove=null,re(be)},Vf=(X,te,Ee="q",be=!1)=>{l[X.row][X.col];const Ge=l[te.row][te.col]!==null;if(Ca(Ge?"capture":"move"),Ge){F({row:te.row,col:te.col,show:!0}),setTimeout(()=>{Wn(X,te,be),F(null)},500);return}Wn(X,te,be)},Ca=X=>{if(!ee)return;let te="";switch(X){case"move":te="/images/move.mp3";break;case"capture":te="/images/capture.mp3";break;case"check":te="/images/play.mp3";break;case"checkmate":te="/images/victory.mp3";break;case"victory":te="/images/victory.mp3";break;case"loser":te="/images/loser.mp3";break;case"upgrade":te="/images/upgrade.mp3";break;default:te="/images/move.mp3"}new Audio(te).play().catch(()=>{})},Rm=()=>{Ca("victory");for(let X=0;X<50;X++)setTimeout(()=>{const te=document.createElement("div");te.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(te),setTimeout(()=>te.remove(),3e3)},X*100);for(let X=0;X<15;X++)setTimeout(()=>{const te=document.createElement("div"),Ee=["#ff4444","#4444ff","#ffff44","#ff44ff","#ff8844"],be=Ee[Math.floor(Math.random()*Ee.length)];te.style.cssText=`
          position: fixed;
          width: 60px;
          height: 80px;
          background: ${be};
          border-radius: 50% 50% 50% 50% /60% 40% 60% 40%;
          left: ${Math.random()*window.innerWidth}px;
          bottom: -80px;
          z-index: 9998;
          animation: balloon-float 6s ease-out forwards;
          box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        `,document.body.appendChild(te),setTimeout(()=>te.remove(),6e3)},X*200);setTimeout(()=>It(!1),5e3)},[xw,Kf]=G.useState(!1),[Tw,Yf]=G.useState(!1),km=()=>{Kf(!1),Yf(!1)},gh=()=>{km(),vs()},rl=()=>{km(),v(!1)},nu=()=>{new Audio("/images/start.mp3").play().catch(()=>{})},ru=a==="online",[sl,oi]=G.useState("leaderboard"),wN=(X,te,Ee)=>{Ee.preventDefault(),Xu(X,te)},Pm=X=>{X.preventDefault()};return b.jsxs("div",{className:`chess-game${n?" fullscreen":""}${wn?" chess-dark-mode":""}${$?" game-active":""}`,children:[b.jsxs("div",{className:"chess-header",children:[b.jsx("h2",{children:"LAWB CHESS TESTNET BETA 3000"}),b.jsxs("div",{className:"chess-controls",children:[e&&b.jsx("button",{onClick:e,children:"_"}),b.jsx("button",{onClick:t,children:"×"})]})]}),b.jsx("div",{className:"game-stable-layout",children:b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"left-sidebar",children:[sl==="leaderboard"&&b.jsxs("div",{className:"leaderboard-compact",children:[b.jsx("h3",{children:"Leaderboard"}),b.jsx("div",{className:"leaderboard-table-compact",children:b.jsxs("table",{children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{children:"Rank"}),b.jsx("th",{children:"Player"}),b.jsx("th",{children:"Pts"})]})}),b.jsx("tbody",{children:Array.isArray(P)&&P.slice(0,8).map((X,te)=>{if(typeof X=="object"&&X!==null&&"username"in X&&"wins"in X&&"losses"in X&&"draws"in X&&"points"in X){const Ee=X;return b.jsxs("tr",{children:[b.jsx("td",{children:te+1}),b.jsx("td",{children:Es(Ee.username)}),b.jsx("td",{children:Ee.points})]},Ee.username)}return null})})]})})]}),sl==="moves"&&$&&b.jsxs("div",{className:"move-history-compact",children:[b.jsx("div",{className:"move-history-title",children:"Moves"}),b.jsx("ul",{className:"move-history-list-compact",children:I.slice().reverse().map((X,te)=>b.jsx("li",{children:X},I.length-1-te))})]}),sl==="gallery"&&b.jsx("div",{className:"piece-gallery-compact",children:eu(!0,"Click pieces to learn more")})]}),b.jsxs("div",{className:"center-area",children:[$&&b.jsxs("div",{className:"game-info-compact",children:[b.jsxs("span",{className:d==="blue"?"current-blue":"current-red",children:[d==="blue"?"Blue":"Red"," to move"]}),a===WM.AI&&b.jsxs("span",{className:"mode-play",children:[y==="easy"?"Easy":"Hard"," AI"]}),ru&&b.jsxs("span",{className:"wager-display",children:["Wager: ",A," tDMT"]})]}),$?b.jsxs("div",{className:"chess-main-area",children:[b.jsx("div",{className:"chessboard-container",children:b.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${D})`},children:[Array.from({length:8},(X,te)=>b.jsx("div",{className:"board-row",children:Array.from({length:8},(Ee,be)=>ir(te,be))},te)),B&&B.show&&b.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${B.row*12.5}%`,left:`${B.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:b.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),b.jsxs("div",{className:"game-controls-compact",children:[b.jsxs("div",{className:"sidebar-toggle-group",children:[b.jsx("button",{className:sl==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>oi("leaderboard"),children:"Leaderboard"}),b.jsx("button",{className:sl==="moves"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>oi("moves"),children:"Moves"}),b.jsx("button",{className:sl==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>oi("gallery"),children:"Gallery"})]}),b.jsx("button",{onClick:gh,children:"New Game"}),b.jsx("button",{onClick:rl,children:"Menu"})]})]}):Se?Gf():ru?b.jsx(jle,{onClose:t,onMinimize:e,fullscreen:n}):b.jsxs("div",{className:"game-mode-panel-streamlined",children:[b.jsx("div",{style:{textAlign:"center",marginBottom:"20px"},children:b.jsx("img",{src:"/assets/lawbstationgame.png",alt:"Lawbstation Chess",style:{width:"100%",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),b.jsxs("div",{className:"mode-selection-compact",children:[b.jsx("button",{className:`mode-btn-compact ${a==="ai"?"selected":""}`,onClick:()=>c("ai"),children:"VS AI"}),b.jsx("button",{className:`mode-btn-compact ${ru?"selected":""}`,onClick:()=>c("online"),children:"PvP"})]}),a===WM.AI&&b.jsx("button",{className:"start-btn-compact",onClick:()=>Re(!0),children:"Start Game"}),ru&&b.jsxs("div",{className:"pvp-info",children:[b.jsx("p",{children:"Challenge other players with tDMT wagers"}),b.jsx("p",{children:"Create or join games instantly"})]}),b.jsxs("div",{className:"help-section-compact",children:[b.jsx("h4",{children:"How to Play"}),b.jsxs("div",{className:"help-content",children:[b.jsxs("p",{children:[b.jsx("strong",{children:"Objective:"})," Checkmate your opponent's king by placing it under attack with no legal moves to escape."]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Game Setup:"})," Blue pieces start at the bottom, Red pieces at the top. Blue always moves first."]}),b.jsx("p",{children:b.jsx("strong",{children:"Piece Movements:"})}),b.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[b.jsxs("li",{children:[b.jsx("strong",{children:"Pawn:"})," Moves forward one square (or two on first move), captures diagonally"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Knight:"})," Moves in L-shape: 2 squares in one direction, then 1 square perpendicular"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Bishop:"})," Moves any number of squares diagonally"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Rook:"})," Moves any number of squares horizontally or vertically"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Queen:"})," Moves any number of squares in any one direction"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"King:"})," Moves one square in any direction"]})]}),b.jsx("p",{children:b.jsx("strong",{children:"Special Rules:"})}),b.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[b.jsxs("li",{children:[b.jsx("strong",{children:"Check:"})," When your king is under attack - you must move to escape"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Checkmate:"})," When your king is under attack with no legal moves to escape. endGame."]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Stalemate:"})," When you have no legal moves but your king is not in check (draw). endGame."]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Pawn Promotion:"})," When a pawn reaches the opposite end of chess board, Player chooses which chess piece to swap pawn out for."]})]}),b.jsx("p",{children:b.jsx("strong",{children:"Game Modes:"})}),b.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[b.jsxs("li",{children:[b.jsx("strong",{children:"Single Player:"})," Practice against the computer (Easy/Hard difficulty)"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Multiplayer:"})," wage tDMT and challenge other players on Sanko testnet. Winner takes the pot minus 5% house fee."]})]}),b.jsx("p",{children:b.jsx("strong",{children:"Multiplayer Flow:"})}),b.jsxs("ol",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[b.jsx("li",{children:"Connect your wallet to Sanko testnet"}),b.jsx("li",{children:"Create a game and set your wager amount in tDMT"}),b.jsx("li",{children:"Share your invite code with an opponent"}),b.jsx("li",{children:"Opponent joins and matches your wager"}),b.jsx("li",{children:"Game begins automatically - Blue (Player 1) moves first"}),b.jsx("li",{children:"Winner claims the pot minus 5% house fee"})]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Leaderboard:"})," All games are tracked to your connected wallet. Win = 3 points, Draw = 1 point, Loss = 0 points."]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Lawb Chess Testnet Contract:"})," ",b.jsx("a",{href:"https://testnet.sankoscan.io/address/0x3112AF5728520F52FD1C6710dD7bD52285a68e47?tab=contract",target:"_blank",rel:"noopener noreferrer",style:{color:"#32CD32"},children:"0x3112AF5728520F52FD1C6710dD7bD52285a68e47"})]}),b.jsxs("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#000000",borderRadius:"4px",fontSize:"12px"},children:[b.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[b.jsx("strong",{children:"Network Name:"})," Sanko Testnet"]}),b.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[b.jsx("strong",{children:"RPC URL:"})," https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}),b.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[b.jsx("strong",{children:"Chain ID:"})," 1992"]}),b.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[b.jsx("strong",{children:"Currency Symbol:"})," tDMT"]})]})]})]}),b.jsx("div",{style:{textAlign:"center",marginTop:"20px",marginBottom:"20px"},children:b.jsx("img",{src:"/images/chessboards.gif",alt:"Chessboards Animation",style:{maxWidth:"100%",width:"300px",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),b.jsxs("div",{className:"sidebar-toggle-group",style:{marginTop:"20px",justifyContent:"center"},children:[b.jsx("button",{className:sl==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>oi("leaderboard"),children:"Leaderboard"}),b.jsx("button",{className:sl==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>oi("gallery"),children:"Gallery"})]})]})]})]})}),xe&&eu(!0),E&&pc(),Ut&&b.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),xw&&b.jsxs("div",{className:"victory-overlay",children:[b.jsx("div",{className:"balloons-container"}),b.jsx("div",{className:"victory-modal",children:b.jsxs("div",{className:"victory-content",children:[b.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:120,marginBottom:16}}),b.jsx("div",{children:"Victory!"}),b.jsx("button",{onClick:gh,children:"New Game"})]})})]}),Tw&&b.jsxs("div",{className:"defeat-overlay",children:[b.jsx("div",{className:"blood-overlay"}),b.jsx("div",{className:"victory-modal",children:b.jsxs("div",{className:"victory-content",children:[b.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:120,marginBottom:16}}),b.jsx("div",{children:"Defeat!"}),b.jsx("button",{onClick:gh,children:"Try Again"})]})})]})]})};function NK(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const xK=()=>{const[t,e]=G.useState("singleplayer"),n=()=>{window.location.href="/"};return b.jsx("div",{className:"chess-page",children:b.jsx("div",{className:"chess-content",children:t==="singleplayer"?b.jsx(wit,{onClose:n}):b.jsx(jle,{onClose:n,onMinimize:()=>{},fullscreen:!1})})})},bit=new V_e,vit=typeof window<"u"&&window.location.hostname.startsWith("chess."),Eit=()=>Sqe("(max-width: 768px)")?b.jsx(Aqe,{}):b.jsx(mqe,{});cB.createRoot(document.getElementById("root")).render(b.jsx(zc.StrictMode,{children:b.jsx(c_e,{config:qae.wagmiConfig,children:b.jsx(fAe,{client:bit,children:b.jsx(pqe,{children:b.jsx(dqe,{children:vit?b.jsx(xT,{path:"/*",element:b.jsx(xK,{})}):b.jsxs(b.Fragment,{children:[b.jsx(xT,{path:"/",element:b.jsx(Eit,{})}),b.jsx(xT,{path:"/chess",element:b.jsx(xK,{})})]})})})})})}));export{AT as $,wt as A,Kt as B,ut as C,tl as D,L_ as E,gs as F,WW as G,Ho as H,Wo as I,Lt as J,NU as K,Z1 as L,Fi as M,wke as N,De as O,Sg as P,Iu as Q,fn as R,hu as S,Ja as T,ip as U,Ka as V,go as W,Cke as X,Lr as Y,eat as Z,C5 as _,st as a,Xke as a0,F_ as a1,Yot as a2,$i as a3,ch as a4,ei as a5,Jot as a6,Qie as a7,_5 as a8,ZE as a9,v6e as aA,k6e as aB,Uot as aC,Bot as aD,kP as aE,jot as aF,$ot as aG,aI as aH,Dit as aI,DE as aJ,hL as aK,L$ as aL,koe as aM,Poe as aN,Kl as aO,mn as aP,FYe as aQ,Vl as aR,Uee as aS,XEe as aT,no as aa,Hit as ab,df as ac,eh as ad,qA as ae,St as af,mi as ag,Rp as ah,kee as ai,Y2 as aj,Te as ak,u$ as al,Ai as am,Gbe as an,z2 as ao,E$ as ap,Qbe as aq,RI as ar,Wl as as,_m as at,R_ as au,Xd as av,R6e as aw,Lot as ax,iH as ay,Nse as az,pm as b,IT as c,Wa as d,$r as e,dt as f,hf as g,Mt as h,Bl as i,J as j,Is as k,ku as l,Rn as m,Xot as n,$c as o,Yt as p,za as q,Zot as r,p5e as s,Ud as t,bHe as u,bt as v,kd as w,Kot as x,wr as y,sre as z};
