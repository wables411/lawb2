const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-BJxmpXrJ.js","assets/if-defined-BJsi63bx.js","assets/index-Bp7P_xlx.js","assets/index-CstJGDvI.js","assets/ref-BYo1U55V.js","assets/index-v0DLvrGj.js","assets/index-ERBZlrqt.js","assets/index-or7t3cAq.js","assets/index-DS0uoFzR.js","assets/index-D6U8kJXx.js","assets/index-DJsoZq0d.js","assets/index-C3Oviwx_.js","assets/email-Csqa3I8d.js","assets/index-BX5ST6fg.js","assets/socials-C2YKSCOn.js","assets/index-DaLG02Sh.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-DmknUE9n.js","assets/index-BRLIunwf.js","assets/index-D2lnAxOq.js","assets/index-DolIDN03.js","assets/swaps-DgLOiAF1.js","assets/index-CqOLRUGJ.js","assets/index-DqSZgIUd.js","assets/index-CDD_JnfP.js","assets/send-BGWC_7m-.js","assets/index-mvMpT_wY.js","assets/index-FanbC5JU.js","assets/receive-CCWJNIcw.js","assets/index-Biq5_oac.js","assets/onramp-D4LwHl5B.js","assets/index-CiIi4Mb6.js","assets/index-CUMCuqY7.js","assets/index-Det-P13u.js","assets/transactions-8etj40H2.js","assets/index-BFgiQeF8.js","assets/index-D_X4tsh2.js","assets/index-BJJ8lbM3.js","assets/index-CMqOZ5Li.js","assets/index-B4oJh8d9.js","assets/w3m-modal-D0cIkLII.js"])))=>i.map(i=>d[i]);
var xk=t=>{throw TypeError(t)};var P1=(t,e,n)=>e.has(t)||xk("Cannot "+n);var W=(t,e,n)=>(P1(t,e,"read from private field"),n?n.call(t):e.get(t)),Xe=(t,e,n)=>e.has(t)?xk("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Te=(t,e,n,r)=>(P1(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),_t=(t,e,n)=>(P1(t,e,"access private method"),n);var fb=(t,e,n,r)=>({set _(s){Te(t,e,s,n)},get _(){return W(t,e,r)}});function Iq(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var ka=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function kU(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var DU={exports:{}},D_={},$U={exports:{}},Rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0=Symbol.for("react.element"),Nq=Symbol.for("react.portal"),xq=Symbol.for("react.fragment"),Tq=Symbol.for("react.strict_mode"),Rq=Symbol.for("react.profiler"),Pq=Symbol.for("react.provider"),Oq=Symbol.for("react.context"),kq=Symbol.for("react.forward_ref"),Dq=Symbol.for("react.suspense"),$q=Symbol.for("react.memo"),Mq=Symbol.for("react.lazy"),Tk=Symbol.iterator;function Lq(t){return t===null||typeof t!="object"?null:(t=Tk&&t[Tk]||t["@@iterator"],typeof t=="function"?t:null)}var MU={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},LU=Object.assign,UU={};function pg(t,e,n){this.props=t,this.context=e,this.refs=UU,this.updater=n||MU}pg.prototype.isReactComponent={};pg.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};pg.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function BU(){}BU.prototype=pg.prototype;function sR(t,e,n){this.props=t,this.context=e,this.refs=UU,this.updater=n||MU}var iR=sR.prototype=new BU;iR.constructor=sR;LU(iR,pg.prototype);iR.isPureReactComponent=!0;var Rk=Array.isArray,jU=Object.prototype.hasOwnProperty,oR={current:null},FU={key:!0,ref:!0,__self:!0,__source:!0};function WU(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)jU.call(e,r)&&!FU.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:a0,type:t,key:i,ref:o,props:s,_owner:oR.current}}function Uq(t,e){return{$$typeof:a0,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function aR(t){return typeof t=="object"&&t!==null&&t.$$typeof===a0}function Bq(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Pk=/\/+/g;function O1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Bq(""+t.key):e.toString(36)}function Cv(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case a0:case Nq:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+O1(o,0):r,Rk(s)?(n="",t!=null&&(n=t.replace(Pk,"$&/")+"/"),Cv(s,e,n,"",function(l){return l})):s!=null&&(aR(s)&&(s=Uq(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Pk,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Rk(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+O1(i,a);o+=Cv(i,e,n,c,s)}else if(c=Lq(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+O1(i,a++),o+=Cv(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function pb(t,e,n){if(t==null)return t;var r=[],s=0;return Cv(t,r,"","",function(i){return e.call(n,i,s++)}),r}function jq(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ks={current:null},Sv={transition:null},Fq={ReactCurrentDispatcher:ks,ReactCurrentBatchConfig:Sv,ReactCurrentOwner:oR};function zU(){throw Error("act(...) is not supported in production builds of React.")}Rt.Children={map:pb,forEach:function(t,e,n){pb(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return pb(t,function(){e++}),e},toArray:function(t){return pb(t,function(e){return e})||[]},only:function(t){if(!aR(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Rt.Component=pg;Rt.Fragment=xq;Rt.Profiler=Rq;Rt.PureComponent=sR;Rt.StrictMode=Tq;Rt.Suspense=Dq;Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fq;Rt.act=zU;Rt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=LU({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=oR.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)jU.call(e,c)&&!FU.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:a0,type:t.type,key:s,ref:i,props:r,_owner:o}};Rt.createContext=function(t){return t={$$typeof:Oq,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Pq,_context:t},t.Consumer=t};Rt.createElement=WU;Rt.createFactory=function(t){var e=WU.bind(null,t);return e.type=t,e};Rt.createRef=function(){return{current:null}};Rt.forwardRef=function(t){return{$$typeof:kq,render:t}};Rt.isValidElement=aR;Rt.lazy=function(t){return{$$typeof:Mq,_payload:{_status:-1,_result:t},_init:jq}};Rt.memo=function(t,e){return{$$typeof:$q,type:t,compare:e===void 0?null:e}};Rt.startTransition=function(t){var e=Sv.transition;Sv.transition={};try{t()}finally{Sv.transition=e}};Rt.unstable_act=zU;Rt.useCallback=function(t,e){return ks.current.useCallback(t,e)};Rt.useContext=function(t){return ks.current.useContext(t)};Rt.useDebugValue=function(){};Rt.useDeferredValue=function(t){return ks.current.useDeferredValue(t)};Rt.useEffect=function(t,e){return ks.current.useEffect(t,e)};Rt.useId=function(){return ks.current.useId()};Rt.useImperativeHandle=function(t,e,n){return ks.current.useImperativeHandle(t,e,n)};Rt.useInsertionEffect=function(t,e){return ks.current.useInsertionEffect(t,e)};Rt.useLayoutEffect=function(t,e){return ks.current.useLayoutEffect(t,e)};Rt.useMemo=function(t,e){return ks.current.useMemo(t,e)};Rt.useReducer=function(t,e,n){return ks.current.useReducer(t,e,n)};Rt.useRef=function(t){return ks.current.useRef(t)};Rt.useState=function(t){return ks.current.useState(t)};Rt.useSyncExternalStore=function(t,e,n){return ks.current.useSyncExternalStore(t,e,n)};Rt.useTransition=function(){return ks.current.useTransition()};Rt.version="18.3.1";$U.exports=Rt;var P=$U.exports;const ki=xh(P),Wq=Iq({__proto__:null,default:ki},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zq=P,Hq=Symbol.for("react.element"),qq=Symbol.for("react.fragment"),Gq=Object.prototype.hasOwnProperty,Vq=zq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kq={key:!0,ref:!0,__self:!0,__source:!0};function HU(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Gq.call(e,r)&&!Kq.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Hq,type:t,key:i,ref:o,props:s,_owner:Vq.current}}D_.Fragment=qq;D_.jsx=HU;D_.jsxs=HU;DU.exports=D_;var m=DU.exports,Ok={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ce=function(t,e){if(!t)throw gg(e)},gg=function(t){return new Error("Firebase Database ("+qU.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Yq=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},cR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(GU(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Yq(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||d==null)throw new Qq;const h=i<<2|a>>4;if(r.push(h),l!==64){const f=a<<4&240|l>>2;if(r.push(f),d!==64){const p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Qq extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VU=function(t){const e=GU(t);return cR.encodeByteArray(e,!0)},aE=function(t){return VU(t).replace(/\./g,"")},vI=function(t){try{return cR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zq(t){return KU(void 0,t)}function KU(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Jq(n)||(t[n]=KU(t[n],e[n]));return t}function Jq(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xq(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eG=()=>Xq().__FIREBASE_DEFAULTS__,tG=()=>{if(typeof process>"u"||typeof Ok>"u")return;const t=Ok.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},nG=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&vI(t[1]);return e&&JSON.parse(e)},YU=()=>{try{return eG()||tG()||nG()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},rG=t=>{var e,n;return(n=(e=YU())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},sG=t=>{const e=rG(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},QU=()=>{var t;return(t=YU())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iG(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[aE(JSON.stringify(n)),aE(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oG(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZU(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(oG())}function aG(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cG(){return qU.NODE_ADMIN===!0}function lG(){try{return typeof indexedDB=="object"}catch{return!1}}function uG(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dG="FirebaseError";class c0 extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=dG,Object.setPrototypeOf(this,c0.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,JU.prototype.create)}}class JU{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?hG(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new c0(s,a,r)}}function hG(t,e){return t.replace(fG,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const fG=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(t){return JSON.parse(t)}function br(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Ny(vI(i[0])||""),n=Ny(vI(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},pG=function(t){const e=XU(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},gG=function(t){const e=XU(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Pp(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function kk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function cE(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function EI(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Dk(i)&&Dk(o)){if(!EI(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Dk(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mG(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yG{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^i&(o^a),u=1518500249):(l=i^o^a,u=1859775393):d<60?(l=i&o|a&(i|o),u=2400959708):(l=i^o^a,u=3395469782);const h=(s<<5|s>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function lR(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wG=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,Ce(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},M_=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(t){return t&&t._delegate?t._delegate:t}class xy{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bG{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new $_;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(EG(e))try{this.getOrInitializeService({instanceIdentifier:od})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=od){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=od){return this.instances.has(e)}getOptions(e=od){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vG(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=od){return this.component?this.component.multipleInstances?e:od:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vG(t){return t===od?void 0:t}function EG(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _G{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new bG(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Nn||(Nn={}));const CG={debug:Nn.DEBUG,verbose:Nn.VERBOSE,info:Nn.INFO,warn:Nn.WARN,error:Nn.ERROR,silent:Nn.SILENT},SG=Nn.INFO,AG={[Nn.DEBUG]:"log",[Nn.VERBOSE]:"log",[Nn.INFO]:"info",[Nn.WARN]:"warn",[Nn.ERROR]:"error"},IG=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=AG[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class e6{constructor(e){this.name=e,this._logLevel=SG,this._logHandler=IG,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Nn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CG[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Nn.DEBUG,...e),this._logHandler(this,Nn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Nn.VERBOSE,...e),this._logHandler(this,Nn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Nn.INFO,...e),this._logHandler(this,Nn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Nn.WARN,...e),this._logHandler(this,Nn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Nn.ERROR,...e),this._logHandler(this,Nn.ERROR,...e)}}const NG=(t,e)=>e.some(n=>t instanceof n);let $k,Mk;function xG(){return $k||($k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TG(){return Mk||(Mk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const t6=new WeakMap,_I=new WeakMap,n6=new WeakMap,k1=new WeakMap,uR=new WeakMap;function RG(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(au(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&t6.set(n,t)}).catch(()=>{}),uR.set(e,t),e}function PG(t){if(_I.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});_I.set(t,e)}let CI={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return _I.get(t);if(e==="objectStoreNames")return t.objectStoreNames||n6.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return au(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function OG(t){CI=t(CI)}function kG(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(D1(this),e,...n);return n6.set(r,e.sort?e.sort():[e]),au(r)}:TG().includes(t)?function(...e){return t.apply(D1(this),e),au(t6.get(this))}:function(...e){return au(t.apply(D1(this),e))}}function DG(t){return typeof t=="function"?kG(t):(t instanceof IDBTransaction&&PG(t),NG(t,xG())?new Proxy(t,CI):t)}function au(t){if(t instanceof IDBRequest)return RG(t);if(k1.has(t))return k1.get(t);const e=DG(t);return e!==t&&(k1.set(t,e),uR.set(e,t)),e}const D1=t=>uR.get(t);function $G(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=au(o);return r&&o.addEventListener("upgradeneeded",c=>{r(au(o.result),c.oldVersion,c.newVersion,au(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const MG=["get","getKey","getAll","getAllKeys","count"],LG=["put","add","delete","clear"],$1=new Map;function Lk(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($1.get(e))return $1.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=LG.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||MG.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return $1.set(e,i),i}OG(t=>({...t,get:(e,n,r)=>Lk(e,n)||t.get(e,n,r),has:(e,n)=>!!Lk(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UG{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(BG(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function BG(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const SI="@firebase/app",Uk="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc=new e6("@firebase/app"),jG="@firebase/app-compat",FG="@firebase/analytics-compat",WG="@firebase/analytics",zG="@firebase/app-check-compat",HG="@firebase/app-check",qG="@firebase/auth",GG="@firebase/auth-compat",VG="@firebase/database",KG="@firebase/data-connect",YG="@firebase/database-compat",QG="@firebase/functions",ZG="@firebase/functions-compat",JG="@firebase/installations",XG="@firebase/installations-compat",eV="@firebase/messaging",tV="@firebase/messaging-compat",nV="@firebase/performance",rV="@firebase/performance-compat",sV="@firebase/remote-config",iV="@firebase/remote-config-compat",oV="@firebase/storage",aV="@firebase/storage-compat",cV="@firebase/firestore",lV="@firebase/vertexai-preview",uV="@firebase/firestore-compat",dV="firebase",hV="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI="[DEFAULT]",fV={[SI]:"fire-core",[jG]:"fire-core-compat",[WG]:"fire-analytics",[FG]:"fire-analytics-compat",[HG]:"fire-app-check",[zG]:"fire-app-check-compat",[qG]:"fire-auth",[GG]:"fire-auth-compat",[VG]:"fire-rtdb",[KG]:"fire-data-connect",[YG]:"fire-rtdb-compat",[QG]:"fire-fn",[ZG]:"fire-fn-compat",[JG]:"fire-iid",[XG]:"fire-iid-compat",[eV]:"fire-fcm",[tV]:"fire-fcm-compat",[nV]:"fire-perf",[rV]:"fire-perf-compat",[sV]:"fire-rc",[iV]:"fire-rc-compat",[oV]:"fire-gcs",[aV]:"fire-gcs-compat",[cV]:"fire-fst",[uV]:"fire-fst-compat",[lV]:"fire-vertex","fire-js":"fire-js",[dV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=new Map,pV=new Map,II=new Map;function Bk(t,e){try{t.container.addComponent(e)}catch(n){Kc.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function lE(t){const e=t.name;if(II.has(e))return Kc.debug(`There were multiple attempts to register component ${e}.`),!1;II.set(e,t);for(const n of Ty.values())Bk(n,t);for(const n of pV.values())Bk(n,t);return!0}function gV(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cu=new JU("app","Firebase",mV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xy("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV=hV;function r6(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:AI,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw cu.create("bad-app-name",{appName:String(s)});if(n||(n=QU()),!n)throw cu.create("no-options");const i=Ty.get(s);if(i){if(EI(n,i.options)&&EI(r,i.config))return i;throw cu.create("duplicate-app",{appName:s})}const o=new _G(s);for(const c of II.values())o.addComponent(c);const a=new yV(n,r,o);return Ty.set(s,a),a}function s6(t=AI){const e=Ty.get(t);if(!e&&t===AI&&QU())return r6();if(!e)throw cu.create("no-app",{appName:t});return e}function bV(){return Array.from(Ty.values())}function np(t,e,n){var r;let s=(r=fV[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kc.warn(a.join(" "));return}lE(new xy(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV="firebase-heartbeat-database",EV=1,Ry="firebase-heartbeat-store";let M1=null;function i6(){return M1||(M1=$G(vV,EV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ry)}catch(n){console.warn(n)}}}}).catch(t=>{throw cu.create("idb-open",{originalErrorMessage:t.message})})),M1}async function _V(t){try{const n=(await i6()).transaction(Ry),r=await n.objectStore(Ry).get(o6(t));return await n.done,r}catch(e){if(e instanceof c0)Kc.warn(e.message);else{const n=cu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Kc.warn(n.message)}}}async function jk(t,e){try{const r=(await i6()).transaction(Ry,"readwrite");await r.objectStore(Ry).put(e,o6(t)),await r.done}catch(n){if(n instanceof c0)Kc.warn(n.message);else{const r=cu.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Kc.warn(r.message)}}}function o6(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV=1024,SV=30*24*60*60*1e3;class AV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new NV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Fk();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=SV}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Kc.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Fk(),{heartbeatsToSend:r,unsentEntries:s}=IV(this._heartbeatsCache.heartbeats),i=aE(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Kc.warn(n),""}}}function Fk(){return new Date().toISOString().substring(0,10)}function IV(t,e=CV){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Wk(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Wk(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class NV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lG()?uG().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _V(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return jk(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return jk(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Wk(t){return aE(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(t){lE(new xy("platform-logger",e=>new UG(e),"PRIVATE")),lE(new xy("heartbeat",e=>new AV(e),"PRIVATE")),np(SI,Uk,t),np(SI,Uk,"esm2017"),np("fire-js","")}xV("");var TV="firebase",RV="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */np(TV,RV,"app");var zk={};const Hk="@firebase/database",qk="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let a6="";function PV(t){a6=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),br(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ny(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return sl(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new OV(e)}}catch{}return new kV},vd=c6("localStorage"),DV=c6("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp=new e6("@firebase/database"),$V=function(){let t=1;return function(){return t++}}(),l6=function(t){const e=wG(t),n=new yG;n.update(e);const r=n.digest();return cR.encodeByteArray(r)},l0=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=l0.apply(null,r):typeof r=="object"?e+=br(r):e+=r,e+=" "}return e};let Ym=null,Gk=!0;const MV=function(t,e){Ce(!0,"Can't turn on custom loggers persistently."),rp.logLevel=Nn.VERBOSE,Ym=rp.log.bind(rp)},ds=function(...t){if(Gk===!0&&(Gk=!1,Ym===null&&DV.get("logging_enabled")===!0&&MV()),Ym){const e=l0.apply(null,t);Ym(e)}},u0=function(t){return function(...e){ds(t,...e)}},NI=function(...t){const e="FIREBASE INTERNAL ERROR: "+l0(...t);rp.error(e)},Yc=function(...t){const e=`FIREBASE FATAL ERROR: ${l0(...t)}`;throw rp.error(e),new Error(e)},oi=function(...t){const e="FIREBASE WARNING: "+l0(...t);rp.warn(e)},LV=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&oi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},u6=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},UV=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Op="[MIN_NAME]",Jd="[MAX_NAME]",yg=function(t,e){if(t===e)return 0;if(t===Op||e===Jd)return-1;if(e===Op||t===Jd)return 1;{const n=Vk(t),r=Vk(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},BV=function(t,e){return t===e?0:t<e?-1:1},Yg=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+br(e))},dR=function(t){if(typeof t!="object"||t===null)return br(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=br(e[r]),n+=":",n+=dR(t[e[r]]);return n+="}",n},d6=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function hi(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const h6=function(t){Ce(!u6(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(i%2?1:0),i=Math.floor(i/2);l.push(s?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},jV=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},FV=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function WV(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const zV=new RegExp("^-?(0*)\\d{1,10}$"),HV=-2147483648,qV=2147483647,Vk=function(t){if(zV.test(t)){const e=Number(t);if(e>=HV&&e<=qV)return e}return null},wg=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw oi("Exception was thrown by user callback.",n),e},Math.floor(0))}},GV=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Qm=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){oi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ds("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',oi(e)}}class Av{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Av.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="5",f6="v",p6="s",g6="r",m6="f",y6=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,w6="ls",b6="p",xI="ac",v6="websocket",E6="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=vd.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&vd.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function YV(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function C6(t,e,n){Ce(typeof e=="string","typeof type must == string"),Ce(typeof n=="object","typeof params must == object");let r;if(e===v6)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===E6)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);YV(t)&&(n.ns=t.namespace);const s=[];return hi(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(){this.counters_={}}incrementCounter(e,n=1){sl(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Zq(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1={},U1={};function fR(t){const e=t.toString();return L1[e]||(L1[e]=new QV),L1[e]}function ZV(t,e){const n=t.toString();return U1[n]||(U1[n]=e()),U1[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&wg(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk="start",XV="close",eK="pLPCommand",tK="pRTLPCB",S6="id",A6="pw",I6="ser",nK="cb",rK="seg",sK="ts",iK="d",oK="dframe",N6=1870,x6=30,aK=N6-x6,cK=25e3,lK=3e4;class Uf{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=u0(e),this.stats_=fR(n),this.urlFn=c=>(this.appCheckToken&&(c[xI]=this.appCheckToken),C6(n,E6,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new JV(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(lK)),UV(()=>{if(this.isClosed_)return;this.scriptTagHolder=new pR((...i)=>{const[o,a,c,l,u]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Kk)this.id=a,this.password=c;else if(o===XV)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[Kk]="t",r[I6]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[nK]=this.scriptTagHolder.uniqueCallbackIdentifier),r[f6]=hR,this.transportSessionId&&(r[p6]=this.transportSessionId),this.lastSessionId&&(r[w6]=this.lastSessionId),this.applicationId&&(r[b6]=this.applicationId),this.appCheckToken&&(r[xI]=this.appCheckToken),typeof location<"u"&&location.hostname&&y6.test(location.hostname)&&(r[g6]=m6);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Uf.forceAllow_=!0}static forceDisallow(){Uf.forceDisallow_=!0}static isAvailable(){return Uf.forceAllow_?!0:!Uf.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!jV()&&!FV()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=br(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=VU(n),s=d6(r,aK);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[oK]="t",r[S6]=e,r[A6]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=br(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class pR{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=$V(),window[eK+this.uniqueCallbackIdentifier]=e,window[tK+this.uniqueCallbackIdentifier]=n,this.myIFrame=pR.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){ds("frame writing exception"),a.stack&&ds(a.stack),ds(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ds("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[S6]=this.myID,e[A6]=this.myPW,e[I6]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+x6+r.length<=N6;){const o=this.pendingSegs.shift();r=r+"&"+rK+s+"="+o.seg+"&"+sK+s+"="+o.ts+"&"+iK+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(cK)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{ds("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uK=16384,dK=45e3;let uE=null;typeof MozWebSocket<"u"?uE=MozWebSocket:typeof WebSocket<"u"&&(uE=WebSocket);class Yo{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=u0(this.connId),this.stats_=fR(n),this.connURL=Yo.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[f6]=hR,typeof location<"u"&&location.hostname&&y6.test(location.hostname)&&(o[g6]=m6),n&&(o[p6]=n),r&&(o[w6]=r),s&&(o[xI]=s),i&&(o[b6]=i),C6(e,v6,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,vd.set("previous_websocket_failure",!0);try{let r;cG(),this.mySock=new uE(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Yo.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&uE!==null&&!Yo.forceDisallow_}static previouslyFailed(){return vd.isInMemoryStorage||vd.get("previous_websocket_failure")===!0}markConnectionHealthy(){vd.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Ny(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ce(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=br(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=d6(n,uK);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(dK))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Yo.responsesRequiredToBeHealthy=2;Yo.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Uf,Yo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Yo&&Yo.isAvailable();let r=n&&!Yo.previouslyFailed();if(e.webSocketOnly&&(n||oi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Yo];else{const s=this.transports_=[];for(const i of Py.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);Py.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Py.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hK=6e4,fK=5e3,pK=10*1024,gK=100*1024,B1="t",Yk="d",mK="s",Qk="r",yK="e",Zk="o",Jk="a",Xk="n",e2="p",wK="h";class bK{constructor(e,n,r,s,i,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=u0("c:"+this.id+":"),this.transportManager_=new Py(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Qm(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>gK?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>pK?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(B1 in e){const n=e[B1];n===Jk?this.upgradeIfSecondaryHealthy_():n===Qk?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Zk&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Yg("t",e),r=Yg("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:e2,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Jk,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Xk,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Yg("t",e),r=Yg("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Yg(B1,e);if(Yk in e){const r=e[Yk];if(n===wK){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Xk){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===mK?this.onConnectionShutdown_(r):n===Qk?this.onReset_(r):n===yK?NI("Server Error: "+r):n===Zk?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):NI("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),hR!==r&&oi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Qm(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(hK))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Qm(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(fK))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:e2,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(vd.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let R6=class{constructor(e){this.allowedEvents_=e,this.listeners_={},Ce(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){Ce(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE extends R6{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ZU()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new dE}getInitialEvent(e){return Ce(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=32,n2=768;class _n{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Yt(){return new _n("")}function Nt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ru(t){return t.pieces_.length-t.pieceNum_}function Tn(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new _n(t.pieces_,e)}function P6(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function vK(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function O6(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function k6(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new _n(e,0)}function vr(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof _n)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new _n(n,0)}function Tt(t){return t.pieceNum_>=t.pieces_.length}function Ns(t,e){const n=Nt(t),r=Nt(e);if(n===null)return e;if(n===r)return Ns(Tn(t),Tn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function gR(t,e){if(Ru(t)!==Ru(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Jo(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Ru(t)>Ru(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class EK{constructor(e,n){this.errorPrefix_=n,this.parts_=O6(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=M_(this.parts_[r]);D6(this)}}function _K(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=M_(e),D6(t)}function CK(t){const e=t.parts_.pop();t.byteLength_-=M_(e),t.parts_.length>0&&(t.byteLength_-=1)}function D6(t){if(t.byteLength_>n2)throw new Error(t.errorPrefix_+"has a key path longer than "+n2+" bytes ("+t.byteLength_+").");if(t.parts_.length>t2)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t2+") or object contains a cycle "+ad(t))}function ad(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR extends R6{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new mR}getInitialEvent(e){return Ce(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg=1e3,SK=60*5*1e3,r2=30*1e3,AK=1.3,IK=3e4,NK="server_kill",s2=3;class jc extends T6{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=jc.nextPersistentConnectionId_++,this.log_=u0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Qg,this.maxReconnectDelay_=SK,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");mR.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&dE.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(br(i)),Ce(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new $_,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ce(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,l=a.s;jc.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&sl(e,"w")){const r=Pp(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();oi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||gG(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=r2)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=pG(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),Ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+br(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):NI("Unrecognized action received from server: "+br(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ce(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Qg,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Qg,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>IK&&(this.reconnectDelay_=Qg),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*AK)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+jc.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(d){Ce(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?ds("getToken() completed but was canceled"):(ds("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new bK(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{oi(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(NK)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&oi(d),c())}}}interrupt(e){ds("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ds("Resuming connection for reason: "+e),delete this.interruptReasons_[e],kk(this.interruptReasons_)&&(this.reconnectDelay_=Qg,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>dR(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new _n(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){ds("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=s2&&(this.reconnectDelay_=r2,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){ds("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=s2&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+a6.replace(/\./g,"-")]=1,ZU()?e["framework.cordova"]=1:aG()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=dE.getInstance().currentlyOnline();return kk(this.interruptReasons_)&&e}}jc.nextPersistentConnectionId_=0;jc.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new xt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new xt(Op,e),s=new xt(Op,n);return this.compare(r,s)!==0}minPost(){return xt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gb;class $6 extends L_{static get __EMPTY_NODE(){return gb}static set __EMPTY_NODE(e){gb=e}compare(e,n){return yg(e.name,n.name)}isDefinedOn(e){throw gg("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return xt.MIN}maxPost(){return new xt(Jd,gb)}makePost(e,n){return Ce(typeof e=="string","KeyIndex indexValue must always be a string."),new xt(e,gb)}toString(){return".key"}}const sp=new $6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Rr{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Rr.RED,this.left=s??ri.EMPTY_NODE,this.right=i??ri.EMPTY_NODE}copy(e,n,r,s,i){return new Rr(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ri.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return ri.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Rr.RED=!0;Rr.BLACK=!1;class xK{copy(e,n,r,s,i){return this}insert(e,n,r){return new Rr(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ri{constructor(e,n=ri.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new ri(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Rr.BLACK,null,null))}remove(e){return new ri(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Rr.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new mb(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new mb(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new mb(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new mb(this.root_,null,this.comparator_,!0,e)}}ri.EMPTY_NODE=new xK;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TK(t,e){return yg(t.name,e.name)}function yR(t,e){return yg(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TI;function RK(t){TI=t}const M6=function(t){return typeof t=="number"?"number:"+h6(t):"string:"+t},L6=function(t){if(t.isLeafNode()){const e=t.val();Ce(typeof e=="string"||typeof e=="number"||typeof e=="object"&&sl(e,".sv"),"Priority must be a string or number.")}else Ce(t===TI||t.isEmpty(),"priority of unexpected type.");Ce(t===TI||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i2;class Tr{constructor(e,n=Tr.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Ce(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),L6(this.priorityNode_)}static set __childrenNodeConstructor(e){i2=e}static get __childrenNodeConstructor(){return i2}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Tr(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Tr.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Tt(e)?this:Nt(e)===".priority"?this.priorityNode_:Tr.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Tr.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Nt(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Ce(r!==".priority"||Ru(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Tr.__childrenNodeConstructor.EMPTY_NODE.updateChild(Tn(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+M6(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=h6(this.value_):e+=this.value_,this.lazyHash_=l6(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Tr.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Tr.__childrenNodeConstructor?-1:(Ce(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Tr.VALUE_TYPE_ORDER.indexOf(n),i=Tr.VALUE_TYPE_ORDER.indexOf(r);return Ce(s>=0,"Unknown leaf type: "+n),Ce(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Tr.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let U6,B6;function PK(t){U6=t}function OK(t){B6=t}class kK extends L_{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?yg(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return xt.MIN}maxPost(){return new xt(Jd,new Tr("[PRIORITY-POST]",B6))}makePost(e,n){const r=U6(e);return new xt(n,new Tr("[PRIORITY-POST]",r))}toString(){return".priority"}}const Xn=new kK;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DK=Math.log(2);class $K{constructor(e){const n=i=>parseInt(Math.log(i)/DK,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const hE=function(t,e,n,r){t.sort(e);const s=function(c,l){const u=l-c;let d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new Rr(h,d.node,Rr.BLACK,null,null);{const f=parseInt(u/2,10)+c,p=s(c,f),g=s(f+1,l);return d=t[f],h=n?n(d):d,new Rr(h,d.node,Rr.BLACK,p,g)}},i=function(c){let l=null,u=null,d=t.length;const h=function(p,g){const w=d-p,y=d;d-=p;const b=s(w+1,y),E=t[w],_=n?n(E):E;f(new Rr(_,E.node,g,null,b))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){const g=c.nextBitIsOne(),w=Math.pow(2,c.count-(p+1));g?h(w,Rr.BLACK):(h(w,Rr.BLACK),h(w,Rr.RED))}return u},o=new $K(t.length),a=i(o);return new ri(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j1;const ef={};class $c{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return Ce(ef&&Xn,"ChildrenNode.ts has not been loaded"),j1=j1||new $c({".priority":ef},{".priority":Xn}),j1}get(e){const n=Pp(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ri?n:null}hasIndex(e){return sl(this.indexSet_,e.toString())}addIndex(e,n){Ce(e!==sp,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(xt.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=hE(r,e.getCompare()):a=ef;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new $c(u,l)}addToIndexes(e,n){const r=cE(this.indexes_,(s,i)=>{const o=Pp(this.indexSet_,i);if(Ce(o,"Missing index implementation for "+i),s===ef)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(xt.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),hE(a,o.getCompare())}else return ef;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new xt(e.name,a))),c.insert(e,e.node)}});return new $c(r,this.indexSet_)}removeFromIndexes(e,n){const r=cE(this.indexes_,s=>{if(s===ef)return s;{const i=n.get(e.name);return i?s.remove(new xt(e.name,i)):s}});return new $c(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zg;class lt{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&L6(this.priorityNode_),this.children_.isEmpty()&&Ce(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Zg||(Zg=new lt(new ri(yR),null,$c.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Zg}updatePriority(e){return this.children_.isEmpty()?this:new lt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Zg:n}}getChild(e){const n=Nt(e);return n===null?this:this.getImmediateChild(n).getChild(Tn(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Ce(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new xt(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Zg:this.priorityNode_;return new lt(s,o,i)}}updateChild(e,n){const r=Nt(e);if(r===null)return n;{Ce(Nt(e)!==".priority"||Ru(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Tn(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Xn,(o,a)=>{n[o]=a.val(e),r++,i&&lt.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+M6(this.getPriority().val())+":"),this.forEachChild(Xn,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":l6(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new xt(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new xt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new xt(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,xt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,xt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===d0?-1:0}withIndex(e){if(e===sp||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new lt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===sp||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Xn),s=n.getIterator(Xn);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===sp?null:this.indexMap_.get(e.toString())}}lt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class MK extends lt{constructor(){super(new ri(yR),lt.EMPTY_NODE,$c.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return lt.EMPTY_NODE}isEmpty(){return!1}}const d0=new MK;Object.defineProperties(xt,{MIN:{value:new xt(Op,lt.EMPTY_NODE)},MAX:{value:new xt(Jd,d0)}});$6.__EMPTY_NODE=lt.EMPTY_NODE;Tr.__childrenNodeConstructor=lt;RK(d0);OK(d0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LK=!0;function Or(t,e=null){if(t===null)return lt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Ce(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Tr(n,Or(e))}if(!(t instanceof Array)&&LK){const n=[];let r=!1;if(hi(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=Or(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new xt(o,c)))}}),n.length===0)return lt.EMPTY_NODE;const i=hE(n,TK,o=>o.name,yR);if(r){const o=hE(n,Xn.getCompare());return new lt(i,Or(e),new $c({".priority":o},{".priority":Xn}))}else return new lt(i,Or(e),$c.Default)}else{let n=lt.EMPTY_NODE;return hi(t,(r,s)=>{if(sl(t,r)&&r.substring(0,1)!=="."){const i=Or(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(Or(e))}}PK(Or);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UK extends L_{constructor(e){super(),this.indexPath_=e,Ce(!Tt(e)&&Nt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?yg(e.name,n.name):i}makePost(e,n){const r=Or(e),s=lt.EMPTY_NODE.updateChild(this.indexPath_,r);return new xt(n,s)}maxPost(){const e=lt.EMPTY_NODE.updateChild(this.indexPath_,d0);return new xt(Jd,e)}toString(){return O6(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BK extends L_{compare(e,n){const r=e.node.compareTo(n.node);return r===0?yg(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return xt.MIN}maxPost(){return xt.MAX}makePost(e,n){const r=Or(e);return new xt(n,r)}toString(){return".value"}}const jK=new BK;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6(t){return{type:"value",snapshotNode:t}}function kp(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Oy(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ky(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function FK(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){Ce(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Oy(n,a)):Ce(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(kp(n,r)):o.trackChildChange(ky(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Xn,(s,i)=>{n.hasChild(s)||r.trackChildChange(Oy(s,i))}),n.isLeafNode()||n.forEachChild(Xn,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(ky(s,i,o))}else r.trackChildChange(kp(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?lt.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e){this.indexedFilter_=new wR(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Dy.getStartPost_(e),this.endPost_=Dy.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new xt(n,r))||(r=lt.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=lt.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(lt.EMPTY_NODE);const i=this;return n.forEachChild(Xn,(o,a)=>{i.matches(new xt(o,a))||(s=s.updateImmediateChild(o,lt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WK{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Dy(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new xt(n,r))||(r=lt.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=lt.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=lt.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(lt.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,lt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;Ce(a.numChildren()===this.limit_,"");const c=new xt(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return i!=null&&i.trackChildChange(ky(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(Oy(n,d));const g=a.updateImmediateChild(n,lt.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(kp(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?e:u&&o(l,c)>=0?(i!=null&&(i.trackChildChange(Oy(l.name,l.node)),i.trackChildChange(kp(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,lt.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ce(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ce(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Op}hasEnd(){return this.endSet_}getIndexEndValue(){return Ce(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ce(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Jd}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ce(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Xn}copy(){const e=new bR;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function zK(t){return t.loadsAllData()?new wR(t.getIndex()):t.hasLimit()?new WK(t):new Dy(t)}function o2(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Xn?n="$priority":t.index_===jK?n="$value":t.index_===sp?n="$key":(Ce(t.index_ instanceof UK,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=br(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=br(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+br(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=br(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+br(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function a2(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Xn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE extends T6{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=u0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Ce(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=fE.getListenId_(e,r),a={};this.listens_[o]=a;const c=o2(e._queryParams);this.restRequest_(i+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(i,d,!1,r),Pp(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",s(h,null)}})}unlisten(e,n){const r=fE.getListenId_(e,n);delete this.listens_[r]}get(e){const n=o2(e._queryParams),r=e._path.toString(),s=new $_;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+mG(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Ny(a.responseText)}catch{oi("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&oi("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HK{constructor(){this.rootNode_=lt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(){return{value:null,children:new Map}}function F6(t,e,n){if(Tt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Nt(e);t.children.has(r)||t.children.set(r,pE());const s=t.children.get(r);e=Tn(e),F6(s,e,n)}}function RI(t,e,n){t.value!==null?n(e,t.value):qK(t,(r,s)=>{const i=new _n(e.toString()+"/"+r);RI(s,i,n)})}function qK(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GK{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&hi(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=10*1e3,VK=30*1e3,KK=5*60*1e3;class YK{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new GK(e);const r=c2+(VK-c2)*Math.random();Qm(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;hi(e,(s,i)=>{i>0&&sl(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),Qm(this.reportStats_.bind(this),Math.floor(Math.random()*2*KK))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xo;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Xo||(Xo={}));function W6(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function vR(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ER(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Xo.ACK_USER_WRITE,this.source=W6()}operationForChild(e){if(Tt(this.path)){if(this.affectedTree.value!=null)return Ce(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new _n(e));return new gE(Yt(),n,this.revert)}}else return Ce(Nt(this.path)===e,"operationForChild called for unrelated child."),new gE(Tn(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e,n){this.source=e,this.path=n,this.type=Xo.LISTEN_COMPLETE}operationForChild(e){return Tt(this.path)?new $y(this.source,Yt()):new $y(this.source,Tn(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Xo.OVERWRITE}operationForChild(e){return Tt(this.path)?new Xd(this.source,Yt(),this.snap.getImmediateChild(e)):new Xd(this.source,Tn(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Xo.MERGE}operationForChild(e){if(Tt(this.path)){const n=this.children.subtree(new _n(e));return n.isEmpty()?null:n.value?new Xd(this.source,Yt(),n.value):new My(this.source,Yt(),n)}else return Ce(Nt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new My(this.source,Tn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Tt(e))return this.isFullyInitialized()&&!this.filtered_;const n=Nt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QK{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function ZK(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(FK(o.childName,o.snapshotNode))}),Jg(t,s,"child_removed",e,r,n),Jg(t,s,"child_added",e,r,n),Jg(t,s,"child_moved",i,r,n),Jg(t,s,"child_changed",e,r,n),Jg(t,s,"value",e,r,n),s}function Jg(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>XK(t,a,c)),o.forEach(a=>{const c=JK(t,a,i);s.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function JK(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function XK(t,e,n){if(e.childName==null||n.childName==null)throw gg("Should only compare child_ events.");const r=new xt(e.childName,e.snapshotNode),s=new xt(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(t,e){return{eventCache:t,serverCache:e}}function Zm(t,e,n,r){return U_(new Pu(e,n,r),t.serverCache)}function z6(t,e,n,r){return U_(t.eventCache,new Pu(e,n,r))}function mE(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function eh(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let F1;const eY=()=>(F1||(F1=new ri(BV)),F1);class Dn{constructor(e,n=eY()){this.value=e,this.children=n}static fromObject(e){let n=new Dn(null);return hi(e,(r,s)=>{n=n.set(new _n(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Yt(),value:this.value};if(Tt(e))return null;{const r=Nt(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Tn(e),n);return i!=null?{path:vr(new _n(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Tt(e))return this;{const n=Nt(e),r=this.children.get(n);return r!==null?r.subtree(Tn(e)):new Dn(null)}}set(e,n){if(Tt(e))return new Dn(n,this.children);{const r=Nt(e),i=(this.children.get(r)||new Dn(null)).set(Tn(e),n),o=this.children.insert(r,i);return new Dn(this.value,o)}}remove(e){if(Tt(e))return this.children.isEmpty()?new Dn(null):new Dn(null,this.children);{const n=Nt(e),r=this.children.get(n);if(r){const s=r.remove(Tn(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new Dn(null):new Dn(this.value,i)}else return this}}get(e){if(Tt(e))return this.value;{const n=Nt(e),r=this.children.get(n);return r?r.get(Tn(e)):null}}setTree(e,n){if(Tt(e))return n;{const r=Nt(e),i=(this.children.get(r)||new Dn(null)).setTree(Tn(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new Dn(this.value,o)}}fold(e){return this.fold_(Yt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(vr(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Yt(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Tt(e))return null;{const i=Nt(e),o=this.children.get(i);return o?o.findOnPath_(Tn(e),vr(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Yt(),n)}foreachOnPath_(e,n,r){if(Tt(e))return this;{this.value&&r(n,this.value);const s=Nt(e),i=this.children.get(s);return i?i.foreachOnPath_(Tn(e),vr(n,s),r):new Dn(null)}}foreach(e){this.foreach_(Yt(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(vr(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this.writeTree_=e}static empty(){return new na(new Dn(null))}}function Jm(t,e,n){if(Tt(e))return new na(new Dn(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=Ns(s,e);return i=i.updateChild(o,n),new na(t.writeTree_.set(s,i))}else{const s=new Dn(n),i=t.writeTree_.setTree(e,s);return new na(i)}}}function l2(t,e,n){let r=t;return hi(n,(s,i)=>{r=Jm(r,vr(e,s),i)}),r}function u2(t,e){if(Tt(e))return na.empty();{const n=t.writeTree_.setTree(e,new Dn(null));return new na(n)}}function PI(t,e){return Th(t,e)!=null}function Th(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ns(n.path,e)):null}function d2(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Xn,(r,s)=>{e.push(new xt(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new xt(r,s.value))}),e}function lu(t,e){if(Tt(e))return t;{const n=Th(t,e);return n!=null?new na(new Dn(n)):new na(t.writeTree_.subtree(e))}}function OI(t){return t.writeTree_.isEmpty()}function Dp(t,e){return H6(Yt(),t.writeTree_,e)}function H6(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(Ce(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=H6(vr(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(vr(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(t,e){return K6(e,t)}function tY(t,e,n,r,s){Ce(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=Jm(t.visibleWrites,e,n)),t.lastWriteId=r}function nY(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function rY(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Ce(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&sY(a,r.path)?s=!1:Jo(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return iY(t),!0;if(r.snap)t.visibleWrites=u2(t.visibleWrites,r.path);else{const a=r.children;hi(a,c=>{t.visibleWrites=u2(t.visibleWrites,vr(r.path,c))})}return!0}else return!1}function sY(t,e){if(t.snap)return Jo(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Jo(vr(t.path,n),e))return!0;return!1}function iY(t){t.visibleWrites=q6(t.allWrites,oY,Yt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function oY(t){return t.visible}function q6(t,e,n){let r=na.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)Jo(n,o)?(a=Ns(n,o),r=Jm(r,a,i.snap)):Jo(o,n)&&(a=Ns(o,n),r=Jm(r,Yt(),i.snap.getChild(a)));else if(i.children){if(Jo(n,o))a=Ns(n,o),r=l2(r,a,i.children);else if(Jo(o,n))if(a=Ns(o,n),Tt(a))r=l2(r,Yt(),i.children);else{const c=Pp(i.children,Nt(a));if(c){const l=c.getChild(Tn(a));r=Jm(r,Yt(),l)}}}else throw gg("WriteRecord should have .snap or .children")}}return r}function G6(t,e,n,r,s){if(!r&&!s){const i=Th(t.visibleWrites,e);if(i!=null)return i;{const o=lu(t.visibleWrites,e);if(OI(o))return n;if(n==null&&!PI(o,Yt()))return null;{const a=n||lt.EMPTY_NODE;return Dp(o,a)}}}else{const i=lu(t.visibleWrites,e);if(!s&&OI(i))return n;if(!s&&n==null&&!PI(i,Yt()))return null;{const o=function(l){return(l.visible||s)&&(!r||!~r.indexOf(l.writeId))&&(Jo(l.path,e)||Jo(e,l.path))},a=q6(t.allWrites,o,e),c=n||lt.EMPTY_NODE;return Dp(a,c)}}}function aY(t,e,n){let r=lt.EMPTY_NODE;const s=Th(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Xn,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=lu(t.visibleWrites,e);return n.forEachChild(Xn,(o,a)=>{const c=Dp(lu(i,new _n(o)),a);r=r.updateImmediateChild(o,c)}),d2(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=lu(t.visibleWrites,e);return d2(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function cY(t,e,n,r,s){Ce(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=vr(e,n);if(PI(t.visibleWrites,i))return null;{const o=lu(t.visibleWrites,i);return OI(o)?s.getChild(n):Dp(o,s.getChild(n))}}function lY(t,e,n,r){const s=vr(e,n),i=Th(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=lu(t.visibleWrites,s);return Dp(o,r.getNode().getImmediateChild(n))}else return null}function uY(t,e){return Th(t.visibleWrites,e)}function dY(t,e,n,r,s,i,o){let a;const c=lu(t.visibleWrites,e),l=Th(c,Yt());if(l!=null)a=l;else if(n!=null)a=Dp(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<s;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function hY(){return{visibleWrites:na.empty(),allWrites:[],lastWriteId:-1}}function yE(t,e,n,r){return G6(t.writeTree,t.treePath,e,n,r)}function _R(t,e){return aY(t.writeTree,t.treePath,e)}function h2(t,e,n,r){return cY(t.writeTree,t.treePath,e,n,r)}function wE(t,e){return uY(t.writeTree,vr(t.treePath,e))}function fY(t,e,n,r,s,i){return dY(t.writeTree,t.treePath,e,n,r,s,i)}function CR(t,e,n){return lY(t.writeTree,t.treePath,e,n)}function V6(t,e){return K6(vr(t.treePath,e),t.writeTree)}function K6(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pY{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Ce(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Ce(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,ky(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,Oy(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,kp(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,ky(r,e.snapshotNode,s.oldSnap));else throw gg("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gY{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Y6=new gY;class SR{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Pu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return CR(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:eh(this.viewCache_),i=fY(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mY(t){return{filter:t}}function yY(t,e){Ce(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Ce(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function wY(t,e,n,r,s){const i=new pY;let o,a;if(n.type===Xo.OVERWRITE){const l=n;l.source.fromUser?o=kI(t,e,l.path,l.snap,r,s,i):(Ce(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Tt(l.path),o=bE(t,e,l.path,l.snap,r,s,a,i))}else if(n.type===Xo.MERGE){const l=n;l.source.fromUser?o=vY(t,e,l.path,l.children,r,s,i):(Ce(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=DI(t,e,l.path,l.children,r,s,a,i))}else if(n.type===Xo.ACK_USER_WRITE){const l=n;l.revert?o=CY(t,e,l.path,r,s,i):o=EY(t,e,l.path,l.affectedTree,r,s,i)}else if(n.type===Xo.LISTEN_COMPLETE)o=_Y(t,e,n.path,r,i);else throw gg("Unknown operation type: "+n.type);const c=i.getChanges();return bY(e,o,c),{viewCache:o,changes:c}}function bY(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=mE(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(j6(mE(e)))}}function Q6(t,e,n,r,s,i){const o=e.eventCache;if(wE(r,n)!=null)return e;{let a,c;if(Tt(n))if(Ce(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=eh(e),u=l instanceof lt?l:lt.EMPTY_NODE,d=_R(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const l=yE(r,eh(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,i)}else{const l=Nt(n);if(l===".priority"){Ce(Ru(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=h2(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=Tn(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const h=h2(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=CR(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,s,i):a=o.getNode()}}return Zm(e,a,o.isFullyInitialized()||Tt(n),t.filter.filtersNodes())}}function bE(t,e,n,r,s,i,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(Tt(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=Nt(n);if(!c.isCompleteForPath(n)&&Ru(n)>1)return e;const p=Tn(n),w=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=u.updatePriority(c.getNode(),w):l=u.updateChild(c.getNode(),f,w,p,Y6,null)}const d=z6(e,l,c.isFullyInitialized()||Tt(n),u.filtersNodes()),h=new SR(s,d,i);return Q6(t,d,n,s,h,a)}function kI(t,e,n,r,s,i,o){const a=e.eventCache;let c,l;const u=new SR(s,e,i);if(Tt(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Zm(e,l,!0,t.filter.filtersNodes());else{const d=Nt(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Zm(e,l,a.isFullyInitialized(),a.isFiltered());else{const h=Tn(n),f=a.getNode().getImmediateChild(d);let p;if(Tt(h))p=r;else{const g=u.getCompleteChild(d);g!=null?P6(h)===".priority"&&g.getChild(k6(h)).isEmpty()?p=g:p=g.updateChild(h,r):p=lt.EMPTY_NODE}if(f.equals(p))c=e;else{const g=t.filter.updateChild(a.getNode(),d,p,h,u,o);c=Zm(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function f2(t,e){return t.eventCache.isCompleteForChild(e)}function vY(t,e,n,r,s,i,o){let a=e;return r.foreach((c,l)=>{const u=vr(n,c);f2(e,Nt(u))&&(a=kI(t,a,u,l,s,i,o))}),r.foreach((c,l)=>{const u=vr(n,c);f2(e,Nt(u))||(a=kI(t,a,u,l,s,i,o))}),a}function p2(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function DI(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Tt(n)?l=r:l=new Dn(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=p2(t,f,h);c=bE(t,c,new _n(d),p,s,i,o,a)}}),l.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),g=p2(t,p,h);c=bE(t,c,new _n(d),g,s,i,o,a)}}),c}function EY(t,e,n,r,s,i,o){if(wE(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Tt(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return bE(t,e,n,c.getNode().getChild(n),s,i,a,o);if(Tt(n)){let l=new Dn(null);return c.getNode().forEachChild(sp,(u,d)=>{l=l.set(new _n(u),d)}),DI(t,e,n,l,s,i,a,o)}else return e}else{let l=new Dn(null);return r.foreach((u,d)=>{const h=vr(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),DI(t,e,n,l,s,i,a,o)}}function _Y(t,e,n,r,s){const i=e.serverCache,o=z6(e,i.getNode(),i.isFullyInitialized()||Tt(n),i.isFiltered());return Q6(t,o,n,r,Y6,s)}function CY(t,e,n,r,s,i){let o;if(wE(r,n)!=null)return e;{const a=new SR(r,e,s),c=e.eventCache.getNode();let l;if(Tt(n)||Nt(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=yE(r,eh(e));else{const d=e.serverCache.getNode();Ce(d instanceof lt,"serverChildren would be complete if leaf node"),u=_R(r,d)}u=u,l=t.filter.updateFullNode(c,u,i)}else{const u=Nt(n);let d=CR(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,Tn(n),a,i):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,lt.EMPTY_NODE,Tn(n),a,i):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=yE(r,eh(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,i)))}return o=e.serverCache.isFullyInitialized()||wE(r,Yt())!=null,Zm(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SY{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new wR(r.getIndex()),i=zK(r);this.processor_=mY(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(lt.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(lt.EMPTY_NODE,a.getNode(),null),u=new Pu(c,o.isFullyInitialized(),s.filtersNodes()),d=new Pu(l,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=U_(d,u),this.eventGenerator_=new QK(this.query_)}get query(){return this.query_}}function AY(t){return t.viewCache_.serverCache.getNode()}function IY(t){return mE(t.viewCache_)}function NY(t,e){const n=eh(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Tt(e)&&!n.getImmediateChild(Nt(e)).isEmpty())?n.getChild(e):null}function g2(t){return t.eventRegistrations_.length===0}function xY(t,e){t.eventRegistrations_.push(e)}function m2(t,e,n){const r=[];if(n){Ce(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function y2(t,e,n,r){e.type===Xo.MERGE&&e.source.queryId!==null&&(Ce(eh(t.viewCache_),"We should always have a full cache before handling merges"),Ce(mE(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=wY(t.processor_,s,e,n,r);return yY(t.processor_,i.viewCache),Ce(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,Z6(t,i.changes,i.viewCache.eventCache.getNode(),null)}function TY(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Xn,(i,o)=>{r.push(kp(i,o))}),n.isFullyInitialized()&&r.push(j6(n.getNode())),Z6(t,r,n.getNode(),e)}function Z6(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return ZK(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vE;class J6{constructor(){this.views=new Map}}function RY(t){Ce(!vE,"__referenceConstructor has already been defined"),vE=t}function PY(){return Ce(vE,"Reference.ts has not been loaded"),vE}function OY(t){return t.views.size===0}function AR(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return Ce(i!=null,"SyncTree gave us an op for an invalid query."),y2(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(y2(o,e,n,r));return i}}function X6(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=yE(n,s?r:null),c=!1;a?c=!0:r instanceof lt?(a=_R(n,r),c=!1):(a=lt.EMPTY_NODE,c=!1);const l=U_(new Pu(a,c,!1),new Pu(r,s,!1));return new SY(e,l)}return o}function kY(t,e,n,r,s,i){const o=X6(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),xY(o,n),TY(o,n)}function DY(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=Ou(t);if(s==="default")for(const[c,l]of t.views.entries())o=o.concat(m2(l,n,r)),g2(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||i.push(l.query));else{const c=t.views.get(s);c&&(o=o.concat(m2(c,n,r)),g2(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!Ou(t)&&i.push(new(PY())(e._repo,e._path)),{removed:i,events:o}}function e8(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function uu(t,e){let n=null;for(const r of t.views.values())n=n||NY(r,e);return n}function t8(t,e){if(e._queryParams.loadsAllData())return j_(t);{const r=e._queryIdentifier;return t.views.get(r)}}function n8(t,e){return t8(t,e)!=null}function Ou(t){return j_(t)!=null}function j_(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EE;function $Y(t){Ce(!EE,"__referenceConstructor has already been defined"),EE=t}function MY(){return Ce(EE,"Reference.ts has not been loaded"),EE}let LY=1;class w2{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Dn(null),this.pendingWriteTree_=hY(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function r8(t,e,n,r,s){return tY(t.pendingWriteTree_,e,n,r,s),s?f0(t,new Xd(W6(),e,n)):[]}function Ed(t,e,n=!1){const r=nY(t.pendingWriteTree_,e);if(rY(t.pendingWriteTree_,e)){let i=new Dn(null);return r.snap!=null?i=i.set(Yt(),!0):hi(r.children,o=>{i=i.set(new _n(o),!0)}),f0(t,new gE(r.path,i,n))}else return[]}function h0(t,e,n){return f0(t,new Xd(vR(),e,n))}function UY(t,e,n){const r=Dn.fromObject(n);return f0(t,new My(vR(),e,r))}function BY(t,e){return f0(t,new $y(vR(),e))}function jY(t,e,n){const r=NR(t,n);if(r){const s=xR(r),i=s.path,o=s.queryId,a=Ns(i,e),c=new $y(ER(o),a);return TR(t,i,c)}else return[]}function _E(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||n8(o,e))){const c=DY(o,e,n,r);OY(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const l=c.removed;if(a=c.events,!s){const u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(h,f)=>Ou(f));if(u&&!d){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const f=zY(h);for(let p=0;p<f.length;++p){const g=f[p],w=g.query,y=a8(t,g);t.listenProvider_.startListening(Xm(w),Ly(t,w),y.hashFn,y.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(Xm(e),null):l.forEach(h=>{const f=t.queryToTagMap.get(F_(h));t.listenProvider_.stopListening(Xm(h),f)}))}HY(t,l)}return a}function s8(t,e,n,r){const s=NR(t,r);if(s!=null){const i=xR(s),o=i.path,a=i.queryId,c=Ns(o,e),l=new Xd(ER(a),c,n);return TR(t,o,l)}else return[]}function FY(t,e,n,r){const s=NR(t,r);if(s){const i=xR(s),o=i.path,a=i.queryId,c=Ns(o,e),l=Dn.fromObject(n),u=new My(ER(a),c,l);return TR(t,o,u)}else return[]}function $I(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(h,f)=>{const p=Ns(h,s);i=i||uu(f,p),o=o||Ou(f)});let a=t.syncPointTree_.get(s);a?(o=o||Ou(a),i=i||uu(a,Yt())):(a=new J6,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=lt.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((f,p)=>{const g=uu(p,Yt());g&&(i=i.updateImmediateChild(f,g))}));const l=n8(a,e);if(!l&&!e._queryParams.loadsAllData()){const h=F_(e);Ce(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=qY();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const u=B_(t.pendingWriteTree_,s);let d=kY(a,e,n,u,i,c);if(!l&&!o&&!r){const h=t8(a,e);d=d.concat(GY(t,e,h))}return d}function IR(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=Ns(o,e),l=uu(a,c);if(l)return l});return G6(s,e,i,n,!0)}function WY(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{const d=Ns(l,n);r=r||uu(u,d)});let s=t.syncPointTree_.get(n);s?r=r||uu(s,Yt()):(s=new J6,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new Pu(r,!0,!1):null,a=B_(t.pendingWriteTree_,e._path),c=X6(s,e,a,i?o.getNode():lt.EMPTY_NODE,i);return IY(c)}function f0(t,e){return i8(e,t.syncPointTree_,null,B_(t.pendingWriteTree_,Yt()))}function i8(t,e,n,r){if(Tt(t.path))return o8(t,e,n,r);{const s=e.get(Yt());n==null&&s!=null&&(n=uu(s,Yt()));let i=[];const o=Nt(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=V6(r,o);i=i.concat(i8(a,c,l,u))}return s&&(i=i.concat(AR(s,t,r,n))),i}}function o8(t,e,n,r){const s=e.get(Yt());n==null&&s!=null&&(n=uu(s,Yt()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=V6(r,o),u=t.operationForChild(o);u&&(i=i.concat(o8(u,a,c,l)))}),s&&(i=i.concat(AR(s,t,r,n))),i}function a8(t,e){const n=e.query,r=Ly(t,n);return{hashFn:()=>(AY(e)||lt.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?jY(t,n._path,r):BY(t,n._path);{const i=WV(s,n);return _E(t,n,null,i)}}}}function Ly(t,e){const n=F_(e);return t.queryToTagMap.get(n)}function F_(t){return t._path.toString()+"$"+t._queryIdentifier}function NR(t,e){return t.tagToQueryMap.get(e)}function xR(t){const e=t.indexOf("$");return Ce(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new _n(t.substr(0,e))}}function TR(t,e,n){const r=t.syncPointTree_.get(e);Ce(r,"Missing sync point for query tag that we're tracking");const s=B_(t.pendingWriteTree_,e);return AR(r,n,s,null)}function zY(t){return t.fold((e,n,r)=>{if(n&&Ou(n))return[j_(n)];{let s=[];return n&&(s=e8(n)),hi(r,(i,o)=>{s=s.concat(o)}),s}})}function Xm(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(MY())(t._repo,t._path):t}function HY(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=F_(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function qY(){return LY++}function GY(t,e,n){const r=e._path,s=Ly(t,e),i=a8(t,n),o=t.listenProvider_.startListening(Xm(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)Ce(!Ou(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!Tt(l)&&u&&Ou(u))return[j_(u).query];{let h=[];return u&&(h=h.concat(e8(u).map(f=>f.query))),hi(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){const u=c[l];t.listenProvider_.stopListening(Xm(u),Ly(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new RR(n)}node(){return this.node_}}class PR{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=vr(this.path_,e);return new PR(this.syncTree_,n)}node(){return IR(this.syncTree_,this.path_)}}const VY=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},b2=function(t,e,n){if(!t||typeof t!="object")return t;if(Ce(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return KY(t[".sv"],e,n);if(typeof t[".sv"]=="object")return YY(t[".sv"],e);Ce(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},KY=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Ce(!1,"Unexpected server value: "+t)}},YY=function(t,e,n){t.hasOwnProperty("increment")||Ce(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&Ce(!1,"Unexpected increment value: "+r);const s=e.node();if(Ce(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},QY=function(t,e,n,r){return OR(e,new PR(n,t),r)},c8=function(t,e,n){return OR(t,new RR(e),n)};function OR(t,e,n){const r=t.getPriority().val(),s=b2(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=b2(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new Tr(a,Or(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Tr(s))),o.forEachChild(Xn,(a,c)=>{const l=OR(c,e.getImmediateChild(a),n);l!==c&&(i=i.updateImmediateChild(a,l))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function DR(t,e){let n=e instanceof _n?e:new _n(e),r=t,s=Nt(n);for(;s!==null;){const i=Pp(r.node.children,s)||{children:{},childCount:0};r=new kR(s,r,i),n=Tn(n),s=Nt(n)}return r}function bg(t){return t.node.value}function l8(t,e){t.node.value=e,MI(t)}function u8(t){return t.node.childCount>0}function ZY(t){return bg(t)===void 0&&!u8(t)}function W_(t,e){hi(t.node.children,(n,r)=>{e(new kR(n,t,r))})}function d8(t,e,n,r){n&&e(t),W_(t,s=>{d8(s,e,!0)})}function JY(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function p0(t){return new _n(t.parent===null?t.name:p0(t.parent)+"/"+t.name)}function MI(t){t.parent!==null&&XY(t.parent,t.name,t)}function XY(t,e,n){const r=ZY(n),s=sl(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,MI(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,MI(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eQ=/[\[\].#$\/\u0000-\u001F\u007F]/,tQ=/[\[\].#$\u0000-\u001F\u007F]/,W1=10*1024*1024,h8=function(t){return typeof t=="string"&&t.length!==0&&!eQ.test(t)},f8=function(t){return typeof t=="string"&&t.length!==0&&!tQ.test(t)},nQ=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),f8(t)},rQ=function(t,e,n,r){$R(lR(t,"value"),e,n)},$R=function(t,e,n){const r=n instanceof _n?new EK(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ad(r));if(typeof e=="function")throw new Error(t+"contains a function "+ad(r)+" with contents = "+e.toString());if(u6(e))throw new Error(t+"contains "+e.toString()+" "+ad(r));if(typeof e=="string"&&e.length>W1/3&&M_(e)>W1)throw new Error(t+"contains a string greater than "+W1+" utf8 bytes "+ad(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(hi(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!h8(o)))throw new Error(t+" contains an invalid key ("+o+") "+ad(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);_K(r,o),$R(t,a,r),CK(r)}),s&&i)throw new Error(t+' contains ".value" child '+ad(r)+" in addition to actual children.")}},p8=function(t,e,n,r){if(!f8(n))throw new Error(lR(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},sQ=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),p8(t,e,n)},g8=function(t,e){if(Nt(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},iQ=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!h8(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!nQ(n))throw new Error(lR(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oQ{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function MR(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!gR(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function m8(t,e,n){MR(t,n),y8(t,r=>gR(r,e))}function Za(t,e,n){MR(t,n),y8(t,r=>Jo(r,e)||Jo(e,r))}function y8(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(aQ(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function aQ(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Ym&&ds("event: "+n.toString()),wg(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cQ="repo_interrupt",lQ=25;class uQ{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new oQ,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=pE(),this.transactionQueueTree_=new kR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function dQ(t,e,n){if(t.stats_=fR(t.repoInfo_),t.forceRestClient_||GV())t.server_=new fE(t.repoInfo_,(r,s,i,o)=>{v2(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>E2(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{br(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new jc(t.repoInfo_,e,(r,s,i,o)=>{v2(t,r,s,i,o)},r=>{E2(t,r)},r=>{fQ(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=ZV(t.repoInfo_,()=>new YK(t.stats_,t.server_)),t.infoData_=new HK,t.infoSyncTree_=new w2({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=h0(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),UR(t,"connected",!1),t.serverSyncTree_=new w2({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const l=o(a,c);Za(t.eventQueue_,r._path,l)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function hQ(t){const n=t.infoData_.getNode(new _n(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function LR(t){return VY({timestamp:hQ(t)})}function v2(t,e,n,r,s){t.dataUpdateCount++;const i=new _n(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=cE(n,l=>Or(l));o=FY(t.serverSyncTree_,i,c,s)}else{const c=Or(n);o=s8(t.serverSyncTree_,i,c,s)}else if(r){const c=cE(n,l=>Or(l));o=UY(t.serverSyncTree_,i,c)}else{const c=Or(n);o=h0(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=H_(t,i)),Za(t.eventQueue_,a,o)}function E2(t,e){UR(t,"connected",e),e===!1&&mQ(t)}function fQ(t,e){hi(e,(n,r)=>{UR(t,n,r)})}function UR(t,e,n){const r=new _n("/.info/"+e),s=Or(n);t.infoData_.updateSnapshot(r,s);const i=h0(t.infoSyncTree_,r,s);Za(t.eventQueue_,r,i)}function w8(t){return t.nextWriteId_++}function pQ(t,e,n){const r=WY(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=Or(s).withIndex(e._queryParams.getIndex());$I(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=h0(t.serverSyncTree_,e._path,i);else{const a=Ly(t.serverSyncTree_,e);o=s8(t.serverSyncTree_,e._path,i,a)}return Za(t.eventQueue_,e._path,o),_E(t.serverSyncTree_,e,n,null,!0),i},s=>(z_(t,"get for query "+br(e)+" failed: "+s),Promise.reject(new Error(s))))}function gQ(t,e,n,r,s){z_(t,"set",{path:e.toString(),value:n,priority:r});const i=LR(t),o=Or(n,r),a=IR(t.serverSyncTree_,e),c=c8(o,a,i),l=w8(t),u=r8(t.serverSyncTree_,e,c,l,!0);MR(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p=h==="ok";p||oi("set at "+e+" failed: "+h);const g=Ed(t.serverSyncTree_,l,!p);Za(t.eventQueue_,e,g),vQ(t,s,h,f)});const d=C8(t,e);H_(t,d),Za(t.eventQueue_,d,[])}function mQ(t){z_(t,"onDisconnectEvents");const e=LR(t),n=pE();RI(t.onDisconnect_,Yt(),(s,i)=>{const o=QY(s,i,t.serverSyncTree_,e);F6(n,s,o)});let r=[];RI(n,Yt(),(s,i)=>{r=r.concat(h0(t.serverSyncTree_,s,i));const o=C8(t,s);H_(t,o)}),t.onDisconnect_=pE(),Za(t.eventQueue_,Yt(),r)}function yQ(t,e,n){let r;Nt(e._path)===".info"?r=$I(t.infoSyncTree_,e,n):r=$I(t.serverSyncTree_,e,n),m8(t.eventQueue_,e._path,r)}function wQ(t,e,n){let r;Nt(e._path)===".info"?r=_E(t.infoSyncTree_,e,n):r=_E(t.serverSyncTree_,e,n),m8(t.eventQueue_,e._path,r)}function bQ(t){t.persistentConnection_&&t.persistentConnection_.interrupt(cQ)}function z_(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ds(n,...e)}function vQ(t,e,n,r){e&&wg(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function b8(t,e,n){return IR(t.serverSyncTree_,e,n)||lt.EMPTY_NODE}function BR(t,e=t.transactionQueueTree_){if(e||q_(t,e),bg(e)){const n=E8(t,e);Ce(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&EQ(t,p0(e),n)}else u8(e)&&W_(e,n=>{BR(t,n)})}function EQ(t,e,n){const r=n.map(l=>l.currentWriteId),s=b8(t,e,r);let i=s;const o=s.hash();for(let l=0;l<n.length;l++){const u=n[l];Ce(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=Ns(e,u.path);i=i.updateChild(d,u.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,l=>{z_(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(Ed(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();q_(t,DR(t.transactionQueueTree_,e)),BR(t,t.transactionQueueTree_),Za(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)wg(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{oi("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}H_(t,e)}},o)}function H_(t,e){const n=v8(t,e),r=p0(n),s=E8(t,n);return _Q(t,s,r),r}function _Q(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=Ns(n,c.path);let u=!1,d;if(Ce(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,s=s.concat(Ed(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=lQ)u=!0,d="maxretry",s=s.concat(Ed(t.serverSyncTree_,c.currentWriteId,!0));else{const h=b8(t,c.path,o);c.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){$R("transaction failed: Data returned ",f,c.path);let p=Or(f);typeof f=="object"&&f!=null&&sl(f,".priority")||(p=p.updatePriority(h.getPriority()));const w=c.currentWriteId,y=LR(t),b=c8(p,h,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=b,c.currentWriteId=w8(t),o.splice(o.indexOf(w),1),s=s.concat(r8(t.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally)),s=s.concat(Ed(t.serverSyncTree_,w,!0))}else u=!0,d="nodata",s=s.concat(Ed(t.serverSyncTree_,c.currentWriteId,!0))}Za(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}q_(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)wg(r[a]);BR(t,t.transactionQueueTree_)}function v8(t,e){let n,r=t.transactionQueueTree_;for(n=Nt(e);n!==null&&bg(r)===void 0;)r=DR(r,n),e=Tn(e),n=Nt(e);return r}function E8(t,e){const n=[];return _8(t,e,n),n.sort((r,s)=>r.order-s.order),n}function _8(t,e,n){const r=bg(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);W_(e,s=>{_8(t,s,n)})}function q_(t,e){const n=bg(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,l8(e,n.length>0?n:void 0)}W_(e,r=>{q_(t,r)})}function C8(t,e){const n=p0(v8(t,e)),r=DR(t.transactionQueueTree_,e);return JY(r,s=>{z1(t,s)}),z1(t,r),d8(r,s=>{z1(t,s)}),n}function z1(t,e){const n=bg(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Ce(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(Ce(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Ed(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?l8(e,void 0):n.length=i+1,Za(t.eventQueue_,p0(e),s);for(let o=0;o<r.length;o++)wg(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CQ(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function SQ(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):oi(`Invalid query segment '${n}' in query '${t}'`)}return e}const _2=function(t,e){const n=AQ(t),r=n.namespace;n.domain==="firebase.com"&&Yc(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Yc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||LV();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new _6(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new _n(n.pathString)}},AQ=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(s=CQ(t.substring(u,d)));const h=SQ(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),i=r}"ns"in h&&(i=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IQ{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+br(this.snapshot.exportVal())}}class NQ{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Ce(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Tt(this._path)?null:P6(this._path)}get ref(){return new il(this._repo,this._path)}get _queryIdentifier(){const e=a2(this._queryParams),n=dR(e);return n==="{}"?"default":n}get _queryObject(){return a2(this._queryParams)}isEqual(e){if(e=mg(e),!(e instanceof jR))return!1;const n=this._repo===e._repo,r=gR(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+vK(this._path)}}class il extends jR{constructor(e,n){super(e,n,new bR,!1)}get parent(){const e=k6(this._path);return e===null?null:new il(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Uy{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new _n(e),r=LI(this.ref,e);return new Uy(this._node.getChild(n),r,Xn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new Uy(s,LI(this.ref,r),Xn)))}hasChild(e){const n=new _n(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function to(t,e){return t=mg(t),t._checkNotDeleted("ref"),e!==void 0?LI(t._root,e):t._root}function LI(t,e){return t=mg(t),Nt(t._path)===null?sQ("child","path",e):p8("child","path",e),new il(t._repo,vr(t._path,e))}function xQ(t){return g8("remove",t._path),ey(t,null)}function ey(t,e){t=mg(t),g8("set",t._path),rQ("set",e,t._path);const n=new $_;return gQ(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function pd(t){t=mg(t);const e=new S8(()=>{}),n=new G_(e);return pQ(t._repo,t,n).then(r=>new Uy(r,new il(t._repo,t._path),t._queryParams.getIndex()))}class G_{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new IQ("value",this,new Uy(e.snapshotNode,new il(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new NQ(this,e,n):null}matches(e){return e instanceof G_?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function TQ(t,e,n,r,s){const i=new S8(n,void 0),o=new G_(i);return yQ(t._repo,t,o),()=>wQ(t._repo,t,o)}function C2(t,e,n,r){return TQ(t,"value",e)}RY(il);$Y(il);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RQ="FIREBASE_DATABASE_EMULATOR_HOST",UI={};let PQ=!1;function OQ(t,e,n,r){t.repoInfo_=new _6(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function kQ(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Yc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ds("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=_2(i,s),a=o.repoInfo,c;typeof process<"u"&&zk&&(c=zk[RQ]),c?(i=`http://${c}?ns=${a.namespace}`,o=_2(i,s),a=o.repoInfo):o.repoInfo.secure;const l=new KV(t.name,t.options,e);iQ("Invalid Firebase Database URL",o),Tt(o.path)||Yc("Database URL must point to the root of a Firebase Database (not including a child path).");const u=$Q(a,t,l,new VV(t.name,n));return new MQ(u,t)}function DQ(t,e){const n=UI[e];(!n||n[t.key]!==t)&&Yc(`Database ${e}(${t.repoInfo_}) has already been deleted.`),bQ(t),delete n[t.key]}function $Q(t,e,n,r){let s=UI[e.name];s||(s={},UI[e.name]=s);let i=s[t.toURLString()];return i&&Yc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new uQ(t,PQ,n,r),s[t.toURLString()]=i,i}class MQ{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(dQ(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new il(this._repo,Yt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(DQ(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Yc("Cannot call "+e+" on a deleted database.")}}function LQ(t=s6(),e){const n=gV(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=sG("database");r&&UQ(n,...r)}return n}function UQ(t,e,n,r={}){t=mg(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Yc("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Yc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new Av(Av.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:iG(r.mockUserToken,t.app.options.projectId);i=new Av(o)}OQ(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BQ(t){PV(wV),lE(new xy("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return kQ(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),np(Hk,qk,t),np(Hk,qk,"esm2017")}jc.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};jc.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};BQ();const jQ={apiKey:"AIzaSyAed5bn78c6Mb5Y3ezULH9CEg7IAKYFAps",authDomain:"chess-220ee.firebaseapp.com",databaseURL:"https://chess-220ee-default-rtdb.firebaseio.com",projectId:"chess-220ee",storageBucket:"chess-220ee.firebasestorage.app",messagingSenderId:"724477138097",appId:"1:724477138097:web:7dc15f79db3bda5c763e90"},FQ=bV().length?s6():r6(jQ),CE=LQ(FQ);var BI={},A8={exports:{}},ji={},I8={exports:{}},N8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,D){var B=R.length;R.push(D);e:for(;0<B;){var H=B-1>>>1,J=R[H];if(0<s(J,D))R[H]=D,R[B]=J,B=H;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var D=R[0],B=R.pop();if(B!==D){R[0]=B;e:for(var H=0,J=R.length,ee=J>>>1;H<ee;){var ne=2*(H+1)-1,ie=R[ne],we=ne+1,Z=R[we];if(0>s(ie,B))we<J&&0>s(Z,ie)?(R[H]=Z,R[we]=B,H=we):(R[H]=ie,R[ne]=B,H=ne);else if(we<J&&0>s(Z,B))R[H]=Z,R[we]=B,H=we;else break e}}return D}function s(R,D){var B=R.sortIndex-D.sortIndex;return B!==0?B:R.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(R){for(var D=n(l);D!==null;){if(D.callback===null)r(l);else if(D.startTime<=R)r(l),D.sortIndex=D.expirationTime,e(c,D);else break;D=n(l)}}function _(R){if(g=!1,E(R),!p)if(n(c)!==null)p=!0,N(C);else{var D=n(l);D!==null&&$(_,D.startTime-R)}}function C(R,D){p=!1,g&&(g=!1,y(x),x=-1),f=!0;var B=h;try{for(E(D),d=n(c);d!==null&&(!(d.expirationTime>D)||R&&!O());){var H=d.callback;if(typeof H=="function"){d.callback=null,h=d.priorityLevel;var J=H(d.expirationTime<=D);D=t.unstable_now(),typeof J=="function"?d.callback=J:d===n(c)&&r(c),E(D)}else r(c);d=n(c)}if(d!==null)var ee=!0;else{var ne=n(l);ne!==null&&$(_,ne.startTime-D),ee=!1}return ee}finally{d=null,h=B,f=!1}}var I=!1,A=null,x=-1,S=5,k=-1;function O(){return!(t.unstable_now()-k<S)}function U(){if(A!==null){var R=t.unstable_now();k=R;var D=!0;try{D=A(!0,R)}finally{D?G():(I=!1,A=null)}}else I=!1}var G;if(typeof b=="function")G=function(){b(U)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,T=F.port2;F.port1.onmessage=U,G=function(){T.postMessage(null)}}else G=function(){w(U,0)};function N(R){A=R,I||(I=!0,G())}function $(R,D){x=w(function(){R(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,N(C))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(R){switch(h){case 1:case 2:case 3:var D=3;break;default:D=h}var B=h;h=D;try{return R()}finally{h=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,D){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var B=h;h=R;try{return D()}finally{h=B}},t.unstable_scheduleCallback=function(R,D,B){var H=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?H+B:H):B=H,R){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=B+J,R={id:u++,callback:D,priorityLevel:R,startTime:B,expirationTime:J,sortIndex:-1},B>H?(R.sortIndex=B,e(l,R),n(c)===null&&R===n(l)&&(g?(y(x),x=-1):g=!0,$(_,B-H))):(R.sortIndex=J,e(c,R),p||f||(p=!0,N(C))),R},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(R){var D=h;return function(){var B=h;h=D;try{return R.apply(this,arguments)}finally{h=B}}}})(N8);I8.exports=N8;var WQ=I8.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zQ=P,Li=WQ;function me(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var x8=new Set,By={};function Rh(t,e){$p(t,e),$p(t+"Capture",e)}function $p(t,e){for(By[t]=e,t=0;t<e.length;t++)x8.add(e[t])}var Qc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jI=Object.prototype.hasOwnProperty,HQ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S2={},A2={};function qQ(t){return jI.call(A2,t)?!0:jI.call(S2,t)?!1:HQ.test(t)?A2[t]=!0:(S2[t]=!0,!1)}function GQ(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function VQ(t,e,n,r){if(e===null||typeof e>"u"||GQ(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ds(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Xr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xr[t]=new Ds(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xr[e]=new Ds(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xr[t]=new Ds(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xr[t]=new Ds(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xr[t]=new Ds(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xr[t]=new Ds(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xr[t]=new Ds(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xr[t]=new Ds(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xr[t]=new Ds(t,5,!1,t.toLowerCase(),null,!1,!1)});var FR=/[\-:]([a-z])/g;function WR(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(FR,WR);Xr[e]=new Ds(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(FR,WR);Xr[e]=new Ds(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(FR,WR);Xr[e]=new Ds(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xr[t]=new Ds(t,1,!1,t.toLowerCase(),null,!1,!1)});Xr.xlinkHref=new Ds("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xr[t]=new Ds(t,1,!1,t.toLowerCase(),null,!0,!0)});function zR(t,e,n,r){var s=Xr.hasOwnProperty(e)?Xr[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(VQ(e,n,s,r)&&(n=null),r||s===null?qQ(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ol=zQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yb=Symbol.for("react.element"),Bf=Symbol.for("react.portal"),jf=Symbol.for("react.fragment"),HR=Symbol.for("react.strict_mode"),FI=Symbol.for("react.profiler"),T8=Symbol.for("react.provider"),R8=Symbol.for("react.context"),qR=Symbol.for("react.forward_ref"),WI=Symbol.for("react.suspense"),zI=Symbol.for("react.suspense_list"),GR=Symbol.for("react.memo"),Pl=Symbol.for("react.lazy"),P8=Symbol.for("react.offscreen"),I2=Symbol.iterator;function Xg(t){return t===null||typeof t!="object"?null:(t=I2&&t[I2]||t["@@iterator"],typeof t=="function"?t:null)}var Kn=Object.assign,H1;function Om(t){if(H1===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);H1=e&&e[1]||""}return`
`+H1+t}var q1=!1;function G1(t,e){if(!t||q1)return"";q1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{q1=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Om(t):""}function KQ(t){switch(t.tag){case 5:return Om(t.type);case 16:return Om("Lazy");case 13:return Om("Suspense");case 19:return Om("SuspenseList");case 0:case 2:case 15:return t=G1(t.type,!1),t;case 11:return t=G1(t.type.render,!1),t;case 1:return t=G1(t.type,!0),t;default:return""}}function HI(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case jf:return"Fragment";case Bf:return"Portal";case FI:return"Profiler";case HR:return"StrictMode";case WI:return"Suspense";case zI:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case R8:return(t.displayName||"Context")+".Consumer";case T8:return(t._context.displayName||"Context")+".Provider";case qR:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case GR:return e=t.displayName||null,e!==null?e:HI(t.type)||"Memo";case Pl:e=t._payload,t=t._init;try{return HI(t(e))}catch{}}return null}function YQ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return HI(e);case 8:return e===HR?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ku(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function O8(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function QQ(t){var e=O8(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function wb(t){t._valueTracker||(t._valueTracker=QQ(t))}function k8(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=O8(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function SE(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qI(t,e){var n=e.checked;return Kn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function N2(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ku(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function D8(t,e){e=e.checked,e!=null&&zR(t,"checked",e,!1)}function GI(t,e){D8(t,e);var n=ku(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?VI(t,e.type,n):e.hasOwnProperty("defaultValue")&&VI(t,e.type,ku(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function x2(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function VI(t,e,n){(e!=="number"||SE(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var km=Array.isArray;function ip(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ku(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function KI(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(me(91));return Kn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function T2(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(me(92));if(km(n)){if(1<n.length)throw Error(me(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ku(n)}}function $8(t,e){var n=ku(e.value),r=ku(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function R2(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function M8(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function YI(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?M8(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bb,L8=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bb=bb||document.createElement("div"),bb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bb.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function jy(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ty={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZQ=["Webkit","ms","Moz","O"];Object.keys(ty).forEach(function(t){ZQ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ty[e]=ty[t]})});function U8(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ty.hasOwnProperty(t)&&ty[t]?(""+e).trim():e+"px"}function B8(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=U8(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var JQ=Kn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function QI(t,e){if(e){if(JQ[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(me(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(me(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(me(61))}if(e.style!=null&&typeof e.style!="object")throw Error(me(62))}}function ZI(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var JI=null;function VR(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var XI=null,op=null,ap=null;function P2(t){if(t=y0(t)){if(typeof XI!="function")throw Error(me(280));var e=t.stateNode;e&&(e=Z_(e),XI(t.stateNode,t.type,e))}}function j8(t){op?ap?ap.push(t):ap=[t]:op=t}function F8(){if(op){var t=op,e=ap;if(ap=op=null,P2(t),e)for(t=0;t<e.length;t++)P2(e[t])}}function W8(t,e){return t(e)}function z8(){}var V1=!1;function H8(t,e,n){if(V1)return t(e,n);V1=!0;try{return W8(t,e,n)}finally{V1=!1,(op!==null||ap!==null)&&(z8(),F8())}}function Fy(t,e){var n=t.stateNode;if(n===null)return null;var r=Z_(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(me(231,e,typeof n));return n}var eN=!1;if(Qc)try{var em={};Object.defineProperty(em,"passive",{get:function(){eN=!0}}),window.addEventListener("test",em,em),window.removeEventListener("test",em,em)}catch{eN=!1}function XQ(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var ny=!1,AE=null,IE=!1,tN=null,eZ={onError:function(t){ny=!0,AE=t}};function tZ(t,e,n,r,s,i,o,a,c){ny=!1,AE=null,XQ.apply(eZ,arguments)}function nZ(t,e,n,r,s,i,o,a,c){if(tZ.apply(this,arguments),ny){if(ny){var l=AE;ny=!1,AE=null}else throw Error(me(198));IE||(IE=!0,tN=l)}}function Ph(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function q8(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function O2(t){if(Ph(t)!==t)throw Error(me(188))}function rZ(t){var e=t.alternate;if(!e){if(e=Ph(t),e===null)throw Error(me(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return O2(s),t;if(i===r)return O2(s),e;i=i.sibling}throw Error(me(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(me(189))}}if(n.alternate!==r)throw Error(me(190))}if(n.tag!==3)throw Error(me(188));return n.stateNode.current===n?t:e}function G8(t){return t=rZ(t),t!==null?V8(t):null}function V8(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=V8(t);if(e!==null)return e;t=t.sibling}return null}var K8=Li.unstable_scheduleCallback,k2=Li.unstable_cancelCallback,sZ=Li.unstable_shouldYield,iZ=Li.unstable_requestPaint,rr=Li.unstable_now,oZ=Li.unstable_getCurrentPriorityLevel,KR=Li.unstable_ImmediatePriority,Y8=Li.unstable_UserBlockingPriority,NE=Li.unstable_NormalPriority,aZ=Li.unstable_LowPriority,Q8=Li.unstable_IdlePriority,V_=null,Ha=null;function cZ(t){if(Ha&&typeof Ha.onCommitFiberRoot=="function")try{Ha.onCommitFiberRoot(V_,t,void 0,(t.current.flags&128)===128)}catch{}}var ra=Math.clz32?Math.clz32:dZ,lZ=Math.log,uZ=Math.LN2;function dZ(t){return t>>>=0,t===0?32:31-(lZ(t)/uZ|0)|0}var vb=64,Eb=4194304;function Dm(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xE(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Dm(a):(i&=o,i!==0&&(r=Dm(i)))}else o=n&~s,o!==0?r=Dm(o):i!==0&&(r=Dm(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ra(e),s=1<<n,r|=t[n],e&=~s;return r}function hZ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fZ(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ra(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=hZ(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function nN(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Z8(){var t=vb;return vb<<=1,!(vb&4194240)&&(vb=64),t}function K1(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function g0(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ra(e),t[e]=n}function pZ(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ra(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function YR(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ra(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ln=0;function J8(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var X8,QR,eB,tB,nB,rN=!1,_b=[],du=null,hu=null,fu=null,Wy=new Map,zy=new Map,Ll=[],gZ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function D2(t,e){switch(t){case"focusin":case"focusout":du=null;break;case"dragenter":case"dragleave":hu=null;break;case"mouseover":case"mouseout":fu=null;break;case"pointerover":case"pointerout":Wy.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zy.delete(e.pointerId)}}function tm(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=y0(e),e!==null&&QR(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function mZ(t,e,n,r,s){switch(e){case"focusin":return du=tm(du,t,e,n,r,s),!0;case"dragenter":return hu=tm(hu,t,e,n,r,s),!0;case"mouseover":return fu=tm(fu,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Wy.set(i,tm(Wy.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,zy.set(i,tm(zy.get(i)||null,t,e,n,r,s)),!0}return!1}function rB(t){var e=_d(t.target);if(e!==null){var n=Ph(e);if(n!==null){if(e=n.tag,e===13){if(e=q8(n),e!==null){t.blockedOn=e,nB(t.priority,function(){eB(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Iv(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sN(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);JI=r,n.target.dispatchEvent(r),JI=null}else return e=y0(n),e!==null&&QR(e),t.blockedOn=n,!1;e.shift()}return!0}function $2(t,e,n){Iv(t)&&n.delete(e)}function yZ(){rN=!1,du!==null&&Iv(du)&&(du=null),hu!==null&&Iv(hu)&&(hu=null),fu!==null&&Iv(fu)&&(fu=null),Wy.forEach($2),zy.forEach($2)}function nm(t,e){t.blockedOn===e&&(t.blockedOn=null,rN||(rN=!0,Li.unstable_scheduleCallback(Li.unstable_NormalPriority,yZ)))}function Hy(t){function e(s){return nm(s,t)}if(0<_b.length){nm(_b[0],t);for(var n=1;n<_b.length;n++){var r=_b[n];r.blockedOn===t&&(r.blockedOn=null)}}for(du!==null&&nm(du,t),hu!==null&&nm(hu,t),fu!==null&&nm(fu,t),Wy.forEach(e),zy.forEach(e),n=0;n<Ll.length;n++)r=Ll[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ll.length&&(n=Ll[0],n.blockedOn===null);)rB(n),n.blockedOn===null&&Ll.shift()}var cp=ol.ReactCurrentBatchConfig,TE=!0;function wZ(t,e,n,r){var s=ln,i=cp.transition;cp.transition=null;try{ln=1,ZR(t,e,n,r)}finally{ln=s,cp.transition=i}}function bZ(t,e,n,r){var s=ln,i=cp.transition;cp.transition=null;try{ln=4,ZR(t,e,n,r)}finally{ln=s,cp.transition=i}}function ZR(t,e,n,r){if(TE){var s=sN(t,e,n,r);if(s===null)sS(t,e,r,RE,n),D2(t,r);else if(mZ(s,t,e,n,r))r.stopPropagation();else if(D2(t,r),e&4&&-1<gZ.indexOf(t)){for(;s!==null;){var i=y0(s);if(i!==null&&X8(i),i=sN(t,e,n,r),i===null&&sS(t,e,r,RE,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else sS(t,e,r,null,n)}}var RE=null;function sN(t,e,n,r){if(RE=null,t=VR(r),t=_d(t),t!==null)if(e=Ph(t),e===null)t=null;else if(n=e.tag,n===13){if(t=q8(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return RE=t,null}function sB(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oZ()){case KR:return 1;case Y8:return 4;case NE:case aZ:return 16;case Q8:return 536870912;default:return 16}default:return 16}}var Jl=null,JR=null,Nv=null;function iB(){if(Nv)return Nv;var t,e=JR,n=e.length,r,s="value"in Jl?Jl.value:Jl.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Nv=s.slice(t,1<r?1-r:void 0)}function xv(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Cb(){return!0}function M2(){return!1}function Fi(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Cb:M2,this.isPropagationStopped=M2,this}return Kn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cb)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cb)},persist:function(){},isPersistent:Cb}),e}var vg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},XR=Fi(vg),m0=Kn({},vg,{view:0,detail:0}),vZ=Fi(m0),Y1,Q1,rm,K_=Kn({},m0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eP,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==rm&&(rm&&t.type==="mousemove"?(Y1=t.screenX-rm.screenX,Q1=t.screenY-rm.screenY):Q1=Y1=0,rm=t),Y1)},movementY:function(t){return"movementY"in t?t.movementY:Q1}}),L2=Fi(K_),EZ=Kn({},K_,{dataTransfer:0}),_Z=Fi(EZ),CZ=Kn({},m0,{relatedTarget:0}),Z1=Fi(CZ),SZ=Kn({},vg,{animationName:0,elapsedTime:0,pseudoElement:0}),AZ=Fi(SZ),IZ=Kn({},vg,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),NZ=Fi(IZ),xZ=Kn({},vg,{data:0}),U2=Fi(xZ),TZ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RZ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},PZ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OZ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=PZ[t])?!!e[t]:!1}function eP(){return OZ}var kZ=Kn({},m0,{key:function(t){if(t.key){var e=TZ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xv(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?RZ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eP,charCode:function(t){return t.type==="keypress"?xv(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xv(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),DZ=Fi(kZ),$Z=Kn({},K_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),B2=Fi($Z),MZ=Kn({},m0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eP}),LZ=Fi(MZ),UZ=Kn({},vg,{propertyName:0,elapsedTime:0,pseudoElement:0}),BZ=Fi(UZ),jZ=Kn({},K_,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),FZ=Fi(jZ),WZ=[9,13,27,32],tP=Qc&&"CompositionEvent"in window,ry=null;Qc&&"documentMode"in document&&(ry=document.documentMode);var zZ=Qc&&"TextEvent"in window&&!ry,oB=Qc&&(!tP||ry&&8<ry&&11>=ry),j2=" ",F2=!1;function aB(t,e){switch(t){case"keyup":return WZ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cB(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ff=!1;function HZ(t,e){switch(t){case"compositionend":return cB(e);case"keypress":return e.which!==32?null:(F2=!0,j2);case"textInput":return t=e.data,t===j2&&F2?null:t;default:return null}}function qZ(t,e){if(Ff)return t==="compositionend"||!tP&&aB(t,e)?(t=iB(),Nv=JR=Jl=null,Ff=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return oB&&e.locale!=="ko"?null:e.data;default:return null}}var GZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function W2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!GZ[t.type]:e==="textarea"}function lB(t,e,n,r){j8(r),e=PE(e,"onChange"),0<e.length&&(n=new XR("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var sy=null,qy=null;function VZ(t){vB(t,0)}function Y_(t){var e=Hf(t);if(k8(e))return t}function KZ(t,e){if(t==="change")return e}var uB=!1;if(Qc){var J1;if(Qc){var X1="oninput"in document;if(!X1){var z2=document.createElement("div");z2.setAttribute("oninput","return;"),X1=typeof z2.oninput=="function"}J1=X1}else J1=!1;uB=J1&&(!document.documentMode||9<document.documentMode)}function H2(){sy&&(sy.detachEvent("onpropertychange",dB),qy=sy=null)}function dB(t){if(t.propertyName==="value"&&Y_(qy)){var e=[];lB(e,qy,t,VR(t)),H8(VZ,e)}}function YZ(t,e,n){t==="focusin"?(H2(),sy=e,qy=n,sy.attachEvent("onpropertychange",dB)):t==="focusout"&&H2()}function QZ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Y_(qy)}function ZZ(t,e){if(t==="click")return Y_(e)}function JZ(t,e){if(t==="input"||t==="change")return Y_(e)}function XZ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var aa=typeof Object.is=="function"?Object.is:XZ;function Gy(t,e){if(aa(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!jI.call(e,s)||!aa(t[s],e[s]))return!1}return!0}function q2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function G2(t,e){var n=q2(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=q2(n)}}function hB(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hB(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function fB(){for(var t=window,e=SE();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=SE(t.document)}return e}function nP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function eJ(t){var e=fB(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hB(n.ownerDocument.documentElement,n)){if(r!==null&&nP(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=G2(n,i);var o=G2(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var tJ=Qc&&"documentMode"in document&&11>=document.documentMode,Wf=null,iN=null,iy=null,oN=!1;function V2(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;oN||Wf==null||Wf!==SE(r)||(r=Wf,"selectionStart"in r&&nP(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),iy&&Gy(iy,r)||(iy=r,r=PE(iN,"onSelect"),0<r.length&&(e=new XR("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Wf)))}function Sb(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var zf={animationend:Sb("Animation","AnimationEnd"),animationiteration:Sb("Animation","AnimationIteration"),animationstart:Sb("Animation","AnimationStart"),transitionend:Sb("Transition","TransitionEnd")},eS={},pB={};Qc&&(pB=document.createElement("div").style,"AnimationEvent"in window||(delete zf.animationend.animation,delete zf.animationiteration.animation,delete zf.animationstart.animation),"TransitionEvent"in window||delete zf.transitionend.transition);function Q_(t){if(eS[t])return eS[t];if(!zf[t])return t;var e=zf[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in pB)return eS[t]=e[n];return t}var gB=Q_("animationend"),mB=Q_("animationiteration"),yB=Q_("animationstart"),wB=Q_("transitionend"),bB=new Map,K2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wu(t,e){bB.set(t,e),Rh(e,[t])}for(var tS=0;tS<K2.length;tS++){var nS=K2[tS],nJ=nS.toLowerCase(),rJ=nS[0].toUpperCase()+nS.slice(1);Wu(nJ,"on"+rJ)}Wu(gB,"onAnimationEnd");Wu(mB,"onAnimationIteration");Wu(yB,"onAnimationStart");Wu("dblclick","onDoubleClick");Wu("focusin","onFocus");Wu("focusout","onBlur");Wu(wB,"onTransitionEnd");$p("onMouseEnter",["mouseout","mouseover"]);$p("onMouseLeave",["mouseout","mouseover"]);$p("onPointerEnter",["pointerout","pointerover"]);$p("onPointerLeave",["pointerout","pointerover"]);Rh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rh("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $m="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sJ=new Set("cancel close invalid load scroll toggle".split(" ").concat($m));function Y2(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,nZ(r,e,void 0,t),t.currentTarget=null}function vB(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;Y2(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;Y2(s,a,l),i=c}}}if(IE)throw t=tN,IE=!1,tN=null,t}function On(t,e){var n=e[dN];n===void 0&&(n=e[dN]=new Set);var r=t+"__bubble";n.has(r)||(EB(e,t,2,!1),n.add(r))}function rS(t,e,n){var r=0;e&&(r|=4),EB(n,t,r,e)}var Ab="_reactListening"+Math.random().toString(36).slice(2);function Vy(t){if(!t[Ab]){t[Ab]=!0,x8.forEach(function(n){n!=="selectionchange"&&(sJ.has(n)||rS(n,!1,t),rS(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ab]||(e[Ab]=!0,rS("selectionchange",!1,e))}}function EB(t,e,n,r){switch(sB(e)){case 1:var s=wZ;break;case 4:s=bZ;break;default:s=ZR}n=s.bind(null,e,n,t),s=void 0,!eN||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function sS(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=_d(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}H8(function(){var l=i,u=VR(n),d=[];e:{var h=bB.get(t);if(h!==void 0){var f=XR,p=t;switch(t){case"keypress":if(xv(n)===0)break e;case"keydown":case"keyup":f=DZ;break;case"focusin":p="focus",f=Z1;break;case"focusout":p="blur",f=Z1;break;case"beforeblur":case"afterblur":f=Z1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=L2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=_Z;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=LZ;break;case gB:case mB:case yB:f=AZ;break;case wB:f=BZ;break;case"scroll":f=vZ;break;case"wheel":f=FZ;break;case"copy":case"cut":case"paste":f=NZ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=B2}var g=(e&4)!==0,w=!g&&t==="scroll",y=g?h!==null?h+"Capture":null:h;g=[];for(var b=l,E;b!==null;){E=b;var _=E.stateNode;if(E.tag===5&&_!==null&&(E=_,y!==null&&(_=Fy(b,y),_!=null&&g.push(Ky(b,_,E)))),w)break;b=b.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==JI&&(p=n.relatedTarget||n.fromElement)&&(_d(p)||p[Zc]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?_d(p):null,p!==null&&(w=Ph(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=L2,_="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=B2,_="onPointerLeave",y="onPointerEnter",b="pointer"),w=f==null?h:Hf(f),E=p==null?h:Hf(p),h=new g(_,b+"leave",f,n,u),h.target=w,h.relatedTarget=E,_=null,_d(u)===l&&(g=new g(y,b+"enter",p,n,u),g.target=E,g.relatedTarget=w,_=g),w=_,f&&p)t:{for(g=f,y=p,b=0,E=g;E;E=tf(E))b++;for(E=0,_=y;_;_=tf(_))E++;for(;0<b-E;)g=tf(g),b--;for(;0<E-b;)y=tf(y),E--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break t;g=tf(g),y=tf(y)}g=null}else g=null;f!==null&&Q2(d,h,f,g,!1),p!==null&&w!==null&&Q2(d,w,p,g,!0)}}e:{if(h=l?Hf(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var C=KZ;else if(W2(h))if(uB)C=JZ;else{C=QZ;var I=YZ}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=ZZ);if(C&&(C=C(t,l))){lB(d,C,n,u);break e}I&&I(t,h,l),t==="focusout"&&(I=h._wrapperState)&&I.controlled&&h.type==="number"&&VI(h,"number",h.value)}switch(I=l?Hf(l):window,t){case"focusin":(W2(I)||I.contentEditable==="true")&&(Wf=I,iN=l,iy=null);break;case"focusout":iy=iN=Wf=null;break;case"mousedown":oN=!0;break;case"contextmenu":case"mouseup":case"dragend":oN=!1,V2(d,n,u);break;case"selectionchange":if(tJ)break;case"keydown":case"keyup":V2(d,n,u)}var A;if(tP)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Ff?aB(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(oB&&n.locale!=="ko"&&(Ff||x!=="onCompositionStart"?x==="onCompositionEnd"&&Ff&&(A=iB()):(Jl=u,JR="value"in Jl?Jl.value:Jl.textContent,Ff=!0)),I=PE(l,x),0<I.length&&(x=new U2(x,t,null,n,u),d.push({event:x,listeners:I}),A?x.data=A:(A=cB(n),A!==null&&(x.data=A)))),(A=zZ?HZ(t,n):qZ(t,n))&&(l=PE(l,"onBeforeInput"),0<l.length&&(u=new U2("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=A))}vB(d,e)})}function Ky(t,e,n){return{instance:t,listener:e,currentTarget:n}}function PE(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Fy(t,n),i!=null&&r.unshift(Ky(t,i,s)),i=Fy(t,e),i!=null&&r.push(Ky(t,i,s))),t=t.return}return r}function tf(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Q2(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=Fy(n,i),c!=null&&o.unshift(Ky(n,c,a))):s||(c=Fy(n,i),c!=null&&o.push(Ky(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var iJ=/\r\n?/g,oJ=/\u0000|\uFFFD/g;function Z2(t){return(typeof t=="string"?t:""+t).replace(iJ,`
`).replace(oJ,"")}function Ib(t,e,n){if(e=Z2(e),Z2(t)!==e&&n)throw Error(me(425))}function OE(){}var aN=null,cN=null;function lN(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var uN=typeof setTimeout=="function"?setTimeout:void 0,aJ=typeof clearTimeout=="function"?clearTimeout:void 0,J2=typeof Promise=="function"?Promise:void 0,cJ=typeof queueMicrotask=="function"?queueMicrotask:typeof J2<"u"?function(t){return J2.resolve(null).then(t).catch(lJ)}:uN;function lJ(t){setTimeout(function(){throw t})}function iS(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Hy(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Hy(e)}function pu(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function X2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Eg=Math.random().toString(36).slice(2),Ba="__reactFiber$"+Eg,Yy="__reactProps$"+Eg,Zc="__reactContainer$"+Eg,dN="__reactEvents$"+Eg,uJ="__reactListeners$"+Eg,dJ="__reactHandles$"+Eg;function _d(t){var e=t[Ba];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zc]||n[Ba]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=X2(t);t!==null;){if(n=t[Ba])return n;t=X2(t)}return e}t=n,n=t.parentNode}return null}function y0(t){return t=t[Ba]||t[Zc],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hf(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(me(33))}function Z_(t){return t[Yy]||null}var hN=[],qf=-1;function zu(t){return{current:t}}function $n(t){0>qf||(t.current=hN[qf],hN[qf]=null,qf--)}function Rn(t,e){qf++,hN[qf]=t.current,t.current=e}var Du={},fs=zu(Du),ai=zu(!1),th=Du;function Mp(t,e){var n=t.type.contextTypes;if(!n)return Du;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ci(t){return t=t.childContextTypes,t!=null}function kE(){$n(ai),$n(fs)}function eD(t,e,n){if(fs.current!==Du)throw Error(me(168));Rn(fs,e),Rn(ai,n)}function _B(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(me(108,YQ(t)||"Unknown",s));return Kn({},n,r)}function DE(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Du,th=fs.current,Rn(fs,t),Rn(ai,ai.current),!0}function tD(t,e,n){var r=t.stateNode;if(!r)throw Error(me(169));n?(t=_B(t,e,th),r.__reactInternalMemoizedMergedChildContext=t,$n(ai),$n(fs),Rn(fs,t)):$n(ai),Rn(ai,n)}var xc=null,J_=!1,oS=!1;function CB(t){xc===null?xc=[t]:xc.push(t)}function hJ(t){J_=!0,CB(t)}function Hu(){if(!oS&&xc!==null){oS=!0;var t=0,e=ln;try{var n=xc;for(ln=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}xc=null,J_=!1}catch(s){throw xc!==null&&(xc=xc.slice(t+1)),K8(KR,Hu),s}finally{ln=e,oS=!1}}return null}var Gf=[],Vf=0,$E=null,ME=0,lo=[],uo=0,nh=null,Mc=1,Lc="";function cd(t,e){Gf[Vf++]=ME,Gf[Vf++]=$E,$E=t,ME=e}function SB(t,e,n){lo[uo++]=Mc,lo[uo++]=Lc,lo[uo++]=nh,nh=t;var r=Mc;t=Lc;var s=32-ra(r)-1;r&=~(1<<s),n+=1;var i=32-ra(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Mc=1<<32-ra(e)+s|n<<s|r,Lc=i+t}else Mc=1<<i|n<<s|r,Lc=t}function rP(t){t.return!==null&&(cd(t,1),SB(t,1,0))}function sP(t){for(;t===$E;)$E=Gf[--Vf],Gf[Vf]=null,ME=Gf[--Vf],Gf[Vf]=null;for(;t===nh;)nh=lo[--uo],lo[uo]=null,Lc=lo[--uo],lo[uo]=null,Mc=lo[--uo],lo[uo]=null}var Di=null,Pi=null,jn=!1,Go=null;function AB(t,e){var n=ho(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function nD(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Di=t,Pi=pu(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Di=t,Pi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=nh!==null?{id:Mc,overflow:Lc}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ho(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Di=t,Pi=null,!0):!1;default:return!1}}function fN(t){return(t.mode&1)!==0&&(t.flags&128)===0}function pN(t){if(jn){var e=Pi;if(e){var n=e;if(!nD(t,e)){if(fN(t))throw Error(me(418));e=pu(n.nextSibling);var r=Di;e&&nD(t,e)?AB(r,n):(t.flags=t.flags&-4097|2,jn=!1,Di=t)}}else{if(fN(t))throw Error(me(418));t.flags=t.flags&-4097|2,jn=!1,Di=t}}}function rD(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Di=t}function Nb(t){if(t!==Di)return!1;if(!jn)return rD(t),jn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!lN(t.type,t.memoizedProps)),e&&(e=Pi)){if(fN(t))throw IB(),Error(me(418));for(;e;)AB(t,e),e=pu(e.nextSibling)}if(rD(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(me(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pi=pu(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pi=null}}else Pi=Di?pu(t.stateNode.nextSibling):null;return!0}function IB(){for(var t=Pi;t;)t=pu(t.nextSibling)}function Lp(){Pi=Di=null,jn=!1}function iP(t){Go===null?Go=[t]:Go.push(t)}var fJ=ol.ReactCurrentBatchConfig;function sm(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(me(309));var r=n.stateNode}if(!r)throw Error(me(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(me(284));if(!n._owner)throw Error(me(290,t))}return t}function xb(t,e){throw t=Object.prototype.toString.call(e),Error(me(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sD(t){var e=t._init;return e(t._payload)}function NB(t){function e(y,b){if(t){var E=y.deletions;E===null?(y.deletions=[b],y.flags|=16):E.push(b)}}function n(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function s(y,b){return y=wu(y,b),y.index=0,y.sibling=null,y}function i(y,b,E){return y.index=E,t?(E=y.alternate,E!==null?(E=E.index,E<b?(y.flags|=2,b):E):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,E,_){return b===null||b.tag!==6?(b=fS(E,y.mode,_),b.return=y,b):(b=s(b,E),b.return=y,b)}function c(y,b,E,_){var C=E.type;return C===jf?u(y,b,E.props.children,_,E.key):b!==null&&(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Pl&&sD(C)===b.type)?(_=s(b,E.props),_.ref=sm(y,b,E),_.return=y,_):(_=$v(E.type,E.key,E.props,null,y.mode,_),_.ref=sm(y,b,E),_.return=y,_)}function l(y,b,E,_){return b===null||b.tag!==4||b.stateNode.containerInfo!==E.containerInfo||b.stateNode.implementation!==E.implementation?(b=pS(E,y.mode,_),b.return=y,b):(b=s(b,E.children||[]),b.return=y,b)}function u(y,b,E,_,C){return b===null||b.tag!==7?(b=Hd(E,y.mode,_,C),b.return=y,b):(b=s(b,E),b.return=y,b)}function d(y,b,E){if(typeof b=="string"&&b!==""||typeof b=="number")return b=fS(""+b,y.mode,E),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case yb:return E=$v(b.type,b.key,b.props,null,y.mode,E),E.ref=sm(y,null,b),E.return=y,E;case Bf:return b=pS(b,y.mode,E),b.return=y,b;case Pl:var _=b._init;return d(y,_(b._payload),E)}if(km(b)||Xg(b))return b=Hd(b,y.mode,E,null),b.return=y,b;xb(y,b)}return null}function h(y,b,E,_){var C=b!==null?b.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return C!==null?null:a(y,b,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case yb:return E.key===C?c(y,b,E,_):null;case Bf:return E.key===C?l(y,b,E,_):null;case Pl:return C=E._init,h(y,b,C(E._payload),_)}if(km(E)||Xg(E))return C!==null?null:u(y,b,E,_,null);xb(y,E)}return null}function f(y,b,E,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(E)||null,a(b,y,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case yb:return y=y.get(_.key===null?E:_.key)||null,c(b,y,_,C);case Bf:return y=y.get(_.key===null?E:_.key)||null,l(b,y,_,C);case Pl:var I=_._init;return f(y,b,E,I(_._payload),C)}if(km(_)||Xg(_))return y=y.get(E)||null,u(b,y,_,C,null);xb(b,_)}return null}function p(y,b,E,_){for(var C=null,I=null,A=b,x=b=0,S=null;A!==null&&x<E.length;x++){A.index>x?(S=A,A=null):S=A.sibling;var k=h(y,A,E[x],_);if(k===null){A===null&&(A=S);break}t&&A&&k.alternate===null&&e(y,A),b=i(k,b,x),I===null?C=k:I.sibling=k,I=k,A=S}if(x===E.length)return n(y,A),jn&&cd(y,x),C;if(A===null){for(;x<E.length;x++)A=d(y,E[x],_),A!==null&&(b=i(A,b,x),I===null?C=A:I.sibling=A,I=A);return jn&&cd(y,x),C}for(A=r(y,A);x<E.length;x++)S=f(A,y,x,E[x],_),S!==null&&(t&&S.alternate!==null&&A.delete(S.key===null?x:S.key),b=i(S,b,x),I===null?C=S:I.sibling=S,I=S);return t&&A.forEach(function(O){return e(y,O)}),jn&&cd(y,x),C}function g(y,b,E,_){var C=Xg(E);if(typeof C!="function")throw Error(me(150));if(E=C.call(E),E==null)throw Error(me(151));for(var I=C=null,A=b,x=b=0,S=null,k=E.next();A!==null&&!k.done;x++,k=E.next()){A.index>x?(S=A,A=null):S=A.sibling;var O=h(y,A,k.value,_);if(O===null){A===null&&(A=S);break}t&&A&&O.alternate===null&&e(y,A),b=i(O,b,x),I===null?C=O:I.sibling=O,I=O,A=S}if(k.done)return n(y,A),jn&&cd(y,x),C;if(A===null){for(;!k.done;x++,k=E.next())k=d(y,k.value,_),k!==null&&(b=i(k,b,x),I===null?C=k:I.sibling=k,I=k);return jn&&cd(y,x),C}for(A=r(y,A);!k.done;x++,k=E.next())k=f(A,y,x,k.value,_),k!==null&&(t&&k.alternate!==null&&A.delete(k.key===null?x:k.key),b=i(k,b,x),I===null?C=k:I.sibling=k,I=k);return t&&A.forEach(function(U){return e(y,U)}),jn&&cd(y,x),C}function w(y,b,E,_){if(typeof E=="object"&&E!==null&&E.type===jf&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case yb:e:{for(var C=E.key,I=b;I!==null;){if(I.key===C){if(C=E.type,C===jf){if(I.tag===7){n(y,I.sibling),b=s(I,E.props.children),b.return=y,y=b;break e}}else if(I.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Pl&&sD(C)===I.type){n(y,I.sibling),b=s(I,E.props),b.ref=sm(y,I,E),b.return=y,y=b;break e}n(y,I);break}else e(y,I);I=I.sibling}E.type===jf?(b=Hd(E.props.children,y.mode,_,E.key),b.return=y,y=b):(_=$v(E.type,E.key,E.props,null,y.mode,_),_.ref=sm(y,b,E),_.return=y,y=_)}return o(y);case Bf:e:{for(I=E.key;b!==null;){if(b.key===I)if(b.tag===4&&b.stateNode.containerInfo===E.containerInfo&&b.stateNode.implementation===E.implementation){n(y,b.sibling),b=s(b,E.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else e(y,b);b=b.sibling}b=pS(E,y.mode,_),b.return=y,y=b}return o(y);case Pl:return I=E._init,w(y,b,I(E._payload),_)}if(km(E))return p(y,b,E,_);if(Xg(E))return g(y,b,E,_);xb(y,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,b!==null&&b.tag===6?(n(y,b.sibling),b=s(b,E),b.return=y,y=b):(n(y,b),b=fS(E,y.mode,_),b.return=y,y=b),o(y)):n(y,b)}return w}var Up=NB(!0),xB=NB(!1),LE=zu(null),UE=null,Kf=null,oP=null;function aP(){oP=Kf=UE=null}function cP(t){var e=LE.current;$n(LE),t._currentValue=e}function gN(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function lp(t,e){UE=t,oP=Kf=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(si=!0),t.firstContext=null)}function go(t){var e=t._currentValue;if(oP!==t)if(t={context:t,memoizedValue:e,next:null},Kf===null){if(UE===null)throw Error(me(308));Kf=t,UE.dependencies={lanes:0,firstContext:t}}else Kf=Kf.next=t;return e}var Cd=null;function lP(t){Cd===null?Cd=[t]:Cd.push(t)}function TB(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,lP(e)):(n.next=s.next,s.next=n),e.interleaved=n,Jc(t,r)}function Jc(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ol=!1;function uP(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function RB(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fc(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gu(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Wt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Jc(t,n)}return s=r.interleaved,s===null?(e.next=e,lP(r)):(e.next=s.next,s.next=e),r.interleaved=e,Jc(t,n)}function Tv(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,YR(t,n)}}function iD(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function BE(t,e,n,r){var s=t.updateQueue;Ol=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Kn({},d,h);break e;case 2:Ol=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);sh|=o,t.lanes=o,t.memoizedState=d}}function oD(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(me(191,s));s.call(r)}}}var w0={},qa=zu(w0),Qy=zu(w0),Zy=zu(w0);function Sd(t){if(t===w0)throw Error(me(174));return t}function dP(t,e){switch(Rn(Zy,e),Rn(Qy,t),Rn(qa,w0),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:YI(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=YI(e,t)}$n(qa),Rn(qa,e)}function Bp(){$n(qa),$n(Qy),$n(Zy)}function PB(t){Sd(Zy.current);var e=Sd(qa.current),n=YI(e,t.type);e!==n&&(Rn(Qy,t),Rn(qa,n))}function hP(t){Qy.current===t&&($n(qa),$n(Qy))}var Hn=zu(0);function jE(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var aS=[];function fP(){for(var t=0;t<aS.length;t++)aS[t]._workInProgressVersionPrimary=null;aS.length=0}var Rv=ol.ReactCurrentDispatcher,cS=ol.ReactCurrentBatchConfig,rh=0,Vn=null,mr=null,Pr=null,FE=!1,oy=!1,Jy=0,pJ=0;function is(){throw Error(me(321))}function pP(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!aa(t[n],e[n]))return!1;return!0}function gP(t,e,n,r,s,i){if(rh=i,Vn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Rv.current=t===null||t.memoizedState===null?wJ:bJ,t=n(r,s),oy){i=0;do{if(oy=!1,Jy=0,25<=i)throw Error(me(301));i+=1,Pr=mr=null,e.updateQueue=null,Rv.current=vJ,t=n(r,s)}while(oy)}if(Rv.current=WE,e=mr!==null&&mr.next!==null,rh=0,Pr=mr=Vn=null,FE=!1,e)throw Error(me(300));return t}function mP(){var t=Jy!==0;return Jy=0,t}function Na(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pr===null?Vn.memoizedState=Pr=t:Pr=Pr.next=t,Pr}function mo(){if(mr===null){var t=Vn.alternate;t=t!==null?t.memoizedState:null}else t=mr.next;var e=Pr===null?Vn.memoizedState:Pr.next;if(e!==null)Pr=e,mr=t;else{if(t===null)throw Error(me(310));mr=t,t={memoizedState:mr.memoizedState,baseState:mr.baseState,baseQueue:mr.baseQueue,queue:mr.queue,next:null},Pr===null?Vn.memoizedState=Pr=t:Pr=Pr.next=t}return Pr}function Xy(t,e){return typeof e=="function"?e(t):e}function lS(t){var e=mo(),n=e.queue;if(n===null)throw Error(me(311));n.lastRenderedReducer=t;var r=mr,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((rh&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,Vn.lanes|=u,sh|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,aa(r,e.memoizedState)||(si=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Vn.lanes|=i,sh|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function uS(t){var e=mo(),n=e.queue;if(n===null)throw Error(me(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);aa(i,e.memoizedState)||(si=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function OB(){}function kB(t,e){var n=Vn,r=mo(),s=e(),i=!aa(r.memoizedState,s);if(i&&(r.memoizedState=s,si=!0),r=r.queue,yP(MB.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Pr!==null&&Pr.memoizedState.tag&1){if(n.flags|=2048,ew(9,$B.bind(null,n,r,s,e),void 0,null),Ur===null)throw Error(me(349));rh&30||DB(n,e,s)}return s}function DB(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Vn.updateQueue,e===null?(e={lastEffect:null,stores:null},Vn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $B(t,e,n,r){e.value=n,e.getSnapshot=r,LB(e)&&UB(t)}function MB(t,e,n){return n(function(){LB(e)&&UB(t)})}function LB(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!aa(t,n)}catch{return!0}}function UB(t){var e=Jc(t,1);e!==null&&sa(e,t,1,-1)}function aD(t){var e=Na();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xy,lastRenderedState:t},e.queue=t,t=t.dispatch=yJ.bind(null,Vn,t),[e.memoizedState,t]}function ew(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Vn.updateQueue,e===null?(e={lastEffect:null,stores:null},Vn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function BB(){return mo().memoizedState}function Pv(t,e,n,r){var s=Na();Vn.flags|=t,s.memoizedState=ew(1|e,n,void 0,r===void 0?null:r)}function X_(t,e,n,r){var s=mo();r=r===void 0?null:r;var i=void 0;if(mr!==null){var o=mr.memoizedState;if(i=o.destroy,r!==null&&pP(r,o.deps)){s.memoizedState=ew(e,n,i,r);return}}Vn.flags|=t,s.memoizedState=ew(1|e,n,i,r)}function cD(t,e){return Pv(8390656,8,t,e)}function yP(t,e){return X_(2048,8,t,e)}function jB(t,e){return X_(4,2,t,e)}function FB(t,e){return X_(4,4,t,e)}function WB(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zB(t,e,n){return n=n!=null?n.concat([t]):null,X_(4,4,WB.bind(null,e,t),n)}function wP(){}function HB(t,e){var n=mo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pP(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function qB(t,e){var n=mo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pP(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function GB(t,e,n){return rh&21?(aa(n,e)||(n=Z8(),Vn.lanes|=n,sh|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,si=!0),t.memoizedState=n)}function gJ(t,e){var n=ln;ln=n!==0&&4>n?n:4,t(!0);var r=cS.transition;cS.transition={};try{t(!1),e()}finally{ln=n,cS.transition=r}}function VB(){return mo().memoizedState}function mJ(t,e,n){var r=yu(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},KB(t))YB(e,n);else if(n=TB(t,e,n,r),n!==null){var s=Ts();sa(n,t,r,s),QB(n,e,r)}}function yJ(t,e,n){var r=yu(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(KB(t))YB(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,aa(a,o)){var c=e.interleaved;c===null?(s.next=s,lP(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=TB(t,e,s,r),n!==null&&(s=Ts(),sa(n,t,r,s),QB(n,e,r))}}function KB(t){var e=t.alternate;return t===Vn||e!==null&&e===Vn}function YB(t,e){oy=FE=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function QB(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,YR(t,n)}}var WE={readContext:go,useCallback:is,useContext:is,useEffect:is,useImperativeHandle:is,useInsertionEffect:is,useLayoutEffect:is,useMemo:is,useReducer:is,useRef:is,useState:is,useDebugValue:is,useDeferredValue:is,useTransition:is,useMutableSource:is,useSyncExternalStore:is,useId:is,unstable_isNewReconciler:!1},wJ={readContext:go,useCallback:function(t,e){return Na().memoizedState=[t,e===void 0?null:e],t},useContext:go,useEffect:cD,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Pv(4194308,4,WB.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pv(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pv(4,2,t,e)},useMemo:function(t,e){var n=Na();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Na();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=mJ.bind(null,Vn,t),[r.memoizedState,t]},useRef:function(t){var e=Na();return t={current:t},e.memoizedState=t},useState:aD,useDebugValue:wP,useDeferredValue:function(t){return Na().memoizedState=t},useTransition:function(){var t=aD(!1),e=t[0];return t=gJ.bind(null,t[1]),Na().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Vn,s=Na();if(jn){if(n===void 0)throw Error(me(407));n=n()}else{if(n=e(),Ur===null)throw Error(me(349));rh&30||DB(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,cD(MB.bind(null,r,i,t),[t]),r.flags|=2048,ew(9,$B.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Na(),e=Ur.identifierPrefix;if(jn){var n=Lc,r=Mc;n=(r&~(1<<32-ra(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Jy++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=pJ++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},bJ={readContext:go,useCallback:HB,useContext:go,useEffect:yP,useImperativeHandle:zB,useInsertionEffect:jB,useLayoutEffect:FB,useMemo:qB,useReducer:lS,useRef:BB,useState:function(){return lS(Xy)},useDebugValue:wP,useDeferredValue:function(t){var e=mo();return GB(e,mr.memoizedState,t)},useTransition:function(){var t=lS(Xy)[0],e=mo().memoizedState;return[t,e]},useMutableSource:OB,useSyncExternalStore:kB,useId:VB,unstable_isNewReconciler:!1},vJ={readContext:go,useCallback:HB,useContext:go,useEffect:yP,useImperativeHandle:zB,useInsertionEffect:jB,useLayoutEffect:FB,useMemo:qB,useReducer:uS,useRef:BB,useState:function(){return uS(Xy)},useDebugValue:wP,useDeferredValue:function(t){var e=mo();return mr===null?e.memoizedState=t:GB(e,mr.memoizedState,t)},useTransition:function(){var t=uS(Xy)[0],e=mo().memoizedState;return[t,e]},useMutableSource:OB,useSyncExternalStore:kB,useId:VB,unstable_isNewReconciler:!1};function Fo(t,e){if(t&&t.defaultProps){e=Kn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function mN(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Kn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var eC={isMounted:function(t){return(t=t._reactInternals)?Ph(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ts(),s=yu(t),i=Fc(r,s);i.payload=e,n!=null&&(i.callback=n),e=gu(t,i,s),e!==null&&(sa(e,t,s,r),Tv(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ts(),s=yu(t),i=Fc(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=gu(t,i,s),e!==null&&(sa(e,t,s,r),Tv(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ts(),r=yu(t),s=Fc(n,r);s.tag=2,e!=null&&(s.callback=e),e=gu(t,s,r),e!==null&&(sa(e,t,r,n),Tv(e,t,r))}};function lD(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Gy(n,r)||!Gy(s,i):!0}function ZB(t,e,n){var r=!1,s=Du,i=e.contextType;return typeof i=="object"&&i!==null?i=go(i):(s=ci(e)?th:fs.current,r=e.contextTypes,i=(r=r!=null)?Mp(t,s):Du),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=eC,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function uD(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&eC.enqueueReplaceState(e,e.state,null)}function yN(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},uP(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=go(i):(i=ci(e)?th:fs.current,s.context=Mp(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(mN(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&eC.enqueueReplaceState(s,s.state,null),BE(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function jp(t,e){try{var n="",r=e;do n+=KQ(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function dS(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function wN(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var EJ=typeof WeakMap=="function"?WeakMap:Map;function JB(t,e,n){n=Fc(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){HE||(HE=!0,xN=r),wN(t,e)},n}function XB(t,e,n){n=Fc(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){wN(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){wN(t,e),typeof r!="function"&&(mu===null?mu=new Set([this]):mu.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function dD(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new EJ;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=$J.bind(null,t,e,n),e.then(t,t))}function hD(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function fD(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Fc(-1,1),e.tag=2,gu(n,e,1))),n.lanes|=1),t)}var _J=ol.ReactCurrentOwner,si=!1;function Cs(t,e,n,r){e.child=t===null?xB(e,null,n,r):Up(e,t.child,n,r)}function pD(t,e,n,r,s){n=n.render;var i=e.ref;return lp(e,s),r=gP(t,e,n,r,i,s),n=mP(),t!==null&&!si?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xc(t,e,s)):(jn&&n&&rP(e),e.flags|=1,Cs(t,e,r,s),e.child)}function gD(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!IP(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,ej(t,e,i,r,s)):(t=$v(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Gy,n(o,r)&&t.ref===e.ref)return Xc(t,e,s)}return e.flags|=1,t=wu(i,r),t.ref=e.ref,t.return=e,e.child=t}function ej(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Gy(i,r)&&t.ref===e.ref)if(si=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(si=!0);else return e.lanes=t.lanes,Xc(t,e,s)}return bN(t,e,n,r,s)}function tj(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rn(Qf,Ii),Ii|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Rn(Qf,Ii),Ii|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Rn(Qf,Ii),Ii|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Rn(Qf,Ii),Ii|=r;return Cs(t,e,s,n),e.child}function nj(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function bN(t,e,n,r,s){var i=ci(n)?th:fs.current;return i=Mp(e,i),lp(e,s),n=gP(t,e,n,r,i,s),r=mP(),t!==null&&!si?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xc(t,e,s)):(jn&&r&&rP(e),e.flags|=1,Cs(t,e,n,s),e.child)}function mD(t,e,n,r,s){if(ci(n)){var i=!0;DE(e)}else i=!1;if(lp(e,s),e.stateNode===null)Ov(t,e),ZB(e,n,r),yN(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=go(l):(l=ci(n)?th:fs.current,l=Mp(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&uD(e,o,r,l),Ol=!1;var h=e.memoizedState;o.state=h,BE(e,r,o,s),c=e.memoizedState,a!==r||h!==c||ai.current||Ol?(typeof u=="function"&&(mN(e,n,u,r),c=e.memoizedState),(a=Ol||lD(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,RB(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:Fo(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=go(c):(c=ci(n)?th:fs.current,c=Mp(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&uD(e,o,r,c),Ol=!1,h=e.memoizedState,o.state=h,BE(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||ai.current||Ol?(typeof f=="function"&&(mN(e,n,f,r),p=e.memoizedState),(l=Ol||lD(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return vN(t,e,n,r,i,s)}function vN(t,e,n,r,s,i){nj(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&tD(e,n,!1),Xc(t,e,i);r=e.stateNode,_J.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Up(e,t.child,null,i),e.child=Up(e,null,a,i)):Cs(t,e,a,i),e.memoizedState=r.state,s&&tD(e,n,!0),e.child}function rj(t){var e=t.stateNode;e.pendingContext?eD(t,e.pendingContext,e.pendingContext!==e.context):e.context&&eD(t,e.context,!1),dP(t,e.containerInfo)}function yD(t,e,n,r,s){return Lp(),iP(s),e.flags|=256,Cs(t,e,n,r),e.child}var EN={dehydrated:null,treeContext:null,retryLane:0};function _N(t){return{baseLanes:t,cachePool:null,transitions:null}}function sj(t,e,n){var r=e.pendingProps,s=Hn.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Rn(Hn,s&1),t===null)return pN(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=rC(o,r,0,null),t=Hd(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=_N(n),e.memoizedState=EN,t):bP(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return CJ(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=wu(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=wu(a,i):(i=Hd(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?_N(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=EN,r}return i=t.child,t=i.sibling,r=wu(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function bP(t,e){return e=rC({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Tb(t,e,n,r){return r!==null&&iP(r),Up(e,t.child,null,n),t=bP(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function CJ(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=dS(Error(me(422))),Tb(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=rC({mode:"visible",children:r.children},s,0,null),i=Hd(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Up(e,t.child,null,o),e.child.memoizedState=_N(o),e.memoizedState=EN,i);if(!(e.mode&1))return Tb(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(me(419)),r=dS(i,r,void 0),Tb(t,e,o,r)}if(a=(o&t.childLanes)!==0,si||a){if(r=Ur,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Jc(t,s),sa(r,t,s,-1))}return AP(),r=dS(Error(me(421))),Tb(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=MJ.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Pi=pu(s.nextSibling),Di=e,jn=!0,Go=null,t!==null&&(lo[uo++]=Mc,lo[uo++]=Lc,lo[uo++]=nh,Mc=t.id,Lc=t.overflow,nh=e),e=bP(e,r.children),e.flags|=4096,e)}function wD(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),gN(t.return,e,n)}function hS(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ij(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Cs(t,e,r.children,n),r=Hn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wD(t,n,e);else if(t.tag===19)wD(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Rn(Hn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&jE(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),hS(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&jE(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}hS(e,!0,n,null,i);break;case"together":hS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ov(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xc(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),sh|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(me(153));if(e.child!==null){for(t=e.child,n=wu(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=wu(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function SJ(t,e,n){switch(e.tag){case 3:rj(e),Lp();break;case 5:PB(e);break;case 1:ci(e.type)&&DE(e);break;case 4:dP(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Rn(LE,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Rn(Hn,Hn.current&1),e.flags|=128,null):n&e.child.childLanes?sj(t,e,n):(Rn(Hn,Hn.current&1),t=Xc(t,e,n),t!==null?t.sibling:null);Rn(Hn,Hn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ij(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Rn(Hn,Hn.current),r)break;return null;case 22:case 23:return e.lanes=0,tj(t,e,n)}return Xc(t,e,n)}var oj,CN,aj,cj;oj=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};CN=function(){};aj=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Sd(qa.current);var i=null;switch(n){case"input":s=qI(t,s),r=qI(t,r),i=[];break;case"select":s=Kn({},s,{value:void 0}),r=Kn({},r,{value:void 0}),i=[];break;case"textarea":s=KI(t,s),r=KI(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=OE)}QI(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(By.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(By.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&On("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};cj=function(t,e,n,r){n!==r&&(e.flags|=4)};function im(t,e){if(!jn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function os(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function AJ(t,e,n){var r=e.pendingProps;switch(sP(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return os(e),null;case 1:return ci(e.type)&&kE(),os(e),null;case 3:return r=e.stateNode,Bp(),$n(ai),$n(fs),fP(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Nb(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Go!==null&&(PN(Go),Go=null))),CN(t,e),os(e),null;case 5:hP(e);var s=Sd(Zy.current);if(n=e.type,t!==null&&e.stateNode!=null)aj(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(me(166));return os(e),null}if(t=Sd(qa.current),Nb(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Ba]=e,r[Yy]=i,t=(e.mode&1)!==0,n){case"dialog":On("cancel",r),On("close",r);break;case"iframe":case"object":case"embed":On("load",r);break;case"video":case"audio":for(s=0;s<$m.length;s++)On($m[s],r);break;case"source":On("error",r);break;case"img":case"image":case"link":On("error",r),On("load",r);break;case"details":On("toggle",r);break;case"input":N2(r,i),On("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},On("invalid",r);break;case"textarea":T2(r,i),On("invalid",r)}QI(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ib(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ib(r.textContent,a,t),s=["children",""+a]):By.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&On("scroll",r)}switch(n){case"input":wb(r),x2(r,i,!0);break;case"textarea":wb(r),R2(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=OE)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=M8(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ba]=e,t[Yy]=r,oj(t,e,!1,!1),e.stateNode=t;e:{switch(o=ZI(n,r),n){case"dialog":On("cancel",t),On("close",t),s=r;break;case"iframe":case"object":case"embed":On("load",t),s=r;break;case"video":case"audio":for(s=0;s<$m.length;s++)On($m[s],t);s=r;break;case"source":On("error",t),s=r;break;case"img":case"image":case"link":On("error",t),On("load",t),s=r;break;case"details":On("toggle",t),s=r;break;case"input":N2(t,r),s=qI(t,r),On("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Kn({},r,{value:void 0}),On("invalid",t);break;case"textarea":T2(t,r),s=KI(t,r),On("invalid",t);break;default:s=r}QI(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?B8(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&L8(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&jy(t,c):typeof c=="number"&&jy(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(By.hasOwnProperty(i)?c!=null&&i==="onScroll"&&On("scroll",t):c!=null&&zR(t,i,c,o))}switch(n){case"input":wb(t),x2(t,r,!1);break;case"textarea":wb(t),R2(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ku(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ip(t,!!r.multiple,i,!1):r.defaultValue!=null&&ip(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=OE)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return os(e),null;case 6:if(t&&e.stateNode!=null)cj(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(me(166));if(n=Sd(Zy.current),Sd(qa.current),Nb(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ba]=e,(i=r.nodeValue!==n)&&(t=Di,t!==null))switch(t.tag){case 3:Ib(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ib(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ba]=e,e.stateNode=r}return os(e),null;case 13:if($n(Hn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(jn&&Pi!==null&&e.mode&1&&!(e.flags&128))IB(),Lp(),e.flags|=98560,i=!1;else if(i=Nb(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(me(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(me(317));i[Ba]=e}else Lp(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;os(e),i=!1}else Go!==null&&(PN(Go),Go=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Hn.current&1?Er===0&&(Er=3):AP())),e.updateQueue!==null&&(e.flags|=4),os(e),null);case 4:return Bp(),CN(t,e),t===null&&Vy(e.stateNode.containerInfo),os(e),null;case 10:return cP(e.type._context),os(e),null;case 17:return ci(e.type)&&kE(),os(e),null;case 19:if($n(Hn),i=e.memoizedState,i===null)return os(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)im(i,!1);else{if(Er!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=jE(t),o!==null){for(e.flags|=128,im(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Rn(Hn,Hn.current&1|2),e.child}t=t.sibling}i.tail!==null&&rr()>Fp&&(e.flags|=128,r=!0,im(i,!1),e.lanes=4194304)}else{if(!r)if(t=jE(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),im(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!jn)return os(e),null}else 2*rr()-i.renderingStartTime>Fp&&n!==1073741824&&(e.flags|=128,r=!0,im(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=rr(),e.sibling=null,n=Hn.current,Rn(Hn,r?n&1|2:n&1),e):(os(e),null);case 22:case 23:return SP(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ii&1073741824&&(os(e),e.subtreeFlags&6&&(e.flags|=8192)):os(e),null;case 24:return null;case 25:return null}throw Error(me(156,e.tag))}function IJ(t,e){switch(sP(e),e.tag){case 1:return ci(e.type)&&kE(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Bp(),$n(ai),$n(fs),fP(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hP(e),null;case 13:if($n(Hn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(me(340));Lp()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $n(Hn),null;case 4:return Bp(),null;case 10:return cP(e.type._context),null;case 22:case 23:return SP(),null;case 24:return null;default:return null}}var Rb=!1,hs=!1,NJ=typeof WeakSet=="function"?WeakSet:Set,je=null;function Yf(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Jn(t,e,r)}else n.current=null}function SN(t,e,n){try{n()}catch(r){Jn(t,e,r)}}var bD=!1;function xJ(t,e){if(aN=TE,t=fB(),nP(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(cN={focusedElem:t,selectionRange:n},TE=!1,je=e;je!==null;)if(e=je,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,je=t;else for(;je!==null;){e=je;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,w=p.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:Fo(e.type,g),w);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(me(163))}}catch(_){Jn(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,je=t;break}je=e.return}return p=bD,bD=!1,p}function ay(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&SN(e,n,i)}s=s.next}while(s!==r)}}function tC(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function AN(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function lj(t){var e=t.alternate;e!==null&&(t.alternate=null,lj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ba],delete e[Yy],delete e[dN],delete e[uJ],delete e[dJ])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function uj(t){return t.tag===5||t.tag===3||t.tag===4}function vD(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||uj(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function IN(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=OE));else if(r!==4&&(t=t.child,t!==null))for(IN(t,e,n),t=t.sibling;t!==null;)IN(t,e,n),t=t.sibling}function NN(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(NN(t,e,n),t=t.sibling;t!==null;)NN(t,e,n),t=t.sibling}var Vr=null,qo=!1;function hl(t,e,n){for(n=n.child;n!==null;)dj(t,e,n),n=n.sibling}function dj(t,e,n){if(Ha&&typeof Ha.onCommitFiberUnmount=="function")try{Ha.onCommitFiberUnmount(V_,n)}catch{}switch(n.tag){case 5:hs||Yf(n,e);case 6:var r=Vr,s=qo;Vr=null,hl(t,e,n),Vr=r,qo=s,Vr!==null&&(qo?(t=Vr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Vr.removeChild(n.stateNode));break;case 18:Vr!==null&&(qo?(t=Vr,n=n.stateNode,t.nodeType===8?iS(t.parentNode,n):t.nodeType===1&&iS(t,n),Hy(t)):iS(Vr,n.stateNode));break;case 4:r=Vr,s=qo,Vr=n.stateNode.containerInfo,qo=!0,hl(t,e,n),Vr=r,qo=s;break;case 0:case 11:case 14:case 15:if(!hs&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&SN(n,e,o),s=s.next}while(s!==r)}hl(t,e,n);break;case 1:if(!hs&&(Yf(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Jn(n,e,a)}hl(t,e,n);break;case 21:hl(t,e,n);break;case 22:n.mode&1?(hs=(r=hs)||n.memoizedState!==null,hl(t,e,n),hs=r):hl(t,e,n);break;default:hl(t,e,n)}}function ED(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new NJ),e.forEach(function(r){var s=LJ.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ko(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Vr=a.stateNode,qo=!1;break e;case 3:Vr=a.stateNode.containerInfo,qo=!0;break e;case 4:Vr=a.stateNode.containerInfo,qo=!0;break e}a=a.return}if(Vr===null)throw Error(me(160));dj(i,o,s),Vr=null,qo=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){Jn(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hj(e,t),e=e.sibling}function hj(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ko(e,t),ma(t),r&4){try{ay(3,t,t.return),tC(3,t)}catch(g){Jn(t,t.return,g)}try{ay(5,t,t.return)}catch(g){Jn(t,t.return,g)}}break;case 1:ko(e,t),ma(t),r&512&&n!==null&&Yf(n,n.return);break;case 5:if(ko(e,t),ma(t),r&512&&n!==null&&Yf(n,n.return),t.flags&32){var s=t.stateNode;try{jy(s,"")}catch(g){Jn(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&D8(s,i),ZI(a,o);var l=ZI(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?B8(s,d):u==="dangerouslySetInnerHTML"?L8(s,d):u==="children"?jy(s,d):zR(s,u,d,l)}switch(a){case"input":GI(s,i);break;case"textarea":$8(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?ip(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?ip(s,!!i.multiple,i.defaultValue,!0):ip(s,!!i.multiple,i.multiple?[]:"",!1))}s[Yy]=i}catch(g){Jn(t,t.return,g)}}break;case 6:if(ko(e,t),ma(t),r&4){if(t.stateNode===null)throw Error(me(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Jn(t,t.return,g)}}break;case 3:if(ko(e,t),ma(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Hy(e.containerInfo)}catch(g){Jn(t,t.return,g)}break;case 4:ko(e,t),ma(t);break;case 13:ko(e,t),ma(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(_P=rr())),r&4&&ED(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(hs=(l=hs)||u,ko(e,t),hs=l):ko(e,t),ma(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(je=t,u=t.child;u!==null;){for(d=je=u;je!==null;){switch(h=je,f=h.child,h.tag){case 0:case 11:case 14:case 15:ay(4,h,h.return);break;case 1:Yf(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Jn(r,n,g)}}break;case 5:Yf(h,h.return);break;case 22:if(h.memoizedState!==null){CD(d);continue}}f!==null?(f.return=h,je=f):CD(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=U8("display",o))}catch(g){Jn(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){Jn(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ko(e,t),ma(t),r&4&&ED(t);break;case 21:break;default:ko(e,t),ma(t)}}function ma(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(uj(n)){var r=n;break e}n=n.return}throw Error(me(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(jy(s,""),r.flags&=-33);var i=vD(t);NN(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=vD(t);IN(t,a,o);break;default:throw Error(me(161))}}catch(c){Jn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function TJ(t,e,n){je=t,fj(t)}function fj(t,e,n){for(var r=(t.mode&1)!==0;je!==null;){var s=je,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Rb;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||hs;a=Rb;var l=hs;if(Rb=o,(hs=c)&&!l)for(je=s;je!==null;)o=je,c=o.child,o.tag===22&&o.memoizedState!==null?SD(s):c!==null?(c.return=o,je=c):SD(s);for(;i!==null;)je=i,fj(i),i=i.sibling;je=s,Rb=a,hs=l}_D(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,je=i):_D(t)}}function _D(t){for(;je!==null;){var e=je;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:hs||tC(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!hs)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Fo(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&oD(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}oD(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Hy(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(me(163))}hs||e.flags&512&&AN(e)}catch(h){Jn(e,e.return,h)}}if(e===t){je=null;break}if(n=e.sibling,n!==null){n.return=e.return,je=n;break}je=e.return}}function CD(t){for(;je!==null;){var e=je;if(e===t){je=null;break}var n=e.sibling;if(n!==null){n.return=e.return,je=n;break}je=e.return}}function SD(t){for(;je!==null;){var e=je;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{tC(4,e)}catch(c){Jn(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Jn(e,s,c)}}var i=e.return;try{AN(e)}catch(c){Jn(e,i,c)}break;case 5:var o=e.return;try{AN(e)}catch(c){Jn(e,o,c)}}}catch(c){Jn(e,e.return,c)}if(e===t){je=null;break}var a=e.sibling;if(a!==null){a.return=e.return,je=a;break}je=e.return}}var RJ=Math.ceil,zE=ol.ReactCurrentDispatcher,vP=ol.ReactCurrentOwner,po=ol.ReactCurrentBatchConfig,Wt=0,Ur=null,lr=null,Qr=0,Ii=0,Qf=zu(0),Er=0,tw=null,sh=0,nC=0,EP=0,cy=null,ti=null,_P=0,Fp=1/0,Nc=null,HE=!1,xN=null,mu=null,Pb=!1,Xl=null,qE=0,ly=0,TN=null,kv=-1,Dv=0;function Ts(){return Wt&6?rr():kv!==-1?kv:kv=rr()}function yu(t){return t.mode&1?Wt&2&&Qr!==0?Qr&-Qr:fJ.transition!==null?(Dv===0&&(Dv=Z8()),Dv):(t=ln,t!==0||(t=window.event,t=t===void 0?16:sB(t.type)),t):1}function sa(t,e,n,r){if(50<ly)throw ly=0,TN=null,Error(me(185));g0(t,n,r),(!(Wt&2)||t!==Ur)&&(t===Ur&&(!(Wt&2)&&(nC|=n),Er===4&&Ul(t,Qr)),li(t,r),n===1&&Wt===0&&!(e.mode&1)&&(Fp=rr()+500,J_&&Hu()))}function li(t,e){var n=t.callbackNode;fZ(t,e);var r=xE(t,t===Ur?Qr:0);if(r===0)n!==null&&k2(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&k2(n),e===1)t.tag===0?hJ(AD.bind(null,t)):CB(AD.bind(null,t)),cJ(function(){!(Wt&6)&&Hu()}),n=null;else{switch(J8(r)){case 1:n=KR;break;case 4:n=Y8;break;case 16:n=NE;break;case 536870912:n=Q8;break;default:n=NE}n=Ej(n,pj.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function pj(t,e){if(kv=-1,Dv=0,Wt&6)throw Error(me(327));var n=t.callbackNode;if(up()&&t.callbackNode!==n)return null;var r=xE(t,t===Ur?Qr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=GE(t,r);else{e=r;var s=Wt;Wt|=2;var i=mj();(Ur!==t||Qr!==e)&&(Nc=null,Fp=rr()+500,zd(t,e));do try{kJ();break}catch(a){gj(t,a)}while(!0);aP(),zE.current=i,Wt=s,lr!==null?e=0:(Ur=null,Qr=0,e=Er)}if(e!==0){if(e===2&&(s=nN(t),s!==0&&(r=s,e=RN(t,s))),e===1)throw n=tw,zd(t,0),Ul(t,r),li(t,rr()),n;if(e===6)Ul(t,r);else{if(s=t.current.alternate,!(r&30)&&!PJ(s)&&(e=GE(t,r),e===2&&(i=nN(t),i!==0&&(r=i,e=RN(t,i))),e===1))throw n=tw,zd(t,0),Ul(t,r),li(t,rr()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(me(345));case 2:ld(t,ti,Nc);break;case 3:if(Ul(t,r),(r&130023424)===r&&(e=_P+500-rr(),10<e)){if(xE(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ts(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=uN(ld.bind(null,t,ti,Nc),e);break}ld(t,ti,Nc);break;case 4:if(Ul(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-ra(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=rr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*RJ(r/1960))-r,10<r){t.timeoutHandle=uN(ld.bind(null,t,ti,Nc),r);break}ld(t,ti,Nc);break;case 5:ld(t,ti,Nc);break;default:throw Error(me(329))}}}return li(t,rr()),t.callbackNode===n?pj.bind(null,t):null}function RN(t,e){var n=cy;return t.current.memoizedState.isDehydrated&&(zd(t,e).flags|=256),t=GE(t,e),t!==2&&(e=ti,ti=n,e!==null&&PN(e)),t}function PN(t){ti===null?ti=t:ti.push.apply(ti,t)}function PJ(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!aa(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ul(t,e){for(e&=~EP,e&=~nC,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ra(e),r=1<<n;t[n]=-1,e&=~r}}function AD(t){if(Wt&6)throw Error(me(327));up();var e=xE(t,0);if(!(e&1))return li(t,rr()),null;var n=GE(t,e);if(t.tag!==0&&n===2){var r=nN(t);r!==0&&(e=r,n=RN(t,r))}if(n===1)throw n=tw,zd(t,0),Ul(t,e),li(t,rr()),n;if(n===6)throw Error(me(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ld(t,ti,Nc),li(t,rr()),null}function CP(t,e){var n=Wt;Wt|=1;try{return t(e)}finally{Wt=n,Wt===0&&(Fp=rr()+500,J_&&Hu())}}function ih(t){Xl!==null&&Xl.tag===0&&!(Wt&6)&&up();var e=Wt;Wt|=1;var n=po.transition,r=ln;try{if(po.transition=null,ln=1,t)return t()}finally{ln=r,po.transition=n,Wt=e,!(Wt&6)&&Hu()}}function SP(){Ii=Qf.current,$n(Qf)}function zd(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,aJ(n)),lr!==null)for(n=lr.return;n!==null;){var r=n;switch(sP(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kE();break;case 3:Bp(),$n(ai),$n(fs),fP();break;case 5:hP(r);break;case 4:Bp();break;case 13:$n(Hn);break;case 19:$n(Hn);break;case 10:cP(r.type._context);break;case 22:case 23:SP()}n=n.return}if(Ur=t,lr=t=wu(t.current,null),Qr=Ii=e,Er=0,tw=null,EP=nC=sh=0,ti=cy=null,Cd!==null){for(e=0;e<Cd.length;e++)if(n=Cd[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Cd=null}return t}function gj(t,e){do{var n=lr;try{if(aP(),Rv.current=WE,FE){for(var r=Vn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}FE=!1}if(rh=0,Pr=mr=Vn=null,oy=!1,Jy=0,vP.current=null,n===null||n.return===null){Er=1,tw=e,lr=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Qr,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=hD(o);if(f!==null){f.flags&=-257,fD(f,o,a,i,e),f.mode&1&&dD(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){dD(i,l,e),AP();break e}c=Error(me(426))}}else if(jn&&a.mode&1){var w=hD(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),fD(w,o,a,i,e),iP(jp(c,a));break e}}i=c=jp(c,a),Er!==4&&(Er=2),cy===null?cy=[i]:cy.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=JB(i,c,e);iD(i,y);break e;case 1:a=c;var b=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(mu===null||!mu.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=XB(i,a,e);iD(i,_);break e}}i=i.return}while(i!==null)}wj(n)}catch(C){e=C,lr===n&&n!==null&&(lr=n=n.return);continue}break}while(!0)}function mj(){var t=zE.current;return zE.current=WE,t===null?WE:t}function AP(){(Er===0||Er===3||Er===2)&&(Er=4),Ur===null||!(sh&268435455)&&!(nC&268435455)||Ul(Ur,Qr)}function GE(t,e){var n=Wt;Wt|=2;var r=mj();(Ur!==t||Qr!==e)&&(Nc=null,zd(t,e));do try{OJ();break}catch(s){gj(t,s)}while(!0);if(aP(),Wt=n,zE.current=r,lr!==null)throw Error(me(261));return Ur=null,Qr=0,Er}function OJ(){for(;lr!==null;)yj(lr)}function kJ(){for(;lr!==null&&!sZ();)yj(lr)}function yj(t){var e=vj(t.alternate,t,Ii);t.memoizedProps=t.pendingProps,e===null?wj(t):lr=e,vP.current=null}function wj(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=IJ(n,e),n!==null){n.flags&=32767,lr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Er=6,lr=null;return}}else if(n=AJ(n,e,Ii),n!==null){lr=n;return}if(e=e.sibling,e!==null){lr=e;return}lr=e=t}while(e!==null);Er===0&&(Er=5)}function ld(t,e,n){var r=ln,s=po.transition;try{po.transition=null,ln=1,DJ(t,e,n,r)}finally{po.transition=s,ln=r}return null}function DJ(t,e,n,r){do up();while(Xl!==null);if(Wt&6)throw Error(me(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(me(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(pZ(t,i),t===Ur&&(lr=Ur=null,Qr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pb||(Pb=!0,Ej(NE,function(){return up(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=po.transition,po.transition=null;var o=ln;ln=1;var a=Wt;Wt|=4,vP.current=null,xJ(t,n),hj(n,t),eJ(cN),TE=!!aN,cN=aN=null,t.current=n,TJ(n),iZ(),Wt=a,ln=o,po.transition=i}else t.current=n;if(Pb&&(Pb=!1,Xl=t,qE=s),i=t.pendingLanes,i===0&&(mu=null),cZ(n.stateNode),li(t,rr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(HE)throw HE=!1,t=xN,xN=null,t;return qE&1&&t.tag!==0&&up(),i=t.pendingLanes,i&1?t===TN?ly++:(ly=0,TN=t):ly=0,Hu(),null}function up(){if(Xl!==null){var t=J8(qE),e=po.transition,n=ln;try{if(po.transition=null,ln=16>t?16:t,Xl===null)var r=!1;else{if(t=Xl,Xl=null,qE=0,Wt&6)throw Error(me(331));var s=Wt;for(Wt|=4,je=t.current;je!==null;){var i=je,o=i.child;if(je.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(je=l;je!==null;){var u=je;switch(u.tag){case 0:case 11:case 15:ay(8,u,i)}var d=u.child;if(d!==null)d.return=u,je=d;else for(;je!==null;){u=je;var h=u.sibling,f=u.return;if(lj(u),u===l){je=null;break}if(h!==null){h.return=f,je=h;break}je=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}je=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,je=o;else e:for(;je!==null;){if(i=je,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ay(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,je=y;break e}je=i.return}}var b=t.current;for(je=b;je!==null;){o=je;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,je=E;else e:for(o=b;je!==null;){if(a=je,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:tC(9,a)}}catch(C){Jn(a,a.return,C)}if(a===o){je=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,je=_;break e}je=a.return}}if(Wt=s,Hu(),Ha&&typeof Ha.onPostCommitFiberRoot=="function")try{Ha.onPostCommitFiberRoot(V_,t)}catch{}r=!0}return r}finally{ln=n,po.transition=e}}return!1}function ID(t,e,n){e=jp(n,e),e=JB(t,e,1),t=gu(t,e,1),e=Ts(),t!==null&&(g0(t,1,e),li(t,e))}function Jn(t,e,n){if(t.tag===3)ID(t,t,n);else for(;e!==null;){if(e.tag===3){ID(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mu===null||!mu.has(r))){t=jp(n,t),t=XB(e,t,1),e=gu(e,t,1),t=Ts(),e!==null&&(g0(e,1,t),li(e,t));break}}e=e.return}}function $J(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ts(),t.pingedLanes|=t.suspendedLanes&n,Ur===t&&(Qr&n)===n&&(Er===4||Er===3&&(Qr&130023424)===Qr&&500>rr()-_P?zd(t,0):EP|=n),li(t,e)}function bj(t,e){e===0&&(t.mode&1?(e=Eb,Eb<<=1,!(Eb&130023424)&&(Eb=4194304)):e=1);var n=Ts();t=Jc(t,e),t!==null&&(g0(t,e,n),li(t,n))}function MJ(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),bj(t,n)}function LJ(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(me(314))}r!==null&&r.delete(e),bj(t,n)}var vj;vj=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ai.current)si=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return si=!1,SJ(t,e,n);si=!!(t.flags&131072)}else si=!1,jn&&e.flags&1048576&&SB(e,ME,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ov(t,e),t=e.pendingProps;var s=Mp(e,fs.current);lp(e,n),s=gP(null,e,r,t,s,n);var i=mP();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ci(r)?(i=!0,DE(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,uP(e),s.updater=eC,e.stateNode=s,s._reactInternals=e,yN(e,r,t,n),e=vN(null,e,r,!0,i,n)):(e.tag=0,jn&&i&&rP(e),Cs(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ov(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=BJ(r),t=Fo(r,t),s){case 0:e=bN(null,e,r,t,n);break e;case 1:e=mD(null,e,r,t,n);break e;case 11:e=pD(null,e,r,t,n);break e;case 14:e=gD(null,e,r,Fo(r.type,t),n);break e}throw Error(me(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Fo(r,s),bN(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Fo(r,s),mD(t,e,r,s,n);case 3:e:{if(rj(e),t===null)throw Error(me(387));r=e.pendingProps,i=e.memoizedState,s=i.element,RB(t,e),BE(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=jp(Error(me(423)),e),e=yD(t,e,r,n,s);break e}else if(r!==s){s=jp(Error(me(424)),e),e=yD(t,e,r,n,s);break e}else for(Pi=pu(e.stateNode.containerInfo.firstChild),Di=e,jn=!0,Go=null,n=xB(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Lp(),r===s){e=Xc(t,e,n);break e}Cs(t,e,r,n)}e=e.child}return e;case 5:return PB(e),t===null&&pN(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,lN(r,s)?o=null:i!==null&&lN(r,i)&&(e.flags|=32),nj(t,e),Cs(t,e,o,n),e.child;case 6:return t===null&&pN(e),null;case 13:return sj(t,e,n);case 4:return dP(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Up(e,null,r,n):Cs(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Fo(r,s),pD(t,e,r,s,n);case 7:return Cs(t,e,e.pendingProps,n),e.child;case 8:return Cs(t,e,e.pendingProps.children,n),e.child;case 12:return Cs(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Rn(LE,r._currentValue),r._currentValue=o,i!==null)if(aa(i.value,o)){if(i.children===s.children&&!ai.current){e=Xc(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Fc(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),gN(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(me(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),gN(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Cs(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,lp(e,n),s=go(s),r=r(s),e.flags|=1,Cs(t,e,r,n),e.child;case 14:return r=e.type,s=Fo(r,e.pendingProps),s=Fo(r.type,s),gD(t,e,r,s,n);case 15:return ej(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Fo(r,s),Ov(t,e),e.tag=1,ci(r)?(t=!0,DE(e)):t=!1,lp(e,n),ZB(e,r,s),yN(e,r,s,n),vN(null,e,r,!0,t,n);case 19:return ij(t,e,n);case 22:return tj(t,e,n)}throw Error(me(156,e.tag))};function Ej(t,e){return K8(t,e)}function UJ(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ho(t,e,n,r){return new UJ(t,e,n,r)}function IP(t){return t=t.prototype,!(!t||!t.isReactComponent)}function BJ(t){if(typeof t=="function")return IP(t)?1:0;if(t!=null){if(t=t.$$typeof,t===qR)return 11;if(t===GR)return 14}return 2}function wu(t,e){var n=t.alternate;return n===null?(n=ho(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $v(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")IP(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case jf:return Hd(n.children,s,i,e);case HR:o=8,s|=8;break;case FI:return t=ho(12,n,e,s|2),t.elementType=FI,t.lanes=i,t;case WI:return t=ho(13,n,e,s),t.elementType=WI,t.lanes=i,t;case zI:return t=ho(19,n,e,s),t.elementType=zI,t.lanes=i,t;case P8:return rC(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case T8:o=10;break e;case R8:o=9;break e;case qR:o=11;break e;case GR:o=14;break e;case Pl:o=16,r=null;break e}throw Error(me(130,t==null?t:typeof t,""))}return e=ho(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Hd(t,e,n,r){return t=ho(7,t,r,e),t.lanes=n,t}function rC(t,e,n,r){return t=ho(22,t,r,e),t.elementType=P8,t.lanes=n,t.stateNode={isHidden:!1},t}function fS(t,e,n){return t=ho(6,t,null,e),t.lanes=n,t}function pS(t,e,n){return e=ho(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jJ(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=K1(0),this.expirationTimes=K1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=K1(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function NP(t,e,n,r,s,i,o,a,c){return t=new jJ(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ho(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},uP(i),t}function FJ(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bf,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _j(t){if(!t)return Du;t=t._reactInternals;e:{if(Ph(t)!==t||t.tag!==1)throw Error(me(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ci(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(me(171))}if(t.tag===1){var n=t.type;if(ci(n))return _B(t,n,e)}return e}function Cj(t,e,n,r,s,i,o,a,c){return t=NP(n,r,!0,t,s,i,o,a,c),t.context=_j(null),n=t.current,r=Ts(),s=yu(n),i=Fc(r,s),i.callback=e??null,gu(n,i,s),t.current.lanes=s,g0(t,s,r),li(t,r),t}function sC(t,e,n,r){var s=e.current,i=Ts(),o=yu(s);return n=_j(n),e.context===null?e.context=n:e.pendingContext=n,e=Fc(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=gu(s,e,o),t!==null&&(sa(t,s,o,i),Tv(t,s,o)),o}function VE(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ND(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function xP(t,e){ND(t,e),(t=t.alternate)&&ND(t,e)}function WJ(){return null}var Sj=typeof reportError=="function"?reportError:function(t){console.error(t)};function TP(t){this._internalRoot=t}iC.prototype.render=TP.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(me(409));sC(t,e,null,null)};iC.prototype.unmount=TP.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ih(function(){sC(null,t,null,null)}),e[Zc]=null}};function iC(t){this._internalRoot=t}iC.prototype.unstable_scheduleHydration=function(t){if(t){var e=tB();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ll.length&&e!==0&&e<Ll[n].priority;n++);Ll.splice(n,0,t),n===0&&rB(t)}};function RP(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function oC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xD(){}function zJ(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=VE(o);i.call(l)}}var o=Cj(e,r,t,0,null,!1,!1,"",xD);return t._reactRootContainer=o,t[Zc]=o.current,Vy(t.nodeType===8?t.parentNode:t),ih(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=VE(c);a.call(l)}}var c=NP(t,0,!1,null,null,!1,!1,"",xD);return t._reactRootContainer=c,t[Zc]=c.current,Vy(t.nodeType===8?t.parentNode:t),ih(function(){sC(e,c,n,r)}),c}function aC(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=VE(o);a.call(c)}}sC(e,o,t,s)}else o=zJ(n,e,t,s,r);return VE(o)}X8=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Dm(e.pendingLanes);n!==0&&(YR(e,n|1),li(e,rr()),!(Wt&6)&&(Fp=rr()+500,Hu()))}break;case 13:ih(function(){var r=Jc(t,1);if(r!==null){var s=Ts();sa(r,t,1,s)}}),xP(t,1)}};QR=function(t){if(t.tag===13){var e=Jc(t,134217728);if(e!==null){var n=Ts();sa(e,t,134217728,n)}xP(t,134217728)}};eB=function(t){if(t.tag===13){var e=yu(t),n=Jc(t,e);if(n!==null){var r=Ts();sa(n,t,e,r)}xP(t,e)}};tB=function(){return ln};nB=function(t,e){var n=ln;try{return ln=t,e()}finally{ln=n}};XI=function(t,e,n){switch(e){case"input":if(GI(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Z_(r);if(!s)throw Error(me(90));k8(r),GI(r,s)}}}break;case"textarea":$8(t,n);break;case"select":e=n.value,e!=null&&ip(t,!!n.multiple,e,!1)}};W8=CP;z8=ih;var HJ={usingClientEntryPoint:!1,Events:[y0,Hf,Z_,j8,F8,CP]},om={findFiberByHostInstance:_d,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qJ={bundleType:om.bundleType,version:om.version,rendererPackageName:om.rendererPackageName,rendererConfig:om.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ol.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=G8(t),t===null?null:t.stateNode},findFiberByHostInstance:om.findFiberByHostInstance||WJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ob=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ob.isDisabled&&Ob.supportsFiber)try{V_=Ob.inject(qJ),Ha=Ob}catch{}}ji.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HJ;ji.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!RP(e))throw Error(me(200));return FJ(t,e,null,n)};ji.createRoot=function(t,e){if(!RP(t))throw Error(me(299));var n=!1,r="",s=Sj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=NP(t,1,!1,null,null,n,!1,r,s),t[Zc]=e.current,Vy(t.nodeType===8?t.parentNode:t),new TP(e)};ji.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(me(188)):(t=Object.keys(t).join(","),Error(me(268,t)));return t=G8(e),t=t===null?null:t.stateNode,t};ji.flushSync=function(t){return ih(t)};ji.hydrate=function(t,e,n){if(!oC(e))throw Error(me(200));return aC(null,t,e,!0,n)};ji.hydrateRoot=function(t,e,n){if(!RP(t))throw Error(me(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Sj;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Cj(e,null,t,1,n??null,s,!1,i,o),t[Zc]=e.current,Vy(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new iC(e)};ji.render=function(t,e,n){if(!oC(e))throw Error(me(200));return aC(null,t,e,!1,n)};ji.unmountComponentAtNode=function(t){if(!oC(t))throw Error(me(40));return t._reactRootContainer?(ih(function(){aC(null,null,t,!1,function(){t._reactRootContainer=null,t[Zc]=null})}),!0):!1};ji.unstable_batchedUpdates=CP;ji.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!oC(n))throw Error(me(200));if(t==null||t._reactInternals===void 0)throw Error(me(38));return aC(t,e,n,!1,r)};ji.version="18.3.1-next-f1338f8080-20240426";function Aj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Aj)}catch(t){console.error(t)}}Aj(),A8.exports=ji;var PP=A8.exports,TD=PP;BI.createRoot=TD.createRoot,BI.hydrateRoot=TD.hydrateRoot;const Ij="2.31.7";let am={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${Ij}`},le=class ON extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof ON?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof ON&&n.cause.docsPath||n.docsPath,i=(a=am.getDocsUrl)==null?void 0:a.call(am,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...am.version?[`Version: ${am.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=Ij}walk(e){return Nj(this,e)}};function Nj(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?Nj(t.cause,e):e?null:t}let xj=class extends le{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class GJ extends le{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class VJ extends le{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let KJ=class extends le{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}},Tj=class extends le{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},Rj=class extends le{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class RD extends le{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function _g(t,{dir:e,size:n=32}={}){return typeof t=="string"?bu(t,{dir:e,size:n}):YJ(t,{dir:e,size:n})}function bu(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new Rj({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function YJ(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new Rj({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function Ja(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function er(t){return Ja(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function Ga(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const QJ=new TextEncoder;function Cg(t,e={}){return typeof t=="number"||typeof t=="bigint"?JJ(t,e):typeof t=="boolean"?ZJ(t,e):Ja(t)?yo(t,e):qd(t,e)}function ZJ(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(_o(n,{size:e.size}),_g(n,{size:e.size})):n}const dc={zero:48,nine:57,A:65,F:70,a:97,f:102};function PD(t){if(t>=dc.zero&&t<=dc.nine)return t-dc.zero;if(t>=dc.A&&t<=dc.F)return t-(dc.A-10);if(t>=dc.a&&t<=dc.f)return t-(dc.a-10)}function yo(t,e={}){let n=t;e.size&&(_o(n,{size:e.size}),n=_g(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=PD(r.charCodeAt(a++)),l=PD(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new le(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function JJ(t,e){const n=qe(t,e);return yo(n)}function qd(t,e={}){const n=QJ.encode(t);return typeof e.size=="number"?(_o(n,{size:e.size}),_g(n,{dir:"right",size:e.size})):n}function _o(t,{size:e}){if(er(t)>e)throw new KJ({givenSize:er(t),maxSize:e})}function Ui(t,e={}){const{signed:n}=e;e.size&&_o(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function XJ(t,e={}){let n=t;if(e.size&&(_o(n,{size:e.size}),n=Ga(n)),Ga(n)==="0x00")return!1;if(Ga(n)==="0x01")return!0;throw new VJ(n)}function ca(t,e={}){return Number(Ui(t,e))}function Pj(t,e={}){let n=yo(t);return e.size&&(_o(n,{size:e.size}),n=Ga(n,{dir:"right"})),new TextDecoder().decode(n)}const eX=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function wo(t,e={}){return typeof t=="number"||typeof t=="bigint"?qe(t,e):typeof t=="string"?Wp(t,e):typeof t=="boolean"?Oj(t,e):Sr(t,e)}function Oj(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(_o(n,{size:e.size}),_g(n,{size:e.size})):n}function Sr(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=eX[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(_o(r,{size:e.size}),_g(r,{dir:"right",size:e.size})):r}function qe(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new xj({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?_g(a,{size:r}):a}const tX=new TextEncoder;function Wp(t,e={}){const n=tX.encode(t);return Sr(n,e)}async function nX(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:qe(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function la(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new gX(t.type);return`${t.name}(${cC(t.inputs,{includeName:e})})`}function cC(t,{includeName:e=!1}={}){return t?t.map(n=>rX(n,{includeName:e})).join(e?", ":","):""}function rX(t,{includeName:e}){return t.type.startsWith("tuple")?`(${cC(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class sX extends le{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class OD extends le{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class kj extends le{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${cC(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class b0 extends le{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class iX extends le{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class oX extends le{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${er(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class aX extends le{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class cX extends le{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class kD extends le{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class Dj extends le{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class lX extends le{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class $j extends le{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class DD extends le{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class zp extends le{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class Mj extends le{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class uX extends le{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class dX extends le{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${la(e.abiItem)}\`, and`,`\`${n.type}\` in \`${la(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let hX=class extends le{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class nw extends le{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${cC(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class lC extends le{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${la(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class fX extends le{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class pX extends le{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let Lj=class extends le{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class gX extends le{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function bo(t){return typeof t[0]=="string"?Sg(t):mX(t)}function mX(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function Sg(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}let $u=class extends le{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},uC=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const kb=BigInt(2**32-1),$D=BigInt(32);function yX(t,e=!1){return e?{h:Number(t&kb),l:Number(t>>$D&kb)}:{h:Number(t>>$D&kb)|0,l:Number(t&kb)|0}}function wX(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=yX(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const bX=(t,e,n)=>t<<n|e>>>32-n,vX=(t,e,n)=>e<<n|t>>>32-n,EX=(t,e,n)=>e<<n-32|t>>>64-n,_X=(t,e,n)=>t<<n-32|e>>>64-n,nf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function OP(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function rw(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function ua(t,...e){if(!OP(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function CX(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");rw(t.outputLen),rw(t.blockLen)}function Hp(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Uj(t,e){ua(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function SX(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function qp(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function gS(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ya(t,e){return t<<32-e|t>>>e}const AX=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function IX(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function NX(t){for(let e=0;e<t.length;e++)t[e]=IX(t[e]);return t}const MD=AX?t=>t:NX,Bj=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",xX=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function sw(t){if(ua(t),Bj)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=xX[t[n]];return e}const hc={_0:48,_9:57,A:65,F:70,a:97,f:102};function LD(t){if(t>=hc._0&&t<=hc._9)return t-hc._0;if(t>=hc.A&&t<=hc.F)return t-(hc.A-10);if(t>=hc.a&&t<=hc.f)return t-(hc.a-10)}function kP(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Bj)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=LD(t.charCodeAt(i)),a=LD(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function TX(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function v0(t){return typeof t=="string"&&(t=TX(t)),ua(t),t}function Ad(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];ua(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let DP=class{};function jj(t){const e=r=>t().update(v0(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function RX(t){const e=(r,s)=>t(s).update(v0(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function PX(t=32){if(nf&&typeof nf.getRandomValues=="function")return nf.getRandomValues(new Uint8Array(t));if(nf&&typeof nf.randomBytes=="function")return Uint8Array.from(nf.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const OX=BigInt(0),cm=BigInt(1),kX=BigInt(2),DX=BigInt(7),$X=BigInt(256),MX=BigInt(113),Fj=[],Wj=[],zj=[];for(let t=0,e=cm,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Fj.push(2*(5*r+n)),Wj.push((t+1)*(t+2)/2%64);let s=OX;for(let i=0;i<7;i++)e=(e<<cm^(e>>DX)*MX)%$X,e&kX&&(s^=cm<<(cm<<BigInt(i))-cm);zj.push(s)}const Hj=wX(zj,!0),LX=Hj[0],UX=Hj[1],UD=(t,e,n)=>n>32?EX(t,e,n):bX(t,e,n),BD=(t,e,n)=>n>32?_X(t,e,n):vX(t,e,n);function qj(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=UD(l,u,1)^n[a],h=BD(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Wj[o],c=UD(s,i,a),l=BD(s,i,a),u=Fj[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=LX[r],t[1]^=UX[r]}qp(n)}let $P=class Gj extends DP{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,rw(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=SX(this.state)}clone(){return this._cloneInto()}keccak(){MD(this.state32),qj(this.state32,this.rounds),MD(this.state32),this.posOut=0,this.pos=0}update(e){Hp(this),e=v0(e),ua(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Hp(this,!1),ua(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return rw(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Uj(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,qp(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Gj(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const qu=(t,e,n)=>jj(()=>new $P(e,t,n)),BX=qu(6,144,224/8),jX=qu(6,136,256/8),FX=qu(6,104,384/8),WX=qu(6,72,512/8),zX=qu(1,144,224/8),MP=qu(1,136,256/8),HX=qu(1,104,384/8),qX=qu(1,72,512/8),Vj=(t,e,n)=>RX((r={})=>new $P(e,t,r.dkLen===void 0?n:r.dkLen,!0)),GX=Vj(31,168,128/8),VX=Vj(31,136,256/8),A5e=Object.freeze(Object.defineProperty({__proto__:null,Keccak:$P,keccakP:qj,keccak_224:zX,keccak_256:MP,keccak_384:HX,keccak_512:qX,sha3_224:BX,sha3_256:jX,sha3_384:FX,sha3_512:WX,shake128:GX,shake256:VX},Symbol.toStringTag,{value:"Module"}));function Yr(t,e){const n=e||"hex",r=MP(Ja(t,{strict:!1})?Cg(t):t);return n==="bytes"?r:wo(r)}const mS=new uC(8192);function E0(t,e){if(mS.has(`${t}.${e}`))return mS.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=Yr(qd(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return mS.set(`${t}.${e}`,i),i}function Uc(t,e){if(!vo(t,{strict:!1}))throw new $u({address:t});return E0(t,e)}const KX=/^0x[a-fA-F0-9]{40}$/,yS=new uC(8192);function vo(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(yS.has(r))return yS.get(r);const s=KX.test(t)?t.toLowerCase()===t?!0:n?E0(t)===t:!0:!1;return yS.set(r,s),s}function Gp(t,e,n,{strict:r}={}){return Ja(t,{strict:!1})?KE(t,e,n,{strict:r}):Qj(t,e,n,{strict:r})}function Kj(t,e){if(typeof e=="number"&&e>0&&e>er(t)-1)throw new Tj({offset:e,position:"start",size:er(t)})}function Yj(t,e,n){if(typeof e=="number"&&typeof n=="number"&&er(t)!==n-e)throw new Tj({offset:n,position:"end",size:er(t)})}function Qj(t,e,n,{strict:r}={}){Kj(t,e);const s=t.slice(e,n);return r&&Yj(s,e,n),s}function KE(t,e,n,{strict:r}={}){Kj(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&Yj(s,e,n),s}const YX=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Zj=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Gu(t,e){if(t.length!==e.length)throw new aX({expectedLength:t.length,givenLength:e.length});const n=QX({params:t,values:e}),r=UP(n);return r.length===0?"0x":r}function QX({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(LP({param:t[r],value:e[r]}));return n}function LP({param:t,value:e}){const n=BP(t.type);if(n){const[r,s]=n;return JX(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return ree(e,{param:t});if(t.type==="address")return ZX(e);if(t.type==="bool")return eee(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=Zj.exec(t.type)??[];return tee(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return XX(e,{param:t});if(t.type==="string")return nee(e);throw new fX(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function UP(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=er(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(qe(e+s,{size:32})),r.push(a),s+=er(a)):n.push(a)}return bo([...n,...r])}function ZX(t){if(!vo(t))throw new $u({address:t});return{dynamic:!1,encoded:bu(t.toLowerCase())}}function JX(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new Lj(t);if(!r&&t.length!==e)throw new iX({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=LP({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=UP(i);if(r){const a=qe(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?bo([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:bo(i.map(({encoded:o})=>o))}}function XX(t,{param:e}){const[,n]=e.type.split("bytes"),r=er(t);if(!n){let s=t;return r%32!==0&&(s=bu(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:bo([bu(qe(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new oX({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:bu(t,{dir:"right"})}}function eee(t){if(typeof t!="boolean")throw new le(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:bu(Oj(t))}}function tee(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new xj({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:qe(t,{size:32,signed:e})}}function nee(t){const e=Wp(t),n=Math.ceil(er(e)/32),r=[];for(let s=0;s<n;s++)r.push(bu(Gp(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:bo([bu(qe(er(e),{size:32})),...r])}}function ree(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=LP({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?UP(r):bo(r.map(({encoded:s})=>s))}}function BP(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const wS="/docs/contract/encodeDeployData";function dC(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new sX({docsPath:wS});if(!("inputs"in s))throw new OD({docsPath:wS});if(!s.inputs||s.inputs.length===0)throw new OD({docsPath:wS});const i=Gu(s.inputs,n);return Sg([r,i])}function tr(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class Oh extends le{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class Mv extends le{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function see(t){const e=Yr(`0x${t.substring(4)}`).substring(26);return E0(`0x${e}`)}const iee="modulepreload",oee=function(t){return"/"+t},jD={},us=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=oee(c),c in jD)return;jD[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":iee,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function aee({hash:t,signature:e}){const n=Ja(t)?t:wo(t),{secp256k1:r}=await us(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>Sie);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=FD(f);return new r.Signature(Ui(l),Ui(u)).addRecoveryBit(p)}const o=Ja(e)?e:wo(e);if(er(o)!==65)throw new Error("invalid signature length");const a=ca(`0x${o.slice(130)}`),c=FD(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function FD(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Jj({hash:t,signature:e}){return see(await aee({hash:t,signature:e}))}class WD extends le{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class Xj extends le{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class cee extends le{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const lee={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new cee({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new Xj({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new WD({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new WD({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function jP(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(lee);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function uee(t,e="hex"){const n=e4(t),r=jP(new Uint8Array(n.length));return n.encode(r),e==="hex"?Sr(r.bytes):r.bytes}function e4(t){return Array.isArray(t)?dee(t.map(e=>e4(e))):hee(t)}function dee(t){const e=t.reduce((s,i)=>s+i.length,0),n=t4(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function hee(t){const e=typeof t=="string"?yo(t):t,n=t4(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function t4(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new le("Length is too large.")}function fee(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=Yr(Sg(["0x05",uee([e?qe(e):"0x",s,n?qe(n):"0x"])]));return r==="bytes"?yo(i):i}async function n4(t){const{authorization:e,signature:n}=t;return Jj({hash:fee(e),signature:n??e})}class kN extends le{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class pee extends le{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id}  ${e.name}`],name:"ChainMismatchError"})}}class gee extends le{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class r4 extends le{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function s4({chain:t,currentChainId:e}){if(!t)throw new gee;if(e!==t.id)throw new pee({chain:t,currentChainId:e})}const mee={gwei:9,wei:18},yee={ether:-9,wei:9},wee={ether:-18,gwei:-9};function kh(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function ui(t,e="wei"){return kh(t,yee[e])}class Id extends le{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(Id,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Id,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class YE extends le{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ui(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(YE,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class DN extends le{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ui(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(DN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class $N extends le{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty($N,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class MN extends le{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(MN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class LN extends le{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(LN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class UN extends le{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(UN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class BN extends le{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(BN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class jN extends le{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(jN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class FN extends le{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(FN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class QE extends le{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${ui(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${ui(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(QE,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class _0 extends le{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function FP(t,e="wei"){return kh(t,mee[e])}function C0(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class bee extends le{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class vee extends le{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",C0(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class Eee extends le{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=C0({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${FP(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ui(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ui(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ui(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class i4 extends le{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class o4 extends le{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class _ee extends le{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const _r=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),Cee=t=>t,WP=t=>t;class uy extends le{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${WP(o)}`,e&&`Request body: ${_r(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class zP extends le{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${WP(r)}`,`Request body: ${_r(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class zD extends le{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${WP(n)}`,`Request body: ${_r(e)}`],name:"TimeoutError"})}}const See=-1;class pi extends le{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof zP?e.code:n??See}}class Wi extends pi{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class iw extends pi{constructor(e){super(e,{code:iw.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(iw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class ow extends pi{constructor(e){super(e,{code:ow.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(ow,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class aw extends pi{constructor(e,{method:n}={}){super(e,{code:aw.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(aw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class cw extends pi{constructor(e){super(e,{code:cw.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(cw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class oh extends pi{constructor(e){super(e,{code:oh.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(oh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class ah extends pi{constructor(e){super(e,{code:ah.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(ah,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class lw extends pi{constructor(e){super(e,{code:lw.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(lw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class vu extends pi{constructor(e){super(e,{code:vu.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(vu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Vp extends pi{constructor(e){super(e,{code:Vp.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Vp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Nd extends pi{constructor(e,{method:n}={}){super(e,{code:Nd.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Nd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Kp extends pi{constructor(e){super(e,{code:Kp.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Kp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class uw extends pi{constructor(e){super(e,{code:uw.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(uw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class gr extends Wi{constructor(e){super(e,{code:gr.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(gr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class dw extends Wi{constructor(e){super(e,{code:dw.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(dw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class hw extends Wi{constructor(e,{method:n}={}){super(e,{code:hw.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(hw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class fw extends Wi{constructor(e){super(e,{code:fw.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(fw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class pw extends Wi{constructor(e){super(e,{code:pw.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(pw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Xa extends Wi{constructor(e){super(e,{code:Xa.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Xa,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Yp extends Wi{constructor(e){super(e,{code:Yp.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Yp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class gw extends Wi{constructor(e){super(e,{code:gw.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(gw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class mw extends Wi{constructor(e){super(e,{code:mw.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(mw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class yw extends Wi{constructor(e){super(e,{code:yw.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(yw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class ww extends Wi{constructor(e){super(e,{code:ww.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(ww,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class bw extends Wi{constructor(e){super(e,{code:bw.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(bw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Qp extends Wi{constructor(e){super(e,{code:Qp.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Qp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class Aee extends pi{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function hC(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof le?t.walk(s=>(s==null?void 0:s.code)===Id.code):t;return r instanceof le?new Id({cause:t,message:r.details}):Id.nodeMessage.test(n)?new Id({cause:t,message:t.details}):YE.nodeMessage.test(n)?new YE({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):DN.nodeMessage.test(n)?new DN({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):$N.nodeMessage.test(n)?new $N({cause:t,nonce:e==null?void 0:e.nonce}):MN.nodeMessage.test(n)?new MN({cause:t,nonce:e==null?void 0:e.nonce}):LN.nodeMessage.test(n)?new LN({cause:t,nonce:e==null?void 0:e.nonce}):UN.nodeMessage.test(n)?new UN({cause:t}):BN.nodeMessage.test(n)?new BN({cause:t,gas:e==null?void 0:e.gas}):jN.nodeMessage.test(n)?new jN({cause:t,gas:e==null?void 0:e.gas}):FN.nodeMessage.test(n)?new FN({cause:t}):QE.nodeMessage.test(n)?new QE({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new _0({cause:t})}function a4(t,{docsPath:e,...n}){const r=(()=>{const s=hC(t,n);return s instanceof _0?t:s})();return new Eee(r,{docsPath:e,...n})}function fC(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const Iee={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Ag(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=Nee(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>Sr(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=qe(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=qe(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=qe(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=qe(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=qe(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=qe(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=Iee[t.type]),typeof t.value<"u"&&(e.value=qe(t.value)),e}function Nee(t){return t.map(e=>({address:e.address,r:e.r?qe(BigInt(e.r)):e.r,s:e.s?qe(BigInt(e.s)):e.s,chainId:qe(e.chainId),nonce:qe(e.nonce),...typeof e.yParity<"u"?{yParity:qe(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:qe(e.v)}:{}}))}function tt(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const xee=2n**256n-1n;function Dh(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?tr(e):void 0;if(o&&!vo(o.address))throw new $u({address:o.address});if(i&&!vo(i))throw new $u({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new bee;if(r&&r>xee)throw new YE({maxFeePerGas:r});if(s&&r&&s>r)throw new QE({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function Ig(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return ca(e)}class Tee extends le{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class HP extends le{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class Ree extends le{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${ui(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class c4 extends le{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const l4={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function u4(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?ca(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?ca(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?l4[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=Pee(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function Pee(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function d4(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:u4(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function za(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?qe(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new c4({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||d4)(c)}async function qP(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function Oee(t,e){return h4(t,e)}async function h4(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await tt(t,za,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return Ui(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):tt(t,za,"getBlock")({}),tt(t,qP,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new HP;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function kee(t,e){return WN(t,e)}async function WN(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new Tee;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await tt(t,za,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new HP;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await h4(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await tt(t,qP,"getGasPrice")({}))}}class Dee extends le{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=C0({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${FP(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ui(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ui(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ui(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function $ee(t,{docsPath:e,...n}){const r=(()=>{const s=hC(t,n);return s instanceof _0?t:s})();return new Dee(r,{docsPath:e,...n})}class Mee extends le{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class Lee extends le{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function HD(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function Uee(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=HD(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=HD(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function qD(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new RD({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new RD({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function Bee(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=qe(e)),n!==void 0&&(o.nonce=qe(n)),r!==void 0&&(o.state=qD(r)),s!==void 0){if(o.state)throw new Lee;o.stateDiff=qD(s)}return o}function GP(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!vo(n,{strict:!1}))throw new $u({address:n});if(e[n])throw new Mee({address:n});e[n]=Bee(r)}return e}async function VP(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?qe(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function pC(t,e){var s,i,o;const{account:n=t.account}=e,r=n?tr(n):void 0;try{let F=function(N){const{block:$,request:R,rpcStateOverride:D}=N;return t.request({method:"eth_estimateGas",params:D?[R,$??"latest",D]:$?[R,$]:[R]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:E,value:_,stateOverride:C,...I}=await S0(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),x=(typeof d=="bigint"?qe(d):void 0)||h,S=GP(C),k=await(async()=>{if(I.to)return I.to;if(c&&c.length>0)return await n4({authorization:c[0]}).catch(()=>{throw new le("`to` is required. Could not infer from `authorizationList`")})})();Dh(e);const O=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,G=(O||Ag)({...fC(I,{format:O}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:E,to:k,value:_});let T=BigInt(await F({block:x,request:G,rpcStateOverride:S}));if(c){const N=await VP(t,{address:G.from}),$=await Promise.all(c.map(async R=>{const{address:D}=R,B=await F({block:x,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:D,value:qe(N)},rpcStateOverride:S}).catch(()=>100000n);return 2n*BigInt(B)}));T+=$.reduce((R,D)=>R+D,0n)}return T}catch(a){throw $ee(a,{...e,account:r,chain:t.chain})}}async function KP(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?qe(r):n]},{dedupe:!!r});return ca(s)}function f4(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>yo(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>Sr(i))}function p4(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>yo(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>yo(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>Sr(o))}function jee(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function Fee(t,e,n){return t&e^~t&n}function Wee(t,e,n){return t&e^t&n^e&n}class zee extends DP{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=gS(this.buffer)}update(e){Hp(this),e=v0(e),ua(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=gS(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Hp(this),Uj(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,qp(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;jee(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=gS(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const fl=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Hee=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),pl=new Uint32Array(64);class qee extends zee{constructor(e=32){super(64,e,8,!1),this.A=fl[0]|0,this.B=fl[1]|0,this.C=fl[2]|0,this.D=fl[3]|0,this.E=fl[4]|0,this.F=fl[5]|0,this.G=fl[6]|0,this.H=fl[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)pl[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=pl[d-15],f=pl[d-2],p=ya(h,7)^ya(h,18)^h>>>3,g=ya(f,17)^ya(f,19)^f>>>10;pl[d]=g+pl[d-7]+p+pl[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=ya(a,6)^ya(a,11)^ya(a,25),f=u+h+Fee(a,c,l)+Hee[d]+pl[d]|0,g=(ya(r,2)^ya(r,13)^ya(r,22))+Wee(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){qp(pl)}destroy(){this.set(0,0,0,0,0,0,0,0),qp(this.buffer)}}const g4=jj(()=>new qee),Gee=g4;function Vee(t,e){return Gee(Ja(t,{strict:!1})?Cg(t):t)}function Kee(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=Vee(e);return s.set([n],0),r==="bytes"?s:Sr(s)}function Yee(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(Kee({commitment:i,to:r,version:n}));return s}const GD=6,m4=32,YP=4096,y4=m4*YP,VD=y4*GD-1-1*YP*GD;class Qee extends le{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class Zee extends le{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function Jee(t){const e=typeof t.data=="string"?yo(t.data):t.data,n=er(e);if(!n)throw new Zee;if(n>VD)throw new Qee({maxSize:VD,size:n});const r=[];let s=!0,i=0;for(;s;){const o=jP(new Uint8Array(y4));let a=0;for(;a<YP;){const c=e.slice(i,i+(m4-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>Sr(o.bytes))}function Xee(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??Jee({data:e}),i=t.commitments??f4({blobs:s,kzg:n,to:r}),o=t.proofs??p4({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function ete(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new vee({transaction:t})}const w4=["blobVersionedHashes","chainId","fees","gas","nonce","type"],KD=new Map;async function S0(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=w4,type:u}=e,d=n&&tr(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await tt(t,za,"getBlock")({blockTag:"latest"}),f)}let g;async function w(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await tt(t,Ig,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const y=await w();h.nonce=await c.consume({address:d.address,chainId:y,client:t})}else h.nonce=await tt(t,KP,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const y=f4({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const b=Yee({commitments:y,to:"hex"});h.blobVersionedHashes=b}if(l.includes("sidecars")){const b=p4({blobs:r,commitments:y,kzg:o}),E=Xee({blobs:r,commitments:y,proofs:b,to:"hex"});h.sidecars=E}}if(l.includes("chainId")&&(h.chainId=await w()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=ete(h)}catch{let y=KD.get(t.uid);if(typeof y>"u"){const b=await p();y=typeof(b==null?void 0:b.baseFeePerGas)=="bigint",KD.set(t.uid,y)}h.type=y?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const y=await p(),{maxFeePerGas:b,maxPriorityFeePerGas:E}=await WN(t,{block:y,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<E)throw new Ree({maxPriorityFeePerGas:E});h.maxPriorityFeePerGas=E,h.maxFeePerGas=b}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new HP;if(typeof e.gasPrice>"u"){const y=await p(),{gasPrice:b}=await WN(t,{block:y,chain:s,request:h,type:"legacy"});h.gasPrice=b}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await tt(t,pC,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),Dh(h),delete h.parameters,h}async function QP(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const bS=new uC(128);async function A0(t,e){var b,E,_,C;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...w}=e;if(typeof n>"u")throw new Oh({docsPath:"/docs/actions/wallet/sendTransaction"});const y=n?tr(n):null;try{Dh(e);const I=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await n4({authorization:i[0]}).catch(()=>{throw new le("`to` is required. Could not infer from `authorizationList`.")})})();if((y==null?void 0:y.type)==="json-rpc"||y===null){let A;r!==null&&(A=await tt(t,Ig,"getChainId")({}),s4({currentChainId:A,chain:r}));const x=(_=(E=(b=t.chain)==null?void 0:b.formatters)==null?void 0:E.transactionRequest)==null?void 0:_.format,k=(x||Ag)({...fC(w,{format:x}),accessList:s,authorizationList:i,blobs:o,chainId:A,data:a,from:y==null?void 0:y.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:I,type:p,value:g}),O=bS.get(t.uid),U=O?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:U,params:[k]},{retryCount:0})}catch(G){if(O===!1)throw G;const F=G;if(F.name==="InvalidInputRpcError"||F.name==="InvalidParamsRpcError"||F.name==="MethodNotFoundRpcError"||F.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[k]},{retryCount:0}).then(T=>(bS.set(t.uid,!0),T)).catch(T=>{const N=T;throw N.name==="MethodNotFoundRpcError"||N.name==="MethodNotSupportedRpcError"?(bS.set(t.uid,!1),F):N});throw F}}if((y==null?void 0:y.type)==="local"){const A=await tt(t,S0,"prepareTransactionRequest")({account:y,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:y.nonceManager,parameters:[...w4,"sidecars"],type:p,value:g,...w,to:I}),x=(C=r==null?void 0:r.serializers)==null?void 0:C.transaction,S=await y.signTransaction(A,{serializer:x});return await tt(t,QP,"sendRawTransaction")({serializedTransaction:S})}throw(y==null?void 0:y.type)==="smart"?new Mv({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Mv({docsPath:"/docs/actions/wallet/sendTransaction",type:y==null?void 0:y.type})}catch(I){throw I instanceof Mv?I:a4(I,{...e,account:y,chain:e.chain||void 0})}}function tte(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=dC({abi:n,args:r,bytecode:s});return A0(t,{...i,...i.authorizationList?{to:null}:{},data:o})}const zN=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],HN=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],b4=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],v4=[...b4,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],nte=[...b4,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],YD=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],QD=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],ZD=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}];function rte(t,e={}){typeof e.size<"u"&&_o(t,{size:e.size});const n=Sr(t,e);return Ui(n,e)}function ste(t,e={}){let n=t;if(typeof e.size<"u"&&(_o(n,{size:e.size}),n=Ga(n)),n.length>1||n[0]>1)throw new GJ(n);return!!n[0]}function Wc(t,e={}){typeof e.size<"u"&&_o(t,{size:e.size});const n=Sr(t,e);return ca(n,e)}function ite(t,e={}){let n=t;return typeof e.size<"u"&&(_o(n,{size:e.size}),n=Ga(n,{dir:"right"})),new TextDecoder().decode(n)}function I0(t,e){const n=typeof e=="string"?yo(e):e,r=jP(n);if(er(n)===0&&t.length>0)throw new b0;if(er(e)&&er(e)<32)throw new kj({data:typeof e=="string"?e:Sr(e),params:t,size:er(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=dp(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function dp(t,e,{staticPosition:n}){const r=BP(e.type);if(r){const[s,i]=r;return ate(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return dte(t,e,{staticPosition:n});if(e.type==="address")return ote(t);if(e.type==="bool")return cte(t);if(e.type.startsWith("bytes"))return lte(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return ute(t,e);if(e.type==="string")return hte(t,{staticPosition:n});throw new pX(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const JD=32,qN=32;function ote(t){const e=t.readBytes(32);return[E0(Sr(Qj(e,-20))),32]}function ate(t,e,{length:n,staticPosition:r}){if(!n){const o=Wc(t.readBytes(qN)),a=r+o,c=a+JD;t.setPosition(a);const l=Wc(t.readBytes(JD)),u=vw(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=dp(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(vw(e)){const o=Wc(t.readBytes(qN)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=dp(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=dp(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function cte(t){return[ste(t.readBytes(32),{size:32}),32]}function lte(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=Wc(t.readBytes(32));t.setPosition(n+o);const a=Wc(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Sr(c),32]}return[Sr(t.readBytes(Number.parseInt(s),32)),32]}function ute(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?rte(s,{signed:n}):Wc(s,{signed:n}),32]}function dte(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(vw(e)){const o=Wc(t.readBytes(qN)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=dp(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=dp(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function hte(t,{staticPosition:e}){const n=Wc(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Wc(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=ite(Ga(i));return t.setPosition(e+32),[o,32]}function vw(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(vw);const n=BP(t.type);return!!(n&&vw({...t,type:n[1]}))}const fte=t=>Yr(Cg(t));function pte(t){return fte(t)}const gte="1.0.8";let zi=class GN extends Error{constructor(e,n={}){var o;const r=n.cause instanceof GN?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof GN&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${gte}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function al(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const E4=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,_4=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,C4=/^\(.+?\).*?$/,XD=/^tuple(?<array>(\[(\d*)\])*)$/;function VN(t){let e=t.type;if(XD.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=VN(i),s<n-1&&(e+=", ")}const r=al(XD,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,VN({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function lm(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=VN(s),r!==n-1&&(e+=", ")}return e}function ZE(t){var e;return t.type==="function"?`function ${t.name}(${lm(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${lm(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${lm(t.inputs)})`:t.type==="error"?`error ${t.name}(${lm(t.inputs)})`:t.type==="constructor"?`constructor(${lm(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const S4=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function mte(t){return S4.test(t)}function yte(t){return al(S4,t)}const A4=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function wte(t){return A4.test(t)}function bte(t){return al(A4,t)}const I4=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function vte(t){return I4.test(t)}function Ete(t){return al(I4,t)}const N4=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function ZP(t){return N4.test(t)}function _te(t){return al(N4,t)}const x4=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function Cte(t){return x4.test(t)}function Ste(t){return al(x4,t)}const T4=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function Ate(t){return T4.test(t)}function Ite(t){return al(T4,t)}const Nte=/^receive\(\) external payable$/;function xte(t){return Nte.test(t)}const Tte=new Set(["indexed"]),KN=new Set(["calldata","memory","storage"]);class Rte extends zi{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class Pte extends zi{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class Ote extends zi{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class kte extends zi{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class Dte extends zi{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class $te extends zi{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class Mte extends zi{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class Lte extends zi{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Ng extends zi{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class Ute extends zi{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class Bte extends zi{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class jte extends zi{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class Fte extends zi{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function Wte(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const vS=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function YN(t,e={}){if(vte(t))return zte(t,e);if(wte(t))return Hte(t,e);if(mte(t))return qte(t,e);if(Cte(t))return Gte(t,e);if(Ate(t))return Vte(t);if(xte(t))return{type:"receive",stateMutability:"payable"};throw new Ute({signature:t})}function zte(t,e={}){const n=Ete(t);if(!n)throw new Ng({signature:t,type:"function"});const r=Qo(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(ch(r[a],{modifiers:KN,structs:e,type:"function"}));const o=[];if(n.returns){const a=Qo(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(ch(a[l],{modifiers:KN,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function Hte(t,e={}){const n=bte(t);if(!n)throw new Ng({signature:t,type:"event"});const r=Qo(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(ch(r[o],{modifiers:Tte,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function qte(t,e={}){const n=yte(t);if(!n)throw new Ng({signature:t,type:"error"});const r=Qo(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(ch(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function Gte(t,e={}){const n=Ste(t);if(!n)throw new Ng({signature:t,type:"constructor"});const r=Qo(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(ch(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function Vte(t){const e=Ite(t);if(!e)throw new Ng({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const Kte=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Yte=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Qte=/^u?int$/;function ch(t,e){var d,h;const n=Wte(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(vS.has(n))return vS.get(n);const r=C4.test(t),s=al(r?Yte:Kte,t);if(!s)throw new kte({param:t});if(s.name&&Jte(s.name))throw new Dte({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=Qo(s.type),p=[],g=f.length;for(let w=0;w<g;w++)p.push(ch(f[w],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(Qte.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!R4(c))throw new Ote({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new $te({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(KN.has(s.modifier)&&!Xte(c,!!s.array))throw new Mte({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return vS.set(n,u),u}function Qo(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?Qo(a,[...e,n.trim()]):Qo(a,e,`${n}${o}`,r);case"(":return Qo(a,e,`${n}${o}`,r+1);case")":return Qo(a,e,`${n}${o}`,r-1);default:return Qo(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new Fte({current:n,depth:r});return e.push(n.trim()),e}function R4(t){return t==="address"||t==="bool"||t==="function"||t==="string"||E4.test(t)||_4.test(t)}const Zte=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function Jte(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||E4.test(t)||_4.test(t)||Zte.test(t)}function Xte(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function P4(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!ZP(a))continue;const c=_te(a);if(!c)throw new Ng({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=ch(p,{type:"struct"});u.push(g)}if(!u.length)throw new Bte({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=O4(c,e)}return r}const ene=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function O4(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(C4.test(o.type))r.push(o);else{const c=al(ene,o.type);if(!(c!=null&&c.type))throw new Lte({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new jte({type:u});r.push({...o,type:`tuple${l??""}`,components:O4(e[u]??[],e,new Set([...n,u]))})}else if(R4(u))r.push(o);else throw new Pte({type:u})}}return r}function k4(t){const e=P4(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];ZP(i)||n.push(YN(i,e))}return n}function e3(t){let e;if(typeof t=="string")e=YN(t);else{const n=P4(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!ZP(i)){e=YN(i,n);break}}}if(!e)throw new Rte({signature:t});return e}function tne(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new le("Unable to normalize signature.");return s}const nne=t=>{const e=typeof t=="string"?t:ZE(t);return tne(e)};function D4(t){return pte(nne(t))}const gC=D4,N0=t=>Gp(D4(t),0,4);function $h(t){const{abi:e,args:n=[],name:r}=t,s=Ja(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?N0(a)===r:a.type==="event"?gC(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?QN(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=$4(a.inputs,o.inputs,n);if(l)throw new dX({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function QN(t,e){const n=typeof t,r=e.type;switch(r){case"address":return vo(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>QN(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>QN(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function $4(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return $4(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?vo(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?vo(n[r],{strict:!1}):!1)return o}}const ES="/docs/contract/decodeFunctionResult";function Mh(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=$h({abi:e,args:n,name:r});if(!a)throw new zp(r,{docsPath:ES});i=a}if(i.type!=="function")throw new zp(void 0,{docsPath:ES});if(!i.outputs)throw new Mj(i.name,{docsPath:ES});const o=I0(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const t3="/docs/contract/encodeFunctionData";function rne(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=$h({abi:e,args:n,name:r});if(!i)throw new zp(r,{docsPath:t3});s=i}if(s.type!=="function")throw new zp(void 0,{docsPath:t3});return{abi:[s],functionName:N0(la(s))}}function Co(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:rne(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?Gu(s.inputs,e??[]):void 0;return Sg([i,o??"0x"])}function xg({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new kN({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new kN({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const M4={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},L4={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},sne={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function ine(t){const{abi:e,data:n}=t,r=Gp(n,0,4);if(r==="0x")throw new b0;const i=[...e||[],L4,sne].find(o=>o.type==="error"&&r===N0(la(o)));if(!i)throw new Dj(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?I0(i.inputs,Gp(n,4)):void 0,errorName:i.name}}function U4({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?_r(e[i]):e[i]}`).join(", ")})`}class B4 extends le{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var w;const p=n?tr(n):void 0;let g=C0({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${FP(h)} ${((w=s==null?void 0:s.nativeCurrency)==null?void 0:w.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ui(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ui(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ui(l)} gwei`,nonce:u});f&&(g+=`
${Uee(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class j4 extends le{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=$h({abi:n,args:r,name:o}),l=c?U4({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?la(c,{includeName:!0}):void 0,d=C0({address:s&&Cee(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class ZN extends le{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=ine({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=M4[f]}else{const f=u?la(u,{includeName:!0}):void 0,p=u&&h?U4({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof Dj&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class one extends le{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class ane extends le{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class mC extends le{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function JP(t,e){var r,s,i,o,a,c;if(!(t instanceof le))return!1;const n=t.walk(l=>l instanceof ZN);return n instanceof ZN?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&n.reason===M4[50]):!1}function cne(t){const{abi:e,data:n}=t,r=Gp(n,0,4),s=e.find(i=>i.type==="function"&&r===N0(la(i)));if(!s)throw new uX(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?I0(s.inputs,Gp(n,4)):void 0}}const _S="/docs/contract/encodeErrorResult";function n3(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const c=$h({abi:e,args:r,name:n});if(!c)throw new kD(n,{docsPath:_S});s=c}if(s.type!=="error")throw new kD(void 0,{docsPath:_S});const i=la(s),o=N0(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new cX(s.name,{docsPath:_S});a=Gu(s.inputs,r)}return Sg([o,a])}const CS="/docs/contract/encodeFunctionResult";function lne(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const o=$h({abi:e,name:n});if(!o)throw new zp(n,{docsPath:CS});s=o}if(s.type!=="function")throw new zp(void 0,{docsPath:CS});if(!s.outputs)throw new Mj(s.name,{docsPath:CS});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new Lj(r)})();return Gu(s.outputs,i)}const XP="x-batch-gateway:true";async function une(t){const{data:e,ccipRequest:n}=t,{args:[r]}=cne({abi:HN,data:e}),s=[],i=[];return await Promise.all(r.map(async(o,a)=>{try{i[a]=o.urls.includes(XP)?await une({data:o.data,ccipRequest:n}):await n(o),s[a]=!1}catch(c){s[a]=!0,i[a]=dne(c)}})),lne({abi:HN,functionName:"query",result:[s,i]})}function dne(t){return t.name==="HttpRequestError"&&t.status?n3({abi:HN,errorName:"HttpError",args:[t.status,t.shortMessage]}):n3({abi:[L4],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function F4(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return Ja(e)?e:null}function Lv(t){let e=new Uint8Array(32).fill(0);if(!t)return Sr(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=F4(n[r]),i=s?Cg(s):Yr(qd(n[r]),"bytes");e=Yr(bo([e,i]),"bytes")}return Sr(e)}function hne(t){return`[${t.slice(2)}]`}function fne(t){const e=new Uint8Array(32).fill(0);return t?F4(t)||Yr(qd(t)):Sr(e)}function yC(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(qd(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=qd(s[i]);o.byteLength>255&&(o=qd(hne(fne(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const pne=3;function lh(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof mC?t:t instanceof le?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof b0?new one({functionName:i}):[pne,oh.code].includes(c)&&(l||u||d||h)?new ZN({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof zP?u:h??d}):t;return new j4(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const eO=BigInt(0),JN=BigInt(1);function JE(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function Db(t){const e=t.toString(16);return e.length&1?"0"+e:e}function W4(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?eO:BigInt("0x"+t)}function wC(t){return W4(sw(t))}function z4(t){return ua(t),W4(sw(Uint8Array.from(t).reverse()))}function tO(t,e){return kP(t.toString(16).padStart(e*2,"0"))}function H4(t,e){return tO(t,e).reverse()}function so(t,e,n){let r;if(typeof e=="string")try{r=kP(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(OP(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const SS=t=>typeof t=="bigint"&&eO<=t;function gne(t,e,n){return SS(t)&&SS(e)&&SS(n)&&e<=t&&t<n}function mne(t,e,n,r){if(!gne(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function yne(t){let e;for(e=0;t>eO;t>>=JN,e+=1);return e}const bC=t=>(JN<<BigInt(t))-JN;function wne(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...f)=>n(o,i,...f),u=(f=r(0))=>{o=l(s(0),f),i=l(),f.length!==0&&(o=l(s(1),f),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=l();const g=i.slice();p.push(g),f+=i.length}return Ad(...p)};return(f,p)=>{c(),u(f);let g;for(;!(g=p(d()));)u();return c(),g}}function nO(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function r3(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const bne="0.1.1";function vne(){return bne}let or=class XN extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof XN){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof XN&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${vne()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return q4(this,e)}};function q4(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?q4(t.cause,e):e?null:t}const Ene="#__bigint";function _ne(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+Ene:s,n)}function Cne(t,e){if(i3(t)>e)throw new kne({givenSize:i3(t),maxSize:e})}const fc={zero:48,nine:57,A:65,F:70,a:97,f:102};function s3(t){if(t>=fc.zero&&t<=fc.nine)return t-fc.zero;if(t>=fc.A&&t<=fc.F)return t-(fc.A-10);if(t>=fc.a&&t<=fc.f)return t-(fc.a-10)}function Sne(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new Dne({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function rO(t,e){if(Eo(t)>e)throw new Bne({givenSize:Eo(t),maxSize:e})}function Ane(t,e){if(typeof e=="number"&&e>0&&e>Eo(t)-1)throw new Q4({offset:e,position:"start",size:Eo(t)})}function Ine(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Eo(t)!==n-e)throw new Q4({offset:n,position:"end",size:Eo(t)})}function G4(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new jne({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const Nne=new TextEncoder;function xne(t){return t instanceof Uint8Array?t:typeof t=="string"?Rne(t):Tne(t)}function Tne(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function Rne(t,e={}){const{size:n}=e;let r=t;n&&(rO(t,n),r=dh(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const l=s3(s.charCodeAt(c++)),u=s3(s.charCodeAt(c++));if(l===void 0||u===void 0)throw new or(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=l*16+u}return o}function Pne(t,e={}){const{size:n}=e,r=Nne.encode(t);return typeof n=="number"?(Cne(r,n),One(r,n)):r}function One(t,e){return Sne(t,{dir:"right",size:e})}function i3(t){return t.length}let kne=class extends or{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},Dne=class extends or{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const $ne=new TextEncoder,Mne=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Lne(t,e={}){const{strict:n=!1}=e;if(!t)throw new o3(t);if(typeof t!="string")throw new o3(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new a3(t);if(!t.startsWith("0x"))throw new a3(t)}function ec(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function V4(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(rO(n,e.size),uh(n,e.size)):n}function K4(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Mne[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(rO(r,e.size),dh(r,e.size)):r}function As(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new Y4({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?uh(c,r):c}function sO(t,e={}){return K4($ne.encode(t),e)}function uh(t,e){return G4(t,{dir:"left",size:e})}function dh(t,e){return G4(t,{dir:"right",size:e})}function iO(t,e,n,r={}){const{strict:s}=r;Ane(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&Ine(i,e,n),i}function Eo(t){return Math.ceil((t.length-2)/2)}function Une(t,e={}){const{strict:n=!1}=e;try{return Lne(t,{strict:n}),!0}catch{return!1}}let Y4=class extends or{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class o3 extends or{constructor(e){super(`Value \`${typeof e=="object"?_ne(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class a3 extends or{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let Bne=class extends or{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class Q4 extends or{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let jne=class extends or{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function Fne(t){return{address:t.address,amount:As(t.amount),index:As(t.index),validatorIndex:As(t.validatorIndex)}}function Z4(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:As(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:As(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:As(t.gasLimit)},...typeof t.number=="bigint"&&{number:As(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:As(t.prevRandao)},...typeof t.time=="bigint"&&{time:As(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(Fne)}}}const Wne="0x82ad56cb",J4="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",zne="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",Hne="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";function X4(t,{docsPath:e,...n}){const r=(()=>{const s=hC(t,n);return s instanceof _0?t:s})();return new B4(r,{docsPath:e,...n})}function oO(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const AS=new Map;function eF({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>AS.delete(e),a=()=>c().map(({args:u})=>u),c=()=>AS.get(e)||[],l=u=>AS.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=oO();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function x0(t,e){var G,F,T,N;const{account:n=t.account,authorizationList:r,batch:s=!!((G=t.batch)!=null&&G.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:E,to:_,value:C,stateOverride:I,...A}=e,x=n?tr(n):void 0;if(u&&(h||f))throw new le("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&_)throw new le("Cannot provide both `code` & `to` as parameters.");const S=u&&d,k=h&&f&&_&&d,O=S||k,U=S?Vne({code:u,data:d}):k?Kne({data:d,factory:h,factoryData:f,to:_}):d;try{Dh(e);const R=(typeof i=="bigint"?qe(i):void 0)||o,D=l?Z4(l):void 0,B=GP(I),H=(N=(T=(F=t.chain)==null?void 0:F.formatters)==null?void 0:T.transactionRequest)==null?void 0:N.format,ee=(H||Ag)({...fC(A,{format:H}),from:x==null?void 0:x.address,accessList:a,authorizationList:r,blobs:c,data:U,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:E,to:O?void 0:_,value:C});if(s&&qne({request:ee})&&!B&&!D)try{return await Gne(t,{...ee,blockNumber:i,blockTag:o})}catch(we){if(!(we instanceof r4)&&!(we instanceof kN))throw we}const ne=(()=>{const we=[ee,R];return B&&D?[...we,B,D]:B?[...we,B]:D?[...we,{},D]:we})(),ie=await t.request({method:"eth_call",params:ne});return ie==="0x"?{data:void 0}:{data:ie}}catch($){const R=Yne($),{offchainLookup:D,offchainLookupSignature:B}=await us(async()=>{const{offchainLookup:H,offchainLookupSignature:J}=await import("./ccip-4NfSaeYF.js");return{offchainLookup:H,offchainLookupSignature:J}},[]);if(t.ccipRead!==!1&&(R==null?void 0:R.slice(0,10))===B&&_)return{data:await D(t,{data:R,to:_})};throw O&&(R==null?void 0:R.slice(0,10))==="0x101bb98d"?new ane({factory:h}):X4($,{...e,account:x,chain:t.chain})}}function qne({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(Wne)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function Gne(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new r4;l=xg({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?qe(s):void 0)||i,{schedule:h}=eF({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(w){return w.reduce((b,{data:E})=>b+(E.length-2),0)>n*2},fn:async w=>{const y=w.map(_=>({allowFailure:!0,callData:_.data,target:_.to})),b=Co({abi:zN,args:[y],functionName:"aggregate3"}),E=await t.request({method:"eth_call",params:[{data:b,to:l},d]});return Mh({abi:zN,args:[y],functionName:"aggregate3",data:E||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new mC({data:f});return f==="0x"?{data:void 0}:{data:f}}function Vne(t){const{code:e,data:n}=t;return dC({abi:k4(["constructor(bytes, bytes)"]),bytecode:J4,args:[e,n]})}function Kne(t){const{data:e,factory:n,factoryData:r,to:s}=t;return dC({abi:k4(["constructor(address, bytes, address, bytes)"]),bytecode:zne,args:[s,e,n,r]})}function Yne(t){var n;if(!(t instanceof le))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function tc(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=Co({abi:n,args:s,functionName:i});try{const{data:c}=await tt(t,x0,"call")({...o,data:a,to:r});return Mh({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw lh(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function Qne(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return xg({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d=Co({abi:QD,functionName:"addr",...s!=null?{args:[Lv(i),BigInt(s)]}:{args:[Lv(i)]}}),h={address:l,abi:v4,functionName:"resolve",args:[wo(yC(i)),d,o??[XP]],blockNumber:n,blockTag:r},p=await tt(t,tc,"readContract")(h);if(p[0]==="0x")return null;const g=Mh({abi:QD,args:s!=null?[Lv(i),BigInt(s)]:void 0,functionName:"addr",data:p[0]});return g==="0x"||Ga(g)==="0x00"?null:g}catch(d){if(a)throw d;if(JP(d,"resolve"))return null;throw d}}class Zne extends le{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class um extends le{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class aO extends le{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class Jne extends le{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const Xne=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,ere=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,tre=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,nre=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function rre(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function c3(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function tF({uri:t,gatewayUrls:e}){const n=tre.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=c3(e==null?void 0:e.ipfs,"https://ipfs.io"),s=c3(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(Xne),{protocol:o,subpath:a,target:c,subtarget:l=""}=(i==null?void 0:i.groups)||{},u=o==="ipns:/"||a==="ipns/",d=o==="ipfs:/"||a==="ipfs/"||ere.test(t);if(t.startsWith("http")&&!u&&!d){let f=t;return e!=null&&e.arweave&&(f=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:f,isOnChain:!1,isEncoded:!1}}if((u||d)&&c)return{uri:`${r}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${s}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace(nre,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new aO({uri:t})}function nF(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new Zne({data:t});return t.image||t.image_url||t.image_data}async function sre({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await cO({gatewayUrls:t,uri:nF(n)})}catch{throw new aO({uri:e})}}async function cO({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=tF({uri:e,gatewayUrls:t});if(r||await rre(n))return n;throw new aO({uri:e})}function ire(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,o]=n.split(":"),[a,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new um({reason:"Only EIP-155 supported"});if(!o)throw new um({reason:"Chain ID not found"});if(!c)throw new um({reason:"Contract address not found"});if(!s)throw new um({reason:"Token ID not found"});if(!a)throw new um({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function ore(t,{nft:e}){if(e.namespace==="erc721")return tc(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return tc(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new Jne({namespace:e.namespace})}async function are(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?cre(t,{gatewayUrls:e,record:n}):cO({uri:n,gatewayUrls:e})}async function cre(t,{gatewayUrls:e,record:n}){const r=ire(n),s=await ore(t,{nft:r}),{uri:i,isOnChain:o,isEncoded:a}=tF({uri:s,gatewayUrls:e});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const l=a?atob(i.replace("data:application/json;base64,","")):i,u=JSON.parse(l);return cO({uri:nF(u),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),sre({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function rF(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return xg({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d={address:l,abi:v4,functionName:"resolve",args:[wo(yC(i)),Co({abi:YD,functionName:"text",args:[Lv(i),s]}),o??[XP]],blockNumber:n,blockTag:r},f=await tt(t,tc,"readContract")(d);if(f[0]==="0x")return null;const p=Mh({abi:YD,functionName:"text",data:f[0]});return p===""?null:p}catch(d){if(a)throw d;if(JP(d,"resolve"))return null;throw d}}async function lre(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const c=await tt(t,rF,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!c)return null;try{return await are(t,{record:c,gatewayUrls:r})}catch{return null}}async function sF(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=xg({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:nte,functionName:"reverse",args:[wo(yC(c))],blockNumber:n,blockTag:r},u=tt(t,tc,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(JP(l,"reverse"))return null;throw l}}async function ure(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return xg({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),a=i==null?void 0:i.ensTlds;if(a&&!a.some(l=>s.endsWith(l)))throw new Error(`${s} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await tt(t,tc,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[wo(yC(s))],blockNumber:n,blockTag:r});return c}async function iF(t,e){var w,y,b;const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f,...p}=e,g=n?tr(n):void 0;try{Dh(e);const _=(typeof r=="bigint"?qe(r):void 0)||s,C=(b=(y=(w=t.chain)==null?void 0:w.formatters)==null?void 0:y.transactionRequest)==null?void 0:b.format,A=(C||Ag)({...fC(p,{format:C}),from:g==null?void 0:g.address,blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f}),x=await t.request({method:"eth_createAccessList",params:[A,_]});return{accessList:x.accessList,gasUsed:BigInt(x.gasUsed)}}catch(E){throw X4(E,{...e,account:g,chain:t.chain})}}function vC(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function dre(t){const e=vC(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}class hre extends le{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const l3="/docs/contract/encodeEventTopics";function T0(t){var c;const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const l=$h({abi:e,name:n});if(!l)throw new DD(n,{docsPath:l3});s=l}if(s.type!=="event")throw new DD(void 0,{docsPath:l3});const i=la(s),o=gC(i);let a=[];if(r&&"inputs"in s){const l=(c=s.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?(l==null?void 0:l.map(d=>r[d.name]))??[]:[];u.length>0&&(a=(l==null?void 0:l.map((d,h)=>Array.isArray(u[h])?u[h].map((f,p)=>u3({param:d,value:u[h][p]})):typeof u[h]<"u"&&u[h]!==null?u3({param:d,value:u[h]}):null))??[])}return[o,...a]}function u3({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return Yr(Cg(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new hre(t.type);return Gu([t],[e])}async function oF(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:a,toBlock:c}=e,l=vC(t,{method:"eth_newFilter"}),u=i?T0({abi:r,args:s,eventName:i}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?qe(o):o,toBlock:typeof c=="bigint"?qe(c):c,topics:u}]});return{abi:r,args:s,eventName:i,id:d,request:l(d),strict:!!a,type:"event"}}async function aF(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:a}={}){const c=s??(r?[r]:void 0),l=vC(t,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap(f=>T0({abi:[f],eventName:f.name,args:n}))],r&&(u=u[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?qe(i):i,toBlock:typeof a=="bigint"?qe(a):a,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:l(d),strict:!!o,toBlock:a,type:"event"}}async function cF(t){const e=vC(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function fre(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...a}=e,c=Co({abi:n,args:s,functionName:i});try{return await tt(t,pC,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(l){const u=a.account?tr(a.account):void 0;throw lh(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:u==null?void 0:u.address})}}async function pre(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}const gre=new Map,mre=new Map;function yre(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,gre),r=e(t,mre);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function wre(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=yre(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const bre=t=>`blockNumber.${t}`;async function R0(t,{cacheTime:e=t.cacheTime}={}){const n=await wre(()=>t.request({method:"eth_blockNumber"}),{cacheKey:bre(t.uid),cacheTime:e});return BigInt(n)}async function vre(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?qe(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),ca(i)}async function d3(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?qe(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}function EC(t,e){if(!vo(t,{strict:!1}))throw new $u({address:t});if(!vo(e,{strict:!1}))throw new $u({address:e});return t.toLowerCase()===e.toLowerCase()}const h3="/docs/contract/decodeEventLog";function lO(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new lX({docsPath:h3});const c=e.find(g=>g.type==="event"&&o===gC(la(g)));if(!(c&&"name"in c)||c.type!=="event")throw new $j(o,{docsPath:h3});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,w)=>[g,w]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[w,y]=f[g],b=a[g];if(!b)throw new lC({abiItem:c,param:w});h[d?y:w.name||y]=Ere({param:w,value:b})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=I0(p,n);if(g)if(d)for(let w=0;w<u.length;w++)h[w]=h[w]??g.shift();else for(let w=0;w<p.length;w++)h[p[w].name]=g[w]}catch(g){if(i)throw g instanceof kj||g instanceof Xj?new nw({abiItem:c,data:n,params:p,size:er(n)}):g}else if(i)throw new nw({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function Ere({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(I0([t],e)||[])[0]}function uO(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===gC(u));if(!c)return null;const l=lO({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!_re({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof $j)return null;if(c instanceof nw||c instanceof lC){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function _re(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?EC(o,a):i.type==="string"||i.type==="bytes"?Yr(Cg(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function el(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function dO(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:a,strict:c}={}){const l=c??!1,u=o??(i?[i]:void 0);let d=[];u&&(d=[u.flatMap(g=>T0({abi:[g],eventName:g.name,args:o?void 0:a}))],i&&(d=d[0]));let h;n?h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:n}]}):h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof r=="bigint"?qe(r):r,toBlock:typeof s=="bigint"?qe(s):s}]});const f=h.map(p=>el(p));return u?uO({abi:u,args:a,logs:f,strict:l}):f}async function lF(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:a,toBlock:c,strict:l}=e,u=o?$h({abi:n,name:o}):void 0,d=u?void 0:n.filter(h=>h.type==="event");return tt(t,dO,"getLogs")({address:r,args:s,blockHash:i,event:u,events:d,fromBlock:a,toBlock:c,strict:l})}class Cre extends le{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function Sre(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,o,a,c,l,u,d]=await tt(t,tc,"readContract")({abi:Are,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:l,salt:u},extensions:d,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new Cre({address:n}):o}}const Are=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function Ire(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function Nre(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?qe(n):void 0,o=await t.request({method:"eth_feeHistory",params:[qe(e),i||r,s]},{dedupe:!!i});return Ire(o)}async function _C(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>el(i));return!("abi"in e)||!e.abi?s:uO({abi:e.abi,logs:s,strict:n})}async function xre(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>el(i));return e.abi?uO({abi:e.abi,logs:s,strict:n}):s}async function Tre(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?qe(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function CC(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?qe(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,qe(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,qe(i)]},{dedupe:!!a}),!c)throw new i4({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||u4)(c)}async function Rre(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([tt(t,R0,"getBlockNumber")({}),e?tt(t,CC,"getTransaction")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}const uF={"0x0":"reverted","0x1":"success"};function Pre(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>el(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?ca(t.transactionIndex):null,status:t.status?uF[t.status]:null,type:t.type?l4[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function ex(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new o4({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||Pre)(n)}async function dF(t,e){var y;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((y=t.batch)==null?void 0:y.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=xg({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let b=0;b<l.length;b++){const{abi:E,address:_,args:C,functionName:I}=l[b];try{const A=Co({abi:E,args:C,functionName:I});p+=(A.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(A.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:A,target:_}]}catch(A){const x=lh(A,{abi:E,address:_,args:C,docsPath:"/docs/contract/multicall",functionName:I,sender:n});if(!r)throw x;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:_}]}}const g=await Promise.allSettled(h.map(b=>tt(t,tc,"readContract")({abi:zN,account:n,address:d,args:[b],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),w=[];for(let b=0;b<g.length;b++){const E=g[b];if(E.status==="rejected"){if(!r)throw E.reason;for(let C=0;C<h[b].length;C++)w.push({status:"failure",error:E.reason,result:void 0});continue}const _=E.value;for(let C=0;C<_.length;C++){const{returnData:I,success:A}=_[C],{callData:x}=h[b][C],{abi:S,address:k,functionName:O,args:U}=l[w.length];try{if(x==="0x")throw new b0;if(!A)throw new mC({data:I});const G=Mh({abi:S,args:U,data:I,functionName:O});w.push(r?{result:G,status:"success"}:G)}catch(G){const F=lh(G,{abi:S,address:k,args:U,docsPath:"/docs/contract/multicall",functionName:O});if(!r)throw F;w.push({error:F,result:void 0,status:"failure"})}}}if(w.length!==l.length)throw new le("multicall results mismatch");return w}async function tx(t,e){const{blockNumber:n,blockTag:r="latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:a}=e;try{const c=[];for(const h of s){const f=h.blockOverrides?Z4(h.blockOverrides):void 0,p=h.calls.map(w=>{const y=w,b=y.account?tr(y.account):void 0,E=y.abi?Co(y):y.data,_={...y,data:y.dataSuffix?bo([E||"0x",y.dataSuffix]):E,from:y.from??(b==null?void 0:b.address)};return Dh(_),Ag(_)}),g=h.stateOverrides?GP(h.stateOverrides):void 0;c.push({blockOverrides:f,calls:p,stateOverrides:g})}const u=(typeof n=="bigint"?qe(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:o,validation:a},u]})).map((h,f)=>({...d4(h),calls:h.calls.map((p,g)=>{var k,O;const{abi:w,args:y,functionName:b,to:E}=s[f].calls[g],_=((k=p.error)==null?void 0:k.data)??p.returnData,C=BigInt(p.gasUsed),I=(O=p.logs)==null?void 0:O.map(U=>el(U)),A=p.status==="0x1"?"success":"failure",x=w&&A==="success"&&_!=="0x"?Mh({abi:w,data:_,functionName:b}):null,S=(()=>{var G;if(A==="success")return;let U;if(((G=p.error)==null?void 0:G.data)==="0x"?U=new b0:p.error&&(U=new mC(p.error)),!!U)return lh(U,{abi:w??[],address:E??"0x",args:y,functionName:b??"<unknown>"})})();return{data:_,gasUsed:C,logs:I,status:A,...A==="success"?{result:x}:{error:S}}})}))}catch(c){const l=c,u=hC(l,{});throw u instanceof _0?l:u}}function hF(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=MP(xne(t));return n==="Bytes"?r:K4(r)}let Ore=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const kre={checksum:new Ore(8192)},IS=kre.checksum,Dre=/^0x[a-fA-F0-9]{40}$/;function SC(t,e={}){const{strict:n=!0}=e;if(!Dre.test(t))throw new f3({address:t,cause:new Mre});if(n){if(t.toLowerCase()===t)return;if($re(t)!==t)throw new f3({address:t,cause:new Lre})}}function $re(t){if(IS.has(t))return IS.get(t);SC(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=hF(Pne(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return IS.set(t,s),s}function nx(t,e={}){const{strict:n=!0}=e??{};try{return SC(t,{strict:n}),!0}catch{return!1}}class f3 extends or{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class Mre extends or{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class Lre extends or{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function rx(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new or("Unable to normalize signature.");return s}function sx(t,e){const n=typeof t,r=e.type;switch(r){case"address":return nx(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>sx(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>sx(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function fF(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return fF(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?nx(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?nx(n[r],{strict:!1}):!1)return o}}function pF(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?e3(t):t;return{...r,...n?{hash:Zf(r)}:{}}}function Ure(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=Une(e,{strict:!1}),o=t.filter(l=>i?l.type==="function"||l.type==="error"?gF(l)===iO(e,0,4):l.type==="event"?Zf(l)===e:!1:"name"in l&&l.name===e);if(o.length===0)throw new ix({name:e});if(o.length===1)return{...o[0],...s?{hash:Zf(o[0])}:{}};let a;for(const l of o){if(!("inputs"in l))continue;if(!r||r.length===0){if(!l.inputs||l.inputs.length===0)return{...l,...s?{hash:Zf(l)}:{}};continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==r.length)continue;if(r.every((d,h)=>{const f="inputs"in l&&l.inputs[h];return f?sx(d,f):!1})){if(a&&"inputs"in a&&a.inputs){const d=fF(l.inputs,a.inputs,r);if(d)throw new jre({abiItem:l,type:d[0]},{abiItem:a,type:d[1]})}a=l}}const c=(()=>{if(a)return a;const[l,...u]=o;return{...l,overloads:u}})();if(!c)throw new ix({name:e});return{...c,...s?{hash:Zf(c)}:{}}}function gF(t){return iO(Zf(t),0,4)}function Bre(t){const e=typeof t=="string"?t:ZE(t);return rx(e)}function Zf(t){return typeof t!="string"&&"hash"in t&&t.hash?t.hash:hF(sO(Bre(t)))}class jre extends or{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${rx(ZE(e.abiItem))}\`, and`,`\`${n.type}\` in \`${rx(ZE(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class ix extends or{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const Fre=/^(.*)\[([0-9]*)\]$/,Wre=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,mF=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function zre({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(hO({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function hO({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=Zre(r.type);if(s){const[i,o]=s;return qre(n,{checksumAddress:t,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return Qre(n,{checksumAddress:t,parameter:r});if(r.type==="address")return Hre(n,{checksum:t});if(r.type==="bool")return Vre(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=mF.exec(r.type)??[];return Kre(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return Gre(n,{type:r.type});if(r.type==="string")return Yre(n);throw new vF(r.type)}function fO(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Eo(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(As(e+s,{size:32})),r.push(a),s+=Eo(a)):n.push(a)}return ec(...n,...r)}function Hre(t,e){const{checksum:n=!1}=e;return SC(t,{strict:n}),{dynamic:!1,encoded:uh(t.toLowerCase())}}function qre(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new Xre(t);if(!i&&t.length!==r)throw new Jre({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const l=hO({checksumAddress:n,parameter:s,value:t[c]});l.dynamic&&(o=!0),a.push(l)}if(i||o){const c=fO(a);if(i){const l=As(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?ec(l,c):l}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:ec(...a.map(({encoded:c})=>c))}}function Gre(t,{type:e}){const[,n]=e.split("bytes"),r=Eo(t);if(!n){let s=t;return r%32!==0&&(s=dh(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:ec(uh(As(r,{size:32})),s)}}if(r!==Number.parseInt(n))throw new wF({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:dh(t)}}function Vre(t){if(typeof t!="boolean")throw new or(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:uh(V4(t))}}function Kre(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new Y4({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:As(t,{size:32,signed:e})}}function Yre(t){const e=sO(t),n=Math.ceil(Eo(e)/32),r=[];for(let s=0;s<n;s++)r.push(dh(iO(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:ec(dh(As(Eo(e),{size:32})),...r)}}function Qre(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,l=hO({checksumAddress:n,parameter:a,value:t[c]});i.push(l),l.dynamic&&(s=!0)}return{dynamic:s,encoded:s?fO(i):ec(...i.map(({encoded:o})=>o))}}function Zre(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function yF(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new bF({expectedLength:t.length,givenLength:e.length});const s=zre({checksumAddress:r,parameters:t,values:e}),i=fO(s);return i.length===0?"0x":i}function ox(t,e){if(t.length!==e.length)throw new bF({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(ox.encode(s,i))}return ec(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return SC(c),uh(c.toLowerCase(),s?32:0)}if(n==="string")return sO(r);if(n==="bytes")return r;if(n==="bool")return uh(V4(r),s?32:1);const i=n.match(mF);if(i){const[c,l,u="256"]=i,d=Number.parseInt(u)/8;return As(r,{size:s?32:d,signed:l==="int"})}const o=n.match(Wre);if(o){const[c,l]=o;if(Number.parseInt(l)!==(r.length-2)/2)throw new wF({expectedSize:Number.parseInt(l),value:r});return dh(r,s?32:0)}const a=n.match(Fre);if(a&&Array.isArray(r)){const[c,l]=a,u=[];for(let d=0;d<r.length;d++)u.push(e(l,r[d],!0));return u.length===0?"0x":ec(...u)}throw new vF(n)}t.encode=e})(ox||(ox={}));class Jre extends or{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class wF extends or{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Eo(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class bF extends or{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class Xre extends or{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class vF extends or{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function ese(t,e){var s;const{bytecode:n,args:r}=e;return ec(n,(s=t.inputs)!=null&&s.length&&(r!=null&&r.length)?yF(t.inputs,r):"0x")}function tse(t){return pF(t)}function nse(t,...e){const{overloads:n}=t,r=n?rse([t,...n],t.name,{args:e[0]}):t,s=sse(r),i=e.length>0?yF(r.inputs,e[0]):void 0;return i?ec(s,i):s}function rf(t,e={}){return pF(t,e)}function rse(t,e,n){const r=Ure(t,e,n);if(r.type!=="function")throw new ix({name:e,type:"function"});return r}function sse(t){return gF(t)}const ise="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",wa="0x0000000000000000000000000000000000000000",$b=new uC(8192);function ose(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if($b.get(n))return $b.get(n);const r=t().finally(()=>$b.delete(n));return $b.set(n,r),r}async function XE(t){return new Promise(e=>setTimeout(e,t))}function e_(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await XE(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function ase(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new Nd(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new Nd(new Error("method not supported"),{method:l});const u=s?Wp(`${c}.${_r(n)}`):void 0;return ose(()=>e_(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case iw.code:throw new iw(f);case ow.code:throw new ow(f);case aw.code:throw new aw(f,{method:n.method});case cw.code:throw new cw(f);case oh.code:throw new oh(f);case ah.code:throw new ah(f);case lw.code:throw new lw(f);case vu.code:throw new vu(f);case Vp.code:throw new Vp(f);case Nd.code:throw new Nd(f,{method:n.method});case Kp.code:throw new Kp(f);case uw.code:throw new uw(f);case gr.code:throw new gr(f);case dw.code:throw new dw(f);case hw.code:throw new hw(f);case fw.code:throw new fw(f);case pw.code:throw new pw(f);case Xa.code:throw new Xa(f);case Yp.code:throw new Yp(f);case gw.code:throw new gw(f);case mw.code:throw new mw(f);case yw.code:throw new yw(f);case ww.code:throw new ww(f);case bw.code:throw new bw(f);case Qp.code:throw new Qp(f);case 5e3:throw new gr(f);default:throw h instanceof le?h:new Aee(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof uy){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>cse(h)}),{enabled:s,id:u})}}function cse(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Kp.code||t.code===oh.code:t instanceof uy&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function lse(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function EF(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function use(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const p3=use();function dse(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await EF(async({signal:p})=>{const g={...a,body:Array.isArray(r)?_r(r.map(E=>({jsonrpc:"2.0",id:E.id??p3.take(),...E}))):_r({jsonrpc:"2.0",id:r.id??p3.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},w=new Request(t,g),y=await(s==null?void 0:s(w,g))??{...g,url:t};return await fetch(y.url??t,y)},{errorInstance:new zD({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new uy({body:r,details:_r(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof uy||h instanceof zD?h:new uy({body:r,cause:h,url:t})}}}}class hse extends le{constructor({domain:e}){super(`Invalid domain "${_r(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class fse extends le{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class pse extends le{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function gse(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:NF({domain:e}),...t.types};IF({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(mse({domain:e,types:s})),r!=="EIP712Domain"&&i.push(_F({data:n,primaryType:r,types:s})),Yr(bo(i))}function mse({domain:t,types:e}){return _F({data:t,primaryType:"EIP712Domain",types:e})}function _F({data:t,primaryType:e,types:n}){const r=CF({data:t,primaryType:e,types:n});return Yr(r)}function CF({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[yse({primaryType:e,types:n})];for(const i of n[e]){const[o,a]=AF({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(o),s.push(a)}return Gu(r,s)}function yse({primaryType:t,types:e}){const n=wo(wse({primaryType:t,types:e}));return Yr(n)}function wse({primaryType:t,types:e}){let n="";const r=SF({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function SF({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])SF({primaryType:i.type,types:e},n);return n}function AF({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},Yr(CF({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},Yr(r)];if(n==="string")return[{type:"bytes32"},Yr(wo(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(o=>AF({name:e,type:s,types:t,value:o}));return[{type:"bytes32"},Yr(Gu(i.map(([o])=>o),i.map(([,o])=>o)))]}return[{type:n},r]}function bse(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return _r({domain:o,message:a,primaryType:r,types:s})}function IF(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(Zj);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,w,y]=h;qe(d,{signed:w==="int",size:Number.parseInt(y)/8})}if(u==="address"&&typeof d=="string"&&!vo(d))throw new $u({address:d});const f=u.match(YX);if(f){const[g,w]=f;if(w&&er(d)!==Number.parseInt(w))throw new hX({expectedSize:Number.parseInt(w),givenSize:er(d)})}const p=s[u];p&&(vse(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new hse({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new fse({primaryType:r,types:s})}function NF({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function vse(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new pse({type:t})}const Ese=`Ethereum Signed Message:
`;function _se(t){const e=typeof t=="string"?Wp(t):typeof t.raw=="string"?t.raw:Sr(t.raw),n=Wp(`${Ese}${er(e)}`);return bo([n,e])}function xF(t,e){return Yr(_se(t),e)}const TF="0x6492649264926492649264926492649264926492649264926492649264926492";function Cse(t){return KE(t,-32)===TF}function Sse(t){const{address:e,data:n,signature:r,to:s="hex"}=t,i=Sg([Gu([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),TF]);return s==="hex"?i:yo(i)}class Ase extends le{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function Ise(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new Ase({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const Nse="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function xse(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:a,validation:c}=e,l=e.account?tr(e.account):void 0;if(o&&!l)throw new le("`account` is required when `traceAssetChanges` is true");const u=l?ese(tse("constructor(bytes, bytes)"),{bytecode:J4,args:[Nse,nse(rf("function getBalance(address)"),[l.address])]}):void 0,d=o?await Promise.all(e.calls.map(async R=>{if(!R.data&&!R.abi)return;const{accessList:D}=await iF(t,{account:l.address,...R,data:R.abi?Co(R):R.data});return D.map(({address:B,storageKeys:H})=>H.length>0?B:null)})).then(R=>R.flat().filter(Boolean)):[],h=await tx(t,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:u}],stateOverrides:i},{calls:d.map((R,D)=>({abi:[rf("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:R,from:wa,nonce:D})),stateOverrides:[{address:wa,nonce:0}]}]:[],{calls:[...s,{}].map(R=>({...R,from:l==null?void 0:l.address})),stateOverrides:i},...o?[{calls:[{data:u}]},{calls:d.map((R,D)=>({abi:[rf("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:R,from:wa,nonce:D})),stateOverrides:[{address:wa,nonce:0}]},{calls:d.map((R,D)=>({to:R,abi:[rf("function decimals() returns (uint256)")],functionName:"decimals",from:wa,nonce:D})),stateOverrides:[{address:wa,nonce:0}]},{calls:d.map((R,D)=>({to:R,abi:[rf("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:wa,nonce:D})),stateOverrides:[{address:wa,nonce:0}]},{calls:d.map((R,D)=>({to:R,abi:[rf("function symbol() returns (string)")],functionName:"symbol",from:wa,nonce:D})),stateOverrides:[{address:wa,nonce:0}]}]:[]],traceTransfers:a,validation:c}),f=o?h[2]:h[0],[p,g,,w,y,b,E,_]=o?h:[],{calls:C,...I}=f,A=C.slice(0,-1)??[],x=(p==null?void 0:p.calls)??[],S=(g==null?void 0:g.calls)??[],k=[...x,...S].map(R=>R.status==="success"?Ui(R.data):null),O=(w==null?void 0:w.calls)??[],U=(y==null?void 0:y.calls)??[],G=[...O,...U].map(R=>R.status==="success"?Ui(R.data):null),F=((b==null?void 0:b.calls)??[]).map(R=>R.status==="success"?R.result:null),T=((_==null?void 0:_.calls)??[]).map(R=>R.status==="success"?R.result:null),N=((E==null?void 0:E.calls)??[]).map(R=>R.status==="success"?R.result:null),$=[];for(const[R,D]of G.entries()){const B=k[R];if(typeof D!="bigint"||typeof B!="bigint")continue;const H=F[R-1],J=T[R-1],ee=N[R-1],ne=R===0?{address:ise,decimals:18,symbol:"ETH"}:{address:d[R-1],decimals:ee||H?Number(H??1):void 0,symbol:J??void 0};$.some(ie=>ie.token.address===ne.address)||$.push({token:ne,value:{pre:B,post:D,diff:D-B}})}return{assetChanges:$,block:I,results:A}}const NS=new Map,g3=new Map;let Tse=0;function tl(t,e,n){const r=++Tse,s=()=>NS.get(t)||[],i=()=>{const u=s();NS.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=g3.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(NS.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&g3.set(t,l),o}function Tg(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await XE(c);const l=async()=>{s&&(await t({unpoll:i}),await XE(r),l())};l()})(),i}function Rse(t,{blockTag:e="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:a,pollingInterval:c=t.pollingInterval}){const l=typeof a<"u"?a:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),u=o??!1;let d;return l?(()=>{const p=_r(["watchBlocks",t.uid,e,n,r,u,c]);return tl(p,{onBlock:s,onError:i},g=>Tg(async()=>{var w;try{const y=await tt(t,za,"getBlock")({blockTag:e,includeTransactions:u});if(y.number!==null&&(d==null?void 0:d.number)!=null){if(y.number===d.number)return;if(y.number-d.number>1&&n)for(let b=(d==null?void 0:d.number)+1n;b<y.number;b++){const E=await tt(t,za,"getBlock")({blockNumber:b,includeTransactions:u});g.onBlock(E,d),d=E}}((d==null?void 0:d.number)==null||e==="pending"&&(y==null?void 0:y.number)==null||y.number!==null&&y.number>d.number)&&(g.onBlock(y,d),d=y)}catch(y){(w=g.onError)==null||w.call(g,y)}},{emitOnBegin:r,interval:c}))})():(()=>{let p=!0,g=!0,w=()=>p=!1;return(async()=>{try{r&&tt(t,za,"getBlock")({blockTag:e,includeTransactions:u}).then(E=>{p&&g&&(s(E,void 0),g=!1)}).catch(i);const y=(()=>{if(t.transport.type==="fallback"){const E=t.transport.transports.find(_=>_.config.type==="webSocket"||_.config.type==="ipc");return E?E.value:t.transport}return t.transport})(),{unsubscribe:b}=await y.subscribe({params:["newHeads"],async onData(E){var C;if(!p)return;const _=await tt(t,za,"getBlock")({blockNumber:(C=E.result)==null?void 0:C.number,includeTransactions:u}).catch(()=>{});p&&(s(_,d),g=!1,d=_)},onError(E){i==null||i(E)}});w=b,p||w()}catch(y){i==null||i(y)}})(),()=>w()})()}function RF(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=_r(["watchBlockNumber",t.uid,e,n,o]);return tl(d,{onBlockNumber:r,onError:s},h=>Tg(async()=>{var f;try{const p=await tt(t,R0,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=_r(["watchBlockNumber",t.uid,e,n]);return tl(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const y=t.transport.transports.find(b=>b.config.type==="webSocket"||b.config.type==="ipc");return y?y.value:t.transport}return t.transport})(),{unsubscribe:w}=await g.subscribe({params:["newHeads"],onData(y){var E;if(!f)return;const b=Ui((E=y.result)==null?void 0:E.number);h.onBlockNumber(b,c),c=b},onError(y){var b;(b=h.onError)==null||b.call(h,y)}});p=w,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function AC(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function Pse(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:a,onLogs:c,poll:l,pollingInterval:u=t.pollingInterval,strict:d}){const h=typeof l<"u"?l:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),f=d??!1;return h?(()=>{const w=_r(["watchEvent",e,n,r,t.uid,s,u,o]);return tl(w,{onLogs:c,onError:a},y=>{let b;o!==void 0&&(b=o-1n);let E,_=!1;const C=Tg(async()=>{var I;if(!_){try{E=await tt(t,aF,"createEventFilter")({address:e,args:n,event:s,events:i,strict:f,fromBlock:o})}catch{}_=!0;return}try{let A;if(E)A=await tt(t,_C,"getFilterChanges")({filter:E});else{const x=await tt(t,R0,"getBlockNumber")({});b&&b!==x?A=await tt(t,dO,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:b+1n,toBlock:x}):A=[],b=x}if(A.length===0)return;if(r)y.onLogs(A);else for(const x of A)y.onLogs([x])}catch(A){E&&A instanceof ah&&(_=!1),(I=y.onError)==null||I.call(y,A)}},{emitOnBegin:!0,interval:u});return async()=>{E&&await tt(t,AC,"uninstallFilter")({filter:E}),C()}})})():(()=>{let w=!0,y=()=>w=!1;return(async()=>{try{const b=(()=>{if(t.transport.type==="fallback"){const I=t.transport.transports.find(A=>A.config.type==="webSocket"||A.config.type==="ipc");return I?I.value:t.transport}return t.transport})(),E=i??(s?[s]:void 0);let _=[];E&&(_=[E.flatMap(A=>T0({abi:[A],eventName:A.name,args:n}))],s&&(_=_[0]));const{unsubscribe:C}=await b.subscribe({params:["logs",{address:e,topics:_}],onData(I){var x;if(!w)return;const A=I.result;try{const{eventName:S,args:k}=lO({abi:E??[],data:A.data,topics:A.topics,strict:f}),O=el(A,{args:k,eventName:S});c([O])}catch(S){let k,O;if(S instanceof nw||S instanceof lC){if(d)return;k=S.abiItem.name,O=(x=S.abiItem.inputs)==null?void 0:x.some(G=>!("name"in G&&G.name))}const U=el(A,{args:O?[]:{},eventName:k});c([U])}},onError(I){a==null||a(I)}});y=C,w||y()}catch(b){a==null||a(b)}})(),()=>y()})()}function PF(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=_r(["watchPendingTransactions",t.uid,e,i]);return tl(l,{onTransactions:r,onError:n},u=>{let d;const h=Tg(async()=>{var f;try{if(!d)try{d=await tt(t,cF,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await tt(t,_C,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await tt(t,AC,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function Ose(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>E0(r))}async function kse(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function Dse(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?tr(n):void 0,i=r?[s==null?void 0:s.address,[qe(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}const OF="0x5792579257925792579257925792579257925792579257925792579257925792",kF=qe(0,{size:32});async function $se(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?tr(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?Co({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?bo([p,f.dataSuffix]):p,to:f.to,value:f.value?qe(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:qe(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(b=>!b.optional)){const b="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new Yp(new le(b,{details:b}))}if(a&&d.length>1){const y="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new Qp(new le(y,{details:y}))}const p=[];for(const y of d){const b=A0(t,{account:u,chain:s,data:y.data,to:y.to,value:y.value?Ui(y.value):void 0});p.push(b),o>0&&await new Promise(E=>setTimeout(E,o))}const g=await Promise.allSettled(p);if(g.every(y=>y.status==="rejected"))throw g[0].reason;const w=g.map(y=>y.status==="fulfilled"?y.value:kF);return{id:bo([...w,qe(s.id,{size:32}),OF])}}throw a4(h,{...e,account:u,chain:e.chain})}}async function DF(t,e){async function n(u){if(u.endsWith(OF.slice(2))){const h=Ga(KE(u,-64,-32)),f=KE(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(w=>kF.slice(2)!==w?t.request({method:"eth_getTransactionReceipt",params:[`0x${w}`]},{dedupe:!0}):void 0)),g=p.some(w=>w===null)?100:p.every(w=>(w==null?void 0:w.status)==="0x1")?200:p.every(w=>(w==null?void 0:w.status)==="0x0")?500:600;return{atomic:!1,chainId:ca(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?ca(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:Ui(u.blockNumber),gasUsed:Ui(u.gasUsed),status:uF[u.status]})))??[],statusCode:l,status:c,version:o}}async function Mse(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function Lse(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=_r(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=oO();let u;const d=tl(o,{resolve:c,reject:l},h=>{const f=Tg(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await DF(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new Use({id:n}))},i):void 0,await a}class Use extends le{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}function Bse(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function jse(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?ca(t.nonce):void 0,storageProof:t.storageProof?Bse(t.storageProof):void 0}}async function Fse(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?qe(n):void 0,a=await t.request({method:"eth_getProof",params:[e,s,o||i]});return jse(a)}async function $F(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=_r(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:w,reject:y}=oO(),b=a?setTimeout(()=>{p(),f(),y(new _ee({hash:n}))},a):void 0;return f=tl(c,{onReplaced:r,resolve:w,reject:y},E=>{p=tt(t,RF,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(_){const C=A=>{clearTimeout(b),p(),A(),f()};let I=_;if(!h)try{if(d){if(e>1&&(!d.blockNumber||I-d.blockNumber+1n<e))return;C(()=>E.resolve(d));return}if(l||(h=!0,await e_(async()=>{l=await tt(t,CC,"getTransaction")({hash:n}),l.blockNumber&&(I=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await tt(t,ex,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||I-d.blockNumber+1n<e))return;C(()=>E.resolve(d))}catch(A){if(A instanceof i4||A instanceof o4){if(!l){h=!1;return}try{u=l,h=!0;const x=await e_(()=>tt(t,za,"getBlock")({blockNumber:I,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:O})=>O instanceof c4});h=!1;const S=x.transactions.find(({from:O,nonce:U})=>O===u.from&&U===u.nonce);if(!S||(d=await tt(t,ex,"getTransactionReceipt")({hash:S.hash}),e>1&&(!d.blockNumber||I-d.blockNumber+1n<e)))return;let k="replaced";S.to===u.to&&S.value===u.value&&S.input===u.input?k="repriced":S.from===S.to&&S.value===0n&&(k="cancelled"),C(()=>{var O;(O=E.onReplaced)==null||O.call(E,{reason:k,replacedTransaction:u,transaction:S,transactionReceipt:d}),E.resolve(d)})}catch(x){C(()=>E.reject(x))}}else C(()=>E.reject(A))}}})}),g}async function Wse(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Uc(n))}async function zse(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function MF(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new Oh({docsPath:"/docs/eip7702/prepareAuthorization"});const i=tr(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:tr(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await tt(t,Ig,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await tt(t,KP,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&EC(o.address,i.address))&&(a.nonce+=1)),a}async function Hse(t,e){const{account:n=t.account}=e;if(!n)throw new Oh({docsPath:"/docs/eip7702/signAuthorization"});const r=tr(n);if(!r.signAuthorization)throw new Mv({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await MF(t,e);return r.signAuthorization(s)}async function qse(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new Oh({docsPath:"/docs/actions/wallet/signTransaction"});const i=tr(n);Dh({account:i,...e});const o=await tt(t,Ig,"getChainId")({});r!==null&&s4({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||Ag;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:qe(o),from:i.address}]},{retryCount:0})}async function LF(t,{account:e=t.account,message:n}){if(!e)throw new Oh({docsPath:"/docs/actions/wallet/signMessage"});const r=tr(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?Wp(n):n.raw instanceof Uint8Array?wo(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function Gse(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new Oh({docsPath:"/docs/actions/wallet/signTypedData"});const o=tr(n),a={EIP712Domain:NF({domain:r}),...e.types};if(IF({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=bse({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function Vse(t,e){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...a}=e,c=a.account?tr(a.account):t.account,l=Co({abi:n,args:s,functionName:o});try{const{data:u}=await tt(t,x0,"call")({batch:!1,data:`${l}${i?i.replace("0x",""):""}`,to:r,...a,account:c}),d=Mh({abi:n,args:s,functionName:o,data:u||"0x"}),h=n.filter(f=>"name"in f&&f.name===e.functionName);return{result:d,request:{abi:h,address:r,args:s,dataSuffix:i,functionName:o,...a,account:c}}}catch(u){throw lh(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}async function Kse(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:qe(e)}]},{retryCount:0})}class UF extends DP{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,CX(e);const r=v0(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),qp(i)}update(e){return Hp(this),this.iHash.update(e),this}digestInto(e){Hp(this),ua(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const BF=(t,e,n)=>new UF(t,e).update(n).digest();BF.create=(t,e)=>new UF(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ii=BigInt(0),Rs=BigInt(1),xd=BigInt(2),Yse=BigInt(3),jF=BigInt(4),FF=BigInt(5),WF=BigInt(8);function ao(t,e){const n=t%e;return n>=ii?n:e+n}function Ki(t,e,n){let r=t;for(;e-- >ii;)r*=r,r%=n;return r}function m3(t,e){if(t===ii)throw new Error("invert: expected non-zero number");if(e<=ii)throw new Error("invert: expected positive modulus, got "+e);let n=ao(t,e),r=e,s=ii,i=Rs;for(;n!==ii;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Rs)throw new Error("invert: does not exist");return ao(s,e)}function zF(t,e){const n=(t.ORDER+Rs)/jF,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function Qse(t,e){const n=(t.ORDER-FF)/WF,r=t.mul(e,xd),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,xd),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function Zse(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Rs,n=0;for(;e%xd===ii;)e/=xd,n++;let r=xd;const s=IC(t);for(;y3(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return zF;let i=s.pow(r,e);const o=(e+Rs)/xd;return function(c,l){if(c.is0(l))return l;if(y3(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),h=c.pow(l,e),f=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,g=c.sqr(h);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===u)throw new Error("Cannot find square root");const w=Rs<<BigInt(u-p-1),y=c.pow(d,w);u=p,d=c.sqr(y),h=c.mul(h,d),f=c.mul(f,y)}return f}}function Jse(t){return t%jF===Yse?zF:t%WF===FF?Qse:Zse(t)}const Xse=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function eie(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Xse.reduce((r,s)=>(r[s]="function",r),e);return nO(t,n),t}function tie(t,e,n){if(n<ii)throw new Error("invalid exponent, negatives unsupported");if(n===ii)return t.ONE;if(n===Rs)return e;let r=t.ONE,s=e;for(;n>ii;)n&Rs&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Rs;return r}function HF(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function y3(t,e){const n=(t.ORDER-Rs)/xd,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function nie(t,e){e!==void 0&&rw(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function IC(t,e,n=!1,r={}){if(t<=ii)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=nie(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:bC(o),ZERO:ii,ONE:Rs,create:u=>ao(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return ii<=u&&u<t},is0:u=>u===ii,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&Rs)===Rs,neg:u=>ao(-u,t),eql:(u,d)=>u===d,sqr:u=>ao(u*u,t),add:(u,d)=>ao(u+d,t),sub:(u,d)=>ao(u-d,t),mul:(u,d)=>ao(u*d,t),pow:(u,d)=>tie(l,u,d),div:(u,d)=>ao(u*m3(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>m3(u,t),sqrt:i||(u=>(c||(c=Jse(t)),c(l,u))),toBytes:u=>n?H4(u,a):tO(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?z4(u):wC(u)},invertBatch:u=>HF(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function qF(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function GF(t){const e=qF(t);return e+Math.ceil(e/2)}function rie(t,e,n=!1){const r=t.length,s=qF(e),i=GF(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?z4(t):wC(t),a=ao(o,e-Rs)+Rs;return n?H4(a,s):tO(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Zp=BigInt(0),Td=BigInt(1);function dy(t,e){const n=e.negate();return t?n:e}function sie(t,e,n){const r=o=>o.pz,s=HF(t.Fp,n.map(r));return n.map((o,a)=>o.toAffine(s[a])).map(t.fromAffine)}function VF(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function xS(t,e){VF(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=bC(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function w3(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Td);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function iie(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function oie(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const TS=new WeakMap,KF=new WeakMap;function RS(t){return KF.get(t)||1}function b3(t){if(t!==Zp)throw new Error("invalid wNAF")}function aie(t,e){return{constTimeNegate:dy,hasPrecomputes(n){return RS(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Zp;)r&Td&&(s=s.add(i)),i=i.double(),r>>=Td;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=xS(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=xS(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=w3(s,c,a);s=l,d?o=o.add(dy(f,r[p])):i=i.add(dy(h,r[u]))}return b3(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=xS(n,e);for(let a=0;a<o.windows&&s!==Zp;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=w3(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return b3(s),i},getPrecomputes(n,r,s){let i=TS.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),TS.set(r,i))),i},wNAFCached(n,r,s){const i=RS(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=RS(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){VF(r,e),KF.set(n,r),TS.delete(n)}}}function cie(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>Zp||r>Zp;)n&Td&&(i=i.add(s)),r&Td&&(o=o.add(s)),s=s.double(),n>>=Td,r>>=Td;return{p1:i,p2:o}}function lie(t,e,n,r){iie(n,t),oie(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=yne(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=bC(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const w=r[g],y=Number(w>>BigInt(f)&l);u[y]=u[y].add(n[g])}let p=o;for(let g=u.length-1,w=o;g>0;g--)w=w.add(u[g]),p=p.add(w);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function v3(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return eie(e),e}else return IC(t)}function uie(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>Zp))throw new Error(`CURVE.${a} must be positive bigint`)}const r=v3(e.p,n.Fp),s=v3(e.n,n.Fn),o=["Gx","Gy","a","b"];for(const a of o)if(!r.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function E3(t){t.lowS!==void 0&&JE("lowS",t.lowS),t.prehash!==void 0&&JE("prehash",t.prehash)}class die extends Error{constructor(e=""){super(e)}}const Tc={Err:die,_tlv:{encode:(t,e)=>{const{Err:n}=Tc;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Db(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Db(s.length/2|128):"";return Db(t)+i+s+e},decode(t,e){const{Err:n}=Tc;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Tc;if(t<hy)throw new e("integer: negative integers are not allowed");let n=Db(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Tc;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return wC(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Tc,s=so("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Tc,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},hy=BigInt(0),fy=BigInt(1),hie=BigInt(2),Mb=BigInt(3),fie=BigInt(4);function pie(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function YF(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=so("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function gie(t,e={}){const{Fp:n,Fn:r}=uie("weierstrass",t,e),{h:s,n:i}=t;nO(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(x,S,k){const{x:O,y:U}=S.toAffine(),G=n.toBytes(O);if(JE("isCompressed",k),k){a();const F=!n.isOdd(U);return Ad(QF(F),G)}else return Ad(Uint8Array.of(4),G,n.toBytes(U))}function l(x){ua(x);const S=n.BYTES,k=S+1,O=2*S+1,U=x.length,G=x[0],F=x.subarray(1);if(U===k&&(G===2||G===3)){const T=n.fromBytes(F);if(!n.isValid(T))throw new Error("bad point: is not on curve, wrong x");const N=h(T);let $;try{$=n.sqrt(N)}catch(B){const H=B instanceof Error?": "+B.message:"";throw new Error("bad point: is not on curve, sqrt error"+H)}a();const R=n.isOdd($);return(G&1)===1!==R&&($=n.neg($)),{x:T,y:$}}else if(U===O&&G===4){const T=n.fromBytes(F.subarray(S*0,S*1)),N=n.fromBytes(F.subarray(S*1,S*2));if(!f(T,N))throw new Error("bad point: is not on curve");return{x:T,y:N}}else throw new Error(`bad point: got length ${U}, expected compressed=${k} or uncompressed=${O}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=pie(n,t.a,t.b);function f(x,S){const k=n.sqr(S),O=h(x);return n.eql(k,O)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,Mb),fie),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function w(x,S,k=!1){if(!n.isValid(S)||k&&n.is0(S))throw new Error(`bad point coordinate ${x}`);return S}function y(x){if(!(x instanceof C))throw new Error("ProjectivePoint expected")}const b=r3((x,S)=>{const{px:k,py:O,pz:U}=x;if(n.eql(U,n.ONE))return{x:k,y:O};const G=x.is0();S==null&&(S=G?n.ONE:n.inv(U));const F=n.mul(k,S),T=n.mul(O,S),N=n.mul(U,S);if(G)return{x:n.ZERO,y:n.ZERO};if(!n.eql(N,n.ONE))throw new Error("invZ was invalid");return{x:F,y:T}}),E=r3(x=>{if(x.is0()){if(e.allowInfinityPoint&&!n.is0(x.py))return;throw new Error("bad point: ZERO")}const{x:S,y:k}=x.toAffine();if(!n.isValid(S)||!n.isValid(k))throw new Error("bad point: x or y not field elements");if(!f(S,k))throw new Error("bad point: equation left != right");if(!x.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function _(x,S,k,O,U){return k=new C(n.mul(k.px,x),k.py,k.pz),S=dy(O,S),k=dy(U,k),S.add(k)}class C{constructor(S,k,O){this.px=w("x",S),this.py=w("y",k,!0),this.pz=w("z",O),Object.freeze(this)}static fromAffine(S){const{x:k,y:O}=S||{};if(!S||!n.isValid(k)||!n.isValid(O))throw new Error("invalid affine point");if(S instanceof C)throw new Error("projective point not allowed");return n.is0(k)&&n.is0(O)?C.ZERO:new C(k,O,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){return sie(C,"pz",S)}static fromBytes(S){return ua(S),C.fromHex(S)}static fromHex(S){const k=C.fromAffine(d(so("pointHex",S)));return k.assertValidity(),k}static fromPrivateKey(S){const k=YF(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return C.BASE.multiply(k(S))}static msm(S,k){return lie(C,r,S,k)}precompute(S=8,k=!0){return A.setWindowSize(this,S),k||this.multiply(Mb),this}_setWindowSize(S){this.precompute(S)}assertValidity(){E(this)}hasEvenY(){const{y:S}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(S)}equals(S){y(S);const{px:k,py:O,pz:U}=this,{px:G,py:F,pz:T}=S,N=n.eql(n.mul(k,T),n.mul(G,U)),$=n.eql(n.mul(O,T),n.mul(F,U));return N&&$}negate(){return new C(this.px,n.neg(this.py),this.pz)}double(){const{a:S,b:k}=t,O=n.mul(k,Mb),{px:U,py:G,pz:F}=this;let T=n.ZERO,N=n.ZERO,$=n.ZERO,R=n.mul(U,U),D=n.mul(G,G),B=n.mul(F,F),H=n.mul(U,G);return H=n.add(H,H),$=n.mul(U,F),$=n.add($,$),T=n.mul(S,$),N=n.mul(O,B),N=n.add(T,N),T=n.sub(D,N),N=n.add(D,N),N=n.mul(T,N),T=n.mul(H,T),$=n.mul(O,$),B=n.mul(S,B),H=n.sub(R,B),H=n.mul(S,H),H=n.add(H,$),$=n.add(R,R),R=n.add($,R),R=n.add(R,B),R=n.mul(R,H),N=n.add(N,R),B=n.mul(G,F),B=n.add(B,B),R=n.mul(B,H),T=n.sub(T,R),$=n.mul(B,D),$=n.add($,$),$=n.add($,$),new C(T,N,$)}add(S){y(S);const{px:k,py:O,pz:U}=this,{px:G,py:F,pz:T}=S;let N=n.ZERO,$=n.ZERO,R=n.ZERO;const D=t.a,B=n.mul(t.b,Mb);let H=n.mul(k,G),J=n.mul(O,F),ee=n.mul(U,T),ne=n.add(k,O),ie=n.add(G,F);ne=n.mul(ne,ie),ie=n.add(H,J),ne=n.sub(ne,ie),ie=n.add(k,U);let we=n.add(G,T);return ie=n.mul(ie,we),we=n.add(H,ee),ie=n.sub(ie,we),we=n.add(O,U),N=n.add(F,T),we=n.mul(we,N),N=n.add(J,ee),we=n.sub(we,N),R=n.mul(D,ie),N=n.mul(B,ee),R=n.add(N,R),N=n.sub(J,R),R=n.add(J,R),$=n.mul(N,R),J=n.add(H,H),J=n.add(J,H),ee=n.mul(D,ee),ie=n.mul(B,ie),J=n.add(J,ee),ee=n.sub(H,ee),ee=n.mul(D,ee),ie=n.add(ie,ee),H=n.mul(J,ie),$=n.add($,H),H=n.mul(we,ie),N=n.mul(ne,N),N=n.sub(N,H),H=n.mul(ne,J),R=n.mul(we,R),R=n.add(R,H),new C(N,$,R)}subtract(S){return this.add(S.negate())}is0(){return this.equals(C.ZERO)}multiply(S){const{endo:k}=e;if(!r.isValidNot0(S))throw new Error("invalid scalar: out of range");let O,U;const G=F=>A.wNAFCached(this,F,C.normalizeZ);if(k){const{k1neg:F,k1:T,k2neg:N,k2:$}=k.splitScalar(S),{p:R,f:D}=G(T),{p:B,f:H}=G($);U=D.add(H),O=_(k.beta,R,B,F,N)}else{const{p:F,f:T}=G(S);O=F,U=T}return C.normalizeZ([O,U])[0]}multiplyUnsafe(S){const{endo:k}=e,O=this;if(!r.isValid(S))throw new Error("invalid scalar: out of range");if(S===hy||O.is0())return C.ZERO;if(S===fy)return O;if(A.hasPrecomputes(this))return this.multiply(S);if(k){const{k1neg:U,k1:G,k2neg:F,k2:T}=k.splitScalar(S),{p1:N,p2:$}=cie(C,O,G,T);return _(k.beta,N,$,U,F)}else return A.wNAFCachedUnsafe(O,S)}multiplyAndAddUnsafe(S,k,O){const U=this.multiplyUnsafe(k).add(S.multiplyUnsafe(O));return U.is0()?void 0:U}toAffine(S){return b(this,S)}isTorsionFree(){const{isTorsionFree:S}=e;return s===fy?!0:S?S(C,this):A.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:S}=e;return s===fy?this:S?S(C,this):this.multiplyUnsafe(s)}toBytes(S=!0){return JE("isCompressed",S),this.assertValidity(),u(C,this,S)}toRawBytes(S=!0){return this.toBytes(S)}toHex(S=!0){return sw(this.toBytes(S))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}C.BASE=new C(t.Gx,t.Gy,n.ONE),C.ZERO=new C(n.ZERO,n.ONE,n.ZERO),C.Fp=n,C.Fn=r;const I=r.BITS,A=aie(C,e.endo?Math.ceil(I/2):I);return C}function QF(t){return Uint8Array.of(t?2:3)}function mie(t,e,n={}){nO(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||PX,s=e.hmac||((O,...U)=>BF(e.hash,O,Ad(...U))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(O){const U=a>>fy;return O>U}function u(O){return l(O)?o.neg(O):O}function d(O,U){if(!o.isValidNot0(U))throw new Error(`invalid signature ${O}: out of range 1..CURVE.n`)}class h{constructor(U,G,F){d("r",U),d("s",G),this.r=U,this.s=G,F!=null&&(this.recovery=F),Object.freeze(this)}static fromCompact(U){const G=o.BYTES,F=so("compactSignature",U,G*2);return new h(o.fromBytes(F.subarray(0,G)),o.fromBytes(F.subarray(G,G*2)))}static fromDER(U){const{r:G,s:F}=Tc.toSig(so("DER",U));return new h(G,F)}assertValidity(){}addRecoveryBit(U){return new h(this.r,this.s,U)}recoverPublicKey(U){const G=i.ORDER,{r:F,s:T,recovery:N}=this;if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");if(a*hie<G&&N>1)throw new Error("recovery id is ambiguous for h>1 curve");const R=N===2||N===3?F+a:F;if(!i.isValid(R))throw new Error("recovery id 2 or 3 invalid");const D=i.toBytes(R),B=t.fromHex(Ad(QF((N&1)===0),D)),H=o.inv(R),J=E(so("msgHash",U)),ee=o.create(-J*H),ne=o.create(T*H),ie=t.BASE.multiplyUnsafe(ee).add(B.multiplyUnsafe(ne));if(ie.is0())throw new Error("point at infinify");return ie.assertValidity(),ie}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(U){if(U==="compact")return Ad(o.toBytes(this.r),o.toBytes(this.s));if(U==="der")return kP(Tc.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return sw(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return sw(this.toBytes("compact"))}}const f=YF(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(O){try{return f(O),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const O=a;return rie(r(GF(O)),O)},precompute(O=8,U=t.BASE){return U.precompute(O,!1)}};function g(O,U=!0){return t.fromPrivateKey(O).toBytes(U)}function w(O){if(typeof O=="bigint")return!1;if(O instanceof t)return!0;const G=so("key",O).length,F=i.BYTES,T=F+1,N=2*F+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===T))return G===T||G===N}function y(O,U,G=!0){if(w(O)===!0)throw new Error("first arg must be private key");if(w(U)===!1)throw new Error("second arg must be public key");return t.fromHex(U).multiply(f(O)).toBytes(G)}const b=e.bits2int||function(O){if(O.length>8192)throw new Error("input is too large");const U=wC(O),G=O.length*8-c;return G>0?U>>BigInt(G):U},E=e.bits2int_modN||function(O){return o.create(b(O))},_=bC(c);function C(O){return mne("num < 2^"+c,O,hy,_),o.toBytes(O)}function I(O,U,G=A){if(["recovered","canonical"].some(ne=>ne in G))throw new Error("sign() legacy options not supported");const{hash:F}=e;let{lowS:T,prehash:N,extraEntropy:$}=G;T==null&&(T=!0),O=so("msgHash",O),E3(G),N&&(O=so("prehashed msgHash",F(O)));const R=E(O),D=f(U),B=[C(D),C(R)];if($!=null&&$!==!1){const ne=$===!0?r(i.BYTES):$;B.push(so("extraEntropy",ne))}const H=Ad(...B),J=R;function ee(ne){const ie=b(ne);if(!o.isValidNot0(ie))return;const we=o.inv(ie),Z=t.BASE.multiply(ie).toAffine(),se=o.create(Z.x);if(se===hy)return;const ue=o.create(we*o.create(J+se*D));if(ue===hy)return;let ce=(Z.x===se?0:2)|Number(Z.y&fy),fe=ue;return T&&l(ue)&&(fe=u(ue),ce^=1),new h(se,fe,ce)}return{seed:H,k2sig:ee}}const A={lowS:e.lowS,prehash:!1},x={lowS:e.lowS,prehash:!1};function S(O,U,G=A){const{seed:F,k2sig:T}=I(O,U,G);return wne(e.hash.outputLen,o.BYTES,s)(F,T)}t.BASE.precompute(8);function k(O,U,G,F=x){const T=O;U=so("msgHash",U),G=so("publicKey",G),E3(F);const{lowS:N,prehash:$,format:R}=F;if("strict"in F)throw new Error("options.strict was renamed to lowS");if(R!==void 0&&!["compact","der","js"].includes(R))throw new Error('format must be "compact", "der" or "js"');const D=typeof T=="string"||OP(T),B=!D&&!R&&typeof T=="object"&&T!==null&&typeof T.r=="bigint"&&typeof T.s=="bigint";if(!D&&!B)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let H,J;try{if(B)if(R===void 0||R==="js")H=new h(T.r,T.s);else throw new Error("invalid format");if(D){try{R!=="compact"&&(H=h.fromDER(T))}catch(fe){if(!(fe instanceof Tc.Err))throw fe}!H&&R!=="der"&&(H=h.fromCompact(T))}J=t.fromHex(G)}catch{return!1}if(!H||N&&H.hasHighS())return!1;$&&(U=e.hash(U));const{r:ee,s:ne}=H,ie=E(U),we=o.inv(ne),Z=o.create(ie*we),se=o.create(ee*we),ue=t.BASE.multiplyUnsafe(Z).add(J.multiplyUnsafe(se));return ue.is0()?!1:o.create(ue.x)===ee}return Object.freeze({getPublicKey:g,getSharedSecret:y,sign:S,verify:k,utils:p,Point:t,Signature:h})}function yie(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=IC(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function wie(t){const{CURVE:e,curveOpts:n}=yie(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function bie(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function vie(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=wie(t),s=gie(e,n),i=mie(s,r,n);return bie(t,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Eie(t,e){const n=r=>vie({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const t_={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const _ie=BigInt(1),ax=BigInt(2),_3=(t,e)=>(t+e/ax)/e;function Cie(t){const e=t_.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=Ki(u,n,e)*u%e,h=Ki(d,n,e)*u%e,f=Ki(h,ax,e)*l%e,p=Ki(f,s,e)*f%e,g=Ki(p,i,e)*p%e,w=Ki(g,a,e)*g%e,y=Ki(w,c,e)*w%e,b=Ki(y,a,e)*g%e,E=Ki(b,n,e)*u%e,_=Ki(E,o,e)*p%e,C=Ki(_,r,e)*l%e,I=Ki(C,ax,e);if(!cx.eql(cx.sqr(I),t))throw new Error("Cannot find square root");return I}const cx=IC(t_.p,void 0,void 0,{sqrt:Cie}),ZF=Eie({...t_,Fp:cx,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=t_.n,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-_ie*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=_3(i*t,e),c=_3(-r*t,e);let l=ao(t-a*n-c*s,e),u=ao(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},g4),Sie=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:ZF},Symbol.toStringTag,{value:"Module"}));function Aie({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new ZF.Signature(Ui(t),Ui(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:yo(o)}async function pO(t,e){var d,h,f;const{address:n,factory:r,factoryData:s,hash:i,signature:o,universalSignatureVerifierAddress:a=(f=(h=(d=t.chain)==null?void 0:d.contracts)==null?void 0:h.universalSignatureVerifier)==null?void 0:f.address,...c}=e,l=Ja(o)?o:typeof o=="object"&&"r"in o&&"s"in o?Aie(o):Sr(o),u=await(async()=>!r&&!s||Cse(l)?l:Sse({address:r,data:s,signature:l}))();try{const p=a?{to:a,data:Co({abi:ZD,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:dC({abi:ZD,args:[n,i,u],bytecode:Hne}),...c},{data:g}=await tt(t,x0,"call")(p);return XJ(g??"0x0")}catch(p){try{if(EC(Uc(n),await Jj({hash:i,signature:o})))return!0}catch{}if(p instanceof B4)return!1;throw p}}async function Iie(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...o}){const a=xF(n);return pO(t,{address:e,factory:r,factoryData:s,hash:a,signature:i,...o})}async function Nie(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:a,types:c,domain:l,...u}=e,d=gse({message:o,primaryType:a,types:c,domain:l});return pO(t,{address:n,factory:r,factoryData:s,hash:d,signature:i,...u})}async function xie(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function Tie(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:a,onError:c,onLogs:l,poll:u,pollingInterval:d=t.pollingInterval,strict:h}=e;return(typeof u<"u"?u:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{const w=h??!1,y=_r(["watchContractEvent",r,s,i,t.uid,o,d,w,a]);return tl(y,{onLogs:l,onError:c},b=>{let E;a!==void 0&&(E=a-1n);let _,C=!1;const I=Tg(async()=>{var A;if(!C){try{_=await tt(t,oF,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:w,fromBlock:a})}catch{}C=!0;return}try{let x;if(_)x=await tt(t,_C,"getFilterChanges")({filter:_});else{const S=await tt(t,R0,"getBlockNumber")({});E&&E<S?x=await tt(t,lF,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:E+1n,toBlock:S,strict:w}):x=[],E=S}if(x.length===0)return;if(i)b.onLogs(x);else for(const S of x)b.onLogs([S])}catch(x){_&&x instanceof ah&&(C=!1),(A=b.onError)==null||A.call(b,x)}},{emitOnBegin:!0,interval:d});return async()=>{_&&await tt(t,AC,"uninstallFilter")({filter:_}),I()}})})():(()=>{const w=h??!1,y=_r(["watchContractEvent",r,s,i,t.uid,o,d,w]);let b=!0,E=()=>b=!1;return tl(y,{onLogs:l,onError:c},_=>((async()=>{try{const C=(()=>{if(t.transport.type==="fallback"){const x=t.transport.transports.find(S=>S.config.type==="webSocket"||S.config.type==="ipc");return x?x.value:t.transport}return t.transport})(),I=o?T0({abi:n,eventName:o,args:s}):[],{unsubscribe:A}=await C.subscribe({params:["logs",{address:r,topics:I}],onData(x){var k;if(!b)return;const S=x.result;try{const{eventName:O,args:U}=lO({abi:n,data:S.data,topics:S.topics,strict:h}),G=el(S,{args:U,eventName:O});_.onLogs([G])}catch(O){let U,G;if(O instanceof nw||O instanceof lC){if(h)return;U=O.abiItem.name,G=(k=O.abiItem.inputs)==null?void 0:k.some(T=>!("name"in T&&T.name))}const F=el(S,{args:G?[]:{},eventName:U});_.onLogs([F])}},onError(x){var S;(S=_.onError)==null||S.call(_,x)}});E=A,b||E()}catch(C){c==null||c(C)}})(),()=>E()))})()}async function JF(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new Oh({docsPath:"/docs/contract/writeContract"});const l=r?tr(r):null,u=Co({abi:n,args:i,functionName:a});try{return await tt(t,A0,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw lh(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function $i(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const Uv="2.17.3",Rie=()=>`@wagmi/core@${Uv}`;var XF=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},n_,e9;let cl=class lx extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return Rie()}constructor(e,n={}){var i;super(),n_.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof lx?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof lx&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return XF(this,n_,"m",e9).call(this,this,e)}};n_=new WeakSet,e9=function t(e,n){return n!=null&&n(e)?e:e.cause?XF(this,n_,"m",t).call(this,e.cause,n):e};class Ew extends cl{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class Pie extends cl{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class Oie extends cl{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class kie extends cl{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class Die extends cl{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class $ie extends cl{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function Bv(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new Pie;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const ux=256;let Lb=ux,Ub;function t9(t=11){if(!Ub||Lb+t>ux*2){Ub="",Lb=0;for(let e=0;e<ux;e++)Ub+=(256+Math.random()*256|0).toString(16).substring(1)}return Ub.substring(Lb,Lb+++t)}function n9(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?tr(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},w={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:t9()};function y(b){return E=>{const _=E(b);for(const I in w)delete _[I];const C={...b,..._};return Object.assign(C,{extend:y(C)})}}return Object.assign(w,{extend:y(w)})}function gO({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=t9();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:ase(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function Mie(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>gO({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function r_(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=Lie,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=gO({key:n,name:r,async request({method:g,params:w}){let y;const b=async(E=0)=>{const _=h[E]({...d,chain:c,retryCount:0,timeout:u});try{const C=await _.request({method:g,params:w});return f({method:g,params:w,response:C,transport:_,status:"success"}),C}catch(C){if(f({error:C,method:g,params:w,transport:_,status:"error"}),i(C)||E===h.length-1||(y??(y=h.slice(E+1).some(I=>{const{include:A,exclude:x}=I({chain:c}).config.methods||{};return A?A.includes(g):x?!x.includes(g):!0})),!y))throw C;return b(E+1)}};return b()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};Uie({chain:c,interval:g.interval??l,onTransports:w=>h=w,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function Lie(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===Vp.code||t.code===gr.code||Id.nodeMessage.test(t.message)||t.code===5e3))}function Uie({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const w=g({chain:t,retryCount:0,timeout:i}),y=Date.now();let b,E;try{await(r?r({transport:w}):w.request({method:"net_listening"})),E=1}catch{E=0}finally{b=Date.now()}return{latency:b-y,success:E}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:w})=>w)))),p=o.map((g,w)=>{const y=u.map(I=>I[w].latency),E=1-y.reduce((I,A)=>I+A,0)/y.length/f,_=u.map(I=>I[w].success),C=_.reduce((I,A)=>I+A,0)/_.length;return C===0?[0,w]:[l*E+c*C,w]}).sort((g,w)=>w[0]-g[0]);n(p.map(([,g])=>o[g])),await XE(e),d()};d()}class Bie extends le{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function eu(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},w=e.retryCount??h,y=f??e.timeout??1e4,b=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!b)throw new Bie;const E=dse(b,{fetchOptions:r,onRequest:a,onResponse:c,timeout:y});return gO({key:s,methods:i,name:o,async request({method:_,params:C}){const I={method:_,params:C},{schedule:A}=eF({id:b,wait:g,shouldSplitBatch(O){return O.length>p},fn:O=>E.request({body:O}),sort:(O,U)=>O.id-U.id}),x=async O=>n?A(O):[await E.request({body:O})],[{error:S,result:k}]=await x(I);if(u)return{error:S,result:k};if(S)throw new zP({body:I,error:S,url:b});return k},retryCount:w,retryDelay:l,timeout:y,type:"http"},{fetchOptions:r,url:b})}}function jie(t){var d,h,f;const{scheme:e,statement:n,...r}=((d=t.match(Fie))==null?void 0:d.groups)??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...l}=((h=t.match(Wie))==null?void 0:h.groups)??{},u=(f=t.split("Resources:")[1])==null?void 0:f.split(`
- `).slice(1);return{...r,...l,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...u?{resources:u}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const Fie=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,Wie=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function zie(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!vo(r.address,{strict:!1})||e&&!EC(r.address,e))return!1}catch{return!1}return!0}async function Hie(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...l}=e,u=jie(s);if(!u.address||!zie({address:n,domain:r,message:u,nonce:i,scheme:o,time:c}))return!1;const h=xF(s);return pO(t,{address:u.address,hash:h,signature:a,...l})}function qie(t){return{call:e=>x0(t,e),createAccessList:e=>iF(t,e),createBlockFilter:()=>dre(t),createContractEventFilter:e=>oF(t,e),createEventFilter:e=>aF(t,e),createPendingTransactionFilter:()=>cF(t),estimateContractGas:e=>fre(t,e),estimateGas:e=>pC(t,e),getBalance:e=>VP(t,e),getBlobBaseFee:()=>pre(t),getBlock:e=>za(t,e),getBlockNumber:e=>R0(t,e),getBlockTransactionCount:e=>vre(t,e),getBytecode:e=>d3(t,e),getChainId:()=>Ig(t),getCode:e=>d3(t,e),getContractEvents:e=>lF(t,e),getEip712Domain:e=>Sre(t,e),getEnsAddress:e=>Qne(t,e),getEnsAvatar:e=>lre(t,e),getEnsName:e=>sF(t,e),getEnsResolver:e=>ure(t,e),getEnsText:e=>rF(t,e),getFeeHistory:e=>Nre(t,e),estimateFeesPerGas:e=>kee(t,e),getFilterChanges:e=>_C(t,e),getFilterLogs:e=>xre(t,e),getGasPrice:()=>qP(t),getLogs:e=>dO(t,e),getProof:e=>Fse(t,e),estimateMaxPriorityFeePerGas:e=>Oee(t,e),getStorageAt:e=>Tre(t,e),getTransaction:e=>CC(t,e),getTransactionConfirmations:e=>Rre(t,e),getTransactionCount:e=>KP(t,e),getTransactionReceipt:e=>ex(t,e),multicall:e=>dF(t,e),prepareTransactionRequest:e=>S0(t,e),readContract:e=>tc(t,e),sendRawTransaction:e=>QP(t,e),simulate:e=>tx(t,e),simulateBlocks:e=>tx(t,e),simulateCalls:e=>xse(t,e),simulateContract:e=>Vse(t,e),verifyMessage:e=>Iie(t,e),verifySiweMessage:e=>Hie(t,e),verifyTypedData:e=>Nie(t,e),uninstallFilter:e=>AC(t,e),waitForTransactionReceipt:e=>$F(t,e),watchBlocks:e=>Rse(t,e),watchBlockNumber:e=>RF(t,e),watchContractEvent:e=>Tie(t,e),watchEvent:e=>Pse(t,e),watchPendingTransactions:e=>PF(t,e)}}function Gie(t){return{addChain:e=>nX(t,e),deployContract:e=>tte(t,e),getAddresses:()=>Ose(t),getCallsStatus:e=>DF(t,e),getCapabilities:e=>Dse(t,e),getChainId:()=>Ig(t),getPermissions:()=>kse(t),prepareAuthorization:e=>MF(t,e),prepareTransactionRequest:e=>S0(t,e),requestAddresses:()=>Wse(t),requestPermissions:e=>zse(t,e),sendCalls:e=>$se(t,e),sendRawTransaction:e=>QP(t,e),sendTransaction:e=>A0(t,e),showCallsStatus:e=>Mse(t,e),signAuthorization:e=>Hse(t,e),signMessage:e=>LF(t,e),signTransaction:e=>qse(t,e),signTypedData:e=>Gse(t,e),switchChain:e=>Kse(t,e),waitForCallsStatus:e=>Lse(t,e),watchAsset:e=>xie(t,e),writeContract:e=>JF(t,e)}}async function P0(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new $ie({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new Oie;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new Die({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=tr(e.account??n.accounts[0]);if(o&&(o.address=Uc(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new kie({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return n9({account:o,chain:a,name:"Connector Client",transport:l=>Mie(c)({...l,retryCount:0})})}async function dx(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function Vie(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await P0(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return $i(o,pC,"estimateGas")({...s,account:i})}function r9(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(wee[t])}function hp(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function Kie(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return $i(o,dF,"multicall")({allowFailure:n,contracts:s,...i})}function s9(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return $i(s,tc,"readContract")(r)}async function Yie(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>Kie(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof j4)throw c;const l=()=>o.map(u=>s9(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function Qie(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await C3(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await C3(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=Pj(Ga(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await $i(c,VP,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:kh(u,r9(a)),symbol:d.nativeCurrency.symbol,value:u}}async function C3(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await Yie(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=kh(c??"0",r9(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function S3(t){return t.state.chainId}function hh(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!hh(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!hh(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function Zie(t,e={}){let n;try{n=t.getClient(e)}catch{}return n}let Bb=[];function Wo(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||hh(Bb,e)?Bb:(Bb=e,e)}let PS=[];function A3(t){const e=t.connectors;return hh(PS,e)?PS:(PS=e,e)}function Jie(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return $i(s,sF,"getEnsName")(r)}function hx(t,e={}){const n=Zie(t,e);return n==null?void 0:n.extend(qie)}async function Xie(t,e={}){return(await P0(t,e)).extend(Gie)}async function eoe(t,e){const{account:n,chainId:r,...s}=e,i=n??hp(t).address,o=t.getClient({chainId:r});return $i(o,S0,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let OS=!1;async function fx(t,e={}){var l,u;if(OS)return[];OS=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const w=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:w}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),OS=!1,a}async function toe(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await P0(t,{account:n??void 0,chainId:r,connector:s}),await $i(o,A0,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function noe(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await P0(t,{account:n,connector:r}),$i(i,LF,"signMessage")({...s,...n?{account:n}:{}})}class kl extends cl{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class roe extends cl{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function I3(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new roe({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new Ew;return t.setState(a=>({...a,chainId:r})),i}function i9(t,e){const{onChange:n}=e;return t.subscribe(()=>hp(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return hh(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function soe(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function o9(t,e){const{onChange:n}=e;return t.subscribe(()=>Wo(t),n,{equalityFn:hh})}function a9(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function ioe(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=$i(l,PF,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}function ooe(t,e){const{onChange:n}=e;return t.subscribe(()=>hx(t),n,{equalityFn(r,s){return(r==null?void 0:r.uid)===(s==null?void 0:s.uid)}})}async function c9(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await $i(i,$F,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await $i(i,CC,"getTransaction")({hash:a.transactionHash}),d=await $i(i,x0,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?Pj(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function l9(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await P0(t,{account:n??void 0,chainId:r,connector:s}),await $i(o,JF,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function O5e(t){return t}NC.type="injected";function NC(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...aoe[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:NC.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,w,y,b;const d=await this.getProvider();if(!d)throw new kl;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(w=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:w.map(_=>Uc(_)),h.length>0&&(h=await this.getAccounts())}catch(E){const _=E;if(_.code===gr.code)throw new gr(_);if(_.code===vu.code)throw _}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(C=>Uc(C))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let E=await this.getChainId();if(l&&E!==l){const _=await this.switchChain({chainId:l}).catch(C=>{if(C.code===gr.code)throw C;return{id:E}});E=(_==null?void 0:_.id)??E}return e&&await((y=c.storage)==null?void 0:y.removeItem(`${this.id}.disconnected`)),t.target||await((b=c.storage)==null?void 0:b.setItem("injected.connected",!0)),{accounts:h,chainId:E}}catch(E){const _=E;throw _.code===gr.code?new gr(_):_.code===vu.code?new vu(_):_}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new kl;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await EF(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new kl;return(await l.request({method:"eth_accounts"})).map(d=>Uc(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new kl;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=jv(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(y=>window.addEventListener("ethereum#initialized",()=>y(p()),{once:!0}))]:[],new Promise(y=>setTimeout(()=>y(p()),g))]))return!0}throw new kl}return!!(await e_(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,w,y;const d=await this.getProvider();if(!d)throw new kl;const h=c.chains.find(b=>b.id===u);if(!h)throw new Xa(new Ew);const f=new Promise(b=>{const E=_=>{"chainId"in _&&_.chainId===u&&(c.emitter.off("change",E),b())};c.emitter.on("change",E)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:qe(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(b){const E=b;if(E.code===4902||((g=(p=E==null?void 0:E.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:_,...C}=h.blockExplorers??{};let I;l!=null&&l.blockExplorerUrls?I=l.blockExplorerUrls:_&&(I=[_.url,...Object.values(C).map(S=>S.url)]);let A;(w=l==null?void 0:l.rpcUrls)!=null&&w.length?A=l.rpcUrls:A=[((y=h.rpcUrls.default)==null?void 0:y.http[0])??""];const x={blockExplorerUrls:I,chainId:qe(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:A};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[x]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new gr(new Error("User rejected switch after adding network."))}),f]),h}catch(_){throw new gr(_)}throw E.code===gr.code?new gr(E):new Xa(E)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>Uc(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const aoe={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:jv(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return jv(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:jv(t,"isPhantom")}}};function jv(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function coe(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function loe(){const t=new Set;let e=[];const n=()=>coe(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const uoe=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},doe=uoe;function hoe(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const px=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return px(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return px(r)(n)}}}},foe=(t,e)=>(n,r,s)=>{let i={storage:hoe(()=>localStorage),partialize:g=>g,version:0,merge:(g,w)=>({...w,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,w)=>{d(g,w),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,w;if(!l)return;o=!1,a.forEach(b=>{var E;return b((E=r())!=null?E:h)});const y=((w=i.onRehydrateStorage)==null?void 0:w.call(i,(g=r())!=null?g:h))||void 0;return px(l.getItem.bind(l))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var E;const[_,C]=b;if(f=i.merge(C,(E=r())!=null?E:h),n(f,!0),_)return u()}).then(()=>{y==null||y(f,void 0),f=r(),o=!0,c.forEach(b=>b(f))}).catch(b=>{y==null||y(void 0,b)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},poe=foe,N3=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},kS=t=>t?N3(t):N3;var u9={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var w=this._events[g],y=arguments.length,b,E;if(w.fn){switch(w.once&&this.removeListener(l,w.fn,void 0,!0),y){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,d),!0;case 4:return w.fn.call(w.context,u,d,h),!0;case 5:return w.fn.call(w.context,u,d,h,f),!0;case 6:return w.fn.call(w.context,u,d,h,f,p),!0}for(E=1,b=new Array(y-1);E<y;E++)b[E-1]=arguments[E];w.fn.apply(w.context,b)}else{var _=w.length,C;for(E=0;E<_;E++)switch(w[E].once&&this.removeListener(l,w[E].fn,void 0,!0),y){case 1:w[E].fn.call(w[E].context);break;case 2:w[E].fn.call(w[E].context,u);break;case 3:w[E].fn.call(w[E].context,u,d);break;case 4:w[E].fn.call(w[E].context,u,d,h);break;default:if(!b)for(C=1,b=new Array(y-1);C<y;C++)b[C-1]=arguments[C];w[E].fn.apply(w[E].context,b)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,w=[],y=p.length;g<y;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&w.push(p[g]);w.length?this._events[f]=w.length===1?w[0]:w:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(u9);var goe=u9.exports;const moe=xh(goe);class yoe{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new moe})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function woe(t){return new yoe(t)}function boe(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function x3(t,e){return t.slice(0,e).join(".")||"."}function T3(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function voe(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=T3(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=T3(s,c);if(u!==0)return r?e.call(this,a,c,x3(i,u)):`[ref=${x3(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function Eoe(t,e,n,r){return JSON.stringify(t,voe((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function _oe(t){const{deserialize:e=boe,key:n="wagmi",serialize:r=Eoe,storage:s=d9}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const d9={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function Coe(){const t=typeof window<"u"&&window.localStorage?window.localStorage:d9;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const gx=256;let jb=gx,Fb;function Soe(t=11){if(!Fb||jb+t>gx*2){Fb="",jb=0;for(let e=0;e<gx;e++)Fb+=(256+Math.random()*256|0).toString(16).substring(1)}return Fb.substring(jb,jb+++t)}function Aoe(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=_oe({storage:Coe()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?loe():void 0,a=kS(()=>i.chains),c=kS(()=>{const C=[],I=new Set;for(const A of i.connectors??[]){const x=l(A);if(C.push(x),!s&&x.rdns){const S=typeof x.rdns=="string"?[x.rdns]:x.rdns;for(const k of S)I.add(k)}}if(!s&&o){const A=o.getProviders();for(const x of A)I.has(x.info.rdns)||C.push(l(u(x)))}return C});function l(C){var x;const I=woe(Soe()),A={...C({emitter:I,chains:a.getState(),storage:n,transports:i.transports}),emitter:I,uid:I.uid};return I.on("connect",E),(x=A.setup)==null||x.call(A),A}function u(C){const{info:I}=C,A=C.provider;return NC({target:{...I,id:I.rdns,provider:A}})}const d=new Map;function h(C={}){const I=C.chainId??w.getState().chainId,A=a.getState().find(S=>S.id===I);if(C.chainId&&!A)throw new Ew;{const S=d.get(w.getState().chainId);if(S&&!A)return S;if(!A)throw new Ew}{const S=d.get(I);if(S)return S}let x;if(i.client)x=i.client({chain:A});else{const S=A.id,k=a.getState().map(G=>G.id),O={},U=Object.entries(i);for(const[G,F]of U)if(!(G==="chains"||G==="client"||G==="connectors"||G==="transports"))if(typeof F=="object")if(S in F)O[G]=F[S];else{if(k.some(N=>N in F))continue;O[G]=F}else O[G]=F;x=n9({...O,chain:A,batch:O.batch??{multicall:!0},transport:G=>i.transports[S]({...G,connectors:c})})}return d.set(I,x),x}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";Uv.startsWith(g)?p=Number.parseInt(Uv.replace(g,"")):p=Number.parseInt(Uv.split(".")[0]??"0");const w=kS(doe(n?poe(f,{migrate(C,I){if(I===p)return C;const A=f(),x=y(C,A.chainId);return{...A,chainId:x}},name:"store",partialize(C){return{connections:{__type:"Map",value:Array.from(C.connections.entries()).map(([I,A])=>{const{id:x,name:S,type:k,uid:O}=A.connector;return[I,{...A,connector:{id:x,name:S,type:k,uid:O}}]})},chainId:C.chainId,current:C.current}},merge(C,I){typeof C=="object"&&C&&"status"in C&&delete C.status;const A=y(C,I.chainId);return{...I,...C,chainId:A}},skipHydration:s,storage:n,version:p}):f));w.setState(f());function y(C,I){return C&&typeof C=="object"&&"chainId"in C&&typeof C.chainId=="number"&&a.getState().some(A=>A.id===C.chainId)?C.chainId:I}r&&w.subscribe(({connections:C,current:I})=>{var A;return I?(A=C.get(I))==null?void 0:A.chainId:void 0},C=>{if(a.getState().some(A=>A.id===C))return w.setState(A=>({...A,chainId:C??A.chainId}))}),o==null||o.subscribe(C=>{const I=new Set,A=new Set;for(const S of c.getState())if(I.add(S.id),S.rdns){const k=typeof S.rdns=="string"?[S.rdns]:S.rdns;for(const O of k)A.add(O)}const x=[];for(const S of C){if(A.has(S.info.rdns))continue;const k=l(u(S));I.has(k.id)||x.push(k)}n&&!w.persist.hasHydrated()||c.setState(S=>[...S,...x],!0)});function b(C){w.setState(I=>{const A=I.connections.get(C.uid);return A?{...I,connections:new Map(I.connections).set(C.uid,{accounts:C.accounts??A.accounts,chainId:C.chainId??A.chainId,connector:A.connector})}:I})}function E(C){w.getState().status==="connecting"||w.getState().status==="reconnecting"||w.setState(I=>{const A=c.getState().find(x=>x.uid===C.uid);return A?(A.emitter.listenerCount("connect")&&A.emitter.off("connect",b),A.emitter.listenerCount("change")||A.emitter.on("change",b),A.emitter.listenerCount("disconnect")||A.emitter.on("disconnect",_),{...I,connections:new Map(I.connections).set(C.uid,{accounts:C.accounts,chainId:C.chainId,connector:A}),current:C.uid,status:"connected"}):I})}function _(C){w.setState(I=>{const A=I.connections.get(C.uid);if(A){const S=A.connector;S.emitter.listenerCount("change")&&A.connector.emitter.off("change",b),S.emitter.listenerCount("disconnect")&&A.connector.emitter.off("disconnect",_),S.emitter.listenerCount("connect")||A.connector.emitter.on("connect",E)}if(I.connections.delete(C.uid),I.connections.size===0)return{...I,connections:new Map,current:null,status:"disconnected"};const x=I.connections.values().next().value;return{...I,connections:new Map(I.connections),current:x.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return w.getState()},setState(C){let I;typeof C=="function"?I=C(w.getState()):I=C;const A=f();typeof I!="object"&&(I=A),Object.keys(A).some(S=>!(S in I))&&(I=A),w.setState(I,!0)},subscribe(C,I,A){return w.subscribe(C,I,A?{...A,fireImmediately:A.emitImmediately}:void 0)},_internal:{mipd:o,store:w,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(C){const I=typeof C=="function"?C(a.getState()):C;if(I.length!==0)return a.setState(I,!0)},subscribe(C){return a.subscribe(C)}},connectors:{providerDetailToConnector:u,setup:l,setState(C){return c.setState(typeof C=="function"?C(c.getState()):C,!0)},subscribe(C){return c.subscribe(C)}},events:{change:b,connect:E,disconnect:_}}}}function Ioe(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?fx(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function Noe(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=Ioe(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=P.useRef(!0);return P.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const h9=P.createContext(void 0);function xoe(t){const{children:e,config:n}=t,r={value:n};return P.createElement(Noe,t,P.createElement(h9.Provider,r,e))}const Toe="2.15.6",Roe=()=>`wagmi@${Toe}`;let Poe=class extends cl{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return Roe()}};class Ooe extends Poe{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function So(t={}){const e=t.config??P.useContext(h9);if(!e)throw new Ooe;return e}var f9={exports:{}},p9={},g9={exports:{}},m9={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jp=P;function koe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Doe=typeof Object.is=="function"?Object.is:koe,$oe=Jp.useState,Moe=Jp.useEffect,Loe=Jp.useLayoutEffect,Uoe=Jp.useDebugValue;function Boe(t,e){var n=e(),r=$oe({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Loe(function(){s.value=n,s.getSnapshot=e,DS(s)&&i({inst:s})},[t,n,e]),Moe(function(){return DS(s)&&i({inst:s}),t(function(){DS(s)&&i({inst:s})})},[t]),Uoe(n),n}function DS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Doe(t,n)}catch{return!0}}function joe(t,e){return e()}var Foe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?joe:Boe;m9.useSyncExternalStore=Jp.useSyncExternalStore!==void 0?Jp.useSyncExternalStore:Foe;g9.exports=m9;var y9=g9.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xC=P,Woe=y9;function zoe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hoe=typeof Object.is=="function"?Object.is:zoe,qoe=Woe.useSyncExternalStore,Goe=xC.useRef,Voe=xC.useEffect,Koe=xC.useMemo,Yoe=xC.useDebugValue;p9.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=Goe(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Koe(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,Hoe(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=qoe(t,i[0],i[1]);return Voe(function(){o.hasValue=!0,o.value=a},[a]),Yoe(a),a};f9.exports=p9;var w9=f9.exports;const $S=t=>typeof t=="object"&&!Array.isArray(t);function Qoe(t,e,n=e,r=hh){const s=P.useRef([]),i=w9.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if($S(o)&&$S(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return P.useMemo(()=>{if($S(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function O0(t={}){const e=So(t);return Qoe(n=>i9(e,{onChange:n}),()=>hp(e))}var Rg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},fh=typeof window>"u"||"Deno"in globalThis;function Ss(){}function Zoe(t,e){return typeof t=="function"?t(e):t}function mx(t){return typeof t=="number"&&t>=0&&t!==1/0}function b9(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Eu(t,e){return typeof t=="function"?t(e):t}function co(t,e){return typeof t=="function"?t(e):t}function R3(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==mO(o,e.options))return!1}else if(!_w(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function P3(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(ph(e.options.mutationKey)!==ph(i))return!1}else if(!_w(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function mO(t,e){return((e==null?void 0:e.queryKeyHashFn)||ph)(t)}function ph(t){return JSON.stringify(t,(e,n)=>yx(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function _w(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>_w(t[n],e[n])):!1}function yO(t,e){if(t===e)return t;const n=O3(t)&&O3(e);if(n||yx(t)&&yx(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=yO(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function s_(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function O3(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function yx(t){if(!k3(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!k3(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function k3(t){return Object.prototype.toString.call(t)==="[object Object]"}function Joe(t){return new Promise(e=>{setTimeout(e,t)})}function wx(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?yO(t,e):e}function Xoe(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function eae(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var wO=Symbol();function v9(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===wO?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function E9(t,e){return typeof t=="function"?t(...e):!!t}var Dd,Wl,bp,_U,tae=(_U=class extends Rg{constructor(){super();Xe(this,Dd);Xe(this,Wl);Xe(this,bp);Te(this,bp,e=>{if(!fh&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){W(this,Wl)||this.setEventListener(W(this,bp))}onUnsubscribe(){var e;this.hasListeners()||((e=W(this,Wl))==null||e.call(this),Te(this,Wl,void 0))}setEventListener(e){var n;Te(this,bp,e),(n=W(this,Wl))==null||n.call(this),Te(this,Wl,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){W(this,Dd)!==e&&(Te(this,Dd,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof W(this,Dd)=="boolean"?W(this,Dd):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Dd=new WeakMap,Wl=new WeakMap,bp=new WeakMap,_U),bO=new tae,vp,zl,Ep,CU,nae=(CU=class extends Rg{constructor(){super();Xe(this,vp,!0);Xe(this,zl);Xe(this,Ep);Te(this,Ep,e=>{if(!fh&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){W(this,zl)||this.setEventListener(W(this,Ep))}onUnsubscribe(){var e;this.hasListeners()||((e=W(this,zl))==null||e.call(this),Te(this,zl,void 0))}setEventListener(e){var n;Te(this,Ep,e),(n=W(this,zl))==null||n.call(this),Te(this,zl,e(this.setOnline.bind(this)))}setOnline(e){W(this,vp)!==e&&(Te(this,vp,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return W(this,vp)}},vp=new WeakMap,zl=new WeakMap,Ep=new WeakMap,CU),i_=new nae;function bx(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function rae(t){return Math.min(1e3*2**t,3e4)}function _9(t){return(t??"online")==="online"?i_.isOnline():!0}var C9=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function MS(t){return t instanceof C9}function S9(t){let e=!1,n=0,r=!1,s;const i=bx(),o=g=>{var w;r||(h(new C9(g)),(w=t.abort)==null||w.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>bO.isFocused()&&(t.networkMode==="always"||i_.isOnline())&&t.canRun(),u=()=>_9(t.networkMode)&&t.canRun(),d=g=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var w;s=y=>{(r||l())&&g(y)},(w=t.onPause)==null||w.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const w=n===0?t.initialPromise:void 0;try{g=w??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(d).catch(y=>{var I;if(r)return;const b=t.retry??(fh?0:3),E=t.retryDelay??rae,_=typeof E=="function"?E(n,y):E,C=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,y);if(e||!C){h(y);return}n++,(I=t.onFail)==null||I.call(t,n,y),Joe(_).then(()=>l()?void 0:f()).then(()=>{e?h(y):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var sae=t=>setTimeout(t,0);function iae(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=sae;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var wr=iae(),$d,SU,A9=(SU=class{constructor(){Xe(this,$d)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),mx(this.gcTime)&&Te(this,$d,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(fh?1/0:5*60*1e3))}clearGcTimeout(){W(this,$d)&&(clearTimeout(W(this,$d)),Te(this,$d,void 0))}},$d=new WeakMap,SU),_p,Md,io,Ld,ls,r0,Ud,zo,Ac,AU,oae=(AU=class extends A9{constructor(e){super();Xe(this,zo);Xe(this,_p);Xe(this,Md);Xe(this,io);Xe(this,Ld);Xe(this,ls);Xe(this,r0);Xe(this,Ud);Te(this,Ud,!1),Te(this,r0,e.defaultOptions),this.setOptions(e.options),this.observers=[],Te(this,Ld,e.client),Te(this,io,W(this,Ld).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Te(this,_p,aae(this.options)),this.state=e.state??W(this,_p),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=W(this,ls))==null?void 0:e.promise}setOptions(e){this.options={...W(this,r0),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&W(this,io).remove(this)}setData(e,n){const r=wx(this.state.data,e,this.options);return _t(this,zo,Ac).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){_t(this,zo,Ac).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=W(this,ls))==null?void 0:r.promise;return(s=W(this,ls))==null||s.cancel(e),n?n.then(Ss).catch(Ss):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(W(this,_p))}isActive(){return this.observers.some(e=>co(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===wO||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Eu(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!b9(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=W(this,ls))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=W(this,ls))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),W(this,io).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(W(this,ls)&&(W(this,Ud)?W(this,ls).cancel({revert:!0}):W(this,ls).cancelRetry()),this.scheduleGc()),W(this,io).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||_t(this,zo,Ac).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(W(this,ls))return W(this,ls).continueRetry(),W(this,ls).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(Te(this,Ud,!0),r.signal)})},i=()=>{const h=v9(this.options,n),p=(()=>{const g={client:W(this,Ld),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return Te(this,Ud,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:W(this,Ld),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),Te(this,Md,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&_t(this,zo,Ac).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,w;MS(h)&&h.silent||_t(this,zo,Ac).call(this,{type:"error",error:h}),MS(h)||((p=(f=W(this,io).config).onError)==null||p.call(f,h,this),(w=(g=W(this,io).config).onSettled)==null||w.call(g,this.state.data,h,this)),this.scheduleGc()};return Te(this,ls,S9({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,w;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){c(y);return}(p=(f=W(this,io).config).onSuccess)==null||p.call(f,h,this),(w=(g=W(this,io).config).onSettled)==null||w.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{_t(this,zo,Ac).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{_t(this,zo,Ac).call(this,{type:"pause"})},onContinue:()=>{_t(this,zo,Ac).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),W(this,ls).start()}},_p=new WeakMap,Md=new WeakMap,io=new WeakMap,Ld=new WeakMap,ls=new WeakMap,r0=new WeakMap,Ud=new WeakMap,zo=new WeakSet,Ac=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...I9(r.data,this.options),fetchMeta:e.meta??null};case"success":return Te(this,Md,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return MS(s)&&s.revert&&W(this,Md)?{...W(this,Md),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),wr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),W(this,io).notify({query:this,type:"updated",action:e})})},AU);function I9(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:_9(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function aae(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ra,IU,cae=(IU=class extends Rg{constructor(e={}){super();Xe(this,Ra);this.config=e,Te(this,Ra,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??mO(s,n);let o=this.get(i);return o||(o=new oae({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){W(this,Ra).has(e.queryHash)||(W(this,Ra).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=W(this,Ra).get(e.queryHash);n&&(e.destroy(),n===e&&W(this,Ra).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){wr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return W(this,Ra).get(e)}getAll(){return[...W(this,Ra).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>R3(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>R3(e,r)):n}notify(e){wr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){wr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){wr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ra=new WeakMap,IU),Pa,Es,Bd,Oa,xl,NU,lae=(NU=class extends A9{constructor(e){super();Xe(this,Oa);Xe(this,Pa);Xe(this,Es);Xe(this,Bd);this.mutationId=e.mutationId,Te(this,Es,e.mutationCache),Te(this,Pa,[]),this.state=e.state||N9(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){W(this,Pa).includes(e)||(W(this,Pa).push(e),this.clearGcTimeout(),W(this,Es).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Te(this,Pa,W(this,Pa).filter(n=>n!==e)),this.scheduleGc(),W(this,Es).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){W(this,Pa).length||(this.state.status==="pending"?this.scheduleGc():W(this,Es).remove(this))}continue(){var e;return((e=W(this,Bd))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,w,y,b,E,_,C,I,A,x;const n=()=>{_t(this,Oa,xl).call(this,{type:"continue"})};Te(this,Bd,S9({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(S,k)=>{_t(this,Oa,xl).call(this,{type:"failed",failureCount:S,error:k})},onPause:()=>{_t(this,Oa,xl).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>W(this,Es).canRun(this)}));const r=this.state.status==="pending",s=!W(this,Bd).canStart();try{if(r)n();else{_t(this,Oa,xl).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=W(this,Es).config).onMutate)==null?void 0:o.call(i,e,this));const k=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));k!==this.state.context&&_t(this,Oa,xl).call(this,{type:"pending",context:k,variables:e,isPaused:s})}const S=await W(this,Bd).start();return await((u=(l=W(this,Es).config).onSuccess)==null?void 0:u.call(l,S,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,S,e,this.state.context)),await((p=(f=W(this,Es).config).onSettled)==null?void 0:p.call(f,S,null,this.state.variables,this.state.context,this)),await((w=(g=this.options).onSettled)==null?void 0:w.call(g,S,null,e,this.state.context)),_t(this,Oa,xl).call(this,{type:"success",data:S}),S}catch(S){try{throw await((b=(y=W(this,Es).config).onError)==null?void 0:b.call(y,S,e,this.state.context,this)),await((_=(E=this.options).onError)==null?void 0:_.call(E,S,e,this.state.context)),await((I=(C=W(this,Es).config).onSettled)==null?void 0:I.call(C,void 0,S,this.state.variables,this.state.context,this)),await((x=(A=this.options).onSettled)==null?void 0:x.call(A,void 0,S,e,this.state.context)),S}finally{_t(this,Oa,xl).call(this,{type:"error",error:S})}}finally{W(this,Es).runNext(this)}}},Pa=new WeakMap,Es=new WeakMap,Bd=new WeakMap,Oa=new WeakSet,xl=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),wr.batch(()=>{W(this,Pa).forEach(r=>{r.onMutationUpdate(e)}),W(this,Es).notify({mutation:this,type:"updated",action:e})})},NU);function N9(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Pc,Ho,s0,xU,uae=(xU=class extends Rg{constructor(e={}){super();Xe(this,Pc);Xe(this,Ho);Xe(this,s0);this.config=e,Te(this,Pc,new Set),Te(this,Ho,new Map),Te(this,s0,0)}build(e,n,r){const s=new lae({mutationCache:this,mutationId:++fb(this,s0)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){W(this,Pc).add(e);const n=Wb(e);if(typeof n=="string"){const r=W(this,Ho).get(n);r?r.push(e):W(this,Ho).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(W(this,Pc).delete(e)){const n=Wb(e);if(typeof n=="string"){const r=W(this,Ho).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&W(this,Ho).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Wb(e);if(typeof n=="string"){const r=W(this,Ho).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Wb(e);if(typeof n=="string"){const s=(r=W(this,Ho).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){wr.batch(()=>{W(this,Pc).forEach(e=>{this.notify({type:"removed",mutation:e})}),W(this,Pc).clear(),W(this,Ho).clear()})}getAll(){return Array.from(W(this,Pc))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>P3(n,r))}findAll(e={}){return this.getAll().filter(n=>P3(e,n))}notify(e){wr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return wr.batch(()=>Promise.all(e.map(n=>n.continue().catch(Ss))))}},Pc=new WeakMap,Ho=new WeakMap,s0=new WeakMap,xU);function Wb(t){var e;return(e=t.options.scope)==null?void 0:e.id}function D3(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const w=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},y=v9(e.options,e.fetchOptions),b=async(E,_,C)=>{if(g)return Promise.reject();if(_==null&&E.pages.length)return Promise.resolve(E);const A=(()=>{const O={client:e.client,queryKey:e.queryKey,pageParam:_,direction:C?"backward":"forward",meta:e.options.meta};return w(O),O})(),x=await y(A),{maxPages:S}=e.options,k=C?eae:Xoe;return{pages:k(E.pages,x,S),pageParams:k(E.pageParams,_,S)}};if(s&&i.length){const E=s==="backward",_=E?dae:$3,C={pages:i,pageParams:o},I=_(r,C);a=await b(C,I,E)}else{const E=t??i.length;do{const _=c===0?o[0]??r.initialPageParam:$3(r,a);if(c>0&&_==null)break;a=await b(a,_),c++}while(c<E)}return a};e.options.persister?e.fetchFn=()=>{var g,w;return(w=(g=e.options).persister)==null?void 0:w.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function $3(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function dae(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Zn,Hl,ql,Cp,Sp,Gl,Ap,Ip,TU,hae=(TU=class{constructor(t={}){Xe(this,Zn);Xe(this,Hl);Xe(this,ql);Xe(this,Cp);Xe(this,Sp);Xe(this,Gl);Xe(this,Ap);Xe(this,Ip);Te(this,Zn,t.queryCache||new cae),Te(this,Hl,t.mutationCache||new uae),Te(this,ql,t.defaultOptions||{}),Te(this,Cp,new Map),Te(this,Sp,new Map),Te(this,Gl,0)}mount(){fb(this,Gl)._++,W(this,Gl)===1&&(Te(this,Ap,bO.subscribe(async t=>{t&&(await this.resumePausedMutations(),W(this,Zn).onFocus())})),Te(this,Ip,i_.subscribe(async t=>{t&&(await this.resumePausedMutations(),W(this,Zn).onOnline())})))}unmount(){var t,e;fb(this,Gl)._--,W(this,Gl)===0&&((t=W(this,Ap))==null||t.call(this),Te(this,Ap,void 0),(e=W(this,Ip))==null||e.call(this),Te(this,Ip,void 0))}isFetching(t){return W(this,Zn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return W(this,Hl).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=W(this,Zn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=W(this,Zn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Eu(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return W(this,Zn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=W(this,Zn).get(r.queryHash),i=s==null?void 0:s.state.data,o=Zoe(e,i);if(o!==void 0)return W(this,Zn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return wr.batch(()=>W(this,Zn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=W(this,Zn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=W(this,Zn);wr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=W(this,Zn);return wr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=wr.batch(()=>W(this,Zn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Ss).catch(Ss)}invalidateQueries(t,e={}){return wr.batch(()=>(W(this,Zn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=wr.batch(()=>W(this,Zn).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Ss)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Ss)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=W(this,Zn).build(this,e);return n.isStaleByTime(Eu(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ss).catch(Ss)}fetchInfiniteQuery(t){return t.behavior=D3(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ss).catch(Ss)}ensureInfiniteQueryData(t){return t.behavior=D3(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return i_.isOnline()?W(this,Hl).resumePausedMutations():Promise.resolve()}getQueryCache(){return W(this,Zn)}getMutationCache(){return W(this,Hl)}getDefaultOptions(){return W(this,ql)}setDefaultOptions(t){Te(this,ql,t)}setQueryDefaults(t,e){W(this,Cp).set(ph(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...W(this,Cp).values()],n={};return e.forEach(r=>{_w(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){W(this,Sp).set(ph(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...W(this,Sp).values()],n={};return e.forEach(r=>{_w(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...W(this,ql).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=mO(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===wO&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...W(this,ql).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){W(this,Zn).clear(),W(this,Hl).clear()}},Zn=new WeakMap,Hl=new WeakMap,ql=new WeakMap,Cp=new WeakMap,Sp=new WeakMap,Gl=new WeakMap,Ap=new WeakMap,Ip=new WeakMap,TU),Ys,Mt,i0,_s,jd,Np,Vl,Kl,o0,xp,Tp,Fd,Wd,Yl,Rp,sn,Mm,vx,Ex,_x,Cx,Sx,Ax,Ix,x9,RU,fae=(RU=class extends Rg{constructor(e,n){super();Xe(this,sn);Xe(this,Ys);Xe(this,Mt);Xe(this,i0);Xe(this,_s);Xe(this,jd);Xe(this,Np);Xe(this,Vl);Xe(this,Kl);Xe(this,o0);Xe(this,xp);Xe(this,Tp);Xe(this,Fd);Xe(this,Wd);Xe(this,Yl);Xe(this,Rp,new Set);this.options=n,Te(this,Ys,e),Te(this,Kl,null),Te(this,Vl,bx()),this.options.experimental_prefetchInRender||W(this,Vl).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(W(this,Mt).addObserver(this),M3(W(this,Mt),this.options)?_t(this,sn,Mm).call(this):this.updateResult(),_t(this,sn,Cx).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Nx(W(this,Mt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Nx(W(this,Mt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,_t(this,sn,Sx).call(this),_t(this,sn,Ax).call(this),W(this,Mt).removeObserver(this)}setOptions(e){const n=this.options,r=W(this,Mt);if(this.options=W(this,Ys).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof co(this.options.enabled,W(this,Mt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");_t(this,sn,Ix).call(this),W(this,Mt).setOptions(this.options),n._defaulted&&!s_(this.options,n)&&W(this,Ys).getQueryCache().notify({type:"observerOptionsUpdated",query:W(this,Mt),observer:this});const s=this.hasListeners();s&&L3(W(this,Mt),r,this.options,n)&&_t(this,sn,Mm).call(this),this.updateResult(),s&&(W(this,Mt)!==r||co(this.options.enabled,W(this,Mt))!==co(n.enabled,W(this,Mt))||Eu(this.options.staleTime,W(this,Mt))!==Eu(n.staleTime,W(this,Mt)))&&_t(this,sn,vx).call(this);const i=_t(this,sn,Ex).call(this);s&&(W(this,Mt)!==r||co(this.options.enabled,W(this,Mt))!==co(n.enabled,W(this,Mt))||i!==W(this,Yl))&&_t(this,sn,_x).call(this,i)}getOptimisticResult(e){const n=W(this,Ys).getQueryCache().build(W(this,Ys),e),r=this.createResult(n,e);return gae(this,r)&&(Te(this,_s,r),Te(this,Np,this.options),Te(this,jd,W(this,Mt).state)),r}getCurrentResult(){return W(this,_s)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){W(this,Rp).add(e)}getCurrentQuery(){return W(this,Mt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=W(this,Ys).defaultQueryOptions(e),r=W(this,Ys).getQueryCache().build(W(this,Ys),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return _t(this,sn,Mm).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),W(this,_s)))}createResult(e,n){var S;const r=W(this,Mt),s=this.options,i=W(this,_s),o=W(this,jd),a=W(this,Np),l=e!==r?e.state:W(this,i0),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const k=this.hasListeners(),O=!k&&M3(e,n),U=k&&L3(e,r,n,s);(O||U)&&(d={...d,...I9(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:w}=d;f=d.data;let y=!1;if(n.placeholderData!==void 0&&f===void 0&&w==="pending"){let k;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(k=i.data,y=!0):k=typeof n.placeholderData=="function"?n.placeholderData((S=W(this,Tp))==null?void 0:S.state.data,W(this,Tp)):n.placeholderData,k!==void 0&&(w="success",f=wx(i==null?void 0:i.data,k,n),h=!0)}if(n.select&&f!==void 0&&!y)if(i&&f===(o==null?void 0:o.data)&&n.select===W(this,o0))f=W(this,xp);else try{Te(this,o0,n.select),f=n.select(f),f=wx(i==null?void 0:i.data,f,n),Te(this,xp,f),Te(this,Kl,null)}catch(k){Te(this,Kl,k)}W(this,Kl)&&(p=W(this,Kl),f=W(this,xp),g=Date.now(),w="error");const b=d.fetchStatus==="fetching",E=w==="pending",_=w==="error",C=E&&b,I=f!==void 0,x={status:w,fetchStatus:d.fetchStatus,isPending:E,isSuccess:w==="success",isError:_,isInitialLoading:C,isLoading:C,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:b,isRefetching:b&&!E,isLoadingError:_&&!I,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:_&&I,isStale:vO(e,n),refetch:this.refetch,promise:W(this,Vl),isEnabled:co(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const k=G=>{x.status==="error"?G.reject(x.error):x.data!==void 0&&G.resolve(x.data)},O=()=>{const G=Te(this,Vl,x.promise=bx());k(G)},U=W(this,Vl);switch(U.status){case"pending":e.queryHash===r.queryHash&&k(U);break;case"fulfilled":(x.status==="error"||x.data!==U.value)&&O();break;case"rejected":(x.status!=="error"||x.error!==U.reason)&&O();break}}return x}updateResult(){const e=W(this,_s),n=this.createResult(W(this,Mt),this.options);if(Te(this,jd,W(this,Mt).state),Te(this,Np,this.options),W(this,jd).data!==void 0&&Te(this,Tp,W(this,Mt)),s_(n,e))return;Te(this,_s,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!W(this,Rp).size)return!0;const o=new Set(i??W(this,Rp));return this.options.throwOnError&&o.add("error"),Object.keys(W(this,_s)).some(a=>{const c=a;return W(this,_s)[c]!==e[c]&&o.has(c)})};_t(this,sn,x9).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&_t(this,sn,Cx).call(this)}},Ys=new WeakMap,Mt=new WeakMap,i0=new WeakMap,_s=new WeakMap,jd=new WeakMap,Np=new WeakMap,Vl=new WeakMap,Kl=new WeakMap,o0=new WeakMap,xp=new WeakMap,Tp=new WeakMap,Fd=new WeakMap,Wd=new WeakMap,Yl=new WeakMap,Rp=new WeakMap,sn=new WeakSet,Mm=function(e){_t(this,sn,Ix).call(this);let n=W(this,Mt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Ss)),n},vx=function(){_t(this,sn,Sx).call(this);const e=Eu(this.options.staleTime,W(this,Mt));if(fh||W(this,_s).isStale||!mx(e))return;const r=b9(W(this,_s).dataUpdatedAt,e)+1;Te(this,Fd,setTimeout(()=>{W(this,_s).isStale||this.updateResult()},r))},Ex=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(W(this,Mt)):this.options.refetchInterval)??!1},_x=function(e){_t(this,sn,Ax).call(this),Te(this,Yl,e),!(fh||co(this.options.enabled,W(this,Mt))===!1||!mx(W(this,Yl))||W(this,Yl)===0)&&Te(this,Wd,setInterval(()=>{(this.options.refetchIntervalInBackground||bO.isFocused())&&_t(this,sn,Mm).call(this)},W(this,Yl)))},Cx=function(){_t(this,sn,vx).call(this),_t(this,sn,_x).call(this,_t(this,sn,Ex).call(this))},Sx=function(){W(this,Fd)&&(clearTimeout(W(this,Fd)),Te(this,Fd,void 0))},Ax=function(){W(this,Wd)&&(clearInterval(W(this,Wd)),Te(this,Wd,void 0))},Ix=function(){const e=W(this,Ys).getQueryCache().build(W(this,Ys),this.options);if(e===W(this,Mt))return;const n=W(this,Mt);Te(this,Mt,e),Te(this,i0,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},x9=function(e){wr.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(W(this,_s))}),W(this,Ys).getQueryCache().notify({query:W(this,Mt),type:"observerResultsUpdated"})})},RU);function pae(t,e){return co(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function M3(t,e){return pae(t,e)||t.state.data!==void 0&&Nx(t,e,e.refetchOnMount)}function Nx(t,e,n){if(co(e.enabled,t)!==!1&&Eu(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&vO(t,e)}return!1}function L3(t,e,n,r){return(t!==e||co(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&vO(t,n)}function vO(t,e){return co(e.enabled,t)!==!1&&t.isStaleByTime(Eu(e.staleTime,t))}function gae(t,e){return!s_(t.getCurrentResult(),e)}var Ql,Zl,Qs,Oc,Vc,Fv,xx,PU,mae=(PU=class extends Rg{constructor(n,r){super();Xe(this,Vc);Xe(this,Ql);Xe(this,Zl);Xe(this,Qs);Xe(this,Oc);Te(this,Ql,n),this.setOptions(r),this.bindMethods(),_t(this,Vc,Fv).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=W(this,Ql).defaultMutationOptions(n),s_(this.options,r)||W(this,Ql).getMutationCache().notify({type:"observerOptionsUpdated",mutation:W(this,Qs),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&ph(r.mutationKey)!==ph(this.options.mutationKey)?this.reset():((s=W(this,Qs))==null?void 0:s.state.status)==="pending"&&W(this,Qs).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=W(this,Qs))==null||n.removeObserver(this)}onMutationUpdate(n){_t(this,Vc,Fv).call(this),_t(this,Vc,xx).call(this,n)}getCurrentResult(){return W(this,Zl)}reset(){var n;(n=W(this,Qs))==null||n.removeObserver(this),Te(this,Qs,void 0),_t(this,Vc,Fv).call(this),_t(this,Vc,xx).call(this)}mutate(n,r){var s;return Te(this,Oc,r),(s=W(this,Qs))==null||s.removeObserver(this),Te(this,Qs,W(this,Ql).getMutationCache().build(W(this,Ql),this.options)),W(this,Qs).addObserver(this),W(this,Qs).execute(n)}},Ql=new WeakMap,Zl=new WeakMap,Qs=new WeakMap,Oc=new WeakMap,Vc=new WeakSet,Fv=function(){var r;const n=((r=W(this,Qs))==null?void 0:r.state)??N9();Te(this,Zl,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},xx=function(n){wr.batch(()=>{var r,s,i,o,a,c,l,u;if(W(this,Oc)&&this.hasListeners()){const d=W(this,Zl).variables,h=W(this,Zl).context;(n==null?void 0:n.type)==="success"?((s=(r=W(this,Oc)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=W(this,Oc)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=W(this,Oc)).onError)==null||c.call(a,n.error,d,h),(u=(l=W(this,Oc)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(W(this,Zl))})})},PU);function yae(t,e){return yO(t,e)}function wae(t){return JSON.stringify(t,(e,n)=>bae(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function bae(t){if(!U3(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!U3(n)||!n.hasOwnProperty("isPrototypeOf"))}function U3(t){return Object.prototype.toString.call(t)==="[object Object]"}function TC(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:w,getNextPageParam:y,initialPageParam:b,_optimisticResults:E,enabled:_,notifyOnChangeProps:C,placeholderData:I,refetchInterval:A,refetchIntervalInBackground:x,refetchOnMount:S,refetchOnReconnect:k,refetchOnWindowFocus:O,retryOnMount:U,select:G,staleTime:F,suspense:T,throwOnError:N,config:$,connector:R,query:D,...B}=t;return B}function vae(t){return{mutationFn(e){return Bv(t,e)},mutationKey:["connect"]}}function Eae(t){return{mutationFn(e){return dx(t,e)},mutationKey:["disconnect"]}}function _ae(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return Jie(t,{...i,address:r})},queryKey:Cae(e)}}function Cae(t={}){return["ensName",TC(t)]}function Sae(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return Xie(t,{...o,connector:r})},queryKey:Aae(e)}}function Aae(t={}){const{connector:e,...n}=t;return["walletClient",{...TC(n),connectorUid:e==null?void 0:e.uid}]}function Iae(t,e={}){return{async queryFn({queryKey:n}){const r=e.abi;if(!r)throw new Error("abi is required");const{functionName:s,scopeKey:i,...o}=n[1],a=(()=>{const c=n[1];if(c.address)return{address:c.address};if(c.code)return{code:c.code};throw new Error("address or code is required")})();if(!s)throw new Error("functionName is required");return s9(t,{abi:r,functionName:s,args:o.args,...a,...o})},queryKey:Nae(e)}}function Nae(t={}){const{abi:e,...n}=t;return["readContract",TC(n)]}function xae(t,e={}){return{async queryFn({queryKey:n}){const{hash:r,...s}=n[1];if(!r)throw new Error("hash is required");return c9(t,{...s,onReplaced:e.onReplaced,hash:r})},queryKey:Tae(e)}}function Tae(t={}){const{onReplaced:e,...n}=t;return["waitForTransactionReceipt",TC(n)]}function Rae(t){return{mutationFn(e){return l9(t,e)},mutationKey:["writeContract"]}}var T9=P.createContext(void 0),EO=t=>{const e=P.useContext(T9);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Pae=({client:t,children:e})=>(P.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(T9.Provider,{value:t,children:e})),R9=P.createContext(!1),Oae=()=>P.useContext(R9);R9.Provider;function kae(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Dae=P.createContext(kae()),$ae=()=>P.useContext(Dae),Mae=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},Lae=t=>{P.useEffect(()=>{t.clearReset()},[t])},Uae=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||E9(n,[t.error,r])),Bae=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},jae=(t,e)=>t.isLoading&&t.isFetching&&!e,Fae=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,B3=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function Wae(t,e,n){var d,h,f,p,g;const r=Oae(),s=$ae(),i=EO(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",Bae(o),Mae(o,s),Lae(s);const a=!i.getQueryCache().get(o.queryHash),[c]=P.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(P.useSyncExternalStore(P.useCallback(w=>{const y=u?c.subscribe(wr.batchCalls(w)):Ss;return c.updateResult(),y},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),P.useEffect(()=>{c.setOptions(o)},[o,c]),Fae(o,l))throw B3(o,c,s);if(Uae({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!fh&&jae(l,r)){const w=a?B3(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;w==null||w.catch(Ss).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function zae(t,e){return Wae(t,fae)}function _O(t,e){const n=EO(),[r]=P.useState(()=>new mae(n,t));P.useEffect(()=>{r.setOptions(t)},[r,t]);const s=P.useSyncExternalStore(P.useCallback(o=>r.subscribe(wr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=P.useCallback((o,a)=>{r.mutate(o,a).catch(Ss)},[r]);if(s.error&&E9(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function RC(t){const e=zae({...t,queryKeyHashFn:wae});return e.queryKey=t.queryKey,e}function PC(t={}){const e=So(t);return P.useSyncExternalStore(n=>soe(e,{onChange:n}),()=>S3(e),()=>S3(e))}function Hae(t={}){const e=So(t);return P.useSyncExternalStore(n=>a9(e,{onChange:n}),()=>A3(e),()=>A3(e))}function P9(t={}){const{mutation:e}=t,n=So(t),r=vae(n),{mutate:s,mutateAsync:i,...o}=_O({...e,...r});return P.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:Hae({config:n})}}function qae(t={}){const e=So(t);return P.useSyncExternalStore(n=>o9(e,{onChange:n}),()=>Wo(e),()=>Wo(e))}function O9(t={}){const{mutation:e}=t,n=So(t),r=Eae(n),{mutate:s,mutateAsync:i,...o}=_O({...e,...r});return{...o,connectors:qae({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function k9(t={}){const{address:e,query:n={}}=t,r=So(t),s=PC({config:r}),i=_ae(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return RC({...n,...i,enabled:o})}function Gae(t={}){const e=So(t);return w9.useSyncExternalStoreWithSelector(n=>ooe(e,{onChange:n}),()=>hx(e,t),()=>hx(e,t),n=>n,(n,r)=>(n==null?void 0:n.uid)===(r==null?void 0:r.uid))}function j3(t={}){const{abi:e,address:n,functionName:r,query:s={}}=t,i=t.code,o=So(t),a=PC({config:o}),c=Iae(o,{...t,chainId:t.chainId??a}),l=!!((n||i)&&e&&r&&(s.enabled??!0));return RC({...s,...c,enabled:l,structuralSharing:s.structuralSharing??yae})}function D9(t={}){const{query:e={},...n}=t,r=So(n),s=EO(),{address:i,connector:o,status:a}=O0({config:r}),c=PC({config:r}),l=t.connector??o,{queryKey:u,...d}=Sae(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=P.useRef(i);return P.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),RC({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}function LS(t={}){const{hash:e,query:n={}}=t,r=So(t),s=PC({config:r}),i=xae(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return RC({...n,...i,enabled:o})}function US(t={}){const{mutation:e}=t,n=So(t),r=Rae(n),{mutate:s,mutateAsync:i,...o}=_O({...e,...r});return{...o,writeContract:s,writeContractAsync:i}}const Vae="_verified_lvyh0_1",CO={verified:Vae},Kae=()=>m.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:CO.verified,children:m.jsx("g",{children:m.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),Yae=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:CO.verified,children:m.jsxs("g",{children:[m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[m.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),m.jsx("stop",{offset:".539",stopColor:"#cd8105"}),m.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),m.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),m.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[m.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),m.jsx("stop",{offset:".406",stopColor:"#e2b719"}),m.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),m.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[m.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),m.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),m.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),Qae=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:CO.verified,children:m.jsx("g",{children:m.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function $9(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=$9(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function _u(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=$9(t))&&(r&&(r+=" "),r+=e);return r}const Zae="_root_98iqw_1",Jae="_article_98iqw_21",F3={root:Zae,article:Jae},SO=({className:t,children:e})=>m.jsx("div",{className:_u("react-tweet-theme",F3.root,t),children:m.jsx("article",{className:F3.article,children:e})}),M9=t=>m.jsx("img",{...t}),Xae="_header_nqq4j_1",ece="_avatar_nqq4j_11",tce="_avatarOverflow_nqq4j_16",nce="_avatarSquare_nqq4j_23",rce="_avatarShadow_nqq4j_26",sce="_author_nqq4j_37",ice="_authorLink_nqq4j_44",oce="_authorVerified_nqq4j_53",ace="_authorLinkText_nqq4j_56",cce="_authorMeta_nqq4j_63",lce="_authorFollow_nqq4j_66",uce="_username_nqq4j_69",dce="_follow_nqq4j_74",hce="_separator_nqq4j_82",fce="_brand_nqq4j_86",pce="_twitterIcon_nqq4j_90",jr={header:Xae,avatar:ece,avatarOverflow:tce,avatarSquare:nce,avatarShadow:rce,author:sce,authorLink:ice,authorVerified:oce,authorLinkText:ace,authorMeta:cce,authorFollow:lce,username:uce,follow:dce,separator:hce,brand:fce,twitterIcon:pce},gce="_verifiedOld_lcna5_1",mce="_verifiedBlue_lcna5_4",yce="_verifiedGovernment_lcna5_7",BS={verifiedOld:gce,verifiedBlue:mce,verifiedGovernment:yce},L9=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=m.jsx(Kae,{}),s=BS.verifiedBlue;if(n)switch(t.is_blue_verified||(s=BS.verifiedOld),t.verified_type){case"Government":r=m.jsx(Qae,{}),s=BS.verifiedGovernment;break;case"Business":r=m.jsx(Yae,{}),s=null;break}return n?m.jsx("div",{className:_u(e,s),children:r}):null},wce=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:M9,{user:s}=t;return m.jsxs("div",{className:jr.header,children:[m.jsxs("a",{href:t.url,className:jr.avatar,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:_u(jr.avatarOverflow,s.profile_image_shape==="Square"&&jr.avatarSquare),children:m.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),m.jsx("div",{className:jr.avatarOverflow,children:m.jsx("div",{className:jr.avatarShadow})})]}),m.jsxs("div",{className:jr.author,children:[m.jsxs("a",{href:t.url,className:jr.authorLink,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:jr.authorLinkText,children:m.jsx("span",{title:s.name,children:s.name})}),m.jsx(L9,{user:s,className:jr.authorVerified})]}),m.jsxs("div",{className:jr.authorMeta,children:[m.jsx("a",{href:t.url,className:jr.username,target:"_blank",rel:"noopener noreferrer",children:m.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),m.jsxs("div",{className:jr.authorFollow,children:[m.jsx("span",{className:jr.separator,children:""}),m.jsx("a",{href:s.follow_url,className:jr.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),m.jsx("a",{href:t.url,className:jr.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:jr.twitterIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},bce="_root_1ec15_1",vce={root:bce},Ece=({tweet:t})=>m.jsxs("a",{href:t.in_reply_to_url,className:vce.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),_ce="_root_eihfa_1",Cce={root:_ce},Sce=({href:t,children:e})=>m.jsx("a",{href:t,className:Cce.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),Ace="_root_1xq52_1",Ice={root:Ace},Nce=({tweet:t})=>m.jsx("p",{className:Ice.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return m.jsx(Sce,{href:e.href,children:e.text},n);case"media":return;default:return m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),W3=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,U9=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,xce=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,Tce=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,Rce=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,Pce=t=>`https://x.com/hashtag/${t.text}`,Oce=t=>`https://x.com/search?q=%24${t.text}`,kce=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,B9=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},Dce=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},$ce=t=>{const e=Dce(t);return e.length>1?e[1]:e[0]},Tx=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function z3(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return dm(n,"hashtag",t.entities.hashtags),dm(n,"mention",t.entities.user_mentions),dm(n,"url",t.entities.urls),dm(n,"symbol",t.entities.symbols),t.entities.media&&dm(n,"media",t.entities.media),Mce(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:Pce(r),text:s});case"mention":return Object.assign(r,{href:U9(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:Oce(r),text:s});default:return Object.assign(r,{text:s})}})}function dm(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function Mce(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const Lce=t=>({...t,url:W3(t),user:{...t.user,url:U9(t),follow_url:Rce(t)},like_url:xce(t),reply_url:Tce(t),in_reply_to_url:t.in_reply_to_screen_name?kce(t):void 0,entities:z3(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:W3(t.quoted_tweet),entities:z3(t.quoted_tweet)}:void 0}),Uce="_root_g9tkv_1",Bce="_rounded_g9tkv_6",jce="_mediaWrapper_g9tkv_10",Fce="_grid2Columns_g9tkv_17",Wce="_grid3_g9tkv_20",zce="_grid2x2_g9tkv_23",Hce="_mediaContainer_g9tkv_26",qce="_mediaLink_g9tkv_34",Gce="_skeleton_g9tkv_38",Vce="_image_g9tkv_43",_i={root:Uce,rounded:Bce,mediaWrapper:jce,grid2Columns:Fce,grid3:Wce,grid2x2:zce,mediaContainer:Hce,mediaLink:qce,skeleton:Gce,image:Vce},Kce="_anchor_fp31d_1",Yce="_videoButton_fp31d_17",Qce="_videoButtonIcon_fp31d_35",Zce="_watchOnTwitter_fp31d_44",Jce="_viewReplies_fp31d_60",sf={anchor:Kce,videoButton:Yce,videoButtonIcon:Qce,watchOnTwitter:Zce,viewReplies:Jce},Xce=({tweet:t,media:e})=>{const[n,r]=P.useState(!0),[s,i]=P.useState(!1),[o,a]=P.useState(!1),c=$ce(e);let l=0;return m.jsxs(m.Fragment,{children:[m.jsx("video",{className:_i.image,poster:B9(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:m.jsx("source",{src:c.url,type:c.content_type})}),n&&m.jsx("button",{type:"button",className:sf.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:m.jsx("svg",{viewBox:"0 0 24 24",className:sf.videoButtonIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&m.jsx("div",{className:sf.watchOnTwitter,children:m.jsx("a",{href:t.url,className:sf.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&m.jsx("a",{href:t.url,className:_u(sf.anchor,sf.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},ele=t=>m.jsx("img",{...t}),H3=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},j9=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:ele;return m.jsx("div",{className:_u(_i.root,!n&&_i.rounded),children:m.jsx("div",{className:_u(_i.mediaWrapper,o>1&&_i.grid2Columns,o===3&&_i.grid3,o>4&&_i.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>m.jsx(P.Fragment,{children:l.type==="photo"?m.jsxs("a",{href:t.url,className:_u(_i.mediaContainer,_i.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:_i.skeleton,style:H3(l,o)}),m.jsx(c,{src:B9(l,"small"),alt:l.ext_alt_text||"Image",className:_i.image,draggable:!0})]},l.media_url_https):m.jsxs("div",{className:_i.mediaContainer,children:[m.jsx("div",{className:_i.skeleton,style:H3(l,o)}),m.jsx(Xce,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},tle={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},nle=new Intl.DateTimeFormat("en-US",tle),rle=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},sle=t=>{const e=rle(nle.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n}  ${r}`},ile="_root_i24yn_1",ole={root:ile},ale=({tweet:t})=>{const e=new Date(t.created_at),n=sle(e);return m.jsx("a",{className:ole.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:m.jsx("time",{dateTime:e.toISOString(),children:n})})},cle="_info_19qcj_1",lle="_infoLink_19qcj_10",ule="_infoIcon_19qcj_30",jS={info:cle,infoLink:lle,infoIcon:ule},dle=({tweet:t})=>m.jsxs("div",{className:jS.info,children:[m.jsx(ale,{tweet:t}),m.jsx("a",{className:jS.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:jS.infoIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),hle="_actions_n2anf_1",fle="_like_n2anf_13",ple="_reply_n2anf_14",gle="_copy_n2anf_15",mle="_likeIconWrapper_n2anf_27",yle="_likeCount_n2anf_30",wle="_replyIconWrapper_n2anf_35",ble="_copyIconWrapper_n2anf_36",vle="_likeIcon_n2anf_27",Ele="_replyIcon_n2anf_35",_le="_copyIcon_n2anf_36",Cle="_replyText_n2anf_56",Sle="_copyText_n2anf_57",Zs={actions:hle,like:fle,reply:ple,copy:gle,likeIconWrapper:mle,likeCount:yle,replyIconWrapper:wle,copyIconWrapper:ble,likeIcon:vle,replyIcon:Ele,copyIcon:_le,replyText:Cle,copyText:Sle},Ale=({tweet:t})=>{const[e,n]=P.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return P.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),m.jsxs("button",{type:"button",className:Zs.copy,"aria-label":"Copy link",onClick:r,children:[m.jsx("div",{className:Zs.copyIconWrapper,children:e?m.jsx("svg",{viewBox:"0 0 24 24",className:Zs.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):m.jsx("svg",{viewBox:"0 0 24 24",className:Zs.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),m.jsx("span",{className:Zs.copyText,children:e?"Copied!":"Copy link"})]})},Ile=({tweet:t})=>{const e=Tx(t.favorite_count);return m.jsxs("div",{className:Zs.actions,children:[m.jsxs("a",{className:Zs.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[m.jsx("div",{className:Zs.likeIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:Zs.likeIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),m.jsx("span",{className:Zs.likeCount,children:e})]}),m.jsxs("a",{className:Zs.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[m.jsx("div",{className:Zs.replyIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:Zs.replyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),m.jsx("span",{className:Zs.replyText,children:"Reply"})]}),m.jsx(Ale,{tweet:t})]})},Nle="_replies_1cutb_1",xle="_link_1cutb_4",Tle="_text_1cutb_23",FS={replies:Nle,link:xle,text:Tle},Rle=({tweet:t})=>m.jsx("div",{className:FS.replies,children:m.jsx("a",{className:FS.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:m.jsx("span",{className:FS.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${Tx(t.conversation_count)} reply`:`Read ${Tx(t.conversation_count)} replies`})})}),Ple="_root_q5799_1",Ole="_article_q5799_16",q3={root:Ple,article:Ole},kle=({tweet:t,children:e})=>m.jsx("div",{className:q3.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:m.jsx("article",{className:q3.article,children:e})}),Dle="_header_r31i5_1",$le="_avatar_r31i5_11",Mle="_avatarSquare_r31i5_17",Lle="_author_r31i5_21",Ule="_authorText_r31i5_26",Ble="_username_r31i5_33",Zu={header:Dle,avatar:$le,avatarSquare:Mle,author:Lle,authorText:Ule,username:Ble},jle=({tweet:t})=>{const{user:e}=t;return m.jsxs("div",{className:Zu.header,children:[m.jsx("a",{href:t.url,className:Zu.avatar,target:"_blank",rel:"noopener noreferrer",children:m.jsx("div",{className:_u(Zu.avatarOverflow,e.profile_image_shape==="Square"&&Zu.avatarSquare),children:m.jsx(M9,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),m.jsxs("div",{className:Zu.author,children:[m.jsx("div",{className:Zu.authorText,children:m.jsx("span",{title:e.name,children:e.name})}),m.jsx(L9,{user:e}),m.jsx("div",{className:Zu.username,children:m.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},Fle="_root_175ot_1",Wle={root:Fle},zle=({tweet:t})=>m.jsx("p",{className:Wle.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),Hle=({tweet:t})=>{var e;return m.jsxs(kle,{tweet:t,children:[m.jsx(jle,{tweet:t}),m.jsx(zle,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?m.jsx(j9,{quoted:!0,tweet:t}):null]})},qle=({tweet:t,components:e})=>{var n;const r=P.useMemo(()=>Lce(t),[t]);return m.jsxs(SO,{children:[m.jsx(wce,{tweet:r,components:e}),r.in_reply_to_status_id_str&&m.jsx(Ece,{tweet:r}),m.jsx(Nce,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?m.jsx(j9,{tweet:r,components:e}):null,r.quoted_tweet&&m.jsx(Hle,{tweet:r.quoted_tweet}),m.jsx(dle,{tweet:r}),m.jsx(Ile,{tweet:r}),m.jsx(Rle,{tweet:r})]})},Gle="_root_16yxa_1",Vle={root:Gle},Kle=t=>m.jsx(SO,{children:m.jsxs("div",{className:Vle.root,children:[m.jsx("h3",{children:"Tweet not found"}),m.jsx("p",{children:"The embedded tweet could not be found"})]})}),Yle="_skeleton_oi7hr_1",Qle={skeleton:Yle},zb=({style:t})=>m.jsx("span",{className:Qle.skeleton,style:t}),Zle="_root_17qqv_1",Jle={root:Zle},Xle=()=>m.jsxs(SO,{className:Jle.root,children:[m.jsx(zb,{style:{height:"3rem",marginBottom:"0.75rem"}}),m.jsx(zb,{style:{height:"6rem",margin:"0.5rem 0"}}),m.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),m.jsx(zb,{style:{height:"2rem"}}),m.jsx(zb,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]}),F9=0,W9=1,z9=2,G3=3;var V3=Object.prototype.hasOwnProperty;function Rx(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&Rx(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(V3.call(t,n)&&++r&&!V3.call(e,n)||!(n in e)||!Rx(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const kc=new WeakMap,tu=()=>{},Is=tu(),Px=Object,Ft=t=>t===Is,ja=t=>typeof t=="function",Mu=(t,e)=>({...t,...e}),H9=t=>ja(t.then),WS={},Hb={},AO="undefined",k0=typeof window!=AO,Ox=typeof document!=AO,eue=k0&&"Deno"in window,tue=()=>k0&&typeof window.requestAnimationFrame!=AO,q9=(t,e)=>{const n=kc.get(t);return[()=>!Ft(e)&&t.get(e)||WS,r=>{if(!Ft(e)){const s=t.get(e);e in Hb||(Hb[e]=s),n[5](e,Mu(s,r),s||WS)}},n[6],()=>!Ft(e)&&e in Hb?Hb[e]:!Ft(e)&&t.get(e)||WS]};let kx=!0;const nue=()=>kx,[Dx,$x]=k0&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[tu,tu],rue=()=>{const t=Ox&&document.visibilityState;return Ft(t)||t!=="hidden"},sue=t=>(Ox&&document.addEventListener("visibilitychange",t),Dx("focus",t),()=>{Ox&&document.removeEventListener("visibilitychange",t),$x("focus",t)}),iue=t=>{const e=()=>{kx=!0,t()},n=()=>{kx=!1};return Dx("online",e),Dx("offline",n),()=>{$x("online",e),$x("offline",n)}},oue={isOnline:nue,isVisible:rue},aue={initFocus:sue,initReconnect:iue},K3=!ki.useId,Cw=!k0||eue,cue=t=>tue()?window.requestAnimationFrame(t):setTimeout(t,1),zS=Cw?P.useEffect:P.useLayoutEffect,HS=typeof navigator<"u"&&navigator.connection,Y3=!Cw&&HS&&(["slow-2g","2g"].includes(HS.effectiveType)||HS.saveData),qb=new WeakMap,lue=t=>Px.prototype.toString.call(t),qS=(t,e)=>t===`[object ${e}]`;let uue=0;const Mx=t=>{const e=typeof t,n=lue(t),r=qS(n,"Date"),s=qS(n,"RegExp"),i=qS(n,"Object");let o,a;if(Px(t)===t&&!r&&!s){if(o=qb.get(t),o)return o;if(o=++uue+"~",qb.set(t,o),Array.isArray(t)){for(o="@",a=0;a<t.length;a++)o+=Mx(t[a])+",";qb.set(t,o)}if(i){o="#";const c=Px.keys(t).sort();for(;!Ft(a=c.pop());)Ft(t[a])||(o+=a+":"+Mx(t[a])+",");qb.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},IO=t=>{if(ja(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?Mx(t):"",[t,e]};let due=0;const Lx=()=>++due;async function G9(...t){const[e,n,r,s]=t,i=Mu({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(ja(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=IO(h);if(!f)return;const[p,g]=q9(e,f),[w,y,b,E]=kc.get(e),_=()=>{const F=w[f];return(ja(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete b[f],delete E[f],F&&F[0])?F[0](z9).then(()=>p().data):p().data};if(t.length<3)return _();let C=r,I,A=!1;const x=Lx();y[f]=[x,0];const S=!Ft(c),k=p(),O=k.data,U=k._c,G=Ft(U)?O:U;if(S&&(c=ja(c)?c(G,O):c,g({data:c,_c:G})),ja(C))try{C=C(G)}catch(F){I=F,A=!0}if(C&&H9(C))if(C=await C.catch(F=>{I=F,A=!0}),x!==y[f][0]){if(A)throw I;return C}else A&&S&&l(I)&&(o=!0,g({data:G,_c:Is}));if(o&&!A)if(ja(o)){const F=o(C,G);g({data:F,error:Is,_c:Is})}else g({data:C,error:Is,_c:Is});if(y[f][1]=Lx(),Promise.resolve(_()).then(()=>{g({_c:Is})}),A){if(u)throw I;return}return C}}const Q3=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},hue=(t,e)=>{if(!kc.has(t)){const n=Mu(aue,e),r=Object.create(null),s=G9.bind(Is,t);let i=tu;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!kc.has(t)&&(kc.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!Cw)){const u=n.initFocus(setTimeout.bind(Is,Q3.bind(Is,r,F9))),d=n.initReconnect(setTimeout.bind(Is,Q3.bind(Is,r,W9)));i=()=>{u&&u(),d&&d(),kc.delete(t)}}};return l(),[t,s,l,i]}return[t,kc.get(t)[4]]},fue=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!Ft(i)&&o>i||setTimeout(r,a,s)},pue=Rx,[V9,gue]=hue(new Map),mue=Mu({onLoadingSlow:tu,onSuccess:tu,onError:tu,onErrorRetry:fue,onDiscarded:tu,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Y3?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Y3?5e3:3e3,compare:pue,isPaused:()=>!1,cache:V9,mutate:gue,fallback:{}},oue),yue=(t,e)=>{const n=Mu(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=Mu(s,o))}return n},wue=P.createContext({}),bue="$inf$",K9=k0&&window.__SWR_DEVTOOLS_USE__,vue=K9?window.__SWR_DEVTOOLS_USE__:[],Eue=()=>{K9&&(window.__SWR_DEVTOOLS_REACT__=ki)},_ue=t=>ja(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],Cue=()=>Mu(mue,P.useContext(wue)),Sue=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=IO(e),[,,,a]=kc.get(V9);if(o.startsWith(bue))return n(...i);const c=a[o];return Ft(c)?n(...i):(delete a[o],c)}),r),Aue=vue.concat(Sue),Iue=t=>function(...n){const r=Cue(),[s,i,o]=_ue(n),a=yue(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(Aue);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},Nue=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};Eue();const GS=ki.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),VS={dedupe:!0},xue=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,w]=kc.get(r),[y,b]=IO(t),E=P.useRef(!1),_=P.useRef(!1),C=P.useRef(y),I=P.useRef(e),A=P.useRef(n),x=()=>A.current,S=()=>x().isVisible()&&x().isOnline(),[k,O,U,G]=q9(r,y),F=P.useRef({}).current,T=Ft(o)?Ft(n.fallback)?Is:n.fallback[y]:o,N=(Ae,pe)=>{for(const ye in F){const Ve=ye;if(Ve==="data"){if(!s(Ae[Ve],pe[Ve])&&(!Ft(Ae[Ve])||!s(ie,pe[Ve])))return!1}else if(pe[Ve]!==Ae[Ve])return!1}return!0},$=P.useMemo(()=>{const Ae=!y||!e?!1:Ft(a)?x().isPaused()||i?!1:c!==!1:a,pe=Lt=>{const Un=Mu(Lt);return delete Un._k,Ae?{isValidating:!0,isLoading:!0,...Un}:Un},ye=k(),Ve=G(),Zt=pe(ye),Pt=ye===Ve?Zt:pe(Ve);let on=Zt;return[()=>{const Lt=pe(k());return N(Lt,on)?(on.data=Lt.data,on.isLoading=Lt.isLoading,on.isValidating=Lt.isValidating,on.error=Lt.error,on):(on=Lt,Lt)},()=>Pt]},[r,y]),R=y9.useSyncExternalStore(P.useCallback(Ae=>U(y,(pe,ye)=>{N(ye,pe)||Ae()}),[r,y]),$[0],$[1]),D=!E.current,B=f[y]&&f[y].length>0,H=R.data,J=Ft(H)?T&&H9(T)?GS(T):T:H,ee=R.error,ne=P.useRef(J),ie=h?Ft(H)?Ft(ne.current)?J:ne.current:H:J,we=B&&!Ft(ee)?!1:D&&!Ft(a)?a:x().isPaused()?!1:i?Ft(J)?!1:c:Ft(J)||c,Z=!!(y&&e&&D&&we),se=Ft(R.isValidating)?Z:R.isValidating,ue=Ft(R.isLoading)?Z:R.isLoading,ce=P.useCallback(async Ae=>{const pe=I.current;if(!y||!pe||_.current||x().isPaused())return!1;let ye,Ve,Zt=!0;const Pt=Ae||{},on=!g[y]||!Pt.dedupe,Lt=()=>K3?!_.current&&y===C.current&&E.current:y===C.current,Un={isValidating:!1,isLoading:!1},mi=()=>{O(Un)},To=()=>{const Pn=g[y];Pn&&Pn[1]===Ve&&delete g[y]},ys={isValidating:!0};Ft(k().data)&&(ys.isLoading=!0);try{if(on&&(O(ys),n.loadingTimeout&&Ft(k().data)&&setTimeout(()=>{Zt&&Lt()&&x().onLoadingSlow(y,n)},n.loadingTimeout),g[y]=[pe(b),Lx()]),[ye,Ve]=g[y],ye=await ye,on&&setTimeout(To,n.dedupingInterval),!g[y]||g[y][1]!==Ve)return on&&Lt()&&x().onDiscarded(y),!1;Un.error=Is;const Pn=p[y];if(!Ft(Pn)&&(Ve<=Pn[0]||Ve<=Pn[1]||Pn[1]===0))return mi(),on&&Lt()&&x().onDiscarded(y),!1;const ur=k().data;Un.data=s(ur,ye)?ur:ye,on&&Lt()&&x().onSuccess(ye,y,n)}catch(Pn){To();const ur=x(),{shouldRetryOnError:wn}=ur;ur.isPaused()||(Un.error=Pn,on&&Lt()&&(ur.onError(Pn,y,ur),(wn===!0||ja(wn)&&wn(Pn))&&(!x().revalidateOnFocus||!x().revalidateOnReconnect||S())&&ur.onErrorRetry(Pn,y,ur,Gi=>{const cc=f[y];cc&&cc[0]&&cc[0](G3,Gi)},{retryCount:(Pt.retryCount||0)+1,dedupe:!0})))}return Zt=!1,mi(),!0},[y,r]),fe=P.useCallback((...Ae)=>G9(r,C.current,...Ae),[]);if(zS(()=>{I.current=e,A.current=n,Ft(H)||(ne.current=H)}),zS(()=>{if(!y)return;const Ae=ce.bind(Is,VS);let pe=0;x().revalidateOnFocus&&(pe=Date.now()+x().focusThrottleInterval);const Ve=Nue(y,f,(Zt,Pt={})=>{if(Zt==F9){const on=Date.now();x().revalidateOnFocus&&on>pe&&S()&&(pe=on+x().focusThrottleInterval,Ae())}else if(Zt==W9)x().revalidateOnReconnect&&S()&&Ae();else{if(Zt==z9)return ce();if(Zt==G3)return ce(Pt)}});return _.current=!1,C.current=y,E.current=!0,O({_k:b}),we&&(g[y]||(Ft(J)||Cw?Ae():cue(Ae))),()=>{_.current=!0,Ve()}},[y]),zS(()=>{let Ae;function pe(){const Ve=ja(l)?l(k().data):l;Ve&&Ae!==-1&&(Ae=setTimeout(ye,Ve))}function ye(){!k().error&&(u||x().isVisible())&&(d||x().isOnline())?ce(VS).then(pe):pe()}return pe(),()=>{Ae&&(clearTimeout(Ae),Ae=-1)}},[l,u,d,y]),P.useDebugValue(ie),i&&Ft(J)&&y){if(!K3&&Cw)throw new Error("Fallback data is required when using Suspense in SSR.");I.current=e,A.current=n,_.current=!1;const Ae=w[y];if(!Ft(Ae)){const pe=fe(Ae);GS(pe)}if(Ft(ee)){const pe=ce(VS);Ft(ie)||(pe.status="fulfilled",pe.value=!0),GS(pe)}else throw ee}return{mutate:fe,get data(){return F.data=!0,ie},get error(){return F.error=!0,ee},get isValidating(){return F.isValidating=!0,se},get isLoading(){return F.isLoading=!0,ue}}},Z3=Iue(xue);class Tue extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const Rue=Z3.default||Z3,Pue="https://react-tweet.vercel.app";async function Oue([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new Tue({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const kue=(t,e,n)=>{const{isLoading:r,data:s,error:i}=Rue(()=>e||t?[e||t&&`${Pue}/api/tweet/${t}`,n]:null,Oue,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},Due=({id:t,apiUrl:e,fallback:n=m.jsx(Xle,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=kue(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||Kle;return m.jsx(l,{error:i?i(a):a})}return m.jsx(qle,{tweet:o,components:r})};var OC={exports:{}},Y9={},Q9={exports:{}},$ue="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Mue=$ue,Lue=Mue;function Z9(){}function J9(){}J9.resetWarningCache=Z9;var Uue=function(){function t(r,s,i,o,a,c){if(c!==Lue){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:J9,resetWarningCache:Z9};return n.PropTypes=n,n};Q9.exports=Uue();var X9=Q9.exports,Ux={exports:{}};function e7(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=e7(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function J3(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=e7(t))&&(r&&(r+=" "),r+=e);return r}Ux.exports=J3,Ux.exports.clsx=J3;var Bue=Ux.exports,nr={},oc={};Object.defineProperty(oc,"__esModule",{value:!0});oc.dontSetMe=Hue;oc.findInArray=jue;oc.int=zue;oc.isFunction=Fue;oc.isNum=Wue;function jue(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function Fue(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function Wue(t){return typeof t=="number"&&!isNaN(t)}function zue(t){return parseInt(t,10)}function Hue(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var Lh={};Object.defineProperty(Lh,"__esModule",{value:!0});Lh.browserPrefixToKey=n7;Lh.browserPrefixToStyle=que;Lh.default=void 0;Lh.getPrefix=t7;const KS=["Moz","Webkit","O","ms"];function t7(){var n,r;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(r=(n=window.document)==null?void 0:n.documentElement)==null?void 0:r.style;if(!e||t in e)return"";for(let s=0;s<KS.length;s++)if(n7(t,KS[s])in e)return KS[s];return""}function n7(t,e){return e?`${e}${Gue(t)}`:t}function que(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function Gue(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}Lh.default=t7();Object.defineProperty(nr,"__esModule",{value:!0});nr.addClassName=i7;nr.addEvent=Kue;nr.addUserSelectStyles=ide;nr.createCSSTransform=tde;nr.createSVGTransform=nde;nr.getTouch=rde;nr.getTouchIdentifier=sde;nr.getTranslation=NO;nr.innerHeight=Jue;nr.innerWidth=Xue;nr.matchesSelector=s7;nr.matchesSelectorAndParentsTo=Vue;nr.offsetXYFromParent=ede;nr.outerHeight=Que;nr.outerWidth=Zue;nr.removeClassName=o7;nr.removeEvent=Yue;nr.scheduleRemoveUserSelectStyles=ode;var Mi=oc,X3=r7(Lh);function r7(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(r7=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}let Gb="";function s7(t,e){return Gb||(Gb=(0,Mi.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,Mi.isFunction)(t[n])})),(0,Mi.isFunction)(t[Gb])?t[Gb](e):!1}function Vue(t,e,n){let r=t;do{if(s7(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function Kue(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function Yue(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function Que(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Mi.int)(n.borderTopWidth),e+=(0,Mi.int)(n.borderBottomWidth),e}function Zue(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Mi.int)(n.borderLeftWidth),e+=(0,Mi.int)(n.borderRightWidth),e}function Jue(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Mi.int)(n.paddingTop),e-=(0,Mi.int)(n.paddingBottom),e}function Xue(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Mi.int)(n.paddingLeft),e-=(0,Mi.int)(n.paddingRight),e}function ede(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function tde(t,e){const n=NO(t,e,"px");return{[(0,X3.browserPrefixToKey)("transform",X3.default)]:n}}function nde(t,e){return NO(t,e,"")}function NO(t,e,n){let{x:r,y:s}=t,i=`translate(${r}${n},${s}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function rde(t,e){return t.targetTouches&&(0,Mi.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,Mi.findInArray)(t.changedTouches,n=>e===n.identifier)}function sde(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function ide(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&i7(t.body,"react-draggable-transparent-selection")}function ode(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{e$(t)}):e$(t)}function e$(t){if(t)try{if(t.body&&o7(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function i7(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function o7(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var ac={};Object.defineProperty(ac,"__esModule",{value:!0});ac.canDragX=lde;ac.canDragY=ude;ac.createCoreData=hde;ac.createDraggableData=fde;ac.getBoundPosition=ade;ac.getControlPosition=dde;ac.snapToGrid=cde;var Ci=oc,Jf=nr;function ade(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:pde(r);const s=xO(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=s.getRootNode().querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,Ci.int)(u.paddingLeft)+(0,Ci.int)(l.marginLeft),top:-s.offsetTop+(0,Ci.int)(u.paddingTop)+(0,Ci.int)(l.marginTop),right:(0,Jf.innerWidth)(c)-(0,Jf.outerWidth)(s)-s.offsetLeft+(0,Ci.int)(u.paddingRight)-(0,Ci.int)(l.marginRight),bottom:(0,Jf.innerHeight)(c)-(0,Jf.outerHeight)(s)-s.offsetTop+(0,Ci.int)(u.paddingBottom)-(0,Ci.int)(l.marginBottom)}}return(0,Ci.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,Ci.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,Ci.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,Ci.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function cde(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function lde(t){return t.props.axis==="both"||t.props.axis==="x"}function ude(t){return t.props.axis==="both"||t.props.axis==="y"}function dde(t,e,n){const r=typeof e=="number"?(0,Jf.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=xO(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,Jf.offsetXYFromParent)(r||t,i,n.props.scale)}function hde(t,e,n){const r=!(0,Ci.isNum)(t.lastX),s=xO(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function fde(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function pde(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function xO(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var kC={},DC={};Object.defineProperty(DC,"__esModule",{value:!0});DC.default=gde;function gde(){}Object.defineProperty(kC,"__esModule",{value:!0});kC.default=void 0;var YS=a7(P),ws=TO(X9),mde=TO(PP),as=nr,gl=ac,QS=oc,hm=TO(DC);function TO(t){return t&&t.__esModule?t:{default:t}}function a7(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(a7=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}function vs(t,e,n){return(e=yde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yde(t){var e=wde(t,"string");return typeof e=="symbol"?e:e+""}function wde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Uo={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let ml=Uo.mouse,$C=class extends YS.Component{constructor(){super(...arguments),vs(this,"dragging",!1),vs(this,"lastX",NaN),vs(this,"lastY",NaN),vs(this,"touchIdentifier",null),vs(this,"mounted",!1),vs(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,as.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,as.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const s=(0,as.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,gl.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,gl.createCoreData)(this,o,a);(0,hm.default)("DraggableCore: handleDragStart: %j",c),(0,hm.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,as.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,as.addEvent)(r,ml.move,this.handleDrag),(0,as.addEvent)(r,ml.stop,this.handleDragStop))}),vs(this,"handleDrag",e=>{const n=(0,gl.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,gl.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,gl.createCoreData)(this,r,s);if((0,hm.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),vs(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,gl.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,gl.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,gl.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,as.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,hm.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,hm.default)("DraggableCore: Removing handlers"),(0,as.removeEvent)(a.ownerDocument,ml.move,this.handleDrag),(0,as.removeEvent)(a.ownerDocument,ml.stop,this.handleDragStop))}),vs(this,"onMouseDown",e=>(ml=Uo.mouse,this.handleDragStart(e))),vs(this,"onMouseUp",e=>(ml=Uo.mouse,this.handleDragStop(e))),vs(this,"onTouchStart",e=>(ml=Uo.touch,this.handleDragStart(e))),vs(this,"onTouchEnd",e=>(ml=Uo.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,as.addEvent)(e,Uo.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,as.removeEvent)(n,Uo.mouse.move,this.handleDrag),(0,as.removeEvent)(n,Uo.touch.move,this.handleDrag),(0,as.removeEvent)(n,Uo.mouse.stop,this.handleDragStop),(0,as.removeEvent)(n,Uo.touch.stop,this.handleDragStop),(0,as.removeEvent)(e,Uo.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,as.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,r;return(e=this.props)!=null&&e.nodeRef?(r=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:r.current:mde.default.findDOMNode(this)}render(){return YS.cloneElement(YS.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};kC.default=$C;vs($C,"displayName","DraggableCore");vs($C,"propTypes",{allowAnyClick:ws.default.bool,allowMobileScroll:ws.default.bool,children:ws.default.node.isRequired,disabled:ws.default.bool,enableUserSelectHack:ws.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:ws.default.arrayOf(ws.default.number),handle:ws.default.string,cancel:ws.default.string,nodeRef:ws.default.object,onStart:ws.default.func,onDrag:ws.default.func,onStop:ws.default.func,onMouseDown:ws.default.func,scale:ws.default.number,className:QS.dontSetMe,style:QS.dontSetMe,transform:QS.dontSetMe});vs($C,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=d(P),n=u(X9),r=u(PP),s=Bue,i=nr,o=ac,a=oc,c=u(kC),l=u(DC);function u(y){return y&&y.__esModule?y:{default:y}}function d(y,b){if(typeof WeakMap=="function")var E=new WeakMap,_=new WeakMap;return(d=function(C,I){if(!I&&C&&C.__esModule)return C;var A,x,S={__proto__:null,default:C};if(C===null||typeof C!="object"&&typeof C!="function")return S;if(A=I?_:E){if(A.has(C))return A.get(C);A.set(C,S)}for(const k in C)k!=="default"&&{}.hasOwnProperty.call(C,k)&&((x=(A=Object.defineProperty)&&Object.getOwnPropertyDescriptor(C,k))&&(x.get||x.set)?A(S,k,x):S[k]=C[k]);return S})(y,b)}function h(){return h=Object.assign?Object.assign.bind():function(y){for(var b=1;b<arguments.length;b++){var E=arguments[b];for(var _ in E)({}).hasOwnProperty.call(E,_)&&(y[_]=E[_])}return y},h.apply(null,arguments)}function f(y,b,E){return(b=p(b))in y?Object.defineProperty(y,b,{value:E,enumerable:!0,configurable:!0,writable:!0}):y[b]=E,y}function p(y){var b=g(y,"string");return typeof b=="symbol"?b:b+""}function g(y,b){if(typeof y!="object"||!y)return y;var E=y[Symbol.toPrimitive];if(E!==void 0){var _=E.call(y,b);if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(y)}class w extends e.Component{static getDerivedStateFromProps(b,E){let{position:_}=b,{prevPropsPosition:C}=E;return _&&(!C||_.x!==C.x||_.y!==C.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:_,prevPropsPosition:C}),{x:_.x,y:_.y,prevPropsPosition:{..._}}):null}constructor(b){super(b),f(this,"onDragStart",(E,_)=>{if((0,l.default)("Draggable: onDragStart: %j",_),this.props.onStart(E,(0,o.createDraggableData)(this,_))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),f(this,"onDrag",(E,_)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",_);const C=(0,o.createDraggableData)(this,_),I={x:C.x,y:C.y,slackX:0,slackY:0};if(this.props.bounds){const{x,y:S}=I;I.x+=this.state.slackX,I.y+=this.state.slackY;const[k,O]=(0,o.getBoundPosition)(this,I.x,I.y);I.x=k,I.y=O,I.slackX=this.state.slackX+(x-I.x),I.slackY=this.state.slackY+(S-I.y),C.x=I.x,C.y=I.y,C.deltaX=I.x-this.state.x,C.deltaY=I.y-this.state.y}if(this.props.onDrag(E,C)===!1)return!1;this.setState(I)}),f(this,"onDragStop",(E,_)=>{if(!this.state.dragging||this.props.onStop(E,(0,o.createDraggableData)(this,_))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",_);const I={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x,y:S}=this.props.position;I.x=x,I.y=S}this.setState(I)}),this.state={dragging:!1,dragged:!1,x:b.position?b.position.x:b.defaultPosition.x,y:b.position?b.position.y:b.defaultPosition.y,prevPropsPosition:{...b.position},slackX:0,slackY:0,isElementSVG:!1},b.position&&!(b.onDrag||b.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var b,E;return((E=(b=this.props)==null?void 0:b.nodeRef)==null?void 0:E.current)??r.default.findDOMNode(this)}render(){const{axis:b,bounds:E,children:_,defaultPosition:C,defaultClassName:I,defaultClassNameDragging:A,defaultClassNameDragged:x,position:S,positionOffset:k,scale:O,...U}=this.props;let G={},F=null;const N=!!!S||this.state.dragging,$=S||C,R={x:(0,o.canDragX)(this)&&N?this.state.x:$.x,y:(0,o.canDragY)(this)&&N?this.state.y:$.y};this.state.isElementSVG?F=(0,i.createSVGTransform)(R,k):G=(0,i.createCSSTransform)(R,k);const D=(0,s.clsx)(_.props.className||"",I,{[A]:this.state.dragging,[x]:this.state.dragged});return e.createElement(c.default,h({},U,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(_),{className:D,style:{..._.props.style,...G},transform:F}))}}t.default=w,f(w,"displayName","Draggable"),f(w,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),f(w,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(Y9);const{default:c7,DraggableCore:bde}=Y9;OC.exports=c7;OC.exports.default=c7;OC.exports.DraggableCore=bde;var vde=OC.exports;const D0=xh(vde);function Gn(){return Gn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gn.apply(null,arguments)}function l7(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var u7={exports:{}},dn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Br=typeof Symbol=="function"&&Symbol.for,RO=Br?Symbol.for("react.element"):60103,PO=Br?Symbol.for("react.portal"):60106,MC=Br?Symbol.for("react.fragment"):60107,LC=Br?Symbol.for("react.strict_mode"):60108,UC=Br?Symbol.for("react.profiler"):60114,BC=Br?Symbol.for("react.provider"):60109,jC=Br?Symbol.for("react.context"):60110,OO=Br?Symbol.for("react.async_mode"):60111,FC=Br?Symbol.for("react.concurrent_mode"):60111,WC=Br?Symbol.for("react.forward_ref"):60112,zC=Br?Symbol.for("react.suspense"):60113,Ede=Br?Symbol.for("react.suspense_list"):60120,HC=Br?Symbol.for("react.memo"):60115,qC=Br?Symbol.for("react.lazy"):60116,_de=Br?Symbol.for("react.block"):60121,Cde=Br?Symbol.for("react.fundamental"):60117,Sde=Br?Symbol.for("react.responder"):60118,Ade=Br?Symbol.for("react.scope"):60119;function Hi(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case RO:switch(t=t.type,t){case OO:case FC:case MC:case UC:case LC:case zC:return t;default:switch(t=t&&t.$$typeof,t){case jC:case WC:case qC:case HC:case BC:return t;default:return e}}case PO:return e}}}function d7(t){return Hi(t)===FC}dn.AsyncMode=OO;dn.ConcurrentMode=FC;dn.ContextConsumer=jC;dn.ContextProvider=BC;dn.Element=RO;dn.ForwardRef=WC;dn.Fragment=MC;dn.Lazy=qC;dn.Memo=HC;dn.Portal=PO;dn.Profiler=UC;dn.StrictMode=LC;dn.Suspense=zC;dn.isAsyncMode=function(t){return d7(t)||Hi(t)===OO};dn.isConcurrentMode=d7;dn.isContextConsumer=function(t){return Hi(t)===jC};dn.isContextProvider=function(t){return Hi(t)===BC};dn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===RO};dn.isForwardRef=function(t){return Hi(t)===WC};dn.isFragment=function(t){return Hi(t)===MC};dn.isLazy=function(t){return Hi(t)===qC};dn.isMemo=function(t){return Hi(t)===HC};dn.isPortal=function(t){return Hi(t)===PO};dn.isProfiler=function(t){return Hi(t)===UC};dn.isStrictMode=function(t){return Hi(t)===LC};dn.isSuspense=function(t){return Hi(t)===zC};dn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===MC||t===FC||t===UC||t===LC||t===zC||t===Ede||typeof t=="object"&&t!==null&&(t.$$typeof===qC||t.$$typeof===HC||t.$$typeof===BC||t.$$typeof===jC||t.$$typeof===WC||t.$$typeof===Cde||t.$$typeof===Sde||t.$$typeof===Ade||t.$$typeof===_de)};dn.typeOf=Hi;u7.exports=dn;var Ide=u7.exports,kO=Ide,Nde={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},xde={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Tde={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},h7={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},DO={};DO[kO.ForwardRef]=Tde;DO[kO.Memo]=h7;function t$(t){return kO.isMemo(t)?h7:DO[t.$$typeof]||Nde}var Rde=Object.defineProperty,Pde=Object.getOwnPropertyNames,n$=Object.getOwnPropertySymbols,Ode=Object.getOwnPropertyDescriptor,kde=Object.getPrototypeOf,r$=Object.prototype;function f7(t,e,n){if(typeof e!="string"){if(r$){var r=kde(e);r&&r!==r$&&f7(t,r,n)}var s=Pde(e);n$&&(s=s.concat(n$(e)));for(var i=t$(t),o=t$(e),a=0;a<s.length;++a){var c=s[a];if(!xde[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=Ode(e,c);try{Rde(t,c,l)}catch{}}}}return t}var Dde=f7;const $de=xh(Dde);var p7={};Object.defineProperty(p7,"__esModule",{value:!0});p7.default=Mde;function Mde(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function Vb(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o_(){return o_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o_.apply(this,arguments)}function Lde(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function yl(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ude(t){var e=function(n){Lde(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,Vb(yl(yl(i)),"cachedTheme",void 0),Vb(yl(yl(i)),"lastOuterTheme",void 0),Vb(yl(yl(i)),"lastTheme",void 0),Vb(yl(yl(i)),"renderProvider",function(l){var u=i.props.children;return ki.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?o_({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?ki.createElement(t.Consumer,null,this.renderProvider):null},r}(ki.Component);return e}function Bde(t){return function(n){var r=ki.forwardRef(function(s,i){return ki.createElement(t.Consumer,null,function(o){return ki.createElement(n,o_({theme:o,ref:i},s))})});return $de(r,n),r}}function jde(t){var e=function(){var r=ki.useContext(t);return r};return e}function Fde(t){return{context:t,withTheme:Bde(t),useTheme:jde(t),ThemeProvider:Ude(t)}}var g7=P.createContext();Fde(g7);var s$=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pg=(typeof window>"u"?"undefined":s$(window))==="object"&&(typeof document>"u"?"undefined":s$(document))==="object"&&document.nodeType===9;function Sw(t){"@babel/helpers - typeof";return Sw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sw(t)}function Wde(t,e){if(Sw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function zde(t){var e=Wde(t,"string");return Sw(e)=="symbol"?e:e+""}function Hde(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zde(r.key),r)}}function $O(t,e,n){return e&&Hde(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bx(t,e){return Bx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Bx(t,e)}function m7(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Bx(t,e)}function i$(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var qde={}.constructor;function jx(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(jx);if(t.constructor!==qde)return t;var e={};for(var n in t)e[n]=jx(t[n]);return e}function GC(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=jx(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var o$=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},Gd=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=o$(e[r]," ");else n=o$(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function Og(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function fm(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function Aw(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=Og(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=fm(f+":"+u+Gd(p)+";",o))}}else for(var g in a){var w=a[g];w!=null&&(r&&(r+=l),r+=fm(g+":"+u+Gd(w)+";",o))}for(var y in e){var b=e[y];b!=null&&y!=="fallbacks"&&(r&&(r+=l),r+=fm(y+":"+u+Gd(b)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),fm(""+t+u+"{"+r,o)+fm("}",o))}var Gde=/([[\].#*$><+~=|^:(),"'`\s])/g,a$=typeof CSS<"u"&&CSS.escape,MO=function(t){return a$?a$(t):t.replace(Gde,"\\$1")},y7=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),Fx=function(t){m7(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(i$(i$(o)),l),o.selectorText="."+MO(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=Gd(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Gn({},s,{allowEmpty:!0}):s;return Aw(this.selectorText,this.style,a)},$O(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(y7),Vde={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new Fx(e,n,r)}},ZS={indent:1,children:!0},Kde=/@([\w-]+)/,Yde=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(Kde);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new VC(Gn({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=ZS);var s=Og(r),i=s.linebreak;if(r.indent==null&&(r.indent=ZS.indent),r.children==null&&(r.children=ZS.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),Qde=/@container|@media|@supports\s+/,Zde={onCreateRule:function(e,n,r){return Qde.test(e)?new Yde(e,n,r):null}},JS={indent:1,children:!0},Jde=/@keyframes\s+([\w-]+)/,Wx=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(Jde);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:MO(c(this,a)),this.rules=new VC(Gn({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],Gn({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=JS);var s=Og(r),i=s.linebreak;if(r.indent==null&&(r.indent=JS.indent),r.children==null&&(r.children=JS.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),Xde=/@keyframes\s+/,ehe=/\$([\w-]+)/g,zx=function(e,n){return typeof e=="string"?e.replace(ehe,function(r,s){return s in n?n[s]:r}):e},c$=function(e,n,r){var s=e[n],i=zx(s,r);i!==s&&(e[n]=i)},the={onCreateRule:function(e,n,r){return typeof e=="string"&&Xde.test(e)?new Wx(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&c$(e,"animation-name",r.keyframes),"animation"in e&&c$(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return zx(e,s.keyframes);case"animation-name":return zx(e,s.keyframes);default:return e}}},nhe=function(t){m7(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Gn({},s,{allowEmpty:!0}):s;return Aw(this.key,this.style,a)},e}(y7),rhe={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new nhe(e,n,r):null}},she=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=Og(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=Aw(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return Aw(this.at,this.style,r)},t}(),ihe=/@font-face/,ohe={onCreateRule:function(e,n,r){return ihe.test(e)?new she(e,n,r):null}},ahe=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return Aw(this.key,this.style,r)},t}(),che={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new ahe(e,n,r):null}},lhe=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),uhe={"@charset":!0,"@import":!0,"@namespace":!0},dhe={onCreateRule:function(e,n,r){return e in uhe?new lhe(e,n,r):null}},l$=[Vde,Zde,the,rhe,ohe,che,dhe],hhe={process:!0},u$={force:!0,process:!0},VC=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=Gn({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+MO(this.classes[p]));var g=GC(p,s,f);if(!g)return null;this.register(g);var w=f.index===void 0?this.index.length:f.index;return this.index.splice(w,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=Gn({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof Fx?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof Wx&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof Fx?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof Wx&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=hhe);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,u$)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,u$)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=Og(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),w7=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Gn({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new VC(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),fhe=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),phe=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=l7(s,["attached"]),a=Og(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},$O(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),py=new phe,Hx=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),qx="2f1acc6c3a606b082e5eef5e54414ffb";Hx[qx]==null&&(Hx[qx]=0);var d$=Hx[qx]++,h$=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+d$+a+n:c+i.key+"-"+d$+(a?"-"+a:"")+"-"+n};return r},b7=function(e){var n;return function(){return n||(n=e()),n}},ghe=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},mhe=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=Gd(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},yhe=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},whe=function(e,n){return e.selectorText=n,e.selectorText===n},v7=b7(function(){return document.querySelector("head")});function bhe(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function vhe(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function Ehe(t){for(var e=v7(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function _he(t){var e=py.registry;if(e.length>0){var n=bhe(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=vhe(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=Ehe(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function Che(t,e){var n=e.insertionPoint,r=_he(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}v7().appendChild(t)}var She=b7(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),f$=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},p$=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},Ahe=function(){var e=document.createElement("style");return e.textContent=`
`,e},Ihe=function(){function t(n){this.getPropertyValue=ghe,this.setProperty=mhe,this.removeProperty=yhe,this.setSelector=whe,this.hasInsertedRules=!1,this.cssRules=[],n&&py.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||Ahe(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=She();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){Che(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=p$(i,s);if(a=f$(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=p$(i,s),d=f$(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof w7&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),Nhe=0,xhe=function(){function t(n){this.id=Nhe++,this.version="10.10.0",this.plugins=new fhe,this.options={id:{minify:!1},createGenerateId:h$,Renderer:Pg?Ihe:null,plugins:[]},this.generateId=h$({minify:!1});for(var r=0;r<l$.length;r++)this.plugins.use(l$[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=Gn({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=py.index===0?0:py.index+1);var a=new w7(r,Gn({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),py.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=Gn({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=GC(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),E7=function(e){return new xhe(e)},g$=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},$O(t,[{key:"size",get:function(){return this.length}}]),t}(),LO=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function _7(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=_7(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */E7();var C7=Date.now(),XS="fnValues"+C7,eA="fnStyle"+ ++C7,The=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=GC(n,{},s);return i[eA]=r,i},onProcessStyle:function(n,r){if(XS in r||eA in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[XS]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[eA];a&&(o.style=a(n)||{});var c=o[XS];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function Rhe(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var Of;typeof self<"u"?Of=self:typeof window<"u"?Of=window:typeof global<"u"?Of=global:typeof module<"u"?Of=module:Of=Function("return this")();var m$=Rhe(Of),y$=function(e){return e&&e[m$]&&e===e[m$]()},Phe=function(e){return{onCreateRule:function(r,s,i){if(!y$(s))return null;var o=s,a=GC(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!y$(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},Ohe=/;\n/,khe=function(e){for(var n={},r=e.split(Ohe),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},Dhe=function(e){typeof e.style=="string"&&(e.style=khe(e.style))};function $he(){return{onProcessRule:Dhe}}var Cu="@global",Gx="@global ",Mhe=function(){function t(n,r,s){this.type="global",this.at=Cu,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new VC(Gn({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),Lhe=function(){function t(n,r,s){this.type="global",this.at=Cu,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(Gx.length);this.rule=s.jss.createRule(i,r,Gn({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),Uhe=/\s*,\s*/g;function S7(t,e){for(var n=t.split(Uhe),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function Bhe(t,e){var n=t.options,r=t.style,s=r?r[Cu]:null;if(s){for(var i in s)e.addRule(i,s[i],Gn({},n,{selector:S7(i,t.selector)}));delete r[Cu]}}function jhe(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,Cu.length)!==Cu)){var i=S7(s.substr(Cu.length),t.selector);e.addRule(i,r[s],Gn({},n,{selector:i})),delete r[s]}}function Fhe(){function t(n,r,s){if(!n)return null;if(n===Cu)return new Mhe(n,r,s);if(n[0]==="@"&&n.substr(0,Gx.length)===Gx)return new Lhe(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(Bhe(n,r),jhe(n,r))}return{onCreateRule:t,onProcessRule:e}}var Wv=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},tA="extendCurrValue"+Date.now();function Whe(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];Rd(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?Gn({},t,{extend:l}):t.extend[c];Rd(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){Rd(t.extend.extend,e,n,r);continue}if(Wv(t.extend[d])){d in r||(r[d]={}),Rd(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function zhe(t,e,n,r){for(var s in t)if(s!=="extend"){if(Wv(r[s])&&Wv(t[s])){Rd(t[s],e,n,r[s]);continue}if(Wv(t[s])){r[s]=Rd(t[s],e,n);continue}r[s]=t[s]}}function Rd(t,e,n,r){return r===void 0&&(r={}),Whe(t,e,n,r),zhe(t,e,n,r),r}function Hhe(){function t(n,r,s){return"extend"in n?Rd(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[tA])s.prop(i,null);return s[tA]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[tA]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var w$=/\s*,\s*/g,qhe=/&/g,Ghe=/\$([\w-]+)/g;function Vhe(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(w$),a=s.split(w$),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(qhe,u):u+" "+h}return c}function n(s,i,o){if(o)return Gn({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=Gn({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(Ghe,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],Gn({},l,{selector:p})):c.addRule(g,s[d],Gn({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function Vx(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=Vx(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return Vx(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function Khe(){function t(e,n){return"composes"in e&&(Vx(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var Yhe=/[A-Z]/g,Qhe=/^ms-/,nA={};function Zhe(t){return"-"+t.toLowerCase()}function A7(t){if(nA.hasOwnProperty(t))return nA[t];var e=t.replace(Yhe,Zhe);return nA[t]=Qhe.test(e)?"-"+e:e}function a_(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:A7(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(a_):e.fallbacks=a_(t.fallbacks)),e}function Jhe(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=a_(n[r]);return n}return a_(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=A7(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var oe=LO&&CSS?CSS.px:"px",Kb=LO&&CSS?CSS.ms:"ms",of=LO&&CSS?CSS.percent:"%",Xhe={"animation-delay":Kb,"animation-duration":Kb,"background-position":oe,"background-position-x":oe,"background-position-y":oe,"background-size":oe,border:oe,"border-bottom":oe,"border-bottom-left-radius":oe,"border-bottom-right-radius":oe,"border-bottom-width":oe,"border-left":oe,"border-left-width":oe,"border-radius":oe,"border-right":oe,"border-right-width":oe,"border-top":oe,"border-top-left-radius":oe,"border-top-right-radius":oe,"border-top-width":oe,"border-width":oe,"border-block":oe,"border-block-end":oe,"border-block-end-width":oe,"border-block-start":oe,"border-block-start-width":oe,"border-block-width":oe,"border-inline":oe,"border-inline-end":oe,"border-inline-end-width":oe,"border-inline-start":oe,"border-inline-start-width":oe,"border-inline-width":oe,"border-start-start-radius":oe,"border-start-end-radius":oe,"border-end-start-radius":oe,"border-end-end-radius":oe,margin:oe,"margin-bottom":oe,"margin-left":oe,"margin-right":oe,"margin-top":oe,"margin-block":oe,"margin-block-end":oe,"margin-block-start":oe,"margin-inline":oe,"margin-inline-end":oe,"margin-inline-start":oe,padding:oe,"padding-bottom":oe,"padding-left":oe,"padding-right":oe,"padding-top":oe,"padding-block":oe,"padding-block-end":oe,"padding-block-start":oe,"padding-inline":oe,"padding-inline-end":oe,"padding-inline-start":oe,"mask-position-x":oe,"mask-position-y":oe,"mask-size":oe,height:oe,width:oe,"min-height":oe,"max-height":oe,"min-width":oe,"max-width":oe,bottom:oe,left:oe,top:oe,right:oe,inset:oe,"inset-block":oe,"inset-block-end":oe,"inset-block-start":oe,"inset-inline":oe,"inset-inline-end":oe,"inset-inline-start":oe,"box-shadow":oe,"text-shadow":oe,"column-gap":oe,"column-rule":oe,"column-rule-width":oe,"column-width":oe,"font-size":oe,"font-size-delta":oe,"letter-spacing":oe,"text-decoration-thickness":oe,"text-indent":oe,"text-stroke":oe,"text-stroke-width":oe,"word-spacing":oe,motion:oe,"motion-offset":oe,outline:oe,"outline-offset":oe,"outline-width":oe,perspective:oe,"perspective-origin-x":of,"perspective-origin-y":of,"transform-origin":of,"transform-origin-x":of,"transform-origin-y":of,"transform-origin-z":of,"transition-delay":Kb,"transition-duration":Kb,"vertical-align":oe,"flex-basis":oe,"shape-margin":oe,size:oe,gap:oe,grid:oe,"grid-gap":oe,"row-gap":oe,"grid-row-gap":oe,"grid-column-gap":oe,"grid-template-rows":oe,"grid-template-columns":oe,"grid-auto-rows":oe,"grid-auto-columns":oe,"box-shadow-x":oe,"box-shadow-y":oe,"box-shadow-blur":oe,"box-shadow-spread":oe,"font-line-height":oe,"text-shadow-x":oe,"text-shadow-y":oe,"text-shadow-blur":oe};function I7(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var efe=I7(Xhe);function gy(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=gy(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=gy(s,e[s],n);else for(var i in e)e[i]=gy(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||efe[t];return o&&!(e===0&&o===oe)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function tfe(t){t===void 0&&(t={});var e=I7(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=gy(o,s[o],e);return s}function r(s,i){return gy(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var nfe={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},rfe={position:!0,size:!0},Yb={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},rA={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function sfe(t,e,n){return t.map(function(r){return x7(r,e,n,!1,!0)})}function N7(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?N7(t[0],e,n,r):typeof t[0]=="object"?sfe(t,e,r):[t]}function x7(t,e,n,r,s){if(!(Yb[e]||rA[e]))return[];var i=[];if(rA[e]&&(t=ife(t,n,rA[e],r)),Object.keys(t).length)for(var o in Yb[e]){if(t[o]){Array.isArray(t[o])?i.push(rfe[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}Yb[e][o]!=null&&i.push(Yb[e][o])}return!i.length||s?i:[i]}function ife(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=Iw((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function Iw(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=Iw(t.fallbacks[i],e,!0);continue}t[r]=N7(s,r,nfe,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=Iw(t.fallbacks,e,!0);continue}t[r]=x7(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function ofe(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=Iw(e[r],n);return e}return Iw(e,n)}return{onProcessStyle:t}}function Kx(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function afe(t){if(Array.isArray(t))return Kx(t)}function cfe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lfe(t,e){if(t){if(typeof t=="string")return Kx(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kx(t,e):void 0}}function ufe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dfe(t){return afe(t)||cfe(t)||lfe(t)||ufe()}var Lm="",Yx="",T7="",R7="",hfe=Pg&&"ontouchstart"in document.documentElement;if(Pg){var sA={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},ffe=document.createElement("p"),iA=ffe.style,pfe="Transform";for(var oA in sA)if(oA+pfe in iA){Lm=oA,Yx=sA[oA];break}Lm==="Webkit"&&"msHyphens"in iA&&(Lm="ms",Yx=sA.ms,R7="edge"),Lm==="Webkit"&&"-apple-trailing-word"in iA&&(T7="apple")}var vt={js:Lm,css:Yx,vendor:T7,browser:R7,isTouch:hfe};function gfe(t){return t[1]==="-"||vt.js==="ms"?t:"@"+vt.css+"keyframes"+t.substr(10)}var mfe={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:vt.js==="ms"?"-webkit-"+e:vt.css+e}},yfe={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:vt.js==="Webkit"?vt.css+"print-"+e:e}},wfe=/[-\s]+(.)?/g;function bfe(t,e){return e?e.toUpperCase():""}function UO(t){return t.replace(wfe,bfe)}function Lu(t){return UO("-"+t)}var vfe={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(vt.js==="Webkit"){var r="mask-image";if(UO(r)in n)return e;if(vt.js+Lu(r)in n)return vt.css+e}return e}},Efe={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:vt.vendor==="apple"&&!vt.isTouch?vt.css+e:e}},_fe={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:vt.css+e}},Cfe={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:vt.css+e}},Sfe={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:vt.js==="Webkit"||vt.js==="ms"&&vt.browser!=="edge"?vt.css+e:e}},Afe={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:vt.js==="Moz"||vt.js==="ms"||vt.vendor==="apple"?vt.css+e:e}},Ife={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(vt.js==="Webkit"){var r="WebkitColumn"+Lu(e);return r in n?vt.css+"column-"+e:!1}if(vt.js==="Moz"){var s="page"+Lu(e);return s in n?"page-"+e:!1}return!1}},Nfe={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(vt.js==="Moz")return e;var r=e.replace("-inline","");return vt.js+Lu(r)in n?vt.css+r:!1}},xfe={supportedProperty:function(e,n){return UO(e)in n?e:!1}},Tfe={supportedProperty:function(e,n){var r=Lu(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:vt.js+r in n?vt.css+e:vt.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},Rfe={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:vt.js==="ms"?""+vt.css+e:e}},Pfe={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:vt.js==="ms"?vt.css+"scroll-chaining":e}},Ofe={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},kfe={supportedProperty:function(e,n){var r=Ofe[e];return r&&vt.js+Lu(r)in n?vt.css+r:!1}},P7={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},Dfe=Object.keys(P7),$fe=function(e){return vt.css+e},Mfe={supportedProperty:function(e,n,r){var s=r.multiple;if(Dfe.indexOf(e)>-1){var i=P7[e];if(!Array.isArray(i))return vt.js+Lu(i)in n?vt.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(vt.js+Lu(i[0])in n))return!1;return i.map($fe)}return!1}},O7=[mfe,yfe,vfe,Efe,_fe,Cfe,Sfe,Afe,Ife,Nfe,xfe,Tfe,Rfe,Pfe,kfe,Mfe],b$=O7.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),Lfe=O7.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,dfe(e.noPrefill)),t},[]),Um,gd={};if(Pg){Um=document.createElement("p");var aA=window.getComputedStyle(document.documentElement,"");for(var cA in aA)isNaN(cA)||(gd[aA[cA]]=aA[cA]);Lfe.forEach(function(t){return delete gd[t]})}function Qx(t,e){if(e===void 0&&(e={}),!Um)return t;if(gd[t]!=null)return gd[t];(t==="transition"||t==="transform")&&(e[t]=t in Um.style);for(var n=0;n<b$.length&&(gd[t]=b$[n](t,Um.style,e),!gd[t]);n++);try{Um.style[t]=""}catch{return!1}return gd[t]}var af={},Ufe={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},Bfe=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Tl;function jfe(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?Qx(e):", "+Qx(n);return r||e||n}Pg&&(Tl=document.createElement("p"));function v$(t,e){var n=e;if(!Tl||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(af[r]!=null)return af[r];try{Tl.style[t]=n}catch{return af[r]=!1,!1}if(Ufe[t])n=n.replace(Bfe,jfe);else if(Tl.style[t]===""&&(n=vt.css+n,n==="-ms-flex"&&(Tl.style[t]="-ms-flexbox"),Tl.style[t]=n,Tl.style[t]===""))return af[r]=!1,!1;return Tl.style[t]="",af[r]=n,af[r]}function Ffe(){function t(s){if(s.type==="keyframes"){var i=s;i.at=gfe(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=Qx(i);c&&c!==i&&(a=!0);var l=!1,u=v$(c,Gd(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return v$(i,Gd(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function Wfe(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var zfe=function(e){return e===void 0&&(e={}),{plugins:[The(),Phe(e.observable),$he(),Fhe(),Hhe(),Vhe(),Khe(),Jhe(),tfe(e.defaultUnit),ofe(),Ffe(),Wfe()]}},Hfe=Number.MIN_SAFE_INTEGER||-1e9,qfe=function(){return Hfe++},Gfe=P.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!Pg}),E$=new Map,BO=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new g$),r[n];var s=E$.get(n);return s||(s=new g$,E$.set(n,s)),s},_$=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=BO(r,s);o.manage(i),r.registry&&r.registry.add(n)}},Vfe=function(e){if(e.sheet){var n=BO(e.context,e.index);n.unmanage(e.theme)}},Kfe=E7(zfe()),k7=new WeakMap,D7=function(e){return k7.get(e)},Yfe=function(e,n){k7.set(e,n)},Qfe=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function Zfe(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",Gn({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var Jfe=function(e){if(!e.context.disableStylesGeneration){var n=BO(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||Kfe,i=Qfe(e),o=_7(i),a=s.createStyleSheet(i,Zfe(e,o!==null));return Yfe(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},Xfe=function(e,n){for(var r in n)e.deleteRule(n[r])},epe=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},tpe=function(e,n){var r=D7(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},npe=function(e,n){if(!n)return e.classes;var r=D7(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function C$(t){return t?P.useEffect:ki.useInsertionEffect||P.useLayoutEffect}var lA={},ha=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?qfe():s,o=r.theming,a=r.name,c=l7(r,["index","theming","name"]),l=o&&o.context||g7,u=function(f){return typeof e=="function"&&(f||P.useContext(l))||lA},d={};return function(f){var p=P.useRef(!0),g=P.useContext(Gfe),w=u(f&&f.theme),y=P.useMemo(function(){var C=Jfe({context:g,styles:e,name:a,theme:w,index:i,sheetOptions:c});return C&&g.isSSR&&_$({index:i,context:g,sheet:C,theme:w}),[C,C?tpe(C,f):null]},[g,w]),b=y[0],E=y[1];C$(g.isSSR)(function(){b&&E&&!p.current&&epe(f,b,E)},[f]),C$(g.isSSR)(function(){return b&&_$({index:i,context:g,sheet:b,theme:w}),function(){b&&(Vfe({index:i,context:g,sheet:b,theme:w}),E&&Xfe(b,E))}},[b]);var _=P.useMemo(function(){return b&&E?npe(b,E):d},[b,E]);return P.useDebugValue(_),P.useDebugValue(w===lA?"No theme":w),P.useEffect(function(){p.current=!1}),_}};const rpe=ha({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function uA({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=rpe(),d=P.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=m.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[m.jsx("img",{src:t,alt:e,className:u.iconImage}),m.jsx("span",{className:u.iconLabel,children:e})]});return o?f:m.jsx(D0,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const spe=ha({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function no({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=spe({isOpen:e}),u=P.useRef(null),d=()=>{r&&r(t)};return m.jsx(D0,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:m.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[m.jsxs("div",{className:l.header,children:[m.jsx("span",{children:i||t.replace("-popup","")}),m.jsxs("div",{className:l.titleBarButtons,children:[m.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),m.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:""})]})]}),m.jsx("div",{className:l.content,children:s})]})})}const dA=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],ipe=80,ope=80,ape=10,cpe=10,lpe=10,upe=10,dpe=({onIconClick:t})=>{const e=dA.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:lpe+d*(ipe+ape),y:upe+u*(ope+cpe)},u++,u>=4&&(u=0,d++)}),l},[r,s]=P.useState(n()),[i,o]=P.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return m.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:m.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>m.jsx(uA,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&m.jsx(no,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:dA.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>m.jsx(uA,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&m.jsx(no,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:dA.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>m.jsx(uA,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},hpe=ha({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),fpe=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=P.useState(!1),[o,a]=P.useState(new Date),c=hpe({isOpen:s});P.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return m.jsxs("div",{className:c.taskbar,children:[m.jsxs("div",{className:c.leftSection,children:[m.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),m.jsx("div",{className:c.windows,children:t.map(h=>m.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),m.jsxs("div",{className:c.rightSection,children:[m.jsxs("div",{className:c.statusSection,children:[m.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:m.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),m.jsx("div",{className:c.clock,children:l(o)})]}),s&&m.jsxs("div",{className:c.menu,children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function $7(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function jO(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function M7(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function FO(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function L7(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function U7(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=`https://api.opensea.io/api/v2/collection/${t}/nfts?chain=solana&limit=${e}&include_orders=true`;try{const i=await fetch(r,{headers:{"X-API-KEY":n}});if(!i.ok)throw new Error(`Failed to get OpenSea Solana NFTs: ${i.statusText}`);const o=await i.json();console.log("Solana collection response:",o),console.log("Sample NFT from response:",o.nfts[0]),console.log("Sample NFT owners:",(s=o.nfts[0])==null?void 0:s.owners),console.log("Sample NFT full structure:",JSON.stringify(o.nfts[0],null,2));const a=o.nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"SOL",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea Solana NFTs:",i),i}}async function ppe(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=[`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false&include_metadata=true`];for(const i of r){console.log("Trying OpenSea endpoint:",i);try{const o=await fetch(i,{headers:{"X-API-KEY":n}});if(console.log("Response status:",o.status),!o.ok){const c=await o.text();console.error("API Error response:",c);continue}const a=await o.json();if(console.log("Raw API response:",a),console.log("Number of NFTs returned:",((s=a.nfts)==null?void 0:s.length)||0),a.nfts&&a.nfts.length>0){const c=a.nfts.map(l=>({id:l.identifier,address:l.contract,token_id:parseInt(l.identifier,10),attributes:JSON.stringify(l.traits||[]),name:l.name||`#${l.identifier}`,image_url:l.image_url,owner_of:t,block_minted:0,contract_type:"SOL",description:l.description||"",image:l.image_url,image_url_shrunk:l.image_url,animation_url:l.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:"",num_items:1,created_at:l.updated_at||new Date().toISOString(),updated_at:l.updated_at||new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}));return console.log("Transformed NFTs:",c.length),{page:1,pageSize:e,totalCount:c.length,totalPages:1,data:c}}}catch(o){console.error("Error with endpoint:",i,o);continue}}return console.log("All OpenSea endpoints failed, returning empty result"),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]}}const gpe=ha({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),mpe=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=gpe({isOpen:t}),i=P.useRef(null),[o,a]=P.useState([]),[c,l]=P.useState(!1),[u,d]=P.useState(!1),[h,f]=P.useState({}),[p,g]=P.useState(null),{data:w}=D9();P.useEffect(()=>{t&&r&&y()},[t,r]);const y=async()=>{l(!0),g(null);try{const I=await $7(r);a(I);const A={};I.forEach(x=>{A[x.id]=0}),f(A)}catch(I){g(I.message)}finally{l(!1)}},b=(I,A)=>{f(x=>({...x,[I]:Math.max(0,A)}))},E=async()=>{const I=Object.entries(h).filter(([,A])=>A>0).map(([A,x])=>({id:A,quantity:x}));if(I.length===0){g("Please select at least one item to mint");return}if(!w){g("Wallet not connected");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const A=await M7(r,I);if(console.log("Mint API result:",A),A.success&&A.mintTransaction){console.log("Got mint transaction:",A.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const x=await w.sendTransaction({to:A.mintTransaction.to,value:BigInt(A.mintTransaction.value),data:A.mintTransaction.data});console.log("Transaction sent successfully:",x),alert(`NFT Minted Successfully: Transaction Hash - ${x}`),e()}catch(x){console.error("Transaction sending failed:",x),g("Transaction failed: "+x.message)}}else throw new Error(A.message||"Could not retrieve minting transaction.")}catch(A){console.error("Minting failed:",A),g("Minting failed: "+A.message)}finally{d(!1)}},_=(I,A)=>`${parseFloat(I)} ${A}`,C=()=>{n&&n()};return t?m.jsx(D0,{nodeRef:i,handle:`.${s.header}`,children:m.jsxs("div",{ref:i,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"Mint Pixelawbster"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:C,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:""})]})]}),m.jsxs("div",{className:s.content,children:[p&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?m.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{children:"Available Lists:"}),o.map(I=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:I.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",_(I.token_price,I.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",I.wallet_limit===4294967295?"Unlimited":I.wallet_limit," per wallet"]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[m.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),m.jsx("input",{type:"number",min:"0",max:I.wallet_limit===4294967295?999:I.wallet_limit,value:h[I.id]||0,onChange:A=>b(I.id,parseInt(A.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},I.id))]}),m.jsx("button",{onClick:()=>void E(),disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},ype=ha({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),wpe=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},bpe=({nft:t,onClose:e})=>{const n=ype(),r=P.useRef(null),s=wpe(t.attributes);return m.jsx(D0,{nodeRef:r,handle:`.${n.header}`,children:m.jsxs("div",{className:n.popup,ref:r,children:[m.jsxs("div",{className:n.header,children:[m.jsxs("span",{children:[t.name," - Details"]}),m.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),m.jsxs("div",{className:n.content,children:[m.jsx("img",{src:t.image_url,alt:t.name,className:n.detailImage}),m.jsx("h3",{children:"Traits"}),m.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):m.jsx("li",{children:"No traits found."})})]})]})})},vpe=Symbol(),S$=Object.getPrototypeOf,Zx=new WeakMap,Epe=t=>t&&(Zx.has(t)?Zx.get(t):S$(t)===Object.prototype||S$(t)===Array.prototype),_pe=t=>Epe(t)&&t[vpe]||null,A$=(t,e=!0)=>{Zx.set(t,e)},c_={},hA=t=>typeof t=="object"&&t!==null,Dl=new WeakMap,Bm=new WeakSet,Cpe=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>hA(l)&&!Bm.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return A$(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:w}=Reflect.getOwnPropertyDescriptor(l,p),y={value:g,enumerable:w,configurable:!0};if(Bm.has(g))A$(g,!1);else if(g instanceof Promise)delete y.value,y.get=()=>d(g);else if(Dl.has(g)){const[b,E]=Dl.get(g);y.value=i(b,E(),d)}Object.defineProperty(f,p,y)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!hA(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(S,k=++a[0])=>{d!==k&&(d=k,h.forEach(O=>O(S,k)))};let p=a[1];const g=(S=++a[1])=>(p!==S&&!h.size&&(p=S,y.forEach(([k])=>{const O=k[1](S);O>d&&(d=O)})),d),w=S=>(k,O)=>{const U=[...k];U[1]=[S,...U[1]],f(U,O)},y=new Map,b=(S,k)=>{if((c_?"production":void 0)!=="production"&&y.has(S))throw new Error("prop listener already exists");if(h.size){const O=k[3](w(S));y.set(S,[k,O])}else y.set(S,[k])},E=S=>{var k;const O=y.get(S);O&&(y.delete(S),(k=O[1])==null||k.call(O))},_=S=>(h.add(S),h.size===1&&y.forEach(([O,U],G)=>{if((c_?"production":void 0)!=="production"&&U)throw new Error("remove already exists");const F=O[3](w(G));y.set(G,[O,F])}),()=>{h.delete(S),h.size===0&&y.forEach(([O,U],G)=>{U&&(U(),y.set(G,[O]))})}),C=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),A=e(C,{deleteProperty(S,k){const O=Reflect.get(S,k);E(k);const U=Reflect.deleteProperty(S,k);return U&&f(["delete",[k],O]),U},set(S,k,O,U){const G=Reflect.has(S,k),F=Reflect.get(S,k,U);if(G&&(t(F,O)||o.has(O)&&t(F,o.get(O))))return!0;E(k),hA(O)&&(O=_pe(O)||O);let T=O;if(O instanceof Promise)O.then(N=>{O.status="fulfilled",O.value=N,f(["resolve",[k],N])}).catch(N=>{O.status="rejected",O.reason=N,f(["reject",[k],N])});else{!Dl.has(O)&&n(O)&&(T=c(O));const N=!Bm.has(T)&&Dl.get(T);N&&b(k,N)}return Reflect.set(S,k,T,U),f(["set",[k],O,F]),!0}});o.set(l,A);const x=[C,g,i,_];return Dl.set(A,x),Reflect.ownKeys(l).forEach(S=>{const k=Object.getOwnPropertyDescriptor(l,S);"value"in k&&(A[S]=l[S],delete k.value,delete k.writable),Object.defineProperty(C,S,k)}),A})=>[c,Dl,Bm,t,e,n,r,s,i,o,a],[Spe]=Cpe();function Mn(t={}){return Spe(t)}function ps(t,e,n){const r=Dl.get(t);(c_?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function Nw(t,e){const n=Dl.get(t);(c_?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function gh(t){return Bm.add(t),t}function ms(t,e,n,r){let s=t[e];return ps(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function Ape(t){const e=Mn({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var I$={};const $e={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof I$<"u"?I$.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},B7={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=$e.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var Ipe=20,Npe=1,mh=1e6,N$=1e6,xpe=-7,Tpe=21,Rpe=!1,$0="[big.js] ",Uh=$0+"Invalid ",KC=Uh+"decimal places",Ppe=Uh+"rounding mode",j7=$0+"Division by zero",un={},Va=void 0,Ope=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function F7(){function t(e){var n=this;if(!(n instanceof t))return e===Va?F7():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(Uh+"value");e=e===0&&1/e<0?"-0":String(e)}kpe(n,e)}n.constructor=t}return t.prototype=un,t.DP=Ipe,t.RM=Npe,t.NE=xpe,t.PE=Tpe,t.strict=Rpe,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function kpe(t,e){var n,r,s;if(!Ope.test(e))throw Error(Uh+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function Bh(t,e,n,r){var s=t.c;if(n===Va&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(Ppe);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Va))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Va||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function jh(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}un.abs=function(){var t=new this.constructor(this);return t.s=1,t};un.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};un.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>mh)throw Error(KC);if(!s[0])throw Error(j7);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),w=g.length,y=t,b=y.c=[],E=0,_=o+(y.e=e.e-t.e)+1;for(y.s=i,i=_<0?0:_,h.unshift(0);w++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(w=g.length))u=a>w?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=w==a?s:h;w;){if(g[--w]<c[w]){for(d=w;d&&!g[--d];)g[d]=9;--g[d],g[w]+=10}g[w]-=c[w]}for(;!g[0];)g.shift()}else break}b[E++]=u?l:++l,g[0]&&u?g[w]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==Va)&&i--);return!b[0]&&E!=1&&(b.shift(),y.e--,_--),E>_&&Bh(y,_,n.RM,g[0]!==Va),y};un.eq=function(t){return this.cmp(t)===0};un.gt=function(t){return this.cmp(t)>0};un.gte=function(t){return this.cmp(t)>-1};un.lt=function(t){return this.cmp(t)<0};un.lte=function(t){return this.cmp(t)<1};un.minus=un.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};un.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(j7);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};un.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};un.plus=un.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};un.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-N$||t>N$)throw Error(Uh+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};un.prec=function(t,e){if(t!==~~t||t<1||t>mh)throw Error(Uh+"precision");return Bh(new this.constructor(this),t,e)};un.round=function(t,e){if(t===Va)t=0;else if(t!==~~t||t<-mh||t>mh)throw Error(KC);return Bh(new this.constructor(this),t+this.e+1,e)};un.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error($0+"No square root");i=Math.sqrt(+jh(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return Bh(t,(s.DP-=4)+t.e+1,s.RM)};un.times=un.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};un.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Va){if(t!==~~t||t<0||t>mh)throw Error(KC);for(n=Bh(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return jh(n,!0,!!r)};un.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Va){if(t!==~~t||t<0||t>mh)throw Error(KC);for(n=Bh(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return jh(n,!1,!!r)};un[Symbol.for("nodejs.util.inspect.custom")]=un.toJSON=un.toString=function(){var t=this,e=t.constructor;return jh(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};un.toNumber=function(){var t=+jh(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error($0+"Imprecise conversion");return t};un.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==Va){if(t!==~~t||t<1||t>mh)throw Error(Uh+"precision");for(n=Bh(new r(n),t,e);n.c.length<t;)n.c.push(0)}return jh(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};un.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error($0+"valueOf disallowed");return jh(t,t.e<=e.NE||t.e>=e.PE,!0)};var Fa=F7();const Dpe={bigNumber(t){return t?new Fa(t):new Fa(0)},multiply(t,e){if(t===void 0||e===void 0)return new Fa(0);const n=new Fa(t),r=new Fa(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},$pe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Mpe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],Lpe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Upe={getERC20Abi:t=>$e.USDT_CONTRACT_ADDRESSES.includes(t)?Lpe:$pe,getSwapAbi:()=>Mpe},wl={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},yt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections"};function fA(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const ft={setItem(t,e){jm()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(jm())return localStorage.getItem(t)||void 0},removeItem(t){jm()&&localStorage.removeItem(t)},clear(){jm()&&localStorage.clear()}};function jm(){return typeof window<"u"&&typeof localStorage<"u"}function Bc(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var x$={};const pA=(typeof process<"u"&&typeof x$<"u"?x$.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",W7=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],Bpe="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",mn={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:pA,SECURE_SITE_DASHBOARD:`${pA}/dashboard`,SECURE_SITE_FAVICON:`${pA}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["coinbase","meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},We={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=We.getActiveNamespace(),e=We.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{ft.setItem(yt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=ft.getItem(yt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{ft.removeItem(yt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{ft.setItem(yt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{ft.setItem(yt.ACTIVE_CAIP_NETWORK_ID,t),We.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return ft.getItem(yt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{ft.removeItem(yt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=fA(t);ft.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=We.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),ft.setItem(yt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=ft.getItem(yt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=fA(t);ft.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return ft.getItem(yt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=fA(t);return ft.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{ft.setItem(yt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return ft.getItem(yt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{ft.removeItem(yt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return ft.getItem(yt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=ft.getItem(yt.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{ft.setItem(yt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return ft.getItem(yt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=ft.getItem(yt.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));ft.setItem(yt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=We.getConnectedNamespaces();e.includes(t)||(e.push(t),We.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=We.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),We.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return ft.getItem(yt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{ft.setItem(yt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{ft.removeItem(yt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=ft.getItem(yt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=We.getBalanceCache();ft.setItem(yt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=We.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;We.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=We.getBalanceCache();e[t.caipAddress]=t,ft.setItem(yt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=ft.getItem(yt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=We.getBalanceCache();ft.setItem(yt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=We.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),We.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=We.getNativeBalanceCache();e[t.caipAddress]=t,ft.setItem(yt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=ft.getItem(yt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=We.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;We.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=We.getEnsCache();e[t.address]=t,ft.setItem(yt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=We.getEnsCache();ft.setItem(yt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=ft.getItem(yt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=We.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;We.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=We.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},ft.setItem(yt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=We.getIdentityCache();ft.setItem(yt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{ft.removeItem(yt.PORTFOLIO_CACHE),ft.removeItem(yt.NATIVE_BALANCE_CACHE),ft.removeItem(yt.ENS_CACHE),ft.removeItem(yt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{ft.setItem(yt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=ft.getItem(yt.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n={...We.getConnections(),[e]:t};ft.setItem(yt.CONNECTIONS,JSON.stringify(n))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=ft.getItem(yt.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}}},Ze={isMobile(){var t;return this.isClient()?!!(typeof(window==null?void 0:window.matchMedia)=="function"&&((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return Ze.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=mn.TEN_SEC_MS:!0},isAllowedRetry(t,e=mn.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(Ze.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+mn.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(Ze.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!Ze.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?We.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r,s;if(typeof window>"u")return!1;const t=(r=(n=window.matchMedia)==null?void 0:n.call(window,"(display-mode: standalone)"))==null?void 0:r.matches,e=(s=window==null?void 0:window.navigator)==null?void 0:s.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,Ze.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return $e.W3M_API_URL},getBlockchainApiUrl(){return $e.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return $e.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?mn.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in $e.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function pm(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}let M0=class{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await pm(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await pm(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await pm(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await pm(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await pm(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}};const jpe={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?mn.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(Ze.isTelegram()){if(Ze.isIos())return t.filter(e=>e!=="google");if(Ze.isMac())return t.filter(e=>e!=="x");if(Ze.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},rt=Mn({features:mn.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:mn.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),he={state:rt,subscribeKey(t,e){return ms(rt,t,e)},setOptions(t){Object.assign(rt,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...rt.remoteFeatures,...t};rt.remoteFeatures=e,(n=rt.remoteFeatures)!=null&&n.socials&&(rt.remoteFeatures.socials=jpe.filterSocialsByPlatform(rt.remoteFeatures.socials))},setFeatures(t){if(!t)return;rt.features||(rt.features=mn.DEFAULT_FEATURES);const e={...rt.features,...t};rt.features=e},setProjectId(t){rt.projectId=t},setCustomRpcUrls(t){rt.customRpcUrls=t},setAllWallets(t){rt.allWallets=t},setIncludeWalletIds(t){rt.includeWalletIds=t},setExcludeWalletIds(t){rt.excludeWalletIds=t},setFeaturedWalletIds(t){rt.featuredWalletIds=t},setTokens(t){rt.tokens=t},setTermsConditionsUrl(t){rt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){rt.privacyPolicyUrl=t},setCustomWallets(t){rt.customWallets=t},setIsSiweEnabled(t){rt.isSiweEnabled=t},setIsUniversalProvider(t){rt.isUniversalProvider=t},setSdkVersion(t){rt.sdkVersion=t},setMetadata(t){rt.metadata=t},setDisableAppend(t){rt.disableAppend=t},setEIP6963Enabled(t){rt.enableEIP6963=t},setDebug(t){rt.debug=t},setEnableWalletConnect(t){rt.enableWalletConnect=t},setEnableWalletGuide(t){rt.enableWalletGuide=t},setEnableAuthLogger(t){rt.enableAuthLogger=t},setEnableWallets(t){rt.enableWallets=t},setPreferUniversalLinks(t){rt.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){rt.hasMultipleAddresses=t},setSIWX(t){rt.siwx=t},setConnectMethodsOrder(t){rt.features={...rt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){rt.features={...rt.features,walletFeaturesOrder:t}},setSocialsOrder(t){rt.remoteFeatures={...rt.remoteFeatures,socials:t}},setCollapseWallets(t){rt.features={...rt.features,collapseWallets:t}},setEnableEmbedded(t){rt.enableEmbedded=t},setAllowUnsupportedChain(t){rt.allowUnsupportedChain=t},setManualWCControl(t){rt.manualWCControl=t},setEnableNetworkSwitch(t){rt.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(rt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){rt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return rt.universalProviderConfigOverride},getSnapshot(){return Nw(rt)}},Fpe=Object.freeze({enabled:!0,events:[]}),Wpe=new M0({baseUrl:Ze.getAnalyticsUrl(),clientId:null}),zpe=5,Hpe=60*1e3,bl=Mn({...Fpe}),qpe={state:bl,subscribeKey(t,e){return ms(bl,t,e)},async sendError(t,e){if(!bl.enabled)return;const n=Date.now();if(bl.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<Hpe}).length>=zpe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};bl.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=he.state;await Wpe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:Ze.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){bl.enabled=!0},disable(){bl.enabled=!1},clearEvents(){bl.events=[]}};let Jx=class Xx extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,Xx.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,Xx):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function T$(t,e){const n=t instanceof Jx?t:new Jx(t instanceof Error?t.message:String(t),e,t);throw qpe.sendError(n,n.category),n}function qi(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return T$(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return T$(a,e)}},n[r]=i}else n[r]=s}),n}const Da={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},Gpe={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Da.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Da.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Da.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Da.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===$e.CHAIN.SOLANA&&t===Da.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Da.COINBASE.url}/dapp?cb_url=${r}`)}},wi=Mn({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),Vpe={state:wi,subscribeNetworkImages(t){return ps(wi.networkImages,()=>t(wi.networkImages))},subscribeKey(t,e){return ms(wi,t,e)},subscribe(t){return ps(wi,()=>t(wi))},setWalletImage(t,e){wi.walletImages[t]=e},setNetworkImage(t,e){wi.networkImages[t]=e},setChainImage(t,e){wi.chainImages[t]=e},setConnectorImage(t,e){wi.connectorImages={...wi.connectorImages,[t]:e}},setTokenImage(t,e){wi.tokenImages[t]=e},setCurrencyImage(t,e){wi.currencyImages[t]=e}},Vo=qi(Vpe),Kpe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},gA=Mn({networkImagePromises:{}}),z7={async fetchWalletImage(t){if(t)return await Je._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(gA.networkImagePromises[t]||(gA.networkImagePromises[t]=Je._fetchNetworkImage(t)),await gA.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Vo.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Vo.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Vo.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Vo.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return Vo.state.connectorImages[t.imageId]},getChainImage(t){return Vo.state.networkImages[Kpe[t]]}},vl=Mn({message:"",variant:"info",open:!1}),Ype={state:vl,subscribeKey(t,e){return ms(vl,t,e)},open(t,e){const{debug:n}=he.state,{shortMessage:r,longMessage:s}=t;n&&(vl.message=r,vl.variant=e,vl.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){vl.open=!1,vl.message="",vl.variant="info"}},Wa=qi(Ype),Qpe=Ze.getAnalyticsUrl(),Zpe=new M0({baseUrl:Qpe,clientId:null}),Jpe=["MODAL_CREATED"],pc=Mn({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Fn={state:pc,subscribe(t){return ps(pc,()=>t(pc))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=he.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Fe.state.address;if(Jpe.includes(t.data.event)||typeof window>"u")return;await Zpe.post({path:"/e",params:Fn.getSdkProperties(),body:{eventId:Ze.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),pc.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===$e.HTTP_STATUS_CODES.FORBIDDEN&&!pc.reportedErrors.FORBIDDEN&&(Wa.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${jm()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),pc.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;pc.timestamp=Date.now(),pc.data=t,(e=he.state.features)!=null&&e.analytics&&Fn._sendAnalyticsEvent(pc)}},Xpe=Ze.getApiUrl(),Ls=new M0({baseUrl:Xpe,clientId:null}),ege=40,R$=4,tge=20,wt=Mn({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Je={state:wt,subscribeKey(t,e){return ms(wt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=he.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return he.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Ls.baseUrl}/getWalletImage/${t}`,n=await Ls.getBlob({path:e,params:Je._getSdkProperties()});Vo.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Ls.baseUrl}/public/getAssetImage/${t}`,n=await Ls.getBlob({path:e,params:Je._getSdkProperties()});Vo.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Ls.baseUrl}/public/getAssetImage/${t}`,n=await Ls.getBlob({path:e,params:Je._getSdkProperties()});Vo.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Ls.baseUrl}/public/getCurrencyImage/${t}`,n=await Ls.getBlob({path:e,params:Je._getSdkProperties()});Vo.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Ls.baseUrl}/public/getTokenImage/${t}`,n=await Ls.getBlob({path:e,params:Je._getSdkProperties()});Vo.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return Ze.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Da.COINBASE.id?!0:L.state.activeChain==="solana"&&(n.id===Da.SOLFLARE.id||n.id===Da.PHANTOM.id)):t},async fetchProjectConfig(){return(await Ls.get({path:"/appkit/v1/config",params:Je._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Ls.get({path:"/projects/v1/origins",params:Je._getSdkProperties()});return t}catch{return[]}},async fetchNetworkImages(){const t=L.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!z7.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Je._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=De.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Je._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Je._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Je._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];Je._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Da).map(o=>o.id));const r=await Ls.get({path:"/getWallets",params:{...Je._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:Je._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=he.state;if(t!=null&&t.length){const e={...Je._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??R$,include:t},{data:n}=await Je.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Je._fetchWalletImage(i))),wt.featured=r,wt.allFeatured=r}},async fetchRecommendedWallets(){try{wt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=he.state,r=[...e??[],...n??[]].filter(Boolean),s=L.getRequestedCaipNetworkIds().join(","),i={page:1,entries:R$,include:t,exclude:r,chains:s},{data:o,count:a}=await Je.fetchWallets(i),c=We.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>Je._fetchWalletImage(d))),wt.recommended=o,wt.allRecommended=o,wt.count=a??0}catch{}finally{wt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=he.state,s=L.getRequestedCaipNetworkIds().join(","),i=[...wt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:ege,include:e,exclude:i,chains:s},{data:a,count:c}=await Je.fetchWallets(o),l=a.slice(0,tge).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>Je._fetchWalletImage(u))),wt.wallets=Ze.uniqueBy([...wt.wallets,...Je._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),wt.count=c>wt.count?c:wt.count,wt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Je.fetchWallets(e);n&&n.forEach(r=>{wt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=he.state,s=L.getRequestedCaipNetworkIds().join(",");wt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await Je.fetchWallets(i);Fn.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Je._fetchWalletImage(c)),Ze.wait(300)]),wt.search=Je._filterOutExtensions(o)},initPromise(t,e){const n=wt.promises[t];return n||(wt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&Je.initPromise("connectorImages",Je.fetchConnectorImages),e&&Je.initPromise("featuredWallets",Je.fetchFeaturedWallets),n&&Je.initPromise("recommendedWallets",Je.fetchRecommendedWallets),r&&Je.initPromise("networkImages",Je.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=he.state.features)!=null&&t.analytics&&Je.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Ls.get({path:"/getAnalyticsConfig",params:Je._getSdkProperties()});he.setFeatures({analytics:t})}catch{he.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){wt.featured=wt.allFeatured,wt.recommended=wt.allRecommended;return}const e=L.getRequestedCaipNetworkIds().join(",");wt.featured=wt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),wt.recommended=wt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),wt.filteredWallets=wt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){wt.filteredWallets=[]},setFilterByNamespace(t){if(!t){wt.featured=wt.allFeatured,wt.recommended=wt.allRecommended;return}const e=L.getRequestedCaipNetworkIds().join(",");wt.featured=wt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),wt.recommended=wt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),wt.filteredWallets=wt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},hn=Mn({view:"Connect",history:["Connect"],transactionStack:[]}),nge={state:hn,subscribeKey(t,e){return ms(hn,t,e)},pushTransactionStack(t){hn.transactionStack.push(t)},popTransactionStack(t){const e=hn.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),St.goBack();break;case"cancel":s==null||s(),St.goBack();break}},push(t,e){t!==hn.view&&(hn.view=t,hn.history.push(t),hn.data=e)},reset(t,e){hn.view=t,hn.history=[t],hn.data=e},replace(t,e){hn.history.at(-1)===t||(hn.view=t,hn.history[hn.history.length-1]=t,hn.data=e)},goBack(){var r;const t=L.state.activeCaipAddress,e=St.state.view==="ConnectingFarcaster",n=!t&&e;if(hn.history.length>1){hn.history.pop();const[s]=hn.history.slice(-1);s&&(t&&s==="Connect"?hn.view="Account":hn.view=s)}else $r.close();(r=hn.data)!=null&&r.wallet&&(hn.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Fe.setFarcasterUrl(void 0,L.state.activeChain);const a=De.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=Nw(he.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(hn.history.length>1){hn.history=hn.history.slice(0,t+1);const[e]=hn.history.slice(-1);e&&(hn.view=e)}},goBackOrCloseModal(){St.state.history.length>1?St.goBack():$r.close()}},St=qi(nge),gc=Mn({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),eT={state:gc,subscribe(t){return ps(gc,()=>t(gc))},setThemeMode(t){gc.themeMode=t;try{const e=De.getAuthConnector();if(e){const n=eT.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Bc(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){gc.themeVariables={...gc.themeVariables,...t};try{const e=De.getAuthConnector();if(e){const n=eT.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Bc(gc.themeVariables,gc.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return Nw(gc)}},Js=qi(eT),H7={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Ht=Mn({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...H7},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),rge={state:Ht,subscribe(t){return ps(Ht,()=>{t(Ht)})},subscribeKey(t,e){return ms(Ht,t,e)},initialize(t){t.forEach(e=>{const n=We.getConnectedConnectorId(e);n&&De.setConnectorId(n,e)})},setActiveConnector(t){t&&(Ht.activeConnector=gh(t))},setConnectors(t){t.filter(s=>!Ht.allConnectors.some(i=>i.id===s.id&&De.getConnectorName(i.name)===De.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&Ht.allConnectors.push(gh(s))});const n=De.getEnabledNamespaces(),r=De.getEnabledConnectors(n);Ht.connectors=De.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(Ht.filterByNamespaceMap).forEach(e=>{Ht.filterByNamespaceMap[e]=!1}),t.forEach(e=>{Ht.filterByNamespaceMap[e]=!0}),De.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){Ht.filterByNamespaceMap[t]=e,De.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=De.getEnabledNamespaces(),e=De.getEnabledConnectors(t),n=De.areAllNamespacesEnabled();Ht.connectors=De.mergeMultiChainConnectors(e),n?Je.clearFilterByNamespaces():Je.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(Ht.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return Ht.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(Ht.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=De.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===$e.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=De.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===$e.CONNECTOR_ID.AUTH){const s=t,i=Nw(he.state),o=Js.getSnapshot().themeMode,a=Js.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Bc(a,o)}),De.setConnectors([t])}else De.setConnectors([t])},getAuthConnector(t){var r;const e=t||L.state.activeChain,n=Ht.connectors.find(s=>s.id===$e.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return Ht.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return Ht.allConnectors.find(e=>e.id===t)},getConnector(t,e){return Ht.allConnectors.filter(r=>r.chain===L.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=Nw(he.state),r=Js.getSnapshot().themeMode,s=Js.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Bc(s,r)})},getConnectorsByNamespace(t){const e=Ht.allConnectors.filter(n=>n.chain===t);return De.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=De.getConnector(t.id,t.rdns),n=L.state.activeChain;Gpe.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?St.push("ConnectingExternal",{connector:e}):St.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?De.getConnectorsByNamespace(t):De.mergeMultiChainConnectors(Ht.allConnectors)},setFilterByNamespace(t){Ht.filterByNamespace=t,Ht.connectors=De.getConnectors(t),Je.setFilterByNamespace(t)},setConnectorId(t,e){t&&(Ht.activeConnectorIds={...Ht.activeConnectorIds,[e]:t},We.setConnectedConnectorId(e,t))},removeConnectorId(t){Ht.activeConnectorIds={...Ht.activeConnectorIds,[t]:void 0},We.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return Ht.activeConnectorIds[t]},isConnected(t){return t?!!Ht.activeConnectorIds[t]:Object.values(Ht.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){Ht.activeConnectorIds={...H7}}},De=qi(rge);var Xp={};const sge="https://secure.walletconnect.org/sdk",ige=(typeof process<"u"&&typeof Xp<"u"?Xp.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||sge,oge=(typeof process<"u"&&typeof Xp<"u"?Xp.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",age=(typeof process<"u"&&typeof Xp<"u"?Xp.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Be={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Zr={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},ud=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),hr=Mn({...ud}),cge={state:hr,subscribeKey(t,e){return ms(hr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=Ze.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){hr.message=ud.message,hr.variant=ud.variant,hr.svg=ud.svg,hr.open=ud.open,hr.autoClose=ud.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=ud.autoClose}){hr.open?(hr.open=!1,setTimeout(()=>{hr.message=t,hr.variant=n,hr.svg=e,hr.open=!0,hr.autoClose=r},150)):(hr.message=t,hr.variant=n,hr.svg=e,hr.open=!0,hr.autoClose=r)}},Zo=cge,Cn=Mn({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),lge={state:Cn,subscribe(t){return ps(Cn,()=>t(Cn))},setLastNetworkInView(t){Cn.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Cn.loading=!0;try{const s=await it.fetchTransactions({account:t,cursor:Cn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=Fm.filterSpamTransactions(s.data),o=Fm.filterByConnectedChain(i),a=[...Cn.transactions,...o];Cn.loading=!1,e==="coinbase"?Cn.coinbaseTransactions=Fm.groupTransactionsByYearAndMonth(Cn.coinbaseTransactions,s.data):(Cn.transactions=a,Cn.transactionsByYear=Fm.groupTransactionsByYearAndMonth(Cn.transactionsByYear,o)),Cn.empty=a.length===0,Cn.next=s.next?s.next:void 0}catch{const i=L.state.activeChain;Fn.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:he.state.projectId,cursor:Cn.next,isSmartAccount:((r=Fe.state.preferredAccountTypes)==null?void 0:r[i])===Zr.ACCOUNT_TYPES.SMART_ACCOUNT}}),Zo.showError("Failed to fetch transactions"),Cn.loading=!1,Cn.empty=!0,Cn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=L.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Cn.next=void 0},resetTransactions(){Cn.transactions=[],Cn.transactionsByYear={},Cn.lastNetworkInView=void 0,Cn.loading=!1,Cn.empty=!1,Cn.next=void 0}},Fm=qi(lge,"API_ERROR"),bn=Mn({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"});let Ju;const uge={state:bn,subscribeKey(t,e){return ms(bn,t,e)},_getClient(){return bn._client},setClient(t){bn._client=gh(t)},async connectWalletConnect(){var t,e,n,r;if(Ze.isTelegram()||Ze.isSafari()&&Ze.isIos()){if(Ju){await Ju,Ju=void 0;return}if(!Ze.isPairingExpired(bn==null?void 0:bn.wcPairingExpiry)){const s=bn.wcUri;bn.wcUri=s;return}Ju=(e=(t=ot._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),ot.state.status="connecting",await Ju,Ju=void 0,bn.wcPairingExpiry=void 0,ot.state.status="connected"}else await((r=(n=ot._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var r,s;await((s=(r=ot._getClient())==null?void 0:r.connectExternal)==null?void 0:s.call(r,t)),n&&L.setActiveNamespace(e)},async reconnectExternal(t){var n,r;await((r=(n=ot._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||L.state.activeChain;e&&De.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;$r.setLoading(!0,L.state.activeChain);const n=De.getAuthConnector();n&&(Fe.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),We.setPreferredAccountTypes(Fe.state.preferredAccountTypes??{[e]:t}),await ot.reconnectExternal(n),$r.setLoading(!1,L.state.activeChain),Fn.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=L.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=ot._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=ot._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=ot._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=ot._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=ot._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=ot._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=ot._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=ot._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=ot._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=ot._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=ot._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=ot._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){bn.wcUri=void 0,bn.wcPairingExpiry=void 0,bn.wcLinking=void 0,bn.recentWallet=void 0,bn.status="disconnected",Fm.resetTransactions(),We.deleteWalletConnectDeepLink()},resetUri(){bn.wcUri=void 0,bn.wcPairingExpiry=void 0,Ju=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=ot.state;t&&We.setWalletConnectDeepLink(t),e&&We.setAppKitRecent(e),Fn.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=St.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){bn.wcBasic=t},setUri(t){bn.wcUri=t,bn.wcPairingExpiry=Ze.getPairingExpiry()},setWcLinking(t){bn.wcLinking=t},setWcError(t){bn.wcError=t,bn.buffering=!1},setRecentWallet(t){bn.recentWallet=t},setBuffering(t){bn.buffering=t},setStatus(t){bn.status=t},async disconnect(t){var e;try{await((e=ot._getClient())==null?void 0:e.disconnect(t))}catch(n){throw new Jx("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},setConnections(t,e){bn.connections.set(e,t)},switchAccount({connection:t,address:e,namespace:n}){if(De.state.activeConnectorIds[n]===t.connectorId){const i=L.state.activeCaipNetwork;if(i){const o=`${n}:${i.id}:${e}`;Fe.setCaipAddress(o,n)}else console.warn(`No current network found for namespace "${n}"`)}else{const i=De.getConnector(t.connectorId);i?ot.connectExternal(i,n):console.warn(`No connector found for namespace "${n}"`)}}},ot=qi(uge),cf=Mn({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Ka={state:cf,subscribe(t){return ps(cf,()=>t(cf))},subscribeOpen(t){return ms(cf,"open",t)},set(t){Object.assign(cf,{...cf,...t})}},mA={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return kh(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},P$={async getMyTokensWithBalance(t){const e=Fe.state.address,n=L.state.activeCaipNetwork;if(!e||!n)return[];if(n.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,n);if(s)return this.filterLowQualityTokens(s)}const r=await it.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(r.balances)},async getEIP155Balances(t,e){var n,r;try{const s=mA.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await ot.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await ot.walletGetAssets({account:t,chainFilter:[s]});return mA.isWalletGetAssetsResponse(o)?(o[s]||[]).map(c=>mA.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:L.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},an=Mn({tokenBalances:[],loading:!1}),dge={state:an,subscribe(t){return ps(an,()=>t(an))},subscribeKey(t,e){return ms(an,t,e)},setToken(t){t&&(an.token=gh(t))},setTokenAmount(t){an.sendTokenAmount=t},setReceiverAddress(t){an.receiverAddress=t},setReceiverProfileImageUrl(t){an.receiverProfileImageUrl=t},setReceiverProfileName(t){an.receiverProfileName=t},setNetworkBalanceInUsd(t){an.networkBalanceInUSD=t},setLoading(t){an.loading=t},async sendToken(){var t;try{switch(Jt.setLoading(!0),(t=L.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await Jt.sendEvmToken();return;case"solana":await Jt.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Jt.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=L.state.activeChain,e=(n=Fe.state.preferredAccountTypes)==null?void 0:n[t];if(!Jt.state.sendTokenAmount||!Jt.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Jt.state.token)throw new Error("A token is required");(r=Jt.state.token)!=null&&r.address?(Fn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Zr.ACCOUNT_TYPES.SMART_ACCOUNT,token:Jt.state.token.address,amount:Jt.state.sendTokenAmount,network:((s=L.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await Jt.sendERC20Token({receiverAddress:Jt.state.receiverAddress,tokenAddress:Jt.state.token.address,sendTokenAmount:Jt.state.sendTokenAmount,decimals:Jt.state.token.quantity.decimals})):(Fn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Zr.ACCOUNT_TYPES.SMART_ACCOUNT,token:Jt.state.token.symbol||"",amount:Jt.state.sendTokenAmount,network:((i=L.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await Jt.sendNativeToken({receiverAddress:Jt.state.receiverAddress,sendTokenAmount:Jt.state.sendTokenAmount,decimals:Jt.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;an.loading=!0;const e=(i=L.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=L.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=L.state.activeCaipAddress,s=r?Ze.getPlainAddress(r):void 0;if(an.lastRetry&&!Ze.isAllowedRetry(an.lastRetry,30*mn.ONE_SEC_MS))return an.loading=!1,[];try{if(s&&e&&n){const a=await P$.getMyTokensWithBalance();return an.tokenBalances=a,an.lastRetry=void 0,a}}catch(a){an.lastRetry=Date.now(),t==null||t(a),Zo.showError("Token Balance Unavailable")}finally{an.loading=!1}return[]},fetchNetworkBalance(){if(an.tokenBalances.length===0)return;const t=P$.mapBalancesToSwapTokens(an.tokenBalances);if(!t)return;const e=t.find(n=>n.address===L.getActiveNetworkTokenAddress());e&&(an.networkBalanceInUSD=e?Dpe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;St.pushTransactionStack({});const e=t.receiverAddress,n=Fe.state.address,r=ot.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await ot.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),Fn.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=Fe.state.preferredAccountTypes)==null?void 0:i.eip155)===Zr.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=Jt.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=L.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=ot._getClient())==null||c.updateBalance("eip155"),Jt.resetSend()},async sendERC20Token(t){St.pushTransactionStack({onSuccess(){St.replace("Account")}});const e=ot.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Fe.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=Ze.getPlainAddress(t.tokenAddress);await ot.writeContract({fromAddress:Fe.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:Upe.getERC20Abi(n),chainNamespace:"eip155"}),Jt.resetSend()}},async sendSolanaToken(){var t;if(!Jt.state.sendTokenAmount||!Jt.state.receiverAddress)throw new Error("An amount and receiver address are required");St.pushTransactionStack({onSuccess(){St.replace("Account")}}),await ot.sendTransaction({chainNamespace:"solana",to:Jt.state.receiverAddress,value:Jt.state.sendTokenAmount}),(t=ot._getClient())==null||t.updateBalance("solana"),Jt.resetSend()},resetSend(){an.token=void 0,an.sendTokenAmount=void 0,an.receiverAddress=void 0,an.receiverProfileImageUrl=void 0,an.receiverProfileName=void 0,an.loading=!1,an.tokenBalances=[]}},Jt=qi(dge),yA={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},Qb={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},xe=Mn({chains:Ape(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),hge={state:xe,subscribe(t){return ps(xe,()=>{t(xe)})},subscribeKey(t,e){return ms(xe,t,e)},subscribeChainProp(t,e,n){let r;return ps(xe.chains,()=>{var i;const s=n||xe.activeChain;if(s){const o=(i=xe.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=We.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=he.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(xe.noAdapters=!0),xe.noAdapters||(xe.activeChain=a==null?void 0:a.namespace,xe.activeCaipNetwork=i,L.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),xe.activeChain&&Ka.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);L.state.chains.set(u,{namespace:u,networkState:Mn({...Qb,caipNetwork:d==null?void 0:d[0]}),accountState:Mn(yA),caipNetworks:d??[],...n}),L.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(xe.activeChain===t){const r=Array.from(xe.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&L.setActiveCaipNetwork(s)}}xe.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){xe.chains.set(t.namespace,{namespace:t.namespace,networkState:{...Qb,caipNetwork:r[0]},accountState:yA,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),L.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=xe.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),xe.chains.set(t.chainNamespace,{...e,caipNetworks:r}),L.setRequestedCaipNetworks(r,t.chainNamespace),De.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=xe.chains.get(t);if(n){const o=((r=xe.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&L.setActiveCaipNetwork(n.caipNetworks[0]),xe.chains.set(t,{...n,caipNetworks:a}),L.setRequestedCaipNetworks(a||[],t),a.length===0&&De.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=xe.chains.get(t);n&&(n.networkState={...n.networkState||Qb,...e},xe.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=xe.chains.get(t);if(r){const s={...r.accountState||yA,...e};xe.chains.set(t,{...r,accountState:s}),(xe.chains.size===1||xe.activeChain===t)&&(e.caipAddress&&(xe.activeCaipAddress=e.caipAddress),Fe.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=xe.chains.get(t);if(n){const r={...n.networkState||Qb,...e};xe.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){L.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&De.removeConnectorId(n)},setActiveNamespace(t){var r,s;xe.activeChain=t;const e=t?xe.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(xe.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,xe.activeCaipNetwork=n,L.setChainNetworkData(t,{caipNetwork:n}),We.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Ka.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;xe.activeChain!==t.chainNamespace&&L.setIsSwitchingNamespace(!0);const e=xe.chains.get(t.chainNamespace);xe.activeChain=t.chainNamespace,xe.activeCaipNetwork=t,L.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?xe.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:xe.activeCaipAddress=void 0,L.setAccountProp("caipAddress",xe.activeCaipAddress,t.chainNamespace),e&&Fe.replaceState(e.accountState),Jt.resetSend(),Ka.set({activeChain:xe.activeChain,selectedNetworkId:(i=xe.activeCaipNetwork)==null?void 0:i.caipNetworkId}),We.setActiveCaipNetworkId(t.caipNetworkId),!L.checkIfSupportedNetwork(t.chainNamespace)&&he.state.enableNetworkSwitch&&!he.state.allowUnsupportedChain&&!ot.state.wcBasic&&L.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=xe.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==L.state.activeChain,n=(s=L.getNetworkData(t))==null?void 0:s.caipNetwork,r=L.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await L.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=L.state.chains.get(L.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=xe.activeCaipNetwork)==null?void 0:o.id)})),r=L.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&$r.close()}catch{St.goBack()}Fn.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||xe.activeChain,n=xe.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||xe.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=xe.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=xe.activeChain;if(e&&(n=e),!n)return;const r=(s=xe.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=xe.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=xe.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return Ze.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return xe.chains.forEach(e=>{const n=L.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){L.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=L.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));De.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return xe.chains.forEach(e=>{const n=L.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return xe.activeCaipNetwork},getActiveCaipAddress(){return xe.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=xe.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=L.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());L.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||xe.activeCaipNetwork,r=L.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!xe.activeChain)return!0;const e=L.getRequestedCaipNetworks(xe.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){L.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=B7.caipNetworkIdToNumber((r=xe.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=xe.activeChain;if(!e||!t)return!1;const n=L.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},getActiveNetworkTokenAddress(){var r,s;const t=((r=xe.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=xe.activeCaipNetwork)==null?void 0:s.id)||1,n=mn.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`},showUnsupportedChainUI(){$r.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=xe.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&mn.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){L.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");xe.activeCaipAddress=void 0,L.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),De.removeConnectorId(e)},setIsSwitchingNamespace(t){xe.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(xe.chains.forEach(s=>{$e.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=xe.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=L.state.chains.get(t))==null?void 0:e.accountState:Fe.state},getNetworkData(t){var n;const e=t||xe.activeChain;if(e)return(n=L.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=L.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=De.state.filterByNamespace;return(t?[xe.chains.get(t)]:Array.from(xe.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?L.getRequestedCaipNetworks(t):L.getAllRequestedCaipNetworks()}},L=qi(hge),fge={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},q7=Ze.getBlockchainApiUrl(),Us=Mn({clientId:null,api:new M0({baseUrl:q7,clientId:null}),supportedChains:{http:[],ws:[]}}),it={state:Us,async get(t){const{st:e,sv:n}=it.getSdkProperties(),r=he.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Us.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=he.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Us.supportedChains.http.length||await it.getSupportedNetworks()}catch{return!1}return Us.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await it.get({path:"v1/supported-chains"});return Us.supportedChains=t,t}catch{return Us.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await it.isNetworkSupported(e))return{avatar:"",name:""};const r=We.getIdentityFromCacheForAddress(t);if(r)return r;const s=await it.get({path:`/v1/identity/${t}`,params:{sender:L.state.activeCaipAddress?Ze.getPlainAddress(L.state.activeCaipAddress):void 0}});return We.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await it.isNetworkSupported((a=L.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?it.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await it.isNetworkSupported((o=L.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?it.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await it.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?it.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await it.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Us.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:he.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await it.isNetworkSupported((r=L.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?it.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=it.getSdkProperties();if(!await it.isNetworkSupported((s=L.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return it.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await it.isNetworkSupported((o=L.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Us.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:mn.CONVERT_SLIPPAGE_TOLERANCE},projectId:he.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=it.getSdkProperties();if(!await it.isNetworkSupported((o=L.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return it.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=it.getSdkProperties();if(!await it.isNetworkSupported((l=L.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Zo.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=We.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await it.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return We.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await it.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?it.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await it.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?it.get({path:`/v1/profile/reverse/${t}`,params:{sender:Fe.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await it.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?it.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await it.isNetworkSupported((i=L.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Us.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await it.isNetworkSupported((a=L.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Us.api.post({path:"/v1/generators/onrampurl",params:{projectId:he.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await it.isNetworkSupported((e=L.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await it.get({path:"/v1/onramp/options"})}catch{return fge}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await it.isNetworkSupported((s=L.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Us.api.post({path:"/v1/onramp/quote",params:{projectId:he.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await it.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?it.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await it.isNetworkSupported((s=L.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Us.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:he.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Us.clientId=t,Us.api=new M0({baseUrl:q7,clientId:t})}},Yi=Mn({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),pge={state:Yi,replaceState(t){t&&Object.assign(Yi,gh(t))},subscribe(t){return L.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return L.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){L.setAccountProp("status",t,e)},getCaipAddress(t){return L.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?Ze.getPlainAddress(t):void 0;e===L.state.activeChain&&(L.state.activeCaipAddress=t),L.setAccountProp("caipAddress",t,e),L.setAccountProp("address",n,e)},setBalance(t,e,n){L.setAccountProp("balance",t,n),L.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){L.setAccountProp("profileName",t,e)},setProfileImage(t,e){L.setAccountProp("profileImage",t,e)},setUser(t,e){L.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){L.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){L.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){L.setAccountProp("currentTab",t,L.state.activeChain)},setTokenBalance(t,e){t&&L.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){L.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){L.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=L.getAccountProp("addressLabels",n)||new Map;r.set(t,e),L.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=L.getAccountProp("addressLabels",e)||new Map;n.delete(t),L.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){L.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){L.setAccountProp("preferredAccountTypes",{...Yi.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){Yi.preferredAccountTypes=t},setSocialProvider(t,e){t&&L.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){L.setAccountProp("socialWindow",t?gh(t):void 0,e)},setFarcasterUrl(t,e){L.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Yi.balanceLoading=!0;const e=(i=L.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=L.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=L.state.activeCaipAddress,s=r?Ze.getPlainAddress(r):void 0;if(Yi.lastRetry&&!Ze.isAllowedRetry(Yi.lastRetry,30*mn.ONE_SEC_MS))return Yi.balanceLoading=!1,[];try{if(s&&e&&n){const c=(await it.getBalance(s,e)).balances.filter(l=>l.quantity.decimals!=="0");return Fe.setTokenBalance(c,n),Yi.lastRetry=void 0,Yi.balanceLoading=!1,c}}catch(a){Yi.lastRetry=Date.now(),t==null||t(a),Zo.showError("Token Balance Unavailable")}finally{Yi.balanceLoading=!1}return[]},resetAccount(t){L.resetAccount(t)}},Fe=qi(pge),gge={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=L.state.activeCaipNetwork,r=St.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Fe.getCaipAddress(L.state.activeChain),o=t.chainNamespace!==L.state.activeChain,a=Fe.getCaipAddress(t.chainNamespace),l=De.getConnectorId(L.state.activeChain)===$e.CONNECTOR_ID.AUTH,u=$e.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?St.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?St.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):St.push("SwitchNetwork",{...r,network:t})}},Bs=Mn({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),mge={state:Bs,subscribe(t){return ps(Bs,()=>t(Bs))},subscribeKey(t,e){return ms(Bs,t,e)},async open(t){var o,a;const e=Fe.state.status==="connected",n=t==null?void 0:t.namespace,r=L.state.activeChain,s=n&&n!==r,i=(o=L.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(ot.state.wcBasic?Je.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Je.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),De.setFilterByNamespace(t==null?void 0:t.namespace),$r.setLoading(!0,n),n&&s){const c=((a=L.getNetworkData(n))==null?void 0:a.caipNetwork)||L.getRequestedCaipNetworks(n)[0];c&&gge.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=L.state.noAdapters;he.state.manualWCControl||c&&!i?Ze.isMobile()?St.reset("AllWallets"):St.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?St.reset(t.view,t.data):i?St.reset("Account"):St.reset("Connect")}Bs.open=!0,Ka.set({open:!0}),Fn.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=he.state.enableEmbedded,e=!!L.state.activeCaipAddress;Bs.open&&Fn.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Bs.open=!1,St.reset("Connect"),$r.clearLoading(),t?e?St.replace("Account"):St.push("Connect"):Ka.set({open:!1}),ot.resetUri()},setLoading(t,e){e&&Bs.loadingNamespaceMap.set(e,t),Bs.loading=t,Ka.set({loading:t})},clearLoading(){Bs.loadingNamespaceMap.clear(),Bs.loading=!1},shake(){Bs.shake||(Bs.shake=!0,setTimeout(()=>{Bs.shake=!1},500))}},$r=qi(mge),my={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},tT={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},yge={providers:W7,selectedProvider:null,error:null,purchaseCurrency:my,paymentCurrency:tT,purchaseCurrencies:[my],paymentCurrencies:[],quotesLoading:!1},jt=Mn(yge),wge={state:jt,subscribe(t){return ps(jt,()=>t(jt))},subscribeKey(t,e){return ms(jt,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=L.state.activeChain===$e.CHAIN.SOLANA?"SOL":"USDC",n=Fe.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",Bpe),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",he.state.projectId),jt.selectedProvider={...t,url:r.toString()}}else jt.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=W7.filter(r=>e.includes(r.name));jt.providers=n}else jt.providers=[]},setPurchaseCurrency(t){jt.purchaseCurrency=t},setPaymentCurrency(t){jt.paymentCurrency=t},setPurchaseAmount(t){nT.state.purchaseAmount=t},setPaymentAmount(t){nT.state.paymentAmount=t},async getAvailableCurrencies(){const t=await it.getOnrampOptions();jt.purchaseCurrencies=t.purchaseCurrencies,jt.paymentCurrencies=t.paymentCurrencies,jt.paymentCurrency=t.paymentCurrencies[0]||tT,jt.purchaseCurrency=t.purchaseCurrencies[0]||my,await Je.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await Je.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;jt.quotesLoading=!0;try{const n=await it.getOnrampQuote({purchaseCurrency:jt.purchaseCurrency,paymentCurrency:jt.paymentCurrency,amount:((t=jt.paymentAmount)==null?void 0:t.toString())||"0",network:(e=jt.purchaseCurrency)==null?void 0:e.symbol});return jt.quotesLoading=!1,jt.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return jt.error=n.message,jt.quotesLoading=!1,null}finally{jt.quotesLoading=!1}},resetState(){jt.selectedProvider=null,jt.error=null,jt.purchaseCurrency=my,jt.paymentCurrency=tT,jt.purchaseCurrencies=[my],jt.paymentCurrencies=[],jt.paymentAmount=void 0,jt.purchaseAmount=void 0,jt.quotesLoading=!1}},nT=qi(wge),O$=2147483648,bge={convertEVMChainIdToCoinType(t){if(t>=O$)throw new Error("Invalid chainId");return(O$|t)>>>0}},Qi=Mn({suggestions:[],loading:!1}),vge={state:Qi,subscribe(t){return ps(Qi,()=>t(Qi))},subscribeKey(t,e){return ms(Qi,t,e)},async resolveName(t){var e,n;try{return await it.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await it.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Qi.loading=!0,Qi.suggestions=[];const e=await it.getEnsNameSuggestions(t);return Qi.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Qi.suggestions}catch(e){const n=yy.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Qi.loading=!1}},async getNamesForAddress(t){try{if(!L.state.activeCaipNetwork)return[];const n=We.getEnsFromCacheForAddress(t);if(n)return n;const r=await it.reverseLookupEnsName({address:t});return We.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=yy.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=L.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=Fe.state.address,r=De.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");Qi.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});St.pushTransactionStack({onCancel(){St.replace("RegisterAccountName")}});const i=await ot.signMessage(s);Qi.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=bge.convertEVMChainIdToCoinType(Number(o));await it.registerEnsName({coinType:a,address:n,signature:i,message:s}),Fe.setProfileName(t,e.chainNamespace),St.replace("RegisterAccountNameSuccess")}catch(s){const i=yy.parseEnsApiError(s,`Error registering name ${t}`);throw St.replace("RegisterAccountName"),new Error(i)}finally{Qi.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},yy=qi(vge);var WO={exports:{}},fp=typeof Reflect=="object"?Reflect:null,k$=fp&&typeof fp.apply=="function"?fp.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},zv;fp&&typeof fp.ownKeys=="function"?zv=fp.ownKeys:Object.getOwnPropertySymbols?zv=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:zv=function(e){return Object.getOwnPropertyNames(e)};function Ege(t){console&&console.warn&&console.warn(t)}var G7=Number.isNaN||function(e){return e!==e};function yn(){yn.init.call(this)}WO.exports=yn;WO.exports.once=Age;yn.EventEmitter=yn;yn.prototype._events=void 0;yn.prototype._eventsCount=0;yn.prototype._maxListeners=void 0;var D$=10;function YC(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(yn,"defaultMaxListeners",{enumerable:!0,get:function(){return D$},set:function(t){if(typeof t!="number"||t<0||G7(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");D$=t}});yn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};yn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||G7(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function V7(t){return t._maxListeners===void 0?yn.defaultMaxListeners:t._maxListeners}yn.prototype.getMaxListeners=function(){return V7(this)};yn.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")k$(c,this,n);else for(var l=c.length,u=J7(c,l),r=0;r<l;++r)k$(u[r],this,n);return!0};function K7(t,e,n,r){var s,i,o;if(YC(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=V7(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Ege(a)}return t}yn.prototype.addListener=function(e,n){return K7(this,e,n,!1)};yn.prototype.on=yn.prototype.addListener;yn.prototype.prependListener=function(e,n){return K7(this,e,n,!0)};function _ge(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Y7(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=_ge.bind(r);return s.listener=n,r.wrapFn=s,s}yn.prototype.once=function(e,n){return YC(n),this.on(e,Y7(this,e,n)),this};yn.prototype.prependOnceListener=function(e,n){return YC(n),this.prependListener(e,Y7(this,e,n)),this};yn.prototype.removeListener=function(e,n){var r,s,i,o,a;if(YC(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():Cge(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};yn.prototype.off=yn.prototype.removeListener;yn.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function Q7(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?Sge(s):J7(s,s.length)}yn.prototype.listeners=function(e){return Q7(this,e,!0)};yn.prototype.rawListeners=function(e){return Q7(this,e,!1)};yn.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Z7.call(t,e)};yn.prototype.listenerCount=Z7;function Z7(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}yn.prototype.eventNames=function(){return this._eventsCount>0?zv(this._events):[]};function J7(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function Cge(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Sge(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function Age(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}X7(t,e,i,{once:!0}),e!=="error"&&Ige(t,s,{once:!0})})}function Ige(t,e,n){typeof t.on=="function"&&X7(t,"error",e,n)}function X7(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Ao=WO.exports;const zO=xh(Ao);var _e={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var rT=function(t,e){return rT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},rT(t,e)};function Nge(t,e){rT(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var sT=function(){return sT=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},sT.apply(this,arguments)};function xge(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Tge(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function Rge(t,e){return function(n,r){e(n,r,t)}}function Pge(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Oge(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function kge(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Dge(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function $ge(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function iT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function eW(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function Mge(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(eW(arguments[e]));return t}function Lge(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function xw(t){return this instanceof xw?(this.v=t,this):new xw(t)}function Uge(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof xw?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Bge(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:xw(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function jge(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof iT=="function"?iT(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function Fge(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Wge(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function zge(t){return t&&t.__esModule?t:{default:t}}function Hge(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function qge(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const Gge=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return sT},__asyncDelegator:Bge,__asyncGenerator:Uge,__asyncValues:jge,__await:xw,__awaiter:Oge,__classPrivateFieldGet:Hge,__classPrivateFieldSet:qge,__createBinding:Dge,__decorate:Tge,__exportStar:$ge,__extends:Nge,__generator:kge,__importDefault:zge,__importStar:Wge,__makeTemplateObject:Fge,__metadata:Pge,__param:Rge,__read:eW,__rest:xge,__spread:Mge,__spreadArrays:Lge,__values:iT},Symbol.toStringTag,{value:"Module"})),QC=kU(Gge);var wA={},gm={},$$;function Vge(){if($$)return gm;$$=1,Object.defineProperty(gm,"__esModule",{value:!0}),gm.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return gm.delay=t,gm}var Xu={},bA={},ed={},M$;function Kge(){return M$||(M$=1,Object.defineProperty(ed,"__esModule",{value:!0}),ed.ONE_THOUSAND=ed.ONE_HUNDRED=void 0,ed.ONE_HUNDRED=100,ed.ONE_THOUSAND=1e3),ed}var vA={},L$;function Yge(){return L$||(L$=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(vA)),vA}var U$;function tW(){return U$||(U$=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=QC;e.__exportStar(Kge(),t),e.__exportStar(Yge(),t)}(bA)),bA}var B$;function Qge(){if(B$)return Xu;B$=1,Object.defineProperty(Xu,"__esModule",{value:!0}),Xu.fromMiliseconds=Xu.toMiliseconds=void 0;const t=tW();function e(r){return r*t.ONE_THOUSAND}Xu.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Xu.fromMiliseconds=n,Xu}var j$;function Zge(){return j$||(j$=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=QC;e.__exportStar(Vge(),t),e.__exportStar(Qge(),t)}(wA)),wA}var lf={},F$;function Jge(){if(F$)return lf;F$=1,Object.defineProperty(lf,"__esModule",{value:!0}),lf.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return lf.Watch=t,lf.default=t,lf}var EA={},mm={},W$;function Xge(){if(W$)return mm;W$=1,Object.defineProperty(mm,"__esModule",{value:!0}),mm.IWatch=void 0;class t{}return mm.IWatch=t,mm}var z$;function eme(){return z$||(z$=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),QC.__exportStar(Xge(),t)}(EA)),EA}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=QC;e.__exportStar(Zge(),t),e.__exportStar(Jge(),t),e.__exportStar(eme(),t),e.__exportStar(tW(),t)})(_e);class Fh{}let tme=class extends Fh{constructor(e){super()}};const H$=_e.FIVE_SECONDS,Wh={pulse:"heartbeat_pulse"};let nme=class nW extends tme{constructor(e){super(e),this.events=new Ao.EventEmitter,this.interval=H$,this.interval=(e==null?void 0:e.interval)||H$}static async init(e){const n=new nW(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),_e.toMiliseconds(this.interval))}pulse(){this.events.emit(Wh.pulse)}};const rme=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,sme=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,ime=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function ome(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){ame(t);return}return e}function ame(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Zb(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!ime.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(rme.test(t)||sme.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,ome)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function zh(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function rW(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=zh(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let _A;function L0(){return _A||(_A=rW("keyval-store","keyval")),_A}function q$(t,e=L0()){return e("readonly",n=>zh(n.get(t)))}function cme(t,e,n=L0()){return n("readwrite",r=>(r.put(e,t),zh(r.transaction)))}function lme(t,e=L0()){return e("readwrite",n=>(n.delete(t),zh(n.transaction)))}function ume(t=L0()){return t("readwrite",e=>(e.clear(),zh(e.transaction)))}function dme(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},zh(t.transaction)}function hme(t=L0()){return t("readonly",e=>{if(e.getAllKeys)return zh(e.getAllKeys());const n=[];return dme(e,r=>n.push(r.key)).then(()=>n)})}const fme=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),pme=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function yh(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return pme(t)}catch{return t}}function nl(t){return typeof t=="string"?t:fme(t)||""}function gme(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var mme=yme;function yme(t,e,n){var r=n&&n.stringify||gme,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const G$=mme;var kf=Ya;const Tw=Nme().console||{},wme={mapHttpRequest:Jb,mapHttpResponse:Jb,wrapRequestSerializer:CA,wrapResponseSerializer:CA,wrapErrorSerializer:CA,req:Jb,res:Jb,err:Cme};function bme(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Ya(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||Tw;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=bme(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=Rw),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:Sme(t)};c.levels=Ya.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=Rw,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=oT());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,uf(l,c,"error","log"),uf(l,c,"fatal","error"),uf(l,c,"warn","error"),uf(l,c,"info","log"),uf(l,c,"debug","log"),uf(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const w=g.serializers;if(s&&w){var y=Object.assign({},r,w),b=t.browser.serialize===!0?Object.keys(y):s;delete p.serializers,ZC([p],b,y,this._stdErrSerialize)}function E(_){this._childLevel=(_._childLevel|0)+1,this.error=df(_,p,"error"),this.fatal=df(_,p,"fatal"),this.warn=df(_,p,"warn"),this.info=df(_,p,"info"),this.debug=df(_,p,"debug"),this.trace=df(_,p,"trace"),y&&(this.serializers=y,this._serialize=b),e&&(this._logEvent=oT([].concat(_._logEvent.bindings,p)))}return E.prototype=this,new E(this)}return c}Ya.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Ya.stdSerializers=wme;Ya.stdTimeFunctions=Object.assign({},{nullTime:sW,epochTime:iW,unixTime:Ame,isoTime:Ime});function uf(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?Rw:s[n]?s[n]:Tw[n]||Tw[r]||Rw,vme(t,e,n)}function vme(t,e,n){!t.transmit&&e[n]===Rw||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Tw?Tw:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&ZC(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,Eme(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Ya.levels.values[l],d=Ya.levels.values[n];if(d<u)return;_me(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:Ya.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function Eme(t,e,n,r){t._serialize&&ZC(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=Ya.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?G$(s.shift(),s):void 0}else typeof i=="string"&&(i=G$(s.shift(),s));return i!==void 0&&(o.msg=i),o}function ZC(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Ya.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function df(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function _me(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;ZC(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=oT(c)}function oT(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function Cme(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function Sme(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?sW:iW}function Jb(){return{}}function CA(t){return t}function Rw(){}function sW(){return!1}function iW(){return Date.now()}function Ame(){return Math.round(Date.now()/1e3)}function Ime(){return new Date(Date.now()).toISOString()}function Nme(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const U0=xh(kf),xme={level:"info"},B0="custom_context",HO=1e3*1024;let Tme=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},V$=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new Tme(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},oW=class{constructor(e,n=HO){this.level=e??"error",this.levelValue=kf.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new V$(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===kf.levels.values.error?console.error(e):n===kf.levels.values.warn?console.warn(e):n===kf.levels.values.debug?console.debug(e):n===kf.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(nl({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new V$(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(nl({extraMetadata:e})),new Blob(n,{type:"application/json"})}},Rme=class{constructor(e,n=HO){this.baseChunkLogger=new oW(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},Pme=class{constructor(e,n=HO){this.baseChunkLogger=new oW(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var Ome=Object.defineProperty,kme=Object.defineProperties,Dme=Object.getOwnPropertyDescriptors,K$=Object.getOwnPropertySymbols,$me=Object.prototype.hasOwnProperty,Mme=Object.prototype.propertyIsEnumerable,Y$=(t,e,n)=>e in t?Ome(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,l_=(t,e)=>{for(var n in e||(e={}))$me.call(e,n)&&Y$(t,n,e[n]);if(K$)for(var n of K$(e))Mme.call(e,n)&&Y$(t,n,e[n]);return t},u_=(t,e)=>kme(t,Dme(e));function Hh(t){return u_(l_({},t),{level:(t==null?void 0:t.level)||xme.level})}function Lme(t,e=B0){return t[e]||""}function Ume(t,e,n=B0){return t[n]=e,t}function gi(t,e=B0){let n="";return typeof t.bindings>"u"?n=Lme(t,e):n=t.bindings().context||"",n}function Bme(t,e,n=B0){const r=gi(t,n);return r.trim()?`${r}/${e}`:e}function es(t,e,n=B0){const r=Bme(t,e,n),s=t.child({context:r});return Ume(s,r,n)}function jme(t){var e,n;const r=new Rme((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:U0(u_(l_({},t.opts),{level:"trace",browser:u_(l_({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function Fme(t){var e;const n=new Pme((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:U0(u_(l_({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function JC(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?jme(t):Fme(t)}function Wme(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function aW(t,...e){if(!Wme(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Q$(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function zme(t,e){aW(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const hf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const SA=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function Hme(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function cW(t){return typeof t=="string"&&(t=Hme(t)),aW(t),t}let qme=class{clone(){return this._cloneInto()}};function Gme(t){const e=r=>t().update(cW(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function lW(t=32){if(hf&&typeof hf.getRandomValues=="function")return hf.getRandomValues(new Uint8Array(t));if(hf&&typeof hf.randomBytes=="function")return hf.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function Vme(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let Kme=class extends qme{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=SA(this.buffer)}update(e){Q$(this);const{view:n,buffer:r,blockLen:s}=this;e=cW(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=SA(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Q$(this),zme(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Vme(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=SA(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const Xb=BigInt(2**32-1),aT=BigInt(32);function uW(t,e=!1){return e?{h:Number(t&Xb),l:Number(t>>aT&Xb)}:{h:Number(t>>aT&Xb)|0,l:Number(t&Xb)|0}}function Yme(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=uW(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Qme=(t,e)=>BigInt(t>>>0)<<aT|BigInt(e>>>0),Zme=(t,e,n)=>t>>>n,Jme=(t,e,n)=>t<<32-n|e>>>n,Xme=(t,e,n)=>t>>>n|e<<32-n,eye=(t,e,n)=>t<<32-n|e>>>n,tye=(t,e,n)=>t<<64-n|e>>>n-32,nye=(t,e,n)=>t>>>n-32|e<<64-n,rye=(t,e)=>e,sye=(t,e)=>t,iye=(t,e,n)=>t<<n|e>>>32-n,oye=(t,e,n)=>e<<n|t>>>32-n,aye=(t,e,n)=>e<<n-32|t>>>64-n,cye=(t,e,n)=>t<<n-32|e>>>64-n;function lye(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const uye=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),dye=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,hye=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),fye=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,pye=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),gye=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Ct={fromBig:uW,split:Yme,toBig:Qme,shrSH:Zme,shrSL:Jme,rotrSH:Xme,rotrSL:eye,rotrBH:tye,rotrBL:nye,rotr32H:rye,rotr32L:sye,rotlSH:iye,rotlSL:oye,rotlBH:aye,rotlBL:cye,add:lye,add3L:uye,add3H:dye,add4L:hye,add4H:fye,add5H:gye,add5L:pye},[mye,yye]=Ct.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),El=new Uint32Array(80),_l=new Uint32Array(80);let wye=class extends Kme{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let E=0;E<16;E++,n+=4)El[E]=e.getUint32(n),_l[E]=e.getUint32(n+=4);for(let E=16;E<80;E++){const _=El[E-15]|0,C=_l[E-15]|0,I=Ct.rotrSH(_,C,1)^Ct.rotrSH(_,C,8)^Ct.shrSH(_,C,7),A=Ct.rotrSL(_,C,1)^Ct.rotrSL(_,C,8)^Ct.shrSL(_,C,7),x=El[E-2]|0,S=_l[E-2]|0,k=Ct.rotrSH(x,S,19)^Ct.rotrBH(x,S,61)^Ct.shrSH(x,S,6),O=Ct.rotrSL(x,S,19)^Ct.rotrBL(x,S,61)^Ct.shrSL(x,S,6),U=Ct.add4L(A,O,_l[E-7],_l[E-16]),G=Ct.add4H(U,I,k,El[E-7],El[E-16]);El[E]=G|0,_l[E]=U|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:y,Hl:b}=this;for(let E=0;E<80;E++){const _=Ct.rotrSH(d,h,14)^Ct.rotrSH(d,h,18)^Ct.rotrBH(d,h,41),C=Ct.rotrSL(d,h,14)^Ct.rotrSL(d,h,18)^Ct.rotrBL(d,h,41),I=d&f^~d&g,A=h&p^~h&w,x=Ct.add5L(b,C,A,yye[E],_l[E]),S=Ct.add5H(x,y,_,I,mye[E],El[E]),k=x|0,O=Ct.rotrSH(r,s,28)^Ct.rotrBH(r,s,34)^Ct.rotrBH(r,s,39),U=Ct.rotrSL(r,s,28)^Ct.rotrBL(r,s,34)^Ct.rotrBL(r,s,39),G=r&i^r&a^i&a,F=s&o^s&c^o&c;y=g|0,b=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=Ct.add(l|0,u|0,S|0,k|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const T=Ct.add3L(k,U,F);r=Ct.add3H(T,S,O,G),s=T|0}({h:r,l:s}=Ct.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Ct.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Ct.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Ct.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Ct.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Ct.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=Ct.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:y,l:b}=Ct.add(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,w,y,b)}roundClean(){El.fill(0),_l.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const bye=Gme(()=>new wye);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qO=BigInt(0),dW=BigInt(1),vye=BigInt(2);function GO(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function VO(t){if(!GO(t))throw new Error("Uint8Array expected")}function AA(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Eye=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function KO(t){VO(t);let e="";for(let n=0;n<t.length;n++)e+=Eye[t[n]];return e}function hW(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?qO:BigInt("0x"+t)}const mc={_0:48,_9:57,A:65,F:70,a:97,f:102};function Z$(t){if(t>=mc._0&&t<=mc._9)return t-mc._0;if(t>=mc.A&&t<=mc.F)return t-(mc.A-10);if(t>=mc.a&&t<=mc.f)return t-(mc.a-10)}function fW(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=Z$(t.charCodeAt(i)),a=Z$(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function _ye(t){return hW(KO(t))}function Hv(t){return VO(t),hW(KO(Uint8Array.from(t).reverse()))}function pW(t,e){return fW(t.toString(16).padStart(e*2,"0"))}function cT(t,e){return pW(t,e).reverse()}function yc(t,e,n){let r;if(typeof e=="string")try{r=fW(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(GO(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function J$(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];VO(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const IA=t=>typeof t=="bigint"&&qO<=t;function Cye(t,e,n){return IA(t)&&IA(e)&&IA(n)&&e<=t&&t<n}function ym(t,e,n,r){if(!Cye(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Sye(t){let e;for(e=0;t>qO;t>>=dW,e+=1);return e}const Aye=t=>(vye<<BigInt(t-1))-dW,Iye={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||GO(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function YO(t,e,n={}){const r=(s,i,o)=>{const a=Iye[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function X$(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Mr=BigInt(0),sr=BigInt(1),md=BigInt(2),Nye=BigInt(3),lT=BigInt(4),e5=BigInt(5),t5=BigInt(8);function yr(t,e){const n=t%e;return n>=Mr?n:e+n}function xye(t,e,n){if(e<Mr)throw new Error("invalid exponent, negatives unsupported");if(n<=Mr)throw new Error("invalid modulus");if(n===sr)return Mr;let r=sr;for(;e>Mr;)e&sr&&(r=r*t%n),t=t*t%n,e>>=sr;return r}function ba(t,e,n){let r=t;for(;e-- >Mr;)r*=r,r%=n;return r}function n5(t,e){if(t===Mr)throw new Error("invert: expected non-zero number");if(e<=Mr)throw new Error("invert: expected positive modulus, got "+e);let n=yr(t,e),r=e,s=Mr,i=sr;for(;n!==Mr;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==sr)throw new Error("invert: does not exist");return yr(s,e)}function Tye(t){const e=(t-sr)/md;let n,r,s;for(n=t-sr,r=0;n%md===Mr;n/=md,r++);for(s=md;s<t&&xye(s,e,t)!==t-sr;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+sr)/lT;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+sr)/md;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,sr<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function Rye(t){if(t%lT===Nye){const e=(t+sr)/lT;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%t5===e5){const e=(t-e5)/t5;return function(n,r){const s=n.mul(r,md),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,md),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return Tye(t)}const Pye=(t,e)=>(yr(t,e)&sr)===sr,Oye=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function kye(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Oye.reduce((r,s)=>(r[s]="function",r),e);return YO(t,n)}function Dye(t,e,n){if(n<Mr)throw new Error("invalid exponent, negatives unsupported");if(n===Mr)return t.ONE;if(n===sr)return e;let r=t.ONE,s=e;for(;n>Mr;)n&sr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=sr;return r}function $ye(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function gW(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function mW(t,e,n=!1,r={}){if(t<=Mr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=gW(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:Aye(s),ZERO:Mr,ONE:sr,create:c=>yr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Mr<=c&&c<t},is0:c=>c===Mr,isOdd:c=>(c&sr)===sr,neg:c=>yr(-c,t),eql:(c,l)=>c===l,sqr:c=>yr(c*c,t),add:(c,l)=>yr(c+l,t),sub:(c,l)=>yr(c-l,t),mul:(c,l)=>yr(c*l,t),pow:(c,l)=>Dye(a,c,l),div:(c,l)=>yr(c*n5(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>n5(c,t),sqrt:r.sqrt||(c=>(o||(o=Rye(t)),o(a,c))),invertBatch:c=>$ye(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?cT(c,i):pW(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?Hv(c):_ye(c)}});return Object.freeze(a)}const r5=BigInt(0),ev=BigInt(1);function NA(t,e){const n=e.negate();return t?n:e}function yW(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function xA(t,e){yW(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function Mye(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Lye(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const TA=new WeakMap,wW=new WeakMap;function RA(t){return wW.get(t)||1}function Uye(t,e){return{constTimeNegate:NA,hasPrecomputes(n){return RA(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>r5;)r&ev&&(s=s.add(i)),i=i.double(),r>>=ev;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=xA(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=xA(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=ev);const g=f,w=f+Math.abs(p)-1,y=h%2!==0,b=p<0;p===0?c=c.add(NA(y,r[g])):a=a.add(NA(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=xA(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===r5)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=ev),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=TA.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&TA.set(r,s(i))),i},wNAFCached(n,r,s){const i=RA(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=RA(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){yW(r,e),wW.set(n,r),TA.delete(n)}}}function Bye(t,e,n,r){if(Mye(n,t),Lye(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=Sye(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function jye(t){return kye(t.Fp),YO(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...gW(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Do=BigInt(0),js=BigInt(1),tv=BigInt(2),Fye=BigInt(8),Wye={zip215:!0};function zye(t){const e=jye(t);return YO(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Hye(t){const e=zye(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=tv<<BigInt(a*8)-js,u=n.create,d=mW(e.n,e.nBitLength),h=e.uvRatio||((T,N)=>{try{return{isValid:!0,value:n.sqrt(T*n.inv(N))}}catch{return{isValid:!1,value:Do}}}),f=e.adjustScalarBytes||(T=>T),p=e.domain||((T,N,$)=>{if(AA("phflag",$),N.length||$)throw new Error("Contexts/pre-hash are not supported");return T});function g(T,N){ym("coordinate "+T,N,Do,l)}function w(T){if(!(T instanceof E))throw new Error("ExtendedPoint expected")}const y=X$((T,N)=>{const{ex:$,ey:R,ez:D}=T,B=T.is0();N==null&&(N=B?Fye:n.inv(D));const H=u($*N),J=u(R*N),ee=u(D*N);if(B)return{x:Do,y:js};if(ee!==js)throw new Error("invZ was invalid");return{x:H,y:J}}),b=X$(T=>{const{a:N,d:$}=e;if(T.is0())throw new Error("bad point: ZERO");const{ex:R,ey:D,ez:B,et:H}=T,J=u(R*R),ee=u(D*D),ne=u(B*B),ie=u(ne*ne),we=u(J*N),Z=u(ne*u(we+ee)),se=u(ie+u($*u(J*ee)));if(Z!==se)throw new Error("bad point: equation left != right (1)");const ue=u(R*D),ce=u(B*H);if(ue!==ce)throw new Error("bad point: equation left != right (2)");return!0});class E{constructor(N,$,R,D){this.ex=N,this.ey=$,this.ez=R,this.et=D,g("x",N),g("y",$),g("z",R),g("t",D),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(N){if(N instanceof E)throw new Error("extended point not allowed");const{x:$,y:R}=N||{};return g("x",$),g("y",R),new E($,R,js,u($*R))}static normalizeZ(N){const $=n.invertBatch(N.map(R=>R.ez));return N.map((R,D)=>R.toAffine($[D])).map(E.fromAffine)}static msm(N,$){return Bye(E,d,N,$)}_setWindowSize(N){I.setWindowSize(this,N)}assertValidity(){b(this)}equals(N){w(N);const{ex:$,ey:R,ez:D}=this,{ex:B,ey:H,ez:J}=N,ee=u($*J),ne=u(B*D),ie=u(R*J),we=u(H*D);return ee===ne&&ie===we}is0(){return this.equals(E.ZERO)}negate(){return new E(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:N}=e,{ex:$,ey:R,ez:D}=this,B=u($*$),H=u(R*R),J=u(tv*u(D*D)),ee=u(N*B),ne=$+R,ie=u(u(ne*ne)-B-H),we=ee+H,Z=we-J,se=ee-H,ue=u(ie*Z),ce=u(we*se),fe=u(ie*se),ge=u(Z*we);return new E(ue,ce,ge,fe)}add(N){w(N);const{a:$,d:R}=e,{ex:D,ey:B,ez:H,et:J}=this,{ex:ee,ey:ne,ez:ie,et:we}=N;if($===BigInt(-1)){const on=u((B-D)*(ne+ee)),Lt=u((B+D)*(ne-ee)),Un=u(Lt-on);if(Un===Do)return this.double();const mi=u(H*tv*we),To=u(J*tv*ie),ys=To+mi,Pn=Lt+on,ur=To-mi,wn=u(ys*Un),Gi=u(Pn*ur),cc=u(ys*ur),tb=u(Un*Pn);return new E(wn,Gi,tb,cc)}const Z=u(D*ee),se=u(B*ne),ue=u(J*R*we),ce=u(H*ie),fe=u((D+B)*(ee+ne)-Z-se),ge=ce-ue,Ae=ce+ue,pe=u(se-$*Z),ye=u(fe*ge),Ve=u(Ae*pe),Zt=u(fe*pe),Pt=u(ge*Ae);return new E(ye,Ve,Pt,Zt)}subtract(N){return this.add(N.negate())}wNAF(N){return I.wNAFCached(this,N,E.normalizeZ)}multiply(N){const $=N;ym("scalar",$,js,r);const{p:R,f:D}=this.wNAF($);return E.normalizeZ([R,D])[0]}multiplyUnsafe(N,$=E.ZERO){const R=N;return ym("scalar",R,Do,r),R===Do?C:this.is0()||R===js?this:I.wNAFCachedUnsafe(this,R,E.normalizeZ,$)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return I.unsafeLadder(this,r).is0()}toAffine(N){return y(this,N)}clearCofactor(){const{h:N}=e;return N===js?this:this.multiplyUnsafe(N)}static fromHex(N,$=!1){const{d:R,a:D}=e,B=n.BYTES;N=yc("pointHex",N,B),AA("zip215",$);const H=N.slice(),J=N[B-1];H[B-1]=J&-129;const ee=Hv(H),ne=$?l:n.ORDER;ym("pointHex.y",ee,Do,ne);const ie=u(ee*ee),we=u(ie-js),Z=u(R*ie-D);let{isValid:se,value:ue}=h(we,Z);if(!se)throw new Error("Point.fromHex: invalid y coordinate");const ce=(ue&js)===js,fe=(J&128)!==0;if(!$&&ue===Do&&fe)throw new Error("Point.fromHex: x=0 and x_0=1");return fe!==ce&&(ue=u(-ue)),E.fromAffine({x:ue,y:ee})}static fromPrivateKey(N){return S(N).point}toRawBytes(){const{x:N,y:$}=this.toAffine(),R=cT($,n.BYTES);return R[R.length-1]|=N&js?128:0,R}toHex(){return KO(this.toRawBytes())}}E.BASE=new E(e.Gx,e.Gy,js,u(e.Gx*e.Gy)),E.ZERO=new E(Do,js,js,Do);const{BASE:_,ZERO:C}=E,I=Uye(E,a*8);function A(T){return yr(T,r)}function x(T){return A(Hv(T))}function S(T){const N=n.BYTES;T=yc("private key",T,N);const $=yc("hashed private key",i(T),2*N),R=f($.slice(0,N)),D=$.slice(N,2*N),B=x(R),H=_.multiply(B),J=H.toRawBytes();return{head:R,prefix:D,scalar:B,point:H,pointBytes:J}}function k(T){return S(T).pointBytes}function O(T=new Uint8Array,...N){const $=J$(...N);return x(i(p($,yc("context",T),!!s)))}function U(T,N,$={}){T=yc("message",T),s&&(T=s(T));const{prefix:R,scalar:D,pointBytes:B}=S(N),H=O($.context,R,T),J=_.multiply(H).toRawBytes(),ee=O($.context,J,B,T),ne=A(H+ee*D);ym("signature.s",ne,Do,r);const ie=J$(J,cT(ne,n.BYTES));return yc("result",ie,n.BYTES*2)}const G=Wye;function F(T,N,$,R=G){const{context:D,zip215:B}=R,H=n.BYTES;T=yc("signature",T,2*H),N=yc("message",N),$=yc("publicKey",$,H),B!==void 0&&AA("zip215",B),s&&(N=s(N));const J=Hv(T.slice(H,2*H));let ee,ne,ie;try{ee=E.fromHex($,B),ne=E.fromHex(T.slice(0,H),B),ie=_.multiplyUnsafe(J)}catch{return!1}if(!B&&ee.isSmallOrder())return!1;const we=O(D,ne.toRawBytes(),ee.toRawBytes(),N);return ne.add(ee.multiplyUnsafe(we)).subtract(ie).clearCofactor().equals(E.ZERO)}return _._setWindowSize(8),{CURVE:e,getPublicKey:k,sign:U,verify:F,ExtendedPoint:E,utils:{getExtendedPublicKey:S,randomPrivateKey:()=>o(n.BYTES),precompute(T=8,N=E.BASE){return N._setWindowSize(T),N.multiply(BigInt(3)),N}}}}BigInt(0),BigInt(1);const QO=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),s5=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const qye=BigInt(1),i5=BigInt(2);BigInt(3);const Gye=BigInt(5),Vye=BigInt(8);function Kye(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=QO,o=t*t%i*t%i,a=ba(o,i5,i)*o%i,c=ba(a,qye,i)*t%i,l=ba(c,Gye,i)*c%i,u=ba(l,e,i)*l%i,d=ba(u,n,i)*u%i,h=ba(d,r,i)*d%i,f=ba(h,s,i)*h%i,p=ba(f,s,i)*h%i,g=ba(p,e,i)*l%i;return{pow_p_5_8:ba(g,i5,i)*t%i,b2:o}}function Yye(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function Qye(t,e){const n=QO,r=yr(e*e*e,n),s=yr(r*r*e,n),i=Kye(t*s).pow_p_5_8;let o=yr(t*r*i,n);const a=yr(e*o*o,n),c=o,l=yr(o*s5,n),u=a===t,d=a===yr(-t,n),h=a===yr(-t*s5,n);return u&&(o=c),(d||h)&&(o=l),Pye(o,n)&&(o=yr(-o,n)),{isValid:u||d,value:o}}const Zye=mW(QO,void 0,!0),Jye={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Zye,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Vye,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:bye,randomBytes:lW,adjustScalarBytes:Yye,uvRatio:Qye},bW=Hye(Jye),Xye="EdDSA",ewe="JWT",d_=".",XC="base64url",vW="utf8",EW="utf8",twe=":",nwe="did",rwe="key",o5="base58btc",swe="z",iwe="K36",owe=32;function ZO(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function _W(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ZO(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function CW(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=_W(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return ZO(n)}function awe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var E=(b-y)*u+1>>>0,_=new Uint8Array(E);y!==b;){for(var C=p[y],I=0,A=E-1;(C!==0||I<w)&&A!==-1;A--,I++)C+=256*_[A]>>>0,_[A]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=I,y++}for(var x=E-w;x!==E&&_[x]===0;)x++;for(var S=c.repeat(g);x<E;++x)S+=t.charAt(_[x]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,E=new Uint8Array(b);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var C=0,I=b-1;(_!==0||C<y)&&I!==-1;I--,C++)_+=a*E[I]>>>0,E[I]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");y=C,g++}if(p[g]!==" "){for(var A=b-y;A!==b&&E[A]===0;)A++;for(var x=new Uint8Array(w+(b-A)),S=w;A!==b;)x[S++]=E[A++];return x}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var cwe=awe,lwe=cwe;const SW=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},uwe=t=>new TextEncoder().encode(t),dwe=t=>new TextDecoder().decode(t);let hwe=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},fwe=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return AW(this,e)}},pwe=class{constructor(e){this.decoders=e}or(e){return AW(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const AW=(t,e)=>new pwe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let gwe=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new hwe(e,n,r),this.decoder=new fwe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const e1=({name:t,prefix:e,encode:n,decode:r})=>new gwe(t,e,n,r),j0=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=lwe(n,e);return e1({prefix:t,name:e,encode:r,decode:i=>SW(s(i))})},mwe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},ywe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},ts=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>e1({prefix:e,name:t,encode(s){return ywe(s,r,n)},decode(s){return mwe(s,r,n,t)}}),wwe=e1({prefix:"\0",name:"identity",encode:t=>dwe(t),decode:t=>uwe(t)});var bwe=Object.freeze({__proto__:null,identity:wwe});const vwe=ts({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Ewe=Object.freeze({__proto__:null,base2:vwe});const _we=ts({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Cwe=Object.freeze({__proto__:null,base8:_we});const Swe=j0({prefix:"9",name:"base10",alphabet:"0123456789"});var Awe=Object.freeze({__proto__:null,base10:Swe});const Iwe=ts({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Nwe=ts({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var xwe=Object.freeze({__proto__:null,base16:Iwe,base16upper:Nwe});const Twe=ts({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Rwe=ts({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Pwe=ts({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Owe=ts({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),kwe=ts({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Dwe=ts({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),$we=ts({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Mwe=ts({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Lwe=ts({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Uwe=Object.freeze({__proto__:null,base32:Twe,base32upper:Rwe,base32pad:Pwe,base32padupper:Owe,base32hex:kwe,base32hexupper:Dwe,base32hexpad:$we,base32hexpadupper:Mwe,base32z:Lwe});const Bwe=j0({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),jwe=j0({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Fwe=Object.freeze({__proto__:null,base36:Bwe,base36upper:jwe});const Wwe=j0({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),zwe=j0({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Hwe=Object.freeze({__proto__:null,base58btc:Wwe,base58flickr:zwe});const qwe=ts({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Gwe=ts({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Vwe=ts({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Kwe=ts({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Ywe=Object.freeze({__proto__:null,base64:qwe,base64pad:Gwe,base64url:Vwe,base64urlpad:Kwe});const IW=Array.from(""),Qwe=IW.reduce((t,e,n)=>(t[n]=e,t),[]),Zwe=IW.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Jwe(t){return t.reduce((e,n)=>(e+=Qwe[n],e),"")}function Xwe(t){const e=[];for(const n of t){const r=Zwe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const e0e=e1({prefix:"",name:"base256emoji",encode:Jwe,decode:Xwe});var t0e=Object.freeze({__proto__:null,base256emoji:e0e}),n0e=NW,a5=128,r0e=-128,s0e=Math.pow(2,31);function NW(t,e,n){e=e||[],n=n||0;for(var r=n;t>=s0e;)e[n++]=t&255|a5,t/=128;for(;t&r0e;)e[n++]=t&255|a5,t>>>=7;return e[n]=t|0,NW.bytes=n-r+1,e}var i0e=uT,o0e=128,c5=127;function uT(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw uT.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&c5)<<s:(o&c5)*Math.pow(2,s),s+=7}while(o>=o0e);return uT.bytes=i-r,n}var a0e=Math.pow(2,7),c0e=Math.pow(2,14),l0e=Math.pow(2,21),u0e=Math.pow(2,28),d0e=Math.pow(2,35),h0e=Math.pow(2,42),f0e=Math.pow(2,49),p0e=Math.pow(2,56),g0e=Math.pow(2,63),m0e=function(t){return t<a0e?1:t<c0e?2:t<l0e?3:t<u0e?4:t<d0e?5:t<h0e?6:t<f0e?7:t<p0e?8:t<g0e?9:10},y0e={encode:n0e,decode:i0e,encodingLength:m0e},xW=y0e;const l5=(t,e,n=0)=>(xW.encode(t,e,n),e),u5=t=>xW.encodingLength(t),dT=(t,e)=>{const n=e.byteLength,r=u5(t),s=r+u5(n),i=new Uint8Array(s+n);return l5(t,i,0),l5(n,i,r),i.set(e,s),new w0e(t,n,e,i)};let w0e=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const TW=({name:t,code:e,encode:n})=>new b0e(t,e,n);let b0e=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?dT(this.code,n):n.then(r=>dT(this.code,r))}else throw Error("Unknown type, must be binary type")}};const RW=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),v0e=TW({name:"sha2-256",code:18,encode:RW("SHA-256")}),E0e=TW({name:"sha2-512",code:19,encode:RW("SHA-512")});var _0e=Object.freeze({__proto__:null,sha256:v0e,sha512:E0e});const PW=0,C0e="identity",OW=SW,S0e=t=>dT(PW,OW(t)),A0e={code:PW,name:C0e,encode:OW,digest:S0e};var I0e=Object.freeze({__proto__:null,identity:A0e});new TextEncoder,new TextDecoder;const d5={...bwe,...Ewe,...Cwe,...Awe,...xwe,...Uwe,...Fwe,...Hwe,...Ywe,...t0e};({..._0e,...I0e});function kW(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const h5=kW("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),PA=kW("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=_W(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),DW={utf8:h5,"utf-8":h5,hex:d5.base16,latin1:PA,ascii:PA,binary:PA,...d5};function t1(t,e="utf8"){const n=DW[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function kg(t,e="utf8"){const n=DW[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ZO(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function f5(t){return yh(t1(kg(t,XC),vW))}function h_(t){return t1(kg(nl(t),vW),XC)}function $W(t){const e=kg(iwe,o5),n=swe+t1(CW([e,t]),o5);return[nwe,rwe,n].join(twe)}function N0e(t){return t1(t,XC)}function x0e(t){return kg(t,XC)}function T0e(t){return kg([h_(t.header),h_(t.payload)].join(d_),EW)}function R0e(t){return[h_(t.header),h_(t.payload),N0e(t.signature)].join(d_)}function hT(t){const e=t.split(d_),n=f5(e[0]),r=f5(e[1]),s=x0e(e[2]),i=kg(e.slice(0,2).join(d_),EW);return{header:n,payload:r,signature:s,data:i}}function p5(t=lW(owe)){const e=bW.getPublicKey(t);return{secretKey:CW([t,e]),publicKey:e}}async function P0e(t,e,n,r,s=_e.fromMiliseconds(Date.now())){const i={alg:Xye,typ:ewe},o=$W(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=T0e({header:i,payload:c}),u=bW.sign(l,r.secretKey.slice(0,32));return R0e({header:i,payload:c,signature:u})}var g5=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},O0e=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),k0e=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),D0e=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),$0e=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),M0e=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),L0e=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,U0e=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,m5=3,B0e=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",L0e]],y5=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function j0e(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new M0e:typeof navigator<"u"?W0e(navigator.userAgent):H0e()}function F0e(t){return t!==""&&B0e.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function W0e(t){var e=F0e(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new $0e;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<m5&&(s=g5(g5([],s,!0),q0e(m5-s.length),!0)):s=[];var i=s.join("."),o=z0e(t),a=U0e.exec(t);return a&&a[1]?new D0e(n,i,o,a[1]):new O0e(n,i,o)}function z0e(t){for(var e=0,n=y5.length;e<n;e++){var r=y5[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function H0e(){var t=typeof process<"u"&&process.version;return t?new k0e(process.version.slice(1)):null}function q0e(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var In={};Object.defineProperty(In,"__esModule",{value:!0});In.getLocalStorage=In.getLocalStorageOrThrow=In.getCrypto=In.getCryptoOrThrow=MW=In.getLocation=In.getLocationOrThrow=JO=In.getNavigator=In.getNavigatorOrThrow=wh=In.getDocument=In.getDocumentOrThrow=In.getFromWindowOrThrow=In.getFromWindow=void 0;function qh(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}In.getFromWindow=qh;function Dg(t){const e=qh(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}In.getFromWindowOrThrow=Dg;function G0e(){return Dg("document")}In.getDocumentOrThrow=G0e;function V0e(){return qh("document")}var wh=In.getDocument=V0e;function K0e(){return Dg("navigator")}In.getNavigatorOrThrow=K0e;function Y0e(){return qh("navigator")}var JO=In.getNavigator=Y0e;function Q0e(){return Dg("location")}In.getLocationOrThrow=Q0e;function Z0e(){return qh("location")}var MW=In.getLocation=Z0e;function J0e(){return Dg("crypto")}In.getCryptoOrThrow=J0e;function X0e(){return qh("crypto")}In.getCrypto=X0e;function ebe(){return Dg("localStorage")}In.getLocalStorageOrThrow=ebe;function tbe(){return qh("localStorage")}In.getLocalStorage=tbe;var XO={};Object.defineProperty(XO,"__esModule",{value:!0});var LW=XO.getWindowMetadata=void 0;const w5=In;function nbe(){let t,e;try{t=w5.getDocumentOrThrow(),e=w5.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const w=p.getAttribute("href");if(w)if(w.toLowerCase().indexOf("https:")===-1&&w.toLowerCase().indexOf("http:")===-1&&w.indexOf("//")!==0){let y=e.protocol+"//"+e.host;if(w.indexOf("/")===0)y+=w;else{const b=e.pathname.split("/");b.pop();const E=b.join("/");y+=E+"/"+w}h.push(y)}else if(w.indexOf("//")===0){const y=e.protocol+w;h.push(y)}else h.push(w)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(w=>p.getAttribute(w)).filter(w=>w?d.includes(w):!1);if(g.length&&g){const w=p.getAttribute("content");if(w)return w}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}LW=XO.getWindowMetadata=nbe;function rbe(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let b=l[h],E=0;for(let _=p-1;(b!==0||E<d)&&_!==-1;_--,E++)b+=256*g[_]>>>0,g[_]=b%n>>>0,b=b/n>>>0;if(b!==0)throw new Error("Non-zero carry");d=E,h++}let w=p-d;for(;w!==p&&g[w]===0;)w++;let y=r.repeat(u);for(;w<p;++w)y+=t.charAt(g[w]);return y}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const b=l.charCodeAt(u);if(b>255)return;let E=e[b];if(E===255)return;let _=0;for(let C=f-1;(E!==0||_<h)&&C!==-1;C--,_++)E+=n*p[C]>>>0,p[C]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");h=_,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const w=new Uint8Array(d+(f-g));let y=d;for(;g!==f;)w[y++]=p[g++];return w}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var sbe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const UW=rbe(sbe);function BW(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function wy(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=BW(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function ibe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var E=(b-y)*u+1>>>0,_=new Uint8Array(E);y!==b;){for(var C=p[y],I=0,A=E-1;(C!==0||I<w)&&A!==-1;A--,I++)C+=256*_[A]>>>0,_[A]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=I,y++}for(var x=E-w;x!==E&&_[x]===0;)x++;for(var S=c.repeat(g);x<E;++x)S+=t.charAt(_[x]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,E=new Uint8Array(b);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var C=0,I=b-1;(_!==0||C<y)&&I!==-1;I--,C++)_+=a*E[I]>>>0,E[I]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");y=C,g++}if(p[g]!==" "){for(var A=b-y;A!==b&&E[A]===0;)A++;for(var x=new Uint8Array(w+(b-A)),S=w;A!==b;)x[S++]=E[A++];return x}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var obe=ibe,abe=obe;const cbe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},lbe=t=>new TextEncoder().encode(t),ube=t=>new TextDecoder().decode(t);class dbe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class hbe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return jW(this,e)}}class fbe{constructor(e){this.decoders=e}or(e){return jW(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const jW=(t,e)=>new fbe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class pbe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new dbe(e,n,r),this.decoder=new hbe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const n1=({name:t,prefix:e,encode:n,decode:r})=>new pbe(t,e,n,r),F0=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=abe(n,e);return n1({prefix:t,name:e,encode:r,decode:i=>cbe(s(i))})},gbe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},mbe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},ns=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>n1({prefix:e,name:t,encode(s){return mbe(s,r,n)},decode(s){return gbe(s,r,n,t)}}),ybe=n1({prefix:"\0",name:"identity",encode:t=>ube(t),decode:t=>lbe(t)}),wbe=Object.freeze(Object.defineProperty({__proto__:null,identity:ybe},Symbol.toStringTag,{value:"Module"})),bbe=ns({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),vbe=Object.freeze(Object.defineProperty({__proto__:null,base2:bbe},Symbol.toStringTag,{value:"Module"})),Ebe=ns({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),_be=Object.freeze(Object.defineProperty({__proto__:null,base8:Ebe},Symbol.toStringTag,{value:"Module"})),Cbe=F0({prefix:"9",name:"base10",alphabet:"0123456789"}),Sbe=Object.freeze(Object.defineProperty({__proto__:null,base10:Cbe},Symbol.toStringTag,{value:"Module"})),Abe=ns({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Ibe=ns({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Nbe=Object.freeze(Object.defineProperty({__proto__:null,base16:Abe,base16upper:Ibe},Symbol.toStringTag,{value:"Module"})),xbe=ns({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Tbe=ns({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Rbe=ns({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Pbe=ns({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Obe=ns({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),kbe=ns({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Dbe=ns({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),$be=ns({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Mbe=ns({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Lbe=Object.freeze(Object.defineProperty({__proto__:null,base32:xbe,base32hex:Obe,base32hexpad:Dbe,base32hexpadupper:$be,base32hexupper:kbe,base32pad:Rbe,base32padupper:Pbe,base32upper:Tbe,base32z:Mbe},Symbol.toStringTag,{value:"Module"})),Ube=F0({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Bbe=F0({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),jbe=Object.freeze(Object.defineProperty({__proto__:null,base36:Ube,base36upper:Bbe},Symbol.toStringTag,{value:"Module"})),Fbe=F0({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Wbe=F0({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),zbe=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Fbe,base58flickr:Wbe},Symbol.toStringTag,{value:"Module"})),Hbe=ns({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),qbe=ns({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Gbe=ns({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Vbe=ns({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Kbe=Object.freeze(Object.defineProperty({__proto__:null,base64:Hbe,base64pad:qbe,base64url:Gbe,base64urlpad:Vbe},Symbol.toStringTag,{value:"Module"})),FW=Array.from(""),Ybe=FW.reduce((t,e,n)=>(t[n]=e,t),[]),Qbe=FW.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Zbe(t){return t.reduce((e,n)=>(e+=Ybe[n],e),"")}function Jbe(t){const e=[];for(const n of t){const r=Qbe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Xbe=n1({prefix:"",name:"base256emoji",encode:Zbe,decode:Jbe}),eve=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Xbe},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const b5={...wbe,...vbe,..._be,...Sbe,...Nbe,...Lbe,...jbe,...zbe,...Kbe,...eve};function WW(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const v5=WW("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),OA=WW("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=BW(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),zW={utf8:v5,"utf-8":v5,hex:b5.base16,latin1:OA,ascii:OA,binary:OA,...b5};function fo(t,e="utf8"){const n=zW[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function di(t,e="utf8"){const n=zW[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const tve={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},nve="PARSE_ERROR",rve="INVALID_REQUEST",sve="METHOD_NOT_FOUND",ive="INVALID_PARAMS",HW="INTERNAL_ERROR",ek="SERVER_ERROR",ove=[-32700,-32600,-32601,-32602,-32603],by={[nve]:{code:-32700,message:"Parse error"},[rve]:{code:-32600,message:"Invalid Request"},[sve]:{code:-32601,message:"Method not found"},[ive]:{code:-32602,message:"Invalid params"},[HW]:{code:-32603,message:"Internal error"},[ek]:{code:-32e3,message:"Server error"}},qW=ek;function ave(t){return ove.includes(t)}function E5(t){return Object.keys(by).includes(t)?by[t]:by[qW]}function cve(t){const e=Object.values(by).find(n=>n.code===t);return e||by[qW]}function GW(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var VW={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var fT=function(t,e){return fT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},fT(t,e)};function lve(t,e){fT(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var pT=function(){return pT=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},pT.apply(this,arguments)};function uve(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function dve(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function hve(t,e){return function(n,r){e(n,r,t)}}function fve(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function pve(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function gve(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function mve(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function yve(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function gT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function KW(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function wve(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(KW(arguments[e]));return t}function bve(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function Pw(t){return this instanceof Pw?(this.v=t,this):new Pw(t)}function vve(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof Pw?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Eve(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:Pw(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function _ve(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof gT=="function"?gT(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function Cve(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Sve(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Ave(t){return t&&t.__esModule?t:{default:t}}function Ive(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Nve(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const xve=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return pT},__asyncDelegator:Eve,__asyncGenerator:vve,__asyncValues:_ve,__await:Pw,__awaiter:pve,__classPrivateFieldGet:Ive,__classPrivateFieldSet:Nve,__createBinding:mve,__decorate:dve,__exportStar:yve,__extends:lve,__generator:gve,__importDefault:Ave,__importStar:Sve,__makeTemplateObject:Cve,__metadata:fve,__param:hve,__read:KW,__rest:uve,__spread:wve,__spreadArrays:bve,__values:gT},Symbol.toStringTag,{value:"Module"})),Tve=kU(xve);var wc={},_5;function Rve(){if(_5)return wc;_5=1,Object.defineProperty(wc,"__esModule",{value:!0}),wc.isBrowserCryptoAvailable=wc.getSubtleCrypto=wc.getBrowerCrypto=void 0;function t(){return(ka==null?void 0:ka.crypto)||(ka==null?void 0:ka.msCrypto)||{}}wc.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}wc.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return wc.isBrowserCryptoAvailable=n,wc}var bc={},C5;function Pve(){if(C5)return bc;C5=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.isBrowser=bc.isNode=bc.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}bc.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}bc.isNode=e;function n(){return!t()&&!e()}return bc.isBrowser=n,bc}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Tve;e.__exportStar(Rve(),t),e.__exportStar(Pve(),t)})(VW);function xa(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function Pd(t=6){return BigInt(xa(t))}function nu(t,e,n){return{id:n||xa(),jsonrpc:"2.0",method:t,params:e}}function r1(t,e){return{id:t,jsonrpc:"2.0",result:e}}function s1(t,e,n){return{id:t,jsonrpc:"2.0",error:Ove(e)}}function Ove(t,e){return typeof t>"u"?E5(HW):(typeof t=="string"&&(t=Object.assign(Object.assign({},E5(ek)),{message:t})),ave(t.code)&&(t=cve(t.code)),t)}let kve=class{},Dve=class extends kve{constructor(){super()}},$ve=class extends Dve{constructor(e){super()}};const Mve="^https?:",Lve="^wss?:";function Uve(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function YW(t,e){const n=Uve(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function S5(t){return YW(t,Mve)}function A5(t){return YW(t,Lve)}function Bve(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function QW(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function tk(t){return QW(t)&&"method"in t}function i1(t){return QW(t)&&(Ta(t)||oo(t))}function Ta(t){return"result"in t}function oo(t){return"error"in t}let Io=class extends $ve{constructor(e){super(e),this.events=new Ao.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(nu(e.method,e.params||[],e.id||Pd().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{oo(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),i1(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const jve=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Fve=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",I5=t=>t.split("?")[0],N5=10,Wve=jve();let zve=class{constructor(e){if(this.url=e,this.events=new Ao.EventEmitter,this.registering=!1,!A5(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(nl(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!A5(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=VW.isReactNative()?void 0:{rejectUnauthorized:!Bve(e)},i=new Wve(e,[],s);Fve()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?yh(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=s1(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return GW(e,I5(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>N5&&this.events.setMaxListeners(N5)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${I5(this.url)}`));return this.events.emit("register_error",n),n}};var mT={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof ka<"u"&&ka,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof ka<"u"&&ka||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(T){return T&&DataView.prototype.isPrototypeOf(T)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(T){return T&&u.indexOf(Object.prototype.toString.call(T))>-1};function h(T){if(typeof T!="string"&&(T=String(T)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(T)||T==="")throw new TypeError('Invalid character in header field name: "'+T+'"');return T.toLowerCase()}function f(T){return typeof T!="string"&&(T=String(T)),T}function p(T){var N={next:function(){var $=T.shift();return{done:$===void 0,value:$}}};return c.iterable&&(N[Symbol.iterator]=function(){return N}),N}function g(T){this.map={},T instanceof g?T.forEach(function(N,$){this.append($,N)},this):Array.isArray(T)?T.forEach(function(N){if(N.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+N.length);this.append(N[0],N[1])},this):T&&Object.getOwnPropertyNames(T).forEach(function(N){this.append(N,T[N])},this)}g.prototype.append=function(T,N){T=h(T),N=f(N);var $=this.map[T];this.map[T]=$?$+", "+N:N},g.prototype.delete=function(T){delete this.map[h(T)]},g.prototype.get=function(T){return T=h(T),this.has(T)?this.map[T]:null},g.prototype.has=function(T){return this.map.hasOwnProperty(h(T))},g.prototype.set=function(T,N){this.map[h(T)]=f(N)},g.prototype.forEach=function(T,N){for(var $ in this.map)this.map.hasOwnProperty($)&&T.call(N,this.map[$],$,this)},g.prototype.keys=function(){var T=[];return this.forEach(function(N,$){T.push($)}),p(T)},g.prototype.values=function(){var T=[];return this.forEach(function(N){T.push(N)}),p(T)},g.prototype.entries=function(){var T=[];return this.forEach(function(N,$){T.push([$,N])}),p(T)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function w(T){if(!T._noBody){if(T.bodyUsed)return Promise.reject(new TypeError("Already read"));T.bodyUsed=!0}}function y(T){return new Promise(function(N,$){T.onload=function(){N(T.result)},T.onerror=function(){$(T.error)}})}function b(T){var N=new FileReader,$=y(N);return N.readAsArrayBuffer(T),$}function E(T){var N=new FileReader,$=y(N),R=/charset=([A-Za-z0-9_-]+)/.exec(T.type),D=R?R[1]:"utf-8";return N.readAsText(T,D),$}function _(T){for(var N=new Uint8Array(T),$=new Array(N.length),R=0;R<N.length;R++)$[R]=String.fromCharCode(N[R]);return $.join("")}function C(T){if(T.slice)return T.slice(0);var N=new Uint8Array(T.byteLength);return N.set(new Uint8Array(T)),N.buffer}function I(){return this.bodyUsed=!1,this._initBody=function(T){this.bodyUsed=this.bodyUsed,this._bodyInit=T,T?typeof T=="string"?this._bodyText=T:c.blob&&Blob.prototype.isPrototypeOf(T)?this._bodyBlob=T:c.formData&&FormData.prototype.isPrototypeOf(T)?this._bodyFormData=T:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(T)?this._bodyText=T.toString():c.arrayBuffer&&c.blob&&l(T)?(this._bodyArrayBuffer=C(T.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(T)||d(T))?this._bodyArrayBuffer=C(T):this._bodyText=T=Object.prototype.toString.call(T):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof T=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(T)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var T=w(this);if(T)return T;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var T=w(this);return T||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var T=w(this);if(T)return T;if(this._bodyBlob)return E(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(_(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}var A=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function x(T){var N=T.toUpperCase();return A.indexOf(N)>-1?N:T}function S(T,N){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');N=N||{};var $=N.body;if(T instanceof S){if(T.bodyUsed)throw new TypeError("Already read");this.url=T.url,this.credentials=T.credentials,N.headers||(this.headers=new g(T.headers)),this.method=T.method,this.mode=T.mode,this.signal=T.signal,!$&&T._bodyInit!=null&&($=T._bodyInit,T.bodyUsed=!0)}else this.url=String(T);if(this.credentials=N.credentials||this.credentials||"same-origin",(N.headers||!this.headers)&&(this.headers=new g(N.headers)),this.method=x(N.method||this.method||"GET"),this.mode=N.mode||this.mode||null,this.signal=N.signal||this.signal||function(){if("AbortController"in a){var B=new AbortController;return B.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&$)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody($),(this.method==="GET"||this.method==="HEAD")&&(N.cache==="no-store"||N.cache==="no-cache")){var R=/([?&])_=[^&]*/;if(R.test(this.url))this.url=this.url.replace(R,"$1_="+new Date().getTime());else{var D=/\?/;this.url+=(D.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}S.prototype.clone=function(){return new S(this,{body:this._bodyInit})};function k(T){var N=new FormData;return T.trim().split("&").forEach(function($){if($){var R=$.split("="),D=R.shift().replace(/\+/g," "),B=R.join("=").replace(/\+/g," ");N.append(decodeURIComponent(D),decodeURIComponent(B))}}),N}function O(T){var N=new g,$=T.replace(/\r?\n[\t ]+/g," ");return $.split("\r").map(function(R){return R.indexOf(`
`)===0?R.substr(1,R.length):R}).forEach(function(R){var D=R.split(":"),B=D.shift().trim();if(B){var H=D.join(":").trim();try{N.append(B,H)}catch(J){console.warn("Response "+J.message)}}}),N}I.call(S.prototype);function U(T,N){if(!(this instanceof U))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(N||(N={}),this.type="default",this.status=N.status===void 0?200:N.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=N.statusText===void 0?"":""+N.statusText,this.headers=new g(N.headers),this.url=N.url||"",this._initBody(T)}I.call(U.prototype),U.prototype.clone=function(){return new U(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},U.error=function(){var T=new U(null,{status:200,statusText:""});return T.ok=!1,T.status=0,T.type="error",T};var G=[301,302,303,307,308];U.redirect=function(T,N){if(G.indexOf(N)===-1)throw new RangeError("Invalid status code");return new U(null,{status:N,headers:{location:T}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(N,$){this.message=N,this.name=$;var R=Error(N);this.stack=R.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function F(T,N){return new Promise(function($,R){var D=new S(T,N);if(D.signal&&D.signal.aborted)return R(new o.DOMException("Aborted","AbortError"));var B=new XMLHttpRequest;function H(){B.abort()}B.onload=function(){var ne={statusText:B.statusText,headers:O(B.getAllResponseHeaders()||"")};D.url.indexOf("file://")===0&&(B.status<200||B.status>599)?ne.status=200:ne.status=B.status,ne.url="responseURL"in B?B.responseURL:ne.headers.get("X-Request-URL");var ie="response"in B?B.response:B.responseText;setTimeout(function(){$(new U(ie,ne))},0)},B.onerror=function(){setTimeout(function(){R(new TypeError("Network request failed"))},0)},B.ontimeout=function(){setTimeout(function(){R(new TypeError("Network request timed out"))},0)},B.onabort=function(){setTimeout(function(){R(new o.DOMException("Aborted","AbortError"))},0)};function J(ne){try{return ne===""&&a.location.href?a.location.href:ne}catch{return ne}}if(B.open(D.method,J(D.url),!0),D.credentials==="include"?B.withCredentials=!0:D.credentials==="omit"&&(B.withCredentials=!1),"responseType"in B&&(c.blob?B.responseType="blob":c.arrayBuffer&&(B.responseType="arraybuffer")),N&&typeof N.headers=="object"&&!(N.headers instanceof g||a.Headers&&N.headers instanceof a.Headers)){var ee=[];Object.getOwnPropertyNames(N.headers).forEach(function(ne){ee.push(h(ne)),B.setRequestHeader(ne,f(N.headers[ne]))}),D.headers.forEach(function(ne,ie){ee.indexOf(ie)===-1&&B.setRequestHeader(ie,ne)})}else D.headers.forEach(function(ne,ie){B.setRequestHeader(ie,ne)});D.signal&&(D.signal.addEventListener("abort",H),B.onreadystatechange=function(){B.readyState===4&&D.signal.removeEventListener("abort",H)}),B.send(typeof D._bodyInit>"u"?null:D._bodyInit)})}return F.polyfill=!0,a.fetch||(a.fetch=F,a.Headers=g,a.Request=S,a.Response=U),o.Headers=g,o.Request=S,o.Response=U,o.fetch=F,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(mT,mT.exports);var Hve=mT.exports;const x5=xh(Hve);var qve=Object.defineProperty,Gve=Object.defineProperties,Vve=Object.getOwnPropertyDescriptors,T5=Object.getOwnPropertySymbols,Kve=Object.prototype.hasOwnProperty,Yve=Object.prototype.propertyIsEnumerable,R5=(t,e,n)=>e in t?qve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,P5=(t,e)=>{for(var n in e||(e={}))Kve.call(e,n)&&R5(t,n,e[n]);if(T5)for(var n of T5(e))Yve.call(e,n)&&R5(t,n,e[n]);return t},O5=(t,e)=>Gve(t,Vve(e));const Qve={Accept:"application/json","Content-Type":"application/json"},Zve="POST",k5={headers:Qve,method:Zve},D5=10;let fa=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new Ao.EventEmitter,this.isAvailable=!1,this.registering=!1,!S5(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=nl(e),r=await(await x5(this.url,O5(P5({},k5),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!S5(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=nl({id:1,jsonrpc:"2.0",method:"test",params:[]});await x5(e,O5(P5({},k5),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?yh(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=s1(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return GW(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>D5&&this.events.setMaxListeners(D5)}};const vy={getSIWX(){return he.state.siwx},async initializeIfEnabled(){var i;const t=he.state.siwx,e=L.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(L.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await $r.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),Fn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=ot._getClient())==null?void 0:i.disconnect().catch(console.error)),St.reset("Connect"),Zo.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=he.state.siwx,e=Ze.getPlainAddress(L.getActiveCaipAddress()),n=L.getActiveCaipNetwork(),r=ot._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();De.getConnectorId(n.chainNamespace)===$e.CONNECTOR_ID.AUTH&&St.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),$r.close(),Fn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!$r.state.open||St.state.view==="ApproveTransaction")&&await $r.open({view:"SIWXSignMessage"}),i.isSmartAccount?Zo.showError("This application might not support Smart Accounts"):Zo.showError("Signature declined"),Fn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await ot.disconnect():$r.close(),St.reset("Connect"),Fn.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=he.state.siwx,e=Ze.getPlainAddress(L.getActiveCaipAddress()),n=L.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=St.state.view==="ApproveTransaction",r=St.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=vy.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=L.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Zo.showLoading("Authenticating...",{autoClose:!1}),Fe.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),Fn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:vy.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),Fn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:vy.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Zo.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=L.state.activeChain;return{network:((e=L.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=Fe.state.preferredAccountTypes)==null?void 0:n[t])===Zr.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};function nv(t,e){return De.getConnectorId(t)===e}function Jve(t){const e=Array.from(L.state.chains.keys());let n=[];return t?(n.push([t,L.state.chains.get(t)]),nv(t,$e.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&nv(r,$e.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,L.state.chains.get(r)])}):nv(t,$e.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&nv(r,$e.CONNECTOR_ID.AUTH)&&n.push([r,L.state.chains.get(r)])})):n=Array.from(L.state.chains.entries()),n}const Xs={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},f_={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[$e.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[$e.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[$e.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[$e.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[$e.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[$e.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[$e.CONNECTOR_ID.INJECTED]:"Browser Wallet",[$e.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[$e.CONNECTOR_ID.COINBASE]:"Coinbase",[$e.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[$e.CONNECTOR_ID.LEDGER]:"Ledger",[$e.CONNECTOR_ID.SAFE]:"Safe"}},o1={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Xs.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},Xve=new AbortController,$a={EmbeddedWalletAbortController:Xve,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${eEe()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function eEe(){return typeof window<"u"}const tEe={createLogger(t,e="error"){const n=Hh({level:e}),{logger:r}=JC({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},nEe="rpc.walletconnect.org";function $5(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const kA=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Df={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===nEe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:$e.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${$e.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return kA.includes(e)?$5(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:f_.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Df.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(eu(a.url,a.config))}),kA.includes(t.caipNetworkId)&&r.push(eu($5(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(eu(a))}),r_(r)},extendWagmiTransports(t,e,n){if(kA.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return r_([n,eu(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:$e.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=We.getActiveCaipNetworkId(),n=L.getAllRequestedCaipNetworks(),r=Array.from(((c=L.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},p_={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Fs=Mn({providers:{...p_},providerIds:{...p_}}),pn={state:Fs,subscribeKey(t,e){return ms(Fs,t,e)},subscribe(t){return ps(Fs,()=>{t(Fs)})},subscribeProviders(t){return ps(Fs.providers,()=>t(Fs.providers))},setProvider(t,e){e&&(Fs.providers[t]=gh(e))},getProvider(t){return Fs.providers[t]},setProviderId(t,e){e&&(Fs.providerIds[t]=e)},getProviderId(t){if(t)return Fs.providerIds[t]},reset(){Fs.providers={...p_},Fs.providerIds={...p_}},resetChain(t){Fs.providers[t]=void 0,Fs.providerIds[t]=void 0}},M5={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},qr={set(t,e){Ri.isClient&&localStorage.setItem(`${Be.STORAGE_KEY}${t}`,e)},get(t){return Ri.isClient?localStorage.getItem(`${Be.STORAGE_KEY}${t}`):null},delete(t,e){Ri.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Be.STORAGE_KEY}${t}`))}},rv=30*1e3,Ri={checkIfAllowedToTriggerEmail(){const t=qr.get(Be.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<rv){const n=Math.ceil((rv-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=qr.get(Be.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<rv)return Math.ceil((rv-e)/1e3)}return 0},checkIfRequestExists(t){return Zr.NOT_SAFE_RPC_METHODS.includes(t.method)||Zr.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(M5.transactionHash))||(t==null?void 0:t.match(M5.signedMessage)))?Be.RPC_RESPONSE_TYPE_TX:Be.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Zr.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var Kt;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Kt||(Kt={}));var yT;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(yT||(yT={}));const Re=Kt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Bl=t=>{switch(typeof t){case"undefined":return Re.undefined;case"string":return Re.string;case"number":return isNaN(t)?Re.nan:Re.number;case"boolean":return Re.boolean;case"function":return Re.function;case"bigint":return Re.bigint;case"symbol":return Re.symbol;case"object":return Array.isArray(t)?Re.array:t===null?Re.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Re.promise:typeof Map<"u"&&t instanceof Map?Re.map:typeof Set<"u"&&t instanceof Set?Re.set:typeof Date<"u"&&t instanceof Date?Re.date:Re.object;default:return Re.unknown}},ve=Kt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),rEe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ia extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,Kt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ia.create=t=>new ia(t);const Ow=(t,e)=>{let n;switch(t.code){case ve.invalid_type:t.received===Re.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ve.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Kt.jsonStringifyReplacer)}`;break;case ve.unrecognized_keys:n=`Unrecognized key(s) in object: ${Kt.joinValues(t.keys,", ")}`;break;case ve.invalid_union:n="Invalid input";break;case ve.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Kt.joinValues(t.options)}`;break;case ve.invalid_enum_value:n=`Invalid enum value. Expected ${Kt.joinValues(t.options)}, received '${t.received}'`;break;case ve.invalid_arguments:n="Invalid function arguments";break;case ve.invalid_return_type:n="Invalid function return type";break;case ve.invalid_date:n="Invalid date";break;case ve.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Kt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ve.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ve.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ve.custom:n="Invalid input";break;case ve.invalid_intersection_types:n="Intersection results could not be merged";break;case ve.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ve.not_finite:n="Number must be finite";break;default:n=e.defaultError,Kt.assertNever(t)}return{message:n}};let ZW=Ow;function sEe(t){ZW=t}function g_(){return ZW}const m_=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},iEe=[];function Ue(t,e){const n=m_({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,g_(),Ow].filter(r=>!!r)});t.common.issues.push(n)}class gs{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return mt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return gs.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return mt;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const mt=Object.freeze({status:"aborted"}),JW=t=>({status:"dirty",value:t}),Os=t=>({status:"valid",value:t}),wT=t=>t.status==="aborted",bT=t=>t.status==="dirty",kw=t=>t.status==="valid",y_=t=>typeof Promise<"u"&&t instanceof Promise;var et;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(et||(et={}));class nc{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const L5=(t,e)=>{if(kw(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ia(t.common.issues);return this._error=n,this._error}}};function Et(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class At{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Bl(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Bl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new gs,ctx:{common:e.parent.common,data:e.data,parsedType:Bl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(y_(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Bl(e)},i=this._parseSync({data:e,path:s.path,parent:s});return L5(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Bl(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(y_(s)?s:Promise.resolve(s));return L5(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:ve.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new da({schema:this,typeName:ut.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return zc.create(this,this._def)}nullable(){return Eh.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return oa.create(this,this._def)}promise(){return tg.create(this,this._def)}or(e){return Lw.create([this,e],this._def)}and(e){return Uw.create(this,e,this._def)}transform(e){return new da({...Et(this._def),schema:this,typeName:ut.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new zw({...Et(this._def),innerType:this,defaultValue:n,typeName:ut.ZodDefault})}brand(){return new ez({typeName:ut.ZodBranded,type:this,...Et(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new E_({...Et(this._def),innerType:this,catchValue:n,typeName:ut.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return W0.create(this,e)}readonly(){return C_.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const oEe=/^c[^\s-]{8,}$/i,aEe=/^[a-z][a-z0-9]*$/,cEe=/^[0-9A-HJKMNP-TV-Z]{26}$/,lEe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,uEe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,dEe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let DA;const hEe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,fEe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,pEe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function gEe(t,e){return!!((e==="v4"||!e)&&hEe.test(t)||(e==="v6"||!e)&&fEe.test(t))}class ea extends At{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Re.string){const i=this._getOrReturnCtx(e);return Ue(i,{code:ve.invalid_type,expected:Re.string,received:i.parsedType}),mt}const r=new gs;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Ue(s,{code:ve.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Ue(s,{code:ve.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?Ue(s,{code:ve.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&Ue(s,{code:ve.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")uEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ue(s,{validation:"email",code:ve.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")DA||(DA=new RegExp(dEe,"u")),DA.test(e.data)||(s=this._getOrReturnCtx(e,s),Ue(s,{validation:"emoji",code:ve.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")lEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ue(s,{validation:"uuid",code:ve.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")oEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ue(s,{validation:"cuid",code:ve.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")aEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ue(s,{validation:"cuid2",code:ve.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")cEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ue(s,{validation:"ulid",code:ve.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Ue(s,{validation:"url",code:ve.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Ue(s,{validation:"regex",code:ve.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Ue(s,{code:ve.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ue(s,{code:ve.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ue(s,{code:ve.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?pEe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Ue(s,{code:ve.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?gEe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Ue(s,{validation:"ip",code:ve.invalid_string,message:i.message}),r.dirty()):Kt.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:ve.invalid_string,...et.errToObj(r)})}_addCheck(e){return new ea({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...et.errToObj(e)})}url(e){return this._addCheck({kind:"url",...et.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...et.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...et.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...et.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...et.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...et.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...et.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...et.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...et.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...et.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...et.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...et.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...et.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...et.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...et.errToObj(n)})}nonempty(e){return this.min(1,et.errToObj(e))}trim(){return new ea({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ea({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ea({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ea.create=t=>{var e;return new ea({checks:[],typeName:ut.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Et(t)})};function mEe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Uu extends At{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Re.number){const i=this._getOrReturnCtx(e);return Ue(i,{code:ve.invalid_type,expected:Re.number,received:i.parsedType}),mt}let r;const s=new gs;for(const i of this._def.checks)i.kind==="int"?Kt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Ue(r,{code:ve.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Ue(r,{code:ve.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Ue(r,{code:ve.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?mEe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Ue(r,{code:ve.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Ue(r,{code:ve.not_finite,message:i.message}),s.dirty()):Kt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,et.toString(n))}gt(e,n){return this.setLimit("min",e,!1,et.toString(n))}lte(e,n){return this.setLimit("max",e,!0,et.toString(n))}lt(e,n){return this.setLimit("max",e,!1,et.toString(n))}setLimit(e,n,r,s){return new Uu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:et.toString(s)}]})}_addCheck(e){return new Uu({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:et.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:et.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:et.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:et.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:et.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:et.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:et.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:et.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:et.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Kt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Uu.create=t=>new Uu({checks:[],typeName:ut.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Et(t)});class Bu extends At{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Re.bigint){const i=this._getOrReturnCtx(e);return Ue(i,{code:ve.invalid_type,expected:Re.bigint,received:i.parsedType}),mt}let r;const s=new gs;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Ue(r,{code:ve.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Ue(r,{code:ve.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Ue(r,{code:ve.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Kt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,et.toString(n))}gt(e,n){return this.setLimit("min",e,!1,et.toString(n))}lte(e,n){return this.setLimit("max",e,!0,et.toString(n))}lt(e,n){return this.setLimit("max",e,!1,et.toString(n))}setLimit(e,n,r,s){return new Bu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:et.toString(s)}]})}_addCheck(e){return new Bu({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:et.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:et.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:et.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:et.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:et.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Bu.create=t=>{var e;return new Bu({checks:[],typeName:ut.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Et(t)})};class Dw extends At{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Re.boolean){const r=this._getOrReturnCtx(e);return Ue(r,{code:ve.invalid_type,expected:Re.boolean,received:r.parsedType}),mt}return Os(e.data)}}Dw.create=t=>new Dw({typeName:ut.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Et(t)});class bh extends At{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Re.date){const i=this._getOrReturnCtx(e);return Ue(i,{code:ve.invalid_type,expected:Re.date,received:i.parsedType}),mt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Ue(i,{code:ve.invalid_date}),mt}const r=new gs;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Ue(s,{code:ve.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Ue(s,{code:ve.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Kt.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new bh({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:et.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:et.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}bh.create=t=>new bh({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ut.ZodDate,...Et(t)});class w_ extends At{_parse(e){if(this._getType(e)!==Re.symbol){const r=this._getOrReturnCtx(e);return Ue(r,{code:ve.invalid_type,expected:Re.symbol,received:r.parsedType}),mt}return Os(e.data)}}w_.create=t=>new w_({typeName:ut.ZodSymbol,...Et(t)});class $w extends At{_parse(e){if(this._getType(e)!==Re.undefined){const r=this._getOrReturnCtx(e);return Ue(r,{code:ve.invalid_type,expected:Re.undefined,received:r.parsedType}),mt}return Os(e.data)}}$w.create=t=>new $w({typeName:ut.ZodUndefined,...Et(t)});class Mw extends At{_parse(e){if(this._getType(e)!==Re.null){const r=this._getOrReturnCtx(e);return Ue(r,{code:ve.invalid_type,expected:Re.null,received:r.parsedType}),mt}return Os(e.data)}}Mw.create=t=>new Mw({typeName:ut.ZodNull,...Et(t)});class eg extends At{constructor(){super(...arguments),this._any=!0}_parse(e){return Os(e.data)}}eg.create=t=>new eg({typeName:ut.ZodAny,...Et(t)});class Vd extends At{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Os(e.data)}}Vd.create=t=>new Vd({typeName:ut.ZodUnknown,...Et(t)});class rl extends At{_parse(e){const n=this._getOrReturnCtx(e);return Ue(n,{code:ve.invalid_type,expected:Re.never,received:n.parsedType}),mt}}rl.create=t=>new rl({typeName:ut.ZodNever,...Et(t)});class b_ extends At{_parse(e){if(this._getType(e)!==Re.undefined){const r=this._getOrReturnCtx(e);return Ue(r,{code:ve.invalid_type,expected:Re.void,received:r.parsedType}),mt}return Os(e.data)}}b_.create=t=>new b_({typeName:ut.ZodVoid,...Et(t)});class oa extends At{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Re.array)return Ue(n,{code:ve.invalid_type,expected:Re.array,received:n.parsedType}),mt;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(Ue(n,{code:o?ve.too_big:ve.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Ue(n,{code:ve.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Ue(n,{code:ve.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new nc(n,o,n.path,a)))).then(o=>gs.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new nc(n,o,n.path,a)));return gs.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new oa({...this._def,minLength:{value:e,message:et.toString(n)}})}max(e,n){return new oa({...this._def,maxLength:{value:e,message:et.toString(n)}})}length(e,n){return new oa({...this._def,exactLength:{value:e,message:et.toString(n)}})}nonempty(e){return this.min(1,e)}}oa.create=(t,e)=>new oa({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ut.ZodArray,...Et(e)});function $f(t){if(t instanceof zn){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=zc.create($f(r))}return new zn({...t._def,shape:()=>e})}else return t instanceof oa?new oa({...t._def,type:$f(t.element)}):t instanceof zc?zc.create($f(t.unwrap())):t instanceof Eh?Eh.create($f(t.unwrap())):t instanceof rc?rc.create(t.items.map(e=>$f(e))):t}class zn extends At{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Kt.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Re.object){const l=this._getOrReturnCtx(e);return Ue(l,{code:ve.invalid_type,expected:Re.object,received:l.parsedType}),mt}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof rl&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new nc(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof rl){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(Ue(s,{code:ve.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new nc(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>gs.mergeObjectSync(r,l)):gs.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return et.errToObj,new zn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=et.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new zn({...this._def,unknownKeys:"strip"})}passthrough(){return new zn({...this._def,unknownKeys:"passthrough"})}extend(e){return new zn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new zn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ut.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new zn({...this._def,catchall:e})}pick(e){const n={};return Kt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new zn({...this._def,shape:()=>n})}omit(e){const n={};return Kt.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new zn({...this._def,shape:()=>n})}deepPartial(){return $f(this)}partial(e){const n={};return Kt.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new zn({...this._def,shape:()=>n})}required(e){const n={};return Kt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof zc;)i=i._def.innerType;n[r]=i}}),new zn({...this._def,shape:()=>n})}keyof(){return XW(Kt.objectKeys(this.shape))}}zn.create=(t,e)=>new zn({shape:()=>t,unknownKeys:"strip",catchall:rl.create(),typeName:ut.ZodObject,...Et(e)});zn.strictCreate=(t,e)=>new zn({shape:()=>t,unknownKeys:"strict",catchall:rl.create(),typeName:ut.ZodObject,...Et(e)});zn.lazycreate=(t,e)=>new zn({shape:t,unknownKeys:"strip",catchall:rl.create(),typeName:ut.ZodObject,...Et(e)});class Lw extends At{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new ia(a.ctx.common.issues));return Ue(n,{code:ve.invalid_union,unionErrors:o}),mt}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new ia(c));return Ue(n,{code:ve.invalid_union,unionErrors:a}),mt}}get options(){return this._def.options}}Lw.create=(t,e)=>new Lw({options:t,typeName:ut.ZodUnion,...Et(e)});const qv=t=>t instanceof jw?qv(t.schema):t instanceof da?qv(t.innerType()):t instanceof Fw?[t.value]:t instanceof ju?t.options:t instanceof Ww?Object.keys(t.enum):t instanceof zw?qv(t._def.innerType):t instanceof $w?[void 0]:t instanceof Mw?[null]:null;class a1 extends At{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Re.object)return Ue(n,{code:ve.invalid_type,expected:Re.object,received:n.parsedType}),mt;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Ue(n,{code:ve.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),mt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=qv(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new a1({typeName:ut.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Et(r)})}}function vT(t,e){const n=Bl(t),r=Bl(e);if(t===e)return{valid:!0,data:t};if(n===Re.object&&r===Re.object){const s=Kt.objectKeys(e),i=Kt.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=vT(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===Re.array&&r===Re.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=vT(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===Re.date&&r===Re.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Uw extends At{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(wT(i)||wT(o))return mt;const a=vT(i.value,o.value);return a.valid?((bT(i)||bT(o))&&n.dirty(),{status:n.value,value:a.data}):(Ue(r,{code:ve.invalid_intersection_types}),mt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Uw.create=(t,e,n)=>new Uw({left:t,right:e,typeName:ut.ZodIntersection,...Et(n)});class rc extends At{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.array)return Ue(r,{code:ve.invalid_type,expected:Re.array,received:r.parsedType}),mt;if(r.data.length<this._def.items.length)return Ue(r,{code:ve.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),mt;!this._def.rest&&r.data.length>this._def.items.length&&(Ue(r,{code:ve.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new nc(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>gs.mergeArray(n,o)):gs.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new rc({...this._def,rest:e})}}rc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new rc({items:t,typeName:ut.ZodTuple,rest:null,...Et(e)})};class Bw extends At{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.object)return Ue(r,{code:ve.invalid_type,expected:Re.object,received:r.parsedType}),mt;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new nc(r,a,r.path,a)),value:o._parse(new nc(r,r.data[a],r.path,a))});return r.common.async?gs.mergeObjectAsync(n,s):gs.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof At?new Bw({keyType:e,valueType:n,typeName:ut.ZodRecord,...Et(r)}):new Bw({keyType:ea.create(),valueType:e,typeName:ut.ZodRecord,...Et(n)})}}class v_ extends At{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.map)return Ue(r,{code:ve.invalid_type,expected:Re.map,received:r.parsedType}),mt;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new nc(r,a,r.path,[l,"key"])),value:i._parse(new nc(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return mt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return mt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}v_.create=(t,e,n)=>new v_({valueType:e,keyType:t,typeName:ut.ZodMap,...Et(n)});class vh extends At{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.set)return Ue(r,{code:ve.invalid_type,expected:Re.set,received:r.parsedType}),mt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Ue(r,{code:ve.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Ue(r,{code:ve.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return mt;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new nc(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new vh({...this._def,minSize:{value:e,message:et.toString(n)}})}max(e,n){return new vh({...this._def,maxSize:{value:e,message:et.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}vh.create=(t,e)=>new vh({valueType:t,minSize:null,maxSize:null,typeName:ut.ZodSet,...Et(e)});class pp extends At{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Re.function)return Ue(n,{code:ve.invalid_type,expected:Re.function,received:n.parsedType}),mt;function r(a,c){return m_({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,g_(),Ow].filter(l=>!!l),issueData:{code:ve.invalid_arguments,argumentsError:c}})}function s(a,c){return m_({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,g_(),Ow].filter(l=>!!l),issueData:{code:ve.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof tg){const a=this;return Os(async function(...c){const l=new ia([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return Os(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new ia([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new ia([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new pp({...this._def,args:rc.create(e).rest(Vd.create())})}returns(e){return new pp({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new pp({args:e||rc.create([]).rest(Vd.create()),returns:n||Vd.create(),typeName:ut.ZodFunction,...Et(r)})}}class jw extends At{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}jw.create=(t,e)=>new jw({getter:t,typeName:ut.ZodLazy,...Et(e)});class Fw extends At{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Ue(n,{received:n.data,code:ve.invalid_literal,expected:this._def.value}),mt}return{status:"valid",value:e.data}}get value(){return this._def.value}}Fw.create=(t,e)=>new Fw({value:t,typeName:ut.ZodLiteral,...Et(e)});function XW(t,e){return new ju({values:t,typeName:ut.ZodEnum,...Et(e)})}class ju extends At{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Ue(n,{expected:Kt.joinValues(r),received:n.parsedType,code:ve.invalid_type}),mt}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return Ue(n,{received:n.data,code:ve.invalid_enum_value,options:r}),mt}return Os(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return ju.create(e)}exclude(e){return ju.create(this.options.filter(n=>!e.includes(n)))}}ju.create=XW;class Ww extends At{_parse(e){const n=Kt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Re.string&&r.parsedType!==Re.number){const s=Kt.objectValues(n);return Ue(r,{expected:Kt.joinValues(s),received:r.parsedType,code:ve.invalid_type}),mt}if(n.indexOf(e.data)===-1){const s=Kt.objectValues(n);return Ue(r,{received:r.data,code:ve.invalid_enum_value,options:s}),mt}return Os(e.data)}get enum(){return this._def.values}}Ww.create=(t,e)=>new Ww({values:t,typeName:ut.ZodNativeEnum,...Et(e)});class tg extends At{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Re.promise&&n.common.async===!1)return Ue(n,{code:ve.invalid_type,expected:Re.promise,received:n.parsedType}),mt;const r=n.parsedType===Re.promise?n.data:Promise.resolve(n.data);return Os(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}tg.create=(t,e)=>new tg({type:t,typeName:ut.ZodPromise,...Et(e)});class da extends At{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ut.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Ue(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?mt:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?mt:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!kw(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>kw(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);Kt.assertNever(s)}}da.create=(t,e,n)=>new da({schema:t,typeName:ut.ZodEffects,effect:e,...Et(n)});da.createWithPreprocess=(t,e,n)=>new da({schema:e,effect:{type:"preprocess",transform:t},typeName:ut.ZodEffects,...Et(n)});class zc extends At{_parse(e){return this._getType(e)===Re.undefined?Os(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}zc.create=(t,e)=>new zc({innerType:t,typeName:ut.ZodOptional,...Et(e)});class Eh extends At{_parse(e){return this._getType(e)===Re.null?Os(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Eh.create=(t,e)=>new Eh({innerType:t,typeName:ut.ZodNullable,...Et(e)});class zw extends At{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Re.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}zw.create=(t,e)=>new zw({innerType:t,typeName:ut.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Et(e)});class E_ extends At{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return y_(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ia(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ia(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}E_.create=(t,e)=>new E_({innerType:t,typeName:ut.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Et(e)});class __ extends At{_parse(e){if(this._getType(e)!==Re.nan){const r=this._getOrReturnCtx(e);return Ue(r,{code:ve.invalid_type,expected:Re.nan,received:r.parsedType}),mt}return{status:"valid",value:e.data}}}__.create=t=>new __({typeName:ut.ZodNaN,...Et(t)});const yEe=Symbol("zod_brand");class ez extends At{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class W0 extends At{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?mt:i.status==="dirty"?(n.dirty(),JW(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?mt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new W0({in:e,out:n,typeName:ut.ZodPipeline})}}class C_ extends At{_parse(e){const n=this._def.innerType._parse(e);return kw(n)&&(n.value=Object.freeze(n.value)),n}}C_.create=(t,e)=>new C_({innerType:t,typeName:ut.ZodReadonly,...Et(e)});const tz=(t,e={},n)=>t?eg.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):eg.create(),wEe={object:zn.lazycreate};var ut;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ut||(ut={}));const bEe=(t,e={message:`Input not instance of ${t.name}`})=>tz(n=>n instanceof t,e),nz=ea.create,rz=Uu.create,vEe=__.create,EEe=Bu.create,sz=Dw.create,_Ee=bh.create,CEe=w_.create,SEe=$w.create,AEe=Mw.create,IEe=eg.create,NEe=Vd.create,xEe=rl.create,TEe=b_.create,REe=oa.create,PEe=zn.create,OEe=zn.strictCreate,kEe=Lw.create,DEe=a1.create,$Ee=Uw.create,MEe=rc.create,LEe=Bw.create,UEe=v_.create,BEe=vh.create,jEe=pp.create,FEe=jw.create,WEe=Fw.create,zEe=ju.create,HEe=Ww.create,qEe=tg.create,U5=da.create,GEe=zc.create,VEe=Eh.create,KEe=da.createWithPreprocess,YEe=W0.create,QEe=()=>nz().optional(),ZEe=()=>rz().optional(),JEe=()=>sz().optional(),XEe={string:t=>ea.create({...t,coerce:!0}),number:t=>Uu.create({...t,coerce:!0}),boolean:t=>Dw.create({...t,coerce:!0}),bigint:t=>Bu.create({...t,coerce:!0}),date:t=>bh.create({...t,coerce:!0})},e_e=mt;var v=Object.freeze({__proto__:null,defaultErrorMap:Ow,setErrorMap:sEe,getErrorMap:g_,makeIssue:m_,EMPTY_PATH:iEe,addIssueToContext:Ue,ParseStatus:gs,INVALID:mt,DIRTY:JW,OK:Os,isAborted:wT,isDirty:bT,isValid:kw,isAsync:y_,get util(){return Kt},get objectUtil(){return yT},ZodParsedType:Re,getParsedType:Bl,ZodType:At,ZodString:ea,ZodNumber:Uu,ZodBigInt:Bu,ZodBoolean:Dw,ZodDate:bh,ZodSymbol:w_,ZodUndefined:$w,ZodNull:Mw,ZodAny:eg,ZodUnknown:Vd,ZodNever:rl,ZodVoid:b_,ZodArray:oa,ZodObject:zn,ZodUnion:Lw,ZodDiscriminatedUnion:a1,ZodIntersection:Uw,ZodTuple:rc,ZodRecord:Bw,ZodMap:v_,ZodSet:vh,ZodFunction:pp,ZodLazy:jw,ZodLiteral:Fw,ZodEnum:ju,ZodNativeEnum:Ww,ZodPromise:tg,ZodEffects:da,ZodTransformer:da,ZodOptional:zc,ZodNullable:Eh,ZodDefault:zw,ZodCatch:E_,ZodNaN:__,BRAND:yEe,ZodBranded:ez,ZodPipeline:W0,ZodReadonly:C_,custom:tz,Schema:At,ZodSchema:At,late:wEe,get ZodFirstPartyTypeKind(){return ut},coerce:XEe,any:IEe,array:REe,bigint:EEe,boolean:sz,date:_Ee,discriminatedUnion:DEe,effect:U5,enum:zEe,function:jEe,instanceof:bEe,intersection:$Ee,lazy:FEe,literal:WEe,map:UEe,nan:vEe,nativeEnum:HEe,never:xEe,null:AEe,nullable:VEe,number:rz,object:PEe,oboolean:JEe,onumber:ZEe,optional:GEe,ostring:QEe,pipeline:YEe,preprocess:KEe,promise:qEe,record:LEe,set:BEe,strictObject:OEe,string:nz,symbol:CEe,transformer:U5,tuple:MEe,undefined:SEe,union:kEe,unknown:NEe,void:TEe,NEVER:e_e,ZodIssueCode:ve,quotelessJson:rEe,ZodError:ia});const Yn=v.object({message:v.string()});function Me(t){return v.literal(Be[t])}v.object({accessList:v.array(v.string()),blockHash:v.string().nullable(),blockNumber:v.string().nullable(),chainId:v.string().or(v.number()),from:v.string(),gas:v.string(),hash:v.string(),input:v.string().nullable(),maxFeePerGas:v.string(),maxPriorityFeePerGas:v.string(),nonce:v.string(),r:v.string(),s:v.string(),to:v.string(),transactionIndex:v.string().nullable(),type:v.string(),v:v.string(),value:v.string()});const t_e=v.object({chainId:v.string().or(v.number())}),n_e=v.object({email:v.string().email()}),r_e=v.object({otp:v.string()}),s_e=v.object({uri:v.string(),preferredAccountType:v.optional(v.string()),chainId:v.optional(v.string().or(v.number()))}),i_e=v.object({chainId:v.optional(v.string().or(v.number())),preferredAccountType:v.optional(v.string()),socialUri:v.optional(v.string())}),o_e=v.object({provider:v.enum(["google","github","apple","facebook","x","discord"])}),a_e=v.object({email:v.string().email()}),c_e=v.object({otp:v.string()}),l_e=v.object({otp:v.string()}),u_e=v.object({themeMode:v.optional(v.enum(["light","dark"])),themeVariables:v.optional(v.record(v.string(),v.string().or(v.number()))),w3mThemeVariables:v.optional(v.record(v.string(),v.string()))}),d_e=v.object({metadata:v.object({name:v.string(),description:v.string(),url:v.string(),icons:v.array(v.string())}).optional(),sdkVersion:v.string().optional(),sdkType:v.string().optional(),projectId:v.string()}),h_e=v.object({type:v.string()}),f_e=v.object({action:v.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),p_e=v.object({url:v.string()}),g_e=v.object({userName:v.string()}),m_e=v.object({email:v.string().optional().nullable(),address:v.string(),chainId:v.string().or(v.number()),accounts:v.array(v.object({address:v.string(),type:v.enum([Zr.ACCOUNT_TYPES.EOA,Zr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:v.string().optional().nullable(),preferredAccountType:v.optional(v.string())}),y_e=v.object({action:v.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),w_e=v.object({email:v.string().email().optional().nullable(),address:v.string(),chainId:v.string().or(v.number()),smartAccountDeployed:v.optional(v.boolean()),accounts:v.array(v.object({address:v.string(),type:v.enum([Zr.ACCOUNT_TYPES.EOA,Zr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:v.optional(v.string())}),b_e=v.object({uri:v.string()}),v_e=v.object({isConnected:v.boolean()}),E_e=v.object({chainId:v.string().or(v.number())}),__e=v.object({chainId:v.string().or(v.number())}),C_e=v.object({newEmail:v.string().email()}),S_e=v.object({smartAccountEnabledNetworks:v.array(v.number())});v.object({address:v.string(),isDeployed:v.boolean()});const A_e=v.object({version:v.string().optional()}),I_e=v.object({type:v.string(),address:v.string()}),N_e=v.any(),x_e=v.object({method:v.literal("eth_accounts")}),T_e=v.object({method:v.literal("eth_blockNumber")}),R_e=v.object({method:v.literal("eth_call"),params:v.array(v.any())}),P_e=v.object({method:v.literal("eth_chainId")}),O_e=v.object({method:v.literal("eth_estimateGas"),params:v.array(v.any())}),k_e=v.object({method:v.literal("eth_feeHistory"),params:v.array(v.any())}),D_e=v.object({method:v.literal("eth_gasPrice")}),$_e=v.object({method:v.literal("eth_getAccount"),params:v.array(v.any())}),M_e=v.object({method:v.literal("eth_getBalance"),params:v.array(v.any())}),L_e=v.object({method:v.literal("eth_getBlockByHash"),params:v.array(v.any())}),U_e=v.object({method:v.literal("eth_getBlockByNumber"),params:v.array(v.any())}),B_e=v.object({method:v.literal("eth_getBlockReceipts"),params:v.array(v.any())}),j_e=v.object({method:v.literal("eth_getBlockTransactionCountByHash"),params:v.array(v.any())}),F_e=v.object({method:v.literal("eth_getBlockTransactionCountByNumber"),params:v.array(v.any())}),W_e=v.object({method:v.literal("eth_getCode"),params:v.array(v.any())}),z_e=v.object({method:v.literal("eth_getFilterChanges"),params:v.array(v.any())}),H_e=v.object({method:v.literal("eth_getFilterLogs"),params:v.array(v.any())}),q_e=v.object({method:v.literal("eth_getLogs"),params:v.array(v.any())}),G_e=v.object({method:v.literal("eth_getProof"),params:v.array(v.any())}),V_e=v.object({method:v.literal("eth_getStorageAt"),params:v.array(v.any())}),K_e=v.object({method:v.literal("eth_getTransactionByBlockHashAndIndex"),params:v.array(v.any())}),Y_e=v.object({method:v.literal("eth_getTransactionByBlockNumberAndIndex"),params:v.array(v.any())}),Q_e=v.object({method:v.literal("eth_getTransactionByHash"),params:v.array(v.any())}),Z_e=v.object({method:v.literal("eth_getTransactionCount"),params:v.array(v.any())}),J_e=v.object({method:v.literal("eth_getTransactionReceipt"),params:v.array(v.any())}),X_e=v.object({method:v.literal("eth_getUncleCountByBlockHash"),params:v.array(v.any())}),eCe=v.object({method:v.literal("eth_getUncleCountByBlockNumber"),params:v.array(v.any())}),tCe=v.object({method:v.literal("eth_maxPriorityFeePerGas")}),nCe=v.object({method:v.literal("eth_newBlockFilter")}),rCe=v.object({method:v.literal("eth_newFilter"),params:v.array(v.any())}),sCe=v.object({method:v.literal("eth_newPendingTransactionFilter")}),iCe=v.object({method:v.literal("eth_sendRawTransaction"),params:v.array(v.any())}),oCe=v.object({method:v.literal("eth_syncing"),params:v.array(v.any())}),aCe=v.object({method:v.literal("eth_uninstallFilter"),params:v.array(v.any())}),B5=v.object({method:v.literal("personal_sign"),params:v.array(v.any())}),cCe=v.object({method:v.literal("eth_signTypedData_v4"),params:v.array(v.any())}),lCe=v.object({method:v.literal("eth_sendTransaction"),params:v.array(v.any())}),uCe=v.object({method:v.literal("solana_signMessage"),params:v.object({message:v.string(),pubkey:v.string()})}),dCe=v.object({method:v.literal("solana_signTransaction"),params:v.object({transaction:v.string()})}),hCe=v.object({method:v.literal("solana_signAllTransactions"),params:v.object({transactions:v.array(v.string())})}),fCe=v.object({method:v.literal("solana_signAndSendTransaction"),params:v.object({transaction:v.string(),options:v.object({skipPreflight:v.boolean().optional(),preflightCommitment:v.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:v.number().optional(),minContextSlot:v.number().optional()}).optional()})}),pCe=v.object({method:v.literal("wallet_sendCalls"),params:v.array(v.object({chainId:v.string().or(v.number()).optional(),from:v.string().optional(),version:v.string().optional(),capabilities:v.any().optional(),calls:v.array(v.object({to:v.string().startsWith("0x"),data:v.string().startsWith("0x").optional(),value:v.string().optional()}))}))}),gCe=v.object({method:v.literal("wallet_getCallsStatus"),params:v.array(v.string())}),mCe=v.object({method:v.literal("wallet_getCapabilities")}),yCe=v.object({method:v.literal("wallet_grantPermissions"),params:v.array(v.any())}),wCe=v.object({method:v.literal("wallet_revokePermissions"),params:v.any()}),bCe=v.object({method:v.literal("wallet_getAssets"),params:v.any()}),j5=v.object({token:v.string()}),Le=v.object({id:v.string().optional()}),wm={appEvent:Le.extend({type:Me("APP_SWITCH_NETWORK"),payload:t_e}).or(Le.extend({type:Me("APP_CONNECT_EMAIL"),payload:n_e})).or(Le.extend({type:Me("APP_CONNECT_DEVICE")})).or(Le.extend({type:Me("APP_CONNECT_OTP"),payload:r_e})).or(Le.extend({type:Me("APP_CONNECT_SOCIAL"),payload:s_e})).or(Le.extend({type:Me("APP_GET_FARCASTER_URI")})).or(Le.extend({type:Me("APP_CONNECT_FARCASTER")})).or(Le.extend({type:Me("APP_GET_USER"),payload:v.optional(i_e)})).or(Le.extend({type:Me("APP_GET_SOCIAL_REDIRECT_URI"),payload:o_e})).or(Le.extend({type:Me("APP_SIGN_OUT")})).or(Le.extend({type:Me("APP_IS_CONNECTED"),payload:v.optional(j5)})).or(Le.extend({type:Me("APP_GET_CHAIN_ID")})).or(Le.extend({type:Me("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Le.extend({type:Me("APP_INIT_SMART_ACCOUNT")})).or(Le.extend({type:Me("APP_SET_PREFERRED_ACCOUNT"),payload:h_e})).or(Le.extend({type:Me("APP_RPC_REQUEST"),payload:B5.or(bCe).or(x_e).or(T_e).or(R_e).or(P_e).or(O_e).or(k_e).or(D_e).or($_e).or(M_e).or(L_e).or(U_e).or(B_e).or(j_e).or(F_e).or(W_e).or(z_e).or(H_e).or(q_e).or(G_e).or(V_e).or(K_e).or(Y_e).or(Q_e).or(Z_e).or(J_e).or(X_e).or(eCe).or(tCe).or(nCe).or(rCe).or(sCe).or(iCe).or(oCe).or(aCe).or(B5).or(cCe).or(lCe).or(uCe).or(dCe).or(hCe).or(fCe).or(gCe).or(pCe).or(mCe).or(yCe).or(wCe)})).or(Le.extend({type:Me("APP_UPDATE_EMAIL"),payload:a_e})).or(Le.extend({type:Me("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:c_e})).or(Le.extend({type:Me("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:l_e})).or(Le.extend({type:Me("APP_SYNC_THEME"),payload:u_e})).or(Le.extend({type:Me("APP_SYNC_DAPP_DATA"),payload:d_e})).or(Le.extend({type:Me("APP_RELOAD")})),frameEvent:Le.extend({type:Me("FRAME_SWITCH_NETWORK_ERROR"),payload:Yn}).or(Le.extend({type:Me("FRAME_SWITCH_NETWORK_SUCCESS"),payload:__e})).or(Le.extend({type:Me("FRAME_CONNECT_EMAIL_SUCCESS"),payload:f_e})).or(Le.extend({type:Me("FRAME_CONNECT_EMAIL_ERROR"),payload:Yn})).or(Le.extend({type:Me("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:p_e})).or(Le.extend({type:Me("FRAME_GET_FARCASTER_URI_ERROR"),payload:Yn})).or(Le.extend({type:Me("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:g_e})).or(Le.extend({type:Me("FRAME_CONNECT_FARCASTER_ERROR"),payload:Yn})).or(Le.extend({type:Me("FRAME_CONNECT_OTP_ERROR"),payload:Yn})).or(Le.extend({type:Me("FRAME_CONNECT_OTP_SUCCESS")})).or(Le.extend({type:Me("FRAME_CONNECT_DEVICE_ERROR"),payload:Yn})).or(Le.extend({type:Me("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Le.extend({type:Me("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:m_e})).or(Le.extend({type:Me("FRAME_CONNECT_SOCIAL_ERROR"),payload:Yn})).or(Le.extend({type:Me("FRAME_GET_USER_ERROR"),payload:Yn})).or(Le.extend({type:Me("FRAME_GET_USER_SUCCESS"),payload:w_e})).or(Le.extend({type:Me("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Yn})).or(Le.extend({type:Me("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:b_e})).or(Le.extend({type:Me("FRAME_SIGN_OUT_ERROR"),payload:Yn})).or(Le.extend({type:Me("FRAME_SIGN_OUT_SUCCESS")})).or(Le.extend({type:Me("FRAME_IS_CONNECTED_ERROR"),payload:Yn})).or(Le.extend({type:Me("FRAME_IS_CONNECTED_SUCCESS"),payload:v_e})).or(Le.extend({type:Me("FRAME_GET_CHAIN_ID_ERROR"),payload:Yn})).or(Le.extend({type:Me("FRAME_GET_CHAIN_ID_SUCCESS"),payload:E_e})).or(Le.extend({type:Me("FRAME_RPC_REQUEST_ERROR"),payload:Yn})).or(Le.extend({type:Me("FRAME_RPC_REQUEST_SUCCESS"),payload:N_e})).or(Le.extend({type:Me("FRAME_SESSION_UPDATE"),payload:j5})).or(Le.extend({type:Me("FRAME_UPDATE_EMAIL_ERROR"),payload:Yn})).or(Le.extend({type:Me("FRAME_UPDATE_EMAIL_SUCCESS"),payload:y_e})).or(Le.extend({type:Me("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Yn})).or(Le.extend({type:Me("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Le.extend({type:Me("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Yn})).or(Le.extend({type:Me("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:C_e})).or(Le.extend({type:Me("FRAME_SYNC_THEME_ERROR"),payload:Yn})).or(Le.extend({type:Me("FRAME_SYNC_THEME_SUCCESS")})).or(Le.extend({type:Me("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Yn})).or(Le.extend({type:Me("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Le.extend({type:Me("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:S_e})).or(Le.extend({type:Me("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Yn})).or(Le.extend({type:Me("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Yn})).or(Le.extend({type:Me("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:I_e})).or(Le.extend({type:Me("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Yn})).or(Le.extend({type:Me("FRAME_READY"),payload:A_e})).or(Le.extend({type:Me("FRAME_RELOAD_ERROR"),payload:Yn})).or(Le.extend({type:Me("FRAME_RELOAD_SUCCESS")}))};function $A(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}let vCe=class{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=$e.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!$A(Be.FRAME_EVENT_KEY,l))return;const u=wm.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}Ri.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{Ri.isClient&&window.addEventListener("message",({data:o})=>{if(!$A(Be.FRAME_EVENT_KEY,o))return;const a=wm.frameEvent.parse(o);i(a)})},onAppEvent:i=>{Ri.isClient&&window.addEventListener("message",({data:o})=>{if(!$A(Be.APP_EVENT_KEY,o))return;const a=wm.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(Ri.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");wm.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(Ri.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");wm.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),Ri.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${ige}?projectId=${e}&chainId=${r}&version=${age}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}},ECe=class{constructor(e){var i;const n=Hh({level:oge}),{logger:r,chunkLoggerController:s}=JC({opts:n});this.logger=es(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}},_Ce=class{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new ECe(e)),this.abortController=i,this.w3mFrame=new vCe({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Be.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!qr.get(Be.EMAIL_LOGIN_USED_KEY)}getEmail(){return qr.get(Be.EMAIL)}getUsername(){return qr.get(Be.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Be.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Ri.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Be.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Be.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Be.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Be.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Be.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Be.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Be.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Be.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Be.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Be.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Be.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Be.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Be.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:Be.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Be.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:Be.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Be.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Be.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:Be.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Be.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(Zr.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:Be.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Be.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Be.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Be.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Be.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Be.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Be.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Be.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Zr.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Be.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===Be.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{Zr.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Be.APP_SYNC_DAPP_DATA,Be.APP_SYNC_THEME,Be.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Be.APP_CONNECT_EMAIL,Be.APP_CONNECT_DEVICE,Be.APP_CONNECT_OTP,Be.APP_CONNECT_SOCIAL,Be.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},3e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,y){var b,E,_;w.id===u&&((E=y==null?void 0:(b=y.logger).info)==null||E.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((_=w.payload)==null?void 0:_.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){qr.set(Be.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){qr.set(Be.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&qr.set(Be.EMAIL,e),qr.set(Be.EMAIL_LOGIN_USED_KEY,"true"),qr.delete(Be.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){qr.delete(Be.EMAIL_LOGIN_USED_KEY),qr.delete(Be.EMAIL),qr.delete(Be.LAST_USED_CHAIN_KEY),qr.delete(Be.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&qr.set(Be.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=qr.get(Be.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){qr.set(Be.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}},CCe=class Gv{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return Gv.instance||(Gv.instance=new _Ce({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),Gv.instance}};function SCe(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Nr(t,...e){try{return SCe(t(...e))}catch(n){return Promise.reject(n)}}function ACe(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function ICe(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Vv(t){if(ACe(t))return String(t);if(ICe(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Vv(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const ET="base64:";function NCe(t){return typeof t=="string"?t:ET+RCe(t)}function xCe(t){return typeof t!="string"||!t.startsWith(ET)?t:TCe(t.slice(ET.length))}function TCe(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function RCe(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Vs(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function PCe(...t){return Vs(t.join(":"))}function sv(t){return t=Vs(t),t?t+":":""}function OCe(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function kCe(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const DCe="memory",$Ce=()=>{const t=new Map;return{name:DCe,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function MCe(t={}){const e={mounts:{"":t.driver||$Ce()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=Vs(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await F5(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",w=Vs(g?p:p.key),y=g?void 0:p.value,b=g||!p.options?u:{...u,...p.options},E=n(w);f(E).items.push({key:w,value:y,relativeKey:E.relativeKey,options:b})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=Vs(l);const{relativeKey:d,driver:h}=n(l);return Nr(h.hasItem,d,u)},getItem(l,u={}){l=Vs(l);const{relativeKey:d,driver:h}=n(l);return Nr(h.getItem,d,u).then(f=>Zb(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?Nr(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:PCe(d.base,f.key),value:Zb(f.value)}))):Promise.all(d.items.map(h=>Nr(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:Zb(f)})))))},getItemRaw(l,u={}){l=Vs(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?Nr(h.getItemRaw,d,u):Nr(h.getItem,d,u).then(f=>xCe(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Vs(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await Nr(f.setItem,h,Vv(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return Nr(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:Vv(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>Nr(d.driver.setItem,h.relativeKey,Vv(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Vs(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await Nr(f.setItemRaw,h,u,d);else if(f.setItem)await Nr(f.setItem,h,NCe(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Vs(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await Nr(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await Nr(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Vs(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await Nr(h.getMeta,d,u)),!u.nativeOnly){const p=await Nr(h.getItem,d+"$",u).then(g=>Zb(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var w;l=sv(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const y of d){(w=y.driver.flags)!=null&&w.maxDepth||(p=!1);const b=await Nr(y.driver.getKeys,y.relativeBase,u);for(const E of b){const _=y.mountpoint+Vs(E);h.some(C=>_.startsWith(C))||f.push(_)}h=[y.mountpoint,...h.filter(E=>!E.startsWith(y.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(y=>(!g||OCe(y,u.maxDepth))&&kCe(y,l))},async clear(l,u={}){l=sv(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return Nr(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>W5(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=sv(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(F5(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=sv(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await W5(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Vs(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Vs(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function F5(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function W5(t){typeof t.dispose=="function"&&await Nr(t.dispose)}const LCe="idb-keyval";var UCe=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=rW(t.dbName,t.storeName)),{name:LCe,options:t,async hasItem(s){return!(typeof await q$(n(s),r)>"u")},async getItem(s){return await q$(n(s),r)??null},setItem(s,i){return cme(n(s),i,r)},removeItem(s){return lme(n(s),r)},getKeys(){return hme(r)},clear(){return ume(r)}}};const BCe="WALLET_CONNECT_V2_INDEXED_DB",jCe="keyvaluestorage";let FCe=class{constructor(){this.indexedDb=MCe({driver:UCe({dbName:BCe,storeName:jCe})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,nl(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var MA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Kv={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof MA<"u"&&MA.localStorage?Kv.exports=MA.localStorage:typeof window<"u"&&window.localStorage?Kv.exports=window.localStorage:Kv.exports=new e})();function WCe(t){var e;return[t[0],yh((e=t[1])!=null?e:"")]}let zCe=class{constructor(){this.localStorage=Kv.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(WCe)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return yh(n)}async setItem(e,n){this.localStorage.setItem(e,nl(n))}async removeItem(e){this.localStorage.removeItem(e)}};const HCe="wc_storage_version",z5=1,qCe=async(t,e,n)=>{const r=HCe,s=await e.getItem(r);if(s&&s>=z5){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,z5),n(e),GCe(t,o)},GCe=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let VCe=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new zCe;this.storage=e;try{const n=new FCe;qCe(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var KCe=Object.defineProperty,YCe=(t,e,n)=>e in t?KCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,H5=(t,e,n)=>YCe(t,typeof e!="symbol"?e+"":e,n);let QCe=class extends Fh{constructor(e){super(),this.opts=e,H5(this,"protocol","wc"),H5(this,"version",2)}};var ZCe=Object.defineProperty,JCe=(t,e,n)=>e in t?ZCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,XCe=(t,e,n)=>JCe(t,e+"",n);let e1e=class extends Fh{constructor(e,n){super(),this.core=e,this.logger=n,XCe(this,"records",new Map)}},t1e=class{constructor(e,n){this.logger=e,this.core=n}},n1e=class extends Fh{constructor(e,n){super(),this.relayer=e,this.logger=n}},r1e=class extends Fh{constructor(e){super()}},s1e=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},i1e=class extends Fh{constructor(e,n){super(),this.relayer=e,this.logger=n}},o1e=class extends Fh{constructor(e,n){super(),this.core=e,this.logger=n}},a1e=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},c1e=class{constructor(e,n){this.projectId=e,this.logger=n}},l1e=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var u1e=Object.defineProperty,d1e=(t,e,n)=>e in t?u1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,q5=(t,e,n)=>d1e(t,typeof e!="symbol"?e+"":e,n);let h1e=class{constructor(e){this.opts=e,q5(this,"protocol","wc"),q5(this,"version",2)}},f1e=class{constructor(e){this.client=e}};function Hw(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function G5(t){return Hw(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const iz="2.23.2";let bm={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${iz}`};class _h extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof _h?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof _h&&n.cause.docsPath||n.docsPath,i=(a=bm.getDocsUrl)==null?void 0:a.call(bm,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...bm.version?[`Version: ${bm.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=iz}walk(e){return oz(this,e)}}function oz(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?oz(t.cause,e):e?null:t}class az extends _h{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function $g(t,{dir:e,size:n=32}={}){return typeof t=="string"?p1e(t,{dir:e,size:n}):g1e(t,{dir:e,size:n})}function p1e(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new az({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function g1e(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new az({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class m1e extends _h{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class y1e extends _h{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Mg(t,{size:e}){if(G5(t)>e)throw new y1e({givenSize:G5(t),maxSize:e})}function _T(t,e={}){const{signed:n}=e;e.size&&Mg(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function w1e(t,e={}){return Number(_T(t,e))}const b1e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function CT(t,e={}){return typeof t=="number"||typeof t=="bigint"?lz(t,e):typeof t=="string"?_1e(t,e):typeof t=="boolean"?v1e(t,e):cz(t,e)}function v1e(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Mg(n,{size:e.size}),$g(n,{size:e.size})):n}function cz(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=b1e[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Mg(r,{size:e.size}),$g(r,{dir:"right",size:e.size})):r}function lz(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new m1e({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?$g(a,{size:r}):a}const E1e=new TextEncoder;function _1e(t,e={}){const n=E1e.encode(t);return cz(n,e)}const C1e=new TextEncoder;function S1e(t,e={}){return typeof t=="number"||typeof t=="bigint"?I1e(t,e):typeof t=="boolean"?A1e(t,e):Hw(t)?uz(t,e):dz(t,e)}function A1e(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Mg(n,{size:e.size}),$g(n,{size:e.size})):n}const vc={zero:48,nine:57,A:65,F:70,a:97,f:102};function V5(t){if(t>=vc.zero&&t<=vc.nine)return t-vc.zero;if(t>=vc.A&&t<=vc.F)return t-(vc.A-10);if(t>=vc.a&&t<=vc.f)return t-(vc.a-10)}function uz(t,e={}){let n=t;e.size&&(Mg(n,{size:e.size}),n=$g(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=V5(r.charCodeAt(a++)),l=V5(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new _h(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function I1e(t,e){const n=lz(t,e);return uz(n)}function dz(t,e={}){const n=C1e.encode(t);return typeof e.size=="number"?(Mg(n,{size:e.size}),$g(n,{dir:"right",size:e.size})):n}function S_(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function N1e(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function c1(t,...e){if(!N1e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function CMe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");S_(t.outputLen),S_(t.blockLen)}function K5(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function x1e(t,e){c1(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const iv=BigInt(2**32-1),Y5=BigInt(32);function T1e(t,e=!1){return e?{h:Number(t&iv),l:Number(t>>Y5&iv)}:{h:Number(t>>Y5&iv)|0,l:Number(t&iv)|0}}function R1e(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=T1e(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const P1e=(t,e,n)=>t<<n|e>>>32-n,O1e=(t,e,n)=>e<<n|t>>>32-n,k1e=(t,e,n)=>e<<n-32|t>>>64-n,D1e=(t,e,n)=>t<<n-32|e>>>64-n,ff=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function $1e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function SMe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function AMe(t,e){return t<<32-e|t>>>e}const Q5=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function M1e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Z5(t){for(let e=0;e<t.length;e++)t[e]=M1e(t[e])}function L1e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function hz(t){return typeof t=="string"&&(t=L1e(t)),c1(t),t}function IMe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];c1(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class U1e{clone(){return this._cloneInto()}}function B1e(t){const e=r=>t().update(hz(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function NMe(t=32){if(ff&&typeof ff.getRandomValues=="function")return ff.getRandomValues(new Uint8Array(t));if(ff&&typeof ff.randomBytes=="function")return ff.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const fz=[],pz=[],gz=[],j1e=BigInt(0),vm=BigInt(1),F1e=BigInt(2),W1e=BigInt(7),z1e=BigInt(256),H1e=BigInt(113);for(let t=0,e=vm,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],fz.push(2*(5*r+n)),pz.push((t+1)*(t+2)/2%64);let s=j1e;for(let i=0;i<7;i++)e=(e<<vm^(e>>W1e)*H1e)%z1e,e&F1e&&(s^=vm<<(vm<<BigInt(i))-vm);gz.push(s)}const[q1e,G1e]=R1e(gz,!0),J5=(t,e,n)=>n>32?k1e(t,e,n):P1e(t,e,n),X5=(t,e,n)=>n>32?D1e(t,e,n):O1e(t,e,n);function V1e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=J5(l,u,1)^n[a],h=X5(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=pz[o],c=J5(s,i,a),l=X5(s,i,a),u=fz[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=q1e[r],t[1]^=G1e[r]}n.fill(0)}class nk extends U1e{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,S_(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=$1e(this.state)}keccak(){Q5||Z5(this.state32),V1e(this.state32,this.rounds),Q5||Z5(this.state32),this.posOut=0,this.pos=0}update(e){K5(this);const{blockLen:n,state:r}=this;e=hz(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){K5(this,!1),c1(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return S_(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(x1e(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new nk(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const K1e=(t,e,n)=>B1e(()=>new nk(e,t,n)),Y1e=K1e(1,136,256/8);function mz(t,e){const n=e||"hex",r=Y1e(Hw(t,{strict:!1})?S1e(t):t);return n==="bytes"?r:CT(r)}class Q1e extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const LA=new Q1e(8192);function Z1e(t,e){if(LA.has(`${t}.${e}`))return LA.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=mz(dz(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return LA.set(`${t}.${e}`,i),i}function J1e(t){const e=mz(`0x${t.substring(4)}`).substring(26);return Z1e(`0x${e}`)}async function X1e({hash:t,signature:e}){const n=Hw(t)?t:CT(t),{secp256k1:r}=await us(async()=>{const{secp256k1:o}=await import("./secp256k1-DyVoINsG.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=eM(f);return new r.Signature(_T(l),_T(u)).addRecoveryBit(p)}const o=Hw(e)?e:CT(e),a=w1e(`0x${o.slice(130)}`),c=eM(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function eM(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function eSe({hash:t,signature:e}){return J1e(await X1e({hash:t,signature:e}))}var tSe={};const nSe=":";function gp(t){const[e,n]=t.split(nSe);return{namespace:e,reference:n}}function yz(t,e){return t.includes(":")?[t]:e.chains||[]}var rSe=Object.defineProperty,sSe=Object.defineProperties,iSe=Object.getOwnPropertyDescriptors,tM=Object.getOwnPropertySymbols,oSe=Object.prototype.hasOwnProperty,aSe=Object.prototype.propertyIsEnumerable,nM=(t,e,n)=>e in t?rSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rM=(t,e)=>{for(var n in e||(e={}))oSe.call(e,n)&&nM(t,n,e[n]);if(tM)for(var n of tM(e))aSe.call(e,n)&&nM(t,n,e[n]);return t},cSe=(t,e)=>sSe(t,iSe(e));const lSe="ReactNative",Oi={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},uSe="js";function A_(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Vu(){return!wh()&&!!JO()&&navigator.product===lSe}function dSe(){return Vu()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function hSe(){return Vu()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Lg(){return!A_()&&!!JO()&&!!wh()}function z0(){return Vu()?Oi.reactNative:A_()?Oi.node:Lg()?Oi.browser:Oi.unknown}function sM(){var t;try{return Vu()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function fSe(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function pSe(t){var e,n;const r=wz();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),cSe(rM(rM({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function wz(){return LW()||{name:"",description:"",url:"",icons:[""]}}function gSe(){if(z0()===Oi.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=j0e();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function mSe(){var t;const e=z0();return e===Oi.browser?[e,((t=MW())==null?void 0:t.host)||"unknown"].join(":"):e}function bz(t,e,n){const r=gSe(),s=mSe();return[[t,e].join("-"),[uSe,n].join("-"),r,s].join("/")}function ySe({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=bz(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=fSe(l[1]||"",d);return l[0]+"?"+h}function Od(t,e){return t.filter(n=>e.includes(n)).length===t.length}function ST(t){return Object.fromEntries(t.entries())}function AT(t){return new Map(Object.entries(t))}function dd(t=_e.FIVE_MINUTES,e){const n=_e.toMiliseconds(t||_e.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function ru(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function vz(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function wSe(t){return vz("topic",t)}function bSe(t){return vz("id",t)}function Ez(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function pr(t,e){return _e.fromMiliseconds(Date.now()+_e.toMiliseconds(t))}function $l(t){return Date.now()>=_e.toMiliseconds(t)}function rn(t,e){return`${t}${e?`:${e}`:""}`}function Qa(t=[],e=[]){return[...new Set([...t,...e])]}async function vSe({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=ESe(i,t,e),a=z0();if(a===Oi.browser){if(!((r=wh())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}_Se(o)}else a===Oi.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function ESe(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${ISe(r,!0)}`}else s=`${s}/wc?${r}`;return s}function _Se(t){let e="_self";ASe()?e="_top":(SSe()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function CSe(t,e){let n="";try{if(Lg()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function iM(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function oM(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function rk(){return typeof process<"u"&&tSe.IS_VITEST==="true"}function SSe(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function ASe(){try{return window.self!==window.top}catch{return!1}}function ISe(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function _z(t){return Buffer.from(t,"base64").toString("utf-8")}function NSe(t){return new Promise(e=>setTimeout(e,t))}function qw(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function xSe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function H0(t,...e){if(!xSe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function sk(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");qw(t.outputLen),qw(t.blockLen)}function ng(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Cz(t,e){H0(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const ov=BigInt(2**32-1),aM=BigInt(32);function TSe(t,e=!1){return e?{h:Number(t&ov),l:Number(t>>aM&ov)}:{h:Number(t>>aM&ov)|0,l:Number(t&ov)|0}}function RSe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=TSe(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const PSe=(t,e,n)=>t<<n|e>>>32-n,OSe=(t,e,n)=>e<<n|t>>>32-n,kSe=(t,e,n)=>e<<n-32|t>>>64-n,DSe=(t,e,n)=>t<<n-32|e>>>64-n,pf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function $Se(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function UA(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function va(t,e){return t<<32-e|t>>>e}const cM=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function MSe(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function lM(t){for(let e=0;e<t.length;e++)t[e]=MSe(t[e])}function LSe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function rg(t){return typeof t=="string"&&(t=LSe(t)),H0(t),t}function USe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];H0(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let ik=class{clone(){return this._cloneInto()}};function Sz(t){const e=r=>t().update(rg(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Ug(t=32){if(pf&&typeof pf.getRandomValues=="function")return pf.getRandomValues(new Uint8Array(t));if(pf&&typeof pf.randomBytes=="function")return pf.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const Az=[],Iz=[],Nz=[],BSe=BigInt(0),Em=BigInt(1),jSe=BigInt(2),FSe=BigInt(7),WSe=BigInt(256),zSe=BigInt(113);for(let t=0,e=Em,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Az.push(2*(5*r+n)),Iz.push((t+1)*(t+2)/2%64);let s=BSe;for(let i=0;i<7;i++)e=(e<<Em^(e>>FSe)*zSe)%WSe,e&jSe&&(s^=Em<<(Em<<BigInt(i))-Em);Nz.push(s)}const[HSe,qSe]=RSe(Nz,!0),uM=(t,e,n)=>n>32?kSe(t,e,n):PSe(t,e,n),dM=(t,e,n)=>n>32?DSe(t,e,n):OSe(t,e,n);function GSe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=uM(l,u,1)^n[a],h=dM(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Iz[o],c=uM(s,i,a),l=dM(s,i,a),u=Az[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=HSe[r],t[1]^=qSe[r]}n.fill(0)}let VSe=class xz extends ik{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,qw(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=$Se(this.state)}keccak(){cM||lM(this.state32),GSe(this.state32,this.rounds),cM||lM(this.state32),this.posOut=0,this.pos=0}update(e){ng(this);const{blockLen:n,state:r}=this;e=rg(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){ng(this,!1),H0(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return qw(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Cz(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new xz(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const KSe=(t,e,n)=>Sz(()=>new VSe(e,t,n)),YSe=KSe(1,136,256/8),QSe="https://rpc.walletconnect.org/v1";function Tz(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(YSe(n)).toString("hex")}async function ZSe(t,e,n,r,s,i){switch(n.t){case"eip191":return await JSe(t,e,n.s);case"eip1271":return await XSe(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function JSe(t,e,n){return(await eSe({hash:Tz(e),signature:n})).toLowerCase()===t.toLowerCase()}async function XSe(t,e,n,r,s,i){const o=gp(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=Tz(e).substring(2),h=a+d+c+l+u,f=await fetch(`${i||QSe}/?chainId=${r}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:eAe(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function eAe(){return Date.now()+Math.floor(Math.random()*1e3)}function tAe(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return UW.encode(i)}var nAe=Object.defineProperty,rAe=Object.defineProperties,sAe=Object.getOwnPropertyDescriptors,hM=Object.getOwnPropertySymbols,iAe=Object.prototype.hasOwnProperty,oAe=Object.prototype.propertyIsEnumerable,fM=(t,e,n)=>e in t?nAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,aAe=(t,e)=>{for(var n in e||(e={}))iAe.call(e,n)&&fM(t,n,e[n]);if(hM)for(var n of hM(e))oAe.call(e,n)&&fM(t,n,e[n]);return t},cAe=(t,e)=>rAe(t,sAe(e));const lAe="did:pkh:",ok=t=>t==null?void 0:t.split(":"),uAe=t=>{const e=t&&ok(t);if(e)return t.includes(lAe)?e[3]:e[1]},IT=t=>{const e=t&&ok(t);if(e)return e[2]+":"+e[3]},I_=t=>{const e=t&&ok(t);if(e)return e.pop()};async function pM(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=Rz(s,s.iss),o=I_(s.iss);return await ZSe(o,i,r,IT(s.iss),n)}const Rz=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=I_(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${uAe(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=Yv(t.resources);if(p){const g=Gw(p);s=bAe(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function dAe(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function hAe(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Ch(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function fAe(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:pAe(e,n,r)}}}function pAe(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function Pz(t){return Ch(t),`urn:recap:${dAe(t).replace(/=/g,"")}`}function Gw(t){const e=hAe(t.replace("urn:recap:",""));return Ch(e),e}function gAe(t,e,n){const r=fAe(t,e,n);return Pz(r)}function mAe(t){return t&&t.includes("urn:recap:")}function yAe(t,e){const n=Gw(t),r=Gw(e),s=wAe(n,r);return Pz(s)}function wAe(t,e){Ch(t),Ch(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=cAe(aAe({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function bAe(t="",e){Ch(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function gM(t){var e;const n=Gw(t);Ch(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function mM(t){const e=Gw(t);Ch(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function Yv(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return mAe(e)?e:void 0}function BA(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Oz(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ti(t,...e){if(!Oz(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function yM(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function vAe(t,e){Ti(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function wM(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const Su=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),EAe=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),_Ae=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!_Ae)throw new Error("Non little-endian hardware is not supported");function CAe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function NT(t){if(typeof t=="string")t=CAe(t);else if(Oz(t))t=xT(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function SAe(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function AAe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const IAe=(t,e)=>{function n(r,...s){if(Ti(r),t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Ti(l):Ti(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Ti(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Ti(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Ti(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Ti(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function bM(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!NAe(e))throw new Error("invalid output, must be aligned");return e}function vM(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function NAe(t){return t.byteOffset%4===0}function xT(t){return Uint8Array.from(t)}function sg(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const kz=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),xAe=kz("expand 16-byte k"),TAe=kz("expand 32-byte k"),RAe=Su(xAe),PAe=Su(TAe);function qt(t,e){return t<<e|t>>>32-e}function TT(t){return t.byteOffset%4===0}const av=64,OAe=16,Dz=2**32-1,EM=new Uint32Array;function kAe(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(av),u=Su(l),d=TT(s)&&TT(i),h=d?Su(s):EM,f=d?Su(i):EM;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=Dz)throw new Error("arx: counter overflow");const g=Math.min(av,c-p);if(d&&g===av){const w=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let y=0,b;y<OAe;y++)b=w+y,f[b]=h[b]^u[y];p+=av;continue}for(let w=0,y;w<g;w++)y=p+w,i[y]=s[y]^l[w];p+=g}}function DAe(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=SAe({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return BA(s),BA(o),wM(i),wM(n),(a,c,l,u,d=0)=>{Ti(a),Ti(c),Ti(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),Ti(u),BA(d),d<0||d>=Dz)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,w;if(p===32)f.push(g=xT(a)),w=PAe;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),w=RAe,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);TT(c)||f.push(c=xT(c));const y=Su(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(w,y,Su(c.subarray(0,16)),y),c=c.subarray(16)}const b=16-s;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const _=new Uint8Array(12);_.set(c,i?0:12-c.length),c=_,f.push(c)}const E=Su(c);return kAe(t,w,y,E,l,u,d,o),sg(...f),u}}const Fr=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class $Ae{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=NT(e),Ti(e,32);const n=Fr(e,0),r=Fr(e,2),s=Fr(e,4),i=Fr(e,6),o=Fr(e,8),a=Fr(e,10),c=Fr(e,12),l=Fr(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Fr(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],w=o[9],y=Fr(e,n+0),b=Fr(e,n+2),E=Fr(e,n+4),_=Fr(e,n+6),C=Fr(e,n+8),I=Fr(e,n+10),A=Fr(e,n+12),x=Fr(e,n+14);let S=i[0]+(y&8191),k=i[1]+((y>>>13|b<<3)&8191),O=i[2]+((b>>>10|E<<6)&8191),U=i[3]+((E>>>7|_<<9)&8191),G=i[4]+((_>>>4|C<<12)&8191),F=i[5]+(C>>>1&8191),T=i[6]+((C>>>14|I<<2)&8191),N=i[7]+((I>>>11|A<<5)&8191),$=i[8]+((A>>>8|x<<8)&8191),R=i[9]+(x>>>5|s),D=0,B=D+S*a+k*(5*w)+O*(5*g)+U*(5*p)+G*(5*f);D=B>>>13,B&=8191,B+=F*(5*h)+T*(5*d)+N*(5*u)+$*(5*l)+R*(5*c),D+=B>>>13,B&=8191;let H=D+S*c+k*a+O*(5*w)+U*(5*g)+G*(5*p);D=H>>>13,H&=8191,H+=F*(5*f)+T*(5*h)+N*(5*d)+$*(5*u)+R*(5*l),D+=H>>>13,H&=8191;let J=D+S*l+k*c+O*a+U*(5*w)+G*(5*g);D=J>>>13,J&=8191,J+=F*(5*p)+T*(5*f)+N*(5*h)+$*(5*d)+R*(5*u),D+=J>>>13,J&=8191;let ee=D+S*u+k*l+O*c+U*a+G*(5*w);D=ee>>>13,ee&=8191,ee+=F*(5*g)+T*(5*p)+N*(5*f)+$*(5*h)+R*(5*d),D+=ee>>>13,ee&=8191;let ne=D+S*d+k*u+O*l+U*c+G*a;D=ne>>>13,ne&=8191,ne+=F*(5*w)+T*(5*g)+N*(5*p)+$*(5*f)+R*(5*h),D+=ne>>>13,ne&=8191;let ie=D+S*h+k*d+O*u+U*l+G*c;D=ie>>>13,ie&=8191,ie+=F*a+T*(5*w)+N*(5*g)+$*(5*p)+R*(5*f),D+=ie>>>13,ie&=8191;let we=D+S*f+k*h+O*d+U*u+G*l;D=we>>>13,we&=8191,we+=F*c+T*a+N*(5*w)+$*(5*g)+R*(5*p),D+=we>>>13,we&=8191;let Z=D+S*p+k*f+O*h+U*d+G*u;D=Z>>>13,Z&=8191,Z+=F*l+T*c+N*a+$*(5*w)+R*(5*g),D+=Z>>>13,Z&=8191;let se=D+S*g+k*p+O*f+U*h+G*d;D=se>>>13,se&=8191,se+=F*u+T*l+N*c+$*a+R*(5*w),D+=se>>>13,se&=8191;let ue=D+S*w+k*g+O*p+U*f+G*h;D=ue>>>13,ue&=8191,ue+=F*d+T*u+N*l+$*c+R*a,D+=ue>>>13,ue&=8191,D=(D<<2)+D|0,D=D+B|0,B=D&8191,D=D>>>13,H+=D,i[0]=B,i[1]=H,i[2]=J,i[3]=ee,i[4]=ne,i[5]=ie,i[6]=we,i[7]=Z,i[8]=se,i[9]=ue}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;sg(r)}update(e){yM(this);const{buffer:n,blockLen:r}=this;e=NT(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){sg(this.h,this.r,this.buffer,this.pad)}digestInto(e){yM(this),vAe(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function MAe(t){const e=(r,s)=>t(s).update(NT(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const LAe=MAe(t=>new $Ae(t));function UAe(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],w=e[6],y=e[7],b=s,E=n[0],_=n[1],C=n[2],I=o,A=a,x=c,S=l,k=u,O=d,U=h,G=f,F=p,T=g,N=w,$=y,R=b,D=E,B=_,H=C;for(let ee=0;ee<i;ee+=2)I=I+k|0,R=qt(R^I,16),F=F+R|0,k=qt(k^F,12),I=I+k|0,R=qt(R^I,8),F=F+R|0,k=qt(k^F,7),A=A+O|0,D=qt(D^A,16),T=T+D|0,O=qt(O^T,12),A=A+O|0,D=qt(D^A,8),T=T+D|0,O=qt(O^T,7),x=x+U|0,B=qt(B^x,16),N=N+B|0,U=qt(U^N,12),x=x+U|0,B=qt(B^x,8),N=N+B|0,U=qt(U^N,7),S=S+G|0,H=qt(H^S,16),$=$+H|0,G=qt(G^$,12),S=S+G|0,H=qt(H^S,8),$=$+H|0,G=qt(G^$,7),I=I+O|0,H=qt(H^I,16),N=N+H|0,O=qt(O^N,12),I=I+O|0,H=qt(H^I,8),N=N+H|0,O=qt(O^N,7),A=A+U|0,R=qt(R^A,16),$=$+R|0,U=qt(U^$,12),A=A+U|0,R=qt(R^A,8),$=$+R|0,U=qt(U^$,7),x=x+G|0,D=qt(D^x,16),F=F+D|0,G=qt(G^F,12),x=x+G|0,D=qt(D^x,8),F=F+D|0,G=qt(G^F,7),S=S+k|0,B=qt(B^S,16),T=T+B|0,k=qt(k^T,12),S=S+k|0,B=qt(B^S,8),T=T+B|0,k=qt(k^T,7);let J=0;r[J++]=o+I|0,r[J++]=a+A|0,r[J++]=c+x|0,r[J++]=l+S|0,r[J++]=u+k|0,r[J++]=d+O|0,r[J++]=h+U|0,r[J++]=f+G|0,r[J++]=p+F|0,r[J++]=g+T|0,r[J++]=w+N|0,r[J++]=y+$|0,r[J++]=b+R|0,r[J++]=E+D|0,r[J++]=_+B|0,r[J++]=C+H|0}const BAe=DAe(UAe,{counterRight:!1,counterLength:4,allowShortKeys:!1}),jAe=new Uint8Array(16),_M=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(jAe.subarray(n))},FAe=new Uint8Array(32);function CM(t,e,n,r,s){const i=t(e,n,FAe),o=LAe.create(i);s&&_M(o,s),_M(o,r);const a=new Uint8Array(16),c=EAe(a);vM(c,0,BigInt(s?s.length:0),!0),vM(c,8,BigInt(r.length),!0),o.update(a);const l=o.digest();return sg(i,a),l}const WAe=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=bM(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=CM(t,e,n,a,r);return i.set(c,o),sg(c),i},decrypt(s,i){i=bM(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=CM(t,e,n,o,r);if(!AAe(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),sg(c),i}}),$z=IAe({blockSize:64,nonceLength:12,tagLength:16},WAe(BAe));let Mz=class extends ik{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,sk(e);const r=rg(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return ng(this),this.iHash.update(e),this}digestInto(e){ng(this),H0(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const l1=(t,e,n)=>new Mz(t,e).update(n).digest();l1.create=(t,e)=>new Mz(t,e);function zAe(t,e,n){return sk(t),n===void 0&&(n=new Uint8Array(t.outputLen)),l1(t,rg(n),rg(e))}const jA=new Uint8Array([0]),SM=new Uint8Array;function HAe(t,e,n,r=32){if(sk(t),qw(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/t.outputLen);n===void 0&&(n=SM);const i=new Uint8Array(s*t.outputLen),o=l1.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<s;l++)jA[0]=l+1,a.update(l===0?SM:c).update(n).update(jA).digestInto(c),i.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),jA.fill(0),i.slice(0,r)}const qAe=(t,e,n,r,s)=>HAe(t,zAe(t,e,n),r,s);function GAe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function VAe(t,e,n){return t&e^~t&n}function KAe(t,e,n){return t&e^t&n^e&n}let YAe=class extends ik{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=UA(this.buffer)}update(e){ng(this);const{view:n,buffer:r,blockLen:s}=this;e=rg(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=UA(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ng(this),Cz(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;GAe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=UA(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const QAe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Cl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Sl=new Uint32Array(64);class ZAe extends YAe{constructor(){super(64,32,8,!1),this.A=Cl[0]|0,this.B=Cl[1]|0,this.C=Cl[2]|0,this.D=Cl[3]|0,this.E=Cl[4]|0,this.F=Cl[5]|0,this.G=Cl[6]|0,this.H=Cl[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Sl[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Sl[d-15],f=Sl[d-2],p=va(h,7)^va(h,18)^h>>>3,g=va(f,17)^va(f,19)^f>>>10;Sl[d]=g+Sl[d-7]+p+Sl[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=va(a,6)^va(a,11)^va(a,25),f=u+h+VAe(a,c,l)+QAe[d]+Sl[d]|0,p=(va(r,2)^va(r,13)^va(r,22))+KAe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Sl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const q0=Sz(()=>new ZAe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const u1=BigInt(0),d1=BigInt(1),JAe=BigInt(2);function Sh(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function G0(t){if(!Sh(t))throw new Error("Uint8Array expected")}function ig(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const XAe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function og(t){G0(t);let e="";for(let n=0;n<t.length;n++)e+=XAe[t[n]];return e}function Xf(t){const e=t.toString(16);return e.length&1?"0"+e:e}function ak(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?u1:BigInt("0x"+t)}const Ec={_0:48,_9:57,A:65,F:70,a:97,f:102};function AM(t){if(t>=Ec._0&&t<=Ec._9)return t-Ec._0;if(t>=Ec.A&&t<=Ec.F)return t-(Ec.A-10);if(t>=Ec.a&&t<=Ec.f)return t-(Ec.a-10)}function ag(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=AM(t.charCodeAt(i)),a=AM(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Kd(t){return ak(og(t))}function Vw(t){return G0(t),ak(og(Uint8Array.from(t).reverse()))}function cg(t,e){return ag(t.toString(16).padStart(e*2,"0"))}function h1(t,e){return cg(t,e).reverse()}function eIe(t){return ag(Xf(t))}function Ni(t,e,n){let r;if(typeof e=="string")try{r=ag(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Sh(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function Kw(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];G0(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function tIe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function nIe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const FA=t=>typeof t=="bigint"&&u1<=t;function f1(t,e,n){return FA(t)&&FA(e)&&FA(n)&&e<=t&&t<n}function Hc(t,e,n,r){if(!f1(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Lz(t){let e;for(e=0;t>u1;t>>=d1,e+=1);return e}function rIe(t,e){return t>>BigInt(e)&d1}function sIe(t,e,n){return t|(n?d1:u1)<<BigInt(e)}const ck=t=>(JAe<<BigInt(t-1))-d1,WA=t=>new Uint8Array(t),IM=t=>Uint8Array.from(t);function Uz(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=WA(t),s=WA(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...u)=>n(s,r,...u),c=(u=WA())=>{s=a(IM([0]),u),r=a(),u.length!==0&&(s=a(IM([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return Kw(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const iIe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Sh(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Bg(t,e,n={}){const r=(s,i,o)=>{const a=iIe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const oIe=()=>{throw new Error("not implemented")};function RT(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}var aIe=Object.freeze({__proto__:null,isBytes:Sh,abytes:G0,abool:ig,bytesToHex:og,numberToHexUnpadded:Xf,hexToNumber:ak,hexToBytes:ag,bytesToNumberBE:Kd,bytesToNumberLE:Vw,numberToBytesBE:cg,numberToBytesLE:h1,numberToVarBytesBE:eIe,ensureBytes:Ni,concatBytes:Kw,equalBytes:tIe,utf8ToBytes:nIe,inRange:f1,aInRange:Hc,bitLen:Lz,bitGet:rIe,bitSet:sIe,bitMask:ck,createHmacDrbg:Uz,validateObject:Bg,notImplemented:oIe,memoized:RT});const Lr=BigInt(0),ir=BigInt(1),yd=BigInt(2),cIe=BigInt(3),PT=BigInt(4),NM=BigInt(5),xM=BigInt(8);function ei(t,e){const n=t%e;return n>=Lr?n:e+n}function Bz(t,e,n){if(e<Lr)throw new Error("invalid exponent, negatives unsupported");if(n<=Lr)throw new Error("invalid modulus");if(n===ir)return Lr;let r=ir;for(;e>Lr;)e&ir&&(r=r*t%n),t=t*t%n,e>>=ir;return r}function Bo(t,e,n){let r=t;for(;e-- >Lr;)r*=r,r%=n;return r}function OT(t,e){if(t===Lr)throw new Error("invert: expected non-zero number");if(e<=Lr)throw new Error("invert: expected positive modulus, got "+e);let n=ei(t,e),r=e,s=Lr,i=ir;for(;n!==Lr;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==ir)throw new Error("invert: does not exist");return ei(s,e)}function lIe(t){const e=(t-ir)/yd;let n,r,s;for(n=t-ir,r=0;n%yd===Lr;n/=yd,r++);for(s=yd;s<t&&Bz(s,e,t)!==t-ir;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+ir)/PT;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+ir)/yd;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,ir<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function uIe(t){if(t%PT===cIe){const e=(t+ir)/PT;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%xM===NM){const e=(t-NM)/xM;return function(n,r){const s=n.mul(r,yd),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,yd),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return lIe(t)}const dIe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function hIe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=dIe.reduce((r,s)=>(r[s]="function",r),e);return Bg(t,n)}function fIe(t,e,n){if(n<Lr)throw new Error("invalid exponent, negatives unsupported");if(n===Lr)return t.ONE;if(n===ir)return e;let r=t.ONE,s=e;for(;n>Lr;)n&ir&&(r=t.mul(r,s)),s=t.sqr(s),n>>=ir;return r}function pIe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function jz(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Fz(t,e,n=!1,r={}){if(t<=Lr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=jz(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:ck(s),ZERO:Lr,ONE:ir,create:c=>ei(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Lr<=c&&c<t},is0:c=>c===Lr,isOdd:c=>(c&ir)===ir,neg:c=>ei(-c,t),eql:(c,l)=>c===l,sqr:c=>ei(c*c,t),add:(c,l)=>ei(c+l,t),sub:(c,l)=>ei(c-l,t),mul:(c,l)=>ei(c*l,t),pow:(c,l)=>fIe(a,c,l),div:(c,l)=>ei(c*OT(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>OT(c,t),sqrt:r.sqrt||(c=>(o||(o=uIe(t)),o(a,c))),invertBatch:c=>pIe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?h1(c,i):cg(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?Vw(c):Kd(c)}});return Object.freeze(a)}function Wz(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function zz(t){const e=Wz(t);return e+Math.ceil(e/2)}function gIe(t,e,n=!1){const r=t.length,s=Wz(e),i=zz(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?Vw(t):Kd(t),a=ei(o,e-ir)+ir;return n?h1(a,s):cg(a,s)}const TM=BigInt(0),cv=BigInt(1);function zA(t,e){const n=e.negate();return t?n:e}function Hz(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function HA(t,e){Hz(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function mIe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function yIe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const qA=new WeakMap,qz=new WeakMap;function GA(t){return qz.get(t)||1}function wIe(t,e){return{constTimeNegate:zA,hasPrecomputes(n){return GA(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>TM;)r&cv&&(s=s.add(i)),i=i.double(),r>>=cv;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=HA(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=HA(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=cv);const g=f,w=f+Math.abs(p)-1,y=h%2!==0,b=p<0;p===0?c=c.add(zA(y,r[g])):a=a.add(zA(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=HA(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===TM)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=cv),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=qA.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&qA.set(r,s(i))),i},wNAFCached(n,r,s){const i=GA(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=GA(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){Hz(r,e),qz.set(n,r),qA.delete(n)}}}function bIe(t,e,n,r){if(mIe(n,t),yIe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=Lz(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function Gz(t){return hIe(t.Fp),Bg(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...jz(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const gf=BigInt(0),VA=BigInt(1);function vIe(t){return Bg(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function EIe(t){const e=vIe(t),{P:n}=e,r=b=>ei(b,n),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(b=>b),c=e.powPminus2||(b=>Bz(b,n-BigInt(2),n));function l(b,E,_){const C=r(b*(E-_));return E=r(E-C),_=r(_+C),[E,_]}const u=(e.a-BigInt(2))/BigInt(4);function d(b,E){Hc("u",b,gf,n),Hc("scalar",E,gf,n);const _=E,C=b;let I=VA,A=gf,x=b,S=VA,k=gf,O;for(let G=BigInt(s-1);G>=gf;G--){const F=_>>G&VA;k^=F,O=l(k,I,x),I=O[0],x=O[1],O=l(k,A,S),A=O[0],S=O[1],k=F;const T=I+A,N=r(T*T),$=I-A,R=r($*$),D=N-R,B=x+S,H=x-S,J=r(H*T),ee=r(B*$),ne=J+ee,ie=J-ee;x=r(ne*ne),S=r(C*r(ie*ie)),I=r(N*R),A=r(D*(N+r(u*D)))}O=l(k,I,x),I=O[0],x=O[1],O=l(k,A,S),A=O[0],S=O[1];const U=c(A);return r(I*U)}function h(b){return h1(r(b),i)}function f(b){const E=Ni("u coordinate",b,i);return o===32&&(E[31]&=127),Vw(E)}function p(b){const E=Ni("scalar",b),_=E.length;if(_!==i&&_!==o){let C=""+i+" or "+o;throw new Error("invalid scalar, expected "+C+" bytes, got "+_)}return Vw(a(E))}function g(b,E){const _=f(E),C=p(b),I=d(_,C);if(I===gf)throw new Error("invalid private or public key received");return h(I)}const w=h(e.Gu);function y(b){return g(b,w)}return{scalarMult:g,scalarMultBase:y,getSharedSecret:(b,E)=>g(b,E),getPublicKey:b=>y(b),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:w}}const kT=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const _Ie=BigInt(1),RM=BigInt(2),CIe=BigInt(3),SIe=BigInt(5);BigInt(8);function AIe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=kT,o=t*t%i*t%i,a=Bo(o,RM,i)*o%i,c=Bo(a,_Ie,i)*t%i,l=Bo(c,SIe,i)*c%i,u=Bo(l,e,i)*l%i,d=Bo(u,n,i)*u%i,h=Bo(d,r,i)*d%i,f=Bo(h,s,i)*h%i,p=Bo(f,s,i)*h%i,g=Bo(p,e,i)*l%i;return{pow_p_5_8:Bo(g,RM,i)*t%i,b2:o}}function IIe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const DT=EIe({P:kT,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=kT,{pow_p_5_8:n,b2:r}=AIe(t);return ei(Bo(n,CIe,e)*r,e)},adjustScalarBytes:IIe,randomBytes:Ug});function PM(t){t.lowS!==void 0&&ig("lowS",t.lowS),t.prehash!==void 0&&ig("prehash",t.prehash)}function NIe(t){const e=Gz(t);Bg(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:xIe,hexToBytes:TIe}=aIe;class RIe extends Error{constructor(e=""){super(e)}}const Rc={Err:RIe,_tlv:{encode:(t,e)=>{const{Err:n}=Rc;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Xf(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Xf(s.length/2|128):"";return Xf(t)+i+s+e},decode(t,e){const{Err:n}=Rc;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Rc;if(t<Dc)throw new e("integer: negative integers are not allowed");let n=Xf(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Rc;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return xIe(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Rc,s=typeof t=="string"?TIe(t):t;G0(s);const{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Rc,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Dc=BigInt(0),xr=BigInt(1);BigInt(2);const OM=BigInt(3);BigInt(4);function PIe(t){const e=NIe(t),{Fp:n}=e,r=Fz(e.n,e.nBitLength),s=e.toBytes||((g,w,y)=>{const b=w.toAffine();return Kw(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),i=e.fromBytes||(g=>{const w=g.subarray(1),y=n.fromBytes(w.subarray(0,n.BYTES)),b=n.fromBytes(w.subarray(n.BYTES,2*n.BYTES));return{x:y,y:b}});function o(g){const{a:w,b:y}=e,b=n.sqr(g),E=n.mul(b,g);return n.add(n.add(E,n.mul(g,w)),y)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return f1(g,xr,e.n)}function c(g){const{allowedPrivateKeyLengths:w,nByteLength:y,wrapPrivateKey:b,n:E}=e;if(w&&typeof g!="bigint"){if(Sh(g)&&(g=og(g)),typeof g!="string"||!w.includes(g.length))throw new Error("invalid private key");g=g.padStart(y*2,"0")}let _;try{_=typeof g=="bigint"?g:Kd(Ni("private key",g,y))}catch{throw new Error("invalid private key, expected hex or "+y+" bytes, got "+typeof g)}return b&&(_=ei(_,E)),Hc("private key",_,xr,E),_}function l(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const u=RT((g,w)=>{const{px:y,py:b,pz:E}=g;if(n.eql(E,n.ONE))return{x:y,y:b};const _=g.is0();w==null&&(w=_?n.ONE:n.inv(E));const C=n.mul(y,w),I=n.mul(b,w),A=n.mul(E,w);if(_)return{x:n.ZERO,y:n.ZERO};if(!n.eql(A,n.ONE))throw new Error("invZ was invalid");return{x:C,y:I}}),d=RT(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:w,y}=g.toAffine();if(!n.isValid(w)||!n.isValid(y))throw new Error("bad point: x or y not FE");const b=n.sqr(y),E=o(w);if(!n.eql(b,E))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(w,y,b){if(this.px=w,this.py=y,this.pz=b,w==null||!n.isValid(w))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required");Object.freeze(this)}static fromAffine(w){const{x:y,y:b}=w||{};if(!w||!n.isValid(y)||!n.isValid(b))throw new Error("invalid affine point");if(w instanceof h)throw new Error("projective point not allowed");const E=_=>n.eql(_,n.ZERO);return E(y)&&E(b)?h.ZERO:new h(y,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const y=n.invertBatch(w.map(b=>b.pz));return w.map((b,E)=>b.toAffine(y[E])).map(h.fromAffine)}static fromHex(w){const y=h.fromAffine(i(Ni("pointHex",w)));return y.assertValidity(),y}static fromPrivateKey(w){return h.BASE.multiply(c(w))}static msm(w,y){return bIe(h,r,w,y)}_setWindowSize(w){p.setWindowSize(this,w)}assertValidity(){d(this)}hasEvenY(){const{y:w}=this.toAffine();if(n.isOdd)return!n.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){l(w);const{px:y,py:b,pz:E}=this,{px:_,py:C,pz:I}=w,A=n.eql(n.mul(y,I),n.mul(_,E)),x=n.eql(n.mul(b,I),n.mul(C,E));return A&&x}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:w,b:y}=e,b=n.mul(y,OM),{px:E,py:_,pz:C}=this;let I=n.ZERO,A=n.ZERO,x=n.ZERO,S=n.mul(E,E),k=n.mul(_,_),O=n.mul(C,C),U=n.mul(E,_);return U=n.add(U,U),x=n.mul(E,C),x=n.add(x,x),I=n.mul(w,x),A=n.mul(b,O),A=n.add(I,A),I=n.sub(k,A),A=n.add(k,A),A=n.mul(I,A),I=n.mul(U,I),x=n.mul(b,x),O=n.mul(w,O),U=n.sub(S,O),U=n.mul(w,U),U=n.add(U,x),x=n.add(S,S),S=n.add(x,S),S=n.add(S,O),S=n.mul(S,U),A=n.add(A,S),O=n.mul(_,C),O=n.add(O,O),S=n.mul(O,U),I=n.sub(I,S),x=n.mul(O,k),x=n.add(x,x),x=n.add(x,x),new h(I,A,x)}add(w){l(w);const{px:y,py:b,pz:E}=this,{px:_,py:C,pz:I}=w;let A=n.ZERO,x=n.ZERO,S=n.ZERO;const k=e.a,O=n.mul(e.b,OM);let U=n.mul(y,_),G=n.mul(b,C),F=n.mul(E,I),T=n.add(y,b),N=n.add(_,C);T=n.mul(T,N),N=n.add(U,G),T=n.sub(T,N),N=n.add(y,E);let $=n.add(_,I);return N=n.mul(N,$),$=n.add(U,F),N=n.sub(N,$),$=n.add(b,E),A=n.add(C,I),$=n.mul($,A),A=n.add(G,F),$=n.sub($,A),S=n.mul(k,N),A=n.mul(O,F),S=n.add(A,S),A=n.sub(G,S),S=n.add(G,S),x=n.mul(A,S),G=n.add(U,U),G=n.add(G,U),F=n.mul(k,F),N=n.mul(O,N),G=n.add(G,F),F=n.sub(U,F),F=n.mul(k,F),N=n.add(N,F),U=n.mul(G,N),x=n.add(x,U),U=n.mul($,N),A=n.mul(T,A),A=n.sub(A,U),U=n.mul(T,G),S=n.mul($,S),S=n.add(S,U),new h(A,x,S)}subtract(w){return this.add(w.negate())}is0(){return this.equals(h.ZERO)}wNAF(w){return p.wNAFCached(this,w,h.normalizeZ)}multiplyUnsafe(w){const{endo:y,n:b}=e;Hc("scalar",w,Dc,b);const E=h.ZERO;if(w===Dc)return E;if(this.is0()||w===xr)return this;if(!y||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,w,h.normalizeZ);let{k1neg:_,k1:C,k2neg:I,k2:A}=y.splitScalar(w),x=E,S=E,k=this;for(;C>Dc||A>Dc;)C&xr&&(x=x.add(k)),A&xr&&(S=S.add(k)),k=k.double(),C>>=xr,A>>=xr;return _&&(x=x.negate()),I&&(S=S.negate()),S=new h(n.mul(S.px,y.beta),S.py,S.pz),x.add(S)}multiply(w){const{endo:y,n:b}=e;Hc("scalar",w,xr,b);let E,_;if(y){const{k1neg:C,k1:I,k2neg:A,k2:x}=y.splitScalar(w);let{p:S,f:k}=this.wNAF(I),{p:O,f:U}=this.wNAF(x);S=p.constTimeNegate(C,S),O=p.constTimeNegate(A,O),O=new h(n.mul(O.px,y.beta),O.py,O.pz),E=S.add(O),_=k.add(U)}else{const{p:C,f:I}=this.wNAF(w);E=C,_=I}return h.normalizeZ([E,_])[0]}multiplyAndAddUnsafe(w,y,b){const E=h.BASE,_=(I,A)=>A===Dc||A===xr||!I.equals(E)?I.multiplyUnsafe(A):I.multiply(A),C=_(this,y).add(_(w,b));return C.is0()?void 0:C}toAffine(w){return u(this,w)}isTorsionFree(){const{h:w,isTorsionFree:y}=e;if(w===xr)return!0;if(y)return y(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:y}=e;return w===xr?this:y?y(h,this):this.multiplyUnsafe(e.h)}toRawBytes(w=!0){return ig("isCompressed",w),this.assertValidity(),s(h,this,w)}toHex(w=!0){return ig("isCompressed",w),og(this.toRawBytes(w))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=wIe(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function OIe(t){const e=Gz(t);return Bg(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function kIe(t){const e=OIe(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(F){return ei(F,r)}function a(F){return OT(F,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=PIe({...e,toBytes(F,T,N){const $=T.toAffine(),R=n.toBytes($.x),D=Kw;return ig("isCompressed",N),N?D(Uint8Array.from([T.hasEvenY()?2:3]),R):D(Uint8Array.from([4]),R,n.toBytes($.y))},fromBytes(F){const T=F.length,N=F[0],$=F.subarray(1);if(T===s&&(N===2||N===3)){const R=Kd($);if(!f1(R,xr,n.ORDER))throw new Error("Point is not on curve");const D=u(R);let B;try{B=n.sqrt(D)}catch(J){const ee=J instanceof Error?": "+J.message:"";throw new Error("Point is not on curve"+ee)}const H=(B&xr)===xr;return(N&1)===1!==H&&(B=n.neg(B)),{x:R,y:B}}else if(T===i&&N===4){const R=n.fromBytes($.subarray(0,n.BYTES)),D=n.fromBytes($.subarray(n.BYTES,2*n.BYTES));return{x:R,y:D}}else{const R=s,D=i;throw new Error("invalid Point, expected length of "+R+", or uncompressed "+D+", got "+T)}}}),h=F=>og(cg(F,e.nByteLength));function f(F){const T=r>>xr;return F>T}function p(F){return f(F)?o(-F):F}const g=(F,T,N)=>Kd(F.slice(T,N));class w{constructor(T,N,$){this.r=T,this.s=N,this.recovery=$,this.assertValidity()}static fromCompact(T){const N=e.nByteLength;return T=Ni("compactSignature",T,N*2),new w(g(T,0,N),g(T,N,2*N))}static fromDER(T){const{r:N,s:$}=Rc.toSig(Ni("DER",T));return new w(N,$)}assertValidity(){Hc("r",this.r,xr,r),Hc("s",this.s,xr,r)}addRecoveryBit(T){return new w(this.r,this.s,T)}recoverPublicKey(T){const{r:N,s:$,recovery:R}=this,D=I(Ni("msgHash",T));if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");const B=R===2||R===3?N+e.n:N;if(B>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const H=R&1?"03":"02",J=c.fromHex(H+h(B)),ee=a(B),ne=o(-D*ee),ie=o($*ee),we=c.BASE.multiplyAndAddUnsafe(J,ne,ie);if(!we)throw new Error("point at infinify");return we.assertValidity(),we}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return ag(this.toDERHex())}toDERHex(){return Rc.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ag(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(F){try{return l(F),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const F=zz(e.n);return gIe(e.randomBytes(F),e.n)},precompute(F=8,T=c.BASE){return T._setWindowSize(F),T.multiply(BigInt(3)),T}};function b(F,T=!0){return c.fromPrivateKey(F).toRawBytes(T)}function E(F){const T=Sh(F),N=typeof F=="string",$=(T||N)&&F.length;return T?$===s||$===i:N?$===2*s||$===2*i:F instanceof c}function _(F,T,N=!0){if(E(F))throw new Error("first arg must be private key");if(!E(T))throw new Error("second arg must be public key");return c.fromHex(T).multiply(l(F)).toRawBytes(N)}const C=e.bits2int||function(F){if(F.length>8192)throw new Error("input is too large");const T=Kd(F),N=F.length*8-e.nBitLength;return N>0?T>>BigInt(N):T},I=e.bits2int_modN||function(F){return o(C(F))},A=ck(e.nBitLength);function x(F){return Hc("num < 2^"+e.nBitLength,F,Dc,A),cg(F,e.nByteLength)}function S(F,T,N=k){if(["recovered","canonical"].some(se=>se in N))throw new Error("sign() legacy options not supported");const{hash:$,randomBytes:R}=e;let{lowS:D,prehash:B,extraEntropy:H}=N;D==null&&(D=!0),F=Ni("msgHash",F),PM(N),B&&(F=Ni("prehashed msgHash",$(F)));const J=I(F),ee=l(T),ne=[x(ee),x(J)];if(H!=null&&H!==!1){const se=H===!0?R(n.BYTES):H;ne.push(Ni("extraEntropy",se))}const ie=Kw(...ne),we=J;function Z(se){const ue=C(se);if(!d(ue))return;const ce=a(ue),fe=c.BASE.multiply(ue).toAffine(),ge=o(fe.x);if(ge===Dc)return;const Ae=o(ce*o(we+ge*ee));if(Ae===Dc)return;let pe=(fe.x===ge?0:2)|Number(fe.y&xr),ye=Ae;return D&&f(Ae)&&(ye=p(Ae),pe^=1),new w(ge,ye,pe)}return{seed:ie,k2sig:Z}}const k={lowS:e.lowS,prehash:!1},O={lowS:e.lowS,prehash:!1};function U(F,T,N=k){const{seed:$,k2sig:R}=S(F,T,N),D=e;return Uz(D.hash.outputLen,D.nByteLength,D.hmac)($,R)}c.BASE._setWindowSize(8);function G(F,T,N,$=O){var Ae;const R=F;T=Ni("msgHash",T),N=Ni("publicKey",N);const{lowS:D,prehash:B,format:H}=$;if(PM($),"strict"in $)throw new Error("options.strict was renamed to lowS");if(H!==void 0&&H!=="compact"&&H!=="der")throw new Error("format must be compact or der");const J=typeof R=="string"||Sh(R),ee=!J&&!H&&typeof R=="object"&&R!==null&&typeof R.r=="bigint"&&typeof R.s=="bigint";if(!J&&!ee)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let ne,ie;try{if(ee&&(ne=new w(R.r,R.s)),J){try{H!=="compact"&&(ne=w.fromDER(R))}catch(pe){if(!(pe instanceof Rc.Err))throw pe}!ne&&H!=="der"&&(ne=w.fromCompact(R))}ie=c.fromHex(N)}catch{return!1}if(!ne||D&&ne.hasHighS())return!1;B&&(T=e.hash(T));const{r:we,s:Z}=ne,se=I(T),ue=a(Z),ce=o(se*ue),fe=o(we*ue),ge=(Ae=c.BASE.multiplyAndAddUnsafe(ie,ce,fe))==null?void 0:Ae.toAffine();return ge?o(ge.x)===we:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:_,sign:U,verify:G,ProjectivePoint:c,Signature:w,utils:y}}function DIe(t){return{hash:t,hmac:(e,...n)=>l1(t,e,USe(...n)),randomBytes:Ug}}function $Ie(t,e){const n=r=>kIe({...t,...DIe(r)});return{...n(e),create:n}}const Vz=Fz(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),MIe=Vz.create(BigInt("-3")),LIe=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),UIe=$Ie({a:MIe,b:LIe,Fp:Vz,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},q0),Kz="base10",Ps="base16",ta="base64pad",jl="base64url",V0="utf8",Yz=0,qc=1,K0=2,BIe=0,kM=1,Ey=12,lk=32;function jIe(){const t=DT.utils.randomPrivateKey(),e=DT.getPublicKey(t);return{privateKey:di(t,Ps),publicKey:di(e,Ps)}}function $T(){const t=Ug(lk);return di(t,Ps)}function FIe(t,e){const n=DT.getSharedSecret(fo(t,Ps),fo(e,Ps)),r=qAe(q0,n,void 0,void 0,lk);return di(r,Ps)}function Qv(t){const e=q0(fo(t,Ps));return di(e,Ps)}function Ma(t){const e=q0(fo(t,V0));return di(e,Ps)}function Qz(t){return fo(`${t}`,Kz)}function Ah(t){return Number(di(t,Kz))}function Zz(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Jz(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function WIe(t){const e=Qz(typeof t.type<"u"?t.type:Yz);if(Ah(e)===qc&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?fo(t.senderPublicKey,Ps):void 0,r=typeof t.iv<"u"?fo(t.iv,Ps):Ug(Ey),s=fo(t.symKey,Ps),i=$z(s,r).encrypt(fo(t.message,V0)),o=Xz({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===jl?Zz(o):o}function zIe(t){const e=fo(t.symKey,Ps),{sealed:n,iv:r}=Yw({encoded:t.encoded,encoding:t.encoding}),s=$z(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return di(s,V0)}function HIe(t,e){const n=Qz(K0),r=Ug(Ey),s=fo(t,V0),i=Xz({type:n,sealed:s,iv:r});return e===jl?Zz(i):i}function qIe(t,e){const{sealed:n}=Yw({encoded:t,encoding:e});return di(n,V0)}function Xz(t){if(Ah(t.type)===K0)return di(wy([t.type,t.sealed]),ta);if(Ah(t.type)===qc){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return di(wy([t.type,t.senderPublicKey,t.iv,t.sealed]),ta)}return di(wy([t.type,t.iv,t.sealed]),ta)}function Yw(t){const e=(t.encoding||ta)===jl?Jz(t.encoded):t.encoded,n=fo(e,ta),r=n.slice(BIe,kM),s=kM;if(Ah(r)===qc){const c=s+lk,l=c+Ey,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(Ah(r)===K0){const c=n.slice(s),l=Ug(Ey);return{type:r,sealed:c,iv:l}}const i=s+Ey,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function GIe(t,e){const n=Yw({encoded:t,encoding:e==null?void 0:e.encoding});return eH({type:Ah(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?di(n.senderPublicKey,Ps):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function eH(t){const e=(t==null?void 0:t.type)||Yz;if(e===qc){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function DM(t){return t.type===qc&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function $M(t){return t.type===K0}function VIe(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return wy([new Uint8Array([4]),e,n])}function KIe(t,e){const[n,r,s]=t.split("."),i=Buffer.from(Jz(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=q0(c),u=VIe(e);if(!UIe.verify(wy([o,a]),l,u))throw new Error("Invalid signature");return hT(t).payload}const YIe="irn";function N_(t){return(t==null?void 0:t.relay)||{protocol:YIe}}function Wm(t){const e=tve[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function QIe(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function MM(t){if(!t.includes("wc:")){const l=_z(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:ZIe(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:QIe(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function ZIe(t){return t.startsWith("//")?t.substring(2):t}function JIe(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function LM(t){const e=new URLSearchParams,n=JIe(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function lv(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var XIe=Object.defineProperty,eNe=Object.defineProperties,tNe=Object.getOwnPropertyDescriptors,UM=Object.getOwnPropertySymbols,nNe=Object.prototype.hasOwnProperty,rNe=Object.prototype.propertyIsEnumerable,BM=(t,e,n)=>e in t?XIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sNe=(t,e)=>{for(var n in e||(e={}))nNe.call(e,n)&&BM(t,n,e[n]);if(UM)for(var n of UM(e))rNe.call(e,n)&&BM(t,n,e[n]);return t},iNe=(t,e)=>eNe(t,tNe(e));function jg(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function oNe(t){const e=[];return Object.values(t).forEach(n=>{e.push(...jg(n.accounts))}),e}function aNe(t,e){const n=[];return Object.values(t).forEach(r=>{jg(r.accounts).includes(e)&&n.push(...r.methods)}),n}function cNe(t,e){const n=[];return Object.values(t).forEach(r=>{jg(r.accounts).includes(e)&&n.push(...r.events)}),n}function p1(t){return t.includes(":")}function ep(t){return p1(t)?t.split(":")[0]:t}function jM(t){var e,n,r;const s={};if(!Iu(t))return s;for(const[i,o]of Object.entries(t)){const a=p1(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=ep(i);s[u]=iNe(sNe({},s[u]),{chains:Qa(a,(e=s[u])==null?void 0:e.chains),methods:Qa(c,(n=s[u])==null?void 0:n.methods),events:Qa(l,(r=s[u])==null?void 0:r.events)})}return s}function lNe(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function FM(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=lNe(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Qa(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function uNe(t,e){var n,r,s,i,o,a;const c=jM(t),l=jM(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:Qa((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:Qa((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:Qa((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const dNe={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},hNe={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Se(t,e){const{message:n,code:r}=hNe[t];return{message:e?`${n} ${e}`:n,code:r}}function gn(t,e){const{message:n,code:r}=dNe[t];return{message:e?`${n} ${e}`:n,code:r}}function Au(t,e){return!!Array.isArray(t)}function Iu(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Kr(t){return typeof t>"u"}function cr(t,e){return e&&Kr(t)?!0:typeof t=="string"&&!!t.trim().length}function uk(t,e){return e&&Kr(t)?!0:typeof t=="number"&&!isNaN(t)}function fNe(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return Od(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=jg(a),d=n[o];(!Od(yz(o,d),u)||!Od(d.methods,c)||!Od(d.events,l))&&(i=!1)}),i):!1}function x_(t){return cr(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function pNe(t){if(cr(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&x_(n)}}return!1}function gNe(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(cr(t,!1)){if(e(t))return!0;const n=_z(t);return e(n)}}catch{}return!1}function mNe(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function yNe(t){return t==null?void 0:t.topic}function wNe(t,e){let n=null;return cr(t==null?void 0:t.publicKey,!1)||(n=Se("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function WM(t){let e=!0;return Au(t)?t.length&&(e=t.every(n=>cr(n,!1))):e=!1,e}function bNe(t,e,n){let r=null;return Au(e)&&e.length?e.forEach(s=>{r||x_(s)||(r=gn("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):x_(t)||(r=gn("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function vNe(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=bNe(s,yz(s,i),`${e} ${n}`);o&&(r=o)}),r}function ENe(t,e){let n=null;return Au(t)?t.forEach(r=>{n||pNe(r)||(n=gn("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=gn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function _Ne(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=ENe(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function CNe(t,e){let n=null;return WM(t==null?void 0:t.methods)?WM(t==null?void 0:t.events)||(n=gn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=gn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function tH(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=CNe(r,`${e}, namespace`);s&&(n=s)}),n}function SNe(t,e,n){let r=null;if(t&&Iu(t)){const s=tH(t,e);s&&(r=s);const i=vNe(t,e,n);i&&(r=i)}else r=Se("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function KA(t,e){let n=null;if(t&&Iu(t)){const r=tH(t,e);r&&(n=r);const s=_Ne(t,e);s&&(n=s)}else n=Se("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function nH(t){return cr(t.protocol,!0)}function ANe(t,e){let n=!1;return t?t&&Au(t)&&t.length&&t.forEach(r=>{n=nH(r)}):n=!0,n}function INe(t){return typeof t=="number"}function Ks(t){return typeof t<"u"&&typeof t!==null}function NNe(t){return!(!t||typeof t!="object"||!t.code||!uk(t.code,!1)||!t.message||!cr(t.message,!1))}function xNe(t){return!(Kr(t)||!cr(t.method,!1))}function TNe(t){return!(Kr(t)||Kr(t.result)&&Kr(t.error)||!uk(t.id,!1)||!cr(t.jsonrpc,!1))}function RNe(t){return!(Kr(t)||!cr(t.name,!1))}function zM(t,e){return!(!x_(e)||!oNe(t).includes(e))}function PNe(t,e,n){return cr(n,!1)?aNe(t,e).includes(n):!1}function ONe(t,e,n){return cr(n,!1)?cNe(t,e).includes(n):!1}function HM(t,e,n){let r=null;const s=kNe(t),i=DNe(e),o=Object.keys(s),a=Object.keys(i),c=qM(Object.keys(t)),l=qM(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=Se("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Od(o,a)||(r=Se("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=jg(e[d].accounts);h.includes(d)||(r=Se("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(Od(s[d].methods,i[d].methods)?Od(s[d].events,i[d].events)||(r=Se("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=Se("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function kNe(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function qM(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function DNe(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=jg(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function $Ne(t,e){return uk(t,!1)&&t<=e.max&&t>=e.min}function GM(){const t=z0();return new Promise(e=>{switch(t){case Oi.browser:e(MNe());break;case Oi.reactNative:e(LNe());break;case Oi.node:e(UNe());break;default:e(!0)}})}function MNe(){return Lg()&&(navigator==null?void 0:navigator.onLine)}async function LNe(){if(Vu()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function UNe(){return!0}function BNe(t){switch(z0()){case Oi.browser:jNe(t);break;case Oi.reactNative:FNe(t);break}}function jNe(t){!Vu()&&Lg()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function FNe(t){Vu()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function WNe(){var t;return Lg()&&wh()?((t=wh())==null?void 0:t.visibilityState)==="visible":!0}const YA={};class _m{static get(e){return YA[e]}static set(e,n){YA[e]=n}static delete(e){delete YA[e]}}var zNe={};const rH="wc",sH=2,MT="core",sc=`${rH}@2:${MT}:`,HNe={logger:"error"},qNe={database:":memory:"},GNe="crypto",VM="client_ed25519_seed",VNe=_e.ONE_DAY,KNe="keychain",YNe="0.3",QNe="messages",ZNe="0.3",KM=_e.SIX_HOURS,JNe="publisher",iH="irn",XNe="error",oH="wss://relay.walletconnect.org",exe="relayer",kr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},txe="_subscription",Zi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},nxe=.1,LT="2.21.0",kn={link_mode:"link_mode",relay:"relay"},Zv={inbound:"inbound",outbound:"outbound"},rxe="0.3",sxe="WALLETCONNECT_CLIENT_ID",YM="WALLETCONNECT_LINK_MODE_APPS",Ai={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},ixe="subscription",oxe="0.3",axe="pairing",cxe="0.3",Cm={wc_pairingDelete:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:0},res:{ttl:_e.ONE_DAY,prompt:!1,tag:0}}},wd={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},$o={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},lxe="history",uxe="0.3",dxe="expirer",ro={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},hxe="0.3",fxe="verify-api",pxe="https://verify.walletconnect.com",aH="https://verify.walletconnect.org",_y=aH,gxe=`${_y}/v3`,mxe=[pxe,aH],yxe="echo",wxe="https://echo.walletconnect.com",Ia={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Ic={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Mo={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},td={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},nd={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Sm={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},bxe=.1,vxe="event-client",Exe=86400,_xe="https://pulse.walletconnect.org/batch";function Cxe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var E=(b-y)*u+1>>>0,_=new Uint8Array(E);y!==b;){for(var C=p[y],I=0,A=E-1;(C!==0||I<w)&&A!==-1;A--,I++)C+=256*_[A]>>>0,_[A]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=I,y++}for(var x=E-w;x!==E&&_[x]===0;)x++;for(var S=c.repeat(g);x<E;++x)S+=t.charAt(_[x]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,E=new Uint8Array(b);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var C=0,I=b-1;(_!==0||C<y)&&I!==-1;I--,C++)_+=a*E[I]>>>0,E[I]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");y=C,g++}if(p[g]!==" "){for(var A=b-y;A!==b&&E[A]===0;)A++;for(var x=new Uint8Array(w+(b-A)),S=w;A!==b;)x[S++]=E[A++];return x}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Sxe=Cxe,Axe=Sxe;const cH=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Ixe=t=>new TextEncoder().encode(t),Nxe=t=>new TextDecoder().decode(t);class xxe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Txe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return lH(this,e)}}class Rxe{constructor(e){this.decoders=e}or(e){return lH(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const lH=(t,e)=>new Rxe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Pxe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new xxe(e,n,r),this.decoder=new Txe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const g1=({name:t,prefix:e,encode:n,decode:r})=>new Pxe(t,e,n,r),Y0=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Axe(n,e);return g1({prefix:t,name:e,encode:r,decode:i=>cH(s(i))})},Oxe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},kxe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},rs=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>g1({prefix:e,name:t,encode(s){return kxe(s,r,n)},decode(s){return Oxe(s,r,n,t)}}),Dxe=g1({prefix:"\0",name:"identity",encode:t=>Nxe(t),decode:t=>Ixe(t)});var $xe=Object.freeze({__proto__:null,identity:Dxe});const Mxe=rs({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Lxe=Object.freeze({__proto__:null,base2:Mxe});const Uxe=rs({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Bxe=Object.freeze({__proto__:null,base8:Uxe});const jxe=Y0({prefix:"9",name:"base10",alphabet:"0123456789"});var Fxe=Object.freeze({__proto__:null,base10:jxe});const Wxe=rs({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),zxe=rs({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Hxe=Object.freeze({__proto__:null,base16:Wxe,base16upper:zxe});const qxe=rs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Gxe=rs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Vxe=rs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Kxe=rs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Yxe=rs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Qxe=rs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Zxe=rs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Jxe=rs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Xxe=rs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var eTe=Object.freeze({__proto__:null,base32:qxe,base32upper:Gxe,base32pad:Vxe,base32padupper:Kxe,base32hex:Yxe,base32hexupper:Qxe,base32hexpad:Zxe,base32hexpadupper:Jxe,base32z:Xxe});const tTe=Y0({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),nTe=Y0({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var rTe=Object.freeze({__proto__:null,base36:tTe,base36upper:nTe});const sTe=Y0({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),iTe=Y0({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var oTe=Object.freeze({__proto__:null,base58btc:sTe,base58flickr:iTe});const aTe=rs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),cTe=rs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),lTe=rs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),uTe=rs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var dTe=Object.freeze({__proto__:null,base64:aTe,base64pad:cTe,base64url:lTe,base64urlpad:uTe});const uH=Array.from(""),hTe=uH.reduce((t,e,n)=>(t[n]=e,t),[]),fTe=uH.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function pTe(t){return t.reduce((e,n)=>(e+=hTe[n],e),"")}function gTe(t){const e=[];for(const n of t){const r=fTe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const mTe=g1({prefix:"",name:"base256emoji",encode:pTe,decode:gTe});var yTe=Object.freeze({__proto__:null,base256emoji:mTe}),wTe=dH,QM=128,bTe=-128,vTe=Math.pow(2,31);function dH(t,e,n){e=e||[],n=n||0;for(var r=n;t>=vTe;)e[n++]=t&255|QM,t/=128;for(;t&bTe;)e[n++]=t&255|QM,t>>>=7;return e[n]=t|0,dH.bytes=n-r+1,e}var ETe=UT,_Te=128,ZM=127;function UT(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw UT.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&ZM)<<s:(o&ZM)*Math.pow(2,s),s+=7}while(o>=_Te);return UT.bytes=i-r,n}var CTe=Math.pow(2,7),STe=Math.pow(2,14),ATe=Math.pow(2,21),ITe=Math.pow(2,28),NTe=Math.pow(2,35),xTe=Math.pow(2,42),TTe=Math.pow(2,49),RTe=Math.pow(2,56),PTe=Math.pow(2,63),OTe=function(t){return t<CTe?1:t<STe?2:t<ATe?3:t<ITe?4:t<NTe?5:t<xTe?6:t<TTe?7:t<RTe?8:t<PTe?9:10},kTe={encode:wTe,decode:ETe,encodingLength:OTe},hH=kTe;const JM=(t,e,n=0)=>(hH.encode(t,e,n),e),XM=t=>hH.encodingLength(t),BT=(t,e)=>{const n=e.byteLength,r=XM(t),s=r+XM(n),i=new Uint8Array(s+n);return JM(t,i,0),JM(n,i,r),i.set(e,s),new DTe(t,n,e,i)};class DTe{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const fH=({name:t,code:e,encode:n})=>new $Te(t,e,n);class $Te{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?BT(this.code,n):n.then(r=>BT(this.code,r))}else throw Error("Unknown type, must be binary type")}}const pH=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),MTe=fH({name:"sha2-256",code:18,encode:pH("SHA-256")}),LTe=fH({name:"sha2-512",code:19,encode:pH("SHA-512")});var UTe=Object.freeze({__proto__:null,sha256:MTe,sha512:LTe});const gH=0,BTe="identity",mH=cH,jTe=t=>BT(gH,mH(t)),FTe={code:gH,name:BTe,encode:mH,digest:jTe};var WTe=Object.freeze({__proto__:null,identity:FTe});new TextEncoder,new TextDecoder;const eL={...$xe,...Lxe,...Bxe,...Fxe,...Hxe,...eTe,...rTe,...oTe,...dTe,...yTe};({...UTe,...WTe});function zTe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function yH(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const tL=yH("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),QA=yH("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=zTe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),HTe={utf8:tL,"utf-8":tL,hex:eL.base16,latin1:QA,ascii:QA,binary:QA,...eL};function qTe(t,e="utf8"){const n=HTe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var GTe=Object.defineProperty,VTe=(t,e,n)=>e in t?GTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ea=(t,e,n)=>VTe(t,typeof e!="symbol"?e+"":e,n);class KTe{constructor(e,n){this.core=e,this.logger=n,Ea(this,"keychain",new Map),Ea(this,"name",KNe),Ea(this,"version",YNe),Ea(this,"initialized",!1),Ea(this,"storagePrefix",sc),Ea(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),Ea(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),Ea(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),Ea(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=Se("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),Ea(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=es(n,this.name)}get context(){return gi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,ST(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?AT(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Se("NOT_INITIALIZED",this.name);throw new Error(e)}}}var YTe=Object.defineProperty,QTe=(t,e,n)=>e in t?YTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wr=(t,e,n)=>QTe(t,typeof e!="symbol"?e+"":e,n);class ZTe{constructor(e,n,r){this.core=e,this.logger=n,Wr(this,"name",GNe),Wr(this,"keychain"),Wr(this,"randomSessionIdentifier",$T()),Wr(this,"initialized",!1),Wr(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Wr(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Wr(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=p5(s);return $W(i.publicKey)}),Wr(this,"generateKeyPair",()=>{this.isInitialized();const s=jIe();return this.setPrivateKey(s.publicKey,s.privateKey)}),Wr(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=p5(i),a=this.randomSessionIdentifier;return await P0e(a,s,VNe,o)}),Wr(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=FIe(a,i);return this.setSymKey(c,o)}),Wr(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||Qv(s);return await this.keychain.set(o,s),o}),Wr(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Wr(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Wr(this,"encode",async(s,i,o)=>{this.isInitialized();const a=eH(o),c=nl(i);if($M(a))return HIe(c,o==null?void 0:o.encoding);if(DM(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return WIe({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),Wr(this,"decode",async(s,i,o)=>{this.isInitialized();const a=GIe(i,o);if($M(a)){const c=qIe(i,o==null?void 0:o.encoding);return yh(c)}if(DM(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=zIe({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return yh(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Wr(this,"getPayloadType",(s,i=ta)=>{const o=Yw({encoded:s,encoding:i});return Ah(o.type)}),Wr(this,"getPayloadSenderPublicKey",(s,i=ta)=>{const o=Yw({encoded:s,encoding:i});return o.senderPublicKey?di(o.senderPublicKey,Ps):void 0}),this.core=e,this.logger=es(n,this.name),this.keychain=r||new KTe(this.core,this.logger)}get context(){return gi(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(VM)}catch{e=$T(),await this.keychain.set(VM,e)}return qTe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Se("NOT_INITIALIZED",this.name);throw new Error(e)}}}var JTe=Object.defineProperty,XTe=Object.defineProperties,eRe=Object.getOwnPropertyDescriptors,nL=Object.getOwnPropertySymbols,tRe=Object.prototype.hasOwnProperty,nRe=Object.prototype.propertyIsEnumerable,jT=(t,e,n)=>e in t?JTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rRe=(t,e)=>{for(var n in e||(e={}))tRe.call(e,n)&&jT(t,n,e[n]);if(nL)for(var n of nL(e))nRe.call(e,n)&&jT(t,n,e[n]);return t},sRe=(t,e)=>XTe(t,eRe(e)),bi=(t,e,n)=>jT(t,typeof e!="symbol"?e+"":e,n);class iRe extends t1e{constructor(e,n){super(e,n),this.logger=e,this.core=n,bi(this,"messages",new Map),bi(this,"messagesWithoutClientAck",new Map),bi(this,"name",QNe),bi(this,"version",ZNe),bi(this,"initialized",!1),bi(this,"storagePrefix",sc),bi(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),bi(this,"set",async(r,s,i)=>{this.isInitialized();const o=Ma(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===Zv.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,sRe(rRe({},c),{[o]:s}))}return await this.persist(),o}),bi(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),bi(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),bi(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Ma(s);return typeof i[o]<"u"}),bi(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Ma(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),bi(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=es(e,this.name),this.core=n}get context(){return gi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,ST(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,ST(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?AT(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?AT(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Se("NOT_INITIALIZED",this.name);throw new Error(e)}}}var oRe=Object.defineProperty,aRe=Object.defineProperties,cRe=Object.getOwnPropertyDescriptors,rL=Object.getOwnPropertySymbols,lRe=Object.prototype.hasOwnProperty,uRe=Object.prototype.propertyIsEnumerable,FT=(t,e,n)=>e in t?oRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uv=(t,e)=>{for(var n in e||(e={}))lRe.call(e,n)&&FT(t,n,e[n]);if(rL)for(var n of rL(e))uRe.call(e,n)&&FT(t,n,e[n]);return t},ZA=(t,e)=>aRe(t,cRe(e)),Lo=(t,e,n)=>FT(t,typeof e!="symbol"?e+"":e,n);class dRe extends n1e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Lo(this,"events",new Ao.EventEmitter),Lo(this,"name",JNe),Lo(this,"queue",new Map),Lo(this,"publishTimeout",_e.toMiliseconds(_e.ONE_MINUTE)),Lo(this,"initialPublishTimeout",_e.toMiliseconds(_e.ONE_SECOND*15)),Lo(this,"needsTransportRestart",!1),Lo(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||KM,c=N_(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||Pd().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const w=({id:b})=>{h.opts.id===b&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(kr.publish,w),g(h))};this.relayer.events.on(kr.publish,w);const y=ru(new Promise((b,E)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(b).catch(_=>{this.logger.warn(_,_==null?void 0:_.message),E(_)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await y,this.events.removeListener(kr.publish,w)}catch(b){this.queue.set(d,ZA(uv({},h),{attempt:1})),this.logger.warn(b,b==null?void 0:b.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await ru(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),Lo(this,"on",(r,s)=>{this.events.on(r,s)}),Lo(this,"once",(r,s)=>{this.events.once(r,s)}),Lo(this,"off",(r,s)=>{this.events.off(r,s)}),Lo(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=es(n,this.name),this.registerEventListeners()}get context(){return gi(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=KM,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:Wm(N_().protocol).publish,params:uv({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};Kr((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),Kr((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(kr.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,ZA(uv({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(ZA(uv({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Wh.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(kr.connection_stalled);return}this.checkQueue()}),this.relayer.on(kr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var hRe=Object.defineProperty,fRe=(t,e,n)=>e in t?hRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mf=(t,e,n)=>fRe(t,typeof e!="symbol"?e+"":e,n);class pRe{constructor(){mf(this,"map",new Map),mf(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),mf(this,"get",e=>this.map.get(e)||[]),mf(this,"exists",(e,n)=>this.get(e).includes(n)),mf(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),mf(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var gRe=Object.defineProperty,mRe=Object.defineProperties,yRe=Object.getOwnPropertyDescriptors,sL=Object.getOwnPropertySymbols,wRe=Object.prototype.hasOwnProperty,bRe=Object.prototype.propertyIsEnumerable,WT=(t,e,n)=>e in t?gRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Am=(t,e)=>{for(var n in e||(e={}))wRe.call(e,n)&&WT(t,n,e[n]);if(sL)for(var n of sL(e))bRe.call(e,n)&&WT(t,n,e[n]);return t},JA=(t,e)=>mRe(t,yRe(e)),vn=(t,e,n)=>WT(t,typeof e!="symbol"?e+"":e,n);class vRe extends i1e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,vn(this,"subscriptions",new Map),vn(this,"topicMap",new pRe),vn(this,"events",new Ao.EventEmitter),vn(this,"name",ixe),vn(this,"version",oxe),vn(this,"pending",new Map),vn(this,"cached",[]),vn(this,"initialized",!1),vn(this,"storagePrefix",sc),vn(this,"subscribeTimeout",_e.toMiliseconds(_e.ONE_MINUTE)),vn(this,"initialSubscribeTimeout",_e.toMiliseconds(_e.ONE_SECOND*15)),vn(this,"clientId"),vn(this,"batchSubscribeTopicsLimit",500),vn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),vn(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=N_(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),vn(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),vn(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),vn(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),vn(this,"on",(r,s)=>{this.events.on(r,s)}),vn(this,"once",(r,s)=>{this.events.once(r,s)}),vn(this,"off",(r,s)=>{this.events.off(r,s)}),vn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),vn(this,"start",async()=>{await this.onConnect()}),vn(this,"stop",async()=>{await this.onDisconnect()}),vn(this,"restart",async()=>{await this.restore(),await this.onRestart()}),vn(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),vn(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Wh.pulse,async()=>{await this.checkPending()}),this.events.on(Ai.created,async r=>{const s=Ai.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Ai.deleted,async r=>{const s=Ai.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=es(n,this.name),this.clientId=""}get context(){return gi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=N_(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=gn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===kn.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:Wm(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===kn.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},_e.toMiliseconds(_e.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(Ai.created,d),u(h.id))};this.events.on(Ai.created,d);try{const h=await ru(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Ai.created,d),u(h)}catch{}}),l=await ru(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(kr.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:Wm(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await ru(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(kr.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:Wm(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await ru(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(kr.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:Wm(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,JA(Am({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,Am({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,Am({},n)),this.topicMap.set(n.topic,e),this.events.emit(Ai.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=Se("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Ai.deleted,JA(Am({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Ai.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Ai.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=Se("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>JA(Am({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await NSe(_e.toMiliseconds(_e.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Se("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Ma(e+await this.getClientId())}}var ERe=Object.defineProperty,iL=Object.getOwnPropertySymbols,_Re=Object.prototype.hasOwnProperty,CRe=Object.prototype.propertyIsEnumerable,zT=(t,e,n)=>e in t?ERe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oL=(t,e)=>{for(var n in e||(e={}))_Re.call(e,n)&&zT(t,n,e[n]);if(iL)for(var n of iL(e))CRe.call(e,n)&&zT(t,n,e[n]);return t},Gt=(t,e,n)=>zT(t,typeof e!="symbol"?e+"":e,n);class SRe extends r1e{constructor(e){super(e),Gt(this,"protocol","wc"),Gt(this,"version",2),Gt(this,"core"),Gt(this,"logger"),Gt(this,"events",new Ao.EventEmitter),Gt(this,"provider"),Gt(this,"messages"),Gt(this,"subscriber"),Gt(this,"publisher"),Gt(this,"name",exe),Gt(this,"transportExplicitlyClosed",!1),Gt(this,"initialized",!1),Gt(this,"connectionAttemptInProgress",!1),Gt(this,"relayUrl"),Gt(this,"projectId"),Gt(this,"packageName"),Gt(this,"bundleId"),Gt(this,"hasExperiencedNetworkDisruption",!1),Gt(this,"pingTimeout"),Gt(this,"heartBeatTimeout",_e.toMiliseconds(_e.THIRTY_SECONDS+_e.FIVE_SECONDS)),Gt(this,"reconnectTimeout"),Gt(this,"connectPromise"),Gt(this,"reconnectInProgress",!1),Gt(this,"requestsInFlight",[]),Gt(this,"connectTimeout",_e.toMiliseconds(_e.ONE_SECOND*15)),Gt(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||Pd().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),Gt(this,"resetPingTimeout",()=>{A_()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),Gt(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),Gt(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(kr.connect)}),Gt(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),Gt(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(kr.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Gt(this,"registerProviderListeners",()=>{this.provider.on(Zi.payload,this.onPayloadHandler),this.provider.on(Zi.connect,this.onConnectHandler),this.provider.on(Zi.disconnect,this.onDisconnectHandler),this.provider.on(Zi.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?es(e.logger,this.name):U0(Hh({level:e.logger||XNe})),this.messages=new iRe(this.logger,e.core),this.subscriber=new vRe(this,this.logger),this.publisher=new dRe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||oH,this.projectId=e.projectId,dSe()?this.packageName=sM():hSe()&&(this.bundleId=sM()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return gi(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:kn.relay},Zv.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Ai.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Ai.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,oL({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await ru(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await GM())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=pr(_e.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(kr.message,e),await this.recordMessageEvent(e,Zv.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Zi.disconnect,i),await ru(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Zi.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Zi.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Zi.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,_e.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(A_())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Io(new zve(ySe({sdkVersion:LT,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),tk(e)){if(!e.method.endsWith(txe))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:kn.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(oL({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else i1(e)&&this.events.emit(kr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Zv.inbound),this.events.emit(kr.message,e))}async acknowledgePayload(e){const n=r1(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Zi.payload,this.onPayloadHandler),this.provider.off(Zi.connect,this.onConnectHandler),this.provider.off(Zi.disconnect,this.onDisconnectHandler),this.provider.off(Zi.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await GM();BNe(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Wh.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&WNe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(kr.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},_e.toMiliseconds(nxe)))))}isInitialized(){if(!this.initialized){const{message:e}=Se("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function ARe(){}function aL(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function cL(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function lL(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const IRe="[object RegExp]",NRe="[object String]",xRe="[object Number]",TRe="[object Boolean]",uL="[object Arguments]",RRe="[object Symbol]",PRe="[object Date]",ORe="[object Map]",kRe="[object Set]",DRe="[object Array]",$Re="[object Function]",MRe="[object ArrayBuffer]",XA="[object Object]",LRe="[object Error]",URe="[object DataView]",BRe="[object Uint8Array]",jRe="[object Uint8ClampedArray]",FRe="[object Uint16Array]",WRe="[object Uint32Array]",zRe="[object BigUint64Array]",HRe="[object Int8Array]",qRe="[object Int16Array]",GRe="[object Int32Array]",VRe="[object BigInt64Array]",KRe="[object Float32Array]",YRe="[object Float64Array]";function QRe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function ZRe(t,e,n){return zm(t,e,void 0,void 0,void 0,void 0,n)}function zm(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Cy(t,e,i,o)}return Cy(t,e,i,o)}function Cy(t,e,n,r){if(Object.is(t,e))return!0;let s=lL(t),i=lL(e);if(s===uL&&(s=XA),i===uL&&(i=XA),s!==i)return!1;switch(s){case NRe:return t.toString()===e.toString();case xRe:{const c=t.valueOf(),l=e.valueOf();return QRe(c,l)}case TRe:case PRe:case RRe:return Object.is(t.valueOf(),e.valueOf());case IRe:return t.source===e.source&&t.flags===e.flags;case $Re:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case ORe:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!zm(l,e.get(c),c,t,e,n,r))return!1;return!0}case kRe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>zm(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case DRe:case BRe:case jRe:case FRe:case WRe:case zRe:case HRe:case qRe:case GRe:case VRe:case KRe:case YRe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!zm(t[c],e[c],c,t,e,n,r))return!1;return!0}case MRe:return t.byteLength!==e.byteLength?!1:Cy(new Uint8Array(t),new Uint8Array(e),n,r);case URe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Cy(new Uint8Array(t),new Uint8Array(e),n,r);case LRe:return t.name===e.name&&t.message===e.message;case XA:{if(!(Cy(t.constructor,e.constructor,n,r)||aL(t)&&aL(e)))return!1;const c=[...Object.keys(t),...cL(t)],l=[...Object.keys(e),...cL(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!zm(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function JRe(t,e){return ZRe(t,e,ARe)}var XRe=Object.defineProperty,dL=Object.getOwnPropertySymbols,ePe=Object.prototype.hasOwnProperty,tPe=Object.prototype.propertyIsEnumerable,HT=(t,e,n)=>e in t?XRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hL=(t,e)=>{for(var n in e||(e={}))ePe.call(e,n)&&HT(t,n,e[n]);if(dL)for(var n of dL(e))tPe.call(e,n)&&HT(t,n,e[n]);return t},Ws=(t,e,n)=>HT(t,typeof e!="symbol"?e+"":e,n);class Gh extends s1e{constructor(e,n,r,s=sc,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Ws(this,"map",new Map),Ws(this,"version",rxe),Ws(this,"cached",[]),Ws(this,"initialized",!1),Ws(this,"getKey"),Ws(this,"storagePrefix",sc),Ws(this,"recentlyDeleted",[]),Ws(this,"recentlyDeletedLimit",200),Ws(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Kr(o)?this.map.set(this.getKey(o),o):mNe(o)?this.map.set(o.id,o):yNe(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Ws(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Ws(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Ws(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>JRe(a[c],o[c]))):this.values)),Ws(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=hL(hL({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Ws(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=es(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return gi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=Se("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=Se("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=Se("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Se("NOT_INITIALIZED",this.name);throw new Error(e)}}}var nPe=Object.defineProperty,rPe=(t,e,n)=>e in t?nPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Dt=(t,e,n)=>rPe(t,typeof e!="symbol"?e+"":e,n);class sPe{constructor(e,n){this.core=e,this.logger=n,Dt(this,"name",axe),Dt(this,"version",cxe),Dt(this,"events",new zO),Dt(this,"pairings"),Dt(this,"initialized",!1),Dt(this,"storagePrefix",sc),Dt(this,"ignoredPayloadTypes",[qc]),Dt(this,"registeredMethods",[]),Dt(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Dt(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Dt(this,"create",async r=>{this.isInitialized();const s=$T(),i=await this.core.crypto.setSymKey(s),o=pr(_e.FIVE_MINUTES),a={protocol:iH},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=LM({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(wd.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),Dt(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[Ia.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=MM(r.uri);s.props.properties.topic=i,s.addTrace(Ia.pairing_uri_validation_success),s.addTrace(Ia.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(Ia.existing_pairing),u.active)throw s.setError(Ic.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(Ia.pairing_not_expired)}const d=c||pr(_e.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(Ia.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(wd.create,h),s.addTrace(Ia.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(Ia.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Ic.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(Ic.subscribe_pairing_topic_failure),f}return s.addTrace(Ia.subscribe_pairing_topic_success),h}),Dt(this,"activate",async({topic:r})=>{this.isInitialized();const s=pr(_e.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Dt(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=dd();this.events.once(rn("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),Dt(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Dt(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Dt(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Dt(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",gn("USER_DISCONNECTED")),await this.deletePairing(s))}),Dt(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return LM({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),Dt(this,"sendRequest",async(r,s,i)=>{const o=nu(s,i),a=await this.core.crypto.encode(r,o),c=Cm[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),Dt(this,"sendResult",async(r,s,i)=>{const o=r1(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Cm[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Dt(this,"sendError",async(r,s,i)=>{const o=s1(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Cm[c]?Cm[c].res:Cm.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Dt(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,gn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Dt(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>$l(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Dt(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Dt(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Dt(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(wd.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Dt(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{Ta(s)?this.events.emit(rn("pairing_ping",i),{}):oo(s)&&this.events.emit(rn("pairing_ping",i),{error:s.error})},500)}),Dt(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(wd.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Dt(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=gn("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),Dt(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(gn("WC_METHOD_UNSUPPORTED",r))}),Dt(this,"isValidPair",(r,s)=>{var i;if(!Ks(r)){const{message:a}=Se("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(Ic.malformed_pairing_uri),new Error(a)}if(!gNe(r.uri)){const{message:a}=Se("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(Ic.malformed_pairing_uri),new Error(a)}const o=MM(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=Se("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Ic.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=Se("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Ic.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&_e.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(Ic.pairing_expired);const{message:a}=Se("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Dt(this,"isValidPing",async r=>{if(!Ks(r)){const{message:i}=Se("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Dt(this,"isValidDisconnect",async r=>{if(!Ks(r)){const{message:i}=Se("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Dt(this,"isValidPairingTopic",async r=>{if(!cr(r,!1)){const{message:s}=Se("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=Se("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if($l(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=Se("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=es(n,this.name),this.pairings=new Gh(this.core,this.logger,this.name,this.storagePrefix)}get context(){return gi(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Se("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(kr.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==kn.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);tk(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):i1(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(ro.expired,async e=>{const{topic:n}=Ez(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(wd.expire,{topic:n}))})}}var iPe=Object.defineProperty,oPe=(t,e,n)=>e in t?iPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zr=(t,e,n)=>oPe(t,typeof e!="symbol"?e+"":e,n);class aPe extends e1e{constructor(e,n){super(e,n),this.core=e,this.logger=n,zr(this,"records",new Map),zr(this,"events",new Ao.EventEmitter),zr(this,"name",lxe),zr(this,"version",uxe),zr(this,"cached",[]),zr(this,"initialized",!1),zr(this,"storagePrefix",sc),zr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),zr(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:pr(_e.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit($o.created,o)}),zr(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=oo(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit($o.updated,s))}),zr(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),zr(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit($o.deleted,i)}}),this.persist()}),zr(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),zr(this,"on",(r,s)=>{this.events.on(r,s)}),zr(this,"once",(r,s)=>{this.events.once(r,s)}),zr(this,"off",(r,s)=>{this.events.off(r,s)}),zr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=es(n,this.name)}get context(){return gi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:nu(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=Se("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit($o.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=Se("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on($o.created,e=>{const n=$o.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on($o.updated,e=>{const n=$o.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on($o.deleted,e=>{const n=$o.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(Wh.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{_e.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit($o.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Se("NOT_INITIALIZED",this.name);throw new Error(e)}}}var cPe=Object.defineProperty,lPe=(t,e,n)=>e in t?cPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cs=(t,e,n)=>lPe(t,typeof e!="symbol"?e+"":e,n);class uPe extends o1e{constructor(e,n){super(e,n),this.core=e,this.logger=n,cs(this,"expirations",new Map),cs(this,"events",new Ao.EventEmitter),cs(this,"name",dxe),cs(this,"version",hxe),cs(this,"cached",[]),cs(this,"initialized",!1),cs(this,"storagePrefix",sc),cs(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),cs(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),cs(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(ro.created,{target:i,expiration:o})}),cs(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),cs(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(ro.deleted,{target:s,expiration:i})}}),cs(this,"on",(r,s)=>{this.events.on(r,s)}),cs(this,"once",(r,s)=>{this.events.once(r,s)}),cs(this,"off",(r,s)=>{this.events.off(r,s)}),cs(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=es(n,this.name)}get context(){return gi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return wSe(e);if(typeof e=="number")return bSe(e);const{message:n}=Se("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(ro.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=Se("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=Se("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;_e.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(ro.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(Wh.pulse,()=>this.checkExpirations()),this.events.on(ro.created,e=>{const n=ro.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(ro.expired,e=>{const n=ro.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(ro.deleted,e=>{const n=ro.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Se("NOT_INITIALIZED",this.name);throw new Error(e)}}}var dPe=Object.defineProperty,hPe=(t,e,n)=>e in t?dPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ar=(t,e,n)=>hPe(t,typeof e!="symbol"?e+"":e,n);class fPe extends a1e{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,ar(this,"name",fxe),ar(this,"abortController"),ar(this,"isDevEnv"),ar(this,"verifyUrlV3",gxe),ar(this,"storagePrefix",sc),ar(this,"version",sH),ar(this,"publicKey"),ar(this,"fetchPromise"),ar(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&_e.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),ar(this,"register",async s=>{if(!Lg()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=wh(),u=this.startAbortTimer(_e.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",w),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const w=y=>{if(y.data&&typeof y.data=="string")try{const b=JSON.parse(y.data);if(b.type==="verify_attestation"){if(hT(b.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",w),h(b.attestation===null?"":b.attestation)}}catch(b){this.logger.warn(b)}};l.body.appendChild(g),window.addEventListener("message",w,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),ar(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(hT(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),ar(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(_e.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),ar(this,"getVerifyUrl",s=>{let i=s||_y;return mxe.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${_y}`),i=_y),i}),ar(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(_e.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),ar(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),ar(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),ar(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),ar(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),ar(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),ar(this,"validateAttestation",(s,i)=>{const o=KIe(s,i.publicKey),a={hasExpired:_e.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=es(n,this.name),this.abortController=new AbortController,this.isDevEnv=rk(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return gi(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),_e.toMiliseconds(e))}}var pPe=Object.defineProperty,gPe=(t,e,n)=>e in t?pPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fL=(t,e,n)=>gPe(t,typeof e!="symbol"?e+"":e,n);class mPe extends c1e{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,fL(this,"context",yxe),fL(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${wxe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=es(n,this.context)}}var yPe=Object.defineProperty,pL=Object.getOwnPropertySymbols,wPe=Object.prototype.hasOwnProperty,bPe=Object.prototype.propertyIsEnumerable,qT=(t,e,n)=>e in t?yPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Im=(t,e)=>{for(var n in e||(e={}))wPe.call(e,n)&&qT(t,n,e[n]);if(pL)for(var n of pL(e))bPe.call(e,n)&&qT(t,n,e[n]);return t},Ar=(t,e,n)=>qT(t,typeof e!="symbol"?e+"":e,n);class vPe extends l1e{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,Ar(this,"context",vxe),Ar(this,"storagePrefix",sc),Ar(this,"storageVersion",bxe),Ar(this,"events",new Map),Ar(this,"shouldPersist",!1),Ar(this,"init",async()=>{if(!rk())try{const s={eventId:oM(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:bz(this.core.relayer.protocol,this.core.relayer.version,LT)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Ar(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=oM(),u=this.core.projectId||"",d=Date.now(),h=Im({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),Ar(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Im(Im({},a),this.setMethods(a.eventId))}),Ar(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Ar(this,"setEventListeners",()=>{this.core.heartbeat.on(Wh.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{_e.fromMiliseconds(Date.now())-_e.fromMiliseconds(s.timestamp)>Exe&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Ar(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Ar(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Ar(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Ar(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Ar(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,Im(Im({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Ar(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Ar(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${_xe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${LT}${i}`,{method:"POST",body:JSON.stringify(s)})}),Ar(this,"getAppDomain",()=>wz().url),this.logger=es(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var EPe=Object.defineProperty,gL=Object.getOwnPropertySymbols,_Pe=Object.prototype.hasOwnProperty,CPe=Object.prototype.propertyIsEnumerable,GT=(t,e,n)=>e in t?EPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mL=(t,e)=>{for(var n in e||(e={}))_Pe.call(e,n)&&GT(t,n,e[n]);if(gL)for(var n of gL(e))CPe.call(e,n)&&GT(t,n,e[n]);return t},Sn=(t,e,n)=>GT(t,typeof e!="symbol"?e+"":e,n);let SPe=class wH extends QCe{constructor(e){var n;super(e),Sn(this,"protocol",rH),Sn(this,"version",sH),Sn(this,"name",MT),Sn(this,"relayUrl"),Sn(this,"projectId"),Sn(this,"customStoragePrefix"),Sn(this,"events",new Ao.EventEmitter),Sn(this,"logger"),Sn(this,"heartbeat"),Sn(this,"relayer"),Sn(this,"crypto"),Sn(this,"storage"),Sn(this,"history"),Sn(this,"expirer"),Sn(this,"pairing"),Sn(this,"verify"),Sn(this,"echoClient"),Sn(this,"linkModeSupportedApps"),Sn(this,"eventClient"),Sn(this,"initialized",!1),Sn(this,"logChunkController"),Sn(this,"on",(a,c)=>this.events.on(a,c)),Sn(this,"once",(a,c)=>this.events.once(a,c)),Sn(this,"off",(a,c)=>this.events.off(a,c)),Sn(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Sn(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:kn.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||oH,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=Hh({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:HNe.logger,name:MT}),{logger:i,chunkLoggerController:o}=JC({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=es(i,this.name),this.heartbeat=new nme,this.crypto=new ZTe(this,this.logger,e==null?void 0:e.keychain),this.history=new aPe(this,this.logger),this.expirer=new uPe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new VCe(mL(mL({},qNe),e==null?void 0:e.storageOptions)),this.relayer=new SRe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new sPe(this,this.logger),this.verify=new fPe(this,this.logger,this.storage),this.echoClient=new mPe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new vPe(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new wH(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(sxe,r),n}get context(){return gi(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(YM,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(YM)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&zNe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const APe=SPe,bH="wc",vH=2,EH="client",dk=`${bH}@${vH}:${EH}:`,eI={name:EH,logger:"error"},yL="WALLETCONNECT_DEEPLINK_CHOICE",IPe="proposal",wL="Proposal expired",NPe="session",yf=_e.SEVEN_DAYS,xPe="engine",Ir={wc_sessionPropose:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1104},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1106},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1112},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1114},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:_e.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:_e.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1119}}},tI={min:_e.FIVE_MINUTES,max:_e.SEVEN_DAYS},_a={idle:"IDLE",active:"ACTIVE"},bL={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},TPe="request",RPe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],PPe="wc",OPe="auth",kPe="authKeys",DPe="pairingTopics",$Pe="requests",m1=`${PPe}@${1.5}:${OPe}:`,Jv=`${m1}:PUB_KEY`;var MPe=Object.defineProperty,LPe=Object.defineProperties,UPe=Object.getOwnPropertyDescriptors,vL=Object.getOwnPropertySymbols,BPe=Object.prototype.hasOwnProperty,jPe=Object.prototype.propertyIsEnumerable,VT=(t,e,n)=>e in t?MPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,En=(t,e)=>{for(var n in e||(e={}))BPe.call(e,n)&&VT(t,n,e[n]);if(vL)for(var n of vL(e))jPe.call(e,n)&&VT(t,n,e[n]);return t},bs=(t,e)=>LPe(t,UPe(e)),de=(t,e,n)=>VT(t,typeof e!="symbol"?e+"":e,n);class FPe extends f1e{constructor(e){super(e),de(this,"name",xPe),de(this,"events",new zO),de(this,"initialized",!1),de(this,"requestQueue",{state:_a.idle,queue:[]}),de(this,"sessionRequestQueue",{state:_a.idle,queue:[]}),de(this,"requestQueueDelay",_e.ONE_SECOND),de(this,"expectedPairingMethodMap",new Map),de(this,"recentlyDeletedMap",new Map),de(this,"recentlyDeletedLimit",200),de(this,"relayMessageCache",[]),de(this,"pendingSessions",new Map),de(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Ir)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},_e.toMiliseconds(this.requestQueueDelay)))}),de(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=bs(En({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=uNe(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const I=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=I.active}}catch(I){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),I}if(!u||!h){const{topic:I,uri:A}=await this.client.core.pairing.create();u=I,d=A}if(!u){const{message:I}=Se("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(I)}const f=await this.client.core.crypto.generateKeyPair(),p=Ir.wc_sessionPropose.req.ttl||_e.FIVE_MINUTES,g=pr(p),w=bs(En(En({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:iH}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:xa()}),y=rn("session_connect",w.id),{reject:b,resolve:E,done:_}=dd(p,wL),C=({id:I})=>{I===w.id&&(this.client.events.off("proposal_expire",C),this.pendingSessions.delete(w.id),this.events.emit(y,{error:{message:wL,code:0}}))};return this.client.events.on("proposal_expire",C),this.events.once(y,({error:I,session:A})=>{this.client.events.off("proposal_expire",C),I?b(I):A&&E(A)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:w,throwOnFailedPublish:!0,clientRpcId:w.id}),await this.setProposal(w.id,w),{uri:d,approval:_}}),de(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),de(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[Mo.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(S){throw o.setError(td.no_internet_connection),S}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(S){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(td.proposal_not_found),S}try{await this.isValidApprove(n)}catch(S){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(td.session_approve_namespace_validation_failure),S}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:w,optionalNamespaces:y}=f;let b=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});b||(b=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Mo.session_approve_started,properties:{topic:p,trace:[Mo.session_approve_started,Mo.session_namespaces_validation_success]}}));const E=await this.client.core.crypto.generateKeyPair(),_=g.publicKey,C=await this.client.core.crypto.generateSharedKey(E,_),I=En(En(En({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:E,metadata:this.client.metadata},expiry:pr(yf)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),A=kn.relay;b.addTrace(Mo.subscribing_session_topic);try{await this.client.core.relayer.subscribe(C,{transportType:A})}catch(S){throw b.setError(td.subscribe_session_topic_failure),S}b.addTrace(Mo.subscribe_session_topic_success);const x=bs(En({},I),{topic:C,requiredNamespaces:w,optionalNamespaces:y,pairingTopic:p,acknowledged:!1,self:I.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:E,transportType:kn.relay});await this.client.session.set(C,x),b.addTrace(Mo.store_session);try{b.addTrace(Mo.publishing_session_settle),await this.sendRequest({topic:C,method:"wc_sessionSettle",params:I,throwOnFailedPublish:!0}).catch(S=>{throw b==null||b.setError(td.session_settle_publish_failure),S}),b.addTrace(Mo.session_settle_publish_success),b.addTrace(Mo.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:E},throwOnFailedPublish:!0}).catch(S=>{throw b==null||b.setError(td.session_approve_publish_failure),S}),b.addTrace(Mo.session_approve_publish_success)}catch(S){throw this.client.logger.error(S),this.client.session.delete(C,gn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(C),S}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,gn("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(C,pr(yf)),{topic:C,acknowledged:()=>Promise.resolve(this.client.session.get(C))}}),de(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&(await this.sendError({id:r,topic:i,error:s,rpcOpts:Ir.wc_sessionPropose.reject}),await this.client.proposal.delete(r,gn("USER_DISCONNECTED")))}),de(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=dd(),c=xa(),l=Pd().toString(),u=this.client.session.get(r).namespaces;return this.events.once(rn("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),de(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=xa(),{done:i,resolve:o,reject:a}=dd();return this.events.once(rn("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,pr(yf)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),de(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:s,topic:i,expiry:o=Ir.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===kn.relay&&await this.confirmOnlineStateOrThrow();const c=xa(),l=Pd().toString(),{done:u,resolve:d,reject:h}=dd(o,"Request expired. Please try again.");this.events.once(rn("session_request",c),({error:y,result:b})=>{y?h(y):d(b)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:bs(En({},s),{expiryTimestamp:pr(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:bs(En({},s),{expiryTimestamp:pr(o)}),chainId:r},w=this.shouldSetTVF(f,g);return await Promise.all([new Promise(async y=>{await this.sendRequest(En({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0},w&&{tvf:this.getTVFParams(c,g)})).catch(b=>h(b)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),y()}),new Promise(async y=>{var b;if(!((b=a.sessionConfig)!=null&&b.disableDeepLink)){const E=await CSe(this.client.core.storage,yL);await vSe({id:c,topic:i,wcDeepLink:E})}y()}),u()]).then(y=>y[2])}),de(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===kn.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Ta(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):oo(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),de(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=xa(),i=Pd().toString(),{done:o,resolve:a,reject:c}=dd();this.events.once(rn("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),de(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=Pd().toString(),a=xa();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),de(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:gn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=Se("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),de(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>fNe(r,n)))),de(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),de(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?kn.link_mode:kn.relay;o===kn.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:w}=n,y=[...n.resources||[]],{topic:b,uri:E}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:E}});const _=await this.client.core.crypto.generateKeyPair(),C=Qv(_);if(await Promise.all([this.client.auth.authKeys.set(Jv,{responseTopic:C,publicKey:_}),this.client.auth.pairingTopics.set(C,{topic:C,pairingTopic:b})]),await this.client.core.relayer.subscribe(C,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${b}`),g.length>0){const{namespace:D}=gp(a[0]);let B=gAe(D,"request",g);Yv(y)&&(B=yAe(B,y.pop())),y.push(B)}const I=w&&w>Ir.wc_sessionAuthenticate.req.ttl?w:Ir.wc_sessionAuthenticate.req.ttl,A={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:y},requester:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:pr(I)},x={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},S={requiredNamespaces:{},optionalNamespaces:x,relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:pr(Ir.wc_sessionPropose.req.ttl),id:xa()},{done:k,resolve:O,reject:U}=dd(I,"Request expired"),G=xa(),F=rn("session_connect",S.id),T=rn("session_request",G),N=async({error:D,session:B})=>{this.events.off(T,$),D?U(D):B&&O({session:B})},$=async D=>{var B,H,J;if(await this.deletePendingAuthRequest(G,{message:"fulfilled",code:0}),D.error){const ue=gn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return D.error.code===ue.code?void 0:(this.events.off(F,N),U(D.error.message))}await this.deleteProposal(S.id),this.events.off(F,N);const{cacaos:ee,responder:ne}=D.result,ie=[],we=[];for(const ue of ee){await pM({cacao:ue,projectId:this.client.core.projectId})||(this.client.logger.error(ue,"Signature verification failed"),U(gn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:ce}=ue,fe=Yv(ce.resources),ge=[IT(ce.iss)],Ae=I_(ce.iss);if(fe){const pe=gM(fe),ye=mM(fe);ie.push(...pe),ge.push(...ye)}for(const pe of ge)we.push(`${pe}:${Ae}`)}const Z=await this.client.core.crypto.generateSharedKey(_,ne.publicKey);let se;ie.length>0&&(se={topic:Z,acknowledged:!0,self:{publicKey:_,metadata:this.client.metadata},peer:ne,controller:ne.publicKey,expiry:pr(yf),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:FM([...new Set(ie)],[...new Set(we)]),transportType:o},await this.client.core.relayer.subscribe(Z,{transportType:o}),await this.client.session.set(Z,se),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:ne.metadata}),se=this.client.session.get(Z)),(B=this.client.metadata.redirect)!=null&&B.linkMode&&(H=ne.metadata.redirect)!=null&&H.linkMode&&(J=ne.metadata.redirect)!=null&&J.universal&&r&&(this.client.core.addLinkModeSupportedApp(ne.metadata.redirect.universal),this.client.session.update(Z,{transportType:kn.link_mode})),O({auths:ee,session:se})};this.events.once(F,N),this.events.once(T,$);let R;try{if(i){const D=nu("wc_sessionAuthenticate",A,G);this.client.core.history.set(b,D);const B=await this.client.core.crypto.encode("",D,{type:K0,encoding:jl});R=lv(r,b,B)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:A,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:G}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:S,expiry:Ir.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:S.id})])}catch(D){throw this.events.off(F,N),this.events.off(T,$),D}return await this.setProposal(S.id,S),await this.setAuthRequest(G,{request:bs(En({},A),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:R??E,response:k}}),de(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[nd.authenticated_session_approve_started]}});try{this.isInitialized()}catch(w){throw i.setError(Sm.no_internet_connection),w}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(Sm.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||kn.relay;a===kn.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=Qv(c),d={type:qc,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const w of s){if(!await pM({cacao:w,projectId:this.client.core.projectId})){i.setError(Sm.invalid_cacao);const C=gn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:C,encodeOpts:d}),new Error(C.message)}i.addTrace(nd.cacaos_verified);const{p:y}=w,b=Yv(y.resources),E=[IT(y.iss)],_=I_(y.iss);if(b){const C=gM(b),I=mM(b);h.push(...C),E.push(...I)}for(const C of E)f.push(`${C}:${_}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(nd.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:pr(yf),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:FM([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(nd.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(w){throw i.setError(Sm.subscribe_authenticated_session_topic_failure),w}i.addTrace(nd.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(nd.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(nd.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(w){throw i.setError(Sm.authenticated_session_approve_publish_failure),w}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),de(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===kn.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=Qv(o),l={type:qc,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:Ir.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,gn("USER_DISCONNECTED"))}),de(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return Rz(r,s)}),de(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),de(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),de(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,gn("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(yL).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,gn("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=_a.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),de(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(td.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,gn("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),de(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=_a.idle,this.client.events.emit("session_request_expire",{id:n}))}),de(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),de(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),de(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,pr(Ir.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),de(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=kn.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),de(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||pr(Ir.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),de(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=nu(s,i,c);let f;const p=!!u;try{const y=p?jl:ta;f=await this.client.core.crypto.encode(r,h,{encoding:y})}catch(y){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),y}let g;if(RPe.includes(s)){const y=Ma(JSON.stringify(h)),b=Ma(f);g=await this.client.core.verify.register({id:b,decryptedId:y})}const w=Ir[s].req;if(w.attestation=g,o&&(w.ttl=o),a&&(w.id=a),this.client.core.history.set(r,h),p){const y=lv(u,r,f);await global.Linking.openURL(y,this.client.name)}else{const y=Ir[s].req;o&&(y.ttl=o),a&&(y.id=a),y.tvf=bs(En({},d),{correlationId:h.id}),l?(y.internal=bs(En({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,y)):this.client.core.relayer.publish(r,f,y).catch(b=>this.client.logger.error(b))}return h.id}),de(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=r1(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?jl:ta;u=await this.client.core.crypto.encode(s,l,bs(En({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{this.shouldSetTVF(p.method,p.params)&&(f=this.getTVFParams(r,p.params,i))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=lv(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=Ir[p].res;g.tvf=bs(En({},f),{correlationId:r}),o?(g.internal=bs(En({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(w=>this.client.logger.error(w))}await this.client.core.history.resolve(l)}),de(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=s1(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?jl:ta;u=await this.client.core.crypto.encode(s,l,bs(En({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=lv(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||Ir[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),de(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;$l(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{$l(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),de(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),de(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),de(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===_a.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=_a.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=_a.idle}),de(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),de(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),de(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=Se("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),de(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),de(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Ic.proposal_listener_not_found)),this.isValidConnect(En({},s.params));const u=a.expiryTimestamp||pr(Ir.wc_sessionPropose.req.ttl),d=En({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:Ma(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(Ia.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:Ir.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),de(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(Ta(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(oo(r)){await this.client.proposal.delete(i,gn("USER_DISCONNECTED"));const o=rn("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),de(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(w=>w.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=bs(En(En(En({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:kn.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(rn("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),de(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;Ta(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(rn("session_approve",s),{})):oo(r)&&(await this.client.session.delete(n,gn("USER_DISCONNECTED")),this.events.emit(rn("session_approve",s),{error:r.error}))}),de(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=_m.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:gn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(En({topic:n},s));try{_m.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw _m.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),de(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),de(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=rn("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ta(r)?this.events.emit(rn("session_update",s),{}):oo(r)&&this.events.emit(rn("session_update",s),{error:r.error})}),de(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,pr(yf)),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),de(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=rn("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ta(r)?this.events.emit(rn("session_extend",s),{}):oo(r)&&this.events.emit(rn("session_extend",s),{error:r.error})}),de(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),de(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=rn("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Ta(r)?this.events.emit(rn("session_ping",s),{}):oo(r)&&this.events.emit(rn("session_ping",s),{error:r.error})},500)}),de(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(kr.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:gn("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),de(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(En({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Ma(JSON.stringify(nu("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===kn.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),de(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=rn("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ta(r)?this.events.emit(rn("session_request",s),{result:r.result}):oo(r)&&this.events.emit(rn("session_request",s),{error:r.error})}),de(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=_m.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(En({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),_m.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),de(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Ta(r)?this.events.emit(rn("session_request",s),{result:r.result}):oo(r)&&this.events.emit(rn("session_request",s),{error:r.error})}),de(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:Ma(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===kn.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:qc,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:Ir.wc_sessionAuthenticate.autoReject,appLink:h})}}),de(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),de(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=_a.idle,this.processSessionRequestQueue()},_e.toMiliseconds(this.requestQueueDelay))}),de(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=rn("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(rn("session_request",i.request.id),{error:r})})}),de(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===_a.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=_a.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),de(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),de(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:nu("wc_sessionPropose",bs(En({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),de(this,"isValidConnect",async n=>{if(!Ks(n)){const{message:l}=Se("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Kr(r)||await this.isValidPairingTopic(r),!ANe(c)){const{message:l}=Se("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Kr(s)&&Iu(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!Kr(i)&&Iu(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Kr(o)||this.validateSessionProps(o,"sessionProperties"),!Kr(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),de(this,"validateNamespaces",(n,r)=>{const s=SNe(n,"connect()",r);if(s)throw new Error(s.message)}),de(this,"isValidApprove",async n=>{if(!Ks(n))throw new Error(Se("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=KA(s,"approve()");if(l)throw new Error(l.message);const u=HM(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!cr(i,!0)){const{message:d}=Se("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(Kr(o)||this.validateSessionProps(o,"sessionProperties"),!Kr(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),de(this,"isValidReject",async n=>{if(!Ks(n)){const{message:i}=Se("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!NNe(s)){const{message:i}=Se("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),de(this,"isValidSessionSettleRequest",n=>{if(!Ks(n)){const{message:l}=Se("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!nH(r)){const{message:l}=Se("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=wNe(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=KA(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if($l(o)){const{message:l}=Se("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),de(this,"isValidUpdate",async n=>{if(!Ks(n)){const{message:c}=Se("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=KA(s,"update()");if(o)throw new Error(o.message);const a=HM(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),de(this,"isValidExtend",async n=>{if(!Ks(n)){const{message:s}=Se("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),de(this,"isValidRequest",async n=>{if(!Ks(n)){const{message:c}=Se("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!zM(a,i)){const{message:c}=Se("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!xNe(s)){const{message:c}=Se("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!PNe(a,i,s.method)){const{message:c}=Se("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!$Ne(o,tI)){const{message:c}=Se("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${tI.min} and ${tI.max}`);throw new Error(c)}}),de(this,"isValidRespond",async n=>{var r;if(!Ks(n)){const{message:o}=Se("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!TNe(i)){const{message:o}=Se("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),de(this,"isValidPing",async n=>{if(!Ks(n)){const{message:s}=Se("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),de(this,"isValidEmit",async n=>{if(!Ks(n)){const{message:a}=Se("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!zM(o,i)){const{message:a}=Se("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!RNe(s)){const{message:a}=Se("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!ONe(o,i,s.name)){const{message:a}=Se("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),de(this,"isValidDisconnect",async n=>{if(!Ks(n)){const{message:s}=Se("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),de(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!cr(s,!1))throw new Error("uri is required parameter");if(!cr(i,!1))throw new Error("domain is required parameter");if(!cr(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>gp(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=gp(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),de(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||_y,validation:"UNKNOWN",origin:o.url||""}};try{if(a===kn.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),de(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=Se("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),de(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),de(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),de(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=Se("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),de(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==kn.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),de(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),de(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=iM(n,"topic")||"",s=decodeURIComponent(iM(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:kn.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),de(this,"registerLinkModeListeners",async()=>{var n;if(rk()||Vu()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),de(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:s}=r;return Object.keys(bL).includes(s.method)}),de(this,"getTVFParams",(n,r,s)=>{var i,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,s);return bs(En({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(i=r.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),de(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),de(this,"extractTxHashesFromResult",(n,r)=>{try{const s=bL[n];if(typeof r=="string")return[r];const i=r[s.key];if(Au(i))return n==="solana_signAllTransactions"?i.map(o=>tAe(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Se("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(kr.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Jv)?this.client.auth.authKeys.get(Jv):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===kn.link_mode?jl:ta});tk(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Ma(r)})):i1(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(ro.expired,async e=>{const{topic:n,id:r}=Ez(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,Se("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,Se("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(wd.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(wd.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!cr(e,!1)){const{message:n}=Se("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=Se("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if($l(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=Se("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!cr(e,!1)){const{message:n}=Se("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=Se("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if($l(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=Se("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=Se("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(cr(e,!1)){const{message:n}=Se("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=Se("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!INe(e)){const{message:n}=Se("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=Se("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if($l(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=Se("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class WPe extends Gh{constructor(e,n){super(e,n,IPe,dk),this.core=e,this.logger=n}}let zPe=class extends Gh{constructor(e,n){super(e,n,NPe,dk),this.core=e,this.logger=n}};class HPe extends Gh{constructor(e,n){super(e,n,TPe,dk,r=>r.id),this.core=e,this.logger=n}}class qPe extends Gh{constructor(e,n){super(e,n,kPe,m1,()=>Jv),this.core=e,this.logger=n}}class GPe extends Gh{constructor(e,n){super(e,n,DPe,m1),this.core=e,this.logger=n}}class VPe extends Gh{constructor(e,n){super(e,n,$Pe,m1,r=>r.id),this.core=e,this.logger=n}}var KPe=Object.defineProperty,YPe=(t,e,n)=>e in t?KPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nI=(t,e,n)=>YPe(t,typeof e!="symbol"?e+"":e,n);class QPe{constructor(e,n){this.core=e,this.logger=n,nI(this,"authKeys"),nI(this,"pairingTopics"),nI(this,"requests"),this.authKeys=new qPe(this.core,this.logger),this.pairingTopics=new GPe(this.core,this.logger),this.requests=new VPe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var ZPe=Object.defineProperty,JPe=(t,e,n)=>e in t?ZPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$t=(t,e,n)=>JPe(t,typeof e!="symbol"?e+"":e,n);let XPe=class _H extends h1e{constructor(e){super(e),$t(this,"protocol",bH),$t(this,"version",vH),$t(this,"name",eI.name),$t(this,"metadata"),$t(this,"core"),$t(this,"logger"),$t(this,"events",new Ao.EventEmitter),$t(this,"engine"),$t(this,"session"),$t(this,"proposal"),$t(this,"pendingRequest"),$t(this,"auth"),$t(this,"signConfig"),$t(this,"on",(r,s)=>this.events.on(r,s)),$t(this,"once",(r,s)=>this.events.once(r,s)),$t(this,"off",(r,s)=>this.events.off(r,s)),$t(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),$t(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),$t(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),$t(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),$t(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),$t(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),$t(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),$t(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),$t(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),$t(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),$t(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),$t(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),$t(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),$t(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),$t(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),$t(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),$t(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),$t(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),$t(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||eI.name,this.metadata=pSe(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:U0(Hh({level:(e==null?void 0:e.logger)||eI.logger}));this.core=(e==null?void 0:e.core)||new APe(e),this.logger=es(n,this.name),this.session=new zPe(this.core,this.logger),this.proposal=new WPe(this.core,this.logger),this.pendingRequest=new HPe(this.core,this.logger),this.engine=new FPe(this),this.auth=new QPe(this.core,this.logger)}static async init(e){const n=new _H(e);return await n.initialize(),n}get context(){return gi(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},_e.toMiliseconds(_e.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const EL="error",eOe="wss://relay.walletconnect.org",tOe="wc",nOe="universal_provider",dv=`${tOe}@2:${nOe}:`,CH="https://rpc.walletconnect.org/v1/",Mf="generic",rOe=`${CH}bundler`,No={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function sOe(){}function hk(t){return t==null||typeof t!="object"&&typeof t!="function"}function fk(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function iOe(t){if(hk(t))return t;if(Array.isArray(t)||fk(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function _L(t){return typeof t=="object"&&t!==null}function SH(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function AH(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const oOe="[object RegExp]",IH="[object String]",NH="[object Number]",xH="[object Boolean]",TH="[object Arguments]",aOe="[object Symbol]",cOe="[object Date]",lOe="[object Map]",uOe="[object Set]",dOe="[object Array]",hOe="[object ArrayBuffer]",fOe="[object Object]",pOe="[object DataView]",gOe="[object Uint8Array]",mOe="[object Uint8ClampedArray]",yOe="[object Uint16Array]",wOe="[object Uint32Array]",bOe="[object Int8Array]",vOe="[object Int16Array]",EOe="[object Int32Array]",_Oe="[object Float32Array]",COe="[object Float64Array]";function SOe(t,e){return tp(t,void 0,t,new Map,e)}function tp(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(hk(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=tp(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,tp(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(tp(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(fk(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=tp(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),bd(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),bd(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),bd(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,bd(o,t,n,r,s),o}if(typeof t=="object"&&AOe(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),bd(o,t,n,r,s),o}return t}function bd(t,e,n=t,r,s){const i=[...Object.keys(e),...SH(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=tp(e[a],a,n,r,s))}}function AOe(t){switch(AH(t)){case TH:case dOe:case hOe:case pOe:case xH:case cOe:case _Oe:case COe:case bOe:case vOe:case EOe:case lOe:case NH:case fOe:case oOe:case uOe:case IH:case aOe:case gOe:case mOe:case yOe:case wOe:return!0;default:return!1}}function IOe(t,e){return SOe(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case NH:case IH:case xH:{const o=new t.constructor(t==null?void 0:t.valueOf());return bd(o,t),o}case TH:{const o={};return bd(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function CL(t){return IOe(t)}function SL(t){return t!==null&&typeof t=="object"&&AH(t)==="[object Arguments]"}function NOe(t){return fk(t)}function xOe(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function TOe(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=KT(s,o,r,new Map)}return s}function KT(t,e,n,r){if(hk(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return iOe(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...SH(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(SL(a)&&(a={...a}),SL(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=CL(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||_L(c)&&_L(a)?t[o]=KT(c,a,n,r):c==null&&xOe(a)?t[o]=KT({},a,n,r):c==null&&NOe(a)?t[o]=CL(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function ROe(t,...e){return TOe(t,...e,sOe)}var POe=Object.defineProperty,OOe=Object.defineProperties,kOe=Object.getOwnPropertyDescriptors,AL=Object.getOwnPropertySymbols,DOe=Object.prototype.hasOwnProperty,$Oe=Object.prototype.propertyIsEnumerable,IL=(t,e,n)=>e in t?POe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hv=(t,e)=>{for(var n in e||(e={}))DOe.call(e,n)&&IL(t,n,e[n]);if(AL)for(var n of AL(e))$Oe.call(e,n)&&IL(t,n,e[n]);return t},MOe=(t,e)=>OOe(t,kOe(e));function Bi(t,e,n){var r;const s=gp(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${CH}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function Vh(t){return t.includes(":")?t.split(":")[1]:t}function RH(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function LOe(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function fv(t={},e={}){const n=NL(t),r=NL(e);return ROe(n,r)}function NL(t){var e,n,r,s,i;const o={};if(!Iu(t))return o;for(const[a,c]of Object.entries(t)){const l=p1(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=ep(a);o[f]=MOe(hv(hv({},o[f]),c),{chains:Qa(l,(e=o[f])==null?void 0:e.chains),methods:Qa(u,(n=o[f])==null?void 0:n.methods),events:Qa(d,(r=o[f])==null?void 0:r.events)}),(Iu(h)||Iu(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=hv(hv({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function xL(t){return t.includes(":")?t.split(":")[2]:t}function TL(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=p1(n)?[n]:r.chains?r.chains:RH(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function rI(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const PH={},Qt=t=>PH[t],sI=(t,e)=>{PH[t]=e};var UOe=Object.defineProperty,BOe=(t,e,n)=>e in t?UOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wf=(t,e,n)=>BOe(t,typeof e!="symbol"?e+"":e,n);class jOe{constructor(e){wf(this,"name","polkadot"),wf(this,"client"),wf(this,"httpProviders"),wf(this,"events"),wf(this,"namespace"),wf(this,"chainId"),this.namespace=e.namespace,this.events=Qt("events"),this.client=Qt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(No.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Vh(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Bi(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Io(new fa(r,Qt("disableProviderPing")))}}var FOe=Object.defineProperty,WOe=Object.defineProperties,zOe=Object.getOwnPropertyDescriptors,RL=Object.getOwnPropertySymbols,HOe=Object.prototype.hasOwnProperty,qOe=Object.prototype.propertyIsEnumerable,YT=(t,e,n)=>e in t?FOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,PL=(t,e)=>{for(var n in e||(e={}))HOe.call(e,n)&&YT(t,n,e[n]);if(RL)for(var n of RL(e))qOe.call(e,n)&&YT(t,n,e[n]);return t},OL=(t,e)=>WOe(t,zOe(e)),bf=(t,e,n)=>YT(t,typeof e!="symbol"?e+"":e,n);class GOe{constructor(e){bf(this,"name","eip155"),bf(this,"client"),bf(this,"chainId"),bf(this,"namespace"),bf(this,"httpProviders"),bf(this,"events"),this.namespace=e.namespace,this.events=Qt("events"),this.client=Qt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(No.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||Bi(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Io(new fa(r,Qt("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(Vh(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:OL(PL({},u.sessionProperties||{}),{capabilities:OL(PL({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(nu("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${rOe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var VOe=Object.defineProperty,KOe=(t,e,n)=>e in t?VOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vf=(t,e,n)=>KOe(t,typeof e!="symbol"?e+"":e,n);class YOe{constructor(e){vf(this,"name","solana"),vf(this,"client"),vf(this,"httpProviders"),vf(this,"events"),vf(this,"namespace"),vf(this,"chainId"),this.namespace=e.namespace,this.events=Qt("events"),this.client=Qt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(No.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Vh(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Bi(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Io(new fa(r,Qt("disableProviderPing")))}}var QOe=Object.defineProperty,ZOe=(t,e,n)=>e in t?QOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ef=(t,e,n)=>ZOe(t,typeof e!="symbol"?e+"":e,n);class JOe{constructor(e){Ef(this,"name","cosmos"),Ef(this,"client"),Ef(this,"httpProviders"),Ef(this,"events"),Ef(this,"namespace"),Ef(this,"chainId"),this.namespace=e.namespace,this.events=Qt("events"),this.client=Qt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(No.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Vh(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Bi(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Io(new fa(r,Qt("disableProviderPing")))}}var XOe=Object.defineProperty,eke=(t,e,n)=>e in t?XOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_f=(t,e,n)=>eke(t,typeof e!="symbol"?e+"":e,n);class tke{constructor(e){_f(this,"name","algorand"),_f(this,"client"),_f(this,"httpProviders"),_f(this,"events"),_f(this,"namespace"),_f(this,"chainId"),this.namespace=e.namespace,this.events=Qt("events"),this.client=Qt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||Bi(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(No.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Bi(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Io(new fa(r,Qt("disableProviderPing")))}}var nke=Object.defineProperty,rke=(t,e,n)=>e in t?nke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cf=(t,e,n)=>rke(t,typeof e!="symbol"?e+"":e,n);class ske{constructor(e){Cf(this,"name","cip34"),Cf(this,"client"),Cf(this,"httpProviders"),Cf(this,"events"),Cf(this,"namespace"),Cf(this,"chainId"),this.namespace=e.namespace,this.events=Qt("events"),this.client=Qt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(No.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=Vh(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Io(new fa(r,Qt("disableProviderPing")))}}var ike=Object.defineProperty,oke=(t,e,n)=>e in t?ike(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Sf=(t,e,n)=>oke(t,typeof e!="symbol"?e+"":e,n);class ake{constructor(e){Sf(this,"name","elrond"),Sf(this,"client"),Sf(this,"httpProviders"),Sf(this,"events"),Sf(this,"namespace"),Sf(this,"chainId"),this.namespace=e.namespace,this.events=Qt("events"),this.client=Qt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(No.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Vh(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Bi(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Io(new fa(r,Qt("disableProviderPing")))}}var cke=Object.defineProperty,lke=(t,e,n)=>e in t?cke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Af=(t,e,n)=>lke(t,typeof e!="symbol"?e+"":e,n);class uke{constructor(e){Af(this,"name","multiversx"),Af(this,"client"),Af(this,"httpProviders"),Af(this,"events"),Af(this,"namespace"),Af(this,"chainId"),this.namespace=e.namespace,this.events=Qt("events"),this.client=Qt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(No.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Vh(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Bi(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Io(new fa(r,Qt("disableProviderPing")))}}var dke=Object.defineProperty,hke=(t,e,n)=>e in t?dke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,If=(t,e,n)=>hke(t,typeof e!="symbol"?e+"":e,n);class fke{constructor(e){If(this,"name","near"),If(this,"client"),If(this,"httpProviders"),If(this,"events"),If(this,"namespace"),If(this,"chainId"),this.namespace=e.namespace,this.events=Qt("events"),this.client=Qt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Bi(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(No.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Bi(e,this.namespace);return typeof r>"u"?void 0:new Io(new fa(r,Qt("disableProviderPing")))}}var pke=Object.defineProperty,gke=(t,e,n)=>e in t?pke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Nf=(t,e,n)=>gke(t,typeof e!="symbol"?e+"":e,n);class mke{constructor(e){Nf(this,"name","tezos"),Nf(this,"client"),Nf(this,"httpProviders"),Nf(this,"events"),Nf(this,"namespace"),Nf(this,"chainId"),this.namespace=e.namespace,this.events=Qt("events"),this.client=Qt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Bi(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(No.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Bi(e,this.namespace);return typeof r>"u"?void 0:new Io(new fa(r))}}var yke=Object.defineProperty,wke=(t,e,n)=>e in t?yke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xf=(t,e,n)=>wke(t,typeof e!="symbol"?e+"":e,n);class bke{constructor(e){xf(this,"name",Mf),xf(this,"client"),xf(this,"httpProviders"),xf(this,"events"),xf(this,"namespace"),xf(this,"chainId"),this.namespace=e.namespace,this.events=Qt("events"),this.client=Qt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(No.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=gp(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Bi(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Io(new fa(r,Qt("disableProviderPing")))}}var vke=Object.defineProperty,Eke=Object.defineProperties,_ke=Object.getOwnPropertyDescriptors,kL=Object.getOwnPropertySymbols,Cke=Object.prototype.hasOwnProperty,Ske=Object.prototype.propertyIsEnumerable,QT=(t,e,n)=>e in t?vke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pv=(t,e)=>{for(var n in e||(e={}))Cke.call(e,n)&&QT(t,n,e[n]);if(kL)for(var n of kL(e))Ske.call(e,n)&&QT(t,n,e[n]);return t},iI=(t,e)=>Eke(t,_ke(e)),Ji=(t,e,n)=>QT(t,typeof e!="symbol"?e+"":e,n);let Ake=class OH{constructor(e){Ji(this,"client"),Ji(this,"namespaces"),Ji(this,"optionalNamespaces"),Ji(this,"sessionProperties"),Ji(this,"scopedProperties"),Ji(this,"events",new zO),Ji(this,"rpcProviders",{}),Ji(this,"session"),Ji(this,"providerOpts"),Ji(this,"logger"),Ji(this,"uri"),Ji(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:U0(Hh({level:(e==null?void 0:e.logger)||EL})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new OH(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:pv({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,r1(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:gn("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=TL(this.session.namespaces);this.namespaces=fv(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=TL(s.namespaces);return this.namespaces=fv(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===Mf?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(Au(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await XPe.init({core:this.providerOpts.core,logger:this.providerOpts.logger||EL,relayUrl:this.providerOpts.relayUrl||eOe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>ep(n)))];sI("client",this.client),sI("events",this.events),sI("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=LOe(n,this.session),s=RH(r),i=fv(this.namespaces,this.optionalNamespaces),o=iI(pv({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new GOe({namespace:o});break;case"algorand":this.rpcProviders[n]=new tke({namespace:o});break;case"solana":this.rpcProviders[n]=new YOe({namespace:o});break;case"cosmos":this.rpcProviders[n]=new JOe({namespace:o});break;case"polkadot":this.rpcProviders[n]=new jOe({namespace:o});break;case"cip34":this.rpcProviders[n]=new ske({namespace:o});break;case"elrond":this.rpcProviders[n]=new ake({namespace:o});break;case"multiversx":this.rpcProviders[n]=new uke({namespace:o});break;case"near":this.rpcProviders[n]=new fke({namespace:o});break;case"tezos":this.rpcProviders[n]=new mke({namespace:o});break;default:this.rpcProviders[Mf]?this.rpcProviders[Mf].updateNamespace(o):this.rpcProviders[Mf]=new bke({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&Au(o)&&this.events.emit("accountsChanged",o.map(xL))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=ep(o),l=rI(o)!==rI(a)?`${c}:${rI(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=iI(pv({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",iI(pv({},gn("USER_DISCONNECTED")),{data:e.topic})))}),this.on(No.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Mf]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=fv(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>ep(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=ep(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(xL);if(!Au(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${dv}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${dv}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${dv}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(dv)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};var DL={};const Ike={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof DL<"u"?DL.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},ZT={filterOutDuplicatesByRDNS(t){const e=he.state.enableEIP6963?De.state.connectors:[],n=We.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&Ze.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=De.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=We.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=De.state,{featuredWalletIds:n}=he.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=he.state.features)==null?void 0:c.connectMethodsOrder),r=e||De.state.connectors;if(n)return n;const{injected:s,announced:i}=Xv.getConnectorsByType(r,Je.state.recommended,Je.state.featured),o=s.filter(Xv.showConnector),a=i.filter(Xv.showConnector);return o.length||a.length?["wallet","email","social"]:Ike.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Je.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&Je.state.excludedWallets.some(r=>o1.isLowerCaseMatch(r.name,t.name));return e||n}},Xv={getConnectorsByType(t,e,n){const{customWallets:r}=he.state,s=We.getRecentWallets(),i=ZT.filterOutDuplicateWallets(e),o=ZT.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&Je.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&Je.state.excludedWallets.some(i=>o1.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!Ze.isMobile()||Ze.isMobile()&&!e&&!ot.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(L.state.chains.values()).some(n=>De.getConnectorId(n.namespace)===$e.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=he.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=Xv.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:he.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(y=>y.isEnabled),p=new Set(f.map(y=>y.type)),g=c.filter(y=>p.has(y)).map(y=>({type:y,isEnabled:!0})),w=f.filter(({type:y})=>!g.some(({type:E})=>E===y));return Array.from(new Set([...g,...w].map(({type:y})=>y)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const eE=globalThis,pk=eE.ShadowRoot&&(eE.ShadyCSS===void 0||eE.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,gk=Symbol(),$L=new WeakMap;let kH=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==gk)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(pk&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=$L.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&$L.set(n,e))}return e}toString(){return this.cssText}};const eo=t=>new kH(typeof t=="string"?t:t+"",void 0,gk),Gc=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new kH(n,t,gk)},Nke=(t,e)=>{if(pk)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=eE.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},ML=pk?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return eo(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:xke,defineProperty:Tke,getOwnPropertyDescriptor:Rke,getOwnPropertyNames:Pke,getOwnPropertySymbols:Oke,getPrototypeOf:kke}=Object,Nu=globalThis,LL=Nu.trustedTypes,Dke=LL?LL.emptyScript:"",oI=Nu.reactiveElementPolyfillSupport,Sy=(t,e)=>t,JT={toAttribute(t,e){switch(e){case Boolean:t=t?Dke:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},DH=(t,e)=>!xke(t,e),UL={attribute:!0,type:String,converter:JT,reflect:!1,useDefault:!1,hasChanged:DH};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Nu.litPropertyMetadata??(Nu.litPropertyMetadata=new WeakMap);let Lf=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=UL){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&Tke(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=Rke(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??UL}static _$Ei(){if(this.hasOwnProperty(Sy("elementProperties")))return;const e=kke(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Sy("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Sy("properties"))){const n=this.properties,r=[...Pke(n),...Oke(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(ML(s))}else e!==void 0&&n.push(ML(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Nke(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:JT).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:JT;this._$Em=s;const l=c.fromAttribute(n,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??DH)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};Lf.elementStyles=[],Lf.shadowRootOptions={mode:"open"},Lf[Sy("elementProperties")]=new Map,Lf[Sy("finalized")]=new Map,oI==null||oI({ReactiveElement:Lf}),(Nu.reactiveElementVersions??(Nu.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ay=globalThis,T_=Ay.trustedTypes,BL=T_?T_.createPolicy("lit-html",{createHTML:t=>t}):void 0,$H="$lit$",Fl=`lit$${Math.random().toFixed(9).slice(2)}$`,MH="?"+Fl,$ke=`<${MH}>`,Ih=document,Qw=()=>Ih.createComment(""),Zw=t=>t===null||typeof t!="object"&&typeof t!="function",mk=Array.isArray,Mke=t=>mk(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",aI=`[ 	
\f\r]`,Nm=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,jL=/-->/g,FL=/>/g,rd=RegExp(`>|${aI}(?:([^\\s"'>=/]+)(${aI}*=${aI}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),WL=/'/g,zL=/"/g,LH=/^(?:script|style|textarea|title)$/i,UH=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),DMe=UH(1),$Me=UH(2),lg=Symbol.for("lit-noChange"),Dr=Symbol.for("lit-nothing"),HL=new WeakMap,kd=Ih.createTreeWalker(Ih,129);function BH(t,e){if(!mk(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return BL!==void 0?BL.createHTML(e):e}const Lke=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=Nm;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===Nm?u[1]==="!--"?o=jL:u[1]!==void 0?o=FL:u[2]!==void 0?(LH.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=rd):u[3]!==void 0&&(o=rd):o===rd?u[0]===">"?(o=s??Nm,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?rd:u[3]==='"'?zL:WL):o===zL||o===WL?o=rd:o===jL||o===FL?o=Nm:(o=rd,s=void 0);const f=o===rd&&t[a+1].startsWith("/>")?" ":"";i+=o===Nm?c+$ke:d>=0?(r.push(l),c.slice(0,d)+$H+c.slice(d)+Fl+f):c+Fl+(d===-2?a:f)}return[BH(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class Jw{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=Lke(e,n);if(this.el=Jw.createElement(l,r),kd.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=kd.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith($H)){const h=u[o++],f=s.getAttribute(d).split(Fl),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?Bke:p[1]==="?"?jke:p[1]==="@"?Fke:y1}),s.removeAttribute(d)}else d.startsWith(Fl)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(LH.test(s.tagName)){const d=s.textContent.split(Fl),h=d.length-1;if(h>0){s.textContent=T_?T_.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],Qw()),kd.nextNode(),c.push({type:2,index:++i});s.append(d[h],Qw())}}}else if(s.nodeType===8)if(s.data===MH)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(Fl,d+1))!==-1;)c.push({type:7,index:i}),d+=Fl.length-1}i++}}static createElement(e,n){const r=Ih.createElement("template");return r.innerHTML=e,r}}function ug(t,e,n=t,r){var o,a;if(e===lg)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=Zw(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=ug(t,s._$AS(t,e.values),s,r)),e}class Uke{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??Ih).importNode(n,!0);kd.currentNode=s;let i=kd.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new Q0(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new Wke(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=kd.nextNode(),o++)}return kd.currentNode=Ih,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class Q0{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=Dr,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=ug(this,e,n),Zw(e)?e===Dr||e==null||e===""?(this._$AH!==Dr&&this._$AR(),this._$AH=Dr):e!==this._$AH&&e!==lg&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Mke(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Dr&&Zw(this._$AH)?this._$AA.nextSibling.data=e:this.T(Ih.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=Jw.createElement(BH(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new Uke(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=HL.get(e.strings);return n===void 0&&HL.set(e.strings,n=new Jw(e)),n}k(e){mk(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new Q0(this.O(Qw()),this.O(Qw()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class y1{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=Dr,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Dr}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=ug(this,e,n,0),o=!Zw(e)||e!==this._$AH&&e!==lg,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=ug(this,a[r+c],n,c),l===lg&&(l=this._$AH[c]),o||(o=!Zw(l)||l!==this._$AH[c]),l===Dr?e=Dr:e!==Dr&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===Dr?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class Bke extends y1{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Dr?void 0:e}}class jke extends y1{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Dr)}}class Fke extends y1{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=ug(this,e,n,0)??Dr)===lg)return;const r=this._$AH,s=e===Dr&&r!==Dr||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==Dr&&(r===Dr||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class Wke{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){ug(this,e)}}const cI=Ay.litHtmlPolyfillSupport;cI==null||cI(Jw,Q0),(Ay.litHtmlVersions??(Ay.litHtmlVersions=[])).push("3.3.1");const zke=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new Q0(e.insertBefore(Qw(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Yd=globalThis;let tE=class extends Lf{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=zke(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return lg}};var OU;tE._$litElement$=!0,tE.finalized=!0,(OU=Yd.litElementHydrateSupport)==null||OU.call(Yd,{LitElement:tE});const lI=Yd.litElementPolyfillSupport;lI==null||lI({LitElement:tE});(Yd.litElementVersions??(Yd.litElementVersions=[])).push("4.2.1");let Iy,xu,Tu;function LMe(t,e){Iy=document.createElement("style"),xu=document.createElement("style"),Tu=document.createElement("style"),Iy.textContent=mp(t).core.cssText,xu.textContent=mp(t).dark.cssText,Tu.textContent=mp(t).light.cssText,document.head.appendChild(Iy),document.head.appendChild(xu),document.head.appendChild(Tu),jH(e)}function jH(t){xu&&Tu&&(t==="light"?(xu.removeAttribute("media"),Tu.media="enabled"):(Tu.removeAttribute("media"),xu.media="enabled"))}function Hke(t){Iy&&xu&&Tu&&(Iy.textContent=mp(t).core.cssText,xu.textContent=mp(t).dark.cssText,Tu.textContent=mp(t).light.cssText)}function mp(t){return{core:Gc`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${eo(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${eo((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${eo((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${eo((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${eo((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Gc`
      :root {
        --w3m-color-mix: ${eo((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${eo(Bc(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${eo(Bc(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Gc`
      :root {
        --w3m-color-mix: ${eo((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${eo(Bc(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${eo(Bc(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const UMe=Gc`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,BMe=Gc`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,jMe=Gc`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,Hm={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},FH=lse({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function Z0(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const qL=Z0({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),GL=Z0({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});Z0({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});Z0({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});Z0({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const qke={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},nE={getMethodsByChainNamespace(t){return qke[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case qL.caipNetworkId:u.chains.push(qL.deprecatedCaipNetworkId);break;case GL.caipNetworkId:u.chains.push(GL.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await yy.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};let WH=class{constructor({provider:e,namespace:n}){this.id=$e.CONNECTOR_ID.WALLET_CONNECT,this.name=f_.ConnectorNamesMap[$e.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=f_.ConnectorImageIds[$e.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=L.getCaipNetworks.bind(L),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=he.state.universalProviderConfigOverride,s=nE.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return vy.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:Gke})}};const Gke=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];let Vke=class{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>L.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:$e.CONNECTOR_ID.AUTH,type:"AUTH",name:$e.CONNECTOR_NAMES.AUTH,provider:e,imageId:f_.ConnectorImageIds[$e.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){Fe.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=Fe.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof WH);if(!e)throw new Error("WalletConnectConnector not found");return e}};class Kke extends Vke{setUniversalProvider(e){this.addConnector(new WH({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>Ze.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&mn.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(Fe.state.balanceLoading&&e.chainId===((c=L.state.activeCaipNetwork)==null?void 0:c.id))return{balance:Fe.state.balance||"0.00",symbol:Fe.state.balanceSymbol||""};const s=(await Fe.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=L.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===$e.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:UW.encode(new TextEncoder().encode(r)),pubkey:s}},(a=L.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=L.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===$e.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:wo(n.id)}]}))}catch(u){if(u.code===Hm.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===Hm.ERROR_INVALID_CHAIN_ID||u.code===Hm.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===Hm.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:wo(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const Yke=["email","socials","swaps","onramp","activity","reownBranding"],gv={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?mn.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?mn.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?mn.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?mn.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?mn.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?mn.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?mn.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?mn.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?mn.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},Qke={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=gv[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=gv[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return gv[t].processApi(e)},processFallbackFeature(t,e){return gv[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await Je.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?mn.DEFAULT_REMOTE_FEATURES:mn.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of Yke){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),mn.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Wa.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class Zke{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=L.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=L.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=L.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return L.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>L.getCaipNetworks(n),this.getActiveChainNamespace=()=>L.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{L.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>L.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>L.state.activeChain===n||!n?L.state.activeCaipAddress:L.getAccountProp("caipAddress",n),this.setClientId=n=>{it.setClientId(n)},this.getProvider=n=>pn.getProvider(n),this.getProviderType=n=>pn.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=Fe.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{Fe.setCaipAddress(n,r),n&&he.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{Fe.setBalance(n,r,s)},this.setProfileName=(n,r)=>{Fe.setProfileName(n,r)},this.setProfileImage=(n,r)=>{Fe.setProfileImage(n,r)},this.setUser=(n,r)=>{Fe.setUser(n,r)},this.resetAccount=n=>{Fe.resetAccount(n)},this.setCaipNetwork=n=>{L.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{L.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{Fe.setAllAccounts(n,r),he.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{Fe.setStatus(n,r),De.isConnected()?We.setConnectionStatus("connected"):We.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>L.getAccountProp("address",n),this.setConnectors=n=>{const r=[...De.state.allConnectors,...n];De.setConnectors(r)},this.setConnections=(n,r)=>{ot.setConnections(n,r)},this.fetchIdentity=n=>it.fetchIdentity(n),this.getReownName=n=>yy.getNamesForAddress(n),this.getConnectors=()=>De.getConnectors(),this.getConnectorImage=n=>z7.getConnectorImage(n),this.setConnectedWalletInfo=(n,r)=>{const s=pn.getProviderId(r),i=n?{...n,type:s}:void 0;Fe.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!L.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{Fe.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{Fe.removeAddressLabel(n,r)},this.getAddress=n=>L.state.activeChain===n||!n?Fe.state.address:L.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>L.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{L.resetNetwork(n)},this.addConnector=n=>{De.addConnector(n)},this.resetWcConnection=()=>{ot.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{Fe.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{Fe.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{L.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{Fe.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{he.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await Qke.fetchRemoteFeatures(e),he.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&nT.setOnrampProviders(this.remoteFeatures.onramp),((n=he.state.remoteFeatures)!=null&&n.email||Array.isArray((r=he.state.remoteFeatures)==null?void 0:r.socials)&&((s=he.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){const e=await Je.fetchAllowedOrigins();if(e&&Ze.isClient()){const n=window.location.origin;nE.isOriginAllowed(n,e,Hm.DEFAULT_ALLOWED_ANCESTORS)||Wa.open($a.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else Wa.open($a.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,Fn.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Js.setThemeMode(e.themeMode),e.themeVariables&&Js.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");L.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&L.setActiveCaipNetwork(n)}initializeConnectionController(e){ot.setWcBasic(e.basic??!1)}initializeConnectorController(){De.initialize(this.chainNamespaces)}initializeProjectSettings(e){he.setProjectId(e.projectId),he.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;he.setDebug(e.debug!==!1),he.setEnableWalletConnect(e.enableWalletConnect!==!1),he.setEnableWalletGuide(e.enableWalletGuide!==!1),he.setEnableWallets(e.enableWallets!==!1),he.setEIP6963Enabled(e.enableEIP6963!==!1),he.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),he.setEnableAuthLogger(e.enableAuthLogger!==!1),he.setCustomRpcUrls(e.customRpcUrls),he.setEnableEmbedded(e.enableEmbedded),he.setAllWallets(e.allWallets),he.setIncludeWalletIds(e.includeWalletIds),he.setExcludeWalletIds(e.excludeWalletIds),he.setFeaturedWalletIds(e.featuredWalletIds),he.setTokens(e.tokens),he.setTermsConditionsUrl(e.termsConditionsUrl),he.setPrivacyPolicyUrl(e.privacyPolicyUrl),he.setCustomWallets(e.customWallets),he.setFeatures(e.features),he.setAllowUnsupportedChain(e.allowUnsupportedChain),he.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),he.setPreferUniversalLinks(e.experimental_preferUniversalLinks),he.setDefaultAccountTypes(e.defaultAccountTypes);const n=We.getPreferredAccountTypes()||{},r={...he.state.defaultAccountTypes,...n};Fe.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),he.setMetadata(e.metadata),he.setDisableAppend(e.disableAppend),he.setEnableEmbedded(e.enableEmbedded),he.setSIWX(e.siwx),!e.projectId){Wa.open($a.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===$e.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");he.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return Ze.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=Df.getUnsupportedNetwork(`${n}:${e}`);L.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Df.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return Df.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return Df.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?Df.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=pn.getProvider(e),s=pn.getProviderId(e),{caipAddress:i}=L.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),We.removeConnectedNamespace(e),pn.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),De.removeConnectorId(e),L.resetAccount(e),L.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=L.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),We.setConnectedNamespaces([...L.state.chains.keys()]),this.chainNamespaces.forEach(o=>{De.setConnectorId(Xs.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,w,y,b,E,_;const c=L.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const C=this.getCaipNetworks().find(I=>I.chainNamespace===i);C&&this.setCaipNetwork(C)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((y=(w=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:w.http)==null?void 0:y[0])||((_=(E=(b=d==null?void 0:d.rpcUrls)==null?void 0:b.default)==null?void 0:E.http)==null?void 0:_[0])});if(!h)return;We.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=Fe.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=L.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),We.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const n=Jve(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));Jt.resetSend(),ot.resetWcConnection(),await vy.clearSessions(),De.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));We.deleteConnectedSocialProvider(),Fn.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(L.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:Fe.state.address,provider:pn.getProvider(L.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(mn.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(L.state.activeChain),s=pn.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===$e.CHAIN.EVM){const n=this.getAdapter(L.state.activeChain),r=pn.getProvider(L.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:Fe.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:L.state.activeChain}),Fe.state.profileImage||!1},getEnsAddress:async e=>await nE.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(L.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=pn.getProvider(L.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(L.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(L.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(L.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(L.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(L.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(L.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!Fe.state.address||this.updateNativeBalance(Fe.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},ot.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(pn.getProviderId(L.state.activeChain)===Xs.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=pn.getProvider(n),i=pn.getProviderId(n);if(e.chainNamespace===L.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===Xs.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=wl.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new Kke({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=We.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(We.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=L.state.activeChain===e,c=L.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=Fe.state.address,i=L.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=L.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=L.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=L.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===$e.CHAIN.EVM&&Ze.isSafeApp()&&De.setConnectorId($e.CONNECTOR_ID.SAFE,e);const n=De.getConnectorId(e);switch(this.setStatus("connecting",e),n){case $e.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case $e.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=De.getConnectorId(e),s=this.getCaipNetwork(e),o=De.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([Ze.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async n=>{var a,c,l,u,d;const r=this.getAdapter(n),s=((u=(l=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:l[n])==null?void 0:u.accounts)||[],i=(d=L.state.activeCaipNetwork)==null?void 0:d.id,o=s.find(h=>{const{chainId:f}=wl.parseCaipAddress(h);return f===(i==null?void 0:i.toString())})||s[0];if(o){const h=wl.validateCaipAddress(o),{chainId:f,address:p}=wl.parseCaipAddress(h);if(pn.setProviderId(n,Xs.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&L.state.activeCaipNetwork&&(r==null?void 0:r.namespace)!==$e.CHAIN.EVM){const g=r==null?void 0:r.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:L.state.activeCaipNetwork});pn.setProvider(n,g)}else pn.setProvider(n,this.universalProvider);De.setConnectorId($e.CONNECTOR_ID.WALLET_CONNECT,n),We.addConnectedNamespace(n),this.syncWalletConnectAccounts(n),await this.syncAccount({address:p,chainId:f,chainNamespace:n})}else this.setStatus("disconnected",n);this.syncConnectedWalletInfo(n),await L.setApprovedCaipNetworksData(n)});await Promise.all(e)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=wl.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>Ze.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){pn.setProviderId(s,e),pn.setProvider(s,n),De.setConnectorId(r,s)}async syncAllAccounts(e){const n=De.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===L.state.activeChain,r=L.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=We.getActiveNetworkProps(),c=i||a,l=((d=L.state.activeCaipNetwork)==null?void 0:d.name)===$e.UNSUPPORTED_NETWORK_NAME,u=L.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(w=>w.id.toString()===c.toString()),p=this.getCaipNetworks().find(w=>w.chainNamespace===o);if(!u&&!f&&!p){const w=this.getApprovedCaipNetworkIds()||[],y=w.find(E=>{var _;return((_=wl.parseCaipNetworkId(E))==null?void 0:_.chainId)===c.toString()}),b=w.find(E=>{var _;return((_=wl.parseCaipNetworkId(E))==null?void 0:_.chainNamespace)===o});f=this.getCaipNetworks().find(E=>E.caipNetworkId===y),p=this.getCaipNetworks().find(E=>E.caipNetworkId===b||"deprecatedCaipNetworkId"in E&&E.deprecatedCaipNetworkId===b)}const g=f||p;(g==null?void 0:g.chainNamespace)===L.state.activeChain?he.state.enableNetworkSwitch&&!he.state.allowUnsupportedChain&&((h=L.state.activeCaipNetwork)==null?void 0:h.name)===$e.UNSUPPORTED_NETWORK_NAME?L.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),o1.isLowerCaseMatch(s,Fe.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=De.getConnectorId(e),r=pn.getProviderId(e);if(r===Xs.CONNECTOR_TYPE_ANNOUNCED||r===Xs.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===Xs.CONNECTOR_TYPE_WALLET_CONNECT){const i=pn.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===$e.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===$e.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!B7.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=L.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=tEe.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};he.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await Ake.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{ot.setUri(e)}),this.universalProvider.on("connect",ot.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),ot.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(nE.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&Ze.isCaipAddress(r[0])&&this.syncAccount(wl.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&Ze.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Fn.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries($a.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=$a.ALERT_ERRORS[o];a&&(Wa.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&ot.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return $r.open({...e,data:{swap:e.arguments}})}return $r.open(e)}async close(){await this.injectModalUi(),$r.close()}setLoading(e,n){$r.setLoading(e,n)}async disconnect(e){await ot.disconnect(e)}getSIWX(){return he.state.siwx}getError(){return""}getChainId(){var e;return(e=L.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){Wa.open($a.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await L.switchActiveNetwork(n)}getWalletProvider(){return L.state.activeChain?pn.state.providers[L.state.activeChain]:null}getWalletProviderType(){return pn.getProviderId(L.state.activeChain)}subscribeProviders(e){return pn.subscribeProviders(e)}getThemeMode(){return Js.state.themeMode}getThemeVariables(){return Js.state.themeVariables}setThemeMode(e){Js.setThemeMode(e),jH(Js.state.themeMode)}setTermsConditionsUrl(e){he.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){he.setPrivacyPolicyUrl(e)}setThemeVariables(e){Js.setThemeVariables(e),Hke(Js.state.themeVariables)}subscribeTheme(e){return Js.subscribe(e)}getWalletInfo(){return Fe.state.connectedWalletInfo}getAccount(e){var o;const n=De.getAuthConnector(e),r=L.getAccountData(e),s=L.state.activeChain,i=We.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:Ze.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===$e.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:We.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?L.subscribeChainProp("accountState",r,n):L.subscribe(r),De.subscribe(r)}subscribeNetwork(e){return L.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e){return Fe.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Fe.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){L.subscribeKey("activeCaipNetwork",e)}getState(){return Ka.state}subscribeState(e){return Ka.subscribe(e)}showErrorMessage(e){Zo.showError(e)}showSuccessMessage(e){Zo.showSuccess(e)}getEvent(){return{...Fn.state}}subscribeEvents(e){return Fn.subscribe(e)}replace(e){St.replace(e)}redirect(e){St.push(e)}popTransactionStack(e){St.popTransactionStack(e)}isOpen(){return $r.state.open}isTransactionStackEmpty(){return St.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){he.setFeatures(e)}updateRemoteFeatures(e){he.setRemoteFeatures(e)}updateOptions(e){const r={...he.state||{},...e};he.setOptions(r)}setConnectMethodsOrder(e){he.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){he.setWalletFeaturesOrder(e)}setCollapseWallets(e){he.setCollapseWallets(e)}setSocialsOrder(e){he.setSocialsOrder(e)}getConnectMethodsOrder(){return ZT.getConnectOrderMethod(he.state.features,De.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||L.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&L.removeNetwork(e,n)}}let VL=!1;class Jke extends Zke{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{Ri.checkIfRequestExists(n)?Ri.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Zr.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Zr.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=Ri.checkIfRequestIsSafe(r),i=Fe.state.address,o=L.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=L.state.activeChain;De.getConnectorId(n)===$e.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=L.state.activeChain,s=r===$e.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=he.state.defaultAccountTypes[r],o=(l=Fe.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;o1.isLowerCaseMatch(n.address,Fe.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...Fe.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>Ze.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[Ze.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...Fe.state.user||{},username:n},L.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,L.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,L.state.activeChain)})}async syncAuthConnector(e,n){var u,d,h,f;const r=$e.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!r)return;this.setLoading(!0,n);const s=e.getLoginEmailUsed();this.setLoading(s,n),s&&this.setStatus("connecting",n);const i=e.getEmail(),o=e.getUsername();this.setUser({...((u=Fe.state)==null?void 0:u.user)||{},username:o,email:i},n),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),c=Js.getSnapshot(),l=he.getSnapshot();await Promise.all([e.syncDappData({metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:Bc(c.themeVariables,c.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&(a&&((d=this.connectionControllerClient)!=null&&d.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:$e.CONNECTOR_ID.AUTH,info:{name:$e.CONNECTOR_ID.AUTH},type:Xs.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=L.state.activeCaipNetwork)==null?void 0:h.id,chain:n})),this.setStatus("connected",n)):De.getConnectorId(n)===$e.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),We.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!Ze.isTelegram())return;const r=We.getTelegramSocialProvider();if(!r||!Ze.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;Fe.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=De.getAuthConnector();r&&o&&(this.setLoading(!0,e),await ot.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),We.setConnectedSocialProvider(r),We.removeTelegramSocialProvider(),Fn.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var o,a,c,l;if(!$e.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(o=this.remoteFeatures)==null?void 0:o.email,s=Array.isArray((a=this.remoteFeatures)==null?void 0:a.socials)&&this.remoteFeatures.socials.length>0,i=r||s;!this.authProvider&&((c=this.options)!=null&&c.projectId)&&i&&(this.authProvider=CCe.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(l=this.getCaipNetwork(e))==null?void 0:l.caipNetworkId,abortController:$a.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?Wa.open($a.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?Wa.open($a.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&Wa.open($a.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),Ka.subscribeOpen(u=>{var d;!u&&this.isTransactionStackEmpty()&&((d=this.authProvider)==null||d.rejectRpcRequests())}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&Je.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=L.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=pn.getProvider(r),u=pn.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=pn.getProviderId(n)===Xs.CONNECTOR_TYPE_AUTH,u=pn.getProviderId(r),d=u===Xs.CONNECTOR_TYPE_AUTH,h=$e.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(L.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:$e.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:Xs.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===Xs.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Ka.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==$e.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=pn.getProviderId(e);if(n===Xs.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=We.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(Ze.isClient()&&!VL)try{const e={...mn.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),Ze.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!he.state.disableAppend&&!he.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}VL=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!Ze.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(us(()=>import("./embedded-wallet-BJxmpXrJ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),n.email&&r.push(us(()=>import("./email-Csqa3I8d.js"),__vite__mapDeps([12,1,11,5,10,4,9,13,6]))),n.socials&&r.push(us(()=>import("./socials-C2YKSCOn.js"),__vite__mapDeps([14,1,15,4,16,17,10,18,9,5,11,19,3,20]))),n.swaps&&n.swaps.length>0&&r.push(us(()=>import("./swaps-DgLOiAF1.js"),__vite__mapDeps([21,1,9,5,22,23,24,3,10,20,6,4]))),e.send&&r.push(us(()=>import("./send-BGWC_7m-.js"),__vite__mapDeps([25,1,9,5,10,4,16,11,24,3,6,26,27]))),e.receive&&r.push(us(()=>import("./receive-CCWJNIcw.js"),__vite__mapDeps([28,1,29,3,19]))),n.onramp&&n.onramp.length>0&&r.push(us(()=>import("./onramp-D4LwHl5B.js"),__vite__mapDeps([30,1,31,20,10,3,5,32,15,4,16,33,11,9,18,6]))),n.activity&&r.push(us(()=>import("./transactions-8etj40H2.js"),__vite__mapDeps([34,1,35,31,20,10,11,3]))),e.pay&&r.push(us(()=>import("./index-D_X4tsh2.js"),__vite__mapDeps([36,1,9,5,37,3,10,7,32,27,18]))),await Promise.all([...r,us(()=>import("./index-CMqOZ5Li.js"),__vite__mapDeps([38,1,3,5,26,10,39,23,7,32,9,8,37,35,31,20,11,22,4,6,27,13,15,16,17,2,18,29,19,33])),us(()=>import("./w3m-modal-D0cIkLII.js"),__vite__mapDeps([40,1,7,3,10,8,5,23,39]))])}}let Rl;function Xke(t){t&&(Rl=t)}function w1(){if(!Rl)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(Rl==null?void 0:Rl.open(n))}async function e(){await(Rl==null?void 0:Rl.close())}return{open:t,close:e}}const e2e="1.7.8";let mv;function t2e(t){return mv||(mv=new Jke({...t,sdkVersion:Ze.generateSdkVersion(t.adapters??[],"react",e2e)}),Xke(mv)),mv}const n2e=ha({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),KL=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],r2e=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=n2e({isOpen:t}),{open:i}=w1(),o=P.useRef(null),[a,c]=P.useState([]),[l,u]=P.useState(!0),[d,h]=P.useState(null),[f,p]=P.useState("all"),[g,w]=P.useState(1),[y,b]=P.useState(1),[E,_]=P.useState(0),[C,I]=P.useState(null),[A,x]=P.useState(KL[0]),[S,k]=P.useState(!1),[O,U]=P.useState(null),G=P.useCallback(async()=>{var D,B;try{if((D=window.solana)!=null&&D.isPhantom){const H=await window.solana.connect();U(H.publicKey.toString());return}if((B=window.solflare)!=null&&B.isSolflare){const H=await window.solflare.connect();U(H.publicKey.toString());return}i()}catch(H){console.error("Failed to connect Solana wallet:",H),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}k(!1)},[i]);P.useEffect(()=>{var D,B;(D=window.solana)!=null&&D.publicKey?U(window.solana.publicKey.toString()):(B=window.solflare)!=null&&B.publicKey&&U(window.solflare.publicKey.toString())},[]),P.useEffect(()=>{t&&(async()=>{var B;u(!0),h(null);try{let H,J=f==="owned"&&r||void 0;if(A.api==="opensea-solana"){if(f==="owned"&&!O){k(!0),u(!1);return}J=O||void 0,H=await U7(A.slug,50),console.log("Fetched Solana NFTs from collection:",H.data.length),f==="owned"&&O&&(console.log("Filtering for owner:",O),console.log("Sample NFT owner data:",(B=H.data[0])==null?void 0:B.owners),console.log("All NFTs owner data:",H.data.map(ne=>({name:ne.name,owners:ne.owners,owner_of:ne.owner_of}))),H.data.some(ne=>ne.owners&&ne.owners.length>0)?(H.data=H.data.filter(ne=>{const ie=ne.owners.some(we=>we.owner_of&&we.owner_of.toLowerCase()===O.toLowerCase());return ie&&console.log("Found owned NFT:",ne.name),ie}),console.log("NFTs after filtering:",H.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else A.api==="opensea"?H=await FO(A.slug,50,J):H=await jO(A.slug,g,50,J);c(H.data),b(H.totalPages),_(H.totalCount)}catch(H){H instanceof Error?h(H.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,A,O]),P.useEffect(()=>{S&&G()},[S,G]);const F=D=>new Date(D).toLocaleDateString(),T=D=>A.api==="opensea-solana"&&(!D.owners||D.owners.length===0)?"Owner data unavailable":D.owners.length>0?`${D.owners[0].owner_of.substring(0,6)}...`:"N/A",N=()=>{n&&n()},$=async D=>{if(A.api==="opensea"&&A.chain)try{const B=await L7(A.chain,D.address,D.token_id.toString()),H={...D,attributes:JSON.stringify(B.traits||[])};I(H)}catch(B){console.error("Failed to fetch full NFT details",B),I(D)}else I(D)},R=D=>{x(D),w(1)};return t?m.jsxs(m.Fragment,{children:[m.jsx(D0,{nodeRef:o,handle:`.${s.header}`,children:m.jsxs("div",{ref:o,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"LAWB NFT GALLERY"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:N,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:""})]})]}),m.jsx("div",{className:s.collectionSelector,children:KL.map(D=>m.jsx("button",{className:`${s.collectionButton} ${A.slug===D.slug?"active":""}`,onClick:()=>R(D),children:D.name},D.slug))}),m.jsxs("div",{className:s.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),m.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!O,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||O?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||O?1:.6},children:"My NFTs"}),A.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{G()},style:{background:O?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:O?"white":"black",marginLeft:"auto"},children:O?`Solana: ${O.slice(0,4)}...${O.slice(-4)}`:"Connect Solana"})]}),A.api==="opensea-solana"&&!O&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?m.jsx("div",{children:"Loading NFTs..."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${E} total)`,f==="recent"&&`Recently minted NFTs by ${A.api==="opensea-solana"?(O==null?void 0:O.slice(0,6))+"..."+(O==null?void 0:O.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${A.api==="opensea-solana"?(O==null?void 0:O.slice(0,6))+"..."+(O==null?void 0:O.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?m.jsx("div",{children:"No NFTs found."}):m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map(D=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{$(D)},children:[m.jsx("div",{style:{width:"100%",height:"150px",backgroundImage:`url(${D.image_url})`,backgroundSize:"cover",backgroundPosition:"center",marginBottom:"10px",border:"1px solid #ccc"}}),m.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:m.jsxs("strong",{children:["#",D.token_id]})}),m.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",T(D)]}),m.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",F(D.created_at)]})]},D.id))}),f!=="recent"&&y>1&&m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[m.jsx("button",{onClick:()=>w(D=>Math.max(1,D-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),m.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",y]}),m.jsx("button",{onClick:()=>w(D=>Math.min(y,D+1)),disabled:g===y,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===y?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),C&&m.jsx(bpe,{nft:C,onClose:()=>I(null)})]}):null};var yv,s2e=new Uint8Array(16);function i2e(){if(!yv&&(yv=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!yv))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yv(s2e)}const o2e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function a2e(t){return typeof t=="string"&&o2e.test(t)}var Hr=[];for(var uI=0;uI<256;++uI)Hr.push((uI+256).toString(16).substr(1));function c2e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Hr[t[e+0]]+Hr[t[e+1]]+Hr[t[e+2]]+Hr[t[e+3]]+"-"+Hr[t[e+4]]+Hr[t[e+5]]+"-"+Hr[t[e+6]]+Hr[t[e+7]]+"-"+Hr[t[e+8]]+Hr[t[e+9]]+"-"+Hr[t[e+10]]+Hr[t[e+11]]+Hr[t[e+12]]+Hr[t[e+13]]+Hr[t[e+14]]+Hr[t[e+15]]).toLowerCase();if(!a2e(n))throw TypeError("Stringified UUID is invalid");return n}function l2e(t,e,n){t=t||{};var r=t.random||(t.rng||i2e)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,c2e(r)}const u2e=ha({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000",textTransform:"uppercase"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),d2e=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}],h2e=["/images/sticker1.png","/images/sticker2.png","/images/sticker3.png","/images/sticker4.png","/images/sticker5.png"],vi=500;function zH(){const t=u2e(),e=P.useRef(null),[n,r]=P.useState(null),[s,i]=P.useState(""),[o,a]=P.useState(""),[c,l]=P.useState(36),[u,d]=P.useState(36),[h,f]=P.useState(!1),[p,g]=P.useState(!1),[w,y]=P.useState(!1),[b,E]=P.useState(!1),[_,C]=P.useState(!1),[I,A]=P.useState([]),[x,S]=P.useState(null),k=P.useRef(null),[O,U]=P.useState(null),G=async Z=>{const se=Z.getContext("2d");if(!se)return;se.clearRect(0,0,Z.width,Z.height),n?await new Promise(ce=>{const fe=new window.Image;fe.crossOrigin="anonymous",fe.onload=()=>{const ge=Math.min(Z.width/fe.width,Z.height/fe.height),Ae=(Z.width-fe.width*ge)/2,pe=(Z.height-fe.height*ge)/2;se.drawImage(fe,Ae,pe,fe.width*ge,fe.height*ge),ce()},fe.onerror=()=>ce(),fe.src=n}):(se.fillStyle="#333",se.fillRect(0,0,Z.width,Z.height)),(ce=>{ce.textAlign="center",ce.strokeStyle="black",ce.lineWidth=3,ce.fillStyle="white";const fe=(ge,Ae)=>{const pe=ge.toUpperCase().split(" "),ye=[];let Ve=pe[0];for(let Zt=1;Zt<pe.length;Zt++){const Pt=pe[Zt];ce.measureText(Ve+" "+Pt).width<Ae?Ve+=" "+Pt:(ye.push(Ve),Ve=Pt)}return ye.push(Ve),ye};s&&(ce.font=`${c}px Impact`,fe(s,vi-20).forEach((Ae,pe)=>{const ye=c+pe*c*1.2;ce.strokeText(Ae,vi/2,ye),ce.fillText(Ae,vi/2,ye)})),o&&(ce.font=`${u}px Impact`,fe(o,vi-20).reverse().forEach((Ae,pe)=>{const ye=vi-u*1.2*(pe+1);ce.strokeText(Ae,vi/2,ye),ce.fillText(Ae,vi/2,ye)}))})(se),await Promise.all(I.map(ce=>new Promise(fe=>{const ge=new window.Image;ge.src=ce.src,ge.onload=()=>{se.save(),se.translate(ce.x,ce.y),se.rotate(ce.rotation*Math.PI/180),se.scale(ce.scale,ce.scale),se.drawImage(ge,-40,-40,80,80),se.restore(),fe()},ge.onerror=()=>fe()})));try{h&&F(Z),p&&T(Z),w&&N(Z)}catch(ce){console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead.",ce),f(!1),g(!1),y(!1)}},F=Z=>{const se=Z.getContext("2d");if(!se)return;const ue=se.getImageData(0,0,Z.width,Z.height),ce=ue.data;for(let fe=0;fe<ce.length;fe+=4){const ge=ce[fe],Ae=ce[fe+1],pe=ce[fe+2],ye=(ge+Ae+pe)/3,Ve=1.8;ce[fe]=Math.min(255,ye+(ge-ye)*Ve),ce[fe+1]=Math.min(255,ye+(Ae-ye)*Ve*.7),ce[fe+2]=Math.min(255,ye+(pe-ye)*Ve*.4);const Zt=1.3;ce[fe]=Math.min(255,Math.max(0,ce[fe]*Zt)),ce[fe+1]=Math.min(255,Math.max(0,ce[fe+1]*Zt)),ce[fe+2]=Math.min(255,Math.max(0,ce[fe+2]*Zt))}se.putImageData(ue,0,0)},T=Z=>{const se=Z.getContext("2d");if(!se)return;const ue=4,fe=se.getImageData(0,0,Z.width,Z.height).data,ge=new Uint8ClampedArray(fe);for(let Ae=0;Ae<Z.height;Ae+=ue)for(let pe=0;pe<Z.width;pe+=ue){const ye=(Ae*Z.width+pe)*4,Ve=fe[ye],Zt=fe[ye+1],Pt=fe[ye+2],on=fe[ye+3];for(let Lt=0;Lt<ue&&Ae+Lt<Z.height;Lt++)for(let Un=0;Un<ue&&pe+Un<Z.width;Un++){const mi=((Ae+Lt)*Z.width+(pe+Un))*4;ge[mi]=Ve,ge[mi+1]=Zt,ge[mi+2]=Pt,ge[mi+3]=on}}se.putImageData(new ImageData(ge,Z.width,Z.height),0,0)},N=Z=>{const se=Z.getContext("2d");if(!se)return;const ue=se.getImageData(0,0,Z.width,Z.height),ce=ue.data;for(let fe=0;fe<ce.length;fe+=4){const ge=(Math.random()-.5)*50;ce[fe]=Math.max(0,Math.min(255,ce[fe]+ge)),ce[fe+1]=Math.max(0,Math.min(255,ce[fe+1]+ge)),ce[fe+2]=Math.max(0,Math.min(255,ce[fe+2]+ge))}se.putImageData(ue,0,0)};P.useEffect(()=>{e.current&&G(e.current)},[G]);const $=Z=>{var ue;const se=(ue=Z.target.files)==null?void 0:ue[0];se&&r(URL.createObjectURL(se))},R=()=>{r(null),i(""),a(""),l(36),d(36),f(!1),g(!1),y(!1)},D=async()=>{const Z=e.current;if(!Z)return;await G(Z);const se=document.createElement("a");se.download="meme.png",se.href=Z.toDataURL("image/png"),document.body.appendChild(se),se.click(),document.body.removeChild(se)},B=async Z=>{C(!0),E(!1);try{console.log("Fetching NFTs for collection:",Z);let se;if(Z.api==="opensea"){console.log("Using OpenSea API for:",Z.slug);const ue=await FO(Z.slug,50);se=ue.data,console.log("OpenSea response:",ue)}else if(Z.api==="opensea-solana"){console.log("Using OpenSea Solana API for:",Z.slug);const ue=await U7(Z.slug,50);se=ue.data,console.log("OpenSea Solana response:",ue)}else{console.log("Using Scatter API for:",Z.slug);const ue=await jO(Z.slug,1,50);se=ue.data,console.log("Scatter response:",ue)}if(se&&se.length>0){const ue=se[Math.floor(Math.random()*se.length)],ce=ue.image||ue.image_url||ue.image_url_shrunk;console.log("Selected NFT:",ue),console.log("Image URL:",ce),r(ce)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(se){console.error("Error fetching NFTs:",se),alert("Failed to fetch NFT images. Check console for details.")}finally{C(!1)}},H=Z=>{const se={id:l2e(),src:Z,x:80,y:80,scale:1,rotation:0};A(ue=>ue.length>=2||ue.some(ce=>ce.src===Z&&!ce.id.startsWith("upload-"))?ue:[...ue,se]),U(se.id)},J=Z=>{var ue;const se=(ue=Z.target.files)==null?void 0:ue[0];if(se){const ce=URL.createObjectURL(se);H(ce)}},ee=(Z,se,ue)=>{A(ce=>ce.map(fe=>{if(fe.id!==Z)return fe;let ge=fe.x+se/1.2,Ae=fe.y+ue/1.2;const pe=40*fe.scale,ye=40*fe.scale;return ge=Math.max(pe,Math.min(vi-pe,ge)),Ae=Math.max(ye,Math.min(vi-ye,Ae)),{...fe,x:ge,y:Ae}}))},ne=(Z,se,ue,ce,fe)=>{A(ge=>ge.map(Ae=>{if(Ae.id!==Z)return Ae;const pe=Ae.x,ye=Ae.y,Ve=Math.atan2(fe-ye,ce-pe)*180/Math.PI;return{...Ae,rotation:ue+(Ve-se)*.5}}))},ie=Z=>{A(se=>se.filter(ue=>ue.id!==Z))},we=(Z,se)=>{A(ue=>ue.map(ce=>ce.id===Z?{...ce,scale:Math.max(.2,ce.scale*(1+(se-1)*.2))}:ce))};return m.jsxs("div",{className:t.container,children:[m.jsxs("div",{className:t.header,children:[m.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),m.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",m.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),m.jsxs("div",{className:t.content,children:[m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Collections"}),m.jsxs("div",{className:t.row,children:[m.jsxs("div",{className:t.dropdown,children:[m.jsx("button",{className:t.button,onClick:()=>E(Z=>!Z),children:"Collections"}),b&&m.jsx("div",{className:t.dropdownContent,children:d2e.map(Z=>m.jsx("div",{className:t.dropdownItem,onClick:()=>{B(Z)},children:Z.name},Z.id))})]}),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:$})]}),_&&m.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Text"}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Top Text:"}),m.jsx("input",{className:t.input,type:"text",value:s,onChange:Z=>i(Z.target.value),placeholder:"Enter top text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:Z=>l(Number(Z.target.value)),style:{width:60,textAlign:"center"}})]}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Bottom Text:"}),m.jsx("input",{className:t.input,type:"text",value:o,onChange:Z=>a(Z.target.value),placeholder:"Enter bottom text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:Z=>d(Number(Z.target.value)),style:{width:60,textAlign:"center"}})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Effects"}),m.jsxs("div",{className:t.row,children:[m.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(Z=>!Z),children:"Deep Fry"}),m.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(Z=>!Z),children:"Pixelate"}),m.jsx("button",{className:t.effectButton,style:{background:w?"#00ffff":void 0},onClick:()=>y(Z=>!Z),children:"Grain"})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Stickers"}),m.jsxs("div",{className:t.row,children:[h2e.map((Z,se)=>m.jsx("img",{src:Z,alt:`sticker${se+1}`,style:{width:32,height:32,cursor:"pointer",border:"1px solid #888",marginRight:4},onClick:()=>H(Z)},Z)),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Sticker",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:k,onChange:J})]})]})]}),m.jsxs("div",{className:t.actions,children:[m.jsx("button",{className:t.button,onClick:D,children:"Save Image"}),m.jsx("button",{className:t.button,onClick:R,children:"Restart"})]})]}),m.jsx("div",{className:t.memeArea,children:m.jsx("canvas",{ref:e,width:vi,height:vi,className:t.canvas})}),m.jsx("div",{style:{position:"absolute",left:0,top:0,width:vi,height:vi,pointerEvents:"none"},children:I.map(Z=>O===Z.id?m.jsxs("div",{style:{position:"absolute",left:Z.x,top:Z.y,width:80*Z.scale,height:80*Z.scale,transform:`rotate(${Z.rotation}deg)`,cursor:"move",pointerEvents:"auto",zIndex:10,border:"2px solid #00f",boxShadow:"0 0 8px #00f"},onMouseDown:se=>{S(Z.id),se.stopPropagation()},onMouseUp:()=>S(null),onMouseMove:se=>{x===Z.id&&se.buttons===1&&ee(Z.id,se.movementX,se.movementY)},children:[m.jsx("img",{src:Z.src,alt:"sticker",style:{width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},draggable:!1}),m.jsx("div",{style:{position:"absolute",right:-12,top:"40%",width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"grab",zIndex:11},onMouseDown:se=>{var Ve;se.stopPropagation();const ue=(Ve=se.currentTarget.parentElement)==null?void 0:Ve.getBoundingClientRect(),ce=ue?ue.left+ue.width/2:0,fe=ue?ue.top+ue.height/2:0,ge=Math.atan2(se.clientY-fe,se.clientX-ce)*180/Math.PI,Ae=Z.rotation,pe=Zt=>{ne(Z.id,ge,Ae,Zt.clientX,Zt.clientY)},ye=()=>{window.removeEventListener("mousemove",pe),window.removeEventListener("mouseup",ye)};window.addEventListener("mousemove",pe),window.addEventListener("mouseup",ye)}}),m.jsx("div",{style:{position:"absolute",bottom:-12,right:-12,width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"nwse-resize",zIndex:11},onMouseDown:se=>{se.stopPropagation();const ue=se.clientX,ce=ge=>{const Ae=(ge.clientX-ue)/80;we(Z.id,1+Ae)},fe=()=>{window.removeEventListener("mousemove",ce),window.removeEventListener("mouseup",fe)};window.addEventListener("mousemove",ce),window.addEventListener("mouseup",fe)}}),m.jsx("button",{style:{position:"absolute",top:-12,left:-12,width:16,height:16,background:"#f00",color:"#fff",border:"none",borderRadius:"50%",fontSize:10,cursor:"pointer",zIndex:12},onClick:()=>ie(Z.id),children:""}),m.jsx("button",{style:{position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:40,height:18,background:"#0f0",color:"#000",border:"1px solid #888",borderRadius:4,fontSize:8,cursor:"pointer",zIndex:12},onClick:()=>U(null),children:"Place"})]},Z.id):null)})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xw(){return Xw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xw.apply(this,arguments)}var su;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(su||(su={}));const YL="popstate";function f2e(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return XT("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:qH(s)}return g2e(e,n,null,t)}function Cr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function HH(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function p2e(){return Math.random().toString(36).substr(2,8)}function QL(t,e){return{usr:t.state,key:t.key,idx:e}}function XT(t,e,n,r){return n===void 0&&(n=null),Xw({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Fg(e):e,{state:n,key:e&&e.key||r||p2e()})}function qH(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Fg(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function g2e(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=su.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(Xw({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=su.Pop;let w=u(),y=w==null?null:w-l;l=w,c&&c({action:a,location:g.location,delta:y})}function h(w,y){a=su.Push;let b=XT(g.location,w,y);l=u()+1;let E=QL(b,l),_=g.createHref(b);try{o.pushState(E,"",_)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(_)}i&&c&&c({action:a,location:g.location,delta:1})}function f(w,y){a=su.Replace;let b=XT(g.location,w,y);l=u();let E=QL(b,l),_=g.createHref(b);o.replaceState(E,"",_),i&&c&&c({action:a,location:g.location,delta:0})}function p(w){let y=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof w=="string"?w:qH(w);return b=b.replace(/ $/,"%20"),Cr(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let g={get action(){return a},get location(){return t(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(YL,d),c=w,()=>{s.removeEventListener(YL,d),c=null}},createHref(w){return e(s,w)},createURL:p,encodeLocation(w){let y=p(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(w){return o.go(w)}};return g}var ZL;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ZL||(ZL={}));function m2e(t,e,n){return n===void 0&&(n="/"),y2e(t,e,n)}function y2e(t,e,n,r){let s=typeof e=="string"?Fg(e):e,i=KH(s.pathname||"/",n);if(i==null)return null;let o=GH(t);w2e(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=R2e(i);a=N2e(o[c],l)}return a}function GH(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Cr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=Qd([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(Cr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),GH(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:A2e(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of VH(i.path))s(i,o,c)}),e}function VH(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=VH(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function w2e(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:I2e(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const b2e=/^:[\w-]+$/,v2e=3,E2e=2,_2e=1,C2e=10,S2e=-2,JL=t=>t==="*";function A2e(t,e){let n=t.split("/"),r=n.length;return n.some(JL)&&(r+=S2e),e&&(r+=E2e),n.filter(s=>!JL(s)).reduce((s,i)=>s+(b2e.test(i)?v2e:i===""?_2e:C2e),r)}function I2e(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function N2e(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=x2e({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Qd([i,d.pathname]),pathnameBase:M2e(Qd([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=Qd([i,d.pathnameBase]))}return o}function x2e(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=T2e(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function T2e(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),HH(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function R2e(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return HH(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function KH(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function P2e(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Fg(t):t;return{pathname:n?n.startsWith("/")?n:O2e(n,e):e,search:L2e(r),hash:U2e(s)}}function O2e(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function dI(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function k2e(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function D2e(t,e){let n=k2e(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function $2e(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Fg(t):(s=Xw({},t),Cr(!s.pathname||!s.pathname.includes("?"),dI("?","pathname","search",s)),Cr(!s.pathname||!s.pathname.includes("#"),dI("#","pathname","hash",s)),Cr(!s.search||!s.search.includes("#"),dI("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=P2e(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const Qd=t=>t.join("/").replace(/\/\/+/g,"/"),M2e=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),L2e=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,U2e=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function B2e(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const YH=["post","put","patch","delete"];new Set(YH);const j2e=["get",...YH];new Set(j2e);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function e0(){return e0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e0.apply(this,arguments)}const yk=P.createContext(null),F2e=P.createContext(null),b1=P.createContext(null),v1=P.createContext(null),Wg=P.createContext({outlet:null,matches:[],isDataRoute:!1}),QH=P.createContext(null);function E1(){return P.useContext(v1)!=null}function ZH(){return E1()||Cr(!1),P.useContext(v1).location}function JH(t){P.useContext(b1).static||P.useLayoutEffect(t)}function W2e(){let{isDataRoute:t}=P.useContext(Wg);return t?tDe():z2e()}function z2e(){E1()||Cr(!1);let t=P.useContext(yk),{basename:e,future:n,navigator:r}=P.useContext(b1),{matches:s}=P.useContext(Wg),{pathname:i}=ZH(),o=JSON.stringify(D2e(s,n.v7_relativeSplatPath)),a=P.useRef(!1);return JH(()=>{a.current=!0}),P.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=$2e(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Qd([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function H2e(t,e){return q2e(t,e)}function q2e(t,e,n,r){E1()||Cr(!1);let{navigator:s}=P.useContext(b1),{matches:i}=P.useContext(Wg),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=ZH(),u;if(e){var d;let w=typeof e=="string"?Fg(e):e;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||Cr(!1),u=w}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let w=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=m2e(t,{pathname:f}),g=Q2e(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Qd([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Qd([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&g?P.createElement(v1.Provider,{value:{location:e0({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:su.Pop}},g):g}function G2e(){let t=eDe(),e=B2e(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:s},n):null,null)}const V2e=P.createElement(G2e,null);class K2e extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?P.createElement(Wg.Provider,{value:this.props.routeContext},P.createElement(QH.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Y2e(t){let{routeContext:e,match:n,children:r}=t,s=P.useContext(yk);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(Wg.Provider,{value:e},r)}function Q2e(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||Cr(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,w=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||V2e,c&&(l<0&&h===0?(nDe("route-fallback"),p=!0,w=null):l===h&&(p=!0,w=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,h+1)),b=()=>{let E;return f?E=g:p?E=w:d.route.Component?E=P.createElement(d.route.Component,null):d.route.element?E=d.route.element:E=u,P.createElement(Y2e,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:E})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?P.createElement(K2e,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var XH=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(XH||{}),eq=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(eq||{});function Z2e(t){let e=P.useContext(yk);return e||Cr(!1),e}function J2e(t){let e=P.useContext(F2e);return e||Cr(!1),e}function X2e(t){let e=P.useContext(Wg);return e||Cr(!1),e}function tq(t){let e=X2e(),n=e.matches[e.matches.length-1];return n.route.id||Cr(!1),n.route.id}function eDe(){var t;let e=P.useContext(QH),n=J2e(),r=tq();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function tDe(){let{router:t}=Z2e(XH.UseNavigateStable),e=tq(eq.UseNavigateStable),n=P.useRef(!1);return JH(()=>{n.current=!0}),P.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,e0({fromRouteId:e},i)))},[t,e])}const XL={};function nDe(t,e,n){XL[t]||(XL[t]=!0)}function rDe(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function rE(t){Cr(!1)}function sDe(t){let{basename:e="/",children:n=null,location:r,navigationType:s=su.Pop,navigator:i,static:o=!1,future:a}=t;E1()&&Cr(!1);let c=e.replace(/^\/*/,"/"),l=P.useMemo(()=>({basename:c,navigator:i,static:o,future:e0({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=Fg(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=P.useMemo(()=>{let w=KH(u,c);return w==null?null:{location:{pathname:w,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:P.createElement(b1.Provider,{value:l},P.createElement(v1.Provider,{children:n,value:g}))}function iDe(t){let{children:e,location:n}=t;return H2e(eR(e),n)}new Promise(()=>{});function eR(t,e){e===void 0&&(e=[]);let n=[];return P.Children.forEach(t,(r,s)=>{if(!P.isValidElement(r))return;let i=[...e,s];if(r.type===P.Fragment){n.push.apply(n,eR(r.props.children,i));return}r.type!==rE&&Cr(!1),!r.props.index||!r.props.children||Cr(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=eR(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const oDe="6";try{window.__reactRouterVersion=oDe}catch{}const aDe="startTransition",eU=Wq[aDe];function cDe(t){let{basename:e,children:n,future:r,window:s}=t,i=P.useRef();i.current==null&&(i.current=f2e({window:s,v5Compat:!0}));let o=i.current,[a,c]=P.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=P.useCallback(d=>{l&&eU?eU(()=>c(d)):c(d)},[c,l]);return P.useLayoutEffect(()=>o.listen(u),[o,u]),P.useEffect(()=>rDe(r),[r]),P.createElement(sDe,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var tU;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(tU||(tU={}));var nU;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(nU||(nU={}));const lDe=ha({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function uDe(){const t=lDe(),{open:e}=w1(),{address:n,isConnected:r}=O0(),{isPending:s}=P9(),{disconnect:i}=O9(),{data:o}=k9({address:n}),[a,c]=P.useState("pixelawbs-popup"),[l,u]=P.useState(new Set),[d,h]=P.useState(!1),[f,p]=P.useState(!1),[g,w]=P.useState(!1),[y,b]=P.useState(!1),E=W2e(),_=P.useRef(null);P.useEffect(()=>{if(a==="halloween-popup"&&_.current){const N=_.current.querySelector("script[data-tiktok-embed]");N&&N.remove();const $=document.createElement("script");$.src="https://www.tiktok.com/embed.js",$.async=!0,$.setAttribute("data-tiktok-embed","true"),_.current.appendChild($)}},[a]);const C=(N,$,R)=>{if(N==="url"&&R)window.open(R,"_blank");else if(N==="popup"&&$)c($),u(D=>{const B=new Set(D);return B.delete($),B}),document.body.offsetWidth;else if(N==="wallet")r?i():e();else if(N==="mint"){if(!n){alert("Please connect your wallet first!");return}h(!0)}else N==="nft-gallery"?p(!0):N==="meme-generator"?w(!0):N==="chess"&&(r?(b(!0),setTimeout(()=>{b(!1),E("/chess")},1500)):e().then(()=>{const D=()=>{window.ethereum&&window.ethereum.selectedAddress?(b(!0),setTimeout(()=>{b(!1),E("/chess")},1500)):setTimeout(D,200)};D()}))},I=()=>c(null),A=N=>{u($=>new Set($).add(N)),c(null)},x=N=>{N==="mint-popup"?h(!0):N==="nft-gallery-popup"?p(!0):N==="meme-generator-popup"?w(!0):c(N),u($=>{const R=new Set($);return R.delete(N),R})},S=()=>h(!1),k=()=>p(!1),O=()=>w(!1),U=()=>{h(!1),u(N=>new Set(N).add("mint-popup"))},G=()=>{p(!1),u(N=>new Set(N).add("nft-gallery-popup"))},F=()=>{w(!1),u(N=>new Set(N).add("meme-generator-popup"))},T=m.jsxs("div",{onClick:()=>{r?i():e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:r?"limegreen":"red",fontWeight:"bold"},children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?"Connecting...":r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return m.jsxs("div",{className:t.body,children:[y&&m.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[m.jsx("img",{src:"/images/blueknight.png",alt:"Booting Chess...",style:{width:120,height:120,marginBottom:32}}),m.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),m.jsx(dpe,{onIconClick:C}),m.jsx(fpe,{minimizedWindows:Array.from(l),onRestoreWindow:x,walletButton:T,connectionStatus:{connected:r,address:n,ens:o||void 0}}),m.jsxs(no,{id:"chat-popup",isOpen:a==="chat-popup",onClose:I,onMinimize:A,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",m.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),m.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(no,{id:"purity-popup",isOpen:a==="purity-popup",onClose:I,onMinimize:A,children:[m.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),m.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),m.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),m.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(no,{id:"lawbstarz-popup",isOpen:a==="lawbstarz-popup",onClose:I,onMinimize:A,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:[" LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER  666x PREMIUM PFP COLLECTION  LAWBSTARZ IS A MUSIC NFT  LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE  LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"}),"  LED BY NETWORK SPIRITUALITY  666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 "]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsxs("blockquote",{className:"twitter-tweet","data-media-max-width":"560",children:[m.jsxs("p",{lang:"en",dir:"ltr",children:["The following  has been transcripted from a live news broadcast:",m.jsx("br",{}),m.jsx("br",{}),"Anchor: Good evening, viewers. Tonight, we embark on an extraordinary journey that defies rational explanation. It all began with February's Cigawrette Packs cargo ship hijacking, little did we know that the.. ",m.jsx("a",{href:"https://t.co/BWgLOk59N4",children:"pic.twitter.com/BWgLOk59N4"})]})," wables (@wables411) ",m.jsx("a",{href:"https://twitter.com/wables411/status/1669009492007354369?ref_src=twsrc%5Etfw",children:"June 14, 2023"})]}),m.jsx("script",{async:!0,src:"https://platform.twitter.com/widgets.js"}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(no,{id:"lawbstation-popup",isOpen:a==="lawbstation-popup",onClose:I,onMinimize:A,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(no,{id:"nexus-popup",isOpen:a==="nexus-popup",onClose:I,onMinimize:A,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsxs(no,{id:"lawbsters-popup",isOpen:a==="lawbsters-popup",onClose:I,onMinimize:A,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx(Due,{id:"1620879129850834944"})}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsx(no,{id:"pixelawbs-popup",isOpen:a==="pixelawbs-popup",onClose:I,onMinimize:A,children:(()=>{const N=$=>{$.preventDefault(),c(null),h(!0)};return m.jsxs(m.Fragment,{children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:N,children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),m.jsxs(no,{id:"halloween-popup",isOpen:a==="halloween-popup",onClose:I,onMinimize:A,children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),m.jsx("div",{ref:_,style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:m.jsxs("section",{children:[m.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore  minting rn on @ourzora via @PC69 ",m.jsx("a",{target:"_blank",rel:"noreferrer",title:" original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:" original sound - wables.eth"})]})})})]}),m.jsxs(no,{id:"lawb-popup",isOpen:a==="lawb-popup",onClose:I,onMinimize:A,children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:" $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),m.jsx(mpe,{isOpen:d,onClose:S,onMinimize:U,walletAddress:n||""}),m.jsx(r2e,{isOpen:f,onClose:k,onMinimize:G,walletAddress:n}),m.jsx(no,{id:"meme-generator-popup",isOpen:g,onClose:O,onMinimize:F,children:m.jsx(zH,{})})]})}const dDe=ha({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),rU=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],hDe=({onBack:t,walletAddress:e})=>{const n=dDe(),{open:r}=w1(),[s,i]=P.useState([]),[o,a]=P.useState(!0),[c,l]=P.useState(null),[u,d]=P.useState(rU[0]),[h,f]=P.useState(!1),[p,g]=P.useState(null),[w,y]=P.useState("all"),[b,E]=P.useState(null),_=P.useCallback(async()=>{var x,S;try{if((x=window.solana)!=null&&x.isPhantom){const k=await window.solana.connect();g(k.publicKey.toString());return}if((S=window.solflare)!=null&&S.isSolflare){const k=await window.solflare.connect();g(k.publicKey.toString());return}r()}catch(k){console.error("Failed to connect Solana wallet:",k),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);P.useEffect(()=>{var x,S;(x=window.solana)!=null&&x.publicKey?g(window.solana.publicKey.toString()):(S=window.solflare)!=null&&S.publicKey&&g(window.solflare.publicKey.toString())},[]),P.useEffect(()=>{(async()=>{a(!0);try{let S,k=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}k=p,S=await ppe(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",S.data.length)}else u.api==="opensea"?S=await FO(u.slug,100,k):S=await jO(u.slug,1,100,k);w==="owned"&&p&&(console.log("Filtering for owner:",p),S.data.some(U=>U.owners&&U.owners.length>0)?S.data=S.data.filter(U=>U.owners.some(F=>F.owner_of&&F.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),E("Owner data not available for this Solana collection. Showing all NFTs."))),i(S.data)}catch(S){console.error(S)}finally{a(!1)}})()},[e,u,p,w]),P.useEffect(()=>{h&&_()},[h,_]);const C=async x=>{if(a(!0),u.api==="opensea"&&u.chain)try{const S=await L7(u.chain,x.address,x.token_id.toString()),k={...x,attributes:JSON.stringify(S.traits||[])};l(k)}catch(S){console.error("Failed to fetch full NFT details",S),l(x)}else l(x);a(!1)},I=()=>{if(!c)return null;let x=[];try{x=JSON.parse(c.attributes||"[]")}catch(S){console.error("Failed to parse NFT attributes:",S)}return m.jsxs("div",{className:n.detailView,children:[m.jsx("img",{src:c.image,alt:c.name}),m.jsx("h2",{children:c.name}),m.jsx("h4",{children:"Traits:"}),m.jsx("ul",{children:x.map((S,k)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[S.trait_type,":"]})," ",S.value]},k))})]})},A=()=>m.jsxs(m.Fragment,{children:[m.jsx("div",{className:n.collectionSelector,children:rU.map(x=>m.jsx("button",{className:`${n.collectionButton} ${u.slug===x.slug?"active":""}`,onClick:()=>d(x),children:x.name},x.slug))}),m.jsxs("div",{className:n.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>y("all"),style:{background:w==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:w==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>y("owned"),disabled:!e&&!p,style:{background:w==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:w==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{_()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),b&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:b}),u.api==="opensea-solana"&&!p&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?m.jsx("div",{className:n.loading,children:"Loading NFTs..."}):m.jsx("div",{className:n.grid,children:s.map(x=>{let S=x.image||x.image_url||x.image_url_shrunk||"/assets/pixelawb.png";return m.jsxs("div",{className:n.gridItem,onClick:()=>void C(x),children:[m.jsx("img",{src:S,alt:x.name,onError:k=>{k.currentTarget.src!==x.image_url&&x.image_url?k.currentTarget.src=x.image_url:k.currentTarget.src!==x.image_url_shrunk&&x.image_url_shrunk?k.currentTarget.src=x.image_url_shrunk:k.currentTarget.src="/assets/pixelawb.png"}}),m.jsx("span",{children:x.name})]},x.id)})})]})]});return m.jsxs("div",{className:n.galleryContainer,children:[m.jsxs("header",{className:n.header,children:[m.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),m.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),m.jsx("div",{className:n.content,children:o?m.jsx("p",{className:n.loading,children:"Loading..."}):c?I():A()})]})},fDe=ha({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),jo=({isOpen:t,onClose:e,title:n,children:r})=>{const s=fDe();return t?m.jsx("div",{className:s.overlay,children:m.jsxs("div",{className:s.popup,children:[m.jsxs("div",{className:s.titleBar,children:[m.jsx("span",{children:n}),m.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:""})]}),m.jsx("div",{className:s.content,children:r})]})}):null},pDe=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=P.useState([]),[i,o]=P.useState(!1),[a,c]=P.useState(!1),[l,u]=P.useState({}),[d,h]=P.useState(null),{data:f}=D9();P.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const _=await $7(n);s(_);const C={};_.forEach(I=>{C[I.id]=0}),u(C)}catch(_){h(_.message)}finally{o(!1)}},g=(_,C)=>{u(I=>({...I,[_]:Math.max(0,C)}))},w=async()=>{const _=Object.entries(l).filter(([,C])=>C>0).map(([C,I])=>({id:C,quantity:I}));if(_.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const C=await M7(n,_);if(C.success&&C.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const I=await f.sendTransaction({to:C.mintTransaction.to,value:BigInt(C.mintTransaction.value),data:C.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${I}`),e()}catch(I){h("Transaction failed: "+I.message)}}else throw new Error(C.message||"Could not retrieve minting transaction.")}catch(C){h("Minting failed: "+C.message)}finally{c(!1)}},y=(_,C)=>`${parseFloat(_)} ${C}`,b={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},E={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return m.jsxs(jo,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&m.jsx("div",{style:E,children:d}),i?m.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(_=>m.jsxs("div",{style:b,children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:_.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",y(_.token_price,_.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",_.wallet_limit===4294967295?"Unlimited":_.wallet_limit," per wallet"]}),m.jsx("input",{type:"number",min:0,max:_.wallet_limit===4294967295?void 0:_.wallet_limit,value:l[_.id]||"",onChange:C=>g(_.id,parseInt(C.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),m.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},_.id))]}),m.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:w,disabled:a,children:a?"Minting...":"Mint"})]})]})},gDe=ha({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),mDe=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],yDe=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],wDe=()=>{const t=gDe(),{open:e}=w1(),{address:n,isConnected:r}=O0(),{isPending:s}=P9(),{disconnect:i}=O9(),{data:o}=k9({address:n}),[a,c]=P.useState("main"),[l,u]=P.useState(!1),[d,h]=P.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=P.useState(!1),[g,w]=P.useState(!1),[y,b]=P.useState(!1),[E,_]=P.useState(!1),[C,I]=P.useState(!1),[A,x]=P.useState(!1),[S,k]=P.useState(!1),[O,U]=P.useState(!1),[G,F]=P.useState(!1),[T,N]=P.useState(!1),[$,R]=P.useState(!1),[D,B]=P.useState(!1),H=[{label:"Mint",icon:"/assets/mint.gif",action:()=>w(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>b(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>_(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>I(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],J=ie=>{ie.disabled||ie.action()};if(P.useEffect(()=>{const ie=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(ie)},[]),P.useEffect(()=>{u(!0)},[]),a==="gallery")return m.jsx(hDe,{onBack:()=>c("main"),walletAddress:n||void 0});function ee({open:ie,onClose:we,title:Z,nfts:se}){const ue=ce=>{switch(ce){case"lawbsters":x(!0);break;case"lawbstarz":k(!0);break;case"pixelawbs":U(!0);break;case"halloween":F(!0);break;case"lawbstation":N(!0);break;case"nexus":R(!0);break}};return m.jsx(jo,{isOpen:ie,onClose:we,title:Z,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:se.map(ce=>m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>ue(ce.id),children:[m.jsx("img",{src:ce.image,alt:ce.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),m.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:ce.name}),m.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:ce.description})]},ce.id))})})}function ne({open:ie,onClose:we}){return ie?m.jsxs(jo,{isOpen:ie,onClose:we,title:"$LAWB",children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:" $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return m.jsxs("div",{className:t.mobileContainer,children:[m.jsx("header",{className:t.header,children:m.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),m.jsx("div",{className:t.iconGrid,children:H.map(ie=>m.jsxs("div",{className:t.icon,onClick:()=>J(ie),children:[m.jsx("img",{src:ie.icon,alt:ie.label}),m.jsx("span",{children:ie.label})]},ie.label))}),l&&m.jsxs(jo,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&m.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:m.jsxs("div",{className:t.menuModal,onClick:ie=>ie.stopPropagation(),children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),m.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),B(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),m.jsx(pDe,{isOpen:g,onClose:()=>w(!1),walletAddress:n||""}),m.jsx(ee,{open:y,onClose:()=>b(!1),title:"EVM NFT'S FOLDER",nfts:mDe}),m.jsx(ee,{open:E,onClose:()=>_(!1),title:"SOL NFTS FOLDER",nfts:yDe}),m.jsx(ne,{open:C,onClose:()=>I(!1)}),m.jsxs(jo,{isOpen:A,onClose:()=>x(!1),title:"Lawbsters",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(jo,{isOpen:S,onClose:()=>k(!1),title:"Lawbstarz",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:[" LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER  666x PREMIUM PFP COLLECTION  LAWBSTARZ IS A MUSIC NFT  LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE  LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"}),"  LED BY NETWORK SPIRITUALITY  666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 "]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(jo,{isOpen:O,onClose:()=>U(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{U(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),m.jsxs(jo,{isOpen:G,onClose:()=>F(!1),title:"A Lawbster Halloween",children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),m.jsxs(jo,{isOpen:T,onClose:()=>N(!1),title:"Lawbstation",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(jo,{isOpen:$,onClose:()=>R(!1),title:"Nexus",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsx(jo,{isOpen:D,onClose:()=>B(!1),title:"Meme Generator",children:m.jsx(zH,{})}),m.jsxs("div",{className:t.taskbar,children:[m.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),m.jsxs("div",{className:t.walletStatus,children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),m.jsx("span",{className:t.clock,children:d})]})]})};function bDe(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=P.useState(e(t));function s(){r(e(t))}return P.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}const vDe=Symbol(),sU=Object.getPrototypeOf,tR=new WeakMap,EDe=t=>t&&(tR.has(t)?tR.get(t):sU(t)===Object.prototype||sU(t)===Array.prototype),_De=t=>EDe(t)&&t[vDe]||null,iU=(t,e=!0)=>{tR.set(t,e)},R_={},wk=t=>typeof t=="object"&&t!==null,CDe=t=>wk(t)&&!J0.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),nq=(t,e)=>{const n=nR.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return iU(r,!0),nR.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(J0.has(i))iU(i,!1);else if(Fu.has(i)){const[c,l]=Fu.get(i);a.value=nq(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},SDe=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(oU(l,o)||t0.has(o)&&oU(l,t0.get(o))))return!0;n(i),wk(o)&&(o=_De(o)||o);const u=!Fu.has(o)&&IDe(o)?Ln(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),Fu=new WeakMap,J0=new WeakSet,nR=new WeakMap,qm=[1,1],t0=new WeakMap;let oU=Object.is,ADe=(t,e)=>new Proxy(t,e),IDe=CDe,NDe=nq,xDe=SDe;function Ln(t={}){if(!wk(t))throw new Error("object required");const e=t0.get(t);if(e)return e;let n=qm[0];const r=new Set,s=(w,y=++qm[0])=>{n!==y&&(n=y,r.forEach(b=>b(w,y)))};let i=qm[1];const o=(w=++qm[1])=>(i!==w&&!r.size&&(i=w,c.forEach(([y])=>{const b=y[1](w);b>n&&(n=b)})),n),a=w=>(y,b)=>{const E=[...y];E[1]=[w,...E[1]],s(E,b)},c=new Map,l=(w,y)=>{const b=!J0.has(y)&&Fu.get(y);if(b){if((R_?"production":void 0)!=="production"&&c.has(w))throw new Error("prop listener already exists");if(r.size){const E=b[2](a(w));c.set(w,[b,E])}else c.set(w,[b])}},u=w=>{var y;const b=c.get(w);b&&(c.delete(w),(y=b[1])==null||y.call(b))},d=w=>(r.add(w),r.size===1&&c.forEach(([b,E],_)=>{if((R_?"production":void 0)!=="production"&&E)throw new Error("remove already exists");const C=b[2](a(_));c.set(_,[b,C])}),()=>{r.delete(w),r.size===0&&c.forEach(([b,E],_)=>{E&&(E(),c.set(_,[b]))})});let h=!0;const f=xDe(()=>h,l,u,s),p=ADe(t,f);t0.set(t,p);const g=[t,o,d];return Fu.set(p,g),Reflect.ownKeys(t).forEach(w=>{const y=Object.getOwnPropertyDescriptor(t,w);"value"in y&&y.writable&&(p[w]=t[w])}),h=!1,p}function fi(t,e,n){const r=Fu.get(t);(R_?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function n0(t){const e=Fu.get(t);(R_?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return NDe(n,r())}function dg(t){return J0.add(t),t}function TDe(){return{proxyStateMap:Fu,refSet:J0,snapCache:nR,versionHolder:qm,proxyCache:t0}}function $s(t,e,n,r){let s=t[e];return fi(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:RDe,snapCache:PDe}=TDe(),wv=t=>RDe.has(t);function ODe(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=PDe.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return wv(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!wv(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!wv(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!wv(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=Ln(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var aU={};const ae={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof aU<"u"?aU.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},P_={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=ae.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},kDe={bigNumber(t){return t?new Fa(t):new Fa(0)},multiply(t,e){if(t===void 0||e===void 0)return new Fa(0);const n=new Fa(t),r=new Fa(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},DDe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],$De=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],MDe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],LDe={getERC20Abi:t=>ae.USDT_CONTRACT_ADDRESSES.includes(t)?MDe:DDe,getSwapAbi:()=>$De},iu={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},ht={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function hI(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const at={setItem(t,e){Gm()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Gm())return localStorage.getItem(t)||void 0},removeItem(t){Gm()&&localStorage.removeItem(t)},clear(){Gm()&&localStorage.clear()}};function Gm(){return typeof window<"u"&&typeof localStorage<"u"}function O_(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const xs={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,NAMES_SUPPORTED_CHAIN_NAMESPACES:[ae.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,DEFAULT_REMOTE_FEATURES:{socials:["google","x","discord","farcaster","github","apple","facebook"]},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},He={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=He.getActiveNamespace(),e=He.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{at.setItem(ht.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=at.getItem(ht.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{at.removeItem(ht.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{at.setItem(ht.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{at.setItem(ht.ACTIVE_CAIP_NETWORK_ID,t),He.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return at.getItem(ht.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{at.removeItem(ht.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=hI(t);at.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=He.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),at.setItem(ht.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=at.getItem(ht.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=hI(t);at.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return at.getItem(ht.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=hI(t);return at.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{at.setItem(ht.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return at.getItem(ht.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{at.removeItem(ht.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return at.getItem(ht.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=at.getItem(ht.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{at.setItem(ht.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return at.getItem(ht.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=at.getItem(ht.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));at.setItem(ht.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=He.getConnectedNamespaces();e.includes(t)||(e.push(t),He.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=He.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),He.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return at.getItem(ht.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{at.setItem(ht.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{at.removeItem(ht.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=at.getItem(ht.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=He.getBalanceCache();at.setItem(ht.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=He.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;He.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=He.getBalanceCache();e[t.caipAddress]=t,at.setItem(ht.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=at.getItem(ht.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=He.getBalanceCache();at.setItem(ht.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=He.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),He.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=He.getNativeBalanceCache();e[t.caipAddress]=t,at.setItem(ht.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=at.getItem(ht.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=He.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;He.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=He.getEnsCache();e[t.address]=t,at.setItem(ht.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=He.getEnsCache();at.setItem(ht.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=at.getItem(ht.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=He.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;He.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=He.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},at.setItem(ht.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=He.getIdentityCache();at.setItem(ht.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{at.removeItem(ht.PORTFOLIO_CACHE),at.removeItem(ht.NATIVE_BALANCE_CACHE),at.removeItem(ht.ENS_CACHE),at.removeItem(ht.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{at.setItem(ht.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=at.getItem(ht.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=He.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===ae.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};at.setItem(ht.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=at.getItem(ht.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=He.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),at.setItem(ht.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=at.getItem(ht.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=He.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),at.setItem(ht.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=He.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),at.setItem(ht.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(He.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},nt={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return nt.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=xs.TEN_SEC_MS:!0},isAllowedRetry(t,e=xs.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(nt.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+xs.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(nt.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!nt.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?He.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,nt.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return ae.W3M_API_URL},getBlockchainApiUrl(){return ae.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return ae.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?xs.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in ae.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function xm(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class X0{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await xm(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await xm(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await xm(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await xm(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await xm(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const UDe={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?xs.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(nt.isTelegram()){if(nt.isIos())return t.filter(e=>e!=="google");if(nt.isMac())return t.filter(e=>e!=="x");if(nt.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},st=Ln({features:xs.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:xs.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),gt={state:st,subscribeKey(t,e){return $s(st,t,e)},setOptions(t){Object.assign(st,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...st.remoteFeatures,...t};st.remoteFeatures=e,(n=st.remoteFeatures)!=null&&n.socials&&(st.remoteFeatures.socials=UDe.filterSocialsByPlatform(st.remoteFeatures.socials))},setFeatures(t){if(!t)return;st.features||(st.features=xs.DEFAULT_FEATURES);const e={...st.features,...t};st.features=e},setProjectId(t){st.projectId=t},setCustomRpcUrls(t){st.customRpcUrls=t},setAllWallets(t){st.allWallets=t},setIncludeWalletIds(t){st.includeWalletIds=t},setExcludeWalletIds(t){st.excludeWalletIds=t},setFeaturedWalletIds(t){st.featuredWalletIds=t},setTokens(t){st.tokens=t},setTermsConditionsUrl(t){st.termsConditionsUrl=t},setPrivacyPolicyUrl(t){st.privacyPolicyUrl=t},setCustomWallets(t){st.customWallets=t},setIsSiweEnabled(t){st.isSiweEnabled=t},setIsUniversalProvider(t){st.isUniversalProvider=t},setSdkVersion(t){st.sdkVersion=t},setMetadata(t){st.metadata=t},setDisableAppend(t){st.disableAppend=t},setEIP6963Enabled(t){st.enableEIP6963=t},setDebug(t){st.debug=t},setEnableWalletConnect(t){st.enableWalletConnect=t},setEnableWalletGuide(t){st.enableWalletGuide=t},setEnableAuthLogger(t){st.enableAuthLogger=t},setEnableWallets(t){st.enableWallets=t},setPreferUniversalLinks(t){st.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(xs.SIWX_DEFAULTS))t[e]??(t[e]=n);st.siwx=t},setConnectMethodsOrder(t){st.features={...st.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){st.features={...st.features,walletFeaturesOrder:t}},setSocialsOrder(t){st.remoteFeatures={...st.remoteFeatures,socials:t}},setCollapseWallets(t){st.features={...st.features,collapseWallets:t}},setEnableEmbedded(t){st.enableEmbedded=t},setAllowUnsupportedChain(t){st.allowUnsupportedChain=t},setManualWCControl(t){st.manualWCControl=t},setEnableNetworkSwitch(t){st.enableNetworkSwitch=t},setEnableReconnect(t){st.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(st.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){st.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return st.universalProviderConfigOverride},getSnapshot(){return n0(st)}},BDe=Object.freeze({enabled:!0,events:[]}),jDe=new X0({baseUrl:nt.getAnalyticsUrl(),clientId:null}),FDe=5,WDe=60*1e3,Al=Ln({...BDe}),zDe={state:Al,subscribeKey(t,e){return $s(Al,t,e)},async sendError(t,e){if(!Al.enabled)return;const n=Date.now();if(Al.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<WDe}).length>=FDe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Al.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=gt.state;await jDe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:nt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Al.enabled=!0},disable(){Al.enabled=!1},clearEvents(){Al.events=[]}};class hg extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,hg.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,hg):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function cU(t,e){const n=t instanceof hg?t:new hg(t instanceof Error?t.message:String(t),e,t);throw zDe.sendError(n,n.category),n}function xo(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return cU(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return cU(a,e)}},n[r]=i}else n[r]=s}),n}var fg={};const HDe="https://secure.walletconnect.org/sdk",qDe=(typeof process<"u"&&typeof fg<"u"?fg.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||HDe,GDe=(typeof process<"u"&&typeof fg<"u"?fg.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",VDe=(typeof process<"u"&&typeof fg<"u"?fg.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",ze={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Jr={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},La={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},KDe={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===La.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${La.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===La.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${La.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===ae.CHAIN.SOLANA&&t===La.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${La.COINBASE.url}/dapp?cb_url=${r}`)}},Ei=Ln({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),YDe={state:Ei,subscribeNetworkImages(t){return fi(Ei.networkImages,()=>t(Ei.networkImages))},subscribeKey(t,e){return $s(Ei,t,e)},subscribe(t){return fi(Ei,()=>t(Ei))},setWalletImage(t,e){Ei.walletImages[t]=e},setNetworkImage(t,e){Ei.networkImages[t]=e},setChainImage(t,e){Ei.chainImages[t]=e},setConnectorImage(t,e){Ei.connectorImages={...Ei.connectorImages,[t]:e}},setTokenImage(t,e){Ei.tokenImages[t]=e},setCurrencyImage(t,e){Ei.currencyImages[t]=e}},Ko=xo(YDe),QDe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},fI=Ln({networkImagePromises:{}}),ZDe={async fetchWalletImage(t){if(t)return await ct._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(fI.networkImagePromises[t]||(fI.networkImagePromises[t]=ct._fetchNetworkImage(t)),await fI.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Ko.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Ko.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Ko.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Ko.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return Ko.state.connectorImages[t.imageId]},getChainImage(t){return Ko.state.networkImages[QDe[t]]}},Il=Ln({message:"",variant:"info",open:!1}),JDe={state:Il,subscribeKey(t,e){return $s(Il,t,e)},open(t,e){const{debug:n}=gt.state,{shortMessage:r,longMessage:s}=t;n&&(Il.message=r,Il.variant=e,Il.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Il.open=!1,Il.message="",Il.variant="info"}},hd=xo(JDe),XDe=nt.getAnalyticsUrl(),e3e=new X0({baseUrl:XDe,clientId:null}),t3e=["MODAL_CREATED"],_c=Ln({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),qn={state:_c,subscribe(t){return fi(_c,()=>t(_c))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=gt.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Xt.state.address;if(t3e.includes(t.data.event)||typeof window>"u")return;await e3e.post({path:"/e",params:qn.getSdkProperties(),body:{eventId:nt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),_c.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===ae.HTTP_STATUS_CODES.FORBIDDEN&&!_c.reportedErrors.FORBIDDEN&&(hd.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Gm()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),_c.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;_c.timestamp=Date.now(),_c.data=t,(e=gt.state.features)!=null&&e.analytics&&qn._sendAnalyticsEvent(_c)}},n3e=nt.getApiUrl(),zs=new X0({baseUrl:n3e,clientId:null}),r3e=40,lU=4,s3e=20,bt=Ln({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),ct={state:bt,subscribeKey(t,e){return $s(bt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=gt.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return gt.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${zs.baseUrl}/getWalletImage/${t}`,n=await zs.getBlob({path:e,params:ct._getSdkProperties()});Ko.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${zs.baseUrl}/public/getAssetImage/${t}`,n=await zs.getBlob({path:e,params:ct._getSdkProperties()});Ko.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${zs.baseUrl}/public/getAssetImage/${t}`,n=await zs.getBlob({path:e,params:ct._getSdkProperties()});Ko.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${zs.baseUrl}/public/getCurrencyImage/${t}`,n=await zs.getBlob({path:e,params:ct._getSdkProperties()});Ko.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${zs.baseUrl}/public/getTokenImage/${t}`,n=await zs.getBlob({path:e,params:ct._getSdkProperties()});Ko.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return nt.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===La.COINBASE.id?!0:V.state.activeChain==="solana"&&(n.id===La.SOLFLARE.id||n.id===La.PHANTOM.id)):t},async fetchProjectConfig(){return(await zs.get({path:"/appkit/v1/config",params:ct._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await zs.get({path:"/projects/v1/origins",params:ct._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===ae.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=ae.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=V.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!ZDe.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>ct._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Qe.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>ct._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>ct._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>ct._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];ct._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(La).map(o=>o.id));const r=await zs.get({path:"/getWallets",params:{...ct._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:ct._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=gt.state;if(t!=null&&t.length){const e={...ct._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??lU,include:t},{data:n}=await ct.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>ct._fetchWalletImage(i))),bt.featured=r,bt.allFeatured=r}},async fetchRecommendedWallets(){try{bt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=gt.state,r=[...e??[],...n??[]].filter(Boolean),s=V.getRequestedCaipNetworkIds().join(","),i={page:1,entries:lU,include:t,exclude:r,chains:s},{data:o,count:a}=await ct.fetchWallets(i),c=He.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>ct._fetchWalletImage(d))),bt.recommended=o,bt.allRecommended=o,bt.count=a??0}catch{}finally{bt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=gt.state,s=V.getRequestedCaipNetworkIds().join(","),i=[...bt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:r3e,include:e,exclude:i,chains:s},{data:a,count:c}=await ct.fetchWallets(o),l=a.slice(0,s3e).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>ct._fetchWalletImage(u))),bt.wallets=nt.uniqueBy([...bt.wallets,...ct._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),bt.count=c>bt.count?c:bt.count,bt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await ct.fetchWallets(e);n&&n.forEach(r=>{bt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=gt.state,s=V.getRequestedCaipNetworkIds().join(",");bt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await ct.fetchWallets(i);qn.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>ct._fetchWalletImage(c)),nt.wait(300)]),bt.search=ct._filterOutExtensions(o)},initPromise(t,e){const n=bt.promises[t];return n||(bt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&ct.initPromise("connectorImages",ct.fetchConnectorImages),e&&ct.initPromise("featuredWallets",ct.fetchFeaturedWallets),n&&ct.initPromise("recommendedWallets",ct.fetchRecommendedWallets),r&&ct.initPromise("networkImages",ct.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=gt.state.features)!=null&&t.analytics&&ct.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await zs.get({path:"/getAnalyticsConfig",params:ct._getSdkProperties()});gt.setFeatures({analytics:t})}catch{gt.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){bt.featured=bt.allFeatured,bt.recommended=bt.allRecommended;return}const e=V.getRequestedCaipNetworkIds().join(",");bt.featured=bt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),bt.recommended=bt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),bt.filteredWallets=bt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){bt.filteredWallets=[]},setFilterByNamespace(t){if(!t){bt.featured=bt.allFeatured,bt.recommended=bt.allRecommended;return}const e=V.getRequestedCaipNetworkIds().join(",");bt.featured=bt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),bt.recommended=bt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),bt.filteredWallets=bt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},fn=Ln({view:"Connect",history:["Connect"],transactionStack:[]}),i3e={state:fn,subscribeKey(t,e){return $s(fn,t,e)},pushTransactionStack(t){fn.transactionStack.push(t)},popTransactionStack(t){const e=fn.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),pt.goBack();break;case"cancel":s==null||s(),pt.goBack();break}},push(t,e){t!==fn.view&&(fn.view=t,fn.history.push(t),fn.data=e)},reset(t,e){fn.view=t,fn.history=[t],fn.data=e},replace(t,e){fn.history.at(-1)===t||(fn.view=t,fn.history[fn.history.length-1]=t,fn.data=e)},goBack(){var r;const t=V.state.activeCaipAddress,e=pt.state.view==="ConnectingFarcaster",n=!t&&e;if(fn.history.length>1){fn.history.pop();const[s]=fn.history.slice(-1);s&&(t&&s==="Connect"?fn.view="Account":fn.view=s)}else xn.close();(r=fn.data)!=null&&r.wallet&&(fn.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Xt.setFarcasterUrl(void 0,V.state.activeChain);const a=Qe.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=n0(gt.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(fn.history.length>1){fn.history=fn.history.slice(0,t+1);const[e]=fn.history.slice(-1);e&&(fn.view=e)}},goBackOrCloseModal(){pt.state.history.length>1?pt.goBack():xn.close()}},pt=xo(i3e),Cc=Ln({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),rR={state:Cc,subscribe(t){return fi(Cc,()=>t(Cc))},setThemeMode(t){Cc.themeMode=t;try{const e=Qe.getAuthConnector();if(e){const n=rR.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:O_(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Cc.themeVariables={...Cc.themeVariables,...t};try{const e=Qe.getAuthConnector();if(e){const n=rR.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:O_(Cc.themeVariables,Cc.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return n0(Cc)}},bv=xo(rR),rq={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Vt=Ln({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...rq},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),o3e={state:Vt,subscribe(t){return fi(Vt,()=>{t(Vt)})},subscribeKey(t,e){return $s(Vt,t,e)},initialize(t){t.forEach(e=>{const n=He.getConnectedConnectorId(e);n&&Qe.setConnectorId(n,e)})},setActiveConnector(t){t&&(Vt.activeConnector=dg(t))},setConnectors(t){t.filter(s=>!Vt.allConnectors.some(i=>i.id===s.id&&Qe.getConnectorName(i.name)===Qe.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&Vt.allConnectors.push(dg(s))});const n=Qe.getEnabledNamespaces(),r=Qe.getEnabledConnectors(n);Vt.connectors=Qe.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(Vt.filterByNamespaceMap).forEach(e=>{Vt.filterByNamespaceMap[e]=!1}),t.forEach(e=>{Vt.filterByNamespaceMap[e]=!0}),Qe.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){Vt.filterByNamespaceMap[t]=e,Qe.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Qe.getEnabledNamespaces(),e=Qe.getEnabledConnectors(t),n=Qe.areAllNamespacesEnabled();Vt.connectors=Qe.mergeMultiChainConnectors(e),n?ct.clearFilterByNamespaces():ct.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(Vt.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return Vt.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(Vt.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Qe.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===ae.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Qe.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===ae.CONNECTOR_ID.AUTH){const s=t,i=n0(gt.state),o=bv.getSnapshot().themeMode,a=bv.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:O_(a,o)}),Qe.setConnectors([t])}else Qe.setConnectors([t])},getAuthConnector(t){var r;const e=t||V.state.activeChain,n=Vt.connectors.find(s=>s.id===ae.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return Vt.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return Vt.allConnectors.find(e=>e.id===t)},getConnector(t,e){return Vt.allConnectors.filter(r=>r.chain===V.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=n0(gt.state),r=bv.getSnapshot().themeMode,s=bv.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:O_(s,r)})},getConnectorsByNamespace(t){const e=Vt.allConnectors.filter(n=>n.chain===t);return Qe.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return V.checkIfSmartAccountEnabled()&&ic(t)===Jr.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=Qe.getConnector(t.id,t.rdns);KDe.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,V.state.activeChain),e?pt.push("ConnectingExternal",{connector:e}):pt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Qe.getConnectorsByNamespace(t):Qe.mergeMultiChainConnectors(Vt.allConnectors)},setFilterByNamespace(t){Vt.filterByNamespace=t,Vt.connectors=Qe.getConnectors(t),ct.setFilterByNamespace(t)},setConnectorId(t,e){t&&(Vt.activeConnectorIds={...Vt.activeConnectorIds,[e]:t},He.setConnectedConnectorId(e,t))},removeConnectorId(t){Vt.activeConnectorIds={...Vt.activeConnectorIds,[t]:void 0},He.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return Vt.activeConnectorIds[t]},isConnected(t){return t?!!Vt.activeConnectorIds[t]:Object.values(Vt.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){Vt.activeConnectorIds={...rq}}},Qe=xo(o3e),a3e=1e3,Tm={checkNamespaceConnectorId(t,e){return Qe.getConnectorId(t)===e},isSocialProvider(t){return xs.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&Qe.setActiveConnector(e),s==null||s(nt.isMobile()&&t),r){const l=xn.subscribeKey("open",u=>{u||(pt.state.view!==r&&pt.replace(r),l(),a(new Error("Modal closed")))})}const c=V.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&xn.close(),c(),o(iu.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=V.subscribeKey("activeCaipAddress",s=>{s&&(xn.close(),r(),e(iu.parseCaipAddress(s)))});Ye.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=Xt.state.socialWindow,i=Xt.state.socialProvider,o=!1,a=null;const c=V.subscribeKey("activeCaipAddress",l=>{l&&(e&&xn.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===ae.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=Qe.getAuthConnector();if(g&&!o){s&&(s.close(),Xt.setSocialWindow(void 0,V.state.activeChain),s=Xt.state.socialWindow),o=!0;const w=f.data.resultUri;i&&qn.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}});const y=V.state.activeCaipNetwork;if(await g.provider.connectSocial({uri:w,chainId:y==null?void 0:y.caipNetworkId}),i){He.setConnectedSocialProvider(i),await Ye.connectExternal({id:g.id,type:g.type,socialUri:w},g.chain);const b=V.state.activeCaipAddress;if(!b){u(new Error("Failed to connect"));return}l(iu.parseCaipAddress(b)),qn.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&qn.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&qn.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(Xt.setSocialProvider(t,V.state.activeChain),i=Xt.state.socialProvider,qn.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=xn.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=Qe.getAuthConnector();if(p&&!Xt.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();Xt.setFarcasterUrl(g,V.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=Qe.getAuthConnector();a=nt.returnOpenHref(`${ae.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){Xt.setSocialWindow(a,V.state.activeChain),s=Xt.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=xn.subscribeKey("open",c=>{c||(pt.state.view!==e&&pt.replace(e),a(),i(new Error("Modal closed")))})}const o=V.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&xn.close(),o(),s(iu.parseCaipAddress(a)))})})},async updateEmail(){const t=He.getConnectedConnectorId(V.state.activeChain),e=Qe.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==ae.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return pt.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(xn.close(),clearInterval(i),o(),r({email:a}))},a3e),o=xn.subscribeKey("open",a=>{a||(pt.state.view!=="Connect"&&pt.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return V.checkIfSmartAccountEnabled()&&ic(t)===Jr.ACCOUNT_TYPES.EOA}};function sq(){var r,s;const t=((r=V.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=V.state.activeCaipNetwork)==null?void 0:s.id)||1,n=xs.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function ic(t){var n;return(n=V.getAccountData(t))==null?void 0:n.preferredAccountType}const iq={getConnectionStatus(t,e){const n=Qe.state.activeConnectorIds[e],r=Ye.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=gt.state.remoteFeatures)!=null&&a.multiWallet),n=Qe.state.activeConnectorIds[t],r=Ye.getConnections(t),i=(Ye.state.recentConnections.get(t)??[]).filter(c=>Qe.getConnectorById(c.connectorId)),o=iq.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},fd=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),fr=Ln({...fd}),c3e={state:fr,subscribeKey(t,e){return $s(fr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=nt.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){fr.message=fd.message,fr.variant=fd.variant,fr.svg=fd.svg,fr.open=fd.open,fr.autoClose=fd.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=fd.autoClose}){fr.open?(fr.open=!1,setTimeout(()=>{fr.message=t,fr.variant=n,fr.svg=e,fr.open=!0,fr.autoClose=r},150)):(fr.message=t,fr.variant=n,fr.svg=e,fr.open=!0,fr.autoClose=r)}},ou=c3e,An=Ln({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),l3e={state:An,subscribe(t){return fi(An,()=>t(An))},setLastNetworkInView(t){An.lastNetworkInView=t},async fetchTransactions(t,e){var n;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");An.loading=!0;try{const r=await dt.fetchTransactions({account:t,cursor:An.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=V.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),s=Vm.filterSpamTransactions(r.data),i=Vm.filterByConnectedChain(s),o=[...An.transactions,...i];An.loading=!1,e==="coinbase"?An.coinbaseTransactions=Vm.groupTransactionsByYearAndMonth(An.coinbaseTransactions,r.data):(An.transactions=o,An.transactionsByYear=Vm.groupTransactionsByYearAndMonth(An.transactionsByYear,i)),An.empty=o.length===0,An.next=r.next?r.next:void 0}catch{const s=V.state.activeChain;qn.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:gt.state.projectId,cursor:An.next,isSmartAccount:ic(s)===Jr.ACCOUNT_TYPES.SMART_ACCOUNT}}),ou.showError("Failed to fetch transactions"),An.loading=!1,An.empty=!0,An.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=V.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){An.next=void 0},resetTransactions(){An.transactions=[],An.transactionsByYear={},An.lastNetworkInView=void 0,An.loading=!1,An.empty=!1,An.next=void 0}},Vm=xo(l3e,"API_ERROR"),Ut=Ln({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let sd;const u3e={state:Ut,subscribe(t){return fi(Ut,()=>t(Ut))},subscribeKey(t,e){return $s(Ut,t,e)},_getClient(){return Ut._client},setClient(t){Ut._client=dg(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);Ye.syncStorageConnections(e)},syncStorageConnections(t){const e=He.getConnections(),n=t??Array.from(V.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(Ut.recentConnections);i.set(r,s),Ut.recentConnections=i}},getConnections(t){return t?Ut.connections.get(t)??[]:[]},hasAnyConnection(t){const e=Ye.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(nt.isTelegram()||nt.isSafari()&&nt.isIos()){if(sd){await sd,sd=void 0;return}if(!nt.isPairingExpired(Ut==null?void 0:Ut.wcPairingExpiry)){const s=Ut.wcUri;Ut.wcUri=s;return}sd=(e=(t=Ye._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),Ye.state.status="connecting",await sd,sd=void 0,Ut.wcPairingExpiry=void 0,Ye.state.status="connected"}else await((r=(n=Ye._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=Ye._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&V.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=Ye._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||V.state.activeChain;e&&Qe.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;xn.setLoading(!0,V.state.activeChain);const n=Qe.getAuthConnector();n&&(Xt.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),He.setPreferredAccountTypes(Object.entries(V.state.chains).reduce((s,[i,o])=>{const a=i,c=ic(a);return c!==void 0&&(s[a]=c),s},{})),await Ye.reconnectExternal(n),xn.setLoading(!1,V.state.activeChain),qn.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=V.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=Ye._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=Ye._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=Ye._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=Ye._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=Ye._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=Ye._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=Ye._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=Ye._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=Ye._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=Ye._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=Ye._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=Ye._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Ut.wcUri=void 0,Ut.wcPairingExpiry=void 0,Ut.wcLinking=void 0,Ut.recentWallet=void 0,Ut.status="disconnected",Vm.resetTransactions(),He.deleteWalletConnectDeepLink()},resetUri(){Ut.wcUri=void 0,Ut.wcPairingExpiry=void 0,sd=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=Ye.state;t&&He.setWalletConnectDeepLink(t),e&&He.setAppKitRecent(e),qn.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=pt.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Ut.wcBasic=t},setUri(t){Ut.wcUri=t,Ut.wcPairingExpiry=nt.getPairingExpiry()},setWcLinking(t){Ut.wcLinking=t},setWcError(t){Ut.wcError=t,Ut.buffering=!1},setRecentWallet(t){Ut.recentWallet=t},setBuffering(t){Ut.buffering=t},setStatus(t){Ut.status=t},setIsSwitchingConnection(t){Ut.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=Ye._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new hg("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(Ut.connections);n.set(e,t),Ut.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=Xt.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&Tm.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await Ye.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=Qe.getConnectorById(t.connectorId),s=t.connectorId===ae.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await Ye.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await Ye.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=Qe.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===ae.CONNECTOR_ID.AUTH,a=t.connectorId===ae.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&Tm.isSocialProvider(i)){const{address:d}=await Tm.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){xn.open({view:"ConnectingFarcaster"})},onConnect(){pt.replace("ProfileWallets")}});c=d}else{const{address:d}=await Tm.connectEmail({closeModalOnConnect:r,onOpen(){xn.open({view:"EmailLogin"})},onConnect(){pt.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await Tm.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){xn.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){pt.replace("ProfileWallets")}});c=d}else{const d=await Ye.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await Ye.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=Xt.getCaipAddress(n);if(o){const{address:c}=iu.parseCaipAddress(o);i=c}const a=iq.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await Ye.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await Ye.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},Ye=xo(u3e),Tf=Ln({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),yp={state:Tf,subscribe(t){return fi(Tf,()=>t(Tf))},subscribeOpen(t){return $s(Tf,"open",t)},set(t){Object.assign(Tf,{...Tf,...t})}},d3e={async getTokenList(){var r;const t=V.state.activeCaipNetwork,e=await dt.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=V.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(Ye==null?void 0:Ye.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await dt.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await dt.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=Ye.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await bk.getMyTokensWithBalance(t);return Xt.setTokenBalance(e,V.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:sq(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},cn=Ln({tokenBalances:[],loading:!1}),h3e={state:cn,subscribe(t){return fi(cn,()=>t(cn))},subscribeKey(t,e){return $s(cn,t,e)},setToken(t){t&&(cn.token=dg(t))},setTokenAmount(t){cn.sendTokenAmount=t},setReceiverAddress(t){cn.receiverAddress=t},setReceiverProfileImageUrl(t){cn.receiverProfileImageUrl=t},setReceiverProfileName(t){cn.receiverProfileName=t},setNetworkBalanceInUsd(t){cn.networkBalanceInUSD=t},setLoading(t){cn.loading=t},async sendToken(){var t;try{switch(nn.setLoading(!0),(t=V.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await nn.sendEvmToken();return;case"solana":await nn.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{nn.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=V.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=ic(t);if(!nn.state.sendTokenAmount||!nn.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!nn.state.token)throw new Error("A token is required");(n=nn.state.token)!=null&&n.address?(qn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Jr.ACCOUNT_TYPES.SMART_ACCOUNT,token:nn.state.token.address,amount:nn.state.sendTokenAmount,network:((r=V.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await nn.sendERC20Token({receiverAddress:nn.state.receiverAddress,tokenAddress:nn.state.token.address,sendTokenAmount:nn.state.sendTokenAmount,decimals:nn.state.token.quantity.decimals})):(qn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Jr.ACCOUNT_TYPES.SMART_ACCOUNT,token:nn.state.token.symbol||"",amount:nn.state.sendTokenAmount,network:((s=V.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await nn.sendNativeToken({receiverAddress:nn.state.receiverAddress,sendTokenAmount:nn.state.sendTokenAmount,decimals:nn.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;cn.loading=!0;const e=(i=V.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=V.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=V.state.activeCaipAddress,s=r?nt.getPlainAddress(r):void 0;if(cn.lastRetry&&!nt.isAllowedRetry(cn.lastRetry,30*xs.ONE_SEC_MS))return cn.loading=!1,[];try{if(s&&e&&n){const a=await bk.getMyTokensWithBalance();return cn.tokenBalances=a,cn.lastRetry=void 0,a}}catch(a){cn.lastRetry=Date.now(),t==null||t(a),ou.showError("Token Balance Unavailable")}finally{cn.loading=!1}return[]},fetchNetworkBalance(){if(cn.tokenBalances.length===0)return;const t=d3e.mapBalancesToSwapTokens(cn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===sq());e&&(cn.networkBalanceInUSD=e?kDe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;pt.pushTransactionStack({});const e=t.receiverAddress,n=Xt.state.address,r=Ye.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await Ye.sendTransaction({chainNamespace:ae.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),qn.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:ic("eip155")===Jr.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=nn.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=V.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=Ye._getClient())==null||a.updateBalance("eip155"),nn.resetSend()},async sendERC20Token(t){pt.pushTransactionStack({onSuccess(){pt.replace("Account")}});const e=Ye.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Xt.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=nt.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await Ye.writeContract({fromAddress:Xt.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:LDe.getERC20Abi(n),chainNamespace:ae.CHAIN.EVM}),nn.resetSend()}},async sendSolanaToken(){var t;if(!nn.state.sendTokenAmount||!nn.state.receiverAddress)throw new Error("An amount and receiver address are required");pt.pushTransactionStack({onSuccess(){pt.replace("Account")}}),await Ye.sendTransaction({chainNamespace:"solana",to:nn.state.receiverAddress,value:nn.state.sendTokenAmount}),(t=Ye._getClient())==null||t.updateBalance("solana"),nn.resetSend()},resetSend(){cn.token=void 0,cn.sendTokenAmount=void 0,cn.receiverAddress=void 0,cn.receiverProfileImageUrl=void 0,cn.receiverProfileName=void 0,cn.loading=!1,cn.tokenBalances=[]}},nn=xo(h3e),pI={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},vv={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Ne=Ln({chains:ODe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),f3e={state:Ne,subscribe(t){return fi(Ne,()=>{t(Ne)})},subscribeKey(t,e){return $s(Ne,t,e)},subscribeChainProp(t,e,n){let r;return fi(Ne.chains,()=>{var i;const s=n||Ne.activeChain;if(s){const o=(i=Ne.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=He.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=gt.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Ne.noAdapters=!0),Ne.noAdapters||(Ne.activeChain=a==null?void 0:a.namespace,Ne.activeCaipNetwork=i,V.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Ne.activeChain&&yp.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),h=He.getPreferredAccountTypes()||{},f={...gt.state.defaultAccountTypes,...h};V.state.chains.set(u,{namespace:u,networkState:Ln({...vv,caipNetwork:d==null?void 0:d[0]}),accountState:Ln({...pI,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),V.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Ne.activeChain===t){const r=Array.from(Ne.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&V.setActiveCaipNetwork(s)}}Ne.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Ne.chains.set(t.namespace,{namespace:t.namespace,networkState:{...vv,caipNetwork:r[0]},accountState:pI,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),V.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Ne.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Ne.chains.set(t.chainNamespace,{...e,caipNetworks:r}),V.setRequestedCaipNetworks(r,t.chainNamespace),Qe.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Ne.chains.get(t);if(n){const o=((r=Ne.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&V.setActiveCaipNetwork(n.caipNetworks[0]),Ne.chains.set(t,{...n,caipNetworks:a}),V.setRequestedCaipNetworks(a||[],t),a.length===0&&Qe.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Ne.chains.get(t);n&&(n.networkState={...n.networkState||vv,...e},Ne.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Ne.chains.get(t);if(r){const s={...r.accountState||pI,...e};Ne.chains.set(t,{...r,accountState:s}),(Ne.chains.size===1||Ne.activeChain===t)&&(e.caipAddress&&(Ne.activeCaipAddress=e.caipAddress),Xt.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Ne.chains.get(t);if(n){const r={...n.networkState||vv,...e};Ne.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){V.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;Ne.activeChain=t;const e=t?Ne.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Ne.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Ne.activeCaipNetwork=n,V.setChainNetworkData(t,{caipNetwork:n}),He.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),yp.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Ne.activeChain!==t.chainNamespace&&V.setIsSwitchingNamespace(!0);const e=Ne.chains.get(t.chainNamespace);Ne.activeChain=t.chainNamespace,Ne.activeCaipNetwork=t,V.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Ne.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Ne.activeCaipAddress=void 0,V.setAccountProp("caipAddress",Ne.activeCaipAddress,t.chainNamespace),e&&Xt.replaceState(e.accountState),nn.resetSend(),yp.set({activeChain:Ne.activeChain,selectedNetworkId:(i=Ne.activeCaipNetwork)==null?void 0:i.caipNetworkId}),He.setActiveCaipNetworkId(t.caipNetworkId),!V.checkIfSupportedNetwork(t.chainNamespace)&&gt.state.enableNetworkSwitch&&!gt.state.allowUnsupportedChain&&!Ye.state.wcBasic&&V.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Ne.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==V.state.activeChain,n=(s=V.getNetworkData(t))==null?void 0:s.caipNetwork,r=V.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await V.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=V.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=V.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=Ne.activeCaipNetwork)==null?void 0:a.id)})),s=V.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&xn.close()}catch{pt.goBack()}qn.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Ne.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=Ne.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Ne.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Ne.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Ne.activeChain;if(e&&(n=e),!n)return;const r=(s=Ne.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Ne.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Ne.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return nt.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Ne.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=V.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){V.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=V.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Qe.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Ne.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=V.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=Ne.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:Ne.activeCaipNetwork},getActiveCaipAddress(){return Ne.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Ne.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=V.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());V.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Ne.activeCaipNetwork,r=V.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Ne.activeChain)return!0;const e=V.getRequestedCaipNetworks(Ne.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){V.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=P_.caipNetworkIdToNumber((r=Ne.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Ne.activeChain;if(!e||!t)return!1;const n=V.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){xn.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Ne.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&xs.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){V.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=V.getAccountProp("preferredAccountType",e);Ne.activeCaipAddress=void 0,V.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),Qe.removeConnectorId(e)},setIsSwitchingNamespace(t){Ne.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Ne.chains.forEach(s=>{ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Ne.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=V.state.chains.get(t))==null?void 0:e.accountState:Xt.state},getNetworkData(t){var n;const e=t||Ne.activeChain;if(e)return(n=V.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=V.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Qe.state.filterByNamespace;return(t?[Ne.chains.get(t)]:Array.from(Ne.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?V.getRequestedCaipNetworks(t):V.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){Ne.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Ne.lastConnectedSIWECaipNetwork}},V=xo(f3e),p3e={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},oq=nt.getBlockchainApiUrl(),Hs=Ln({clientId:null,api:new X0({baseUrl:oq,clientId:null}),supportedChains:{http:[],ws:[]}}),dt={state:Hs,async get(t){const{st:e,sv:n}=dt.getSdkProperties(),r=gt.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Hs.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=gt.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Hs.supportedChains.http.length||await dt.getSupportedNetworks()}catch{return!1}return Hs.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await dt.get({path:"v1/supported-chains"});return Hs.supportedChains=t,t}catch{return Hs.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await dt.isNetworkSupported(e))return{avatar:"",name:""};const r=He.getIdentityFromCacheForAddress(t);if(r)return r;const s=await dt.get({path:`/v1/identity/${t}`,params:{sender:V.state.activeCaipAddress?nt.getPlainAddress(V.state.activeCaipAddress):void 0}});return He.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await dt.isNetworkSupported((a=V.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?dt.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await dt.isNetworkSupported((o=V.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?dt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await dt.isNetworkSupported((n=V.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?dt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await dt.isNetworkSupported((n=V.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Hs.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:gt.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await dt.isNetworkSupported((r=V.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?dt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=dt.getSdkProperties();if(!await dt.isNetworkSupported((s=V.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return dt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await dt.isNetworkSupported((o=V.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Hs.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:xs.CONVERT_SLIPPAGE_TOLERANCE},projectId:gt.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=dt.getSdkProperties();if(!await dt.isNetworkSupported((o=V.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return dt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=dt.getSdkProperties();if(!await dt.isNetworkSupported((l=V.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return ou.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=He.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await dt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return He.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await dt.isNetworkSupported((n=V.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?dt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await dt.isNetworkSupported((n=V.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?dt.get({path:`/v1/profile/reverse/${t}`,params:{sender:Xt.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await dt.isNetworkSupported((n=V.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?dt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await dt.isNetworkSupported((i=V.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Hs.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await dt.isNetworkSupported((a=V.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Hs.api.post({path:"/v1/generators/onrampurl",params:{projectId:gt.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await dt.isNetworkSupported((e=V.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await dt.get({path:"/v1/onramp/options"})}catch{return p3e}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await dt.isNetworkSupported((s=V.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Hs.api.post({path:"/v1/onramp/quote",params:{projectId:gt.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await dt.isNetworkSupported((n=V.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?dt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await dt.isNetworkSupported((s=V.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Hs.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:gt.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Hs.clientId=t,Hs.api=new X0({baseUrl:oq,clientId:t})}},gI={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return kh(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},bk={async getMyTokensWithBalance(t){const e=Xt.state.address,n=V.state.activeCaipNetwork,r=Qe.getConnectorId("eip155")===ae.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=He.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===ae.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await dt.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=gI.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await Ye.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await Ye.walletGetAssets({account:t,chainFilter:[s]});if(!gI.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>gI.createBalance(l,e.caipNetworkId));return He.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},Ca=Ln({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),g3e={state:Ca,replaceState(t){t&&Object.assign(Ca,dg(t))},subscribe(t){return V.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return V.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){V.setAccountProp("status",t,e)},getCaipAddress(t){return V.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?nt.getPlainAddress(t):void 0;e===V.state.activeChain&&(V.state.activeCaipAddress=t),V.setAccountProp("caipAddress",t,e),V.setAccountProp("address",n,e)},setBalance(t,e,n){V.setAccountProp("balance",t,n),V.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){V.setAccountProp("profileName",t,e)},setProfileImage(t,e){V.setAccountProp("profileImage",t,e)},setUser(t,e){V.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){V.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){V.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){V.setAccountProp("currentTab",t,V.state.activeChain)},setTokenBalance(t,e){t&&V.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){V.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=V.getAccountProp("addressLabels",n)||new Map;r.set(t,e),V.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=V.getAccountProp("addressLabels",e)||new Map;n.delete(t),V.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){V.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){V.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&V.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){V.setAccountProp("socialWindow",t?dg(t):void 0,e)},setFarcasterUrl(t,e){V.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Ca.balanceLoading=!0;const e=(i=V.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=V.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=V.state.activeCaipAddress,s=r?nt.getPlainAddress(r):void 0;if(Ca.lastRetry&&!nt.isAllowedRetry(Ca.lastRetry,30*xs.ONE_SEC_MS))return Ca.balanceLoading=!1,[];try{if(s&&e&&n){const a=await bk.getMyTokensWithBalance();return Xt.setTokenBalance(a,n),Ca.lastRetry=void 0,Ca.balanceLoading=!1,a}}catch(a){Ca.lastRetry=Date.now(),t==null||t(a),ou.showError("Token Balance Unavailable")}finally{Ca.balanceLoading=!1}return[]},resetAccount(t){V.resetAccount(t)}},Xt=xo(g3e),m3e={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=V.state.activeCaipNetwork,r=pt.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Xt.getCaipAddress(V.state.activeChain),o=t.chainNamespace!==V.state.activeChain,a=Xt.getCaipAddress(t.chainNamespace),l=Qe.getConnectorId(V.state.activeChain)===ae.CONNECTOR_ID.AUTH,u=ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?pt.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?pt.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):pt.push("SwitchNetwork",{...r,network:t})}},qs=Ln({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),y3e={state:qs,subscribe(t){return fi(qs,()=>t(qs))},subscribeKey(t,e){return $s(qs,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=V.state.activeChain,r=e&&e!==n,s=(i=V.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(Ye.state.wcBasic?ct.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await ct.prefetch(),Qe.setFilterByNamespace(t==null?void 0:t.namespace),xn.setLoading(!0,e),e&&r){const a=((o=V.getNetworkData(e))==null?void 0:o.caipNetwork)||V.getRequestedCaipNetworks(e)[0];a&&m3e.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=V.state.noAdapters;gt.state.manualWCControl||a&&!s?nt.isMobile()?pt.reset("AllWallets"):pt.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?pt.reset(t.view,t.data):s?pt.reset("Account"):pt.reset("Connect")}qs.open=!0,yp.set({open:!0}),qn.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=gt.state.enableEmbedded,e=!!V.state.activeCaipAddress;qs.open&&qn.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),qs.open=!1,pt.reset("Connect"),xn.clearLoading(),t?e?pt.replace("Account"):pt.push("Connect"):yp.set({open:!1}),Ye.resetUri()},setLoading(t,e){e&&qs.loadingNamespaceMap.set(e,t),qs.loading=t,yp.set({loading:t})},clearLoading(){qs.loadingNamespaceMap.clear(),qs.loading=!1},shake(){qs.shake||(qs.shake=!0,setTimeout(()=>{qs.shake=!1},500))}},xn=xo(y3e),uU=2147483648,w3e={convertEVMChainIdToCoinType(t){if(t>=uU)throw new Error("Invalid chainId");return(uU|t)>>>0}},Xi=Ln({suggestions:[],loading:!1}),b3e={state:Xi,subscribe(t){return fi(Xi,()=>t(Xi))},subscribeKey(t,e){return $s(Xi,t,e)},async resolveName(t){var e,n;try{return await dt.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await dt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Xi.loading=!0,Xi.suggestions=[];const e=await dt.getEnsNameSuggestions(t);return Xi.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Xi.suggestions}catch(e){const n=sE.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Xi.loading=!1}},async getNamesForAddress(t){try{if(!V.state.activeCaipNetwork)return[];const n=He.getEnsFromCacheForAddress(t);if(n)return n;const r=await dt.reverseLookupEnsName({address:t});return He.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=sE.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=V.state.activeCaipNetwork,n=Xt.state.address,r=Qe.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");Xi.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});pt.pushTransactionStack({onCancel(){pt.replace("RegisterAccountName")}});const i=await Ye.signMessage(s);Xi.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=w3e.convertEVMChainIdToCoinType(Number(o));await dt.registerEnsName({coinType:a,address:n,signature:i,message:s}),Xt.setProfileName(t,e.chainNamespace),pt.replace("RegisterAccountNameSuccess")}catch(s){const i=sE.parseEnsApiError(s,`Error registering name ${t}`);throw pt.replace("RegisterAccountName"),new Error(i)}finally{Xi.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},sE=xo(b3e);let id=null;const Ml={getSIWX(){return gt.state.siwx},async initializeIfEnabled(){var i;const t=gt.state.siwx,e=V.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(V.checkIfSupportedNetwork(n))try{if(id&&await id,(await t.getSessions(`${n}:${r}`,s)).length)return;await xn.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),qn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=Ye._getClient())==null?void 0:i.disconnect().catch(console.error)),pt.reset("Connect"),ou.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=gt.state.siwx,e=nt.getPlainAddress(V.getActiveCaipAddress()),n=V.getActiveCaipNetwork(),r=Ye._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Qe.getConnectorId(n.chainNamespace)===ae.CONNECTOR_ID.AUTH&&pt.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),V.setLastConnectedSIWECaipNetwork(n),xn.close(),qn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!xn.state.open||pt.state.view==="ApproveTransaction")&&await xn.open({view:"SIWXSignMessage"}),ou.showError("Error signing message"),qn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=V.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,nt.getPlainAddress(V.getActiveCaipAddress())||""));s&&s.length>0?await V.switchActiveNetwork(r):await Ye.disconnect()}else await Ye.disconnect()}else xn.close();xn.close(),qn.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=V.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,nt.getPlainAddress(V.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=gt.state.siwx,e=nt.getPlainAddress(V.getActiveCaipAddress()),n=V.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=pt.state.view==="ApproveTransaction",r=pt.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var l;const i=Ml.getSIWX();if(!i||!s.includes(ae.CHAIN.EVM)){const u=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:u.address,chainId:u.chainId,accounts:u.accounts}}const o=await i.createMessage({chainId:((l=V.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),a={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},c=await t.connect({chainId:e,socialUri:n,siwxMessage:a,preferredAccountType:r});return a.accountAddress=c.address,a.serializedMessage=c.message||"",c.signature&&c.message&&await Ml.addEmbeddedWalletSession(a,c.message,c.signature),{address:c.address,chainId:c.chainId,accounts:c.accounts}},async addEmbeddedWalletSession(t,e,n){if(id)return id;const r=Ml.getSIWX();return r?(id=r.addSession({data:t,message:e,signature:n}).finally(()=>{id=null}),id):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=Ml.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=V.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(ou.showLoading("Authenticating...",{autoClose:!1}),Xt.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),qn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Ml.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),qn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Ml.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{ou.hide()}}return!0},getSIWXEventProperties(){var e;const t=V.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=V.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:ic(t)===Jr.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Si={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:ae.CHAIN.EVM,CONNECTOR_TYPE_AUTH:"AUTH"},xi={ConnectorExplorerIds:{[ae.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ae.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ae.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[ae.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[ae.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Si.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Si.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Si.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Si.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Si.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Si.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Si.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Si.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Si.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Si.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Si.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[ae.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ae.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ae.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[ae.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[ae.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[ae.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[ae.CONNECTOR_ID.INJECTED]:"Browser Wallet",[ae.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[ae.CONNECTOR_ID.COINBASE]:"Coinbase",[ae.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[ae.CONNECTOR_ID.LEDGER]:"Ledger",[ae.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[ae.CONNECTOR_ID.INJECTED]:"INJECTED",[ae.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[ae.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[ae.CONNECTOR_ID.AUTH]:"AUTH",[Si.CONNECTOR_TYPE_AUTH]:"AUTH"}},ni={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Si.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=V.state.activeChain;return ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>Qe.getConnectorId(e)===ae.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},v3e=new AbortController,Nl={EmbeddedWalletAbortController:v3e,ALERT_ERRORS:{IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"}}},E3e="rpc.walletconnect.org";function dU(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const mI=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Km={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===E3e}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:ae.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${ae.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return mI.includes(e)?dU(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:xi.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Km.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(eu(a.url,a.config))}),mI.includes(t.caipNetworkId)&&r.push(eu(dU(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(eu(a))}),r_(r)},extendWagmiTransports(t,e,n){if(mI.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return r_([n,eu(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:ae.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=He.getActiveCaipNetworkId(),n=V.getAllRequestedCaipNetworks(),r=Array.from(((c=V.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},hU={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Gr={set(t,e){Ua.isClient&&localStorage.setItem(`${ze.STORAGE_KEY}${t}`,e)},get(t){return Ua.isClient?localStorage.getItem(`${ze.STORAGE_KEY}${t}`):null},delete(t,e){Ua.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${ze.STORAGE_KEY}${t}`))}},Ev=30*1e3,Ua={checkIfAllowedToTriggerEmail(){const t=Gr.get(ze.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Ev){const n=Math.ceil((Ev-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Gr.get(ze.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Ev)return Math.ceil((Ev-e)/1e3)}return 0},checkIfRequestExists(t){return Jr.NOT_SAFE_RPC_METHODS.includes(t.method)||Jr.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(hU.transactionHash))||(t==null?void 0:t.match(hU.signedMessage)))?ze.RPC_RESPONSE_TYPE_TX:ze.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Jr.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"},Qn=v.object({message:v.string()});function Oe(t){return v.literal(ze[t])}const _1=v.object({serializedMessage:v.string().optional(),accountAddress:v.string(),chainId:v.string(),notBefore:v.string().optional(),domain:v.string(),uri:v.string(),version:v.string(),nonce:v.string(),statement:v.string().optional(),resources:v.array(v.string()).optional(),requestId:v.string().optional(),issuedAt:v.string().optional(),expirationTime:v.string().optional()});v.object({accessList:v.array(v.string()),blockHash:v.string().nullable(),blockNumber:v.string().nullable(),chainId:v.string().or(v.number()),from:v.string(),gas:v.string(),hash:v.string(),input:v.string().nullable(),maxFeePerGas:v.string(),maxPriorityFeePerGas:v.string(),nonce:v.string(),r:v.string(),s:v.string(),to:v.string(),transactionIndex:v.string().nullable(),type:v.string(),v:v.string(),value:v.string()});const _3e=v.object({chainId:v.string().or(v.number()),rpcUrl:v.optional(v.string())}),C3e=v.object({email:v.string().email()}),S3e=v.object({otp:v.string()}),A3e=v.object({uri:v.string(),preferredAccountType:v.optional(v.string()),chainId:v.optional(v.string().or(v.number())),siwxMessage:v.optional(_1),rpcUrl:v.optional(v.string())}),I3e=v.object({chainId:v.optional(v.string().or(v.number())),preferredAccountType:v.optional(v.string()),socialUri:v.optional(v.string()),siwxMessage:v.optional(_1),rpcUrl:v.optional(v.string())}),N3e=v.object({provider:v.enum(["google","github","apple","facebook","x","discord"])}),x3e=v.object({email:v.string().email()}),T3e=v.object({otp:v.string()}),R3e=v.object({otp:v.string()}),P3e=v.object({themeMode:v.optional(v.enum(["light","dark"])),themeVariables:v.optional(v.record(v.string(),v.string().or(v.number()))),w3mThemeVariables:v.optional(v.record(v.string(),v.string()))}),O3e=v.object({metadata:v.object({name:v.string(),description:v.string(),url:v.string(),icons:v.array(v.string())}).optional(),sdkVersion:v.string().optional(),sdkType:v.string().optional(),projectId:v.string()}),k3e=v.object({type:v.string()}),D3e=v.object({action:v.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),$3e=v.object({url:v.string()}),M3e=v.object({userName:v.string()}),L3e=v.object({email:v.string().optional().nullable(),address:v.string(),chainId:v.string().or(v.number()),accounts:v.array(v.object({address:v.string(),type:v.enum([Jr.ACCOUNT_TYPES.EOA,Jr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:v.string().optional().nullable(),preferredAccountType:v.optional(v.string()),signature:v.string().optional(),message:v.string().optional(),siwxMessage:v.optional(_1)}),U3e=v.object({action:v.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),B3e=v.object({email:v.string().email().optional().nullable(),address:v.string(),chainId:v.string().or(v.number()),smartAccountDeployed:v.optional(v.boolean()),accounts:v.array(v.object({address:v.string(),type:v.enum([Jr.ACCOUNT_TYPES.EOA,Jr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:v.optional(v.string()),signature:v.string().optional(),message:v.string().optional(),siwxMessage:v.optional(_1)}),j3e=v.object({uri:v.string()}),F3e=v.object({isConnected:v.boolean()}),W3e=v.object({chainId:v.string().or(v.number())}),z3e=v.object({chainId:v.string().or(v.number())}),H3e=v.object({newEmail:v.string().email()}),q3e=v.object({smartAccountEnabledNetworks:v.array(v.number())});v.object({address:v.string(),isDeployed:v.boolean()});const G3e=v.object({version:v.string().optional()}),V3e=v.object({type:v.string(),address:v.string()}),K3e=v.any(),Y3e=v.object({method:v.literal("eth_accounts")}),Q3e=v.object({method:v.literal("eth_blockNumber")}),Z3e=v.object({method:v.literal("eth_call"),params:v.array(v.any())}),J3e=v.object({method:v.literal("eth_chainId")}),X3e=v.object({method:v.literal("eth_estimateGas"),params:v.array(v.any())}),e$e=v.object({method:v.literal("eth_feeHistory"),params:v.array(v.any())}),t$e=v.object({method:v.literal("eth_gasPrice")}),n$e=v.object({method:v.literal("eth_getAccount"),params:v.array(v.any())}),r$e=v.object({method:v.literal("eth_getBalance"),params:v.array(v.any())}),s$e=v.object({method:v.literal("eth_getBlockByHash"),params:v.array(v.any())}),i$e=v.object({method:v.literal("eth_getBlockByNumber"),params:v.array(v.any())}),o$e=v.object({method:v.literal("eth_getBlockReceipts"),params:v.array(v.any())}),a$e=v.object({method:v.literal("eth_getBlockTransactionCountByHash"),params:v.array(v.any())}),c$e=v.object({method:v.literal("eth_getBlockTransactionCountByNumber"),params:v.array(v.any())}),l$e=v.object({method:v.literal("eth_getCode"),params:v.array(v.any())}),u$e=v.object({method:v.literal("eth_getFilterChanges"),params:v.array(v.any())}),d$e=v.object({method:v.literal("eth_getFilterLogs"),params:v.array(v.any())}),h$e=v.object({method:v.literal("eth_getLogs"),params:v.array(v.any())}),f$e=v.object({method:v.literal("eth_getProof"),params:v.array(v.any())}),p$e=v.object({method:v.literal("eth_getStorageAt"),params:v.array(v.any())}),g$e=v.object({method:v.literal("eth_getTransactionByBlockHashAndIndex"),params:v.array(v.any())}),m$e=v.object({method:v.literal("eth_getTransactionByBlockNumberAndIndex"),params:v.array(v.any())}),y$e=v.object({method:v.literal("eth_getTransactionByHash"),params:v.array(v.any())}),w$e=v.object({method:v.literal("eth_getTransactionCount"),params:v.array(v.any())}),b$e=v.object({method:v.literal("eth_getTransactionReceipt"),params:v.array(v.any())}),v$e=v.object({method:v.literal("eth_getUncleCountByBlockHash"),params:v.array(v.any())}),E$e=v.object({method:v.literal("eth_getUncleCountByBlockNumber"),params:v.array(v.any())}),_$e=v.object({method:v.literal("eth_maxPriorityFeePerGas")}),C$e=v.object({method:v.literal("eth_newBlockFilter")}),S$e=v.object({method:v.literal("eth_newFilter"),params:v.array(v.any())}),A$e=v.object({method:v.literal("eth_newPendingTransactionFilter")}),I$e=v.object({method:v.literal("eth_sendRawTransaction"),params:v.array(v.any())}),N$e=v.object({method:v.literal("eth_syncing"),params:v.array(v.any())}),x$e=v.object({method:v.literal("eth_uninstallFilter"),params:v.array(v.any())}),fU=v.object({method:v.literal("personal_sign"),params:v.array(v.any())}),T$e=v.object({method:v.literal("eth_signTypedData_v4"),params:v.array(v.any())}),R$e=v.object({method:v.literal("eth_sendTransaction"),params:v.array(v.any())}),P$e=v.object({method:v.literal("solana_signMessage"),params:v.object({message:v.string(),pubkey:v.string()})}),O$e=v.object({method:v.literal("solana_signTransaction"),params:v.object({transaction:v.string()})}),k$e=v.object({method:v.literal("solana_signAllTransactions"),params:v.object({transactions:v.array(v.string())})}),D$e=v.object({method:v.literal("solana_signAndSendTransaction"),params:v.object({transaction:v.string(),options:v.object({skipPreflight:v.boolean().optional(),preflightCommitment:v.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:v.number().optional(),minContextSlot:v.number().optional()}).optional()})}),$$e=v.object({method:v.literal("wallet_sendCalls"),params:v.array(v.object({chainId:v.string().or(v.number()).optional(),from:v.string().optional(),version:v.string().optional(),capabilities:v.any().optional(),calls:v.array(v.object({to:v.string().startsWith("0x"),data:v.string().startsWith("0x").optional(),value:v.string().optional()}))}))}),M$e=v.object({method:v.literal("wallet_getCallsStatus"),params:v.array(v.string())}),L$e=v.object({method:v.literal("wallet_getCapabilities"),params:v.array(v.string().or(v.number()).optional()).optional()}),U$e=v.object({method:v.literal("wallet_grantPermissions"),params:v.array(v.any())}),B$e=v.object({method:v.literal("wallet_revokePermissions"),params:v.any()}),j$e=v.object({method:v.literal("wallet_getAssets"),params:v.any()}),pU=v.object({token:v.string()}),ke=v.object({id:v.string().optional()}),Rm={appEvent:ke.extend({type:Oe("APP_SWITCH_NETWORK"),payload:_3e}).or(ke.extend({type:Oe("APP_CONNECT_EMAIL"),payload:C3e})).or(ke.extend({type:Oe("APP_CONNECT_DEVICE")})).or(ke.extend({type:Oe("APP_CONNECT_OTP"),payload:S3e})).or(ke.extend({type:Oe("APP_CONNECT_SOCIAL"),payload:A3e})).or(ke.extend({type:Oe("APP_GET_FARCASTER_URI")})).or(ke.extend({type:Oe("APP_CONNECT_FARCASTER")})).or(ke.extend({type:Oe("APP_GET_USER"),payload:v.optional(I3e)})).or(ke.extend({type:Oe("APP_GET_SOCIAL_REDIRECT_URI"),payload:N3e})).or(ke.extend({type:Oe("APP_SIGN_OUT")})).or(ke.extend({type:Oe("APP_IS_CONNECTED"),payload:v.optional(pU)})).or(ke.extend({type:Oe("APP_GET_CHAIN_ID")})).or(ke.extend({type:Oe("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(ke.extend({type:Oe("APP_INIT_SMART_ACCOUNT")})).or(ke.extend({type:Oe("APP_SET_PREFERRED_ACCOUNT"),payload:k3e})).or(ke.extend({type:Oe("APP_RPC_REQUEST"),payload:fU.or(j$e).or(Y3e).or(Q3e).or(Z3e).or(J3e).or(X3e).or(e$e).or(t$e).or(n$e).or(r$e).or(s$e).or(i$e).or(o$e).or(a$e).or(c$e).or(l$e).or(u$e).or(d$e).or(h$e).or(f$e).or(p$e).or(g$e).or(m$e).or(y$e).or(w$e).or(b$e).or(v$e).or(E$e).or(_$e).or(C$e).or(S$e).or(A$e).or(I$e).or(N$e).or(x$e).or(fU).or(T$e).or(R$e).or(P$e).or(O$e).or(k$e).or(D$e).or(M$e).or($$e).or(L$e).or(U$e).or(B$e).and(v.object({chainId:v.string().or(v.number()).optional(),chainNamespace:v.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:v.string().optional()}))})).or(ke.extend({type:Oe("APP_UPDATE_EMAIL"),payload:x3e})).or(ke.extend({type:Oe("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:T3e})).or(ke.extend({type:Oe("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:R3e})).or(ke.extend({type:Oe("APP_SYNC_THEME"),payload:P3e})).or(ke.extend({type:Oe("APP_SYNC_DAPP_DATA"),payload:O3e})).or(ke.extend({type:Oe("APP_RELOAD")})).or(ke.extend({type:Oe("APP_RPC_ABORT")})),frameEvent:ke.extend({type:Oe("FRAME_SWITCH_NETWORK_ERROR"),payload:Qn}).or(ke.extend({type:Oe("FRAME_SWITCH_NETWORK_SUCCESS"),payload:z3e})).or(ke.extend({type:Oe("FRAME_CONNECT_EMAIL_SUCCESS"),payload:D3e})).or(ke.extend({type:Oe("FRAME_CONNECT_EMAIL_ERROR"),payload:Qn})).or(ke.extend({type:Oe("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:$3e})).or(ke.extend({type:Oe("FRAME_GET_FARCASTER_URI_ERROR"),payload:Qn})).or(ke.extend({type:Oe("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:M3e})).or(ke.extend({type:Oe("FRAME_CONNECT_FARCASTER_ERROR"),payload:Qn})).or(ke.extend({type:Oe("FRAME_CONNECT_OTP_ERROR"),payload:Qn})).or(ke.extend({type:Oe("FRAME_CONNECT_OTP_SUCCESS")})).or(ke.extend({type:Oe("FRAME_CONNECT_DEVICE_ERROR"),payload:Qn})).or(ke.extend({type:Oe("FRAME_CONNECT_DEVICE_SUCCESS")})).or(ke.extend({type:Oe("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:L3e})).or(ke.extend({type:Oe("FRAME_CONNECT_SOCIAL_ERROR"),payload:Qn})).or(ke.extend({type:Oe("FRAME_GET_USER_ERROR"),payload:Qn})).or(ke.extend({type:Oe("FRAME_GET_USER_SUCCESS"),payload:B3e})).or(ke.extend({type:Oe("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Qn})).or(ke.extend({type:Oe("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:j3e})).or(ke.extend({type:Oe("FRAME_SIGN_OUT_ERROR"),payload:Qn})).or(ke.extend({type:Oe("FRAME_SIGN_OUT_SUCCESS")})).or(ke.extend({type:Oe("FRAME_IS_CONNECTED_ERROR"),payload:Qn})).or(ke.extend({type:Oe("FRAME_IS_CONNECTED_SUCCESS"),payload:F3e})).or(ke.extend({type:Oe("FRAME_GET_CHAIN_ID_ERROR"),payload:Qn})).or(ke.extend({type:Oe("FRAME_GET_CHAIN_ID_SUCCESS"),payload:W3e})).or(ke.extend({type:Oe("FRAME_RPC_REQUEST_ERROR"),payload:Qn})).or(ke.extend({type:Oe("FRAME_RPC_REQUEST_SUCCESS"),payload:K3e})).or(ke.extend({type:Oe("FRAME_SESSION_UPDATE"),payload:pU})).or(ke.extend({type:Oe("FRAME_UPDATE_EMAIL_ERROR"),payload:Qn})).or(ke.extend({type:Oe("FRAME_UPDATE_EMAIL_SUCCESS"),payload:U3e})).or(ke.extend({type:Oe("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Qn})).or(ke.extend({type:Oe("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(ke.extend({type:Oe("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Qn})).or(ke.extend({type:Oe("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:H3e})).or(ke.extend({type:Oe("FRAME_SYNC_THEME_ERROR"),payload:Qn})).or(ke.extend({type:Oe("FRAME_SYNC_THEME_SUCCESS")})).or(ke.extend({type:Oe("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Qn})).or(ke.extend({type:Oe("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(ke.extend({type:Oe("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:q3e})).or(ke.extend({type:Oe("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Qn})).or(ke.extend({type:Oe("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Qn})).or(ke.extend({type:Oe("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:V3e})).or(ke.extend({type:Oe("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Qn})).or(ke.extend({type:Oe("FRAME_READY"),payload:G3e})).or(ke.extend({type:Oe("FRAME_RELOAD_ERROR"),payload:Qn})).or(ke.extend({type:Oe("FRAME_RELOAD_SUCCESS")}))};function yI(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function F$e({projectId:t,chainId:e,version:n,enableLogger:r,rpcUrl:s=ae.BLOCKCHAIN_API_RPC_URL}){const i=new URL(qDe);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",n),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class W$e{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=ae.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,a,c)=>{function l({data:u}){if(!yI(ze.FRAME_EVENT_KEY,u))return;const d=Rm.frameEvent.parse(u);d.id===o&&(a(d),window.removeEventListener("message",l))}Ua.isClient&&(window.addEventListener("message",l),c.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:o=>{Ua.isClient&&window.addEventListener("message",({data:a})=>{if(!yI(ze.FRAME_EVENT_KEY,a))return;const c=Rm.frameEvent.parse(a);o(c)})},onAppEvent:o=>{Ua.isClient&&window.addEventListener("message",({data:a})=>{if(!yI(ze.APP_EVENT_KEY,a))return;const c=Rm.appEvent.parse(a);o(c)})},postAppEvent:o=>{var a;if(Ua.isClient){if(!((a=this.iframe)!=null&&a.contentWindow))throw new Error("W3mFrame: iframe is not set");Rm.appEvent.parse(o),this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if(Ua.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Rm.frameEvent.parse(o),parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),this.rpcUrl=i,n&&(this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),Ua.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=F$e({projectId:e,chainId:r,version:VDe,enableLogger:s,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{var a;(a=this.frameLoadPromiseResolver)==null||a.reject("Unable to load email login dependency")},this.events.onFrameEvent(a=>{var c;a.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(c=this.frameLoadPromiseResolver)==null||c.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class z$e{constructor(e){var i;const n=Hh({level:GDe}),{logger:r,chunkLoggerController:s}=JC({opts:n});this.logger=es(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class H$e{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new z$e(e)),this.abortController=i,this.getActiveCaipNetwork=o;const a=this.getRpcUrl(n);this.w3mFrame=new W$e({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:a}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===ze.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Gr.get(ze.EMAIL_LOGIN_USED_KEY)}getEmail(){return Gr.get(ze.EMAIL)}getUsername(){return Gr.get(ze.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:ze.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Ua.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:ze.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:ze.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:ze.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:ze.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:ze.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:ze.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:ze.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:ze.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:ze.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:ze.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:ze.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:ze.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:ze.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:ze.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:ze.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:ze.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:ze.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:ze.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:ze.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:ze.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(Jr.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=l,n.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:ze.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,u,n),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===ze.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===ze.FRAME_IS_CONNECTED_ERROR&&e(),n.type===ze.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===ze.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===ze.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===ze.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===ze.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Jr.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:n,method:r})=>{Jr.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:ze.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[ze.APP_SYNC_DAPP_DATA,ze.APP_SYNC_THEME,ze.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[ze.APP_CONNECT_EMAIL,ze.APP_CONNECT_DEVICE,ze.APP_CONNECT_OTP,ze.APP_CONNECT_SOCIAL,ze.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,y){var b,E,_;w.id===u&&((E=y==null?void 0:(b=y.logger).info)==null||E.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((_=w.payload)==null?void 0:_.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Gr.set(ze.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Gr.set(ze.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Gr.set(ze.EMAIL,e),Gr.set(ze.EMAIL_LOGIN_USED_KEY,"true"),Gr.delete(ze.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Gr.delete(ze.EMAIL_LOGIN_USED_KEY),Gr.delete(ze.EMAIL),Gr.delete(ze.LAST_USED_CHAIN_KEY),Gr.delete(ze.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Gr.set(ze.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Gr.get(ze.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Gr.set(ze.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var s,i;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(s=iu.parseCaipNetworkId(e))==null?void 0:s.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getActiveCaipNetwork(n);return(i=r==null?void 0:r.rpcUrls.default.http)==null?void 0:i[0]}}class wp{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){return wp.instance||(wp.instance=new H$e({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o})),wp.instance}}const q$e={DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]},gU={filterOutDuplicatesByRDNS(t){const e=gt.state.enableEIP6963?Qe.state.connectors:[],n=He.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&nt.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=Qe.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=He.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Qe.state,{featuredWalletIds:n}=gt.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=gt.state.features)==null?void 0:c.connectMethodsOrder),r=e||Qe.state.connectors;if(n)return n;const{injected:s,announced:i}=iE.getConnectorsByType(r,ct.state.recommended,ct.state.featured),o=s.filter(iE.showConnector),a=i.filter(iE.showConnector);return o.length||a.length?["wallet","email","social"]:q$e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&ct.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&ct.state.excludedWallets.some(r=>ni.isLowerCaseMatch(r.name,t.name));return e||n}},iE={getConnectorsByType(t,e,n){const{customWallets:r}=gt.state,s=He.getRecentWallets(),i=gU.filterOutDuplicateWallets(e),o=gU.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&ct.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&ct.state.excludedWallets.some(i=>ni.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!nt.isMobile()||nt.isMobile()&&!e&&!Ye.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(V.state.chains.values()).some(n=>Qe.getConnectorId(n.namespace)===ae.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=gt.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const h=[{type:"walletConnect",isEnabled:gt.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(w=>w.isEnabled),f=new Set(h.map(w=>w.type)),p=c.filter(w=>f.has(w)).map(w=>({type:w,isEnabled:!0})),g=h.filter(({type:w})=>!p.some(({type:b})=>b===w));return Array.from(new Set([...p,...g].map(({type:w})=>w)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!nt.isMobile())return{accounts:[],chainId:void 0};if(t.id===ae.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};Gc`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`;Gc`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`;Gc`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;const oE={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([oE.getAddresses(t),oE.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:oE.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[xi.NetworkImageIds[e.id]]}]})}},Rf={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function eb(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const mU=eb({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),yU=eb({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});eb({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});eb({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});eb({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const G$e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Zd={getMethodsByChainNamespace(t){return G$e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case mU.caipNetworkId:u.chains.push(mU.deprecatedCaipNetworkId);break;case yU.caipNetworkId:u.chains.push(yU.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await sE.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=Zd.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(Zd.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(d=>nt.isCaipAddress(d)).map(d=>iu.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(u)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>iu.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};class V$e{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case ae.CHAIN.EVM:await this.syncEVMConnections(e);break;case ae.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case ae.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===ae.CONNECTOR_ID.WALLET_CONNECT){const c=Zd.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>{var d,h;return u.chainNamespace===this.namespace&&u.id.toString()===((h=(d=c[0])==null?void 0:d.chainId)==null?void 0:h.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await iE.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==ae.CONNECTOR_ID.AUTH&&a.id!==ae.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===ae.CONNECTOR_ID.WALLET_CONNECT){const c=Zd.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var h,f,p,g,w,y;if(a.id===ae.CONNECTOR_ID.WALLET_CONNECT){const b=Zd.getWalletConnectAccounts(r,this.namespace);b.length>0&&i({connectorId:a.id,accounts:b.map(E=>({address:E.address})),caipNetwork:n});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(b=>nt.createAccount(ae.CHAIN.BITCOIN,b.address,b.purpose||"payment",b.publicKey,b.path));if(u&&u.length>1&&(u=[{namespace:ae.CHAIN.BITCOIN,publicKey:((h=u[Rf.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.publicKey)??"",path:((f=u[Rf.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.path)??"",address:((p=u[Rf.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:ae.CHAIN.BITCOIN,publicKey:((g=u[Rf.ACCOUNT_INDEXES.ORDINAL])==null?void 0:g.publicKey)??"",path:((w=u[Rf.ACCOUNT_INDEXES.ORDINAL])==null?void 0:w.path)??"",address:((y=u[Rf.ACCOUNT_INDEXES.ORDINAL])==null?void 0:y.address)??"",type:"ordinal"}]),!(a.chains.find(b=>b.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(b=>({address:b.address,type:b.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>ni.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>ni.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>ni.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>ni.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>ni.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}class aq{constructor({provider:e,namespace:n}){this.id=ae.CONNECTOR_ID.WALLET_CONNECT,this.name=xi.ConnectorNamesMap[ae.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=xi.ConnectorImageIds[ae.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=V.getCaipNetworks.bind(V),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=gt.state.universalProviderConfigOverride,s=Zd.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Ml.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:K$e})}}const K$e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],Y$e=[ae.CONNECTOR_ID.AUTH,ae.CONNECTOR_ID.WALLET_CONNECT];class Q$e{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>V.getCaipNetworks(n),this.getConnectorId=n=>Qe.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new V$e({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:ae.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:ae.CONNECTOR_ID.AUTH,type:"AUTH",name:ae.CONNECTOR_NAMES.AUTH,provider:e,imageId:xi.ConnectorImageIds[ae.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!ni.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){Xt.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=ic(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof aq);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=nt.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=nt.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=nt.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&ni.isLowerCaseMatch(this.getConnectorId(ae.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=nt.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),ni.isLowerCaseMatch(this.getConnectorId(ae.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?oE.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),ni.isLowerCaseMatch(this.getConnectorId(ae.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(Y$e.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}function Z$e(t){let e=[],n,r;function s(a){return P_.parseEvmChainId(a)||1}function i(){var a;return n||(n=wp.getInstance({projectId:t.options.projectId,chainId:(a=V.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?hd.open(Nl.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?hd.open(Nl.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&hd.open(Nl.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:Nl.EmbeddedWalletAbortController,getActiveCaipNetwork:c=>V.getActiveCaipNetwork(c)})),n}async function o(a={}){var g;const c=i();let l=a.chainId;if(a.isReconnecting){const w=P_.parseEvmChainId(c.getLastUsedChainId()||""),y=(g=t.chains)==null?void 0:g[0].id;if(l=w||y,!l)throw new Error("ChainId not found in provider")}const u=ic("eip155"),{address:d,chainId:h,accounts:f}=await Ml.authConnectorAuthenticate({authConnector:c,chainId:l,preferredAccountType:u,socialUri:a.socialUri,chainNamespace:ae.CHAIN.EVM});e=(f==null?void 0:f.map(w=>w.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:ae.CONNECTOR_ID.AUTH,name:ae.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:ae.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=wp.getInstance({projectId:t.options.projectId,chainId:(c=V.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:Nl.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?hd.open(Nl.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?hd.open(Nl.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&hd.open(Nl.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:l=>V.getActiveCaipNetwork(l)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=V.state.activeChain===ae.CHAIN.EVM;if(ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>Qe.getConnectorId(h)===ae.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l;try{const u=a.chains.find(p=>p.id===c);if(!u)throw new Xa(new Error("chain not found on connector."));const d=await this.getProvider(),h=ic("eip155"),f=await d.connect({chainId:c,preferredAccountType:h});return e=((l=f==null?void 0:f.accounts)==null?void 0:l.map(p=>p.address))||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),u}catch(u){throw u instanceof Error?new Xa(u):u}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Uc)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}vk.type="walletConnect";function vk(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:vk.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=V.getCaipNetworks(),w=await this.getProvider();if(!w)throw new kl;a||(a=this.onDisplayUri,w.on("display_uri",a));const y=await this.isChainsStale();w.session&&y&&await w.disconnect();const b=gt.state.universalProviderConfigOverride;if(!w.session||y){const S=Zd.createNamespaces(g,b);await w.connect({optionalNamespaces:S,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(k=>Number(k.id)))}const E=await this.getAccounts(),_=await this.getChainId(),C=(p=(f=(h=w.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,I=C==null?void 0:C.some(S=>Number(S.split(":")[1])===_);let A=1;I?A=_:C!=null&&C[0]&&(A=Number(C[0].split(":")[1])),a&&(w.removeListener("display_uri",a),a=void 0),o&&(w.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),w.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),w.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),w.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),w.on("session_delete",c));const x=b==null?void 0:b.defaultChain;return w.setDefaultChain(x??`eip155:${A}`),{accounts:E,chainId:A}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new gr(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var w,y,b;const d=await this.getProvider();if(!((w=d==null?void 0:d.session)!=null&&w.namespaces))return[];const h=(b=(y=d==null?void 0:d.session)==null?void 0:y.namespaces[ae.CHAIN.EVM])==null?void 0:b.accounts,f=(h==null?void 0:h.map(E=>E.split(":")[2]))??[],p=new Set;return f.filter(E=>{const _=E==null?void 0:E.toLowerCase();return p.has(_)?!1:(p.add(_),!0)})},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=He.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const w=He.getStoredActiveCaipNetworkId(),y=h?e.getCaipNetworks(h):[],b=y==null?void 0:y.find(E=>E.id===w);b&&b.chainNamespace===ae.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(b.id)}))}return r},async getChainId(){var g,w,y,b;const d=(g=e.getCaipNetwork(ae.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(b=(y=(w=(await this.getProvider()).session)==null?void 0:w.namespaces[ae.CHAIN.EVM])==null?void 0:y.chains)==null?void 0:b[0],p=V.getCaipNetworks().find(E=>E.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,w,y,b;const f=await this.getProvider();if(!f)throw new kl;const p=V.getCaipNetworks().find(E=>E.id===h);if(!p)throw new Xa(new Ew);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:qe(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const E=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...E,h]),{...p,id:p.id}}catch(E){const _=E;if(/(?:user rejected)/iu.test(_.message))throw new gr(_);try{let C;d!=null&&d.blockExplorerUrls?C=d.blockExplorerUrls:C=(g=p.blockExplorers)!=null&&g.default.url?[(w=p.blockExplorers)==null?void 0:w.default.url]:[];const I=((b=(y=p.rpcUrls)==null?void 0:y.chainDefault)==null?void 0:b.http)||[],A={blockExplorerUrls:C,chainId:qe(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:I};await f.request({method:"wallet_addEthereumChain",params:[A]});const x=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...x,h]),{...p,id:p.id}}catch(C){throw new gr(C)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>Uc(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(V.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[ae.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(w=>Number.parseInt(w.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const Pm=Ln({pendingTransactions:0}),wU={state:Pm,subscribeKey(t,e){return $s(Pm,t,e)},increase(t){Pm[t]+=1},decrease(t){Pm[t]-=1},reset(t){Pm[t]=0}};function J$e(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function X$e(t){if(nt.isSafeApp()){const{safe:e}=await us(async()=>{const{safe:n}=await import("./index-Cgbo-3IG.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function e5e(t){try{const{coinbaseWallet:e}=await us(async()=>{const{coinbaseWallet:n}=await import("./index-Cgbo-3IG.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const t5e={enable:!1,pollingInterval:3e4};class n5e extends Q$e{constructor(e){const n=Km.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=ae.CHAIN.EVM,this.adapterType=ae.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...t5e,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===ae.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>nt.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=hp(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>nt.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=hp(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===ae.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=Km.getCaipNetworkId(s);i?n[s.id]=Km.extendWagmiTransports(s,e.projectId,i):n[s.id]=Km.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=Aoe({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=ioe(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),wU.increase("pendingTransactions")}});const e=wU.subscribeKey("pendingTransactions",n=>{var r;n>=ae.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){i9(this.wagmiConfig,{onChange:(e,n)=>{var r;if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const s=e.address!==(n==null?void 0:n.address),i=e.connector.id!==((r=n.connector)==null?void 0:r.id),o=n.status!=="connected";(s||i||o)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}}),o9(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===ae.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:i})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:He.getConnectedSocialProvider(),username:He.getConnectedSocialUsername()}:void 0}}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await e5e(this.wagmiConfig.connectors);s&&n.push(s)}const r=await X$e(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(vk(e,n)),e.enableEIP6963!==!1&&r.push(NC({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(Z$e({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:e,chainId:n,connector:{id:r.id,name:xi.ConnectorNamesMap[r.id]??r.name,imageId:xi.ConnectorImageIds[r.id],type:xi.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===ae.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await noe(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=hp(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await eoe(this.wagmiConfig,s);const i=await toe(this.wagmiConfig,s);return await c9(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(P_.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await l9(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await Vie(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return Ise(e.value,e.decimals)}formatUnits(e){return kh(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(e.type===ae.CONNECTOR_ID.INJECTED&&n.enableEIP6963===!1||e.id===ae.CONNECTOR_ID.AUTH||e.id===ae.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:xi.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:xi.ConnectorNamesMap[e.id]??e.name,imageId:xi.ConnectorImageIds[e.id],type:xi.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===ae.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){a9(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=Wo(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(nt.isSafeApp()&&n===ae.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await Bv(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await Bv(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await I3(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var h,f,p,g,w;const{id:n,address:r,provider:s,type:i,info:o,chainId:a,socialUri:c}=e,l=this.getWagmiConnector(n);if(!l)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&o&&l.id===ae.CONNECTOR_ID.EIP6963&&((h=l.setEip6963Wallet)==null||h.call(l,{provider:s,info:o}));const u=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(l.uid);if(u){await((g=this.wagmiConfig.storage)==null?void 0:g.setItem("recentConnectorId",l.id));const y=[...u.accounts].sort((b,E)=>ni.isLowerCaseMatch(b,r)?-1:ni.isLowerCaseMatch(E,r)?1:0);return(w=this.wagmiConfig)==null||w.setState(b=>({...b,connections:new Map(b.connections).set(l.uid,{accounts:y,chainId:u.chainId,connector:u.connector}),current:l.uid,status:"connected"})),{address:y[0],chainId:u.chainId,provider:s,type:i,id:n}}const d=await Bv(this.wagmiConfig,{connector:l,chainId:a?Number(a):void 0,socialUri:c});return{address:d.accounts[0],chainId:d.chainId,provider:s,type:i,id:n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:n})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await fx(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=He.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await Qie(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});He.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=Wo(this.wagmiConfig).find(i=>ni.isLowerCaseMatch(i.connector.id,e.id));return await dx(this.wagmiConfig,{connector:n}),gt.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:i})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=Wo(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await dx(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:s})),connectorId:r.connector.id}))}}async switchNetwork(e){var s,i,o,a,c,l,u,d,h,f;const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(p=>p.id.toString()===n.id.toString());await I3(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:(r==null?void 0:r.name)??n.name,nativeCurrency:(r==null?void 0:r.nativeCurrency)??n.nativeCurrency,rpcUrls:[((o=(i=(s=n.rpcUrls)==null?void 0:s.chainDefault)==null?void 0:i.http)==null?void 0:o[0])??((l=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0])??""],blockExplorerUrls:[((d=(u=r==null?void 0:r.blockExplorers)==null?void 0:u.default)==null?void 0:d.url)??((f=(h=n.blockExplorers)==null?void 0:h.default)==null?void 0:f.url)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=Wo(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=J$e(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=Wo(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=Wo(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=Wo(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:ae.CONNECTOR_ID.AUTH,type:"AUTH",name:ae.CONNECTOR_NAMES.AUTH,provider:e,imageId:xi.ConnectorImageIds[ae.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const n=Wo(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(V.state.activeChain==="eip155")return;fx(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new aq({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}}const cq={id:1992,name:"Sanko Testnet",network:"sanko",nativeCurrency:{decimals:18,name:"tDMT",symbol:"tDMT"},rpcUrls:{public:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]},default:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}},blockExplorers:{default:{name:"SankoScan",url:"https://sanko-scan.caldera.xyz"}}},lq="7c65f27254d6ddd24cf7eedf2685c4fb",r5e={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},uq=new n5e({networks:[FH,cq],projectId:lq,ssr:!1});t2e({adapters:[uq],networks:[FH,cq],projectId:lq,metadata:r5e,features:{analytics:!1}});const dq=()=>{if(!CE)throw new Error("[FIREBASE] Database not initialized");return CE},Nh=t=>!t||t.length<10?t:`${t.slice(0,6)}...${t.slice(-4)}`,k_=async(t,e)=>{try{if(!t)return console.error("[LEADERBOARD] No wallet address provided"),!1;const n=new Date().toISOString(),r=dq(),s=to(r,`leaderboard/${t}`),i=await pd(s),o=i.exists()?i.val():null,a=e==="win"?3:e==="draw"?1:0,c={username:t,chain_type:"sanko",wins:((o==null?void 0:o.wins)||0)+(e==="win"?1:0),losses:((o==null?void 0:o.losses)||0)+(e==="loss"?1:0),draws:((o==null?void 0:o.draws)||0)+(e==="draw"?1:0),total_games:((o==null?void 0:o.total_games)||0)+1,points:((o==null?void 0:o.points)||0)+a,created_at:(o==null?void 0:o.created_at)||n,updated_at:n};return await ey(s,c),console.log("[LEADERBOARD] Successfully updated entry for:",Nh(t),"Result:",e),!0}catch(n){return console.error("[LEADERBOARD] Error updating leaderboard entry:",n),!1}},s5e=async(t,e,n)=>{try{return!e||!n?(console.error("[LEADERBOARD] Missing player addresses"),!1):(console.log("[LEADERBOARD] Updating both players scores:",{winner:t,bluePlayer:Nh(e),redPlayer:Nh(n)}),await k_(e,t==="blue"?"win":t==="red"?"loss":"draw"),await k_(n,t==="red"?"win":t==="blue"?"loss":"draw"),console.log("[LEADERBOARD] Successfully updated both players scores"),!0)}catch(r){return console.error("[LEADERBOARD] Error updating both players scores:",r),!1}},hq=async(t=20)=>{try{const e=dq(),n=to(e,"leaderboard"),r=await pd(n);if(!r.exists())return[];const s=[];return r.forEach(i=>{const o=i.val();o&&s.push(o)}),s.sort((i,o)=>o.points!==i.points?o.points-i.points:o.wins!==i.wins?o.wins-i.wins:i.total_games-o.total_games),s.slice(0,t)}catch(e){return console.error("[LEADERBOARD] Error getting top entries:",e),[]}},Sa=()=>{if(!CE)throw new Error("[FIREBASE] Database not initialized");return CE},Gs={async getGame(t){try{const e=Sa(),n=to(e,`chess_games/${t}`),r=await pd(n);return r.exists()?r.val():null}catch(e){return console.error("[FIREBASE] Error getting game:",e),null}},async updateGame(t,e){if(!t)throw console.error("[FIREBASE] Tried to update game with undefined inviteCode!",e),new Error("inviteCode is required for updateGame");try{const n=Sa(),r=to(n,`chess_games/${t}`);await ey(r,{...e,updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game updated successfully")}catch(n){console.error("[FIREBASE] Error updating game:",n)}},subscribeToGame(t,e){try{const n=Sa(),r=to(n,`chess_games/${t}`);console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",t);const s=C2(r,i=>{if(i.exists()){const o=i.val();console.log("[FIREBASE] Game update received:",o),e(o)}});return console.log("[FIREBASE] Firebase subscription setup complete for game:",t),s}catch(n){return console.error("[FIREBASE] Error subscribing to game:",n),()=>{}}},async createGame(t){const e=t.invite_code;if(!e)throw console.error("[FIREBASE] Tried to create game with undefined inviteCode!",t),new Error("inviteCode is required for createGame");try{const n=Sa(),r=to(n,`chess_games/${e}`);console.log("[FIREBASE] Creating game with data:",t),await ey(r,{...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game created successfully:",e);const s=await pd(r);s.exists()?console.log("[FIREBASE] Game verification successful:",s.val()):console.error("[FIREBASE] Game creation verification failed - game not found after creation")}catch(n){throw console.error("[FIREBASE] Error creating game:",n),n}},async getActiveGames(){try{const t=Sa(),e=to(t,"chess_games"),n=await pd(e);if(!n.exists())return[];const r=n.val();return Object.values(r).filter(s=>s.game_state==="waiting"||s.game_state==="active")}catch(t){return console.error("[FIREBASE] Error getting active games:",t),[]}},async getOpenGames(){try{const t=Sa(),e=to(t,"chess_games"),n=await pd(e);if(!n.exists())return console.log("[FIREBASE] No games found in database"),[];const r=n.val();console.log("[FIREBASE] All games in database:",r);const s=Object.values(r).filter(i=>{const o=i.game_state==="waiting",a=i.is_public,c=!i.red_player||i.red_player==="0x0000000000000000000000000000000000000000";return console.log("[FIREBASE] Game filter check:",{inviteCode:i.invite_code,gameState:i.game_state,isPublic:i.is_public,redPlayer:i.red_player,isWaiting:o,noRedPlayer:c,passes:o&&a&&c}),o&&a&&c});return s.sort((i,o)=>new Date(o.created_at).getTime()-new Date(i.created_at).getTime()),console.log("[FIREBASE] Open games found:",s.length,s),s}catch(t){return console.error("[FIREBASE] Error getting open games:",t),[]}},async deleteGame(t){try{const e=Sa(),n=to(e,`chess_games/${t}`);await xQ(n),console.log("[FIREBASE] Game deleted:",t)}catch(e){console.error("[FIREBASE] Error deleting game:",e)}},async updateLeaderboard(t){try{const e=Sa(),n=to(e,`leaderboard/${t.username}`);await ey(n,{...t,updated_at:new Date().toISOString()})}catch(e){console.error("[FIREBASE] Error updating leaderboard:",e)}},async getLeaderboard(){try{const t=Sa(),e=to(t,"leaderboard"),n=await pd(e);if(!n.exists())return[];const r=n.val();return Object.values(r).sort((s,i)=>i.points-s.points)}catch(t){return console.error("[FIREBASE] Error getting leaderboard:",t),[]}},subscribeToLeaderboard(t){try{const e=Sa(),n=to(e,"leaderboard");return C2(n,s=>{if(s.exists()){const i=s.val(),o=Object.values(i).sort((a,c)=>c.points-a.points);console.log("[FIREBASE] Leaderboard update received:",o),t(o)}})}catch(e){return console.error("[FIREBASE] Error subscribing to leaderboard:",e),()=>{}}}},Pf=[{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerToGame",outputs:[{internalType:"bytes6",name:"",type:"bytes6"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"games",outputs:[{internalType:"address",name:"player1",type:"address"},{internalType:"address",name:"player2",type:"address"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"address",name:"winner",type:"address"},{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"uint256",name:"wagerAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"createGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"joinGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"winner",type:"address"}],name:"endGame",outputs:[],stateMutability:"nonpayable",type:"function"}],Aa="0x3112AF5728520F52FD1C6710dD7bD52285a68e47",Wn={LOBBY:"lobby",WAITING:"waiting",ACTIVE:"active",FINISHED:"finished"},wI={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},Sc=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],i5e=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}];function o5e(){const t=new Uint8Array(6);return window.crypto.getRandomValues(t),"0x"+Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}const fq=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s}=O0(),[i,o]=P.useState(""),[a,c]=P.useState(""),[l,u]=P.useState(!1),[d,h]=P.useState(!1),[f,p]=P.useState(!1),[g,w]=P.useState(!1),{writeContract:y,isPending:b,data:E}=US(),{writeContract:_,isPending:C,data:I,error:A}=US(),{writeContract:x,isPending:S,data:k}=US(),O=Gae(),{isLoading:U}=LS({hash:E}),{isLoading:G,data:F}=LS({hash:I}),{isLoading:T}=LS({hash:k}),{data:N}=j3({address:Aa,abi:Pf,functionName:"playerToGame",args:r?[r]:void 0,query:{enabled:!!r}}),{data:$}=j3({address:Aa,abi:Pf,functionName:"games",args:N?[N]:void 0,query:{enabled:!!N&&N!=="0x000000000000"}}),[R,D]=P.useState(""),B=async()=>{if(!r||!R||!ye){console.error("[CLAIM] Missing required data for claiming winnings");return}try{p(!0),console.log("[CLAIM] Claiming winnings for game:",R,"Player:",ye,"Address:",r);const M=await Gs.getGame(R);if(!M){console.error("[CLAIM] Error fetching game data:","Game data not found"),alert("Failed to fetch game data. Please try again.");return}console.log("[CLAIM] Firebase game data:",M);let q=null;if(M.winner&&(M.blue_player||M.red_player)&&(q=M.winner==="blue"?M.blue_player:M.red_player,console.log("[CLAIM] Using Firebase winner data:",{winner:M.winner,winnerAddress:q})),!q&&$)if(M.winner&&(M.winner==="blue"||M.winner==="red")){console.log("[CLAIM] Using Firebase winner color with contract player addresses");let Y,re,Pe,be,Ke,Ot;if(Array.isArray($))[Y,re,Pe,be,Ke,Ot]=$;else{console.error("[CLAIM] Unexpected contract data format:",$),alert("Failed to verify winner. Please try again.");return}q=M.winner==="blue"?Y:re,console.log("[CLAIM] Winner from Firebase color + contract addresses:",{winnerColor:M.winner,winnerAddress:q,player1:Y,player2:re})}else{console.log("[CLAIM] Using contract data for winner verification"),console.log("[CLAIM] Full contract data:",$);let Y,re,Pe,be,Ke,Ot;if(Array.isArray($))[Y,re,Pe,be,Ke,Ot]=$;else{console.error("[CLAIM] Unexpected contract data format:",$),alert("Failed to verify winner. Please try again.");return}const kt=String(be);if(kt.startsWith("0x"))q=kt;else if(kt==="blue"||kt==="red")q=kt==="blue"?Y:re;else if(kt==="1"||kt==="2")q=kt==="1"?Y:re;else{console.error("[CLAIM] Unknown winner format:",be,"as string:",kt),alert("Failed to verify winner. Please try again.");return}console.log("[CLAIM] Winner from contract:",{winner:be,winnerAddress:q,player1:Y,player2:re,winnerType:typeof be,winnerValue:be,address:r,addressType:typeof r})}if(!q){console.error("[CLAIM] Could not determine winner address"),alert("Failed to verify winner. Please try again.");return}if(console.log("[CLAIM] Winner verification details:",{winnerAddress:q,address:r,playerColor:ye,winnerAddressType:typeof q,addressType:typeof r,addressesMatch:q===r,winnerAddressLength:q==null?void 0:q.length,addressLength:r==null?void 0:r.length}),q!==r){console.error("[CLAIM] Player is not the winner",{winnerAddress:q,address:r,playerColor:ye}),alert("Only the winner can claim winnings.");return}console.log("[CLAIM]  Winner verification passed! Proceeding with contract call...");let j=M.invite_code;if(!j&&$){console.log("[CLAIM] Using invite code from contract data");let Y,re,Pe,be,Ke,Ot;if(Array.isArray($))[Y,re,Pe,be,Ke,Ot]=$,j=Ke;else{console.error("[CLAIM] Unexpected contract data format for invite code:",$),alert("Failed to get invite code. Please try again.");return}}if(!j||typeof j!="string"||!j.startsWith("0x")||j.length!==14){console.error("[CLAIM] Invalid invite code for contract claim:",j),alert("Invalid invite code for contract claim.");return}console.log("[CLAIM] Calling contract with:",{inviteCode:j,winner:q,functionName:"endGame",inviteCodeSource:M.invite_code?"Firebase":"Contract"}),x({address:Aa,abi:Pf,functionName:"endGame",args:[j,q]}),console.log("[CLAIM] Contract call initiated successfully"),S?console.log("[CLAIM] Contract call is pending..."):console.log("[CLAIM] Contract call status:",{isEndingGame:S,endGameHash:k})}catch(M){console.error("[CLAIM] Error claiming winnings:",M),alert("Failed to claim winnings. Please try again.")}finally{p(!1)}},[H,J]=P.useState(Sc),[ee,ne]=P.useState("blue"),[ie,we]=P.useState(null),[Z,se]=P.useState([]),[ue,ce]=P.useState([]),[fe,ge]=P.useState("Waiting for opponent..."),[Ae,pe]=P.useState(Wn.LOBBY),[ye,Ve]=P.useState(null),[Zt,Pt]=P.useState(null),[on,Lt]=P.useState(0),[Un,mi]=P.useState([]),[To,ys]=P.useState(!1),[Pn,ur]=P.useState(null),[wn,Gi]=P.useState(null),[cc,tb]=P.useState(""),[ll,nb]=P.useState(0),[rb,sb]=P.useState(!1),[Kh,Ku]=P.useState(!1),[en,Yh]=P.useState(!1),[Ro,Vi]=P.useState(null),[ib,zg]=P.useState(!1),[ob,ab]=P.useState(!0),[Qh,Hg]=P.useState(null),[Ms,C1]=P.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),[cb,pa]=P.useState([]),[ga,S1]=P.useState(null),Po=P.useRef(null),lc=P.useRef(null),Oo=P.useRef(r);P.useEffect(()=>{Oo.current=r},[r]),P.useEffect(()=>{I&&!G&&wn&&(console.log("[CONTRACT] Join transaction confirmed:",I),r===wn.address&&(console.log("[CONTRACT] Setting playerColor to red for confirmed join transaction"),Ve("red"),Pt(wn.gameData.blue_player)),Gs.updateGame(wn.inviteCode,{...wn.gameData,red_player:wn.address,game_state:"active"}).then(()=>{pe(Wn.ACTIVE),ge("Game started!"),yi(wn.inviteCode),Gi(null)}).catch(M=>{console.error("Error updating game in database:",M),ge("Joined game on contract but failed to update database"),Gi(null)}))},[I,G,wn,r]),P.useEffect(()=>{k&&!T&&(console.log("[CLAIM] End game transaction confirmed:",k),ge("Winnings claimed successfully! Transaction hash: "+k.slice(0,10)+"..."),p(!1))},[k,T]),P.useEffect(()=>{S===!1&&f&&!k&&(console.log("[CLAIM] End game transaction rejected or failed"),ge("Claim transaction was rejected. Please try again."),p(!1))},[S,f,k]),P.useEffect(()=>{E&&!U&&Pn&&!R&&(console.log("[CONTRACT] Create game transaction confirmed:",E),Gs.createGame(Pn).then(()=>{console.log("[FIREBASE] Game created successfully after transaction confirmation"),D(Pn.invite_code),Ve("blue"),Lt(ll),pe(Wn.WAITING),ge("Waiting for opponent to join..."),yi(Pn.invite_code),setTimeout(()=>{Zh()},1e3),ur(null),ys(!1)}).catch(M=>{console.error("[FIREBASE] Error creating game after transaction:",M),ge("Transaction confirmed but failed to create game in database"),ur(null),ys(!1)}))},[E,U,Pn,ll]),P.useEffect(()=>{b===!1&&Pn&&!E&&(console.log("[CONTRACT] Create game transaction rejected or failed"),ge("Transaction was rejected. Please try again."),ur(null),ys(!1))},[b,Pn,E]),P.useEffect(()=>{C===!1&&wn&&!I&&(console.log("[CONTRACT] Join game transaction rejected or failed"),console.log("[CONTRACT] Rejection details - isJoiningGameContract:",C),console.log("[CONTRACT] Rejection details - pendingJoinGameData:",wn),console.log("[CONTRACT] Rejection details - joinGameHash:",I),console.log("[CONTRACT] Rejection details - address:",r),console.log("[CONTRACT] Rejection details - playerGameInviteCode:",N),ge("Transaction was rejected. Please try again."),D(""),Ve(null),Lt(0),Pt(null),pe(Wn.LOBBY),ge(""),Gi(null))},[C,wn,I,r,N]),P.useEffect(()=>{r&&N!==void 0&&(g||(N!=="0x000000000000"&&$||N==="0x000000000000")&&lb())},[r,N,$,g]),P.useEffect(()=>{w(!1)},[r]),P.useEffect(()=>()=>{hb(),Po.current&&Po.current(),lc.current&&clearTimeout(lc.current)},[]);const lb=async()=>{if(r)try{if(console.log("[GAME_STATE] Checking for active games for player:",r),N&&N!=="0x000000000000"&&!$){console.log("[GAME_STATE] Waiting for contract data...");return}if(N&&N!=="0x000000000000"&&(console.log("[GAME_STATE] Found game in contract:",N),$)){let j,Y,re,Pe,be,Ke;if(Array.isArray($))[j,Y,re,Pe,be,Ke]=$;else{console.error("[GAME_STATE] Unexpected contract data format:",$);return}if(console.log("[GAME_STATE] Parsed contract game data:",{player1:j,player2:Y,isActive:re,winner:Pe,inviteCode:be,wagerAmount:Ke}),!be){console.error("[GAME_STATE] Invalid invite code:",be);return}const Ot=j===r?"blue":"red",kt=j===r?Y:j;console.log("[GAME_STATE] Player is",Ot,"opponent is",kt),console.log("[DEBUG] Contract address comparison:"),console.log("[DEBUG] - player1 (blue):",j),console.log("[DEBUG] - player2 (red):",Y),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - player1 === address:",j===r),console.log("[DEBUG] - player2 === address:",Y===r);const It=await Gs.getGame(be);if(It){if(console.log("[GAME_STATE] Found game in Firebase:",It),D(be),Ve(Ot),Lt(parseFloat(It.bet_amount)/1e18),Pt(kt),It.game_state==="waiting")pe(Wn.WAITING),ge("Waiting for opponent to join..."),console.log("[GAME_STATE] Setting game mode to WAITING");else if(It.game_state==="active"||It.game_state==="test_update"){if(pe(Wn.ACTIVE),ge("Game in progress"),console.log("[GAME_STATE] Setting game mode to ACTIVE (from state:",It.game_state,")"),It.board){const dr=It.board;J(ul(dr)),ne(It.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state:",It.game_state,"- treating as active"),pe(Wn.ACTIVE),ge("Game in progress"),It.board){const dr=It.board;J(ul(dr)),ne(It.current_player||"blue")}yi(be),w(!0),console.log("[GAME_STATE] Game state loaded from Firebase"),console.log("[GAME_STATE] Current game mode:",Ae),console.log("[GAME_STATE] Game state from Firebase:",It.game_state);return}else{console.log("[GAME_STATE] Game exists in contract but not in Firebase, syncing...");const dr={invite_code:be,game_title:`Game ${be.slice(-6)}`,bet_amount:Ke?Ke.toString():"0",blue_player:j,red_player:Y,game_state:re?"active":"waiting",board:{positions:Yu(Sc),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:Aa,is_public:!0};if(await Gs.createGame(dr),console.log("[GAME_STATE] Successfully synced game to Firebase:",dr),D(be),Ve(Ot),Lt(parseFloat(dr.bet_amount)/1e18),Pt(kt),re?(pe(Wn.ACTIVE),ge("Game in progress")):(pe(Wn.WAITING),ge("Waiting for opponent to join...")),dr.board){const Aq=dr.board;J(ul(Aq)),ne(dr.current_player||"blue")}yi(be),w(!0),console.log("[GAME_STATE] Game state loaded after sync");return}}console.log("[GAME_STATE] No contract game found, checking Firebase...");const q=(await Gs.getActiveGames()).filter(j=>j.chain==="sanko"&&(j.blue_player===r||j.red_player===r)&&["waiting","active"].includes(j.game_state));if(q&&q.length>0){const j=q[0];if(console.log("[GAME_STATE] Found active game in Firebase:",j),console.log("[DEBUG] Firebase fallback address comparison:"),console.log("[DEBUG] - blue_player:",j.blue_player),console.log("[DEBUG] - red_player:",j.red_player),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - blue_player === address:",j.blue_player===r),console.log("[DEBUG] - red_player === address:",j.red_player===r),D(j.invite_code),Ve(j.blue_player===r?"blue":"red"),Lt(parseFloat(j.bet_amount)/1e18),Pt(j.blue_player===r?j.red_player:j.blue_player),j.game_state==="waiting")pe(Wn.WAITING),ge("Waiting for opponent to join...");else if(j.game_state==="active"||j.game_state==="test_update"){if(pe(Wn.ACTIVE),ge("Game in progress"),j.board){const Y=j.board;J(ul(Y)),ne(j.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state in Firebase check:",j.game_state,"- treating as active"),pe(Wn.ACTIVE),ge("Game in progress"),j.board){const Y=j.board;J(ul(Y)),ne(j.current_player||"blue")}yi(j.invite_code),w(!0),console.log("[GAME_STATE] Game state loaded successfully from Firebase");return}console.log("[GAME_STATE] No active games found"),pe(Wn.LOBBY),ys(!1),w(!0)}catch(M){console.error("[GAME_STATE] Error in checkPlayerGameState:",M)}},ub=()=>{sb(!rb),rb?(document.documentElement.classList.remove("chess-dark-mode"),document.body.classList.remove("chess-dark-mode")):(document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode"))},uc=async()=>{try{const M=await hq(20);pa(M)}catch(M){console.error("Error loading leaderboard:",M)}},db=async M=>{if(console.log("[SCORE] updateScore called with:",M,"for address:",r),!r){console.error("[SCORE] No address available for score update");return}try{console.log("[SCORE] Updating score for address:",Nh(r)),await k_(r,M)?console.log("[SCORE] Successfully updated score for:",Nh(r)):console.error("[SCORE] Failed to update score"),console.log("[SCORE] updateScore completed successfully")}catch(q){console.error("[SCORE] Error updating score:",q)}},A1=async(M,q,j)=>{try{if(console.log("[SCORE] Updating both players scores:",{winner:M,bluePlayer:q,redPlayer:j}),!q||!j){console.error("[SCORE] Missing player addresses from contract");return}await s5e(M,q,j)?(console.log("[SCORE] Successfully updated both players scores"),await uc()):console.error("[SCORE] Failed to update both players scores")}catch(Y){console.error("[SCORE] Error updating both players scores:",Y)}},Zh=async()=>{try{const M=await Gs.getOpenGames();console.log("[FIREBASE] Loaded open games:",M),await I1(M),mi(M)}catch(M){console.error("Error loading open games:",M)}},I1=async M=>{if(console.log("[CLEANUP] Checking for ghost games..."),!O){console.log("[CLEANUP] Public client not available, skipping cleanup");return}for(const q of M)try{const j=q.invite_code;if(!j||typeof j!="string"||!j.startsWith("0x")||j.length!==14){console.warn("[CLEANUP] Invalid invite code for game:",q.invite_code,j);continue}const Y=await O.readContract({address:Aa,abi:Pf,functionName:"games",args:[j]});(!Y||Array.isArray(Y)&&Y[0]==="0x0000000000000000000000000000000000000000")&&(console.log("[CLEANUP] Found ghost game:",q.invite_code,"- removing from Firebase"),await Gs.deleteGame(q.invite_code),console.log("[CLEANUP] Ghost game removed:",q.invite_code))}catch(j){console.error("[CLEANUP] Error checking game:",q.invite_code,j)}},N1=async()=>{if(!(!r||ll<=0)){ys(!0);try{const M=o5e();D(M);const q={invite_code:M,game_title:`Chess Game ${M.slice(-6)}`,bet_amount:(ll*1e18).toString(),blue_player:r,game_state:"waiting",board:{positions:Yu(Sc),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:Aa,is_public:!0,created_at:new Date().toISOString()};y({address:Aa,abi:Pf,functionName:"createGame",args:[M],value:BigInt(Math.floor(ll*1e18))}),ur(q),ge("Creating game... Please confirm transaction in your wallet.")}catch(M){console.error("Error creating game:",M),ge("Failed to create game. Please try again.")}finally{ys(!1)}}},x1=async M=>{if(r)try{const q=await Gs.getGame(M);if(!q||q.game_state!=="waiting"){ge("Game not found or already full");return}const j=parseFloat(q.bet_amount),Y=j/1e18;if(D(M),Ve("red"),Lt(Y),Pt(q.blue_player),console.log("[JOIN] Setting up join game with data:",{inviteCode:M,playerColor:"red",wagerAmountTDMT:Y,opponent:q.blue_player,address:r}),r===q.blue_player){console.error("[JOIN] Player cannot join their own game"),ge("You cannot join your own game");return}if(N&&N!=="0x000000000000"){console.error("[JOIN] Player already has an active game:",N),ge("You already have an active game");return}if(typeof window<"u"&&window.ethereum)try{const Pe=await window.ethereum.request({method:"eth_chainId"}),be=await window.ethereum.request({method:"eth_accounts"});console.log("[JOIN] Wallet state check - chainId:",Pe),console.log("[JOIN] Wallet state check - connectedAccounts:",be),console.log("[JOIN] Wallet state check - currentAddress:",r),console.log("[JOIN] Wallet state check - isConnected:",s)}catch(Pe){console.error("[JOIN] Error checking wallet state:",Pe)}console.log("[JOIN] Contract call parameters - contractAddress:",Aa),console.log("[JOIN] Contract call parameters - functionName: joinGame"),console.log("[JOIN] Contract call parameters - args:",[M]);const re=BigInt(j);console.log("[JOIN] Contract call parameters - wagerAmount from Firebase (wei):",j),console.log("[JOIN] Contract call parameters - wagerValue (wei):",re),console.log("[JOIN] Contract call parameters - value as hex:","0x"+re.toString(16)),console.log("[JOIN] Contract call parameters - value in wei:",re.toString()),ge("Joining game... Please confirm transaction in your wallet."),setTimeout(()=>{console.log("[JOIN] About to call writeJoinGame..."),console.log("[JOIN] Final contract call parameters:"),console.log("[JOIN] - address:",Aa),console.log("[JOIN] - functionName: joinGame"),console.log("[JOIN] - args:",[M]),console.log("[JOIN] - value:",re),console.log("[JOIN] - value as BigInt:",re.toString()),_({address:Aa,abi:Pf,functionName:"joinGame",args:[M],value:re}),console.log("[JOIN] writeJoinGame called, setting pending data..."),Gi({inviteCode:M,gameData:q,address:r}),console.log("[JOIN] Pending data set"),console.log("[JOIN] Transaction initiated - waiting for user confirmation in MetaMask...")},500)}catch(q){console.error("[JOIN] Error joining game:",q),ge("Failed to join game. Please try again."),D(""),Ve(null),Lt(0),Pt(null)}},[Ek,T1]=P.useState(null),[_k,Ck]=P.useState(""),[Sk,Ak]=P.useState(!0),hb=()=>{console.log("[FIREBASE] No fallback to stop")},yi=M=>{console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",M),Po.current&&(console.log("[FIREBASE] Removing existing subscription"),Po.current());const q=Gs.subscribeToGame(M,j=>{const Y=Oo.current;if(console.log("=== [DEBUG] FIREBASE SUBSCRIPTION CALLBACK ==="),console.log("[DEBUG] Current wallet address (from addressRef):",Y),console.log("[DEBUG] Current wallet address (from useAccount):",r),console.log("[DEBUG] Game data received:",j),console.log("[DEBUG] Blue player from Firebase:",j==null?void 0:j.blue_player),console.log("[DEBUG] Red player from Firebase:",j==null?void 0:j.red_player),console.log("[DEBUG] Blue player type:",typeof(j==null?void 0:j.blue_player)),console.log("[DEBUG] Red player type:",typeof(j==null?void 0:j.red_player)),console.log("[DEBUG] Current address type:",typeof Y),console.log("[DEBUG] Current playerColor state:",ye),console.log("[DEBUG] Pending join game data:",!!wn),!j){console.log("[DEBUG] No game data received");return}if(wn&&Y===wn.address)console.log("[DEBUG] Pending join transaction detected - preserving playerColor:",ye),j.blue_player&&j.red_player&&j.red_player!=="0x0000000000000000000000000000000000000000"&&Pt(j.blue_player===Y?j.red_player:j.blue_player);else if(Y&&j.blue_player&&j.red_player&&j.red_player!=="0x0000000000000000000000000000000000000000"){console.log("[DEBUG] Both players present, comparing addresses...");const Pe=Y.toLowerCase()===j.blue_player.toLowerCase(),be=Y.toLowerCase()===j.red_player.toLowerCase();console.log("[DEBUG] Blue player match:",Pe),console.log("[DEBUG] Red player match:",be),console.log("[DEBUG] Blue comparison:",`${Y.toLowerCase()} === ${j.blue_player.toLowerCase()}`),console.log("[DEBUG] Red comparison:",`${Y.toLowerCase()} === ${j.red_player.toLowerCase()}`),Pe?(console.log("[DEBUG] Setting player color to BLUE"),Ve("blue"),Pt(j.red_player)):be?(console.log("[DEBUG] Setting player color to RED"),Ve("red"),Pt(j.blue_player)):(console.log("[DEBUG] No address match found - setting playerColor to null"),Ve(null),Pt(null))}else{if(console.log("[DEBUG] Missing player data or red player is zero address - using contract data as fallback"),console.log("[DEBUG] - currentAddress:",!!Y),console.log("[DEBUG] - blue_player:",!!j.blue_player),console.log("[DEBUG] - red_player:",j==null?void 0:j.red_player),console.log("[DEBUG] - Current playerColor state:",ye),console.log("[DEBUG] - Contract game data available:",!!$),!ye&&$&&Array.isArray($)&&Y){const[Pe,be]=$;if(Pe&&be){const Ke=Pe.toLowerCase()===Y.toLowerCase()?"blue":"red",Ot=Pe.toLowerCase()===Y.toLowerCase()?be:Pe;console.log("[DEBUG] Setting playerColor from contract fallback:",Ke),Ve(Ke),Pt(Ot)}}else ye?console.log("[DEBUG] Preserving existing valid playerColor:",ye):(console.log("[DEBUG] No valid data available, setting playerColor to null"),Ve(null));j.blue_player&&j.red_player&&j.red_player!=="0x0000000000000000000000000000000000000000"&&Pt(j.blue_player===Y?j.red_player:j.blue_player)}console.log("=== [DEBUG] END FIREBASE SUBSCRIPTION CALLBACK ==="),console.log("[WAGER DEBUG] bet_amount from Firebase:",j.bet_amount),console.log("[WAGER DEBUG] bet_amount type:",typeof j.bet_amount),console.log("[WAGER DEBUG] Full gameData:",j),console.log("[WAGER DEBUG] parsed value:",j.bet_amount?parseFloat(j.bet_amount):"null"),console.log("[WAGER DEBUG] converted to TDMT:",j.bet_amount?parseFloat(j.bet_amount)/1e18:"null");let re=0;j.bet_amount&&!isNaN(parseFloat(j.bet_amount))?(re=parseFloat(j.bet_amount)/1e18,console.log("[WAGER DEBUG] Setting wager from Firebase:",re)):$&&Array.isArray($)&&$[5]?(re=parseFloat($[5].toString())/1e18,console.log("[WAGER DEBUG] Setting wager from contract data:",re)):console.log("[WAGER DEBUG] Setting wager to 0 (no valid bet_amount found)"),Lt(re),j.board&&J(ul(j.board)),j.current_player&&ne(j.current_player),j.game_state==="active"?(pe(Wn.ACTIVE),ge("Game in progress")):j.game_state==="finished"?(pe(Wn.FINISHED),ge("Game finished")):j.game_state==="waiting"&&(pe(Wn.WAITING),ge("Waiting for opponent to join..."))});Po.current=q,console.log("[FIREBASE] Firebase subscription setup complete for game:",M)};P.useEffect(()=>(R&&yi(R),()=>{Po.current&&Po.current()}),[R,r]),P.useEffect(()=>{if($&&!ye&&r){console.log("[FALLBACK] Setting playerColor from contract data");let M,q,j,Y,re,Pe;if(Array.isArray($))[M,q,j,Y,re,Pe]=$;else{console.error("[FALLBACK] Unexpected contract data format:",$);return}const be=M===r?"blue":"red",Ke=M===r?q:M;console.log("[FALLBACK] Contract-based player assignment:"),console.log("[FALLBACK] - player1 (blue):",M),console.log("[FALLBACK] - player2 (red):",q),console.log("[FALLBACK] - current address:",r),console.log("[FALLBACK] - assigned color:",be),console.log("[FALLBACK] - opponent:",Ke),console.log("[FALLBACK] - inviteCode from contract:",re),Ve(be),Pt(Ke),!R&&re&&(console.log("[FALLBACK] Setting missing inviteCode:",re),D(re))}},[$,ye,r,R]),P.useEffect(()=>{if(F&&wn){console.log("[RECEIPT] Join transaction confirmed!"),console.log("[RECEIPT] Transaction hash:",F.transactionHash),console.log("[RECEIPT] Pending data:",wn);const{inviteCode:M,gameData:q,address:j}=wn;Gs.updateGame(M,{red_player:j,blue_player:q.blue_player,bet_amount:q.bet_amount,game_state:"active",last_move:null,board:{positions:Yu(Sc),rows:8,cols:8},current_player:"blue"}).then(()=>{console.log("[RECEIPT] Firebase updated successfully after join confirmation"),ge("Game started! You are the red player."),pe(Wn.ACTIVE),Gi(null)}).catch(Y=>{console.error("[RECEIPT] Error updating Firebase after join confirmation:",Y),ge("Game joined but failed to update game state. Please refresh.")})}},[F,wn]),P.useEffect(()=>{A&&(console.error("[ERROR] Join transaction failed:",A),ge(`Failed to join game: ${A.message||"Transaction rejected"}`),D(""),Ve(null),Lt(0),Pt(null),Gi(null))},[A]);const Yu=M=>{const q={};return M.forEach((j,Y)=>{j.forEach((re,Pe)=>{q[`${Y}_${Pe}`]=re})}),q},ul=M=>{if(!M||!M.positions)return console.warn("[BOARD] No board data available, using initial board"),Sc;if(console.log("[BOARD] Attempting to reconstruct board from:",M),console.log("[BOARD] Positions type:",typeof M.positions),console.log("[BOARD] Positions is array:",Array.isArray(M.positions)),console.log("[BOARD] Positions value:",M.positions),typeof M.positions=="object"&&!Array.isArray(M.positions)){const q=M.positions,j=M.rows||8,Y=M.cols||8,re=Array(j).fill(null).map(()=>Array(Y).fill(null));for(let Pe=0;Pe<j;Pe++)for(let be=0;be<Y;be++){const Ke=`${Pe}_${be}`;re[Pe][be]=q[Ke]||null}return console.log("[BOARD] Reconstructed from flat structure:",re),re}return Array.isArray(M.positions)?(console.log("[BOARD] Found array structure, length:",M.positions.length),M.positions.length===8?M.positions.every((j,Y)=>{const re=Array.isArray(j)&&j.length===8;return re||console.warn(`[BOARD] Row ${Y} is invalid:`,j,"Type:",typeof j,"Length:",j==null?void 0:j.length),re})?(console.log("[BOARD] Using legacy array structure"),M.positions):(console.warn("[BOARD] Legacy array structure is malformed, using initial board"),Sc):(console.warn("[BOARD] Array has wrong length:",M.positions.length,"expected 8"),Sc)):(console.warn("[BOARD] Unknown board structure, using initial board:",M),Sc)},Jh=M=>`${M.slice(0,6)}...${M.slice(-4)}`,ss=M=>M&&M===M.toUpperCase()?"red":"blue",qg=(M,q)=>M>=0&&M<8&&q>=0&&q<8,dl=(M,q)=>{const j=q==="red"?"K":"k";let Y=-1,re=-1;for(let be=0;be<8;be++){for(let Ke=0;Ke<8;Ke++)if(M[be][Ke]===j){Y=be,re=Ke;break}if(Y!==-1)break}return Y===-1?!1:Gg(Y,re,q==="red"?"blue":"red",M)},Gg=(M,q,j,Y)=>{if(!Y||!Array.isArray(Y)||Y.length!==8)return console.warn("[SAFETY] Invalid board structure in isSquareUnderAttack:",Y),!1;for(let re=0;re<8;re++){if(!Y[re]||!Array.isArray(Y[re])||Y[re].length!==8)return console.warn("[SAFETY] Invalid board row structure:",Y[re]),!1;for(let Pe=0;Pe<8;Pe++){const be=Y[re][Pe];if(be&&ss(be)===j&&Ee(be,re,Pe,M,q,!1,j,Y,!0))return!0}}return!1},Vg=(M,q,j,Y,re,Pe=H)=>{const be=Pe[M][q];if(!be)return!1;const Ke=Pe.map(Ot=>[...Ot]);return Ke[j][Y]=be,Ke[M][q]=null,dl(Ke,re)},R1=(M,q,j,Y,re,Pe)=>{const be=M==="blue"?-1:1,Ke=M==="blue"?6:1;if(!qg(Y,re)||M==="blue"&&Y>=q||M==="red"&&Y<=q)return!1;if(j===re&&Y===q+be)return Pe[Y][re]===null;if(j===re&&q===Ke&&Y===q+2*be)return Pe[q+be][j]===null&&Pe[Y][re]===null;if(Math.abs(j-re)===1&&Y===q+be){const Ot=Pe[Y][re];if(Ot!==null&&ss(Ot)!==M)return!0;if(Ot===null&&Ms.lastPawnDoubleMove){const{row:kt,col:It}=Ms.lastPawnDoubleMove;if(kt===q&&It===re){const dr=Pe[q][re];if(dr&&dr.toLowerCase()==="p"&&ss(dr)!==M)return!0}}}return!1},Qu=(M,q,j,Y,re)=>M===j||q===Y,z=(M,q,j,Y)=>{const re=Math.abs(M-j),Pe=Math.abs(q-Y);return re===2&&Pe===1||re===1&&Pe===2},K=(M,q,j,Y,re)=>Math.abs(M-j)===Math.abs(q-Y),te=(M,q,j,Y,re)=>Qu(M,q,j,Y)||K(M,q,j,Y),X=(M,q,j,Y,re)=>{const Pe=Math.abs(q-Y),be=Math.abs(j-re);if(Pe<=1&&be<=1)return!0;if(Pe===0&&be===2){if(M==="blue"&&!Ms.blueKingMoved){if(re===6&&!Ms.blueRooksMove.right||re===2&&!Ms.blueRooksMove.left)return!0}else if(M==="red"&&!Ms.redKingMoved&&(re===6&&!Ms.redRooksMove.right||re===2&&!Ms.redRooksMove.left))return!0}return!1},Q=(M,q,j,Y,re)=>{const Pe=M===j?0:(j-M)/Math.abs(j-M),be=q===Y?0:(Y-q)/Math.abs(Y-q);let Ke=M+Pe,Ot=q+be;for(;Ke!==j||Ot!==Y;){if(re[Ke][Ot]!==null)return!1;Ke+=Pe,Ot+=be}return!0},Ee=(M,q,j,Y,re,Pe=!0,be=ss(M),Ke=H,Ot=!1)=>{if(!M||!qg(Y,re))return!1;const kt=Ke[Y][re];if(kt&&ss(kt)===be)return!1;let It=!1;switch(M.toUpperCase()){case"P":It=R1(be,q,j,Y,re,Ke);break;case"R":It=Qu(q,j,Y,re)&&Q(q,j,Y,re,Ke);break;case"N":It=z(q,j,Y,re);break;case"B":It=K(q,j,Y,re)&&Q(q,j,Y,re,Ke);break;case"Q":It=te(q,j,Y,re)&&Q(q,j,Y,re,Ke);break;case"K":It=X(be,q,j,Y,re);break}return!(!It||Pe&&Vg(q,j,Y,re,be,Ke))},Ie=(M,q=H,j=ee)=>{const Y=[],re=q[M.row][M.col];if(!re||ss(re)!==j)return Y;const Pe=re.toLowerCase();if(Pe==="p"){const be=j==="blue"?-1:1,Ke=j==="blue"?6:1,Ot=M.row+be;if(Ot>=0&&Ot<8&&Ee(re,M.row,M.col,Ot,M.col,!0,j,q,!0)&&Y.push({row:Ot,col:M.col}),M.row===Ke){const kt=M.row+2*be;kt>=0&&kt<8&&Ee(re,M.row,M.col,kt,M.col,!0,j,q,!0)&&Y.push({row:kt,col:M.col})}for(const kt of[-1,1]){const It=M.col+kt,dr=M.row+be;It>=0&&It<8&&dr>=0&&dr<8&&Ee(re,M.row,M.col,dr,It,!0,j,q,!0)&&Y.push({row:dr,col:It})}}else if(Pe==="n"){const be=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[Ke,Ot]of be){const kt=M.row+Ke,It=M.col+Ot;kt>=0&&kt<8&&It>=0&&It<8&&Ee(re,M.row,M.col,kt,It,!0,j,q,!0)&&Y.push({row:kt,col:It})}}else for(let be=0;be<8;be++)for(let Ke=0;Ke<8;Ke++)Ee(re,M.row,M.col,be,Ke,!0,j,q,!0)&&Y.push({row:be,col:Ke});return Y},Ge=(M,q=H)=>{if(!dl(q,M))return!1;for(let j=0;j<8;j++)for(let Y=0;Y<8;Y++){const re=q[j][Y];if(re&&ss(re)===M&&Ie({row:j,col:Y},q,M).length>0)return!1}return!0},Bt=(M,q=H)=>{if(dl(q,M))return!1;for(let j=0;j<8;j++)for(let Y=0;Y<8;Y++){const re=q[j][Y];if(re&&ss(re)===M&&Ie({row:j,col:Y},q,M).length>0)return!1}return!0},tn=(M,q)=>{if(console.log("[CLICK] Square clicked:",{row:M,col:q}),console.log("[CLICK] Game mode:",Ae,"Player color:",ye),console.log("[CLICK] Current player:",ee,"Player color:",ye),Ae!==Wn.ACTIVE||!ye){console.log("[CLICK] Game not active or no player color");return}const j=H[M][q],Y=j?ss(j):null;if(console.log("[CLICK] Piece at square:",j,"Piece color:",Y),ee!==ye){console.log("[CLICK] Not player's turn. Current:",ee,"Player:",ye);return}if(j&&Y===ye){we({row:M,col:q});const re=Ie({row:M,col:q});se(re);return}if(ie&&Z.some(re=>re.row===M&&re.col===q)){Bn(ie,{row:M,col:q}),we(null),se([]);return}we(null),se([])},Bn=async(M,q)=>{if(!ye||ee!==ye)return;const j=H[M.row][M.col];if(j){if(console.log("[PROMOTION] Checking pawn promotion:",{piece:j,pieceUpperCase:j.toUpperCase(),playerColor:ye,currentPlayer:ee,toRow:q.row,isPawn:j.toUpperCase()==="P",redPromotion:ee==="red"&&q.row===0,bluePromotion:ee==="blue"&&q.row===7,showPromotion:en,promotionMove:Ro,shouldShowPromotion:j.toUpperCase()==="P"&&(ee==="red"&&q.row===0||ee==="blue"&&q.row===7)}),j.toUpperCase()==="P"&&(ee==="red"&&q.row===0||ee==="blue"&&q.row===7)){console.log("[PROMOTION] Showing promotion dialog for piece:",j,"at position:",q),console.log("[PROMOTION] Setting promotion state - before: showPromotion:",en,"promotionMove:",Ro),Vi({from:M,to:q}),Yh(!0),console.log("[PROMOTION] Promotion state set - should show dialog on next render");return}await zt(M,q)}},zt=async(M,q,j="q")=>{if(!ye||ee!==ye||!H[M.row][M.col])return;const Pe=H[q.row][q.col]!==null;if(Kg(Pe?"capture":"move"),Pe){Hg({row:q.row,col:q.col,show:!0}),setTimeout(()=>{Xh(M,q,j),Hg(null)},500);return}Xh(M,q,j)},Xh=async(M,q,j="q")=>{if(!ye||ee!==ye)return;const Y=H[M.row][M.col];if(!Y)return;const re=H.map(kt=>[...kt]);let Pe=Y;Y.toUpperCase()==="P"&&(ye==="red"&&q.row===0||ye==="blue"&&q.row===7)&&(Pe=ye==="red"?j.toUpperCase():j.toLowerCase()),gq(re,M,q,Y),re[q.row][q.col]=Pe,re[M.row][M.col]=null,mq(M,q,Y);const be=ee==="blue"?"red":"blue";dl(re,be)&&Kg("check");let Ke="active",Ot=null;Ge(be,re)?(Ke="finished",Ot=ee,ge(`${ee==="red"?"Red":"Blue"} wins by checkmate!`),Kg("checkmate"),pq(),console.log("[SCORE] Updating scores - Winner:",ee,"Loser:",be),console.log("[SCORE] Contract game data:",$),console.log("[SCORE] Player game invite code:",N),$&&$.length>=2?(console.log("[SCORE] Using contract data for both players update"),await A1(ee,$[0],$[1])):(console.log("[SCORE] Contract data not available, falling back to single player update"),await db(ee===ye?"win":"loss"),await uc()),Ot===ye&&(console.log("[CONTRACT] Triggering automatic payout for winner:",Ot),setTimeout(()=>{B()},2e3))):Bt(be,re)&&(Ke="finished",ge("Game ended in stalemate"),console.log("[SCORE] Updating scores for draw"),await db("draw"));try{if(!R){console.error("[BUG] inviteCode is missing when trying to update game!"),ge("Game code missing. Please reload or rejoin the game.");return}console.log("[DEBUG] About to update game. inviteCode:",R,"gameData:",{board:{positions:re},current_player:be,game_state:Ke,winner:Ot,last_move:{from:M,to:q}});const It={...await Gs.getGame(R),board:{positions:Yu(re),rows:8,cols:8},current_player:be,game_state:Ke,winner:Ot,last_move:{from:M,to:q}};console.log("[FIREBASE] Storing data in Firebase:",It),await Gs.updateGame(R,It),console.log("[FIREBASE] Game updated successfully"),console.log("[FIREBASE] Real-time event should be delivered immediately")}catch(kt){console.error("[DATABASE] Error updating game:",kt)}J(re),ne(be),S1({from:M,to:q}),Yh(!1),Vi(null)},pq=()=>{zg(!0),Kg("victory"),lc.current&&clearTimeout(lc.current),lc.current=setTimeout(()=>{zg(!1)},5e3)},gq=(M,q,j,Y)=>{Y.toLowerCase()==="k"&&Math.abs(q.col-j.col)===2&&(j.col===6?(M[q.row][7]=null,M[q.row][5]=ss(Y)==="blue"?"r":"R"):j.col===2&&(M[q.row][0]=null,M[q.row][3]=ss(Y)==="blue"?"r":"R")),Y.toLowerCase()==="p"&&Math.abs(q.col-j.col)===1&&M[j.row][j.col]===null&&Ms.lastPawnDoubleMove&&Ms.lastPawnDoubleMove.row===q.row&&Ms.lastPawnDoubleMove.col===j.col&&(M[q.row][j.col]=null)},mq=(M,q,j)=>{const Y={...Ms};j.toLowerCase()==="k"?ss(j)==="blue"?Y.blueKingMoved=!0:Y.redKingMoved=!0:j.toLowerCase()==="r"&&(ss(j)==="blue"?(M.col===0&&(Y.blueRooksMove.left=!0),M.col===7&&(Y.blueRooksMove.right=!0)):(M.col===0&&(Y.redRooksMove.left=!0),M.col===7&&(Y.redRooksMove.right=!0))),j.toLowerCase()==="p"&&Math.abs(M.row-q.row)===2?Y.lastPawnDoubleMove={row:q.row,col:q.col}:Y.lastPawnDoubleMove=null,C1(Y)},Kg=M=>{if(ob)try{const q=new Audio(`/images/${M}.mp3`);q.volume=.3,q.play().catch(j=>console.warn("Audio play failed:",j))}catch(q){console.warn("Sound play failed:",q)}},yq=async()=>{if(R)try{console.log("[RESET] Resetting corrupted game data for:",R);const M={board:{positions:Yu(Sc),rows:8,cols:8},current_player:"blue",game_state:"active",winner:null,last_move:null};await Gs.updateGame(R,M),console.log("[RESET] Successfully reset game data"),ge("Game reset successfully. You can now make moves.")}catch(M){console.error("[RESET] Error resetting game data:",M),ge("Failed to reset game. Please try again.")}},Ik=async()=>{try{console.warn("[STUCK GAMES] checkStuckGames is not implemented.")}catch(M){console.error("Error checking stuck games:",M)}},wq=(M,q)=>{if(!H||!Array.isArray(H)||H.length!==8||!H[M]||!Array.isArray(H[M])||H[M].length!==8)return console.warn("[SAFETY] Invalid board structure in renderSquare:",{row:M,col:q,board:H}),m.jsx("div",{className:"square error",children:m.jsx("div",{className:"error-indicator",children:"!"})},`${M}-${q}`);const j=H[M][q],Y=(ie==null?void 0:ie.row)===M&&(ie==null?void 0:ie.col)===q,re=Z.some(Ke=>Ke.row===M&&Ke.col===q),Pe=ga&&(ga.from.row===M&&ga.from.col===q||ga.to.row===M&&ga.to.col===q),be=j&&j.toUpperCase()==="K"&&dl(H,ss(j));return m.jsxs("div",{className:`square ${Y?"selected":""} ${re?"legal-move":""} ${Pe?"last-move":""} ${be?"square-in-check":""}`,onClick:()=>tn(M,q),children:[j&&m.jsx("div",{className:"piece",style:{backgroundImage:wI[j]?`url(${wI[j]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),re&&m.jsx("div",{className:"legal-move-indicator"})]},`${M}-${q}`)},bq=()=>{if(console.log("[PROMOTION] Rendering promotion dialog:",{showPromotion:en,promotionMove:Ro,playerColor:ye,currentPlayer:ee,showPromotionType:typeof en,promotionMoveType:typeof Ro,playerColorType:typeof ye}),!en||!Ro)return console.log("[PROMOTION] Not showing dialog - conditions not met"),console.log("[PROMOTION] - showPromotion:",en),console.log("[PROMOTION] - promotionMove:",Ro),null;const M=ee==="red"?["Q","R","B","N"]:["q","r","b","n"];return console.log("[PROMOTION] Promotion pieces for",ee,":",M),m.jsx("div",{className:"promotion-dialog",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.9)",border:"2px solid gold",borderRadius:"8px",padding:"20px",zIndex:1e3},children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{style:{color:"white",marginBottom:"15px"},children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",style:{display:"flex",gap:"10px"},children:M.map(q=>m.jsx("div",{className:"promotion-piece",onClick:()=>{console.log("[PROMOTION] Selected piece:",q),zt(Ro.from,Ro.to,q.toLowerCase()),Yh(!1),Vi(null)},style:{cursor:"pointer",padding:"10px",border:"2px solid white",borderRadius:"4px",background:"rgba(255, 255, 255, 0.1)"},children:m.jsx("img",{src:wI[q],alt:q,style:{width:"40px",height:"40px"}})},q))})]})})},vq=()=>m.jsxs("div",{className:"piece-gallery",children:[m.jsx("h3",{children:"Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:i5e.map(M=>m.jsxs("div",{className:"piece-gallery-item",children:[m.jsx("img",{src:M.img,alt:M.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:M.name}),m.jsx("div",{className:"piece-gallery-desc",children:M.desc})]},M.key))})]}),Nk=()=>m.jsxs("div",{className:"chess-multiplayer-lobby",children:[m.jsx("h2",{children:"Multiplayer Chess Lobby"}),s?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"status-bar",children:["Connected: ",Jh(r)]}),m.jsxs("div",{className:"lobby-content",children:[m.jsxs("div",{className:"open-games",children:[m.jsx("h3",{children:"Open Games"}),m.jsxs("div",{className:"games-list",children:[Un.map(M=>m.jsxs("div",{className:"game-item",children:[m.jsxs("div",{className:"game-info",children:[m.jsx("div",{className:"game-id",children:M.game_title||"Untitled Game"}),m.jsxs("div",{className:"wager",children:["Wager: ",parseFloat(M.bet_amount)," tDMT"]}),m.jsxs("div",{className:"title",children:["Created by: ",Jh(M.blue_player)]})]}),m.jsx("button",{className:"join-btn",onClick:()=>x1(M.invite_code),children:"Join Game"})]},M.invite_code)),Un.length===0&&m.jsx("div",{className:"no-games",children:"No open games available"})]})]}),m.jsxs("div",{className:"actions",children:[m.jsx("button",{className:"create-btn",onClick:()=>ys(!0),disabled:To,children:"Create New Game"}),m.jsx("button",{className:"resume-btn",onClick:Ik,style:{marginTop:"10px",background:"rgba(0, 255, 0, 0.1)",border:"2px solid #00ff00",color:"#00ff00",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:"Check for Active Games"}),m.jsx("button",{onClick:Zh,style:{marginTop:"10px",background:"rgba(0, 123, 255, 0.1)",border:"2px solid #007bff",color:"#007bff",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:" Refresh Lobby"})]}),To&&m.jsxs("div",{className:"create-form",children:[m.jsx("h3",{children:"Create New Game"}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Wager (tDMT):"}),m.jsx("input",{type:"number",value:ll,onChange:M=>nb(Number(M.target.value)),placeholder:"0.1",min:"0",step:"0.1"})]}),m.jsxs("div",{className:"form-actions",children:[m.jsx("button",{className:"create-confirm-btn",onClick:N1,disabled:ll<=0,children:"Create Game"}),m.jsx("button",{className:"cancel-btn",onClick:()=>ys(!1),children:"Cancel"})]})]})]})]}):m.jsx("div",{className:"wallet-notice",children:"Please connect your wallet to play multiplayer chess"})]}),Eq=()=>m.jsxs("div",{className:"chess-multiplayer-waiting",children:[m.jsx("h2",{children:"Waiting for Opponent"}),m.jsxs("div",{className:"game-code",children:["Invite Code: ",m.jsx("strong",{children:R})]}),m.jsxs("div",{className:"game-info",children:[m.jsxs("p",{children:["Wager: ",on," tDMT"]}),m.jsx("p",{children:"Share this invite code with your opponent"})]})]}),_q=()=>m.jsxs("div",{className:"chess-game",children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:" Multiplayer Chess"}),m.jsxs("div",{className:"chess-controls",children:[m.jsx("button",{onClick:ub,className:"theme-toggle-btn",title:"Toggle Dark Mode",children:""}),e&&m.jsx("button",{onClick:e,className:"minimize-btn",title:"Minimize",children:"_"}),m.jsx("button",{onClick:t,className:"close-btn",title:"Close",children:""})]})]}),m.jsxs("div",{className:"game-info",children:[m.jsxs("div",{className:"game-status-section",children:[m.jsx("span",{className:`status ${fe.includes("Check")?"check-status":""}`,children:fe}),m.jsxs("span",{className:`current-player ${ee==="red"?"red-turn":"blue-turn"}`,children:["Current: ",ee==="red"?" Red":" Blue"]})]}),m.jsxs("div",{className:"game-details-section",children:[m.jsxs("span",{className:"wager-display",children:[" ",on," tDMT"]}),Zt&&m.jsxs("span",{className:"opponent-info",children:["vs ",Jh(Zt)]})]}),Ae===Wn.FINISHED&&m.jsx("button",{onClick:B,disabled:f,className:"claim-winnings-btn",children:f?" Claiming...":" Claim Winnings"})]}),m.jsxs("div",{className:"game-stable-layout",children:[m.jsx("div",{className:"left-sidebar",children:m.jsxs("div",{className:"move-history",children:[m.jsx("h4",{children:"Move History"}),m.jsx("div",{className:"moves",children:ue.slice().reverse().map((M,q)=>m.jsx("div",{className:"move",children:M},ue.length-1-q))})]})}),m.jsxs("div",{className:"center-area",children:[m.jsxs("div",{className:"chessboard-container",children:[m.jsx("div",{className:"chessboard",children:Array.from({length:8},(M,q)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(j,Y)=>wq(q,Y))},q))}),Qh&&Qh.show&&m.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${Qh.row*12.5}%`,left:`${Qh.col*12.5}%`,width:"12.5%",height:"12.5%",pointerEvents:"none",zIndex:1e3},children:m.jsx("div",{className:"explosion-effect",children:""})})]}),m.jsxs("div",{className:"game-controls",children:[m.jsxs("div",{className:"control-section",children:[m.jsx("button",{onClick:()=>Ku(!Kh),className:"gallery-toggle-btn",children:Kh?" Hide Gallery":" Show Gallery"}),fe.includes("corrupted")&&m.jsx("button",{className:"reset-game-btn",onClick:yq,children:" Reset Game"})]}),m.jsx("div",{className:"settings-section",children:m.jsxs("div",{className:"sound-controls",children:[m.jsxs("label",{className:"control-label",children:[m.jsx("input",{type:"checkbox",id:"sound-toggle",checked:ob,onChange:M=>ab(M.target.checked),className:"control-checkbox"}),m.jsx("span",{className:"control-text",children:" Sound Effects"})]}),m.jsxs("label",{className:"control-label",children:[m.jsx("input",{type:"checkbox",id:"victory-toggle",checked:ib,onChange:M=>zg(M.target.checked),className:"control-checkbox"}),m.jsx("span",{className:"control-text",children:" Victory Celebration"})]})]})}),d&&m.jsx("button",{className:"claim-winnings-btn",onClick:B,disabled:f||S||T,children:f||S||T?" Claiming...":" Claim Winnings"})]})]}),m.jsx("div",{className:"right-sidebar",children:m.jsxs("div",{className:"leaderboard",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"#"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Pts"})]})}),m.jsx("tbody",{children:cb.map((M,q)=>m.jsxs("tr",{children:[m.jsx("td",{children:q+1}),m.jsx("td",{children:M.username}),m.jsx("td",{children:M.wins}),m.jsx("td",{children:M.losses}),m.jsx("td",{children:M.draws}),m.jsx("td",{children:M.points})]},M.username))})]})})]})})]}),Kh&&m.jsx("div",{className:"piece-gallery-panel",children:vq()}),bq(),ib&&m.jsx("div",{className:"victory-celebration",children:m.jsxs("div",{className:"victory-content",children:[m.jsx("h2",{children:" Victory! "}),m.jsx("p",{children:"Congratulations on your win!"})]})})]}),Cq=()=>null;P.useEffect(()=>{uc(),Zh(),Ik();const M=setInterval(Zh,3e4);return()=>{clearInterval(M),Po.current&&Po.current(),lc.current&&clearTimeout(lc.current)}},[]),console.log("[RENDER] Current game mode:",Ae,"Game ID:",R);const Sq=(()=>{switch(Ae){case Wn.LOBBY:return Nk();case Wn.WAITING:return Eq();case Wn.ACTIVE:case Wn.FINISHED:return _q();default:return Nk()}})();return m.jsxs(m.Fragment,{children:[Sq,Cq()]})},bI={AI:"ai"},_v={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},bU=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],a5e=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],c5e=()=>{const[t,e]=P.useState(!1),n=P.useRef(null),r=P.useRef(!1);P.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=new Worker("/stockfish.worker.js");a.onmessage=c=>{console.log("[DEBUG] Stockfish worker message:",c.data)},a.onerror=c=>{console.error("[DEBUG] Stockfish worker error:",c),e(!1),r.current=!1},console.log("[DEBUG] LawbBot initialized successfully"),n.current=a,e(!0),r.current=!1,console.log("[DEBUG] Stockfish worker ready for commands")}catch(a){console.error("[DEBUG] Failed to create Stockfish worker:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=P.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var p;const f=h.data;typeof f=="string"&&f.startsWith("bestmove ")&&(l=f.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(p=n.current)==null||p.removeEventListener("message",d),c(l)))};try{n.current.addEventListener("message",d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeEventListener("message",d)}catch(g){console.warn("[DEBUG] Error removing message listener:",g)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=P.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},l5e=()=>{const[t,e]=P.useState(null),[n,r]=P.useState(!1),s=P.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=P.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},u5e=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r}=O0(),[s,i]=P.useState(bI.AI),[o,a]=P.useState(()=>JSON.parse(JSON.stringify(bU))),[c,l]=P.useState("blue"),[u,d]=P.useState(null),[h,f]=P.useState("active"),[p,g]=P.useState("hard"),[w,y]=P.useState("Connect wallet to play"),[b,E]=P.useState([]),[_,C]=P.useState([]),[I,A]=P.useState([]),[x,S]=P.useState(null),[k,O]=P.useState(!1),[U,G]=P.useState(!1),[F,T]=P.useState(null),[N,$]=P.useState(null),[R]=P.useState(""),[D]=P.useState(.1),[B,H]=P.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),J=P.useRef(null),ee=P.useRef(!1),ne=P.useRef(o),ie=P.useRef(null),we=P.useRef(null),Z=P.useRef(!1),se=P.useRef(!1),[ue,ce]=P.useState(!1),[fe,ge]=P.useState(!1),[Ae,pe]=P.useState(!1),[ye,Ve]=P.useState(()=>typeof window<"u"&&window.localStorage?window.localStorage.getItem("lawb_chess_dark_mode")==="true":!1),Zt=()=>{Ve(z=>(typeof window<"u"&&window.localStorage&&window.localStorage.setItem("lawb_chess_dark_mode",String(!z)),!z))},{stockfishReady:Pt}=c5e(),{getOpeningData:on}=l5e(),[Lt,Un]=P.useState("loading"),[mi,To]=P.useState(!1),[ys,Pn]=P.useState([]),[ur,wn]=P.useState(!1),[Gi,cc]=P.useState("/images/chessboard1.png"),[tb,ll]=P.useState(!0),[nb,rb]=P.useState(!1),sb=()=>{const z=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],K=Math.floor(Math.random()*z.length),te=z[K];return console.log("[DEBUG] Random chessboard selected:",te,"(index:",K,")"),te};P.useEffect(()=>{if(Pt)Un("ready");else{const z=window.setTimeout(()=>{Pt||(Un("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(z)}},[Pt]),P.useEffect(()=>{ne.current=o},[o]),P.useEffect(()=>{r?y("Select game mode"):(y("Connect wallet to play"),O(!1))},[r]),P.useEffect(()=>(!J.current&&typeof Worker<"u"&&(J.current=new Worker("/aiWorker.js"),J.current.onmessage=z=>{console.log("[DEBUG] AI worker response received:",z.data);const{move:K,nodes:te}=z.data;K&&ee.current&&h==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",K),console.log("[DEBUG] AI searched",te,"nodes"),ee.current=!1,we.current&&(window.clearTimeout(we.current),we.current=null),ie.current&&ie.current(K.from,K.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},J.current.onerror=z=>{console.error("[DEBUG] AI worker error:",z),y("AI worker error - using fallback mode"),ee.current=!1}),()=>{J.current&&(J.current.terminate(),J.current=null),we.current&&(window.clearTimeout(we.current),we.current=null)}),[]),P.useEffect(()=>{Kh()},[]);const Kh=async()=>{try{const z=await hq(20);C(z),console.log("Leaderboard data loaded:",z)}catch(z){y("Failed to load leaderboard"),console.error("Leaderboard error:",z)}},Ku=async z=>{if(console.log("[DEBUG] updateScore called with:",z),!r){console.log("[DEBUG] No wallet address, returning");return}try{console.log("[DEBUG] Updating score for address:",Nh(r)),await k_(r,z)?(console.log("[DEBUG] Successfully updated score for:",Nh(r)),await Kh()):console.error("[DEBUG] Failed to update score")}catch(K){console.error("[DEBUG] Error in updateScore:",K)}},en=z=>z&&z===z.toUpperCase()?"red":"blue",Yh=(z,K)=>z>=0&&z<8&&K>=0&&K<8,Ro=(z,K)=>`${String.fromCharCode(97+K)}${8-z}`,Vi=(z,K)=>{const te=K==="blue"?"k":"K";let X=null;for(let Ie=0;Ie<8;Ie++){for(let Ge=0;Ge<8;Ge++)if(z[Ie][Ge]===te){X={row:Ie,col:Ge};break}if(X)break}if(!X)return console.log(`King not found for ${K}`),!1;const Q=K==="blue"?"red":"blue",Ee=ib(X.row,X.col,Q,z);return console.log(`${K} king at ${X.row},${X.col} under attack: ${Ee}`),Ee},ib=(z,K,te,X)=>{for(let Q=0;Q<8;Q++)for(let Ee=0;Ee<8;Ee++){const Ie=X[Q][Ee];if(Ie&&en(Ie)===te&&pa(Ie,Q,Ee,z,K,!1,te,X,!0))return!0}return!1},zg=(z,K,te,X,Q,Ee=o)=>{const Ie=Ee.map(Bt=>[...Bt]),Ge=Ie[z][K];return Ie[te][X]=Ge,Ie[z][K]=null,Vi(Ie,Q)},ob=(z,K,te,X,Q,Ee)=>{const Ie=z==="blue"?-1:1,Ge=z==="blue"?6:1;if(!Yh(X,Q)||z==="blue"&&X>=K||z==="red"&&X<=K)return!1;const Bt=Math.abs(X-K),tn=Math.abs(Q-te);if((Bt===1&&tn===0||Bt===2&&tn===0&&K===Ge||Bt===1&&tn===1)&&Bt<=2&&tn<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:z,from:`${K},${te}`,to:`${X},${Q}`}),te===Q&&X===K+Ie)return Ee[X][Q]===null;if(te===Q&&K===Ge&&X===K+2*Ie)return Ee[K+Ie][te]===null&&Ee[X][Q]===null;if(Math.abs(te-Q)===1&&X===K+Ie){const zt=Ee[X][Q];return zt!==null&&en(zt)!==z}if(Math.abs(te-Q)===1&&X===K+Ie){const zt=Ee[K][Q];if(zt&&en(zt)!==z&&zt.toLowerCase()==="p"&&B.lastPawnDoubleMove&&B.lastPawnDoubleMove.row===K&&B.lastPawnDoubleMove.col===Q)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},ab=(z,K,te,X,Q)=>z!==te&&K!==X?!1:cb(z,K,te,X,Q),Qh=(z,K,te,X)=>{const Q=Math.abs(z-te),Ee=Math.abs(K-X);return Q===2&&Ee===1||Q===1&&Ee===2},Hg=(z,K,te,X,Q)=>Math.abs(z-te)!==Math.abs(K-X)?!1:cb(z,K,te,X,Q),Ms=(z,K,te,X,Q)=>ab(z,K,te,X,Q)||Hg(z,K,te,X,Q),C1=(z,K,te,X,Q)=>{const Ee=Math.abs(K-X),Ie=Math.abs(te-Q);if(Ee<=1&&Ie<=1)return!0;if(Ee===0&&Ie===2){if(z==="blue"&&!B.blueKingMoved){if(Q===6&&!B.blueRooksMove.right||Q===2&&!B.blueRooksMove.left)return!0}else if(z==="red"&&!B.redKingMoved&&(Q===6&&!B.redRooksMove.right||Q===2&&!B.redRooksMove.left))return!0}return!1},cb=(z,K,te,X,Q)=>{const Ee=z===te?0:(te-z)/Math.abs(te-z),Ie=K===X?0:(X-K)/Math.abs(X-K);let Ge=z+Ee,Bt=K+Ie;for(;Ge!==te||Bt!==X;){if(Q[Ge][Bt]!==null)return!1;Ge+=Ee,Bt+=Ie}return!0},pa=(z,K,te,X,Q,Ee=!0,Ie=en(z),Ge=o,Bt=!1)=>{if(!Yh(X,Q))return Bt||console.log("[ILLEGAL MOVE] Out of board:",{piece:z,startRow:K,startCol:te,endRow:X,endCol:Q}),!1;const tn=Ge[X][Q];if(tn&&en(tn)===Ie)return Bt||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:z,startRow:K,startCol:te,endRow:X,endCol:Q}),!1;const Bn=z.toLowerCase();let zt=!1;switch(Bn){case"p":zt=ob(Ie,K,te,X,Q,Ge);break;case"r":zt=ab(K,te,X,Q,Ge);break;case"n":zt=Qh(K,te,X,Q);break;case"b":zt=Hg(K,te,X,Q,Ge);break;case"q":zt=Ms(K,te,X,Q,Ge);break;case"k":zt=C1(Ie,K,te,X,Q);break}return zt?zt&&Ee&&zg(K,te,X,Q,Ie,Ge)?(Bt||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:z,startRow:K,startCol:te,endRow:X,endCol:Q}),!1):zt:(Bt||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:z,startRow:K,startCol:te,endRow:X,endCol:Q,playerColor:Ie,pieceType:Bn,targetPiece:Ge[X][Q],targetPieceColor:Ge[X][Q]?en(Ge[X][Q]):null}),!1)},ga=(z,K=o,te=c)=>{const X=[],Q=K[z.row][z.col];if(!Q||en(Q)!==te)return X;const Ee=Q.toLowerCase();if(Ee==="p"){const Ie=te==="blue"?-1:1,Ge=te==="blue"?6:1,Bt=z.row+Ie;if(Bt>=0&&Bt<8&&pa(Q,z.row,z.col,Bt,z.col,!0,te,K,!0)&&X.push({row:Bt,col:z.col}),z.row===Ge){const tn=z.row+2*Ie;tn>=0&&tn<8&&pa(Q,z.row,z.col,tn,z.col,!0,te,K,!0)&&X.push({row:tn,col:z.col})}for(const tn of[-1,1]){const Bn=z.col+tn,zt=z.row+Ie;Bn>=0&&Bn<8&&zt>=0&&zt<8&&pa(Q,z.row,z.col,zt,Bn,!0,te,K,!0)&&X.push({row:zt,col:Bn})}}else if(Ee==="n"){const Ie=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[Ge,Bt]of Ie){const tn=z.row+Ge,Bn=z.col+Bt;tn>=0&&tn<8&&Bn>=0&&Bn<8&&pa(Q,z.row,z.col,tn,Bn,!0,te,K,!0)&&X.push({row:tn,col:Bn})}}else for(let Ie=0;Ie<8;Ie++)for(let Ge=0;Ge<8;Ge++)pa(Q,z.row,z.col,Ie,Ge,!0,te,K,!0)&&X.push({row:Ie,col:Ge});return X},S1=(z,K=o)=>{if(!Vi(K,z))return!1;for(let te=0;te<8;te++)for(let X=0;X<8;X++){const Q=K[te][X];if(Q&&en(Q)===z&&ga({row:te,col:X},K,z).length>0)return!1}return!0},Po=(z,K=o)=>{if(Vi(K,z))return!1;for(let te=0;te<8;te++)for(let X=0;X<8;X++){const Q=K[te][X];if(Q&&en(Q)===z&&ga({row:te,col:X},K,z).length>0)return!1}return!0},lc=(z,K)=>{if(h!=="active"||ee.current)return;const te=o[z][K],X=te?en(te):null;if(u&&I.some(Q=>Q.row===z&&Q.col===K)){Oo(u,{row:z,col:K});return}if(te&&X===c){const Q=ga({row:z,col:K});d({row:z,col:K}),A(Q);return}d(null),A([])},Oo=(z,K,te=!1)=>{const X=o[z.row][z.col];if(console.log("[MOVE ATTEMPT]",{from:z,to:K,piece:X,isAIMove:te,board:JSON.parse(JSON.stringify(o)),moveHistory:b}),!!X){if(X.toLowerCase()==="p"&&(en(X)==="blue"&&K.row===0||en(X)==="red"&&K.row===7)){T({from:z,to:K}),G(!0);return}hb(z,K,"q",te)}};ie.current=Oo;const lb=P.useCallback((z,K,te=!1)=>{wn(!0);const X=o.map(Ie=>[...Ie]),Q=X[z.row][z.col];if(!Q)return;X[K.row][K.col]=Q,X[z.row][z.col]=null,Ck(X,z,K,Q);const Ee=Sk(z,K);if(E(Ie=>{const Ge=[...Ie,Ee];return console.log("[MOVE HISTORY UPDATED]",Ge),Ge}),S({from:z,to:K}),d(null),A([]),b.length<10&&!te){const Ie=vU(X,c==="blue"?"red":"blue");on(Ie).then(Ge=>{Ge&&Ge.moves&&Ge.moves.length>0&&(Pn(Ge.moves.slice(0,3)),To(!0),setTimeout(()=>To(!1),5e3))})}Ak(z,K,Q),l(Ie=>{const Ge=Ie==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",Ge),ub(X,Ge),Ge}),ub(X,c==="blue"?"red":"blue"),a(X),ee.current=!1,Z.current=!1,se.current=!1,wn(!1)},[o,c,b,on]);P.useEffect(()=>{if(!ee.current&&s==="ai"&&c==="red"&&!Z.current&&!ur)if(ee.current=!0,p==="easy")setTimeout(()=>{const z=uc(o);z?Oo(z.from,z.to,!0):ee.current=!1},600);else{y("AI is calculating...");const z=vU(o,c);if(se.current)return;se.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:z,difficulty:p,movetime:3e3})}).then(te=>{if(te.ok)return te.json();throw new Error("API call failed")}).then(te=>{console.log("[DEBUG] Stockfish API response:",te);const X=te.bestmove||te.move;if(X&&X!=="(none)"&&X.length===4){const Q=X.charCodeAt(0)-97,Ee=parseInt(X[1]),Ie=X.charCodeAt(2)-97,Ge=parseInt(X[3]),Bt=8-Ee,tn=8-Ge;if(console.log("[DEBUG] Parsed move:",{fromCol:Q,fromRowStockfish:Ee,toCol:Ie,toRowStockfish:Ge,fromRow:Bt,toRow:tn}),Q>=0&&Q<8&&Bt>=0&&Bt<8&&Ie>=0&&Ie<8&&tn>=0&&tn<8){const Bn={from:{row:Bt,col:Q},to:{row:tn,col:Ie}},zt=o[Bt][Q];if(console.log("[DEBUG] Move validation:",{piece:zt,moveObj:Bn,isValid:zt&&en(zt)==="red"&&pa(zt,Bt,Q,tn,Ie,!0,"red",o)}),zt&&en(zt)==="red"&&pa(zt,Bt,Q,tn,Ie,!0,"red",o))console.log("[DEBUG] Executing Stockfish move:",Bn),Oo(Bn.from,Bn.to,!0);else{console.warn("[DEBUG] Invalid Stockfish move, falling back to random");const Xh=uc(o);Xh&&Oo(Xh.from,Xh.to,!0),ee.current=!1,se.current=!1}}else{console.warn("[DEBUG] Invalid move coordinates, falling back to random");const Bn=uc(o);Bn&&Oo(Bn.from,Bn.to,!0),ee.current=!1,se.current=!1}}else{console.warn("[DEBUG] Invalid move format from API, falling back to random");const Q=uc(o);Q&&Oo(Q.from,Q.to,!0),ee.current=!1,se.current=!1}}).catch(te=>{console.error("[DEBUG] Stockfish API error:",te),y("AI error. Falling back to random moves.");const X=uc(o);X&&Oo(X.from,X.to,!0),ee.current=!1,se.current=!1})}},[c,s,p,o,B,Pt]);const ub=(z,K)=>{console.log("Checking game end for player:",K);const te=z.some(Q=>Q.some(Ee=>Ee==="k")),X=z.some(Q=>Q.some(Ee=>Ee==="K"));if(!te)return console.log("[GAME END] KING CAPTURED - Red wins!"),f("checkmate"),y("King captured! Red wins!"),Ku("loss"),pe(!0),setTimeout(()=>pe(!1),3e3),"checkmate";if(!X)return console.log("[GAME END] KING CAPTURED - Blue wins!"),f("checkmate"),y("King captured! You win!"),Ku("win"),pe(!0),setTimeout(()=>pe(!1),3e3),"checkmate";if(console.log("Is king in check:",Vi(z,K)),S1(K,z)){console.log("[GAME END] CHECKMATE",{winner:K==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(z)),moveHistory:b}),f("checkmate");const Q=K==="blue"?"red":"blue";return Q==="blue"?(y("Checkmate! You win!"),yi("checkmate"),Jh(!0),Yu(),Ku("win"),pe(!0),setTimeout(()=>pe(!1),3e3)):(y(`Checkmate! ${Q==="red"?"AI":"Opponent"} wins!`),yi("checkmate"),qg(!0),Ku("loss"),pe(!0),setTimeout(()=>pe(!1),3e3)),"checkmate"}return Po(K,z)?(console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(z)),moveHistory:b}),f("stalemate"),y("Stalemate! Game is a draw."),Ku("draw"),pe(!0),setTimeout(()=>pe(!1),3e3),"stalemate"):(Vi(z,K)?(console.log("CHECK detected!"),yi("check"),y(`${K==="blue"?"Blue":"Red"} is in check!`)):y("Your turn"),null)},uc=z=>{const K=[];for(let Q=0;Q<8;Q++)for(let Ee=0;Ee<8;Ee++){const Ie=z[Q][Ee];Ie&&en(Ie)==="red"&&K.push({row:Q,col:Ee})}for(let Q=K.length-1;Q>0;Q--){const Ee=Math.floor(Math.random()*(Q+1));[K[Q],K[Ee]]=[K[Ee],K[Q]]}const te=[],X=[];for(const Q of K){const Ee=ga(Q,z,"red");for(const Ie of Ee){const Ge=z[Ie.row][Ie.col];if(Ge&&en(Ge)==="blue"){const tn={p:100,n:320,b:330,r:500,q:900,k:2e4}[Ge.toLowerCase()]||0;te.push({from:Q,to:Ie,value:tn})}else X.push({from:Q,to:Ie})}}if(te.length>0&&Math.random()<.3){te.sort((Q,Ee)=>Q.value-Ee.value);for(const Q of te){const Ee=z.map(Ge=>[...Ge]),Ie=Ee[Q.from.row][Q.from.col];if(Ee[Q.to.row][Q.to.col]=Ie,Ee[Q.from.row][Q.from.col]=null,!Vi(Ee,"red"))return{from:Q.from,to:Q.to}}}for(const Q of X){const Ee=z.map(Ge=>[...Ge]),Ie=Ee[Q.from.row][Q.from.col];if(Ee[Q.to.row][Q.to.col]=Ie,Ee[Q.from.row][Q.from.col]=null,!Vi(Ee,"red"))return Q}te.sort((Q,Ee)=>Q.value-Ee.value);for(const Q of te){const Ee=z.map(Ge=>[...Ge]),Ie=Ee[Q.from.row][Q.from.col];if(Ee[Q.to.row][Q.to.col]=Ie,Ee[Q.from.row][Q.from.col]=null,!Vi(Ee,"red"))return{from:Q.from,to:Q.to}}return null},db=()=>{a(JSON.parse(JSON.stringify(bU))),l("blue"),d(null),f("active"),E([]),A([]),S(null),O(!1),y("Select game mode"),H({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),cc(sb()),ee.current&&(ee.current=!1)},A1=()=>{if(R1(),console.log("[DEBUG] startGame called, difficulty:",p,"gameMode:",s),s==="online"){O(!1),ce(!1);return}O(!0),ce(!1),y("Game started! Your turn");const z=sb();cc(z),console.log("[DEBUG] Game started with chessboard:",z)},Zh=z=>`${z.slice(0,6)}...${z.slice(-4)}`,I1=(z,K)=>{const te=o[z][K],X=(u==null?void 0:u.row)===z&&(u==null?void 0:u.col)===K,Q=I.some(Ie=>Ie.row===z&&Ie.col===K),Ee=x&&(x.from.row===z&&x.from.col===K||x.to.row===z&&x.to.col===K);return m.jsxs("div",{className:`square ${X?"selected":""} ${Q?"legal-move":""} ${Ee?"last-move":""}`,onClick:()=>lc(z,K),children:[te&&m.jsx("div",{className:"piece",style:{backgroundImage:_v[te]?`url(${_v[te]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),Q&&m.jsx("div",{className:"legal-move-indicator"})]},`${z}-${K}`)},N1=()=>{if(!U||!F)return null;const z=c==="blue"?["q","r","b","n"]:["Q","R","B","N"];return m.jsx("div",{className:"promotion-dialog",children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",children:z.map(K=>m.jsx("div",{className:"promotion-piece",onClick:()=>{hb(F.from,F.to,K),G(!1),T(null)},style:{backgroundImage:_v[K]?`url(${_v[K]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},K))})]})})},[x1,Ek]=P.useState(null),T1=(z=!1,K="Click a piece to learn more about it.")=>m.jsxs("div",{className:`piece-gallery${z?" piece-gallery-sm":""}`,children:[m.jsx("h3",{children:"Lawbstation Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:a5e.map(te=>m.jsxs("div",{className:"piece-gallery-item",onClick:()=>Ek(te.key),children:[m.jsx("img",{src:te.img,alt:te.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:te.name}),x1===te.key&&m.jsx("div",{className:"piece-gallery-desc",children:te.desc})]},te.key))}),m.jsx("div",{className:"piece-gallery-tip",children:K})]}),_k=()=>m.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:m.jsx("div",{className:"difficulty-controls-col",children:m.jsxs("div",{className:"difficulty-selection-panel",style:{background:"#fff",borderRadius:12,padding:"32px 24px",boxShadow:"0 4px 32px rgba(0,0,0,0.12)",textAlign:"center"},children:[m.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#0a2a7a",marginBottom:16},children:"Start a New Game"}),m.jsxs("p",{style:{fontSize:"1.1rem",color:"#333",marginBottom:24},children:["Challenge the LawbBot AI to a chess match.",m.jsx("br",{}),"Good luck, have fun!"]}),m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[m.jsx("button",{className:`difficulty-btn${p==="easy"?" selected":""}`,style:{background:p==="easy"?"#44c0ff":"#eee",color:p==="easy"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="easy"?"0 2px 8px #44c0ff44":"none"},onClick:()=>g("easy"),children:"Easy"}),m.jsx("button",{className:`difficulty-btn${p==="hard"?" selected":""}`,style:{background:p==="hard"?"#0a2a7a":"#eee",color:p==="hard"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="hard"?"0 2px 8px #0a2a7a44":"none"},onClick:()=>g("hard"),children:"Hard"})]}),m.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{A1()},style:{background:"linear-gradient(90deg, #0a2a7a 0%, #44c0ff 100%)",color:"white",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:8,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",border:"none",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[m.jsx("span",{role:"img","aria-label":"chess",children:""})," Start Game"]})]})})}),Ck=(z,K,te,X)=>{if(X.toLowerCase()==="p"&&(en(X)==="blue"&&te.row===0||en(X)==="red"&&te.row===7)){const Q=en(X)==="blue"?"q":"Q";z[te.row][te.col]=Q}X.toLowerCase()==="k"&&Math.abs(K.col-te.col)===2&&(te.col===6?(z[K.row][7]=null,z[K.row][5]=en(X)==="blue"?"r":"R"):te.col===2&&(z[K.row][0]=null,z[K.row][3]=en(X)==="blue"?"r":"R"))},Sk=(z,K,te,X)=>{const Q=Ro(z.row,z.col),Ee=Ro(K.row,K.col);return`${Q}-${Ee}`},Ak=(z,K,te)=>{const X={...B};te.toLowerCase()==="k"?en(te)==="blue"?X.blueKingMoved=!0:X.redKingMoved=!0:te.toLowerCase()==="r"&&(en(te)==="blue"?(z.col===0&&(X.blueRooksMove.left=!0),z.col===7&&(X.blueRooksMove.right=!0)):(z.col===0&&(X.redRooksMove.left=!0),z.col===7&&(X.redRooksMove.right=!0))),te.toLowerCase()==="p"&&Math.abs(z.row-K.row)===2?X.lastPawnDoubleMove={row:K.row,col:K.col}:X.lastPawnDoubleMove=null,H(X)},hb=(z,K,te="q",X=!1)=>{o[z.row][z.col];const Ee=o[K.row][K.col]!==null;if(yi(Ee?"capture":"move"),Ee){$({row:K.row,col:K.col,show:!0}),setTimeout(()=>{lb(z,K,X),$(null)},500);return}lb(z,K,X)},yi=z=>{if(!tb)return;let K="";switch(z){case"move":K="/images/move.mp3";break;case"capture":K="/images/capture.mp3";break;case"check":K="/images/play.mp3";break;case"checkmate":K="/images/victory.mp3";break;case"victory":K="/images/victory.mp3";break;default:K="/images/move.mp3"}new Audio(K).play().catch(()=>{})},Yu=()=>{if(nb){yi("victory");for(let z=0;z<50;z++)setTimeout(()=>{const K=document.createElement("div");K.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(K),setTimeout(()=>K.remove(),3e3)},z*100);setTimeout(()=>rb(!1),5e3)}},[ul,Jh]=P.useState(!1),[ss,qg]=P.useState(!1),dl=()=>{Jh(!1),qg(!1)},Gg=()=>{dl(),db()},Vg=()=>{dl(),O(!1)},R1=()=>{new Audio("/images/start.mp3").play().catch(()=>{})},Qu=s==="online";return m.jsxs("div",{className:`chess-game${n?" fullscreen":""}${ye?" chess-dark-mode":""}`,children:[!n&&m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"Lawb Chess"}),m.jsxs("div",{className:"chess-controls",children:[m.jsx("button",{className:"dark-mode-toggle",onClick:Zt,title:ye?"Switch to light mode":"Switch to dark mode","aria-label":ye?"Switch to light mode":"Switch to dark mode",children:ye?"":""}),e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:""})]})]}),m.jsxs("div",{className:"game-stable-layout",children:[m.jsxs("div",{className:"left-sidebar",children:[m.jsxs("div",{className:"leaderboard-compact",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table-compact",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"Pts"})]})}),m.jsx("tbody",{children:Array.isArray(_)&&_.slice(0,8).map((z,K)=>{if(typeof z=="object"&&z!==null&&"username"in z&&"wins"in z&&"losses"in z&&"draws"in z&&"points"in z){const te=z;return m.jsxs("tr",{children:[m.jsx("td",{children:K+1}),m.jsx("td",{children:Zh(te.username)}),m.jsx("td",{children:te.points})]},te.username)}return null})})]})})]}),k&&m.jsxs("div",{className:"move-history-compact",children:[m.jsx("div",{className:"move-history-title",children:"Moves"}),m.jsx("ul",{className:"move-history-list-compact",children:b.slice().reverse().map((z,K)=>m.jsx("li",{children:z},b.length-1-K))})]})]}),m.jsxs("div",{className:"center-area",children:[k&&m.jsxs("div",{className:"game-info-compact",children:[m.jsxs("span",{className:c==="blue"?"current-blue":"current-red",children:[c==="blue"?"Blue":"Red"," to move"]}),s===bI.AI&&m.jsxs("span",{className:"mode-play",children:[p==="easy"?"Easy":"Hard"," AI"]}),Qu&&m.jsxs("span",{className:"wager-display",children:["Wager: ",D," ETH"]})]}),k?m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${Gi})`},children:[Array.from({length:8},(z,K)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(te,X)=>I1(K,X))},K)),N&&N.show&&m.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${N.row*12.5}%`,left:`${N.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:m.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),m.jsxs("div",{className:"game-controls-compact",children:[m.jsx("button",{onClick:Gg,children:"New Game"}),m.jsx("button",{onClick:Vg,children:"Menu"}),m.jsx("button",{onClick:()=>ge(!0),children:"Pieces"})]})]}):ue?_k():Qu?m.jsx(fq,{onClose:t,onMinimize:e,fullscreen:n}):m.jsxs("div",{className:"game-mode-panel-streamlined",children:[m.jsxs("div",{className:"mode-selection-compact",children:[m.jsx("button",{className:`mode-btn-compact ${s==="ai"?"selected":""}`,onClick:()=>i("ai"),children:"VS AI"}),m.jsx("button",{className:`mode-btn-compact ${Qu?"selected":""}`,onClick:()=>i("online"),children:"PvP"})]}),s===bI.AI&&m.jsx("button",{className:"start-btn-compact",onClick:()=>ce(!0),children:"Start Game"}),Qu&&m.jsxs("div",{className:"pvp-info",children:[m.jsx("p",{children:"Challenge other players with ETH wagers"}),m.jsx("p",{children:"Create or join games instantly"})]}),m.jsxs("div",{className:"help-section-compact",children:[m.jsx("h4",{children:"How to Play"}),m.jsxs("div",{className:"help-content",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Chess:"})," Capture your opponent's king. Each piece moves uniquely - pawns forward, knights in L-shapes, bishops diagonally, rooks horizontally/vertically, queens in all directions, kings one square at a time."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Multiplayer:"})," Connect your wallet to play PvP games with ETH wagers. Win games to claim your opponent's wager and climb the leaderboard."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"AI Mode:"})," Practice against our LawbBot AI. Choose Easy or Hard difficulty. Wins earn points on the leaderboard."]})]})]})]})]}),m.jsx("div",{className:"right-sidebar",children:m.jsx("div",{className:"piece-gallery-panel",children:T1(!0)})})]}),fe&&m.jsx("div",{className:"gallery-modal-overlay",onClick:()=>ge(!1),children:m.jsxs("div",{className:"gallery-modal",onClick:z=>z.stopPropagation(),children:[m.jsx("button",{className:"close-modal-btn",onClick:()=>ge(!1),children:""}),T1(!1)]})}),N1(),Ae&&m.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),ul&&nb&&m.jsxs("div",{className:"victory-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)"},children:[m.jsx("div",{className:"balloons-container"}),m.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:"320px",height:"auto",zIndex:2}}),m.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24},children:[m.jsx("button",{onClick:Gg,children:"New Game"}),m.jsx("button",{onClick:Vg,children:"Back to Menu"})]})]}),ss&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"blood-overlay",children:[0,1,2,3,4,5].map(z=>m.jsx("div",{className:"blood-drip",style:{left:`${10+z*14}%`,animationDelay:`${.5+z*.3}s`,background:"linear-gradient(to bottom, #a80000 0%, #d10000 80%, #5a0000 100%)",width:`${14+Math.random()*10}px`,height:`${50+Math.random()*30}px`,opacity:.85+Math.random()*.1}},z))}),m.jsxs("div",{className:"defeat-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)",pointerEvents:"none"},children:[m.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:"320px",height:"auto",zIndex:2}}),m.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24,pointerEvents:"none"},children:[m.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:Gg,children:"New Game"}),m.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:Vg,children:"Back to Menu"})]})]})]})]})};function vU(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const EU=()=>{const[t,e]=P.useState("singleplayer");return m.jsx("div",{className:"chess-page",children:m.jsx("div",{className:"chess-content",children:t==="singleplayer"?m.jsx(u5e,{onClose:()=>{}}):m.jsx(fq,{onClose:()=>{},onMinimize:()=>{},fullscreen:!1})})})},d5e=new hae,h5e=typeof window<"u"&&window.location.hostname.startsWith("chess."),f5e=()=>bDe("(max-width: 768px)")?m.jsx(wDe,{}):m.jsx(uDe,{});BI.createRoot(document.getElementById("root")).render(m.jsx(ki.StrictMode,{children:m.jsx(xoe,{config:uq.wagmiConfig,children:m.jsx(Pae,{client:d5e,children:m.jsx(cDe,{children:m.jsx(iDe,{children:h5e?m.jsx(rE,{path:"/*",element:m.jsx(EU,{})}):m.jsxs(m.Fragment,{children:[m.jsx(rE,{path:"/",element:m.jsx(f5e,{})}),m.jsx(rE,{path:"/chess",element:m.jsx(EU,{})})]})})})})})}));export{LMe as $,Fe as A,it as B,De as C,Je as D,yy as E,nT as F,Fm as G,Vo as H,Upe as I,pn as J,jMe as K,ZT as L,$r as M,Dpe as N,he as O,wl as P,Xv as Q,St as R,Zo as S,Js as T,gge as U,vy as V,Zr as W,$Me as X,Dr as Y,xh as Z,ka as _,tE as a,DH as a0,JT as a1,lg as a2,us as a3,O5e as a4,Uc as a5,Xa as a6,Ew as a7,qe as a8,gr as a9,kU as aA,A5e as aB,sw as aC,Gee as aD,moe as aE,Ao as aF,Co as aG,xF as aH,gse as aI,kl as aa,EF as ab,NC as ac,le as ad,WP as ae,_r as af,ine as ag,EC as ah,XP as ai,une as aj,x0 as ak,bo as al,Gu as am,uy as an,Ja as ao,U1e as ap,SMe as aq,K5 as ar,hz as as,x1e as at,B1e as au,AMe as av,CMe as aw,c1 as ax,NMe as ay,IMe as az,mn as b,$e as c,Ze as d,L as e,Fn as f,Bc as g,BMe as h,Gc as i,Ri as j,ot as k,Xs as l,_Ce as m,Wa as n,Ike as o,We as p,$a as q,UMe as r,Jt as s,z7 as t,Mn as u,P$ as v,qi as w,DMe as x,ms as y,ps as z};
