const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-DNwAM-wW.js","assets/if-defined-wtLajtMx.js","assets/index-Dn1yUR_T.js","assets/index-C1ihh_b7.js","assets/ref-Dl9eH7V8.js","assets/index-BZQqNzWS.js","assets/index-BZ4tB5bR.js","assets/index-BFgdlJzq.js","assets/index-CJJumzze.js","assets/index-Bl_Gfp9j.js","assets/index-GZ12XSjf.js","assets/index-CKvmI96D.js","assets/email-BMezw9PV.js","assets/index-2OJjMb7-.js","assets/socials-BYmeNsW6.js","assets/index-CyTRcvt_.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-Cja_e839.js","assets/index-BWZ4BTSj.js","assets/index-D4TE8uGW.js","assets/index-DhqGlIKQ.js","assets/swaps-Bn1kgwGL.js","assets/index-B79V9pJH.js","assets/index-CiY9d9qL.js","assets/index-BtT0HZmP.js","assets/send-ySU1KdCZ.js","assets/index-ClNwxWZB.js","assets/index-CEgWTxXT.js","assets/receive-DNlFG7eO.js","assets/index-B1oHyJMZ.js","assets/onramp-S2Rhyc8c.js","assets/index-BGdZR1FE.js","assets/index-Cf4ps3MO.js","assets/index-Cc3Hj1SN.js","assets/transactions-CC8Y1MUN.js","assets/index-DNn4TYJm.js","assets/index-DOYnieVi.js","assets/index-1LjmV04k.js","assets/index-CLK1MdJ2.js","assets/index-dmasLL8w.js","assets/w3m-modal-BGmIsTBX.js"])))=>i.map(i=>d[i]);
var ine=Object.defineProperty;var XU=t=>{throw TypeError(t)};var one=(t,e,n)=>e in t?ine(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ne=(t,e,n)=>one(t,typeof e!="symbol"?e+"":e,n),MT=(t,e,n)=>e.has(t)||XU("Cannot "+n);var _=(t,e,n)=>(MT(t,e,"read from private field"),n?n.call(t):e.get(t)),K=(t,e,n)=>e.has(t)?XU("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),U=(t,e,n,r)=>(MT(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),fe=(t,e,n)=>(MT(t,e,"access private method"),n);var ld=(t,e,n,r)=>({set _(s){U(t,e,s,n)},get _(){return _(t,e,r)}});function ane(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var cl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function yz(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var wz={exports:{}},_x={},bz={exports:{}},Gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dC=Symbol.for("react.element"),cne=Symbol.for("react.portal"),lne=Symbol.for("react.fragment"),une=Symbol.for("react.strict_mode"),dne=Symbol.for("react.profiler"),hne=Symbol.for("react.provider"),fne=Symbol.for("react.context"),pne=Symbol.for("react.forward_ref"),gne=Symbol.for("react.suspense"),mne=Symbol.for("react.memo"),yne=Symbol.for("react.lazy"),e$=Symbol.iterator;function wne(t){return t===null||typeof t!="object"?null:(t=e$&&t[e$]||t["@@iterator"],typeof t=="function"?t:null)}var vz={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ez=Object.assign,_z={};function M0(t,e,n){this.props=t,this.context=e,this.refs=_z,this.updater=n||vz}M0.prototype.isReactComponent={};M0.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};M0.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Cz(){}Cz.prototype=M0.prototype;function i5(t,e,n){this.props=t,this.context=e,this.refs=_z,this.updater=n||vz}var o5=i5.prototype=new Cz;o5.constructor=i5;Ez(o5,M0.prototype);o5.isPureReactComponent=!0;var t$=Array.isArray,Az=Object.prototype.hasOwnProperty,a5={current:null},Sz={key:!0,ref:!0,__self:!0,__source:!0};function Iz(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Az.call(e,r)&&!Sz.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:dC,type:t,key:i,ref:o,props:s,_owner:a5.current}}function bne(t,e){return{$$typeof:dC,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function c5(t){return typeof t=="object"&&t!==null&&t.$$typeof===dC}function vne(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var n$=/\/+/g;function UT(t,e){return typeof t=="object"&&t!==null&&t.key!=null?vne(""+t.key):e.toString(36)}function MA(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case dC:case cne:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+UT(o,0):r,t$(s)?(n="",t!=null&&(n=t.replace(n$,"$&/")+"/"),MA(s,e,n,"",function(l){return l})):s!=null&&(c5(s)&&(s=bne(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(n$,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",t$(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+UT(i,a);o+=MA(i,e,n,c,s)}else if(c=wne(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+UT(i,a++),o+=MA(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function w1(t,e,n){if(t==null)return t;var r=[],s=0;return MA(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Ene(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ci={current:null},UA={transition:null},_ne={ReactCurrentDispatcher:Ci,ReactCurrentBatchConfig:UA,ReactCurrentOwner:a5};function xz(){throw Error("act(...) is not supported in production builds of React.")}Gt.Children={map:w1,forEach:function(t,e,n){w1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return w1(t,function(){e++}),e},toArray:function(t){return w1(t,function(e){return e})||[]},only:function(t){if(!c5(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Gt.Component=M0;Gt.Fragment=lne;Gt.Profiler=dne;Gt.PureComponent=i5;Gt.StrictMode=une;Gt.Suspense=gne;Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_ne;Gt.act=xz;Gt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ez({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=a5.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)Az.call(e,c)&&!Sz.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:dC,type:t.type,key:s,ref:i,props:r,_owner:o}};Gt.createContext=function(t){return t={$$typeof:fne,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:hne,_context:t},t.Consumer=t};Gt.createElement=Iz;Gt.createFactory=function(t){var e=Iz.bind(null,t);return e.type=t,e};Gt.createRef=function(){return{current:null}};Gt.forwardRef=function(t){return{$$typeof:pne,render:t}};Gt.isValidElement=c5;Gt.lazy=function(t){return{$$typeof:yne,_payload:{_status:-1,_result:t},_init:Ene}};Gt.memo=function(t,e){return{$$typeof:mne,type:t,compare:e===void 0?null:e}};Gt.startTransition=function(t){var e=UA.transition;UA.transition={};try{t()}finally{UA.transition=e}};Gt.unstable_act=xz;Gt.useCallback=function(t,e){return Ci.current.useCallback(t,e)};Gt.useContext=function(t){return Ci.current.useContext(t)};Gt.useDebugValue=function(){};Gt.useDeferredValue=function(t){return Ci.current.useDeferredValue(t)};Gt.useEffect=function(t,e){return Ci.current.useEffect(t,e)};Gt.useId=function(){return Ci.current.useId()};Gt.useImperativeHandle=function(t,e,n){return Ci.current.useImperativeHandle(t,e,n)};Gt.useInsertionEffect=function(t,e){return Ci.current.useInsertionEffect(t,e)};Gt.useLayoutEffect=function(t,e){return Ci.current.useLayoutEffect(t,e)};Gt.useMemo=function(t,e){return Ci.current.useMemo(t,e)};Gt.useReducer=function(t,e,n){return Ci.current.useReducer(t,e,n)};Gt.useRef=function(t){return Ci.current.useRef(t)};Gt.useState=function(t){return Ci.current.useState(t)};Gt.useSyncExternalStore=function(t,e,n){return Ci.current.useSyncExternalStore(t,e,n)};Gt.useTransition=function(){return Ci.current.useTransition()};Gt.version="18.3.1";bz.exports=Gt;var D=bz.exports;const Mo=zg(D),Cne=ane({__proto__:null,default:Mo},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ane=D,Sne=Symbol.for("react.element"),Ine=Symbol.for("react.fragment"),xne=Object.prototype.hasOwnProperty,Nne=Ane.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Tne={key:!0,ref:!0,__self:!0,__source:!0};function Nz(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)xne.call(e,r)&&!Tne.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Sne,type:t,key:i,ref:o,props:s,_owner:Nne.current}}_x.Fragment=Ine;_x.jsx=Nz;_x.jsxs=Nz;wz.exports=_x;var b=wz.exports,r$={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tz={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ne=function(t,e){if(!t)throw U0(e)},U0=function(t){return new Error("Firebase Database ("+Tz.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rz=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Rne=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},l5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Rz(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Rne(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||d==null)throw new Pne;const h=i<<2|a>>4;if(r.push(h),l!==64){const f=a<<4&240|l>>2;if(r.push(f),d!==64){const p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Pne extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pz=function(t){const e=Rz(t);return l5.encodeByteArray(e,!0)},RS=function(t){return Pz(t).replace(/\./g,"")},zO=function(t){try{return l5.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function One(t){return Oz(void 0,t)}function Oz(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!kne(n)||(t[n]=Oz(t[n],e[n]));return t}function kne(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dne(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lne=()=>Dne().__FIREBASE_DEFAULTS__,Mne=()=>{if(typeof process>"u"||typeof r$>"u")return;const t=r$.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Une=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zO(t[1]);return e&&JSON.parse(e)},kz=()=>{try{return Lne()||Mne()||Une()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$ne=t=>{var e,n;return(n=(e=kz())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Bne=t=>{const e=$ne(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Dz=()=>{var t;return(t=kz())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fne(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[RS(JSON.stringify(n)),RS(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jne(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Lz(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jne())}function zne(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Wne(){return Tz.NODE_ADMIN===!0}function Hne(){try{return typeof indexedDB=="object"}catch{return!1}}function Gne(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qne="FirebaseError";class hC extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=qne,Object.setPrototypeOf(this,hC.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mz.prototype.create)}}class Mz{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Vne(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new hC(s,a,r)}}function Vne(t,e){return t.replace(Kne,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Kne=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(t){return JSON.parse(t)}function zr(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uz=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=cE(zO(i[0])||""),n=cE(zO(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},Yne=function(t){const e=Uz(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Qne=function(t){const e=Uz(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Gw(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function s$(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function PS(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function WO(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(i$(i)&&i$(o)){if(!WO(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function i$(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jne(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zne{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^i&(o^a),u=1518500249):(l=i^o^a,u=1859775393):d<60?(l=i&o|a&(i|o),u=2400959708):(l=i^o^a,u=3395469782);const h=(s<<5|s>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function u5(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xne=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,Ne(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Ax=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(t){return t&&t._delegate?t._delegate:t}class lE{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ere{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Cx;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nre(e))try{this.getOrInitializeService({instanceIdentifier:Uf})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Uf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Uf){return this.instances.has(e)}getOptions(e=Uf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tre(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Uf){return this.component?this.component.multipleInstances?e:Uf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tre(t){return t===Uf?void 0:t}function nre(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rre{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ere(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Gn||(Gn={}));const sre={debug:Gn.DEBUG,verbose:Gn.VERBOSE,info:Gn.INFO,warn:Gn.WARN,error:Gn.ERROR,silent:Gn.SILENT},ire=Gn.INFO,ore={[Gn.DEBUG]:"log",[Gn.VERBOSE]:"log",[Gn.INFO]:"info",[Gn.WARN]:"warn",[Gn.ERROR]:"error"},are=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=ore[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $z{constructor(e){this.name=e,this._logLevel=ire,this._logHandler=are,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Gn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sre[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Gn.DEBUG,...e),this._logHandler(this,Gn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Gn.VERBOSE,...e),this._logHandler(this,Gn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Gn.INFO,...e),this._logHandler(this,Gn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Gn.WARN,...e),this._logHandler(this,Gn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Gn.ERROR,...e),this._logHandler(this,Gn.ERROR,...e)}}const cre=(t,e)=>e.some(n=>t instanceof n);let o$,a$;function lre(){return o$||(o$=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ure(){return a$||(a$=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bz=new WeakMap,HO=new WeakMap,Fz=new WeakMap,$T=new WeakMap,d5=new WeakMap;function dre(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(xh(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Bz.set(n,t)}).catch(()=>{}),d5.set(e,t),e}function hre(t){if(HO.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});HO.set(t,e)}let GO={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return HO.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Fz.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xh(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fre(t){GO=t(GO)}function pre(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(BT(this),e,...n);return Fz.set(r,e.sort?e.sort():[e]),xh(r)}:ure().includes(t)?function(...e){return t.apply(BT(this),e),xh(Bz.get(this))}:function(...e){return xh(t.apply(BT(this),e))}}function gre(t){return typeof t=="function"?pre(t):(t instanceof IDBTransaction&&hre(t),cre(t,lre())?new Proxy(t,GO):t)}function xh(t){if(t instanceof IDBRequest)return dre(t);if($T.has(t))return $T.get(t);const e=gre(t);return e!==t&&($T.set(t,e),d5.set(e,t)),e}const BT=t=>d5.get(t);function mre(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=xh(o);return r&&o.addEventListener("upgradeneeded",c=>{r(xh(o.result),c.oldVersion,c.newVersion,xh(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const yre=["get","getKey","getAll","getAllKeys","count"],wre=["put","add","delete","clear"],FT=new Map;function c$(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(FT.get(e))return FT.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=wre.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||yre.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return FT.set(e,i),i}fre(t=>({...t,get:(e,n,r)=>c$(e,n)||t.get(e,n,r),has:(e,n)=>!!c$(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bre{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vre(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function vre(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qO="@firebase/app",l$="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu=new $z("@firebase/app"),Ere="@firebase/app-compat",_re="@firebase/analytics-compat",Cre="@firebase/analytics",Are="@firebase/app-check-compat",Sre="@firebase/app-check",Ire="@firebase/auth",xre="@firebase/auth-compat",Nre="@firebase/database",Tre="@firebase/data-connect",Rre="@firebase/database-compat",Pre="@firebase/functions",Ore="@firebase/functions-compat",kre="@firebase/installations",Dre="@firebase/installations-compat",Lre="@firebase/messaging",Mre="@firebase/messaging-compat",Ure="@firebase/performance",$re="@firebase/performance-compat",Bre="@firebase/remote-config",Fre="@firebase/remote-config-compat",jre="@firebase/storage",zre="@firebase/storage-compat",Wre="@firebase/firestore",Hre="@firebase/vertexai-preview",Gre="@firebase/firestore-compat",qre="firebase",Vre="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO="[DEFAULT]",Kre={[qO]:"fire-core",[Ere]:"fire-core-compat",[Cre]:"fire-analytics",[_re]:"fire-analytics-compat",[Sre]:"fire-app-check",[Are]:"fire-app-check-compat",[Ire]:"fire-auth",[xre]:"fire-auth-compat",[Nre]:"fire-rtdb",[Tre]:"fire-data-connect",[Rre]:"fire-rtdb-compat",[Pre]:"fire-fn",[Ore]:"fire-fn-compat",[kre]:"fire-iid",[Dre]:"fire-iid-compat",[Lre]:"fire-fcm",[Mre]:"fire-fcm-compat",[Ure]:"fire-perf",[$re]:"fire-perf-compat",[Bre]:"fire-rc",[Fre]:"fire-rc-compat",[jre]:"fire-gcs",[zre]:"fire-gcs-compat",[Wre]:"fire-fst",[Gre]:"fire-fst-compat",[Hre]:"fire-vertex","fire-js":"fire-js",[qre]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=new Map,Yre=new Map,KO=new Map;function u$(t,e){try{t.container.addComponent(e)}catch(n){Gu.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function OS(t){const e=t.name;if(KO.has(e))return Gu.debug(`There were multiple attempts to register component ${e}.`),!1;KO.set(e,t);for(const n of uE.values())u$(n,t);for(const n of Yre.values())u$(n,t);return!0}function Qre(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jre={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nh=new Mz("app","Firebase",Jre);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zre{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new lE("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nh.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xre=Vre;function jz(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:VO,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Nh.create("bad-app-name",{appName:String(s)});if(n||(n=Dz()),!n)throw Nh.create("no-options");const i=uE.get(s);if(i){if(WO(n,i.options)&&WO(r,i.config))return i;throw Nh.create("duplicate-app",{appName:s})}const o=new rre(s);for(const c of KO.values())o.addComponent(c);const a=new Zre(n,r,o);return uE.set(s,a),a}function zz(t=VO){const e=uE.get(t);if(!e&&t===VO&&Dz())return jz();if(!e)throw Nh.create("no-app",{appName:t});return e}function ese(){return Array.from(uE.values())}function Iy(t,e,n){var r;let s=(r=Kre[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gu.warn(a.join(" "));return}OS(new lE(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tse="firebase-heartbeat-database",nse=1,dE="firebase-heartbeat-store";let jT=null;function Wz(){return jT||(jT=mre(tse,nse,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(dE)}catch(n){console.warn(n)}}}}).catch(t=>{throw Nh.create("idb-open",{originalErrorMessage:t.message})})),jT}async function rse(t){try{const n=(await Wz()).transaction(dE),r=await n.objectStore(dE).get(Hz(t));return await n.done,r}catch(e){if(e instanceof hC)Gu.warn(e.message);else{const n=Nh.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Gu.warn(n.message)}}}async function d$(t,e){try{const r=(await Wz()).transaction(dE,"readwrite");await r.objectStore(dE).put(e,Hz(t)),await r.done}catch(n){if(n instanceof hC)Gu.warn(n.message);else{const r=Nh.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Gu.warn(r.message)}}}function Hz(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sse=1024,ise=30*24*60*60*1e3;class ose{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cse(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=h$();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=ise}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Gu.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=h$(),{heartbeatsToSend:r,unsentEntries:s}=ase(this._heartbeatsCache.heartbeats),i=RS(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Gu.warn(n),""}}}function h$(){return new Date().toISOString().substring(0,10)}function ase(t,e=sse){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),f$(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),f$(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class cse{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hne()?Gne().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rse(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return d$(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return d$(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function f$(t){return RS(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lse(t){OS(new lE("platform-logger",e=>new bre(e),"PRIVATE")),OS(new lE("heartbeat",e=>new ose(e),"PRIVATE")),Iy(qO,l$,t),Iy(qO,l$,"esm2017"),Iy("fire-js","")}lse("");var use="firebase",dse="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Iy(use,dse,"app");var p$={};const g$="@firebase/database",m$="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gz="";function hse(t){Gz=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fse{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),zr(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:cE(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pse{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return rd(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qz=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new fse(e)}}catch{}return new pse},sp=qz("localStorage"),gse=qz("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy=new $z("@firebase/database"),mse=function(){let t=1;return function(){return t++}}(),Vz=function(t){const e=Xne(t),n=new Zne;n.update(e);const r=n.digest();return l5.encodeByteArray(r)},fC=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=fC.apply(null,r):typeof r=="object"?e+=zr(r):e+=r,e+=" "}return e};let Nv=null,y$=!0;const yse=function(t,e){Ne(!0,"Can't turn on custom loggers persistently."),xy.logLevel=Gn.VERBOSE,Nv=xy.log.bind(xy)},Ys=function(...t){if(y$===!0&&(y$=!1,Nv===null&&gse.get("logging_enabled")===!0&&yse()),Nv){const e=fC.apply(null,t);Nv(e)}},pC=function(t){return function(...e){Ys(t,...e)}},YO=function(...t){const e="FIREBASE INTERNAL ERROR: "+fC(...t);xy.error(e)},qu=function(...t){const e=`FIREBASE FATAL ERROR: ${fC(...t)}`;throw xy.error(e),new Error(e)},eo=function(...t){const e="FIREBASE WARNING: "+fC(...t);xy.warn(e)},wse=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&eo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Kz=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},bse=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},qw="[MIN_NAME]",ag="[MAX_NAME]",B0=function(t,e){if(t===e)return 0;if(t===qw||e===ag)return-1;if(e===qw||t===ag)return 1;{const n=w$(t),r=w$(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},vse=function(t,e){return t===e?0:t<e?-1:1},vb=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+zr(e))},h5=function(t){if(typeof t!="object"||t===null)return zr(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=zr(e[r]),n+=":",n+=h5(t[e[r]]);return n+="}",n},Yz=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function ao(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Qz=function(t){Ne(!Kz(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(i%2?1:0),i=Math.floor(i/2);l.push(s?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},Ese=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},_se=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Cse(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Ase=new RegExp("^-?(0*)\\d{1,10}$"),Sse=-2147483648,Ise=2147483647,w$=function(t){if(Ase.test(t)){const e=Number(t);if(e>=Sse&&e<=Ise)return e}return null},F0=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw eo("Exception was thrown by user callback.",n),e},Math.floor(0))}},xse=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Tv=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nse{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){eo(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tse{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ys("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',eo(e)}}class $A{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}$A.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5="5",Jz="v",Zz="s",Xz="r",eW="f",tW=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,nW="ls",rW="p",QO="ac",sW="websocket",iW="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oW{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=sp.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&sp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Rse(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function aW(t,e,n){Ne(typeof e=="string","typeof type must == string"),Ne(typeof n=="object","typeof params must == object");let r;if(e===sW)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===iW)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Rse(t)&&(n.ns=t.namespace);const s=[];return ao(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pse{constructor(){this.counters_={}}incrementCounter(e,n=1){rd(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return One(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT={},WT={};function p5(t){const e=t.toString();return zT[e]||(zT[e]=new Pse),zT[e]}function Ose(t,e){const n=t.toString();return WT[n]||(WT[n]=e()),WT[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kse{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&F0(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b$="start",Dse="close",Lse="pLPCommand",Mse="pRTLPCB",cW="id",lW="pw",uW="ser",Use="cb",$se="seg",Bse="ts",Fse="d",jse="dframe",dW=1870,hW=30,zse=dW-hW,Wse=25e3,Hse=3e4;class ry{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=pC(e),this.stats_=p5(n),this.urlFn=c=>(this.appCheckToken&&(c[QO]=this.appCheckToken),aW(n,iW,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new kse(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Hse)),bse(()=>{if(this.isClosed_)return;this.scriptTagHolder=new g5((...i)=>{const[o,a,c,l,u]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===b$)this.id=a,this.password=c;else if(o===Dse)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[b$]="t",r[uW]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Use]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Jz]=f5,this.transportSessionId&&(r[Zz]=this.transportSessionId),this.lastSessionId&&(r[nW]=this.lastSessionId),this.applicationId&&(r[rW]=this.applicationId),this.appCheckToken&&(r[QO]=this.appCheckToken),typeof location<"u"&&location.hostname&&tW.test(location.hostname)&&(r[Xz]=eW);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ry.forceAllow_=!0}static forceDisallow(){ry.forceDisallow_=!0}static isAvailable(){return ry.forceAllow_?!0:!ry.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Ese()&&!_se()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=zr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Pz(n),s=Yz(r,zse);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[jse]="t",r[cW]=e,r[lW]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=zr(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class g5{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=mse(),window[Lse+this.uniqueCallbackIdentifier]=e,window[Mse+this.uniqueCallbackIdentifier]=n,this.myIFrame=g5.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ys("frame writing exception"),a.stack&&Ys(a.stack),Ys(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ys("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[cW]=this.myID,e[lW]=this.myPW,e[uW]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+hW+r.length<=dW;){const o=this.pendingSegs.shift();r=r+"&"+$se+s+"="+o.seg+"&"+Bse+s+"="+o.ts+"&"+Fse+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(Wse)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ys("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gse=16384,qse=45e3;let kS=null;typeof MozWebSocket<"u"?kS=MozWebSocket:typeof WebSocket<"u"&&(kS=WebSocket);class dc{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=pC(this.connId),this.stats_=p5(n),this.connURL=dc.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[Jz]=f5,typeof location<"u"&&location.hostname&&tW.test(location.hostname)&&(o[Xz]=eW),n&&(o[Zz]=n),r&&(o[nW]=r),s&&(o[QO]=s),i&&(o[rW]=i),aW(e,sW,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,sp.set("previous_websocket_failure",!0);try{let r;Wne(),this.mySock=new kS(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){dc.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&kS!==null&&!dc.forceDisallow_}static previouslyFailed(){return sp.isInMemoryStorage||sp.get("previous_websocket_failure")===!0}markConnectionHealthy(){sp.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=cE(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ne(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=zr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Yz(n,Gse);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(qse))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}dc.responsesRequiredToBeHealthy=2;dc.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ry,dc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=dc&&dc.isAvailable();let r=n&&!dc.previouslyFailed();if(e.webSocketOnly&&(n||eo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[dc];else{const s=this.transports_=[];for(const i of hE.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);hE.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}hE.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vse=6e4,Kse=5e3,Yse=10*1024,Qse=100*1024,HT="t",v$="d",Jse="s",E$="r",Zse="e",_$="o",C$="a",A$="n",S$="p",Xse="h";class eie{constructor(e,n,r,s,i,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=pC("c:"+this.id+":"),this.transportManager_=new hE(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Tv(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Qse?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Yse?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(HT in e){const n=e[HT];n===C$?this.upgradeIfSecondaryHealthy_():n===E$?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===_$&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=vb("t",e),r=vb("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:S$,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:C$,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:A$,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=vb("t",e),r=vb("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=vb(HT,e);if(v$ in e){const r=e[v$];if(n===Xse){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===A$){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Jse?this.onConnectionShutdown_(r):n===E$?this.onReset_(r):n===Zse?YO("Server Error: "+r):n===_$?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):YO("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),f5!==r&&eo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Tv(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Vse))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Tv(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Kse))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:S$,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(sp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fW{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pW=class{constructor(e){this.allowedEvents_=e,this.listeners_={},Ne(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){Ne(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS extends pW{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Lz()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new DS}getInitialEvent(e){return Ne(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I$=32,x$=768;class Fn{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ln(){return new Fn("")}function Ft(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Jh(t){return t.pieces_.length-t.pieceNum_}function Vn(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Fn(t.pieces_,e)}function gW(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function tie(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function mW(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function yW(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Fn(e,0)}function Wr(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Fn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Fn(n,0)}function Ht(t){return t.pieceNum_>=t.pieces_.length}function pi(t,e){const n=Ft(t),r=Ft(e);if(n===null)return e;if(n===r)return pi(Vn(t),Vn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function m5(t,e){if(Jh(t)!==Jh(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function gc(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Jh(t)>Jh(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class nie{constructor(e,n){this.errorPrefix_=n,this.parts_=mW(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Ax(this.parts_[r]);wW(this)}}function rie(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Ax(e),wW(t)}function sie(t){const e=t.parts_.pop();t.byteLength_-=Ax(e),t.parts_.length>0&&(t.byteLength_-=1)}function wW(t){if(t.byteLength_>x$)throw new Error(t.errorPrefix_+"has a key path longer than "+x$+" bytes ("+t.byteLength_+").");if(t.parts_.length>I$)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+I$+") or object contains a cycle "+$f(t))}function $f(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5 extends pW{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new y5}getInitialEvent(e){return Ne(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=1e3,iie=60*5*1e3,N$=30*1e3,oie=1.3,aie=3e4,cie="server_kill",T$=3;class Lu extends fW{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=Lu.nextPersistentConnectionId_++,this.log_=pC("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Eb,this.maxReconnectDelay_=iie,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");y5.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&DS.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(zr(i)),Ne(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new Cx,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ne(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,l=a.s;Lu.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&rd(e,"w")){const r=Gw(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();eo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Qne(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=N$)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Yne(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),Ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+zr(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):YO("Unrecognized action received from server: "+zr(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ne(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Eb,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Eb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>aie&&(this.reconnectDelay_=Eb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*oie)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Lu.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(d){Ne(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Ys("getToken() completed but was canceled"):(Ys("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new eie(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{eo(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(cie)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&eo(d),c())}}}interrupt(e){Ys("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ys("Resuming connection for reason: "+e),delete this.interruptReasons_[e],s$(this.interruptReasons_)&&(this.reconnectDelay_=Eb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>h5(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Fn(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Ys("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=T$&&(this.reconnectDelay_=N$,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ys("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=T$&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Gz.replace(/\./g,"-")]=1,Lz()?e["framework.cordova"]=1:zne()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=DS.getInstance().currentlyOnline();return s$(this.interruptReasons_)&&e}}Lu.nextPersistentConnectionId_=0;Lu.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new jt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new jt(qw,e),s=new jt(qw,n);return this.compare(r,s)!==0}minPost(){return jt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b1;class bW extends Sx{static get __EMPTY_NODE(){return b1}static set __EMPTY_NODE(e){b1=e}compare(e,n){return B0(e.name,n.name)}isDefinedOn(e){throw U0("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return jt.MIN}maxPost(){return new jt(ag,b1)}makePost(e,n){return Ne(typeof e=="string","KeyIndex indexValue must always be a string."),new jt(e,b1)}toString(){return".key"}}const Ny=new bW;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class rs{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??rs.RED,this.left=s??Ji.EMPTY_NODE,this.right=i??Ji.EMPTY_NODE}copy(e,n,r,s,i){return new rs(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ji.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Ji.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,rs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,rs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}rs.RED=!0;rs.BLACK=!1;class lie{copy(e,n,r,s,i){return this}insert(e,n,r){return new rs(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ji{constructor(e,n=Ji.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Ji(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,rs.BLACK,null,null))}remove(e){return new Ji(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,rs.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new v1(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new v1(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new v1(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new v1(this.root_,null,this.comparator_,!0,e)}}Ji.EMPTY_NODE=new lie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uie(t,e){return B0(t.name,e.name)}function w5(t,e){return B0(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JO;function die(t){JO=t}const vW=function(t){return typeof t=="number"?"number:"+Qz(t):"string:"+t},EW=function(t){if(t.isLeafNode()){const e=t.val();Ne(typeof e=="string"||typeof e=="number"||typeof e=="object"&&rd(e,".sv"),"Priority must be a string or number.")}else Ne(t===JO||t.isEmpty(),"priority of unexpected type.");Ne(t===JO||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let R$;class ns{constructor(e,n=ns.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Ne(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),EW(this.priorityNode_)}static set __childrenNodeConstructor(e){R$=e}static get __childrenNodeConstructor(){return R$}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ns(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ns.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ht(e)?this:Ft(e)===".priority"?this.priorityNode_:ns.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ns.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Ft(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Ne(r!==".priority"||Jh(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,ns.__childrenNodeConstructor.EMPTY_NODE.updateChild(Vn(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+vW(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Qz(this.value_):e+=this.value_,this.lazyHash_=Vz(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ns.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ns.__childrenNodeConstructor?-1:(Ne(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=ns.VALUE_TYPE_ORDER.indexOf(n),i=ns.VALUE_TYPE_ORDER.indexOf(r);return Ne(s>=0,"Unknown leaf type: "+n),Ne(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ns.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _W,CW;function hie(t){_W=t}function fie(t){CW=t}class pie extends Sx{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?B0(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return jt.MIN}maxPost(){return new jt(ag,new ns("[PRIORITY-POST]",CW))}makePost(e,n){const r=_W(e);return new jt(n,new ns("[PRIORITY-POST]",r))}toString(){return".priority"}}const br=new pie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gie=Math.log(2);class mie{constructor(e){const n=i=>parseInt(Math.log(i)/gie,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const LS=function(t,e,n,r){t.sort(e);const s=function(c,l){const u=l-c;let d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new rs(h,d.node,rs.BLACK,null,null);{const f=parseInt(u/2,10)+c,p=s(c,f),g=s(f+1,l);return d=t[f],h=n?n(d):d,new rs(h,d.node,rs.BLACK,p,g)}},i=function(c){let l=null,u=null,d=t.length;const h=function(p,g){const y=d-p,m=d;d-=p;const w=s(y+1,m),v=t[y],A=n?n(v):v;f(new rs(A,v.node,g,null,w))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){const g=c.nextBitIsOne(),y=Math.pow(2,c.count-(p+1));g?h(y,rs.BLACK):(h(y,rs.BLACK),h(y,rs.RED))}return u},o=new mie(t.length),a=i(o);return new Ji(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GT;const mm={};class Tu{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return Ne(mm&&br,"ChildrenNode.ts has not been loaded"),GT=GT||new Tu({".priority":mm},{".priority":br}),GT}get(e){const n=Gw(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ji?n:null}hasIndex(e){return rd(this.indexSet_,e.toString())}addIndex(e,n){Ne(e!==Ny,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(jt.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=LS(r,e.getCompare()):a=mm;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new Tu(u,l)}addToIndexes(e,n){const r=PS(this.indexes_,(s,i)=>{const o=Gw(this.indexSet_,i);if(Ne(o,"Missing index implementation for "+i),s===mm)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(jt.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),LS(a,o.getCompare())}else return mm;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new jt(e.name,a))),c.insert(e,e.node)}});return new Tu(r,this.indexSet_)}removeFromIndexes(e,n){const r=PS(this.indexes_,s=>{if(s===mm)return s;{const i=n.get(e.name);return i?s.remove(new jt(e.name,i)):s}});return new Tu(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _b;class wt{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&EW(this.priorityNode_),this.children_.isEmpty()&&Ne(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return _b||(_b=new wt(new Ji(w5),null,Tu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||_b}updatePriority(e){return this.children_.isEmpty()?this:new wt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?_b:n}}getChild(e){const n=Ft(e);return n===null?this:this.getImmediateChild(n).getChild(Vn(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Ne(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new jt(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?_b:this.priorityNode_;return new wt(s,o,i)}}updateChild(e,n){const r=Ft(e);if(r===null)return n;{Ne(Ft(e)!==".priority"||Jh(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Vn(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(br,(o,a)=>{n[o]=a.val(e),r++,i&&wt.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+vW(this.getPriority().val())+":"),this.forEachChild(br,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":Vz(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new jt(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new jt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new jt(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,jt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,jt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===gC?-1:0}withIndex(e){if(e===Ny||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new wt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ny||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(br),s=n.getIterator(br);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Ny?null:this.indexMap_.get(e.toString())}}wt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class yie extends wt{constructor(){super(new Ji(w5),wt.EMPTY_NODE,Tu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return wt.EMPTY_NODE}isEmpty(){return!1}}const gC=new yie;Object.defineProperties(jt,{MIN:{value:new jt(qw,wt.EMPTY_NODE)},MAX:{value:new jt(ag,gC)}});bW.__EMPTY_NODE=wt.EMPTY_NODE;ns.__childrenNodeConstructor=wt;die(gC);fie(gC);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wie=!0;function os(t,e=null){if(t===null)return wt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Ne(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ns(n,os(e))}if(!(t instanceof Array)&&wie){const n=[];let r=!1;if(ao(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=os(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new jt(o,c)))}}),n.length===0)return wt.EMPTY_NODE;const i=LS(n,uie,o=>o.name,w5);if(r){const o=LS(n,br.getCompare());return new wt(i,os(e),new Tu({".priority":o},{".priority":br}))}else return new wt(i,os(e),Tu.Default)}else{let n=wt.EMPTY_NODE;return ao(t,(r,s)=>{if(rd(t,r)&&r.substring(0,1)!=="."){const i=os(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(os(e))}}hie(os);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bie extends Sx{constructor(e){super(),this.indexPath_=e,Ne(!Ht(e)&&Ft(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?B0(e.name,n.name):i}makePost(e,n){const r=os(e),s=wt.EMPTY_NODE.updateChild(this.indexPath_,r);return new jt(n,s)}maxPost(){const e=wt.EMPTY_NODE.updateChild(this.indexPath_,gC);return new jt(ag,e)}toString(){return mW(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vie extends Sx{compare(e,n){const r=e.node.compareTo(n.node);return r===0?B0(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return jt.MIN}maxPost(){return jt.MAX}makePost(e,n){const r=os(e);return new jt(n,r)}toString(){return".value"}}const Eie=new vie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AW(t){return{type:"value",snapshotNode:t}}function Vw(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function fE(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function pE(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function _ie(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){Ne(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(fE(n,a)):Ne(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Vw(n,r)):o.trackChildChange(pE(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(br,(s,i)=>{n.hasChild(s)||r.trackChildChange(fE(s,i))}),n.isLeafNode()||n.forEachChild(br,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(pE(s,i,o))}else r.trackChildChange(Vw(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?wt.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e){this.indexedFilter_=new b5(e.getIndex()),this.index_=e.getIndex(),this.startPost_=gE.getStartPost_(e),this.endPost_=gE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new jt(n,r))||(r=wt.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=wt.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(wt.EMPTY_NODE);const i=this;return n.forEachChild(br,(o,a)=>{i.matches(new jt(o,a))||(s=s.updateImmediateChild(o,wt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cie{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new gE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new jt(n,r))||(r=wt.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=wt.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=wt.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(wt.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,wt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;Ne(a.numChildren()===this.limit_,"");const c=new jt(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return i!=null&&i.trackChildChange(pE(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(fE(n,d));const g=a.updateImmediateChild(n,wt.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(Vw(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?e:u&&o(l,c)>=0?(i!=null&&(i.trackChildChange(fE(l.name,l.node)),i.trackChildChange(Vw(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,wt.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=br}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ne(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ne(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:qw}hasEnd(){return this.endSet_}getIndexEndValue(){return Ne(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ne(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ag}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ne(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===br}copy(){const e=new v5;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Aie(t){return t.loadsAllData()?new b5(t.getIndex()):t.hasLimit()?new Cie(t):new gE(t)}function P$(t){const e={};if(t.isDefault())return e;let n;if(t.index_===br?n="$priority":t.index_===Eie?n="$value":t.index_===Ny?n="$key":(Ne(t.index_ instanceof bie,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=zr(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=zr(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+zr(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=zr(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+zr(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function O$(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==br&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS extends fW{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=pC("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Ne(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=MS.getListenId_(e,r),a={};this.listens_[o]=a;const c=P$(e._queryParams);this.restRequest_(i+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(i,d,!1,r),Gw(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",s(h,null)}})}unlisten(e,n){const r=MS.getListenId_(e,n);delete this.listens_[r]}get(e){const n=P$(e._queryParams),r=e._path.toString(),s=new Cx;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Jne(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=cE(a.responseText)}catch{eo("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&eo("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sie{constructor(){this.rootNode_=wt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(){return{value:null,children:new Map}}function SW(t,e,n){if(Ht(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Ft(e);t.children.has(r)||t.children.set(r,US());const s=t.children.get(r);e=Vn(e),SW(s,e,n)}}function ZO(t,e,n){t.value!==null?n(e,t.value):Iie(t,(r,s)=>{const i=new Fn(e.toString()+"/"+r);ZO(s,i,n)})}function Iie(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xie{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&ao(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k$=10*1e3,Nie=30*1e3,Tie=5*60*1e3;class Rie{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new xie(e);const r=k$+(Nie-k$)*Math.random();Tv(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;ao(e,(s,i)=>{i>0&&rd(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),Tv(this.reportStats_.bind(this),Math.floor(Math.random()*2*Tie))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mc;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(mc||(mc={}));function IW(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function E5(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function _5(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=mc.ACK_USER_WRITE,this.source=IW()}operationForChild(e){if(Ht(this.path)){if(this.affectedTree.value!=null)return Ne(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Fn(e));return new $S(ln(),n,this.revert)}}else return Ne(Ft(this.path)===e,"operationForChild called for unrelated child."),new $S(Vn(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n){this.source=e,this.path=n,this.type=mc.LISTEN_COMPLETE}operationForChild(e){return Ht(this.path)?new mE(this.source,ln()):new mE(this.source,Vn(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=mc.OVERWRITE}operationForChild(e){return Ht(this.path)?new cg(this.source,ln(),this.snap.getImmediateChild(e)):new cg(this.source,Vn(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=mc.MERGE}operationForChild(e){if(Ht(this.path)){const n=this.children.subtree(new Fn(e));return n.isEmpty()?null:n.value?new cg(this.source,ln(),n.value):new yE(this.source,ln(),n)}else return Ne(Ft(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new yE(this.source,Vn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ht(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ft(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pie{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Oie(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(_ie(o.childName,o.snapshotNode))}),Cb(t,s,"child_removed",e,r,n),Cb(t,s,"child_added",e,r,n),Cb(t,s,"child_moved",i,r,n),Cb(t,s,"child_changed",e,r,n),Cb(t,s,"value",e,r,n),s}function Cb(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>Die(t,a,c)),o.forEach(a=>{const c=kie(t,a,i);s.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function kie(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Die(t,e,n){if(e.childName==null||n.childName==null)throw U0("Should only compare child_ events.");const r=new jt(e.childName,e.snapshotNode),s=new jt(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(t,e){return{eventCache:t,serverCache:e}}function Rv(t,e,n,r){return Ix(new Zh(e,n,r),t.serverCache)}function xW(t,e,n,r){return Ix(t.eventCache,new Zh(e,n,r))}function BS(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function lg(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qT;const Lie=()=>(qT||(qT=new Ji(vse)),qT);class Zn{constructor(e,n=Lie()){this.value=e,this.children=n}static fromObject(e){let n=new Zn(null);return ao(e,(r,s)=>{n=n.set(new Fn(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ln(),value:this.value};if(Ht(e))return null;{const r=Ft(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Vn(e),n);return i!=null?{path:Wr(new Fn(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ht(e))return this;{const n=Ft(e),r=this.children.get(n);return r!==null?r.subtree(Vn(e)):new Zn(null)}}set(e,n){if(Ht(e))return new Zn(n,this.children);{const r=Ft(e),i=(this.children.get(r)||new Zn(null)).set(Vn(e),n),o=this.children.insert(r,i);return new Zn(this.value,o)}}remove(e){if(Ht(e))return this.children.isEmpty()?new Zn(null):new Zn(null,this.children);{const n=Ft(e),r=this.children.get(n);if(r){const s=r.remove(Vn(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new Zn(null):new Zn(this.value,i)}else return this}}get(e){if(Ht(e))return this.value;{const n=Ft(e),r=this.children.get(n);return r?r.get(Vn(e)):null}}setTree(e,n){if(Ht(e))return n;{const r=Ft(e),i=(this.children.get(r)||new Zn(null)).setTree(Vn(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new Zn(this.value,o)}}fold(e){return this.fold_(ln(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Wr(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ln(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Ht(e))return null;{const i=Ft(e),o=this.children.get(i);return o?o.findOnPath_(Vn(e),Wr(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ln(),n)}foreachOnPath_(e,n,r){if(Ht(e))return this;{this.value&&r(n,this.value);const s=Ft(e),i=this.children.get(s);return i?i.foreachOnPath_(Vn(e),Wr(n,s),r):new Zn(null)}}foreach(e){this.foreach_(ln(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Wr(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e){this.writeTree_=e}static empty(){return new bc(new Zn(null))}}function Pv(t,e,n){if(Ht(e))return new bc(new Zn(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=pi(s,e);return i=i.updateChild(o,n),new bc(t.writeTree_.set(s,i))}else{const s=new Zn(n),i=t.writeTree_.setTree(e,s);return new bc(i)}}}function D$(t,e,n){let r=t;return ao(n,(s,i)=>{r=Pv(r,Wr(e,s),i)}),r}function L$(t,e){if(Ht(e))return bc.empty();{const n=t.writeTree_.setTree(e,new Zn(null));return new bc(n)}}function XO(t,e){return Wg(t,e)!=null}function Wg(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(pi(n.path,e)):null}function M$(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(br,(r,s)=>{e.push(new jt(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new jt(r,s.value))}),e}function Th(t,e){if(Ht(e))return t;{const n=Wg(t,e);return n!=null?new bc(new Zn(n)):new bc(t.writeTree_.subtree(e))}}function e2(t){return t.writeTree_.isEmpty()}function Kw(t,e){return NW(ln(),t.writeTree_,e)}function NW(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(Ne(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=NW(Wr(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Wr(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(t,e){return OW(e,t)}function Mie(t,e,n,r,s){Ne(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=Pv(t.visibleWrites,e,n)),t.lastWriteId=r}function Uie(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function $ie(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Ne(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Bie(a,r.path)?s=!1:gc(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return Fie(t),!0;if(r.snap)t.visibleWrites=L$(t.visibleWrites,r.path);else{const a=r.children;ao(a,c=>{t.visibleWrites=L$(t.visibleWrites,Wr(r.path,c))})}return!0}else return!1}function Bie(t,e){if(t.snap)return gc(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&gc(Wr(t.path,n),e))return!0;return!1}function Fie(t){t.visibleWrites=TW(t.allWrites,jie,ln()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function jie(t){return t.visible}function TW(t,e,n){let r=bc.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)gc(n,o)?(a=pi(n,o),r=Pv(r,a,i.snap)):gc(o,n)&&(a=pi(o,n),r=Pv(r,ln(),i.snap.getChild(a)));else if(i.children){if(gc(n,o))a=pi(n,o),r=D$(r,a,i.children);else if(gc(o,n))if(a=pi(o,n),Ht(a))r=D$(r,ln(),i.children);else{const c=Gw(i.children,Ft(a));if(c){const l=c.getChild(Vn(a));r=Pv(r,ln(),l)}}}else throw U0("WriteRecord should have .snap or .children")}}return r}function RW(t,e,n,r,s){if(!r&&!s){const i=Wg(t.visibleWrites,e);if(i!=null)return i;{const o=Th(t.visibleWrites,e);if(e2(o))return n;if(n==null&&!XO(o,ln()))return null;{const a=n||wt.EMPTY_NODE;return Kw(o,a)}}}else{const i=Th(t.visibleWrites,e);if(!s&&e2(i))return n;if(!s&&n==null&&!XO(i,ln()))return null;{const o=function(l){return(l.visible||s)&&(!r||!~r.indexOf(l.writeId))&&(gc(l.path,e)||gc(e,l.path))},a=TW(t.allWrites,o,e),c=n||wt.EMPTY_NODE;return Kw(a,c)}}}function zie(t,e,n){let r=wt.EMPTY_NODE;const s=Wg(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(br,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Th(t.visibleWrites,e);return n.forEachChild(br,(o,a)=>{const c=Kw(Th(i,new Fn(o)),a);r=r.updateImmediateChild(o,c)}),M$(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Th(t.visibleWrites,e);return M$(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Wie(t,e,n,r,s){Ne(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Wr(e,n);if(XO(t.visibleWrites,i))return null;{const o=Th(t.visibleWrites,i);return e2(o)?s.getChild(n):Kw(o,s.getChild(n))}}function Hie(t,e,n,r){const s=Wr(e,n),i=Wg(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Th(t.visibleWrites,s);return Kw(o,r.getNode().getImmediateChild(n))}else return null}function Gie(t,e){return Wg(t.visibleWrites,e)}function qie(t,e,n,r,s,i,o){let a;const c=Th(t.visibleWrites,e),l=Wg(c,ln());if(l!=null)a=l;else if(n!=null)a=Kw(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<s;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function Vie(){return{visibleWrites:bc.empty(),allWrites:[],lastWriteId:-1}}function FS(t,e,n,r){return RW(t.writeTree,t.treePath,e,n,r)}function C5(t,e){return zie(t.writeTree,t.treePath,e)}function U$(t,e,n,r){return Wie(t.writeTree,t.treePath,e,n,r)}function jS(t,e){return Gie(t.writeTree,Wr(t.treePath,e))}function Kie(t,e,n,r,s,i){return qie(t.writeTree,t.treePath,e,n,r,s,i)}function A5(t,e,n){return Hie(t.writeTree,t.treePath,e,n)}function PW(t,e){return OW(Wr(t.treePath,e),t.writeTree)}function OW(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yie{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Ne(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Ne(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,pE(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,fE(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,Vw(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,pE(r,e.snapshotNode,s.oldSnap));else throw U0("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qie{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const kW=new Qie;class S5{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Zh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return A5(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:lg(this.viewCache_),i=Kie(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jie(t){return{filter:t}}function Zie(t,e){Ne(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Ne(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Xie(t,e,n,r,s){const i=new Yie;let o,a;if(n.type===mc.OVERWRITE){const l=n;l.source.fromUser?o=t2(t,e,l.path,l.snap,r,s,i):(Ne(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Ht(l.path),o=zS(t,e,l.path,l.snap,r,s,a,i))}else if(n.type===mc.MERGE){const l=n;l.source.fromUser?o=toe(t,e,l.path,l.children,r,s,i):(Ne(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=n2(t,e,l.path,l.children,r,s,a,i))}else if(n.type===mc.ACK_USER_WRITE){const l=n;l.revert?o=soe(t,e,l.path,r,s,i):o=noe(t,e,l.path,l.affectedTree,r,s,i)}else if(n.type===mc.LISTEN_COMPLETE)o=roe(t,e,n.path,r,i);else throw U0("Unknown operation type: "+n.type);const c=i.getChanges();return eoe(e,o,c),{viewCache:o,changes:c}}function eoe(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=BS(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(AW(BS(e)))}}function DW(t,e,n,r,s,i){const o=e.eventCache;if(jS(r,n)!=null)return e;{let a,c;if(Ht(n))if(Ne(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=lg(e),u=l instanceof wt?l:wt.EMPTY_NODE,d=C5(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const l=FS(r,lg(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,i)}else{const l=Ft(n);if(l===".priority"){Ne(Jh(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=U$(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=Vn(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const h=U$(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=A5(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,s,i):a=o.getNode()}}return Rv(e,a,o.isFullyInitialized()||Ht(n),t.filter.filtersNodes())}}function zS(t,e,n,r,s,i,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(Ht(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=Ft(n);if(!c.isCompleteForPath(n)&&Jh(n)>1)return e;const p=Vn(n),y=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=u.updatePriority(c.getNode(),y):l=u.updateChild(c.getNode(),f,y,p,kW,null)}const d=xW(e,l,c.isFullyInitialized()||Ht(n),u.filtersNodes()),h=new S5(s,d,i);return DW(t,d,n,s,h,a)}function t2(t,e,n,r,s,i,o){const a=e.eventCache;let c,l;const u=new S5(s,e,i);if(Ht(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Rv(e,l,!0,t.filter.filtersNodes());else{const d=Ft(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Rv(e,l,a.isFullyInitialized(),a.isFiltered());else{const h=Vn(n),f=a.getNode().getImmediateChild(d);let p;if(Ht(h))p=r;else{const g=u.getCompleteChild(d);g!=null?gW(h)===".priority"&&g.getChild(yW(h)).isEmpty()?p=g:p=g.updateChild(h,r):p=wt.EMPTY_NODE}if(f.equals(p))c=e;else{const g=t.filter.updateChild(a.getNode(),d,p,h,u,o);c=Rv(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function $$(t,e){return t.eventCache.isCompleteForChild(e)}function toe(t,e,n,r,s,i,o){let a=e;return r.foreach((c,l)=>{const u=Wr(n,c);$$(e,Ft(u))&&(a=t2(t,a,u,l,s,i,o))}),r.foreach((c,l)=>{const u=Wr(n,c);$$(e,Ft(u))||(a=t2(t,a,u,l,s,i,o))}),a}function B$(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function n2(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Ht(n)?l=r:l=new Zn(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=B$(t,f,h);c=zS(t,c,new Fn(d),p,s,i,o,a)}}),l.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),g=B$(t,p,h);c=zS(t,c,new Fn(d),g,s,i,o,a)}}),c}function noe(t,e,n,r,s,i,o){if(jS(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Ht(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return zS(t,e,n,c.getNode().getChild(n),s,i,a,o);if(Ht(n)){let l=new Zn(null);return c.getNode().forEachChild(Ny,(u,d)=>{l=l.set(new Fn(u),d)}),n2(t,e,n,l,s,i,a,o)}else return e}else{let l=new Zn(null);return r.foreach((u,d)=>{const h=Wr(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),n2(t,e,n,l,s,i,a,o)}}function roe(t,e,n,r,s){const i=e.serverCache,o=xW(e,i.getNode(),i.isFullyInitialized()||Ht(n),i.isFiltered());return DW(t,o,n,r,kW,s)}function soe(t,e,n,r,s,i){let o;if(jS(r,n)!=null)return e;{const a=new S5(r,e,s),c=e.eventCache.getNode();let l;if(Ht(n)||Ft(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=FS(r,lg(e));else{const d=e.serverCache.getNode();Ne(d instanceof wt,"serverChildren would be complete if leaf node"),u=C5(r,d)}u=u,l=t.filter.updateFullNode(c,u,i)}else{const u=Ft(n);let d=A5(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,Vn(n),a,i):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,wt.EMPTY_NODE,Vn(n),a,i):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=FS(r,lg(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,i)))}return o=e.serverCache.isFullyInitialized()||jS(r,ln())!=null,Rv(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ioe{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new b5(r.getIndex()),i=Aie(r);this.processor_=Jie(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(wt.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(wt.EMPTY_NODE,a.getNode(),null),u=new Zh(c,o.isFullyInitialized(),s.filtersNodes()),d=new Zh(l,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=Ix(d,u),this.eventGenerator_=new Pie(this.query_)}get query(){return this.query_}}function ooe(t){return t.viewCache_.serverCache.getNode()}function aoe(t){return BS(t.viewCache_)}function coe(t,e){const n=lg(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ht(e)&&!n.getImmediateChild(Ft(e)).isEmpty())?n.getChild(e):null}function F$(t){return t.eventRegistrations_.length===0}function loe(t,e){t.eventRegistrations_.push(e)}function j$(t,e,n){const r=[];if(n){Ne(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function z$(t,e,n,r){e.type===mc.MERGE&&e.source.queryId!==null&&(Ne(lg(t.viewCache_),"We should always have a full cache before handling merges"),Ne(BS(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=Xie(t.processor_,s,e,n,r);return Zie(t.processor_,i.viewCache),Ne(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,LW(t,i.changes,i.viewCache.eventCache.getNode(),null)}function uoe(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(br,(i,o)=>{r.push(Vw(i,o))}),n.isFullyInitialized()&&r.push(AW(n.getNode())),LW(t,r,n.getNode(),e)}function LW(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return Oie(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WS;class MW{constructor(){this.views=new Map}}function doe(t){Ne(!WS,"__referenceConstructor has already been defined"),WS=t}function hoe(){return Ne(WS,"Reference.ts has not been loaded"),WS}function foe(t){return t.views.size===0}function I5(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return Ne(i!=null,"SyncTree gave us an op for an invalid query."),z$(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(z$(o,e,n,r));return i}}function UW(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=FS(n,s?r:null),c=!1;a?c=!0:r instanceof wt?(a=C5(n,r),c=!1):(a=wt.EMPTY_NODE,c=!1);const l=Ix(new Zh(a,c,!1),new Zh(r,s,!1));return new ioe(e,l)}return o}function poe(t,e,n,r,s,i){const o=UW(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),loe(o,n),uoe(o,n)}function goe(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=Xh(t);if(s==="default")for(const[c,l]of t.views.entries())o=o.concat(j$(l,n,r)),F$(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||i.push(l.query));else{const c=t.views.get(s);c&&(o=o.concat(j$(c,n,r)),F$(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!Xh(t)&&i.push(new(hoe())(e._repo,e._path)),{removed:i,events:o}}function $W(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Rh(t,e){let n=null;for(const r of t.views.values())n=n||coe(r,e);return n}function BW(t,e){if(e._queryParams.loadsAllData())return Nx(t);{const r=e._queryIdentifier;return t.views.get(r)}}function FW(t,e){return BW(t,e)!=null}function Xh(t){return Nx(t)!=null}function Nx(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HS;function moe(t){Ne(!HS,"__referenceConstructor has already been defined"),HS=t}function yoe(){return Ne(HS,"Reference.ts has not been loaded"),HS}let woe=1;class W${constructor(e){this.listenProvider_=e,this.syncPointTree_=new Zn(null),this.pendingWriteTree_=Vie(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function jW(t,e,n,r,s){return Mie(t.pendingWriteTree_,e,n,r,s),s?yC(t,new cg(IW(),e,n)):[]}function ip(t,e,n=!1){const r=Uie(t.pendingWriteTree_,e);if($ie(t.pendingWriteTree_,e)){let i=new Zn(null);return r.snap!=null?i=i.set(ln(),!0):ao(r.children,o=>{i=i.set(new Fn(o),!0)}),yC(t,new $S(r.path,i,n))}else return[]}function mC(t,e,n){return yC(t,new cg(E5(),e,n))}function boe(t,e,n){const r=Zn.fromObject(n);return yC(t,new yE(E5(),e,r))}function voe(t,e){return yC(t,new mE(E5(),e))}function Eoe(t,e,n){const r=N5(t,n);if(r){const s=T5(r),i=s.path,o=s.queryId,a=pi(i,e),c=new mE(_5(o),a);return R5(t,i,c)}else return[]}function GS(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||FW(o,e))){const c=goe(o,e,n,r);foe(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const l=c.removed;if(a=c.events,!s){const u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(h,f)=>Xh(f));if(u&&!d){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const f=Aoe(h);for(let p=0;p<f.length;++p){const g=f[p],y=g.query,m=GW(t,g);t.listenProvider_.startListening(Ov(y),wE(t,y),m.hashFn,m.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(Ov(e),null):l.forEach(h=>{const f=t.queryToTagMap.get(Tx(h));t.listenProvider_.stopListening(Ov(h),f)}))}Soe(t,l)}return a}function zW(t,e,n,r){const s=N5(t,r);if(s!=null){const i=T5(s),o=i.path,a=i.queryId,c=pi(o,e),l=new cg(_5(a),c,n);return R5(t,o,l)}else return[]}function _oe(t,e,n,r){const s=N5(t,r);if(s){const i=T5(s),o=i.path,a=i.queryId,c=pi(o,e),l=Zn.fromObject(n),u=new yE(_5(a),c,l);return R5(t,o,u)}else return[]}function r2(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(h,f)=>{const p=pi(h,s);i=i||Rh(f,p),o=o||Xh(f)});let a=t.syncPointTree_.get(s);a?(o=o||Xh(a),i=i||Rh(a,ln())):(a=new MW,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=wt.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((f,p)=>{const g=Rh(p,ln());g&&(i=i.updateImmediateChild(f,g))}));const l=FW(a,e);if(!l&&!e._queryParams.loadsAllData()){const h=Tx(e);Ne(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=Ioe();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const u=xx(t.pendingWriteTree_,s);let d=poe(a,e,n,u,i,c);if(!l&&!o&&!r){const h=BW(a,e);d=d.concat(xoe(t,e,h))}return d}function x5(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=pi(o,e),l=Rh(a,c);if(l)return l});return RW(s,e,i,n,!0)}function Coe(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{const d=pi(l,n);r=r||Rh(u,d)});let s=t.syncPointTree_.get(n);s?r=r||Rh(s,ln()):(s=new MW,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new Zh(r,!0,!1):null,a=xx(t.pendingWriteTree_,e._path),c=UW(s,e,a,i?o.getNode():wt.EMPTY_NODE,i);return aoe(c)}function yC(t,e){return WW(e,t.syncPointTree_,null,xx(t.pendingWriteTree_,ln()))}function WW(t,e,n,r){if(Ht(t.path))return HW(t,e,n,r);{const s=e.get(ln());n==null&&s!=null&&(n=Rh(s,ln()));let i=[];const o=Ft(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=PW(r,o);i=i.concat(WW(a,c,l,u))}return s&&(i=i.concat(I5(s,t,r,n))),i}}function HW(t,e,n,r){const s=e.get(ln());n==null&&s!=null&&(n=Rh(s,ln()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=PW(r,o),u=t.operationForChild(o);u&&(i=i.concat(HW(u,a,c,l)))}),s&&(i=i.concat(I5(s,t,r,n))),i}function GW(t,e){const n=e.query,r=wE(t,n);return{hashFn:()=>(ooe(e)||wt.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?Eoe(t,n._path,r):voe(t,n._path);{const i=Cse(s,n);return GS(t,n,null,i)}}}}function wE(t,e){const n=Tx(e);return t.queryToTagMap.get(n)}function Tx(t){return t._path.toString()+"$"+t._queryIdentifier}function N5(t,e){return t.tagToQueryMap.get(e)}function T5(t){const e=t.indexOf("$");return Ne(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Fn(t.substr(0,e))}}function R5(t,e,n){const r=t.syncPointTree_.get(e);Ne(r,"Missing sync point for query tag that we're tracking");const s=xx(t.pendingWriteTree_,e);return I5(r,n,s,null)}function Aoe(t){return t.fold((e,n,r)=>{if(n&&Xh(n))return[Nx(n)];{let s=[];return n&&(s=$W(n)),ao(r,(i,o)=>{s=s.concat(o)}),s}})}function Ov(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(yoe())(t._repo,t._path):t}function Soe(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Tx(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function Ioe(){return woe++}function xoe(t,e,n){const r=e._path,s=wE(t,e),i=GW(t,n),o=t.listenProvider_.startListening(Ov(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)Ne(!Xh(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!Ht(l)&&u&&Xh(u))return[Nx(u).query];{let h=[];return u&&(h=h.concat($W(u).map(f=>f.query))),ao(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){const u=c[l];t.listenProvider_.stopListening(Ov(u),wE(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new P5(n)}node(){return this.node_}}class O5{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Wr(this.path_,e);return new O5(this.syncTree_,n)}node(){return x5(this.syncTree_,this.path_)}}const Noe=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},H$=function(t,e,n){if(!t||typeof t!="object")return t;if(Ne(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Toe(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Roe(t[".sv"],e);Ne(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Toe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Ne(!1,"Unexpected server value: "+t)}},Roe=function(t,e,n){t.hasOwnProperty("increment")||Ne(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&Ne(!1,"Unexpected increment value: "+r);const s=e.node();if(Ne(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},Poe=function(t,e,n,r){return k5(e,new O5(n,t),r)},qW=function(t,e,n){return k5(t,new P5(e),n)};function k5(t,e,n){const r=t.getPriority().val(),s=H$(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=H$(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new ns(a,os(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new ns(s))),o.forEachChild(br,(a,c)=>{const l=k5(c,e.getImmediateChild(a),n);l!==c&&(i=i.updateImmediateChild(a,l))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function L5(t,e){let n=e instanceof Fn?e:new Fn(e),r=t,s=Ft(n);for(;s!==null;){const i=Gw(r.node.children,s)||{children:{},childCount:0};r=new D5(s,r,i),n=Vn(n),s=Ft(n)}return r}function j0(t){return t.node.value}function VW(t,e){t.node.value=e,s2(t)}function KW(t){return t.node.childCount>0}function Ooe(t){return j0(t)===void 0&&!KW(t)}function Rx(t,e){ao(t.node.children,(n,r)=>{e(new D5(n,t,r))})}function YW(t,e,n,r){n&&e(t),Rx(t,s=>{YW(s,e,!0)})}function koe(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function wC(t){return new Fn(t.parent===null?t.name:wC(t.parent)+"/"+t.name)}function s2(t){t.parent!==null&&Doe(t.parent,t.name,t)}function Doe(t,e,n){const r=Ooe(n),s=rd(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,s2(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,s2(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Loe=/[\[\].#$\/\u0000-\u001F\u007F]/,Moe=/[\[\].#$\u0000-\u001F\u007F]/,VT=10*1024*1024,QW=function(t){return typeof t=="string"&&t.length!==0&&!Loe.test(t)},JW=function(t){return typeof t=="string"&&t.length!==0&&!Moe.test(t)},Uoe=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),JW(t)},$oe=function(t,e,n,r){M5(u5(t,"value"),e,n)},M5=function(t,e,n){const r=n instanceof Fn?new nie(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+$f(r));if(typeof e=="function")throw new Error(t+"contains a function "+$f(r)+" with contents = "+e.toString());if(Kz(e))throw new Error(t+"contains "+e.toString()+" "+$f(r));if(typeof e=="string"&&e.length>VT/3&&Ax(e)>VT)throw new Error(t+"contains a string greater than "+VT+" utf8 bytes "+$f(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(ao(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!QW(o)))throw new Error(t+" contains an invalid key ("+o+") "+$f(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);rie(r,o),M5(t,a,r),sie(r)}),s&&i)throw new Error(t+' contains ".value" child '+$f(r)+" in addition to actual children.")}},ZW=function(t,e,n,r){if(!JW(n))throw new Error(u5(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Boe=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ZW(t,e,n)},XW=function(t,e){if(Ft(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Foe=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!QW(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Uoe(n))throw new Error(u5(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class joe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function U5(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!m5(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function eH(t,e,n){U5(t,n),tH(t,r=>m5(r,e))}function Rl(t,e,n){U5(t,n),tH(t,r=>gc(r,e)||gc(e,r))}function tH(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(zoe(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function zoe(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Nv&&Ys("event: "+n.toString()),F0(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Woe="repo_interrupt",Hoe=25;class Goe{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new joe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=US(),this.transactionQueueTree_=new D5,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function qoe(t,e,n){if(t.stats_=p5(t.repoInfo_),t.forceRestClient_||xse())t.server_=new MS(t.repoInfo_,(r,s,i,o)=>{G$(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>q$(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{zr(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Lu(t.repoInfo_,e,(r,s,i,o)=>{G$(t,r,s,i,o)},r=>{q$(t,r)},r=>{Koe(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Ose(t.repoInfo_,()=>new Rie(t.stats_,t.server_)),t.infoData_=new Sie,t.infoSyncTree_=new W$({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=mC(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),B5(t,"connected",!1),t.serverSyncTree_=new W$({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const l=o(a,c);Rl(t.eventQueue_,r._path,l)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function Voe(t){const n=t.infoData_.getNode(new Fn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function $5(t){return Noe({timestamp:Voe(t)})}function G$(t,e,n,r,s){t.dataUpdateCount++;const i=new Fn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=PS(n,l=>os(l));o=_oe(t.serverSyncTree_,i,c,s)}else{const c=os(n);o=zW(t.serverSyncTree_,i,c,s)}else if(r){const c=PS(n,l=>os(l));o=boe(t.serverSyncTree_,i,c)}else{const c=os(n);o=mC(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=Ox(t,i)),Rl(t.eventQueue_,a,o)}function q$(t,e){B5(t,"connected",e),e===!1&&Joe(t)}function Koe(t,e){ao(e,(n,r)=>{B5(t,n,r)})}function B5(t,e,n){const r=new Fn("/.info/"+e),s=os(n);t.infoData_.updateSnapshot(r,s);const i=mC(t.infoSyncTree_,r,s);Rl(t.eventQueue_,r,i)}function nH(t){return t.nextWriteId_++}function Yoe(t,e,n){const r=Coe(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=os(s).withIndex(e._queryParams.getIndex());r2(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=mC(t.serverSyncTree_,e._path,i);else{const a=wE(t.serverSyncTree_,e);o=zW(t.serverSyncTree_,e._path,i,a)}return Rl(t.eventQueue_,e._path,o),GS(t.serverSyncTree_,e,n,null,!0),i},s=>(Px(t,"get for query "+zr(e)+" failed: "+s),Promise.reject(new Error(s))))}function Qoe(t,e,n,r,s){Px(t,"set",{path:e.toString(),value:n,priority:r});const i=$5(t),o=os(n,r),a=x5(t.serverSyncTree_,e),c=qW(o,a,i),l=nH(t),u=jW(t.serverSyncTree_,e,c,l,!0);U5(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p=h==="ok";p||eo("set at "+e+" failed: "+h);const g=ip(t.serverSyncTree_,l,!p);Rl(t.eventQueue_,e,g),tae(t,s,h,f)});const d=aH(t,e);Ox(t,d),Rl(t.eventQueue_,d,[])}function Joe(t){Px(t,"onDisconnectEvents");const e=$5(t),n=US();ZO(t.onDisconnect_,ln(),(s,i)=>{const o=Poe(s,i,t.serverSyncTree_,e);SW(n,s,o)});let r=[];ZO(n,ln(),(s,i)=>{r=r.concat(mC(t.serverSyncTree_,s,i));const o=aH(t,s);Ox(t,o)}),t.onDisconnect_=US(),Rl(t.eventQueue_,ln(),r)}function Zoe(t,e,n){let r;Ft(e._path)===".info"?r=r2(t.infoSyncTree_,e,n):r=r2(t.serverSyncTree_,e,n),eH(t.eventQueue_,e._path,r)}function Xoe(t,e,n){let r;Ft(e._path)===".info"?r=GS(t.infoSyncTree_,e,n):r=GS(t.serverSyncTree_,e,n),eH(t.eventQueue_,e._path,r)}function eae(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Woe)}function Px(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ys(n,...e)}function tae(t,e,n,r){e&&F0(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function rH(t,e,n){return x5(t.serverSyncTree_,e,n)||wt.EMPTY_NODE}function F5(t,e=t.transactionQueueTree_){if(e||kx(t,e),j0(e)){const n=iH(t,e);Ne(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&nae(t,wC(e),n)}else KW(e)&&Rx(e,n=>{F5(t,n)})}function nae(t,e,n){const r=n.map(l=>l.currentWriteId),s=rH(t,e,r);let i=s;const o=s.hash();for(let l=0;l<n.length;l++){const u=n[l];Ne(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=pi(e,u.path);i=i.updateChild(d,u.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,l=>{Px(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(ip(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();kx(t,L5(t.transactionQueueTree_,e)),F5(t,t.transactionQueueTree_),Rl(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)F0(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{eo("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}Ox(t,e)}},o)}function Ox(t,e){const n=sH(t,e),r=wC(n),s=iH(t,n);return rae(t,s,r),r}function rae(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=pi(n,c.path);let u=!1,d;if(Ne(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,s=s.concat(ip(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Hoe)u=!0,d="maxretry",s=s.concat(ip(t.serverSyncTree_,c.currentWriteId,!0));else{const h=rH(t,c.path,o);c.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){M5("transaction failed: Data returned ",f,c.path);let p=os(f);typeof f=="object"&&f!=null&&rd(f,".priority")||(p=p.updatePriority(h.getPriority()));const y=c.currentWriteId,m=$5(t),w=qW(p,h,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=w,c.currentWriteId=nH(t),o.splice(o.indexOf(y),1),s=s.concat(jW(t.serverSyncTree_,c.path,w,c.currentWriteId,c.applyLocally)),s=s.concat(ip(t.serverSyncTree_,y,!0))}else u=!0,d="nodata",s=s.concat(ip(t.serverSyncTree_,c.currentWriteId,!0))}Rl(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}kx(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)F0(r[a]);F5(t,t.transactionQueueTree_)}function sH(t,e){let n,r=t.transactionQueueTree_;for(n=Ft(e);n!==null&&j0(r)===void 0;)r=L5(r,n),e=Vn(e),n=Ft(e);return r}function iH(t,e){const n=[];return oH(t,e,n),n.sort((r,s)=>r.order-s.order),n}function oH(t,e,n){const r=j0(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Rx(e,s=>{oH(t,s,n)})}function kx(t,e){const n=j0(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,VW(e,n.length>0?n:void 0)}Rx(e,r=>{kx(t,r)})}function aH(t,e){const n=wC(sH(t,e)),r=L5(t.transactionQueueTree_,e);return koe(r,s=>{KT(t,s)}),KT(t,r),YW(r,s=>{KT(t,s)}),n}function KT(t,e){const n=j0(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Ne(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(Ne(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(ip(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?VW(e,void 0):n.length=i+1,Rl(t.eventQueue_,wC(e),s);for(let o=0;o<r.length;o++)F0(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sae(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function iae(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):eo(`Invalid query segment '${n}' in query '${t}'`)}return e}const V$=function(t,e){const n=oae(t),r=n.namespace;n.domain==="firebase.com"&&qu(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&qu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||wse();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new oW(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Fn(n.pathString)}},oae=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(s=sae(t.substring(u,d)));const h=iae(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),i=r}"ns"in h&&(i=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aae{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+zr(this.snapshot.exportVal())}}class cae{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Ne(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Ht(this._path)?null:gW(this._path)}get ref(){return new sd(this._repo,this._path)}get _queryIdentifier(){const e=O$(this._queryParams),n=h5(e);return n==="{}"?"default":n}get _queryObject(){return O$(this._queryParams)}isEqual(e){if(e=$0(e),!(e instanceof j5))return!1;const n=this._repo===e._repo,r=m5(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+tie(this._path)}}class sd extends j5{constructor(e,n){super(e,n,new v5,!1)}get parent(){const e=yW(this._path);return e===null?null:new sd(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class bE{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Fn(e),r=i2(this.ref,e);return new bE(this._node.getChild(n),r,br)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new bE(s,i2(this.ref,r),br)))}hasChild(e){const n=new Fn(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ia(t,e){return t=$0(t),t._checkNotDeleted("ref"),e!==void 0?i2(t._root,e):t._root}function i2(t,e){return t=$0(t),Ft(t._path)===null?Boe("child","path",e):ZW("child","path",e),new sd(t._repo,Wr(t._path,e))}function lae(t){return XW("remove",t._path),kv(t,null)}function kv(t,e){t=$0(t),XW("set",t._path),$oe("set",e,t._path);const n=new Cx;return Qoe(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Vf(t){t=$0(t);const e=new cH(()=>{}),n=new Dx(e);return Yoe(t._repo,t,n).then(r=>new bE(r,new sd(t._repo,t._path),t._queryParams.getIndex()))}class Dx{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new aae("value",this,new bE(e.snapshotNode,new sd(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new cae(this,e,n):null}matches(e){return e instanceof Dx?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function uae(t,e,n,r,s){const i=new cH(n,void 0),o=new Dx(i);return Zoe(t._repo,t,o),()=>Xoe(t._repo,t,o)}function K$(t,e,n,r){return uae(t,"value",e)}doe(sd);moe(sd);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dae="FIREBASE_DATABASE_EMULATOR_HOST",o2={};let hae=!1;function fae(t,e,n,r){t.repoInfo_=new oW(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function pae(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||qu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ys("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=V$(i,s),a=o.repoInfo,c;typeof process<"u"&&p$&&(c=p$[dae]),c?(i=`http://${c}?ns=${a.namespace}`,o=V$(i,s),a=o.repoInfo):o.repoInfo.secure;const l=new Tse(t.name,t.options,e);Foe("Invalid Firebase Database URL",o),Ht(o.path)||qu("Database URL must point to the root of a Firebase Database (not including a child path).");const u=mae(a,t,l,new Nse(t.name,n));return new yae(u,t)}function gae(t,e){const n=o2[e];(!n||n[t.key]!==t)&&qu(`Database ${e}(${t.repoInfo_}) has already been deleted.`),eae(t),delete n[t.key]}function mae(t,e,n,r){let s=o2[e.name];s||(s={},o2[e.name]=s);let i=s[t.toURLString()];return i&&qu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Goe(t,hae,n,r),s[t.toURLString()]=i,i}class yae{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(qoe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new sd(this._repo,ln())),this._rootInternal}_delete(){return this._rootInternal!==null&&(gae(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&qu("Cannot call "+e+" on a deleted database.")}}function wae(t=zz(),e){const n=Qre(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Bne("database");r&&bae(n,...r)}return n}function bae(t,e,n,r={}){t=$0(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&qu("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&qu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new $A($A.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:Fne(r.mockUserToken,t.app.options.projectId);i=new $A(o)}fae(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vae(t){hse(Xre),OS(new lE("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return pae(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Iy(g$,m$,t),Iy(g$,m$,"esm2017")}Lu.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Lu.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};vae();const Eae={apiKey:"AIzaSyAed5bn78c6Mb5Y3ezULH9CEg7IAKYFAps",authDomain:"chess-220ee.firebaseapp.com",databaseURL:"https://chess-220ee-default-rtdb.firebaseio.com",projectId:"chess-220ee",storageBucket:"chess-220ee.firebasestorage.app",messagingSenderId:"724477138097",appId:"1:724477138097:web:7dc15f79db3bda5c763e90"},_ae=ese().length?zz():jz(Eae),qS=wae(_ae);var a2={},lH={exports:{}},Wo={},uH={exports:{}},dH={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,L){var F=P.length;P.push(L);e:for(;0<F;){var V=F-1>>>1,Z=P[V];if(0<s(Z,L))P[V]=L,P[F]=Z,F=V;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var L=P[0],F=P.pop();if(F!==L){P[0]=F;e:for(var V=0,Z=P.length,ae=Z>>>1;V<ae;){var re=2*(V+1)-1,le=P[re],we=re+1,ee=P[we];if(0>s(le,F))we<Z&&0>s(ee,le)?(P[V]=ee,P[we]=F,V=we):(P[V]=le,P[re]=F,V=re);else if(we<Z&&0>s(ee,F))P[V]=ee,P[we]=F,V=we;else break e}}return L}function s(P,L){var F=P.sortIndex-L.sortIndex;return F!==0?F:P.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(P){for(var L=n(l);L!==null;){if(L.callback===null)r(l);else if(L.startTime<=P)r(l),L.sortIndex=L.expirationTime,e(c,L);else break;L=n(l)}}function A(P){if(g=!1,v(P),!p)if(n(c)!==null)p=!0,N(C);else{var L=n(l);L!==null&&M(A,L.startTime-P)}}function C(P,L){p=!1,g&&(g=!1,m(T),T=-1),f=!0;var F=h;try{for(v(L),d=n(c);d!==null&&(!(d.expirationTime>L)||P&&!O());){var V=d.callback;if(typeof V=="function"){d.callback=null,h=d.priorityLevel;var Z=V(d.expirationTime<=L);L=t.unstable_now(),typeof Z=="function"?d.callback=Z:d===n(c)&&r(c),v(L)}else r(c);d=n(c)}if(d!==null)var ae=!0;else{var re=n(l);re!==null&&M(A,re.startTime-L),ae=!1}return ae}finally{d=null,h=F,f=!1}}var S=!1,x=null,T=-1,I=5,k=-1;function O(){return!(t.unstable_now()-k<I)}function B(){if(x!==null){var P=t.unstable_now();k=P;var L=!0;try{L=x(!0,P)}finally{L?G():(S=!1,x=null)}}else S=!1}var G;if(typeof w=="function")G=function(){w(B)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,R=W.port2;W.port1.onmessage=B,G=function(){R.postMessage(null)}}else G=function(){y(B,0)};function N(P){x=P,S||(S=!0,G())}function M(P,L){T=y(function(){P(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,N(C))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(P){switch(h){case 1:case 2:case 3:var L=3;break;default:L=h}var F=h;h=L;try{return P()}finally{h=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,L){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var F=h;h=P;try{return L()}finally{h=F}},t.unstable_scheduleCallback=function(P,L,F){var V=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?V+F:V):F=V,P){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=F+Z,P={id:u++,callback:L,priorityLevel:P,startTime:F,expirationTime:Z,sortIndex:-1},F>V?(P.sortIndex=F,e(l,P),n(c)===null&&P===n(l)&&(g?(m(T),T=-1):g=!0,M(A,F-V))):(P.sortIndex=Z,e(c,P),p||f||(p=!0,N(C))),P},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(P){var L=h;return function(){var F=h;h=L;try{return P.apply(this,arguments)}finally{h=F}}}})(dH);uH.exports=dH;var Cae=uH.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aae=D,Fo=Cae;function _e(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hH=new Set,vE={};function Hg(t,e){Yw(t,e),Yw(t+"Capture",e)}function Yw(t,e){for(vE[t]=e,t=0;t<e.length;t++)hH.add(e[t])}var Vu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c2=Object.prototype.hasOwnProperty,Sae=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Y$={},Q$={};function Iae(t){return c2.call(Q$,t)?!0:c2.call(Y$,t)?!1:Sae.test(t)?Q$[t]=!0:(Y$[t]=!0,!1)}function xae(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Nae(t,e,n,r){if(e===null||typeof e>"u"||xae(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ai(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ds={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ds[t]=new Ai(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ds[e]=new Ai(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ds[t]=new Ai(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ds[t]=new Ai(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ds[t]=new Ai(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ds[t]=new Ai(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ds[t]=new Ai(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ds[t]=new Ai(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ds[t]=new Ai(t,5,!1,t.toLowerCase(),null,!1,!1)});var z5=/[\-:]([a-z])/g;function W5(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(z5,W5);Ds[e]=new Ai(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(z5,W5);Ds[e]=new Ai(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(z5,W5);Ds[e]=new Ai(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ds[t]=new Ai(t,1,!1,t.toLowerCase(),null,!1,!1)});Ds.xlinkHref=new Ai("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ds[t]=new Ai(t,1,!1,t.toLowerCase(),null,!0,!0)});function H5(t,e,n,r){var s=Ds.hasOwnProperty(e)?Ds[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Nae(e,n,s,r)&&(n=null),r||s===null?Iae(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var id=Aae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E1=Symbol.for("react.element"),sy=Symbol.for("react.portal"),iy=Symbol.for("react.fragment"),G5=Symbol.for("react.strict_mode"),l2=Symbol.for("react.profiler"),fH=Symbol.for("react.provider"),pH=Symbol.for("react.context"),q5=Symbol.for("react.forward_ref"),u2=Symbol.for("react.suspense"),d2=Symbol.for("react.suspense_list"),V5=Symbol.for("react.memo"),Dd=Symbol.for("react.lazy"),gH=Symbol.for("react.offscreen"),J$=Symbol.iterator;function Ab(t){return t===null||typeof t!="object"?null:(t=J$&&t[J$]||t["@@iterator"],typeof t=="function"?t:null)}var fr=Object.assign,YT;function iv(t){if(YT===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);YT=e&&e[1]||""}return`
`+YT+t}var QT=!1;function JT(t,e){if(!t||QT)return"";QT=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{QT=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?iv(t):""}function Tae(t){switch(t.tag){case 5:return iv(t.type);case 16:return iv("Lazy");case 13:return iv("Suspense");case 19:return iv("SuspenseList");case 0:case 2:case 15:return t=JT(t.type,!1),t;case 11:return t=JT(t.type.render,!1),t;case 1:return t=JT(t.type,!0),t;default:return""}}function h2(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case iy:return"Fragment";case sy:return"Portal";case l2:return"Profiler";case G5:return"StrictMode";case u2:return"Suspense";case d2:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pH:return(t.displayName||"Context")+".Consumer";case fH:return(t._context.displayName||"Context")+".Provider";case q5:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case V5:return e=t.displayName||null,e!==null?e:h2(t.type)||"Memo";case Dd:e=t._payload,t=t._init;try{return h2(t(e))}catch{}}return null}function Rae(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return h2(e);case 8:return e===G5?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ef(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mH(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Pae(t){var e=mH(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _1(t){t._valueTracker||(t._valueTracker=Pae(t))}function yH(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=mH(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function VS(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function f2(t,e){var n=e.checked;return fr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Z$(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ef(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wH(t,e){e=e.checked,e!=null&&H5(t,"checked",e,!1)}function p2(t,e){wH(t,e);var n=ef(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?g2(t,e.type,n):e.hasOwnProperty("defaultValue")&&g2(t,e.type,ef(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function X$(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function g2(t,e,n){(e!=="number"||VS(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ov=Array.isArray;function Ty(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ef(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function m2(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(_e(91));return fr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function eB(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(_e(92));if(ov(n)){if(1<n.length)throw Error(_e(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ef(n)}}function bH(t,e){var n=ef(e.value),r=ef(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function tB(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vH(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function y2(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vH(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var C1,EH=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(C1=C1||document.createElement("div"),C1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=C1.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function EE(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Dv={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Oae=["Webkit","ms","Moz","O"];Object.keys(Dv).forEach(function(t){Oae.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Dv[e]=Dv[t]})});function _H(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Dv.hasOwnProperty(t)&&Dv[t]?(""+e).trim():e+"px"}function CH(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=_H(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var kae=fr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function w2(t,e){if(e){if(kae[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(_e(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(_e(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(_e(61))}if(e.style!=null&&typeof e.style!="object")throw Error(_e(62))}}function b2(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var v2=null;function K5(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var E2=null,Ry=null,Py=null;function nB(t){if(t=EC(t)){if(typeof E2!="function")throw Error(_e(280));var e=t.stateNode;e&&(e=Bx(e),E2(t.stateNode,t.type,e))}}function AH(t){Ry?Py?Py.push(t):Py=[t]:Ry=t}function SH(){if(Ry){var t=Ry,e=Py;if(Py=Ry=null,nB(t),e)for(t=0;t<e.length;t++)nB(e[t])}}function IH(t,e){return t(e)}function xH(){}var ZT=!1;function NH(t,e,n){if(ZT)return t(e,n);ZT=!0;try{return IH(t,e,n)}finally{ZT=!1,(Ry!==null||Py!==null)&&(xH(),SH())}}function _E(t,e){var n=t.stateNode;if(n===null)return null;var r=Bx(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(_e(231,e,typeof n));return n}var _2=!1;if(Vu)try{var Sb={};Object.defineProperty(Sb,"passive",{get:function(){_2=!0}}),window.addEventListener("test",Sb,Sb),window.removeEventListener("test",Sb,Sb)}catch{_2=!1}function Dae(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var Lv=!1,KS=null,YS=!1,C2=null,Lae={onError:function(t){Lv=!0,KS=t}};function Mae(t,e,n,r,s,i,o,a,c){Lv=!1,KS=null,Dae.apply(Lae,arguments)}function Uae(t,e,n,r,s,i,o,a,c){if(Mae.apply(this,arguments),Lv){if(Lv){var l=KS;Lv=!1,KS=null}else throw Error(_e(198));YS||(YS=!0,C2=l)}}function Gg(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function TH(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rB(t){if(Gg(t)!==t)throw Error(_e(188))}function $ae(t){var e=t.alternate;if(!e){if(e=Gg(t),e===null)throw Error(_e(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return rB(s),t;if(i===r)return rB(s),e;i=i.sibling}throw Error(_e(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(_e(189))}}if(n.alternate!==r)throw Error(_e(190))}if(n.tag!==3)throw Error(_e(188));return n.stateNode.current===n?t:e}function RH(t){return t=$ae(t),t!==null?PH(t):null}function PH(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=PH(t);if(e!==null)return e;t=t.sibling}return null}var OH=Fo.unstable_scheduleCallback,sB=Fo.unstable_cancelCallback,Bae=Fo.unstable_shouldYield,Fae=Fo.unstable_requestPaint,Sr=Fo.unstable_now,jae=Fo.unstable_getCurrentPriorityLevel,Y5=Fo.unstable_ImmediatePriority,kH=Fo.unstable_UserBlockingPriority,QS=Fo.unstable_NormalPriority,zae=Fo.unstable_LowPriority,DH=Fo.unstable_IdlePriority,Lx=null,_l=null;function Wae(t){if(_l&&typeof _l.onCommitFiberRoot=="function")try{_l.onCommitFiberRoot(Lx,t,void 0,(t.current.flags&128)===128)}catch{}}var vc=Math.clz32?Math.clz32:qae,Hae=Math.log,Gae=Math.LN2;function qae(t){return t>>>=0,t===0?32:31-(Hae(t)/Gae|0)|0}var A1=64,S1=4194304;function av(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function JS(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=av(a):(i&=o,i!==0&&(r=av(i)))}else o=n&~s,o!==0?r=av(o):i!==0&&(r=av(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vc(e),s=1<<n,r|=t[n],e&=~s;return r}function Vae(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kae(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-vc(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=Vae(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function A2(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function LH(){var t=A1;return A1<<=1,!(A1&4194240)&&(A1=64),t}function XT(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function bC(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vc(e),t[e]=n}function Yae(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-vc(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Q5(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vc(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var An=0;function MH(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var UH,J5,$H,BH,FH,S2=!1,I1=[],Ph=null,Oh=null,kh=null,CE=new Map,AE=new Map,Fd=[],Qae="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iB(t,e){switch(t){case"focusin":case"focusout":Ph=null;break;case"dragenter":case"dragleave":Oh=null;break;case"mouseover":case"mouseout":kh=null;break;case"pointerover":case"pointerout":CE.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":AE.delete(e.pointerId)}}function Ib(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=EC(e),e!==null&&J5(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Jae(t,e,n,r,s){switch(e){case"focusin":return Ph=Ib(Ph,t,e,n,r,s),!0;case"dragenter":return Oh=Ib(Oh,t,e,n,r,s),!0;case"mouseover":return kh=Ib(kh,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return CE.set(i,Ib(CE.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,AE.set(i,Ib(AE.get(i)||null,t,e,n,r,s)),!0}return!1}function jH(t){var e=op(t.target);if(e!==null){var n=Gg(e);if(n!==null){if(e=n.tag,e===13){if(e=TH(n),e!==null){t.blockedOn=e,FH(t.priority,function(){$H(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function BA(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=I2(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);v2=r,n.target.dispatchEvent(r),v2=null}else return e=EC(n),e!==null&&J5(e),t.blockedOn=n,!1;e.shift()}return!0}function oB(t,e,n){BA(t)&&n.delete(e)}function Zae(){S2=!1,Ph!==null&&BA(Ph)&&(Ph=null),Oh!==null&&BA(Oh)&&(Oh=null),kh!==null&&BA(kh)&&(kh=null),CE.forEach(oB),AE.forEach(oB)}function xb(t,e){t.blockedOn===e&&(t.blockedOn=null,S2||(S2=!0,Fo.unstable_scheduleCallback(Fo.unstable_NormalPriority,Zae)))}function SE(t){function e(s){return xb(s,t)}if(0<I1.length){xb(I1[0],t);for(var n=1;n<I1.length;n++){var r=I1[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ph!==null&&xb(Ph,t),Oh!==null&&xb(Oh,t),kh!==null&&xb(kh,t),CE.forEach(e),AE.forEach(e),n=0;n<Fd.length;n++)r=Fd[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Fd.length&&(n=Fd[0],n.blockedOn===null);)jH(n),n.blockedOn===null&&Fd.shift()}var Oy=id.ReactCurrentBatchConfig,ZS=!0;function Xae(t,e,n,r){var s=An,i=Oy.transition;Oy.transition=null;try{An=1,Z5(t,e,n,r)}finally{An=s,Oy.transition=i}}function ece(t,e,n,r){var s=An,i=Oy.transition;Oy.transition=null;try{An=4,Z5(t,e,n,r)}finally{An=s,Oy.transition=i}}function Z5(t,e,n,r){if(ZS){var s=I2(t,e,n,r);if(s===null)lR(t,e,r,XS,n),iB(t,r);else if(Jae(s,t,e,n,r))r.stopPropagation();else if(iB(t,r),e&4&&-1<Qae.indexOf(t)){for(;s!==null;){var i=EC(s);if(i!==null&&UH(i),i=I2(t,e,n,r),i===null&&lR(t,e,r,XS,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else lR(t,e,r,null,n)}}var XS=null;function I2(t,e,n,r){if(XS=null,t=K5(r),t=op(t),t!==null)if(e=Gg(t),e===null)t=null;else if(n=e.tag,n===13){if(t=TH(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return XS=t,null}function zH(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jae()){case Y5:return 1;case kH:return 4;case QS:case zae:return 16;case DH:return 536870912;default:return 16}default:return 16}}var wh=null,X5=null,FA=null;function WH(){if(FA)return FA;var t,e=X5,n=e.length,r,s="value"in wh?wh.value:wh.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return FA=s.slice(t,1<r?1-r:void 0)}function jA(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function x1(){return!0}function aB(){return!1}function Ho(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?x1:aB,this.isPropagationStopped=aB,this}return fr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=x1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=x1)},persist:function(){},isPersistent:x1}),e}var z0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eL=Ho(z0),vC=fr({},z0,{view:0,detail:0}),tce=Ho(vC),eR,tR,Nb,Mx=fr({},vC,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tL,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Nb&&(Nb&&t.type==="mousemove"?(eR=t.screenX-Nb.screenX,tR=t.screenY-Nb.screenY):tR=eR=0,Nb=t),eR)},movementY:function(t){return"movementY"in t?t.movementY:tR}}),cB=Ho(Mx),nce=fr({},Mx,{dataTransfer:0}),rce=Ho(nce),sce=fr({},vC,{relatedTarget:0}),nR=Ho(sce),ice=fr({},z0,{animationName:0,elapsedTime:0,pseudoElement:0}),oce=Ho(ice),ace=fr({},z0,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cce=Ho(ace),lce=fr({},z0,{data:0}),lB=Ho(lce),uce={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dce={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hce={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fce(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hce[t])?!!e[t]:!1}function tL(){return fce}var pce=fr({},vC,{key:function(t){if(t.key){var e=uce[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=jA(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dce[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tL,charCode:function(t){return t.type==="keypress"?jA(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jA(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gce=Ho(pce),mce=fr({},Mx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uB=Ho(mce),yce=fr({},vC,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tL}),wce=Ho(yce),bce=fr({},z0,{propertyName:0,elapsedTime:0,pseudoElement:0}),vce=Ho(bce),Ece=fr({},Mx,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_ce=Ho(Ece),Cce=[9,13,27,32],nL=Vu&&"CompositionEvent"in window,Mv=null;Vu&&"documentMode"in document&&(Mv=document.documentMode);var Ace=Vu&&"TextEvent"in window&&!Mv,HH=Vu&&(!nL||Mv&&8<Mv&&11>=Mv),dB=" ",hB=!1;function GH(t,e){switch(t){case"keyup":return Cce.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qH(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var oy=!1;function Sce(t,e){switch(t){case"compositionend":return qH(e);case"keypress":return e.which!==32?null:(hB=!0,dB);case"textInput":return t=e.data,t===dB&&hB?null:t;default:return null}}function Ice(t,e){if(oy)return t==="compositionend"||!nL&&GH(t,e)?(t=WH(),FA=X5=wh=null,oy=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return HH&&e.locale!=="ko"?null:e.data;default:return null}}var xce={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fB(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!xce[t.type]:e==="textarea"}function VH(t,e,n,r){AH(r),e=eI(e,"onChange"),0<e.length&&(n=new eL("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Uv=null,IE=null;function Nce(t){sG(t,0)}function Ux(t){var e=ly(t);if(yH(e))return t}function Tce(t,e){if(t==="change")return e}var KH=!1;if(Vu){var rR;if(Vu){var sR="oninput"in document;if(!sR){var pB=document.createElement("div");pB.setAttribute("oninput","return;"),sR=typeof pB.oninput=="function"}rR=sR}else rR=!1;KH=rR&&(!document.documentMode||9<document.documentMode)}function gB(){Uv&&(Uv.detachEvent("onpropertychange",YH),IE=Uv=null)}function YH(t){if(t.propertyName==="value"&&Ux(IE)){var e=[];VH(e,IE,t,K5(t)),NH(Nce,e)}}function Rce(t,e,n){t==="focusin"?(gB(),Uv=e,IE=n,Uv.attachEvent("onpropertychange",YH)):t==="focusout"&&gB()}function Pce(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ux(IE)}function Oce(t,e){if(t==="click")return Ux(e)}function kce(t,e){if(t==="input"||t==="change")return Ux(e)}function Dce(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ac=typeof Object.is=="function"?Object.is:Dce;function xE(t,e){if(Ac(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!c2.call(e,s)||!Ac(t[s],e[s]))return!1}return!0}function mB(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yB(t,e){var n=mB(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mB(n)}}function QH(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?QH(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function JH(){for(var t=window,e=VS();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=VS(t.document)}return e}function rL(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Lce(t){var e=JH(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&QH(n.ownerDocument.documentElement,n)){if(r!==null&&rL(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=yB(n,i);var o=yB(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Mce=Vu&&"documentMode"in document&&11>=document.documentMode,ay=null,x2=null,$v=null,N2=!1;function wB(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;N2||ay==null||ay!==VS(r)||(r=ay,"selectionStart"in r&&rL(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$v&&xE($v,r)||($v=r,r=eI(x2,"onSelect"),0<r.length&&(e=new eL("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ay)))}function N1(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var cy={animationend:N1("Animation","AnimationEnd"),animationiteration:N1("Animation","AnimationIteration"),animationstart:N1("Animation","AnimationStart"),transitionend:N1("Transition","TransitionEnd")},iR={},ZH={};Vu&&(ZH=document.createElement("div").style,"AnimationEvent"in window||(delete cy.animationend.animation,delete cy.animationiteration.animation,delete cy.animationstart.animation),"TransitionEvent"in window||delete cy.transitionend.transition);function $x(t){if(iR[t])return iR[t];if(!cy[t])return t;var e=cy[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ZH)return iR[t]=e[n];return t}var XH=$x("animationend"),eG=$x("animationiteration"),tG=$x("animationstart"),nG=$x("transitionend"),rG=new Map,bB="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pf(t,e){rG.set(t,e),Hg(e,[t])}for(var oR=0;oR<bB.length;oR++){var aR=bB[oR],Uce=aR.toLowerCase(),$ce=aR[0].toUpperCase()+aR.slice(1);pf(Uce,"on"+$ce)}pf(XH,"onAnimationEnd");pf(eG,"onAnimationIteration");pf(tG,"onAnimationStart");pf("dblclick","onDoubleClick");pf("focusin","onFocus");pf("focusout","onBlur");pf(nG,"onTransitionEnd");Yw("onMouseEnter",["mouseout","mouseover"]);Yw("onMouseLeave",["mouseout","mouseover"]);Yw("onPointerEnter",["pointerout","pointerover"]);Yw("onPointerLeave",["pointerout","pointerover"]);Hg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hg("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bce=new Set("cancel close invalid load scroll toggle".split(" ").concat(cv));function vB(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Uae(r,e,void 0,t),t.currentTarget=null}function sG(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;vB(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;vB(s,a,l),i=c}}}if(YS)throw t=C2,YS=!1,C2=null,t}function Qn(t,e){var n=e[k2];n===void 0&&(n=e[k2]=new Set);var r=t+"__bubble";n.has(r)||(iG(e,t,2,!1),n.add(r))}function cR(t,e,n){var r=0;e&&(r|=4),iG(n,t,r,e)}var T1="_reactListening"+Math.random().toString(36).slice(2);function NE(t){if(!t[T1]){t[T1]=!0,hH.forEach(function(n){n!=="selectionchange"&&(Bce.has(n)||cR(n,!1,t),cR(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[T1]||(e[T1]=!0,cR("selectionchange",!1,e))}}function iG(t,e,n,r){switch(zH(e)){case 1:var s=Xae;break;case 4:s=ece;break;default:s=Z5}n=s.bind(null,e,n,t),s=void 0,!_2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function lR(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=op(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}NH(function(){var l=i,u=K5(n),d=[];e:{var h=rG.get(t);if(h!==void 0){var f=eL,p=t;switch(t){case"keypress":if(jA(n)===0)break e;case"keydown":case"keyup":f=gce;break;case"focusin":p="focus",f=nR;break;case"focusout":p="blur",f=nR;break;case"beforeblur":case"afterblur":f=nR;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=cB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=rce;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=wce;break;case XH:case eG:case tG:f=oce;break;case nG:f=vce;break;case"scroll":f=tce;break;case"wheel":f=_ce;break;case"copy":case"cut":case"paste":f=cce;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=uB}var g=(e&4)!==0,y=!g&&t==="scroll",m=g?h!==null?h+"Capture":null:h;g=[];for(var w=l,v;w!==null;){v=w;var A=v.stateNode;if(v.tag===5&&A!==null&&(v=A,m!==null&&(A=_E(w,m),A!=null&&g.push(TE(w,A,v)))),y)break;w=w.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==v2&&(p=n.relatedTarget||n.fromElement)&&(op(p)||p[Ku]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?op(p):null,p!==null&&(y=Gg(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=cB,A="onMouseLeave",m="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(g=uB,A="onPointerLeave",m="onPointerEnter",w="pointer"),y=f==null?h:ly(f),v=p==null?h:ly(p),h=new g(A,w+"leave",f,n,u),h.target=y,h.relatedTarget=v,A=null,op(u)===l&&(g=new g(m,w+"enter",p,n,u),g.target=v,g.relatedTarget=y,A=g),y=A,f&&p)t:{for(g=f,m=p,w=0,v=g;v;v=ym(v))w++;for(v=0,A=m;A;A=ym(A))v++;for(;0<w-v;)g=ym(g),w--;for(;0<v-w;)m=ym(m),v--;for(;w--;){if(g===m||m!==null&&g===m.alternate)break t;g=ym(g),m=ym(m)}g=null}else g=null;f!==null&&EB(d,h,f,g,!1),p!==null&&y!==null&&EB(d,y,p,g,!0)}}e:{if(h=l?ly(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var C=Tce;else if(fB(h))if(KH)C=kce;else{C=Pce;var S=Rce}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=Oce);if(C&&(C=C(t,l))){VH(d,C,n,u);break e}S&&S(t,h,l),t==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&g2(h,"number",h.value)}switch(S=l?ly(l):window,t){case"focusin":(fB(S)||S.contentEditable==="true")&&(ay=S,x2=l,$v=null);break;case"focusout":$v=x2=ay=null;break;case"mousedown":N2=!0;break;case"contextmenu":case"mouseup":case"dragend":N2=!1,wB(d,n,u);break;case"selectionchange":if(Mce)break;case"keydown":case"keyup":wB(d,n,u)}var x;if(nL)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else oy?GH(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(HH&&n.locale!=="ko"&&(oy||T!=="onCompositionStart"?T==="onCompositionEnd"&&oy&&(x=WH()):(wh=u,X5="value"in wh?wh.value:wh.textContent,oy=!0)),S=eI(l,T),0<S.length&&(T=new lB(T,t,null,n,u),d.push({event:T,listeners:S}),x?T.data=x:(x=qH(n),x!==null&&(T.data=x)))),(x=Ace?Sce(t,n):Ice(t,n))&&(l=eI(l,"onBeforeInput"),0<l.length&&(u=new lB("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=x))}sG(d,e)})}function TE(t,e,n){return{instance:t,listener:e,currentTarget:n}}function eI(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=_E(t,n),i!=null&&r.unshift(TE(t,i,s)),i=_E(t,e),i!=null&&r.push(TE(t,i,s))),t=t.return}return r}function ym(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function EB(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=_E(n,i),c!=null&&o.unshift(TE(n,c,a))):s||(c=_E(n,i),c!=null&&o.push(TE(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Fce=/\r\n?/g,jce=/\u0000|\uFFFD/g;function _B(t){return(typeof t=="string"?t:""+t).replace(Fce,`
`).replace(jce,"")}function R1(t,e,n){if(e=_B(e),_B(t)!==e&&n)throw Error(_e(425))}function tI(){}var T2=null,R2=null;function P2(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var O2=typeof setTimeout=="function"?setTimeout:void 0,zce=typeof clearTimeout=="function"?clearTimeout:void 0,CB=typeof Promise=="function"?Promise:void 0,Wce=typeof queueMicrotask=="function"?queueMicrotask:typeof CB<"u"?function(t){return CB.resolve(null).then(t).catch(Hce)}:O2;function Hce(t){setTimeout(function(){throw t})}function uR(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),SE(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);SE(e)}function Dh(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function AB(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var W0=Math.random().toString(36).slice(2),pl="__reactFiber$"+W0,RE="__reactProps$"+W0,Ku="__reactContainer$"+W0,k2="__reactEvents$"+W0,Gce="__reactListeners$"+W0,qce="__reactHandles$"+W0;function op(t){var e=t[pl];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ku]||n[pl]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=AB(t);t!==null;){if(n=t[pl])return n;t=AB(t)}return e}t=n,n=t.parentNode}return null}function EC(t){return t=t[pl]||t[Ku],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ly(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(_e(33))}function Bx(t){return t[RE]||null}var D2=[],uy=-1;function gf(t){return{current:t}}function Xn(t){0>uy||(t.current=D2[uy],D2[uy]=null,uy--)}function Kn(t,e){uy++,D2[uy]=t.current,t.current=e}var tf={},Zs=gf(tf),to=gf(!1),ug=tf;function Qw(t,e){var n=t.type.contextTypes;if(!n)return tf;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function no(t){return t=t.childContextTypes,t!=null}function nI(){Xn(to),Xn(Zs)}function SB(t,e,n){if(Zs.current!==tf)throw Error(_e(168));Kn(Zs,e),Kn(to,n)}function oG(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(_e(108,Rae(t)||"Unknown",s));return fr({},n,r)}function rI(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||tf,ug=Zs.current,Kn(Zs,t),Kn(to,to.current),!0}function IB(t,e,n){var r=t.stateNode;if(!r)throw Error(_e(169));n?(t=oG(t,e,ug),r.__reactInternalMemoizedMergedChildContext=t,Xn(to),Xn(Zs),Kn(Zs,t)):Xn(to),Kn(to,n)}var lu=null,Fx=!1,dR=!1;function aG(t){lu===null?lu=[t]:lu.push(t)}function Vce(t){Fx=!0,aG(t)}function mf(){if(!dR&&lu!==null){dR=!0;var t=0,e=An;try{var n=lu;for(An=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}lu=null,Fx=!1}catch(s){throw lu!==null&&(lu=lu.slice(t+1)),OH(Y5,mf),s}finally{An=e,dR=!1}}return null}var dy=[],hy=0,sI=null,iI=0,va=[],Ea=0,dg=null,Ru=1,Pu="";function Bf(t,e){dy[hy++]=iI,dy[hy++]=sI,sI=t,iI=e}function cG(t,e,n){va[Ea++]=Ru,va[Ea++]=Pu,va[Ea++]=dg,dg=t;var r=Ru;t=Pu;var s=32-vc(r)-1;r&=~(1<<s),n+=1;var i=32-vc(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ru=1<<32-vc(e)+s|n<<s|r,Pu=i+t}else Ru=1<<i|n<<s|r,Pu=t}function sL(t){t.return!==null&&(Bf(t,1),cG(t,1,0))}function iL(t){for(;t===sI;)sI=dy[--hy],dy[hy]=null,iI=dy[--hy],dy[hy]=null;for(;t===dg;)dg=va[--Ea],va[Ea]=null,Pu=va[--Ea],va[Ea]=null,Ru=va[--Ea],va[Ea]=null}var Uo=null,Do=null,sr=!1,ac=null;function lG(t,e){var n=_a(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function xB(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Uo=t,Do=Dh(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Uo=t,Do=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=dg!==null?{id:Ru,overflow:Pu}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=_a(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Uo=t,Do=null,!0):!1;default:return!1}}function L2(t){return(t.mode&1)!==0&&(t.flags&128)===0}function M2(t){if(sr){var e=Do;if(e){var n=e;if(!xB(t,e)){if(L2(t))throw Error(_e(418));e=Dh(n.nextSibling);var r=Uo;e&&xB(t,e)?lG(r,n):(t.flags=t.flags&-4097|2,sr=!1,Uo=t)}}else{if(L2(t))throw Error(_e(418));t.flags=t.flags&-4097|2,sr=!1,Uo=t}}}function NB(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Uo=t}function P1(t){if(t!==Uo)return!1;if(!sr)return NB(t),sr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!P2(t.type,t.memoizedProps)),e&&(e=Do)){if(L2(t))throw uG(),Error(_e(418));for(;e;)lG(t,e),e=Dh(e.nextSibling)}if(NB(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(_e(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Do=Dh(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Do=null}}else Do=Uo?Dh(t.stateNode.nextSibling):null;return!0}function uG(){for(var t=Do;t;)t=Dh(t.nextSibling)}function Jw(){Do=Uo=null,sr=!1}function oL(t){ac===null?ac=[t]:ac.push(t)}var Kce=id.ReactCurrentBatchConfig;function Tb(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(_e(309));var r=n.stateNode}if(!r)throw Error(_e(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(_e(284));if(!n._owner)throw Error(_e(290,t))}return t}function O1(t,e){throw t=Object.prototype.toString.call(e),Error(_e(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function TB(t){var e=t._init;return e(t._payload)}function dG(t){function e(m,w){if(t){var v=m.deletions;v===null?(m.deletions=[w],m.flags|=16):v.push(w)}}function n(m,w){if(!t)return null;for(;w!==null;)e(m,w),w=w.sibling;return null}function r(m,w){for(m=new Map;w!==null;)w.key!==null?m.set(w.key,w):m.set(w.index,w),w=w.sibling;return m}function s(m,w){return m=$h(m,w),m.index=0,m.sibling=null,m}function i(m,w,v){return m.index=v,t?(v=m.alternate,v!==null?(v=v.index,v<w?(m.flags|=2,w):v):(m.flags|=2,w)):(m.flags|=1048576,w)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,w,v,A){return w===null||w.tag!==6?(w=wR(v,m.mode,A),w.return=m,w):(w=s(w,v),w.return=m,w)}function c(m,w,v,A){var C=v.type;return C===iy?u(m,w,v.props.children,A,v.key):w!==null&&(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Dd&&TB(C)===w.type)?(A=s(w,v.props),A.ref=Tb(m,w,v),A.return=m,A):(A=KA(v.type,v.key,v.props,null,m.mode,A),A.ref=Tb(m,w,v),A.return=m,A)}function l(m,w,v,A){return w===null||w.tag!==4||w.stateNode.containerInfo!==v.containerInfo||w.stateNode.implementation!==v.implementation?(w=bR(v,m.mode,A),w.return=m,w):(w=s(w,v.children||[]),w.return=m,w)}function u(m,w,v,A,C){return w===null||w.tag!==7?(w=Jp(v,m.mode,A,C),w.return=m,w):(w=s(w,v),w.return=m,w)}function d(m,w,v){if(typeof w=="string"&&w!==""||typeof w=="number")return w=wR(""+w,m.mode,v),w.return=m,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case E1:return v=KA(w.type,w.key,w.props,null,m.mode,v),v.ref=Tb(m,null,w),v.return=m,v;case sy:return w=bR(w,m.mode,v),w.return=m,w;case Dd:var A=w._init;return d(m,A(w._payload),v)}if(ov(w)||Ab(w))return w=Jp(w,m.mode,v,null),w.return=m,w;O1(m,w)}return null}function h(m,w,v,A){var C=w!==null?w.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return C!==null?null:a(m,w,""+v,A);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case E1:return v.key===C?c(m,w,v,A):null;case sy:return v.key===C?l(m,w,v,A):null;case Dd:return C=v._init,h(m,w,C(v._payload),A)}if(ov(v)||Ab(v))return C!==null?null:u(m,w,v,A,null);O1(m,v)}return null}function f(m,w,v,A,C){if(typeof A=="string"&&A!==""||typeof A=="number")return m=m.get(v)||null,a(w,m,""+A,C);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case E1:return m=m.get(A.key===null?v:A.key)||null,c(w,m,A,C);case sy:return m=m.get(A.key===null?v:A.key)||null,l(w,m,A,C);case Dd:var S=A._init;return f(m,w,v,S(A._payload),C)}if(ov(A)||Ab(A))return m=m.get(v)||null,u(w,m,A,C,null);O1(w,A)}return null}function p(m,w,v,A){for(var C=null,S=null,x=w,T=w=0,I=null;x!==null&&T<v.length;T++){x.index>T?(I=x,x=null):I=x.sibling;var k=h(m,x,v[T],A);if(k===null){x===null&&(x=I);break}t&&x&&k.alternate===null&&e(m,x),w=i(k,w,T),S===null?C=k:S.sibling=k,S=k,x=I}if(T===v.length)return n(m,x),sr&&Bf(m,T),C;if(x===null){for(;T<v.length;T++)x=d(m,v[T],A),x!==null&&(w=i(x,w,T),S===null?C=x:S.sibling=x,S=x);return sr&&Bf(m,T),C}for(x=r(m,x);T<v.length;T++)I=f(x,m,T,v[T],A),I!==null&&(t&&I.alternate!==null&&x.delete(I.key===null?T:I.key),w=i(I,w,T),S===null?C=I:S.sibling=I,S=I);return t&&x.forEach(function(O){return e(m,O)}),sr&&Bf(m,T),C}function g(m,w,v,A){var C=Ab(v);if(typeof C!="function")throw Error(_e(150));if(v=C.call(v),v==null)throw Error(_e(151));for(var S=C=null,x=w,T=w=0,I=null,k=v.next();x!==null&&!k.done;T++,k=v.next()){x.index>T?(I=x,x=null):I=x.sibling;var O=h(m,x,k.value,A);if(O===null){x===null&&(x=I);break}t&&x&&O.alternate===null&&e(m,x),w=i(O,w,T),S===null?C=O:S.sibling=O,S=O,x=I}if(k.done)return n(m,x),sr&&Bf(m,T),C;if(x===null){for(;!k.done;T++,k=v.next())k=d(m,k.value,A),k!==null&&(w=i(k,w,T),S===null?C=k:S.sibling=k,S=k);return sr&&Bf(m,T),C}for(x=r(m,x);!k.done;T++,k=v.next())k=f(x,m,T,k.value,A),k!==null&&(t&&k.alternate!==null&&x.delete(k.key===null?T:k.key),w=i(k,w,T),S===null?C=k:S.sibling=k,S=k);return t&&x.forEach(function(B){return e(m,B)}),sr&&Bf(m,T),C}function y(m,w,v,A){if(typeof v=="object"&&v!==null&&v.type===iy&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case E1:e:{for(var C=v.key,S=w;S!==null;){if(S.key===C){if(C=v.type,C===iy){if(S.tag===7){n(m,S.sibling),w=s(S,v.props.children),w.return=m,m=w;break e}}else if(S.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Dd&&TB(C)===S.type){n(m,S.sibling),w=s(S,v.props),w.ref=Tb(m,S,v),w.return=m,m=w;break e}n(m,S);break}else e(m,S);S=S.sibling}v.type===iy?(w=Jp(v.props.children,m.mode,A,v.key),w.return=m,m=w):(A=KA(v.type,v.key,v.props,null,m.mode,A),A.ref=Tb(m,w,v),A.return=m,m=A)}return o(m);case sy:e:{for(S=v.key;w!==null;){if(w.key===S)if(w.tag===4&&w.stateNode.containerInfo===v.containerInfo&&w.stateNode.implementation===v.implementation){n(m,w.sibling),w=s(w,v.children||[]),w.return=m,m=w;break e}else{n(m,w);break}else e(m,w);w=w.sibling}w=bR(v,m.mode,A),w.return=m,m=w}return o(m);case Dd:return S=v._init,y(m,w,S(v._payload),A)}if(ov(v))return p(m,w,v,A);if(Ab(v))return g(m,w,v,A);O1(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,w!==null&&w.tag===6?(n(m,w.sibling),w=s(w,v),w.return=m,m=w):(n(m,w),w=wR(v,m.mode,A),w.return=m,m=w),o(m)):n(m,w)}return y}var Zw=dG(!0),hG=dG(!1),oI=gf(null),aI=null,fy=null,aL=null;function cL(){aL=fy=aI=null}function lL(t){var e=oI.current;Xn(oI),t._currentValue=e}function U2(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ky(t,e){aI=t,aL=fy=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zi=!0),t.firstContext=null)}function Sa(t){var e=t._currentValue;if(aL!==t)if(t={context:t,memoizedValue:e,next:null},fy===null){if(aI===null)throw Error(_e(308));fy=t,aI.dependencies={lanes:0,firstContext:t}}else fy=fy.next=t;return e}var ap=null;function uL(t){ap===null?ap=[t]:ap.push(t)}function fG(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,uL(e)):(n.next=s.next,s.next=n),e.interleaved=n,Yu(t,r)}function Yu(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ld=!1;function dL(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pG(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mu(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lh(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,en&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Yu(t,n)}return s=r.interleaved,s===null?(e.next=e,uL(r)):(e.next=s.next,s.next=e),r.interleaved=e,Yu(t,n)}function zA(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Q5(t,n)}}function RB(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function cI(t,e,n,r){var s=t.updateQueue;Ld=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=fr({},d,h);break e;case 2:Ld=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);fg|=o,t.lanes=o,t.memoizedState=d}}function PB(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(_e(191,s));s.call(r)}}}var _C={},Cl=gf(_C),PE=gf(_C),OE=gf(_C);function cp(t){if(t===_C)throw Error(_e(174));return t}function hL(t,e){switch(Kn(OE,e),Kn(PE,t),Kn(Cl,_C),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:y2(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=y2(e,t)}Xn(Cl),Kn(Cl,e)}function Xw(){Xn(Cl),Xn(PE),Xn(OE)}function gG(t){cp(OE.current);var e=cp(Cl.current),n=y2(e,t.type);e!==n&&(Kn(PE,t),Kn(Cl,n))}function fL(t){PE.current===t&&(Xn(Cl),Xn(PE))}var cr=gf(0);function lI(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hR=[];function pL(){for(var t=0;t<hR.length;t++)hR[t]._workInProgressVersionPrimary=null;hR.length=0}var WA=id.ReactCurrentDispatcher,fR=id.ReactCurrentBatchConfig,hg=0,hr=null,Br=null,ss=null,uI=!1,Bv=!1,kE=0,Yce=0;function Fs(){throw Error(_e(321))}function gL(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ac(t[n],e[n]))return!1;return!0}function mL(t,e,n,r,s,i){if(hg=i,hr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,WA.current=t===null||t.memoizedState===null?Xce:ele,t=n(r,s),Bv){i=0;do{if(Bv=!1,kE=0,25<=i)throw Error(_e(301));i+=1,ss=Br=null,e.updateQueue=null,WA.current=tle,t=n(r,s)}while(Bv)}if(WA.current=dI,e=Br!==null&&Br.next!==null,hg=0,ss=Br=hr=null,uI=!1,e)throw Error(_e(300));return t}function yL(){var t=kE!==0;return kE=0,t}function qc(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ss===null?hr.memoizedState=ss=t:ss=ss.next=t,ss}function Ia(){if(Br===null){var t=hr.alternate;t=t!==null?t.memoizedState:null}else t=Br.next;var e=ss===null?hr.memoizedState:ss.next;if(e!==null)ss=e,Br=t;else{if(t===null)throw Error(_e(310));Br=t,t={memoizedState:Br.memoizedState,baseState:Br.baseState,baseQueue:Br.baseQueue,queue:Br.queue,next:null},ss===null?hr.memoizedState=ss=t:ss=ss.next=t}return ss}function DE(t,e){return typeof e=="function"?e(t):e}function pR(t){var e=Ia(),n=e.queue;if(n===null)throw Error(_e(311));n.lastRenderedReducer=t;var r=Br,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((hg&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,hr.lanes|=u,fg|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,Ac(r,e.memoizedState)||(Zi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,hr.lanes|=i,fg|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function gR(t){var e=Ia(),n=e.queue;if(n===null)throw Error(_e(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Ac(i,e.memoizedState)||(Zi=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function mG(){}function yG(t,e){var n=hr,r=Ia(),s=e(),i=!Ac(r.memoizedState,s);if(i&&(r.memoizedState=s,Zi=!0),r=r.queue,wL(vG.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ss!==null&&ss.memoizedState.tag&1){if(n.flags|=2048,LE(9,bG.bind(null,n,r,s,e),void 0,null),fs===null)throw Error(_e(349));hg&30||wG(n,e,s)}return s}function wG(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=hr.updateQueue,e===null?(e={lastEffect:null,stores:null},hr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function bG(t,e,n,r){e.value=n,e.getSnapshot=r,EG(e)&&_G(t)}function vG(t,e,n){return n(function(){EG(e)&&_G(t)})}function EG(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ac(t,n)}catch{return!0}}function _G(t){var e=Yu(t,1);e!==null&&Ec(e,t,1,-1)}function OB(t){var e=qc();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:DE,lastRenderedState:t},e.queue=t,t=t.dispatch=Zce.bind(null,hr,t),[e.memoizedState,t]}function LE(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=hr.updateQueue,e===null?(e={lastEffect:null,stores:null},hr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function CG(){return Ia().memoizedState}function HA(t,e,n,r){var s=qc();hr.flags|=t,s.memoizedState=LE(1|e,n,void 0,r===void 0?null:r)}function jx(t,e,n,r){var s=Ia();r=r===void 0?null:r;var i=void 0;if(Br!==null){var o=Br.memoizedState;if(i=o.destroy,r!==null&&gL(r,o.deps)){s.memoizedState=LE(e,n,i,r);return}}hr.flags|=t,s.memoizedState=LE(1|e,n,i,r)}function kB(t,e){return HA(8390656,8,t,e)}function wL(t,e){return jx(2048,8,t,e)}function AG(t,e){return jx(4,2,t,e)}function SG(t,e){return jx(4,4,t,e)}function IG(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function xG(t,e,n){return n=n!=null?n.concat([t]):null,jx(4,4,IG.bind(null,e,t),n)}function bL(){}function NG(t,e){var n=Ia();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gL(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function TG(t,e){var n=Ia();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gL(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function RG(t,e,n){return hg&21?(Ac(n,e)||(n=LH(),hr.lanes|=n,fg|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zi=!0),t.memoizedState=n)}function Qce(t,e){var n=An;An=n!==0&&4>n?n:4,t(!0);var r=fR.transition;fR.transition={};try{t(!1),e()}finally{An=n,fR.transition=r}}function PG(){return Ia().memoizedState}function Jce(t,e,n){var r=Uh(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},OG(t))kG(e,n);else if(n=fG(t,e,n,r),n!==null){var s=bi();Ec(n,t,r,s),DG(n,e,r)}}function Zce(t,e,n){var r=Uh(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(OG(t))kG(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ac(a,o)){var c=e.interleaved;c===null?(s.next=s,uL(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=fG(t,e,s,r),n!==null&&(s=bi(),Ec(n,t,r,s),DG(n,e,r))}}function OG(t){var e=t.alternate;return t===hr||e!==null&&e===hr}function kG(t,e){Bv=uI=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function DG(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Q5(t,n)}}var dI={readContext:Sa,useCallback:Fs,useContext:Fs,useEffect:Fs,useImperativeHandle:Fs,useInsertionEffect:Fs,useLayoutEffect:Fs,useMemo:Fs,useReducer:Fs,useRef:Fs,useState:Fs,useDebugValue:Fs,useDeferredValue:Fs,useTransition:Fs,useMutableSource:Fs,useSyncExternalStore:Fs,useId:Fs,unstable_isNewReconciler:!1},Xce={readContext:Sa,useCallback:function(t,e){return qc().memoizedState=[t,e===void 0?null:e],t},useContext:Sa,useEffect:kB,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,HA(4194308,4,IG.bind(null,e,t),n)},useLayoutEffect:function(t,e){return HA(4194308,4,t,e)},useInsertionEffect:function(t,e){return HA(4,2,t,e)},useMemo:function(t,e){var n=qc();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=qc();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Jce.bind(null,hr,t),[r.memoizedState,t]},useRef:function(t){var e=qc();return t={current:t},e.memoizedState=t},useState:OB,useDebugValue:bL,useDeferredValue:function(t){return qc().memoizedState=t},useTransition:function(){var t=OB(!1),e=t[0];return t=Qce.bind(null,t[1]),qc().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=hr,s=qc();if(sr){if(n===void 0)throw Error(_e(407));n=n()}else{if(n=e(),fs===null)throw Error(_e(349));hg&30||wG(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,kB(vG.bind(null,r,i,t),[t]),r.flags|=2048,LE(9,bG.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=qc(),e=fs.identifierPrefix;if(sr){var n=Pu,r=Ru;n=(r&~(1<<32-vc(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=kE++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Yce++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ele={readContext:Sa,useCallback:NG,useContext:Sa,useEffect:wL,useImperativeHandle:xG,useInsertionEffect:AG,useLayoutEffect:SG,useMemo:TG,useReducer:pR,useRef:CG,useState:function(){return pR(DE)},useDebugValue:bL,useDeferredValue:function(t){var e=Ia();return RG(e,Br.memoizedState,t)},useTransition:function(){var t=pR(DE)[0],e=Ia().memoizedState;return[t,e]},useMutableSource:mG,useSyncExternalStore:yG,useId:PG,unstable_isNewReconciler:!1},tle={readContext:Sa,useCallback:NG,useContext:Sa,useEffect:wL,useImperativeHandle:xG,useInsertionEffect:AG,useLayoutEffect:SG,useMemo:TG,useReducer:gR,useRef:CG,useState:function(){return gR(DE)},useDebugValue:bL,useDeferredValue:function(t){var e=Ia();return Br===null?e.memoizedState=t:RG(e,Br.memoizedState,t)},useTransition:function(){var t=gR(DE)[0],e=Ia().memoizedState;return[t,e]},useMutableSource:mG,useSyncExternalStore:yG,useId:PG,unstable_isNewReconciler:!1};function Qa(t,e){if(t&&t.defaultProps){e=fr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function $2(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:fr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var zx={isMounted:function(t){return(t=t._reactInternals)?Gg(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=bi(),s=Uh(t),i=Mu(r,s);i.payload=e,n!=null&&(i.callback=n),e=Lh(t,i,s),e!==null&&(Ec(e,t,s,r),zA(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=bi(),s=Uh(t),i=Mu(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Lh(t,i,s),e!==null&&(Ec(e,t,s,r),zA(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=bi(),r=Uh(t),s=Mu(n,r);s.tag=2,e!=null&&(s.callback=e),e=Lh(t,s,r),e!==null&&(Ec(e,t,r,n),zA(e,t,r))}};function DB(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!xE(n,r)||!xE(s,i):!0}function LG(t,e,n){var r=!1,s=tf,i=e.contextType;return typeof i=="object"&&i!==null?i=Sa(i):(s=no(e)?ug:Zs.current,r=e.contextTypes,i=(r=r!=null)?Qw(t,s):tf),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zx,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function LB(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&zx.enqueueReplaceState(e,e.state,null)}function B2(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},dL(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Sa(i):(i=no(e)?ug:Zs.current,s.context=Qw(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&($2(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&zx.enqueueReplaceState(s,s.state,null),cI(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function e0(t,e){try{var n="",r=e;do n+=Tae(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function mR(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function F2(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var nle=typeof WeakMap=="function"?WeakMap:Map;function MG(t,e,n){n=Mu(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){fI||(fI=!0,Q2=r),F2(t,e)},n}function UG(t,e,n){n=Mu(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){F2(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){F2(t,e),typeof r!="function"&&(Mh===null?Mh=new Set([this]):Mh.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function MB(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new nle;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=mle.bind(null,t,e,n),e.then(t,t))}function UB(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $B(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mu(-1,1),e.tag=2,Lh(n,e,1))),n.lanes|=1),t)}var rle=id.ReactCurrentOwner,Zi=!1;function ci(t,e,n,r){e.child=t===null?hG(e,null,n,r):Zw(e,t.child,n,r)}function BB(t,e,n,r,s){n=n.render;var i=e.ref;return ky(e,s),r=mL(t,e,n,r,i,s),n=yL(),t!==null&&!Zi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qu(t,e,s)):(sr&&n&&sL(e),e.flags|=1,ci(t,e,r,s),e.child)}function FB(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!xL(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,$G(t,e,i,r,s)):(t=KA(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:xE,n(o,r)&&t.ref===e.ref)return Qu(t,e,s)}return e.flags|=1,t=$h(i,r),t.ref=e.ref,t.return=e,e.child=t}function $G(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(xE(i,r)&&t.ref===e.ref)if(Zi=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Zi=!0);else return e.lanes=t.lanes,Qu(t,e,s)}return j2(t,e,n,r,s)}function BG(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kn(gy,To),To|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Kn(gy,To),To|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Kn(gy,To),To|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Kn(gy,To),To|=r;return ci(t,e,s,n),e.child}function FG(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function j2(t,e,n,r,s){var i=no(n)?ug:Zs.current;return i=Qw(e,i),ky(e,s),n=mL(t,e,n,r,i,s),r=yL(),t!==null&&!Zi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qu(t,e,s)):(sr&&r&&sL(e),e.flags|=1,ci(t,e,n,s),e.child)}function jB(t,e,n,r,s){if(no(n)){var i=!0;rI(e)}else i=!1;if(ky(e,s),e.stateNode===null)GA(t,e),LG(e,n,r),B2(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Sa(l):(l=no(n)?ug:Zs.current,l=Qw(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&LB(e,o,r,l),Ld=!1;var h=e.memoizedState;o.state=h,cI(e,r,o,s),c=e.memoizedState,a!==r||h!==c||to.current||Ld?(typeof u=="function"&&($2(e,n,u,r),c=e.memoizedState),(a=Ld||DB(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,pG(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:Qa(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Sa(c):(c=no(n)?ug:Zs.current,c=Qw(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&LB(e,o,r,c),Ld=!1,h=e.memoizedState,o.state=h,cI(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||to.current||Ld?(typeof f=="function"&&($2(e,n,f,r),p=e.memoizedState),(l=Ld||DB(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return z2(t,e,n,r,i,s)}function z2(t,e,n,r,s,i){FG(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&IB(e,n,!1),Qu(t,e,i);r=e.stateNode,rle.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Zw(e,t.child,null,i),e.child=Zw(e,null,a,i)):ci(t,e,a,i),e.memoizedState=r.state,s&&IB(e,n,!0),e.child}function jG(t){var e=t.stateNode;e.pendingContext?SB(t,e.pendingContext,e.pendingContext!==e.context):e.context&&SB(t,e.context,!1),hL(t,e.containerInfo)}function zB(t,e,n,r,s){return Jw(),oL(s),e.flags|=256,ci(t,e,n,r),e.child}var W2={dehydrated:null,treeContext:null,retryLane:0};function H2(t){return{baseLanes:t,cachePool:null,transitions:null}}function zG(t,e,n){var r=e.pendingProps,s=cr.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Kn(cr,s&1),t===null)return M2(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Gx(o,r,0,null),t=Jp(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=H2(n),e.memoizedState=W2,t):vL(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return sle(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=$h(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=$h(a,i):(i=Jp(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?H2(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=W2,r}return i=t.child,t=i.sibling,r=$h(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function vL(t,e){return e=Gx({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function k1(t,e,n,r){return r!==null&&oL(r),Zw(e,t.child,null,n),t=vL(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sle(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=mR(Error(_e(422))),k1(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Gx({mode:"visible",children:r.children},s,0,null),i=Jp(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Zw(e,t.child,null,o),e.child.memoizedState=H2(o),e.memoizedState=W2,i);if(!(e.mode&1))return k1(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(_e(419)),r=mR(i,r,void 0),k1(t,e,o,r)}if(a=(o&t.childLanes)!==0,Zi||a){if(r=fs,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Yu(t,s),Ec(r,t,s,-1))}return IL(),r=mR(Error(_e(421))),k1(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=yle.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Do=Dh(s.nextSibling),Uo=e,sr=!0,ac=null,t!==null&&(va[Ea++]=Ru,va[Ea++]=Pu,va[Ea++]=dg,Ru=t.id,Pu=t.overflow,dg=e),e=vL(e,r.children),e.flags|=4096,e)}function WB(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),U2(t.return,e,n)}function yR(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function WG(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ci(t,e,r.children,n),r=cr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&WB(t,n,e);else if(t.tag===19)WB(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Kn(cr,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&lI(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),yR(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&lI(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}yR(e,!0,n,null,i);break;case"together":yR(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function GA(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qu(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),fg|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(_e(153));if(e.child!==null){for(t=e.child,n=$h(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$h(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ile(t,e,n){switch(e.tag){case 3:jG(e),Jw();break;case 5:gG(e);break;case 1:no(e.type)&&rI(e);break;case 4:hL(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Kn(oI,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Kn(cr,cr.current&1),e.flags|=128,null):n&e.child.childLanes?zG(t,e,n):(Kn(cr,cr.current&1),t=Qu(t,e,n),t!==null?t.sibling:null);Kn(cr,cr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return WG(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Kn(cr,cr.current),r)break;return null;case 22:case 23:return e.lanes=0,BG(t,e,n)}return Qu(t,e,n)}var HG,G2,GG,qG;HG=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};G2=function(){};GG=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,cp(Cl.current);var i=null;switch(n){case"input":s=f2(t,s),r=f2(t,r),i=[];break;case"select":s=fr({},s,{value:void 0}),r=fr({},r,{value:void 0}),i=[];break;case"textarea":s=m2(t,s),r=m2(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=tI)}w2(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(vE.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(vE.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Qn("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};qG=function(t,e,n,r){n!==r&&(e.flags|=4)};function Rb(t,e){if(!sr)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function js(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ole(t,e,n){var r=e.pendingProps;switch(iL(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return js(e),null;case 1:return no(e.type)&&nI(),js(e),null;case 3:return r=e.stateNode,Xw(),Xn(to),Xn(Zs),pL(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(P1(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ac!==null&&(X2(ac),ac=null))),G2(t,e),js(e),null;case 5:fL(e);var s=cp(OE.current);if(n=e.type,t!==null&&e.stateNode!=null)GG(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(_e(166));return js(e),null}if(t=cp(Cl.current),P1(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[pl]=e,r[RE]=i,t=(e.mode&1)!==0,n){case"dialog":Qn("cancel",r),Qn("close",r);break;case"iframe":case"object":case"embed":Qn("load",r);break;case"video":case"audio":for(s=0;s<cv.length;s++)Qn(cv[s],r);break;case"source":Qn("error",r);break;case"img":case"image":case"link":Qn("error",r),Qn("load",r);break;case"details":Qn("toggle",r);break;case"input":Z$(r,i),Qn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Qn("invalid",r);break;case"textarea":eB(r,i),Qn("invalid",r)}w2(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&R1(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&R1(r.textContent,a,t),s=["children",""+a]):vE.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Qn("scroll",r)}switch(n){case"input":_1(r),X$(r,i,!0);break;case"textarea":_1(r),tB(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=tI)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vH(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[pl]=e,t[RE]=r,HG(t,e,!1,!1),e.stateNode=t;e:{switch(o=b2(n,r),n){case"dialog":Qn("cancel",t),Qn("close",t),s=r;break;case"iframe":case"object":case"embed":Qn("load",t),s=r;break;case"video":case"audio":for(s=0;s<cv.length;s++)Qn(cv[s],t);s=r;break;case"source":Qn("error",t),s=r;break;case"img":case"image":case"link":Qn("error",t),Qn("load",t),s=r;break;case"details":Qn("toggle",t),s=r;break;case"input":Z$(t,r),s=f2(t,r),Qn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=fr({},r,{value:void 0}),Qn("invalid",t);break;case"textarea":eB(t,r),s=m2(t,r),Qn("invalid",t);break;default:s=r}w2(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?CH(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&EH(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&EE(t,c):typeof c=="number"&&EE(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(vE.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Qn("scroll",t):c!=null&&H5(t,i,c,o))}switch(n){case"input":_1(t),X$(t,r,!1);break;case"textarea":_1(t),tB(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ef(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ty(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ty(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=tI)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return js(e),null;case 6:if(t&&e.stateNode!=null)qG(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(_e(166));if(n=cp(OE.current),cp(Cl.current),P1(e)){if(r=e.stateNode,n=e.memoizedProps,r[pl]=e,(i=r.nodeValue!==n)&&(t=Uo,t!==null))switch(t.tag){case 3:R1(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&R1(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pl]=e,e.stateNode=r}return js(e),null;case 13:if(Xn(cr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(sr&&Do!==null&&e.mode&1&&!(e.flags&128))uG(),Jw(),e.flags|=98560,i=!1;else if(i=P1(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(_e(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(_e(317));i[pl]=e}else Jw(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;js(e),i=!1}else ac!==null&&(X2(ac),ac=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||cr.current&1?Hr===0&&(Hr=3):IL())),e.updateQueue!==null&&(e.flags|=4),js(e),null);case 4:return Xw(),G2(t,e),t===null&&NE(e.stateNode.containerInfo),js(e),null;case 10:return lL(e.type._context),js(e),null;case 17:return no(e.type)&&nI(),js(e),null;case 19:if(Xn(cr),i=e.memoizedState,i===null)return js(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Rb(i,!1);else{if(Hr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=lI(t),o!==null){for(e.flags|=128,Rb(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Kn(cr,cr.current&1|2),e.child}t=t.sibling}i.tail!==null&&Sr()>t0&&(e.flags|=128,r=!0,Rb(i,!1),e.lanes=4194304)}else{if(!r)if(t=lI(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Rb(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!sr)return js(e),null}else 2*Sr()-i.renderingStartTime>t0&&n!==1073741824&&(e.flags|=128,r=!0,Rb(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Sr(),e.sibling=null,n=cr.current,Kn(cr,r?n&1|2:n&1),e):(js(e),null);case 22:case 23:return SL(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?To&1073741824&&(js(e),e.subtreeFlags&6&&(e.flags|=8192)):js(e),null;case 24:return null;case 25:return null}throw Error(_e(156,e.tag))}function ale(t,e){switch(iL(e),e.tag){case 1:return no(e.type)&&nI(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xw(),Xn(to),Xn(Zs),pL(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return fL(e),null;case 13:if(Xn(cr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(_e(340));Jw()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Xn(cr),null;case 4:return Xw(),null;case 10:return lL(e.type._context),null;case 22:case 23:return SL(),null;case 24:return null;default:return null}}var D1=!1,Qs=!1,cle=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function py(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){wr(t,e,r)}else n.current=null}function q2(t,e,n){try{n()}catch(r){wr(t,e,r)}}var HB=!1;function lle(t,e){if(T2=ZS,t=JH(),rL(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(R2={focusedElem:t,selectionRange:n},ZS=!1,Ye=e;Ye!==null;)if(e=Ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ye=t;else for(;Ye!==null;){e=Ye;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,y=p.memoizedState,m=e.stateNode,w=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:Qa(e.type,g),y);m.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_e(163))}}catch(A){wr(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,Ye=t;break}Ye=e.return}return p=HB,HB=!1,p}function Fv(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&q2(e,n,i)}s=s.next}while(s!==r)}}function Wx(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function V2(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function VG(t){var e=t.alternate;e!==null&&(t.alternate=null,VG(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pl],delete e[RE],delete e[k2],delete e[Gce],delete e[qce])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function KG(t){return t.tag===5||t.tag===3||t.tag===4}function GB(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||KG(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function K2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=tI));else if(r!==4&&(t=t.child,t!==null))for(K2(t,e,n),t=t.sibling;t!==null;)K2(t,e,n),t=t.sibling}function Y2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Y2(t,e,n),t=t.sibling;t!==null;)Y2(t,e,n),t=t.sibling}var Ss=null,oc=!1;function ud(t,e,n){for(n=n.child;n!==null;)YG(t,e,n),n=n.sibling}function YG(t,e,n){if(_l&&typeof _l.onCommitFiberUnmount=="function")try{_l.onCommitFiberUnmount(Lx,n)}catch{}switch(n.tag){case 5:Qs||py(n,e);case 6:var r=Ss,s=oc;Ss=null,ud(t,e,n),Ss=r,oc=s,Ss!==null&&(oc?(t=Ss,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ss.removeChild(n.stateNode));break;case 18:Ss!==null&&(oc?(t=Ss,n=n.stateNode,t.nodeType===8?uR(t.parentNode,n):t.nodeType===1&&uR(t,n),SE(t)):uR(Ss,n.stateNode));break;case 4:r=Ss,s=oc,Ss=n.stateNode.containerInfo,oc=!0,ud(t,e,n),Ss=r,oc=s;break;case 0:case 11:case 14:case 15:if(!Qs&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&q2(n,e,o),s=s.next}while(s!==r)}ud(t,e,n);break;case 1:if(!Qs&&(py(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){wr(n,e,a)}ud(t,e,n);break;case 21:ud(t,e,n);break;case 22:n.mode&1?(Qs=(r=Qs)||n.memoizedState!==null,ud(t,e,n),Qs=r):ud(t,e,n);break;default:ud(t,e,n)}}function qB(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new cle),e.forEach(function(r){var s=wle.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Fa(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ss=a.stateNode,oc=!1;break e;case 3:Ss=a.stateNode.containerInfo,oc=!0;break e;case 4:Ss=a.stateNode.containerInfo,oc=!0;break e}a=a.return}if(Ss===null)throw Error(_e(160));YG(i,o,s),Ss=null,oc=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){wr(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)QG(e,t),e=e.sibling}function QG(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Fa(e,t),Lc(t),r&4){try{Fv(3,t,t.return),Wx(3,t)}catch(g){wr(t,t.return,g)}try{Fv(5,t,t.return)}catch(g){wr(t,t.return,g)}}break;case 1:Fa(e,t),Lc(t),r&512&&n!==null&&py(n,n.return);break;case 5:if(Fa(e,t),Lc(t),r&512&&n!==null&&py(n,n.return),t.flags&32){var s=t.stateNode;try{EE(s,"")}catch(g){wr(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&wH(s,i),b2(a,o);var l=b2(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?CH(s,d):u==="dangerouslySetInnerHTML"?EH(s,d):u==="children"?EE(s,d):H5(s,u,d,l)}switch(a){case"input":p2(s,i);break;case"textarea":bH(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Ty(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?Ty(s,!!i.multiple,i.defaultValue,!0):Ty(s,!!i.multiple,i.multiple?[]:"",!1))}s[RE]=i}catch(g){wr(t,t.return,g)}}break;case 6:if(Fa(e,t),Lc(t),r&4){if(t.stateNode===null)throw Error(_e(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){wr(t,t.return,g)}}break;case 3:if(Fa(e,t),Lc(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{SE(e.containerInfo)}catch(g){wr(t,t.return,g)}break;case 4:Fa(e,t),Lc(t);break;case 13:Fa(e,t),Lc(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(CL=Sr())),r&4&&qB(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Qs=(l=Qs)||u,Fa(e,t),Qs=l):Fa(e,t),Lc(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(Ye=t,u=t.child;u!==null;){for(d=Ye=u;Ye!==null;){switch(h=Ye,f=h.child,h.tag){case 0:case 11:case 14:case 15:Fv(4,h,h.return);break;case 1:py(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){wr(r,n,g)}}break;case 5:py(h,h.return);break;case 22:if(h.memoizedState!==null){KB(d);continue}}f!==null?(f.return=h,Ye=f):KB(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=_H("display",o))}catch(g){wr(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){wr(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Fa(e,t),Lc(t),r&4&&qB(t);break;case 21:break;default:Fa(e,t),Lc(t)}}function Lc(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(KG(n)){var r=n;break e}n=n.return}throw Error(_e(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(EE(s,""),r.flags&=-33);var i=GB(t);Y2(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=GB(t);K2(t,a,o);break;default:throw Error(_e(161))}}catch(c){wr(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ule(t,e,n){Ye=t,JG(t)}function JG(t,e,n){for(var r=(t.mode&1)!==0;Ye!==null;){var s=Ye,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||D1;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Qs;a=D1;var l=Qs;if(D1=o,(Qs=c)&&!l)for(Ye=s;Ye!==null;)o=Ye,c=o.child,o.tag===22&&o.memoizedState!==null?YB(s):c!==null?(c.return=o,Ye=c):YB(s);for(;i!==null;)Ye=i,JG(i),i=i.sibling;Ye=s,D1=a,Qs=l}VB(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ye=i):VB(t)}}function VB(t){for(;Ye!==null;){var e=Ye;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qs||Wx(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qs)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Qa(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&PB(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}PB(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&SE(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_e(163))}Qs||e.flags&512&&V2(e)}catch(h){wr(e,e.return,h)}}if(e===t){Ye=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ye=n;break}Ye=e.return}}function KB(t){for(;Ye!==null;){var e=Ye;if(e===t){Ye=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ye=n;break}Ye=e.return}}function YB(t){for(;Ye!==null;){var e=Ye;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Wx(4,e)}catch(c){wr(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){wr(e,s,c)}}var i=e.return;try{V2(e)}catch(c){wr(e,i,c)}break;case 5:var o=e.return;try{V2(e)}catch(c){wr(e,o,c)}}}catch(c){wr(e,e.return,c)}if(e===t){Ye=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ye=a;break}Ye=e.return}}var dle=Math.ceil,hI=id.ReactCurrentDispatcher,EL=id.ReactCurrentOwner,Aa=id.ReactCurrentBatchConfig,en=0,fs=null,Or=null,Rs=0,To=0,gy=gf(0),Hr=0,ME=null,fg=0,Hx=0,_L=0,jv=null,Ki=null,CL=0,t0=1/0,ou=null,fI=!1,Q2=null,Mh=null,L1=!1,bh=null,pI=0,zv=0,J2=null,qA=-1,VA=0;function bi(){return en&6?Sr():qA!==-1?qA:qA=Sr()}function Uh(t){return t.mode&1?en&2&&Rs!==0?Rs&-Rs:Kce.transition!==null?(VA===0&&(VA=LH()),VA):(t=An,t!==0||(t=window.event,t=t===void 0?16:zH(t.type)),t):1}function Ec(t,e,n,r){if(50<zv)throw zv=0,J2=null,Error(_e(185));bC(t,n,r),(!(en&2)||t!==fs)&&(t===fs&&(!(en&2)&&(Hx|=n),Hr===4&&jd(t,Rs)),ro(t,r),n===1&&en===0&&!(e.mode&1)&&(t0=Sr()+500,Fx&&mf()))}function ro(t,e){var n=t.callbackNode;Kae(t,e);var r=JS(t,t===fs?Rs:0);if(r===0)n!==null&&sB(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&sB(n),e===1)t.tag===0?Vce(QB.bind(null,t)):aG(QB.bind(null,t)),Wce(function(){!(en&6)&&mf()}),n=null;else{switch(MH(r)){case 1:n=Y5;break;case 4:n=kH;break;case 16:n=QS;break;case 536870912:n=DH;break;default:n=QS}n=iq(n,ZG.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ZG(t,e){if(qA=-1,VA=0,en&6)throw Error(_e(327));var n=t.callbackNode;if(Dy()&&t.callbackNode!==n)return null;var r=JS(t,t===fs?Rs:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=gI(t,r);else{e=r;var s=en;en|=2;var i=eq();(fs!==t||Rs!==e)&&(ou=null,t0=Sr()+500,Qp(t,e));do try{ple();break}catch(a){XG(t,a)}while(!0);cL(),hI.current=i,en=s,Or!==null?e=0:(fs=null,Rs=0,e=Hr)}if(e!==0){if(e===2&&(s=A2(t),s!==0&&(r=s,e=Z2(t,s))),e===1)throw n=ME,Qp(t,0),jd(t,r),ro(t,Sr()),n;if(e===6)jd(t,r);else{if(s=t.current.alternate,!(r&30)&&!hle(s)&&(e=gI(t,r),e===2&&(i=A2(t),i!==0&&(r=i,e=Z2(t,i))),e===1))throw n=ME,Qp(t,0),jd(t,r),ro(t,Sr()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(_e(345));case 2:Ff(t,Ki,ou);break;case 3:if(jd(t,r),(r&130023424)===r&&(e=CL+500-Sr(),10<e)){if(JS(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){bi(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=O2(Ff.bind(null,t,Ki,ou),e);break}Ff(t,Ki,ou);break;case 4:if(jd(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-vc(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Sr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*dle(r/1960))-r,10<r){t.timeoutHandle=O2(Ff.bind(null,t,Ki,ou),r);break}Ff(t,Ki,ou);break;case 5:Ff(t,Ki,ou);break;default:throw Error(_e(329))}}}return ro(t,Sr()),t.callbackNode===n?ZG.bind(null,t):null}function Z2(t,e){var n=jv;return t.current.memoizedState.isDehydrated&&(Qp(t,e).flags|=256),t=gI(t,e),t!==2&&(e=Ki,Ki=n,e!==null&&X2(e)),t}function X2(t){Ki===null?Ki=t:Ki.push.apply(Ki,t)}function hle(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ac(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function jd(t,e){for(e&=~_L,e&=~Hx,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vc(e),r=1<<n;t[n]=-1,e&=~r}}function QB(t){if(en&6)throw Error(_e(327));Dy();var e=JS(t,0);if(!(e&1))return ro(t,Sr()),null;var n=gI(t,e);if(t.tag!==0&&n===2){var r=A2(t);r!==0&&(e=r,n=Z2(t,r))}if(n===1)throw n=ME,Qp(t,0),jd(t,e),ro(t,Sr()),n;if(n===6)throw Error(_e(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ff(t,Ki,ou),ro(t,Sr()),null}function AL(t,e){var n=en;en|=1;try{return t(e)}finally{en=n,en===0&&(t0=Sr()+500,Fx&&mf())}}function pg(t){bh!==null&&bh.tag===0&&!(en&6)&&Dy();var e=en;en|=1;var n=Aa.transition,r=An;try{if(Aa.transition=null,An=1,t)return t()}finally{An=r,Aa.transition=n,en=e,!(en&6)&&mf()}}function SL(){To=gy.current,Xn(gy)}function Qp(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,zce(n)),Or!==null)for(n=Or.return;n!==null;){var r=n;switch(iL(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&nI();break;case 3:Xw(),Xn(to),Xn(Zs),pL();break;case 5:fL(r);break;case 4:Xw();break;case 13:Xn(cr);break;case 19:Xn(cr);break;case 10:lL(r.type._context);break;case 22:case 23:SL()}n=n.return}if(fs=t,Or=t=$h(t.current,null),Rs=To=e,Hr=0,ME=null,_L=Hx=fg=0,Ki=jv=null,ap!==null){for(e=0;e<ap.length;e++)if(n=ap[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ap=null}return t}function XG(t,e){do{var n=Or;try{if(cL(),WA.current=dI,uI){for(var r=hr.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}uI=!1}if(hg=0,ss=Br=hr=null,Bv=!1,kE=0,EL.current=null,n===null||n.return===null){Hr=1,ME=e,Or=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Rs,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=UB(o);if(f!==null){f.flags&=-257,$B(f,o,a,i,e),f.mode&1&&MB(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){MB(i,l,e),IL();break e}c=Error(_e(426))}}else if(sr&&a.mode&1){var y=UB(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),$B(y,o,a,i,e),oL(e0(c,a));break e}}i=c=e0(c,a),Hr!==4&&(Hr=2),jv===null?jv=[i]:jv.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=MG(i,c,e);RB(i,m);break e;case 1:a=c;var w=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Mh===null||!Mh.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=UG(i,a,e);RB(i,A);break e}}i=i.return}while(i!==null)}nq(n)}catch(C){e=C,Or===n&&n!==null&&(Or=n=n.return);continue}break}while(!0)}function eq(){var t=hI.current;return hI.current=dI,t===null?dI:t}function IL(){(Hr===0||Hr===3||Hr===2)&&(Hr=4),fs===null||!(fg&268435455)&&!(Hx&268435455)||jd(fs,Rs)}function gI(t,e){var n=en;en|=2;var r=eq();(fs!==t||Rs!==e)&&(ou=null,Qp(t,e));do try{fle();break}catch(s){XG(t,s)}while(!0);if(cL(),en=n,hI.current=r,Or!==null)throw Error(_e(261));return fs=null,Rs=0,Hr}function fle(){for(;Or!==null;)tq(Or)}function ple(){for(;Or!==null&&!Bae();)tq(Or)}function tq(t){var e=sq(t.alternate,t,To);t.memoizedProps=t.pendingProps,e===null?nq(t):Or=e,EL.current=null}function nq(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ale(n,e),n!==null){n.flags&=32767,Or=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Hr=6,Or=null;return}}else if(n=ole(n,e,To),n!==null){Or=n;return}if(e=e.sibling,e!==null){Or=e;return}Or=e=t}while(e!==null);Hr===0&&(Hr=5)}function Ff(t,e,n){var r=An,s=Aa.transition;try{Aa.transition=null,An=1,gle(t,e,n,r)}finally{Aa.transition=s,An=r}return null}function gle(t,e,n,r){do Dy();while(bh!==null);if(en&6)throw Error(_e(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(_e(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Yae(t,i),t===fs&&(Or=fs=null,Rs=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||L1||(L1=!0,iq(QS,function(){return Dy(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Aa.transition,Aa.transition=null;var o=An;An=1;var a=en;en|=4,EL.current=null,lle(t,n),QG(n,t),Lce(R2),ZS=!!T2,R2=T2=null,t.current=n,ule(n),Fae(),en=a,An=o,Aa.transition=i}else t.current=n;if(L1&&(L1=!1,bh=t,pI=s),i=t.pendingLanes,i===0&&(Mh=null),Wae(n.stateNode),ro(t,Sr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(fI)throw fI=!1,t=Q2,Q2=null,t;return pI&1&&t.tag!==0&&Dy(),i=t.pendingLanes,i&1?t===J2?zv++:(zv=0,J2=t):zv=0,mf(),null}function Dy(){if(bh!==null){var t=MH(pI),e=Aa.transition,n=An;try{if(Aa.transition=null,An=16>t?16:t,bh===null)var r=!1;else{if(t=bh,bh=null,pI=0,en&6)throw Error(_e(331));var s=en;for(en|=4,Ye=t.current;Ye!==null;){var i=Ye,o=i.child;if(Ye.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(Ye=l;Ye!==null;){var u=Ye;switch(u.tag){case 0:case 11:case 15:Fv(8,u,i)}var d=u.child;if(d!==null)d.return=u,Ye=d;else for(;Ye!==null;){u=Ye;var h=u.sibling,f=u.return;if(VG(u),u===l){Ye=null;break}if(h!==null){h.return=f,Ye=h;break}Ye=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}Ye=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ye=o;else e:for(;Ye!==null;){if(i=Ye,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Fv(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,Ye=m;break e}Ye=i.return}}var w=t.current;for(Ye=w;Ye!==null;){o=Ye;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Ye=v;else e:for(o=w;Ye!==null;){if(a=Ye,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Wx(9,a)}}catch(C){wr(a,a.return,C)}if(a===o){Ye=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,Ye=A;break e}Ye=a.return}}if(en=s,mf(),_l&&typeof _l.onPostCommitFiberRoot=="function")try{_l.onPostCommitFiberRoot(Lx,t)}catch{}r=!0}return r}finally{An=n,Aa.transition=e}}return!1}function JB(t,e,n){e=e0(n,e),e=MG(t,e,1),t=Lh(t,e,1),e=bi(),t!==null&&(bC(t,1,e),ro(t,e))}function wr(t,e,n){if(t.tag===3)JB(t,t,n);else for(;e!==null;){if(e.tag===3){JB(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mh===null||!Mh.has(r))){t=e0(n,t),t=UG(e,t,1),e=Lh(e,t,1),t=bi(),e!==null&&(bC(e,1,t),ro(e,t));break}}e=e.return}}function mle(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=bi(),t.pingedLanes|=t.suspendedLanes&n,fs===t&&(Rs&n)===n&&(Hr===4||Hr===3&&(Rs&130023424)===Rs&&500>Sr()-CL?Qp(t,0):_L|=n),ro(t,e)}function rq(t,e){e===0&&(t.mode&1?(e=S1,S1<<=1,!(S1&130023424)&&(S1=4194304)):e=1);var n=bi();t=Yu(t,e),t!==null&&(bC(t,e,n),ro(t,n))}function yle(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),rq(t,n)}function wle(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(_e(314))}r!==null&&r.delete(e),rq(t,n)}var sq;sq=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||to.current)Zi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Zi=!1,ile(t,e,n);Zi=!!(t.flags&131072)}else Zi=!1,sr&&e.flags&1048576&&cG(e,iI,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;GA(t,e),t=e.pendingProps;var s=Qw(e,Zs.current);ky(e,n),s=mL(null,e,r,t,s,n);var i=yL();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,no(r)?(i=!0,rI(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,dL(e),s.updater=zx,e.stateNode=s,s._reactInternals=e,B2(e,r,t,n),e=z2(null,e,r,!0,i,n)):(e.tag=0,sr&&i&&sL(e),ci(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(GA(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=vle(r),t=Qa(r,t),s){case 0:e=j2(null,e,r,t,n);break e;case 1:e=jB(null,e,r,t,n);break e;case 11:e=BB(null,e,r,t,n);break e;case 14:e=FB(null,e,r,Qa(r.type,t),n);break e}throw Error(_e(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qa(r,s),j2(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qa(r,s),jB(t,e,r,s,n);case 3:e:{if(jG(e),t===null)throw Error(_e(387));r=e.pendingProps,i=e.memoizedState,s=i.element,pG(t,e),cI(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=e0(Error(_e(423)),e),e=zB(t,e,r,n,s);break e}else if(r!==s){s=e0(Error(_e(424)),e),e=zB(t,e,r,n,s);break e}else for(Do=Dh(e.stateNode.containerInfo.firstChild),Uo=e,sr=!0,ac=null,n=hG(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Jw(),r===s){e=Qu(t,e,n);break e}ci(t,e,r,n)}e=e.child}return e;case 5:return gG(e),t===null&&M2(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,P2(r,s)?o=null:i!==null&&P2(r,i)&&(e.flags|=32),FG(t,e),ci(t,e,o,n),e.child;case 6:return t===null&&M2(e),null;case 13:return zG(t,e,n);case 4:return hL(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Zw(e,null,r,n):ci(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qa(r,s),BB(t,e,r,s,n);case 7:return ci(t,e,e.pendingProps,n),e.child;case 8:return ci(t,e,e.pendingProps.children,n),e.child;case 12:return ci(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Kn(oI,r._currentValue),r._currentValue=o,i!==null)if(Ac(i.value,o)){if(i.children===s.children&&!to.current){e=Qu(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Mu(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),U2(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(_e(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),U2(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ci(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ky(e,n),s=Sa(s),r=r(s),e.flags|=1,ci(t,e,r,n),e.child;case 14:return r=e.type,s=Qa(r,e.pendingProps),s=Qa(r.type,s),FB(t,e,r,s,n);case 15:return $G(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qa(r,s),GA(t,e),e.tag=1,no(r)?(t=!0,rI(e)):t=!1,ky(e,n),LG(e,r,s),B2(e,r,s,n),z2(null,e,r,!0,t,n);case 19:return WG(t,e,n);case 22:return BG(t,e,n)}throw Error(_e(156,e.tag))};function iq(t,e){return OH(t,e)}function ble(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _a(t,e,n,r){return new ble(t,e,n,r)}function xL(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vle(t){if(typeof t=="function")return xL(t)?1:0;if(t!=null){if(t=t.$$typeof,t===q5)return 11;if(t===V5)return 14}return 2}function $h(t,e){var n=t.alternate;return n===null?(n=_a(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function KA(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")xL(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case iy:return Jp(n.children,s,i,e);case G5:o=8,s|=8;break;case l2:return t=_a(12,n,e,s|2),t.elementType=l2,t.lanes=i,t;case u2:return t=_a(13,n,e,s),t.elementType=u2,t.lanes=i,t;case d2:return t=_a(19,n,e,s),t.elementType=d2,t.lanes=i,t;case gH:return Gx(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fH:o=10;break e;case pH:o=9;break e;case q5:o=11;break e;case V5:o=14;break e;case Dd:o=16,r=null;break e}throw Error(_e(130,t==null?t:typeof t,""))}return e=_a(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Jp(t,e,n,r){return t=_a(7,t,r,e),t.lanes=n,t}function Gx(t,e,n,r){return t=_a(22,t,r,e),t.elementType=gH,t.lanes=n,t.stateNode={isHidden:!1},t}function wR(t,e,n){return t=_a(6,t,null,e),t.lanes=n,t}function bR(t,e,n){return e=_a(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ele(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=XT(0),this.expirationTimes=XT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=XT(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function NL(t,e,n,r,s,i,o,a,c){return t=new Ele(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=_a(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},dL(i),t}function _le(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sy,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function oq(t){if(!t)return tf;t=t._reactInternals;e:{if(Gg(t)!==t||t.tag!==1)throw Error(_e(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(no(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(_e(171))}if(t.tag===1){var n=t.type;if(no(n))return oG(t,n,e)}return e}function aq(t,e,n,r,s,i,o,a,c){return t=NL(n,r,!0,t,s,i,o,a,c),t.context=oq(null),n=t.current,r=bi(),s=Uh(n),i=Mu(r,s),i.callback=e??null,Lh(n,i,s),t.current.lanes=s,bC(t,s,r),ro(t,r),t}function qx(t,e,n,r){var s=e.current,i=bi(),o=Uh(s);return n=oq(n),e.context===null?e.context=n:e.pendingContext=n,e=Mu(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Lh(s,e,o),t!==null&&(Ec(t,s,o,i),zA(t,s,o)),o}function mI(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ZB(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function TL(t,e){ZB(t,e),(t=t.alternate)&&ZB(t,e)}function Cle(){return null}var cq=typeof reportError=="function"?reportError:function(t){console.error(t)};function RL(t){this._internalRoot=t}Vx.prototype.render=RL.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(_e(409));qx(t,e,null,null)};Vx.prototype.unmount=RL.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;pg(function(){qx(null,t,null,null)}),e[Ku]=null}};function Vx(t){this._internalRoot=t}Vx.prototype.unstable_scheduleHydration=function(t){if(t){var e=BH();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fd.length&&e!==0&&e<Fd[n].priority;n++);Fd.splice(n,0,t),n===0&&jH(t)}};function PL(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Kx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function XB(){}function Ale(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=mI(o);i.call(l)}}var o=aq(e,r,t,0,null,!1,!1,"",XB);return t._reactRootContainer=o,t[Ku]=o.current,NE(t.nodeType===8?t.parentNode:t),pg(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=mI(c);a.call(l)}}var c=NL(t,0,!1,null,null,!1,!1,"",XB);return t._reactRootContainer=c,t[Ku]=c.current,NE(t.nodeType===8?t.parentNode:t),pg(function(){qx(e,c,n,r)}),c}function Yx(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=mI(o);a.call(c)}}qx(e,o,t,s)}else o=Ale(n,e,t,s,r);return mI(o)}UH=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=av(e.pendingLanes);n!==0&&(Q5(e,n|1),ro(e,Sr()),!(en&6)&&(t0=Sr()+500,mf()))}break;case 13:pg(function(){var r=Yu(t,1);if(r!==null){var s=bi();Ec(r,t,1,s)}}),TL(t,1)}};J5=function(t){if(t.tag===13){var e=Yu(t,134217728);if(e!==null){var n=bi();Ec(e,t,134217728,n)}TL(t,134217728)}};$H=function(t){if(t.tag===13){var e=Uh(t),n=Yu(t,e);if(n!==null){var r=bi();Ec(n,t,e,r)}TL(t,e)}};BH=function(){return An};FH=function(t,e){var n=An;try{return An=t,e()}finally{An=n}};E2=function(t,e,n){switch(e){case"input":if(p2(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Bx(r);if(!s)throw Error(_e(90));yH(r),p2(r,s)}}}break;case"textarea":bH(t,n);break;case"select":e=n.value,e!=null&&Ty(t,!!n.multiple,e,!1)}};IH=AL;xH=pg;var Sle={usingClientEntryPoint:!1,Events:[EC,ly,Bx,AH,SH,AL]},Pb={findFiberByHostInstance:op,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ile={bundleType:Pb.bundleType,version:Pb.version,rendererPackageName:Pb.rendererPackageName,rendererConfig:Pb.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:id.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=RH(t),t===null?null:t.stateNode},findFiberByHostInstance:Pb.findFiberByHostInstance||Cle,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var M1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!M1.isDisabled&&M1.supportsFiber)try{Lx=M1.inject(Ile),_l=M1}catch{}}Wo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sle;Wo.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!PL(e))throw Error(_e(200));return _le(t,e,null,n)};Wo.createRoot=function(t,e){if(!PL(t))throw Error(_e(299));var n=!1,r="",s=cq;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=NL(t,1,!1,null,null,n,!1,r,s),t[Ku]=e.current,NE(t.nodeType===8?t.parentNode:t),new RL(e)};Wo.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(_e(188)):(t=Object.keys(t).join(","),Error(_e(268,t)));return t=RH(e),t=t===null?null:t.stateNode,t};Wo.flushSync=function(t){return pg(t)};Wo.hydrate=function(t,e,n){if(!Kx(e))throw Error(_e(200));return Yx(null,t,e,!0,n)};Wo.hydrateRoot=function(t,e,n){if(!PL(t))throw Error(_e(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=cq;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=aq(e,null,t,1,n??null,s,!1,i,o),t[Ku]=e.current,NE(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Vx(e)};Wo.render=function(t,e,n){if(!Kx(e))throw Error(_e(200));return Yx(null,t,e,!1,n)};Wo.unmountComponentAtNode=function(t){if(!Kx(t))throw Error(_e(40));return t._reactRootContainer?(pg(function(){Yx(null,null,t,!1,function(){t._reactRootContainer=null,t[Ku]=null})}),!0):!1};Wo.unstable_batchedUpdates=AL;Wo.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Kx(n))throw Error(_e(200));if(t==null||t._reactInternals===void 0)throw Error(_e(38));return Yx(t,e,n,!1,r)};Wo.version="18.3.1-next-f1338f8080-20240426";function lq(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lq)}catch(t){console.error(t)}}lq(),lH.exports=Wo;var OL=lH.exports,e6=OL;a2.createRoot=e6.createRoot,a2.hydrateRoot=e6.hydrateRoot;const uq="2.31.7";let Ob={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${uq}`},me=class ek extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof ek?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof ek&&n.cause.docsPath||n.docsPath,i=(a=Ob.getDocsUrl)==null?void 0:a.call(Ob,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Ob.version?[`Version: ${Ob.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=uq}walk(e){return dq(this,e)}};function dq(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?dq(t.cause,e):e?null:t}let hq=class extends me{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class xle extends me{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class Nle extends me{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let Tle=class extends me{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}},fq=class extends me{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},pq=class extends me{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class t6 extends me{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function H0(t,{dir:e,size:n=32}={}){return typeof t=="string"?Bh(t,{dir:e,size:n}):Rle(t,{dir:e,size:n})}function Bh(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new pq({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function Rle(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new pq({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function Pl(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function vr(t){return Pl(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function Al(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const Ple=new TextEncoder;function G0(t,e={}){return typeof t=="number"||typeof t=="bigint"?kle(t,e):typeof t=="boolean"?Ole(t,e):Pl(t)?xa(t,e):Zp(t,e)}function Ole(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Oa(n,{size:e.size}),H0(n,{size:e.size})):n}const Hl={zero:48,nine:57,A:65,F:70,a:97,f:102};function n6(t){if(t>=Hl.zero&&t<=Hl.nine)return t-Hl.zero;if(t>=Hl.A&&t<=Hl.F)return t-(Hl.A-10);if(t>=Hl.a&&t<=Hl.f)return t-(Hl.a-10)}function xa(t,e={}){let n=t;e.size&&(Oa(n,{size:e.size}),n=H0(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=n6(r.charCodeAt(a++)),l=n6(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new me(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function kle(t,e){const n=nt(t,e);return xa(n)}function Zp(t,e={}){const n=Ple.encode(t);return typeof e.size=="number"?(Oa(n,{size:e.size}),H0(n,{dir:"right",size:e.size})):n}function Oa(t,{size:e}){if(vr(t)>e)throw new Tle({givenSize:vr(t),maxSize:e})}function jo(t,e={}){const{signed:n}=e;e.size&&Oa(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Dle(t,e={}){let n=t;if(e.size&&(Oa(n,{size:e.size}),n=Al(n)),Al(n)==="0x00")return!1;if(Al(n)==="0x01")return!0;throw new Nle(n)}function Sc(t,e={}){return Number(jo(t,e))}function gq(t,e={}){let n=xa(t);return e.size&&(Oa(n,{size:e.size}),n=Al(n,{dir:"right"})),new TextDecoder().decode(n)}const Lle=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Na(t,e={}){return typeof t=="number"||typeof t=="bigint"?nt(t,e):typeof t=="string"?n0(t,e):typeof t=="boolean"?mq(t,e):Kr(t,e)}function mq(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Oa(n,{size:e.size}),H0(n,{size:e.size})):n}function Kr(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Lle[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Oa(r,{size:e.size}),H0(r,{dir:"right",size:e.size})):r}function nt(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new hq({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?H0(a,{size:r}):a}const Mle=new TextEncoder;function n0(t,e={}){const n=Mle.encode(t);return Kr(n,e)}async function Ule(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:nt(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function Ic(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new Qle(t.type);return`${t.name}(${Qx(t.inputs,{includeName:e})})`}function Qx(t,{includeName:e=!1}={}){return t?t.map(n=>$le(n,{includeName:e})).join(e?", ":","):""}function $le(t,{includeName:e}){return t.type.startsWith("tuple")?`(${Qx(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class Ble extends me{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class r6 extends me{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class yq extends me{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Qx(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class CC extends me{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class Fle extends me{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class jle extends me{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${vr(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class zle extends me{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class Wle extends me{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class s6 extends me{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class wq extends me{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class Hle extends me{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class bq extends me{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class i6 extends me{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class r0 extends me{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class vq extends me{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class Gle extends me{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class qle extends me{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Ic(e.abiItem)}\`, and`,`\`${n.type}\` in \`${Ic(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let Vle=class extends me{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class UE extends me{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${Qx(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class Jx extends me{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Ic(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class Kle extends me{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class Yle extends me{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let Eq=class extends me{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class Qle extends me{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function Ta(t){return typeof t[0]=="string"?q0(t):Jle(t)}function Jle(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function q0(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}let nf=class extends me{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},Zx=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const U1=BigInt(2**32-1),o6=BigInt(32);function Zle(t,e=!1){return e?{h:Number(t&U1),l:Number(t>>o6&U1)}:{h:Number(t>>o6&U1)|0,l:Number(t&U1)|0}}function Xle(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=Zle(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const eue=(t,e,n)=>t<<n|e>>>32-n,tue=(t,e,n)=>e<<n|t>>>32-n,nue=(t,e,n)=>e<<n-32|t>>>64-n,rue=(t,e,n)=>t<<n-32|e>>>64-n,wm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function kL(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function $E(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function xc(t,...e){if(!kL(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function sue(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");$E(t.outputLen),$E(t.blockLen)}function s0(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function _q(t,e){xc(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function iue(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function i0(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function vR(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Mc(t,e){return t<<32-e|t>>>e}const oue=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function aue(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function cue(t){for(let e=0;e<t.length;e++)t[e]=aue(t[e]);return t}const a6=oue?t=>t:cue,Cq=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",lue=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function BE(t){if(xc(t),Cq)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=lue[t[n]];return e}const Gl={_0:48,_9:57,A:65,F:70,a:97,f:102};function c6(t){if(t>=Gl._0&&t<=Gl._9)return t-Gl._0;if(t>=Gl.A&&t<=Gl.F)return t-(Gl.A-10);if(t>=Gl.a&&t<=Gl.f)return t-(Gl.a-10)}function DL(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Cq)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=c6(t.charCodeAt(i)),a=c6(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function uue(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function AC(t){return typeof t=="string"&&(t=uue(t)),xc(t),t}function lp(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];xc(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let LL=class{};function Aq(t){const e=r=>t().update(AC(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function due(t){const e=(r,s)=>t(s).update(AC(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function hue(t=32){if(wm&&typeof wm.getRandomValues=="function")return wm.getRandomValues(new Uint8Array(t));if(wm&&typeof wm.randomBytes=="function")return Uint8Array.from(wm.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const fue=BigInt(0),kb=BigInt(1),pue=BigInt(2),gue=BigInt(7),mue=BigInt(256),yue=BigInt(113),Sq=[],Iq=[],xq=[];for(let t=0,e=kb,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Sq.push(2*(5*r+n)),Iq.push((t+1)*(t+2)/2%64);let s=fue;for(let i=0;i<7;i++)e=(e<<kb^(e>>gue)*yue)%mue,e&pue&&(s^=kb<<(kb<<BigInt(i))-kb);xq.push(s)}const Nq=Xle(xq,!0),wue=Nq[0],bue=Nq[1],l6=(t,e,n)=>n>32?nue(t,e,n):eue(t,e,n),u6=(t,e,n)=>n>32?rue(t,e,n):tue(t,e,n);function Tq(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=l6(l,u,1)^n[a],h=u6(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Iq[o],c=l6(s,i,a),l=u6(s,i,a),u=Sq[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=wue[r],t[1]^=bue[r]}i0(n)}let ML=class Rq extends LL{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,$E(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=iue(this.state)}clone(){return this._cloneInto()}keccak(){a6(this.state32),Tq(this.state32,this.rounds),a6(this.state32),this.posOut=0,this.pos=0}update(e){s0(this),e=AC(e),xc(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){s0(this,!1),xc(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return $E(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(_q(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,i0(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Rq(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const yf=(t,e,n)=>Aq(()=>new ML(e,t,n)),vue=yf(6,144,224/8),Eue=yf(6,136,256/8),_ue=yf(6,104,384/8),Cue=yf(6,72,512/8),Aue=yf(1,144,224/8),UL=yf(1,136,256/8),Sue=yf(1,104,384/8),Iue=yf(1,72,512/8),Pq=(t,e,n)=>due((r={})=>new ML(e,t,r.dkLen===void 0?n:r.dkLen,!0)),xue=Pq(31,168,128/8),Nue=Pq(31,136,256/8),jGe=Object.freeze(Object.defineProperty({__proto__:null,Keccak:ML,keccakP:Tq,keccak_224:Aue,keccak_256:UL,keccak_384:Sue,keccak_512:Iue,sha3_224:vue,sha3_256:Eue,sha3_384:_ue,sha3_512:Cue,shake128:xue,shake256:Nue},Symbol.toStringTag,{value:"Module"}));function Ts(t,e){const n=e||"hex",r=UL(Pl(t,{strict:!1})?G0(t):t);return n==="bytes"?r:Na(r)}const ER=new Zx(8192);function SC(t,e){if(ER.has(`${t}.${e}`))return ER.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=Ts(Zp(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return ER.set(`${t}.${e}`,i),i}function Ou(t,e){if(!Ra(t,{strict:!1}))throw new nf({address:t});return SC(t,e)}const Tue=/^0x[a-fA-F0-9]{40}$/,_R=new Zx(8192);function Ra(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(_R.has(r))return _R.get(r);const s=Tue.test(t)?t.toLowerCase()===t?!0:n?SC(t)===t:!0:!1;return _R.set(r,s),s}function o0(t,e,n,{strict:r}={}){return Pl(t,{strict:!1})?yI(t,e,n,{strict:r}):Dq(t,e,n,{strict:r})}function Oq(t,e){if(typeof e=="number"&&e>0&&e>vr(t)-1)throw new fq({offset:e,position:"start",size:vr(t)})}function kq(t,e,n){if(typeof e=="number"&&typeof n=="number"&&vr(t)!==n-e)throw new fq({offset:n,position:"end",size:vr(t)})}function Dq(t,e,n,{strict:r}={}){Oq(t,e);const s=t.slice(e,n);return r&&kq(s,e,n),s}function yI(t,e,n,{strict:r}={}){Oq(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&kq(s,e,n),s}const Rue=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Lq=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function wf(t,e){if(t.length!==e.length)throw new zle({expectedLength:t.length,givenLength:e.length});const n=Pue({params:t,values:e}),r=BL(n);return r.length===0?"0x":r}function Pue({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push($L({param:t[r],value:e[r]}));return n}function $L({param:t,value:e}){const n=FL(t.type);if(n){const[r,s]=n;return kue(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return $ue(e,{param:t});if(t.type==="address")return Oue(e);if(t.type==="bool")return Lue(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=Lq.exec(t.type)??[];return Mue(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return Due(e,{param:t});if(t.type==="string")return Uue(e);throw new Kle(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function BL(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=vr(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(nt(e+s,{size:32})),r.push(a),s+=vr(a)):n.push(a)}return Ta([...n,...r])}function Oue(t){if(!Ra(t))throw new nf({address:t});return{dynamic:!1,encoded:Bh(t.toLowerCase())}}function kue(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new Eq(t);if(!r&&t.length!==e)throw new Fle({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=$L({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=BL(i);if(r){const a=nt(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?Ta([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Ta(i.map(({encoded:o})=>o))}}function Due(t,{param:e}){const[,n]=e.type.split("bytes"),r=vr(t);if(!n){let s=t;return r%32!==0&&(s=Bh(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Ta([Bh(nt(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new jle({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:Bh(t,{dir:"right"})}}function Lue(t){if(typeof t!="boolean")throw new me(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Bh(mq(t))}}function Mue(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new hq({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:nt(t,{size:32,signed:e})}}function Uue(t){const e=n0(t),n=Math.ceil(vr(e)/32),r=[];for(let s=0;s<n;s++)r.push(Bh(o0(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Ta([Bh(nt(vr(e),{size:32})),...r])}}function $ue(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=$L({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?BL(r):Ta(r.map(({encoded:s})=>s))}}function FL(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const CR="/docs/contract/encodeDeployData";function Xx(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new Ble({docsPath:CR});if(!("inputs"in s))throw new r6({docsPath:CR});if(!s.inputs||s.inputs.length===0)throw new r6({docsPath:CR});const i=wf(s.inputs,n);return q0([r,i])}function _r(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class qg extends me{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class YA extends me{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function Bue(t){const e=Ts(`0x${t.substring(4)}`).substring(26);return SC(`0x${e}`)}const Fue="modulepreload",jue=function(t){return"/"+t},d6={},Ks=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=jue(c),c in d6)return;d6[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":Fue,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function zue({hash:t,signature:e}){const n=Pl(t)?t:Na(t),{secp256k1:r}=await Ks(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>ime);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=h6(f);return new r.Signature(jo(l),jo(u)).addRecoveryBit(p)}const o=Pl(e)?e:Na(e);if(vr(o)!==65)throw new Error("invalid signature length");const a=Sc(`0x${o.slice(130)}`),c=h6(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function h6(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Mq({hash:t,signature:e}){return Bue(await zue({hash:t,signature:e}))}class f6 extends me{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class Uq extends me{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class Wue extends me{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const Hue={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Wue({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new Uq({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new f6({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new f6({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function jL(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(Hue);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function Gue(t,e="hex"){const n=$q(t),r=jL(new Uint8Array(n.length));return n.encode(r),e==="hex"?Kr(r.bytes):r.bytes}function $q(t){return Array.isArray(t)?que(t.map(e=>$q(e))):Vue(t)}function que(t){const e=t.reduce((s,i)=>s+i.length,0),n=Bq(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function Vue(t){const e=typeof t=="string"?xa(t):t,n=Bq(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function Bq(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new me("Length is too large.")}function Kue(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=Ts(q0(["0x05",Gue([e?nt(e):"0x",s,n?nt(n):"0x"])]));return r==="bytes"?xa(i):i}async function Fq(t){const{authorization:e,signature:n}=t;return Mq({hash:Kue(e),signature:n??e})}class tk extends me{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class Yue extends me{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class Que extends me{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class jq extends me{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function zq({chain:t,currentChainId:e}){if(!t)throw new Que;if(e!==t.id)throw new Yue({chain:t,currentChainId:e})}const Jue={gwei:9,wei:18},Zue={ether:-9,wei:9},Xue={ether:-18,gwei:-9};function Vg(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function so(t,e="wei"){return Vg(t,Zue[e])}class up extends me{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(up,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(up,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class wI extends me{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${so(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(wI,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class nk extends me{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${so(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(nk,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class rk extends me{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(rk,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class sk extends me{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(sk,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class ik extends me{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(ik,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class ok extends me{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(ok,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class ak extends me{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(ak,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class ck extends me{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(ck,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class lk extends me{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(lk,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class bI extends me{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${so(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${so(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(bI,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class IC extends me{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function zL(t,e="wei"){return Vg(t,Jue[e])}function xC(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class ede extends me{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class tde extends me{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",xC(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class nde extends me{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=xC({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${zL(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${so(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${so(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${so(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Wq extends me{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class Hq extends me{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class rde extends me{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const qr=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),sde=t=>t,WL=t=>t;class Wv extends me{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${WL(o)}`,e&&`Request body: ${qr(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class HL extends me{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${WL(r)}`,`Request body: ${qr(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class p6 extends me{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${WL(n)}`,`Request body: ${qr(e)}`],name:"TimeoutError"})}}const ide=-1;class uo extends me{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof HL?e.code:n??ide}}class Go extends uo{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class FE extends uo{constructor(e){super(e,{code:FE.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(FE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class jE extends uo{constructor(e){super(e,{code:jE.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(jE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class zE extends uo{constructor(e,{method:n}={}){super(e,{code:zE.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(zE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class WE extends uo{constructor(e){super(e,{code:WE.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(WE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class gg extends uo{constructor(e){super(e,{code:gg.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(gg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class mg extends uo{constructor(e){super(e,{code:mg.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(mg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class HE extends uo{constructor(e){super(e,{code:HE.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(HE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Fh extends uo{constructor(e){super(e,{code:Fh.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Fh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class a0 extends uo{constructor(e){super(e,{code:a0.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(a0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class dp extends uo{constructor(e,{method:n}={}){super(e,{code:dp.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(dp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class c0 extends uo{constructor(e){super(e,{code:c0.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(c0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class GE extends uo{constructor(e){super(e,{code:GE.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(GE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class $r extends Go{constructor(e){super(e,{code:$r.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty($r,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class qE extends Go{constructor(e){super(e,{code:qE.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(qE,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class VE extends Go{constructor(e,{method:n}={}){super(e,{code:VE.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(VE,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class KE extends Go{constructor(e){super(e,{code:KE.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(KE,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class YE extends Go{constructor(e){super(e,{code:YE.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(YE,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Ol extends Go{constructor(e){super(e,{code:Ol.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Ol,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class l0 extends Go{constructor(e){super(e,{code:l0.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(l0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class QE extends Go{constructor(e){super(e,{code:QE.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(QE,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class JE extends Go{constructor(e){super(e,{code:JE.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(JE,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class ZE extends Go{constructor(e){super(e,{code:ZE.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(ZE,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class XE extends Go{constructor(e){super(e,{code:XE.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(XE,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class e_ extends Go{constructor(e){super(e,{code:e_.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(e_,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class u0 extends Go{constructor(e){super(e,{code:u0.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(u0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class ode extends uo{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function eN(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof me?t.walk(s=>(s==null?void 0:s.code)===up.code):t;return r instanceof me?new up({cause:t,message:r.details}):up.nodeMessage.test(n)?new up({cause:t,message:t.details}):wI.nodeMessage.test(n)?new wI({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):nk.nodeMessage.test(n)?new nk({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):rk.nodeMessage.test(n)?new rk({cause:t,nonce:e==null?void 0:e.nonce}):sk.nodeMessage.test(n)?new sk({cause:t,nonce:e==null?void 0:e.nonce}):ik.nodeMessage.test(n)?new ik({cause:t,nonce:e==null?void 0:e.nonce}):ok.nodeMessage.test(n)?new ok({cause:t}):ak.nodeMessage.test(n)?new ak({cause:t,gas:e==null?void 0:e.gas}):ck.nodeMessage.test(n)?new ck({cause:t,gas:e==null?void 0:e.gas}):lk.nodeMessage.test(n)?new lk({cause:t}):bI.nodeMessage.test(n)?new bI({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new IC({cause:t})}function Gq(t,{docsPath:e,...n}){const r=(()=>{const s=eN(t,n);return s instanceof IC?t:s})();return new nde(r,{docsPath:e,...n})}function tN(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const ade={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function V0(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=cde(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>Kr(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=nt(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=nt(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=nt(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=nt(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=nt(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=nt(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=ade[t.type]),typeof t.value<"u"&&(e.value=nt(t.value)),e}function cde(t){return t.map(e=>({address:e.address,r:e.r?nt(BigInt(e.r)):e.r,s:e.s?nt(BigInt(e.s)):e.s,chainId:nt(e.chainId),nonce:nt(e.nonce),...typeof e.yParity<"u"?{yParity:nt(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:nt(e.v)}:{}}))}function ct(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const lde=2n**256n-1n;function Kg(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?_r(e):void 0;if(o&&!Ra(o.address))throw new nf({address:o.address});if(i&&!Ra(i))throw new nf({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new ede;if(r&&r>lde)throw new wI({maxFeePerGas:r});if(s&&r&&s>r)throw new bI({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function K0(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Sc(e)}class ude extends me{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class GL extends me{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class dde extends me{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${so(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class qq extends me{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const Vq={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Kq(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Sc(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Sc(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?Vq[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=hde(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function hde(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function Yq(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:Kq(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function vl(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?nt(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new qq({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||Yq)(c)}async function qL(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function fde(t,e){return Qq(t,e)}async function Qq(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await ct(t,vl,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return jo(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):ct(t,vl,"getBlock")({}),ct(t,qL,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new GL;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function pde(t,e){return uk(t,e)}async function uk(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new ude;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await ct(t,vl,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new GL;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await Qq(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await ct(t,qL,"getGasPrice")({}))}}class gde extends me{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=xC({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${zL(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${so(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${so(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${so(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function mde(t,{docsPath:e,...n}){const r=(()=>{const s=eN(t,n);return s instanceof IC?t:s})();return new gde(r,{docsPath:e,...n})}class yde extends me{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class wde extends me{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function g6(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function bde(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=g6(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=g6(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function m6(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new t6({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new t6({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function vde(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=nt(e)),n!==void 0&&(o.nonce=nt(n)),r!==void 0&&(o.state=m6(r)),s!==void 0){if(o.state)throw new wde;o.stateDiff=m6(s)}return o}function VL(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Ra(n,{strict:!1}))throw new nf({address:n});if(e[n])throw new yde({address:n});e[n]=vde(r)}return e}async function KL(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?nt(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function nN(t,e){var s,i,o;const{account:n=t.account}=e,r=n?_r(n):void 0;try{let W=function(N){const{block:M,request:P,rpcStateOverride:L}=N;return t.request({method:"eth_estimateGas",params:L?[P,M??"latest",L]:M?[P,M]:[P]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:w,nonce:v,value:A,stateOverride:C,...S}=await NC(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),T=(typeof d=="bigint"?nt(d):void 0)||h,I=VL(C),k=await(async()=>{if(S.to)return S.to;if(c&&c.length>0)return await Fq({authorization:c[0]}).catch(()=>{throw new me("`to` is required. Could not infer from `authorizationList`")})})();Kg(e);const O=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,G=(O||V0)({...tN(S,{format:O}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:w,nonce:v,to:k,value:A});let R=BigInt(await W({block:T,request:G,rpcStateOverride:I}));if(c){const N=await KL(t,{address:G.from}),M=await Promise.all(c.map(async P=>{const{address:L}=P,F=await W({block:T,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:L,value:nt(N)},rpcStateOverride:I}).catch(()=>100000n);return 2n*BigInt(F)}));R+=M.reduce((P,L)=>P+L,0n)}return R}catch(a){throw mde(a,{...e,account:r,chain:t.chain})}}async function YL(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?nt(r):n]},{dedupe:!!r});return Sc(s)}function Jq(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>xa(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>Kr(i))}function Zq(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>xa(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>xa(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>Kr(o))}function Ede(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function _de(t,e,n){return t&e^~t&n}function Cde(t,e,n){return t&e^t&n^e&n}class Ade extends LL{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=vR(this.buffer)}update(e){s0(this),e=AC(e),xc(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=vR(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){s0(this),_q(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,i0(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Ede(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=vR(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const dd=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Sde=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),hd=new Uint32Array(64);let Ide=class extends Ade{constructor(e=32){super(64,e,8,!1),this.A=dd[0]|0,this.B=dd[1]|0,this.C=dd[2]|0,this.D=dd[3]|0,this.E=dd[4]|0,this.F=dd[5]|0,this.G=dd[6]|0,this.H=dd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)hd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=hd[d-15],f=hd[d-2],p=Mc(h,7)^Mc(h,18)^h>>>3,g=Mc(f,17)^Mc(f,19)^f>>>10;hd[d]=g+hd[d-7]+p+hd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Mc(a,6)^Mc(a,11)^Mc(a,25),f=u+h+_de(a,c,l)+Sde[d]+hd[d]|0,g=(Mc(r,2)^Mc(r,13)^Mc(r,22))+Cde(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){i0(hd)}destroy(){this.set(0,0,0,0,0,0,0,0),i0(this.buffer)}};const Xq=Aq(()=>new Ide),xde=Xq;function Nde(t,e){return xde(Pl(t,{strict:!1})?G0(t):t)}function Tde(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=Nde(e);return s.set([n],0),r==="bytes"?s:Kr(s)}function Rde(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(Tde({commitment:i,to:r,version:n}));return s}const y6=6,eV=32,QL=4096,tV=eV*QL,w6=tV*y6-1-1*QL*y6;class Pde extends me{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class Ode extends me{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function kde(t){const e=typeof t.data=="string"?xa(t.data):t.data,n=vr(e);if(!n)throw new Ode;if(n>w6)throw new Pde({maxSize:w6,size:n});const r=[];let s=!0,i=0;for(;s;){const o=jL(new Uint8Array(tV));let a=0;for(;a<QL;){const c=e.slice(i,i+(eV-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>Kr(o.bytes))}function Dde(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??kde({data:e}),i=t.commitments??Jq({blobs:s,kzg:n,to:r}),o=t.proofs??Zq({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function Lde(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new tde({transaction:t})}const nV=["blobVersionedHashes","chainId","fees","gas","nonce","type"],b6=new Map;async function NC(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=nV,type:u}=e,d=n&&_r(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await ct(t,vl,"getBlock")({blockTag:"latest"}),f)}let g;async function y(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await ct(t,K0,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const m=await y();h.nonce=await c.consume({address:d.address,chainId:m,client:t})}else h.nonce=await ct(t,YL,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const m=Jq({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const w=Rde({commitments:m,to:"hex"});h.blobVersionedHashes=w}if(l.includes("sidecars")){const w=Zq({blobs:r,commitments:m,kzg:o}),v=Dde({blobs:r,commitments:m,proofs:w,to:"hex"});h.sidecars=v}}if(l.includes("chainId")&&(h.chainId=await y()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=Lde(h)}catch{let m=b6.get(t.uid);if(typeof m>"u"){const w=await p();m=typeof(w==null?void 0:w.baseFeePerGas)=="bigint",b6.set(t.uid,m)}h.type=m?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const m=await p(),{maxFeePerGas:w,maxPriorityFeePerGas:v}=await uk(t,{block:m,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<v)throw new dde({maxPriorityFeePerGas:v});h.maxPriorityFeePerGas=v,h.maxFeePerGas=w}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new GL;if(typeof e.gasPrice>"u"){const m=await p(),{gasPrice:w}=await uk(t,{block:m,chain:s,request:h,type:"legacy"});h.gasPrice=w}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await ct(t,nN,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),Kg(h),delete h.parameters,h}async function JL(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const AR=new Zx(128);async function TC(t,e){var w,v,A,C;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...y}=e;if(typeof n>"u")throw new qg({docsPath:"/docs/actions/wallet/sendTransaction"});const m=n?_r(n):null;try{Kg(e);const S=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await Fq({authorization:i[0]}).catch(()=>{throw new me("`to` is required. Could not infer from `authorizationList`.")})})();if((m==null?void 0:m.type)==="json-rpc"||m===null){let x;r!==null&&(x=await ct(t,K0,"getChainId")({}),zq({currentChainId:x,chain:r}));const T=(A=(v=(w=t.chain)==null?void 0:w.formatters)==null?void 0:v.transactionRequest)==null?void 0:A.format,k=(T||V0)({...tN(y,{format:T}),accessList:s,authorizationList:i,blobs:o,chainId:x,data:a,from:m==null?void 0:m.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:S,type:p,value:g}),O=AR.get(t.uid),B=O?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:B,params:[k]},{retryCount:0})}catch(G){if(O===!1)throw G;const W=G;if(W.name==="InvalidInputRpcError"||W.name==="InvalidParamsRpcError"||W.name==="MethodNotFoundRpcError"||W.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[k]},{retryCount:0}).then(R=>(AR.set(t.uid,!0),R)).catch(R=>{const N=R;throw N.name==="MethodNotFoundRpcError"||N.name==="MethodNotSupportedRpcError"?(AR.set(t.uid,!1),W):N});throw W}}if((m==null?void 0:m.type)==="local"){const x=await ct(t,NC,"prepareTransactionRequest")({account:m,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:m.nonceManager,parameters:[...nV,"sidecars"],type:p,value:g,...y,to:S}),T=(C=r==null?void 0:r.serializers)==null?void 0:C.transaction,I=await m.signTransaction(x,{serializer:T});return await ct(t,JL,"sendRawTransaction")({serializedTransaction:I})}throw(m==null?void 0:m.type)==="smart"?new YA({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new YA({docsPath:"/docs/actions/wallet/sendTransaction",type:m==null?void 0:m.type})}catch(S){throw S instanceof YA?S:Gq(S,{...e,account:m,chain:e.chain||void 0})}}function Mde(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=Xx({abi:n,args:r,bytecode:s});return TC(t,{...i,...i.authorizationList?{to:null}:{},data:o})}const dk=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],hk=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],rV=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],sV=[...rV,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],Ude=[...rV,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],v6=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],E6=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],_6=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}];function $de(t,e={}){typeof e.size<"u"&&Oa(t,{size:e.size});const n=Kr(t,e);return jo(n,e)}function Bde(t,e={}){let n=t;if(typeof e.size<"u"&&(Oa(n,{size:e.size}),n=Al(n)),n.length>1||n[0]>1)throw new xle(n);return!!n[0]}function Uu(t,e={}){typeof e.size<"u"&&Oa(t,{size:e.size});const n=Kr(t,e);return Sc(n,e)}function Fde(t,e={}){let n=t;return typeof e.size<"u"&&(Oa(n,{size:e.size}),n=Al(n,{dir:"right"})),new TextDecoder().decode(n)}function RC(t,e){const n=typeof e=="string"?xa(e):e,r=jL(n);if(vr(n)===0&&t.length>0)throw new CC;if(vr(e)&&vr(e)<32)throw new yq({data:typeof e=="string"?e:Kr(e),params:t,size:vr(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=Ly(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function Ly(t,e,{staticPosition:n}){const r=FL(e.type);if(r){const[s,i]=r;return zde(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return qde(t,e,{staticPosition:n});if(e.type==="address")return jde(t);if(e.type==="bool")return Wde(t);if(e.type.startsWith("bytes"))return Hde(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return Gde(t,e);if(e.type==="string")return Vde(t,{staticPosition:n});throw new Yle(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const C6=32,fk=32;function jde(t){const e=t.readBytes(32);return[SC(Kr(Dq(e,-20))),32]}function zde(t,e,{length:n,staticPosition:r}){if(!n){const o=Uu(t.readBytes(fk)),a=r+o,c=a+C6;t.setPosition(a);const l=Uu(t.readBytes(C6)),u=t_(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=Ly(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(t_(e)){const o=Uu(t.readBytes(fk)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=Ly(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=Ly(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function Wde(t){return[Bde(t.readBytes(32),{size:32}),32]}function Hde(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=Uu(t.readBytes(32));t.setPosition(n+o);const a=Uu(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Kr(c),32]}return[Kr(t.readBytes(Number.parseInt(s),32)),32]}function Gde(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?$de(s,{signed:n}):Uu(s,{signed:n}),32]}function qde(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(t_(e)){const o=Uu(t.readBytes(fk)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=Ly(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=Ly(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function Vde(t,{staticPosition:e}){const n=Uu(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Uu(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=Fde(Al(i));return t.setPosition(e+32),[o,32]}function t_(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(t_);const n=FL(t.type);return!!(n&&t_({...t,type:n[1]}))}const Kde=t=>Ts(G0(t));function Yde(t){return Kde(t)}const Qde="1.0.8";let qo=class pk extends Error{constructor(e,n={}){var o;const r=n.cause instanceof pk?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof pk&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${Qde}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function od(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const iV=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,oV=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,aV=/^\(.+?\).*?$/,A6=/^tuple(?<array>(\[(\d*)\])*)$/;function gk(t){let e=t.type;if(A6.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=gk(i),s<n-1&&(e+=", ")}const r=od(A6,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,gk({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Db(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=gk(s),r!==n-1&&(e+=", ")}return e}function vI(t){var e;return t.type==="function"?`function ${t.name}(${Db(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${Db(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Db(t.inputs)})`:t.type==="error"?`error ${t.name}(${Db(t.inputs)})`:t.type==="constructor"?`constructor(${Db(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const cV=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Jde(t){return cV.test(t)}function Zde(t){return od(cV,t)}const lV=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Xde(t){return lV.test(t)}function ehe(t){return od(lV,t)}const uV=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function the(t){return uV.test(t)}function nhe(t){return od(uV,t)}const dV=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function ZL(t){return dV.test(t)}function rhe(t){return od(dV,t)}const hV=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function she(t){return hV.test(t)}function ihe(t){return od(hV,t)}const fV=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function ohe(t){return fV.test(t)}function ahe(t){return od(fV,t)}const che=/^receive\(\) external payable$/;function lhe(t){return che.test(t)}const uhe=new Set(["indexed"]),mk=new Set(["calldata","memory","storage"]);class dhe extends qo{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class hhe extends qo{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class fhe extends qo{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class phe extends qo{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class ghe extends qo{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class mhe extends qo{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class yhe extends qo{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class whe extends qo{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Y0 extends qo{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class bhe extends qo{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class vhe extends qo{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class Ehe extends qo{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class _he extends qo{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function Che(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const SR=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function yk(t,e={}){if(the(t))return Ahe(t,e);if(Xde(t))return She(t,e);if(Jde(t))return Ihe(t,e);if(she(t))return xhe(t,e);if(ohe(t))return Nhe(t);if(lhe(t))return{type:"receive",stateMutability:"payable"};throw new bhe({signature:t})}function Ahe(t,e={}){const n=nhe(t);if(!n)throw new Y0({signature:t,type:"function"});const r=hc(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(yg(r[a],{modifiers:mk,structs:e,type:"function"}));const o=[];if(n.returns){const a=hc(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(yg(a[l],{modifiers:mk,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function She(t,e={}){const n=ehe(t);if(!n)throw new Y0({signature:t,type:"event"});const r=hc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(yg(r[o],{modifiers:uhe,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function Ihe(t,e={}){const n=Zde(t);if(!n)throw new Y0({signature:t,type:"error"});const r=hc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(yg(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function xhe(t,e={}){const n=ihe(t);if(!n)throw new Y0({signature:t,type:"constructor"});const r=hc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(yg(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function Nhe(t){const e=ahe(t);if(!e)throw new Y0({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const The=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Rhe=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Phe=/^u?int$/;function yg(t,e){var d,h;const n=Che(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(SR.has(n))return SR.get(n);const r=aV.test(t),s=od(r?Rhe:The,t);if(!s)throw new phe({param:t});if(s.name&&khe(s.name))throw new ghe({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=hc(s.type),p=[],g=f.length;for(let y=0;y<g;y++)p.push(yg(f[y],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(Phe.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!pV(c))throw new fhe({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new mhe({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(mk.has(s.modifier)&&!Dhe(c,!!s.array))throw new yhe({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return SR.set(n,u),u}function hc(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?hc(a,[...e,n.trim()]):hc(a,e,`${n}${o}`,r);case"(":return hc(a,e,`${n}${o}`,r+1);case")":return hc(a,e,`${n}${o}`,r-1);default:return hc(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new _he({current:n,depth:r});return e.push(n.trim()),e}function pV(t){return t==="address"||t==="bool"||t==="function"||t==="string"||iV.test(t)||oV.test(t)}const Ohe=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function khe(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||iV.test(t)||oV.test(t)||Ohe.test(t)}function Dhe(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function gV(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!ZL(a))continue;const c=rhe(a);if(!c)throw new Y0({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=yg(p,{type:"struct"});u.push(g)}if(!u.length)throw new vhe({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=mV(c,e)}return r}const Lhe=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function mV(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(aV.test(o.type))r.push(o);else{const c=od(Lhe,o.type);if(!(c!=null&&c.type))throw new whe({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new Ehe({type:u});r.push({...o,type:`tuple${l??""}`,components:mV(e[u]??[],e,new Set([...n,u]))})}else if(pV(u))r.push(o);else throw new hhe({type:u})}}return r}function yV(t){const e=gV(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];ZL(i)||n.push(yk(i,e))}return n}function S6(t){let e;if(typeof t=="string")e=yk(t);else{const n=gV(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!ZL(i)){e=yk(i,n);break}}}if(!e)throw new dhe({signature:t});return e}function Mhe(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new me("Unable to normalize signature.");return s}const Uhe=t=>{const e=typeof t=="string"?t:vI(t);return Mhe(e)};function wV(t){return Yde(Uhe(t))}const rN=wV,PC=t=>o0(wV(t),0,4);function Yg(t){const{abi:e,args:n=[],name:r}=t,s=Pl(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?PC(a)===r:a.type==="event"?rN(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?wk(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=bV(a.inputs,o.inputs,n);if(l)throw new qle({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function wk(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Ra(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>wk(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>wk(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function bV(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return bV(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Ra(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Ra(n[r],{strict:!1}):!1)return o}}const IR="/docs/contract/decodeFunctionResult";function Qg(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=Yg({abi:e,args:n,name:r});if(!a)throw new r0(r,{docsPath:IR});i=a}if(i.type!=="function")throw new r0(void 0,{docsPath:IR});if(!i.outputs)throw new vq(i.name,{docsPath:IR});const o=RC(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const I6="/docs/contract/encodeFunctionData";function $he(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=Yg({abi:e,args:n,name:r});if(!i)throw new r0(r,{docsPath:I6});s=i}if(s.type!=="function")throw new r0(void 0,{docsPath:I6});return{abi:[s],functionName:PC(Ic(s))}}function ka(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:$he(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?wf(s.inputs,e??[]):void 0;return q0([i,o??"0x"])}function Q0({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new tk({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new tk({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const vV={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},EV={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Bhe={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function Fhe(t){const{abi:e,data:n}=t,r=o0(n,0,4);if(r==="0x")throw new CC;const i=[...e||[],EV,Bhe].find(o=>o.type==="error"&&r===PC(Ic(o)));if(!i)throw new wq(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?RC(i.inputs,o0(n,4)):void 0,errorName:i.name}}function _V({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?qr(e[i]):e[i]}`).join(", ")})`}class CV extends me{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var y;const p=n?_r(n):void 0;let g=xC({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${zL(h)} ${((y=s==null?void 0:s.nativeCurrency)==null?void 0:y.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${so(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${so(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${so(l)} gwei`,nonce:u});f&&(g+=`
${bde(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class AV extends me{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=Yg({abi:n,args:r,name:o}),l=c?_V({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?Ic(c,{includeName:!0}):void 0,d=xC({address:s&&sde(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class bk extends me{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=Fhe({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=vV[f]}else{const f=u?Ic(u,{includeName:!0}):void 0,p=u&&h?_V({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof wq&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class jhe extends me{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class zhe extends me{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class sN extends me{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function XL(t,e){var r,s,i,o,a,c;if(!(t instanceof me))return!1;const n=t.walk(l=>l instanceof bk);return n instanceof bk?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&n.reason===vV[50]):!1}function Whe(t){const{abi:e,data:n}=t,r=o0(n,0,4),s=e.find(i=>i.type==="function"&&r===PC(Ic(i)));if(!s)throw new Gle(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?RC(s.inputs,o0(n,4)):void 0}}const xR="/docs/contract/encodeErrorResult";function x6(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const c=Yg({abi:e,args:r,name:n});if(!c)throw new s6(n,{docsPath:xR});s=c}if(s.type!=="error")throw new s6(void 0,{docsPath:xR});const i=Ic(s),o=PC(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new Wle(s.name,{docsPath:xR});a=wf(s.inputs,r)}return q0([o,a])}const NR="/docs/contract/encodeFunctionResult";function Hhe(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const o=Yg({abi:e,name:n});if(!o)throw new r0(n,{docsPath:NR});s=o}if(s.type!=="function")throw new r0(void 0,{docsPath:NR});if(!s.outputs)throw new vq(s.name,{docsPath:NR});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new Eq(r)})();return wf(s.outputs,i)}const eM="x-batch-gateway:true";async function Ghe(t){const{data:e,ccipRequest:n}=t,{args:[r]}=Whe({abi:hk,data:e}),s=[],i=[];return await Promise.all(r.map(async(o,a)=>{try{i[a]=o.urls.includes(eM)?await Ghe({data:o.data,ccipRequest:n}):await n(o),s[a]=!1}catch(c){s[a]=!0,i[a]=qhe(c)}})),Hhe({abi:hk,functionName:"query",result:[s,i]})}function qhe(t){return t.name==="HttpRequestError"&&t.status?x6({abi:hk,errorName:"HttpError",args:[t.status,t.shortMessage]}):x6({abi:[EV],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function SV(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return Pl(e)?e:null}function QA(t){let e=new Uint8Array(32).fill(0);if(!t)return Kr(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=SV(n[r]),i=s?G0(s):Ts(Zp(n[r]),"bytes");e=Ts(Ta([e,i]),"bytes")}return Kr(e)}function Vhe(t){return`[${t.slice(2)}]`}function Khe(t){const e=new Uint8Array(32).fill(0);return t?SV(t)||Ts(Zp(t)):Kr(e)}function iN(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(Zp(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=Zp(s[i]);o.byteLength>255&&(o=Zp(Vhe(Khe(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const Yhe=3;function wg(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof sN?t:t instanceof me?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof CC?new jhe({functionName:i}):[Yhe,gg.code].includes(c)&&(l||u||d||h)?new bk({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof HL?u:h??d}):t;return new AV(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tM=BigInt(0),vk=BigInt(1);function EI(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function $1(t){const e=t.toString(16);return e.length&1?"0"+e:e}function IV(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?tM:BigInt("0x"+t)}function oN(t){return IV(BE(t))}function xV(t){return xc(t),IV(BE(Uint8Array.from(t).reverse()))}function nM(t,e){return DL(t.toString(16).padStart(e*2,"0"))}function NV(t,e){return nM(t,e).reverse()}function ua(t,e,n){let r;if(typeof e=="string")try{r=DL(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(kL(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const TR=t=>typeof t=="bigint"&&tM<=t;function Qhe(t,e,n){return TR(t)&&TR(e)&&TR(n)&&e<=t&&t<n}function Jhe(t,e,n,r){if(!Qhe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Zhe(t){let e;for(e=0;t>tM;t>>=vk,e+=1);return e}const aN=t=>(vk<<BigInt(t))-vk;function Xhe(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...f)=>n(o,i,...f),u=(f=r(0))=>{o=l(s(0),f),i=l(),f.length!==0&&(o=l(s(1),f),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=l();const g=i.slice();p.push(g),f+=i.length}return lp(...p)};return(f,p)=>{c(),u(f);let g;for(;!(g=p(d()));)u();return c(),g}}function rM(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function N6(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const efe="0.1.1";function tfe(){return efe}let Tr=class Ek extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof Ek){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Ek&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${tfe()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return TV(this,e)}};function TV(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?TV(t.cause,e):e?null:t}const nfe="#__bigint";function rfe(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+nfe:s,n)}function sfe(t,e){if(R6(t)>e)throw new pfe({givenSize:R6(t),maxSize:e})}const ql={zero:48,nine:57,A:65,F:70,a:97,f:102};function T6(t){if(t>=ql.zero&&t<=ql.nine)return t-ql.zero;if(t>=ql.A&&t<=ql.F)return t-(ql.A-10);if(t>=ql.a&&t<=ql.f)return t-(ql.a-10)}function ife(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new gfe({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function sM(t,e){if(Pa(t)>e)throw new vfe({givenSize:Pa(t),maxSize:e})}function ofe(t,e){if(typeof e=="number"&&e>0&&e>Pa(t)-1)throw new DV({offset:e,position:"start",size:Pa(t)})}function afe(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Pa(t)!==n-e)throw new DV({offset:n,position:"end",size:Pa(t)})}function RV(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new Efe({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const cfe=new TextEncoder;function lfe(t){return t instanceof Uint8Array?t:typeof t=="string"?dfe(t):ufe(t)}function ufe(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function dfe(t,e={}){const{size:n}=e;let r=t;n&&(sM(t,n),r=vg(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const l=T6(s.charCodeAt(c++)),u=T6(s.charCodeAt(c++));if(l===void 0||u===void 0)throw new Tr(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=l*16+u}return o}function hfe(t,e={}){const{size:n}=e,r=cfe.encode(t);return typeof n=="number"?(sfe(r,n),ffe(r,n)):r}function ffe(t,e){return ife(t,{dir:"right",size:e})}function R6(t){return t.length}let pfe=class extends Tr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},gfe=class extends Tr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const mfe=new TextEncoder,yfe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function wfe(t,e={}){const{strict:n=!1}=e;if(!t)throw new P6(t);if(typeof t!="string")throw new P6(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new O6(t);if(!t.startsWith("0x"))throw new O6(t)}function kl(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function PV(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(sM(n,e.size),bg(n,e.size)):n}function OV(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=yfe[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(sM(r,e.size),vg(r,e.size)):r}function di(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new kV({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?bg(c,r):c}function iM(t,e={}){return OV(mfe.encode(t),e)}function bg(t,e){return RV(t,{dir:"left",size:e})}function vg(t,e){return RV(t,{dir:"right",size:e})}function oM(t,e,n,r={}){const{strict:s}=r;ofe(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&afe(i,e,n),i}function Pa(t){return Math.ceil((t.length-2)/2)}function bfe(t,e={}){const{strict:n=!1}=e;try{return wfe(t,{strict:n}),!0}catch{return!1}}let kV=class extends Tr{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class P6 extends Tr{constructor(e){super(`Value \`${typeof e=="object"?rfe(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class O6 extends Tr{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let vfe=class extends Tr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class DV extends Tr{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let Efe=class extends Tr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function _fe(t){return{address:t.address,amount:di(t.amount),index:di(t.index),validatorIndex:di(t.validatorIndex)}}function LV(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:di(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:di(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:di(t.gasLimit)},...typeof t.number=="bigint"&&{number:di(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:di(t.prevRandao)},...typeof t.time=="bigint"&&{time:di(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(_fe)}}}const Cfe="0x82ad56cb",MV="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",Afe="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",Sfe="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";function UV(t,{docsPath:e,...n}){const r=(()=>{const s=eN(t,n);return s instanceof IC?t:s})();return new CV(r,{docsPath:e,...n})}function aM(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const RR=new Map;function $V({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>RR.delete(e),a=()=>c().map(({args:u})=>u),c=()=>RR.get(e)||[],l=u=>RR.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=aM();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function OC(t,e){var G,W,R,N;const{account:n=t.account,authorizationList:r,batch:s=!!((G=t.batch)!=null&&G.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:w,nonce:v,to:A,value:C,stateOverride:S,...x}=e,T=n?_r(n):void 0;if(u&&(h||f))throw new me("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&A)throw new me("Cannot provide both `code` & `to` as parameters.");const I=u&&d,k=h&&f&&A&&d,O=I||k,B=I?Nfe({code:u,data:d}):k?Tfe({data:d,factory:h,factoryData:f,to:A}):d;try{Kg(e);const P=(typeof i=="bigint"?nt(i):void 0)||o,L=l?LV(l):void 0,F=VL(S),V=(N=(R=(W=t.chain)==null?void 0:W.formatters)==null?void 0:R.transactionRequest)==null?void 0:N.format,ae=(V||V0)({...tN(x,{format:V}),from:T==null?void 0:T.address,accessList:a,authorizationList:r,blobs:c,data:B,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:w,nonce:v,to:O?void 0:A,value:C});if(s&&Ife({request:ae})&&!F&&!L)try{return await xfe(t,{...ae,blockNumber:i,blockTag:o})}catch(we){if(!(we instanceof jq)&&!(we instanceof tk))throw we}const re=(()=>{const we=[ae,P];return F&&L?[...we,F,L]:F?[...we,F]:L?[...we,{},L]:we})(),le=await t.request({method:"eth_call",params:re});return le==="0x"?{data:void 0}:{data:le}}catch(M){const P=Rfe(M),{offchainLookup:L,offchainLookupSignature:F}=await Ks(async()=>{const{offchainLookup:V,offchainLookupSignature:Z}=await import("./ccip-Dd38kJql.js");return{offchainLookup:V,offchainLookupSignature:Z}},[]);if(t.ccipRead!==!1&&(P==null?void 0:P.slice(0,10))===F&&A)return{data:await L(t,{data:P,to:A})};throw O&&(P==null?void 0:P.slice(0,10))==="0x101bb98d"?new zhe({factory:h}):UV(M,{...e,account:T,chain:t.chain})}}function Ife({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(Cfe)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function xfe(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new jq;l=Q0({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?nt(s):void 0)||i,{schedule:h}=$V({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(y){return y.reduce((w,{data:v})=>w+(v.length-2),0)>n*2},fn:async y=>{const m=y.map(A=>({allowFailure:!0,callData:A.data,target:A.to})),w=ka({abi:dk,args:[m],functionName:"aggregate3"}),v=await t.request({method:"eth_call",params:[{data:w,to:l},d]});return Qg({abi:dk,args:[m],functionName:"aggregate3",data:v||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new sN({data:f});return f==="0x"?{data:void 0}:{data:f}}function Nfe(t){const{code:e,data:n}=t;return Xx({abi:yV(["constructor(bytes, bytes)"]),bytecode:MV,args:[e,n]})}function Tfe(t){const{data:e,factory:n,factoryData:r,to:s}=t;return Xx({abi:yV(["constructor(address, bytes, address, bytes)"]),bytecode:Afe,args:[s,e,n,r]})}function Rfe(t){var n;if(!(t instanceof me))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function Dl(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=ka({abi:n,args:s,functionName:i});try{const{data:c}=await ct(t,OC,"call")({...o,data:a,to:r});return Qg({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw wg(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function Pfe(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Q0({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d=ka({abi:E6,functionName:"addr",...s!=null?{args:[QA(i),BigInt(s)]}:{args:[QA(i)]}}),h={address:l,abi:sV,functionName:"resolve",args:[Na(iN(i)),d,o??[eM]],blockNumber:n,blockTag:r},p=await ct(t,Dl,"readContract")(h);if(p[0]==="0x")return null;const g=Qg({abi:E6,args:s!=null?[QA(i),BigInt(s)]:void 0,functionName:"addr",data:p[0]});return g==="0x"||Al(g)==="0x00"?null:g}catch(d){if(a)throw d;if(XL(d,"resolve"))return null;throw d}}class Ofe extends me{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class Lb extends me{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class cM extends me{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class kfe extends me{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const Dfe=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,Lfe=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Mfe=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,Ufe=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function $fe(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function k6(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function BV({uri:t,gatewayUrls:e}){const n=Mfe.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=k6(e==null?void 0:e.ipfs,"https://ipfs.io"),s=k6(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(Dfe),{protocol:o,subpath:a,target:c,subtarget:l=""}=(i==null?void 0:i.groups)||{},u=o==="ipns:/"||a==="ipns/",d=o==="ipfs:/"||a==="ipfs/"||Lfe.test(t);if(t.startsWith("http")&&!u&&!d){let f=t;return e!=null&&e.arweave&&(f=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:f,isOnChain:!1,isEncoded:!1}}if((u||d)&&c)return{uri:`${r}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${s}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace(Ufe,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new cM({uri:t})}function FV(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new Ofe({data:t});return t.image||t.image_url||t.image_data}async function Bfe({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await lM({gatewayUrls:t,uri:FV(n)})}catch{throw new cM({uri:e})}}async function lM({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=BV({uri:e,gatewayUrls:t});if(r||await $fe(n))return n;throw new cM({uri:e})}function Ffe(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,o]=n.split(":"),[a,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new Lb({reason:"Only EIP-155 supported"});if(!o)throw new Lb({reason:"Chain ID not found"});if(!c)throw new Lb({reason:"Contract address not found"});if(!s)throw new Lb({reason:"Token ID not found"});if(!a)throw new Lb({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function jfe(t,{nft:e}){if(e.namespace==="erc721")return Dl(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return Dl(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new kfe({namespace:e.namespace})}async function zfe(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?Wfe(t,{gatewayUrls:e,record:n}):lM({uri:n,gatewayUrls:e})}async function Wfe(t,{gatewayUrls:e,record:n}){const r=Ffe(n),s=await jfe(t,{nft:r}),{uri:i,isOnChain:o,isEncoded:a}=BV({uri:s,gatewayUrls:e});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const l=a?atob(i.replace("data:application/json;base64,","")):i,u=JSON.parse(l);return lM({uri:FV(u),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),Bfe({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function jV(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Q0({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d={address:l,abi:sV,functionName:"resolve",args:[Na(iN(i)),ka({abi:v6,functionName:"text",args:[QA(i),s]}),o??[eM]],blockNumber:n,blockTag:r},f=await ct(t,Dl,"readContract")(d);if(f[0]==="0x")return null;const p=Qg({abi:v6,functionName:"text",data:f[0]});return p===""?null:p}catch(d){if(a)throw d;if(XL(d,"resolve"))return null;throw d}}async function Hfe(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const c=await ct(t,jV,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!c)return null;try{return await zfe(t,{record:c,gatewayUrls:r})}catch{return null}}async function zV(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=Q0({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:Ude,functionName:"reverse",args:[Na(iN(c))],blockNumber:n,blockTag:r},u=ct(t,Dl,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(XL(l,"reverse"))return null;throw l}}async function Gfe(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return Q0({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),a=i==null?void 0:i.ensTlds;if(a&&!a.some(l=>s.endsWith(l)))throw new Error(`${s} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await ct(t,Dl,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Na(iN(s))],blockNumber:n,blockTag:r});return c}async function WV(t,e){var y,m,w;const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f,...p}=e,g=n?_r(n):void 0;try{Kg(e);const A=(typeof r=="bigint"?nt(r):void 0)||s,C=(w=(m=(y=t.chain)==null?void 0:y.formatters)==null?void 0:m.transactionRequest)==null?void 0:w.format,x=(C||V0)({...tN(p,{format:C}),from:g==null?void 0:g.address,blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f}),T=await t.request({method:"eth_createAccessList",params:[x,A]});return{accessList:T.accessList,gasUsed:BigInt(T.gasUsed)}}catch(v){throw UV(v,{...e,account:g,chain:t.chain})}}function cN(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function qfe(t){const e=cN(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}class Vfe extends me{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const D6="/docs/contract/encodeEventTopics";function kC(t){var c;const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const l=Yg({abi:e,name:n});if(!l)throw new i6(n,{docsPath:D6});s=l}if(s.type!=="event")throw new i6(void 0,{docsPath:D6});const i=Ic(s),o=rN(i);let a=[];if(r&&"inputs"in s){const l=(c=s.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?(l==null?void 0:l.map(d=>r[d.name]))??[]:[];u.length>0&&(a=(l==null?void 0:l.map((d,h)=>Array.isArray(u[h])?u[h].map((f,p)=>L6({param:d,value:u[h][p]})):typeof u[h]<"u"&&u[h]!==null?L6({param:d,value:u[h]}):null))??[])}return[o,...a]}function L6({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return Ts(G0(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new Vfe(t.type);return wf([t],[e])}async function HV(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:a,toBlock:c}=e,l=cN(t,{method:"eth_newFilter"}),u=i?kC({abi:r,args:s,eventName:i}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?nt(o):o,toBlock:typeof c=="bigint"?nt(c):c,topics:u}]});return{abi:r,args:s,eventName:i,id:d,request:l(d),strict:!!a,type:"event"}}async function GV(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:a}={}){const c=s??(r?[r]:void 0),l=cN(t,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap(f=>kC({abi:[f],eventName:f.name,args:n}))],r&&(u=u[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?nt(i):i,toBlock:typeof a=="bigint"?nt(a):a,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:l(d),strict:!!o,toBlock:a,type:"event"}}async function qV(t){const e=cN(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function Kfe(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...a}=e,c=ka({abi:n,args:s,functionName:i});try{return await ct(t,nN,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(l){const u=a.account?_r(a.account):void 0;throw wg(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:u==null?void 0:u.address})}}async function Yfe(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}const Qfe=new Map,Jfe=new Map;function Zfe(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,Qfe),r=e(t,Jfe);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function Xfe(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=Zfe(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const epe=t=>`blockNumber.${t}`;async function DC(t,{cacheTime:e=t.cacheTime}={}){const n=await Xfe(()=>t.request({method:"eth_blockNumber"}),{cacheKey:epe(t.uid),cacheTime:e});return BigInt(n)}async function tpe(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?nt(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),Sc(i)}async function M6(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?nt(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}function lN(t,e){if(!Ra(t,{strict:!1}))throw new nf({address:t});if(!Ra(e,{strict:!1}))throw new nf({address:e});return t.toLowerCase()===e.toLowerCase()}const U6="/docs/contract/decodeEventLog";function uM(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new Hle({docsPath:U6});const c=e.find(g=>g.type==="event"&&o===rN(Ic(g)));if(!(c&&"name"in c)||c.type!=="event")throw new bq(o,{docsPath:U6});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,y)=>[g,y]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[y,m]=f[g],w=a[g];if(!w)throw new Jx({abiItem:c,param:y});h[d?m:y.name||m]=npe({param:y,value:w})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=RC(p,n);if(g)if(d)for(let y=0;y<u.length;y++)h[y]=h[y]??g.shift();else for(let y=0;y<p.length;y++)h[p[y].name]=g[y]}catch(g){if(i)throw g instanceof yq||g instanceof Uq?new UE({abiItem:c,data:n,params:p,size:vr(n)}):g}else if(i)throw new UE({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function npe({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(RC([t],e)||[])[0]}function dM(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===rN(u));if(!c)return null;const l=uM({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!rpe({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof bq)return null;if(c instanceof UE||c instanceof Jx){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function rpe(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?lN(o,a):i.type==="string"||i.type==="bytes"?Ts(G0(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function Ju(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function hM(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:a,strict:c}={}){const l=c??!1,u=o??(i?[i]:void 0);let d=[];u&&(d=[u.flatMap(g=>kC({abi:[g],eventName:g.name,args:o?void 0:a}))],i&&(d=d[0]));let h;n?h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:n}]}):h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof r=="bigint"?nt(r):r,toBlock:typeof s=="bigint"?nt(s):s}]});const f=h.map(p=>Ju(p));return u?dM({abi:u,args:a,logs:f,strict:l}):f}async function VV(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:a,toBlock:c,strict:l}=e,u=o?Yg({abi:n,name:o}):void 0,d=u?void 0:n.filter(h=>h.type==="event");return ct(t,hM,"getLogs")({address:r,args:s,blockHash:i,event:u,events:d,fromBlock:a,toBlock:c,strict:l})}class spe extends me{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function ipe(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,o,a,c,l,u,d]=await ct(t,Dl,"readContract")({abi:ope,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:l,salt:u},extensions:d,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new spe({address:n}):o}}const ope=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function ape(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function cpe(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?nt(n):void 0,o=await t.request({method:"eth_feeHistory",params:[nt(e),i||r,s]},{dedupe:!!i});return ape(o)}async function uN(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>Ju(i));return!("abi"in e)||!e.abi?s:dM({abi:e.abi,logs:s,strict:n})}async function lpe(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>Ju(i));return e.abi?dM({abi:e.abi,logs:s,strict:n}):s}async function upe(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?nt(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function dN(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?nt(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,nt(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,nt(i)]},{dedupe:!!a}),!c)throw new Wq({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||Kq)(c)}async function dpe(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([ct(t,DC,"getBlockNumber")({}),e?ct(t,dN,"getTransaction")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}const KV={"0x0":"reverted","0x1":"success"};function hpe(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>Ju(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Sc(t.transactionIndex):null,status:t.status?KV[t.status]:null,type:t.type?Vq[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function _k(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new Hq({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||hpe)(n)}async function YV(t,e){var m;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((m=t.batch)==null?void 0:m.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=Q0({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let w=0;w<l.length;w++){const{abi:v,address:A,args:C,functionName:S}=l[w];try{const x=ka({abi:v,args:C,functionName:S});p+=(x.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(x.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:x,target:A}]}catch(x){const T=wg(x,{abi:v,address:A,args:C,docsPath:"/docs/contract/multicall",functionName:S,sender:n});if(!r)throw T;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:A}]}}const g=await Promise.allSettled(h.map(w=>ct(t,Dl,"readContract")({abi:dk,account:n,address:d,args:[w],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),y=[];for(let w=0;w<g.length;w++){const v=g[w];if(v.status==="rejected"){if(!r)throw v.reason;for(let C=0;C<h[w].length;C++)y.push({status:"failure",error:v.reason,result:void 0});continue}const A=v.value;for(let C=0;C<A.length;C++){const{returnData:S,success:x}=A[C],{callData:T}=h[w][C],{abi:I,address:k,functionName:O,args:B}=l[y.length];try{if(T==="0x")throw new CC;if(!x)throw new sN({data:S});const G=Qg({abi:I,args:B,data:S,functionName:O});y.push(r?{result:G,status:"success"}:G)}catch(G){const W=wg(G,{abi:I,address:k,args:B,docsPath:"/docs/contract/multicall",functionName:O});if(!r)throw W;y.push({error:W,result:void 0,status:"failure"})}}}if(y.length!==l.length)throw new me("multicall results mismatch");return y}async function Ck(t,e){const{blockNumber:n,blockTag:r="latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:a}=e;try{const c=[];for(const h of s){const f=h.blockOverrides?LV(h.blockOverrides):void 0,p=h.calls.map(y=>{const m=y,w=m.account?_r(m.account):void 0,v=m.abi?ka(m):m.data,A={...m,data:m.dataSuffix?Ta([v||"0x",m.dataSuffix]):v,from:m.from??(w==null?void 0:w.address)};return Kg(A),V0(A)}),g=h.stateOverrides?VL(h.stateOverrides):void 0;c.push({blockOverrides:f,calls:p,stateOverrides:g})}const u=(typeof n=="bigint"?nt(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:o,validation:a},u]})).map((h,f)=>({...Yq(h),calls:h.calls.map((p,g)=>{var k,O;const{abi:y,args:m,functionName:w,to:v}=s[f].calls[g],A=((k=p.error)==null?void 0:k.data)??p.returnData,C=BigInt(p.gasUsed),S=(O=p.logs)==null?void 0:O.map(B=>Ju(B)),x=p.status==="0x1"?"success":"failure",T=y&&x==="success"&&A!=="0x"?Qg({abi:y,data:A,functionName:w}):null,I=(()=>{var G;if(x==="success")return;let B;if(((G=p.error)==null?void 0:G.data)==="0x"?B=new CC:p.error&&(B=new sN(p.error)),!!B)return wg(B,{abi:y??[],address:v??"0x",args:m,functionName:w??"<unknown>"})})();return{data:A,gasUsed:C,logs:S,status:x,...x==="success"?{result:T}:{error:I}}})}))}catch(c){const l=c,u=eN(l,{});throw u instanceof IC?l:u}}function QV(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=UL(lfe(t));return n==="Bytes"?r:OV(r)}let fpe=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const ppe={checksum:new fpe(8192)},PR=ppe.checksum,gpe=/^0x[a-fA-F0-9]{40}$/;function hN(t,e={}){const{strict:n=!0}=e;if(!gpe.test(t))throw new $6({address:t,cause:new ype});if(n){if(t.toLowerCase()===t)return;if(mpe(t)!==t)throw new $6({address:t,cause:new wpe})}}function mpe(t){if(PR.has(t))return PR.get(t);hN(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=QV(hfe(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return PR.set(t,s),s}function Ak(t,e={}){const{strict:n=!0}=e??{};try{return hN(t,{strict:n}),!0}catch{return!1}}class $6 extends Tr{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class ype extends Tr{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class wpe extends Tr{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function Sk(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new Tr("Unable to normalize signature.");return s}function Ik(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Ak(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>Ik(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>Ik(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function JV(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return JV(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Ak(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Ak(n[r],{strict:!1}):!1)return o}}function ZV(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?S6(t):t;return{...r,...n?{hash:my(r)}:{}}}function bpe(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=bfe(e,{strict:!1}),o=t.filter(l=>i?l.type==="function"||l.type==="error"?XV(l)===oM(e,0,4):l.type==="event"?my(l)===e:!1:"name"in l&&l.name===e);if(o.length===0)throw new xk({name:e});if(o.length===1)return{...o[0],...s?{hash:my(o[0])}:{}};let a;for(const l of o){if(!("inputs"in l))continue;if(!r||r.length===0){if(!l.inputs||l.inputs.length===0)return{...l,...s?{hash:my(l)}:{}};continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==r.length)continue;if(r.every((d,h)=>{const f="inputs"in l&&l.inputs[h];return f?Ik(d,f):!1})){if(a&&"inputs"in a&&a.inputs){const d=JV(l.inputs,a.inputs,r);if(d)throw new Epe({abiItem:l,type:d[0]},{abiItem:a,type:d[1]})}a=l}}const c=(()=>{if(a)return a;const[l,...u]=o;return{...l,overloads:u}})();if(!c)throw new xk({name:e});return{...c,...s?{hash:my(c)}:{}}}function XV(t){return oM(my(t),0,4)}function vpe(t){const e=typeof t=="string"?t:vI(t);return Sk(e)}function my(t){return typeof t!="string"&&"hash"in t&&t.hash?t.hash:QV(iM(vpe(t)))}class Epe extends Tr{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${Sk(vI(e.abiItem))}\`, and`,`\`${n.type}\` in \`${Sk(vI(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class xk extends Tr{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const _pe=/^(.*)\[([0-9]*)\]$/,Cpe=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,eK=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Ape({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(fM({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function fM({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=Ope(r.type);if(s){const[i,o]=s;return Ipe(n,{checksumAddress:t,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return Ppe(n,{checksumAddress:t,parameter:r});if(r.type==="address")return Spe(n,{checksum:t});if(r.type==="bool")return Npe(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=eK.exec(r.type)??[];return Tpe(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return xpe(n,{type:r.type});if(r.type==="string")return Rpe(n);throw new sK(r.type)}function pM(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Pa(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(di(e+s,{size:32})),r.push(a),s+=Pa(a)):n.push(a)}return kl(...n,...r)}function Spe(t,e){const{checksum:n=!1}=e;return hN(t,{strict:n}),{dynamic:!1,encoded:bg(t.toLowerCase())}}function Ipe(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new Dpe(t);if(!i&&t.length!==r)throw new kpe({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const l=fM({checksumAddress:n,parameter:s,value:t[c]});l.dynamic&&(o=!0),a.push(l)}if(i||o){const c=pM(a);if(i){const l=di(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?kl(l,c):l}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:kl(...a.map(({encoded:c})=>c))}}function xpe(t,{type:e}){const[,n]=e.split("bytes"),r=Pa(t);if(!n){let s=t;return r%32!==0&&(s=vg(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:kl(bg(di(r,{size:32})),s)}}if(r!==Number.parseInt(n))throw new nK({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:vg(t)}}function Npe(t){if(typeof t!="boolean")throw new Tr(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:bg(PV(t))}}function Tpe(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new kV({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:di(t,{size:32,signed:e})}}function Rpe(t){const e=iM(t),n=Math.ceil(Pa(e)/32),r=[];for(let s=0;s<n;s++)r.push(vg(oM(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:kl(vg(di(Pa(e),{size:32})),...r)}}function Ppe(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,l=fM({checksumAddress:n,parameter:a,value:t[c]});i.push(l),l.dynamic&&(s=!0)}return{dynamic:s,encoded:s?pM(i):kl(...i.map(({encoded:o})=>o))}}function Ope(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function tK(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new rK({expectedLength:t.length,givenLength:e.length});const s=Ape({checksumAddress:r,parameters:t,values:e}),i=pM(s);return i.length===0?"0x":i}function Nk(t,e){if(t.length!==e.length)throw new rK({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(Nk.encode(s,i))}return kl(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return hN(c),bg(c.toLowerCase(),s?32:0)}if(n==="string")return iM(r);if(n==="bytes")return r;if(n==="bool")return bg(PV(r),s?32:1);const i=n.match(eK);if(i){const[c,l,u="256"]=i,d=Number.parseInt(u)/8;return di(r,{size:s?32:d,signed:l==="int"})}const o=n.match(Cpe);if(o){const[c,l]=o;if(Number.parseInt(l)!==(r.length-2)/2)throw new nK({expectedSize:Number.parseInt(l),value:r});return vg(r,s?32:0)}const a=n.match(_pe);if(a&&Array.isArray(r)){const[c,l]=a,u=[];for(let d=0;d<r.length;d++)u.push(e(l,r[d],!0));return u.length===0?"0x":kl(...u)}throw new sK(n)}t.encode=e})(Nk||(Nk={}));class kpe extends Tr{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class nK extends Tr{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Pa(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class rK extends Tr{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class Dpe extends Tr{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class sK extends Tr{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function Lpe(t,e){var s;const{bytecode:n,args:r}=e;return kl(n,(s=t.inputs)!=null&&s.length&&(r!=null&&r.length)?tK(t.inputs,r):"0x")}function Mpe(t){return ZV(t)}function Upe(t,...e){const{overloads:n}=t,r=n?$pe([t,...n],t.name,{args:e[0]}):t,s=Bpe(r),i=e.length>0?tK(r.inputs,e[0]):void 0;return i?kl(s,i):s}function bm(t,e={}){return ZV(t,e)}function $pe(t,e,n){const r=bpe(t,e,n);if(r.type!=="function")throw new xk({name:e,type:"function"});return r}function Bpe(t){return XV(t)}const Fpe="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",Uc="0x0000000000000000000000000000000000000000",B1=new Zx(8192);function jpe(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(B1.get(n))return B1.get(n);const r=t().finally(()=>B1.delete(n));return B1.set(n,r),r}async function _I(t){return new Promise(e=>setTimeout(e,t))}function CI(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await _I(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function zpe(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new dp(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new dp(new Error("method not supported"),{method:l});const u=s?n0(`${c}.${qr(n)}`):void 0;return jpe(()=>CI(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case FE.code:throw new FE(f);case jE.code:throw new jE(f);case zE.code:throw new zE(f,{method:n.method});case WE.code:throw new WE(f);case gg.code:throw new gg(f);case mg.code:throw new mg(f);case HE.code:throw new HE(f);case Fh.code:throw new Fh(f);case a0.code:throw new a0(f);case dp.code:throw new dp(f,{method:n.method});case c0.code:throw new c0(f);case GE.code:throw new GE(f);case $r.code:throw new $r(f);case qE.code:throw new qE(f);case VE.code:throw new VE(f);case KE.code:throw new KE(f);case YE.code:throw new YE(f);case Ol.code:throw new Ol(f);case l0.code:throw new l0(f);case QE.code:throw new QE(f);case JE.code:throw new JE(f);case ZE.code:throw new ZE(f);case XE.code:throw new XE(f);case e_.code:throw new e_(f);case u0.code:throw new u0(f);case 5e3:throw new $r(f);default:throw h instanceof me?h:new ode(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof Wv){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>Wpe(h)}),{enabled:s,id:u})}}function Wpe(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===c0.code||t.code===gg.code:t instanceof Wv&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function Hpe(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function iK(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function Gpe(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const B6=Gpe();function qpe(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await iK(async({signal:p})=>{const g={...a,body:Array.isArray(r)?qr(r.map(v=>({jsonrpc:"2.0",id:v.id??B6.take(),...v}))):qr({jsonrpc:"2.0",id:r.id??B6.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},y=new Request(t,g),m=await(s==null?void 0:s(y,g))??{...g,url:t};return await fetch(m.url??t,m)},{errorInstance:new p6({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new Wv({body:r,details:qr(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof Wv||h instanceof p6?h:new Wv({body:r,cause:h,url:t})}}}}class Vpe extends me{constructor({domain:e}){super(`Invalid domain "${qr(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class Kpe extends me{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class Ype extends me{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function Qpe(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:dK({domain:e}),...t.types};uK({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(Jpe({domain:e,types:s})),r!=="EIP712Domain"&&i.push(oK({data:n,primaryType:r,types:s})),Ts(Ta(i))}function Jpe({domain:t,types:e}){return oK({data:t,primaryType:"EIP712Domain",types:e})}function oK({data:t,primaryType:e,types:n}){const r=aK({data:t,primaryType:e,types:n});return Ts(r)}function aK({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[Zpe({primaryType:e,types:n})];for(const i of n[e]){const[o,a]=lK({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(o),s.push(a)}return wf(r,s)}function Zpe({primaryType:t,types:e}){const n=Na(Xpe({primaryType:t,types:e}));return Ts(n)}function Xpe({primaryType:t,types:e}){let n="";const r=cK({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function cK({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])cK({primaryType:i.type,types:e},n);return n}function lK({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},Ts(aK({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},Ts(r)];if(n==="string")return[{type:"bytes32"},Ts(Na(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(o=>lK({name:e,type:s,types:t,value:o}));return[{type:"bytes32"},Ts(wf(i.map(([o])=>o),i.map(([,o])=>o)))]}return[{type:n},r]}function ege(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return qr({domain:o,message:a,primaryType:r,types:s})}function uK(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(Lq);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,y,m]=h;nt(d,{signed:y==="int",size:Number.parseInt(m)/8})}if(u==="address"&&typeof d=="string"&&!Ra(d))throw new nf({address:d});const f=u.match(Rue);if(f){const[g,y]=f;if(y&&vr(d)!==Number.parseInt(y))throw new Vle({expectedSize:Number.parseInt(y),givenSize:vr(d)})}const p=s[u];p&&(tge(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new Vpe({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new Kpe({primaryType:r,types:s})}function dK({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function tge(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new Ype({type:t})}const nge=`Ethereum Signed Message:
`;function rge(t){const e=typeof t=="string"?n0(t):typeof t.raw=="string"?t.raw:Kr(t.raw),n=n0(`${nge}${vr(e)}`);return Ta([n,e])}function hK(t,e){return Ts(rge(t),e)}const fK="0x6492649264926492649264926492649264926492649264926492649264926492";function sge(t){return yI(t,-32)===fK}function ige(t){const{address:e,data:n,signature:r,to:s="hex"}=t,i=q0([wf([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),fK]);return s==="hex"?i:xa(i)}class oge extends me{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function age(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new oge({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const cge="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function lge(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:a,validation:c}=e,l=e.account?_r(e.account):void 0;if(o&&!l)throw new me("`account` is required when `traceAssetChanges` is true");const u=l?Lpe(Mpe("constructor(bytes, bytes)"),{bytecode:MV,args:[cge,Upe(bm("function getBalance(address)"),[l.address])]}):void 0,d=o?await Promise.all(e.calls.map(async P=>{if(!P.data&&!P.abi)return;const{accessList:L}=await WV(t,{account:l.address,...P,data:P.abi?ka(P):P.data});return L.map(({address:F,storageKeys:V})=>V.length>0?F:null)})).then(P=>P.flat().filter(Boolean)):[],h=await Ck(t,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:u}],stateOverrides:i},{calls:d.map((P,L)=>({abi:[bm("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:P,from:Uc,nonce:L})),stateOverrides:[{address:Uc,nonce:0}]}]:[],{calls:[...s,{}].map(P=>({...P,from:l==null?void 0:l.address})),stateOverrides:i},...o?[{calls:[{data:u}]},{calls:d.map((P,L)=>({abi:[bm("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:P,from:Uc,nonce:L})),stateOverrides:[{address:Uc,nonce:0}]},{calls:d.map((P,L)=>({to:P,abi:[bm("function decimals() returns (uint256)")],functionName:"decimals",from:Uc,nonce:L})),stateOverrides:[{address:Uc,nonce:0}]},{calls:d.map((P,L)=>({to:P,abi:[bm("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:Uc,nonce:L})),stateOverrides:[{address:Uc,nonce:0}]},{calls:d.map((P,L)=>({to:P,abi:[bm("function symbol() returns (string)")],functionName:"symbol",from:Uc,nonce:L})),stateOverrides:[{address:Uc,nonce:0}]}]:[]],traceTransfers:a,validation:c}),f=o?h[2]:h[0],[p,g,,y,m,w,v,A]=o?h:[],{calls:C,...S}=f,x=C.slice(0,-1)??[],T=(p==null?void 0:p.calls)??[],I=(g==null?void 0:g.calls)??[],k=[...T,...I].map(P=>P.status==="success"?jo(P.data):null),O=(y==null?void 0:y.calls)??[],B=(m==null?void 0:m.calls)??[],G=[...O,...B].map(P=>P.status==="success"?jo(P.data):null),W=((w==null?void 0:w.calls)??[]).map(P=>P.status==="success"?P.result:null),R=((A==null?void 0:A.calls)??[]).map(P=>P.status==="success"?P.result:null),N=((v==null?void 0:v.calls)??[]).map(P=>P.status==="success"?P.result:null),M=[];for(const[P,L]of G.entries()){const F=k[P];if(typeof L!="bigint"||typeof F!="bigint")continue;const V=W[P-1],Z=R[P-1],ae=N[P-1],re=P===0?{address:Fpe,decimals:18,symbol:"ETH"}:{address:d[P-1],decimals:ae||V?Number(V??1):void 0,symbol:Z??void 0};M.some(le=>le.token.address===re.address)||M.push({token:re,value:{pre:F,post:L,diff:L-F}})}return{assetChanges:M,block:S,results:x}}const OR=new Map,F6=new Map;let uge=0;function Zu(t,e,n){const r=++uge,s=()=>OR.get(t)||[],i=()=>{const u=s();OR.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=F6.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(OR.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&F6.set(t,l),o}function J0(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await _I(c);const l=async()=>{s&&(await t({unpoll:i}),await _I(r),l())};l()})(),i}function dge(t,{blockTag:e="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:a,pollingInterval:c=t.pollingInterval}){const l=typeof a<"u"?a:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),u=o??!1;let d;return l?(()=>{const p=qr(["watchBlocks",t.uid,e,n,r,u,c]);return Zu(p,{onBlock:s,onError:i},g=>J0(async()=>{var y;try{const m=await ct(t,vl,"getBlock")({blockTag:e,includeTransactions:u});if(m.number!==null&&(d==null?void 0:d.number)!=null){if(m.number===d.number)return;if(m.number-d.number>1&&n)for(let w=(d==null?void 0:d.number)+1n;w<m.number;w++){const v=await ct(t,vl,"getBlock")({blockNumber:w,includeTransactions:u});g.onBlock(v,d),d=v}}((d==null?void 0:d.number)==null||e==="pending"&&(m==null?void 0:m.number)==null||m.number!==null&&m.number>d.number)&&(g.onBlock(m,d),d=m)}catch(m){(y=g.onError)==null||y.call(g,m)}},{emitOnBegin:r,interval:c}))})():(()=>{let p=!0,g=!0,y=()=>p=!1;return(async()=>{try{r&&ct(t,vl,"getBlock")({blockTag:e,includeTransactions:u}).then(v=>{p&&g&&(s(v,void 0),g=!1)}).catch(i);const m=(()=>{if(t.transport.type==="fallback"){const v=t.transport.transports.find(A=>A.config.type==="webSocket"||A.config.type==="ipc");return v?v.value:t.transport}return t.transport})(),{unsubscribe:w}=await m.subscribe({params:["newHeads"],async onData(v){var C;if(!p)return;const A=await ct(t,vl,"getBlock")({blockNumber:(C=v.result)==null?void 0:C.number,includeTransactions:u}).catch(()=>{});p&&(s(A,d),g=!1,d=A)},onError(v){i==null||i(v)}});y=w,p||y()}catch(m){i==null||i(m)}})(),()=>y()})()}function pK(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=qr(["watchBlockNumber",t.uid,e,n,o]);return Zu(d,{onBlockNumber:r,onError:s},h=>J0(async()=>{var f;try{const p=await ct(t,DC,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=qr(["watchBlockNumber",t.uid,e,n]);return Zu(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const m=t.transport.transports.find(w=>w.config.type==="webSocket"||w.config.type==="ipc");return m?m.value:t.transport}return t.transport})(),{unsubscribe:y}=await g.subscribe({params:["newHeads"],onData(m){var v;if(!f)return;const w=jo((v=m.result)==null?void 0:v.number);h.onBlockNumber(w,c),c=w},onError(m){var w;(w=h.onError)==null||w.call(h,m)}});p=y,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function fN(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function hge(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:a,onLogs:c,poll:l,pollingInterval:u=t.pollingInterval,strict:d}){const h=typeof l<"u"?l:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),f=d??!1;return h?(()=>{const y=qr(["watchEvent",e,n,r,t.uid,s,u,o]);return Zu(y,{onLogs:c,onError:a},m=>{let w;o!==void 0&&(w=o-1n);let v,A=!1;const C=J0(async()=>{var S;if(!A){try{v=await ct(t,GV,"createEventFilter")({address:e,args:n,event:s,events:i,strict:f,fromBlock:o})}catch{}A=!0;return}try{let x;if(v)x=await ct(t,uN,"getFilterChanges")({filter:v});else{const T=await ct(t,DC,"getBlockNumber")({});w&&w!==T?x=await ct(t,hM,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:w+1n,toBlock:T}):x=[],w=T}if(x.length===0)return;if(r)m.onLogs(x);else for(const T of x)m.onLogs([T])}catch(x){v&&x instanceof mg&&(A=!1),(S=m.onError)==null||S.call(m,x)}},{emitOnBegin:!0,interval:u});return async()=>{v&&await ct(t,fN,"uninstallFilter")({filter:v}),C()}})})():(()=>{let y=!0,m=()=>y=!1;return(async()=>{try{const w=(()=>{if(t.transport.type==="fallback"){const S=t.transport.transports.find(x=>x.config.type==="webSocket"||x.config.type==="ipc");return S?S.value:t.transport}return t.transport})(),v=i??(s?[s]:void 0);let A=[];v&&(A=[v.flatMap(x=>kC({abi:[x],eventName:x.name,args:n}))],s&&(A=A[0]));const{unsubscribe:C}=await w.subscribe({params:["logs",{address:e,topics:A}],onData(S){var T;if(!y)return;const x=S.result;try{const{eventName:I,args:k}=uM({abi:v??[],data:x.data,topics:x.topics,strict:f}),O=Ju(x,{args:k,eventName:I});c([O])}catch(I){let k,O;if(I instanceof UE||I instanceof Jx){if(d)return;k=I.abiItem.name,O=(T=I.abiItem.inputs)==null?void 0:T.some(G=>!("name"in G&&G.name))}const B=Ju(x,{args:O?[]:{},eventName:k});c([B])}},onError(S){a==null||a(S)}});m=C,y||m()}catch(w){a==null||a(w)}})(),()=>m()})()}function gK(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=qr(["watchPendingTransactions",t.uid,e,i]);return Zu(l,{onTransactions:r,onError:n},u=>{let d;const h=J0(async()=>{var f;try{if(!d)try{d=await ct(t,qV,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await ct(t,uN,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await ct(t,fN,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function fge(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>SC(r))}async function pge(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function gge(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?_r(n):void 0,i=r?[s==null?void 0:s.address,[nt(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}const mK="0x5792579257925792579257925792579257925792579257925792579257925792",yK=nt(0,{size:32});async function mge(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?_r(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?ka({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?Ta([p,f.dataSuffix]):p,to:f.to,value:f.value?nt(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:nt(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(w=>!w.optional)){const w="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new l0(new me(w,{details:w}))}if(a&&d.length>1){const m="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new u0(new me(m,{details:m}))}const p=[];for(const m of d){const w=TC(t,{account:u,chain:s,data:m.data,to:m.to,value:m.value?jo(m.value):void 0});p.push(w),o>0&&await new Promise(v=>setTimeout(v,o))}const g=await Promise.allSettled(p);if(g.every(m=>m.status==="rejected"))throw g[0].reason;const y=g.map(m=>m.status==="fulfilled"?m.value:yK);return{id:Ta([...y,nt(s.id,{size:32}),mK])}}throw Gq(h,{...e,account:u,chain:e.chain})}}async function wK(t,e){async function n(u){if(u.endsWith(mK.slice(2))){const h=Al(yI(u,-64,-32)),f=yI(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(y=>yK.slice(2)!==y?t.request({method:"eth_getTransactionReceipt",params:[`0x${y}`]},{dedupe:!0}):void 0)),g=p.some(y=>y===null)?100:p.every(y=>(y==null?void 0:y.status)==="0x1")?200:p.every(y=>(y==null?void 0:y.status)==="0x0")?500:600;return{atomic:!1,chainId:Sc(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?Sc(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:jo(u.blockNumber),gasUsed:jo(u.gasUsed),status:KV[u.status]})))??[],statusCode:l,status:c,version:o}}async function yge(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function wge(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=qr(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=aM();let u;const d=Zu(o,{resolve:c,reject:l},h=>{const f=J0(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await wK(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new bge({id:n}))},i):void 0,await a}class bge extends me{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}function vge(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function Ege(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?Sc(t.nonce):void 0,storageProof:t.storageProof?vge(t.storageProof):void 0}}async function _ge(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?nt(n):void 0,a=await t.request({method:"eth_getProof",params:[e,s,o||i]});return Ege(a)}async function bK(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=qr(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:y,reject:m}=aM(),w=a?setTimeout(()=>{p(),f(),m(new rde({hash:n}))},a):void 0;return f=Zu(c,{onReplaced:r,resolve:y,reject:m},v=>{p=ct(t,pK,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(A){const C=x=>{clearTimeout(w),p(),x(),f()};let S=A;if(!h)try{if(d){if(e>1&&(!d.blockNumber||S-d.blockNumber+1n<e))return;C(()=>v.resolve(d));return}if(l||(h=!0,await CI(async()=>{l=await ct(t,dN,"getTransaction")({hash:n}),l.blockNumber&&(S=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await ct(t,_k,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||S-d.blockNumber+1n<e))return;C(()=>v.resolve(d))}catch(x){if(x instanceof Wq||x instanceof Hq){if(!l){h=!1;return}try{u=l,h=!0;const T=await CI(()=>ct(t,vl,"getBlock")({blockNumber:S,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:O})=>O instanceof qq});h=!1;const I=T.transactions.find(({from:O,nonce:B})=>O===u.from&&B===u.nonce);if(!I||(d=await ct(t,_k,"getTransactionReceipt")({hash:I.hash}),e>1&&(!d.blockNumber||S-d.blockNumber+1n<e)))return;let k="replaced";I.to===u.to&&I.value===u.value&&I.input===u.input?k="repriced":I.from===I.to&&I.value===0n&&(k="cancelled"),C(()=>{var O;(O=v.onReplaced)==null||O.call(v,{reason:k,replacedTransaction:u,transaction:I,transactionReceipt:d}),v.resolve(d)})}catch(T){C(()=>v.reject(T))}}else C(()=>v.reject(x))}}})}),g}async function Cge(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Ou(n))}async function Age(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function vK(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new qg({docsPath:"/docs/eip7702/prepareAuthorization"});const i=_r(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:_r(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await ct(t,K0,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await ct(t,YL,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&lN(o.address,i.address))&&(a.nonce+=1)),a}async function Sge(t,e){const{account:n=t.account}=e;if(!n)throw new qg({docsPath:"/docs/eip7702/signAuthorization"});const r=_r(n);if(!r.signAuthorization)throw new YA({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await vK(t,e);return r.signAuthorization(s)}async function Ige(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new qg({docsPath:"/docs/actions/wallet/signTransaction"});const i=_r(n);Kg({account:i,...e});const o=await ct(t,K0,"getChainId")({});r!==null&&zq({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||V0;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:nt(o),from:i.address}]},{retryCount:0})}async function EK(t,{account:e=t.account,message:n}){if(!e)throw new qg({docsPath:"/docs/actions/wallet/signMessage"});const r=_r(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?n0(n):n.raw instanceof Uint8Array?Na(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function xge(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new qg({docsPath:"/docs/actions/wallet/signTypedData"});const o=_r(n),a={EIP712Domain:dK({domain:r}),...e.types};if(uK({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=ege({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function Nge(t,e){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...a}=e,c=a.account?_r(a.account):t.account,l=ka({abi:n,args:s,functionName:o});try{const{data:u}=await ct(t,OC,"call")({batch:!1,data:`${l}${i?i.replace("0x",""):""}`,to:r,...a,account:c}),d=Qg({abi:n,args:s,functionName:o,data:u||"0x"}),h=n.filter(f=>"name"in f&&f.name===e.functionName);return{result:d,request:{abi:h,address:r,args:s,dataSuffix:i,functionName:o,...a,account:c}}}catch(u){throw wg(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}async function Tge(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:nt(e)}]},{retryCount:0})}let _K=class extends LL{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,sue(e);const r=AC(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i0(i)}update(e){return s0(this),this.iHash.update(e),this}digestInto(e){s0(this),xc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const CK=(t,e,n)=>new _K(t,e).update(n).digest();CK.create=(t,e)=>new _K(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xi=BigInt(0),vi=BigInt(1),hp=BigInt(2),Rge=BigInt(3),AK=BigInt(4),SK=BigInt(5),IK=BigInt(8);function wa(t,e){const n=t%e;return n>=Xi?n:e+n}function Jo(t,e,n){let r=t;for(;e-- >Xi;)r*=r,r%=n;return r}function j6(t,e){if(t===Xi)throw new Error("invert: expected non-zero number");if(e<=Xi)throw new Error("invert: expected positive modulus, got "+e);let n=wa(t,e),r=e,s=Xi,i=vi;for(;n!==Xi;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==vi)throw new Error("invert: does not exist");return wa(s,e)}function xK(t,e){const n=(t.ORDER+vi)/AK,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function Pge(t,e){const n=(t.ORDER-SK)/IK,r=t.mul(e,hp),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,hp),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function Oge(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-vi,n=0;for(;e%hp===Xi;)e/=hp,n++;let r=hp;const s=pN(t);for(;z6(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return xK;let i=s.pow(r,e);const o=(e+vi)/hp;return function(c,l){if(c.is0(l))return l;if(z6(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),h=c.pow(l,e),f=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,g=c.sqr(h);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===u)throw new Error("Cannot find square root");const y=vi<<BigInt(u-p-1),m=c.pow(d,y);u=p,d=c.sqr(m),h=c.mul(h,d),f=c.mul(f,m)}return f}}function kge(t){return t%AK===Rge?xK:t%IK===SK?Pge:Oge(t)}const Dge=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Lge(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Dge.reduce((r,s)=>(r[s]="function",r),e);return rM(t,n),t}function Mge(t,e,n){if(n<Xi)throw new Error("invalid exponent, negatives unsupported");if(n===Xi)return t.ONE;if(n===vi)return e;let r=t.ONE,s=e;for(;n>Xi;)n&vi&&(r=t.mul(r,s)),s=t.sqr(s),n>>=vi;return r}function NK(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function z6(t,e){const n=(t.ORDER-vi)/hp,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Uge(t,e){e!==void 0&&$E(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function pN(t,e,n=!1,r={}){if(t<=Xi)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=Uge(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:aN(o),ZERO:Xi,ONE:vi,create:u=>wa(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return Xi<=u&&u<t},is0:u=>u===Xi,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&vi)===vi,neg:u=>wa(-u,t),eql:(u,d)=>u===d,sqr:u=>wa(u*u,t),add:(u,d)=>wa(u+d,t),sub:(u,d)=>wa(u-d,t),mul:(u,d)=>wa(u*d,t),pow:(u,d)=>Mge(l,u,d),div:(u,d)=>wa(u*j6(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>j6(u,t),sqrt:i||(u=>(c||(c=kge(t)),c(l,u))),toBytes:u=>n?NV(u,a):nM(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?xV(u):oN(u)},invertBatch:u=>NK(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function TK(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function RK(t){const e=TK(t);return e+Math.ceil(e/2)}function $ge(t,e,n=!1){const r=t.length,s=TK(e),i=RK(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?xV(t):oN(t),a=wa(o,e-vi)+vi;return n?NV(a,s):nM(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const d0=BigInt(0),fp=BigInt(1);function Hv(t,e){const n=e.negate();return t?n:e}function Bge(t,e,n){const r=o=>o.pz,s=NK(t.Fp,n.map(r));return n.map((o,a)=>o.toAffine(s[a])).map(t.fromAffine)}function PK(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function kR(t,e){PK(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=aN(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function W6(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=fp);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function Fge(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function jge(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const DR=new WeakMap,OK=new WeakMap;function LR(t){return OK.get(t)||1}function H6(t){if(t!==d0)throw new Error("invalid wNAF")}function zge(t,e){return{constTimeNegate:Hv,hasPrecomputes(n){return LR(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>d0;)r&fp&&(s=s.add(i)),i=i.double(),r>>=fp;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=kR(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=kR(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=W6(s,c,a);s=l,d?o=o.add(Hv(f,r[p])):i=i.add(Hv(h,r[u]))}return H6(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=kR(n,e);for(let a=0;a<o.windows&&s!==d0;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=W6(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return H6(s),i},getPrecomputes(n,r,s){let i=DR.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),DR.set(r,i))),i},wNAFCached(n,r,s){const i=LR(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=LR(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){PK(r,e),OK.set(n,r),DR.delete(n)}}}function Wge(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>d0||r>d0;)n&fp&&(i=i.add(s)),r&fp&&(o=o.add(s)),s=s.double(),n>>=fp,r>>=fp;return{p1:i,p2:o}}function Hge(t,e,n,r){Fge(n,t),jge(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=Zhe(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=aN(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const y=r[g],m=Number(y>>BigInt(f)&l);u[m]=u[m].add(n[g])}let p=o;for(let g=u.length-1,y=o;g>0;g--)y=y.add(u[g]),p=p.add(y);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function G6(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Lge(e),e}else return pN(t)}function Gge(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>d0))throw new Error(`CURVE.${a} must be positive bigint`)}const r=G6(e.p,n.Fp),s=G6(e.n,n.Fn),o=["Gx","Gy","a","b"];for(const a of o)if(!r.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function q6(t){t.lowS!==void 0&&EI("lowS",t.lowS),t.prehash!==void 0&&EI("prehash",t.prehash)}class qge extends Error{constructor(e=""){super(e)}}const uu={Err:qge,_tlv:{encode:(t,e)=>{const{Err:n}=uu;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=$1(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?$1(s.length/2|128):"";return $1(t)+i+s+e},decode(t,e){const{Err:n}=uu;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=uu;if(t<Gv)throw new e("integer: negative integers are not allowed");let n=$1(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=uu;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return oN(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=uu,s=ua("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=uu,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Gv=BigInt(0),qv=BigInt(1),Vge=BigInt(2),F1=BigInt(3),Kge=BigInt(4);function Yge(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function kK(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=ua("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function Qge(t,e={}){const{Fp:n,Fn:r}=Gge("weierstrass",t,e),{h:s,n:i}=t;rM(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(T,I,k){const{x:O,y:B}=I.toAffine(),G=n.toBytes(O);if(EI("isCompressed",k),k){a();const W=!n.isOdd(B);return lp(DK(W),G)}else return lp(Uint8Array.of(4),G,n.toBytes(B))}function l(T){xc(T);const I=n.BYTES,k=I+1,O=2*I+1,B=T.length,G=T[0],W=T.subarray(1);if(B===k&&(G===2||G===3)){const R=n.fromBytes(W);if(!n.isValid(R))throw new Error("bad point: is not on curve, wrong x");const N=h(R);let M;try{M=n.sqrt(N)}catch(F){const V=F instanceof Error?": "+F.message:"";throw new Error("bad point: is not on curve, sqrt error"+V)}a();const P=n.isOdd(M);return(G&1)===1!==P&&(M=n.neg(M)),{x:R,y:M}}else if(B===O&&G===4){const R=n.fromBytes(W.subarray(I*0,I*1)),N=n.fromBytes(W.subarray(I*1,I*2));if(!f(R,N))throw new Error("bad point: is not on curve");return{x:R,y:N}}else throw new Error(`bad point: got length ${B}, expected compressed=${k} or uncompressed=${O}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=Yge(n,t.a,t.b);function f(T,I){const k=n.sqr(I),O=h(T);return n.eql(k,O)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,F1),Kge),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function y(T,I,k=!1){if(!n.isValid(I)||k&&n.is0(I))throw new Error(`bad point coordinate ${T}`);return I}function m(T){if(!(T instanceof C))throw new Error("ProjectivePoint expected")}const w=N6((T,I)=>{const{px:k,py:O,pz:B}=T;if(n.eql(B,n.ONE))return{x:k,y:O};const G=T.is0();I==null&&(I=G?n.ONE:n.inv(B));const W=n.mul(k,I),R=n.mul(O,I),N=n.mul(B,I);if(G)return{x:n.ZERO,y:n.ZERO};if(!n.eql(N,n.ONE))throw new Error("invZ was invalid");return{x:W,y:R}}),v=N6(T=>{if(T.is0()){if(e.allowInfinityPoint&&!n.is0(T.py))return;throw new Error("bad point: ZERO")}const{x:I,y:k}=T.toAffine();if(!n.isValid(I)||!n.isValid(k))throw new Error("bad point: x or y not field elements");if(!f(I,k))throw new Error("bad point: equation left != right");if(!T.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function A(T,I,k,O,B){return k=new C(n.mul(k.px,T),k.py,k.pz),I=Hv(O,I),k=Hv(B,k),I.add(k)}class C{constructor(I,k,O){this.px=y("x",I),this.py=y("y",k,!0),this.pz=y("z",O),Object.freeze(this)}static fromAffine(I){const{x:k,y:O}=I||{};if(!I||!n.isValid(k)||!n.isValid(O))throw new Error("invalid affine point");if(I instanceof C)throw new Error("projective point not allowed");return n.is0(k)&&n.is0(O)?C.ZERO:new C(k,O,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){return Bge(C,"pz",I)}static fromBytes(I){return xc(I),C.fromHex(I)}static fromHex(I){const k=C.fromAffine(d(ua("pointHex",I)));return k.assertValidity(),k}static fromPrivateKey(I){const k=kK(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return C.BASE.multiply(k(I))}static msm(I,k){return Hge(C,r,I,k)}precompute(I=8,k=!0){return x.setWindowSize(this,I),k||this.multiply(F1),this}_setWindowSize(I){this.precompute(I)}assertValidity(){v(this)}hasEvenY(){const{y:I}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(I)}equals(I){m(I);const{px:k,py:O,pz:B}=this,{px:G,py:W,pz:R}=I,N=n.eql(n.mul(k,R),n.mul(G,B)),M=n.eql(n.mul(O,R),n.mul(W,B));return N&&M}negate(){return new C(this.px,n.neg(this.py),this.pz)}double(){const{a:I,b:k}=t,O=n.mul(k,F1),{px:B,py:G,pz:W}=this;let R=n.ZERO,N=n.ZERO,M=n.ZERO,P=n.mul(B,B),L=n.mul(G,G),F=n.mul(W,W),V=n.mul(B,G);return V=n.add(V,V),M=n.mul(B,W),M=n.add(M,M),R=n.mul(I,M),N=n.mul(O,F),N=n.add(R,N),R=n.sub(L,N),N=n.add(L,N),N=n.mul(R,N),R=n.mul(V,R),M=n.mul(O,M),F=n.mul(I,F),V=n.sub(P,F),V=n.mul(I,V),V=n.add(V,M),M=n.add(P,P),P=n.add(M,P),P=n.add(P,F),P=n.mul(P,V),N=n.add(N,P),F=n.mul(G,W),F=n.add(F,F),P=n.mul(F,V),R=n.sub(R,P),M=n.mul(F,L),M=n.add(M,M),M=n.add(M,M),new C(R,N,M)}add(I){m(I);const{px:k,py:O,pz:B}=this,{px:G,py:W,pz:R}=I;let N=n.ZERO,M=n.ZERO,P=n.ZERO;const L=t.a,F=n.mul(t.b,F1);let V=n.mul(k,G),Z=n.mul(O,W),ae=n.mul(B,R),re=n.add(k,O),le=n.add(G,W);re=n.mul(re,le),le=n.add(V,Z),re=n.sub(re,le),le=n.add(k,B);let we=n.add(G,R);return le=n.mul(le,we),we=n.add(V,ae),le=n.sub(le,we),we=n.add(O,B),N=n.add(W,R),we=n.mul(we,N),N=n.add(Z,ae),we=n.sub(we,N),P=n.mul(L,le),N=n.mul(F,ae),P=n.add(N,P),N=n.sub(Z,P),P=n.add(Z,P),M=n.mul(N,P),Z=n.add(V,V),Z=n.add(Z,V),ae=n.mul(L,ae),le=n.mul(F,le),Z=n.add(Z,ae),ae=n.sub(V,ae),ae=n.mul(L,ae),le=n.add(le,ae),V=n.mul(Z,le),M=n.add(M,V),V=n.mul(we,le),N=n.mul(re,N),N=n.sub(N,V),V=n.mul(re,Z),P=n.mul(we,P),P=n.add(P,V),new C(N,M,P)}subtract(I){return this.add(I.negate())}is0(){return this.equals(C.ZERO)}multiply(I){const{endo:k}=e;if(!r.isValidNot0(I))throw new Error("invalid scalar: out of range");let O,B;const G=W=>x.wNAFCached(this,W,C.normalizeZ);if(k){const{k1neg:W,k1:R,k2neg:N,k2:M}=k.splitScalar(I),{p:P,f:L}=G(R),{p:F,f:V}=G(M);B=L.add(V),O=A(k.beta,P,F,W,N)}else{const{p:W,f:R}=G(I);O=W,B=R}return C.normalizeZ([O,B])[0]}multiplyUnsafe(I){const{endo:k}=e,O=this;if(!r.isValid(I))throw new Error("invalid scalar: out of range");if(I===Gv||O.is0())return C.ZERO;if(I===qv)return O;if(x.hasPrecomputes(this))return this.multiply(I);if(k){const{k1neg:B,k1:G,k2neg:W,k2:R}=k.splitScalar(I),{p1:N,p2:M}=Wge(C,O,G,R);return A(k.beta,N,M,B,W)}else return x.wNAFCachedUnsafe(O,I)}multiplyAndAddUnsafe(I,k,O){const B=this.multiplyUnsafe(k).add(I.multiplyUnsafe(O));return B.is0()?void 0:B}toAffine(I){return w(this,I)}isTorsionFree(){const{isTorsionFree:I}=e;return s===qv?!0:I?I(C,this):x.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:I}=e;return s===qv?this:I?I(C,this):this.multiplyUnsafe(s)}toBytes(I=!0){return EI("isCompressed",I),this.assertValidity(),u(C,this,I)}toRawBytes(I=!0){return this.toBytes(I)}toHex(I=!0){return BE(this.toBytes(I))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}C.BASE=new C(t.Gx,t.Gy,n.ONE),C.ZERO=new C(n.ZERO,n.ONE,n.ZERO),C.Fp=n,C.Fn=r;const S=r.BITS,x=zge(C,e.endo?Math.ceil(S/2):S);return C}function DK(t){return Uint8Array.of(t?2:3)}function Jge(t,e,n={}){rM(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||hue,s=e.hmac||((O,...B)=>CK(e.hash,O,lp(...B))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(O){const B=a>>qv;return O>B}function u(O){return l(O)?o.neg(O):O}function d(O,B){if(!o.isValidNot0(B))throw new Error(`invalid signature ${O}: out of range 1..CURVE.n`)}class h{constructor(B,G,W){d("r",B),d("s",G),this.r=B,this.s=G,W!=null&&(this.recovery=W),Object.freeze(this)}static fromCompact(B){const G=o.BYTES,W=ua("compactSignature",B,G*2);return new h(o.fromBytes(W.subarray(0,G)),o.fromBytes(W.subarray(G,G*2)))}static fromDER(B){const{r:G,s:W}=uu.toSig(ua("DER",B));return new h(G,W)}assertValidity(){}addRecoveryBit(B){return new h(this.r,this.s,B)}recoverPublicKey(B){const G=i.ORDER,{r:W,s:R,recovery:N}=this;if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");if(a*Vge<G&&N>1)throw new Error("recovery id is ambiguous for h>1 curve");const P=N===2||N===3?W+a:W;if(!i.isValid(P))throw new Error("recovery id 2 or 3 invalid");const L=i.toBytes(P),F=t.fromHex(lp(DK((N&1)===0),L)),V=o.inv(P),Z=v(ua("msgHash",B)),ae=o.create(-Z*V),re=o.create(R*V),le=t.BASE.multiplyUnsafe(ae).add(F.multiplyUnsafe(re));if(le.is0())throw new Error("point at infinify");return le.assertValidity(),le}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(B){if(B==="compact")return lp(o.toBytes(this.r),o.toBytes(this.s));if(B==="der")return DL(uu.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return BE(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return BE(this.toBytes("compact"))}}const f=kK(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(O){try{return f(O),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const O=a;return $ge(r(RK(O)),O)},precompute(O=8,B=t.BASE){return B.precompute(O,!1)}};function g(O,B=!0){return t.fromPrivateKey(O).toBytes(B)}function y(O){if(typeof O=="bigint")return!1;if(O instanceof t)return!0;const G=ua("key",O).length,W=i.BYTES,R=W+1,N=2*W+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===R))return G===R||G===N}function m(O,B,G=!0){if(y(O)===!0)throw new Error("first arg must be private key");if(y(B)===!1)throw new Error("second arg must be public key");return t.fromHex(B).multiply(f(O)).toBytes(G)}const w=e.bits2int||function(O){if(O.length>8192)throw new Error("input is too large");const B=oN(O),G=O.length*8-c;return G>0?B>>BigInt(G):B},v=e.bits2int_modN||function(O){return o.create(w(O))},A=aN(c);function C(O){return Jhe("num < 2^"+c,O,Gv,A),o.toBytes(O)}function S(O,B,G=x){if(["recovered","canonical"].some(re=>re in G))throw new Error("sign() legacy options not supported");const{hash:W}=e;let{lowS:R,prehash:N,extraEntropy:M}=G;R==null&&(R=!0),O=ua("msgHash",O),q6(G),N&&(O=ua("prehashed msgHash",W(O)));const P=v(O),L=f(B),F=[C(L),C(P)];if(M!=null&&M!==!1){const re=M===!0?r(i.BYTES):M;F.push(ua("extraEntropy",re))}const V=lp(...F),Z=P;function ae(re){const le=w(re);if(!o.isValidNot0(le))return;const we=o.inv(le),ee=t.BASE.multiply(le).toAffine(),ce=o.create(ee.x);if(ce===Gv)return;const pe=o.create(we*o.create(Z+ce*L));if(pe===Gv)return;let he=(ee.x===ce?0:2)|Number(ee.y&qv),Ee=pe;return R&&l(pe)&&(Ee=u(pe),he^=1),new h(ce,Ee,he)}return{seed:V,k2sig:ae}}const x={lowS:e.lowS,prehash:!1},T={lowS:e.lowS,prehash:!1};function I(O,B,G=x){const{seed:W,k2sig:R}=S(O,B,G);return Xhe(e.hash.outputLen,o.BYTES,s)(W,R)}t.BASE.precompute(8);function k(O,B,G,W=T){const R=O;B=ua("msgHash",B),G=ua("publicKey",G),q6(W);const{lowS:N,prehash:M,format:P}=W;if("strict"in W)throw new Error("options.strict was renamed to lowS");if(P!==void 0&&!["compact","der","js"].includes(P))throw new Error('format must be "compact", "der" or "js"');const L=typeof R=="string"||kL(R),F=!L&&!P&&typeof R=="object"&&R!==null&&typeof R.r=="bigint"&&typeof R.s=="bigint";if(!L&&!F)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let V,Z;try{if(F)if(P===void 0||P==="js")V=new h(R.r,R.s);else throw new Error("invalid format");if(L){try{P!=="compact"&&(V=h.fromDER(R))}catch(Ee){if(!(Ee instanceof uu.Err))throw Ee}!V&&P!=="der"&&(V=h.fromCompact(R))}Z=t.fromHex(G)}catch{return!1}if(!V||N&&V.hasHighS())return!1;M&&(B=e.hash(B));const{r:ae,s:re}=V,le=v(B),we=o.inv(re),ee=o.create(le*we),ce=o.create(ae*we),pe=t.BASE.multiplyUnsafe(ee).add(Z.multiplyUnsafe(ce));return pe.is0()?!1:o.create(pe.x)===ae}return Object.freeze({getPublicKey:g,getSharedSecret:m,sign:I,verify:k,utils:p,Point:t,Signature:h})}function Zge(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=pN(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function Xge(t){const{CURVE:e,curveOpts:n}=Zge(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function eme(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function tme(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=Xge(t),s=Qge(e,n),i=Jge(s,r,n);return eme(t,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function nme(t,e){const n=r=>tme({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const AI={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const rme=BigInt(1),Tk=BigInt(2),V6=(t,e)=>(t+e/Tk)/e;function sme(t){const e=AI.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=Jo(u,n,e)*u%e,h=Jo(d,n,e)*u%e,f=Jo(h,Tk,e)*l%e,p=Jo(f,s,e)*f%e,g=Jo(p,i,e)*p%e,y=Jo(g,a,e)*g%e,m=Jo(y,c,e)*y%e,w=Jo(m,a,e)*g%e,v=Jo(w,n,e)*u%e,A=Jo(v,o,e)*p%e,C=Jo(A,r,e)*l%e,S=Jo(C,Tk,e);if(!Rk.eql(Rk.sqr(S),t))throw new Error("Cannot find square root");return S}const Rk=pN(AI.p,void 0,void 0,{sqrt:sme}),LK=nme({...AI,Fp:Rk,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=AI.n,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-rme*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=V6(i*t,e),c=V6(-r*t,e);let l=wa(t-a*n-c*s,e),u=wa(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},Xq),ime=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:LK},Symbol.toStringTag,{value:"Module"}));function ome({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new LK.Signature(jo(t),jo(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:xa(o)}async function gM(t,e){var d,h,f;const{address:n,factory:r,factoryData:s,hash:i,signature:o,universalSignatureVerifierAddress:a=(f=(h=(d=t.chain)==null?void 0:d.contracts)==null?void 0:h.universalSignatureVerifier)==null?void 0:f.address,...c}=e,l=Pl(o)?o:typeof o=="object"&&"r"in o&&"s"in o?ome(o):Kr(o),u=await(async()=>!r&&!s||sge(l)?l:ige({address:r,data:s,signature:l}))();try{const p=a?{to:a,data:ka({abi:_6,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:Xx({abi:_6,args:[n,i,u],bytecode:Sfe}),...c},{data:g}=await ct(t,OC,"call")(p);return Dle(g??"0x0")}catch(p){try{if(lN(Ou(n),await Mq({hash:i,signature:o})))return!0}catch{}if(p instanceof CV)return!1;throw p}}async function ame(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...o}){const a=hK(n);return gM(t,{address:e,factory:r,factoryData:s,hash:a,signature:i,...o})}async function cme(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:a,types:c,domain:l,...u}=e,d=Qpe({message:o,primaryType:a,types:c,domain:l});return gM(t,{address:n,factory:r,factoryData:s,hash:d,signature:i,...u})}async function lme(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function ume(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:a,onError:c,onLogs:l,poll:u,pollingInterval:d=t.pollingInterval,strict:h}=e;return(typeof u<"u"?u:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{const y=h??!1,m=qr(["watchContractEvent",r,s,i,t.uid,o,d,y,a]);return Zu(m,{onLogs:l,onError:c},w=>{let v;a!==void 0&&(v=a-1n);let A,C=!1;const S=J0(async()=>{var x;if(!C){try{A=await ct(t,HV,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:y,fromBlock:a})}catch{}C=!0;return}try{let T;if(A)T=await ct(t,uN,"getFilterChanges")({filter:A});else{const I=await ct(t,DC,"getBlockNumber")({});v&&v<I?T=await ct(t,VV,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:v+1n,toBlock:I,strict:y}):T=[],v=I}if(T.length===0)return;if(i)w.onLogs(T);else for(const I of T)w.onLogs([I])}catch(T){A&&T instanceof mg&&(C=!1),(x=w.onError)==null||x.call(w,T)}},{emitOnBegin:!0,interval:d});return async()=>{A&&await ct(t,fN,"uninstallFilter")({filter:A}),S()}})})():(()=>{const y=h??!1,m=qr(["watchContractEvent",r,s,i,t.uid,o,d,y]);let w=!0,v=()=>w=!1;return Zu(m,{onLogs:l,onError:c},A=>((async()=>{try{const C=(()=>{if(t.transport.type==="fallback"){const T=t.transport.transports.find(I=>I.config.type==="webSocket"||I.config.type==="ipc");return T?T.value:t.transport}return t.transport})(),S=o?kC({abi:n,eventName:o,args:s}):[],{unsubscribe:x}=await C.subscribe({params:["logs",{address:r,topics:S}],onData(T){var k;if(!w)return;const I=T.result;try{const{eventName:O,args:B}=uM({abi:n,data:I.data,topics:I.topics,strict:h}),G=Ju(I,{args:B,eventName:O});A.onLogs([G])}catch(O){let B,G;if(O instanceof UE||O instanceof Jx){if(h)return;B=O.abiItem.name,G=(k=O.abiItem.inputs)==null?void 0:k.some(R=>!("name"in R&&R.name))}const W=Ju(I,{args:G?[]:{},eventName:B});A.onLogs([W])}},onError(T){var I;(I=A.onError)==null||I.call(A,T)}});v=x,w||v()}catch(C){c==null||c(C)}})(),()=>v()))})()}async function MK(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new qg({docsPath:"/docs/contract/writeContract"});const l=r?_r(r):null,u=ka({abi:n,args:i,functionName:a});try{return await ct(t,TC,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw wg(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function $o(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const JA="2.17.3",dme=()=>`@wagmi/core@${JA}`;var UK=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},SI,$K;let ad=class Pk extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return dme()}constructor(e,n={}){var i;super(),SI.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof Pk?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof Pk&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return UK(this,SI,"m",$K).call(this,this,e)}};SI=new WeakSet,$K=function t(e,n){return n!=null&&n(e)?e:e.cause?UK(this,SI,"m",t).call(this,e.cause,n):e};class n_ extends ad{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class hme extends ad{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class fme extends ad{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class pme extends ad{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class gme extends ad{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class mme extends ad{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function ZA(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new hme;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const Ok=256;let j1=Ok,z1;function BK(t=11){if(!z1||j1+t>Ok*2){z1="",j1=0;for(let e=0;e<Ok;e++)z1+=(256+Math.random()*256|0).toString(16).substring(1)}return z1.substring(j1,j1+++t)}function FK(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?_r(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},y={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:BK()};function m(w){return v=>{const A=v(w);for(const S in y)delete A[S];const C={...w,...A};return Object.assign(C,{extend:m(C)})}}return Object.assign(y,{extend:m(y)})}function mM({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=BK();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:zpe(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function yme(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>mM({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function II(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=wme,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=mM({key:n,name:r,async request({method:g,params:y}){let m;const w=async(v=0)=>{const A=h[v]({...d,chain:c,retryCount:0,timeout:u});try{const C=await A.request({method:g,params:y});return f({method:g,params:y,response:C,transport:A,status:"success"}),C}catch(C){if(f({error:C,method:g,params:y,transport:A,status:"error"}),i(C)||v===h.length-1||(m??(m=h.slice(v+1).some(S=>{const{include:x,exclude:T}=S({chain:c}).config.methods||{};return x?x.includes(g):T?!T.includes(g):!0})),!m))throw C;return w(v+1)}};return w()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};bme({chain:c,interval:g.interval??l,onTransports:y=>h=y,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function wme(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===a0.code||t.code===$r.code||up.nodeMessage.test(t.message)||t.code===5e3))}function bme({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const y=g({chain:t,retryCount:0,timeout:i}),m=Date.now();let w,v;try{await(r?r({transport:y}):y.request({method:"net_listening"})),v=1}catch{v=0}finally{w=Date.now()}return{latency:w-m,success:v}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:y})=>y)))),p=o.map((g,y)=>{const m=u.map(S=>S[y].latency),v=1-m.reduce((S,x)=>S+x,0)/m.length/f,A=u.map(S=>S[y].success),C=A.reduce((S,x)=>S+x,0)/A.length;return C===0?[0,y]:[l*v+c*C,y]}).sort((g,y)=>y[0]-g[0]);n(p.map(([,g])=>o[g])),await _I(e),d()};d()}class vme extends me{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function vh(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},y=e.retryCount??h,m=f??e.timeout??1e4,w=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!w)throw new vme;const v=qpe(w,{fetchOptions:r,onRequest:a,onResponse:c,timeout:m});return mM({key:s,methods:i,name:o,async request({method:A,params:C}){const S={method:A,params:C},{schedule:x}=$V({id:w,wait:g,shouldSplitBatch(O){return O.length>p},fn:O=>v.request({body:O}),sort:(O,B)=>O.id-B.id}),T=async O=>n?x(O):[await v.request({body:O})],[{error:I,result:k}]=await T(S);if(u)return{error:I,result:k};if(I)throw new HL({body:S,error:I,url:w});return k},retryCount:y,retryDelay:l,timeout:m,type:"http"},{fetchOptions:r,url:w})}}function Eme(t){var d,h,f;const{scheme:e,statement:n,...r}=((d=t.match(_me))==null?void 0:d.groups)??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...l}=((h=t.match(Cme))==null?void 0:h.groups)??{},u=(f=t.split("Resources:")[1])==null?void 0:f.split(`
- `).slice(1);return{...r,...l,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...u?{resources:u}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const _me=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,Cme=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function Ame(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!Ra(r.address,{strict:!1})||e&&!lN(r.address,e))return!1}catch{return!1}return!0}async function Sme(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...l}=e,u=Eme(s);if(!u.address||!Ame({address:n,domain:r,message:u,nonce:i,scheme:o,time:c}))return!1;const h=hK(s);return gM(t,{address:u.address,hash:h,signature:a,...l})}function Ime(t){return{call:e=>OC(t,e),createAccessList:e=>WV(t,e),createBlockFilter:()=>qfe(t),createContractEventFilter:e=>HV(t,e),createEventFilter:e=>GV(t,e),createPendingTransactionFilter:()=>qV(t),estimateContractGas:e=>Kfe(t,e),estimateGas:e=>nN(t,e),getBalance:e=>KL(t,e),getBlobBaseFee:()=>Yfe(t),getBlock:e=>vl(t,e),getBlockNumber:e=>DC(t,e),getBlockTransactionCount:e=>tpe(t,e),getBytecode:e=>M6(t,e),getChainId:()=>K0(t),getCode:e=>M6(t,e),getContractEvents:e=>VV(t,e),getEip712Domain:e=>ipe(t,e),getEnsAddress:e=>Pfe(t,e),getEnsAvatar:e=>Hfe(t,e),getEnsName:e=>zV(t,e),getEnsResolver:e=>Gfe(t,e),getEnsText:e=>jV(t,e),getFeeHistory:e=>cpe(t,e),estimateFeesPerGas:e=>pde(t,e),getFilterChanges:e=>uN(t,e),getFilterLogs:e=>lpe(t,e),getGasPrice:()=>qL(t),getLogs:e=>hM(t,e),getProof:e=>_ge(t,e),estimateMaxPriorityFeePerGas:e=>fde(t,e),getStorageAt:e=>upe(t,e),getTransaction:e=>dN(t,e),getTransactionConfirmations:e=>dpe(t,e),getTransactionCount:e=>YL(t,e),getTransactionReceipt:e=>_k(t,e),multicall:e=>YV(t,e),prepareTransactionRequest:e=>NC(t,e),readContract:e=>Dl(t,e),sendRawTransaction:e=>JL(t,e),simulate:e=>Ck(t,e),simulateBlocks:e=>Ck(t,e),simulateCalls:e=>lge(t,e),simulateContract:e=>Nge(t,e),verifyMessage:e=>ame(t,e),verifySiweMessage:e=>Sme(t,e),verifyTypedData:e=>cme(t,e),uninstallFilter:e=>fN(t,e),waitForTransactionReceipt:e=>bK(t,e),watchBlocks:e=>dge(t,e),watchBlockNumber:e=>pK(t,e),watchContractEvent:e=>ume(t,e),watchEvent:e=>hge(t,e),watchPendingTransactions:e=>gK(t,e)}}function xme(t){return{addChain:e=>Ule(t,e),deployContract:e=>Mde(t,e),getAddresses:()=>fge(t),getCallsStatus:e=>wK(t,e),getCapabilities:e=>gge(t,e),getChainId:()=>K0(t),getPermissions:()=>pge(t),prepareAuthorization:e=>vK(t,e),prepareTransactionRequest:e=>NC(t,e),requestAddresses:()=>Cge(t),requestPermissions:e=>Age(t,e),sendCalls:e=>mge(t,e),sendRawTransaction:e=>JL(t,e),sendTransaction:e=>TC(t,e),showCallsStatus:e=>yge(t,e),signAuthorization:e=>Sge(t,e),signMessage:e=>EK(t,e),signTransaction:e=>Ige(t,e),signTypedData:e=>xge(t,e),switchChain:e=>Tge(t,e),waitForCallsStatus:e=>wge(t,e),watchAsset:e=>lme(t,e),writeContract:e=>MK(t,e)}}async function LC(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new mme({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new fme;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new gme({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=_r(e.account??n.accounts[0]);if(o&&(o.address=Ou(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new pme({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return FK({account:o,chain:a,name:"Connector Client",transport:l=>yme(c)({...l,retryCount:0})})}async function kk(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function Nme(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await LC(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return $o(o,nN,"estimateGas")({...s,account:i})}function jK(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(Xue[t])}function My(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function Tme(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return $o(o,YV,"multicall")({allowFailure:n,contracts:s,...i})}function zK(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return $o(s,Dl,"readContract")(r)}async function Rme(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>Tme(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof AV)throw c;const l=()=>o.map(u=>zK(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function Pme(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await K6(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await K6(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=gq(Al(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await $o(c,KL,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:Vg(u,jK(a)),symbol:d.nativeCurrency.symbol,value:u}}async function K6(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await Rme(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=Vg(c??"0",jK(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function Y6(t){return t.state.chainId}function Eg(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Eg(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!Eg(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function Ome(t,e={}){let n;try{n=t.getClient(e)}catch{}return n}let W1=[];function Ja(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||Eg(W1,e)?W1:(W1=e,e)}let MR=[];function Q6(t){const e=t.connectors;return Eg(MR,e)?MR:(MR=e,e)}function kme(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return $o(s,zV,"getEnsName")(r)}function Dk(t,e={}){const n=Ome(t,e);return n==null?void 0:n.extend(Ime)}async function Dme(t,e={}){return(await LC(t,e)).extend(xme)}async function Lme(t,e){const{account:n,chainId:r,...s}=e,i=n??My(t).address,o=t.getClient({chainId:r});return $o(o,NC,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let UR=!1;async function Lk(t,e={}){var l,u;if(UR)return[];UR=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const y=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:y}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),UR=!1,a}async function Mme(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await LC(t,{account:n??void 0,chainId:r,connector:s}),await $o(o,TC,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function Ume(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await LC(t,{account:n,connector:r}),$o(i,EK,"signMessage")({...s,...n?{account:n}:{}})}class Md extends ad{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class $me extends ad{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function J6(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new $me({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new n_;return t.setState(a=>({...a,chainId:r})),i}function WK(t,e){const{onChange:n}=e;return t.subscribe(()=>My(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return Eg(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function Bme(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function HK(t,e){const{onChange:n}=e;return t.subscribe(()=>Ja(t),n,{equalityFn:Eg})}function GK(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function Fme(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=$o(l,gK,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}function jme(t,e){const{onChange:n}=e;return t.subscribe(()=>Dk(t),n,{equalityFn(r,s){return(r==null?void 0:r.uid)===(s==null?void 0:s.uid)}})}async function qK(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await $o(i,bK,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await $o(i,dN,"getTransaction")({hash:a.transactionHash}),d=await $o(i,OC,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?gq(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function VK(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await LC(t,{account:n??void 0,chainId:r,connector:s}),await $o(o,MK,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function QGe(t){return t}gN.type="injected";function gN(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...zme[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:gN.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,y,m,w;const d=await this.getProvider();if(!d)throw new Md;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(y=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:y.map(A=>Ou(A)),h.length>0&&(h=await this.getAccounts())}catch(v){const A=v;if(A.code===$r.code)throw new $r(A);if(A.code===Fh.code)throw A}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(C=>Ou(C))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let v=await this.getChainId();if(l&&v!==l){const A=await this.switchChain({chainId:l}).catch(C=>{if(C.code===$r.code)throw C;return{id:v}});v=(A==null?void 0:A.id)??v}return e&&await((m=c.storage)==null?void 0:m.removeItem(`${this.id}.disconnected`)),t.target||await((w=c.storage)==null?void 0:w.setItem("injected.connected",!0)),{accounts:h,chainId:v}}catch(v){const A=v;throw A.code===$r.code?new $r(A):A.code===Fh.code?new Fh(A):A}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new Md;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await iK(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new Md;return(await l.request({method:"eth_accounts"})).map(d=>Ou(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new Md;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=XA(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(m=>window.addEventListener("ethereum#initialized",()=>m(p()),{once:!0}))]:[],new Promise(m=>setTimeout(()=>m(p()),g))]))return!0}throw new Md}return!!(await CI(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,y,m;const d=await this.getProvider();if(!d)throw new Md;const h=c.chains.find(w=>w.id===u);if(!h)throw new Ol(new n_);const f=new Promise(w=>{const v=A=>{"chainId"in A&&A.chainId===u&&(c.emitter.off("change",v),w())};c.emitter.on("change",v)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:nt(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(w){const v=w;if(v.code===4902||((g=(p=v==null?void 0:v.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:A,...C}=h.blockExplorers??{};let S;l!=null&&l.blockExplorerUrls?S=l.blockExplorerUrls:A&&(S=[A.url,...Object.values(C).map(I=>I.url)]);let x;(y=l==null?void 0:l.rpcUrls)!=null&&y.length?x=l.rpcUrls:x=[((m=h.rpcUrls.default)==null?void 0:m.http[0])??""];const T={blockExplorerUrls:S,chainId:nt(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:x};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[T]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new $r(new Error("User rejected switch after adding network."))}),f]),h}catch(A){throw new $r(A)}throw v.code===$r.code?new $r(v):new Ol(v)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>Ou(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const zme={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:XA(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return XA(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:XA(t,"isPhantom")}}};function XA(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function Wme(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function Hme(){const t=new Set;let e=[];const n=()=>Wme(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const Gme=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},qme=Gme;function Vme(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const Mk=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Mk(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Mk(r)(n)}}}},Kme=(t,e)=>(n,r,s)=>{let i={storage:Vme(()=>localStorage),partialize:g=>g,version:0,merge:(g,y)=>({...y,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,y)=>{d(g,y),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,y;if(!l)return;o=!1,a.forEach(w=>{var v;return w((v=r())!=null?v:h)});const m=((y=i.onRehydrateStorage)==null?void 0:y.call(i,(g=r())!=null?g:h))||void 0;return Mk(l.getItem.bind(l))(i.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==i.version){if(i.migrate)return[!0,i.migrate(w.state,w.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var v;const[A,C]=w;if(f=i.merge(C,(v=r())!=null?v:h),n(f,!0),A)return u()}).then(()=>{m==null||m(f,void 0),f=r(),o=!0,c.forEach(w=>w(f))}).catch(w=>{m==null||m(void 0,w)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},Yme=Kme,Z6=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},$R=t=>t?Z6(t):Z6;var KK={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var y=this._events[g],m=arguments.length,w,v;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),m){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,h),!0;case 5:return y.fn.call(y.context,u,d,h,f),!0;case 6:return y.fn.call(y.context,u,d,h,f,p),!0}for(v=1,w=new Array(m-1);v<m;v++)w[v-1]=arguments[v];y.fn.apply(y.context,w)}else{var A=y.length,C;for(v=0;v<A;v++)switch(y[v].once&&this.removeListener(l,y[v].fn,void 0,!0),m){case 1:y[v].fn.call(y[v].context);break;case 2:y[v].fn.call(y[v].context,u);break;case 3:y[v].fn.call(y[v].context,u,d);break;case 4:y[v].fn.call(y[v].context,u,d,h);break;default:if(!w)for(C=1,w=new Array(m-1);C<m;C++)w[C-1]=arguments[C];y[v].fn.apply(y[v].context,w)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,y=[],m=p.length;g<m;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&y.push(p[g]);y.length?this._events[f]=y.length===1?y[0]:y:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(KK);var Qme=KK.exports;const Jme=zg(Qme);class Zme{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new Jme})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function Xme(t){return new Zme(t)}function eye(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function X6(t,e){return t.slice(0,e).join(".")||"."}function e8(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function tye(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=e8(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=e8(s,c);if(u!==0)return r?e.call(this,a,c,X6(i,u)):`[ref=${X6(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function nye(t,e,n,r){return JSON.stringify(t,tye((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function rye(t){const{deserialize:e=eye,key:n="wagmi",serialize:r=nye,storage:s=YK}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const YK={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function sye(){const t=typeof window<"u"&&window.localStorage?window.localStorage:YK;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const Uk=256;let H1=Uk,G1;function iye(t=11){if(!G1||H1+t>Uk*2){G1="",H1=0;for(let e=0;e<Uk;e++)G1+=(256+Math.random()*256|0).toString(16).substring(1)}return G1.substring(H1,H1+++t)}function oye(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=rye({storage:sye()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?Hme():void 0,a=$R(()=>i.chains),c=$R(()=>{const C=[],S=new Set;for(const x of i.connectors??[]){const T=l(x);if(C.push(T),!s&&T.rdns){const I=typeof T.rdns=="string"?[T.rdns]:T.rdns;for(const k of I)S.add(k)}}if(!s&&o){const x=o.getProviders();for(const T of x)S.has(T.info.rdns)||C.push(l(u(T)))}return C});function l(C){var T;const S=Xme(iye()),x={...C({emitter:S,chains:a.getState(),storage:n,transports:i.transports}),emitter:S,uid:S.uid};return S.on("connect",v),(T=x.setup)==null||T.call(x),x}function u(C){const{info:S}=C,x=C.provider;return gN({target:{...S,id:S.rdns,provider:x}})}const d=new Map;function h(C={}){const S=C.chainId??y.getState().chainId,x=a.getState().find(I=>I.id===S);if(C.chainId&&!x)throw new n_;{const I=d.get(y.getState().chainId);if(I&&!x)return I;if(!x)throw new n_}{const I=d.get(S);if(I)return I}let T;if(i.client)T=i.client({chain:x});else{const I=x.id,k=a.getState().map(G=>G.id),O={},B=Object.entries(i);for(const[G,W]of B)if(!(G==="chains"||G==="client"||G==="connectors"||G==="transports"))if(typeof W=="object")if(I in W)O[G]=W[I];else{if(k.some(N=>N in W))continue;O[G]=W}else O[G]=W;T=FK({...O,chain:x,batch:O.batch??{multicall:!0},transport:G=>i.transports[I]({...G,connectors:c})})}return d.set(S,T),T}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";JA.startsWith(g)?p=Number.parseInt(JA.replace(g,"")):p=Number.parseInt(JA.split(".")[0]??"0");const y=$R(qme(n?Yme(f,{migrate(C,S){if(S===p)return C;const x=f(),T=m(C,x.chainId);return{...x,chainId:T}},name:"store",partialize(C){return{connections:{__type:"Map",value:Array.from(C.connections.entries()).map(([S,x])=>{const{id:T,name:I,type:k,uid:O}=x.connector;return[S,{...x,connector:{id:T,name:I,type:k,uid:O}}]})},chainId:C.chainId,current:C.current}},merge(C,S){typeof C=="object"&&C&&"status"in C&&delete C.status;const x=m(C,S.chainId);return{...S,...C,chainId:x}},skipHydration:s,storage:n,version:p}):f));y.setState(f());function m(C,S){return C&&typeof C=="object"&&"chainId"in C&&typeof C.chainId=="number"&&a.getState().some(x=>x.id===C.chainId)?C.chainId:S}r&&y.subscribe(({connections:C,current:S})=>{var x;return S?(x=C.get(S))==null?void 0:x.chainId:void 0},C=>{if(a.getState().some(x=>x.id===C))return y.setState(x=>({...x,chainId:C??x.chainId}))}),o==null||o.subscribe(C=>{const S=new Set,x=new Set;for(const I of c.getState())if(S.add(I.id),I.rdns){const k=typeof I.rdns=="string"?[I.rdns]:I.rdns;for(const O of k)x.add(O)}const T=[];for(const I of C){if(x.has(I.info.rdns))continue;const k=l(u(I));S.has(k.id)||T.push(k)}n&&!y.persist.hasHydrated()||c.setState(I=>[...I,...T],!0)});function w(C){y.setState(S=>{const x=S.connections.get(C.uid);return x?{...S,connections:new Map(S.connections).set(C.uid,{accounts:C.accounts??x.accounts,chainId:C.chainId??x.chainId,connector:x.connector})}:S})}function v(C){y.getState().status==="connecting"||y.getState().status==="reconnecting"||y.setState(S=>{const x=c.getState().find(T=>T.uid===C.uid);return x?(x.emitter.listenerCount("connect")&&x.emitter.off("connect",w),x.emitter.listenerCount("change")||x.emitter.on("change",w),x.emitter.listenerCount("disconnect")||x.emitter.on("disconnect",A),{...S,connections:new Map(S.connections).set(C.uid,{accounts:C.accounts,chainId:C.chainId,connector:x}),current:C.uid,status:"connected"}):S})}function A(C){y.setState(S=>{const x=S.connections.get(C.uid);if(x){const I=x.connector;I.emitter.listenerCount("change")&&x.connector.emitter.off("change",w),I.emitter.listenerCount("disconnect")&&x.connector.emitter.off("disconnect",A),I.emitter.listenerCount("connect")||x.connector.emitter.on("connect",v)}if(S.connections.delete(C.uid),S.connections.size===0)return{...S,connections:new Map,current:null,status:"disconnected"};const T=S.connections.values().next().value;return{...S,connections:new Map(S.connections),current:T.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return y.getState()},setState(C){let S;typeof C=="function"?S=C(y.getState()):S=C;const x=f();typeof S!="object"&&(S=x),Object.keys(x).some(I=>!(I in S))&&(S=x),y.setState(S,!0)},subscribe(C,S,x){return y.subscribe(C,S,x?{...x,fireImmediately:x.emitImmediately}:void 0)},_internal:{mipd:o,store:y,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(C){const S=typeof C=="function"?C(a.getState()):C;if(S.length!==0)return a.setState(S,!0)},subscribe(C){return a.subscribe(C)}},connectors:{providerDetailToConnector:u,setup:l,setState(C){return c.setState(typeof C=="function"?C(c.getState()):C,!0)},subscribe(C){return c.subscribe(C)}},events:{change:w,connect:v,disconnect:A}}}}function aye(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?Lk(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function cye(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=aye(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=D.useRef(!0);return D.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const QK=D.createContext(void 0);function lye(t){const{children:e,config:n}=t,r={value:n};return D.createElement(cye,t,D.createElement(QK.Provider,r,e))}const uye="2.15.6",dye=()=>`wagmi@${uye}`;let hye=class extends ad{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return dye()}};class fye extends hye{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function Da(t={}){const e=t.config??D.useContext(QK);if(!e)throw new fye;return e}var JK={exports:{}},ZK={},XK={exports:{}},eY={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0=D;function pye(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gye=typeof Object.is=="function"?Object.is:pye,mye=h0.useState,yye=h0.useEffect,wye=h0.useLayoutEffect,bye=h0.useDebugValue;function vye(t,e){var n=e(),r=mye({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return wye(function(){s.value=n,s.getSnapshot=e,BR(s)&&i({inst:s})},[t,n,e]),yye(function(){return BR(s)&&i({inst:s}),t(function(){BR(s)&&i({inst:s})})},[t]),bye(n),n}function BR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gye(t,n)}catch{return!0}}function Eye(t,e){return e()}var _ye=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Eye:vye;eY.useSyncExternalStore=h0.useSyncExternalStore!==void 0?h0.useSyncExternalStore:_ye;XK.exports=eY;var tY=XK.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mN=D,Cye=tY;function Aye(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Sye=typeof Object.is=="function"?Object.is:Aye,Iye=Cye.useSyncExternalStore,xye=mN.useRef,Nye=mN.useEffect,Tye=mN.useMemo,Rye=mN.useDebugValue;ZK.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=xye(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Tye(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,Sye(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=Iye(t,i[0],i[1]);return Nye(function(){o.hasValue=!0,o.value=a},[a]),Rye(a),a};JK.exports=ZK;var nY=JK.exports;const FR=t=>typeof t=="object"&&!Array.isArray(t);function Pye(t,e,n=e,r=Eg){const s=D.useRef([]),i=nY.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(FR(o)&&FR(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return D.useMemo(()=>{if(FR(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function MC(t={}){const e=Da(t);return Pye(n=>WK(e,{onChange:n}),()=>My(e))}var Z0=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},_g=typeof window>"u"||"Deno"in globalThis;function ui(){}function Oye(t,e){return typeof t=="function"?t(e):t}function $k(t){return typeof t=="number"&&t>=0&&t!==1/0}function rY(t,e){return Math.max(t+(e||0)-Date.now(),0)}function jh(t,e){return typeof t=="function"?t(e):t}function ba(t,e){return typeof t=="function"?t(e):t}function t8(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==yM(o,e.options))return!1}else if(!r_(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function n8(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Cg(e.options.mutationKey)!==Cg(i))return!1}else if(!r_(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function yM(t,e){return((e==null?void 0:e.queryKeyHashFn)||Cg)(t)}function Cg(t){return JSON.stringify(t,(e,n)=>Bk(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function r_(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>r_(t[n],e[n])):!1}function wM(t,e){if(t===e)return t;const n=r8(t)&&r8(e);if(n||Bk(t)&&Bk(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=wM(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function xI(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function r8(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Bk(t){if(!s8(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!s8(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function s8(t){return Object.prototype.toString.call(t)==="[object Object]"}function kye(t){return new Promise(e=>{setTimeout(e,t)})}function Fk(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?wM(t,e):e}function Dye(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function Lye(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var bM=Symbol();function sY(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===bM?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function iY(t,e){return typeof t=="function"?t(...e):!!t}var Ep,Gd,Vy,iz,Mye=(iz=class extends Z0{constructor(){super();K(this,Ep);K(this,Gd);K(this,Vy);U(this,Vy,e=>{if(!_g&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){_(this,Gd)||this.setEventListener(_(this,Vy))}onUnsubscribe(){var e;this.hasListeners()||((e=_(this,Gd))==null||e.call(this),U(this,Gd,void 0))}setEventListener(e){var n;U(this,Vy,e),(n=_(this,Gd))==null||n.call(this),U(this,Gd,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){_(this,Ep)!==e&&(U(this,Ep,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof _(this,Ep)=="boolean"?_(this,Ep):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ep=new WeakMap,Gd=new WeakMap,Vy=new WeakMap,iz),vM=new Mye,Ky,qd,Yy,oz,Uye=(oz=class extends Z0{constructor(){super();K(this,Ky,!0);K(this,qd);K(this,Yy);U(this,Yy,e=>{if(!_g&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){_(this,qd)||this.setEventListener(_(this,Yy))}onUnsubscribe(){var e;this.hasListeners()||((e=_(this,qd))==null||e.call(this),U(this,qd,void 0))}setEventListener(e){var n;U(this,Yy,e),(n=_(this,qd))==null||n.call(this),U(this,qd,e(this.setOnline.bind(this)))}setOnline(e){_(this,Ky)!==e&&(U(this,Ky,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return _(this,Ky)}},Ky=new WeakMap,qd=new WeakMap,Yy=new WeakMap,oz),NI=new Uye;function jk(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function $ye(t){return Math.min(1e3*2**t,3e4)}function oY(t){return(t??"online")==="online"?NI.isOnline():!0}var aY=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function jR(t){return t instanceof aY}function cY(t){let e=!1,n=0,r=!1,s;const i=jk(),o=g=>{var y;r||(h(new aY(g)),(y=t.abort)==null||y.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>vM.isFocused()&&(t.networkMode==="always"||NI.isOnline())&&t.canRun(),u=()=>oY(t.networkMode)&&t.canRun(),d=g=>{var y;r||(r=!0,(y=t.onSuccess)==null||y.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var y;r||(r=!0,(y=t.onError)==null||y.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var y;s=m=>{(r||l())&&g(m)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const y=n===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(m){g=Promise.reject(m)}Promise.resolve(g).then(d).catch(m=>{var S;if(r)return;const w=t.retry??(_g?0:3),v=t.retryDelay??$ye,A=typeof v=="function"?v(n,m):v,C=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,m);if(e||!C){h(m);return}n++,(S=t.onFail)==null||S.call(t,n,m),kye(A).then(()=>l()?void 0:f()).then(()=>{e?h(m):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var Bye=t=>setTimeout(t,0);function Fye(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=Bye;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var jr=Fye(),_p,az,lY=(az=class{constructor(){K(this,_p)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),$k(this.gcTime)&&U(this,_p,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(_g?1/0:5*60*1e3))}clearGcTimeout(){_(this,_p)&&(clearTimeout(_(this,_p)),U(this,_p,void 0))}},_p=new WeakMap,az),Qy,Cp,da,Ap,Hs,Y_,Sp,Xa,su,cz,jye=(cz=class extends lY{constructor(e){super();K(this,Xa);K(this,Qy);K(this,Cp);K(this,da);K(this,Ap);K(this,Hs);K(this,Y_);K(this,Sp);U(this,Sp,!1),U(this,Y_,e.defaultOptions),this.setOptions(e.options),this.observers=[],U(this,Ap,e.client),U(this,da,_(this,Ap).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,U(this,Qy,zye(this.options)),this.state=e.state??_(this,Qy),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=_(this,Hs))==null?void 0:e.promise}setOptions(e){this.options={..._(this,Y_),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&_(this,da).remove(this)}setData(e,n){const r=Fk(this.state.data,e,this.options);return fe(this,Xa,su).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){fe(this,Xa,su).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=_(this,Hs))==null?void 0:r.promise;return(s=_(this,Hs))==null||s.cancel(e),n?n.then(ui).catch(ui):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(_(this,Qy))}isActive(){return this.observers.some(e=>ba(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===bM||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>jh(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!rY(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=_(this,Hs))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=_(this,Hs))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),_(this,da).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(_(this,Hs)&&(_(this,Sp)?_(this,Hs).cancel({revert:!0}):_(this,Hs).cancelRetry()),this.scheduleGc()),_(this,da).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||fe(this,Xa,su).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(_(this,Hs))return _(this,Hs).continueRetry(),_(this,Hs).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(U(this,Sp,!0),r.signal)})},i=()=>{const h=sY(this.options,n),p=(()=>{const g={client:_(this,Ap),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return U(this,Sp,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:_(this,Ap),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),U(this,Cp,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&fe(this,Xa,su).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,y;jR(h)&&h.silent||fe(this,Xa,su).call(this,{type:"error",error:h}),jR(h)||((p=(f=_(this,da).config).onError)==null||p.call(f,h,this),(y=(g=_(this,da).config).onSettled)==null||y.call(g,this.state.data,h,this)),this.scheduleGc()};return U(this,Hs,cY({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,y;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(m){c(m);return}(p=(f=_(this,da).config).onSuccess)==null||p.call(f,h,this),(y=(g=_(this,da).config).onSettled)==null||y.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{fe(this,Xa,su).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{fe(this,Xa,su).call(this,{type:"pause"})},onContinue:()=>{fe(this,Xa,su).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),_(this,Hs).start()}},Qy=new WeakMap,Cp=new WeakMap,da=new WeakMap,Ap=new WeakMap,Hs=new WeakMap,Y_=new WeakMap,Sp=new WeakMap,Xa=new WeakSet,su=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...uY(r.data,this.options),fetchMeta:e.meta??null};case"success":return U(this,Cp,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return jR(s)&&s.revert&&_(this,Cp)?{..._(this,Cp),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),jr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),_(this,da).notify({query:this,type:"updated",action:e})})},cz);function uY(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:oY(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function zye(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Qc,lz,Wye=(lz=class extends Z0{constructor(e={}){super();K(this,Qc);this.config=e,U(this,Qc,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??yM(s,n);let o=this.get(i);return o||(o=new jye({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){_(this,Qc).has(e.queryHash)||(_(this,Qc).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=_(this,Qc).get(e.queryHash);n&&(e.destroy(),n===e&&_(this,Qc).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){jr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return _(this,Qc).get(e)}getAll(){return[..._(this,Qc).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>t8(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>t8(e,r)):n}notify(e){jr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){jr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){jr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Qc=new WeakMap,lz),Jc,ii,Ip,Zc,Rd,uz,Hye=(uz=class extends lY{constructor(e){super();K(this,Zc);K(this,Jc);K(this,ii);K(this,Ip);this.mutationId=e.mutationId,U(this,ii,e.mutationCache),U(this,Jc,[]),this.state=e.state||dY(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){_(this,Jc).includes(e)||(_(this,Jc).push(e),this.clearGcTimeout(),_(this,ii).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){U(this,Jc,_(this,Jc).filter(n=>n!==e)),this.scheduleGc(),_(this,ii).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){_(this,Jc).length||(this.state.status==="pending"?this.scheduleGc():_(this,ii).remove(this))}continue(){var e;return((e=_(this,Ip))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,y,m,w,v,A,C,S,x,T;const n=()=>{fe(this,Zc,Rd).call(this,{type:"continue"})};U(this,Ip,cY({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(I,k)=>{fe(this,Zc,Rd).call(this,{type:"failed",failureCount:I,error:k})},onPause:()=>{fe(this,Zc,Rd).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>_(this,ii).canRun(this)}));const r=this.state.status==="pending",s=!_(this,Ip).canStart();try{if(r)n();else{fe(this,Zc,Rd).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=_(this,ii).config).onMutate)==null?void 0:o.call(i,e,this));const k=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));k!==this.state.context&&fe(this,Zc,Rd).call(this,{type:"pending",context:k,variables:e,isPaused:s})}const I=await _(this,Ip).start();return await((u=(l=_(this,ii).config).onSuccess)==null?void 0:u.call(l,I,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,I,e,this.state.context)),await((p=(f=_(this,ii).config).onSettled)==null?void 0:p.call(f,I,null,this.state.variables,this.state.context,this)),await((y=(g=this.options).onSettled)==null?void 0:y.call(g,I,null,e,this.state.context)),fe(this,Zc,Rd).call(this,{type:"success",data:I}),I}catch(I){try{throw await((w=(m=_(this,ii).config).onError)==null?void 0:w.call(m,I,e,this.state.context,this)),await((A=(v=this.options).onError)==null?void 0:A.call(v,I,e,this.state.context)),await((S=(C=_(this,ii).config).onSettled)==null?void 0:S.call(C,void 0,I,this.state.variables,this.state.context,this)),await((T=(x=this.options).onSettled)==null?void 0:T.call(x,void 0,I,e,this.state.context)),I}finally{fe(this,Zc,Rd).call(this,{type:"error",error:I})}}finally{_(this,ii).runNext(this)}}},Jc=new WeakMap,ii=new WeakMap,Ip=new WeakMap,Zc=new WeakSet,Rd=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),jr.batch(()=>{_(this,Jc).forEach(r=>{r.onMutationUpdate(e)}),_(this,ii).notify({mutation:this,type:"updated",action:e})})},uz);function dY(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var fu,ec,Q_,dz,Gye=(dz=class extends Z0{constructor(e={}){super();K(this,fu);K(this,ec);K(this,Q_);this.config=e,U(this,fu,new Set),U(this,ec,new Map),U(this,Q_,0)}build(e,n,r){const s=new Hye({mutationCache:this,mutationId:++ld(this,Q_)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){_(this,fu).add(e);const n=q1(e);if(typeof n=="string"){const r=_(this,ec).get(n);r?r.push(e):_(this,ec).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(_(this,fu).delete(e)){const n=q1(e);if(typeof n=="string"){const r=_(this,ec).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&_(this,ec).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=q1(e);if(typeof n=="string"){const r=_(this,ec).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=q1(e);if(typeof n=="string"){const s=(r=_(this,ec).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){jr.batch(()=>{_(this,fu).forEach(e=>{this.notify({type:"removed",mutation:e})}),_(this,fu).clear(),_(this,ec).clear()})}getAll(){return Array.from(_(this,fu))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>n8(n,r))}findAll(e={}){return this.getAll().filter(n=>n8(e,n))}notify(e){jr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return jr.batch(()=>Promise.all(e.map(n=>n.continue().catch(ui))))}},fu=new WeakMap,ec=new WeakMap,Q_=new WeakMap,dz);function q1(t){var e;return(e=t.options.scope)==null?void 0:e.id}function i8(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const y=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},m=sY(e.options,e.fetchOptions),w=async(v,A,C)=>{if(g)return Promise.reject();if(A==null&&v.pages.length)return Promise.resolve(v);const x=(()=>{const O={client:e.client,queryKey:e.queryKey,pageParam:A,direction:C?"backward":"forward",meta:e.options.meta};return y(O),O})(),T=await m(x),{maxPages:I}=e.options,k=C?Lye:Dye;return{pages:k(v.pages,T,I),pageParams:k(v.pageParams,A,I)}};if(s&&i.length){const v=s==="backward",A=v?qye:o8,C={pages:i,pageParams:o},S=A(r,C);a=await w(C,S,v)}else{const v=t??i.length;do{const A=c===0?o[0]??r.initialPageParam:o8(r,a);if(c>0&&A==null)break;a=await w(a,A),c++}while(c<v)}return a};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function o8(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function qye(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var mr,Vd,Kd,Jy,Zy,Yd,Xy,ew,hz,Vye=(hz=class{constructor(t={}){K(this,mr);K(this,Vd);K(this,Kd);K(this,Jy);K(this,Zy);K(this,Yd);K(this,Xy);K(this,ew);U(this,mr,t.queryCache||new Wye),U(this,Vd,t.mutationCache||new Gye),U(this,Kd,t.defaultOptions||{}),U(this,Jy,new Map),U(this,Zy,new Map),U(this,Yd,0)}mount(){ld(this,Yd)._++,_(this,Yd)===1&&(U(this,Xy,vM.subscribe(async t=>{t&&(await this.resumePausedMutations(),_(this,mr).onFocus())})),U(this,ew,NI.subscribe(async t=>{t&&(await this.resumePausedMutations(),_(this,mr).onOnline())})))}unmount(){var t,e;ld(this,Yd)._--,_(this,Yd)===0&&((t=_(this,Xy))==null||t.call(this),U(this,Xy,void 0),(e=_(this,ew))==null||e.call(this),U(this,ew,void 0))}isFetching(t){return _(this,mr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return _(this,Vd).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=_(this,mr).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=_(this,mr).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(jh(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return _(this,mr).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=_(this,mr).get(r.queryHash),i=s==null?void 0:s.state.data,o=Oye(e,i);if(o!==void 0)return _(this,mr).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return jr.batch(()=>_(this,mr).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=_(this,mr).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=_(this,mr);jr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=_(this,mr);return jr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=jr.batch(()=>_(this,mr).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(ui).catch(ui)}invalidateQueries(t,e={}){return jr.batch(()=>(_(this,mr).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=jr.batch(()=>_(this,mr).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(ui)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(ui)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=_(this,mr).build(this,e);return n.isStaleByTime(jh(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ui).catch(ui)}fetchInfiniteQuery(t){return t.behavior=i8(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ui).catch(ui)}ensureInfiniteQueryData(t){return t.behavior=i8(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return NI.isOnline()?_(this,Vd).resumePausedMutations():Promise.resolve()}getQueryCache(){return _(this,mr)}getMutationCache(){return _(this,Vd)}getDefaultOptions(){return _(this,Kd)}setDefaultOptions(t){U(this,Kd,t)}setQueryDefaults(t,e){_(this,Jy).set(Cg(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[..._(this,Jy).values()],n={};return e.forEach(r=>{r_(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){_(this,Zy).set(Cg(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[..._(this,Zy).values()],n={};return e.forEach(r=>{r_(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={..._(this,Kd).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=yM(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===bM&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{..._(this,Kd).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){_(this,mr).clear(),_(this,Vd).clear()}},mr=new WeakMap,Vd=new WeakMap,Kd=new WeakMap,Jy=new WeakMap,Zy=new WeakMap,Yd=new WeakMap,Xy=new WeakMap,ew=new WeakMap,hz),Bi,Kt,J_,oi,xp,tw,Qd,Jd,Z_,nw,rw,Np,Tp,Zd,sw,En,lv,zk,Wk,Hk,Gk,qk,Vk,Kk,hY,fz,Kye=(fz=class extends Z0{constructor(e,n){super();K(this,En);K(this,Bi);K(this,Kt);K(this,J_);K(this,oi);K(this,xp);K(this,tw);K(this,Qd);K(this,Jd);K(this,Z_);K(this,nw);K(this,rw);K(this,Np);K(this,Tp);K(this,Zd);K(this,sw,new Set);this.options=n,U(this,Bi,e),U(this,Jd,null),U(this,Qd,jk()),this.options.experimental_prefetchInRender||_(this,Qd).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(_(this,Kt).addObserver(this),a8(_(this,Kt),this.options)?fe(this,En,lv).call(this):this.updateResult(),fe(this,En,Gk).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Yk(_(this,Kt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Yk(_(this,Kt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,fe(this,En,qk).call(this),fe(this,En,Vk).call(this),_(this,Kt).removeObserver(this)}setOptions(e){const n=this.options,r=_(this,Kt);if(this.options=_(this,Bi).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ba(this.options.enabled,_(this,Kt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");fe(this,En,Kk).call(this),_(this,Kt).setOptions(this.options),n._defaulted&&!xI(this.options,n)&&_(this,Bi).getQueryCache().notify({type:"observerOptionsUpdated",query:_(this,Kt),observer:this});const s=this.hasListeners();s&&c8(_(this,Kt),r,this.options,n)&&fe(this,En,lv).call(this),this.updateResult(),s&&(_(this,Kt)!==r||ba(this.options.enabled,_(this,Kt))!==ba(n.enabled,_(this,Kt))||jh(this.options.staleTime,_(this,Kt))!==jh(n.staleTime,_(this,Kt)))&&fe(this,En,zk).call(this);const i=fe(this,En,Wk).call(this);s&&(_(this,Kt)!==r||ba(this.options.enabled,_(this,Kt))!==ba(n.enabled,_(this,Kt))||i!==_(this,Zd))&&fe(this,En,Hk).call(this,i)}getOptimisticResult(e){const n=_(this,Bi).getQueryCache().build(_(this,Bi),e),r=this.createResult(n,e);return Qye(this,r)&&(U(this,oi,r),U(this,tw,this.options),U(this,xp,_(this,Kt).state)),r}getCurrentResult(){return _(this,oi)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){_(this,sw).add(e)}getCurrentQuery(){return _(this,Kt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=_(this,Bi).defaultQueryOptions(e),r=_(this,Bi).getQueryCache().build(_(this,Bi),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return fe(this,En,lv).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),_(this,oi)))}createResult(e,n){var I;const r=_(this,Kt),s=this.options,i=_(this,oi),o=_(this,xp),a=_(this,tw),l=e!==r?e.state:_(this,J_),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const k=this.hasListeners(),O=!k&&a8(e,n),B=k&&c8(e,r,n,s);(O||B)&&(d={...d,...uY(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:y}=d;f=d.data;let m=!1;if(n.placeholderData!==void 0&&f===void 0&&y==="pending"){let k;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(k=i.data,m=!0):k=typeof n.placeholderData=="function"?n.placeholderData((I=_(this,rw))==null?void 0:I.state.data,_(this,rw)):n.placeholderData,k!==void 0&&(y="success",f=Fk(i==null?void 0:i.data,k,n),h=!0)}if(n.select&&f!==void 0&&!m)if(i&&f===(o==null?void 0:o.data)&&n.select===_(this,Z_))f=_(this,nw);else try{U(this,Z_,n.select),f=n.select(f),f=Fk(i==null?void 0:i.data,f,n),U(this,nw,f),U(this,Jd,null)}catch(k){U(this,Jd,k)}_(this,Jd)&&(p=_(this,Jd),f=_(this,nw),g=Date.now(),y="error");const w=d.fetchStatus==="fetching",v=y==="pending",A=y==="error",C=v&&w,S=f!==void 0,T={status:y,fetchStatus:d.fetchStatus,isPending:v,isSuccess:y==="success",isError:A,isInitialLoading:C,isLoading:C,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:w,isRefetching:w&&!v,isLoadingError:A&&!S,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:A&&S,isStale:EM(e,n),refetch:this.refetch,promise:_(this,Qd),isEnabled:ba(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const k=G=>{T.status==="error"?G.reject(T.error):T.data!==void 0&&G.resolve(T.data)},O=()=>{const G=U(this,Qd,T.promise=jk());k(G)},B=_(this,Qd);switch(B.status){case"pending":e.queryHash===r.queryHash&&k(B);break;case"fulfilled":(T.status==="error"||T.data!==B.value)&&O();break;case"rejected":(T.status!=="error"||T.error!==B.reason)&&O();break}}return T}updateResult(){const e=_(this,oi),n=this.createResult(_(this,Kt),this.options);if(U(this,xp,_(this,Kt).state),U(this,tw,this.options),_(this,xp).data!==void 0&&U(this,rw,_(this,Kt)),xI(n,e))return;U(this,oi,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!_(this,sw).size)return!0;const o=new Set(i??_(this,sw));return this.options.throwOnError&&o.add("error"),Object.keys(_(this,oi)).some(a=>{const c=a;return _(this,oi)[c]!==e[c]&&o.has(c)})};fe(this,En,hY).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&fe(this,En,Gk).call(this)}},Bi=new WeakMap,Kt=new WeakMap,J_=new WeakMap,oi=new WeakMap,xp=new WeakMap,tw=new WeakMap,Qd=new WeakMap,Jd=new WeakMap,Z_=new WeakMap,nw=new WeakMap,rw=new WeakMap,Np=new WeakMap,Tp=new WeakMap,Zd=new WeakMap,sw=new WeakMap,En=new WeakSet,lv=function(e){fe(this,En,Kk).call(this);let n=_(this,Kt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(ui)),n},zk=function(){fe(this,En,qk).call(this);const e=jh(this.options.staleTime,_(this,Kt));if(_g||_(this,oi).isStale||!$k(e))return;const r=rY(_(this,oi).dataUpdatedAt,e)+1;U(this,Np,setTimeout(()=>{_(this,oi).isStale||this.updateResult()},r))},Wk=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(_(this,Kt)):this.options.refetchInterval)??!1},Hk=function(e){fe(this,En,Vk).call(this),U(this,Zd,e),!(_g||ba(this.options.enabled,_(this,Kt))===!1||!$k(_(this,Zd))||_(this,Zd)===0)&&U(this,Tp,setInterval(()=>{(this.options.refetchIntervalInBackground||vM.isFocused())&&fe(this,En,lv).call(this)},_(this,Zd)))},Gk=function(){fe(this,En,zk).call(this),fe(this,En,Hk).call(this,fe(this,En,Wk).call(this))},qk=function(){_(this,Np)&&(clearTimeout(_(this,Np)),U(this,Np,void 0))},Vk=function(){_(this,Tp)&&(clearInterval(_(this,Tp)),U(this,Tp,void 0))},Kk=function(){const e=_(this,Bi).getQueryCache().build(_(this,Bi),this.options);if(e===_(this,Kt))return;const n=_(this,Kt);U(this,Kt,e),U(this,J_,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},hY=function(e){jr.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(_(this,oi))}),_(this,Bi).getQueryCache().notify({query:_(this,Kt),type:"observerResultsUpdated"})})},fz);function Yye(t,e){return ba(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function a8(t,e){return Yye(t,e)||t.state.data!==void 0&&Yk(t,e,e.refetchOnMount)}function Yk(t,e,n){if(ba(e.enabled,t)!==!1&&jh(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&EM(t,e)}return!1}function c8(t,e,n,r){return(t!==e||ba(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&EM(t,n)}function EM(t,e){return ba(e.enabled,t)!==!1&&t.isStaleByTime(jh(e.staleTime,t))}function Qye(t,e){return!xI(t.getCurrentResult(),e)}var Xd,eh,Fi,pu,Hu,eS,Qk,pz,Jye=(pz=class extends Z0{constructor(n,r){super();K(this,Hu);K(this,Xd);K(this,eh);K(this,Fi);K(this,pu);U(this,Xd,n),this.setOptions(r),this.bindMethods(),fe(this,Hu,eS).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=_(this,Xd).defaultMutationOptions(n),xI(this.options,r)||_(this,Xd).getMutationCache().notify({type:"observerOptionsUpdated",mutation:_(this,Fi),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Cg(r.mutationKey)!==Cg(this.options.mutationKey)?this.reset():((s=_(this,Fi))==null?void 0:s.state.status)==="pending"&&_(this,Fi).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=_(this,Fi))==null||n.removeObserver(this)}onMutationUpdate(n){fe(this,Hu,eS).call(this),fe(this,Hu,Qk).call(this,n)}getCurrentResult(){return _(this,eh)}reset(){var n;(n=_(this,Fi))==null||n.removeObserver(this),U(this,Fi,void 0),fe(this,Hu,eS).call(this),fe(this,Hu,Qk).call(this)}mutate(n,r){var s;return U(this,pu,r),(s=_(this,Fi))==null||s.removeObserver(this),U(this,Fi,_(this,Xd).getMutationCache().build(_(this,Xd),this.options)),_(this,Fi).addObserver(this),_(this,Fi).execute(n)}},Xd=new WeakMap,eh=new WeakMap,Fi=new WeakMap,pu=new WeakMap,Hu=new WeakSet,eS=function(){var r;const n=((r=_(this,Fi))==null?void 0:r.state)??dY();U(this,eh,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Qk=function(n){jr.batch(()=>{var r,s,i,o,a,c,l,u;if(_(this,pu)&&this.hasListeners()){const d=_(this,eh).variables,h=_(this,eh).context;(n==null?void 0:n.type)==="success"?((s=(r=_(this,pu)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=_(this,pu)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=_(this,pu)).onError)==null||c.call(a,n.error,d,h),(u=(l=_(this,pu)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(_(this,eh))})})},pz);function Zye(t,e){return wM(t,e)}function Xye(t){return JSON.stringify(t,(e,n)=>ewe(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function ewe(t){if(!l8(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!l8(n)||!n.hasOwnProperty("isPrototypeOf"))}function l8(t){return Object.prototype.toString.call(t)==="[object Object]"}function yN(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:y,getNextPageParam:m,initialPageParam:w,_optimisticResults:v,enabled:A,notifyOnChangeProps:C,placeholderData:S,refetchInterval:x,refetchIntervalInBackground:T,refetchOnMount:I,refetchOnReconnect:k,refetchOnWindowFocus:O,retryOnMount:B,select:G,staleTime:W,suspense:R,throwOnError:N,config:M,connector:P,query:L,...F}=t;return F}function twe(t){return{mutationFn(e){return ZA(t,e)},mutationKey:["connect"]}}function nwe(t){return{mutationFn(e){return kk(t,e)},mutationKey:["disconnect"]}}function rwe(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return kme(t,{...i,address:r})},queryKey:swe(e)}}function swe(t={}){return["ensName",yN(t)]}function iwe(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return Dme(t,{...o,connector:r})},queryKey:owe(e)}}function owe(t={}){const{connector:e,...n}=t;return["walletClient",{...yN(n),connectorUid:e==null?void 0:e.uid}]}function awe(t,e={}){return{async queryFn({queryKey:n}){const r=e.abi;if(!r)throw new Error("abi is required");const{functionName:s,scopeKey:i,...o}=n[1],a=(()=>{const c=n[1];if(c.address)return{address:c.address};if(c.code)return{code:c.code};throw new Error("address or code is required")})();if(!s)throw new Error("functionName is required");return zK(t,{abi:r,functionName:s,args:o.args,...a,...o})},queryKey:cwe(e)}}function cwe(t={}){const{abi:e,...n}=t;return["readContract",yN(n)]}function lwe(t,e={}){return{async queryFn({queryKey:n}){const{hash:r,...s}=n[1];if(!r)throw new Error("hash is required");return qK(t,{...s,onReplaced:e.onReplaced,hash:r})},queryKey:uwe(e)}}function uwe(t={}){const{onReplaced:e,...n}=t;return["waitForTransactionReceipt",yN(n)]}function dwe(t){return{mutationFn(e){return VK(t,e)},mutationKey:["writeContract"]}}var fY=D.createContext(void 0),_M=t=>{const e=D.useContext(fY);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},hwe=({client:t,children:e})=>(D.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),b.jsx(fY.Provider,{value:t,children:e})),pY=D.createContext(!1),fwe=()=>D.useContext(pY);pY.Provider;function pwe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var gwe=D.createContext(pwe()),mwe=()=>D.useContext(gwe),ywe=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},wwe=t=>{D.useEffect(()=>{t.clearReset()},[t])},bwe=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||iY(n,[t.error,r])),vwe=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Ewe=(t,e)=>t.isLoading&&t.isFetching&&!e,_we=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,u8=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function Cwe(t,e,n){var d,h,f,p,g;const r=fwe(),s=mwe(),i=_M(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",vwe(o),ywe(o,s),wwe(s);const a=!i.getQueryCache().get(o.queryHash),[c]=D.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(D.useSyncExternalStore(D.useCallback(y=>{const m=u?c.subscribe(jr.batchCalls(y)):ui;return c.updateResult(),m},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),D.useEffect(()=>{c.setOptions(o)},[o,c]),_we(o,l))throw u8(o,c,s);if(bwe({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!_g&&Ewe(l,r)){const y=a?u8(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;y==null||y.catch(ui).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function Awe(t,e){return Cwe(t,Kye)}function CM(t,e){const n=_M(),[r]=D.useState(()=>new Jye(n,t));D.useEffect(()=>{r.setOptions(t)},[r,t]);const s=D.useSyncExternalStore(D.useCallback(o=>r.subscribe(jr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=D.useCallback((o,a)=>{r.mutate(o,a).catch(ui)},[r]);if(s.error&&iY(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function wN(t){const e=Awe({...t,queryKeyHashFn:Xye});return e.queryKey=t.queryKey,e}function bN(t={}){const e=Da(t);return D.useSyncExternalStore(n=>Bme(e,{onChange:n}),()=>Y6(e),()=>Y6(e))}function Swe(t={}){const e=Da(t);return D.useSyncExternalStore(n=>GK(e,{onChange:n}),()=>Q6(e),()=>Q6(e))}function gY(t={}){const{mutation:e}=t,n=Da(t),r=twe(n),{mutate:s,mutateAsync:i,...o}=CM({...e,...r});return D.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:Swe({config:n})}}function Iwe(t={}){const e=Da(t);return D.useSyncExternalStore(n=>HK(e,{onChange:n}),()=>Ja(e),()=>Ja(e))}function mY(t={}){const{mutation:e}=t,n=Da(t),r=nwe(n),{mutate:s,mutateAsync:i,...o}=CM({...e,...r});return{...o,connectors:Iwe({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function yY(t={}){const{address:e,query:n={}}=t,r=Da(t),s=bN({config:r}),i=rwe(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return wN({...n,...i,enabled:o})}function xwe(t={}){const e=Da(t);return nY.useSyncExternalStoreWithSelector(n=>jme(e,{onChange:n}),()=>Dk(e,t),()=>Dk(e,t),n=>n,(n,r)=>(n==null?void 0:n.uid)===(r==null?void 0:r.uid))}function d8(t={}){const{abi:e,address:n,functionName:r,query:s={}}=t,i=t.code,o=Da(t),a=bN({config:o}),c=awe(o,{...t,chainId:t.chainId??a}),l=!!((n||i)&&e&&r&&(s.enabled??!0));return wN({...s,...c,enabled:l,structuralSharing:s.structuralSharing??Zye})}function wY(t={}){const{query:e={},...n}=t,r=Da(n),s=_M(),{address:i,connector:o,status:a}=MC({config:r}),c=bN({config:r}),l=t.connector??o,{queryKey:u,...d}=iwe(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=D.useRef(i);return D.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),wN({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}function zR(t={}){const{hash:e,query:n={}}=t,r=Da(t),s=bN({config:r}),i=lwe(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return wN({...n,...i,enabled:o})}function WR(t={}){const{mutation:e}=t,n=Da(t),r=dwe(n),{mutate:s,mutateAsync:i,...o}=CM({...e,...r});return{...o,writeContract:s,writeContractAsync:i}}const Nwe="_verified_lvyh0_1",AM={verified:Nwe},Twe=()=>b.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:AM.verified,children:b.jsx("g",{children:b.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),Rwe=()=>b.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:AM.verified,children:b.jsxs("g",{children:[b.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[b.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),b.jsx("stop",{offset:".539",stopColor:"#cd8105"}),b.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),b.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),b.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),b.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[b.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),b.jsx("stop",{offset:".406",stopColor:"#e2b719"}),b.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),b.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[b.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),b.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),b.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),Pwe=()=>b.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:AM.verified,children:b.jsx("g",{children:b.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function bY(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=bY(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function zh(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=bY(t))&&(r&&(r+=" "),r+=e);return r}const Owe="_root_98iqw_1",kwe="_article_98iqw_21",h8={root:Owe,article:kwe},SM=({className:t,children:e})=>b.jsx("div",{className:zh("react-tweet-theme",h8.root,t),children:b.jsx("article",{className:h8.article,children:e})}),vY=t=>b.jsx("img",{...t}),Dwe="_header_nqq4j_1",Lwe="_avatar_nqq4j_11",Mwe="_avatarOverflow_nqq4j_16",Uwe="_avatarSquare_nqq4j_23",$we="_avatarShadow_nqq4j_26",Bwe="_author_nqq4j_37",Fwe="_authorLink_nqq4j_44",jwe="_authorVerified_nqq4j_53",zwe="_authorLinkText_nqq4j_56",Wwe="_authorMeta_nqq4j_63",Hwe="_authorFollow_nqq4j_66",Gwe="_username_nqq4j_69",qwe="_follow_nqq4j_74",Vwe="_separator_nqq4j_82",Kwe="_brand_nqq4j_86",Ywe="_twitterIcon_nqq4j_90",ms={header:Dwe,avatar:Lwe,avatarOverflow:Mwe,avatarSquare:Uwe,avatarShadow:$we,author:Bwe,authorLink:Fwe,authorVerified:jwe,authorLinkText:zwe,authorMeta:Wwe,authorFollow:Hwe,username:Gwe,follow:qwe,separator:Vwe,brand:Kwe,twitterIcon:Ywe},Qwe="_verifiedOld_lcna5_1",Jwe="_verifiedBlue_lcna5_4",Zwe="_verifiedGovernment_lcna5_7",HR={verifiedOld:Qwe,verifiedBlue:Jwe,verifiedGovernment:Zwe},EY=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=b.jsx(Twe,{}),s=HR.verifiedBlue;if(n)switch(t.is_blue_verified||(s=HR.verifiedOld),t.verified_type){case"Government":r=b.jsx(Pwe,{}),s=HR.verifiedGovernment;break;case"Business":r=b.jsx(Rwe,{}),s=null;break}return n?b.jsx("div",{className:zh(e,s),children:r}):null},Xwe=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:vY,{user:s}=t;return b.jsxs("div",{className:ms.header,children:[b.jsxs("a",{href:t.url,className:ms.avatar,target:"_blank",rel:"noopener noreferrer",children:[b.jsx("div",{className:zh(ms.avatarOverflow,s.profile_image_shape==="Square"&&ms.avatarSquare),children:b.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),b.jsx("div",{className:ms.avatarOverflow,children:b.jsx("div",{className:ms.avatarShadow})})]}),b.jsxs("div",{className:ms.author,children:[b.jsxs("a",{href:t.url,className:ms.authorLink,target:"_blank",rel:"noopener noreferrer",children:[b.jsx("div",{className:ms.authorLinkText,children:b.jsx("span",{title:s.name,children:s.name})}),b.jsx(EY,{user:s,className:ms.authorVerified})]}),b.jsxs("div",{className:ms.authorMeta,children:[b.jsx("a",{href:t.url,className:ms.username,target:"_blank",rel:"noopener noreferrer",children:b.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),b.jsxs("div",{className:ms.authorFollow,children:[b.jsx("span",{className:ms.separator,children:"·"}),b.jsx("a",{href:s.follow_url,className:ms.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),b.jsx("a",{href:t.url,className:ms.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:b.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:ms.twitterIcon,children:b.jsx("g",{children:b.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},e0e="_root_1ec15_1",t0e={root:e0e},n0e=({tweet:t})=>b.jsxs("a",{href:t.in_reply_to_url,className:t0e.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),r0e="_root_eihfa_1",s0e={root:r0e},i0e=({href:t,children:e})=>b.jsx("a",{href:t,className:s0e.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),o0e="_root_1xq52_1",a0e={root:o0e},c0e=({tweet:t})=>b.jsx("p",{className:a0e.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return b.jsx(i0e,{href:e.href,children:e.text},n);case"media":return;default:return b.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),f8=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,_Y=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,l0e=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,u0e=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,d0e=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,h0e=t=>`https://x.com/hashtag/${t.text}`,f0e=t=>`https://x.com/search?q=%24${t.text}`,p0e=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,CY=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},g0e=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},m0e=t=>{const e=g0e(t);return e.length>1?e[1]:e[0]},Jk=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function p8(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return Mb(n,"hashtag",t.entities.hashtags),Mb(n,"mention",t.entities.user_mentions),Mb(n,"url",t.entities.urls),Mb(n,"symbol",t.entities.symbols),t.entities.media&&Mb(n,"media",t.entities.media),y0e(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:h0e(r),text:s});case"mention":return Object.assign(r,{href:_Y(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:f0e(r),text:s});default:return Object.assign(r,{text:s})}})}function Mb(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function y0e(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const w0e=t=>({...t,url:f8(t),user:{...t.user,url:_Y(t),follow_url:d0e(t)},like_url:l0e(t),reply_url:u0e(t),in_reply_to_url:t.in_reply_to_screen_name?p0e(t):void 0,entities:p8(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:f8(t.quoted_tweet),entities:p8(t.quoted_tweet)}:void 0}),b0e="_root_g9tkv_1",v0e="_rounded_g9tkv_6",E0e="_mediaWrapper_g9tkv_10",_0e="_grid2Columns_g9tkv_17",C0e="_grid3_g9tkv_20",A0e="_grid2x2_g9tkv_23",S0e="_mediaContainer_g9tkv_26",I0e="_mediaLink_g9tkv_34",x0e="_skeleton_g9tkv_38",N0e="_image_g9tkv_43",bo={root:b0e,rounded:v0e,mediaWrapper:E0e,grid2Columns:_0e,grid3:C0e,grid2x2:A0e,mediaContainer:S0e,mediaLink:I0e,skeleton:x0e,image:N0e},T0e="_anchor_fp31d_1",R0e="_videoButton_fp31d_17",P0e="_videoButtonIcon_fp31d_35",O0e="_watchOnTwitter_fp31d_44",k0e="_viewReplies_fp31d_60",vm={anchor:T0e,videoButton:R0e,videoButtonIcon:P0e,watchOnTwitter:O0e,viewReplies:k0e},D0e=({tweet:t,media:e})=>{const[n,r]=D.useState(!0),[s,i]=D.useState(!1),[o,a]=D.useState(!1),c=m0e(e);let l=0;return b.jsxs(b.Fragment,{children:[b.jsx("video",{className:bo.image,poster:CY(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:b.jsx("source",{src:c.url,type:c.content_type})}),n&&b.jsx("button",{type:"button",className:vm.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:b.jsx("svg",{viewBox:"0 0 24 24",className:vm.videoButtonIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&b.jsx("div",{className:vm.watchOnTwitter,children:b.jsx("a",{href:t.url,className:vm.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&b.jsx("a",{href:t.url,className:zh(vm.anchor,vm.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},L0e=t=>b.jsx("img",{...t}),g8=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},AY=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:L0e;return b.jsx("div",{className:zh(bo.root,!n&&bo.rounded),children:b.jsx("div",{className:zh(bo.mediaWrapper,o>1&&bo.grid2Columns,o===3&&bo.grid3,o>4&&bo.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>b.jsx(D.Fragment,{children:l.type==="photo"?b.jsxs("a",{href:t.url,className:zh(bo.mediaContainer,bo.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[b.jsx("div",{className:bo.skeleton,style:g8(l,o)}),b.jsx(c,{src:CY(l,"small"),alt:l.ext_alt_text||"Image",className:bo.image,draggable:!0})]},l.media_url_https):b.jsxs("div",{className:bo.mediaContainer,children:[b.jsx("div",{className:bo.skeleton,style:g8(l,o)}),b.jsx(D0e,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},M0e={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},U0e=new Intl.DateTimeFormat("en-US",M0e),$0e=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},B0e=t=>{const e=$0e(U0e.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n} · ${r}`},F0e="_root_i24yn_1",j0e={root:F0e},z0e=({tweet:t})=>{const e=new Date(t.created_at),n=B0e(e);return b.jsx("a",{className:j0e.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:b.jsx("time",{dateTime:e.toISOString(),children:n})})},W0e="_info_19qcj_1",H0e="_infoLink_19qcj_10",G0e="_infoIcon_19qcj_30",GR={info:W0e,infoLink:H0e,infoIcon:G0e},q0e=({tweet:t})=>b.jsxs("div",{className:GR.info,children:[b.jsx(z0e,{tweet:t}),b.jsx("a",{className:GR.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:b.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:GR.infoIcon,children:b.jsx("g",{children:b.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),V0e="_actions_n2anf_1",K0e="_like_n2anf_13",Y0e="_reply_n2anf_14",Q0e="_copy_n2anf_15",J0e="_likeIconWrapper_n2anf_27",Z0e="_likeCount_n2anf_30",X0e="_replyIconWrapper_n2anf_35",ebe="_copyIconWrapper_n2anf_36",tbe="_likeIcon_n2anf_27",nbe="_replyIcon_n2anf_35",rbe="_copyIcon_n2anf_36",sbe="_replyText_n2anf_56",ibe="_copyText_n2anf_57",Wi={actions:V0e,like:K0e,reply:Y0e,copy:Q0e,likeIconWrapper:J0e,likeCount:Z0e,replyIconWrapper:X0e,copyIconWrapper:ebe,likeIcon:tbe,replyIcon:nbe,copyIcon:rbe,replyText:sbe,copyText:ibe},obe=({tweet:t})=>{const[e,n]=D.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return D.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),b.jsxs("button",{type:"button",className:Wi.copy,"aria-label":"Copy link",onClick:r,children:[b.jsx("div",{className:Wi.copyIconWrapper,children:e?b.jsx("svg",{viewBox:"0 0 24 24",className:Wi.copyIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):b.jsx("svg",{viewBox:"0 0 24 24",className:Wi.copyIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),b.jsx("span",{className:Wi.copyText,children:e?"Copied!":"Copy link"})]})},abe=({tweet:t})=>{const e=Jk(t.favorite_count);return b.jsxs("div",{className:Wi.actions,children:[b.jsxs("a",{className:Wi.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[b.jsx("div",{className:Wi.likeIconWrapper,children:b.jsx("svg",{viewBox:"0 0 24 24",className:Wi.likeIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),b.jsx("span",{className:Wi.likeCount,children:e})]}),b.jsxs("a",{className:Wi.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[b.jsx("div",{className:Wi.replyIconWrapper,children:b.jsx("svg",{viewBox:"0 0 24 24",className:Wi.replyIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),b.jsx("span",{className:Wi.replyText,children:"Reply"})]}),b.jsx(obe,{tweet:t})]})},cbe="_replies_1cutb_1",lbe="_link_1cutb_4",ube="_text_1cutb_23",qR={replies:cbe,link:lbe,text:ube},dbe=({tweet:t})=>b.jsx("div",{className:qR.replies,children:b.jsx("a",{className:qR.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:b.jsx("span",{className:qR.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${Jk(t.conversation_count)} reply`:`Read ${Jk(t.conversation_count)} replies`})})}),hbe="_root_q5799_1",fbe="_article_q5799_16",m8={root:hbe,article:fbe},pbe=({tweet:t,children:e})=>b.jsx("div",{className:m8.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:b.jsx("article",{className:m8.article,children:e})}),gbe="_header_r31i5_1",mbe="_avatar_r31i5_11",ybe="_avatarSquare_r31i5_17",wbe="_author_r31i5_21",bbe="_authorText_r31i5_26",vbe="_username_r31i5_33",xf={header:gbe,avatar:mbe,avatarSquare:ybe,author:wbe,authorText:bbe,username:vbe},Ebe=({tweet:t})=>{const{user:e}=t;return b.jsxs("div",{className:xf.header,children:[b.jsx("a",{href:t.url,className:xf.avatar,target:"_blank",rel:"noopener noreferrer",children:b.jsx("div",{className:zh(xf.avatarOverflow,e.profile_image_shape==="Square"&&xf.avatarSquare),children:b.jsx(vY,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),b.jsxs("div",{className:xf.author,children:[b.jsx("div",{className:xf.authorText,children:b.jsx("span",{title:e.name,children:e.name})}),b.jsx(EY,{user:e}),b.jsx("div",{className:xf.username,children:b.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},_be="_root_175ot_1",Cbe={root:_be},Abe=({tweet:t})=>b.jsx("p",{className:Cbe.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>b.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),Sbe=({tweet:t})=>{var e;return b.jsxs(pbe,{tweet:t,children:[b.jsx(Ebe,{tweet:t}),b.jsx(Abe,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?b.jsx(AY,{quoted:!0,tweet:t}):null]})},Ibe=({tweet:t,components:e})=>{var n;const r=D.useMemo(()=>w0e(t),[t]);return b.jsxs(SM,{children:[b.jsx(Xwe,{tweet:r,components:e}),r.in_reply_to_status_id_str&&b.jsx(n0e,{tweet:r}),b.jsx(c0e,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?b.jsx(AY,{tweet:r,components:e}):null,r.quoted_tweet&&b.jsx(Sbe,{tweet:r.quoted_tweet}),b.jsx(q0e,{tweet:r}),b.jsx(abe,{tweet:r}),b.jsx(dbe,{tweet:r})]})},xbe="_root_16yxa_1",Nbe={root:xbe},Tbe=t=>b.jsx(SM,{children:b.jsxs("div",{className:Nbe.root,children:[b.jsx("h3",{children:"Tweet not found"}),b.jsx("p",{children:"The embedded tweet could not be found…"})]})}),Rbe="_skeleton_oi7hr_1",Pbe={skeleton:Rbe},V1=({style:t})=>b.jsx("span",{className:Pbe.skeleton,style:t}),Obe="_root_17qqv_1",kbe={root:Obe},Dbe=()=>b.jsxs(SM,{className:kbe.root,children:[b.jsx(V1,{style:{height:"3rem",marginBottom:"0.75rem"}}),b.jsx(V1,{style:{height:"6rem",margin:"0.5rem 0"}}),b.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),b.jsx(V1,{style:{height:"2rem"}}),b.jsx(V1,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]}),SY=0,IY=1,xY=2,y8=3;var w8=Object.prototype.hasOwnProperty;function Zk(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&Zk(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(w8.call(t,n)&&++r&&!w8.call(e,n)||!(n in e)||!Zk(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const Iu=new WeakMap,Eh=()=>{},hi=Eh(),Xk=Object,Xt=t=>t===hi,gl=t=>typeof t=="function",rf=(t,e)=>({...t,...e}),NY=t=>gl(t.then),VR={},K1={},IM="undefined",UC=typeof window!=IM,eD=typeof document!=IM,Lbe=UC&&"Deno"in window,Mbe=()=>UC&&typeof window.requestAnimationFrame!=IM,TY=(t,e)=>{const n=Iu.get(t);return[()=>!Xt(e)&&t.get(e)||VR,r=>{if(!Xt(e)){const s=t.get(e);e in K1||(K1[e]=s),n[5](e,rf(s,r),s||VR)}},n[6],()=>!Xt(e)&&e in K1?K1[e]:!Xt(e)&&t.get(e)||VR]};let tD=!0;const Ube=()=>tD,[nD,rD]=UC&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Eh,Eh],$be=()=>{const t=eD&&document.visibilityState;return Xt(t)||t!=="hidden"},Bbe=t=>(eD&&document.addEventListener("visibilitychange",t),nD("focus",t),()=>{eD&&document.removeEventListener("visibilitychange",t),rD("focus",t)}),Fbe=t=>{const e=()=>{tD=!0,t()},n=()=>{tD=!1};return nD("online",e),nD("offline",n),()=>{rD("online",e),rD("offline",n)}},jbe={isOnline:Ube,isVisible:$be},zbe={initFocus:Bbe,initReconnect:Fbe},b8=!Mo.useId,s_=!UC||Lbe,Wbe=t=>Mbe()?window.requestAnimationFrame(t):setTimeout(t,1),KR=s_?D.useEffect:D.useLayoutEffect,YR=typeof navigator<"u"&&navigator.connection,v8=!s_&&YR&&(["slow-2g","2g"].includes(YR.effectiveType)||YR.saveData),Y1=new WeakMap,Hbe=t=>Xk.prototype.toString.call(t),QR=(t,e)=>t===`[object ${e}]`;let Gbe=0;const sD=t=>{const e=typeof t,n=Hbe(t),r=QR(n,"Date"),s=QR(n,"RegExp"),i=QR(n,"Object");let o,a;if(Xk(t)===t&&!r&&!s){if(o=Y1.get(t),o)return o;if(o=++Gbe+"~",Y1.set(t,o),Array.isArray(t)){for(o="@",a=0;a<t.length;a++)o+=sD(t[a])+",";Y1.set(t,o)}if(i){o="#";const c=Xk.keys(t).sort();for(;!Xt(a=c.pop());)Xt(t[a])||(o+=a+":"+sD(t[a])+",");Y1.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},xM=t=>{if(gl(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?sD(t):"",[t,e]};let qbe=0;const iD=()=>++qbe;async function RY(...t){const[e,n,r,s]=t,i=rf({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(gl(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=xM(h);if(!f)return;const[p,g]=TY(e,f),[y,m,w,v]=Iu.get(e),A=()=>{const W=y[f];return(gl(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete w[f],delete v[f],W&&W[0])?W[0](xY).then(()=>p().data):p().data};if(t.length<3)return A();let C=r,S,x=!1;const T=iD();m[f]=[T,0];const I=!Xt(c),k=p(),O=k.data,B=k._c,G=Xt(B)?O:B;if(I&&(c=gl(c)?c(G,O):c,g({data:c,_c:G})),gl(C))try{C=C(G)}catch(W){S=W,x=!0}if(C&&NY(C))if(C=await C.catch(W=>{S=W,x=!0}),T!==m[f][0]){if(x)throw S;return C}else x&&I&&l(S)&&(o=!0,g({data:G,_c:hi}));if(o&&!x)if(gl(o)){const W=o(C,G);g({data:W,error:hi,_c:hi})}else g({data:C,error:hi,_c:hi});if(m[f][1]=iD(),Promise.resolve(A()).then(()=>{g({_c:hi})}),x){if(u)throw S;return}return C}}const E8=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},Vbe=(t,e)=>{if(!Iu.has(t)){const n=rf(zbe,e),r=Object.create(null),s=RY.bind(hi,t);let i=Eh;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!Iu.has(t)&&(Iu.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!s_)){const u=n.initFocus(setTimeout.bind(hi,E8.bind(hi,r,SY))),d=n.initReconnect(setTimeout.bind(hi,E8.bind(hi,r,IY)));i=()=>{u&&u(),d&&d(),Iu.delete(t)}}};return l(),[t,s,l,i]}return[t,Iu.get(t)[4]]},Kbe=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!Xt(i)&&o>i||setTimeout(r,a,s)},Ybe=Zk,[PY,Qbe]=Vbe(new Map),Jbe=rf({onLoadingSlow:Eh,onSuccess:Eh,onError:Eh,onErrorRetry:Kbe,onDiscarded:Eh,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:v8?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:v8?5e3:3e3,compare:Ybe,isPaused:()=>!1,cache:PY,mutate:Qbe,fallback:{}},jbe),Zbe=(t,e)=>{const n=rf(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=rf(s,o))}return n},Xbe=D.createContext({}),eve="$inf$",OY=UC&&window.__SWR_DEVTOOLS_USE__,tve=OY?window.__SWR_DEVTOOLS_USE__:[],nve=()=>{OY&&(window.__SWR_DEVTOOLS_REACT__=Mo)},rve=t=>gl(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],sve=()=>rf(Jbe,D.useContext(Xbe)),ive=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=xM(e),[,,,a]=Iu.get(PY);if(o.startsWith(eve))return n(...i);const c=a[o];return Xt(c)?n(...i):(delete a[o],c)}),r),ove=tve.concat(ive),ave=t=>function(...n){const r=sve(),[s,i,o]=rve(n),a=Zbe(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(ove);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},cve=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};nve();const JR=Mo.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),ZR={dedupe:!0},lve=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,y]=Iu.get(r),[m,w]=xM(t),v=D.useRef(!1),A=D.useRef(!1),C=D.useRef(m),S=D.useRef(e),x=D.useRef(n),T=()=>x.current,I=()=>T().isVisible()&&T().isOnline(),[k,O,B,G]=TY(r,m),W=D.useRef({}).current,R=Xt(o)?Xt(n.fallback)?hi:n.fallback[m]:o,N=(ue,Ae)=>{for(const ke in W){const Ce=ke;if(Ce==="data"){if(!s(ue[Ce],Ae[Ce])&&(!Xt(ue[Ce])||!s(le,Ae[Ce])))return!1}else if(Ae[Ce]!==ue[Ce])return!1}return!0},M=D.useMemo(()=>{const ue=!m||!e?!1:Xt(a)?T().isPaused()||i?!1:c!==!1:a,Ae=Dn=>{const dn=rf(Dn);return delete dn._k,ue?{isValidating:!0,isLoading:!0,...dn}:dn},ke=k(),Ce=G(),Ct=Ae(ke),Yr=ke===Ce?Ct:Ae(Ce);let Nt=Ct;return[()=>{const Dn=Ae(k());return N(Dn,Nt)?(Nt.data=Dn.data,Nt.isLoading=Dn.isLoading,Nt.isValidating=Dn.isValidating,Nt.error=Dn.error,Nt):(Nt=Dn,Dn)},()=>Yr]},[r,m]),P=tY.useSyncExternalStore(D.useCallback(ue=>B(m,(Ae,ke)=>{N(ke,Ae)||ue()}),[r,m]),M[0],M[1]),L=!v.current,F=f[m]&&f[m].length>0,V=P.data,Z=Xt(V)?R&&NY(R)?JR(R):R:V,ae=P.error,re=D.useRef(Z),le=h?Xt(V)?Xt(re.current)?Z:re.current:V:Z,we=F&&!Xt(ae)?!1:L&&!Xt(a)?a:T().isPaused()?!1:i?Xt(Z)?!1:c:Xt(Z)||c,ee=!!(m&&e&&L&&we),ce=Xt(P.isValidating)?ee:P.isValidating,pe=Xt(P.isLoading)?ee:P.isLoading,he=D.useCallback(async ue=>{const Ae=S.current;if(!m||!Ae||A.current||T().isPaused())return!1;let ke,Ce,Ct=!0;const Yr=ue||{},Nt=!g[m]||!Yr.dedupe,Dn=()=>b8?!A.current&&m===C.current&&v.current:m===C.current,dn={isValidating:!1,isLoading:!1},Ii=()=>{O(dn)},jl=()=>{const Ln=g[m];Ln&&Ln[1]===Ce&&delete g[m]},kc={isValidating:!0};Xt(k().data)&&(kc.isLoading=!0);try{if(Nt&&(O(kc),n.loadingTimeout&&Xt(k().data)&&setTimeout(()=>{Ct&&Dn()&&T().onLoadingSlow(m,n)},n.loadingTimeout),g[m]=[Ae(w),iD()]),[ke,Ce]=g[m],ke=await ke,Nt&&setTimeout(jl,n.dedupingInterval),!g[m]||g[m][1]!==Ce)return Nt&&Dn()&&T().onDiscarded(m),!1;dn.error=hi;const Ln=p[m];if(!Xt(Ln)&&(Ce<=Ln[0]||Ce<=Ln[1]||Ln[1]===0))return Ii(),Nt&&Dn()&&T().onDiscarded(m),!1;const mn=k().data;dn.data=s(mn,ke)?mn:ke,Nt&&Dn()&&T().onSuccess(ke,m,n)}catch(Ln){jl();const mn=T(),{shouldRetryOnError:fo}=mn;mn.isPaused()||(dn.error=Ln,Nt&&Dn()&&(mn.onError(Ln,m,mn),(fo===!0||gl(fo)&&fo(Ln))&&(!T().revalidateOnFocus||!T().revalidateOnReconnect||I())&&mn.onErrorRetry(Ln,m,mn,yn=>{const Bs=f[m];Bs&&Bs[0]&&Bs[0](y8,yn)},{retryCount:(Yr.retryCount||0)+1,dedupe:!0})))}return Ct=!1,Ii(),!0},[m,r]),Ee=D.useCallback((...ue)=>RY(r,C.current,...ue),[]);if(KR(()=>{S.current=e,x.current=n,Xt(V)||(re.current=V)}),KR(()=>{if(!m)return;const ue=he.bind(hi,ZR);let Ae=0;T().revalidateOnFocus&&(Ae=Date.now()+T().focusThrottleInterval);const Ce=cve(m,f,(Ct,Yr={})=>{if(Ct==SY){const Nt=Date.now();T().revalidateOnFocus&&Nt>Ae&&I()&&(Ae=Nt+T().focusThrottleInterval,ue())}else if(Ct==IY)T().revalidateOnReconnect&&I()&&ue();else{if(Ct==xY)return he();if(Ct==y8)return he(Yr)}});return A.current=!1,C.current=m,v.current=!0,O({_k:w}),we&&(g[m]||(Xt(Z)||s_?ue():Wbe(ue))),()=>{A.current=!0,Ce()}},[m]),KR(()=>{let ue;function Ae(){const Ce=gl(l)?l(k().data):l;Ce&&ue!==-1&&(ue=setTimeout(ke,Ce))}function ke(){!k().error&&(u||T().isVisible())&&(d||T().isOnline())?he(ZR).then(Ae):Ae()}return Ae(),()=>{ue&&(clearTimeout(ue),ue=-1)}},[l,u,d,m]),D.useDebugValue(le),i&&Xt(Z)&&m){if(!b8&&s_)throw new Error("Fallback data is required when using Suspense in SSR.");S.current=e,x.current=n,A.current=!1;const ue=y[m];if(!Xt(ue)){const Ae=Ee(ue);JR(Ae)}if(Xt(ae)){const Ae=he(ZR);Xt(le)||(Ae.status="fulfilled",Ae.value=!0),JR(Ae)}else throw ae}return{mutate:Ee,get data(){return W.data=!0,le},get error(){return W.error=!0,ae},get isValidating(){return W.isValidating=!0,ce},get isLoading(){return W.isLoading=!0,pe}}},_8=ave(lve);class uve extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const dve=_8.default||_8,hve="https://react-tweet.vercel.app";async function fve([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new uve({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const pve=(t,e,n)=>{const{isLoading:r,data:s,error:i}=dve(()=>e||t?[e||t&&`${hve}/api/tweet/${t}`,n]:null,fve,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},gve=({id:t,apiUrl:e,fallback:n=b.jsx(Dbe,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=pve(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||Tbe;return b.jsx(l,{error:i?i(a):a})}return b.jsx(Ibe,{tweet:o,components:r})};var vN={exports:{}},kY={},DY={exports:{}},mve="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",yve=mve,wve=yve;function LY(){}function MY(){}MY.resetWarningCache=LY;var bve=function(){function t(r,s,i,o,a,c){if(c!==wve){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:MY,resetWarningCache:LY};return n.PropTypes=n,n};DY.exports=bve();var UY=DY.exports,oD={exports:{}};function $Y(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=$Y(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function C8(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=$Y(t))&&(r&&(r+=" "),r+=e);return r}oD.exports=C8,oD.exports.clsx=C8;var vve=oD.exports,Cr={},Bl={};Object.defineProperty(Bl,"__esModule",{value:!0});Bl.dontSetMe=Sve;Bl.findInArray=Eve;Bl.int=Ave;Bl.isFunction=_ve;Bl.isNum=Cve;function Eve(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function _ve(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function Cve(t){return typeof t=="number"&&!isNaN(t)}function Ave(t){return parseInt(t,10)}function Sve(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var Jg={};Object.defineProperty(Jg,"__esModule",{value:!0});Jg.browserPrefixToKey=FY;Jg.browserPrefixToStyle=Ive;Jg.default=void 0;Jg.getPrefix=BY;const XR=["Moz","Webkit","O","ms"];function BY(){var n,r;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(r=(n=window.document)==null?void 0:n.documentElement)==null?void 0:r.style;if(!e||t in e)return"";for(let s=0;s<XR.length;s++)if(FY(t,XR[s])in e)return XR[s];return""}function FY(t,e){return e?`${e}${xve(t)}`:t}function Ive(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function xve(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}Jg.default=BY();Object.defineProperty(Cr,"__esModule",{value:!0});Cr.addClassName=WY;Cr.addEvent=Tve;Cr.addUserSelectStyles=Fve;Cr.createCSSTransform=Mve;Cr.createSVGTransform=Uve;Cr.getTouch=$ve;Cr.getTouchIdentifier=Bve;Cr.getTranslation=NM;Cr.innerHeight=kve;Cr.innerWidth=Dve;Cr.matchesSelector=zY;Cr.matchesSelectorAndParentsTo=Nve;Cr.offsetXYFromParent=Lve;Cr.outerHeight=Pve;Cr.outerWidth=Ove;Cr.removeClassName=HY;Cr.removeEvent=Rve;Cr.scheduleRemoveUserSelectStyles=jve;var Bo=Bl,A8=jY(Jg);function jY(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(jY=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}let Q1="";function zY(t,e){return Q1||(Q1=(0,Bo.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,Bo.isFunction)(t[n])})),(0,Bo.isFunction)(t[Q1])?t[Q1](e):!1}function Nve(t,e,n){let r=t;do{if(zY(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function Tve(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function Rve(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function Pve(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Bo.int)(n.borderTopWidth),e+=(0,Bo.int)(n.borderBottomWidth),e}function Ove(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Bo.int)(n.borderLeftWidth),e+=(0,Bo.int)(n.borderRightWidth),e}function kve(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Bo.int)(n.paddingTop),e-=(0,Bo.int)(n.paddingBottom),e}function Dve(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Bo.int)(n.paddingLeft),e-=(0,Bo.int)(n.paddingRight),e}function Lve(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function Mve(t,e){const n=NM(t,e,"px");return{[(0,A8.browserPrefixToKey)("transform",A8.default)]:n}}function Uve(t,e){return NM(t,e,"")}function NM(t,e,n){let{x:r,y:s}=t,i=`translate(${r}${n},${s}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function $ve(t,e){return t.targetTouches&&(0,Bo.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,Bo.findInArray)(t.changedTouches,n=>e===n.identifier)}function Bve(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function Fve(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&WY(t.body,"react-draggable-transparent-selection")}function jve(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{S8(t)}):S8(t)}function S8(t){if(t)try{if(t.body&&HY(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function WY(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function HY(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var Fl={};Object.defineProperty(Fl,"__esModule",{value:!0});Fl.canDragX=Hve;Fl.canDragY=Gve;Fl.createCoreData=Vve;Fl.createDraggableData=Kve;Fl.getBoundPosition=zve;Fl.getControlPosition=qve;Fl.snapToGrid=Wve;var vo=Bl,yy=Cr;function zve(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:Yve(r);const s=TM(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=s.getRootNode().querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,vo.int)(u.paddingLeft)+(0,vo.int)(l.marginLeft),top:-s.offsetTop+(0,vo.int)(u.paddingTop)+(0,vo.int)(l.marginTop),right:(0,yy.innerWidth)(c)-(0,yy.outerWidth)(s)-s.offsetLeft+(0,vo.int)(u.paddingRight)-(0,vo.int)(l.marginRight),bottom:(0,yy.innerHeight)(c)-(0,yy.outerHeight)(s)-s.offsetTop+(0,vo.int)(u.paddingBottom)-(0,vo.int)(l.marginBottom)}}return(0,vo.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,vo.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,vo.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,vo.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function Wve(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function Hve(t){return t.props.axis==="both"||t.props.axis==="x"}function Gve(t){return t.props.axis==="both"||t.props.axis==="y"}function qve(t,e,n){const r=typeof e=="number"?(0,yy.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=TM(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,yy.offsetXYFromParent)(r||t,i,n.props.scale)}function Vve(t,e,n){const r=!(0,vo.isNum)(t.lastX),s=TM(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function Kve(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function Yve(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function TM(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var EN={},_N={};Object.defineProperty(_N,"__esModule",{value:!0});_N.default=Qve;function Qve(){}Object.defineProperty(EN,"__esModule",{value:!0});EN.default=void 0;var eP=GY(D),ni=RM(UY),Jve=RM(OL),zs=Cr,fd=Fl,tP=Bl,Ub=RM(_N);function RM(t){return t&&t.__esModule?t:{default:t}}function GY(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(GY=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}function si(t,e,n){return(e=Zve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zve(t){var e=Xve(t,"string");return typeof e=="symbol"?e:e+""}function Xve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Ga={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let pd=Ga.mouse,CN=class extends eP.Component{constructor(){super(...arguments),si(this,"dragging",!1),si(this,"lastX",NaN),si(this,"lastY",NaN),si(this,"touchIdentifier",null),si(this,"mounted",!1),si(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,zs.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,zs.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const s=(0,zs.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,fd.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,fd.createCoreData)(this,o,a);(0,Ub.default)("DraggableCore: handleDragStart: %j",c),(0,Ub.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,zs.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,zs.addEvent)(r,pd.move,this.handleDrag),(0,zs.addEvent)(r,pd.stop,this.handleDragStop))}),si(this,"handleDrag",e=>{const n=(0,fd.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,fd.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,fd.createCoreData)(this,r,s);if((0,Ub.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),si(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,fd.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,fd.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,fd.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,zs.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,Ub.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,Ub.default)("DraggableCore: Removing handlers"),(0,zs.removeEvent)(a.ownerDocument,pd.move,this.handleDrag),(0,zs.removeEvent)(a.ownerDocument,pd.stop,this.handleDragStop))}),si(this,"onMouseDown",e=>(pd=Ga.mouse,this.handleDragStart(e))),si(this,"onMouseUp",e=>(pd=Ga.mouse,this.handleDragStop(e))),si(this,"onTouchStart",e=>(pd=Ga.touch,this.handleDragStart(e))),si(this,"onTouchEnd",e=>(pd=Ga.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,zs.addEvent)(e,Ga.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,zs.removeEvent)(n,Ga.mouse.move,this.handleDrag),(0,zs.removeEvent)(n,Ga.touch.move,this.handleDrag),(0,zs.removeEvent)(n,Ga.mouse.stop,this.handleDragStop),(0,zs.removeEvent)(n,Ga.touch.stop,this.handleDragStop),(0,zs.removeEvent)(e,Ga.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,zs.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,r;return(e=this.props)!=null&&e.nodeRef?(r=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:r.current:Jve.default.findDOMNode(this)}render(){return eP.cloneElement(eP.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};EN.default=CN;si(CN,"displayName","DraggableCore");si(CN,"propTypes",{allowAnyClick:ni.default.bool,allowMobileScroll:ni.default.bool,children:ni.default.node.isRequired,disabled:ni.default.bool,enableUserSelectHack:ni.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:ni.default.arrayOf(ni.default.number),handle:ni.default.string,cancel:ni.default.string,nodeRef:ni.default.object,onStart:ni.default.func,onDrag:ni.default.func,onStop:ni.default.func,onMouseDown:ni.default.func,scale:ni.default.number,className:tP.dontSetMe,style:tP.dontSetMe,transform:tP.dontSetMe});si(CN,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=d(D),n=u(UY),r=u(OL),s=vve,i=Cr,o=Fl,a=Bl,c=u(EN),l=u(_N);function u(m){return m&&m.__esModule?m:{default:m}}function d(m,w){if(typeof WeakMap=="function")var v=new WeakMap,A=new WeakMap;return(d=function(C,S){if(!S&&C&&C.__esModule)return C;var x,T,I={__proto__:null,default:C};if(C===null||typeof C!="object"&&typeof C!="function")return I;if(x=S?A:v){if(x.has(C))return x.get(C);x.set(C,I)}for(const k in C)k!=="default"&&{}.hasOwnProperty.call(C,k)&&((T=(x=Object.defineProperty)&&Object.getOwnPropertyDescriptor(C,k))&&(T.get||T.set)?x(I,k,T):I[k]=C[k]);return I})(m,w)}function h(){return h=Object.assign?Object.assign.bind():function(m){for(var w=1;w<arguments.length;w++){var v=arguments[w];for(var A in v)({}).hasOwnProperty.call(v,A)&&(m[A]=v[A])}return m},h.apply(null,arguments)}function f(m,w,v){return(w=p(w))in m?Object.defineProperty(m,w,{value:v,enumerable:!0,configurable:!0,writable:!0}):m[w]=v,m}function p(m){var w=g(m,"string");return typeof w=="symbol"?w:w+""}function g(m,w){if(typeof m!="object"||!m)return m;var v=m[Symbol.toPrimitive];if(v!==void 0){var A=v.call(m,w);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(m)}class y extends e.Component{static getDerivedStateFromProps(w,v){let{position:A}=w,{prevPropsPosition:C}=v;return A&&(!C||A.x!==C.x||A.y!==C.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:A,prevPropsPosition:C}),{x:A.x,y:A.y,prevPropsPosition:{...A}}):null}constructor(w){super(w),f(this,"onDragStart",(v,A)=>{if((0,l.default)("Draggable: onDragStart: %j",A),this.props.onStart(v,(0,o.createDraggableData)(this,A))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),f(this,"onDrag",(v,A)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",A);const C=(0,o.createDraggableData)(this,A),S={x:C.x,y:C.y,slackX:0,slackY:0};if(this.props.bounds){const{x:T,y:I}=S;S.x+=this.state.slackX,S.y+=this.state.slackY;const[k,O]=(0,o.getBoundPosition)(this,S.x,S.y);S.x=k,S.y=O,S.slackX=this.state.slackX+(T-S.x),S.slackY=this.state.slackY+(I-S.y),C.x=S.x,C.y=S.y,C.deltaX=S.x-this.state.x,C.deltaY=S.y-this.state.y}if(this.props.onDrag(v,C)===!1)return!1;this.setState(S)}),f(this,"onDragStop",(v,A)=>{if(!this.state.dragging||this.props.onStop(v,(0,o.createDraggableData)(this,A))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",A);const S={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:T,y:I}=this.props.position;S.x=T,S.y=I}this.setState(S)}),this.state={dragging:!1,dragged:!1,x:w.position?w.position.x:w.defaultPosition.x,y:w.position?w.position.y:w.defaultPosition.y,prevPropsPosition:{...w.position},slackX:0,slackY:0,isElementSVG:!1},w.position&&!(w.onDrag||w.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var w,v;return((v=(w=this.props)==null?void 0:w.nodeRef)==null?void 0:v.current)??r.default.findDOMNode(this)}render(){const{axis:w,bounds:v,children:A,defaultPosition:C,defaultClassName:S,defaultClassNameDragging:x,defaultClassNameDragged:T,position:I,positionOffset:k,scale:O,...B}=this.props;let G={},W=null;const N=!!!I||this.state.dragging,M=I||C,P={x:(0,o.canDragX)(this)&&N?this.state.x:M.x,y:(0,o.canDragY)(this)&&N?this.state.y:M.y};this.state.isElementSVG?W=(0,i.createSVGTransform)(P,k):G=(0,i.createCSSTransform)(P,k);const L=(0,s.clsx)(A.props.className||"",S,{[x]:this.state.dragging,[T]:this.state.dragged});return e.createElement(c.default,h({},B,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(A),{className:L,style:{...A.props.style,...G},transform:W}))}}t.default=y,f(y,"displayName","Draggable"),f(y,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),f(y,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(kY);const{default:qY,DraggableCore:eEe}=kY;vN.exports=qY;vN.exports.default=qY;vN.exports.DraggableCore=eEe;var tEe=vN.exports;const $C=zg(tEe);function dr(){return dr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dr.apply(null,arguments)}function VY(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var KY={exports:{}},In={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ps=typeof Symbol=="function"&&Symbol.for,PM=ps?Symbol.for("react.element"):60103,OM=ps?Symbol.for("react.portal"):60106,AN=ps?Symbol.for("react.fragment"):60107,SN=ps?Symbol.for("react.strict_mode"):60108,IN=ps?Symbol.for("react.profiler"):60114,xN=ps?Symbol.for("react.provider"):60109,NN=ps?Symbol.for("react.context"):60110,kM=ps?Symbol.for("react.async_mode"):60111,TN=ps?Symbol.for("react.concurrent_mode"):60111,RN=ps?Symbol.for("react.forward_ref"):60112,PN=ps?Symbol.for("react.suspense"):60113,nEe=ps?Symbol.for("react.suspense_list"):60120,ON=ps?Symbol.for("react.memo"):60115,kN=ps?Symbol.for("react.lazy"):60116,rEe=ps?Symbol.for("react.block"):60121,sEe=ps?Symbol.for("react.fundamental"):60117,iEe=ps?Symbol.for("react.responder"):60118,oEe=ps?Symbol.for("react.scope"):60119;function Vo(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case PM:switch(t=t.type,t){case kM:case TN:case AN:case IN:case SN:case PN:return t;default:switch(t=t&&t.$$typeof,t){case NN:case RN:case kN:case ON:case xN:return t;default:return e}}case OM:return e}}}function YY(t){return Vo(t)===TN}In.AsyncMode=kM;In.ConcurrentMode=TN;In.ContextConsumer=NN;In.ContextProvider=xN;In.Element=PM;In.ForwardRef=RN;In.Fragment=AN;In.Lazy=kN;In.Memo=ON;In.Portal=OM;In.Profiler=IN;In.StrictMode=SN;In.Suspense=PN;In.isAsyncMode=function(t){return YY(t)||Vo(t)===kM};In.isConcurrentMode=YY;In.isContextConsumer=function(t){return Vo(t)===NN};In.isContextProvider=function(t){return Vo(t)===xN};In.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===PM};In.isForwardRef=function(t){return Vo(t)===RN};In.isFragment=function(t){return Vo(t)===AN};In.isLazy=function(t){return Vo(t)===kN};In.isMemo=function(t){return Vo(t)===ON};In.isPortal=function(t){return Vo(t)===OM};In.isProfiler=function(t){return Vo(t)===IN};In.isStrictMode=function(t){return Vo(t)===SN};In.isSuspense=function(t){return Vo(t)===PN};In.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===AN||t===TN||t===IN||t===SN||t===PN||t===nEe||typeof t=="object"&&t!==null&&(t.$$typeof===kN||t.$$typeof===ON||t.$$typeof===xN||t.$$typeof===NN||t.$$typeof===RN||t.$$typeof===sEe||t.$$typeof===iEe||t.$$typeof===oEe||t.$$typeof===rEe)};In.typeOf=Vo;KY.exports=In;var aEe=KY.exports,DM=aEe,cEe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},lEe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},uEe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},QY={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},LM={};LM[DM.ForwardRef]=uEe;LM[DM.Memo]=QY;function I8(t){return DM.isMemo(t)?QY:LM[t.$$typeof]||cEe}var dEe=Object.defineProperty,hEe=Object.getOwnPropertyNames,x8=Object.getOwnPropertySymbols,fEe=Object.getOwnPropertyDescriptor,pEe=Object.getPrototypeOf,N8=Object.prototype;function JY(t,e,n){if(typeof e!="string"){if(N8){var r=pEe(e);r&&r!==N8&&JY(t,r,n)}var s=hEe(e);x8&&(s=s.concat(x8(e)));for(var i=I8(t),o=I8(e),a=0;a<s.length;++a){var c=s[a];if(!lEe[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=fEe(e,c);try{dEe(t,c,l)}catch{}}}}return t}var gEe=JY;const mEe=zg(gEe);var ZY={};Object.defineProperty(ZY,"__esModule",{value:!0});ZY.default=yEe;function yEe(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function J1(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TI(){return TI=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TI.apply(this,arguments)}function wEe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function gd(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bEe(t){var e=function(n){wEe(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,J1(gd(gd(i)),"cachedTheme",void 0),J1(gd(gd(i)),"lastOuterTheme",void 0),J1(gd(gd(i)),"lastTheme",void 0),J1(gd(gd(i)),"renderProvider",function(l){var u=i.props.children;return Mo.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?TI({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?Mo.createElement(t.Consumer,null,this.renderProvider):null},r}(Mo.Component);return e}function vEe(t){return function(n){var r=Mo.forwardRef(function(s,i){return Mo.createElement(t.Consumer,null,function(o){return Mo.createElement(n,TI({theme:o,ref:i},s))})});return mEe(r,n),r}}function EEe(t){var e=function(){var r=Mo.useContext(t);return r};return e}function _Ee(t){return{context:t,withTheme:vEe(t),useTheme:EEe(t),ThemeProvider:bEe(t)}}var XY=D.createContext();_Ee(XY);var T8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X0=(typeof window>"u"?"undefined":T8(window))==="object"&&(typeof document>"u"?"undefined":T8(document))==="object"&&document.nodeType===9;function i_(t){"@babel/helpers - typeof";return i_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i_(t)}function CEe(t,e){if(i_(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(i_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function AEe(t){var e=CEe(t,"string");return i_(e)=="symbol"?e:e+""}function SEe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,AEe(r.key),r)}}function MM(t,e,n){return e&&SEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function aD(t,e){return aD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},aD(t,e)}function eQ(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,aD(t,e)}function R8(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var IEe={}.constructor;function cD(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(cD);if(t.constructor!==IEe)return t;var e={};for(var n in t)e[n]=cD(t[n]);return e}function DN(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=cD(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var P8=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},Xp=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=P8(e[r]," ");else n=P8(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function eb(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function $b(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function o_(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=eb(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=$b(f+":"+u+Xp(p)+";",o))}}else for(var g in a){var y=a[g];y!=null&&(r&&(r+=l),r+=$b(g+":"+u+Xp(y)+";",o))}for(var m in e){var w=e[m];w!=null&&m!=="fallbacks"&&(r&&(r+=l),r+=$b(m+":"+u+Xp(w)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),$b(""+t+u+"{"+r,o)+$b("}",o))}var xEe=/([[\].#*$><+~=|^:(),"'`\s])/g,O8=typeof CSS<"u"&&CSS.escape,UM=function(t){return O8?O8(t):t.replace(xEe,"\\$1")},tQ=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),lD=function(t){eQ(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(R8(R8(o)),l),o.selectorText="."+UM(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=Xp(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?dr({},s,{allowEmpty:!0}):s;return o_(this.selectorText,this.style,a)},MM(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(tQ),NEe={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new lD(e,n,r)}},nP={indent:1,children:!0},TEe=/@([\w-]+)/,REe=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(TEe);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new LN(dr({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=nP);var s=eb(r),i=s.linebreak;if(r.indent==null&&(r.indent=nP.indent),r.children==null&&(r.children=nP.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),PEe=/@container|@media|@supports\s+/,OEe={onCreateRule:function(e,n,r){return PEe.test(e)?new REe(e,n,r):null}},rP={indent:1,children:!0},kEe=/@keyframes\s+([\w-]+)/,uD=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(kEe);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:UM(c(this,a)),this.rules=new LN(dr({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],dr({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=rP);var s=eb(r),i=s.linebreak;if(r.indent==null&&(r.indent=rP.indent),r.children==null&&(r.children=rP.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),DEe=/@keyframes\s+/,LEe=/\$([\w-]+)/g,dD=function(e,n){return typeof e=="string"?e.replace(LEe,function(r,s){return s in n?n[s]:r}):e},k8=function(e,n,r){var s=e[n],i=dD(s,r);i!==s&&(e[n]=i)},MEe={onCreateRule:function(e,n,r){return typeof e=="string"&&DEe.test(e)?new uD(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&k8(e,"animation-name",r.keyframes),"animation"in e&&k8(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return dD(e,s.keyframes);case"animation-name":return dD(e,s.keyframes);default:return e}}},UEe=function(t){eQ(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?dr({},s,{allowEmpty:!0}):s;return o_(this.key,this.style,a)},e}(tQ),$Ee={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new UEe(e,n,r):null}},BEe=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=eb(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=o_(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return o_(this.at,this.style,r)},t}(),FEe=/@font-face/,jEe={onCreateRule:function(e,n,r){return FEe.test(e)?new BEe(e,n,r):null}},zEe=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return o_(this.key,this.style,r)},t}(),WEe={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new zEe(e,n,r):null}},HEe=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),GEe={"@charset":!0,"@import":!0,"@namespace":!0},qEe={onCreateRule:function(e,n,r){return e in GEe?new HEe(e,n,r):null}},D8=[NEe,OEe,MEe,$Ee,jEe,WEe,qEe],VEe={process:!0},L8={force:!0,process:!0},LN=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=dr({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+UM(this.classes[p]));var g=DN(p,s,f);if(!g)return null;this.register(g);var y=f.index===void 0?this.index.length:f.index;return this.index.splice(y,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=dr({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof lD?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof uD&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof lD?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof uD&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=VEe);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,L8)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,L8)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=eb(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),nQ=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=dr({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new LN(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),KEe=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),YEe=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=VY(s,["attached"]),a=eb(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},MM(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),Vv=new YEe,hD=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),fD="2f1acc6c3a606b082e5eef5e54414ffb";hD[fD]==null&&(hD[fD]=0);var M8=hD[fD]++,U8=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+M8+a+n:c+i.key+"-"+M8+(a?"-"+a:"")+"-"+n};return r},rQ=function(e){var n;return function(){return n||(n=e()),n}},QEe=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},JEe=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=Xp(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},ZEe=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},XEe=function(e,n){return e.selectorText=n,e.selectorText===n},sQ=rQ(function(){return document.querySelector("head")});function e_e(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function t_e(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function n_e(t){for(var e=sQ(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function r_e(t){var e=Vv.registry;if(e.length>0){var n=e_e(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=t_e(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=n_e(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function s_e(t,e){var n=e.insertionPoint,r=r_e(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}sQ().appendChild(t)}var i_e=rQ(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),$8=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},B8=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},o_e=function(){var e=document.createElement("style");return e.textContent=`
`,e},a_e=function(){function t(n){this.getPropertyValue=QEe,this.setProperty=JEe,this.removeProperty=ZEe,this.setSelector=XEe,this.hasInsertedRules=!1,this.cssRules=[],n&&Vv.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||o_e(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=i_e();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){s_e(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=B8(i,s);if(a=$8(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=B8(i,s),d=$8(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof nQ&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),c_e=0,l_e=function(){function t(n){this.id=c_e++,this.version="10.10.0",this.plugins=new KEe,this.options={id:{minify:!1},createGenerateId:U8,Renderer:X0?a_e:null,plugins:[]},this.generateId=U8({minify:!1});for(var r=0;r<D8.length;r++)this.plugins.use(D8[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=dr({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=Vv.index===0?0:Vv.index+1);var a=new nQ(r,dr({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),Vv.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=dr({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=DN(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),iQ=function(e){return new l_e(e)},F8=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},MM(t,[{key:"size",get:function(){return this.length}}]),t}(),$M=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function oQ(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=oQ(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */iQ();var aQ=Date.now(),sP="fnValues"+aQ,iP="fnStyle"+ ++aQ,u_e=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=DN(n,{},s);return i[iP]=r,i},onProcessStyle:function(n,r){if(sP in r||iP in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[sP]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[iP];a&&(o.style=a(n)||{});var c=o[sP];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function d_e(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var Km;typeof self<"u"?Km=self:typeof window<"u"?Km=window:typeof global<"u"?Km=global:typeof module<"u"?Km=module:Km=Function("return this")();var j8=d_e(Km),z8=function(e){return e&&e[j8]&&e===e[j8]()},h_e=function(e){return{onCreateRule:function(r,s,i){if(!z8(s))return null;var o=s,a=DN(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!z8(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},f_e=/;\n/,p_e=function(e){for(var n={},r=e.split(f_e),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},g_e=function(e){typeof e.style=="string"&&(e.style=p_e(e.style))};function m_e(){return{onProcessRule:g_e}}var Wh="@global",pD="@global ",y_e=function(){function t(n,r,s){this.type="global",this.at=Wh,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new LN(dr({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),w_e=function(){function t(n,r,s){this.type="global",this.at=Wh,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(pD.length);this.rule=s.jss.createRule(i,r,dr({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),b_e=/\s*,\s*/g;function cQ(t,e){for(var n=t.split(b_e),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function v_e(t,e){var n=t.options,r=t.style,s=r?r[Wh]:null;if(s){for(var i in s)e.addRule(i,s[i],dr({},n,{selector:cQ(i,t.selector)}));delete r[Wh]}}function E_e(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,Wh.length)!==Wh)){var i=cQ(s.substr(Wh.length),t.selector);e.addRule(i,r[s],dr({},n,{selector:i})),delete r[s]}}function __e(){function t(n,r,s){if(!n)return null;if(n===Wh)return new y_e(n,r,s);if(n[0]==="@"&&n.substr(0,pD.length)===pD)return new w_e(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(v_e(n,r),E_e(n,r))}return{onCreateRule:t,onProcessRule:e}}var tS=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},oP="extendCurrValue"+Date.now();function C_e(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];pp(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?dr({},t,{extend:l}):t.extend[c];pp(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){pp(t.extend.extend,e,n,r);continue}if(tS(t.extend[d])){d in r||(r[d]={}),pp(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function A_e(t,e,n,r){for(var s in t)if(s!=="extend"){if(tS(r[s])&&tS(t[s])){pp(t[s],e,n,r[s]);continue}if(tS(t[s])){r[s]=pp(t[s],e,n);continue}r[s]=t[s]}}function pp(t,e,n,r){return r===void 0&&(r={}),C_e(t,e,n,r),A_e(t,e,n,r),r}function S_e(){function t(n,r,s){return"extend"in n?pp(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[oP])s.prop(i,null);return s[oP]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[oP]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var W8=/\s*,\s*/g,I_e=/&/g,x_e=/\$([\w-]+)/g;function N_e(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(W8),a=s.split(W8),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(I_e,u):u+" "+h}return c}function n(s,i,o){if(o)return dr({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=dr({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(x_e,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],dr({},l,{selector:p})):c.addRule(g,s[d],dr({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function gD(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=gD(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return gD(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function T_e(){function t(e,n){return"composes"in e&&(gD(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var R_e=/[A-Z]/g,P_e=/^ms-/,aP={};function O_e(t){return"-"+t.toLowerCase()}function lQ(t){if(aP.hasOwnProperty(t))return aP[t];var e=t.replace(R_e,O_e);return aP[t]=P_e.test(e)?"-"+e:e}function RI(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:lQ(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(RI):e.fallbacks=RI(t.fallbacks)),e}function k_e(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=RI(n[r]);return n}return RI(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=lQ(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var de=$M&&CSS?CSS.px:"px",Z1=$M&&CSS?CSS.ms:"ms",Em=$M&&CSS?CSS.percent:"%",D_e={"animation-delay":Z1,"animation-duration":Z1,"background-position":de,"background-position-x":de,"background-position-y":de,"background-size":de,border:de,"border-bottom":de,"border-bottom-left-radius":de,"border-bottom-right-radius":de,"border-bottom-width":de,"border-left":de,"border-left-width":de,"border-radius":de,"border-right":de,"border-right-width":de,"border-top":de,"border-top-left-radius":de,"border-top-right-radius":de,"border-top-width":de,"border-width":de,"border-block":de,"border-block-end":de,"border-block-end-width":de,"border-block-start":de,"border-block-start-width":de,"border-block-width":de,"border-inline":de,"border-inline-end":de,"border-inline-end-width":de,"border-inline-start":de,"border-inline-start-width":de,"border-inline-width":de,"border-start-start-radius":de,"border-start-end-radius":de,"border-end-start-radius":de,"border-end-end-radius":de,margin:de,"margin-bottom":de,"margin-left":de,"margin-right":de,"margin-top":de,"margin-block":de,"margin-block-end":de,"margin-block-start":de,"margin-inline":de,"margin-inline-end":de,"margin-inline-start":de,padding:de,"padding-bottom":de,"padding-left":de,"padding-right":de,"padding-top":de,"padding-block":de,"padding-block-end":de,"padding-block-start":de,"padding-inline":de,"padding-inline-end":de,"padding-inline-start":de,"mask-position-x":de,"mask-position-y":de,"mask-size":de,height:de,width:de,"min-height":de,"max-height":de,"min-width":de,"max-width":de,bottom:de,left:de,top:de,right:de,inset:de,"inset-block":de,"inset-block-end":de,"inset-block-start":de,"inset-inline":de,"inset-inline-end":de,"inset-inline-start":de,"box-shadow":de,"text-shadow":de,"column-gap":de,"column-rule":de,"column-rule-width":de,"column-width":de,"font-size":de,"font-size-delta":de,"letter-spacing":de,"text-decoration-thickness":de,"text-indent":de,"text-stroke":de,"text-stroke-width":de,"word-spacing":de,motion:de,"motion-offset":de,outline:de,"outline-offset":de,"outline-width":de,perspective:de,"perspective-origin-x":Em,"perspective-origin-y":Em,"transform-origin":Em,"transform-origin-x":Em,"transform-origin-y":Em,"transform-origin-z":Em,"transition-delay":Z1,"transition-duration":Z1,"vertical-align":de,"flex-basis":de,"shape-margin":de,size:de,gap:de,grid:de,"grid-gap":de,"row-gap":de,"grid-row-gap":de,"grid-column-gap":de,"grid-template-rows":de,"grid-template-columns":de,"grid-auto-rows":de,"grid-auto-columns":de,"box-shadow-x":de,"box-shadow-y":de,"box-shadow-blur":de,"box-shadow-spread":de,"font-line-height":de,"text-shadow-x":de,"text-shadow-y":de,"text-shadow-blur":de};function uQ(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var L_e=uQ(D_e);function Kv(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=Kv(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=Kv(s,e[s],n);else for(var i in e)e[i]=Kv(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||L_e[t];return o&&!(e===0&&o===de)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function M_e(t){t===void 0&&(t={});var e=uQ(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=Kv(o,s[o],e);return s}function r(s,i){return Kv(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var U_e={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},$_e={position:!0,size:!0},X1={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},cP={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function B_e(t,e,n){return t.map(function(r){return hQ(r,e,n,!1,!0)})}function dQ(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?dQ(t[0],e,n,r):typeof t[0]=="object"?B_e(t,e,r):[t]}function hQ(t,e,n,r,s){if(!(X1[e]||cP[e]))return[];var i=[];if(cP[e]&&(t=F_e(t,n,cP[e],r)),Object.keys(t).length)for(var o in X1[e]){if(t[o]){Array.isArray(t[o])?i.push($_e[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}X1[e][o]!=null&&i.push(X1[e][o])}return!i.length||s?i:[i]}function F_e(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=a_((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function a_(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=a_(t.fallbacks[i],e,!0);continue}t[r]=dQ(s,r,U_e,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=a_(t.fallbacks,e,!0);continue}t[r]=hQ(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function j_e(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=a_(e[r],n);return e}return a_(e,n)}return{onProcessStyle:t}}function mD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function z_e(t){if(Array.isArray(t))return mD(t)}function W_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function H_e(t,e){if(t){if(typeof t=="string")return mD(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mD(t,e):void 0}}function G_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q_e(t){return z_e(t)||W_e(t)||H_e(t)||G_e()}var uv="",yD="",fQ="",pQ="",V_e=X0&&"ontouchstart"in document.documentElement;if(X0){var lP={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},K_e=document.createElement("p"),uP=K_e.style,Y_e="Transform";for(var dP in lP)if(dP+Y_e in uP){uv=dP,yD=lP[dP];break}uv==="Webkit"&&"msHyphens"in uP&&(uv="ms",yD=lP.ms,pQ="edge"),uv==="Webkit"&&"-apple-trailing-word"in uP&&(fQ="apple")}var Ot={js:uv,css:yD,vendor:fQ,browser:pQ,isTouch:V_e};function Q_e(t){return t[1]==="-"||Ot.js==="ms"?t:"@"+Ot.css+"keyframes"+t.substr(10)}var J_e={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:Ot.js==="ms"?"-webkit-"+e:Ot.css+e}},Z_e={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:Ot.js==="Webkit"?Ot.css+"print-"+e:e}},X_e=/[-\s]+(.)?/g;function eCe(t,e){return e?e.toUpperCase():""}function BM(t){return t.replace(X_e,eCe)}function sf(t){return BM("-"+t)}var tCe={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(Ot.js==="Webkit"){var r="mask-image";if(BM(r)in n)return e;if(Ot.js+sf(r)in n)return Ot.css+e}return e}},nCe={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:Ot.vendor==="apple"&&!Ot.isTouch?Ot.css+e:e}},rCe={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:Ot.css+e}},sCe={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:Ot.css+e}},iCe={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:Ot.js==="Webkit"||Ot.js==="ms"&&Ot.browser!=="edge"?Ot.css+e:e}},oCe={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:Ot.js==="Moz"||Ot.js==="ms"||Ot.vendor==="apple"?Ot.css+e:e}},aCe={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(Ot.js==="Webkit"){var r="WebkitColumn"+sf(e);return r in n?Ot.css+"column-"+e:!1}if(Ot.js==="Moz"){var s="page"+sf(e);return s in n?"page-"+e:!1}return!1}},cCe={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(Ot.js==="Moz")return e;var r=e.replace("-inline","");return Ot.js+sf(r)in n?Ot.css+r:!1}},lCe={supportedProperty:function(e,n){return BM(e)in n?e:!1}},uCe={supportedProperty:function(e,n){var r=sf(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:Ot.js+r in n?Ot.css+e:Ot.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},dCe={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:Ot.js==="ms"?""+Ot.css+e:e}},hCe={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:Ot.js==="ms"?Ot.css+"scroll-chaining":e}},fCe={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},pCe={supportedProperty:function(e,n){var r=fCe[e];return r&&Ot.js+sf(r)in n?Ot.css+r:!1}},gQ={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},gCe=Object.keys(gQ),mCe=function(e){return Ot.css+e},yCe={supportedProperty:function(e,n,r){var s=r.multiple;if(gCe.indexOf(e)>-1){var i=gQ[e];if(!Array.isArray(i))return Ot.js+sf(i)in n?Ot.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(Ot.js+sf(i[0])in n))return!1;return i.map(mCe)}return!1}},mQ=[J_e,Z_e,tCe,nCe,rCe,sCe,iCe,oCe,aCe,cCe,lCe,uCe,dCe,hCe,pCe,yCe],H8=mQ.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),wCe=mQ.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,q_e(e.noPrefill)),t},[]),dv,Kf={};if(X0){dv=document.createElement("p");var hP=window.getComputedStyle(document.documentElement,"");for(var fP in hP)isNaN(fP)||(Kf[hP[fP]]=hP[fP]);wCe.forEach(function(t){return delete Kf[t]})}function wD(t,e){if(e===void 0&&(e={}),!dv)return t;if(Kf[t]!=null)return Kf[t];(t==="transition"||t==="transform")&&(e[t]=t in dv.style);for(var n=0;n<H8.length&&(Kf[t]=H8[n](t,dv.style,e),!Kf[t]);n++);try{dv.style[t]=""}catch{return!1}return Kf[t]}var _m={},bCe={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},vCe=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Pd;function ECe(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?wD(e):", "+wD(n);return r||e||n}X0&&(Pd=document.createElement("p"));function G8(t,e){var n=e;if(!Pd||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(_m[r]!=null)return _m[r];try{Pd.style[t]=n}catch{return _m[r]=!1,!1}if(bCe[t])n=n.replace(vCe,ECe);else if(Pd.style[t]===""&&(n=Ot.css+n,n==="-ms-flex"&&(Pd.style[t]="-ms-flexbox"),Pd.style[t]=n,Pd.style[t]===""))return _m[r]=!1,!1;return Pd.style[t]="",_m[r]=n,_m[r]}function _Ce(){function t(s){if(s.type==="keyframes"){var i=s;i.at=Q_e(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=wD(i);c&&c!==i&&(a=!0);var l=!1,u=G8(c,Xp(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return G8(i,Xp(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function CCe(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var ACe=function(e){return e===void 0&&(e={}),{plugins:[u_e(),h_e(e.observable),m_e(),__e(),S_e(),N_e(),T_e(),k_e(),M_e(e.defaultUnit),j_e(),_Ce(),CCe()]}},SCe=Number.MIN_SAFE_INTEGER||-1e9,ICe=function(){return SCe++},xCe=D.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!X0}),q8=new Map,FM=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new F8),r[n];var s=q8.get(n);return s||(s=new F8,q8.set(n,s)),s},V8=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=FM(r,s);o.manage(i),r.registry&&r.registry.add(n)}},NCe=function(e){if(e.sheet){var n=FM(e.context,e.index);n.unmanage(e.theme)}},TCe=iQ(ACe()),yQ=new WeakMap,wQ=function(e){return yQ.get(e)},RCe=function(e,n){yQ.set(e,n)},PCe=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function OCe(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",dr({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var kCe=function(e){if(!e.context.disableStylesGeneration){var n=FM(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||TCe,i=PCe(e),o=oQ(i),a=s.createStyleSheet(i,OCe(e,o!==null));return RCe(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},DCe=function(e,n){for(var r in n)e.deleteRule(n[r])},LCe=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},MCe=function(e,n){var r=wQ(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},UCe=function(e,n){if(!n)return e.classes;var r=wQ(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function K8(t){return t?D.useEffect:Mo.useInsertionEffect||D.useLayoutEffect}var pP={},Rc=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?ICe():s,o=r.theming,a=r.name,c=VY(r,["index","theming","name"]),l=o&&o.context||XY,u=function(f){return typeof e=="function"&&(f||D.useContext(l))||pP},d={};return function(f){var p=D.useRef(!0),g=D.useContext(xCe),y=u(f&&f.theme),m=D.useMemo(function(){var C=kCe({context:g,styles:e,name:a,theme:y,index:i,sheetOptions:c});return C&&g.isSSR&&V8({index:i,context:g,sheet:C,theme:y}),[C,C?MCe(C,f):null]},[g,y]),w=m[0],v=m[1];K8(g.isSSR)(function(){w&&v&&!p.current&&LCe(f,w,v)},[f]),K8(g.isSSR)(function(){return w&&V8({index:i,context:g,sheet:w,theme:y}),function(){w&&(NCe({index:i,context:g,sheet:w,theme:y}),v&&DCe(w,v))}},[w]);var A=D.useMemo(function(){return w&&v?UCe(w,v):d},[w,v]);return D.useDebugValue(A),D.useDebugValue(y===pP?"No theme":y),D.useEffect(function(){p.current=!1}),A}};const $Ce=Rc({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function gP({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=$Ce(),d=D.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=b.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[b.jsx("img",{src:t,alt:e,className:u.iconImage}),b.jsx("span",{className:u.iconLabel,children:e})]});return o?f:b.jsx($C,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const BCe=Rc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function oa({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=BCe({isOpen:e}),u=D.useRef(null),d=()=>{r&&r(t)};return b.jsx($C,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:b.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[b.jsxs("div",{className:l.header,children:[b.jsx("span",{children:i||t.replace("-popup","")}),b.jsxs("div",{className:l.titleBarButtons,children:[b.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),b.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:"✕"})]})]}),b.jsx("div",{className:l.content,children:s})]})})}const mP=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],FCe=80,jCe=80,zCe=10,WCe=10,HCe=10,GCe=10,qCe=({onIconClick:t})=>{const e=mP.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:HCe+d*(FCe+zCe),y:GCe+u*(jCe+WCe)},u++,u>=4&&(u=0,d++)}),l},[r,s]=D.useState(n()),[i,o]=D.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return b.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:b.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>b.jsx(gP,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&b.jsx(oa,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:b.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:mP.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>b.jsx(gP,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&b.jsx(oa,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:b.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:mP.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>b.jsx(gP,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},VCe=Rc({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),KCe=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=D.useState(!1),[o,a]=D.useState(new Date),c=VCe({isOpen:s});D.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return b.jsxs("div",{className:c.taskbar,children:[b.jsxs("div",{className:c.leftSection,children:[b.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),b.jsx("div",{className:c.windows,children:t.map(h=>b.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),b.jsxs("div",{className:c.rightSection,children:[b.jsxs("div",{className:c.statusSection,children:[b.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:b.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),b.jsx("div",{className:c.clock,children:l(o)})]}),s&&b.jsxs("div",{className:c.menu,children:[b.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),b.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),b.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),b.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),b.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),b.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),b.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),b.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function bQ(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function jM(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function vQ(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function zM(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function EQ(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function _Q(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=`https://api.opensea.io/api/v2/collection/${t}/nfts?chain=solana&limit=${e}&include_orders=true`;try{const i=await fetch(r,{headers:{"X-API-KEY":n}});if(!i.ok)throw new Error(`Failed to get OpenSea Solana NFTs: ${i.statusText}`);const o=await i.json();console.log("Solana collection response:",o),console.log("Sample NFT from response:",o.nfts[0]),console.log("Sample NFT owners:",(s=o.nfts[0])==null?void 0:s.owners),console.log("Sample NFT full structure:",JSON.stringify(o.nfts[0],null,2));const a=o.nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"SOL",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea Solana NFTs:",i),i}}async function YCe(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=[`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false&include_metadata=true`];for(const i of r){console.log("Trying OpenSea endpoint:",i);try{const o=await fetch(i,{headers:{"X-API-KEY":n}});if(console.log("Response status:",o.status),!o.ok){const c=await o.text();console.error("API Error response:",c);continue}const a=await o.json();if(console.log("Raw API response:",a),console.log("Number of NFTs returned:",((s=a.nfts)==null?void 0:s.length)||0),a.nfts&&a.nfts.length>0){const c=a.nfts.map(l=>({id:l.identifier,address:l.contract,token_id:parseInt(l.identifier,10),attributes:JSON.stringify(l.traits||[]),name:l.name||`#${l.identifier}`,image_url:l.image_url,owner_of:t,block_minted:0,contract_type:"SOL",description:l.description||"",image:l.image_url,image_url_shrunk:l.image_url,animation_url:l.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:"",num_items:1,created_at:l.updated_at||new Date().toISOString(),updated_at:l.updated_at||new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}));return console.log("Transformed NFTs:",c.length),{page:1,pageSize:e,totalCount:c.length,totalPages:1,data:c}}}catch(o){console.error("Error with endpoint:",i,o);continue}}return console.log("All OpenSea endpoints failed, returning empty result"),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]}}const QCe=Rc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),JCe=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=QCe({isOpen:t}),i=D.useRef(null),[o,a]=D.useState([]),[c,l]=D.useState(!1),[u,d]=D.useState(!1),[h,f]=D.useState({}),[p,g]=D.useState(null),{data:y}=wY();D.useEffect(()=>{t&&r&&m()},[t,r]);const m=async()=>{l(!0),g(null);try{const S=await bQ(r);a(S);const x={};S.forEach(T=>{x[T.id]=0}),f(x)}catch(S){g(S.message)}finally{l(!1)}},w=(S,x)=>{f(T=>({...T,[S]:Math.max(0,x)}))},v=async()=>{const S=Object.entries(h).filter(([,x])=>x>0).map(([x,T])=>({id:x,quantity:T}));if(S.length===0){g("Please select at least one item to mint");return}if(!y){g("Wallet not connected");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const x=await vQ(r,S);if(console.log("Mint API result:",x),x.success&&x.mintTransaction){console.log("Got mint transaction:",x.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const T=await y.sendTransaction({to:x.mintTransaction.to,value:BigInt(x.mintTransaction.value),data:x.mintTransaction.data});console.log("Transaction sent successfully:",T),alert(`NFT Minted Successfully: Transaction Hash - ${T}`),e()}catch(T){console.error("Transaction sending failed:",T),g("Transaction failed: "+T.message)}}else throw new Error(x.message||"Could not retrieve minting transaction.")}catch(x){console.error("Minting failed:",x),g("Minting failed: "+x.message)}finally{d(!1)}},A=(S,x)=>`${parseFloat(S)} ${x}`,C=()=>{n&&n()};return t?b.jsx($C,{nodeRef:i,handle:`.${s.header}`,children:b.jsxs("div",{ref:i,className:s.popup,children:[b.jsxs("div",{className:s.header,children:[b.jsx("span",{children:"Mint Pixelawbster"}),b.jsxs("div",{className:s.titleBarButtons,children:[b.jsx("button",{className:s.titleBarButton,onClick:C,title:"Minimize",children:"_"}),b.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),b.jsxs("div",{className:s.content,children:[p&&b.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?b.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?b.jsx("div",{children:"No eligible invite lists found for your wallet."}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{marginBottom:"20px"},children:[b.jsx("h3",{children:"Available Lists:"}),o.map(S=>b.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[b.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:S.name}),b.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",A(S.token_price,S.currency_symbol)]}),b.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",S.wallet_limit===4294967295?"Unlimited":S.wallet_limit," per wallet"]}),b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[b.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),b.jsx("input",{type:"number",min:"0",max:S.wallet_limit===4294967295?999:S.wallet_limit,value:h[S.id]||0,onChange:x=>w(S.id,parseInt(x.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},S.id))]}),b.jsx("button",{onClick:()=>void v(),disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},ZCe=Rc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),XCe=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},e1e=({nft:t,onClose:e})=>{const n=ZCe(),r=D.useRef(null),s=XCe(t.attributes);return b.jsx($C,{nodeRef:r,handle:`.${n.header}`,children:b.jsxs("div",{className:n.popup,ref:r,children:[b.jsxs("div",{className:n.header,children:[b.jsxs("span",{children:[t.name," - Details"]}),b.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),b.jsxs("div",{className:n.content,children:[b.jsx("img",{src:t.image_url,alt:t.name,className:n.detailImage}),b.jsx("h3",{children:"Traits"}),b.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>b.jsxs("li",{children:[b.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):b.jsx("li",{children:"No traits found."})})]})]})})},t1e=Symbol(),Y8=Object.getPrototypeOf,bD=new WeakMap,n1e=t=>t&&(bD.has(t)?bD.get(t):Y8(t)===Object.prototype||Y8(t)===Array.prototype),r1e=t=>n1e(t)&&t[t1e]||null,Q8=(t,e=!0)=>{bD.set(t,e)},PI={},yP=t=>typeof t=="object"&&t!==null,Ud=new WeakMap,hv=new WeakSet,s1e=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>yP(l)&&!hv.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return Q8(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:y}=Reflect.getOwnPropertyDescriptor(l,p),m={value:g,enumerable:y,configurable:!0};if(hv.has(g))Q8(g,!1);else if(g instanceof Promise)delete m.value,m.get=()=>d(g);else if(Ud.has(g)){const[w,v]=Ud.get(g);m.value=i(w,v(),d)}Object.defineProperty(f,p,m)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!yP(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(I,k=++a[0])=>{d!==k&&(d=k,h.forEach(O=>O(I,k)))};let p=a[1];const g=(I=++a[1])=>(p!==I&&!h.size&&(p=I,m.forEach(([k])=>{const O=k[1](I);O>d&&(d=O)})),d),y=I=>(k,O)=>{const B=[...k];B[1]=[I,...B[1]],f(B,O)},m=new Map,w=(I,k)=>{if((PI?"production":void 0)!=="production"&&m.has(I))throw new Error("prop listener already exists");if(h.size){const O=k[3](y(I));m.set(I,[k,O])}else m.set(I,[k])},v=I=>{var k;const O=m.get(I);O&&(m.delete(I),(k=O[1])==null||k.call(O))},A=I=>(h.add(I),h.size===1&&m.forEach(([O,B],G)=>{if((PI?"production":void 0)!=="production"&&B)throw new Error("remove already exists");const W=O[3](y(G));m.set(G,[O,W])}),()=>{h.delete(I),h.size===0&&m.forEach(([O,B],G)=>{B&&(B(),m.set(G,[O]))})}),C=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),x=e(C,{deleteProperty(I,k){const O=Reflect.get(I,k);v(k);const B=Reflect.deleteProperty(I,k);return B&&f(["delete",[k],O]),B},set(I,k,O,B){const G=Reflect.has(I,k),W=Reflect.get(I,k,B);if(G&&(t(W,O)||o.has(O)&&t(W,o.get(O))))return!0;v(k),yP(O)&&(O=r1e(O)||O);let R=O;if(O instanceof Promise)O.then(N=>{O.status="fulfilled",O.value=N,f(["resolve",[k],N])}).catch(N=>{O.status="rejected",O.reason=N,f(["reject",[k],N])});else{!Ud.has(O)&&n(O)&&(R=c(O));const N=!hv.has(R)&&Ud.get(R);N&&w(k,N)}return Reflect.set(I,k,R,B),f(["set",[k],O,W]),!0}});o.set(l,x);const T=[C,g,i,A];return Ud.set(x,T),Reflect.ownKeys(l).forEach(I=>{const k=Object.getOwnPropertyDescriptor(l,I);"value"in k&&(x[I]=l[I],delete k.value,delete k.writable),Object.defineProperty(C,I,k)}),x})=>[c,Ud,hv,t,e,n,r,s,i,o,a],[i1e]=s1e();function er(t={}){return i1e(t)}function Xs(t,e,n){const r=Ud.get(t);(PI?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function c_(t,e){const n=Ud.get(t);(PI?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function Ag(t){return hv.add(t),t}function ti(t,e,n,r){let s=t[e];return Xs(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function o1e(t){const e=er({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var J8={};const ze={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof J8<"u"?J8.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},CQ={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=ze.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var a1e=20,c1e=1,Sg=1e6,Z8=1e6,l1e=-7,u1e=21,d1e=!1,BC="[big.js] ",Zg=BC+"Invalid ",MN=Zg+"decimal places",h1e=Zg+"rounding mode",AQ=BC+"Division by zero",Sn={},Sl=void 0,f1e=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function SQ(){function t(e){var n=this;if(!(n instanceof t))return e===Sl?SQ():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(Zg+"value");e=e===0&&1/e<0?"-0":String(e)}p1e(n,e)}n.constructor=t}return t.prototype=Sn,t.DP=a1e,t.RM=c1e,t.NE=l1e,t.PE=u1e,t.strict=d1e,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function p1e(t,e){var n,r,s;if(!f1e.test(e))throw Error(Zg+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function Xg(t,e,n,r){var s=t.c;if(n===Sl&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(h1e);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Sl))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Sl||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function em(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}Sn.abs=function(){var t=new this.constructor(this);return t.s=1,t};Sn.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};Sn.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>Sg)throw Error(MN);if(!s[0])throw Error(AQ);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),y=g.length,m=t,w=m.c=[],v=0,A=o+(m.e=e.e-t.e)+1;for(m.s=i,i=A<0?0:A,h.unshift(0);y++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(y=g.length))u=a>y?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=y==a?s:h;y;){if(g[--y]<c[y]){for(d=y;d&&!g[--d];)g[d]=9;--g[d],g[y]+=10}g[y]-=c[y]}for(;!g[0];)g.shift()}else break}w[v++]=u?l:++l,g[0]&&u?g[y]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==Sl)&&i--);return!w[0]&&v!=1&&(w.shift(),m.e--,A--),v>A&&Xg(m,A,n.RM,g[0]!==Sl),m};Sn.eq=function(t){return this.cmp(t)===0};Sn.gt=function(t){return this.cmp(t)>0};Sn.gte=function(t){return this.cmp(t)>-1};Sn.lt=function(t){return this.cmp(t)<0};Sn.lte=function(t){return this.cmp(t)<1};Sn.minus=Sn.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};Sn.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(AQ);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};Sn.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};Sn.plus=Sn.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};Sn.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-Z8||t>Z8)throw Error(Zg+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};Sn.prec=function(t,e){if(t!==~~t||t<1||t>Sg)throw Error(Zg+"precision");return Xg(new this.constructor(this),t,e)};Sn.round=function(t,e){if(t===Sl)t=0;else if(t!==~~t||t<-Sg||t>Sg)throw Error(MN);return Xg(new this.constructor(this),t+this.e+1,e)};Sn.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(BC+"No square root");i=Math.sqrt(+em(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return Xg(t,(s.DP-=4)+t.e+1,s.RM)};Sn.times=Sn.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};Sn.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Sl){if(t!==~~t||t<0||t>Sg)throw Error(MN);for(n=Xg(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return em(n,!0,!!r)};Sn.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Sl){if(t!==~~t||t<0||t>Sg)throw Error(MN);for(n=Xg(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return em(n,!1,!!r)};Sn[Symbol.for("nodejs.util.inspect.custom")]=Sn.toJSON=Sn.toString=function(){var t=this,e=t.constructor;return em(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};Sn.toNumber=function(){var t=+em(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(BC+"Imprecise conversion");return t};Sn.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==Sl){if(t!==~~t||t<1||t>Sg)throw Error(Zg+"precision");for(n=Xg(new r(n),t,e);n.c.length<t;)n.c.push(0)}return em(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};Sn.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(BC+"valueOf disallowed");return em(t,t.e<=e.NE||t.e>=e.PE,!0)};var ml=SQ();const g1e={bigNumber(t){return t?new ml(t):new ml(0)},multiply(t,e){if(t===void 0||e===void 0)return new ml(0);const n=new ml(t),r=new ml(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},m1e=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],y1e=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],w1e=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],b1e={getERC20Abi:t=>ze.USDT_CONTRACT_ADDRESSES.includes(t)?w1e:m1e,getSwapAbi:()=>y1e},md={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Tt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections"};function wP(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const At={setItem(t,e){fv()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(fv())return localStorage.getItem(t)||void 0},removeItem(t){fv()&&localStorage.removeItem(t)},clear(){fv()&&localStorage.clear()}};function fv(){return typeof window<"u"&&typeof localStorage<"u"}function ku(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var X8={};const bP=(typeof process<"u"&&typeof X8<"u"?X8.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",IQ=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],v1e="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",Pn={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:bP,SECURE_SITE_DASHBOARD:`${bP}/dashboard`,SECURE_SITE_FAVICON:`${bP}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["coinbase","meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},Je={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Je.getActiveNamespace(),e=Je.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{At.setItem(Tt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=At.getItem(Tt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{At.removeItem(Tt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{At.setItem(Tt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{At.setItem(Tt.ACTIVE_CAIP_NETWORK_ID,t),Je.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return At.getItem(Tt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{At.removeItem(Tt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=wP(t);At.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Je.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),At.setItem(Tt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=At.getItem(Tt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=wP(t);At.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return At.getItem(Tt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=wP(t);return At.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{At.setItem(Tt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return At.getItem(Tt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{At.removeItem(Tt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return At.getItem(Tt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=At.getItem(Tt.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{At.setItem(Tt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return At.getItem(Tt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=At.getItem(Tt.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));At.setItem(Tt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Je.getConnectedNamespaces();e.includes(t)||(e.push(t),Je.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Je.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Je.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return At.getItem(Tt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{At.setItem(Tt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{At.removeItem(Tt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=At.getItem(Tt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Je.getBalanceCache();At.setItem(Tt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Je.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Je.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Je.getBalanceCache();e[t.caipAddress]=t,At.setItem(Tt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=At.getItem(Tt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Je.getBalanceCache();At.setItem(Tt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Je.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Je.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Je.getNativeBalanceCache();e[t.caipAddress]=t,At.setItem(Tt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=At.getItem(Tt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Je.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Je.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Je.getEnsCache();e[t.address]=t,At.setItem(Tt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Je.getEnsCache();At.setItem(Tt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=At.getItem(Tt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Je.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Je.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Je.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},At.setItem(Tt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Je.getIdentityCache();At.setItem(Tt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{At.removeItem(Tt.PORTFOLIO_CACHE),At.removeItem(Tt.NATIVE_BALANCE_CACHE),At.removeItem(Tt.ENS_CACHE),At.removeItem(Tt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{At.setItem(Tt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=At.getItem(Tt.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n={...Je.getConnections(),[e]:t};At.setItem(Tt.CONNECTIONS,JSON.stringify(n))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=At.getItem(Tt.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}}},it={isMobile(){var t;return this.isClient()?!!(typeof(window==null?void 0:window.matchMedia)=="function"&&((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return it.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Pn.TEN_SEC_MS:!0},isAllowedRetry(t,e=Pn.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(it.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Pn.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(it.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!it.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Je.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r,s;if(typeof window>"u")return!1;const t=(r=(n=window.matchMedia)==null?void 0:n.call(window,"(display-mode: standalone)"))==null?void 0:r.matches,e=(s=window==null?void 0:window.navigator)==null?void 0:s.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,it.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return ze.W3M_API_URL},getBlockchainApiUrl(){return ze.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return ze.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?Pn.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in ze.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function Bb(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}let FC=class{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await Bb(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await Bb(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Bb(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Bb(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Bb(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}};const E1e={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?Pn.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(it.isTelegram()){if(it.isIos())return t.filter(e=>e!=="google");if(it.isMac())return t.filter(e=>e!=="x");if(it.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},dt=er({features:Pn.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Pn.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),ve={state:dt,subscribeKey(t,e){return ti(dt,t,e)},setOptions(t){Object.assign(dt,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...dt.remoteFeatures,...t};dt.remoteFeatures=e,(n=dt.remoteFeatures)!=null&&n.socials&&(dt.remoteFeatures.socials=E1e.filterSocialsByPlatform(dt.remoteFeatures.socials))},setFeatures(t){if(!t)return;dt.features||(dt.features=Pn.DEFAULT_FEATURES);const e={...dt.features,...t};dt.features=e},setProjectId(t){dt.projectId=t},setCustomRpcUrls(t){dt.customRpcUrls=t},setAllWallets(t){dt.allWallets=t},setIncludeWalletIds(t){dt.includeWalletIds=t},setExcludeWalletIds(t){dt.excludeWalletIds=t},setFeaturedWalletIds(t){dt.featuredWalletIds=t},setTokens(t){dt.tokens=t},setTermsConditionsUrl(t){dt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){dt.privacyPolicyUrl=t},setCustomWallets(t){dt.customWallets=t},setIsSiweEnabled(t){dt.isSiweEnabled=t},setIsUniversalProvider(t){dt.isUniversalProvider=t},setSdkVersion(t){dt.sdkVersion=t},setMetadata(t){dt.metadata=t},setDisableAppend(t){dt.disableAppend=t},setEIP6963Enabled(t){dt.enableEIP6963=t},setDebug(t){dt.debug=t},setEnableWalletConnect(t){dt.enableWalletConnect=t},setEnableWalletGuide(t){dt.enableWalletGuide=t},setEnableAuthLogger(t){dt.enableAuthLogger=t},setEnableWallets(t){dt.enableWallets=t},setPreferUniversalLinks(t){dt.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){dt.hasMultipleAddresses=t},setSIWX(t){dt.siwx=t},setConnectMethodsOrder(t){dt.features={...dt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){dt.features={...dt.features,walletFeaturesOrder:t}},setSocialsOrder(t){dt.remoteFeatures={...dt.remoteFeatures,socials:t}},setCollapseWallets(t){dt.features={...dt.features,collapseWallets:t}},setEnableEmbedded(t){dt.enableEmbedded=t},setAllowUnsupportedChain(t){dt.allowUnsupportedChain=t},setManualWCControl(t){dt.manualWCControl=t},setEnableNetworkSwitch(t){dt.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(dt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){dt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return dt.universalProviderConfigOverride},getSnapshot(){return c_(dt)}},_1e=Object.freeze({enabled:!0,events:[]}),C1e=new FC({baseUrl:it.getAnalyticsUrl(),clientId:null}),A1e=5,S1e=60*1e3,yd=er({..._1e}),I1e={state:yd,subscribeKey(t,e){return ti(yd,t,e)},async sendError(t,e){if(!yd.enabled)return;const n=Date.now();if(yd.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<S1e}).length>=A1e)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};yd.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=ve.state;await C1e.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:it.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){yd.enabled=!0},disable(){yd.enabled=!1},clearEvents(){yd.events=[]}};let vD=class ED extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,ED.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,ED):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function e4(t,e){const n=t instanceof vD?t:new vD(t instanceof Error?t.message:String(t),e,t);throw I1e.sendError(n,n.category),n}function Ko(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return e4(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return e4(a,e)}},n[r]=i}else n[r]=s}),n}const ll={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},x1e={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===ll.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${ll.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===ll.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${ll.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===ze.CHAIN.SOLANA&&t===ll.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${ll.COINBASE.url}/dapp?cb_url=${r}`)}},go=er({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),N1e={state:go,subscribeNetworkImages(t){return Xs(go.networkImages,()=>t(go.networkImages))},subscribeKey(t,e){return ti(go,t,e)},subscribe(t){return Xs(go,()=>t(go))},setWalletImage(t,e){go.walletImages[t]=e},setNetworkImage(t,e){go.networkImages[t]=e},setChainImage(t,e){go.chainImages[t]=e},setConnectorImage(t,e){go.connectorImages={...go.connectorImages,[t]:e}},setTokenImage(t,e){go.tokenImages[t]=e},setCurrencyImage(t,e){go.currencyImages[t]=e}},cc=Ko(N1e),T1e={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},vP=er({networkImagePromises:{}}),xQ={async fetchWalletImage(t){if(t)return await ot._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(vP.networkImagePromises[t]||(vP.networkImagePromises[t]=ot._fetchNetworkImage(t)),await vP.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return cc.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return cc.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return cc.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return cc.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return cc.state.connectorImages[t.imageId]},getChainImage(t){return cc.state.networkImages[T1e[t]]}},wd=er({message:"",variant:"info",open:!1}),R1e={state:wd,subscribeKey(t,e){return ti(wd,t,e)},open(t,e){const{debug:n}=ve.state,{shortMessage:r,longMessage:s}=t;n&&(wd.message=r,wd.variant=e,wd.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){wd.open=!1,wd.message="",wd.variant="info"}},yl=Ko(R1e),P1e=it.getAnalyticsUrl(),O1e=new FC({baseUrl:P1e,clientId:null}),k1e=["MODAL_CREATED"],Vl=er({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),ir={state:Vl,subscribe(t){return Xs(Vl,()=>t(Vl))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ve.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Qe.state.address;if(k1e.includes(t.data.event)||typeof window>"u")return;await O1e.post({path:"/e",params:ir.getSdkProperties(),body:{eventId:it.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),Vl.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===ze.HTTP_STATUS_CODES.FORBIDDEN&&!Vl.reportedErrors.FORBIDDEN&&(yl.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${fv()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),Vl.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;Vl.timestamp=Date.now(),Vl.data=t,(e=ve.state.features)!=null&&e.analytics&&ir._sendAnalyticsEvent(Vl)}},D1e=it.getApiUrl(),Ni=new FC({baseUrl:D1e,clientId:null}),L1e=40,t4=4,M1e=20,Rt=er({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),ot={state:Rt,subscribeKey(t,e){return ti(Rt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ve.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return ve.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Ni.baseUrl}/getWalletImage/${t}`,n=await Ni.getBlob({path:e,params:ot._getSdkProperties()});cc.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Ni.baseUrl}/public/getAssetImage/${t}`,n=await Ni.getBlob({path:e,params:ot._getSdkProperties()});cc.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Ni.baseUrl}/public/getAssetImage/${t}`,n=await Ni.getBlob({path:e,params:ot._getSdkProperties()});cc.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Ni.baseUrl}/public/getCurrencyImage/${t}`,n=await Ni.getBlob({path:e,params:ot._getSdkProperties()});cc.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Ni.baseUrl}/public/getTokenImage/${t}`,n=await Ni.getBlob({path:e,params:ot._getSdkProperties()});cc.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return it.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===ll.COINBASE.id?!0:z.state.activeChain==="solana"&&(n.id===ll.SOLFLARE.id||n.id===ll.PHANTOM.id)):t},async fetchProjectConfig(){return(await Ni.get({path:"/appkit/v1/config",params:ot._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Ni.get({path:"/projects/v1/origins",params:ot._getSdkProperties()});return t}catch{return[]}},async fetchNetworkImages(){const t=z.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!xQ.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>ot._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=je.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>ot._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>ot._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>ot._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];ot._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(ll).map(o=>o.id));const r=await Ni.get({path:"/getWallets",params:{...ot._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:ot._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=ve.state;if(t!=null&&t.length){const e={...ot._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??t4,include:t},{data:n}=await ot.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>ot._fetchWalletImage(i))),Rt.featured=r,Rt.allFeatured=r}},async fetchRecommendedWallets(){try{Rt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=ve.state,r=[...e??[],...n??[]].filter(Boolean),s=z.getRequestedCaipNetworkIds().join(","),i={page:1,entries:t4,include:t,exclude:r,chains:s},{data:o,count:a}=await ot.fetchWallets(i),c=Je.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>ot._fetchWalletImage(d))),Rt.recommended=o,Rt.allRecommended=o,Rt.count=a??0}catch{}finally{Rt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=ve.state,s=z.getRequestedCaipNetworkIds().join(","),i=[...Rt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:L1e,include:e,exclude:i,chains:s},{data:a,count:c}=await ot.fetchWallets(o),l=a.slice(0,M1e).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>ot._fetchWalletImage(u))),Rt.wallets=it.uniqueBy([...Rt.wallets,...ot._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Rt.count=c>Rt.count?c:Rt.count,Rt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await ot.fetchWallets(e);n&&n.forEach(r=>{Rt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=ve.state,s=z.getRequestedCaipNetworkIds().join(",");Rt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await ot.fetchWallets(i);ir.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>ot._fetchWalletImage(c)),it.wait(300)]),Rt.search=ot._filterOutExtensions(o)},initPromise(t,e){const n=Rt.promises[t];return n||(Rt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&ot.initPromise("connectorImages",ot.fetchConnectorImages),e&&ot.initPromise("featuredWallets",ot.fetchFeaturedWallets),n&&ot.initPromise("recommendedWallets",ot.fetchRecommendedWallets),r&&ot.initPromise("networkImages",ot.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=ve.state.features)!=null&&t.analytics&&ot.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Ni.get({path:"/getAnalyticsConfig",params:ot._getSdkProperties()});ve.setFeatures({analytics:t})}catch{ve.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Rt.featured=Rt.allFeatured,Rt.recommended=Rt.allRecommended;return}const e=z.getRequestedCaipNetworkIds().join(",");Rt.featured=Rt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Rt.recommended=Rt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Rt.filteredWallets=Rt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Rt.filteredWallets=[]},setFilterByNamespace(t){if(!t){Rt.featured=Rt.allFeatured,Rt.recommended=Rt.allRecommended;return}const e=z.getRequestedCaipNetworkIds().join(",");Rt.featured=Rt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Rt.recommended=Rt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Rt.filteredWallets=Rt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},xn=er({view:"Connect",history:["Connect"],transactionStack:[]}),U1e={state:xn,subscribeKey(t,e){return ti(xn,t,e)},pushTransactionStack(t){xn.transactionStack.push(t)},popTransactionStack(t){const e=xn.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Mt.goBack();break;case"cancel":s==null||s(),Mt.goBack();break}},push(t,e){t!==xn.view&&(xn.view=t,xn.history.push(t),xn.data=e)},reset(t,e){xn.view=t,xn.history=[t],xn.data=e},replace(t,e){xn.history.at(-1)===t||(xn.view=t,xn.history[xn.history.length-1]=t,xn.data=e)},goBack(){var r;const t=z.state.activeCaipAddress,e=Mt.state.view==="ConnectingFarcaster",n=!t&&e;if(xn.history.length>1){xn.history.pop();const[s]=xn.history.slice(-1);s&&(t&&s==="Connect"?xn.view="Account":xn.view=s)}else ls.close();(r=xn.data)!=null&&r.wallet&&(xn.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Qe.setFarcasterUrl(void 0,z.state.activeChain);const a=je.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=c_(ve.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(xn.history.length>1){xn.history=xn.history.slice(0,t+1);const[e]=xn.history.slice(-1);e&&(xn.view=e)}},goBackOrCloseModal(){Mt.state.history.length>1?Mt.goBack():ls.close()}},Mt=Ko(U1e),Kl=er({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),_D={state:Kl,subscribe(t){return Xs(Kl,()=>t(Kl))},setThemeMode(t){Kl.themeMode=t;try{const e=je.getAuthConnector();if(e){const n=_D.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:ku(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Kl.themeVariables={...Kl.themeVariables,...t};try{const e=je.getAuthConnector();if(e){const n=_D.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:ku(Kl.themeVariables,Kl.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return c_(Kl)}},Hi=Ko(_D),NQ={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},nn=er({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...NQ},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),$1e={state:nn,subscribe(t){return Xs(nn,()=>{t(nn)})},subscribeKey(t,e){return ti(nn,t,e)},initialize(t){t.forEach(e=>{const n=Je.getConnectedConnectorId(e);n&&je.setConnectorId(n,e)})},setActiveConnector(t){t&&(nn.activeConnector=Ag(t))},setConnectors(t){t.filter(s=>!nn.allConnectors.some(i=>i.id===s.id&&je.getConnectorName(i.name)===je.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&nn.allConnectors.push(Ag(s))});const n=je.getEnabledNamespaces(),r=je.getEnabledConnectors(n);nn.connectors=je.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(nn.filterByNamespaceMap).forEach(e=>{nn.filterByNamespaceMap[e]=!1}),t.forEach(e=>{nn.filterByNamespaceMap[e]=!0}),je.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){nn.filterByNamespaceMap[t]=e,je.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=je.getEnabledNamespaces(),e=je.getEnabledConnectors(t),n=je.areAllNamespacesEnabled();nn.connectors=je.mergeMultiChainConnectors(e),n?ot.clearFilterByNamespaces():ot.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(nn.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return nn.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(nn.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=je.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===ze.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=je.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===ze.CONNECTOR_ID.AUTH){const s=t,i=c_(ve.state),o=Hi.getSnapshot().themeMode,a=Hi.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:ku(a,o)}),je.setConnectors([t])}else je.setConnectors([t])},getAuthConnector(t){var r;const e=t||z.state.activeChain,n=nn.connectors.find(s=>s.id===ze.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return nn.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return nn.allConnectors.find(e=>e.id===t)},getConnector(t,e){return nn.allConnectors.filter(r=>r.chain===z.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=c_(ve.state),r=Hi.getSnapshot().themeMode,s=Hi.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:ku(s,r)})},getConnectorsByNamespace(t){const e=nn.allConnectors.filter(n=>n.chain===t);return je.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=je.getConnector(t.id,t.rdns),n=z.state.activeChain;x1e.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?Mt.push("ConnectingExternal",{connector:e}):Mt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?je.getConnectorsByNamespace(t):je.mergeMultiChainConnectors(nn.allConnectors)},setFilterByNamespace(t){nn.filterByNamespace=t,nn.connectors=je.getConnectors(t),ot.setFilterByNamespace(t)},setConnectorId(t,e){t&&(nn.activeConnectorIds={...nn.activeConnectorIds,[e]:t},Je.setConnectedConnectorId(e,t))},removeConnectorId(t){nn.activeConnectorIds={...nn.activeConnectorIds,[t]:void 0},Je.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return nn.activeConnectorIds[t]},isConnected(t){return t?!!nn.activeConnectorIds[t]:Object.values(nn.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){nn.activeConnectorIds={...NQ}}},je=Ko($1e);var f0={};const B1e="https://secure.walletconnect.org/sdk",F1e=(typeof process<"u"&&typeof f0<"u"?f0.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||B1e,j1e=(typeof process<"u"&&typeof f0<"u"?f0.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",z1e=(typeof process<"u"&&typeof f0<"u"?f0.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ke={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Ps={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},jf=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Lr=er({...jf}),W1e={state:Lr,subscribeKey(t,e){return ti(Lr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=it.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Lr.message=jf.message,Lr.variant=jf.variant,Lr.svg=jf.svg,Lr.open=jf.open,Lr.autoClose=jf.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=jf.autoClose}){Lr.open?(Lr.open=!1,setTimeout(()=>{Lr.message=t,Lr.variant=n,Lr.svg=e,Lr.open=!0,Lr.autoClose=r},150)):(Lr.message=t,Lr.variant=n,Lr.svg=e,Lr.open=!0,Lr.autoClose=r)}},fc=W1e,jn=er({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),H1e={state:jn,subscribe(t){return Xs(jn,()=>t(jn))},setLastNetworkInView(t){jn.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");jn.loading=!0;try{const s=await ft.fetchTransactions({account:t,cursor:jn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=pv.filterSpamTransactions(s.data),o=pv.filterByConnectedChain(i),a=[...jn.transactions,...o];jn.loading=!1,e==="coinbase"?jn.coinbaseTransactions=pv.groupTransactionsByYearAndMonth(jn.coinbaseTransactions,s.data):(jn.transactions=a,jn.transactionsByYear=pv.groupTransactionsByYearAndMonth(jn.transactionsByYear,o)),jn.empty=a.length===0,jn.next=s.next?s.next:void 0}catch{const i=z.state.activeChain;ir.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:ve.state.projectId,cursor:jn.next,isSmartAccount:((r=Qe.state.preferredAccountTypes)==null?void 0:r[i])===Ps.ACCOUNT_TYPES.SMART_ACCOUNT}}),fc.showError("Failed to fetch transactions"),jn.loading=!1,jn.empty=!0,jn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=z.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){jn.next=void 0},resetTransactions(){jn.transactions=[],jn.transactionsByYear={},jn.lastNetworkInView=void 0,jn.loading=!1,jn.empty=!1,jn.next=void 0}},pv=Ko(H1e,"API_ERROR"),Un=er({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"});let Nf;const G1e={state:Un,subscribeKey(t,e){return ti(Un,t,e)},_getClient(){return Un._client},setClient(t){Un._client=Ag(t)},async connectWalletConnect(){var t,e,n,r;if(it.isTelegram()||it.isSafari()&&it.isIos()){if(Nf){await Nf,Nf=void 0;return}if(!it.isPairingExpired(Un==null?void 0:Un.wcPairingExpiry)){const s=Un.wcUri;Un.wcUri=s;return}Nf=(e=(t=pt._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),pt.state.status="connecting",await Nf,Nf=void 0,Un.wcPairingExpiry=void 0,pt.state.status="connected"}else await((r=(n=pt._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var r,s;await((s=(r=pt._getClient())==null?void 0:r.connectExternal)==null?void 0:s.call(r,t)),n&&z.setActiveNamespace(e)},async reconnectExternal(t){var n,r;await((r=(n=pt._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||z.state.activeChain;e&&je.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;ls.setLoading(!0,z.state.activeChain);const n=je.getAuthConnector();n&&(Qe.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Je.setPreferredAccountTypes(Qe.state.preferredAccountTypes??{[e]:t}),await pt.reconnectExternal(n),ls.setLoading(!1,z.state.activeChain),ir.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=z.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=pt._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=pt._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=pt._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=pt._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=pt._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=pt._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=pt._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=pt._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=pt._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=pt._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=pt._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=pt._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Un.wcUri=void 0,Un.wcPairingExpiry=void 0,Un.wcLinking=void 0,Un.recentWallet=void 0,Un.status="disconnected",pv.resetTransactions(),Je.deleteWalletConnectDeepLink()},resetUri(){Un.wcUri=void 0,Un.wcPairingExpiry=void 0,Nf=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=pt.state;t&&Je.setWalletConnectDeepLink(t),e&&Je.setAppKitRecent(e),ir.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Mt.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Un.wcBasic=t},setUri(t){Un.wcUri=t,Un.wcPairingExpiry=it.getPairingExpiry()},setWcLinking(t){Un.wcLinking=t},setWcError(t){Un.wcError=t,Un.buffering=!1},setRecentWallet(t){Un.recentWallet=t},setBuffering(t){Un.buffering=t},setStatus(t){Un.status=t},async disconnect(t){var e;try{await((e=pt._getClient())==null?void 0:e.disconnect(t))}catch(n){throw new vD("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},setConnections(t,e){Un.connections.set(e,t)},switchAccount({connection:t,address:e,namespace:n}){if(je.state.activeConnectorIds[n]===t.connectorId){const i=z.state.activeCaipNetwork;if(i){const o=`${n}:${i.id}:${e}`;Qe.setCaipAddress(o,n)}else console.warn(`No current network found for namespace "${n}"`)}else{const i=je.getConnector(t.connectorId);i?pt.connectExternal(i,n):console.warn(`No connector found for namespace "${n}"`)}}},pt=Ko(G1e),Cm=er({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Il={state:Cm,subscribe(t){return Xs(Cm,()=>t(Cm))},subscribeOpen(t){return ti(Cm,"open",t)},set(t){Object.assign(Cm,{...Cm,...t})}},EP={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Vg(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},n4={async getMyTokensWithBalance(t){const e=Qe.state.address,n=z.state.activeCaipNetwork;if(!e||!n)return[];if(n.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,n);if(s)return this.filterLowQualityTokens(s)}const r=await ft.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(r.balances)},async getEIP155Balances(t,e){var n,r;try{const s=EP.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await pt.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await pt.walletGetAssets({account:t,chainFilter:[s]});return EP.isWalletGetAssetsResponse(o)?(o[s]||[]).map(c=>EP.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:z.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},_n=er({tokenBalances:[],loading:!1}),q1e={state:_n,subscribe(t){return Xs(_n,()=>t(_n))},subscribeKey(t,e){return ti(_n,t,e)},setToken(t){t&&(_n.token=Ag(t))},setTokenAmount(t){_n.sendTokenAmount=t},setReceiverAddress(t){_n.receiverAddress=t},setReceiverProfileImageUrl(t){_n.receiverProfileImageUrl=t},setReceiverProfileName(t){_n.receiverProfileName=t},setNetworkBalanceInUsd(t){_n.networkBalanceInUSD=t},setLoading(t){_n.loading=t},async sendToken(){var t;try{switch(pn.setLoading(!0),(t=z.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await pn.sendEvmToken();return;case"solana":await pn.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{pn.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=z.state.activeChain,e=(n=Qe.state.preferredAccountTypes)==null?void 0:n[t];if(!pn.state.sendTokenAmount||!pn.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!pn.state.token)throw new Error("A token is required");(r=pn.state.token)!=null&&r.address?(ir.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ps.ACCOUNT_TYPES.SMART_ACCOUNT,token:pn.state.token.address,amount:pn.state.sendTokenAmount,network:((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await pn.sendERC20Token({receiverAddress:pn.state.receiverAddress,tokenAddress:pn.state.token.address,sendTokenAmount:pn.state.sendTokenAmount,decimals:pn.state.token.quantity.decimals})):(ir.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ps.ACCOUNT_TYPES.SMART_ACCOUNT,token:pn.state.token.symbol||"",amount:pn.state.sendTokenAmount,network:((i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await pn.sendNativeToken({receiverAddress:pn.state.receiverAddress,sendTokenAmount:pn.state.sendTokenAmount,decimals:pn.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;_n.loading=!0;const e=(i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=z.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=z.state.activeCaipAddress,s=r?it.getPlainAddress(r):void 0;if(_n.lastRetry&&!it.isAllowedRetry(_n.lastRetry,30*Pn.ONE_SEC_MS))return _n.loading=!1,[];try{if(s&&e&&n){const a=await n4.getMyTokensWithBalance();return _n.tokenBalances=a,_n.lastRetry=void 0,a}}catch(a){_n.lastRetry=Date.now(),t==null||t(a),fc.showError("Token Balance Unavailable")}finally{_n.loading=!1}return[]},fetchNetworkBalance(){if(_n.tokenBalances.length===0)return;const t=n4.mapBalancesToSwapTokens(_n.tokenBalances);if(!t)return;const e=t.find(n=>n.address===z.getActiveNetworkTokenAddress());e&&(_n.networkBalanceInUSD=e?g1e.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;Mt.pushTransactionStack({});const e=t.receiverAddress,n=Qe.state.address,r=pt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await pt.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),ir.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=Qe.state.preferredAccountTypes)==null?void 0:i.eip155)===Ps.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=pn.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=pt._getClient())==null||c.updateBalance("eip155"),pn.resetSend()},async sendERC20Token(t){Mt.pushTransactionStack({onSuccess(){Mt.replace("Account")}});const e=pt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Qe.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=it.getPlainAddress(t.tokenAddress);await pt.writeContract({fromAddress:Qe.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:b1e.getERC20Abi(n),chainNamespace:"eip155"}),pn.resetSend()}},async sendSolanaToken(){var t;if(!pn.state.sendTokenAmount||!pn.state.receiverAddress)throw new Error("An amount and receiver address are required");Mt.pushTransactionStack({onSuccess(){Mt.replace("Account")}}),await pt.sendTransaction({chainNamespace:"solana",to:pn.state.receiverAddress,value:pn.state.sendTokenAmount}),(t=pt._getClient())==null||t.updateBalance("solana"),pn.resetSend()},resetSend(){_n.token=void 0,_n.sendTokenAmount=void 0,_n.receiverAddress=void 0,_n.receiverProfileImageUrl=void 0,_n.receiverProfileName=void 0,_n.loading=!1,_n.tokenBalances=[]}},pn=Ko(q1e),_P={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},eA={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Le=er({chains:o1e(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),V1e={state:Le,subscribe(t){return Xs(Le,()=>{t(Le)})},subscribeKey(t,e){return ti(Le,t,e)},subscribeChainProp(t,e,n){let r;return Xs(Le.chains,()=>{var i;const s=n||Le.activeChain;if(s){const o=(i=Le.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=Je.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=ve.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Le.noAdapters=!0),Le.noAdapters||(Le.activeChain=a==null?void 0:a.namespace,Le.activeCaipNetwork=i,z.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Le.activeChain&&Il.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);z.state.chains.set(u,{namespace:u,networkState:er({...eA,caipNetwork:d==null?void 0:d[0]}),accountState:er(_P),caipNetworks:d??[],...n}),z.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Le.activeChain===t){const r=Array.from(Le.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&z.setActiveCaipNetwork(s)}}Le.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){Le.chains.set(t.namespace,{namespace:t.namespace,networkState:{...eA,caipNetwork:r[0]},accountState:_P,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),z.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Le.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Le.chains.set(t.chainNamespace,{...e,caipNetworks:r}),z.setRequestedCaipNetworks(r,t.chainNamespace),je.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Le.chains.get(t);if(n){const o=((r=Le.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&z.setActiveCaipNetwork(n.caipNetworks[0]),Le.chains.set(t,{...n,caipNetworks:a}),z.setRequestedCaipNetworks(a||[],t),a.length===0&&je.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Le.chains.get(t);n&&(n.networkState={...n.networkState||eA,...e},Le.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Le.chains.get(t);if(r){const s={...r.accountState||_P,...e};Le.chains.set(t,{...r,accountState:s}),(Le.chains.size===1||Le.activeChain===t)&&(e.caipAddress&&(Le.activeCaipAddress=e.caipAddress),Qe.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Le.chains.get(t);if(n){const r={...n.networkState||eA,...e};Le.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){z.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&je.removeConnectorId(n)},setActiveNamespace(t){var r,s;Le.activeChain=t;const e=t?Le.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Le.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Le.activeCaipNetwork=n,z.setChainNetworkData(t,{caipNetwork:n}),Je.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Il.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Le.activeChain!==t.chainNamespace&&z.setIsSwitchingNamespace(!0);const e=Le.chains.get(t.chainNamespace);Le.activeChain=t.chainNamespace,Le.activeCaipNetwork=t,z.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Le.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Le.activeCaipAddress=void 0,z.setAccountProp("caipAddress",Le.activeCaipAddress,t.chainNamespace),e&&Qe.replaceState(e.accountState),pn.resetSend(),Il.set({activeChain:Le.activeChain,selectedNetworkId:(i=Le.activeCaipNetwork)==null?void 0:i.caipNetworkId}),Je.setActiveCaipNetworkId(t.caipNetworkId),!z.checkIfSupportedNetwork(t.chainNamespace)&&ve.state.enableNetworkSwitch&&!ve.state.allowUnsupportedChain&&!pt.state.wcBasic&&z.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Le.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==z.state.activeChain,n=(s=z.getNetworkData(t))==null?void 0:s.caipNetwork,r=z.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await z.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=z.state.chains.get(z.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=Le.activeCaipNetwork)==null?void 0:o.id)})),r=z.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&ls.close()}catch{Mt.goBack()}ir.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Le.activeChain,n=Le.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Le.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Le.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Le.activeChain;if(e&&(n=e),!n)return;const r=(s=Le.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Le.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Le.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return it.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Le.chains.forEach(e=>{const n=z.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){z.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=z.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));je.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Le.chains.forEach(e=>{const n=z.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return Le.activeCaipNetwork},getActiveCaipAddress(){return Le.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Le.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=z.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());z.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Le.activeCaipNetwork,r=z.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Le.activeChain)return!0;const e=z.getRequestedCaipNetworks(Le.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){z.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=CQ.caipNetworkIdToNumber((r=Le.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Le.activeChain;if(!e||!t)return!1;const n=z.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},getActiveNetworkTokenAddress(){var r,s;const t=((r=Le.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=Le.activeCaipNetwork)==null?void 0:s.id)||1,n=Pn.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`},showUnsupportedChainUI(){ls.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Le.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&Pn.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){z.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");Le.activeCaipAddress=void 0,z.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),je.removeConnectorId(e)},setIsSwitchingNamespace(t){Le.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Le.chains.forEach(s=>{ze.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Le.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=z.state.chains.get(t))==null?void 0:e.accountState:Qe.state},getNetworkData(t){var n;const e=t||Le.activeChain;if(e)return(n=z.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=z.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=je.state.filterByNamespace;return(t?[Le.chains.get(t)]:Array.from(Le.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?z.getRequestedCaipNetworks(t):z.getAllRequestedCaipNetworks()}},z=Ko(V1e),K1e={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},TQ=it.getBlockchainApiUrl(),Ti=er({clientId:null,api:new FC({baseUrl:TQ,clientId:null}),supportedChains:{http:[],ws:[]}}),ft={state:Ti,async get(t){const{st:e,sv:n}=ft.getSdkProperties(),r=ve.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Ti.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=ve.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Ti.supportedChains.http.length||await ft.getSupportedNetworks()}catch{return!1}return Ti.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await ft.get({path:"v1/supported-chains"});return Ti.supportedChains=t,t}catch{return Ti.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await ft.isNetworkSupported(e))return{avatar:"",name:""};const r=Je.getIdentityFromCacheForAddress(t);if(r)return r;const s=await ft.get({path:`/v1/identity/${t}`,params:{sender:z.state.activeCaipAddress?it.getPlainAddress(z.state.activeCaipAddress):void 0}});return Je.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await ft.isNetworkSupported((a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?ft.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await ft.isNetworkSupported((o=z.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?ft.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await ft.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?ft.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await ft.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ti.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:ve.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await ft.isNetworkSupported((r=z.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?ft.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=ft.getSdkProperties();if(!await ft.isNetworkSupported((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return ft.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await ft.isNetworkSupported((o=z.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Ti.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Pn.CONVERT_SLIPPAGE_TOLERANCE},projectId:ve.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=ft.getSdkProperties();if(!await ft.isNetworkSupported((o=z.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return ft.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=ft.getSdkProperties();if(!await ft.isNetworkSupported((l=z.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return fc.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Je.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await ft.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return Je.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await ft.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?ft.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await ft.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?ft.get({path:`/v1/profile/reverse/${t}`,params:{sender:Qe.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await ft.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?ft.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await ft.isNetworkSupported((i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Ti.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await ft.isNetworkSupported((a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Ti.api.post({path:"/v1/generators/onrampurl",params:{projectId:ve.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await ft.isNetworkSupported((e=z.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await ft.get({path:"/v1/onramp/options"})}catch{return K1e}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await ft.isNetworkSupported((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Ti.api.post({path:"/v1/onramp/quote",params:{projectId:ve.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await ft.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?ft.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await ft.isNetworkSupported((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Ti.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:ve.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Ti.clientId=t,Ti.api=new FC({baseUrl:TQ,clientId:t})}},Zo=er({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),Y1e={state:Zo,replaceState(t){t&&Object.assign(Zo,Ag(t))},subscribe(t){return z.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return z.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){z.setAccountProp("status",t,e)},getCaipAddress(t){return z.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?it.getPlainAddress(t):void 0;e===z.state.activeChain&&(z.state.activeCaipAddress=t),z.setAccountProp("caipAddress",t,e),z.setAccountProp("address",n,e)},setBalance(t,e,n){z.setAccountProp("balance",t,n),z.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){z.setAccountProp("profileName",t,e)},setProfileImage(t,e){z.setAccountProp("profileImage",t,e)},setUser(t,e){z.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){z.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){z.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){z.setAccountProp("currentTab",t,z.state.activeChain)},setTokenBalance(t,e){t&&z.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){z.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){z.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=z.getAccountProp("addressLabels",n)||new Map;r.set(t,e),z.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=z.getAccountProp("addressLabels",e)||new Map;n.delete(t),z.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){z.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){z.setAccountProp("preferredAccountTypes",{...Zo.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){Zo.preferredAccountTypes=t},setSocialProvider(t,e){t&&z.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){z.setAccountProp("socialWindow",t?Ag(t):void 0,e)},setFarcasterUrl(t,e){z.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Zo.balanceLoading=!0;const e=(i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=z.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=z.state.activeCaipAddress,s=r?it.getPlainAddress(r):void 0;if(Zo.lastRetry&&!it.isAllowedRetry(Zo.lastRetry,30*Pn.ONE_SEC_MS))return Zo.balanceLoading=!1,[];try{if(s&&e&&n){const c=(await ft.getBalance(s,e)).balances.filter(l=>l.quantity.decimals!=="0");return Qe.setTokenBalance(c,n),Zo.lastRetry=void 0,Zo.balanceLoading=!1,c}}catch(a){Zo.lastRetry=Date.now(),t==null||t(a),fc.showError("Token Balance Unavailable")}finally{Zo.balanceLoading=!1}return[]},resetAccount(t){z.resetAccount(t)}},Qe=Ko(Y1e),Q1e={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=z.state.activeCaipNetwork,r=Mt.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Qe.getCaipAddress(z.state.activeChain),o=t.chainNamespace!==z.state.activeChain,a=Qe.getCaipAddress(t.chainNamespace),l=je.getConnectorId(z.state.activeChain)===ze.CONNECTOR_ID.AUTH,u=ze.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Mt.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Mt.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Mt.push("SwitchNetwork",{...r,network:t})}},Ri=er({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),J1e={state:Ri,subscribe(t){return Xs(Ri,()=>t(Ri))},subscribeKey(t,e){return ti(Ri,t,e)},async open(t){var o,a;const e=Qe.state.status==="connected",n=t==null?void 0:t.namespace,r=z.state.activeChain,s=n&&n!==r,i=(o=z.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(pt.state.wcBasic?ot.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await ot.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),je.setFilterByNamespace(t==null?void 0:t.namespace),ls.setLoading(!0,n),n&&s){const c=((a=z.getNetworkData(n))==null?void 0:a.caipNetwork)||z.getRequestedCaipNetworks(n)[0];c&&Q1e.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=z.state.noAdapters;ve.state.manualWCControl||c&&!i?it.isMobile()?Mt.reset("AllWallets"):Mt.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Mt.reset(t.view,t.data):i?Mt.reset("Account"):Mt.reset("Connect")}Ri.open=!0,Il.set({open:!0}),ir.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=ve.state.enableEmbedded,e=!!z.state.activeCaipAddress;Ri.open&&ir.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Ri.open=!1,Mt.reset("Connect"),ls.clearLoading(),t?e?Mt.replace("Account"):Mt.push("Connect"):Il.set({open:!1}),pt.resetUri()},setLoading(t,e){e&&Ri.loadingNamespaceMap.set(e,t),Ri.loading=t,Il.set({loading:t})},clearLoading(){Ri.loadingNamespaceMap.clear(),Ri.loading=!1},shake(){Ri.shake||(Ri.shake=!0,setTimeout(()=>{Ri.shake=!1},500))}},ls=Ko(J1e),Yv={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},CD={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},Z1e={providers:IQ,selectedProvider:null,error:null,purchaseCurrency:Yv,paymentCurrency:CD,purchaseCurrencies:[Yv],paymentCurrencies:[],quotesLoading:!1},Zt=er(Z1e),X1e={state:Zt,subscribe(t){return Xs(Zt,()=>t(Zt))},subscribeKey(t,e){return ti(Zt,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=z.state.activeChain===ze.CHAIN.SOLANA?"SOL":"USDC",n=Qe.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",v1e),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",ve.state.projectId),Zt.selectedProvider={...t,url:r.toString()}}else Zt.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=IQ.filter(r=>e.includes(r.name));Zt.providers=n}else Zt.providers=[]},setPurchaseCurrency(t){Zt.purchaseCurrency=t},setPaymentCurrency(t){Zt.paymentCurrency=t},setPurchaseAmount(t){AD.state.purchaseAmount=t},setPaymentAmount(t){AD.state.paymentAmount=t},async getAvailableCurrencies(){const t=await ft.getOnrampOptions();Zt.purchaseCurrencies=t.purchaseCurrencies,Zt.paymentCurrencies=t.paymentCurrencies,Zt.paymentCurrency=t.paymentCurrencies[0]||CD,Zt.purchaseCurrency=t.purchaseCurrencies[0]||Yv,await ot.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await ot.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;Zt.quotesLoading=!0;try{const n=await ft.getOnrampQuote({purchaseCurrency:Zt.purchaseCurrency,paymentCurrency:Zt.paymentCurrency,amount:((t=Zt.paymentAmount)==null?void 0:t.toString())||"0",network:(e=Zt.purchaseCurrency)==null?void 0:e.symbol});return Zt.quotesLoading=!1,Zt.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return Zt.error=n.message,Zt.quotesLoading=!1,null}finally{Zt.quotesLoading=!1}},resetState(){Zt.selectedProvider=null,Zt.error=null,Zt.purchaseCurrency=Yv,Zt.paymentCurrency=CD,Zt.purchaseCurrencies=[Yv],Zt.paymentCurrencies=[],Zt.paymentAmount=void 0,Zt.purchaseAmount=void 0,Zt.quotesLoading=!1}},AD=Ko(X1e),r4=2147483648,eAe={convertEVMChainIdToCoinType(t){if(t>=r4)throw new Error("Invalid chainId");return(r4|t)>>>0}},Xo=er({suggestions:[],loading:!1}),tAe={state:Xo,subscribe(t){return Xs(Xo,()=>t(Xo))},subscribeKey(t,e){return ti(Xo,t,e)},async resolveName(t){var e,n;try{return await ft.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await ft.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Xo.loading=!0,Xo.suggestions=[];const e=await ft.getEnsNameSuggestions(t);return Xo.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Xo.suggestions}catch(e){const n=Qv.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Xo.loading=!1}},async getNamesForAddress(t){try{if(!z.state.activeCaipNetwork)return[];const n=Je.getEnsFromCacheForAddress(t);if(n)return n;const r=await ft.reverseLookupEnsName({address:t});return Je.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=Qv.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=z.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=Qe.state.address,r=je.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");Xo.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Mt.pushTransactionStack({onCancel(){Mt.replace("RegisterAccountName")}});const i=await pt.signMessage(s);Xo.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=eAe.convertEVMChainIdToCoinType(Number(o));await ft.registerEnsName({coinType:a,address:n,signature:i,message:s}),Qe.setProfileName(t,e.chainNamespace),Mt.replace("RegisterAccountNameSuccess")}catch(s){const i=Qv.parseEnsApiError(s,`Error registering name ${t}`);throw Mt.replace("RegisterAccountName"),new Error(i)}finally{Xo.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},Qv=Ko(tAe);var WM={exports:{}},Uy=typeof Reflect=="object"?Reflect:null,s4=Uy&&typeof Uy.apply=="function"?Uy.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},nS;Uy&&typeof Uy.ownKeys=="function"?nS=Uy.ownKeys:Object.getOwnPropertySymbols?nS=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:nS=function(e){return Object.getOwnPropertyNames(e)};function nAe(t){console&&console.warn&&console.warn(t)}var RQ=Number.isNaN||function(e){return e!==e};function kn(){kn.init.call(this)}WM.exports=kn;WM.exports.once=oAe;kn.EventEmitter=kn;kn.prototype._events=void 0;kn.prototype._eventsCount=0;kn.prototype._maxListeners=void 0;var i4=10;function UN(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(kn,"defaultMaxListeners",{enumerable:!0,get:function(){return i4},set:function(t){if(typeof t!="number"||t<0||RQ(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");i4=t}});kn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};kn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||RQ(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function PQ(t){return t._maxListeners===void 0?kn.defaultMaxListeners:t._maxListeners}kn.prototype.getMaxListeners=function(){return PQ(this)};kn.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")s4(c,this,n);else for(var l=c.length,u=MQ(c,l),r=0;r<l;++r)s4(u[r],this,n);return!0};function OQ(t,e,n,r){var s,i,o;if(UN(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=PQ(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,nAe(a)}return t}kn.prototype.addListener=function(e,n){return OQ(this,e,n,!1)};kn.prototype.on=kn.prototype.addListener;kn.prototype.prependListener=function(e,n){return OQ(this,e,n,!0)};function rAe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function kQ(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=rAe.bind(r);return s.listener=n,r.wrapFn=s,s}kn.prototype.once=function(e,n){return UN(n),this.on(e,kQ(this,e,n)),this};kn.prototype.prependOnceListener=function(e,n){return UN(n),this.prependListener(e,kQ(this,e,n)),this};kn.prototype.removeListener=function(e,n){var r,s,i,o,a;if(UN(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():sAe(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};kn.prototype.off=kn.prototype.removeListener;kn.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function DQ(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?iAe(s):MQ(s,s.length)}kn.prototype.listeners=function(e){return DQ(this,e,!0)};kn.prototype.rawListeners=function(e){return DQ(this,e,!1)};kn.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):LQ.call(t,e)};kn.prototype.listenerCount=LQ;function LQ(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}kn.prototype.eventNames=function(){return this._eventsCount>0?nS(this._events):[]};function MQ(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function sAe(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function iAe(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function oAe(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}UQ(t,e,i,{once:!0}),e!=="error"&&aAe(t,s,{once:!0})})}function aAe(t,e,n){typeof t.on=="function"&&UQ(t,"error",e,n)}function UQ(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var La=WM.exports;const HM=zg(La);var xe={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var SD=function(t,e){return SD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},SD(t,e)};function cAe(t,e){SD(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ID=function(){return ID=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ID.apply(this,arguments)};function lAe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function uAe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function dAe(t,e){return function(n,r){e(n,r,t)}}function hAe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function fAe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function pAe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function gAe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function mAe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function xD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function $Q(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function yAe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat($Q(arguments[e]));return t}function wAe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function l_(t){return this instanceof l_?(this.v=t,this):new l_(t)}function bAe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof l_?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function vAe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:l_(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function EAe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof xD=="function"?xD(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function _Ae(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function CAe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function AAe(t){return t&&t.__esModule?t:{default:t}}function SAe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function IAe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const xAe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return ID},__asyncDelegator:vAe,__asyncGenerator:bAe,__asyncValues:EAe,__await:l_,__awaiter:fAe,__classPrivateFieldGet:SAe,__classPrivateFieldSet:IAe,__createBinding:gAe,__decorate:uAe,__exportStar:mAe,__extends:cAe,__generator:pAe,__importDefault:AAe,__importStar:CAe,__makeTemplateObject:_Ae,__metadata:hAe,__param:dAe,__read:$Q,__rest:lAe,__spread:yAe,__spreadArrays:wAe,__values:xD},Symbol.toStringTag,{value:"Module"})),$N=yz(xAe);var CP={},Fb={},o4;function NAe(){if(o4)return Fb;o4=1,Object.defineProperty(Fb,"__esModule",{value:!0}),Fb.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return Fb.delay=t,Fb}var Tf={},AP={},Rf={},a4;function TAe(){return a4||(a4=1,Object.defineProperty(Rf,"__esModule",{value:!0}),Rf.ONE_THOUSAND=Rf.ONE_HUNDRED=void 0,Rf.ONE_HUNDRED=100,Rf.ONE_THOUSAND=1e3),Rf}var SP={},c4;function RAe(){return c4||(c4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(SP)),SP}var l4;function BQ(){return l4||(l4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=$N;e.__exportStar(TAe(),t),e.__exportStar(RAe(),t)}(AP)),AP}var u4;function PAe(){if(u4)return Tf;u4=1,Object.defineProperty(Tf,"__esModule",{value:!0}),Tf.fromMiliseconds=Tf.toMiliseconds=void 0;const t=BQ();function e(r){return r*t.ONE_THOUSAND}Tf.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Tf.fromMiliseconds=n,Tf}var d4;function OAe(){return d4||(d4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=$N;e.__exportStar(NAe(),t),e.__exportStar(PAe(),t)}(CP)),CP}var Am={},h4;function kAe(){if(h4)return Am;h4=1,Object.defineProperty(Am,"__esModule",{value:!0}),Am.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Am.Watch=t,Am.default=t,Am}var IP={},jb={},f4;function DAe(){if(f4)return jb;f4=1,Object.defineProperty(jb,"__esModule",{value:!0}),jb.IWatch=void 0;class t{}return jb.IWatch=t,jb}var p4;function LAe(){return p4||(p4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),$N.__exportStar(DAe(),t)}(IP)),IP}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=$N;e.__exportStar(OAe(),t),e.__exportStar(kAe(),t),e.__exportStar(LAe(),t),e.__exportStar(BQ(),t)})(xe);class tm{}let MAe=class extends tm{constructor(e){super()}};const g4=xe.FIVE_SECONDS,nm={pulse:"heartbeat_pulse"};let UAe=class FQ extends MAe{constructor(e){super(e),this.events=new La.EventEmitter,this.interval=g4,this.interval=(e==null?void 0:e.interval)||g4}static async init(e){const n=new FQ(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),xe.toMiliseconds(this.interval))}pulse(){this.events.emit(nm.pulse)}};const $Ae=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,BAe=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,FAe=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function jAe(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){zAe(t);return}return e}function zAe(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function tA(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!FAe.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if($Ae.test(t)||BAe.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,jAe)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function rm(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function jQ(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=rm(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let xP;function jC(){return xP||(xP=jQ("keyval-store","keyval")),xP}function m4(t,e=jC()){return e("readonly",n=>rm(n.get(t)))}function WAe(t,e,n=jC()){return n("readwrite",r=>(r.put(e,t),rm(r.transaction)))}function HAe(t,e=jC()){return e("readwrite",n=>(n.delete(t),rm(n.transaction)))}function GAe(t=jC()){return t("readwrite",e=>(e.clear(),rm(e.transaction)))}function qAe(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},rm(t.transaction)}function VAe(t=jC()){return t("readonly",e=>{if(e.getAllKeys)return rm(e.getAllKeys());const n=[];return qAe(e,r=>n.push(r.key)).then(()=>n)})}const KAe=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),YAe=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Ig(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return YAe(t)}catch{return t}}function Xu(t){return typeof t=="string"?t:KAe(t)||""}function QAe(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var JAe=ZAe;function ZAe(t,e,n){var r=n&&n.stringify||QAe,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const y4=JAe;var Ym=xl;const u_=cSe().console||{},XAe={mapHttpRequest:nA,mapHttpResponse:nA,wrapRequestSerializer:NP,wrapResponseSerializer:NP,wrapErrorSerializer:NP,req:nA,res:nA,err:sSe};function eSe(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function xl(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||u_;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=eSe(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=d_),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:iSe(t)};c.levels=xl.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=d_,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=ND());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,Sm(l,c,"error","log"),Sm(l,c,"fatal","error"),Sm(l,c,"warn","error"),Sm(l,c,"info","log"),Sm(l,c,"debug","log"),Sm(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const y=g.serializers;if(s&&y){var m=Object.assign({},r,y),w=t.browser.serialize===!0?Object.keys(m):s;delete p.serializers,BN([p],w,m,this._stdErrSerialize)}function v(A){this._childLevel=(A._childLevel|0)+1,this.error=Im(A,p,"error"),this.fatal=Im(A,p,"fatal"),this.warn=Im(A,p,"warn"),this.info=Im(A,p,"info"),this.debug=Im(A,p,"debug"),this.trace=Im(A,p,"trace"),m&&(this.serializers=m,this._serialize=w),e&&(this._logEvent=ND([].concat(A._logEvent.bindings,p)))}return v.prototype=this,new v(this)}return c}xl.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};xl.stdSerializers=XAe;xl.stdTimeFunctions=Object.assign({},{nullTime:zQ,epochTime:WQ,unixTime:oSe,isoTime:aSe});function Sm(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?d_:s[n]?s[n]:u_[n]||u_[r]||d_,tSe(t,e,n)}function tSe(t,e,n){!t.transmit&&e[n]===d_||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===u_?u_:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&BN(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,nSe(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=xl.levels.values[l],d=xl.levels.values[n];if(d<u)return;rSe(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:xl.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function nSe(t,e,n,r){t._serialize&&BN(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=xl.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?y4(s.shift(),s):void 0}else typeof i=="string"&&(i=y4(s.shift(),s));return i!==void 0&&(o.msg=i),o}function BN(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=xl.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Im(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function rSe(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;BN(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=ND(c)}function ND(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function sSe(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function iSe(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?zQ:WQ}function nA(){return{}}function NP(t){return t}function d_(){}function zQ(){return!1}function WQ(){return Date.now()}function oSe(){return Math.round(Date.now()/1e3)}function aSe(){return new Date(Date.now()).toISOString()}function cSe(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const zC=zg(Ym),lSe={level:"info"},WC="custom_context",GM=1e3*1024;let uSe=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},w4=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new uSe(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},HQ=class{constructor(e,n=GM){this.level=e??"error",this.levelValue=Ym.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new w4(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===Ym.levels.values.error?console.error(e):n===Ym.levels.values.warn?console.warn(e):n===Ym.levels.values.debug?console.debug(e):n===Ym.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Xu({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new w4(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Xu({extraMetadata:e})),new Blob(n,{type:"application/json"})}},dSe=class{constructor(e,n=GM){this.baseChunkLogger=new HQ(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},hSe=class{constructor(e,n=GM){this.baseChunkLogger=new HQ(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var fSe=Object.defineProperty,pSe=Object.defineProperties,gSe=Object.getOwnPropertyDescriptors,b4=Object.getOwnPropertySymbols,mSe=Object.prototype.hasOwnProperty,ySe=Object.prototype.propertyIsEnumerable,v4=(t,e,n)=>e in t?fSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,OI=(t,e)=>{for(var n in e||(e={}))mSe.call(e,n)&&v4(t,n,e[n]);if(b4)for(var n of b4(e))ySe.call(e,n)&&v4(t,n,e[n]);return t},kI=(t,e)=>pSe(t,gSe(e));function sm(t){return kI(OI({},t),{level:(t==null?void 0:t.level)||lSe.level})}function wSe(t,e=WC){return t[e]||""}function bSe(t,e,n=WC){return t[n]=e,t}function ho(t,e=WC){let n="";return typeof t.bindings>"u"?n=wSe(t,e):n=t.bindings().context||"",n}function vSe(t,e,n=WC){const r=ho(t,n);return r.trim()?`${r}/${e}`:e}function Ls(t,e,n=WC){const r=vSe(t,e,n),s=t.child({context:r});return bSe(s,r,n)}function ESe(t){var e,n;const r=new dSe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:zC(kI(OI({},t.opts),{level:"trace",browser:kI(OI({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function _Se(t){var e;const n=new hSe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:zC(kI(OI({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function FN(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?ESe(t):_Se(t)}function CSe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function GQ(t,...e){if(!CSe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function E4(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function ASe(t,e){GQ(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const xm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const TP=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function SSe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function qQ(t){return typeof t=="string"&&(t=SSe(t)),GQ(t),t}let ISe=class{clone(){return this._cloneInto()}};function xSe(t){const e=r=>t().update(qQ(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function VQ(t=32){if(xm&&typeof xm.getRandomValues=="function")return xm.getRandomValues(new Uint8Array(t));if(xm&&typeof xm.randomBytes=="function")return xm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function NSe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let TSe=class extends ISe{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=TP(this.buffer)}update(e){E4(this);const{view:n,buffer:r,blockLen:s}=this;e=qQ(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=TP(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){E4(this),ASe(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;NSe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=TP(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const rA=BigInt(2**32-1),TD=BigInt(32);function KQ(t,e=!1){return e?{h:Number(t&rA),l:Number(t>>TD&rA)}:{h:Number(t>>TD&rA)|0,l:Number(t&rA)|0}}function RSe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=KQ(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const PSe=(t,e)=>BigInt(t>>>0)<<TD|BigInt(e>>>0),OSe=(t,e,n)=>t>>>n,kSe=(t,e,n)=>t<<32-n|e>>>n,DSe=(t,e,n)=>t>>>n|e<<32-n,LSe=(t,e,n)=>t<<32-n|e>>>n,MSe=(t,e,n)=>t<<64-n|e>>>n-32,USe=(t,e,n)=>t>>>n-32|e<<64-n,$Se=(t,e)=>e,BSe=(t,e)=>t,FSe=(t,e,n)=>t<<n|e>>>32-n,jSe=(t,e,n)=>e<<n|t>>>32-n,zSe=(t,e,n)=>e<<n-32|t>>>64-n,WSe=(t,e,n)=>t<<n-32|e>>>64-n;function HSe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const GSe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),qSe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,VSe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),KSe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,YSe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),QSe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Dt={fromBig:KQ,split:RSe,toBig:PSe,shrSH:OSe,shrSL:kSe,rotrSH:DSe,rotrSL:LSe,rotrBH:MSe,rotrBL:USe,rotr32H:$Se,rotr32L:BSe,rotlSH:FSe,rotlSL:jSe,rotlBH:zSe,rotlBL:WSe,add:HSe,add3L:GSe,add3H:qSe,add4L:VSe,add4H:KSe,add5H:QSe,add5L:YSe},[JSe,ZSe]=Dt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),bd=new Uint32Array(80),vd=new Uint32Array(80);let XSe=class extends TSe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let v=0;v<16;v++,n+=4)bd[v]=e.getUint32(n),vd[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const A=bd[v-15]|0,C=vd[v-15]|0,S=Dt.rotrSH(A,C,1)^Dt.rotrSH(A,C,8)^Dt.shrSH(A,C,7),x=Dt.rotrSL(A,C,1)^Dt.rotrSL(A,C,8)^Dt.shrSL(A,C,7),T=bd[v-2]|0,I=vd[v-2]|0,k=Dt.rotrSH(T,I,19)^Dt.rotrBH(T,I,61)^Dt.shrSH(T,I,6),O=Dt.rotrSL(T,I,19)^Dt.rotrBL(T,I,61)^Dt.shrSL(T,I,6),B=Dt.add4L(x,O,vd[v-7],vd[v-16]),G=Dt.add4H(B,S,k,bd[v-7],bd[v-16]);bd[v]=G|0,vd[v]=B|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:y,Hh:m,Hl:w}=this;for(let v=0;v<80;v++){const A=Dt.rotrSH(d,h,14)^Dt.rotrSH(d,h,18)^Dt.rotrBH(d,h,41),C=Dt.rotrSL(d,h,14)^Dt.rotrSL(d,h,18)^Dt.rotrBL(d,h,41),S=d&f^~d&g,x=h&p^~h&y,T=Dt.add5L(w,C,x,ZSe[v],vd[v]),I=Dt.add5H(T,m,A,S,JSe[v],bd[v]),k=T|0,O=Dt.rotrSH(r,s,28)^Dt.rotrBH(r,s,34)^Dt.rotrBH(r,s,39),B=Dt.rotrSL(r,s,28)^Dt.rotrBL(r,s,34)^Dt.rotrBL(r,s,39),G=r&i^r&a^i&a,W=s&o^s&c^o&c;m=g|0,w=y|0,g=f|0,y=p|0,f=d|0,p=h|0,{h:d,l:h}=Dt.add(l|0,u|0,I|0,k|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const R=Dt.add3L(k,B,W);r=Dt.add3H(R,I,O,G),s=R|0}({h:r,l:s}=Dt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Dt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Dt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Dt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Dt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Dt.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=Dt.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:m,l:w}=Dt.add(this.Hh|0,this.Hl|0,m|0,w|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,y,m,w)}roundClean(){bd.fill(0),vd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const eIe=xSe(()=>new XSe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qM=BigInt(0),YQ=BigInt(1),tIe=BigInt(2);function VM(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function KM(t){if(!VM(t))throw new Error("Uint8Array expected")}function RP(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const nIe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function YM(t){KM(t);let e="";for(let n=0;n<t.length;n++)e+=nIe[t[n]];return e}function QQ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?qM:BigInt("0x"+t)}const Yl={_0:48,_9:57,A:65,F:70,a:97,f:102};function _4(t){if(t>=Yl._0&&t<=Yl._9)return t-Yl._0;if(t>=Yl.A&&t<=Yl.F)return t-(Yl.A-10);if(t>=Yl.a&&t<=Yl.f)return t-(Yl.a-10)}function JQ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=_4(t.charCodeAt(i)),a=_4(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function rIe(t){return QQ(YM(t))}function rS(t){return KM(t),QQ(YM(Uint8Array.from(t).reverse()))}function ZQ(t,e){return JQ(t.toString(16).padStart(e*2,"0"))}function RD(t,e){return ZQ(t,e).reverse()}function Ql(t,e,n){let r;if(typeof e=="string")try{r=JQ(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(VM(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function C4(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];KM(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const PP=t=>typeof t=="bigint"&&qM<=t;function sIe(t,e,n){return PP(t)&&PP(e)&&PP(n)&&e<=t&&t<n}function zb(t,e,n,r){if(!sIe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function iIe(t){let e;for(e=0;t>qM;t>>=YQ,e+=1);return e}const oIe=t=>(tIe<<BigInt(t-1))-YQ,aIe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||VM(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function QM(t,e,n={}){const r=(s,i,o)=>{const a=aIe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function A4(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const us=BigInt(0),Ir=BigInt(1),Yf=BigInt(2),cIe=BigInt(3),PD=BigInt(4),S4=BigInt(5),I4=BigInt(8);function Fr(t,e){const n=t%e;return n>=us?n:e+n}function lIe(t,e,n){if(e<us)throw new Error("invalid exponent, negatives unsupported");if(n<=us)throw new Error("invalid modulus");if(n===Ir)return us;let r=Ir;for(;e>us;)e&Ir&&(r=r*t%n),t=t*t%n,e>>=Ir;return r}function $c(t,e,n){let r=t;for(;e-- >us;)r*=r,r%=n;return r}function x4(t,e){if(t===us)throw new Error("invert: expected non-zero number");if(e<=us)throw new Error("invert: expected positive modulus, got "+e);let n=Fr(t,e),r=e,s=us,i=Ir;for(;n!==us;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Ir)throw new Error("invert: does not exist");return Fr(s,e)}function uIe(t){const e=(t-Ir)/Yf;let n,r,s;for(n=t-Ir,r=0;n%Yf===us;n/=Yf,r++);for(s=Yf;s<t&&lIe(s,e,t)!==t-Ir;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Ir)/PD;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+Ir)/Yf;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,Ir<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function dIe(t){if(t%PD===cIe){const e=(t+Ir)/PD;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%I4===S4){const e=(t-S4)/I4;return function(n,r){const s=n.mul(r,Yf),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,Yf),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return uIe(t)}const hIe=(t,e)=>(Fr(t,e)&Ir)===Ir,fIe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function pIe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=fIe.reduce((r,s)=>(r[s]="function",r),e);return QM(t,n)}function gIe(t,e,n){if(n<us)throw new Error("invalid exponent, negatives unsupported");if(n===us)return t.ONE;if(n===Ir)return e;let r=t.ONE,s=e;for(;n>us;)n&Ir&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Ir;return r}function mIe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function XQ(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function eJ(t,e,n=!1,r={}){if(t<=us)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=XQ(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:oIe(s),ZERO:us,ONE:Ir,create:c=>Fr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return us<=c&&c<t},is0:c=>c===us,isOdd:c=>(c&Ir)===Ir,neg:c=>Fr(-c,t),eql:(c,l)=>c===l,sqr:c=>Fr(c*c,t),add:(c,l)=>Fr(c+l,t),sub:(c,l)=>Fr(c-l,t),mul:(c,l)=>Fr(c*l,t),pow:(c,l)=>gIe(a,c,l),div:(c,l)=>Fr(c*x4(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>x4(c,t),sqrt:r.sqrt||(c=>(o||(o=dIe(t)),o(a,c))),invertBatch:c=>mIe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?RD(c,i):ZQ(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?rS(c):rIe(c)}});return Object.freeze(a)}const N4=BigInt(0),sA=BigInt(1);function OP(t,e){const n=e.negate();return t?n:e}function tJ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function kP(t,e){tJ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function yIe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function wIe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const DP=new WeakMap,nJ=new WeakMap;function LP(t){return nJ.get(t)||1}function bIe(t,e){return{constTimeNegate:OP,hasPrecomputes(n){return LP(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>N4;)r&sA&&(s=s.add(i)),i=i.double(),r>>=sA;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=kP(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=kP(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=sA);const g=f,y=f+Math.abs(p)-1,m=h%2!==0,w=p<0;p===0?c=c.add(OP(m,r[g])):a=a.add(OP(w,r[y]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=kP(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===N4)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=sA),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=DP.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&DP.set(r,s(i))),i},wNAFCached(n,r,s){const i=LP(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=LP(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){tJ(r,e),nJ.set(n,r),DP.delete(n)}}}function vIe(t,e,n,r){if(yIe(n,t),wIe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=iIe(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function EIe(t){return pIe(t.Fp),QM(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...XQ(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const ja=BigInt(0),Pi=BigInt(1),iA=BigInt(2),_Ie=BigInt(8),CIe={zip215:!0};function AIe(t){const e=EIe(t);return QM(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function SIe(t){const e=AIe(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=iA<<BigInt(a*8)-Pi,u=n.create,d=eJ(e.n,e.nBitLength),h=e.uvRatio||((R,N)=>{try{return{isValid:!0,value:n.sqrt(R*n.inv(N))}}catch{return{isValid:!1,value:ja}}}),f=e.adjustScalarBytes||(R=>R),p=e.domain||((R,N,M)=>{if(RP("phflag",M),N.length||M)throw new Error("Contexts/pre-hash are not supported");return R});function g(R,N){zb("coordinate "+R,N,ja,l)}function y(R){if(!(R instanceof v))throw new Error("ExtendedPoint expected")}const m=A4((R,N)=>{const{ex:M,ey:P,ez:L}=R,F=R.is0();N==null&&(N=F?_Ie:n.inv(L));const V=u(M*N),Z=u(P*N),ae=u(L*N);if(F)return{x:ja,y:Pi};if(ae!==Pi)throw new Error("invZ was invalid");return{x:V,y:Z}}),w=A4(R=>{const{a:N,d:M}=e;if(R.is0())throw new Error("bad point: ZERO");const{ex:P,ey:L,ez:F,et:V}=R,Z=u(P*P),ae=u(L*L),re=u(F*F),le=u(re*re),we=u(Z*N),ee=u(re*u(we+ae)),ce=u(le+u(M*u(Z*ae)));if(ee!==ce)throw new Error("bad point: equation left != right (1)");const pe=u(P*L),he=u(F*V);if(pe!==he)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(N,M,P,L){this.ex=N,this.ey=M,this.ez=P,this.et=L,g("x",N),g("y",M),g("z",P),g("t",L),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(N){if(N instanceof v)throw new Error("extended point not allowed");const{x:M,y:P}=N||{};return g("x",M),g("y",P),new v(M,P,Pi,u(M*P))}static normalizeZ(N){const M=n.invertBatch(N.map(P=>P.ez));return N.map((P,L)=>P.toAffine(M[L])).map(v.fromAffine)}static msm(N,M){return vIe(v,d,N,M)}_setWindowSize(N){S.setWindowSize(this,N)}assertValidity(){w(this)}equals(N){y(N);const{ex:M,ey:P,ez:L}=this,{ex:F,ey:V,ez:Z}=N,ae=u(M*Z),re=u(F*L),le=u(P*Z),we=u(V*L);return ae===re&&le===we}is0(){return this.equals(v.ZERO)}negate(){return new v(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:N}=e,{ex:M,ey:P,ez:L}=this,F=u(M*M),V=u(P*P),Z=u(iA*u(L*L)),ae=u(N*F),re=M+P,le=u(u(re*re)-F-V),we=ae+V,ee=we-Z,ce=ae-V,pe=u(le*ee),he=u(we*ce),Ee=u(le*ce),We=u(ee*we);return new v(pe,he,We,Ee)}add(N){y(N);const{a:M,d:P}=e,{ex:L,ey:F,ez:V,et:Z}=this,{ex:ae,ey:re,ez:le,et:we}=N;if(M===BigInt(-1)){const Nt=u((F-L)*(re+ae)),Dn=u((F+L)*(re-ae)),dn=u(Dn-Nt);if(dn===ja)return this.double();const Ii=u(V*iA*we),jl=u(Z*iA*le),kc=jl+Ii,Ln=Dn+Nt,mn=jl-Ii,fo=u(kc*dn),yn=u(Ln*mn),Bs=u(kc*mn),fb=u(dn*Ln);return new v(fo,yn,fb,Bs)}const ee=u(L*ae),ce=u(F*re),pe=u(Z*P*we),he=u(V*le),Ee=u((L+F)*(ae+re)-ee-ce),We=he-pe,ue=he+pe,Ae=u(ce-M*ee),ke=u(Ee*We),Ce=u(ue*Ae),Ct=u(Ee*Ae),Yr=u(We*ue);return new v(ke,Ce,Yr,Ct)}subtract(N){return this.add(N.negate())}wNAF(N){return S.wNAFCached(this,N,v.normalizeZ)}multiply(N){const M=N;zb("scalar",M,Pi,r);const{p:P,f:L}=this.wNAF(M);return v.normalizeZ([P,L])[0]}multiplyUnsafe(N,M=v.ZERO){const P=N;return zb("scalar",P,ja,r),P===ja?C:this.is0()||P===Pi?this:S.wNAFCachedUnsafe(this,P,v.normalizeZ,M)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return S.unsafeLadder(this,r).is0()}toAffine(N){return m(this,N)}clearCofactor(){const{h:N}=e;return N===Pi?this:this.multiplyUnsafe(N)}static fromHex(N,M=!1){const{d:P,a:L}=e,F=n.BYTES;N=Ql("pointHex",N,F),RP("zip215",M);const V=N.slice(),Z=N[F-1];V[F-1]=Z&-129;const ae=rS(V),re=M?l:n.ORDER;zb("pointHex.y",ae,ja,re);const le=u(ae*ae),we=u(le-Pi),ee=u(P*le-L);let{isValid:ce,value:pe}=h(we,ee);if(!ce)throw new Error("Point.fromHex: invalid y coordinate");const he=(pe&Pi)===Pi,Ee=(Z&128)!==0;if(!M&&pe===ja&&Ee)throw new Error("Point.fromHex: x=0 and x_0=1");return Ee!==he&&(pe=u(-pe)),v.fromAffine({x:pe,y:ae})}static fromPrivateKey(N){return I(N).point}toRawBytes(){const{x:N,y:M}=this.toAffine(),P=RD(M,n.BYTES);return P[P.length-1]|=N&Pi?128:0,P}toHex(){return YM(this.toRawBytes())}}v.BASE=new v(e.Gx,e.Gy,Pi,u(e.Gx*e.Gy)),v.ZERO=new v(ja,Pi,Pi,ja);const{BASE:A,ZERO:C}=v,S=bIe(v,a*8);function x(R){return Fr(R,r)}function T(R){return x(rS(R))}function I(R){const N=n.BYTES;R=Ql("private key",R,N);const M=Ql("hashed private key",i(R),2*N),P=f(M.slice(0,N)),L=M.slice(N,2*N),F=T(P),V=A.multiply(F),Z=V.toRawBytes();return{head:P,prefix:L,scalar:F,point:V,pointBytes:Z}}function k(R){return I(R).pointBytes}function O(R=new Uint8Array,...N){const M=C4(...N);return T(i(p(M,Ql("context",R),!!s)))}function B(R,N,M={}){R=Ql("message",R),s&&(R=s(R));const{prefix:P,scalar:L,pointBytes:F}=I(N),V=O(M.context,P,R),Z=A.multiply(V).toRawBytes(),ae=O(M.context,Z,F,R),re=x(V+ae*L);zb("signature.s",re,ja,r);const le=C4(Z,RD(re,n.BYTES));return Ql("result",le,n.BYTES*2)}const G=CIe;function W(R,N,M,P=G){const{context:L,zip215:F}=P,V=n.BYTES;R=Ql("signature",R,2*V),N=Ql("message",N),M=Ql("publicKey",M,V),F!==void 0&&RP("zip215",F),s&&(N=s(N));const Z=rS(R.slice(V,2*V));let ae,re,le;try{ae=v.fromHex(M,F),re=v.fromHex(R.slice(0,V),F),le=A.multiplyUnsafe(Z)}catch{return!1}if(!F&&ae.isSmallOrder())return!1;const we=O(L,re.toRawBytes(),ae.toRawBytes(),N);return re.add(ae.multiplyUnsafe(we)).subtract(le).clearCofactor().equals(v.ZERO)}return A._setWindowSize(8),{CURVE:e,getPublicKey:k,sign:B,verify:W,ExtendedPoint:v,utils:{getExtendedPublicKey:I,randomPrivateKey:()=>o(n.BYTES),precompute(R=8,N=v.BASE){return N._setWindowSize(R),N.multiply(BigInt(3)),N}}}}BigInt(0),BigInt(1);const JM=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),T4=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const IIe=BigInt(1),R4=BigInt(2);BigInt(3);const xIe=BigInt(5),NIe=BigInt(8);function TIe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=JM,o=t*t%i*t%i,a=$c(o,R4,i)*o%i,c=$c(a,IIe,i)*t%i,l=$c(c,xIe,i)*c%i,u=$c(l,e,i)*l%i,d=$c(u,n,i)*u%i,h=$c(d,r,i)*d%i,f=$c(h,s,i)*h%i,p=$c(f,s,i)*h%i,g=$c(p,e,i)*l%i;return{pow_p_5_8:$c(g,R4,i)*t%i,b2:o}}function RIe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function PIe(t,e){const n=JM,r=Fr(e*e*e,n),s=Fr(r*r*e,n),i=TIe(t*s).pow_p_5_8;let o=Fr(t*r*i,n);const a=Fr(e*o*o,n),c=o,l=Fr(o*T4,n),u=a===t,d=a===Fr(-t,n),h=a===Fr(-t*T4,n);return u&&(o=c),(d||h)&&(o=l),hIe(o,n)&&(o=Fr(-o,n)),{isValid:u||d,value:o}}const OIe=eJ(JM,void 0,!0),kIe={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:OIe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:NIe,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:eIe,randomBytes:VQ,adjustScalarBytes:RIe,uvRatio:PIe},rJ=SIe(kIe),DIe="EdDSA",LIe="JWT",DI=".",jN="base64url",sJ="utf8",iJ="utf8",MIe=":",UIe="did",$Ie="key",P4="base58btc",BIe="z",FIe="K36",jIe=32;function ZM(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function oJ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ZM(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function aJ(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=oJ(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return ZM(n)}function zIe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,m=0,w=p.length;m!==w&&p[m]===0;)m++,g++;for(var v=(w-m)*u+1>>>0,A=new Uint8Array(v);m!==w;){for(var C=p[m],S=0,x=v-1;(C!==0||S<y)&&x!==-1;x--,S++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");y=S,m++}for(var T=v-y;T!==v&&A[T]===0;)T++;for(var I=c.repeat(g);T<v;++T)I+=t.charAt(A[T]);return I}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,m=0;p[g]===c;)y++,g++;for(var w=(p.length-g)*l+1>>>0,v=new Uint8Array(w);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,S=w-1;(A!==0||C<m)&&S!==-1;S--,C++)A+=a*v[S]>>>0,v[S]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");m=C,g++}if(p[g]!==" "){for(var x=w-m;x!==w&&v[x]===0;)x++;for(var T=new Uint8Array(y+(w-x)),I=y;x!==w;)T[I++]=v[x++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var WIe=zIe,HIe=WIe;const cJ=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},GIe=t=>new TextEncoder().encode(t),qIe=t=>new TextDecoder().decode(t);let VIe=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},KIe=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return lJ(this,e)}},YIe=class{constructor(e){this.decoders=e}or(e){return lJ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const lJ=(t,e)=>new YIe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let QIe=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new VIe(e,n,r),this.decoder=new KIe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const zN=({name:t,prefix:e,encode:n,decode:r})=>new QIe(t,e,n,r),HC=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=HIe(n,e);return zN({prefix:t,name:e,encode:r,decode:i=>cJ(s(i))})},JIe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},ZIe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Ms=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>zN({prefix:e,name:t,encode(s){return ZIe(s,r,n)},decode(s){return JIe(s,r,n,t)}}),XIe=zN({prefix:"\0",name:"identity",encode:t=>qIe(t),decode:t=>GIe(t)});var exe=Object.freeze({__proto__:null,identity:XIe});const txe=Ms({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var nxe=Object.freeze({__proto__:null,base2:txe});const rxe=Ms({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var sxe=Object.freeze({__proto__:null,base8:rxe});const ixe=HC({prefix:"9",name:"base10",alphabet:"0123456789"});var oxe=Object.freeze({__proto__:null,base10:ixe});const axe=Ms({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),cxe=Ms({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var lxe=Object.freeze({__proto__:null,base16:axe,base16upper:cxe});const uxe=Ms({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),dxe=Ms({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),hxe=Ms({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),fxe=Ms({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),pxe=Ms({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),gxe=Ms({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),mxe=Ms({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),yxe=Ms({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),wxe=Ms({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var bxe=Object.freeze({__proto__:null,base32:uxe,base32upper:dxe,base32pad:hxe,base32padupper:fxe,base32hex:pxe,base32hexupper:gxe,base32hexpad:mxe,base32hexpadupper:yxe,base32z:wxe});const vxe=HC({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Exe=HC({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var _xe=Object.freeze({__proto__:null,base36:vxe,base36upper:Exe});const Cxe=HC({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Axe=HC({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Sxe=Object.freeze({__proto__:null,base58btc:Cxe,base58flickr:Axe});const Ixe=Ms({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),xxe=Ms({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Nxe=Ms({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Txe=Ms({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Rxe=Object.freeze({__proto__:null,base64:Ixe,base64pad:xxe,base64url:Nxe,base64urlpad:Txe});const uJ=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Pxe=uJ.reduce((t,e,n)=>(t[n]=e,t),[]),Oxe=uJ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function kxe(t){return t.reduce((e,n)=>(e+=Pxe[n],e),"")}function Dxe(t){const e=[];for(const n of t){const r=Oxe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Lxe=zN({prefix:"🚀",name:"base256emoji",encode:kxe,decode:Dxe});var Mxe=Object.freeze({__proto__:null,base256emoji:Lxe}),Uxe=dJ,O4=128,$xe=-128,Bxe=Math.pow(2,31);function dJ(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Bxe;)e[n++]=t&255|O4,t/=128;for(;t&$xe;)e[n++]=t&255|O4,t>>>=7;return e[n]=t|0,dJ.bytes=n-r+1,e}var Fxe=OD,jxe=128,k4=127;function OD(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw OD.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&k4)<<s:(o&k4)*Math.pow(2,s),s+=7}while(o>=jxe);return OD.bytes=i-r,n}var zxe=Math.pow(2,7),Wxe=Math.pow(2,14),Hxe=Math.pow(2,21),Gxe=Math.pow(2,28),qxe=Math.pow(2,35),Vxe=Math.pow(2,42),Kxe=Math.pow(2,49),Yxe=Math.pow(2,56),Qxe=Math.pow(2,63),Jxe=function(t){return t<zxe?1:t<Wxe?2:t<Hxe?3:t<Gxe?4:t<qxe?5:t<Vxe?6:t<Kxe?7:t<Yxe?8:t<Qxe?9:10},Zxe={encode:Uxe,decode:Fxe,encodingLength:Jxe},hJ=Zxe;const D4=(t,e,n=0)=>(hJ.encode(t,e,n),e),L4=t=>hJ.encodingLength(t),kD=(t,e)=>{const n=e.byteLength,r=L4(t),s=r+L4(n),i=new Uint8Array(s+n);return D4(t,i,0),D4(n,i,r),i.set(e,s),new Xxe(t,n,e,i)};let Xxe=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const fJ=({name:t,code:e,encode:n})=>new eNe(t,e,n);let eNe=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?kD(this.code,n):n.then(r=>kD(this.code,r))}else throw Error("Unknown type, must be binary type")}};const pJ=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),tNe=fJ({name:"sha2-256",code:18,encode:pJ("SHA-256")}),nNe=fJ({name:"sha2-512",code:19,encode:pJ("SHA-512")});var rNe=Object.freeze({__proto__:null,sha256:tNe,sha512:nNe});const gJ=0,sNe="identity",mJ=cJ,iNe=t=>kD(gJ,mJ(t)),oNe={code:gJ,name:sNe,encode:mJ,digest:iNe};var aNe=Object.freeze({__proto__:null,identity:oNe});new TextEncoder,new TextDecoder;const M4={...exe,...nxe,...sxe,...oxe,...lxe,...bxe,..._xe,...Sxe,...Rxe,...Mxe};({...rNe,...aNe});function yJ(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const U4=yJ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),MP=yJ("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=oJ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),wJ={utf8:U4,"utf-8":U4,hex:M4.base16,latin1:MP,ascii:MP,binary:MP,...M4};function WN(t,e="utf8"){const n=wJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function tb(t,e="utf8"){const n=wJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ZM(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function $4(t){return Ig(WN(tb(t,jN),sJ))}function LI(t){return WN(tb(Xu(t),sJ),jN)}function bJ(t){const e=tb(FIe,P4),n=BIe+WN(aJ([e,t]),P4);return[UIe,$Ie,n].join(MIe)}function cNe(t){return WN(t,jN)}function lNe(t){return tb(t,jN)}function uNe(t){return tb([LI(t.header),LI(t.payload)].join(DI),iJ)}function dNe(t){return[LI(t.header),LI(t.payload),cNe(t.signature)].join(DI)}function DD(t){const e=t.split(DI),n=$4(e[0]),r=$4(e[1]),s=lNe(e[2]),i=tb(e.slice(0,2).join(DI),iJ);return{header:n,payload:r,signature:s,data:i}}function B4(t=VQ(jIe)){const e=rJ.getPublicKey(t);return{secretKey:aJ([t,e]),publicKey:e}}async function hNe(t,e,n,r,s=xe.fromMiliseconds(Date.now())){const i={alg:DIe,typ:LIe},o=bJ(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=uNe({header:i,payload:c}),u=rJ.sign(l,r.secretKey.slice(0,32));return dNe({header:i,payload:c,signature:u})}var F4=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},fNe=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),pNe=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),gNe=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),mNe=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),yNe=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),wNe=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,bNe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,j4=3,vNe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",wNe]],z4=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ENe(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new yNe:typeof navigator<"u"?CNe(navigator.userAgent):SNe()}function _Ne(t){return t!==""&&vNe.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function CNe(t){var e=_Ne(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new mNe;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<j4&&(s=F4(F4([],s,!0),INe(j4-s.length),!0)):s=[];var i=s.join("."),o=ANe(t),a=bNe.exec(t);return a&&a[1]?new gNe(n,i,o,a[1]):new fNe(n,i,o)}function ANe(t){for(var e=0,n=z4.length;e<n;e++){var r=z4[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function SNe(){var t=typeof process<"u"&&process.version;return t?new pNe(process.version.slice(1)):null}function INe(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});Hn.getLocalStorage=Hn.getLocalStorageOrThrow=Hn.getCrypto=Hn.getCryptoOrThrow=vJ=Hn.getLocation=Hn.getLocationOrThrow=XM=Hn.getNavigator=Hn.getNavigatorOrThrow=xg=Hn.getDocument=Hn.getDocumentOrThrow=Hn.getFromWindowOrThrow=Hn.getFromWindow=void 0;function im(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Hn.getFromWindow=im;function nb(t){const e=im(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Hn.getFromWindowOrThrow=nb;function xNe(){return nb("document")}Hn.getDocumentOrThrow=xNe;function NNe(){return im("document")}var xg=Hn.getDocument=NNe;function TNe(){return nb("navigator")}Hn.getNavigatorOrThrow=TNe;function RNe(){return im("navigator")}var XM=Hn.getNavigator=RNe;function PNe(){return nb("location")}Hn.getLocationOrThrow=PNe;function ONe(){return im("location")}var vJ=Hn.getLocation=ONe;function kNe(){return nb("crypto")}Hn.getCryptoOrThrow=kNe;function DNe(){return im("crypto")}Hn.getCrypto=DNe;function LNe(){return nb("localStorage")}Hn.getLocalStorageOrThrow=LNe;function MNe(){return im("localStorage")}Hn.getLocalStorage=MNe;var eU={};Object.defineProperty(eU,"__esModule",{value:!0});var EJ=eU.getWindowMetadata=void 0;const W4=Hn;function UNe(){let t,e;try{t=W4.getDocumentOrThrow(),e=W4.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const y=p.getAttribute("href");if(y)if(y.toLowerCase().indexOf("https:")===-1&&y.toLowerCase().indexOf("http:")===-1&&y.indexOf("//")!==0){let m=e.protocol+"//"+e.host;if(y.indexOf("/")===0)m+=y;else{const w=e.pathname.split("/");w.pop();const v=w.join("/");m+=v+"/"+y}h.push(m)}else if(y.indexOf("//")===0){const m=e.protocol+y;h.push(m)}else h.push(y)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(y=>p.getAttribute(y)).filter(y=>y?d.includes(y):!1);if(g.length&&g){const y=p.getAttribute("content");if(y)return y}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}EJ=eU.getWindowMetadata=UNe;function $Ne(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let w=l[h],v=0;for(let A=p-1;(w!==0||v<d)&&A!==-1;A--,v++)w+=256*g[A]>>>0,g[A]=w%n>>>0,w=w/n>>>0;if(w!==0)throw new Error("Non-zero carry");d=v,h++}let y=p-d;for(;y!==p&&g[y]===0;)y++;let m=r.repeat(u);for(;y<p;++y)m+=t.charAt(g[y]);return m}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const w=l.charCodeAt(u);if(w>255)return;let v=e[w];if(v===255)return;let A=0;for(let C=f-1;(v!==0||A<h)&&C!==-1;C--,A++)v+=n*p[C]>>>0,p[C]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");h=A,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const y=new Uint8Array(d+(f-g));let m=d;for(;g!==f;)y[m++]=p[g++];return y}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var BNe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const _J=$Ne(BNe);function CJ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Jv(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=CJ(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function FNe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,m=0,w=p.length;m!==w&&p[m]===0;)m++,g++;for(var v=(w-m)*u+1>>>0,A=new Uint8Array(v);m!==w;){for(var C=p[m],S=0,x=v-1;(C!==0||S<y)&&x!==-1;x--,S++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");y=S,m++}for(var T=v-y;T!==v&&A[T]===0;)T++;for(var I=c.repeat(g);T<v;++T)I+=t.charAt(A[T]);return I}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,m=0;p[g]===c;)y++,g++;for(var w=(p.length-g)*l+1>>>0,v=new Uint8Array(w);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,S=w-1;(A!==0||C<m)&&S!==-1;S--,C++)A+=a*v[S]>>>0,v[S]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");m=C,g++}if(p[g]!==" "){for(var x=w-m;x!==w&&v[x]===0;)x++;for(var T=new Uint8Array(y+(w-x)),I=y;x!==w;)T[I++]=v[x++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var jNe=FNe,zNe=jNe;const WNe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},HNe=t=>new TextEncoder().encode(t),GNe=t=>new TextDecoder().decode(t);class qNe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class VNe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return AJ(this,e)}}class KNe{constructor(e){this.decoders=e}or(e){return AJ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const AJ=(t,e)=>new KNe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class YNe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new qNe(e,n,r),this.decoder=new VNe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const HN=({name:t,prefix:e,encode:n,decode:r})=>new YNe(t,e,n,r),GC=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=zNe(n,e);return HN({prefix:t,name:e,encode:r,decode:i=>WNe(s(i))})},QNe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},JNe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Us=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>HN({prefix:e,name:t,encode(s){return JNe(s,r,n)},decode(s){return QNe(s,r,n,t)}}),ZNe=HN({prefix:"\0",name:"identity",encode:t=>GNe(t),decode:t=>HNe(t)}),XNe=Object.freeze(Object.defineProperty({__proto__:null,identity:ZNe},Symbol.toStringTag,{value:"Module"})),eTe=Us({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),tTe=Object.freeze(Object.defineProperty({__proto__:null,base2:eTe},Symbol.toStringTag,{value:"Module"})),nTe=Us({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),rTe=Object.freeze(Object.defineProperty({__proto__:null,base8:nTe},Symbol.toStringTag,{value:"Module"})),sTe=GC({prefix:"9",name:"base10",alphabet:"0123456789"}),iTe=Object.freeze(Object.defineProperty({__proto__:null,base10:sTe},Symbol.toStringTag,{value:"Module"})),oTe=Us({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),aTe=Us({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),cTe=Object.freeze(Object.defineProperty({__proto__:null,base16:oTe,base16upper:aTe},Symbol.toStringTag,{value:"Module"})),lTe=Us({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),uTe=Us({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),dTe=Us({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),hTe=Us({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),fTe=Us({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),pTe=Us({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),gTe=Us({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),mTe=Us({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),yTe=Us({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),wTe=Object.freeze(Object.defineProperty({__proto__:null,base32:lTe,base32hex:fTe,base32hexpad:gTe,base32hexpadupper:mTe,base32hexupper:pTe,base32pad:dTe,base32padupper:hTe,base32upper:uTe,base32z:yTe},Symbol.toStringTag,{value:"Module"})),bTe=GC({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),vTe=GC({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),ETe=Object.freeze(Object.defineProperty({__proto__:null,base36:bTe,base36upper:vTe},Symbol.toStringTag,{value:"Module"})),_Te=GC({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),CTe=GC({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),ATe=Object.freeze(Object.defineProperty({__proto__:null,base58btc:_Te,base58flickr:CTe},Symbol.toStringTag,{value:"Module"})),STe=Us({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ITe=Us({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),xTe=Us({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),NTe=Us({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),TTe=Object.freeze(Object.defineProperty({__proto__:null,base64:STe,base64pad:ITe,base64url:xTe,base64urlpad:NTe},Symbol.toStringTag,{value:"Module"})),SJ=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),RTe=SJ.reduce((t,e,n)=>(t[n]=e,t),[]),PTe=SJ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function OTe(t){return t.reduce((e,n)=>(e+=RTe[n],e),"")}function kTe(t){const e=[];for(const n of t){const r=PTe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const DTe=HN({prefix:"🚀",name:"base256emoji",encode:OTe,decode:kTe}),LTe=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:DTe},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const H4={...XNe,...tTe,...rTe,...iTe,...cTe,...wTe,...ETe,...ATe,...TTe,...LTe};function IJ(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const G4=IJ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),UP=IJ("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=CJ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),xJ={utf8:G4,"utf-8":G4,hex:H4.base16,latin1:UP,ascii:UP,binary:UP,...H4};function Ca(t,e="utf8"){const n=xJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function io(t,e="utf8"){const n=xJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const MTe={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},UTe="PARSE_ERROR",$Te="INVALID_REQUEST",BTe="METHOD_NOT_FOUND",FTe="INVALID_PARAMS",NJ="INTERNAL_ERROR",tU="SERVER_ERROR",jTe=[-32700,-32600,-32601,-32602,-32603],Zv={[UTe]:{code:-32700,message:"Parse error"},[$Te]:{code:-32600,message:"Invalid Request"},[BTe]:{code:-32601,message:"Method not found"},[FTe]:{code:-32602,message:"Invalid params"},[NJ]:{code:-32603,message:"Internal error"},[tU]:{code:-32e3,message:"Server error"}},TJ=tU;function zTe(t){return jTe.includes(t)}function q4(t){return Object.keys(Zv).includes(t)?Zv[t]:Zv[TJ]}function WTe(t){const e=Object.values(Zv).find(n=>n.code===t);return e||Zv[TJ]}function RJ(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var PJ={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var LD=function(t,e){return LD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},LD(t,e)};function HTe(t,e){LD(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var MD=function(){return MD=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},MD.apply(this,arguments)};function GTe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function qTe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function VTe(t,e){return function(n,r){e(n,r,t)}}function KTe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function YTe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function QTe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function JTe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function ZTe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function UD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function OJ(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function XTe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(OJ(arguments[e]));return t}function eRe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function h_(t){return this instanceof h_?(this.v=t,this):new h_(t)}function tRe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof h_?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function nRe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:h_(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function rRe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof UD=="function"?UD(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function sRe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function iRe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function oRe(t){return t&&t.__esModule?t:{default:t}}function aRe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function cRe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const lRe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return MD},__asyncDelegator:nRe,__asyncGenerator:tRe,__asyncValues:rRe,__await:h_,__awaiter:YTe,__classPrivateFieldGet:aRe,__classPrivateFieldSet:cRe,__createBinding:JTe,__decorate:qTe,__exportStar:ZTe,__extends:HTe,__generator:QTe,__importDefault:oRe,__importStar:iRe,__makeTemplateObject:sRe,__metadata:KTe,__param:VTe,__read:OJ,__rest:GTe,__spread:XTe,__spreadArrays:eRe,__values:UD},Symbol.toStringTag,{value:"Module"})),uRe=yz(lRe);var Jl={},V4;function dRe(){if(V4)return Jl;V4=1,Object.defineProperty(Jl,"__esModule",{value:!0}),Jl.isBrowserCryptoAvailable=Jl.getSubtleCrypto=Jl.getBrowerCrypto=void 0;function t(){return(cl==null?void 0:cl.crypto)||(cl==null?void 0:cl.msCrypto)||{}}Jl.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}Jl.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return Jl.isBrowserCryptoAvailable=n,Jl}var Zl={},K4;function hRe(){if(K4)return Zl;K4=1,Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.isBrowser=Zl.isNode=Zl.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Zl.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Zl.isNode=e;function n(){return!t()&&!e()}return Zl.isBrowser=n,Zl}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=uRe;e.__exportStar(dRe(),t),e.__exportStar(hRe(),t)})(PJ);function Vc(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function gp(t=6){return BigInt(Vc(t))}function _h(t,e,n){return{id:n||Vc(),jsonrpc:"2.0",method:t,params:e}}function GN(t,e){return{id:t,jsonrpc:"2.0",result:e}}function qN(t,e,n){return{id:t,jsonrpc:"2.0",error:fRe(e)}}function fRe(t,e){return typeof t>"u"?q4(NJ):(typeof t=="string"&&(t=Object.assign(Object.assign({},q4(tU)),{message:t})),zTe(t.code)&&(t=WTe(t.code)),t)}let pRe=class{},gRe=class extends pRe{constructor(){super()}},mRe=class extends gRe{constructor(e){super()}};const yRe="^https?:",wRe="^wss?:";function bRe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function kJ(t,e){const n=bRe(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function Y4(t){return kJ(t,yRe)}function Q4(t){return kJ(t,wRe)}function vRe(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function DJ(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function nU(t){return DJ(t)&&"method"in t}function VN(t){return DJ(t)&&(Kc(t)||ma(t))}function Kc(t){return"result"in t}function ma(t){return"error"in t}let Ma=class extends mRe{constructor(e){super(e),this.events=new La.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(_h(e.method,e.params||[],e.id||gp().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{ma(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),VN(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const ERe=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),_Re=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",J4=t=>t.split("?")[0],Z4=10,CRe=ERe();let ARe=class{constructor(e){if(this.url=e,this.events=new La.EventEmitter,this.registering=!1,!Q4(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Xu(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!Q4(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=PJ.isReactNative()?void 0:{rejectUnauthorized:!vRe(e)},i=new CRe(e,[],s);_Re()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Ig(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=qN(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return RJ(e,J4(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Z4&&this.events.setMaxListeners(Z4)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${J4(this.url)}`));return this.events.emit("register_error",n),n}};var $D={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof cl<"u"&&cl,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof cl<"u"&&cl||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(R){return R&&DataView.prototype.isPrototypeOf(R)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(R){return R&&u.indexOf(Object.prototype.toString.call(R))>-1};function h(R){if(typeof R!="string"&&(R=String(R)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(R)||R==="")throw new TypeError('Invalid character in header field name: "'+R+'"');return R.toLowerCase()}function f(R){return typeof R!="string"&&(R=String(R)),R}function p(R){var N={next:function(){var M=R.shift();return{done:M===void 0,value:M}}};return c.iterable&&(N[Symbol.iterator]=function(){return N}),N}function g(R){this.map={},R instanceof g?R.forEach(function(N,M){this.append(M,N)},this):Array.isArray(R)?R.forEach(function(N){if(N.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+N.length);this.append(N[0],N[1])},this):R&&Object.getOwnPropertyNames(R).forEach(function(N){this.append(N,R[N])},this)}g.prototype.append=function(R,N){R=h(R),N=f(N);var M=this.map[R];this.map[R]=M?M+", "+N:N},g.prototype.delete=function(R){delete this.map[h(R)]},g.prototype.get=function(R){return R=h(R),this.has(R)?this.map[R]:null},g.prototype.has=function(R){return this.map.hasOwnProperty(h(R))},g.prototype.set=function(R,N){this.map[h(R)]=f(N)},g.prototype.forEach=function(R,N){for(var M in this.map)this.map.hasOwnProperty(M)&&R.call(N,this.map[M],M,this)},g.prototype.keys=function(){var R=[];return this.forEach(function(N,M){R.push(M)}),p(R)},g.prototype.values=function(){var R=[];return this.forEach(function(N){R.push(N)}),p(R)},g.prototype.entries=function(){var R=[];return this.forEach(function(N,M){R.push([M,N])}),p(R)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function y(R){if(!R._noBody){if(R.bodyUsed)return Promise.reject(new TypeError("Already read"));R.bodyUsed=!0}}function m(R){return new Promise(function(N,M){R.onload=function(){N(R.result)},R.onerror=function(){M(R.error)}})}function w(R){var N=new FileReader,M=m(N);return N.readAsArrayBuffer(R),M}function v(R){var N=new FileReader,M=m(N),P=/charset=([A-Za-z0-9_-]+)/.exec(R.type),L=P?P[1]:"utf-8";return N.readAsText(R,L),M}function A(R){for(var N=new Uint8Array(R),M=new Array(N.length),P=0;P<N.length;P++)M[P]=String.fromCharCode(N[P]);return M.join("")}function C(R){if(R.slice)return R.slice(0);var N=new Uint8Array(R.byteLength);return N.set(new Uint8Array(R)),N.buffer}function S(){return this.bodyUsed=!1,this._initBody=function(R){this.bodyUsed=this.bodyUsed,this._bodyInit=R,R?typeof R=="string"?this._bodyText=R:c.blob&&Blob.prototype.isPrototypeOf(R)?this._bodyBlob=R:c.formData&&FormData.prototype.isPrototypeOf(R)?this._bodyFormData=R:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(R)?this._bodyText=R.toString():c.arrayBuffer&&c.blob&&l(R)?(this._bodyArrayBuffer=C(R.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(R)||d(R))?this._bodyArrayBuffer=C(R):this._bodyText=R=Object.prototype.toString.call(R):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof R=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(R)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var R=y(this);if(R)return R;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var R=y(this);return R||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(w);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var R=y(this);if(R)return R;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}var x=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function T(R){var N=R.toUpperCase();return x.indexOf(N)>-1?N:R}function I(R,N){if(!(this instanceof I))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');N=N||{};var M=N.body;if(R instanceof I){if(R.bodyUsed)throw new TypeError("Already read");this.url=R.url,this.credentials=R.credentials,N.headers||(this.headers=new g(R.headers)),this.method=R.method,this.mode=R.mode,this.signal=R.signal,!M&&R._bodyInit!=null&&(M=R._bodyInit,R.bodyUsed=!0)}else this.url=String(R);if(this.credentials=N.credentials||this.credentials||"same-origin",(N.headers||!this.headers)&&(this.headers=new g(N.headers)),this.method=T(N.method||this.method||"GET"),this.mode=N.mode||this.mode||null,this.signal=N.signal||this.signal||function(){if("AbortController"in a){var F=new AbortController;return F.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&M)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(M),(this.method==="GET"||this.method==="HEAD")&&(N.cache==="no-store"||N.cache==="no-cache")){var P=/([?&])_=[^&]*/;if(P.test(this.url))this.url=this.url.replace(P,"$1_="+new Date().getTime());else{var L=/\?/;this.url+=(L.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}I.prototype.clone=function(){return new I(this,{body:this._bodyInit})};function k(R){var N=new FormData;return R.trim().split("&").forEach(function(M){if(M){var P=M.split("="),L=P.shift().replace(/\+/g," "),F=P.join("=").replace(/\+/g," ");N.append(decodeURIComponent(L),decodeURIComponent(F))}}),N}function O(R){var N=new g,M=R.replace(/\r?\n[\t ]+/g," ");return M.split("\r").map(function(P){return P.indexOf(`
`)===0?P.substr(1,P.length):P}).forEach(function(P){var L=P.split(":"),F=L.shift().trim();if(F){var V=L.join(":").trim();try{N.append(F,V)}catch(Z){console.warn("Response "+Z.message)}}}),N}S.call(I.prototype);function B(R,N){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(N||(N={}),this.type="default",this.status=N.status===void 0?200:N.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=N.statusText===void 0?"":""+N.statusText,this.headers=new g(N.headers),this.url=N.url||"",this._initBody(R)}S.call(B.prototype),B.prototype.clone=function(){return new B(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},B.error=function(){var R=new B(null,{status:200,statusText:""});return R.ok=!1,R.status=0,R.type="error",R};var G=[301,302,303,307,308];B.redirect=function(R,N){if(G.indexOf(N)===-1)throw new RangeError("Invalid status code");return new B(null,{status:N,headers:{location:R}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(N,M){this.message=N,this.name=M;var P=Error(N);this.stack=P.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function W(R,N){return new Promise(function(M,P){var L=new I(R,N);if(L.signal&&L.signal.aborted)return P(new o.DOMException("Aborted","AbortError"));var F=new XMLHttpRequest;function V(){F.abort()}F.onload=function(){var re={statusText:F.statusText,headers:O(F.getAllResponseHeaders()||"")};L.url.indexOf("file://")===0&&(F.status<200||F.status>599)?re.status=200:re.status=F.status,re.url="responseURL"in F?F.responseURL:re.headers.get("X-Request-URL");var le="response"in F?F.response:F.responseText;setTimeout(function(){M(new B(le,re))},0)},F.onerror=function(){setTimeout(function(){P(new TypeError("Network request failed"))},0)},F.ontimeout=function(){setTimeout(function(){P(new TypeError("Network request timed out"))},0)},F.onabort=function(){setTimeout(function(){P(new o.DOMException("Aborted","AbortError"))},0)};function Z(re){try{return re===""&&a.location.href?a.location.href:re}catch{return re}}if(F.open(L.method,Z(L.url),!0),L.credentials==="include"?F.withCredentials=!0:L.credentials==="omit"&&(F.withCredentials=!1),"responseType"in F&&(c.blob?F.responseType="blob":c.arrayBuffer&&(F.responseType="arraybuffer")),N&&typeof N.headers=="object"&&!(N.headers instanceof g||a.Headers&&N.headers instanceof a.Headers)){var ae=[];Object.getOwnPropertyNames(N.headers).forEach(function(re){ae.push(h(re)),F.setRequestHeader(re,f(N.headers[re]))}),L.headers.forEach(function(re,le){ae.indexOf(le)===-1&&F.setRequestHeader(le,re)})}else L.headers.forEach(function(re,le){F.setRequestHeader(le,re)});L.signal&&(L.signal.addEventListener("abort",V),F.onreadystatechange=function(){F.readyState===4&&L.signal.removeEventListener("abort",V)}),F.send(typeof L._bodyInit>"u"?null:L._bodyInit)})}return W.polyfill=!0,a.fetch||(a.fetch=W,a.Headers=g,a.Request=I,a.Response=B),o.Headers=g,o.Request=I,o.Response=B,o.fetch=W,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})($D,$D.exports);var SRe=$D.exports;const X4=zg(SRe);var IRe=Object.defineProperty,xRe=Object.defineProperties,NRe=Object.getOwnPropertyDescriptors,eF=Object.getOwnPropertySymbols,TRe=Object.prototype.hasOwnProperty,RRe=Object.prototype.propertyIsEnumerable,tF=(t,e,n)=>e in t?IRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nF=(t,e)=>{for(var n in e||(e={}))TRe.call(e,n)&&tF(t,n,e[n]);if(eF)for(var n of eF(e))RRe.call(e,n)&&tF(t,n,e[n]);return t},rF=(t,e)=>xRe(t,NRe(e));const PRe={Accept:"application/json","Content-Type":"application/json"},ORe="POST",sF={headers:PRe,method:ORe},iF=10;let Pc=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new La.EventEmitter,this.isAvailable=!1,this.registering=!1,!Y4(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=Xu(e),r=await(await X4(this.url,rF(nF({},sF),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!Y4(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=Xu({id:1,jsonrpc:"2.0",method:"test",params:[]});await X4(e,rF(nF({},sF),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Ig(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=qN(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return RJ(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>iF&&this.events.setMaxListeners(iF)}};const Xv={getSIWX(){return ve.state.siwx},async initializeIfEnabled(){var i;const t=ve.state.siwx,e=z.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(z.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await ls.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),ir.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=pt._getClient())==null?void 0:i.disconnect().catch(console.error)),Mt.reset("Connect"),fc.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=ve.state.siwx,e=it.getPlainAddress(z.getActiveCaipAddress()),n=z.getActiveCaipNetwork(),r=pt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();je.getConnectorId(n.chainNamespace)===ze.CONNECTOR_ID.AUTH&&Mt.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),ls.close(),ir.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!ls.state.open||Mt.state.view==="ApproveTransaction")&&await ls.open({view:"SIWXSignMessage"}),i.isSmartAccount?fc.showError("This application might not support Smart Accounts"):fc.showError("Signature declined"),ir.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await pt.disconnect():ls.close(),Mt.reset("Connect"),ir.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=ve.state.siwx,e=it.getPlainAddress(z.getActiveCaipAddress()),n=z.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Mt.state.view==="ApproveTransaction",r=Mt.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=Xv.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=z.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(fc.showLoading("Authenticating...",{autoClose:!1}),Qe.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),ir.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Xv.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),ir.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Xv.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{fc.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=z.state.activeChain;return{network:((e=z.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=Qe.state.preferredAccountTypes)==null?void 0:n[t])===Ps.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};function oA(t,e){return je.getConnectorId(t)===e}function kRe(t){const e=Array.from(z.state.chains.keys());let n=[];return t?(n.push([t,z.state.chains.get(t)]),oA(t,ze.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&oA(r,ze.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,z.state.chains.get(r)])}):oA(t,ze.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&oA(r,ze.CONNECTOR_ID.AUTH)&&n.push([r,z.state.chains.get(r)])})):n=Array.from(z.state.chains.entries()),n}const Gi={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},MI={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[ze.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ze.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ze.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[ze.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[ze.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[ze.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[ze.CONNECTOR_ID.INJECTED]:"Browser Wallet",[ze.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[ze.CONNECTOR_ID.COINBASE]:"Coinbase",[ze.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[ze.CONNECTOR_ID.LEDGER]:"Ledger",[ze.CONNECTOR_ID.SAFE]:"Safe"}},KN={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Gi.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},DRe=new AbortController,ul={EmbeddedWalletAbortController:DRe,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${LRe()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function LRe(){return typeof window<"u"}const MRe={createLogger(t,e="error"){const n=sm({level:e}),{logger:r}=FN({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},URe="rpc.walletconnect.org";function oF(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const $P=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Qm={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===URe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:ze.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${ze.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return $P.includes(e)?oF(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,y;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((y=r==null?void 0:r[i])==null?void 0:y.map(m=>m.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:MI.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Qm.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(vh(a.url,a.config))}),$P.includes(t.caipNetworkId)&&r.push(vh(oF(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(vh(a))}),II(r)},extendWagmiTransports(t,e,n){if($P.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return II([n,vh(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:ze.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=Je.getActiveCaipNetworkId(),n=z.getAllRequestedCaipNetworks(),r=Array.from(((c=z.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},UI={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Oi=er({providers:{...UI},providerIds:{...UI}}),Tn={state:Oi,subscribeKey(t,e){return ti(Oi,t,e)},subscribe(t){return Xs(Oi,()=>{t(Oi)})},subscribeProviders(t){return Xs(Oi.providers,()=>t(Oi.providers))},setProvider(t,e){e&&(Oi.providers[t]=Ag(e))},getProvider(t){return Oi.providers[t]},setProviderId(t,e){e&&(Oi.providerIds[t]=e)},getProviderId(t){if(t)return Oi.providerIds[t]},reset(){Oi.providers={...UI},Oi.providerIds={...UI}},resetChain(t){Oi.providers[t]=void 0,Oi.providerIds[t]=void 0}},aF={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},_s={set(t,e){ko.isClient&&localStorage.setItem(`${Ke.STORAGE_KEY}${t}`,e)},get(t){return ko.isClient?localStorage.getItem(`${Ke.STORAGE_KEY}${t}`):null},delete(t,e){ko.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ke.STORAGE_KEY}${t}`))}},aA=30*1e3,ko={checkIfAllowedToTriggerEmail(){const t=_s.get(Ke.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<aA){const n=Math.ceil((aA-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=_s.get(Ke.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<aA)return Math.ceil((aA-e)/1e3)}return 0},checkIfRequestExists(t){return Ps.NOT_SAFE_RPC_METHODS.includes(t.method)||Ps.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(aF.transactionHash))||(t==null?void 0:t.match(aF.signedMessage)))?Ke.RPC_RESPONSE_TYPE_TX:Ke.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Ps.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var cn;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(cn||(cn={}));var BD;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(BD||(BD={}));const Ue=cn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),zd=t=>{switch(typeof t){case"undefined":return Ue.undefined;case"string":return Ue.string;case"number":return isNaN(t)?Ue.nan:Ue.number;case"boolean":return Ue.boolean;case"function":return Ue.function;case"bigint":return Ue.bigint;case"symbol":return Ue.symbol;case"object":return Array.isArray(t)?Ue.array:t===null?Ue.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ue.promise:typeof Map<"u"&&t instanceof Map?Ue.map:typeof Set<"u"&&t instanceof Set?Ue.set:typeof Date<"u"&&t instanceof Date?Ue.date:Ue.object;default:return Ue.unknown}},Se=cn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),$Re=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class _c extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,cn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}_c.create=t=>new _c(t);const f_=(t,e)=>{let n;switch(t.code){case Se.invalid_type:t.received===Ue.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Se.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,cn.jsonStringifyReplacer)}`;break;case Se.unrecognized_keys:n=`Unrecognized key(s) in object: ${cn.joinValues(t.keys,", ")}`;break;case Se.invalid_union:n="Invalid input";break;case Se.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${cn.joinValues(t.options)}`;break;case Se.invalid_enum_value:n=`Invalid enum value. Expected ${cn.joinValues(t.options)}, received '${t.received}'`;break;case Se.invalid_arguments:n="Invalid function arguments";break;case Se.invalid_return_type:n="Invalid function return type";break;case Se.invalid_date:n="Invalid date";break;case Se.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:cn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Se.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Se.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Se.custom:n="Invalid input";break;case Se.invalid_intersection_types:n="Intersection results could not be merged";break;case Se.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Se.not_finite:n="Number must be finite";break;default:n=e.defaultError,cn.assertNever(t)}return{message:n}};let LJ=f_;function BRe(t){LJ=t}function $I(){return LJ}const BI=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},FRe=[];function qe(t,e){const n=BI({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,$I(),f_].filter(r=>!!r)});t.common.issues.push(n)}class ei{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return xt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return ei.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return xt;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const xt=Object.freeze({status:"aborted"}),MJ=t=>({status:"dirty",value:t}),_i=t=>({status:"valid",value:t}),FD=t=>t.status==="aborted",jD=t=>t.status==="dirty",p_=t=>t.status==="valid",FI=t=>typeof Promise<"u"&&t instanceof Promise;var at;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(at||(at={}));class Ll{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const cF=(t,e)=>{if(p_(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new _c(t.common.issues);return this._error=n,this._error}}};function kt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class Ut{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return zd(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:zd(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ei,ctx:{common:e.parent.common,data:e.data,parsedType:zd(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(FI(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:zd(e)},i=this._parseSync({data:e,path:s.path,parent:s});return cF(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:zd(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(FI(s)?s:Promise.resolve(s));return cF(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Se.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Nc({schema:this,typeName:bt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return $u.create(this,this._def)}nullable(){return Rg.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Cc.create(this,this._def)}promise(){return g0.create(this,this._def)}or(e){return w_.create([this,e],this._def)}and(e){return b_.create(this,e,this._def)}transform(e){return new Nc({...kt(this._def),schema:this,typeName:bt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new A_({...kt(this._def),innerType:this,defaultValue:n,typeName:bt.ZodDefault})}brand(){return new $J({typeName:bt.ZodBranded,type:this,...kt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new HI({...kt(this._def),innerType:this,catchValue:n,typeName:bt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return qC.create(this,e)}readonly(){return qI.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const jRe=/^c[^\s-]{8,}$/i,zRe=/^[a-z][a-z0-9]*$/,WRe=/^[0-9A-HJKMNP-TV-Z]{26}$/,HRe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,GRe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,qRe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let BP;const VRe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,KRe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,YRe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function QRe(t,e){return!!((e==="v4"||!e)&&VRe.test(t)||(e==="v6"||!e)&&KRe.test(t))}class yc extends Ut{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ue.string){const i=this._getOrReturnCtx(e);return qe(i,{code:Se.invalid_type,expected:Ue.string,received:i.parsedType}),xt}const r=new ei;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),qe(s,{code:Se.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),qe(s,{code:Se.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?qe(s,{code:Se.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&qe(s,{code:Se.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")GRe.test(e.data)||(s=this._getOrReturnCtx(e,s),qe(s,{validation:"email",code:Se.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")BP||(BP=new RegExp(qRe,"u")),BP.test(e.data)||(s=this._getOrReturnCtx(e,s),qe(s,{validation:"emoji",code:Se.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")HRe.test(e.data)||(s=this._getOrReturnCtx(e,s),qe(s,{validation:"uuid",code:Se.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")jRe.test(e.data)||(s=this._getOrReturnCtx(e,s),qe(s,{validation:"cuid",code:Se.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")zRe.test(e.data)||(s=this._getOrReturnCtx(e,s),qe(s,{validation:"cuid2",code:Se.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")WRe.test(e.data)||(s=this._getOrReturnCtx(e,s),qe(s,{validation:"ulid",code:Se.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),qe(s,{validation:"url",code:Se.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),qe(s,{validation:"regex",code:Se.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),qe(s,{code:Se.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),qe(s,{code:Se.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),qe(s,{code:Se.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?YRe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),qe(s,{code:Se.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?QRe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),qe(s,{validation:"ip",code:Se.invalid_string,message:i.message}),r.dirty()):cn.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Se.invalid_string,...at.errToObj(r)})}_addCheck(e){return new yc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...at.errToObj(e)})}url(e){return this._addCheck({kind:"url",...at.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...at.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...at.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...at.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...at.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...at.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...at.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...at.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...at.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...at.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...at.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...at.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...at.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...at.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...at.errToObj(n)})}nonempty(e){return this.min(1,at.errToObj(e))}trim(){return new yc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new yc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new yc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}yc.create=t=>{var e;return new yc({checks:[],typeName:bt.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...kt(t)})};function JRe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class of extends Ut{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ue.number){const i=this._getOrReturnCtx(e);return qe(i,{code:Se.invalid_type,expected:Ue.number,received:i.parsedType}),xt}let r;const s=new ei;for(const i of this._def.checks)i.kind==="int"?cn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),qe(r,{code:Se.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),qe(r,{code:Se.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),qe(r,{code:Se.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?JRe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),qe(r,{code:Se.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),qe(r,{code:Se.not_finite,message:i.message}),s.dirty()):cn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,at.toString(n))}gt(e,n){return this.setLimit("min",e,!1,at.toString(n))}lte(e,n){return this.setLimit("max",e,!0,at.toString(n))}lt(e,n){return this.setLimit("max",e,!1,at.toString(n))}setLimit(e,n,r,s){return new of({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:at.toString(s)}]})}_addCheck(e){return new of({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:at.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:at.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:at.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:at.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:at.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:at.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:at.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:at.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:at.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&cn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}of.create=t=>new of({checks:[],typeName:bt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...kt(t)});class af extends Ut{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Ue.bigint){const i=this._getOrReturnCtx(e);return qe(i,{code:Se.invalid_type,expected:Ue.bigint,received:i.parsedType}),xt}let r;const s=new ei;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),qe(r,{code:Se.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),qe(r,{code:Se.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),qe(r,{code:Se.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):cn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,at.toString(n))}gt(e,n){return this.setLimit("min",e,!1,at.toString(n))}lte(e,n){return this.setLimit("max",e,!0,at.toString(n))}lt(e,n){return this.setLimit("max",e,!1,at.toString(n))}setLimit(e,n,r,s){return new af({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:at.toString(s)}]})}_addCheck(e){return new af({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:at.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:at.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:at.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:at.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:at.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}af.create=t=>{var e;return new af({checks:[],typeName:bt.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...kt(t)})};class g_ extends Ut{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ue.boolean){const r=this._getOrReturnCtx(e);return qe(r,{code:Se.invalid_type,expected:Ue.boolean,received:r.parsedType}),xt}return _i(e.data)}}g_.create=t=>new g_({typeName:bt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...kt(t)});class Ng extends Ut{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ue.date){const i=this._getOrReturnCtx(e);return qe(i,{code:Se.invalid_type,expected:Ue.date,received:i.parsedType}),xt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return qe(i,{code:Se.invalid_date}),xt}const r=new ei;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),qe(s,{code:Se.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),qe(s,{code:Se.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):cn.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ng({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:at.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:at.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Ng.create=t=>new Ng({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:bt.ZodDate,...kt(t)});class jI extends Ut{_parse(e){if(this._getType(e)!==Ue.symbol){const r=this._getOrReturnCtx(e);return qe(r,{code:Se.invalid_type,expected:Ue.symbol,received:r.parsedType}),xt}return _i(e.data)}}jI.create=t=>new jI({typeName:bt.ZodSymbol,...kt(t)});class m_ extends Ut{_parse(e){if(this._getType(e)!==Ue.undefined){const r=this._getOrReturnCtx(e);return qe(r,{code:Se.invalid_type,expected:Ue.undefined,received:r.parsedType}),xt}return _i(e.data)}}m_.create=t=>new m_({typeName:bt.ZodUndefined,...kt(t)});class y_ extends Ut{_parse(e){if(this._getType(e)!==Ue.null){const r=this._getOrReturnCtx(e);return qe(r,{code:Se.invalid_type,expected:Ue.null,received:r.parsedType}),xt}return _i(e.data)}}y_.create=t=>new y_({typeName:bt.ZodNull,...kt(t)});class p0 extends Ut{constructor(){super(...arguments),this._any=!0}_parse(e){return _i(e.data)}}p0.create=t=>new p0({typeName:bt.ZodAny,...kt(t)});class eg extends Ut{constructor(){super(...arguments),this._unknown=!0}_parse(e){return _i(e.data)}}eg.create=t=>new eg({typeName:bt.ZodUnknown,...kt(t)});class ed extends Ut{_parse(e){const n=this._getOrReturnCtx(e);return qe(n,{code:Se.invalid_type,expected:Ue.never,received:n.parsedType}),xt}}ed.create=t=>new ed({typeName:bt.ZodNever,...kt(t)});class zI extends Ut{_parse(e){if(this._getType(e)!==Ue.undefined){const r=this._getOrReturnCtx(e);return qe(r,{code:Se.invalid_type,expected:Ue.void,received:r.parsedType}),xt}return _i(e.data)}}zI.create=t=>new zI({typeName:bt.ZodVoid,...kt(t)});class Cc extends Ut{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Ue.array)return qe(n,{code:Se.invalid_type,expected:Ue.array,received:n.parsedType}),xt;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(qe(n,{code:o?Se.too_big:Se.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(qe(n,{code:Se.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(qe(n,{code:Se.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Ll(n,o,n.path,a)))).then(o=>ei.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Ll(n,o,n.path,a)));return ei.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Cc({...this._def,minLength:{value:e,message:at.toString(n)}})}max(e,n){return new Cc({...this._def,maxLength:{value:e,message:at.toString(n)}})}length(e,n){return new Cc({...this._def,exactLength:{value:e,message:at.toString(n)}})}nonempty(e){return this.min(1,e)}}Cc.create=(t,e)=>new Cc({type:t,minLength:null,maxLength:null,exactLength:null,typeName:bt.ZodArray,...kt(e)});function Jm(t){if(t instanceof ar){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=$u.create(Jm(r))}return new ar({...t._def,shape:()=>e})}else return t instanceof Cc?new Cc({...t._def,type:Jm(t.element)}):t instanceof $u?$u.create(Jm(t.unwrap())):t instanceof Rg?Rg.create(Jm(t.unwrap())):t instanceof Ml?Ml.create(t.items.map(e=>Jm(e))):t}class ar extends Ut{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=cn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Ue.object){const l=this._getOrReturnCtx(e);return qe(l,{code:Se.invalid_type,expected:Ue.object,received:l.parsedType}),xt}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ed&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Ll(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof ed){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(qe(s,{code:Se.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Ll(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>ei.mergeObjectSync(r,l)):ei.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return at.errToObj,new ar({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=at.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new ar({...this._def,unknownKeys:"strip"})}passthrough(){return new ar({...this._def,unknownKeys:"passthrough"})}extend(e){return new ar({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ar({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:bt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new ar({...this._def,catchall:e})}pick(e){const n={};return cn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new ar({...this._def,shape:()=>n})}omit(e){const n={};return cn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new ar({...this._def,shape:()=>n})}deepPartial(){return Jm(this)}partial(e){const n={};return cn.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new ar({...this._def,shape:()=>n})}required(e){const n={};return cn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof $u;)i=i._def.innerType;n[r]=i}}),new ar({...this._def,shape:()=>n})}keyof(){return UJ(cn.objectKeys(this.shape))}}ar.create=(t,e)=>new ar({shape:()=>t,unknownKeys:"strip",catchall:ed.create(),typeName:bt.ZodObject,...kt(e)});ar.strictCreate=(t,e)=>new ar({shape:()=>t,unknownKeys:"strict",catchall:ed.create(),typeName:bt.ZodObject,...kt(e)});ar.lazycreate=(t,e)=>new ar({shape:t,unknownKeys:"strip",catchall:ed.create(),typeName:bt.ZodObject,...kt(e)});class w_ extends Ut{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new _c(a.ctx.common.issues));return qe(n,{code:Se.invalid_union,unionErrors:o}),xt}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new _c(c));return qe(n,{code:Se.invalid_union,unionErrors:a}),xt}}get options(){return this._def.options}}w_.create=(t,e)=>new w_({options:t,typeName:bt.ZodUnion,...kt(e)});const sS=t=>t instanceof E_?sS(t.schema):t instanceof Nc?sS(t.innerType()):t instanceof __?[t.value]:t instanceof cf?t.options:t instanceof C_?Object.keys(t.enum):t instanceof A_?sS(t._def.innerType):t instanceof m_?[void 0]:t instanceof y_?[null]:null;class YN extends Ut{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ue.object)return qe(n,{code:Se.invalid_type,expected:Ue.object,received:n.parsedType}),xt;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(qe(n,{code:Se.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),xt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=sS(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new YN({typeName:bt.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...kt(r)})}}function zD(t,e){const n=zd(t),r=zd(e);if(t===e)return{valid:!0,data:t};if(n===Ue.object&&r===Ue.object){const s=cn.objectKeys(e),i=cn.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=zD(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===Ue.array&&r===Ue.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=zD(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===Ue.date&&r===Ue.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class b_ extends Ut{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(FD(i)||FD(o))return xt;const a=zD(i.value,o.value);return a.valid?((jD(i)||jD(o))&&n.dirty(),{status:n.value,value:a.data}):(qe(r,{code:Se.invalid_intersection_types}),xt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}b_.create=(t,e,n)=>new b_({left:t,right:e,typeName:bt.ZodIntersection,...kt(n)});class Ml extends Ut{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.array)return qe(r,{code:Se.invalid_type,expected:Ue.array,received:r.parsedType}),xt;if(r.data.length<this._def.items.length)return qe(r,{code:Se.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),xt;!this._def.rest&&r.data.length>this._def.items.length&&(qe(r,{code:Se.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Ll(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>ei.mergeArray(n,o)):ei.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Ml({...this._def,rest:e})}}Ml.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ml({items:t,typeName:bt.ZodTuple,rest:null,...kt(e)})};class v_ extends Ut{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.object)return qe(r,{code:Se.invalid_type,expected:Ue.object,received:r.parsedType}),xt;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Ll(r,a,r.path,a)),value:o._parse(new Ll(r,r.data[a],r.path,a))});return r.common.async?ei.mergeObjectAsync(n,s):ei.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Ut?new v_({keyType:e,valueType:n,typeName:bt.ZodRecord,...kt(r)}):new v_({keyType:yc.create(),valueType:e,typeName:bt.ZodRecord,...kt(n)})}}class WI extends Ut{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.map)return qe(r,{code:Se.invalid_type,expected:Ue.map,received:r.parsedType}),xt;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new Ll(r,a,r.path,[l,"key"])),value:i._parse(new Ll(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return xt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return xt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}WI.create=(t,e,n)=>new WI({valueType:e,keyType:t,typeName:bt.ZodMap,...kt(n)});class Tg extends Ut{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.set)return qe(r,{code:Se.invalid_type,expected:Ue.set,received:r.parsedType}),xt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(qe(r,{code:Se.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(qe(r,{code:Se.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return xt;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new Ll(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new Tg({...this._def,minSize:{value:e,message:at.toString(n)}})}max(e,n){return new Tg({...this._def,maxSize:{value:e,message:at.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Tg.create=(t,e)=>new Tg({valueType:t,minSize:null,maxSize:null,typeName:bt.ZodSet,...kt(e)});class $y extends Ut{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ue.function)return qe(n,{code:Se.invalid_type,expected:Ue.function,received:n.parsedType}),xt;function r(a,c){return BI({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,$I(),f_].filter(l=>!!l),issueData:{code:Se.invalid_arguments,argumentsError:c}})}function s(a,c){return BI({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,$I(),f_].filter(l=>!!l),issueData:{code:Se.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof g0){const a=this;return _i(async function(...c){const l=new _c([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return _i(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new _c([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new _c([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new $y({...this._def,args:Ml.create(e).rest(eg.create())})}returns(e){return new $y({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new $y({args:e||Ml.create([]).rest(eg.create()),returns:n||eg.create(),typeName:bt.ZodFunction,...kt(r)})}}class E_ extends Ut{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}E_.create=(t,e)=>new E_({getter:t,typeName:bt.ZodLazy,...kt(e)});class __ extends Ut{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return qe(n,{received:n.data,code:Se.invalid_literal,expected:this._def.value}),xt}return{status:"valid",value:e.data}}get value(){return this._def.value}}__.create=(t,e)=>new __({value:t,typeName:bt.ZodLiteral,...kt(e)});function UJ(t,e){return new cf({values:t,typeName:bt.ZodEnum,...kt(e)})}class cf extends Ut{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return qe(n,{expected:cn.joinValues(r),received:n.parsedType,code:Se.invalid_type}),xt}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return qe(n,{received:n.data,code:Se.invalid_enum_value,options:r}),xt}return _i(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return cf.create(e)}exclude(e){return cf.create(this.options.filter(n=>!e.includes(n)))}}cf.create=UJ;class C_ extends Ut{_parse(e){const n=cn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ue.string&&r.parsedType!==Ue.number){const s=cn.objectValues(n);return qe(r,{expected:cn.joinValues(s),received:r.parsedType,code:Se.invalid_type}),xt}if(n.indexOf(e.data)===-1){const s=cn.objectValues(n);return qe(r,{received:r.data,code:Se.invalid_enum_value,options:s}),xt}return _i(e.data)}get enum(){return this._def.values}}C_.create=(t,e)=>new C_({values:t,typeName:bt.ZodNativeEnum,...kt(e)});class g0 extends Ut{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ue.promise&&n.common.async===!1)return qe(n,{code:Se.invalid_type,expected:Ue.promise,received:n.parsedType}),xt;const r=n.parsedType===Ue.promise?n.data:Promise.resolve(n.data);return _i(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}g0.create=(t,e)=>new g0({type:t,typeName:bt.ZodPromise,...kt(e)});class Nc extends Ut{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===bt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{qe(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?xt:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?xt:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!p_(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>p_(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);cn.assertNever(s)}}Nc.create=(t,e,n)=>new Nc({schema:t,typeName:bt.ZodEffects,effect:e,...kt(n)});Nc.createWithPreprocess=(t,e,n)=>new Nc({schema:e,effect:{type:"preprocess",transform:t},typeName:bt.ZodEffects,...kt(n)});class $u extends Ut{_parse(e){return this._getType(e)===Ue.undefined?_i(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}$u.create=(t,e)=>new $u({innerType:t,typeName:bt.ZodOptional,...kt(e)});class Rg extends Ut{_parse(e){return this._getType(e)===Ue.null?_i(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Rg.create=(t,e)=>new Rg({innerType:t,typeName:bt.ZodNullable,...kt(e)});class A_ extends Ut{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Ue.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}A_.create=(t,e)=>new A_({innerType:t,typeName:bt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...kt(e)});class HI extends Ut{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return FI(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new _c(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new _c(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}HI.create=(t,e)=>new HI({innerType:t,typeName:bt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...kt(e)});class GI extends Ut{_parse(e){if(this._getType(e)!==Ue.nan){const r=this._getOrReturnCtx(e);return qe(r,{code:Se.invalid_type,expected:Ue.nan,received:r.parsedType}),xt}return{status:"valid",value:e.data}}}GI.create=t=>new GI({typeName:bt.ZodNaN,...kt(t)});const ZRe=Symbol("zod_brand");class $J extends Ut{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class qC extends Ut{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?xt:i.status==="dirty"?(n.dirty(),MJ(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?xt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new qC({in:e,out:n,typeName:bt.ZodPipeline})}}class qI extends Ut{_parse(e){const n=this._def.innerType._parse(e);return p_(n)&&(n.value=Object.freeze(n.value)),n}}qI.create=(t,e)=>new qI({innerType:t,typeName:bt.ZodReadonly,...kt(e)});const BJ=(t,e={},n)=>t?p0.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):p0.create(),XRe={object:ar.lazycreate};var bt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(bt||(bt={}));const ePe=(t,e={message:`Input not instance of ${t.name}`})=>BJ(n=>n instanceof t,e),FJ=yc.create,jJ=of.create,tPe=GI.create,nPe=af.create,zJ=g_.create,rPe=Ng.create,sPe=jI.create,iPe=m_.create,oPe=y_.create,aPe=p0.create,cPe=eg.create,lPe=ed.create,uPe=zI.create,dPe=Cc.create,hPe=ar.create,fPe=ar.strictCreate,pPe=w_.create,gPe=YN.create,mPe=b_.create,yPe=Ml.create,wPe=v_.create,bPe=WI.create,vPe=Tg.create,EPe=$y.create,_Pe=E_.create,CPe=__.create,APe=cf.create,SPe=C_.create,IPe=g0.create,lF=Nc.create,xPe=$u.create,NPe=Rg.create,TPe=Nc.createWithPreprocess,RPe=qC.create,PPe=()=>FJ().optional(),OPe=()=>jJ().optional(),kPe=()=>zJ().optional(),DPe={string:t=>yc.create({...t,coerce:!0}),number:t=>of.create({...t,coerce:!0}),boolean:t=>g_.create({...t,coerce:!0}),bigint:t=>af.create({...t,coerce:!0}),date:t=>Ng.create({...t,coerce:!0})},LPe=xt;var E=Object.freeze({__proto__:null,defaultErrorMap:f_,setErrorMap:BRe,getErrorMap:$I,makeIssue:BI,EMPTY_PATH:FRe,addIssueToContext:qe,ParseStatus:ei,INVALID:xt,DIRTY:MJ,OK:_i,isAborted:FD,isDirty:jD,isValid:p_,isAsync:FI,get util(){return cn},get objectUtil(){return BD},ZodParsedType:Ue,getParsedType:zd,ZodType:Ut,ZodString:yc,ZodNumber:of,ZodBigInt:af,ZodBoolean:g_,ZodDate:Ng,ZodSymbol:jI,ZodUndefined:m_,ZodNull:y_,ZodAny:p0,ZodUnknown:eg,ZodNever:ed,ZodVoid:zI,ZodArray:Cc,ZodObject:ar,ZodUnion:w_,ZodDiscriminatedUnion:YN,ZodIntersection:b_,ZodTuple:Ml,ZodRecord:v_,ZodMap:WI,ZodSet:Tg,ZodFunction:$y,ZodLazy:E_,ZodLiteral:__,ZodEnum:cf,ZodNativeEnum:C_,ZodPromise:g0,ZodEffects:Nc,ZodTransformer:Nc,ZodOptional:$u,ZodNullable:Rg,ZodDefault:A_,ZodCatch:HI,ZodNaN:GI,BRAND:ZRe,ZodBranded:$J,ZodPipeline:qC,ZodReadonly:qI,custom:BJ,Schema:Ut,ZodSchema:Ut,late:XRe,get ZodFirstPartyTypeKind(){return bt},coerce:DPe,any:aPe,array:dPe,bigint:nPe,boolean:zJ,date:rPe,discriminatedUnion:gPe,effect:lF,enum:APe,function:EPe,instanceof:ePe,intersection:mPe,lazy:_Pe,literal:CPe,map:bPe,nan:tPe,nativeEnum:SPe,never:lPe,null:oPe,nullable:NPe,number:jJ,object:hPe,oboolean:kPe,onumber:OPe,optional:xPe,ostring:PPe,pipeline:RPe,preprocess:TPe,promise:IPe,record:wPe,set:vPe,strictObject:fPe,string:FJ,symbol:sPe,transformer:lF,tuple:yPe,undefined:iPe,union:pPe,unknown:cPe,void:uPe,NEVER:LPe,ZodIssueCode:Se,quotelessJson:$Re,ZodError:_c});const pr=E.object({message:E.string()});function He(t){return E.literal(Ke[t])}E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const MPe=E.object({chainId:E.string().or(E.number())}),UPe=E.object({email:E.string().email()}),$Pe=E.object({otp:E.string()}),BPe=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number()))}),FPe=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string())}),jPe=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),zPe=E.object({email:E.string().email()}),WPe=E.object({otp:E.string()}),HPe=E.object({otp:E.string()}),GPe=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),qPe=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),VPe=E.object({type:E.string()}),KPe=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),YPe=E.object({url:E.string()}),QPe=E.object({userName:E.string()}),JPe=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([Ps.ACCOUNT_TYPES.EOA,Ps.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string())}),ZPe=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),XPe=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([Ps.ACCOUNT_TYPES.EOA,Ps.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string())}),eOe=E.object({uri:E.string()}),tOe=E.object({isConnected:E.boolean()}),nOe=E.object({chainId:E.string().or(E.number())}),rOe=E.object({chainId:E.string().or(E.number())}),sOe=E.object({newEmail:E.string().email()}),iOe=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const oOe=E.object({version:E.string().optional()}),aOe=E.object({type:E.string(),address:E.string()}),cOe=E.any(),lOe=E.object({method:E.literal("eth_accounts")}),uOe=E.object({method:E.literal("eth_blockNumber")}),dOe=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),hOe=E.object({method:E.literal("eth_chainId")}),fOe=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),pOe=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),gOe=E.object({method:E.literal("eth_gasPrice")}),mOe=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),yOe=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),wOe=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),bOe=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),vOe=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),EOe=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),_Oe=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),COe=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),AOe=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),SOe=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),IOe=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),xOe=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),NOe=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),TOe=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),ROe=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),POe=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),OOe=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),kOe=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),DOe=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),LOe=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),MOe=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),UOe=E.object({method:E.literal("eth_newBlockFilter")}),$Oe=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),BOe=E.object({method:E.literal("eth_newPendingTransactionFilter")}),FOe=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),jOe=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),zOe=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),uF=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),WOe=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),HOe=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),GOe=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),qOe=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),VOe=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),KOe=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),YOe=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),QOe=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),JOe=E.object({method:E.literal("wallet_getCapabilities")}),ZOe=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),XOe=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),e2e=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),dF=E.object({token:E.string()}),Ge=E.object({id:E.string().optional()}),Wb={appEvent:Ge.extend({type:He("APP_SWITCH_NETWORK"),payload:MPe}).or(Ge.extend({type:He("APP_CONNECT_EMAIL"),payload:UPe})).or(Ge.extend({type:He("APP_CONNECT_DEVICE")})).or(Ge.extend({type:He("APP_CONNECT_OTP"),payload:$Pe})).or(Ge.extend({type:He("APP_CONNECT_SOCIAL"),payload:BPe})).or(Ge.extend({type:He("APP_GET_FARCASTER_URI")})).or(Ge.extend({type:He("APP_CONNECT_FARCASTER")})).or(Ge.extend({type:He("APP_GET_USER"),payload:E.optional(FPe)})).or(Ge.extend({type:He("APP_GET_SOCIAL_REDIRECT_URI"),payload:jPe})).or(Ge.extend({type:He("APP_SIGN_OUT")})).or(Ge.extend({type:He("APP_IS_CONNECTED"),payload:E.optional(dF)})).or(Ge.extend({type:He("APP_GET_CHAIN_ID")})).or(Ge.extend({type:He("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Ge.extend({type:He("APP_INIT_SMART_ACCOUNT")})).or(Ge.extend({type:He("APP_SET_PREFERRED_ACCOUNT"),payload:VPe})).or(Ge.extend({type:He("APP_RPC_REQUEST"),payload:uF.or(e2e).or(lOe).or(uOe).or(dOe).or(hOe).or(fOe).or(pOe).or(gOe).or(mOe).or(yOe).or(wOe).or(bOe).or(vOe).or(EOe).or(_Oe).or(COe).or(AOe).or(SOe).or(IOe).or(xOe).or(NOe).or(TOe).or(ROe).or(POe).or(OOe).or(kOe).or(DOe).or(LOe).or(MOe).or(UOe).or($Oe).or(BOe).or(FOe).or(jOe).or(zOe).or(uF).or(WOe).or(HOe).or(GOe).or(qOe).or(VOe).or(KOe).or(QOe).or(YOe).or(JOe).or(ZOe).or(XOe)})).or(Ge.extend({type:He("APP_UPDATE_EMAIL"),payload:zPe})).or(Ge.extend({type:He("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:WPe})).or(Ge.extend({type:He("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:HPe})).or(Ge.extend({type:He("APP_SYNC_THEME"),payload:GPe})).or(Ge.extend({type:He("APP_SYNC_DAPP_DATA"),payload:qPe})).or(Ge.extend({type:He("APP_RELOAD")})),frameEvent:Ge.extend({type:He("FRAME_SWITCH_NETWORK_ERROR"),payload:pr}).or(Ge.extend({type:He("FRAME_SWITCH_NETWORK_SUCCESS"),payload:rOe})).or(Ge.extend({type:He("FRAME_CONNECT_EMAIL_SUCCESS"),payload:KPe})).or(Ge.extend({type:He("FRAME_CONNECT_EMAIL_ERROR"),payload:pr})).or(Ge.extend({type:He("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:YPe})).or(Ge.extend({type:He("FRAME_GET_FARCASTER_URI_ERROR"),payload:pr})).or(Ge.extend({type:He("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:QPe})).or(Ge.extend({type:He("FRAME_CONNECT_FARCASTER_ERROR"),payload:pr})).or(Ge.extend({type:He("FRAME_CONNECT_OTP_ERROR"),payload:pr})).or(Ge.extend({type:He("FRAME_CONNECT_OTP_SUCCESS")})).or(Ge.extend({type:He("FRAME_CONNECT_DEVICE_ERROR"),payload:pr})).or(Ge.extend({type:He("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Ge.extend({type:He("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:JPe})).or(Ge.extend({type:He("FRAME_CONNECT_SOCIAL_ERROR"),payload:pr})).or(Ge.extend({type:He("FRAME_GET_USER_ERROR"),payload:pr})).or(Ge.extend({type:He("FRAME_GET_USER_SUCCESS"),payload:XPe})).or(Ge.extend({type:He("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:pr})).or(Ge.extend({type:He("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:eOe})).or(Ge.extend({type:He("FRAME_SIGN_OUT_ERROR"),payload:pr})).or(Ge.extend({type:He("FRAME_SIGN_OUT_SUCCESS")})).or(Ge.extend({type:He("FRAME_IS_CONNECTED_ERROR"),payload:pr})).or(Ge.extend({type:He("FRAME_IS_CONNECTED_SUCCESS"),payload:tOe})).or(Ge.extend({type:He("FRAME_GET_CHAIN_ID_ERROR"),payload:pr})).or(Ge.extend({type:He("FRAME_GET_CHAIN_ID_SUCCESS"),payload:nOe})).or(Ge.extend({type:He("FRAME_RPC_REQUEST_ERROR"),payload:pr})).or(Ge.extend({type:He("FRAME_RPC_REQUEST_SUCCESS"),payload:cOe})).or(Ge.extend({type:He("FRAME_SESSION_UPDATE"),payload:dF})).or(Ge.extend({type:He("FRAME_UPDATE_EMAIL_ERROR"),payload:pr})).or(Ge.extend({type:He("FRAME_UPDATE_EMAIL_SUCCESS"),payload:ZPe})).or(Ge.extend({type:He("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:pr})).or(Ge.extend({type:He("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Ge.extend({type:He("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:pr})).or(Ge.extend({type:He("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:sOe})).or(Ge.extend({type:He("FRAME_SYNC_THEME_ERROR"),payload:pr})).or(Ge.extend({type:He("FRAME_SYNC_THEME_SUCCESS")})).or(Ge.extend({type:He("FRAME_SYNC_DAPP_DATA_ERROR"),payload:pr})).or(Ge.extend({type:He("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Ge.extend({type:He("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:iOe})).or(Ge.extend({type:He("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:pr})).or(Ge.extend({type:He("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:pr})).or(Ge.extend({type:He("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:aOe})).or(Ge.extend({type:He("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:pr})).or(Ge.extend({type:He("FRAME_READY"),payload:oOe})).or(Ge.extend({type:He("FRAME_RELOAD_ERROR"),payload:pr})).or(Ge.extend({type:He("FRAME_RELOAD_SUCCESS")}))};function FP(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}let t2e=class{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=ze.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!FP(Ke.FRAME_EVENT_KEY,l))return;const u=Wb.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}ko.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{ko.isClient&&window.addEventListener("message",({data:o})=>{if(!FP(Ke.FRAME_EVENT_KEY,o))return;const a=Wb.frameEvent.parse(o);i(a)})},onAppEvent:i=>{ko.isClient&&window.addEventListener("message",({data:o})=>{if(!FP(Ke.APP_EVENT_KEY,o))return;const a=Wb.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(ko.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");Wb.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(ko.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Wb.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),ko.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${F1e}?projectId=${e}&chainId=${r}&version=${z1e}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}},n2e=class{constructor(e){var i;const n=sm({level:j1e}),{logger:r,chunkLoggerController:s}=FN({opts:n});this.logger=Ls(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}},r2e=class{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new n2e(e)),this.abortController=i,this.w3mFrame=new t2e({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ke.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!_s.get(Ke.EMAIL_LOGIN_USED_KEY)}getEmail(){return _s.get(Ke.EMAIL)}getUsername(){return _s.get(Ke.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ke.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{ko.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Ke.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Ke.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Ke.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Ke.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Ke.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Ke.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Ke.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Ke.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Ke.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Ke.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Ke.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Ke.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Ke.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:Ke.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ke.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:Ke.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ke.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Ke.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:Ke.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Ke.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(Ps.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:Ke.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ke.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ke.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ke.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ke.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ke.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ke.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ke.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Ps.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ke.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===Ke.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{Ps.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ke.APP_SYNC_DAPP_DATA,Ke.APP_SYNC_THEME,Ke.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ke.APP_CONNECT_EMAIL,Ke.APP_CONNECT_DEVICE,Ke.APP_CONNECT_OTP,Ke.APP_CONNECT_SOCIAL,Ke.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},3e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const y=e;this.openRpcRequests=[...this.openRpcRequests,{...y.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(y,m){var w,v,A;y.id===u&&((v=m==null?void 0:(w=m.logger).info)==null||v.call(w,{framEvent:y,id:u},"Received frame response"),y.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&c(y.payload),c(void 0)):y.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&l(new Error(((A=y.payload)==null?void 0:A.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,y=>h(y,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){_s.set(Ke.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){_s.set(Ke.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&_s.set(Ke.EMAIL,e),_s.set(Ke.EMAIL_LOGIN_USED_KEY,"true"),_s.delete(Ke.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){_s.delete(Ke.EMAIL_LOGIN_USED_KEY),_s.delete(Ke.EMAIL),_s.delete(Ke.LAST_USED_CHAIN_KEY),_s.delete(Ke.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&_s.set(Ke.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=_s.get(Ke.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){_s.set(Ke.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}},s2e=class iS{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return iS.instance||(iS.instance=new r2e({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),iS.instance}};function i2e(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Xr(t,...e){try{return i2e(t(...e))}catch(n){return Promise.reject(n)}}function o2e(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function a2e(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function oS(t){if(o2e(t))return String(t);if(a2e(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return oS(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const WD="base64:";function c2e(t){return typeof t=="string"?t:WD+d2e(t)}function l2e(t){return typeof t!="string"||!t.startsWith(WD)?t:u2e(t.slice(WD.length))}function u2e(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function d2e(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Ui(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function h2e(...t){return Ui(t.join(":"))}function cA(t){return t=Ui(t),t?t+":":""}function f2e(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function p2e(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const g2e="memory",m2e=()=>{const t=new Map;return{name:g2e,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function y2e(t={}){const e={mounts:{"":t.driver||m2e()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=Ui(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await hF(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",y=Ui(g?p:p.key),m=g?void 0:p.value,w=g||!p.options?u:{...u,...p.options},v=n(y);f(v).items.push({key:y,value:m,relativeKey:v.relativeKey,options:w})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=Ui(l);const{relativeKey:d,driver:h}=n(l);return Xr(h.hasItem,d,u)},getItem(l,u={}){l=Ui(l);const{relativeKey:d,driver:h}=n(l);return Xr(h.getItem,d,u).then(f=>tA(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?Xr(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:h2e(d.base,f.key),value:tA(f.value)}))):Promise.all(d.items.map(h=>Xr(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:tA(f)})))))},getItemRaw(l,u={}){l=Ui(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?Xr(h.getItemRaw,d,u):Xr(h.getItem,d,u).then(f=>l2e(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Ui(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await Xr(f.setItem,h,oS(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return Xr(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:oS(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>Xr(d.driver.setItem,h.relativeKey,oS(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Ui(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await Xr(f.setItemRaw,h,u,d);else if(f.setItem)await Xr(f.setItem,h,c2e(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Ui(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await Xr(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await Xr(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Ui(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await Xr(h.getMeta,d,u)),!u.nativeOnly){const p=await Xr(h.getItem,d+"$",u).then(g=>tA(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var y;l=cA(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const m of d){(y=m.driver.flags)!=null&&y.maxDepth||(p=!1);const w=await Xr(m.driver.getKeys,m.relativeBase,u);for(const v of w){const A=m.mountpoint+Ui(v);h.some(C=>A.startsWith(C))||f.push(A)}h=[m.mountpoint,...h.filter(v=>!v.startsWith(m.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(m=>(!g||f2e(m,u.maxDepth))&&p2e(m,l))},async clear(l,u={}){l=cA(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return Xr(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>fF(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=cA(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(hF(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=cA(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await fF(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Ui(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Ui(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function hF(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function fF(t){typeof t.dispose=="function"&&await Xr(t.dispose)}const w2e="idb-keyval";var b2e=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=jQ(t.dbName,t.storeName)),{name:w2e,options:t,async hasItem(s){return!(typeof await m4(n(s),r)>"u")},async getItem(s){return await m4(n(s),r)??null},setItem(s,i){return WAe(n(s),i,r)},removeItem(s){return HAe(n(s),r)},getKeys(){return VAe(r)},clear(){return GAe(r)}}};const v2e="WALLET_CONNECT_V2_INDEXED_DB",E2e="keyvaluestorage";let _2e=class{constructor(){this.indexedDb=y2e({driver:b2e({dbName:v2e,storeName:E2e})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,Xu(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var jP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},aS={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof jP<"u"&&jP.localStorage?aS.exports=jP.localStorage:typeof window<"u"&&window.localStorage?aS.exports=window.localStorage:aS.exports=new e})();function C2e(t){var e;return[t[0],Ig((e=t[1])!=null?e:"")]}let A2e=class{constructor(){this.localStorage=aS.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(C2e)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return Ig(n)}async setItem(e,n){this.localStorage.setItem(e,Xu(n))}async removeItem(e){this.localStorage.removeItem(e)}};const S2e="wc_storage_version",pF=1,I2e=async(t,e,n)=>{const r=S2e,s=await e.getItem(r);if(s&&s>=pF){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,pF),n(e),x2e(t,o)},x2e=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let N2e=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new A2e;this.storage=e;try{const n=new _2e;I2e(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var T2e=Object.defineProperty,R2e=(t,e,n)=>e in t?T2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gF=(t,e,n)=>R2e(t,typeof e!="symbol"?e+"":e,n);let P2e=class extends tm{constructor(e){super(),this.opts=e,gF(this,"protocol","wc"),gF(this,"version",2)}};var O2e=Object.defineProperty,k2e=(t,e,n)=>e in t?O2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,D2e=(t,e,n)=>k2e(t,e+"",n);let L2e=class extends tm{constructor(e,n){super(),this.core=e,this.logger=n,D2e(this,"records",new Map)}},M2e=class{constructor(e,n){this.logger=e,this.core=n}},U2e=class extends tm{constructor(e,n){super(),this.relayer=e,this.logger=n}},$2e=class extends tm{constructor(e){super()}},B2e=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},F2e=class extends tm{constructor(e,n){super(),this.relayer=e,this.logger=n}},j2e=class extends tm{constructor(e,n){super(),this.core=e,this.logger=n}},z2e=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},W2e=class{constructor(e,n){this.projectId=e,this.logger=n}},H2e=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var G2e=Object.defineProperty,q2e=(t,e,n)=>e in t?G2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mF=(t,e,n)=>q2e(t,typeof e!="symbol"?e+"":e,n);let V2e=class{constructor(e){this.opts=e,mF(this,"protocol","wc"),mF(this,"version",2)}},K2e=class{constructor(e){this.client=e}};function S_(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function yF(t){return S_(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const WJ="2.23.2";let Hb={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${WJ}`};class Pg extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof Pg?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Pg&&n.cause.docsPath||n.docsPath,i=(a=Hb.getDocsUrl)==null?void 0:a.call(Hb,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Hb.version?[`Version: ${Hb.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=WJ}walk(e){return HJ(this,e)}}function HJ(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?HJ(t.cause,e):e?null:t}class GJ extends Pg{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function rb(t,{dir:e,size:n=32}={}){return typeof t=="string"?Y2e(t,{dir:e,size:n}):Q2e(t,{dir:e,size:n})}function Y2e(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new GJ({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function Q2e(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new GJ({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class J2e extends Pg{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class Z2e extends Pg{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function sb(t,{size:e}){if(yF(t)>e)throw new Z2e({givenSize:yF(t),maxSize:e})}function HD(t,e={}){const{signed:n}=e;e.size&&sb(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function X2e(t,e={}){return Number(HD(t,e))}const eke=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function GD(t,e={}){return typeof t=="number"||typeof t=="bigint"?VJ(t,e):typeof t=="string"?rke(t,e):typeof t=="boolean"?tke(t,e):qJ(t,e)}function tke(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(sb(n,{size:e.size}),rb(n,{size:e.size})):n}function qJ(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=eke[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(sb(r,{size:e.size}),rb(r,{dir:"right",size:e.size})):r}function VJ(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new J2e({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?rb(a,{size:r}):a}const nke=new TextEncoder;function rke(t,e={}){const n=nke.encode(t);return qJ(n,e)}const ske=new TextEncoder;function ike(t,e={}){return typeof t=="number"||typeof t=="bigint"?ake(t,e):typeof t=="boolean"?oke(t,e):S_(t)?KJ(t,e):YJ(t,e)}function oke(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(sb(n,{size:e.size}),rb(n,{size:e.size})):n}const Xl={zero:48,nine:57,A:65,F:70,a:97,f:102};function wF(t){if(t>=Xl.zero&&t<=Xl.nine)return t-Xl.zero;if(t>=Xl.A&&t<=Xl.F)return t-(Xl.A-10);if(t>=Xl.a&&t<=Xl.f)return t-(Xl.a-10)}function KJ(t,e={}){let n=t;e.size&&(sb(n,{size:e.size}),n=rb(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=wF(r.charCodeAt(a++)),l=wF(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new Pg(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function ake(t,e){const n=VJ(t,e);return KJ(n)}function YJ(t,e={}){const n=ske.encode(t);return typeof e.size=="number"?(sb(n,{size:e.size}),rb(n,{dir:"right",size:e.size})):n}function VI(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function cke(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function QN(t,...e){if(!cke(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function jqe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");VI(t.outputLen),VI(t.blockLen)}function bF(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function lke(t,e){QN(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const lA=BigInt(2**32-1),vF=BigInt(32);function uke(t,e=!1){return e?{h:Number(t&lA),l:Number(t>>vF&lA)}:{h:Number(t>>vF&lA)|0,l:Number(t&lA)|0}}function dke(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=uke(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const hke=(t,e,n)=>t<<n|e>>>32-n,fke=(t,e,n)=>e<<n|t>>>32-n,pke=(t,e,n)=>e<<n-32|t>>>64-n,gke=(t,e,n)=>t<<n-32|e>>>64-n,Nm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function mke(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function zqe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Wqe(t,e){return t<<32-e|t>>>e}const EF=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function yke(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function _F(t){for(let e=0;e<t.length;e++)t[e]=yke(t[e])}function wke(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function QJ(t){return typeof t=="string"&&(t=wke(t)),QN(t),t}function Hqe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];QN(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let bke=class{clone(){return this._cloneInto()}};function vke(t){const e=r=>t().update(QJ(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function qqe(t=32){if(Nm&&typeof Nm.getRandomValues=="function")return Nm.getRandomValues(new Uint8Array(t));if(Nm&&typeof Nm.randomBytes=="function")return Nm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const JJ=[],ZJ=[],XJ=[],Eke=BigInt(0),Gb=BigInt(1),_ke=BigInt(2),Cke=BigInt(7),Ake=BigInt(256),Ske=BigInt(113);for(let t=0,e=Gb,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],JJ.push(2*(5*r+n)),ZJ.push((t+1)*(t+2)/2%64);let s=Eke;for(let i=0;i<7;i++)e=(e<<Gb^(e>>Cke)*Ske)%Ake,e&_ke&&(s^=Gb<<(Gb<<BigInt(i))-Gb);XJ.push(s)}const[Ike,xke]=dke(XJ,!0),CF=(t,e,n)=>n>32?pke(t,e,n):hke(t,e,n),AF=(t,e,n)=>n>32?gke(t,e,n):fke(t,e,n);function Nke(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=CF(l,u,1)^n[a],h=AF(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=ZJ[o],c=CF(s,i,a),l=AF(s,i,a),u=JJ[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Ike[r],t[1]^=xke[r]}n.fill(0)}let Tke=class eZ extends bke{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,VI(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=mke(this.state)}keccak(){EF||_F(this.state32),Nke(this.state32,this.rounds),EF||_F(this.state32),this.posOut=0,this.pos=0}update(e){bF(this);const{blockLen:n,state:r}=this;e=QJ(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){bF(this,!1),QN(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return VI(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(lke(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new eZ(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Rke=(t,e,n)=>vke(()=>new Tke(e,t,n)),Pke=Rke(1,136,256/8);function tZ(t,e){const n=e||"hex",r=Pke(S_(t,{strict:!1})?ike(t):t);return n==="bytes"?r:GD(r)}class Oke extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const zP=new Oke(8192);function kke(t,e){if(zP.has(`${t}.${e}`))return zP.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=tZ(YJ(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return zP.set(`${t}.${e}`,i),i}function Dke(t){const e=tZ(`0x${t.substring(4)}`).substring(26);return kke(`0x${e}`)}async function Lke({hash:t,signature:e}){const n=S_(t)?t:GD(t),{secp256k1:r}=await Ks(async()=>{const{secp256k1:o}=await import("./secp256k1-BuOx6viE.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=SF(f);return new r.Signature(HD(l),HD(u)).addRecoveryBit(p)}const o=S_(e)?e:GD(e),a=X2e(`0x${o.slice(130)}`),c=SF(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function SF(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Mke({hash:t,signature:e}){return Dke(await Lke({hash:t,signature:e}))}var Uke={};const $ke=":";function By(t){const[e,n]=t.split($ke);return{namespace:e,reference:n}}function nZ(t,e){return t.includes(":")?[t]:e.chains||[]}var Bke=Object.defineProperty,Fke=Object.defineProperties,jke=Object.getOwnPropertyDescriptors,IF=Object.getOwnPropertySymbols,zke=Object.prototype.hasOwnProperty,Wke=Object.prototype.propertyIsEnumerable,xF=(t,e,n)=>e in t?Bke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,NF=(t,e)=>{for(var n in e||(e={}))zke.call(e,n)&&xF(t,n,e[n]);if(IF)for(var n of IF(e))Wke.call(e,n)&&xF(t,n,e[n]);return t},Hke=(t,e)=>Fke(t,jke(e));const Gke="ReactNative",Lo={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},qke="js";function KI(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function bf(){return!xg()&&!!XM()&&navigator.product===Gke}function Vke(){return bf()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function Kke(){return bf()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function ib(){return!KI()&&!!XM()&&!!xg()}function VC(){return bf()?Lo.reactNative:KI()?Lo.node:ib()?Lo.browser:Lo.unknown}function TF(){var t;try{return bf()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function Yke(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function Qke(t){var e,n;const r=rZ();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),Hke(NF(NF({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function rZ(){return EJ()||{name:"",description:"",url:"",icons:[""]}}function Jke(){if(VC()===Lo.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=ENe();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Zke(){var t;const e=VC();return e===Lo.browser?[e,((t=vJ())==null?void 0:t.host)||"unknown"].join(":"):e}function sZ(t,e,n){const r=Jke(),s=Zke();return[[t,e].join("-"),[qke,n].join("-"),r,s].join("/")}function Xke({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=sZ(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=Yke(l[1]||"",d);return l[0]+"?"+h}function mp(t,e){return t.filter(n=>e.includes(n)).length===t.length}function qD(t){return Object.fromEntries(t.entries())}function VD(t){return new Map(Object.entries(t))}function zf(t=xe.FIVE_MINUTES,e){const n=xe.toMiliseconds(t||xe.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function Ch(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function iZ(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function eDe(t){return iZ("topic",t)}function tDe(t){return iZ("id",t)}function oZ(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function Ur(t,e){return xe.fromMiliseconds(Date.now()+xe.toMiliseconds(t))}function $d(t){return Date.now()>=xe.toMiliseconds(t)}function bn(t,e){return`${t}${e?`:${e}`:""}`}function Nl(t=[],e=[]){return[...new Set([...t,...e])]}async function nDe({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=rDe(i,t,e),a=VC();if(a===Lo.browser){if(!((r=xg())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}sDe(o)}else a===Lo.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function rDe(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${cDe(r,!0)}`}else s=`${s}/wc?${r}`;return s}function sDe(t){let e="_self";aDe()?e="_top":(oDe()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function iDe(t,e){let n="";try{if(ib()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function RF(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function PF(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function rU(){return typeof process<"u"&&Uke.IS_VITEST==="true"}function oDe(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function aDe(){try{return window.self!==window.top}catch{return!1}}function cDe(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function aZ(t){return Buffer.from(t,"base64").toString("utf-8")}function lDe(t){return new Promise(e=>setTimeout(e,t))}function I_(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function uDe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function KC(t,...e){if(!uDe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function sU(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");I_(t.outputLen),I_(t.blockLen)}function m0(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function cZ(t,e){KC(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const uA=BigInt(2**32-1),OF=BigInt(32);function dDe(t,e=!1){return e?{h:Number(t&uA),l:Number(t>>OF&uA)}:{h:Number(t>>OF&uA)|0,l:Number(t&uA)|0}}function hDe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=dDe(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const fDe=(t,e,n)=>t<<n|e>>>32-n,pDe=(t,e,n)=>e<<n|t>>>32-n,gDe=(t,e,n)=>e<<n-32|t>>>64-n,mDe=(t,e,n)=>t<<n-32|e>>>64-n,Tm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function yDe(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function WP(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Bc(t,e){return t<<32-e|t>>>e}const kF=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function wDe(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function DF(t){for(let e=0;e<t.length;e++)t[e]=wDe(t[e])}function bDe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function y0(t){return typeof t=="string"&&(t=bDe(t)),KC(t),t}function vDe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];KC(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let iU=class{clone(){return this._cloneInto()}};function lZ(t){const e=r=>t().update(y0(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function ob(t=32){if(Tm&&typeof Tm.getRandomValues=="function")return Tm.getRandomValues(new Uint8Array(t));if(Tm&&typeof Tm.randomBytes=="function")return Tm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const uZ=[],dZ=[],hZ=[],EDe=BigInt(0),qb=BigInt(1),_De=BigInt(2),CDe=BigInt(7),ADe=BigInt(256),SDe=BigInt(113);for(let t=0,e=qb,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],uZ.push(2*(5*r+n)),dZ.push((t+1)*(t+2)/2%64);let s=EDe;for(let i=0;i<7;i++)e=(e<<qb^(e>>CDe)*SDe)%ADe,e&_De&&(s^=qb<<(qb<<BigInt(i))-qb);hZ.push(s)}const[IDe,xDe]=hDe(hZ,!0),LF=(t,e,n)=>n>32?gDe(t,e,n):fDe(t,e,n),MF=(t,e,n)=>n>32?mDe(t,e,n):pDe(t,e,n);function NDe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=LF(l,u,1)^n[a],h=MF(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=dZ[o],c=LF(s,i,a),l=MF(s,i,a),u=uZ[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=IDe[r],t[1]^=xDe[r]}n.fill(0)}let TDe=class fZ extends iU{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,I_(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=yDe(this.state)}keccak(){kF||DF(this.state32),NDe(this.state32,this.rounds),kF||DF(this.state32),this.posOut=0,this.pos=0}update(e){m0(this);const{blockLen:n,state:r}=this;e=y0(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){m0(this,!1),KC(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return I_(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(cZ(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new fZ(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const RDe=(t,e,n)=>lZ(()=>new TDe(e,t,n)),PDe=RDe(1,136,256/8),ODe="https://rpc.walletconnect.org/v1";function pZ(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(PDe(n)).toString("hex")}async function kDe(t,e,n,r,s,i){switch(n.t){case"eip191":return await DDe(t,e,n.s);case"eip1271":return await LDe(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function DDe(t,e,n){return(await Mke({hash:pZ(e),signature:n})).toLowerCase()===t.toLowerCase()}async function LDe(t,e,n,r,s,i){const o=By(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=pZ(e).substring(2),h=a+d+c+l+u,f=await fetch(`${i||ODe}/?chainId=${r}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:MDe(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function MDe(){return Date.now()+Math.floor(Math.random()*1e3)}function UDe(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return _J.encode(i)}var $De=Object.defineProperty,BDe=Object.defineProperties,FDe=Object.getOwnPropertyDescriptors,UF=Object.getOwnPropertySymbols,jDe=Object.prototype.hasOwnProperty,zDe=Object.prototype.propertyIsEnumerable,$F=(t,e,n)=>e in t?$De(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,WDe=(t,e)=>{for(var n in e||(e={}))jDe.call(e,n)&&$F(t,n,e[n]);if(UF)for(var n of UF(e))zDe.call(e,n)&&$F(t,n,e[n]);return t},HDe=(t,e)=>BDe(t,FDe(e));const GDe="did:pkh:",oU=t=>t==null?void 0:t.split(":"),qDe=t=>{const e=t&&oU(t);if(e)return t.includes(GDe)?e[3]:e[1]},KD=t=>{const e=t&&oU(t);if(e)return e[2]+":"+e[3]},YI=t=>{const e=t&&oU(t);if(e)return e.pop()};async function BF(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=gZ(s,s.iss),o=YI(s.iss);return await kDe(o,i,r,KD(s.iss),n)}const gZ=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=YI(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${qDe(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=cS(t.resources);if(p){const g=x_(p);s=t3e(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function VDe(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function KDe(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Og(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function YDe(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:QDe(e,n,r)}}}function QDe(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function mZ(t){return Og(t),`urn:recap:${VDe(t).replace(/=/g,"")}`}function x_(t){const e=KDe(t.replace("urn:recap:",""));return Og(e),e}function JDe(t,e,n){const r=YDe(t,e,n);return mZ(r)}function ZDe(t){return t&&t.includes("urn:recap:")}function XDe(t,e){const n=x_(t),r=x_(e),s=e3e(n,r);return mZ(s)}function e3e(t,e){Og(t),Og(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=HDe(WDe({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function t3e(t="",e){Og(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function FF(t){var e;const n=x_(t);Og(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function jF(t){const e=x_(t);Og(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function cS(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return ZDe(e)?e:void 0}function HP(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function yZ(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Oo(t,...e){if(!yZ(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function zF(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function n3e(t,e){Oo(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function WF(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const Hh=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),r3e=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),s3e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!s3e)throw new Error("Non little-endian hardware is not supported");function i3e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function YD(t){if(typeof t=="string")t=i3e(t);else if(yZ(t))t=QD(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function o3e(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function a3e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const c3e=(t,e)=>{function n(r,...s){if(Oo(r),t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Oo(l):Oo(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Oo(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Oo(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Oo(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Oo(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function HF(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!l3e(e))throw new Error("invalid output, must be aligned");return e}function GF(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function l3e(t){return t.byteOffset%4===0}function QD(t){return Uint8Array.from(t)}function w0(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const wZ=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),u3e=wZ("expand 16-byte k"),d3e=wZ("expand 32-byte k"),h3e=Hh(u3e),f3e=Hh(d3e);function rn(t,e){return t<<e|t>>>32-e}function JD(t){return t.byteOffset%4===0}const dA=64,p3e=16,bZ=2**32-1,qF=new Uint32Array;function g3e(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(dA),u=Hh(l),d=JD(s)&&JD(i),h=d?Hh(s):qF,f=d?Hh(i):qF;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=bZ)throw new Error("arx: counter overflow");const g=Math.min(dA,c-p);if(d&&g===dA){const y=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let m=0,w;m<p3e;m++)w=y+m,f[w]=h[w]^u[m];p+=dA;continue}for(let y=0,m;y<g;y++)m=p+y,i[m]=s[m]^l[y];p+=g}}function m3e(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=o3e({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return HP(s),HP(o),WF(i),WF(n),(a,c,l,u,d=0)=>{Oo(a),Oo(c),Oo(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),Oo(u),HP(d),d<0||d>=bZ)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,y;if(p===32)f.push(g=QD(a)),y=f3e;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),y=h3e,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);JD(c)||f.push(c=QD(c));const m=Hh(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(y,m,Hh(c.subarray(0,16)),m),c=c.subarray(16)}const w=16-s;if(w!==c.length)throw new Error(`arx: nonce must be ${w} or 16 bytes`);if(w!==12){const A=new Uint8Array(12);A.set(c,i?0:12-c.length),c=A,f.push(c)}const v=Hh(c);return g3e(t,y,m,v,l,u,d,o),w0(...f),u}}const ys=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class y3e{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=YD(e),Oo(e,32);const n=ys(e,0),r=ys(e,2),s=ys(e,4),i=ys(e,6),o=ys(e,8),a=ys(e,10),c=ys(e,12),l=ys(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=ys(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],y=o[9],m=ys(e,n+0),w=ys(e,n+2),v=ys(e,n+4),A=ys(e,n+6),C=ys(e,n+8),S=ys(e,n+10),x=ys(e,n+12),T=ys(e,n+14);let I=i[0]+(m&8191),k=i[1]+((m>>>13|w<<3)&8191),O=i[2]+((w>>>10|v<<6)&8191),B=i[3]+((v>>>7|A<<9)&8191),G=i[4]+((A>>>4|C<<12)&8191),W=i[5]+(C>>>1&8191),R=i[6]+((C>>>14|S<<2)&8191),N=i[7]+((S>>>11|x<<5)&8191),M=i[8]+((x>>>8|T<<8)&8191),P=i[9]+(T>>>5|s),L=0,F=L+I*a+k*(5*y)+O*(5*g)+B*(5*p)+G*(5*f);L=F>>>13,F&=8191,F+=W*(5*h)+R*(5*d)+N*(5*u)+M*(5*l)+P*(5*c),L+=F>>>13,F&=8191;let V=L+I*c+k*a+O*(5*y)+B*(5*g)+G*(5*p);L=V>>>13,V&=8191,V+=W*(5*f)+R*(5*h)+N*(5*d)+M*(5*u)+P*(5*l),L+=V>>>13,V&=8191;let Z=L+I*l+k*c+O*a+B*(5*y)+G*(5*g);L=Z>>>13,Z&=8191,Z+=W*(5*p)+R*(5*f)+N*(5*h)+M*(5*d)+P*(5*u),L+=Z>>>13,Z&=8191;let ae=L+I*u+k*l+O*c+B*a+G*(5*y);L=ae>>>13,ae&=8191,ae+=W*(5*g)+R*(5*p)+N*(5*f)+M*(5*h)+P*(5*d),L+=ae>>>13,ae&=8191;let re=L+I*d+k*u+O*l+B*c+G*a;L=re>>>13,re&=8191,re+=W*(5*y)+R*(5*g)+N*(5*p)+M*(5*f)+P*(5*h),L+=re>>>13,re&=8191;let le=L+I*h+k*d+O*u+B*l+G*c;L=le>>>13,le&=8191,le+=W*a+R*(5*y)+N*(5*g)+M*(5*p)+P*(5*f),L+=le>>>13,le&=8191;let we=L+I*f+k*h+O*d+B*u+G*l;L=we>>>13,we&=8191,we+=W*c+R*a+N*(5*y)+M*(5*g)+P*(5*p),L+=we>>>13,we&=8191;let ee=L+I*p+k*f+O*h+B*d+G*u;L=ee>>>13,ee&=8191,ee+=W*l+R*c+N*a+M*(5*y)+P*(5*g),L+=ee>>>13,ee&=8191;let ce=L+I*g+k*p+O*f+B*h+G*d;L=ce>>>13,ce&=8191,ce+=W*u+R*l+N*c+M*a+P*(5*y),L+=ce>>>13,ce&=8191;let pe=L+I*y+k*g+O*p+B*f+G*h;L=pe>>>13,pe&=8191,pe+=W*d+R*u+N*l+M*c+P*a,L+=pe>>>13,pe&=8191,L=(L<<2)+L|0,L=L+F|0,F=L&8191,L=L>>>13,V+=L,i[0]=F,i[1]=V,i[2]=Z,i[3]=ae,i[4]=re,i[5]=le,i[6]=we,i[7]=ee,i[8]=ce,i[9]=pe}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;w0(r)}update(e){zF(this);const{buffer:n,blockLen:r}=this;e=YD(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){w0(this.h,this.r,this.buffer,this.pad)}digestInto(e){zF(this),n3e(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function w3e(t){const e=(r,s)=>t(s).update(YD(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const b3e=w3e(t=>new y3e(t));function v3e(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],y=e[6],m=e[7],w=s,v=n[0],A=n[1],C=n[2],S=o,x=a,T=c,I=l,k=u,O=d,B=h,G=f,W=p,R=g,N=y,M=m,P=w,L=v,F=A,V=C;for(let ae=0;ae<i;ae+=2)S=S+k|0,P=rn(P^S,16),W=W+P|0,k=rn(k^W,12),S=S+k|0,P=rn(P^S,8),W=W+P|0,k=rn(k^W,7),x=x+O|0,L=rn(L^x,16),R=R+L|0,O=rn(O^R,12),x=x+O|0,L=rn(L^x,8),R=R+L|0,O=rn(O^R,7),T=T+B|0,F=rn(F^T,16),N=N+F|0,B=rn(B^N,12),T=T+B|0,F=rn(F^T,8),N=N+F|0,B=rn(B^N,7),I=I+G|0,V=rn(V^I,16),M=M+V|0,G=rn(G^M,12),I=I+G|0,V=rn(V^I,8),M=M+V|0,G=rn(G^M,7),S=S+O|0,V=rn(V^S,16),N=N+V|0,O=rn(O^N,12),S=S+O|0,V=rn(V^S,8),N=N+V|0,O=rn(O^N,7),x=x+B|0,P=rn(P^x,16),M=M+P|0,B=rn(B^M,12),x=x+B|0,P=rn(P^x,8),M=M+P|0,B=rn(B^M,7),T=T+G|0,L=rn(L^T,16),W=W+L|0,G=rn(G^W,12),T=T+G|0,L=rn(L^T,8),W=W+L|0,G=rn(G^W,7),I=I+k|0,F=rn(F^I,16),R=R+F|0,k=rn(k^R,12),I=I+k|0,F=rn(F^I,8),R=R+F|0,k=rn(k^R,7);let Z=0;r[Z++]=o+S|0,r[Z++]=a+x|0,r[Z++]=c+T|0,r[Z++]=l+I|0,r[Z++]=u+k|0,r[Z++]=d+O|0,r[Z++]=h+B|0,r[Z++]=f+G|0,r[Z++]=p+W|0,r[Z++]=g+R|0,r[Z++]=y+N|0,r[Z++]=m+M|0,r[Z++]=w+P|0,r[Z++]=v+L|0,r[Z++]=A+F|0,r[Z++]=C+V|0}const E3e=m3e(v3e,{counterRight:!1,counterLength:4,allowShortKeys:!1}),_3e=new Uint8Array(16),VF=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(_3e.subarray(n))},C3e=new Uint8Array(32);function KF(t,e,n,r,s){const i=t(e,n,C3e),o=b3e.create(i);s&&VF(o,s),VF(o,r);const a=new Uint8Array(16),c=r3e(a);GF(c,0,BigInt(s?s.length:0),!0),GF(c,8,BigInt(r.length),!0),o.update(a);const l=o.digest();return w0(i,a),l}const A3e=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=HF(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=KF(t,e,n,a,r);return i.set(c,o),w0(c),i},decrypt(s,i){i=HF(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=KF(t,e,n,o,r);if(!a3e(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),w0(c),i}}),vZ=c3e({blockSize:64,nonceLength:12,tagLength:16},A3e(E3e));let EZ=class extends iU{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,sU(e);const r=y0(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return m0(this),this.iHash.update(e),this}digestInto(e){m0(this),KC(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const JN=(t,e,n)=>new EZ(t,e).update(n).digest();JN.create=(t,e)=>new EZ(t,e);function S3e(t,e,n){return sU(t),n===void 0&&(n=new Uint8Array(t.outputLen)),JN(t,y0(n),y0(e))}const GP=new Uint8Array([0]),YF=new Uint8Array;function I3e(t,e,n,r=32){if(sU(t),I_(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/t.outputLen);n===void 0&&(n=YF);const i=new Uint8Array(s*t.outputLen),o=JN.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<s;l++)GP[0]=l+1,a.update(l===0?YF:c).update(n).update(GP).digestInto(c),i.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),GP.fill(0),i.slice(0,r)}const x3e=(t,e,n,r,s)=>I3e(t,S3e(t,e,n),r,s);function N3e(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function T3e(t,e,n){return t&e^~t&n}function R3e(t,e,n){return t&e^t&n^e&n}let P3e=class extends iU{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=WP(this.buffer)}update(e){m0(this);const{view:n,buffer:r,blockLen:s}=this;e=y0(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=WP(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){m0(this),cZ(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;N3e(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=WP(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const O3e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ed=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),_d=new Uint32Array(64);class k3e extends P3e{constructor(){super(64,32,8,!1),this.A=Ed[0]|0,this.B=Ed[1]|0,this.C=Ed[2]|0,this.D=Ed[3]|0,this.E=Ed[4]|0,this.F=Ed[5]|0,this.G=Ed[6]|0,this.H=Ed[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)_d[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=_d[d-15],f=_d[d-2],p=Bc(h,7)^Bc(h,18)^h>>>3,g=Bc(f,17)^Bc(f,19)^f>>>10;_d[d]=g+_d[d-7]+p+_d[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Bc(a,6)^Bc(a,11)^Bc(a,25),f=u+h+T3e(a,c,l)+O3e[d]+_d[d]|0,p=(Bc(r,2)^Bc(r,13)^Bc(r,22))+R3e(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){_d.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const YC=lZ(()=>new k3e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ZN=BigInt(0),XN=BigInt(1),D3e=BigInt(2);function kg(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function QC(t){if(!kg(t))throw new Error("Uint8Array expected")}function b0(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const L3e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function v0(t){QC(t);let e="";for(let n=0;n<t.length;n++)e+=L3e[t[n]];return e}function wy(t){const e=t.toString(16);return e.length&1?"0"+e:e}function aU(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?ZN:BigInt("0x"+t)}const eu={_0:48,_9:57,A:65,F:70,a:97,f:102};function QF(t){if(t>=eu._0&&t<=eu._9)return t-eu._0;if(t>=eu.A&&t<=eu.F)return t-(eu.A-10);if(t>=eu.a&&t<=eu.f)return t-(eu.a-10)}function E0(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=QF(t.charCodeAt(i)),a=QF(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function tg(t){return aU(v0(t))}function N_(t){return QC(t),aU(v0(Uint8Array.from(t).reverse()))}function _0(t,e){return E0(t.toString(16).padStart(e*2,"0"))}function eT(t,e){return _0(t,e).reverse()}function M3e(t){return E0(wy(t))}function Ro(t,e,n){let r;if(typeof e=="string")try{r=E0(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(kg(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function T_(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];QC(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function U3e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function $3e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const qP=t=>typeof t=="bigint"&&ZN<=t;function tT(t,e,n){return qP(t)&&qP(e)&&qP(n)&&e<=t&&t<n}function Bu(t,e,n,r){if(!tT(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function _Z(t){let e;for(e=0;t>ZN;t>>=XN,e+=1);return e}function B3e(t,e){return t>>BigInt(e)&XN}function F3e(t,e,n){return t|(n?XN:ZN)<<BigInt(e)}const cU=t=>(D3e<<BigInt(t-1))-XN,VP=t=>new Uint8Array(t),JF=t=>Uint8Array.from(t);function CZ(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=VP(t),s=VP(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...u)=>n(s,r,...u),c=(u=VP())=>{s=a(JF([0]),u),r=a(),u.length!==0&&(s=a(JF([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return T_(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const j3e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||kg(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function ab(t,e,n={}){const r=(s,i,o)=>{const a=j3e[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const z3e=()=>{throw new Error("not implemented")};function ZD(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}var W3e=Object.freeze({__proto__:null,isBytes:kg,abytes:QC,abool:b0,bytesToHex:v0,numberToHexUnpadded:wy,hexToNumber:aU,hexToBytes:E0,bytesToNumberBE:tg,bytesToNumberLE:N_,numberToBytesBE:_0,numberToBytesLE:eT,numberToVarBytesBE:M3e,ensureBytes:Ro,concatBytes:T_,equalBytes:U3e,utf8ToBytes:$3e,inRange:tT,aInRange:Bu,bitLen:_Z,bitGet:B3e,bitSet:F3e,bitMask:cU,createHmacDrbg:CZ,validateObject:ab,notImplemented:z3e,memoized:ZD});const ds=BigInt(0),xr=BigInt(1),Qf=BigInt(2),H3e=BigInt(3),XD=BigInt(4),ZF=BigInt(5),XF=BigInt(8);function qi(t,e){const n=t%e;return n>=ds?n:e+n}function AZ(t,e,n){if(e<ds)throw new Error("invalid exponent, negatives unsupported");if(n<=ds)throw new Error("invalid modulus");if(n===xr)return ds;let r=xr;for(;e>ds;)e&xr&&(r=r*t%n),t=t*t%n,e>>=xr;return r}function qa(t,e,n){let r=t;for(;e-- >ds;)r*=r,r%=n;return r}function e3(t,e){if(t===ds)throw new Error("invert: expected non-zero number");if(e<=ds)throw new Error("invert: expected positive modulus, got "+e);let n=qi(t,e),r=e,s=ds,i=xr;for(;n!==ds;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==xr)throw new Error("invert: does not exist");return qi(s,e)}function G3e(t){const e=(t-xr)/Qf;let n,r,s;for(n=t-xr,r=0;n%Qf===ds;n/=Qf,r++);for(s=Qf;s<t&&AZ(s,e,t)!==t-xr;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+xr)/XD;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+xr)/Qf;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,xr<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function q3e(t){if(t%XD===H3e){const e=(t+xr)/XD;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%XF===ZF){const e=(t-ZF)/XF;return function(n,r){const s=n.mul(r,Qf),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,Qf),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return G3e(t)}const V3e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function K3e(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=V3e.reduce((r,s)=>(r[s]="function",r),e);return ab(t,n)}function Y3e(t,e,n){if(n<ds)throw new Error("invalid exponent, negatives unsupported");if(n===ds)return t.ONE;if(n===xr)return e;let r=t.ONE,s=e;for(;n>ds;)n&xr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=xr;return r}function Q3e(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function SZ(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function IZ(t,e,n=!1,r={}){if(t<=ds)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=SZ(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:cU(s),ZERO:ds,ONE:xr,create:c=>qi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ds<=c&&c<t},is0:c=>c===ds,isOdd:c=>(c&xr)===xr,neg:c=>qi(-c,t),eql:(c,l)=>c===l,sqr:c=>qi(c*c,t),add:(c,l)=>qi(c+l,t),sub:(c,l)=>qi(c-l,t),mul:(c,l)=>qi(c*l,t),pow:(c,l)=>Y3e(a,c,l),div:(c,l)=>qi(c*e3(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>e3(c,t),sqrt:r.sqrt||(c=>(o||(o=q3e(t)),o(a,c))),invertBatch:c=>Q3e(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?eT(c,i):_0(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?N_(c):tg(c)}});return Object.freeze(a)}function xZ(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function NZ(t){const e=xZ(t);return e+Math.ceil(e/2)}function J3e(t,e,n=!1){const r=t.length,s=xZ(e),i=NZ(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?N_(t):tg(t),a=qi(o,e-xr)+xr;return n?eT(a,s):_0(a,s)}const ej=BigInt(0),hA=BigInt(1);function KP(t,e){const n=e.negate();return t?n:e}function TZ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function YP(t,e){TZ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function Z3e(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function X3e(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const QP=new WeakMap,RZ=new WeakMap;function JP(t){return RZ.get(t)||1}function e5e(t,e){return{constTimeNegate:KP,hasPrecomputes(n){return JP(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>ej;)r&hA&&(s=s.add(i)),i=i.double(),r>>=hA;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=YP(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=YP(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=hA);const g=f,y=f+Math.abs(p)-1,m=h%2!==0,w=p<0;p===0?c=c.add(KP(m,r[g])):a=a.add(KP(w,r[y]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=YP(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===ej)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=hA),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=QP.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&QP.set(r,s(i))),i},wNAFCached(n,r,s){const i=JP(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=JP(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){TZ(r,e),RZ.set(n,r),QP.delete(n)}}}function t5e(t,e,n,r){if(Z3e(n,t),X3e(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=_Z(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function PZ(t){return K3e(t.Fp),ab(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...SZ(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Rm=BigInt(0),ZP=BigInt(1);function n5e(t){return ab(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function r5e(t){const e=n5e(t),{P:n}=e,r=w=>qi(w,n),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(w=>w),c=e.powPminus2||(w=>AZ(w,n-BigInt(2),n));function l(w,v,A){const C=r(w*(v-A));return v=r(v-C),A=r(A+C),[v,A]}const u=(e.a-BigInt(2))/BigInt(4);function d(w,v){Bu("u",w,Rm,n),Bu("scalar",v,Rm,n);const A=v,C=w;let S=ZP,x=Rm,T=w,I=ZP,k=Rm,O;for(let G=BigInt(s-1);G>=Rm;G--){const W=A>>G&ZP;k^=W,O=l(k,S,T),S=O[0],T=O[1],O=l(k,x,I),x=O[0],I=O[1],k=W;const R=S+x,N=r(R*R),M=S-x,P=r(M*M),L=N-P,F=T+I,V=T-I,Z=r(V*R),ae=r(F*M),re=Z+ae,le=Z-ae;T=r(re*re),I=r(C*r(le*le)),S=r(N*P),x=r(L*(N+r(u*L)))}O=l(k,S,T),S=O[0],T=O[1],O=l(k,x,I),x=O[0],I=O[1];const B=c(x);return r(S*B)}function h(w){return eT(r(w),i)}function f(w){const v=Ro("u coordinate",w,i);return o===32&&(v[31]&=127),N_(v)}function p(w){const v=Ro("scalar",w),A=v.length;if(A!==i&&A!==o){let C=""+i+" or "+o;throw new Error("invalid scalar, expected "+C+" bytes, got "+A)}return N_(a(v))}function g(w,v){const A=f(v),C=p(w),S=d(A,C);if(S===Rm)throw new Error("invalid private or public key received");return h(S)}const y=h(e.Gu);function m(w){return g(w,y)}return{scalarMult:g,scalarMultBase:m,getSharedSecret:(w,v)=>g(w,v),getPublicKey:w=>m(w),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:y}}const t3=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const s5e=BigInt(1),tj=BigInt(2),i5e=BigInt(3),o5e=BigInt(5);BigInt(8);function a5e(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=t3,o=t*t%i*t%i,a=qa(o,tj,i)*o%i,c=qa(a,s5e,i)*t%i,l=qa(c,o5e,i)*c%i,u=qa(l,e,i)*l%i,d=qa(u,n,i)*u%i,h=qa(d,r,i)*d%i,f=qa(h,s,i)*h%i,p=qa(f,s,i)*h%i,g=qa(p,e,i)*l%i;return{pow_p_5_8:qa(g,tj,i)*t%i,b2:o}}function c5e(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const n3=r5e({P:t3,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=t3,{pow_p_5_8:n,b2:r}=a5e(t);return qi(qa(n,i5e,e)*r,e)},adjustScalarBytes:c5e,randomBytes:ob});function nj(t){t.lowS!==void 0&&b0("lowS",t.lowS),t.prehash!==void 0&&b0("prehash",t.prehash)}function l5e(t){const e=PZ(t);ab(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:u5e,hexToBytes:d5e}=W3e;class h5e extends Error{constructor(e=""){super(e)}}const du={Err:h5e,_tlv:{encode:(t,e)=>{const{Err:n}=du;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=wy(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?wy(s.length/2|128):"";return wy(t)+i+s+e},decode(t,e){const{Err:n}=du;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=du;if(t<xu)throw new e("integer: negative integers are not allowed");let n=wy(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=du;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return u5e(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=du,s=typeof t=="string"?d5e(t):t;QC(s);const{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=du,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},xu=BigInt(0),ts=BigInt(1);BigInt(2);const rj=BigInt(3);BigInt(4);function f5e(t){const e=l5e(t),{Fp:n}=e,r=IZ(e.n,e.nBitLength),s=e.toBytes||((g,y,m)=>{const w=y.toAffine();return T_(Uint8Array.from([4]),n.toBytes(w.x),n.toBytes(w.y))}),i=e.fromBytes||(g=>{const y=g.subarray(1),m=n.fromBytes(y.subarray(0,n.BYTES)),w=n.fromBytes(y.subarray(n.BYTES,2*n.BYTES));return{x:m,y:w}});function o(g){const{a:y,b:m}=e,w=n.sqr(g),v=n.mul(w,g);return n.add(n.add(v,n.mul(g,y)),m)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return tT(g,ts,e.n)}function c(g){const{allowedPrivateKeyLengths:y,nByteLength:m,wrapPrivateKey:w,n:v}=e;if(y&&typeof g!="bigint"){if(kg(g)&&(g=v0(g)),typeof g!="string"||!y.includes(g.length))throw new Error("invalid private key");g=g.padStart(m*2,"0")}let A;try{A=typeof g=="bigint"?g:tg(Ro("private key",g,m))}catch{throw new Error("invalid private key, expected hex or "+m+" bytes, got "+typeof g)}return w&&(A=qi(A,v)),Bu("private key",A,ts,v),A}function l(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const u=ZD((g,y)=>{const{px:m,py:w,pz:v}=g;if(n.eql(v,n.ONE))return{x:m,y:w};const A=g.is0();y==null&&(y=A?n.ONE:n.inv(v));const C=n.mul(m,y),S=n.mul(w,y),x=n.mul(v,y);if(A)return{x:n.ZERO,y:n.ZERO};if(!n.eql(x,n.ONE))throw new Error("invZ was invalid");return{x:C,y:S}}),d=ZD(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:y,y:m}=g.toAffine();if(!n.isValid(y)||!n.isValid(m))throw new Error("bad point: x or y not FE");const w=n.sqr(m),v=o(y);if(!n.eql(w,v))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(y,m,w){if(this.px=y,this.py=m,this.pz=w,y==null||!n.isValid(y))throw new Error("x required");if(m==null||!n.isValid(m))throw new Error("y required");if(w==null||!n.isValid(w))throw new Error("z required");Object.freeze(this)}static fromAffine(y){const{x:m,y:w}=y||{};if(!y||!n.isValid(m)||!n.isValid(w))throw new Error("invalid affine point");if(y instanceof h)throw new Error("projective point not allowed");const v=A=>n.eql(A,n.ZERO);return v(m)&&v(w)?h.ZERO:new h(m,w,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){const m=n.invertBatch(y.map(w=>w.pz));return y.map((w,v)=>w.toAffine(m[v])).map(h.fromAffine)}static fromHex(y){const m=h.fromAffine(i(Ro("pointHex",y)));return m.assertValidity(),m}static fromPrivateKey(y){return h.BASE.multiply(c(y))}static msm(y,m){return t5e(h,r,y,m)}_setWindowSize(y){p.setWindowSize(this,y)}assertValidity(){d(this)}hasEvenY(){const{y}=this.toAffine();if(n.isOdd)return!n.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){l(y);const{px:m,py:w,pz:v}=this,{px:A,py:C,pz:S}=y,x=n.eql(n.mul(m,S),n.mul(A,v)),T=n.eql(n.mul(w,S),n.mul(C,v));return x&&T}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:y,b:m}=e,w=n.mul(m,rj),{px:v,py:A,pz:C}=this;let S=n.ZERO,x=n.ZERO,T=n.ZERO,I=n.mul(v,v),k=n.mul(A,A),O=n.mul(C,C),B=n.mul(v,A);return B=n.add(B,B),T=n.mul(v,C),T=n.add(T,T),S=n.mul(y,T),x=n.mul(w,O),x=n.add(S,x),S=n.sub(k,x),x=n.add(k,x),x=n.mul(S,x),S=n.mul(B,S),T=n.mul(w,T),O=n.mul(y,O),B=n.sub(I,O),B=n.mul(y,B),B=n.add(B,T),T=n.add(I,I),I=n.add(T,I),I=n.add(I,O),I=n.mul(I,B),x=n.add(x,I),O=n.mul(A,C),O=n.add(O,O),I=n.mul(O,B),S=n.sub(S,I),T=n.mul(O,k),T=n.add(T,T),T=n.add(T,T),new h(S,x,T)}add(y){l(y);const{px:m,py:w,pz:v}=this,{px:A,py:C,pz:S}=y;let x=n.ZERO,T=n.ZERO,I=n.ZERO;const k=e.a,O=n.mul(e.b,rj);let B=n.mul(m,A),G=n.mul(w,C),W=n.mul(v,S),R=n.add(m,w),N=n.add(A,C);R=n.mul(R,N),N=n.add(B,G),R=n.sub(R,N),N=n.add(m,v);let M=n.add(A,S);return N=n.mul(N,M),M=n.add(B,W),N=n.sub(N,M),M=n.add(w,v),x=n.add(C,S),M=n.mul(M,x),x=n.add(G,W),M=n.sub(M,x),I=n.mul(k,N),x=n.mul(O,W),I=n.add(x,I),x=n.sub(G,I),I=n.add(G,I),T=n.mul(x,I),G=n.add(B,B),G=n.add(G,B),W=n.mul(k,W),N=n.mul(O,N),G=n.add(G,W),W=n.sub(B,W),W=n.mul(k,W),N=n.add(N,W),B=n.mul(G,N),T=n.add(T,B),B=n.mul(M,N),x=n.mul(R,x),x=n.sub(x,B),B=n.mul(R,G),I=n.mul(M,I),I=n.add(I,B),new h(x,T,I)}subtract(y){return this.add(y.negate())}is0(){return this.equals(h.ZERO)}wNAF(y){return p.wNAFCached(this,y,h.normalizeZ)}multiplyUnsafe(y){const{endo:m,n:w}=e;Bu("scalar",y,xu,w);const v=h.ZERO;if(y===xu)return v;if(this.is0()||y===ts)return this;if(!m||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,y,h.normalizeZ);let{k1neg:A,k1:C,k2neg:S,k2:x}=m.splitScalar(y),T=v,I=v,k=this;for(;C>xu||x>xu;)C&ts&&(T=T.add(k)),x&ts&&(I=I.add(k)),k=k.double(),C>>=ts,x>>=ts;return A&&(T=T.negate()),S&&(I=I.negate()),I=new h(n.mul(I.px,m.beta),I.py,I.pz),T.add(I)}multiply(y){const{endo:m,n:w}=e;Bu("scalar",y,ts,w);let v,A;if(m){const{k1neg:C,k1:S,k2neg:x,k2:T}=m.splitScalar(y);let{p:I,f:k}=this.wNAF(S),{p:O,f:B}=this.wNAF(T);I=p.constTimeNegate(C,I),O=p.constTimeNegate(x,O),O=new h(n.mul(O.px,m.beta),O.py,O.pz),v=I.add(O),A=k.add(B)}else{const{p:C,f:S}=this.wNAF(y);v=C,A=S}return h.normalizeZ([v,A])[0]}multiplyAndAddUnsafe(y,m,w){const v=h.BASE,A=(S,x)=>x===xu||x===ts||!S.equals(v)?S.multiplyUnsafe(x):S.multiply(x),C=A(this,m).add(A(y,w));return C.is0()?void 0:C}toAffine(y){return u(this,y)}isTorsionFree(){const{h:y,isTorsionFree:m}=e;if(y===ts)return!0;if(m)return m(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:y,clearCofactor:m}=e;return y===ts?this:m?m(h,this):this.multiplyUnsafe(e.h)}toRawBytes(y=!0){return b0("isCompressed",y),this.assertValidity(),s(h,this,y)}toHex(y=!0){return b0("isCompressed",y),v0(this.toRawBytes(y))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=e5e(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function p5e(t){const e=PZ(t);return ab(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function g5e(t){const e=p5e(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(W){return qi(W,r)}function a(W){return e3(W,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=f5e({...e,toBytes(W,R,N){const M=R.toAffine(),P=n.toBytes(M.x),L=T_;return b0("isCompressed",N),N?L(Uint8Array.from([R.hasEvenY()?2:3]),P):L(Uint8Array.from([4]),P,n.toBytes(M.y))},fromBytes(W){const R=W.length,N=W[0],M=W.subarray(1);if(R===s&&(N===2||N===3)){const P=tg(M);if(!tT(P,ts,n.ORDER))throw new Error("Point is not on curve");const L=u(P);let F;try{F=n.sqrt(L)}catch(Z){const ae=Z instanceof Error?": "+Z.message:"";throw new Error("Point is not on curve"+ae)}const V=(F&ts)===ts;return(N&1)===1!==V&&(F=n.neg(F)),{x:P,y:F}}else if(R===i&&N===4){const P=n.fromBytes(M.subarray(0,n.BYTES)),L=n.fromBytes(M.subarray(n.BYTES,2*n.BYTES));return{x:P,y:L}}else{const P=s,L=i;throw new Error("invalid Point, expected length of "+P+", or uncompressed "+L+", got "+R)}}}),h=W=>v0(_0(W,e.nByteLength));function f(W){const R=r>>ts;return W>R}function p(W){return f(W)?o(-W):W}const g=(W,R,N)=>tg(W.slice(R,N));class y{constructor(R,N,M){this.r=R,this.s=N,this.recovery=M,this.assertValidity()}static fromCompact(R){const N=e.nByteLength;return R=Ro("compactSignature",R,N*2),new y(g(R,0,N),g(R,N,2*N))}static fromDER(R){const{r:N,s:M}=du.toSig(Ro("DER",R));return new y(N,M)}assertValidity(){Bu("r",this.r,ts,r),Bu("s",this.s,ts,r)}addRecoveryBit(R){return new y(this.r,this.s,R)}recoverPublicKey(R){const{r:N,s:M,recovery:P}=this,L=S(Ro("msgHash",R));if(P==null||![0,1,2,3].includes(P))throw new Error("recovery id invalid");const F=P===2||P===3?N+e.n:N;if(F>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const V=P&1?"03":"02",Z=c.fromHex(V+h(F)),ae=a(F),re=o(-L*ae),le=o(M*ae),we=c.BASE.multiplyAndAddUnsafe(Z,re,le);if(!we)throw new Error("point at infinify");return we.assertValidity(),we}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return E0(this.toDERHex())}toDERHex(){return du.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return E0(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const m={isValidPrivateKey(W){try{return l(W),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const W=NZ(e.n);return J3e(e.randomBytes(W),e.n)},precompute(W=8,R=c.BASE){return R._setWindowSize(W),R.multiply(BigInt(3)),R}};function w(W,R=!0){return c.fromPrivateKey(W).toRawBytes(R)}function v(W){const R=kg(W),N=typeof W=="string",M=(R||N)&&W.length;return R?M===s||M===i:N?M===2*s||M===2*i:W instanceof c}function A(W,R,N=!0){if(v(W))throw new Error("first arg must be private key");if(!v(R))throw new Error("second arg must be public key");return c.fromHex(R).multiply(l(W)).toRawBytes(N)}const C=e.bits2int||function(W){if(W.length>8192)throw new Error("input is too large");const R=tg(W),N=W.length*8-e.nBitLength;return N>0?R>>BigInt(N):R},S=e.bits2int_modN||function(W){return o(C(W))},x=cU(e.nBitLength);function T(W){return Bu("num < 2^"+e.nBitLength,W,xu,x),_0(W,e.nByteLength)}function I(W,R,N=k){if(["recovered","canonical"].some(ce=>ce in N))throw new Error("sign() legacy options not supported");const{hash:M,randomBytes:P}=e;let{lowS:L,prehash:F,extraEntropy:V}=N;L==null&&(L=!0),W=Ro("msgHash",W),nj(N),F&&(W=Ro("prehashed msgHash",M(W)));const Z=S(W),ae=l(R),re=[T(ae),T(Z)];if(V!=null&&V!==!1){const ce=V===!0?P(n.BYTES):V;re.push(Ro("extraEntropy",ce))}const le=T_(...re),we=Z;function ee(ce){const pe=C(ce);if(!d(pe))return;const he=a(pe),Ee=c.BASE.multiply(pe).toAffine(),We=o(Ee.x);if(We===xu)return;const ue=o(he*o(we+We*ae));if(ue===xu)return;let Ae=(Ee.x===We?0:2)|Number(Ee.y&ts),ke=ue;return L&&f(ue)&&(ke=p(ue),Ae^=1),new y(We,ke,Ae)}return{seed:le,k2sig:ee}}const k={lowS:e.lowS,prehash:!1},O={lowS:e.lowS,prehash:!1};function B(W,R,N=k){const{seed:M,k2sig:P}=I(W,R,N),L=e;return CZ(L.hash.outputLen,L.nByteLength,L.hmac)(M,P)}c.BASE._setWindowSize(8);function G(W,R,N,M=O){var ue;const P=W;R=Ro("msgHash",R),N=Ro("publicKey",N);const{lowS:L,prehash:F,format:V}=M;if(nj(M),"strict"in M)throw new Error("options.strict was renamed to lowS");if(V!==void 0&&V!=="compact"&&V!=="der")throw new Error("format must be compact or der");const Z=typeof P=="string"||kg(P),ae=!Z&&!V&&typeof P=="object"&&P!==null&&typeof P.r=="bigint"&&typeof P.s=="bigint";if(!Z&&!ae)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let re,le;try{if(ae&&(re=new y(P.r,P.s)),Z){try{V!=="compact"&&(re=y.fromDER(P))}catch(Ae){if(!(Ae instanceof du.Err))throw Ae}!re&&V!=="der"&&(re=y.fromCompact(P))}le=c.fromHex(N)}catch{return!1}if(!re||L&&re.hasHighS())return!1;F&&(R=e.hash(R));const{r:we,s:ee}=re,ce=S(R),pe=a(ee),he=o(ce*pe),Ee=o(we*pe),We=(ue=c.BASE.multiplyAndAddUnsafe(le,he,Ee))==null?void 0:ue.toAffine();return We?o(We.x)===we:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:A,sign:B,verify:G,ProjectivePoint:c,Signature:y,utils:m}}function m5e(t){return{hash:t,hmac:(e,...n)=>JN(t,e,vDe(...n)),randomBytes:ob}}function y5e(t,e){const n=r=>g5e({...t,...m5e(r)});return{...n(e),create:n}}const OZ=IZ(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),w5e=OZ.create(BigInt("-3")),b5e=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),v5e=y5e({a:w5e,b:b5e,Fp:OZ,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},YC),kZ="base10",Ei="base16",wc="base64pad",Wd="base64url",JC="utf8",DZ=0,Fu=1,ZC=2,E5e=0,sj=1,eE=12,lU=32;function _5e(){const t=n3.utils.randomPrivateKey(),e=n3.getPublicKey(t);return{privateKey:io(t,Ei),publicKey:io(e,Ei)}}function r3(){const t=ob(lU);return io(t,Ei)}function C5e(t,e){const n=n3.getSharedSecret(Ca(t,Ei),Ca(e,Ei)),r=x3e(YC,n,void 0,void 0,lU);return io(r,Ei)}function lS(t){const e=YC(Ca(t,Ei));return io(e,Ei)}function dl(t){const e=YC(Ca(t,JC));return io(e,Ei)}function LZ(t){return Ca(`${t}`,kZ)}function Dg(t){return Number(io(t,kZ))}function MZ(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function UZ(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function A5e(t){const e=LZ(typeof t.type<"u"?t.type:DZ);if(Dg(e)===Fu&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?Ca(t.senderPublicKey,Ei):void 0,r=typeof t.iv<"u"?Ca(t.iv,Ei):ob(eE),s=Ca(t.symKey,Ei),i=vZ(s,r).encrypt(Ca(t.message,JC)),o=$Z({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===Wd?MZ(o):o}function S5e(t){const e=Ca(t.symKey,Ei),{sealed:n,iv:r}=R_({encoded:t.encoded,encoding:t.encoding}),s=vZ(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return io(s,JC)}function I5e(t,e){const n=LZ(ZC),r=ob(eE),s=Ca(t,JC),i=$Z({type:n,sealed:s,iv:r});return e===Wd?MZ(i):i}function x5e(t,e){const{sealed:n}=R_({encoded:t,encoding:e});return io(n,JC)}function $Z(t){if(Dg(t.type)===ZC)return io(Jv([t.type,t.sealed]),wc);if(Dg(t.type)===Fu){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return io(Jv([t.type,t.senderPublicKey,t.iv,t.sealed]),wc)}return io(Jv([t.type,t.iv,t.sealed]),wc)}function R_(t){const e=(t.encoding||wc)===Wd?UZ(t.encoded):t.encoded,n=Ca(e,wc),r=n.slice(E5e,sj),s=sj;if(Dg(r)===Fu){const c=s+lU,l=c+eE,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(Dg(r)===ZC){const c=n.slice(s),l=ob(eE);return{type:r,sealed:c,iv:l}}const i=s+eE,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function N5e(t,e){const n=R_({encoded:t,encoding:e==null?void 0:e.encoding});return BZ({type:Dg(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?io(n.senderPublicKey,Ei):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function BZ(t){const e=(t==null?void 0:t.type)||DZ;if(e===Fu){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function ij(t){return t.type===Fu&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function oj(t){return t.type===ZC}function T5e(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return Jv([new Uint8Array([4]),e,n])}function R5e(t,e){const[n,r,s]=t.split("."),i=Buffer.from(UZ(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=YC(c),u=T5e(e);if(!v5e.verify(Jv([o,a]),l,u))throw new Error("Invalid signature");return DD(t).payload}const P5e="irn";function QI(t){return(t==null?void 0:t.relay)||{protocol:P5e}}function gv(t){const e=MTe[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function O5e(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function aj(t){if(!t.includes("wc:")){const l=aZ(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:k5e(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:O5e(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function k5e(t){return t.startsWith("//")?t.substring(2):t}function D5e(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function cj(t){const e=new URLSearchParams,n=D5e(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function fA(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var L5e=Object.defineProperty,M5e=Object.defineProperties,U5e=Object.getOwnPropertyDescriptors,lj=Object.getOwnPropertySymbols,$5e=Object.prototype.hasOwnProperty,B5e=Object.prototype.propertyIsEnumerable,uj=(t,e,n)=>e in t?L5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F5e=(t,e)=>{for(var n in e||(e={}))$5e.call(e,n)&&uj(t,n,e[n]);if(lj)for(var n of lj(e))B5e.call(e,n)&&uj(t,n,e[n]);return t},j5e=(t,e)=>M5e(t,U5e(e));function cb(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function z5e(t){const e=[];return Object.values(t).forEach(n=>{e.push(...cb(n.accounts))}),e}function W5e(t,e){const n=[];return Object.values(t).forEach(r=>{cb(r.accounts).includes(e)&&n.push(...r.methods)}),n}function H5e(t,e){const n=[];return Object.values(t).forEach(r=>{cb(r.accounts).includes(e)&&n.push(...r.events)}),n}function nT(t){return t.includes(":")}function by(t){return nT(t)?t.split(":")[0]:t}function dj(t){var e,n,r;const s={};if(!qh(t))return s;for(const[i,o]of Object.entries(t)){const a=nT(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=by(i);s[u]=j5e(F5e({},s[u]),{chains:Nl(a,(e=s[u])==null?void 0:e.chains),methods:Nl(c,(n=s[u])==null?void 0:n.methods),events:Nl(l,(r=s[u])==null?void 0:r.events)})}return s}function G5e(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function hj(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=G5e(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Nl(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function q5e(t,e){var n,r,s,i,o,a;const c=dj(t),l=dj(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:Nl((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:Nl((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:Nl((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const V5e={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},K5e={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Te(t,e){const{message:n,code:r}=K5e[t];return{message:e?`${n} ${e}`:n,code:r}}function Rn(t,e){const{message:n,code:r}=V5e[t];return{message:e?`${n} ${e}`:n,code:r}}function Gh(t,e){return!!Array.isArray(t)}function qh(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Is(t){return typeof t>"u"}function Pr(t,e){return e&&Is(t)?!0:typeof t=="string"&&!!t.trim().length}function uU(t,e){return e&&Is(t)?!0:typeof t=="number"&&!isNaN(t)}function Y5e(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return mp(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=cb(a),d=n[o];(!mp(nZ(o,d),u)||!mp(d.methods,c)||!mp(d.events,l))&&(i=!1)}),i):!1}function JI(t){return Pr(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Q5e(t){if(Pr(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&JI(n)}}return!1}function J5e(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Pr(t,!1)){if(e(t))return!0;const n=aZ(t);return e(n)}}catch{}return!1}function Z5e(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function X5e(t){return t==null?void 0:t.topic}function eLe(t,e){let n=null;return Pr(t==null?void 0:t.publicKey,!1)||(n=Te("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function fj(t){let e=!0;return Gh(t)?t.length&&(e=t.every(n=>Pr(n,!1))):e=!1,e}function tLe(t,e,n){let r=null;return Gh(e)&&e.length?e.forEach(s=>{r||JI(s)||(r=Rn("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):JI(t)||(r=Rn("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function nLe(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=tLe(s,nZ(s,i),`${e} ${n}`);o&&(r=o)}),r}function rLe(t,e){let n=null;return Gh(t)?t.forEach(r=>{n||Q5e(r)||(n=Rn("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Rn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function sLe(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=rLe(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function iLe(t,e){let n=null;return fj(t==null?void 0:t.methods)?fj(t==null?void 0:t.events)||(n=Rn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=Rn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function FZ(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=iLe(r,`${e}, namespace`);s&&(n=s)}),n}function oLe(t,e,n){let r=null;if(t&&qh(t)){const s=FZ(t,e);s&&(r=s);const i=nLe(t,e,n);i&&(r=i)}else r=Te("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function XP(t,e){let n=null;if(t&&qh(t)){const r=FZ(t,e);r&&(n=r);const s=sLe(t,e);s&&(n=s)}else n=Te("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function jZ(t){return Pr(t.protocol,!0)}function aLe(t,e){let n=!1;return t?t&&Gh(t)&&t.length&&t.forEach(r=>{n=jZ(r)}):n=!0,n}function cLe(t){return typeof t=="number"}function $i(t){return typeof t<"u"&&typeof t!==null}function lLe(t){return!(!t||typeof t!="object"||!t.code||!uU(t.code,!1)||!t.message||!Pr(t.message,!1))}function uLe(t){return!(Is(t)||!Pr(t.method,!1))}function dLe(t){return!(Is(t)||Is(t.result)&&Is(t.error)||!uU(t.id,!1)||!Pr(t.jsonrpc,!1))}function hLe(t){return!(Is(t)||!Pr(t.name,!1))}function pj(t,e){return!(!JI(e)||!z5e(t).includes(e))}function fLe(t,e,n){return Pr(n,!1)?W5e(t,e).includes(n):!1}function pLe(t,e,n){return Pr(n,!1)?H5e(t,e).includes(n):!1}function gj(t,e,n){let r=null;const s=gLe(t),i=mLe(e),o=Object.keys(s),a=Object.keys(i),c=mj(Object.keys(t)),l=mj(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=Te("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),mp(o,a)||(r=Te("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=cb(e[d].accounts);h.includes(d)||(r=Te("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(mp(s[d].methods,i[d].methods)?mp(s[d].events,i[d].events)||(r=Te("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=Te("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function gLe(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function mj(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function mLe(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=cb(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function yLe(t,e){return uU(t,!1)&&t<=e.max&&t>=e.min}function yj(){const t=VC();return new Promise(e=>{switch(t){case Lo.browser:e(wLe());break;case Lo.reactNative:e(bLe());break;case Lo.node:e(vLe());break;default:e(!0)}})}function wLe(){return ib()&&(navigator==null?void 0:navigator.onLine)}async function bLe(){if(bf()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function vLe(){return!0}function ELe(t){switch(VC()){case Lo.browser:_Le(t);break;case Lo.reactNative:CLe(t);break}}function _Le(t){!bf()&&ib()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function CLe(t){bf()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function ALe(){var t;return ib()&&xg()?((t=xg())==null?void 0:t.visibilityState)==="visible":!0}const eO={};class Vb{static get(e){return eO[e]}static set(e,n){eO[e]=n}static delete(e){delete eO[e]}}var SLe={};const zZ="wc",WZ=2,s3="core",Ul=`${zZ}@2:${s3}:`,ILe={logger:"error"},xLe={database:":memory:"},NLe="crypto",wj="client_ed25519_seed",TLe=xe.ONE_DAY,RLe="keychain",PLe="0.3",OLe="messages",kLe="0.3",bj=xe.SIX_HOURS,DLe="publisher",HZ="irn",LLe="error",GZ="wss://relay.walletconnect.org",MLe="relayer",as={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},ULe="_subscription",ea={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},$Le=.1,i3="2.21.0",Jn={link_mode:"link_mode",relay:"relay"},uS={inbound:"inbound",outbound:"outbound"},BLe="0.3",FLe="WALLETCONNECT_CLIENT_ID",vj="WALLETCONNECT_LINK_MODE_APPS",Co={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},jLe="subscription",zLe="0.3",WLe="pairing",HLe="0.3",Kb={wc_pairingDelete:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:xe.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:xe.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:xe.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:0},res:{ttl:xe.ONE_DAY,prompt:!1,tag:0}}},Jf={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},za={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},GLe="history",qLe="0.3",VLe="expirer",aa={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},KLe="0.3",YLe="verify-api",QLe="https://verify.walletconnect.com",qZ="https://verify.walletconnect.org",tE=qZ,JLe=`${tE}/v3`,ZLe=[QLe,qZ],XLe="echo",eMe="https://echo.walletconnect.com",Gc={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},iu={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Wa={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Pf={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Of={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Yb={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},tMe=.1,nMe="event-client",rMe=86400,sMe="https://pulse.walletconnect.org/batch";function iMe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,m=0,w=p.length;m!==w&&p[m]===0;)m++,g++;for(var v=(w-m)*u+1>>>0,A=new Uint8Array(v);m!==w;){for(var C=p[m],S=0,x=v-1;(C!==0||S<y)&&x!==-1;x--,S++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");y=S,m++}for(var T=v-y;T!==v&&A[T]===0;)T++;for(var I=c.repeat(g);T<v;++T)I+=t.charAt(A[T]);return I}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,m=0;p[g]===c;)y++,g++;for(var w=(p.length-g)*l+1>>>0,v=new Uint8Array(w);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,S=w-1;(A!==0||C<m)&&S!==-1;S--,C++)A+=a*v[S]>>>0,v[S]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");m=C,g++}if(p[g]!==" "){for(var x=w-m;x!==w&&v[x]===0;)x++;for(var T=new Uint8Array(y+(w-x)),I=y;x!==w;)T[I++]=v[x++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var oMe=iMe,aMe=oMe;const VZ=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},cMe=t=>new TextEncoder().encode(t),lMe=t=>new TextDecoder().decode(t);class uMe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class dMe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return KZ(this,e)}}class hMe{constructor(e){this.decoders=e}or(e){return KZ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const KZ=(t,e)=>new hMe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class fMe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new uMe(e,n,r),this.decoder=new dMe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const rT=({name:t,prefix:e,encode:n,decode:r})=>new fMe(t,e,n,r),XC=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=aMe(n,e);return rT({prefix:t,name:e,encode:r,decode:i=>VZ(s(i))})},pMe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},gMe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},$s=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>rT({prefix:e,name:t,encode(s){return gMe(s,r,n)},decode(s){return pMe(s,r,n,t)}}),mMe=rT({prefix:"\0",name:"identity",encode:t=>lMe(t),decode:t=>cMe(t)});var yMe=Object.freeze({__proto__:null,identity:mMe});const wMe=$s({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var bMe=Object.freeze({__proto__:null,base2:wMe});const vMe=$s({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var EMe=Object.freeze({__proto__:null,base8:vMe});const _Me=XC({prefix:"9",name:"base10",alphabet:"0123456789"});var CMe=Object.freeze({__proto__:null,base10:_Me});const AMe=$s({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),SMe=$s({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var IMe=Object.freeze({__proto__:null,base16:AMe,base16upper:SMe});const xMe=$s({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),NMe=$s({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),TMe=$s({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),RMe=$s({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),PMe=$s({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),OMe=$s({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),kMe=$s({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),DMe=$s({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),LMe=$s({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var MMe=Object.freeze({__proto__:null,base32:xMe,base32upper:NMe,base32pad:TMe,base32padupper:RMe,base32hex:PMe,base32hexupper:OMe,base32hexpad:kMe,base32hexpadupper:DMe,base32z:LMe});const UMe=XC({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),$Me=XC({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var BMe=Object.freeze({__proto__:null,base36:UMe,base36upper:$Me});const FMe=XC({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),jMe=XC({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var zMe=Object.freeze({__proto__:null,base58btc:FMe,base58flickr:jMe});const WMe=$s({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),HMe=$s({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),GMe=$s({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),qMe=$s({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var VMe=Object.freeze({__proto__:null,base64:WMe,base64pad:HMe,base64url:GMe,base64urlpad:qMe});const YZ=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),KMe=YZ.reduce((t,e,n)=>(t[n]=e,t),[]),YMe=YZ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function QMe(t){return t.reduce((e,n)=>(e+=KMe[n],e),"")}function JMe(t){const e=[];for(const n of t){const r=YMe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const ZMe=rT({prefix:"🚀",name:"base256emoji",encode:QMe,decode:JMe});var XMe=Object.freeze({__proto__:null,base256emoji:ZMe}),eUe=QZ,Ej=128,tUe=-128,nUe=Math.pow(2,31);function QZ(t,e,n){e=e||[],n=n||0;for(var r=n;t>=nUe;)e[n++]=t&255|Ej,t/=128;for(;t&tUe;)e[n++]=t&255|Ej,t>>>=7;return e[n]=t|0,QZ.bytes=n-r+1,e}var rUe=o3,sUe=128,_j=127;function o3(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw o3.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&_j)<<s:(o&_j)*Math.pow(2,s),s+=7}while(o>=sUe);return o3.bytes=i-r,n}var iUe=Math.pow(2,7),oUe=Math.pow(2,14),aUe=Math.pow(2,21),cUe=Math.pow(2,28),lUe=Math.pow(2,35),uUe=Math.pow(2,42),dUe=Math.pow(2,49),hUe=Math.pow(2,56),fUe=Math.pow(2,63),pUe=function(t){return t<iUe?1:t<oUe?2:t<aUe?3:t<cUe?4:t<lUe?5:t<uUe?6:t<dUe?7:t<hUe?8:t<fUe?9:10},gUe={encode:eUe,decode:rUe,encodingLength:pUe},JZ=gUe;const Cj=(t,e,n=0)=>(JZ.encode(t,e,n),e),Aj=t=>JZ.encodingLength(t),a3=(t,e)=>{const n=e.byteLength,r=Aj(t),s=r+Aj(n),i=new Uint8Array(s+n);return Cj(t,i,0),Cj(n,i,r),i.set(e,s),new mUe(t,n,e,i)};class mUe{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const ZZ=({name:t,code:e,encode:n})=>new yUe(t,e,n);class yUe{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?a3(this.code,n):n.then(r=>a3(this.code,r))}else throw Error("Unknown type, must be binary type")}}const XZ=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),wUe=ZZ({name:"sha2-256",code:18,encode:XZ("SHA-256")}),bUe=ZZ({name:"sha2-512",code:19,encode:XZ("SHA-512")});var vUe=Object.freeze({__proto__:null,sha256:wUe,sha512:bUe});const eX=0,EUe="identity",tX=VZ,_Ue=t=>a3(eX,tX(t)),CUe={code:eX,name:EUe,encode:tX,digest:_Ue};var AUe=Object.freeze({__proto__:null,identity:CUe});new TextEncoder,new TextDecoder;const Sj={...yMe,...bMe,...EMe,...CMe,...IMe,...MMe,...BMe,...zMe,...VMe,...XMe};({...vUe,...AUe});function SUe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function nX(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Ij=nX("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),tO=nX("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=SUe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),IUe={utf8:Ij,"utf-8":Ij,hex:Sj.base16,latin1:tO,ascii:tO,binary:tO,...Sj};function xUe(t,e="utf8"){const n=IUe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var NUe=Object.defineProperty,TUe=(t,e,n)=>e in t?NUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fc=(t,e,n)=>TUe(t,typeof e!="symbol"?e+"":e,n);class RUe{constructor(e,n){this.core=e,this.logger=n,Fc(this,"keychain",new Map),Fc(this,"name",RLe),Fc(this,"version",PLe),Fc(this,"initialized",!1),Fc(this,"storagePrefix",Ul),Fc(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),Fc(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),Fc(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),Fc(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=Te("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),Fc(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Ls(n,this.name)}get context(){return ho(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,qD(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?VD(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var PUe=Object.defineProperty,OUe=(t,e,n)=>e in t?PUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ws=(t,e,n)=>OUe(t,typeof e!="symbol"?e+"":e,n);class kUe{constructor(e,n,r){this.core=e,this.logger=n,ws(this,"name",NLe),ws(this,"keychain"),ws(this,"randomSessionIdentifier",r3()),ws(this,"initialized",!1),ws(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),ws(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),ws(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=B4(s);return bJ(i.publicKey)}),ws(this,"generateKeyPair",()=>{this.isInitialized();const s=_5e();return this.setPrivateKey(s.publicKey,s.privateKey)}),ws(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=B4(i),a=this.randomSessionIdentifier;return await hNe(a,s,TLe,o)}),ws(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=C5e(a,i);return this.setSymKey(c,o)}),ws(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||lS(s);return await this.keychain.set(o,s),o}),ws(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),ws(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),ws(this,"encode",async(s,i,o)=>{this.isInitialized();const a=BZ(o),c=Xu(i);if(oj(a))return I5e(c,o==null?void 0:o.encoding);if(ij(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return A5e({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),ws(this,"decode",async(s,i,o)=>{this.isInitialized();const a=N5e(i,o);if(oj(a)){const c=x5e(i,o==null?void 0:o.encoding);return Ig(c)}if(ij(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=S5e({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return Ig(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),ws(this,"getPayloadType",(s,i=wc)=>{const o=R_({encoded:s,encoding:i});return Dg(o.type)}),ws(this,"getPayloadSenderPublicKey",(s,i=wc)=>{const o=R_({encoded:s,encoding:i});return o.senderPublicKey?io(o.senderPublicKey,Ei):void 0}),this.core=e,this.logger=Ls(n,this.name),this.keychain=r||new RUe(this.core,this.logger)}get context(){return ho(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(wj)}catch{e=r3(),await this.keychain.set(wj,e)}return xUe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var DUe=Object.defineProperty,LUe=Object.defineProperties,MUe=Object.getOwnPropertyDescriptors,xj=Object.getOwnPropertySymbols,UUe=Object.prototype.hasOwnProperty,$Ue=Object.prototype.propertyIsEnumerable,c3=(t,e,n)=>e in t?DUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,BUe=(t,e)=>{for(var n in e||(e={}))UUe.call(e,n)&&c3(t,n,e[n]);if(xj)for(var n of xj(e))$Ue.call(e,n)&&c3(t,n,e[n]);return t},FUe=(t,e)=>LUe(t,MUe(e)),mo=(t,e,n)=>c3(t,typeof e!="symbol"?e+"":e,n);class jUe extends M2e{constructor(e,n){super(e,n),this.logger=e,this.core=n,mo(this,"messages",new Map),mo(this,"messagesWithoutClientAck",new Map),mo(this,"name",OLe),mo(this,"version",kLe),mo(this,"initialized",!1),mo(this,"storagePrefix",Ul),mo(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),mo(this,"set",async(r,s,i)=>{this.isInitialized();const o=dl(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===uS.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,FUe(BUe({},c),{[o]:s}))}return await this.persist(),o}),mo(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),mo(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),mo(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=dl(s);return typeof i[o]<"u"}),mo(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=dl(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),mo(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Ls(e,this.name),this.core=n}get context(){return ho(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,qD(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,qD(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?VD(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?VD(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var zUe=Object.defineProperty,WUe=Object.defineProperties,HUe=Object.getOwnPropertyDescriptors,Nj=Object.getOwnPropertySymbols,GUe=Object.prototype.hasOwnProperty,qUe=Object.prototype.propertyIsEnumerable,l3=(t,e,n)=>e in t?zUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pA=(t,e)=>{for(var n in e||(e={}))GUe.call(e,n)&&l3(t,n,e[n]);if(Nj)for(var n of Nj(e))qUe.call(e,n)&&l3(t,n,e[n]);return t},nO=(t,e)=>WUe(t,HUe(e)),Ha=(t,e,n)=>l3(t,typeof e!="symbol"?e+"":e,n);class VUe extends U2e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Ha(this,"events",new La.EventEmitter),Ha(this,"name",DLe),Ha(this,"queue",new Map),Ha(this,"publishTimeout",xe.toMiliseconds(xe.ONE_MINUTE)),Ha(this,"initialPublishTimeout",xe.toMiliseconds(xe.ONE_SECOND*15)),Ha(this,"needsTransportRestart",!1),Ha(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||bj,c=QI(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||gp().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const y=({id:w})=>{h.opts.id===w&&(this.removeRequestFromQueue(w),this.relayer.events.removeListener(as.publish,y),g(h))};this.relayer.events.on(as.publish,y);const m=Ch(new Promise((w,v)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(w).catch(A=>{this.logger.warn(A,A==null?void 0:A.message),v(A)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await m,this.events.removeListener(as.publish,y)}catch(w){this.queue.set(d,nO(pA({},h),{attempt:1})),this.logger.warn(w,w==null?void 0:w.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await Ch(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),Ha(this,"on",(r,s)=>{this.events.on(r,s)}),Ha(this,"once",(r,s)=>{this.events.once(r,s)}),Ha(this,"off",(r,s)=>{this.events.off(r,s)}),Ha(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=Ls(n,this.name),this.registerEventListeners()}get context(){return ho(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=bj,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:gv(QI().protocol).publish,params:pA({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};Is((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),Is((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(as.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,nO(pA({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(nO(pA({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(nm.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(as.connection_stalled);return}this.checkQueue()}),this.relayer.on(as.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var KUe=Object.defineProperty,YUe=(t,e,n)=>e in t?KUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pm=(t,e,n)=>YUe(t,typeof e!="symbol"?e+"":e,n);class QUe{constructor(){Pm(this,"map",new Map),Pm(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),Pm(this,"get",e=>this.map.get(e)||[]),Pm(this,"exists",(e,n)=>this.get(e).includes(n)),Pm(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Pm(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var JUe=Object.defineProperty,ZUe=Object.defineProperties,XUe=Object.getOwnPropertyDescriptors,Tj=Object.getOwnPropertySymbols,e$e=Object.prototype.hasOwnProperty,t$e=Object.prototype.propertyIsEnumerable,u3=(t,e,n)=>e in t?JUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qb=(t,e)=>{for(var n in e||(e={}))e$e.call(e,n)&&u3(t,n,e[n]);if(Tj)for(var n of Tj(e))t$e.call(e,n)&&u3(t,n,e[n]);return t},rO=(t,e)=>ZUe(t,XUe(e)),$n=(t,e,n)=>u3(t,typeof e!="symbol"?e+"":e,n);class n$e extends F2e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,$n(this,"subscriptions",new Map),$n(this,"topicMap",new QUe),$n(this,"events",new La.EventEmitter),$n(this,"name",jLe),$n(this,"version",zLe),$n(this,"pending",new Map),$n(this,"cached",[]),$n(this,"initialized",!1),$n(this,"storagePrefix",Ul),$n(this,"subscribeTimeout",xe.toMiliseconds(xe.ONE_MINUTE)),$n(this,"initialSubscribeTimeout",xe.toMiliseconds(xe.ONE_SECOND*15)),$n(this,"clientId"),$n(this,"batchSubscribeTopicsLimit",500),$n(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),$n(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=QI(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),$n(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),$n(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),$n(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),$n(this,"on",(r,s)=>{this.events.on(r,s)}),$n(this,"once",(r,s)=>{this.events.once(r,s)}),$n(this,"off",(r,s)=>{this.events.off(r,s)}),$n(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),$n(this,"start",async()=>{await this.onConnect()}),$n(this,"stop",async()=>{await this.onDisconnect()}),$n(this,"restart",async()=>{await this.restore(),await this.onRestart()}),$n(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),$n(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(nm.pulse,async()=>{await this.checkPending()}),this.events.on(Co.created,async r=>{const s=Co.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Co.deleted,async r=>{const s=Co.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=Ls(n,this.name),this.clientId=""}get context(){return ho(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=QI(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=Rn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===Jn.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:gv(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===Jn.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},xe.toMiliseconds(xe.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(Co.created,d),u(h.id))};this.events.on(Co.created,d);try{const h=await Ch(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Co.created,d),u(h)}catch{}}),l=await Ch(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(as.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:gv(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Ch(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(as.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:gv(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Ch(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(as.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:gv(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,rO(Qb({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,Qb({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,Qb({},n)),this.topicMap.set(n.topic,e),this.events.emit(Co.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=Te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Co.deleted,rO(Qb({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Co.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Co.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=Te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>rO(Qb({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await lDe(xe.toMiliseconds(xe.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return dl(e+await this.getClientId())}}var r$e=Object.defineProperty,Rj=Object.getOwnPropertySymbols,s$e=Object.prototype.hasOwnProperty,i$e=Object.prototype.propertyIsEnumerable,d3=(t,e,n)=>e in t?r$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pj=(t,e)=>{for(var n in e||(e={}))s$e.call(e,n)&&d3(t,n,e[n]);if(Rj)for(var n of Rj(e))i$e.call(e,n)&&d3(t,n,e[n]);return t},sn=(t,e,n)=>d3(t,typeof e!="symbol"?e+"":e,n);class o$e extends $2e{constructor(e){super(e),sn(this,"protocol","wc"),sn(this,"version",2),sn(this,"core"),sn(this,"logger"),sn(this,"events",new La.EventEmitter),sn(this,"provider"),sn(this,"messages"),sn(this,"subscriber"),sn(this,"publisher"),sn(this,"name",MLe),sn(this,"transportExplicitlyClosed",!1),sn(this,"initialized",!1),sn(this,"connectionAttemptInProgress",!1),sn(this,"relayUrl"),sn(this,"projectId"),sn(this,"packageName"),sn(this,"bundleId"),sn(this,"hasExperiencedNetworkDisruption",!1),sn(this,"pingTimeout"),sn(this,"heartBeatTimeout",xe.toMiliseconds(xe.THIRTY_SECONDS+xe.FIVE_SECONDS)),sn(this,"reconnectTimeout"),sn(this,"connectPromise"),sn(this,"reconnectInProgress",!1),sn(this,"requestsInFlight",[]),sn(this,"connectTimeout",xe.toMiliseconds(xe.ONE_SECOND*15)),sn(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||gp().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),sn(this,"resetPingTimeout",()=>{KI()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),sn(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),sn(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(as.connect)}),sn(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),sn(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(as.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),sn(this,"registerProviderListeners",()=>{this.provider.on(ea.payload,this.onPayloadHandler),this.provider.on(ea.connect,this.onConnectHandler),this.provider.on(ea.disconnect,this.onDisconnectHandler),this.provider.on(ea.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Ls(e.logger,this.name):zC(sm({level:e.logger||LLe})),this.messages=new jUe(this.logger,e.core),this.subscriber=new n$e(this,this.logger),this.publisher=new VUe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||GZ,this.projectId=e.projectId,Vke()?this.packageName=TF():Kke()&&(this.bundleId=TF()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return ho(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Jn.relay},uS.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Co.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Co.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,Pj({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Ch(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await yj())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=Ur(xe.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(as.message,e),await this.recordMessageEvent(e,uS.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(ea.disconnect,i),await Ch(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(ea.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(ea.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(ea.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,xe.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(KI())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ma(new ARe(Xke({sdkVersion:i3,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),nU(e)){if(!e.method.endsWith(ULe))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:Jn.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Pj({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else VN(e)&&this.events.emit(as.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,uS.inbound),this.events.emit(as.message,e))}async acknowledgePayload(e){const n=GN(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(ea.payload,this.onPayloadHandler),this.provider.off(ea.connect,this.onConnectHandler),this.provider.off(ea.disconnect,this.onDisconnectHandler),this.provider.off(ea.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await yj();ELe(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(nm.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&ALe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(as.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},xe.toMiliseconds($Le)))))}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function a$e(){}function Oj(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function kj(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Dj(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const c$e="[object RegExp]",l$e="[object String]",u$e="[object Number]",d$e="[object Boolean]",Lj="[object Arguments]",h$e="[object Symbol]",f$e="[object Date]",p$e="[object Map]",g$e="[object Set]",m$e="[object Array]",y$e="[object Function]",w$e="[object ArrayBuffer]",sO="[object Object]",b$e="[object Error]",v$e="[object DataView]",E$e="[object Uint8Array]",_$e="[object Uint8ClampedArray]",C$e="[object Uint16Array]",A$e="[object Uint32Array]",S$e="[object BigUint64Array]",I$e="[object Int8Array]",x$e="[object Int16Array]",N$e="[object Int32Array]",T$e="[object BigInt64Array]",R$e="[object Float32Array]",P$e="[object Float64Array]";function O$e(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function k$e(t,e,n){return mv(t,e,void 0,void 0,void 0,void 0,n)}function mv(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return nE(t,e,i,o)}return nE(t,e,i,o)}function nE(t,e,n,r){if(Object.is(t,e))return!0;let s=Dj(t),i=Dj(e);if(s===Lj&&(s=sO),i===Lj&&(i=sO),s!==i)return!1;switch(s){case l$e:return t.toString()===e.toString();case u$e:{const c=t.valueOf(),l=e.valueOf();return O$e(c,l)}case d$e:case f$e:case h$e:return Object.is(t.valueOf(),e.valueOf());case c$e:return t.source===e.source&&t.flags===e.flags;case y$e:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case p$e:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!mv(l,e.get(c),c,t,e,n,r))return!1;return!0}case g$e:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>mv(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case m$e:case E$e:case _$e:case C$e:case A$e:case S$e:case I$e:case x$e:case N$e:case T$e:case R$e:case P$e:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!mv(t[c],e[c],c,t,e,n,r))return!1;return!0}case w$e:return t.byteLength!==e.byteLength?!1:nE(new Uint8Array(t),new Uint8Array(e),n,r);case v$e:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:nE(new Uint8Array(t),new Uint8Array(e),n,r);case b$e:return t.name===e.name&&t.message===e.message;case sO:{if(!(nE(t.constructor,e.constructor,n,r)||Oj(t)&&Oj(e)))return!1;const c=[...Object.keys(t),...kj(t)],l=[...Object.keys(e),...kj(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!mv(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function D$e(t,e){return k$e(t,e,a$e)}var L$e=Object.defineProperty,Mj=Object.getOwnPropertySymbols,M$e=Object.prototype.hasOwnProperty,U$e=Object.prototype.propertyIsEnumerable,h3=(t,e,n)=>e in t?L$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Uj=(t,e)=>{for(var n in e||(e={}))M$e.call(e,n)&&h3(t,n,e[n]);if(Mj)for(var n of Mj(e))U$e.call(e,n)&&h3(t,n,e[n]);return t},ki=(t,e,n)=>h3(t,typeof e!="symbol"?e+"":e,n);class om extends B2e{constructor(e,n,r,s=Ul,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,ki(this,"map",new Map),ki(this,"version",BLe),ki(this,"cached",[]),ki(this,"initialized",!1),ki(this,"getKey"),ki(this,"storagePrefix",Ul),ki(this,"recentlyDeleted",[]),ki(this,"recentlyDeletedLimit",200),ki(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Is(o)?this.map.set(this.getKey(o),o):Z5e(o)?this.map.set(o.id,o):X5e(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),ki(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),ki(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),ki(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>D$e(a[c],o[c]))):this.values)),ki(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=Uj(Uj({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),ki(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Ls(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return ho(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=Te("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=Te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=Te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var $$e=Object.defineProperty,B$e=(t,e,n)=>e in t?$$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qt=(t,e,n)=>B$e(t,typeof e!="symbol"?e+"":e,n);class F$e{constructor(e,n){this.core=e,this.logger=n,qt(this,"name",WLe),qt(this,"version",HLe),qt(this,"events",new HM),qt(this,"pairings"),qt(this,"initialized",!1),qt(this,"storagePrefix",Ul),qt(this,"ignoredPayloadTypes",[Fu]),qt(this,"registeredMethods",[]),qt(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),qt(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),qt(this,"create",async r=>{this.isInitialized();const s=r3(),i=await this.core.crypto.setSymKey(s),o=Ur(xe.FIVE_MINUTES),a={protocol:HZ},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=cj({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(Jf.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),qt(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[Gc.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=aj(r.uri);s.props.properties.topic=i,s.addTrace(Gc.pairing_uri_validation_success),s.addTrace(Gc.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(Gc.existing_pairing),u.active)throw s.setError(iu.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(Gc.pairing_not_expired)}const d=c||Ur(xe.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(Gc.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(Jf.create,h),s.addTrace(Gc.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(Gc.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(iu.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(iu.subscribe_pairing_topic_failure),f}return s.addTrace(Gc.subscribe_pairing_topic_success),h}),qt(this,"activate",async({topic:r})=>{this.isInitialized();const s=Ur(xe.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),qt(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=zf();this.events.once(bn("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),qt(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),qt(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),qt(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),qt(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Rn("USER_DISCONNECTED")),await this.deletePairing(s))}),qt(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return cj({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),qt(this,"sendRequest",async(r,s,i)=>{const o=_h(s,i),a=await this.core.crypto.encode(r,o),c=Kb[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),qt(this,"sendResult",async(r,s,i)=>{const o=GN(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Kb[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),qt(this,"sendError",async(r,s,i)=>{const o=qN(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Kb[c]?Kb[c].res:Kb.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),qt(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Rn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),qt(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>$d(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),qt(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),qt(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),qt(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(Jf.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),qt(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{Kc(s)?this.events.emit(bn("pairing_ping",i),{}):ma(s)&&this.events.emit(bn("pairing_ping",i),{error:s.error})},500)}),qt(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(Jf.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),qt(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=Rn("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),qt(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Rn("WC_METHOD_UNSUPPORTED",r))}),qt(this,"isValidPair",(r,s)=>{var i;if(!$i(r)){const{message:a}=Te("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(iu.malformed_pairing_uri),new Error(a)}if(!J5e(r.uri)){const{message:a}=Te("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(iu.malformed_pairing_uri),new Error(a)}const o=aj(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=Te("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(iu.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=Te("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(iu.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&xe.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(iu.pairing_expired);const{message:a}=Te("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),qt(this,"isValidPing",async r=>{if(!$i(r)){const{message:i}=Te("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),qt(this,"isValidDisconnect",async r=>{if(!$i(r)){const{message:i}=Te("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),qt(this,"isValidPairingTopic",async r=>{if(!Pr(r,!1)){const{message:s}=Te("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=Te("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if($d(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=Te("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=Ls(n,this.name),this.pairings=new om(this.core,this.logger,this.name,this.storagePrefix)}get context(){return ho(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(as.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==Jn.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);nU(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):VN(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(aa.expired,async e=>{const{topic:n}=oZ(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(Jf.expire,{topic:n}))})}}var j$e=Object.defineProperty,z$e=(t,e,n)=>e in t?j$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bs=(t,e,n)=>z$e(t,typeof e!="symbol"?e+"":e,n);class W$e extends L2e{constructor(e,n){super(e,n),this.core=e,this.logger=n,bs(this,"records",new Map),bs(this,"events",new La.EventEmitter),bs(this,"name",GLe),bs(this,"version",qLe),bs(this,"cached",[]),bs(this,"initialized",!1),bs(this,"storagePrefix",Ul),bs(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),bs(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:Ur(xe.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(za.created,o)}),bs(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=ma(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(za.updated,s))}),bs(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),bs(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(za.deleted,i)}}),this.persist()}),bs(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),bs(this,"on",(r,s)=>{this.events.on(r,s)}),bs(this,"once",(r,s)=>{this.events.once(r,s)}),bs(this,"off",(r,s)=>{this.events.off(r,s)}),bs(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Ls(n,this.name)}get context(){return ho(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:_h(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=Te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(za.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=Te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(za.created,e=>{const n=za.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(za.updated,e=>{const n=za.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(za.deleted,e=>{const n=za.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(nm.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{xe.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(za.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var H$e=Object.defineProperty,G$e=(t,e,n)=>e in t?H$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ws=(t,e,n)=>G$e(t,typeof e!="symbol"?e+"":e,n);class q$e extends j2e{constructor(e,n){super(e,n),this.core=e,this.logger=n,Ws(this,"expirations",new Map),Ws(this,"events",new La.EventEmitter),Ws(this,"name",VLe),Ws(this,"version",KLe),Ws(this,"cached",[]),Ws(this,"initialized",!1),Ws(this,"storagePrefix",Ul),Ws(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ws(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),Ws(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(aa.created,{target:i,expiration:o})}),Ws(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),Ws(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(aa.deleted,{target:s,expiration:i})}}),Ws(this,"on",(r,s)=>{this.events.on(r,s)}),Ws(this,"once",(r,s)=>{this.events.once(r,s)}),Ws(this,"off",(r,s)=>{this.events.off(r,s)}),Ws(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Ls(n,this.name)}get context(){return ho(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return eDe(e);if(typeof e=="number")return tDe(e);const{message:n}=Te("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(aa.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=Te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=Te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;xe.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(aa.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(nm.pulse,()=>this.checkExpirations()),this.events.on(aa.created,e=>{const n=aa.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(aa.expired,e=>{const n=aa.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(aa.deleted,e=>{const n=aa.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var V$e=Object.defineProperty,K$e=(t,e,n)=>e in t?V$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rr=(t,e,n)=>K$e(t,typeof e!="symbol"?e+"":e,n);class Y$e extends z2e{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,Rr(this,"name",YLe),Rr(this,"abortController"),Rr(this,"isDevEnv"),Rr(this,"verifyUrlV3",JLe),Rr(this,"storagePrefix",Ul),Rr(this,"version",WZ),Rr(this,"publicKey"),Rr(this,"fetchPromise"),Rr(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&xe.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Rr(this,"register",async s=>{if(!ib()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=xg(),u=this.startAbortTimer(xe.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",y),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const y=m=>{if(m.data&&typeof m.data=="string")try{const w=JSON.parse(m.data);if(w.type==="verify_attestation"){if(DD(w.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",y),h(w.attestation===null?"":w.attestation)}}catch(w){this.logger.warn(w)}};l.body.appendChild(g),window.addEventListener("message",y,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),Rr(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(DD(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),Rr(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(xe.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Rr(this,"getVerifyUrl",s=>{let i=s||tE;return ZLe.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${tE}`),i=tE),i}),Rr(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(xe.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),Rr(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Rr(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Rr(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Rr(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Rr(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Rr(this,"validateAttestation",(s,i)=>{const o=R5e(s,i.publicKey),a={hasExpired:xe.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Ls(n,this.name),this.abortController=new AbortController,this.isDevEnv=rU(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return ho(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),xe.toMiliseconds(e))}}var Q$e=Object.defineProperty,J$e=(t,e,n)=>e in t?Q$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$j=(t,e,n)=>J$e(t,typeof e!="symbol"?e+"":e,n);class Z$e extends W2e{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,$j(this,"context",XLe),$j(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${eMe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=Ls(n,this.context)}}var X$e=Object.defineProperty,Bj=Object.getOwnPropertySymbols,eBe=Object.prototype.hasOwnProperty,tBe=Object.prototype.propertyIsEnumerable,f3=(t,e,n)=>e in t?X$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jb=(t,e)=>{for(var n in e||(e={}))eBe.call(e,n)&&f3(t,n,e[n]);if(Bj)for(var n of Bj(e))tBe.call(e,n)&&f3(t,n,e[n]);return t},Jr=(t,e,n)=>f3(t,typeof e!="symbol"?e+"":e,n);class nBe extends H2e{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,Jr(this,"context",nMe),Jr(this,"storagePrefix",Ul),Jr(this,"storageVersion",tMe),Jr(this,"events",new Map),Jr(this,"shouldPersist",!1),Jr(this,"init",async()=>{if(!rU())try{const s={eventId:PF(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:sZ(this.core.relayer.protocol,this.core.relayer.version,i3)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Jr(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=PF(),u=this.core.projectId||"",d=Date.now(),h=Jb({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),Jr(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Jb(Jb({},a),this.setMethods(a.eventId))}),Jr(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Jr(this,"setEventListeners",()=>{this.core.heartbeat.on(nm.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{xe.fromMiliseconds(Date.now())-xe.fromMiliseconds(s.timestamp)>rMe&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Jr(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Jr(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Jr(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Jr(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Jr(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,Jb(Jb({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Jr(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Jr(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${sMe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${i3}${i}`,{method:"POST",body:JSON.stringify(s)})}),Jr(this,"getAppDomain",()=>rZ().url),this.logger=Ls(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var rBe=Object.defineProperty,Fj=Object.getOwnPropertySymbols,sBe=Object.prototype.hasOwnProperty,iBe=Object.prototype.propertyIsEnumerable,p3=(t,e,n)=>e in t?rBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jj=(t,e)=>{for(var n in e||(e={}))sBe.call(e,n)&&p3(t,n,e[n]);if(Fj)for(var n of Fj(e))iBe.call(e,n)&&p3(t,n,e[n]);return t},zn=(t,e,n)=>p3(t,typeof e!="symbol"?e+"":e,n);let oBe=class rX extends P2e{constructor(e){var n;super(e),zn(this,"protocol",zZ),zn(this,"version",WZ),zn(this,"name",s3),zn(this,"relayUrl"),zn(this,"projectId"),zn(this,"customStoragePrefix"),zn(this,"events",new La.EventEmitter),zn(this,"logger"),zn(this,"heartbeat"),zn(this,"relayer"),zn(this,"crypto"),zn(this,"storage"),zn(this,"history"),zn(this,"expirer"),zn(this,"pairing"),zn(this,"verify"),zn(this,"echoClient"),zn(this,"linkModeSupportedApps"),zn(this,"eventClient"),zn(this,"initialized",!1),zn(this,"logChunkController"),zn(this,"on",(a,c)=>this.events.on(a,c)),zn(this,"once",(a,c)=>this.events.once(a,c)),zn(this,"off",(a,c)=>this.events.off(a,c)),zn(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),zn(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:Jn.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||GZ,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=sm({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:ILe.logger,name:s3}),{logger:i,chunkLoggerController:o}=FN({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Ls(i,this.name),this.heartbeat=new UAe,this.crypto=new kUe(this,this.logger,e==null?void 0:e.keychain),this.history=new W$e(this,this.logger),this.expirer=new q$e(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new N2e(jj(jj({},xLe),e==null?void 0:e.storageOptions)),this.relayer=new o$e({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new F$e(this,this.logger),this.verify=new Y$e(this,this.logger,this.storage),this.echoClient=new Z$e(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new nBe(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new rX(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(FLe,r),n}get context(){return ho(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(vj,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(vj)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&SLe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const aBe=oBe,sX="wc",iX=2,oX="client",dU=`${sX}@${iX}:${oX}:`,iO={name:oX,logger:"error"},zj="WALLETCONNECT_DEEPLINK_CHOICE",cBe="proposal",Wj="Proposal expired",lBe="session",Om=xe.SEVEN_DAYS,uBe="engine",Zr={wc_sessionPropose:{req:{ttl:xe.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:1104},res:{ttl:xe.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:1106},res:{ttl:xe.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:xe.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:xe.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:1112},res:{ttl:xe.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:1114},res:{ttl:xe.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:xe.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:xe.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1119}}},oO={min:xe.FIVE_MINUTES,max:xe.SEVEN_DAYS},jc={idle:"IDLE",active:"ACTIVE"},Hj={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},dBe="request",hBe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],fBe="wc",pBe="auth",gBe="authKeys",mBe="pairingTopics",yBe="requests",sT=`${fBe}@${1.5}:${pBe}:`,dS=`${sT}:PUB_KEY`;var wBe=Object.defineProperty,bBe=Object.defineProperties,vBe=Object.getOwnPropertyDescriptors,Gj=Object.getOwnPropertySymbols,EBe=Object.prototype.hasOwnProperty,_Be=Object.prototype.propertyIsEnumerable,g3=(t,e,n)=>e in t?wBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bn=(t,e)=>{for(var n in e||(e={}))EBe.call(e,n)&&g3(t,n,e[n]);if(Gj)for(var n of Gj(e))_Be.call(e,n)&&g3(t,n,e[n]);return t},ri=(t,e)=>bBe(t,vBe(e)),be=(t,e,n)=>g3(t,typeof e!="symbol"?e+"":e,n);class CBe extends K2e{constructor(e){super(e),be(this,"name",uBe),be(this,"events",new HM),be(this,"initialized",!1),be(this,"requestQueue",{state:jc.idle,queue:[]}),be(this,"sessionRequestQueue",{state:jc.idle,queue:[]}),be(this,"requestQueueDelay",xe.ONE_SECOND),be(this,"expectedPairingMethodMap",new Map),be(this,"recentlyDeletedMap",new Map),be(this,"recentlyDeletedLimit",200),be(this,"relayMessageCache",[]),be(this,"pendingSessions",new Map),be(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Zr)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},xe.toMiliseconds(this.requestQueueDelay)))}),be(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=ri(Bn({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=q5e(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const S=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=S.active}}catch(S){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),S}if(!u||!h){const{topic:S,uri:x}=await this.client.core.pairing.create();u=S,d=x}if(!u){const{message:S}=Te("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(S)}const f=await this.client.core.crypto.generateKeyPair(),p=Zr.wc_sessionPropose.req.ttl||xe.FIVE_MINUTES,g=Ur(p),y=ri(Bn(Bn({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:HZ}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Vc()}),m=bn("session_connect",y.id),{reject:w,resolve:v,done:A}=zf(p,Wj),C=({id:S})=>{S===y.id&&(this.client.events.off("proposal_expire",C),this.pendingSessions.delete(y.id),this.events.emit(m,{error:{message:Wj,code:0}}))};return this.client.events.on("proposal_expire",C),this.events.once(m,({error:S,session:x})=>{this.client.events.off("proposal_expire",C),S?w(S):x&&v(x)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:y,throwOnFailedPublish:!0,clientRpcId:y.id}),await this.setProposal(y.id,y),{uri:d,approval:A}}),be(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),be(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[Wa.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(I){throw o.setError(Pf.no_internet_connection),I}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(I){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(Pf.proposal_not_found),I}try{await this.isValidApprove(n)}catch(I){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Pf.session_approve_namespace_validation_failure),I}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:y,optionalNamespaces:m}=f;let w=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});w||(w=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Wa.session_approve_started,properties:{topic:p,trace:[Wa.session_approve_started,Wa.session_namespaces_validation_success]}}));const v=await this.client.core.crypto.generateKeyPair(),A=g.publicKey,C=await this.client.core.crypto.generateSharedKey(v,A),S=Bn(Bn(Bn({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:v,metadata:this.client.metadata},expiry:Ur(Om)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),x=Jn.relay;w.addTrace(Wa.subscribing_session_topic);try{await this.client.core.relayer.subscribe(C,{transportType:x})}catch(I){throw w.setError(Pf.subscribe_session_topic_failure),I}w.addTrace(Wa.subscribe_session_topic_success);const T=ri(Bn({},S),{topic:C,requiredNamespaces:y,optionalNamespaces:m,pairingTopic:p,acknowledged:!1,self:S.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:v,transportType:Jn.relay});await this.client.session.set(C,T),w.addTrace(Wa.store_session);try{w.addTrace(Wa.publishing_session_settle),await this.sendRequest({topic:C,method:"wc_sessionSettle",params:S,throwOnFailedPublish:!0}).catch(I=>{throw w==null||w.setError(Pf.session_settle_publish_failure),I}),w.addTrace(Wa.session_settle_publish_success),w.addTrace(Wa.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:v},throwOnFailedPublish:!0}).catch(I=>{throw w==null||w.setError(Pf.session_approve_publish_failure),I}),w.addTrace(Wa.session_approve_publish_success)}catch(I){throw this.client.logger.error(I),this.client.session.delete(C,Rn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(C),I}return this.client.core.eventClient.deleteEvent({eventId:w.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,Rn("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(C,Ur(Om)),{topic:C,acknowledged:()=>Promise.resolve(this.client.session.get(C))}}),be(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&(await this.sendError({id:r,topic:i,error:s,rpcOpts:Zr.wc_sessionPropose.reject}),await this.client.proposal.delete(r,Rn("USER_DISCONNECTED")))}),be(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=zf(),c=Vc(),l=gp().toString(),u=this.client.session.get(r).namespaces;return this.events.once(bn("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),be(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=Vc(),{done:i,resolve:o,reject:a}=zf();return this.events.once(bn("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,Ur(Om)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),be(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(m){throw this.client.logger.error("request() -> isValidRequest() failed"),m}const{chainId:r,request:s,topic:i,expiry:o=Zr.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===Jn.relay&&await this.confirmOnlineStateOrThrow();const c=Vc(),l=gp().toString(),{done:u,resolve:d,reject:h}=zf(o,"Request expired. Please try again.");this.events.once(bn("session_request",c),({error:m,result:w})=>{m?h(m):d(w)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:ri(Bn({},s),{expiryTimestamp:Ur(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(m=>h(m)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:ri(Bn({},s),{expiryTimestamp:Ur(o)}),chainId:r},y=this.shouldSetTVF(f,g);return await Promise.all([new Promise(async m=>{await this.sendRequest(Bn({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0},y&&{tvf:this.getTVFParams(c,g)})).catch(w=>h(w)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),m()}),new Promise(async m=>{var w;if(!((w=a.sessionConfig)!=null&&w.disableDeepLink)){const v=await iDe(this.client.core.storage,zj);await nDe({id:c,topic:i,wcDeepLink:v})}m()}),u()]).then(m=>m[2])}),be(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===Jn.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Kc(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):ma(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),be(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=Vc(),i=gp().toString(),{done:o,resolve:a,reject:c}=zf();this.events.once(bn("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),be(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=gp().toString(),a=Vc();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),be(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Rn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=Te("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),be(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>Y5e(r,n)))),be(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),be(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Jn.link_mode:Jn.relay;o===Jn.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:y}=n,m=[...n.resources||[]],{topic:w,uri:v}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:w,uri:v}});const A=await this.client.core.crypto.generateKeyPair(),C=lS(A);if(await Promise.all([this.client.auth.authKeys.set(dS,{responseTopic:C,publicKey:A}),this.client.auth.pairingTopics.set(C,{topic:C,pairingTopic:w})]),await this.client.core.relayer.subscribe(C,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${w}`),g.length>0){const{namespace:L}=By(a[0]);let F=JDe(L,"request",g);cS(m)&&(F=XDe(F,m.pop())),m.push(F)}const S=y&&y>Zr.wc_sessionAuthenticate.req.ttl?y:Zr.wc_sessionAuthenticate.req.ttl,x={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:m},requester:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Ur(S)},T={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},I={requiredNamespaces:{},optionalNamespaces:T,relays:[{protocol:"irn"}],pairingTopic:w,proposer:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Ur(Zr.wc_sessionPropose.req.ttl),id:Vc()},{done:k,resolve:O,reject:B}=zf(S,"Request expired"),G=Vc(),W=bn("session_connect",I.id),R=bn("session_request",G),N=async({error:L,session:F})=>{this.events.off(R,M),L?B(L):F&&O({session:F})},M=async L=>{var F,V,Z;if(await this.deletePendingAuthRequest(G,{message:"fulfilled",code:0}),L.error){const pe=Rn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return L.error.code===pe.code?void 0:(this.events.off(W,N),B(L.error.message))}await this.deleteProposal(I.id),this.events.off(W,N);const{cacaos:ae,responder:re}=L.result,le=[],we=[];for(const pe of ae){await BF({cacao:pe,projectId:this.client.core.projectId})||(this.client.logger.error(pe,"Signature verification failed"),B(Rn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:he}=pe,Ee=cS(he.resources),We=[KD(he.iss)],ue=YI(he.iss);if(Ee){const Ae=FF(Ee),ke=jF(Ee);le.push(...Ae),We.push(...ke)}for(const Ae of We)we.push(`${Ae}:${ue}`)}const ee=await this.client.core.crypto.generateSharedKey(A,re.publicKey);let ce;le.length>0&&(ce={topic:ee,acknowledged:!0,self:{publicKey:A,metadata:this.client.metadata},peer:re,controller:re.publicKey,expiry:Ur(Om),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:w,namespaces:hj([...new Set(le)],[...new Set(we)]),transportType:o},await this.client.core.relayer.subscribe(ee,{transportType:o}),await this.client.session.set(ee,ce),w&&await this.client.core.pairing.updateMetadata({topic:w,metadata:re.metadata}),ce=this.client.session.get(ee)),(F=this.client.metadata.redirect)!=null&&F.linkMode&&(V=re.metadata.redirect)!=null&&V.linkMode&&(Z=re.metadata.redirect)!=null&&Z.universal&&r&&(this.client.core.addLinkModeSupportedApp(re.metadata.redirect.universal),this.client.session.update(ee,{transportType:Jn.link_mode})),O({auths:ae,session:ce})};this.events.once(W,N),this.events.once(R,M);let P;try{if(i){const L=_h("wc_sessionAuthenticate",x,G);this.client.core.history.set(w,L);const F=await this.client.core.crypto.encode("",L,{type:ZC,encoding:Wd});P=fA(r,w,F)}else await Promise.all([this.sendRequest({topic:w,method:"wc_sessionAuthenticate",params:x,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:G}),this.sendRequest({topic:w,method:"wc_sessionPropose",params:I,expiry:Zr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:I.id})])}catch(L){throw this.events.off(W,N),this.events.off(R,M),L}return await this.setProposal(I.id,I),await this.setAuthRequest(G,{request:ri(Bn({},x),{verifyContext:{}}),pairingTopic:w,transportType:o}),{uri:P??v,response:k}}),be(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Of.authenticated_session_approve_started]}});try{this.isInitialized()}catch(y){throw i.setError(Yb.no_internet_connection),y}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(Yb.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||Jn.relay;a===Jn.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=lS(c),d={type:Fu,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const y of s){if(!await BF({cacao:y,projectId:this.client.core.projectId})){i.setError(Yb.invalid_cacao);const C=Rn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:C,encodeOpts:d}),new Error(C.message)}i.addTrace(Of.cacaos_verified);const{p:m}=y,w=cS(m.resources),v=[KD(m.iss)],A=YI(m.iss);if(w){const C=FF(w),S=jF(w);h.push(...C),v.push(...S)}for(const C of v)f.push(`${C}:${A}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(Of.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Ur(Om),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:hj([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(Of.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(y){throw i.setError(Yb.subscribe_authenticated_session_topic_failure),y}i.addTrace(Of.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(Of.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Of.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(y){throw i.setError(Yb.authenticated_session_approve_publish_failure),y}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),be(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===Jn.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=lS(o),l={type:Fu,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:Zr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,Rn("USER_DISCONNECTED"))}),be(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return gZ(r,s)}),be(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),be(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),be(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Rn("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(zj).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,Rn("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=jc.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),be(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Pf.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,Rn("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),be(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=jc.idle,this.client.events.emit("session_request_expire",{id:n}))}),be(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),be(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),be(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Ur(Zr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),be(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=Jn.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),be(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||Ur(Zr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),be(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=_h(s,i,c);let f;const p=!!u;try{const m=p?Wd:wc;f=await this.client.core.crypto.encode(r,h,{encoding:m})}catch(m){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),m}let g;if(hBe.includes(s)){const m=dl(JSON.stringify(h)),w=dl(f);g=await this.client.core.verify.register({id:w,decryptedId:m})}const y=Zr[s].req;if(y.attestation=g,o&&(y.ttl=o),a&&(y.id=a),this.client.core.history.set(r,h),p){const m=fA(u,r,f);await global.Linking.openURL(m,this.client.name)}else{const m=Zr[s].req;o&&(m.ttl=o),a&&(m.id=a),m.tvf=ri(Bn({},d),{correlationId:h.id}),l?(m.internal=ri(Bn({},m.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,m)):this.client.core.relayer.publish(r,f,m).catch(w=>this.client.logger.error(w))}return h.id}),be(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=GN(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?Wd:wc;u=await this.client.core.crypto.encode(s,l,ri(Bn({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{this.shouldSetTVF(p.method,p.params)&&(f=this.getTVFParams(r,p.params,i))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=fA(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=Zr[p].res;g.tvf=ri(Bn({},f),{correlationId:r}),o?(g.internal=ri(Bn({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(y=>this.client.logger.error(y))}await this.client.core.history.resolve(l)}),be(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=qN(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?Wd:wc;u=await this.client.core.crypto.encode(s,l,ri(Bn({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=fA(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||Zr[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),be(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;$d(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{$d(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),be(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),be(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),be(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===jc.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=jc.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=jc.idle}),be(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),be(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),be(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=Te("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),be(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),be(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(iu.proposal_listener_not_found)),this.isValidConnect(Bn({},s.params));const u=a.expiryTimestamp||Ur(Zr.wc_sessionPropose.req.ttl),d=Bn({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:dl(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(Gc.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:Zr.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),be(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(Kc(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(ma(r)){await this.client.proposal.delete(i,Rn("USER_DISCONNECTED"));const o=bn("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),be(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(y=>y.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=ri(Bn(Bn(Bn({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:Jn.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(bn("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),be(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;Kc(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(bn("session_approve",s),{})):ma(r)&&(await this.client.session.delete(n,Rn("USER_DISCONNECTED")),this.events.emit(bn("session_approve",s),{error:r.error}))}),be(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=Vb.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:Rn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Bn({topic:n},s));try{Vb.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw Vb.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),be(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),be(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=bn("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Kc(r)?this.events.emit(bn("session_update",s),{}):ma(r)&&this.events.emit(bn("session_update",s),{error:r.error})}),be(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Ur(Om)),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),be(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=bn("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Kc(r)?this.events.emit(bn("session_extend",s),{}):ma(r)&&this.events.emit(bn("session_extend",s),{error:r.error})}),be(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),be(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=bn("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Kc(r)?this.events.emit(bn("session_ping",s),{}):ma(r)&&this.events.emit(bn("session_ping",s),{error:r.error})},500)}),be(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(as.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:Rn("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),be(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(Bn({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:dl(JSON.stringify(_h("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===Jn.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),be(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=bn("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Kc(r)?this.events.emit(bn("session_request",s),{result:r.result}):ma(r)&&this.events.emit(bn("session_request",s),{error:r.error})}),be(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=Vb.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Bn({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),Vb.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),be(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Kc(r)?this.events.emit(bn("session_request",s),{result:r.result}):ma(r)&&this.events.emit(bn("session_request",s),{error:r.error})}),be(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:dl(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===Jn.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:Fu,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:Zr.wc_sessionAuthenticate.autoReject,appLink:h})}}),be(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),be(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=jc.idle,this.processSessionRequestQueue()},xe.toMiliseconds(this.requestQueueDelay))}),be(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=bn("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(bn("session_request",i.request.id),{error:r})})}),be(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===jc.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=jc.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),be(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),be(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:_h("wc_sessionPropose",ri(Bn({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),be(this,"isValidConnect",async n=>{if(!$i(n)){const{message:l}=Te("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Is(r)||await this.isValidPairingTopic(r),!aLe(c)){const{message:l}=Te("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Is(s)&&qh(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!Is(i)&&qh(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Is(o)||this.validateSessionProps(o,"sessionProperties"),!Is(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),be(this,"validateNamespaces",(n,r)=>{const s=oLe(n,"connect()",r);if(s)throw new Error(s.message)}),be(this,"isValidApprove",async n=>{if(!$i(n))throw new Error(Te("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=XP(s,"approve()");if(l)throw new Error(l.message);const u=gj(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!Pr(i,!0)){const{message:d}=Te("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(Is(o)||this.validateSessionProps(o,"sessionProperties"),!Is(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),be(this,"isValidReject",async n=>{if(!$i(n)){const{message:i}=Te("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!lLe(s)){const{message:i}=Te("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),be(this,"isValidSessionSettleRequest",n=>{if(!$i(n)){const{message:l}=Te("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!jZ(r)){const{message:l}=Te("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=eLe(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=XP(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if($d(o)){const{message:l}=Te("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),be(this,"isValidUpdate",async n=>{if(!$i(n)){const{message:c}=Te("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=XP(s,"update()");if(o)throw new Error(o.message);const a=gj(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),be(this,"isValidExtend",async n=>{if(!$i(n)){const{message:s}=Te("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),be(this,"isValidRequest",async n=>{if(!$i(n)){const{message:c}=Te("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!pj(a,i)){const{message:c}=Te("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!uLe(s)){const{message:c}=Te("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!fLe(a,i,s.method)){const{message:c}=Te("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!yLe(o,oO)){const{message:c}=Te("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${oO.min} and ${oO.max}`);throw new Error(c)}}),be(this,"isValidRespond",async n=>{var r;if(!$i(n)){const{message:o}=Te("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!dLe(i)){const{message:o}=Te("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),be(this,"isValidPing",async n=>{if(!$i(n)){const{message:s}=Te("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),be(this,"isValidEmit",async n=>{if(!$i(n)){const{message:a}=Te("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!pj(o,i)){const{message:a}=Te("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!hLe(s)){const{message:a}=Te("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!pLe(o,i,s.name)){const{message:a}=Te("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),be(this,"isValidDisconnect",async n=>{if(!$i(n)){const{message:s}=Te("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),be(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Pr(s,!1))throw new Error("uri is required parameter");if(!Pr(i,!1))throw new Error("domain is required parameter");if(!Pr(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>By(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=By(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),be(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||tE,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Jn.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),be(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=Te("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),be(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),be(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),be(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=Te("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),be(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==Jn.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),be(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),be(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=RF(n,"topic")||"",s=decodeURIComponent(RF(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:Jn.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),be(this,"registerLinkModeListeners",async()=>{var n;if(rU()||bf()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),be(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:s}=r;return Object.keys(Hj).includes(s.method)}),be(this,"getTVFParams",(n,r,s)=>{var i,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,s);return ri(Bn({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(i=r.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),be(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),be(this,"extractTxHashesFromResult",(n,r)=>{try{const s=Hj[n];if(typeof r=="string")return[r];const i=r[s.key];if(Gh(i))return n==="solana_signAllTransactions"?i.map(o=>UDe(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(as.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(dS)?this.client.auth.authKeys.get(dS):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===Jn.link_mode?Wd:wc});nU(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:dl(r)})):VN(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(aa.expired,async e=>{const{topic:n,id:r}=oZ(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,Te("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,Te("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(Jf.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Jf.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Pr(e,!1)){const{message:n}=Te("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=Te("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if($d(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=Te("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!Pr(e,!1)){const{message:n}=Te("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=Te("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if($d(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=Te("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=Te("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Pr(e,!1)){const{message:n}=Te("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=Te("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!cLe(e)){const{message:n}=Te("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=Te("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if($d(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=Te("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class ABe extends om{constructor(e,n){super(e,n,cBe,dU),this.core=e,this.logger=n}}let SBe=class extends om{constructor(e,n){super(e,n,lBe,dU),this.core=e,this.logger=n}};class IBe extends om{constructor(e,n){super(e,n,dBe,dU,r=>r.id),this.core=e,this.logger=n}}class xBe extends om{constructor(e,n){super(e,n,gBe,sT,()=>dS),this.core=e,this.logger=n}}class NBe extends om{constructor(e,n){super(e,n,mBe,sT),this.core=e,this.logger=n}}class TBe extends om{constructor(e,n){super(e,n,yBe,sT,r=>r.id),this.core=e,this.logger=n}}var RBe=Object.defineProperty,PBe=(t,e,n)=>e in t?RBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,aO=(t,e,n)=>PBe(t,typeof e!="symbol"?e+"":e,n);class OBe{constructor(e,n){this.core=e,this.logger=n,aO(this,"authKeys"),aO(this,"pairingTopics"),aO(this,"requests"),this.authKeys=new xBe(this.core,this.logger),this.pairingTopics=new NBe(this.core,this.logger),this.requests=new TBe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var kBe=Object.defineProperty,DBe=(t,e,n)=>e in t?kBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vt=(t,e,n)=>DBe(t,typeof e!="symbol"?e+"":e,n);let LBe=class aX extends V2e{constructor(e){super(e),Vt(this,"protocol",sX),Vt(this,"version",iX),Vt(this,"name",iO.name),Vt(this,"metadata"),Vt(this,"core"),Vt(this,"logger"),Vt(this,"events",new La.EventEmitter),Vt(this,"engine"),Vt(this,"session"),Vt(this,"proposal"),Vt(this,"pendingRequest"),Vt(this,"auth"),Vt(this,"signConfig"),Vt(this,"on",(r,s)=>this.events.on(r,s)),Vt(this,"once",(r,s)=>this.events.once(r,s)),Vt(this,"off",(r,s)=>this.events.off(r,s)),Vt(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),Vt(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Vt(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Vt(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),Vt(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||iO.name,this.metadata=Qke(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:zC(sm({level:(e==null?void 0:e.logger)||iO.logger}));this.core=(e==null?void 0:e.core)||new aBe(e),this.logger=Ls(n,this.name),this.session=new SBe(this.core,this.logger),this.proposal=new ABe(this.core,this.logger),this.pendingRequest=new IBe(this.core,this.logger),this.engine=new CBe(this),this.auth=new OBe(this.core,this.logger)}static async init(e){const n=new aX(e);return await n.initialize(),n}get context(){return ho(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},xe.toMiliseconds(xe.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const qj="error",MBe="wss://relay.walletconnect.org",UBe="wc",$Be="universal_provider",gA=`${UBe}@2:${$Be}:`,cX="https://rpc.walletconnect.org/v1/",Zm="generic",BBe=`${cX}bundler`,Ua={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function FBe(){}function hU(t){return t==null||typeof t!="object"&&typeof t!="function"}function fU(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function jBe(t){if(hU(t))return t;if(Array.isArray(t)||fU(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function Vj(t){return typeof t=="object"&&t!==null}function lX(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function uX(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const zBe="[object RegExp]",dX="[object String]",hX="[object Number]",fX="[object Boolean]",pX="[object Arguments]",WBe="[object Symbol]",HBe="[object Date]",GBe="[object Map]",qBe="[object Set]",VBe="[object Array]",KBe="[object ArrayBuffer]",YBe="[object Object]",QBe="[object DataView]",JBe="[object Uint8Array]",ZBe="[object Uint8ClampedArray]",XBe="[object Uint16Array]",e6e="[object Uint32Array]",t6e="[object Int8Array]",n6e="[object Int16Array]",r6e="[object Int32Array]",s6e="[object Float32Array]",i6e="[object Float64Array]";function o6e(t,e){return vy(t,void 0,t,new Map,e)}function vy(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(hU(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=vy(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,vy(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(vy(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(fU(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=vy(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),Zf(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),Zf(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),Zf(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Zf(o,t,n,r,s),o}if(typeof t=="object"&&a6e(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),Zf(o,t,n,r,s),o}return t}function Zf(t,e,n=t,r,s){const i=[...Object.keys(e),...lX(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=vy(e[a],a,n,r,s))}}function a6e(t){switch(uX(t)){case pX:case VBe:case KBe:case QBe:case fX:case HBe:case s6e:case i6e:case t6e:case n6e:case r6e:case GBe:case hX:case YBe:case zBe:case qBe:case dX:case WBe:case JBe:case ZBe:case XBe:case e6e:return!0;default:return!1}}function c6e(t,e){return o6e(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case hX:case dX:case fX:{const o=new t.constructor(t==null?void 0:t.valueOf());return Zf(o,t),o}case pX:{const o={};return Zf(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function Kj(t){return c6e(t)}function Yj(t){return t!==null&&typeof t=="object"&&uX(t)==="[object Arguments]"}function l6e(t){return fU(t)}function u6e(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function d6e(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=m3(s,o,r,new Map)}return s}function m3(t,e,n,r){if(hU(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return jBe(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...lX(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(Yj(a)&&(a={...a}),Yj(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=Kj(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||Vj(c)&&Vj(a)?t[o]=m3(c,a,n,r):c==null&&u6e(a)?t[o]=m3({},a,n,r):c==null&&l6e(a)?t[o]=Kj(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function h6e(t,...e){return d6e(t,...e,FBe)}var f6e=Object.defineProperty,p6e=Object.defineProperties,g6e=Object.getOwnPropertyDescriptors,Qj=Object.getOwnPropertySymbols,m6e=Object.prototype.hasOwnProperty,y6e=Object.prototype.propertyIsEnumerable,Jj=(t,e,n)=>e in t?f6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mA=(t,e)=>{for(var n in e||(e={}))m6e.call(e,n)&&Jj(t,n,e[n]);if(Qj)for(var n of Qj(e))y6e.call(e,n)&&Jj(t,n,e[n]);return t},w6e=(t,e)=>p6e(t,g6e(e));function zo(t,e,n){var r;const s=By(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${cX}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function am(t){return t.includes(":")?t.split(":")[1]:t}function gX(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function b6e(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function yA(t={},e={}){const n=Zj(t),r=Zj(e);return h6e(n,r)}function Zj(t){var e,n,r,s,i;const o={};if(!qh(t))return o;for(const[a,c]of Object.entries(t)){const l=nT(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=by(a);o[f]=w6e(mA(mA({},o[f]),c),{chains:Nl(l,(e=o[f])==null?void 0:e.chains),methods:Nl(u,(n=o[f])==null?void 0:n.methods),events:Nl(d,(r=o[f])==null?void 0:r.events)}),(qh(h)||qh(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=mA(mA({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function Xj(t){return t.includes(":")?t.split(":")[2]:t}function e9(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=nT(n)?[n]:r.chains?r.chains:gX(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function cO(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const mX={},un=t=>mX[t],lO=(t,e)=>{mX[t]=e};var v6e=Object.defineProperty,E6e=(t,e,n)=>e in t?v6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,km=(t,e,n)=>E6e(t,typeof e!="symbol"?e+"":e,n);class _6e{constructor(e){km(this,"name","polkadot"),km(this,"client"),km(this,"httpProviders"),km(this,"events"),km(this,"namespace"),km(this,"chainId"),this.namespace=e.namespace,this.events=un("events"),this.client=un("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Ua.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=am(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ma(new Pc(r,un("disableProviderPing")))}}var C6e=Object.defineProperty,A6e=Object.defineProperties,S6e=Object.getOwnPropertyDescriptors,t9=Object.getOwnPropertySymbols,I6e=Object.prototype.hasOwnProperty,x6e=Object.prototype.propertyIsEnumerable,y3=(t,e,n)=>e in t?C6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,n9=(t,e)=>{for(var n in e||(e={}))I6e.call(e,n)&&y3(t,n,e[n]);if(t9)for(var n of t9(e))x6e.call(e,n)&&y3(t,n,e[n]);return t},r9=(t,e)=>A6e(t,S6e(e)),Dm=(t,e,n)=>y3(t,typeof e!="symbol"?e+"":e,n);class N6e{constructor(e){Dm(this,"name","eip155"),Dm(this,"client"),Dm(this,"chainId"),Dm(this,"namespace"),Dm(this,"httpProviders"),Dm(this,"events"),this.namespace=e.namespace,this.events=un("events"),this.client=un("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(Ua.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||zo(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ma(new Pc(r,un("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(am(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:r9(n9({},u.sessionProperties||{}),{capabilities:r9(n9({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_h("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${BBe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var T6e=Object.defineProperty,R6e=(t,e,n)=>e in t?T6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lm=(t,e,n)=>R6e(t,typeof e!="symbol"?e+"":e,n);class P6e{constructor(e){Lm(this,"name","solana"),Lm(this,"client"),Lm(this,"httpProviders"),Lm(this,"events"),Lm(this,"namespace"),Lm(this,"chainId"),this.namespace=e.namespace,this.events=un("events"),this.client=un("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Ua.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=am(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ma(new Pc(r,un("disableProviderPing")))}}var O6e=Object.defineProperty,k6e=(t,e,n)=>e in t?O6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mm=(t,e,n)=>k6e(t,typeof e!="symbol"?e+"":e,n);class D6e{constructor(e){Mm(this,"name","cosmos"),Mm(this,"client"),Mm(this,"httpProviders"),Mm(this,"events"),Mm(this,"namespace"),Mm(this,"chainId"),this.namespace=e.namespace,this.events=un("events"),this.client=un("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Ua.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=am(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ma(new Pc(r,un("disableProviderPing")))}}var L6e=Object.defineProperty,M6e=(t,e,n)=>e in t?L6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Um=(t,e,n)=>M6e(t,typeof e!="symbol"?e+"":e,n);class U6e{constructor(e){Um(this,"name","algorand"),Um(this,"client"),Um(this,"httpProviders"),Um(this,"events"),Um(this,"namespace"),Um(this,"chainId"),this.namespace=e.namespace,this.events=un("events"),this.client=un("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||zo(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(Ua.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zo(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Ma(new Pc(r,un("disableProviderPing")))}}var $6e=Object.defineProperty,B6e=(t,e,n)=>e in t?$6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$m=(t,e,n)=>B6e(t,typeof e!="symbol"?e+"":e,n);class F6e{constructor(e){$m(this,"name","cip34"),$m(this,"client"),$m(this,"httpProviders"),$m(this,"events"),$m(this,"namespace"),$m(this,"chainId"),this.namespace=e.namespace,this.events=un("events"),this.client=un("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Ua.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=am(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ma(new Pc(r,un("disableProviderPing")))}}var j6e=Object.defineProperty,z6e=(t,e,n)=>e in t?j6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bm=(t,e,n)=>z6e(t,typeof e!="symbol"?e+"":e,n);class W6e{constructor(e){Bm(this,"name","elrond"),Bm(this,"client"),Bm(this,"httpProviders"),Bm(this,"events"),Bm(this,"namespace"),Bm(this,"chainId"),this.namespace=e.namespace,this.events=un("events"),this.client=un("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Ua.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=am(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ma(new Pc(r,un("disableProviderPing")))}}var H6e=Object.defineProperty,G6e=(t,e,n)=>e in t?H6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fm=(t,e,n)=>G6e(t,typeof e!="symbol"?e+"":e,n);class q6e{constructor(e){Fm(this,"name","multiversx"),Fm(this,"client"),Fm(this,"httpProviders"),Fm(this,"events"),Fm(this,"namespace"),Fm(this,"chainId"),this.namespace=e.namespace,this.events=un("events"),this.client=un("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Ua.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=am(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ma(new Pc(r,un("disableProviderPing")))}}var V6e=Object.defineProperty,K6e=(t,e,n)=>e in t?V6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jm=(t,e,n)=>K6e(t,typeof e!="symbol"?e+"":e,n);class Y6e{constructor(e){jm(this,"name","near"),jm(this,"client"),jm(this,"httpProviders"),jm(this,"events"),jm(this,"namespace"),jm(this,"chainId"),this.namespace=e.namespace,this.events=un("events"),this.client=un("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||zo(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Ua.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zo(e,this.namespace);return typeof r>"u"?void 0:new Ma(new Pc(r,un("disableProviderPing")))}}var Q6e=Object.defineProperty,J6e=(t,e,n)=>e in t?Q6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zm=(t,e,n)=>J6e(t,typeof e!="symbol"?e+"":e,n);class Z6e{constructor(e){zm(this,"name","tezos"),zm(this,"client"),zm(this,"httpProviders"),zm(this,"events"),zm(this,"namespace"),zm(this,"chainId"),this.namespace=e.namespace,this.events=un("events"),this.client=un("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||zo(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Ua.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zo(e,this.namespace);return typeof r>"u"?void 0:new Ma(new Pc(r))}}var X6e=Object.defineProperty,e8e=(t,e,n)=>e in t?X6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wm=(t,e,n)=>e8e(t,typeof e!="symbol"?e+"":e,n);class t8e{constructor(e){Wm(this,"name",Zm),Wm(this,"client"),Wm(this,"httpProviders"),Wm(this,"events"),Wm(this,"namespace"),Wm(this,"chainId"),this.namespace=e.namespace,this.events=un("events"),this.client=un("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Ua.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=By(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ma(new Pc(r,un("disableProviderPing")))}}var n8e=Object.defineProperty,r8e=Object.defineProperties,s8e=Object.getOwnPropertyDescriptors,s9=Object.getOwnPropertySymbols,i8e=Object.prototype.hasOwnProperty,o8e=Object.prototype.propertyIsEnumerable,w3=(t,e,n)=>e in t?n8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wA=(t,e)=>{for(var n in e||(e={}))i8e.call(e,n)&&w3(t,n,e[n]);if(s9)for(var n of s9(e))o8e.call(e,n)&&w3(t,n,e[n]);return t},uO=(t,e)=>r8e(t,s8e(e)),ta=(t,e,n)=>w3(t,typeof e!="symbol"?e+"":e,n);let a8e=class yX{constructor(e){ta(this,"client"),ta(this,"namespaces"),ta(this,"optionalNamespaces"),ta(this,"sessionProperties"),ta(this,"scopedProperties"),ta(this,"events",new HM),ta(this,"rpcProviders",{}),ta(this,"session"),ta(this,"providerOpts"),ta(this,"logger"),ta(this,"uri"),ta(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:zC(sm({level:(e==null?void 0:e.logger)||qj})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new yX(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:wA({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,GN(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Rn("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=e9(this.session.namespaces);this.namespaces=yA(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=e9(s.namespaces);return this.namespaces=yA(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===Zm?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(Gh(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await LBe.init({core:this.providerOpts.core,logger:this.providerOpts.logger||qj,relayUrl:this.providerOpts.relayUrl||MBe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>by(n)))];lO("client",this.client),lO("events",this.events),lO("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=b6e(n,this.session),s=gX(r),i=yA(this.namespaces,this.optionalNamespaces),o=uO(wA({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new N6e({namespace:o});break;case"algorand":this.rpcProviders[n]=new U6e({namespace:o});break;case"solana":this.rpcProviders[n]=new P6e({namespace:o});break;case"cosmos":this.rpcProviders[n]=new D6e({namespace:o});break;case"polkadot":this.rpcProviders[n]=new _6e({namespace:o});break;case"cip34":this.rpcProviders[n]=new F6e({namespace:o});break;case"elrond":this.rpcProviders[n]=new W6e({namespace:o});break;case"multiversx":this.rpcProviders[n]=new q6e({namespace:o});break;case"near":this.rpcProviders[n]=new Y6e({namespace:o});break;case"tezos":this.rpcProviders[n]=new Z6e({namespace:o});break;default:this.rpcProviders[Zm]?this.rpcProviders[Zm].updateNamespace(o):this.rpcProviders[Zm]=new t8e({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&Gh(o)&&this.events.emit("accountsChanged",o.map(Xj))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=by(o),l=cO(o)!==cO(a)?`${c}:${cO(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=uO(wA({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",uO(wA({},Rn("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Ua.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Zm]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=yA(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>by(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=by(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(Xj);if(!Gh(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${gA}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${gA}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${gA}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(gA)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};var i9={};const c8e={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof i9<"u"?i9.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},b3={filterOutDuplicatesByRDNS(t){const e=ve.state.enableEIP6963?je.state.connectors:[],n=Je.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&it.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=je.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Je.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=je.state,{featuredWalletIds:n}=ve.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=ve.state.features)==null?void 0:c.connectMethodsOrder),r=e||je.state.connectors;if(n)return n;const{injected:s,announced:i}=hS.getConnectorsByType(r,ot.state.recommended,ot.state.featured),o=s.filter(hS.showConnector),a=i.filter(hS.showConnector);return o.length||a.length?["wallet","email","social"]:c8e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&ot.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&ot.state.excludedWallets.some(r=>KN.isLowerCaseMatch(r.name,t.name));return e||n}},hS={getConnectorsByType(t,e,n){const{customWallets:r}=ve.state,s=Je.getRecentWallets(),i=b3.filterOutDuplicateWallets(e),o=b3.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&ot.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&ot.state.excludedWallets.some(i=>KN.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!it.isMobile()||it.isMobile()&&!e&&!pt.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(z.state.chains.values()).some(n=>je.getConnectorId(n.namespace)===ze.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=ve.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=hS.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:ve.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(m=>m.isEnabled),p=new Set(f.map(m=>m.type)),g=c.filter(m=>p.has(m)).map(m=>({type:m,isEnabled:!0})),y=f.filter(({type:m})=>!g.some(({type:v})=>v===m));return Array.from(new Set([...g,...y].map(({type:m})=>m)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const fS=globalThis,pU=fS.ShadowRoot&&(fS.ShadyCSS===void 0||fS.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,gU=Symbol(),o9=new WeakMap;let wX=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==gU)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(pU&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=o9.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&o9.set(n,e))}return e}toString(){return this.cssText}};const sa=t=>new wX(typeof t=="string"?t:t+"",void 0,gU),ju=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new wX(n,t,gU)},l8e=(t,e)=>{if(pU)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=fS.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},a9=pU?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return sa(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:u8e,defineProperty:d8e,getOwnPropertyDescriptor:h8e,getOwnPropertyNames:f8e,getOwnPropertySymbols:p8e,getPrototypeOf:g8e}=Object,Vh=globalThis,c9=Vh.trustedTypes,m8e=c9?c9.emptyScript:"",dO=Vh.reactiveElementPolyfillSupport,rE=(t,e)=>t,v3={toAttribute(t,e){switch(e){case Boolean:t=t?m8e:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},bX=(t,e)=>!u8e(t,e),l9={attribute:!0,type:String,converter:v3,reflect:!1,useDefault:!1,hasChanged:bX};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Vh.litPropertyMetadata??(Vh.litPropertyMetadata=new WeakMap);let Xm=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=l9){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&d8e(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=h8e(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??l9}static _$Ei(){if(this.hasOwnProperty(rE("elementProperties")))return;const e=g8e(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(rE("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(rE("properties"))){const n=this.properties,r=[...f8e(n),...p8e(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(a9(s))}else e!==void 0&&n.push(a9(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return l8e(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:v3).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:v3;this._$Em=s;const l=c.fromAttribute(n,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??bX)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};Xm.elementStyles=[],Xm.shadowRootOptions={mode:"open"},Xm[rE("elementProperties")]=new Map,Xm[rE("finalized")]=new Map,dO==null||dO({ReactiveElement:Xm}),(Vh.reactiveElementVersions??(Vh.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const sE=globalThis,ZI=sE.trustedTypes,u9=ZI?ZI.createPolicy("lit-html",{createHTML:t=>t}):void 0,vX="$lit$",Hd=`lit$${Math.random().toFixed(9).slice(2)}$`,EX="?"+Hd,y8e=`<${EX}>`,Lg=document,P_=()=>Lg.createComment(""),O_=t=>t===null||typeof t!="object"&&typeof t!="function",mU=Array.isArray,w8e=t=>mU(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",hO=`[ 	
\f\r]`,Zb=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,d9=/-->/g,h9=/>/g,kf=RegExp(`>|${hO}(?:([^\\s"'>=/]+)(${hO}*=${hO}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),f9=/'/g,p9=/"/g,_X=/^(?:script|style|textarea|title)$/i,CX=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),Xqe=CX(1),eVe=CX(2),C0=Symbol.for("lit-noChange"),cs=Symbol.for("lit-nothing"),g9=new WeakMap,yp=Lg.createTreeWalker(Lg,129);function AX(t,e){if(!mU(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return u9!==void 0?u9.createHTML(e):e}const b8e=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=Zb;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===Zb?u[1]==="!--"?o=d9:u[1]!==void 0?o=h9:u[2]!==void 0?(_X.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=kf):u[3]!==void 0&&(o=kf):o===kf?u[0]===">"?(o=s??Zb,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?kf:u[3]==='"'?p9:f9):o===p9||o===f9?o=kf:o===d9||o===h9?o=Zb:(o=kf,s=void 0);const f=o===kf&&t[a+1].startsWith("/>")?" ":"";i+=o===Zb?c+y8e:d>=0?(r.push(l),c.slice(0,d)+vX+c.slice(d)+Hd+f):c+Hd+(d===-2?a:f)}return[AX(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class k_{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=b8e(e,n);if(this.el=k_.createElement(l,r),yp.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=yp.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(vX)){const h=u[o++],f=s.getAttribute(d).split(Hd),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?E8e:p[1]==="?"?_8e:p[1]==="@"?C8e:iT}),s.removeAttribute(d)}else d.startsWith(Hd)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(_X.test(s.tagName)){const d=s.textContent.split(Hd),h=d.length-1;if(h>0){s.textContent=ZI?ZI.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],P_()),yp.nextNode(),c.push({type:2,index:++i});s.append(d[h],P_())}}}else if(s.nodeType===8)if(s.data===EX)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(Hd,d+1))!==-1;)c.push({type:7,index:i}),d+=Hd.length-1}i++}}static createElement(e,n){const r=Lg.createElement("template");return r.innerHTML=e,r}}function A0(t,e,n=t,r){var o,a;if(e===C0)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=O_(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=A0(t,s._$AS(t,e.values),s,r)),e}class v8e{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??Lg).importNode(n,!0);yp.currentNode=s;let i=yp.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new e1(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new A8e(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=yp.nextNode(),o++)}return yp.currentNode=Lg,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class e1{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=cs,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=A0(this,e,n),O_(e)?e===cs||e==null||e===""?(this._$AH!==cs&&this._$AR(),this._$AH=cs):e!==this._$AH&&e!==C0&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):w8e(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==cs&&O_(this._$AH)?this._$AA.nextSibling.data=e:this.T(Lg.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=k_.createElement(AX(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new v8e(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=g9.get(e.strings);return n===void 0&&g9.set(e.strings,n=new k_(e)),n}k(e){mU(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new e1(this.O(P_()),this.O(P_()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class iT{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=cs,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=cs}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=A0(this,e,n,0),o=!O_(e)||e!==this._$AH&&e!==C0,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=A0(this,a[r+c],n,c),l===C0&&(l=this._$AH[c]),o||(o=!O_(l)||l!==this._$AH[c]),l===cs?e=cs:e!==cs&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===cs?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class E8e extends iT{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===cs?void 0:e}}class _8e extends iT{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==cs)}}class C8e extends iT{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=A0(this,e,n,0)??cs)===C0)return;const r=this._$AH,s=e===cs&&r!==cs||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==cs&&(r===cs||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class A8e{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){A0(this,e)}}const fO=sE.litHtmlPolyfillSupport;fO==null||fO(k_,e1),(sE.litHtmlVersions??(sE.litHtmlVersions=[])).push("3.3.1");const S8e=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new e1(e.insertBefore(P_(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ng=globalThis;let pS=class extends Xm{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=S8e(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return C0}};var gz;pS._$litElement$=!0,pS.finalized=!0,(gz=ng.litElementHydrateSupport)==null||gz.call(ng,{LitElement:pS});const pO=ng.litElementPolyfillSupport;pO==null||pO({LitElement:pS});(ng.litElementVersions??(ng.litElementVersions=[])).push("4.2.1");let iE,Kh,Yh;function nVe(t,e){iE=document.createElement("style"),Kh=document.createElement("style"),Yh=document.createElement("style"),iE.textContent=Fy(t).core.cssText,Kh.textContent=Fy(t).dark.cssText,Yh.textContent=Fy(t).light.cssText,document.head.appendChild(iE),document.head.appendChild(Kh),document.head.appendChild(Yh),SX(e)}function SX(t){Kh&&Yh&&(t==="light"?(Kh.removeAttribute("media"),Yh.media="enabled"):(Yh.removeAttribute("media"),Kh.media="enabled"))}function I8e(t){iE&&Kh&&Yh&&(iE.textContent=Fy(t).core.cssText,Kh.textContent=Fy(t).dark.cssText,Yh.textContent=Fy(t).light.cssText)}function Fy(t){return{core:ju`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${sa(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${sa((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${sa((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${sa((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${sa((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:ju`
      :root {
        --w3m-color-mix: ${sa((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${sa(ku(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${sa(ku(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:ju`
      :root {
        --w3m-color-mix: ${sa((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${sa(ku(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${sa(ku(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const rVe=ju`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,sVe=ju`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,iVe=ju`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,yv={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},IX=Hpe({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function t1(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const m9=t1({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),y9=t1({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});t1({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});t1({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});t1({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const x8e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},gS={getMethodsByChainNamespace(t){return x8e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case m9.caipNetworkId:u.chains.push(m9.deprecatedCaipNetworkId);break;case y9.caipNetworkId:u.chains.push(y9.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await Qv.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};let xX=class{constructor({provider:e,namespace:n}){this.id=ze.CONNECTOR_ID.WALLET_CONNECT,this.name=MI.ConnectorNamesMap[ze.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=MI.ConnectorImageIds[ze.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=z.getCaipNetworks.bind(z),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=ve.state.universalProviderConfigOverride,s=gS.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Xv.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:N8e})}};const N8e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];let T8e=class{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>z.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:ze.CONNECTOR_ID.AUTH,type:"AUTH",name:ze.CONNECTOR_NAMES.AUTH,provider:e,imageId:MI.ConnectorImageIds[ze.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){Qe.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=Qe.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof xX);if(!e)throw new Error("WalletConnectConnector not found");return e}};class R8e extends T8e{setUniversalProvider(e){this.addConnector(new xX({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>it.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&Pn.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(Qe.state.balanceLoading&&e.chainId===((c=z.state.activeCaipNetwork)==null?void 0:c.id))return{balance:Qe.state.balance||"0.00",symbol:Qe.state.balanceSymbol||""};const s=(await Qe.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=z.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===ze.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:_J.encode(new TextEncoder().encode(r)),pubkey:s}},(a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=z.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===ze.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Na(n.id)}]}))}catch(u){if(u.code===yv.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===yv.ERROR_INVALID_CHAIN_ID||u.code===yv.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===yv.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:Na(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const P8e=["email","socials","swaps","onramp","activity","reownBranding"],bA={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?Pn.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?Pn.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?Pn.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Pn.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?Pn.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Pn.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?Pn.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Pn.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Pn.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},O8e={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=bA[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=bA[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return bA[t].processApi(e)},processFallbackFeature(t,e){return bA[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await ot.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?Pn.DEFAULT_REMOTE_FEATURES:Pn.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of P8e){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),Pn.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;yl.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class k8e{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=z.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=z.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=z.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return z.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>z.getCaipNetworks(n),this.getActiveChainNamespace=()=>z.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{z.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>z.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>z.state.activeChain===n||!n?z.state.activeCaipAddress:z.getAccountProp("caipAddress",n),this.setClientId=n=>{ft.setClientId(n)},this.getProvider=n=>Tn.getProvider(n),this.getProviderType=n=>Tn.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=Qe.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{Qe.setCaipAddress(n,r),n&&ve.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{Qe.setBalance(n,r,s)},this.setProfileName=(n,r)=>{Qe.setProfileName(n,r)},this.setProfileImage=(n,r)=>{Qe.setProfileImage(n,r)},this.setUser=(n,r)=>{Qe.setUser(n,r)},this.resetAccount=n=>{Qe.resetAccount(n)},this.setCaipNetwork=n=>{z.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{z.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{Qe.setAllAccounts(n,r),ve.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{Qe.setStatus(n,r),je.isConnected()?Je.setConnectionStatus("connected"):Je.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>z.getAccountProp("address",n),this.setConnectors=n=>{const r=[...je.state.allConnectors,...n];je.setConnectors(r)},this.setConnections=(n,r)=>{pt.setConnections(n,r)},this.fetchIdentity=n=>ft.fetchIdentity(n),this.getReownName=n=>Qv.getNamesForAddress(n),this.getConnectors=()=>je.getConnectors(),this.getConnectorImage=n=>xQ.getConnectorImage(n),this.setConnectedWalletInfo=(n,r)=>{const s=Tn.getProviderId(r),i=n?{...n,type:s}:void 0;Qe.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!z.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{Qe.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{Qe.removeAddressLabel(n,r)},this.getAddress=n=>z.state.activeChain===n||!n?Qe.state.address:z.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>z.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{z.resetNetwork(n)},this.addConnector=n=>{je.addConnector(n)},this.resetWcConnection=()=>{pt.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{Qe.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{Qe.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{z.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{Qe.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{ve.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await O8e.fetchRemoteFeatures(e),ve.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&AD.setOnrampProviders(this.remoteFeatures.onramp),((n=ve.state.remoteFeatures)!=null&&n.email||Array.isArray((r=ve.state.remoteFeatures)==null?void 0:r.socials)&&((s=ve.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){const e=await ot.fetchAllowedOrigins();if(e&&it.isClient()){const n=window.location.origin;gS.isOriginAllowed(n,e,yv.DEFAULT_ALLOWED_ANCESTORS)||yl.open(ul.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else yl.open(ul.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,ir.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Hi.setThemeMode(e.themeMode),e.themeVariables&&Hi.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");z.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&z.setActiveCaipNetwork(n)}initializeConnectionController(e){pt.setWcBasic(e.basic??!1)}initializeConnectorController(){je.initialize(this.chainNamespaces)}initializeProjectSettings(e){ve.setProjectId(e.projectId),ve.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;ve.setDebug(e.debug!==!1),ve.setEnableWalletConnect(e.enableWalletConnect!==!1),ve.setEnableWalletGuide(e.enableWalletGuide!==!1),ve.setEnableWallets(e.enableWallets!==!1),ve.setEIP6963Enabled(e.enableEIP6963!==!1),ve.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),ve.setEnableAuthLogger(e.enableAuthLogger!==!1),ve.setCustomRpcUrls(e.customRpcUrls),ve.setEnableEmbedded(e.enableEmbedded),ve.setAllWallets(e.allWallets),ve.setIncludeWalletIds(e.includeWalletIds),ve.setExcludeWalletIds(e.excludeWalletIds),ve.setFeaturedWalletIds(e.featuredWalletIds),ve.setTokens(e.tokens),ve.setTermsConditionsUrl(e.termsConditionsUrl),ve.setPrivacyPolicyUrl(e.privacyPolicyUrl),ve.setCustomWallets(e.customWallets),ve.setFeatures(e.features),ve.setAllowUnsupportedChain(e.allowUnsupportedChain),ve.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),ve.setPreferUniversalLinks(e.experimental_preferUniversalLinks),ve.setDefaultAccountTypes(e.defaultAccountTypes);const n=Je.getPreferredAccountTypes()||{},r={...ve.state.defaultAccountTypes,...n};Qe.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),ve.setMetadata(e.metadata),ve.setDisableAppend(e.disableAppend),ve.setEnableEmbedded(e.enableEmbedded),ve.setSIWX(e.siwx),!e.projectId){yl.open(ul.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===ze.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");ve.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return it.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=Qm.getUnsupportedNetwork(`${n}:${e}`);z.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Qm.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return Qm.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return Qm.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?Qm.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=Tn.getProvider(e),s=Tn.getProviderId(e),{caipAddress:i}=z.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),Je.removeConnectedNamespace(e),Tn.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),je.removeConnectorId(e),z.resetAccount(e),z.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=z.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),Je.setConnectedNamespaces([...z.state.chains.keys()]),this.chainNamespaces.forEach(o=>{je.setConnectorId(Gi.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,y,m,w,v,A;const c=z.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const C=this.getCaipNetworks().find(S=>S.chainNamespace===i);C&&this.setCaipNetwork(C)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((m=(y=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:y.http)==null?void 0:m[0])||((A=(v=(w=d==null?void 0:d.rpcUrls)==null?void 0:w.default)==null?void 0:v.http)==null?void 0:A[0])});if(!h)return;Je.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=Qe.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=z.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),Je.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const n=kRe(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));pn.resetSend(),pt.resetWcConnection(),await Xv.clearSessions(),je.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));Je.deleteConnectedSocialProvider(),ir.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(z.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:Qe.state.address,provider:Tn.getProvider(z.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(Pn.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(z.state.activeChain),s=Tn.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===ze.CHAIN.EVM){const n=this.getAdapter(z.state.activeChain),r=Tn.getProvider(z.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:Qe.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:z.state.activeChain}),Qe.state.profileImage||!1},getEnsAddress:async e=>await gS.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(z.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=Tn.getProvider(z.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(z.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(z.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(z.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(z.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(z.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(z.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!Qe.state.address||this.updateNativeBalance(Qe.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},pt.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(Tn.getProviderId(z.state.activeChain)===Gi.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Tn.getProvider(n),i=Tn.getProviderId(n);if(e.chainNamespace===z.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===Gi.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=md.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new R8e({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=Je.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(Je.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=z.state.activeChain===e,c=z.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=Qe.state.address,i=z.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=z.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=z.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=z.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===ze.CHAIN.EVM&&it.isSafeApp()&&je.setConnectorId(ze.CONNECTOR_ID.SAFE,e);const n=je.getConnectorId(e);switch(this.setStatus("connecting",e),n){case ze.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case ze.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=je.getConnectorId(e),s=this.getCaipNetwork(e),o=je.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([it.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async n=>{var a,c,l,u,d;const r=this.getAdapter(n),s=((u=(l=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:l[n])==null?void 0:u.accounts)||[],i=(d=z.state.activeCaipNetwork)==null?void 0:d.id,o=s.find(h=>{const{chainId:f}=md.parseCaipAddress(h);return f===(i==null?void 0:i.toString())})||s[0];if(o){const h=md.validateCaipAddress(o),{chainId:f,address:p}=md.parseCaipAddress(h);if(Tn.setProviderId(n,Gi.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&z.state.activeCaipNetwork&&(r==null?void 0:r.namespace)!==ze.CHAIN.EVM){const g=r==null?void 0:r.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:z.state.activeCaipNetwork});Tn.setProvider(n,g)}else Tn.setProvider(n,this.universalProvider);je.setConnectorId(ze.CONNECTOR_ID.WALLET_CONNECT,n),Je.addConnectedNamespace(n),this.syncWalletConnectAccounts(n),await this.syncAccount({address:p,chainId:f,chainNamespace:n})}else this.setStatus("disconnected",n);this.syncConnectedWalletInfo(n),await z.setApprovedCaipNetworksData(n)});await Promise.all(e)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=md.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>it.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){Tn.setProviderId(s,e),Tn.setProvider(s,n),je.setConnectorId(r,s)}async syncAllAccounts(e){const n=je.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===z.state.activeChain,r=z.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=Je.getActiveNetworkProps(),c=i||a,l=((d=z.state.activeCaipNetwork)==null?void 0:d.name)===ze.UNSUPPORTED_NETWORK_NAME,u=z.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(y=>y.id.toString()===c.toString()),p=this.getCaipNetworks().find(y=>y.chainNamespace===o);if(!u&&!f&&!p){const y=this.getApprovedCaipNetworkIds()||[],m=y.find(v=>{var A;return((A=md.parseCaipNetworkId(v))==null?void 0:A.chainId)===c.toString()}),w=y.find(v=>{var A;return((A=md.parseCaipNetworkId(v))==null?void 0:A.chainNamespace)===o});f=this.getCaipNetworks().find(v=>v.caipNetworkId===m),p=this.getCaipNetworks().find(v=>v.caipNetworkId===w||"deprecatedCaipNetworkId"in v&&v.deprecatedCaipNetworkId===w)}const g=f||p;(g==null?void 0:g.chainNamespace)===z.state.activeChain?ve.state.enableNetworkSwitch&&!ve.state.allowUnsupportedChain&&((h=z.state.activeCaipNetwork)==null?void 0:h.name)===ze.UNSUPPORTED_NETWORK_NAME?z.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),KN.isLowerCaseMatch(s,Qe.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=je.getConnectorId(e),r=Tn.getProviderId(e);if(r===Gi.CONNECTOR_TYPE_ANNOUNCED||r===Gi.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===Gi.CONNECTOR_TYPE_WALLET_CONNECT){const i=Tn.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===ze.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===ze.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!CQ.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=z.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=MRe.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};ve.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await a8e.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{pt.setUri(e)}),this.universalProvider.on("connect",pt.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),pt.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(gS.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&it.isCaipAddress(r[0])&&this.syncAccount(md.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&it.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){ir.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(ul.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=ul.ALERT_ERRORS[o];a&&(yl.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&pt.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return ls.open({...e,data:{swap:e.arguments}})}return ls.open(e)}async close(){await this.injectModalUi(),ls.close()}setLoading(e,n){ls.setLoading(e,n)}async disconnect(e){await pt.disconnect(e)}getSIWX(){return ve.state.siwx}getError(){return""}getChainId(){var e;return(e=z.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){yl.open(ul.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await z.switchActiveNetwork(n)}getWalletProvider(){return z.state.activeChain?Tn.state.providers[z.state.activeChain]:null}getWalletProviderType(){return Tn.getProviderId(z.state.activeChain)}subscribeProviders(e){return Tn.subscribeProviders(e)}getThemeMode(){return Hi.state.themeMode}getThemeVariables(){return Hi.state.themeVariables}setThemeMode(e){Hi.setThemeMode(e),SX(Hi.state.themeMode)}setTermsConditionsUrl(e){ve.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){ve.setPrivacyPolicyUrl(e)}setThemeVariables(e){Hi.setThemeVariables(e),I8e(Hi.state.themeVariables)}subscribeTheme(e){return Hi.subscribe(e)}getWalletInfo(){return Qe.state.connectedWalletInfo}getAccount(e){var o;const n=je.getAuthConnector(e),r=z.getAccountData(e),s=z.state.activeChain,i=Je.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:it.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===ze.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:Je.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?z.subscribeChainProp("accountState",r,n):z.subscribe(r),je.subscribe(r)}subscribeNetwork(e){return z.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e){return Qe.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Qe.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){z.subscribeKey("activeCaipNetwork",e)}getState(){return Il.state}subscribeState(e){return Il.subscribe(e)}showErrorMessage(e){fc.showError(e)}showSuccessMessage(e){fc.showSuccess(e)}getEvent(){return{...ir.state}}subscribeEvents(e){return ir.subscribe(e)}replace(e){Mt.replace(e)}redirect(e){Mt.push(e)}popTransactionStack(e){Mt.popTransactionStack(e)}isOpen(){return ls.state.open}isTransactionStackEmpty(){return Mt.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){ve.setFeatures(e)}updateRemoteFeatures(e){ve.setRemoteFeatures(e)}updateOptions(e){const r={...ve.state||{},...e};ve.setOptions(r)}setConnectMethodsOrder(e){ve.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){ve.setWalletFeaturesOrder(e)}setCollapseWallets(e){ve.setCollapseWallets(e)}setSocialsOrder(e){ve.setSocialsOrder(e)}getConnectMethodsOrder(){return b3.getConnectOrderMethod(ve.state.features,je.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||z.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&z.removeNetwork(e,n)}}let w9=!1;class D8e extends k8e{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{ko.checkIfRequestExists(n)?ko.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Ps.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Ps.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=ko.checkIfRequestIsSafe(r),i=Qe.state.address,o=z.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=z.state.activeChain;je.getConnectorId(n)===ze.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=z.state.activeChain,s=r===ze.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=ve.state.defaultAccountTypes[r],o=(l=Qe.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;KN.isLowerCaseMatch(n.address,Qe.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...Qe.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>it.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[it.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...Qe.state.user||{},username:n},z.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,z.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,z.state.activeChain)})}async syncAuthConnector(e,n){var u,d,h,f;const r=ze.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!r)return;this.setLoading(!0,n);const s=e.getLoginEmailUsed();this.setLoading(s,n),s&&this.setStatus("connecting",n);const i=e.getEmail(),o=e.getUsername();this.setUser({...((u=Qe.state)==null?void 0:u.user)||{},username:o,email:i},n),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),c=Hi.getSnapshot(),l=ve.getSnapshot();await Promise.all([e.syncDappData({metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:ku(c.themeVariables,c.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&(a&&((d=this.connectionControllerClient)!=null&&d.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:ze.CONNECTOR_ID.AUTH,info:{name:ze.CONNECTOR_ID.AUTH},type:Gi.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=z.state.activeCaipNetwork)==null?void 0:h.id,chain:n})),this.setStatus("connected",n)):je.getConnectorId(n)===ze.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),Je.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!it.isTelegram())return;const r=Je.getTelegramSocialProvider();if(!r||!it.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;Qe.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=je.getAuthConnector();r&&o&&(this.setLoading(!0,e),await pt.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),Je.setConnectedSocialProvider(r),Je.removeTelegramSocialProvider(),ir.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var o,a,c,l;if(!ze.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(o=this.remoteFeatures)==null?void 0:o.email,s=Array.isArray((a=this.remoteFeatures)==null?void 0:a.socials)&&this.remoteFeatures.socials.length>0,i=r||s;!this.authProvider&&((c=this.options)!=null&&c.projectId)&&i&&(this.authProvider=s2e.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(l=this.getCaipNetwork(e))==null?void 0:l.caipNetworkId,abortController:ul.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?yl.open(ul.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?yl.open(ul.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&yl.open(ul.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),Il.subscribeOpen(u=>{var d;!u&&this.isTransactionStackEmpty()&&((d=this.authProvider)==null||d.rejectRpcRequests())}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&ot.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=z.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=Tn.getProvider(r),u=Tn.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=Tn.getProviderId(n)===Gi.CONNECTOR_TYPE_AUTH,u=Tn.getProviderId(r),d=u===Gi.CONNECTOR_TYPE_AUTH,h=ze.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(z.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:ze.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:Gi.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===Gi.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Il.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==ze.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=Tn.getProviderId(e);if(n===Gi.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=Je.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(it.isClient()&&!w9)try{const e={...Pn.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),it.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!ve.state.disableAppend&&!ve.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}w9=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!it.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(Ks(()=>import("./embedded-wallet-DNwAM-wW.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),n.email&&r.push(Ks(()=>import("./email-BMezw9PV.js"),__vite__mapDeps([12,1,11,5,10,4,9,13,6]))),n.socials&&r.push(Ks(()=>import("./socials-BYmeNsW6.js"),__vite__mapDeps([14,1,15,4,16,17,10,18,9,5,11,19,3,20]))),n.swaps&&n.swaps.length>0&&r.push(Ks(()=>import("./swaps-Bn1kgwGL.js"),__vite__mapDeps([21,1,9,5,22,23,24,3,10,20,6,4]))),e.send&&r.push(Ks(()=>import("./send-ySU1KdCZ.js"),__vite__mapDeps([25,1,9,5,10,4,16,11,24,3,6,26,27]))),e.receive&&r.push(Ks(()=>import("./receive-DNlFG7eO.js"),__vite__mapDeps([28,1,29,3,19]))),n.onramp&&n.onramp.length>0&&r.push(Ks(()=>import("./onramp-S2Rhyc8c.js"),__vite__mapDeps([30,1,31,20,10,3,5,32,15,4,16,33,11,9,18,6]))),n.activity&&r.push(Ks(()=>import("./transactions-CC8Y1MUN.js"),__vite__mapDeps([34,1,35,31,20,10,11,3]))),e.pay&&r.push(Ks(()=>import("./index-DOYnieVi.js"),__vite__mapDeps([36,1,9,5,37,3,10,7,32,27,18]))),await Promise.all([...r,Ks(()=>import("./index-CLK1MdJ2.js"),__vite__mapDeps([38,1,3,5,26,10,39,23,7,32,9,8,37,35,31,20,11,22,4,6,27,13,15,16,17,2,18,29,19,33])),Ks(()=>import("./w3m-modal-BGmIsTBX.js"),__vite__mapDeps([40,1,7,3,10,8,5,23,39]))])}}let Od;function L8e(t){t&&(Od=t)}function oT(){if(!Od)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(Od==null?void 0:Od.open(n))}async function e(){await(Od==null?void 0:Od.close())}return{open:t,close:e}}const M8e="1.7.8";let vA;function U8e(t){return vA||(vA=new D8e({...t,sdkVersion:it.generateSdkVersion(t.adapters??[],"react",M8e)}),L8e(vA)),vA}const $8e=Rc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),b9=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],B8e=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=$8e({isOpen:t}),{open:i}=oT(),o=D.useRef(null),[a,c]=D.useState([]),[l,u]=D.useState(!0),[d,h]=D.useState(null),[f,p]=D.useState("all"),[g,y]=D.useState(1),[m,w]=D.useState(1),[v,A]=D.useState(0),[C,S]=D.useState(null),[x,T]=D.useState(b9[0]),[I,k]=D.useState(!1),[O,B]=D.useState(null),G=D.useCallback(async()=>{var L,F;try{if((L=window.solana)!=null&&L.isPhantom){const V=await window.solana.connect();B(V.publicKey.toString());return}if((F=window.solflare)!=null&&F.isSolflare){const V=await window.solflare.connect();B(V.publicKey.toString());return}i()}catch(V){console.error("Failed to connect Solana wallet:",V),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}k(!1)},[i]);D.useEffect(()=>{var L,F;(L=window.solana)!=null&&L.publicKey?B(window.solana.publicKey.toString()):(F=window.solflare)!=null&&F.publicKey&&B(window.solflare.publicKey.toString())},[]),D.useEffect(()=>{t&&(async()=>{var F;u(!0),h(null);try{let V,Z=f==="owned"&&r||void 0;if(x.api==="opensea-solana"){if(f==="owned"&&!O){k(!0),u(!1);return}Z=O||void 0,V=await _Q(x.slug,50),console.log("Fetched Solana NFTs from collection:",V.data.length),f==="owned"&&O&&(console.log("Filtering for owner:",O),console.log("Sample NFT owner data:",(F=V.data[0])==null?void 0:F.owners),console.log("All NFTs owner data:",V.data.map(re=>({name:re.name,owners:re.owners,owner_of:re.owner_of}))),V.data.some(re=>re.owners&&re.owners.length>0)?(V.data=V.data.filter(re=>{const le=re.owners.some(we=>we.owner_of&&we.owner_of.toLowerCase()===O.toLowerCase());return le&&console.log("Found owned NFT:",re.name),le}),console.log("NFTs after filtering:",V.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else x.api==="opensea"?V=await zM(x.slug,50,Z):V=await jM(x.slug,g,50,Z);c(V.data),w(V.totalPages),A(V.totalCount)}catch(V){V instanceof Error?h(V.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,x,O]),D.useEffect(()=>{I&&G()},[I,G]);const W=L=>new Date(L).toLocaleDateString(),R=L=>x.api==="opensea-solana"&&(!L.owners||L.owners.length===0)?"Owner data unavailable":L.owners.length>0?`${L.owners[0].owner_of.substring(0,6)}...`:"N/A",N=()=>{n&&n()},M=async L=>{if(x.api==="opensea"&&x.chain)try{const F=await EQ(x.chain,L.address,L.token_id.toString()),V={...L,attributes:JSON.stringify(F.traits||[])};S(V)}catch(F){console.error("Failed to fetch full NFT details",F),S(L)}else S(L)},P=L=>{T(L),y(1)};return t?b.jsxs(b.Fragment,{children:[b.jsx($C,{nodeRef:o,handle:`.${s.header}`,children:b.jsxs("div",{ref:o,className:s.popup,children:[b.jsxs("div",{className:s.header,children:[b.jsx("span",{children:"LAWB NFT GALLERY"}),b.jsxs("div",{className:s.titleBarButtons,children:[b.jsx("button",{className:s.titleBarButton,onClick:N,title:"Minimize",children:"_"}),b.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),b.jsx("div",{className:s.collectionSelector,children:b9.map(L=>b.jsx("button",{className:`${s.collectionButton} ${x.slug===L.slug?"active":""}`,onClick:()=>P(L),children:L.name},L.slug))}),b.jsxs("div",{className:s.content,children:[b.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[b.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),b.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),b.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!O,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||O?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||O?1:.6},children:"My NFTs"}),x.api==="opensea-solana"&&b.jsx("button",{onClick:()=>{G()},style:{background:O?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:O?"white":"black",marginLeft:"auto"},children:O?`Solana: ${O.slice(0,4)}...${O.slice(-4)}`:"Connect Solana"})]}),x.api==="opensea-solana"&&!O&&b.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&b.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?b.jsx("div",{children:"Loading NFTs..."}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${v} total)`,f==="recent"&&`Recently minted NFTs by ${x.api==="opensea-solana"?(O==null?void 0:O.slice(0,6))+"..."+(O==null?void 0:O.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${x.api==="opensea-solana"?(O==null?void 0:O.slice(0,6))+"..."+(O==null?void 0:O.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?b.jsx("div",{children:"No NFTs found."}):b.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map(L=>b.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{M(L)},children:[b.jsx("div",{style:{width:"100%",height:"150px",backgroundImage:`url(${L.image_url})`,backgroundSize:"cover",backgroundPosition:"center",marginBottom:"10px",border:"1px solid #ccc"}}),b.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:b.jsxs("strong",{children:["#",L.token_id]})}),b.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",R(L)]}),b.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",W(L.created_at)]})]},L.id))}),f!=="recent"&&m>1&&b.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[b.jsx("button",{onClick:()=>y(L=>Math.max(1,L-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),b.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",m]}),b.jsx("button",{onClick:()=>y(L=>Math.min(m,L+1)),disabled:g===m,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===m?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),C&&b.jsx(e1e,{nft:C,onClose:()=>S(null)})]}):null};var EA,F8e=new Uint8Array(16);function j8e(){if(!EA&&(EA=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!EA))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return EA(F8e)}const z8e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function W8e(t){return typeof t=="string"&&z8e.test(t)}var Es=[];for(var gO=0;gO<256;++gO)Es.push((gO+256).toString(16).substr(1));function H8e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Es[t[e+0]]+Es[t[e+1]]+Es[t[e+2]]+Es[t[e+3]]+"-"+Es[t[e+4]]+Es[t[e+5]]+"-"+Es[t[e+6]]+Es[t[e+7]]+"-"+Es[t[e+8]]+Es[t[e+9]]+"-"+Es[t[e+10]]+Es[t[e+11]]+Es[t[e+12]]+Es[t[e+13]]+Es[t[e+14]]+Es[t[e+15]]).toLowerCase();if(!W8e(n))throw TypeError("Stringified UUID is invalid");return n}function G8e(t,e,n){t=t||{};var r=t.random||(t.rng||j8e)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,H8e(r)}const q8e=Rc({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000",textTransform:"uppercase"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),V8e=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}],K8e=["/images/sticker1.png","/images/sticker2.png","/images/sticker3.png","/images/sticker4.png","/images/sticker5.png"],yo=500;function NX(){const t=q8e(),e=D.useRef(null),[n,r]=D.useState(null),[s,i]=D.useState(""),[o,a]=D.useState(""),[c,l]=D.useState(36),[u,d]=D.useState(36),[h,f]=D.useState(!1),[p,g]=D.useState(!1),[y,m]=D.useState(!1),[w,v]=D.useState(!1),[A,C]=D.useState(!1),[S,x]=D.useState([]),[T,I]=D.useState(null),k=D.useRef(null),[O,B]=D.useState(null),G=async ee=>{const ce=ee.getContext("2d");if(!ce)return;ce.clearRect(0,0,ee.width,ee.height),n?await new Promise(he=>{const Ee=new window.Image;Ee.crossOrigin="anonymous",Ee.onload=()=>{const We=Math.min(ee.width/Ee.width,ee.height/Ee.height),ue=(ee.width-Ee.width*We)/2,Ae=(ee.height-Ee.height*We)/2;ce.drawImage(Ee,ue,Ae,Ee.width*We,Ee.height*We),he()},Ee.onerror=()=>he(),Ee.src=n}):(ce.fillStyle="#333",ce.fillRect(0,0,ee.width,ee.height)),(he=>{he.textAlign="center",he.strokeStyle="black",he.lineWidth=3,he.fillStyle="white";const Ee=(We,ue)=>{const Ae=We.toUpperCase().split(" "),ke=[];let Ce=Ae[0];for(let Ct=1;Ct<Ae.length;Ct++){const Yr=Ae[Ct];he.measureText(Ce+" "+Yr).width<ue?Ce+=" "+Yr:(ke.push(Ce),Ce=Yr)}return ke.push(Ce),ke};s&&(he.font=`${c}px Impact`,Ee(s,yo-20).forEach((ue,Ae)=>{const ke=c+Ae*c*1.2;he.strokeText(ue,yo/2,ke),he.fillText(ue,yo/2,ke)})),o&&(he.font=`${u}px Impact`,Ee(o,yo-20).reverse().forEach((ue,Ae)=>{const ke=yo-u*1.2*(Ae+1);he.strokeText(ue,yo/2,ke),he.fillText(ue,yo/2,ke)}))})(ce),await Promise.all(S.map(he=>new Promise(Ee=>{const We=new window.Image;We.src=he.src,We.onload=()=>{ce.save(),ce.translate(he.x,he.y),ce.rotate(he.rotation*Math.PI/180),ce.scale(he.scale,he.scale),ce.drawImage(We,-40,-40,80,80),ce.restore(),Ee()},We.onerror=()=>Ee()})));try{h&&W(ee),p&&R(ee),y&&N(ee)}catch(he){console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead.",he),f(!1),g(!1),m(!1)}},W=ee=>{const ce=ee.getContext("2d");if(!ce)return;const pe=ce.getImageData(0,0,ee.width,ee.height),he=pe.data;for(let Ee=0;Ee<he.length;Ee+=4){const We=he[Ee],ue=he[Ee+1],Ae=he[Ee+2],ke=(We+ue+Ae)/3,Ce=1.8;he[Ee]=Math.min(255,ke+(We-ke)*Ce),he[Ee+1]=Math.min(255,ke+(ue-ke)*Ce*.7),he[Ee+2]=Math.min(255,ke+(Ae-ke)*Ce*.4);const Ct=1.3;he[Ee]=Math.min(255,Math.max(0,he[Ee]*Ct)),he[Ee+1]=Math.min(255,Math.max(0,he[Ee+1]*Ct)),he[Ee+2]=Math.min(255,Math.max(0,he[Ee+2]*Ct))}ce.putImageData(pe,0,0)},R=ee=>{const ce=ee.getContext("2d");if(!ce)return;const pe=4,Ee=ce.getImageData(0,0,ee.width,ee.height).data,We=new Uint8ClampedArray(Ee);for(let ue=0;ue<ee.height;ue+=pe)for(let Ae=0;Ae<ee.width;Ae+=pe){const ke=(ue*ee.width+Ae)*4,Ce=Ee[ke],Ct=Ee[ke+1],Yr=Ee[ke+2],Nt=Ee[ke+3];for(let Dn=0;Dn<pe&&ue+Dn<ee.height;Dn++)for(let dn=0;dn<pe&&Ae+dn<ee.width;dn++){const Ii=((ue+Dn)*ee.width+(Ae+dn))*4;We[Ii]=Ce,We[Ii+1]=Ct,We[Ii+2]=Yr,We[Ii+3]=Nt}}ce.putImageData(new ImageData(We,ee.width,ee.height),0,0)},N=ee=>{const ce=ee.getContext("2d");if(!ce)return;const pe=ce.getImageData(0,0,ee.width,ee.height),he=pe.data;for(let Ee=0;Ee<he.length;Ee+=4){const We=(Math.random()-.5)*50;he[Ee]=Math.max(0,Math.min(255,he[Ee]+We)),he[Ee+1]=Math.max(0,Math.min(255,he[Ee+1]+We)),he[Ee+2]=Math.max(0,Math.min(255,he[Ee+2]+We))}ce.putImageData(pe,0,0)};D.useEffect(()=>{e.current&&G(e.current)},[G]);const M=ee=>{var pe;const ce=(pe=ee.target.files)==null?void 0:pe[0];ce&&r(URL.createObjectURL(ce))},P=()=>{r(null),i(""),a(""),l(36),d(36),f(!1),g(!1),m(!1)},L=async()=>{const ee=e.current;if(!ee)return;await G(ee);const ce=document.createElement("a");ce.download="meme.png",ce.href=ee.toDataURL("image/png"),document.body.appendChild(ce),ce.click(),document.body.removeChild(ce)},F=async ee=>{C(!0),v(!1);try{console.log("Fetching NFTs for collection:",ee);let ce;if(ee.api==="opensea"){console.log("Using OpenSea API for:",ee.slug);const pe=await zM(ee.slug,50);ce=pe.data,console.log("OpenSea response:",pe)}else if(ee.api==="opensea-solana"){console.log("Using OpenSea Solana API for:",ee.slug);const pe=await _Q(ee.slug,50);ce=pe.data,console.log("OpenSea Solana response:",pe)}else{console.log("Using Scatter API for:",ee.slug);const pe=await jM(ee.slug,1,50);ce=pe.data,console.log("Scatter response:",pe)}if(ce&&ce.length>0){const pe=ce[Math.floor(Math.random()*ce.length)],he=pe.image||pe.image_url||pe.image_url_shrunk;console.log("Selected NFT:",pe),console.log("Image URL:",he),r(he)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(ce){console.error("Error fetching NFTs:",ce),alert("Failed to fetch NFT images. Check console for details.")}finally{C(!1)}},V=ee=>{const ce={id:G8e(),src:ee,x:80,y:80,scale:1,rotation:0};x(pe=>pe.length>=2||pe.some(he=>he.src===ee&&!he.id.startsWith("upload-"))?pe:[...pe,ce]),B(ce.id)},Z=ee=>{var pe;const ce=(pe=ee.target.files)==null?void 0:pe[0];if(ce){const he=URL.createObjectURL(ce);V(he)}},ae=(ee,ce,pe)=>{x(he=>he.map(Ee=>{if(Ee.id!==ee)return Ee;let We=Ee.x+ce/1.2,ue=Ee.y+pe/1.2;const Ae=40*Ee.scale,ke=40*Ee.scale;return We=Math.max(Ae,Math.min(yo-Ae,We)),ue=Math.max(ke,Math.min(yo-ke,ue)),{...Ee,x:We,y:ue}}))},re=(ee,ce,pe,he,Ee)=>{x(We=>We.map(ue=>{if(ue.id!==ee)return ue;const Ae=ue.x,ke=ue.y,Ce=Math.atan2(Ee-ke,he-Ae)*180/Math.PI;return{...ue,rotation:pe+(Ce-ce)*.5}}))},le=ee=>{x(ce=>ce.filter(pe=>pe.id!==ee))},we=(ee,ce)=>{x(pe=>pe.map(he=>he.id===ee?{...he,scale:Math.max(.2,he.scale*(1+(ce-1)*.2))}:he))};return b.jsxs("div",{className:t.container,children:[b.jsxs("div",{className:t.header,children:[b.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),b.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",b.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),b.jsxs("div",{className:t.content,children:[b.jsxs("div",{className:t.section,children:[b.jsx("div",{className:t.sectionTitle,children:"Collections"}),b.jsxs("div",{className:t.row,children:[b.jsxs("div",{className:t.dropdown,children:[b.jsx("button",{className:t.button,onClick:()=>v(ee=>!ee),children:"Collections"}),w&&b.jsx("div",{className:t.dropdownContent,children:V8e.map(ee=>b.jsx("div",{className:t.dropdownItem,onClick:()=>{F(ee)},children:ee.name},ee.id))})]}),b.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",b.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:M})]}),A&&b.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),b.jsxs("div",{className:t.section,children:[b.jsx("div",{className:t.sectionTitle,children:"Text"}),b.jsxs("div",{className:t.row,children:[b.jsx("span",{className:t.label,children:"Top Text:"}),b.jsx("input",{className:t.input,type:"text",value:s,onChange:ee=>i(ee.target.value),placeholder:"Enter top text..."}),b.jsx("span",{className:t.label,children:"Size:"}),b.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:ee=>l(Number(ee.target.value)),style:{width:60,textAlign:"center"}})]}),b.jsxs("div",{className:t.row,children:[b.jsx("span",{className:t.label,children:"Bottom Text:"}),b.jsx("input",{className:t.input,type:"text",value:o,onChange:ee=>a(ee.target.value),placeholder:"Enter bottom text..."}),b.jsx("span",{className:t.label,children:"Size:"}),b.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:ee=>d(Number(ee.target.value)),style:{width:60,textAlign:"center"}})]})]}),b.jsxs("div",{className:t.section,children:[b.jsx("div",{className:t.sectionTitle,children:"Effects"}),b.jsxs("div",{className:t.row,children:[b.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(ee=>!ee),children:"Deep Fry"}),b.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(ee=>!ee),children:"Pixelate"}),b.jsx("button",{className:t.effectButton,style:{background:y?"#00ffff":void 0},onClick:()=>m(ee=>!ee),children:"Grain"})]})]}),b.jsxs("div",{className:t.section,children:[b.jsx("div",{className:t.sectionTitle,children:"Stickers"}),b.jsxs("div",{className:t.row,children:[K8e.map((ee,ce)=>b.jsx("img",{src:ee,alt:`sticker${ce+1}`,style:{width:32,height:32,cursor:"pointer",border:"1px solid #888",marginRight:4},onClick:()=>V(ee)},ee)),b.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Sticker",b.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:k,onChange:Z})]})]})]}),b.jsxs("div",{className:t.actions,children:[b.jsx("button",{className:t.button,onClick:L,children:"Save Image"}),b.jsx("button",{className:t.button,onClick:P,children:"Restart"})]})]}),b.jsx("div",{className:t.memeArea,children:b.jsx("canvas",{ref:e,width:yo,height:yo,className:t.canvas})}),b.jsx("div",{style:{position:"absolute",left:0,top:0,width:yo,height:yo,pointerEvents:"none"},children:S.map(ee=>O===ee.id?b.jsxs("div",{style:{position:"absolute",left:ee.x,top:ee.y,width:80*ee.scale,height:80*ee.scale,transform:`rotate(${ee.rotation}deg)`,cursor:"move",pointerEvents:"auto",zIndex:10,border:"2px solid #00f",boxShadow:"0 0 8px #00f"},onMouseDown:ce=>{I(ee.id),ce.stopPropagation()},onMouseUp:()=>I(null),onMouseMove:ce=>{T===ee.id&&ce.buttons===1&&ae(ee.id,ce.movementX,ce.movementY)},children:[b.jsx("img",{src:ee.src,alt:"sticker",style:{width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},draggable:!1}),b.jsx("div",{style:{position:"absolute",right:-12,top:"40%",width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"grab",zIndex:11},onMouseDown:ce=>{var Ce;ce.stopPropagation();const pe=(Ce=ce.currentTarget.parentElement)==null?void 0:Ce.getBoundingClientRect(),he=pe?pe.left+pe.width/2:0,Ee=pe?pe.top+pe.height/2:0,We=Math.atan2(ce.clientY-Ee,ce.clientX-he)*180/Math.PI,ue=ee.rotation,Ae=Ct=>{re(ee.id,We,ue,Ct.clientX,Ct.clientY)},ke=()=>{window.removeEventListener("mousemove",Ae),window.removeEventListener("mouseup",ke)};window.addEventListener("mousemove",Ae),window.addEventListener("mouseup",ke)}}),b.jsx("div",{style:{position:"absolute",bottom:-12,right:-12,width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"nwse-resize",zIndex:11},onMouseDown:ce=>{ce.stopPropagation();const pe=ce.clientX,he=We=>{const ue=(We.clientX-pe)/80;we(ee.id,1+ue)},Ee=()=>{window.removeEventListener("mousemove",he),window.removeEventListener("mouseup",Ee)};window.addEventListener("mousemove",he),window.addEventListener("mouseup",Ee)}}),b.jsx("button",{style:{position:"absolute",top:-12,left:-12,width:16,height:16,background:"#f00",color:"#fff",border:"none",borderRadius:"50%",fontSize:10,cursor:"pointer",zIndex:12},onClick:()=>le(ee.id),children:"×"}),b.jsx("button",{style:{position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:40,height:18,background:"#0f0",color:"#000",border:"1px solid #888",borderRadius:4,fontSize:8,cursor:"pointer",zIndex:12},onClick:()=>B(null),children:"Place"})]},ee.id):null)})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function D_(){return D_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},D_.apply(this,arguments)}var Ah;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ah||(Ah={}));const v9="popstate";function Y8e(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return E3("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:RX(s)}return J8e(e,n,null,t)}function Vr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function TX(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Q8e(){return Math.random().toString(36).substr(2,8)}function E9(t,e){return{usr:t.state,key:t.key,idx:e}}function E3(t,e,n,r){return n===void 0&&(n=null),D_({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?lb(e):e,{state:n,key:e&&e.key||r||Q8e()})}function RX(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function lb(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function J8e(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Ah.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(D_({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Ah.Pop;let y=u(),m=y==null?null:y-l;l=y,c&&c({action:a,location:g.location,delta:m})}function h(y,m){a=Ah.Push;let w=E3(g.location,y,m);l=u()+1;let v=E9(w,l),A=g.createHref(w);try{o.pushState(v,"",A)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(A)}i&&c&&c({action:a,location:g.location,delta:1})}function f(y,m){a=Ah.Replace;let w=E3(g.location,y,m);l=u();let v=E9(w,l),A=g.createHref(w);o.replaceState(v,"",A),i&&c&&c({action:a,location:g.location,delta:0})}function p(y){let m=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof y=="string"?y:RX(y);return w=w.replace(/ $/,"%20"),Vr(m,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,m)}let g={get action(){return a},get location(){return t(s,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(v9,d),c=y,()=>{s.removeEventListener(v9,d),c=null}},createHref(y){return e(s,y)},createURL:p,encodeLocation(y){let m=p(y);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:f,go(y){return o.go(y)}};return g}var _9;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(_9||(_9={}));function Z8e(t,e,n){return n===void 0&&(n="/"),X8e(t,e,n)}function X8e(t,e,n,r){let s=typeof e=="string"?lb(e):e,i=kX(s.pathname||"/",n);if(i==null)return null;let o=PX(t);e4e(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=h4e(i);a=l4e(o[c],l)}return a}function PX(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Vr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=rg([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(Vr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),PX(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:a4e(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of OX(i.path))s(i,o,c)}),e}function OX(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=OX(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function e4e(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:c4e(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const t4e=/^:[\w-]+$/,n4e=3,r4e=2,s4e=1,i4e=10,o4e=-2,C9=t=>t==="*";function a4e(t,e){let n=t.split("/"),r=n.length;return n.some(C9)&&(r+=o4e),e&&(r+=r4e),n.filter(s=>!C9(s)).reduce((s,i)=>s+(t4e.test(i)?n4e:i===""?s4e:i4e),r)}function c4e(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function l4e(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=u4e({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:rg([i,d.pathname]),pathnameBase:w4e(rg([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=rg([i,d.pathnameBase]))}return o}function u4e(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=d4e(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function d4e(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),TX(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function h4e(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return TX(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function kX(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function f4e(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?lb(t):t;return{pathname:n?n.startsWith("/")?n:p4e(n,e):e,search:b4e(r),hash:v4e(s)}}function p4e(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function mO(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function g4e(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function m4e(t,e){let n=g4e(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function y4e(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=lb(t):(s=D_({},t),Vr(!s.pathname||!s.pathname.includes("?"),mO("?","pathname","search",s)),Vr(!s.pathname||!s.pathname.includes("#"),mO("#","pathname","hash",s)),Vr(!s.search||!s.search.includes("#"),mO("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=f4e(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const rg=t=>t.join("/").replace(/\/\/+/g,"/"),w4e=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),b4e=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,v4e=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function E4e(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const DX=["post","put","patch","delete"];new Set(DX);const _4e=["get",...DX];new Set(_4e);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function L_(){return L_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},L_.apply(this,arguments)}const yU=D.createContext(null),C4e=D.createContext(null),aT=D.createContext(null),cT=D.createContext(null),ub=D.createContext({outlet:null,matches:[],isDataRoute:!1}),LX=D.createContext(null);function lT(){return D.useContext(cT)!=null}function MX(){return lT()||Vr(!1),D.useContext(cT).location}function UX(t){D.useContext(aT).static||D.useLayoutEffect(t)}function A4e(){let{isDataRoute:t}=D.useContext(ub);return t?U4e():S4e()}function S4e(){lT()||Vr(!1);let t=D.useContext(yU),{basename:e,future:n,navigator:r}=D.useContext(aT),{matches:s}=D.useContext(ub),{pathname:i}=MX(),o=JSON.stringify(m4e(s,n.v7_relativeSplatPath)),a=D.useRef(!1);return UX(()=>{a.current=!0}),D.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=y4e(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:rg([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function I4e(t,e){return x4e(t,e)}function x4e(t,e,n,r){lT()||Vr(!1);let{navigator:s}=D.useContext(aT),{matches:i}=D.useContext(ub),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=MX(),u;if(e){var d;let y=typeof e=="string"?lb(e):e;c==="/"||(d=y.pathname)!=null&&d.startsWith(c)||Vr(!1),u=y}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let y=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=Z8e(t,{pathname:f}),g=O4e(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:rg([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:rg([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return e&&g?D.createElement(cT.Provider,{value:{location:L_({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ah.Pop}},g):g}function N4e(){let t=M4e(),e=E4e(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,null)}const T4e=D.createElement(N4e,null);class R4e extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(ub.Provider,{value:this.props.routeContext},D.createElement(LX.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function P4e(t){let{routeContext:e,match:n,children:r}=t,s=D.useContext(yU);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(ub.Provider,{value:e},r)}function O4e(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||Vr(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,y=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||T4e,c&&(l<0&&h===0?($4e("route-fallback"),p=!0,y=null):l===h&&(p=!0,y=d.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,h+1)),w=()=>{let v;return f?v=g:p?v=y:d.route.Component?v=D.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=u,D.createElement(P4e,{match:d,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?D.createElement(R4e,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:w(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):w()},null)}var $X=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}($X||{}),BX=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(BX||{});function k4e(t){let e=D.useContext(yU);return e||Vr(!1),e}function D4e(t){let e=D.useContext(C4e);return e||Vr(!1),e}function L4e(t){let e=D.useContext(ub);return e||Vr(!1),e}function FX(t){let e=L4e(),n=e.matches[e.matches.length-1];return n.route.id||Vr(!1),n.route.id}function M4e(){var t;let e=D.useContext(LX),n=D4e(),r=FX();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function U4e(){let{router:t}=k4e($X.UseNavigateStable),e=FX(BX.UseNavigateStable),n=D.useRef(!1);return UX(()=>{n.current=!0}),D.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,L_({fromRouteId:e},i)))},[t,e])}const A9={};function $4e(t,e,n){A9[t]||(A9[t]=!0)}function B4e(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function mS(t){Vr(!1)}function F4e(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ah.Pop,navigator:i,static:o=!1,future:a}=t;lT()&&Vr(!1);let c=e.replace(/^\/*/,"/"),l=D.useMemo(()=>({basename:c,navigator:i,static:o,future:L_({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=lb(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=D.useMemo(()=>{let y=kX(u,c);return y==null?null:{location:{pathname:y,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:D.createElement(aT.Provider,{value:l},D.createElement(cT.Provider,{children:n,value:g}))}function j4e(t){let{children:e,location:n}=t;return I4e(_3(e),n)}new Promise(()=>{});function _3(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,s)=>{if(!D.isValidElement(r))return;let i=[...e,s];if(r.type===D.Fragment){n.push.apply(n,_3(r.props.children,i));return}r.type!==mS&&Vr(!1),!r.props.index||!r.props.children||Vr(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=_3(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const z4e="6";try{window.__reactRouterVersion=z4e}catch{}const W4e="startTransition",S9=Cne[W4e];function H4e(t){let{basename:e,children:n,future:r,window:s}=t,i=D.useRef();i.current==null&&(i.current=Y8e({window:s,v5Compat:!0}));let o=i.current,[a,c]=D.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=D.useCallback(d=>{l&&S9?S9(()=>c(d)):c(d)},[c,l]);return D.useLayoutEffect(()=>o.listen(u),[o,u]),D.useEffect(()=>B4e(r),[r]),D.createElement(F4e,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var I9;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(I9||(I9={}));var x9;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(x9||(x9={}));const G4e=Rc({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function q4e(){const t=G4e(),{open:e}=oT(),{address:n,isConnected:r}=MC(),{isPending:s}=gY(),{disconnect:i}=mY(),{data:o}=yY({address:n}),[a,c]=D.useState("pixelawbs-popup"),[l,u]=D.useState(new Set),[d,h]=D.useState(!1),[f,p]=D.useState(!1),[g,y]=D.useState(!1),[m,w]=D.useState(!1),v=A4e(),A=D.useRef(null);D.useEffect(()=>{if(a==="halloween-popup"&&A.current){const N=A.current.querySelector("script[data-tiktok-embed]");N&&N.remove();const M=document.createElement("script");M.src="https://www.tiktok.com/embed.js",M.async=!0,M.setAttribute("data-tiktok-embed","true"),A.current.appendChild(M)}},[a]);const C=(N,M,P)=>{if(N==="url"&&P)window.open(P,"_blank");else if(N==="popup"&&M)c(M),u(L=>{const F=new Set(L);return F.delete(M),F}),document.body.offsetWidth;else if(N==="wallet")r?i():e();else if(N==="mint"){if(!n){alert("Please connect your wallet first!");return}h(!0)}else N==="nft-gallery"?p(!0):N==="meme-generator"?y(!0):N==="chess"&&(r?(w(!0),setTimeout(()=>{w(!1),v("/chess")},1500)):e().then(()=>{const L=()=>{window.ethereum&&window.ethereum.selectedAddress?(w(!0),setTimeout(()=>{w(!1),v("/chess")},1500)):setTimeout(L,200)};L()}))},S=()=>c(null),x=N=>{u(M=>new Set(M).add(N)),c(null)},T=N=>{N==="mint-popup"?h(!0):N==="nft-gallery-popup"?p(!0):N==="meme-generator-popup"?y(!0):c(N),u(M=>{const P=new Set(M);return P.delete(N),P})},I=()=>h(!1),k=()=>p(!1),O=()=>y(!1),B=()=>{h(!1),u(N=>new Set(N).add("mint-popup"))},G=()=>{p(!1),u(N=>new Set(N).add("nft-gallery-popup"))},W=()=>{y(!1),u(N=>new Set(N).add("meme-generator-popup"))},R=b.jsxs("div",{onClick:()=>{r?i():e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:r?"limegreen":"red",fontWeight:"bold"},children:[b.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?"Connecting...":r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return b.jsxs("div",{className:t.body,children:[m&&b.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[b.jsx("img",{src:"/images/blueknight.png",alt:"Booting Chess...",style:{width:120,height:120,marginBottom:32}}),b.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),b.jsx(qCe,{onIconClick:C}),b.jsx(KCe,{minimizedWindows:Array.from(l),onRestoreWindow:T,walletButton:R,connectionStatus:{connected:r,address:n,ens:o||void 0}}),b.jsxs(oa,{id:"chat-popup",isOpen:a==="chat-popup",onClose:S,onMinimize:x,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",b.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),b.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),b.jsxs(oa,{id:"purity-popup",isOpen:a==="purity-popup",onClose:S,onMinimize:x,children:[b.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),b.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),b.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),b.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),b.jsxs(oa,{id:"lawbstarz-popup",isOpen:a==="lawbstarz-popup",onClose:S,onMinimize:x,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",b.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",b.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",b.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",b.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),b.jsx("p",{children:"Chain: Ethereum"}),b.jsxs("p",{children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),b.jsxs("blockquote",{className:"twitter-tweet","data-media-max-width":"560",children:[b.jsxs("p",{lang:"en",dir:"ltr",children:["The following 🧵 has been transcripted from a live news broadcast:",b.jsx("br",{}),b.jsx("br",{}),"Anchor: “Good evening, viewers. Tonight, we embark on an extraordinary journey that defies rational explanation. It all began with February's Cigawrette Packs cargo ship hijacking, little did we know that the.. ",b.jsx("a",{href:"https://t.co/BWgLOk59N4",children:"pic.twitter.com/BWgLOk59N4"})]}),"— wables (@wables411) ",b.jsx("a",{href:"https://twitter.com/wables411/status/1669009492007354369?ref_src=twsrc%5Etfw",children:"June 14, 2023"})]}),b.jsx("script",{async:!0,src:"https://platform.twitter.com/widgets.js"}),b.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),b.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),b.jsxs(oa,{id:"lawbstation-popup",isOpen:a==="lawbstation-popup",onClose:S,onMinimize:x,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",b.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),b.jsx("p",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),b.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),b.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),b.jsxs(oa,{id:"nexus-popup",isOpen:a==="nexus-popup",onClose:S,onMinimize:x,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",b.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),b.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),b.jsxs(oa,{id:"lawbsters-popup",isOpen:a==="lawbsters-popup",onClose:S,onMinimize:x,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",b.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),b.jsx("p",{children:"Chain: Ethereum"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",b.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),b.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:b.jsx(gve,{id:"1620879129850834944"})}),b.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),b.jsx(oa,{id:"pixelawbs-popup",isOpen:a==="pixelawbs-popup",onClose:S,onMinimize:x,children:(()=>{const N=M=>{M.preventDefault(),c(null),h(!0)};return b.jsxs(b.Fragment,{children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",b.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:N,children:"COLLECT HERE"})," OR VISIT ",b.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),b.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",b.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),b.jsxs(oa,{id:"halloween-popup",isOpen:a==="halloween-popup",onClose:S,onMinimize:x,children:[b.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),b.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),b.jsx("div",{ref:A,style:{maxWidth:"400px",margin:"0 auto"},children:b.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:b.jsxs("section",{children:[b.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore 🦞🎃 minting rn on @ourzora via @PC69 ",b.jsx("a",{target:"_blank",rel:"noreferrer",title:"♬ original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:"♬ original sound - wables.eth"})]})})})]}),b.jsxs(oa,{id:"lawb-popup",isOpen:a==="lawb-popup",onClose:S,onMinimize:x,children:[b.jsx("h1",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"🦞 $LAWB"})}),b.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",b.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),b.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",b.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),b.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",b.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),b.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),b.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:b.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),b.jsx(JCe,{isOpen:d,onClose:I,onMinimize:B,walletAddress:n||""}),b.jsx(B8e,{isOpen:f,onClose:k,onMinimize:G,walletAddress:n}),b.jsx(oa,{id:"meme-generator-popup",isOpen:g,onClose:O,onMinimize:W,children:b.jsx(NX,{})})]})}const V4e=Rc({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),N9=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],K4e=({onBack:t,walletAddress:e})=>{const n=V4e(),{open:r}=oT(),[s,i]=D.useState([]),[o,a]=D.useState(!0),[c,l]=D.useState(null),[u,d]=D.useState(N9[0]),[h,f]=D.useState(!1),[p,g]=D.useState(null),[y,m]=D.useState("all"),[w,v]=D.useState(null),A=D.useCallback(async()=>{var T,I;try{if((T=window.solana)!=null&&T.isPhantom){const k=await window.solana.connect();g(k.publicKey.toString());return}if((I=window.solflare)!=null&&I.isSolflare){const k=await window.solflare.connect();g(k.publicKey.toString());return}r()}catch(k){console.error("Failed to connect Solana wallet:",k),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);D.useEffect(()=>{var T,I;(T=window.solana)!=null&&T.publicKey?g(window.solana.publicKey.toString()):(I=window.solflare)!=null&&I.publicKey&&g(window.solflare.publicKey.toString())},[]),D.useEffect(()=>{(async()=>{a(!0);try{let I,k=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}k=p,I=await YCe(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",I.data.length)}else u.api==="opensea"?I=await zM(u.slug,100,k):I=await jM(u.slug,1,100,k);y==="owned"&&p&&(console.log("Filtering for owner:",p),I.data.some(B=>B.owners&&B.owners.length>0)?I.data=I.data.filter(B=>B.owners.some(W=>W.owner_of&&W.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),v("Owner data not available for this Solana collection. Showing all NFTs."))),i(I.data)}catch(I){console.error(I)}finally{a(!1)}})()},[e,u,p,y]),D.useEffect(()=>{h&&A()},[h,A]);const C=async T=>{if(a(!0),u.api==="opensea"&&u.chain)try{const I=await EQ(u.chain,T.address,T.token_id.toString()),k={...T,attributes:JSON.stringify(I.traits||[])};l(k)}catch(I){console.error("Failed to fetch full NFT details",I),l(T)}else l(T);a(!1)},S=()=>{if(!c)return null;let T=[];try{T=JSON.parse(c.attributes||"[]")}catch(I){console.error("Failed to parse NFT attributes:",I)}return b.jsxs("div",{className:n.detailView,children:[b.jsx("img",{src:c.image,alt:c.name}),b.jsx("h2",{children:c.name}),b.jsx("h4",{children:"Traits:"}),b.jsx("ul",{children:T.map((I,k)=>b.jsxs("li",{children:[b.jsxs("strong",{children:[I.trait_type,":"]})," ",I.value]},k))})]})},x=()=>b.jsxs(b.Fragment,{children:[b.jsx("div",{className:n.collectionSelector,children:N9.map(T=>b.jsx("button",{className:`${n.collectionButton} ${u.slug===T.slug?"active":""}`,onClick:()=>d(T),children:T.name},T.slug))}),b.jsxs("div",{className:n.content,children:[b.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[b.jsx("button",{onClick:()=>m("all"),style:{background:y==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:y==="all"?"white":"black"},children:"All NFTs"}),b.jsx("button",{onClick:()=>m("owned"),disabled:!e&&!p,style:{background:y==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:y==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&b.jsx("button",{onClick:()=>{A()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),w&&b.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:w}),u.api==="opensea-solana"&&!p&&b.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?b.jsx("div",{className:n.loading,children:"Loading NFTs..."}):b.jsx("div",{className:n.grid,children:s.map(T=>{let I=T.image||T.image_url||T.image_url_shrunk||"/assets/pixelawb.png";return b.jsxs("div",{className:n.gridItem,onClick:()=>void C(T),children:[b.jsx("img",{src:I,alt:T.name,onError:k=>{k.currentTarget.src!==T.image_url&&T.image_url?k.currentTarget.src=T.image_url:k.currentTarget.src!==T.image_url_shrunk&&T.image_url_shrunk?k.currentTarget.src=T.image_url_shrunk:k.currentTarget.src="/assets/pixelawb.png"}}),b.jsx("span",{children:T.name})]},T.id)})})]})]});return b.jsxs("div",{className:n.galleryContainer,children:[b.jsxs("header",{className:n.header,children:[b.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),b.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),b.jsx("div",{className:n.content,children:o?b.jsx("p",{className:n.loading,children:"Loading..."}):c?S():x()})]})},Y4e=Rc({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),Va=({isOpen:t,onClose:e,title:n,children:r})=>{const s=Y4e();return t?b.jsx("div",{className:s.overlay,children:b.jsxs("div",{className:s.popup,children:[b.jsxs("div",{className:s.titleBar,children:[b.jsx("span",{children:n}),b.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:"✕"})]}),b.jsx("div",{className:s.content,children:r})]})}):null},Q4e=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=D.useState([]),[i,o]=D.useState(!1),[a,c]=D.useState(!1),[l,u]=D.useState({}),[d,h]=D.useState(null),{data:f}=wY();D.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const A=await bQ(n);s(A);const C={};A.forEach(S=>{C[S.id]=0}),u(C)}catch(A){h(A.message)}finally{o(!1)}},g=(A,C)=>{u(S=>({...S,[A]:Math.max(0,C)}))},y=async()=>{const A=Object.entries(l).filter(([,C])=>C>0).map(([C,S])=>({id:C,quantity:S}));if(A.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const C=await vQ(n,A);if(C.success&&C.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const S=await f.sendTransaction({to:C.mintTransaction.to,value:BigInt(C.mintTransaction.value),data:C.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${S}`),e()}catch(S){h("Transaction failed: "+S.message)}}else throw new Error(C.message||"Could not retrieve minting transaction.")}catch(C){h("Minting failed: "+C.message)}finally{c(!1)}},m=(A,C)=>`${parseFloat(A)} ${C}`,w={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},v={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return b.jsxs(Va,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&b.jsx("div",{style:v,children:d}),i?b.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?b.jsx("div",{children:"No eligible invite lists found for your wallet."}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{marginBottom:"20px"},children:[b.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(A=>b.jsxs("div",{style:w,children:[b.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:A.name}),b.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",m(A.token_price,A.currency_symbol)]}),b.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",A.wallet_limit===4294967295?"Unlimited":A.wallet_limit," per wallet"]}),b.jsx("input",{type:"number",min:0,max:A.wallet_limit===4294967295?void 0:A.wallet_limit,value:l[A.id]||"",onChange:C=>g(A.id,parseInt(C.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),b.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},A.id))]}),b.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:y,disabled:a,children:a?"Minting...":"Mint"})]})]})},J4e=Rc({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),Z4e=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],X4e=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],eFe=()=>{const t=J4e(),{open:e}=oT(),{address:n,isConnected:r}=MC(),{isPending:s}=gY(),{disconnect:i}=mY(),{data:o}=yY({address:n}),[a,c]=D.useState("main"),[l,u]=D.useState(!1),[d,h]=D.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=D.useState(!1),[g,y]=D.useState(!1),[m,w]=D.useState(!1),[v,A]=D.useState(!1),[C,S]=D.useState(!1),[x,T]=D.useState(!1),[I,k]=D.useState(!1),[O,B]=D.useState(!1),[G,W]=D.useState(!1),[R,N]=D.useState(!1),[M,P]=D.useState(!1),[L,F]=D.useState(!1),V=[{label:"Mint",icon:"/assets/mint.gif",action:()=>y(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>w(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>A(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>S(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],Z=le=>{le.disabled||le.action()};if(D.useEffect(()=>{const le=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(le)},[]),D.useEffect(()=>{u(!0)},[]),a==="gallery")return b.jsx(K4e,{onBack:()=>c("main"),walletAddress:n||void 0});function ae({open:le,onClose:we,title:ee,nfts:ce}){const pe=he=>{switch(he){case"lawbsters":T(!0);break;case"lawbstarz":k(!0);break;case"pixelawbs":B(!0);break;case"halloween":W(!0);break;case"lawbstation":N(!0);break;case"nexus":P(!0);break}};return b.jsx(Va,{isOpen:le,onClose:we,title:ee,children:b.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:ce.map(he=>b.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>pe(he.id),children:[b.jsx("img",{src:he.image,alt:he.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),b.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:he.name}),b.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:he.description})]},he.id))})})}function re({open:le,onClose:we}){return le?b.jsxs(Va,{isOpen:le,onClose:we,title:"$LAWB",children:[b.jsx("h1",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"🦞 $LAWB"})}),b.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",b.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),b.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",b.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),b.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",b.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),b.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),b.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:b.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return b.jsxs("div",{className:t.mobileContainer,children:[b.jsx("header",{className:t.header,children:b.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),b.jsx("div",{className:t.iconGrid,children:V.map(le=>b.jsxs("div",{className:t.icon,onClick:()=>Z(le),children:[b.jsx("img",{src:le.icon,alt:le.label}),b.jsx("span",{children:le.label})]},le.label))}),l&&b.jsxs(Va,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",b.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),y(!0)},children:"COLLECT HERE"})," OR VISIT ",b.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),b.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",b.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),b.jsx("p",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&b.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:b.jsxs("div",{className:t.menuModal,onClick:le=>le.stopPropagation(),children:[b.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),b.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),b.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),b.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),b.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),b.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),b.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),b.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),b.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),b.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),F(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),b.jsx(Q4e,{isOpen:g,onClose:()=>y(!1),walletAddress:n||""}),b.jsx(ae,{open:m,onClose:()=>w(!1),title:"EVM NFT'S FOLDER",nfts:Z4e}),b.jsx(ae,{open:v,onClose:()=>A(!1),title:"SOL NFTS FOLDER",nfts:X4e}),b.jsx(re,{open:C,onClose:()=>S(!1)}),b.jsxs(Va,{isOpen:x,onClose:()=>T(!1),title:"Lawbsters",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",b.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),b.jsx("p",{children:"Chain: Ethereum"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",b.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),b.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),b.jsxs(Va,{isOpen:I,onClose:()=>k(!1),title:"Lawbstarz",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",b.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",b.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",b.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",b.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),b.jsx("p",{children:"Chain: Ethereum"}),b.jsxs("p",{children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),b.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),b.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),b.jsxs(Va,{isOpen:O,onClose:()=>B(!1),title:"Pixelawbs",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",b.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{B(!1),y(!0)},children:"COLLECT HERE"})," OR VISIT ",b.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),b.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",b.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),b.jsxs(Va,{isOpen:G,onClose:()=>W(!1),title:"A Lawbster Halloween",children:[b.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),b.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),b.jsxs(Va,{isOpen:R,onClose:()=>N(!1),title:"Lawbstation",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",b.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),b.jsx("p",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),b.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),b.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),b.jsxs(Va,{isOpen:M,onClose:()=>P(!1),title:"Nexus",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",b.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),b.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),b.jsx(Va,{isOpen:L,onClose:()=>F(!1),title:"Meme Generator",children:b.jsx(NX,{})}),b.jsxs("div",{className:t.taskbar,children:[b.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),b.jsxs("div",{className:t.walletStatus,children:[b.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),b.jsx("span",{className:t.clock,children:d})]})]})};function tFe(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=D.useState(e(t));function s(){r(e(t))}return D.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}const nFe=Symbol(),T9=Object.getPrototypeOf,C3=new WeakMap,rFe=t=>t&&(C3.has(t)?C3.get(t):T9(t)===Object.prototype||T9(t)===Array.prototype),sFe=t=>rFe(t)&&t[nFe]||null,R9=(t,e=!0)=>{C3.set(t,e)},XI={},wU=t=>typeof t=="object"&&t!==null,iFe=t=>wU(t)&&!n1.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),jX=(t,e)=>{const n=A3.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return R9(r,!0),A3.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(n1.has(i))R9(i,!1);else if(lf.has(i)){const[c,l]=lf.get(i);a.value=jX(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},oFe=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(P9(l,o)||M_.has(o)&&P9(l,M_.get(o))))return!0;n(i),wU(o)&&(o=sFe(o)||o);const u=!lf.has(o)&&cFe(o)?tr(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),lf=new WeakMap,n1=new WeakSet,A3=new WeakMap,wv=[1,1],M_=new WeakMap;let P9=Object.is,aFe=(t,e)=>new Proxy(t,e),cFe=iFe,lFe=jX,uFe=oFe;function tr(t={}){if(!wU(t))throw new Error("object required");const e=M_.get(t);if(e)return e;let n=wv[0];const r=new Set,s=(y,m=++wv[0])=>{n!==m&&(n=m,r.forEach(w=>w(y,m)))};let i=wv[1];const o=(y=++wv[1])=>(i!==y&&!r.size&&(i=y,c.forEach(([m])=>{const w=m[1](y);w>n&&(n=w)})),n),a=y=>(m,w)=>{const v=[...m];v[1]=[y,...v[1]],s(v,w)},c=new Map,l=(y,m)=>{const w=!n1.has(m)&&lf.get(m);if(w){if((XI?"production":void 0)!=="production"&&c.has(y))throw new Error("prop listener already exists");if(r.size){const v=w[2](a(y));c.set(y,[w,v])}else c.set(y,[w])}},u=y=>{var m;const w=c.get(y);w&&(c.delete(y),(m=w[1])==null||m.call(w))},d=y=>(r.add(y),r.size===1&&c.forEach(([w,v],A)=>{if((XI?"production":void 0)!=="production"&&v)throw new Error("remove already exists");const C=w[2](a(A));c.set(A,[w,C])}),()=>{r.delete(y),r.size===0&&c.forEach(([w,v],A)=>{v&&(v(),c.set(A,[w]))})});let h=!0;const f=uFe(()=>h,l,u,s),p=aFe(t,f);M_.set(t,p);const g=[t,o,d];return lf.set(p,g),Reflect.ownKeys(t).forEach(y=>{const m=Object.getOwnPropertyDescriptor(t,y);"value"in m&&m.writable&&(p[y]=t[y])}),h=!1,p}function co(t,e,n){const r=lf.get(t);(XI?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function U_(t){const e=lf.get(t);(XI?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return lFe(n,r())}function S0(t){return n1.add(t),t}function dFe(){return{proxyStateMap:lf,refSet:n1,snapCache:A3,versionHolder:wv,proxyCache:M_}}function Si(t,e,n,r){let s=t[e];return co(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:hFe,snapCache:fFe}=dFe(),_A=t=>hFe.has(t);function pFe(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=fFe.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return _A(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!_A(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!_A(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!_A(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=tr(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var O9={};const ge={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof O9<"u"?O9.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},ex={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=ge.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},gFe={bigNumber(t){return t?new ml(t):new ml(0)},multiply(t,e){if(t===void 0||e===void 0)return new ml(0);const n=new ml(t),r=new ml(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},mFe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],yFe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],wFe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],bFe={getERC20Abi:t=>ge.USDT_CONTRACT_ADDRESSES.includes(t)?wFe:mFe,getSwapAbi:()=>yFe},Sh={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},_t={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function yO(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const mt={setItem(t,e){bv()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(bv())return localStorage.getItem(t)||void 0},removeItem(t){bv()&&localStorage.removeItem(t)},clear(){bv()&&localStorage.clear()}};function bv(){return typeof window<"u"&&typeof localStorage<"u"}function tx(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const gi={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,NAMES_SUPPORTED_CHAIN_NAMESPACES:[ge.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,DEFAULT_REMOTE_FEATURES:{socials:["google","x","discord","farcaster","github","apple","facebook"]},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},et={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=et.getActiveNamespace(),e=et.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{mt.setItem(_t.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=mt.getItem(_t.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{mt.removeItem(_t.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{mt.setItem(_t.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{mt.setItem(_t.ACTIVE_CAIP_NETWORK_ID,t),et.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return mt.getItem(_t.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{mt.removeItem(_t.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=yO(t);mt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=et.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),mt.setItem(_t.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=mt.getItem(_t.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=yO(t);mt.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return mt.getItem(_t.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=yO(t);return mt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{mt.setItem(_t.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return mt.getItem(_t.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{mt.removeItem(_t.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return mt.getItem(_t.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=mt.getItem(_t.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{mt.setItem(_t.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return mt.getItem(_t.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=mt.getItem(_t.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));mt.setItem(_t.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=et.getConnectedNamespaces();e.includes(t)||(e.push(t),et.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=et.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),et.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return mt.getItem(_t.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{mt.setItem(_t.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{mt.removeItem(_t.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=mt.getItem(_t.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=et.getBalanceCache();mt.setItem(_t.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=et.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;et.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=et.getBalanceCache();e[t.caipAddress]=t,mt.setItem(_t.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=mt.getItem(_t.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=et.getBalanceCache();mt.setItem(_t.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=et.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),et.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=et.getNativeBalanceCache();e[t.caipAddress]=t,mt.setItem(_t.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=mt.getItem(_t.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=et.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;et.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=et.getEnsCache();e[t.address]=t,mt.setItem(_t.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=et.getEnsCache();mt.setItem(_t.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=mt.getItem(_t.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=et.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;et.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=et.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},mt.setItem(_t.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=et.getIdentityCache();mt.setItem(_t.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{mt.removeItem(_t.PORTFOLIO_CACHE),mt.removeItem(_t.NATIVE_BALANCE_CACHE),mt.removeItem(_t.ENS_CACHE),mt.removeItem(_t.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{mt.setItem(_t.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=mt.getItem(_t.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=et.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===ge.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};mt.setItem(_t.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=mt.getItem(_t.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=et.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),mt.setItem(_t.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=mt.getItem(_t.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=et.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),mt.setItem(_t.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=et.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),mt.setItem(_t.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(et.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},lt={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return lt.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=gi.TEN_SEC_MS:!0},isAllowedRetry(t,e=gi.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(lt.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+gi.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(lt.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!lt.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?et.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,lt.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return ge.W3M_API_URL},getBlockchainApiUrl(){return ge.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return ge.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?gi.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in ge.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function Xb(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class r1{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await Xb(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await Xb(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Xb(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Xb(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Xb(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const vFe={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?gi.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(lt.isTelegram()){if(lt.isIos())return t.filter(e=>e!=="google");if(lt.isMac())return t.filter(e=>e!=="x");if(lt.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},ht=tr({features:gi.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:gi.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),It={state:ht,subscribeKey(t,e){return Si(ht,t,e)},setOptions(t){Object.assign(ht,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...ht.remoteFeatures,...t};ht.remoteFeatures=e,(n=ht.remoteFeatures)!=null&&n.socials&&(ht.remoteFeatures.socials=vFe.filterSocialsByPlatform(ht.remoteFeatures.socials))},setFeatures(t){if(!t)return;ht.features||(ht.features=gi.DEFAULT_FEATURES);const e={...ht.features,...t};ht.features=e},setProjectId(t){ht.projectId=t},setCustomRpcUrls(t){ht.customRpcUrls=t},setAllWallets(t){ht.allWallets=t},setIncludeWalletIds(t){ht.includeWalletIds=t},setExcludeWalletIds(t){ht.excludeWalletIds=t},setFeaturedWalletIds(t){ht.featuredWalletIds=t},setTokens(t){ht.tokens=t},setTermsConditionsUrl(t){ht.termsConditionsUrl=t},setPrivacyPolicyUrl(t){ht.privacyPolicyUrl=t},setCustomWallets(t){ht.customWallets=t},setIsSiweEnabled(t){ht.isSiweEnabled=t},setIsUniversalProvider(t){ht.isUniversalProvider=t},setSdkVersion(t){ht.sdkVersion=t},setMetadata(t){ht.metadata=t},setDisableAppend(t){ht.disableAppend=t},setEIP6963Enabled(t){ht.enableEIP6963=t},setDebug(t){ht.debug=t},setEnableWalletConnect(t){ht.enableWalletConnect=t},setEnableWalletGuide(t){ht.enableWalletGuide=t},setEnableAuthLogger(t){ht.enableAuthLogger=t},setEnableWallets(t){ht.enableWallets=t},setPreferUniversalLinks(t){ht.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(gi.SIWX_DEFAULTS))t[e]??(t[e]=n);ht.siwx=t},setConnectMethodsOrder(t){ht.features={...ht.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){ht.features={...ht.features,walletFeaturesOrder:t}},setSocialsOrder(t){ht.remoteFeatures={...ht.remoteFeatures,socials:t}},setCollapseWallets(t){ht.features={...ht.features,collapseWallets:t}},setEnableEmbedded(t){ht.enableEmbedded=t},setAllowUnsupportedChain(t){ht.allowUnsupportedChain=t},setManualWCControl(t){ht.manualWCControl=t},setEnableNetworkSwitch(t){ht.enableNetworkSwitch=t},setEnableReconnect(t){ht.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(ht.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){ht.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return ht.universalProviderConfigOverride},getSnapshot(){return U_(ht)}},EFe=Object.freeze({enabled:!0,events:[]}),_Fe=new r1({baseUrl:lt.getAnalyticsUrl(),clientId:null}),CFe=5,AFe=60*1e3,Cd=tr({...EFe}),SFe={state:Cd,subscribeKey(t,e){return Si(Cd,t,e)},async sendError(t,e){if(!Cd.enabled)return;const n=Date.now();if(Cd.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<AFe}).length>=CFe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Cd.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=It.state;await _Fe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:lt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Cd.enabled=!0},disable(){Cd.enabled=!1},clearEvents(){Cd.events=[]}};class I0 extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,I0.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,I0):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function k9(t,e){const n=t instanceof I0?t:new I0(t instanceof Error?t.message:String(t),e,t);throw SFe.sendError(n,n.category),n}function $a(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return k9(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return k9(a,e)}},n[r]=i}else n[r]=s}),n}var x0={};const IFe="https://secure.walletconnect.org/sdk",xFe=(typeof process<"u"&&typeof x0<"u"?x0.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||IFe,NFe=(typeof process<"u"&&typeof x0<"u"?x0.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",TFe=(typeof process<"u"&&typeof x0<"u"?x0.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ze={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Os={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},hl={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},RFe={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===hl.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${hl.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===hl.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${hl.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===ge.CHAIN.SOLANA&&t===hl.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${hl.COINBASE.url}/dapp?cb_url=${r}`)}},wo=tr({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),PFe={state:wo,subscribeNetworkImages(t){return co(wo.networkImages,()=>t(wo.networkImages))},subscribeKey(t,e){return Si(wo,t,e)},subscribe(t){return co(wo,()=>t(wo))},setWalletImage(t,e){wo.walletImages[t]=e},setNetworkImage(t,e){wo.networkImages[t]=e},setChainImage(t,e){wo.chainImages[t]=e},setConnectorImage(t,e){wo.connectorImages={...wo.connectorImages,[t]:e}},setTokenImage(t,e){wo.tokenImages[t]=e},setCurrencyImage(t,e){wo.currencyImages[t]=e}},lc=$a(PFe),OFe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},wO=tr({networkImagePromises:{}}),kFe={async fetchWalletImage(t){if(t)return await yt._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(wO.networkImagePromises[t]||(wO.networkImagePromises[t]=yt._fetchNetworkImage(t)),await wO.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return lc.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return lc.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return lc.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return lc.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return lc.state.connectorImages[t.imageId]},getChainImage(t){return lc.state.networkImages[OFe[t]]}},Ad=tr({message:"",variant:"info",open:!1}),DFe={state:Ad,subscribeKey(t,e){return Si(Ad,t,e)},open(t,e){const{debug:n}=It.state,{shortMessage:r,longMessage:s}=t;n&&(Ad.message=r,Ad.variant=e,Ad.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Ad.open=!1,Ad.message="",Ad.variant="info"}},Wf=$a(DFe),LFe=lt.getAnalyticsUrl(),MFe=new r1({baseUrl:LFe,clientId:null}),UFe=["MODAL_CREATED"],tu=tr({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),lr={state:tu,subscribe(t){return co(tu,()=>t(tu))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=It.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=gn.state.address;if(UFe.includes(t.data.event)||typeof window>"u")return;await MFe.post({path:"/e",params:lr.getSdkProperties(),body:{eventId:lt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),tu.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===ge.HTTP_STATUS_CODES.FORBIDDEN&&!tu.reportedErrors.FORBIDDEN&&(Wf.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${bv()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),tu.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;tu.timestamp=Date.now(),tu.data=t,(e=It.state.features)!=null&&e.analytics&&lr._sendAnalyticsEvent(tu)}},$Fe=lt.getApiUrl(),Di=new r1({baseUrl:$Fe,clientId:null}),BFe=40,D9=4,FFe=20,Pt=tr({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),yt={state:Pt,subscribeKey(t,e){return Si(Pt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=It.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return It.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Di.baseUrl}/getWalletImage/${t}`,n=await Di.getBlob({path:e,params:yt._getSdkProperties()});lc.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Di.baseUrl}/public/getAssetImage/${t}`,n=await Di.getBlob({path:e,params:yt._getSdkProperties()});lc.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Di.baseUrl}/public/getAssetImage/${t}`,n=await Di.getBlob({path:e,params:yt._getSdkProperties()});lc.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Di.baseUrl}/public/getCurrencyImage/${t}`,n=await Di.getBlob({path:e,params:yt._getSdkProperties()});lc.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Di.baseUrl}/public/getTokenImage/${t}`,n=await Di.getBlob({path:e,params:yt._getSdkProperties()});lc.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return lt.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===hl.COINBASE.id?!0:Y.state.activeChain==="solana"&&(n.id===hl.SOLFLARE.id||n.id===hl.PHANTOM.id)):t},async fetchProjectConfig(){return(await Di.get({path:"/appkit/v1/config",params:yt._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Di.get({path:"/projects/v1/origins",params:yt._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===ge.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=ge.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=Y.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!kFe.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>yt._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=st.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>yt._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>yt._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>yt._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];yt._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(hl).map(o=>o.id));const r=await Di.get({path:"/getWallets",params:{...yt._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:yt._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=It.state;if(t!=null&&t.length){const e={...yt._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??D9,include:t},{data:n}=await yt.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>yt._fetchWalletImage(i))),Pt.featured=r,Pt.allFeatured=r}},async fetchRecommendedWallets(){try{Pt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=It.state,r=[...e??[],...n??[]].filter(Boolean),s=Y.getRequestedCaipNetworkIds().join(","),i={page:1,entries:D9,include:t,exclude:r,chains:s},{data:o,count:a}=await yt.fetchWallets(i),c=et.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>yt._fetchWalletImage(d))),Pt.recommended=o,Pt.allRecommended=o,Pt.count=a??0}catch{}finally{Pt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=It.state,s=Y.getRequestedCaipNetworkIds().join(","),i=[...Pt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:BFe,include:e,exclude:i,chains:s},{data:a,count:c}=await yt.fetchWallets(o),l=a.slice(0,FFe).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>yt._fetchWalletImage(u))),Pt.wallets=lt.uniqueBy([...Pt.wallets,...yt._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Pt.count=c>Pt.count?c:Pt.count,Pt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await yt.fetchWallets(e);n&&n.forEach(r=>{Pt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=It.state,s=Y.getRequestedCaipNetworkIds().join(",");Pt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await yt.fetchWallets(i);lr.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>yt._fetchWalletImage(c)),lt.wait(300)]),Pt.search=yt._filterOutExtensions(o)},initPromise(t,e){const n=Pt.promises[t];return n||(Pt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&yt.initPromise("connectorImages",yt.fetchConnectorImages),e&&yt.initPromise("featuredWallets",yt.fetchFeaturedWallets),n&&yt.initPromise("recommendedWallets",yt.fetchRecommendedWallets),r&&yt.initPromise("networkImages",yt.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=It.state.features)!=null&&t.analytics&&yt.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Di.get({path:"/getAnalyticsConfig",params:yt._getSdkProperties()});It.setFeatures({analytics:t})}catch{It.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Pt.featured=Pt.allFeatured,Pt.recommended=Pt.allRecommended;return}const e=Y.getRequestedCaipNetworkIds().join(",");Pt.featured=Pt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Pt.recommended=Pt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Pt.filteredWallets=Pt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Pt.filteredWallets=[]},setFilterByNamespace(t){if(!t){Pt.featured=Pt.allFeatured,Pt.recommended=Pt.allRecommended;return}const e=Y.getRequestedCaipNetworkIds().join(",");Pt.featured=Pt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Pt.recommended=Pt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Pt.filteredWallets=Pt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Nn=tr({view:"Connect",history:["Connect"],transactionStack:[]}),jFe={state:Nn,subscribeKey(t,e){return Si(Nn,t,e)},pushTransactionStack(t){Nn.transactionStack.push(t)},popTransactionStack(t){const e=Nn.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),St.goBack();break;case"cancel":s==null||s(),St.goBack();break}},push(t,e){t!==Nn.view&&(Nn.view=t,Nn.history.push(t),Nn.data=e)},reset(t,e){Nn.view=t,Nn.history=[t],Nn.data=e},replace(t,e){Nn.history.at(-1)===t||(Nn.view=t,Nn.history[Nn.history.length-1]=t,Nn.data=e)},goBack(){var r;const t=Y.state.activeCaipAddress,e=St.state.view==="ConnectingFarcaster",n=!t&&e;if(Nn.history.length>1){Nn.history.pop();const[s]=Nn.history.slice(-1);s&&(t&&s==="Connect"?Nn.view="Account":Nn.view=s)}else qn.close();(r=Nn.data)!=null&&r.wallet&&(Nn.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){gn.setFarcasterUrl(void 0,Y.state.activeChain);const a=st.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=U_(It.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Nn.history.length>1){Nn.history=Nn.history.slice(0,t+1);const[e]=Nn.history.slice(-1);e&&(Nn.view=e)}},goBackOrCloseModal(){St.state.history.length>1?St.goBack():qn.close()}},St=$a(jFe),nu=tr({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),S3={state:nu,subscribe(t){return co(nu,()=>t(nu))},setThemeMode(t){nu.themeMode=t;try{const e=st.getAuthConnector();if(e){const n=S3.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:tx(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){nu.themeVariables={...nu.themeVariables,...t};try{const e=st.getAuthConnector();if(e){const n=S3.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:tx(nu.themeVariables,nu.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return U_(nu)}},CA=$a(S3),zX={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},on=tr({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...zX},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),zFe={state:on,subscribe(t){return co(on,()=>{t(on)})},subscribeKey(t,e){return Si(on,t,e)},initialize(t){t.forEach(e=>{const n=et.getConnectedConnectorId(e);n&&st.setConnectorId(n,e)})},setActiveConnector(t){t&&(on.activeConnector=S0(t))},setConnectors(t){t.filter(s=>!on.allConnectors.some(i=>i.id===s.id&&st.getConnectorName(i.name)===st.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&on.allConnectors.push(S0(s))});const n=st.getEnabledNamespaces(),r=st.getEnabledConnectors(n);on.connectors=st.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(on.filterByNamespaceMap).forEach(e=>{on.filterByNamespaceMap[e]=!1}),t.forEach(e=>{on.filterByNamespaceMap[e]=!0}),st.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){on.filterByNamespaceMap[t]=e,st.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=st.getEnabledNamespaces(),e=st.getEnabledConnectors(t),n=st.areAllNamespacesEnabled();on.connectors=st.mergeMultiChainConnectors(e),n?yt.clearFilterByNamespaces():yt.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(on.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return on.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(on.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=st.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===ge.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=st.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===ge.CONNECTOR_ID.AUTH){const s=t,i=U_(It.state),o=CA.getSnapshot().themeMode,a=CA.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:tx(a,o)}),st.setConnectors([t])}else st.setConnectors([t])},getAuthConnector(t){var r;const e=t||Y.state.activeChain,n=on.connectors.find(s=>s.id===ge.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return on.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return on.allConnectors.find(e=>e.id===t)},getConnector(t,e){return on.allConnectors.filter(r=>r.chain===Y.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=U_(It.state),r=CA.getSnapshot().themeMode,s=CA.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:tx(s,r)})},getConnectorsByNamespace(t){const e=on.allConnectors.filter(n=>n.chain===t);return st.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return Y.checkIfSmartAccountEnabled()&&$l(t)===Os.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=st.getConnector(t.id,t.rdns);RFe.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,Y.state.activeChain),e?St.push("ConnectingExternal",{connector:e}):St.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?st.getConnectorsByNamespace(t):st.mergeMultiChainConnectors(on.allConnectors)},setFilterByNamespace(t){on.filterByNamespace=t,on.connectors=st.getConnectors(t),yt.setFilterByNamespace(t)},setConnectorId(t,e){t&&(on.activeConnectorIds={...on.activeConnectorIds,[e]:t},et.setConnectedConnectorId(e,t))},removeConnectorId(t){on.activeConnectorIds={...on.activeConnectorIds,[t]:void 0},et.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return on.activeConnectorIds[t]},isConnected(t){return t?!!on.activeConnectorIds[t]:Object.values(on.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){on.activeConnectorIds={...zX}}},st=$a(zFe),WFe=1e3,ev={checkNamespaceConnectorId(t,e){return st.getConnectorId(t)===e},isSocialProvider(t){return gi.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&st.setActiveConnector(e),s==null||s(lt.isMobile()&&t),r){const l=qn.subscribeKey("open",u=>{u||(St.state.view!==r&&St.replace(r),l(),a(new Error("Modal closed")))})}const c=Y.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&qn.close(),c(),o(Sh.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=Y.subscribeKey("activeCaipAddress",s=>{s&&(qn.close(),r(),e(Sh.parseCaipAddress(s)))});rt.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=gn.state.socialWindow,i=gn.state.socialProvider,o=!1,a=null;const c=Y.subscribeKey("activeCaipAddress",l=>{l&&(e&&qn.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===ge.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=st.getAuthConnector();if(g&&!o){s&&(s.close(),gn.setSocialWindow(void 0,Y.state.activeChain),s=gn.state.socialWindow),o=!0;const y=f.data.resultUri;i&&lr.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}});const m=Y.state.activeCaipNetwork;if(await g.provider.connectSocial({uri:y,chainId:m==null?void 0:m.caipNetworkId}),i){et.setConnectedSocialProvider(i),await rt.connectExternal({id:g.id,type:g.type,socialUri:y},g.chain);const w=Y.state.activeCaipAddress;if(!w){u(new Error("Failed to connect"));return}l(Sh.parseCaipAddress(w)),lr.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&lr.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&lr.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(gn.setSocialProvider(t,Y.state.activeChain),i=gn.state.socialProvider,lr.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=qn.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=st.getAuthConnector();if(p&&!gn.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();gn.setFarcasterUrl(g,Y.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=st.getAuthConnector();a=lt.returnOpenHref(`${ge.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){gn.setSocialWindow(a,Y.state.activeChain),s=gn.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=qn.subscribeKey("open",c=>{c||(St.state.view!==e&&St.replace(e),a(),i(new Error("Modal closed")))})}const o=Y.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&qn.close(),o(),s(Sh.parseCaipAddress(a)))})})},async updateEmail(){const t=et.getConnectedConnectorId(Y.state.activeChain),e=st.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==ge.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return St.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(qn.close(),clearInterval(i),o(),r({email:a}))},WFe),o=qn.subscribeKey("open",a=>{a||(St.state.view!=="Connect"&&St.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return Y.checkIfSmartAccountEnabled()&&$l(t)===Os.ACCOUNT_TYPES.EOA}};function WX(){var r,s;const t=((r=Y.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=Y.state.activeCaipNetwork)==null?void 0:s.id)||1,n=gi.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function $l(t){var n;return(n=Y.getAccountData(t))==null?void 0:n.preferredAccountType}const HX={getConnectionStatus(t,e){const n=st.state.activeConnectorIds[e],r=rt.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=It.state.remoteFeatures)!=null&&a.multiWallet),n=st.state.activeConnectorIds[t],r=rt.getConnections(t),i=(rt.state.recentConnections.get(t)??[]).filter(c=>st.getConnectorById(c.connectorId)),o=HX.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},Hf=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Mr=tr({...Hf}),HFe={state:Mr,subscribeKey(t,e){return Si(Mr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=lt.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Mr.message=Hf.message,Mr.variant=Hf.variant,Mr.svg=Hf.svg,Mr.open=Hf.open,Mr.autoClose=Hf.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Hf.autoClose}){Mr.open?(Mr.open=!1,setTimeout(()=>{Mr.message=t,Mr.variant=n,Mr.svg=e,Mr.open=!0,Mr.autoClose=r},150)):(Mr.message=t,Mr.variant=n,Mr.svg=e,Mr.open=!0,Mr.autoClose=r)}},Ih=HFe,Wn=tr({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),GFe={state:Wn,subscribe(t){return co(Wn,()=>t(Wn))},setLastNetworkInView(t){Wn.lastNetworkInView=t},async fetchTransactions(t,e){var n;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Wn.loading=!0;try{const r=await Et.fetchTransactions({account:t,cursor:Wn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),s=vv.filterSpamTransactions(r.data),i=vv.filterByConnectedChain(s),o=[...Wn.transactions,...i];Wn.loading=!1,e==="coinbase"?Wn.coinbaseTransactions=vv.groupTransactionsByYearAndMonth(Wn.coinbaseTransactions,r.data):(Wn.transactions=o,Wn.transactionsByYear=vv.groupTransactionsByYearAndMonth(Wn.transactionsByYear,i)),Wn.empty=o.length===0,Wn.next=r.next?r.next:void 0}catch{const s=Y.state.activeChain;lr.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:It.state.projectId,cursor:Wn.next,isSmartAccount:$l(s)===Os.ACCOUNT_TYPES.SMART_ACCOUNT}}),Ih.showError("Failed to fetch transactions"),Wn.loading=!1,Wn.empty=!0,Wn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Wn.next=void 0},resetTransactions(){Wn.transactions=[],Wn.transactionsByYear={},Wn.lastNetworkInView=void 0,Wn.loading=!1,Wn.empty=!1,Wn.next=void 0}},vv=$a(GFe,"API_ERROR"),Jt=tr({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Df;const qFe={state:Jt,subscribe(t){return co(Jt,()=>t(Jt))},subscribeKey(t,e){return Si(Jt,t,e)},_getClient(){return Jt._client},setClient(t){Jt._client=S0(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);rt.syncStorageConnections(e)},syncStorageConnections(t){const e=et.getConnections(),n=t??Array.from(Y.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(Jt.recentConnections);i.set(r,s),Jt.recentConnections=i}},getConnections(t){return t?Jt.connections.get(t)??[]:[]},hasAnyConnection(t){const e=rt.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(lt.isTelegram()||lt.isSafari()&&lt.isIos()){if(Df){await Df,Df=void 0;return}if(!lt.isPairingExpired(Jt==null?void 0:Jt.wcPairingExpiry)){const s=Jt.wcUri;Jt.wcUri=s;return}Df=(e=(t=rt._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),rt.state.status="connecting",await Df,Df=void 0,Jt.wcPairingExpiry=void 0,rt.state.status="connected"}else await((r=(n=rt._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=rt._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&Y.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=rt._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||Y.state.activeChain;e&&st.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;qn.setLoading(!0,Y.state.activeChain);const n=st.getAuthConnector();n&&(gn.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),et.setPreferredAccountTypes(Object.entries(Y.state.chains).reduce((s,[i,o])=>{const a=i,c=$l(a);return c!==void 0&&(s[a]=c),s},{})),await rt.reconnectExternal(n),qn.setLoading(!1,Y.state.activeChain),lr.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=rt._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=rt._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=rt._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=rt._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=rt._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=rt._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=rt._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=rt._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=rt._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=rt._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=rt._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=rt._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Jt.wcUri=void 0,Jt.wcPairingExpiry=void 0,Jt.wcLinking=void 0,Jt.recentWallet=void 0,Jt.status="disconnected",vv.resetTransactions(),et.deleteWalletConnectDeepLink()},resetUri(){Jt.wcUri=void 0,Jt.wcPairingExpiry=void 0,Df=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=rt.state;t&&et.setWalletConnectDeepLink(t),e&&et.setAppKitRecent(e),lr.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=St.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Jt.wcBasic=t},setUri(t){Jt.wcUri=t,Jt.wcPairingExpiry=lt.getPairingExpiry()},setWcLinking(t){Jt.wcLinking=t},setWcError(t){Jt.wcError=t,Jt.buffering=!1},setRecentWallet(t){Jt.recentWallet=t},setBuffering(t){Jt.buffering=t},setStatus(t){Jt.status=t},setIsSwitchingConnection(t){Jt.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=rt._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new I0("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(Jt.connections);n.set(e,t),Jt.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=gn.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&ev.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await rt.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=st.getConnectorById(t.connectorId),s=t.connectorId===ge.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await rt.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await rt.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=st.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===ge.CONNECTOR_ID.AUTH,a=t.connectorId===ge.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&ev.isSocialProvider(i)){const{address:d}=await ev.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){qn.open({view:"ConnectingFarcaster"})},onConnect(){St.replace("ProfileWallets")}});c=d}else{const{address:d}=await ev.connectEmail({closeModalOnConnect:r,onOpen(){qn.open({view:"EmailLogin"})},onConnect(){St.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await ev.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){qn.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){St.replace("ProfileWallets")}});c=d}else{const d=await rt.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await rt.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=gn.getCaipAddress(n);if(o){const{address:c}=Sh.parseCaipAddress(o);i=c}const a=HX.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await rt.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await rt.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},rt=$a(qFe),Hm=tr({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),jy={state:Hm,subscribe(t){return co(Hm,()=>t(Hm))},subscribeOpen(t){return Si(Hm,"open",t)},set(t){Object.assign(Hm,{...Hm,...t})}},VFe={async getTokenList(){var r;const t=Y.state.activeCaipNetwork,e=await Et.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=Y.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(rt==null?void 0:rt.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await Et.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await Et.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=rt.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await bU.getMyTokensWithBalance(t);return gn.setTokenBalance(e,Y.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:WX(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Cn=tr({tokenBalances:[],loading:!1}),KFe={state:Cn,subscribe(t){return co(Cn,()=>t(Cn))},subscribeKey(t,e){return Si(Cn,t,e)},setToken(t){t&&(Cn.token=S0(t))},setTokenAmount(t){Cn.sendTokenAmount=t},setReceiverAddress(t){Cn.receiverAddress=t},setReceiverProfileImageUrl(t){Cn.receiverProfileImageUrl=t},setReceiverProfileName(t){Cn.receiverProfileName=t},setNetworkBalanceInUsd(t){Cn.networkBalanceInUSD=t},setLoading(t){Cn.loading=t},async sendToken(){var t;try{switch(wn.setLoading(!0),(t=Y.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await wn.sendEvmToken();return;case"solana":await wn.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{wn.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=Y.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=$l(t);if(!wn.state.sendTokenAmount||!wn.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!wn.state.token)throw new Error("A token is required");(n=wn.state.token)!=null&&n.address?(lr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Os.ACCOUNT_TYPES.SMART_ACCOUNT,token:wn.state.token.address,amount:wn.state.sendTokenAmount,network:((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await wn.sendERC20Token({receiverAddress:wn.state.receiverAddress,tokenAddress:wn.state.token.address,sendTokenAmount:wn.state.sendTokenAmount,decimals:wn.state.token.quantity.decimals})):(lr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Os.ACCOUNT_TYPES.SMART_ACCOUNT,token:wn.state.token.symbol||"",amount:wn.state.sendTokenAmount,network:((s=Y.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await wn.sendNativeToken({receiverAddress:wn.state.receiverAddress,sendTokenAmount:wn.state.sendTokenAmount,decimals:wn.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Cn.loading=!0;const e=(i=Y.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=Y.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=Y.state.activeCaipAddress,s=r?lt.getPlainAddress(r):void 0;if(Cn.lastRetry&&!lt.isAllowedRetry(Cn.lastRetry,30*gi.ONE_SEC_MS))return Cn.loading=!1,[];try{if(s&&e&&n){const a=await bU.getMyTokensWithBalance();return Cn.tokenBalances=a,Cn.lastRetry=void 0,a}}catch(a){Cn.lastRetry=Date.now(),t==null||t(a),Ih.showError("Token Balance Unavailable")}finally{Cn.loading=!1}return[]},fetchNetworkBalance(){if(Cn.tokenBalances.length===0)return;const t=VFe.mapBalancesToSwapTokens(Cn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===WX());e&&(Cn.networkBalanceInUSD=e?gFe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;St.pushTransactionStack({});const e=t.receiverAddress,n=gn.state.address,r=rt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await rt.sendTransaction({chainNamespace:ge.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),lr.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:$l("eip155")===Os.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=wn.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=rt._getClient())==null||a.updateBalance("eip155"),wn.resetSend()},async sendERC20Token(t){St.pushTransactionStack({onSuccess(){St.replace("Account")}});const e=rt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(gn.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=lt.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await rt.writeContract({fromAddress:gn.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:bFe.getERC20Abi(n),chainNamespace:ge.CHAIN.EVM}),wn.resetSend()}},async sendSolanaToken(){var t;if(!wn.state.sendTokenAmount||!wn.state.receiverAddress)throw new Error("An amount and receiver address are required");St.pushTransactionStack({onSuccess(){St.replace("Account")}}),await rt.sendTransaction({chainNamespace:"solana",to:wn.state.receiverAddress,value:wn.state.sendTokenAmount}),(t=rt._getClient())==null||t.updateBalance("solana"),wn.resetSend()},resetSend(){Cn.token=void 0,Cn.sendTokenAmount=void 0,Cn.receiverAddress=void 0,Cn.receiverProfileImageUrl=void 0,Cn.receiverProfileName=void 0,Cn.loading=!1,Cn.tokenBalances=[]}},wn=$a(KFe),bO={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},AA={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},De=tr({chains:pFe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),YFe={state:De,subscribe(t){return co(De,()=>{t(De)})},subscribeKey(t,e){return Si(De,t,e)},subscribeChainProp(t,e,n){let r;return co(De.chains,()=>{var i;const s=n||De.activeChain;if(s){const o=(i=De.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=et.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=It.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(De.noAdapters=!0),De.noAdapters||(De.activeChain=a==null?void 0:a.namespace,De.activeCaipNetwork=i,Y.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),De.activeChain&&jy.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),h=et.getPreferredAccountTypes()||{},f={...It.state.defaultAccountTypes,...h};Y.state.chains.set(u,{namespace:u,networkState:tr({...AA,caipNetwork:d==null?void 0:d[0]}),accountState:tr({...bO,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),Y.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(De.activeChain===t){const r=Array.from(De.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&Y.setActiveCaipNetwork(s)}}De.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");De.chains.set(t.namespace,{namespace:t.namespace,networkState:{...AA,caipNetwork:r[0]},accountState:bO,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),Y.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=De.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),De.chains.set(t.chainNamespace,{...e,caipNetworks:r}),Y.setRequestedCaipNetworks(r,t.chainNamespace),st.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=De.chains.get(t);if(n){const o=((r=De.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&Y.setActiveCaipNetwork(n.caipNetworks[0]),De.chains.set(t,{...n,caipNetworks:a}),Y.setRequestedCaipNetworks(a||[],t),a.length===0&&st.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=De.chains.get(t);n&&(n.networkState={...n.networkState||AA,...e},De.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=De.chains.get(t);if(r){const s={...r.accountState||bO,...e};De.chains.set(t,{...r,accountState:s}),(De.chains.size===1||De.activeChain===t)&&(e.caipAddress&&(De.activeCaipAddress=e.caipAddress),gn.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=De.chains.get(t);if(n){const r={...n.networkState||AA,...e};De.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){Y.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;De.activeChain=t;const e=t?De.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(De.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,De.activeCaipNetwork=n,Y.setChainNetworkData(t,{caipNetwork:n}),et.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),jy.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;De.activeChain!==t.chainNamespace&&Y.setIsSwitchingNamespace(!0);const e=De.chains.get(t.chainNamespace);De.activeChain=t.chainNamespace,De.activeCaipNetwork=t,Y.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?De.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:De.activeCaipAddress=void 0,Y.setAccountProp("caipAddress",De.activeCaipAddress,t.chainNamespace),e&&gn.replaceState(e.accountState),wn.resetSend(),jy.set({activeChain:De.activeChain,selectedNetworkId:(i=De.activeCaipNetwork)==null?void 0:i.caipNetworkId}),et.setActiveCaipNetworkId(t.caipNetworkId),!Y.checkIfSupportedNetwork(t.chainNamespace)&&It.state.enableNetworkSwitch&&!It.state.allowUnsupportedChain&&!rt.state.wcBasic&&Y.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=De.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==Y.state.activeChain,n=(s=Y.getNetworkData(t))==null?void 0:s.caipNetwork,r=Y.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await Y.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=Y.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=Y.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=De.activeCaipNetwork)==null?void 0:a.id)})),s=Y.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&qn.close()}catch{St.goBack()}lr.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||De.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=De.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||De.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=De.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=De.activeChain;if(e&&(n=e),!n)return;const r=(s=De.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=De.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=De.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return lt.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return De.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=Y.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){Y.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=Y.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));st.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return De.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=Y.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=De.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:De.activeCaipNetwork},getActiveCaipAddress(){return De.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=De.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=Y.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());Y.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||De.activeCaipNetwork,r=Y.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!De.activeChain)return!0;const e=Y.getRequestedCaipNetworks(De.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){Y.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=ex.caipNetworkIdToNumber((r=De.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=De.activeChain;if(!e||!t)return!1;const n=Y.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){qn.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=De.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&gi.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){Y.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=Y.getAccountProp("preferredAccountType",e);De.activeCaipAddress=void 0,Y.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),st.removeConnectorId(e)},setIsSwitchingNamespace(t){De.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(De.chains.forEach(s=>{ge.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=De.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=Y.state.chains.get(t))==null?void 0:e.accountState:gn.state},getNetworkData(t){var n;const e=t||De.activeChain;if(e)return(n=Y.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=Y.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=st.state.filterByNamespace;return(t?[De.chains.get(t)]:Array.from(De.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?Y.getRequestedCaipNetworks(t):Y.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){De.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return De.lastConnectedSIWECaipNetwork}},Y=$a(YFe),QFe={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},GX=lt.getBlockchainApiUrl(),Li=tr({clientId:null,api:new r1({baseUrl:GX,clientId:null}),supportedChains:{http:[],ws:[]}}),Et={state:Li,async get(t){const{st:e,sv:n}=Et.getSdkProperties(),r=It.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Li.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=It.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Li.supportedChains.http.length||await Et.getSupportedNetworks()}catch{return!1}return Li.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await Et.get({path:"v1/supported-chains"});return Li.supportedChains=t,t}catch{return Li.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await Et.isNetworkSupported(e))return{avatar:"",name:""};const r=et.getIdentityFromCacheForAddress(t);if(r)return r;const s=await Et.get({path:`/v1/identity/${t}`,params:{sender:Y.state.activeCaipAddress?lt.getPlainAddress(Y.state.activeCaipAddress):void 0}});return et.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await Et.isNetworkSupported((a=Y.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?Et.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await Et.isNetworkSupported((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?Et.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await Et.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Et.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await Et.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Li.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:It.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await Et.isNetworkSupported((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Et.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=Et.getSdkProperties();if(!await Et.isNetworkSupported((s=Y.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return Et.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await Et.isNetworkSupported((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Li.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:gi.CONVERT_SLIPPAGE_TOLERANCE},projectId:It.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=Et.getSdkProperties();if(!await Et.isNetworkSupported((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Et.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=Et.getSdkProperties();if(!await Et.isNetworkSupported((l=Y.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Ih.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=et.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await Et.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return et.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await Et.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Et.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await Et.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Et.get({path:`/v1/profile/reverse/${t}`,params:{sender:gn.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await Et.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Et.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await Et.isNetworkSupported((i=Y.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Li.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await Et.isNetworkSupported((a=Y.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Li.api.post({path:"/v1/generators/onrampurl",params:{projectId:It.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await Et.isNetworkSupported((e=Y.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Et.get({path:"/v1/onramp/options"})}catch{return QFe}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await Et.isNetworkSupported((s=Y.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Li.api.post({path:"/v1/onramp/quote",params:{projectId:It.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await Et.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Et.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await Et.isNetworkSupported((s=Y.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Li.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:It.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Li.clientId=t,Li.api=new r1({baseUrl:GX,clientId:t})}},vO={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Vg(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},bU={async getMyTokensWithBalance(t){const e=gn.state.address,n=Y.state.activeCaipNetwork,r=st.getConnectorId("eip155")===ge.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=et.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===ge.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await Et.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=vO.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await rt.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await rt.walletGetAssets({account:t,chainFilter:[s]});if(!vO.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>vO.createBalance(l,e.caipNetworkId));return et.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},zc=tr({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),JFe={state:zc,replaceState(t){t&&Object.assign(zc,S0(t))},subscribe(t){return Y.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return Y.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){Y.setAccountProp("status",t,e)},getCaipAddress(t){return Y.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?lt.getPlainAddress(t):void 0;e===Y.state.activeChain&&(Y.state.activeCaipAddress=t),Y.setAccountProp("caipAddress",t,e),Y.setAccountProp("address",n,e)},setBalance(t,e,n){Y.setAccountProp("balance",t,n),Y.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){Y.setAccountProp("profileName",t,e)},setProfileImage(t,e){Y.setAccountProp("profileImage",t,e)},setUser(t,e){Y.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){Y.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){Y.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){Y.setAccountProp("currentTab",t,Y.state.activeChain)},setTokenBalance(t,e){t&&Y.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){Y.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=Y.getAccountProp("addressLabels",n)||new Map;r.set(t,e),Y.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=Y.getAccountProp("addressLabels",e)||new Map;n.delete(t),Y.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){Y.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){Y.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&Y.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){Y.setAccountProp("socialWindow",t?S0(t):void 0,e)},setFarcasterUrl(t,e){Y.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;zc.balanceLoading=!0;const e=(i=Y.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=Y.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=Y.state.activeCaipAddress,s=r?lt.getPlainAddress(r):void 0;if(zc.lastRetry&&!lt.isAllowedRetry(zc.lastRetry,30*gi.ONE_SEC_MS))return zc.balanceLoading=!1,[];try{if(s&&e&&n){const a=await bU.getMyTokensWithBalance();return gn.setTokenBalance(a,n),zc.lastRetry=void 0,zc.balanceLoading=!1,a}}catch(a){zc.lastRetry=Date.now(),t==null||t(a),Ih.showError("Token Balance Unavailable")}finally{zc.balanceLoading=!1}return[]},resetAccount(t){Y.resetAccount(t)}},gn=$a(JFe),ZFe={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=Y.state.activeCaipNetwork,r=St.state.data;if(t.id===(n==null?void 0:n.id))return;const i=gn.getCaipAddress(Y.state.activeChain),o=t.chainNamespace!==Y.state.activeChain,a=gn.getCaipAddress(t.chainNamespace),l=st.getConnectorId(Y.state.activeChain)===ge.CONNECTOR_ID.AUTH,u=ge.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?St.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?St.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):St.push("SwitchNetwork",{...r,network:t})}},Mi=tr({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),XFe={state:Mi,subscribe(t){return co(Mi,()=>t(Mi))},subscribeKey(t,e){return Si(Mi,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=Y.state.activeChain,r=e&&e!==n,s=(i=Y.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(rt.state.wcBasic?yt.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await yt.prefetch(),st.setFilterByNamespace(t==null?void 0:t.namespace),qn.setLoading(!0,e),e&&r){const a=((o=Y.getNetworkData(e))==null?void 0:o.caipNetwork)||Y.getRequestedCaipNetworks(e)[0];a&&ZFe.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=Y.state.noAdapters;It.state.manualWCControl||a&&!s?lt.isMobile()?St.reset("AllWallets"):St.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?St.reset(t.view,t.data):s?St.reset("Account"):St.reset("Connect")}Mi.open=!0,jy.set({open:!0}),lr.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=It.state.enableEmbedded,e=!!Y.state.activeCaipAddress;Mi.open&&lr.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Mi.open=!1,St.reset("Connect"),qn.clearLoading(),t?e?St.replace("Account"):St.push("Connect"):jy.set({open:!1}),rt.resetUri()},setLoading(t,e){e&&Mi.loadingNamespaceMap.set(e,t),Mi.loading=t,jy.set({loading:t})},clearLoading(){Mi.loadingNamespaceMap.clear(),Mi.loading=!1},shake(){Mi.shake||(Mi.shake=!0,setTimeout(()=>{Mi.shake=!1},500))}},qn=$a(XFe),L9=2147483648,eje={convertEVMChainIdToCoinType(t){if(t>=L9)throw new Error("Invalid chainId");return(L9|t)>>>0}},na=tr({suggestions:[],loading:!1}),tje={state:na,subscribe(t){return co(na,()=>t(na))},subscribeKey(t,e){return Si(na,t,e)},async resolveName(t){var e,n;try{return await Et.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await Et.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{na.loading=!0,na.suggestions=[];const e=await Et.getEnsNameSuggestions(t);return na.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],na.suggestions}catch(e){const n=yS.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{na.loading=!1}},async getNamesForAddress(t){try{if(!Y.state.activeCaipNetwork)return[];const n=et.getEnsFromCacheForAddress(t);if(n)return n;const r=await Et.reverseLookupEnsName({address:t});return et.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=yS.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=Y.state.activeCaipNetwork,n=gn.state.address,r=st.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");na.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});St.pushTransactionStack({onCancel(){St.replace("RegisterAccountName")}});const i=await rt.signMessage(s);na.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=eje.convertEVMChainIdToCoinType(Number(o));await Et.registerEnsName({coinType:a,address:n,signature:i,message:s}),gn.setProfileName(t,e.chainNamespace),St.replace("RegisterAccountNameSuccess")}catch(s){const i=yS.parseEnsApiError(s,`Error registering name ${t}`);throw St.replace("RegisterAccountName"),new Error(i)}finally{na.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},yS=$a(tje);let Lf=null;const Bd={getSIWX(){return It.state.siwx},async initializeIfEnabled(){var i;const t=It.state.siwx,e=Y.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(Y.checkIfSupportedNetwork(n))try{if(Lf&&await Lf,(await t.getSessions(`${n}:${r}`,s)).length)return;await qn.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),lr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=rt._getClient())==null?void 0:i.disconnect().catch(console.error)),St.reset("Connect"),Ih.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=It.state.siwx,e=lt.getPlainAddress(Y.getActiveCaipAddress()),n=Y.getActiveCaipNetwork(),r=rt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();st.getConnectorId(n.chainNamespace)===ge.CONNECTOR_ID.AUTH&&St.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),Y.setLastConnectedSIWECaipNetwork(n),qn.close(),lr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!qn.state.open||St.state.view==="ApproveTransaction")&&await qn.open({view:"SIWXSignMessage"}),Ih.showError("Error signing message"),lr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=Y.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,lt.getPlainAddress(Y.getActiveCaipAddress())||""));s&&s.length>0?await Y.switchActiveNetwork(r):await rt.disconnect()}else await rt.disconnect()}else qn.close();qn.close(),lr.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=Y.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,lt.getPlainAddress(Y.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=It.state.siwx,e=lt.getPlainAddress(Y.getActiveCaipAddress()),n=Y.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=St.state.view==="ApproveTransaction",r=St.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var l;const i=Bd.getSIWX();if(!i||!s.includes(ge.CHAIN.EVM)){const u=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:u.address,chainId:u.chainId,accounts:u.accounts}}const o=await i.createMessage({chainId:((l=Y.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),a={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},c=await t.connect({chainId:e,socialUri:n,siwxMessage:a,preferredAccountType:r});return a.accountAddress=c.address,a.serializedMessage=c.message||"",c.signature&&c.message&&await Bd.addEmbeddedWalletSession(a,c.message,c.signature),{address:c.address,chainId:c.chainId,accounts:c.accounts}},async addEmbeddedWalletSession(t,e,n){if(Lf)return Lf;const r=Bd.getSIWX();return r?(Lf=r.addSession({data:t,message:e,signature:n}).finally(()=>{Lf=null}),Lf):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=Bd.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=Y.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Ih.showLoading("Authenticating...",{autoClose:!1}),gn.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),lr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Bd.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),lr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Bd.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Ih.hide()}}return!0},getSIWXEventProperties(){var e;const t=Y.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=Y.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:$l(t)===Os.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Eo={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:ge.CHAIN.EVM,CONNECTOR_TYPE_AUTH:"AUTH"},Po={ConnectorExplorerIds:{[ge.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ge.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ge.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[ge.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[ge.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Eo.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Eo.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Eo.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Eo.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Eo.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Eo.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Eo.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Eo.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Eo.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Eo.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Eo.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[ge.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ge.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ge.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[ge.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[ge.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[ge.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[ge.CONNECTOR_ID.INJECTED]:"Browser Wallet",[ge.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[ge.CONNECTOR_ID.COINBASE]:"Coinbase",[ge.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[ge.CONNECTOR_ID.LEDGER]:"Ledger",[ge.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[ge.CONNECTOR_ID.INJECTED]:"INJECTED",[ge.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[ge.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[ge.CONNECTOR_ID.AUTH]:"AUTH",[Eo.CONNECTOR_TYPE_AUTH]:"AUTH"}},Qi={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Eo.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=Y.state.activeChain;return ge.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>st.getConnectorId(e)===ge.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},nje=new AbortController,Sd={EmbeddedWalletAbortController:nje,ALERT_ERRORS:{IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"}}},rje="rpc.walletconnect.org";function M9(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const EO=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Ev={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===rje}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:ge.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${ge.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return EO.includes(e)?M9(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,y;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((y=r==null?void 0:r[i])==null?void 0:y.map(m=>m.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Po.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Ev.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(vh(a.url,a.config))}),EO.includes(t.caipNetworkId)&&r.push(vh(M9(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(vh(a))}),II(r)},extendWagmiTransports(t,e,n){if(EO.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return II([n,vh(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:ge.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=et.getActiveCaipNetworkId(),n=Y.getAllRequestedCaipNetworks(),r=Array.from(((c=Y.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},U9={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Cs={set(t,e){fl.isClient&&localStorage.setItem(`${Ze.STORAGE_KEY}${t}`,e)},get(t){return fl.isClient?localStorage.getItem(`${Ze.STORAGE_KEY}${t}`):null},delete(t,e){fl.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ze.STORAGE_KEY}${t}`))}},SA=30*1e3,fl={checkIfAllowedToTriggerEmail(){const t=Cs.get(Ze.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<SA){const n=Math.ceil((SA-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Cs.get(Ze.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<SA)return Math.ceil((SA-e)/1e3)}return 0},checkIfRequestExists(t){return Os.NOT_SAFE_RPC_METHODS.includes(t.method)||Os.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(U9.transactionHash))||(t==null?void 0:t.match(U9.signedMessage)))?Ze.RPC_RESPONSE_TYPE_TX:Ze.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Os.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"},gr=E.object({message:E.string()});function Be(t){return E.literal(Ze[t])}const uT=E.object({serializedMessage:E.string().optional(),accountAddress:E.string(),chainId:E.string(),notBefore:E.string().optional(),domain:E.string(),uri:E.string(),version:E.string(),nonce:E.string(),statement:E.string().optional(),resources:E.array(E.string()).optional(),requestId:E.string().optional(),issuedAt:E.string().optional(),expirationTime:E.string().optional()});E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const sje=E.object({chainId:E.string().or(E.number()),rpcUrl:E.optional(E.string())}),ije=E.object({email:E.string().email()}),oje=E.object({otp:E.string()}),aje=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number())),siwxMessage:E.optional(uT),rpcUrl:E.optional(E.string())}),cje=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string()),siwxMessage:E.optional(uT),rpcUrl:E.optional(E.string())}),lje=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),uje=E.object({email:E.string().email()}),dje=E.object({otp:E.string()}),hje=E.object({otp:E.string()}),fje=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),pje=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),gje=E.object({type:E.string()}),mje=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),yje=E.object({url:E.string()}),wje=E.object({userName:E.string()}),bje=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([Os.ACCOUNT_TYPES.EOA,Os.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(uT)}),vje=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),Eje=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([Os.ACCOUNT_TYPES.EOA,Os.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(uT)}),_je=E.object({uri:E.string()}),Cje=E.object({isConnected:E.boolean()}),Aje=E.object({chainId:E.string().or(E.number())}),Sje=E.object({chainId:E.string().or(E.number())}),Ije=E.object({newEmail:E.string().email()}),xje=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const Nje=E.object({version:E.string().optional()}),Tje=E.object({type:E.string(),address:E.string()}),Rje=E.any(),Pje=E.object({method:E.literal("eth_accounts")}),Oje=E.object({method:E.literal("eth_blockNumber")}),kje=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),Dje=E.object({method:E.literal("eth_chainId")}),Lje=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),Mje=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),Uje=E.object({method:E.literal("eth_gasPrice")}),$je=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),Bje=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),Fje=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),jje=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),zje=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),Wje=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),Hje=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),Gje=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),qje=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),Vje=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),Kje=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),Yje=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),Qje=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),Jje=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),Zje=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),Xje=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),e9e=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),t9e=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),n9e=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),r9e=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),s9e=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),i9e=E.object({method:E.literal("eth_newBlockFilter")}),o9e=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),a9e=E.object({method:E.literal("eth_newPendingTransactionFilter")}),c9e=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),l9e=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),u9e=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),$9=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),d9e=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),h9e=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),f9e=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),p9e=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),g9e=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),m9e=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),y9e=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),w9e=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),b9e=E.object({method:E.literal("wallet_getCapabilities"),params:E.array(E.string().or(E.number()).optional()).optional()}),v9e=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),E9e=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),_9e=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),B9=E.object({token:E.string()}),Fe=E.object({id:E.string().optional()}),tv={appEvent:Fe.extend({type:Be("APP_SWITCH_NETWORK"),payload:sje}).or(Fe.extend({type:Be("APP_CONNECT_EMAIL"),payload:ije})).or(Fe.extend({type:Be("APP_CONNECT_DEVICE")})).or(Fe.extend({type:Be("APP_CONNECT_OTP"),payload:oje})).or(Fe.extend({type:Be("APP_CONNECT_SOCIAL"),payload:aje})).or(Fe.extend({type:Be("APP_GET_FARCASTER_URI")})).or(Fe.extend({type:Be("APP_CONNECT_FARCASTER")})).or(Fe.extend({type:Be("APP_GET_USER"),payload:E.optional(cje)})).or(Fe.extend({type:Be("APP_GET_SOCIAL_REDIRECT_URI"),payload:lje})).or(Fe.extend({type:Be("APP_SIGN_OUT")})).or(Fe.extend({type:Be("APP_IS_CONNECTED"),payload:E.optional(B9)})).or(Fe.extend({type:Be("APP_GET_CHAIN_ID")})).or(Fe.extend({type:Be("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Fe.extend({type:Be("APP_INIT_SMART_ACCOUNT")})).or(Fe.extend({type:Be("APP_SET_PREFERRED_ACCOUNT"),payload:gje})).or(Fe.extend({type:Be("APP_RPC_REQUEST"),payload:$9.or(_9e).or(Pje).or(Oje).or(kje).or(Dje).or(Lje).or(Mje).or(Uje).or($je).or(Bje).or(Fje).or(jje).or(zje).or(Wje).or(Hje).or(Gje).or(qje).or(Vje).or(Kje).or(Yje).or(Qje).or(Jje).or(Zje).or(Xje).or(e9e).or(t9e).or(n9e).or(r9e).or(s9e).or(i9e).or(o9e).or(a9e).or(c9e).or(l9e).or(u9e).or($9).or(d9e).or(h9e).or(f9e).or(p9e).or(g9e).or(m9e).or(w9e).or(y9e).or(b9e).or(v9e).or(E9e).and(E.object({chainId:E.string().or(E.number()).optional(),chainNamespace:E.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:E.string().optional()}))})).or(Fe.extend({type:Be("APP_UPDATE_EMAIL"),payload:uje})).or(Fe.extend({type:Be("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:dje})).or(Fe.extend({type:Be("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:hje})).or(Fe.extend({type:Be("APP_SYNC_THEME"),payload:fje})).or(Fe.extend({type:Be("APP_SYNC_DAPP_DATA"),payload:pje})).or(Fe.extend({type:Be("APP_RELOAD")})).or(Fe.extend({type:Be("APP_RPC_ABORT")})),frameEvent:Fe.extend({type:Be("FRAME_SWITCH_NETWORK_ERROR"),payload:gr}).or(Fe.extend({type:Be("FRAME_SWITCH_NETWORK_SUCCESS"),payload:Sje})).or(Fe.extend({type:Be("FRAME_CONNECT_EMAIL_SUCCESS"),payload:mje})).or(Fe.extend({type:Be("FRAME_CONNECT_EMAIL_ERROR"),payload:gr})).or(Fe.extend({type:Be("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:yje})).or(Fe.extend({type:Be("FRAME_GET_FARCASTER_URI_ERROR"),payload:gr})).or(Fe.extend({type:Be("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:wje})).or(Fe.extend({type:Be("FRAME_CONNECT_FARCASTER_ERROR"),payload:gr})).or(Fe.extend({type:Be("FRAME_CONNECT_OTP_ERROR"),payload:gr})).or(Fe.extend({type:Be("FRAME_CONNECT_OTP_SUCCESS")})).or(Fe.extend({type:Be("FRAME_CONNECT_DEVICE_ERROR"),payload:gr})).or(Fe.extend({type:Be("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Fe.extend({type:Be("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:bje})).or(Fe.extend({type:Be("FRAME_CONNECT_SOCIAL_ERROR"),payload:gr})).or(Fe.extend({type:Be("FRAME_GET_USER_ERROR"),payload:gr})).or(Fe.extend({type:Be("FRAME_GET_USER_SUCCESS"),payload:Eje})).or(Fe.extend({type:Be("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:gr})).or(Fe.extend({type:Be("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:_je})).or(Fe.extend({type:Be("FRAME_SIGN_OUT_ERROR"),payload:gr})).or(Fe.extend({type:Be("FRAME_SIGN_OUT_SUCCESS")})).or(Fe.extend({type:Be("FRAME_IS_CONNECTED_ERROR"),payload:gr})).or(Fe.extend({type:Be("FRAME_IS_CONNECTED_SUCCESS"),payload:Cje})).or(Fe.extend({type:Be("FRAME_GET_CHAIN_ID_ERROR"),payload:gr})).or(Fe.extend({type:Be("FRAME_GET_CHAIN_ID_SUCCESS"),payload:Aje})).or(Fe.extend({type:Be("FRAME_RPC_REQUEST_ERROR"),payload:gr})).or(Fe.extend({type:Be("FRAME_RPC_REQUEST_SUCCESS"),payload:Rje})).or(Fe.extend({type:Be("FRAME_SESSION_UPDATE"),payload:B9})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_ERROR"),payload:gr})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_SUCCESS"),payload:vje})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:gr})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:gr})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:Ije})).or(Fe.extend({type:Be("FRAME_SYNC_THEME_ERROR"),payload:gr})).or(Fe.extend({type:Be("FRAME_SYNC_THEME_SUCCESS")})).or(Fe.extend({type:Be("FRAME_SYNC_DAPP_DATA_ERROR"),payload:gr})).or(Fe.extend({type:Be("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Fe.extend({type:Be("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:xje})).or(Fe.extend({type:Be("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:gr})).or(Fe.extend({type:Be("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:gr})).or(Fe.extend({type:Be("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:Tje})).or(Fe.extend({type:Be("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:gr})).or(Fe.extend({type:Be("FRAME_READY"),payload:Nje})).or(Fe.extend({type:Be("FRAME_RELOAD_ERROR"),payload:gr})).or(Fe.extend({type:Be("FRAME_RELOAD_SUCCESS")}))};function _O(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function C9e({projectId:t,chainId:e,version:n,enableLogger:r,rpcUrl:s=ge.BLOCKCHAIN_API_RPC_URL}){const i=new URL(xFe);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",n),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class A9e{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=ge.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,a,c)=>{function l({data:u}){if(!_O(Ze.FRAME_EVENT_KEY,u))return;const d=tv.frameEvent.parse(u);d.id===o&&(a(d),window.removeEventListener("message",l))}fl.isClient&&(window.addEventListener("message",l),c.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:o=>{fl.isClient&&window.addEventListener("message",({data:a})=>{if(!_O(Ze.FRAME_EVENT_KEY,a))return;const c=tv.frameEvent.parse(a);o(c)})},onAppEvent:o=>{fl.isClient&&window.addEventListener("message",({data:a})=>{if(!_O(Ze.APP_EVENT_KEY,a))return;const c=tv.appEvent.parse(a);o(c)})},postAppEvent:o=>{var a;if(fl.isClient){if(!((a=this.iframe)!=null&&a.contentWindow))throw new Error("W3mFrame: iframe is not set");tv.appEvent.parse(o),this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if(fl.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");tv.frameEvent.parse(o),parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),this.rpcUrl=i,n&&(this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),fl.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=C9e({projectId:e,chainId:r,version:TFe,enableLogger:s,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{var a;(a=this.frameLoadPromiseResolver)==null||a.reject("Unable to load email login dependency")},this.events.onFrameEvent(a=>{var c;a.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(c=this.frameLoadPromiseResolver)==null||c.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class S9e{constructor(e){var i;const n=sm({level:NFe}),{logger:r,chunkLoggerController:s}=FN({opts:n});this.logger=Ls(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class I9e{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new S9e(e)),this.abortController=i,this.getActiveCaipNetwork=o;const a=this.getRpcUrl(n);this.w3mFrame=new A9e({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:a}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ze.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Cs.get(Ze.EMAIL_LOGIN_USED_KEY)}getEmail(){return Cs.get(Ze.EMAIL)}getUsername(){return Cs.get(Ze.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ze.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{fl.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Ze.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Ze.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Ze.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Ze.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Ze.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Ze.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Ze.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Ze.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Ze.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Ze.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Ze.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Ze.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Ze.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:Ze.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ze.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:Ze.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ze.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Ze.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:Ze.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Ze.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(Os.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=l,n.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:Ze.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,u,n),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ze.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ze.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ze.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ze.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ze.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ze.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ze.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Os.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:n,method:r})=>{Os.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:Ze.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ze.APP_SYNC_DAPP_DATA,Ze.APP_SYNC_THEME,Ze.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ze.APP_CONNECT_EMAIL,Ze.APP_CONNECT_DEVICE,Ze.APP_CONNECT_OTP,Ze.APP_CONNECT_SOCIAL,Ze.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const y=e;this.openRpcRequests=[...this.openRpcRequests,{...y.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(y,m){var w,v,A;y.id===u&&((v=m==null?void 0:(w=m.logger).info)==null||v.call(w,{framEvent:y,id:u},"Received frame response"),y.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&c(y.payload),c(void 0)):y.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&l(new Error(((A=y.payload)==null?void 0:A.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,y=>h(y,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Cs.set(Ze.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Cs.set(Ze.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Cs.set(Ze.EMAIL,e),Cs.set(Ze.EMAIL_LOGIN_USED_KEY,"true"),Cs.delete(Ze.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Cs.delete(Ze.EMAIL_LOGIN_USED_KEY),Cs.delete(Ze.EMAIL),Cs.delete(Ze.LAST_USED_CHAIN_KEY),Cs.delete(Ze.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Cs.set(Ze.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Cs.get(Ze.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Cs.set(Ze.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var s,i;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(s=Sh.parseCaipNetworkId(e))==null?void 0:s.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getActiveCaipNetwork(n);return(i=r==null?void 0:r.rpcUrls.default.http)==null?void 0:i[0]}}class zy{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){return zy.instance||(zy.instance=new I9e({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o})),zy.instance}}const x9e={DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]},F9={filterOutDuplicatesByRDNS(t){const e=It.state.enableEIP6963?st.state.connectors:[],n=et.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&lt.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=st.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=et.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=st.state,{featuredWalletIds:n}=It.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=It.state.features)==null?void 0:c.connectMethodsOrder),r=e||st.state.connectors;if(n)return n;const{injected:s,announced:i}=wS.getConnectorsByType(r,yt.state.recommended,yt.state.featured),o=s.filter(wS.showConnector),a=i.filter(wS.showConnector);return o.length||a.length?["wallet","email","social"]:x9e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&yt.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&yt.state.excludedWallets.some(r=>Qi.isLowerCaseMatch(r.name,t.name));return e||n}},wS={getConnectorsByType(t,e,n){const{customWallets:r}=It.state,s=et.getRecentWallets(),i=F9.filterOutDuplicateWallets(e),o=F9.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&yt.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&yt.state.excludedWallets.some(i=>Qi.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!lt.isMobile()||lt.isMobile()&&!e&&!rt.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(Y.state.chains.values()).some(n=>st.getConnectorId(n.namespace)===ge.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=It.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const h=[{type:"walletConnect",isEnabled:It.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(y=>y.isEnabled),f=new Set(h.map(y=>y.type)),p=c.filter(y=>f.has(y)).map(y=>({type:y,isEnabled:!0})),g=h.filter(({type:y})=>!p.some(({type:w})=>w===y));return Array.from(new Set([...p,...g].map(({type:y})=>y)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!lt.isMobile())return{accounts:[],chainId:void 0};if(t.id===ge.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};ju`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`;ju`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`;ju`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;const bS={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([bS.getAddresses(t),bS.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:bS.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[Po.NetworkImageIds[e.id]]}]})}},Gm={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function s1(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const j9=s1({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),z9=s1({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});s1({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});s1({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});s1({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const N9e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},sg={getMethodsByChainNamespace(t){return N9e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case j9.caipNetworkId:u.chains.push(j9.deprecatedCaipNetworkId);break;case z9.caipNetworkId:u.chains.push(z9.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await yS.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=sg.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(sg.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(d=>lt.isCaipAddress(d)).map(d=>Sh.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(u)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>Sh.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};class T9e{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case ge.CHAIN.EVM:await this.syncEVMConnections(e);break;case ge.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case ge.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===ge.CONNECTOR_ID.WALLET_CONNECT){const c=sg.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>{var d,h;return u.chainNamespace===this.namespace&&u.id.toString()===((h=(d=c[0])==null?void 0:d.chainId)==null?void 0:h.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await wS.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==ge.CONNECTOR_ID.AUTH&&a.id!==ge.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===ge.CONNECTOR_ID.WALLET_CONNECT){const c=sg.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var h,f,p,g,y,m;if(a.id===ge.CONNECTOR_ID.WALLET_CONNECT){const w=sg.getWalletConnectAccounts(r,this.namespace);w.length>0&&i({connectorId:a.id,accounts:w.map(v=>({address:v.address})),caipNetwork:n});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(w=>lt.createAccount(ge.CHAIN.BITCOIN,w.address,w.purpose||"payment",w.publicKey,w.path));if(u&&u.length>1&&(u=[{namespace:ge.CHAIN.BITCOIN,publicKey:((h=u[Gm.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.publicKey)??"",path:((f=u[Gm.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.path)??"",address:((p=u[Gm.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:ge.CHAIN.BITCOIN,publicKey:((g=u[Gm.ACCOUNT_INDEXES.ORDINAL])==null?void 0:g.publicKey)??"",path:((y=u[Gm.ACCOUNT_INDEXES.ORDINAL])==null?void 0:y.path)??"",address:((m=u[Gm.ACCOUNT_INDEXES.ORDINAL])==null?void 0:m.address)??"",type:"ordinal"}]),!(a.chains.find(w=>w.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(w=>({address:w.address,type:w.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>Qi.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>Qi.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>Qi.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>Qi.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>Qi.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}class qX{constructor({provider:e,namespace:n}){this.id=ge.CONNECTOR_ID.WALLET_CONNECT,this.name=Po.ConnectorNamesMap[ge.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Po.ConnectorImageIds[ge.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=Y.getCaipNetworks.bind(Y),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=It.state.universalProviderConfigOverride,s=sg.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Bd.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:R9e})}}const R9e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],P9e=[ge.CONNECTOR_ID.AUTH,ge.CONNECTOR_ID.WALLET_CONNECT];class O9e{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>Y.getCaipNetworks(n),this.getConnectorId=n=>st.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new T9e({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:ge.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:ge.CONNECTOR_ID.AUTH,type:"AUTH",name:ge.CONNECTOR_NAMES.AUTH,provider:e,imageId:Po.ConnectorImageIds[ge.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!Qi.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){gn.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=$l(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof qX);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=lt.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=lt.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=lt.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&Qi.isLowerCaseMatch(this.getConnectorId(ge.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=lt.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),Qi.isLowerCaseMatch(this.getConnectorId(ge.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?bS.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),Qi.isLowerCaseMatch(this.getConnectorId(ge.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(P9e.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}function k9e(t){let e=[],n,r;function s(a){return ex.parseEvmChainId(a)||1}function i(){var a;return n||(n=zy.getInstance({projectId:t.options.projectId,chainId:(a=Y.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?Wf.open(Sd.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?Wf.open(Sd.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&Wf.open(Sd.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:Sd.EmbeddedWalletAbortController,getActiveCaipNetwork:c=>Y.getActiveCaipNetwork(c)})),n}async function o(a={}){var g;const c=i();let l=a.chainId;if(a.isReconnecting){const y=ex.parseEvmChainId(c.getLastUsedChainId()||""),m=(g=t.chains)==null?void 0:g[0].id;if(l=y||m,!l)throw new Error("ChainId not found in provider")}const u=$l("eip155"),{address:d,chainId:h,accounts:f}=await Bd.authConnectorAuthenticate({authConnector:c,chainId:l,preferredAccountType:u,socialUri:a.socialUri,chainNamespace:ge.CHAIN.EVM});e=(f==null?void 0:f.map(y=>y.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:ge.CONNECTOR_ID.AUTH,name:ge.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:ge.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=zy.getInstance({projectId:t.options.projectId,chainId:(c=Y.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:Sd.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?Wf.open(Sd.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?Wf.open(Sd.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&Wf.open(Sd.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:l=>Y.getActiveCaipNetwork(l)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=Y.state.activeChain===ge.CHAIN.EVM;if(ge.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>st.getConnectorId(h)===ge.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l;try{const u=a.chains.find(p=>p.id===c);if(!u)throw new Ol(new Error("chain not found on connector."));const d=await this.getProvider(),h=$l("eip155"),f=await d.connect({chainId:c,preferredAccountType:h});return e=((l=f==null?void 0:f.accounts)==null?void 0:l.map(p=>p.address))||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),u}catch(u){throw u instanceof Error?new Ol(u):u}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Ou)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}vU.type="walletConnect";function vU(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:vU.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=Y.getCaipNetworks(),y=await this.getProvider();if(!y)throw new Md;a||(a=this.onDisplayUri,y.on("display_uri",a));const m=await this.isChainsStale();y.session&&m&&await y.disconnect();const w=It.state.universalProviderConfigOverride;if(!y.session||m){const I=sg.createNamespaces(g,w);await y.connect({optionalNamespaces:I,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(k=>Number(k.id)))}const v=await this.getAccounts(),A=await this.getChainId(),C=(p=(f=(h=y.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,S=C==null?void 0:C.some(I=>Number(I.split(":")[1])===A);let x=1;S?x=A:C!=null&&C[0]&&(x=Number(C[0].split(":")[1])),a&&(y.removeListener("display_uri",a),a=void 0),o&&(y.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),y.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),y.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),y.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),y.on("session_delete",c));const T=w==null?void 0:w.defaultChain;return y.setDefaultChain(T??`eip155:${x}`),{accounts:v,chainId:x}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new $r(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var y,m,w;const d=await this.getProvider();if(!((y=d==null?void 0:d.session)!=null&&y.namespaces))return[];const h=(w=(m=d==null?void 0:d.session)==null?void 0:m.namespaces[ge.CHAIN.EVM])==null?void 0:w.accounts,f=(h==null?void 0:h.map(v=>v.split(":")[2]))??[],p=new Set;return f.filter(v=>{const A=v==null?void 0:v.toLowerCase();return p.has(A)?!1:(p.add(A),!0)})},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=et.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const y=et.getStoredActiveCaipNetworkId(),m=h?e.getCaipNetworks(h):[],w=m==null?void 0:m.find(v=>v.id===y);w&&w.chainNamespace===ge.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(w.id)}))}return r},async getChainId(){var g,y,m,w;const d=(g=e.getCaipNetwork(ge.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(w=(m=(y=(await this.getProvider()).session)==null?void 0:y.namespaces[ge.CHAIN.EVM])==null?void 0:m.chains)==null?void 0:w[0],p=Y.getCaipNetworks().find(v=>v.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,y,m,w;const f=await this.getProvider();if(!f)throw new Md;const p=Y.getCaipNetworks().find(v=>v.id===h);if(!p)throw new Ol(new n_);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:nt(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const v=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...v,h]),{...p,id:p.id}}catch(v){const A=v;if(/(?:user rejected)/iu.test(A.message))throw new $r(A);try{let C;d!=null&&d.blockExplorerUrls?C=d.blockExplorerUrls:C=(g=p.blockExplorers)!=null&&g.default.url?[(y=p.blockExplorers)==null?void 0:y.default.url]:[];const S=((w=(m=p.rpcUrls)==null?void 0:m.chainDefault)==null?void 0:w.http)||[],x={blockExplorerUrls:C,chainId:nt(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:S};await f.request({method:"wallet_addEthereumChain",params:[x]});const T=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...T,h]),{...p,id:p.id}}catch(C){throw new $r(C)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>Ou(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(Y.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[ge.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(y=>Number.parseInt(y.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const nv=tr({pendingTransactions:0}),W9={state:nv,subscribeKey(t,e){return Si(nv,t,e)},increase(t){nv[t]+=1},decrease(t){nv[t]-=1},reset(t){nv[t]=0}};function D9e(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function L9e(t){if(lt.isSafeApp()){const{safe:e}=await Ks(async()=>{const{safe:n}=await import("./index-6gbWzTnu.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function M9e(t){try{const{coinbaseWallet:e}=await Ks(async()=>{const{coinbaseWallet:n}=await import("./index-6gbWzTnu.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const U9e={enable:!1,pollingInterval:3e4};class $9e extends O9e{constructor(e){const n=Ev.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=ge.CHAIN.EVM,this.adapterType=ge.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...U9e,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===ge.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>lt.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=My(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>lt.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=My(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===ge.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=Ev.getCaipNetworkId(s);i?n[s.id]=Ev.extendWagmiTransports(s,e.projectId,i):n[s.id]=Ev.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=oye({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=Fme(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),W9.increase("pendingTransactions")}});const e=W9.subscribeKey("pendingTransactions",n=>{var r;n>=ge.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){WK(this.wagmiConfig,{onChange:(e,n)=>{var r;if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const s=e.address!==(n==null?void 0:n.address),i=e.connector.id!==((r=n.connector)==null?void 0:r.id),o=n.status!=="connected";(s||i||o)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}}),HK(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===ge.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:i})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:et.getConnectedSocialProvider(),username:et.getConnectedSocialUsername()}:void 0}}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await M9e(this.wagmiConfig.connectors);s&&n.push(s)}const r=await L9e(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(vU(e,n)),e.enableEIP6963!==!1&&r.push(gN({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(k9e({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:e,chainId:n,connector:{id:r.id,name:Po.ConnectorNamesMap[r.id]??r.name,imageId:Po.ConnectorImageIds[r.id],type:Po.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===ge.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await Ume(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=My(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await Lme(this.wagmiConfig,s);const i=await Mme(this.wagmiConfig,s);return await qK(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(ex.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await VK(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await Nme(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return age(e.value,e.decimals)}formatUnits(e){return Vg(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(e.type===ge.CONNECTOR_ID.INJECTED&&n.enableEIP6963===!1||e.id===ge.CONNECTOR_ID.AUTH||e.id===ge.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:Po.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:Po.ConnectorNamesMap[e.id]??e.name,imageId:Po.ConnectorImageIds[e.id],type:Po.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===ge.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){GK(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=Ja(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(lt.isSafeApp()&&n===ge.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await ZA(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await ZA(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await J6(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var h,f,p,g,y;const{id:n,address:r,provider:s,type:i,info:o,chainId:a,socialUri:c}=e,l=this.getWagmiConnector(n);if(!l)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&o&&l.id===ge.CONNECTOR_ID.EIP6963&&((h=l.setEip6963Wallet)==null||h.call(l,{provider:s,info:o}));const u=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(l.uid);if(u){await((g=this.wagmiConfig.storage)==null?void 0:g.setItem("recentConnectorId",l.id));const m=[...u.accounts].sort((w,v)=>Qi.isLowerCaseMatch(w,r)?-1:Qi.isLowerCaseMatch(v,r)?1:0);return(y=this.wagmiConfig)==null||y.setState(w=>({...w,connections:new Map(w.connections).set(l.uid,{accounts:m,chainId:u.chainId,connector:u.connector}),current:l.uid,status:"connected"})),{address:m[0],chainId:u.chainId,provider:s,type:i,id:n}}const d=await ZA(this.wagmiConfig,{connector:l,chainId:a?Number(a):void 0,socialUri:c});return{address:d.accounts[0],chainId:d.chainId,provider:s,type:i,id:n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:n})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await Lk(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=et.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await Pme(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});et.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=Ja(this.wagmiConfig).find(i=>Qi.isLowerCaseMatch(i.connector.id,e.id));return await kk(this.wagmiConfig,{connector:n}),It.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:i})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=Ja(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await kk(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:s})),connectorId:r.connector.id}))}}async switchNetwork(e){var s,i,o,a,c,l,u,d,h,f;const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(p=>p.id.toString()===n.id.toString());await J6(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:(r==null?void 0:r.name)??n.name,nativeCurrency:(r==null?void 0:r.nativeCurrency)??n.nativeCurrency,rpcUrls:[((o=(i=(s=n.rpcUrls)==null?void 0:s.chainDefault)==null?void 0:i.http)==null?void 0:o[0])??((l=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0])??""],blockExplorerUrls:[((d=(u=r==null?void 0:r.blockExplorers)==null?void 0:u.default)==null?void 0:d.url)??((f=(h=n.blockExplorers)==null?void 0:h.default)==null?void 0:f.url)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=Ja(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=D9e(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=Ja(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=Ja(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=Ja(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:ge.CONNECTOR_ID.AUTH,type:"AUTH",name:ge.CONNECTOR_NAMES.AUTH,provider:e,imageId:Po.ConnectorImageIds[ge.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const n=Ja(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(Y.state.activeChain==="eip155")return;Lk(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new qX({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}}const VX={id:1992,name:"Sanko Testnet",network:"sanko",nativeCurrency:{decimals:18,name:"tDMT",symbol:"tDMT"},rpcUrls:{public:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]},default:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}},blockExplorers:{default:{name:"SankoScan",url:"https://sanko-scan.caldera.xyz"}}},KX="7c65f27254d6ddd24cf7eedf2685c4fb",B9e={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},YX=new $9e({networks:[IX,VX],projectId:KX,ssr:!1});U8e({adapters:[YX],networks:[IX,VX],projectId:KX,metadata:B9e,features:{analytics:!1}});const QX=()=>{if(!qS)throw new Error("[FIREBASE] Database not initialized");return qS},Mg=t=>!t||t.length<10?t:`${t.slice(0,6)}...${t.slice(-4)}`,nx=async(t,e)=>{try{if(!t)return console.error("[LEADERBOARD] No wallet address provided"),!1;const n=new Date().toISOString(),r=QX(),s=ia(r,`leaderboard/${t}`),i=await Vf(s),o=i.exists()?i.val():null,a=e==="win"?3:e==="draw"?1:0,c={username:t,chain_type:"sanko",wins:((o==null?void 0:o.wins)||0)+(e==="win"?1:0),losses:((o==null?void 0:o.losses)||0)+(e==="loss"?1:0),draws:((o==null?void 0:o.draws)||0)+(e==="draw"?1:0),total_games:((o==null?void 0:o.total_games)||0)+1,points:((o==null?void 0:o.points)||0)+a,created_at:(o==null?void 0:o.created_at)||n,updated_at:n};return await kv(s,c),console.log("[LEADERBOARD] Successfully updated entry for:",Mg(t),"Result:",e),!0}catch(n){return console.error("[LEADERBOARD] Error updating leaderboard entry:",n),!1}},F9e=async(t,e,n)=>{try{return!e||!n?(console.error("[LEADERBOARD] Missing player addresses"),!1):(console.log("[LEADERBOARD] Updating both players scores:",{winner:t,bluePlayer:Mg(e),redPlayer:Mg(n)}),await nx(e,t==="blue"?"win":t==="red"?"loss":"draw"),await nx(n,t==="red"?"win":t==="blue"?"loss":"draw"),console.log("[LEADERBOARD] Successfully updated both players scores"),!0)}catch(r){return console.error("[LEADERBOARD] Error updating both players scores:",r),!1}},JX=async(t=20)=>{try{const e=QX(),n=ia(e,"leaderboard"),r=await Vf(n);if(!r.exists())return[];const s=[];return r.forEach(i=>{const o=i.val();o&&s.push(o)}),s.sort((i,o)=>o.points!==i.points?o.points-i.points:o.wins!==i.wins?o.wins-i.wins:i.total_games-o.total_games),s.slice(0,t)}catch(e){return console.error("[LEADERBOARD] Error getting top entries:",e),[]}},Wc=()=>{if(!qS)throw new Error("[FIREBASE] Database not initialized");return qS},vs={async getGame(t){try{const e=Wc(),n=ia(e,`chess_games/${t}`),r=await Vf(n);return r.exists()?r.val():null}catch(e){return console.error("[FIREBASE] Error getting game:",e),null}},async updateGame(t,e){if(!t)throw console.error("[FIREBASE] Tried to update game with undefined inviteCode!",e),new Error("inviteCode is required for updateGame");try{const n=Wc(),r=ia(n,`chess_games/${t}`);await kv(r,{...e,updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game updated successfully")}catch(n){console.error("[FIREBASE] Error updating game:",n)}},subscribeToGame(t,e){try{const n=Wc(),r=ia(n,`chess_games/${t}`);console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",t);const s=K$(r,i=>{if(i.exists()){const o=i.val();console.log("[FIREBASE] Game update received:",o),e(o)}});return console.log("[FIREBASE] Firebase subscription setup complete for game:",t),s}catch(n){return console.error("[FIREBASE] Error subscribing to game:",n),()=>{}}},async createGame(t){const e=t.invite_code;if(!e)throw console.error("[FIREBASE] Tried to create game with undefined inviteCode!",t),new Error("inviteCode is required for createGame");try{const n=Wc(),r=ia(n,`chess_games/${e}`);console.log("[FIREBASE] Creating game with data:",t),await kv(r,{...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game created successfully:",e);const s=await Vf(r);s.exists()?console.log("[FIREBASE] Game verification successful:",s.val()):console.error("[FIREBASE] Game creation verification failed - game not found after creation")}catch(n){throw console.error("[FIREBASE] Error creating game:",n),n}},async getActiveGames(){try{const t=Wc(),e=ia(t,"chess_games"),n=await Vf(e);if(!n.exists())return[];const r=n.val();return Object.values(r).filter(s=>s.game_state==="waiting"||s.game_state==="active")}catch(t){return console.error("[FIREBASE] Error getting active games:",t),[]}},async getOpenGames(){try{const t=Wc(),e=ia(t,"chess_games"),n=await Vf(e);if(!n.exists())return console.log("[FIREBASE] No games found in database"),[];const r=n.val();console.log("[FIREBASE] All games in database:",r);const s=Object.values(r).filter(i=>{const o=i.game_state==="waiting",a=i.is_public,c=!i.red_player||i.red_player==="0x0000000000000000000000000000000000000000";return console.log("[FIREBASE] Game filter check:",{inviteCode:i.invite_code,gameState:i.game_state,isPublic:i.is_public,redPlayer:i.red_player,isWaiting:o,noRedPlayer:c,passes:o&&a&&c}),o&&a&&c});return s.sort((i,o)=>new Date(o.created_at).getTime()-new Date(i.created_at).getTime()),console.log("[FIREBASE] Open games found:",s.length,s),s}catch(t){return console.error("[FIREBASE] Error getting open games:",t),[]}},async deleteGame(t){try{const e=Wc(),n=ia(e,`chess_games/${t}`);await lae(n),console.log("[FIREBASE] Game deleted:",t)}catch(e){console.error("[FIREBASE] Error deleting game:",e)}},async updateLeaderboard(t){try{const e=Wc(),n=ia(e,`leaderboard/${t.username}`);await kv(n,{...t,updated_at:new Date().toISOString()})}catch(e){console.error("[FIREBASE] Error updating leaderboard:",e)}},async getLeaderboard(){try{const t=Wc(),e=ia(t,"leaderboard"),n=await Vf(e);if(!n.exists())return[];const r=n.val();return Object.values(r).sort((s,i)=>i.points-s.points)}catch(t){return console.error("[FIREBASE] Error getting leaderboard:",t),[]}},subscribeToLeaderboard(t){try{const e=Wc(),n=ia(e,"leaderboard");return K$(n,s=>{if(s.exists()){const i=s.val(),o=Object.values(i).sort((a,c)=>c.points-a.points);console.log("[FIREBASE] Leaderboard update received:",o),t(o)}})}catch(e){return console.error("[FIREBASE] Error subscribing to leaderboard:",e),()=>{}}}},j9e="6.15.0";function z9e(t,e,n){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=t,s}async function li(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function gt(t,e,n){for(let r in e){let s=e[r];const i=n?n[r]:null;i&&z9e(s,i,r),Object.defineProperty(t,r,{enumerable:!0,value:s,writable:!1})}}function Ey(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>Ey(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let s=0;s<t.length;s++)r+=n[t[s]>>4],r+=n[t[s]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return Ey(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${Ey(r,e)}: ${Ey(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Ns(t,e){return t&&t.code===e}function EU(t){return Ns(t,"CALL_EXCEPTION")}function rr(t,e,n){let r=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${Ey(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+Ey(a))}}i.push(`code=${e}`),i.push(`version=${j9e}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return gt(s,{code:e}),n&&Object.assign(s,n),s.shortMessage==null&&gt(s,{shortMessage:r}),s}function ye(t,e,n,r){if(!t)throw rr(e,n,r)}function Q(t,e,n,r){ye(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function ZX(t,e,n){n==null&&(n=""),n&&(n=": "+n),ye(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),ye(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");t.push(e)}catch{}return t},[]);function dT(t,e,n){if(n==null&&(n=""),t!==e){let r=n,s="new";n&&(r+=".",s+=" "+n),ye(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function XX(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(t.substring(s,s+2),16),s+=2;return r}Q(!1,"invalid BytesLike value",e||"value",t)}function zt(t,e){return XX(t,e,!1)}function fi(t,e){return XX(t,e,!0)}function Yn(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function _U(t){return Yn(t,!0)||t instanceof Uint8Array}const H9="0123456789abcdef";function Me(t){const e=zt(t);let n="0x";for(let r=0;r<e.length;r++){const s=e[r];n+=H9[(s&240)>>4]+H9[s&15]}return n}function Er(t){return"0x"+t.map(e=>Me(e).substring(2)).join("")}function Wy(t){return Yn(t,!0)?(t.length-2)/2:zt(t).length}function yr(t,e,n){const r=zt(t);return n!=null&&n>r.length&&ye(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),Me(r.slice(e??0,n??r.length))}function eee(t,e,n){const r=zt(t);ye(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),n?s.set(r,e-r.length):s.set(r,0),Me(s)}function td(t,e){return eee(t,e,!0)}function W9e(t,e){return eee(t,e,!1)}const hT=BigInt(0),pc=BigInt(1),_y=9007199254740991;function H9e(t,e){const n=fT(t,"value"),r=BigInt(Wt(e,"width"));if(ye(n>>r===hT,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-pc){const s=(pc<<r)-pc;return-((~n&s)+pc)}return n}function tee(t,e){let n=Xe(t,"value");const r=BigInt(Wt(e,"width")),s=pc<<r-pc;if(n<hT){n=-n,ye(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(pc<<r)-pc;return(~n&i)+pc}else ye(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function _v(t,e){const n=fT(t,"value"),r=BigInt(Wt(e,"bits"));return n&(pc<<r)-pc}function Xe(t,e){switch(typeof t){case"bigint":return t;case"number":return Q(Number.isInteger(t),"underflow",e||"value",t),Q(t>=-_y&&t<=_y,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){Q(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}Q(!1,"invalid BigNumberish value",e||"value",t)}function fT(t,e){const n=Xe(t,e);return ye(n>=hT,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const G9="0123456789abcdef";function CU(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=G9[n>>4],e+=G9[n&15];return BigInt(e)}return Xe(t)}function Wt(t,e){switch(typeof t){case"bigint":return Q(t>=-_y&&t<=_y,"overflow",e||"value",t),Number(t);case"number":return Q(Number.isInteger(t),"underflow",e||"value",t),Q(t>=-_y&&t<=_y,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Wt(BigInt(t),e)}catch(n){Q(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}Q(!1,"invalid numeric value",e||"value",t)}function G9e(t){return Wt(CU(t))}function uf(t,e){let r=fT(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=Wt(e,"width");for(ye(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<s*2;)r="0"+r}return"0x"+r}function Gr(t){const e=fT(t,"value");if(e===hT)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(n.substring(i,i+2),16)}return r}function uc(t){let e=Me(_U(t)?t:Gr(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const q9="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const V9=BigInt(58);function q9e(t){const e=zt(t);let n=CU(e),r="";for(;n;)r=q9[Number(n%V9)]+r,n/=V9;for(let s=0;s<e.length&&!e[s];s++)r=q9[0]+r;return r}function V9e(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return zt(e)}function K9e(t){const e=zt(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var iw;class nee{constructor(e,n,r){ne(this,"filter");ne(this,"emitter");K(this,iw);U(this,iw,n),gt(this,{emitter:e,filter:r})}async removeListener(){_(this,iw)!=null&&await this.emitter.off(this.filter,_(this,iw))}}iw=new WeakMap;function Y9e(t,e,n,r,s){Q(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function ree(t,e,n,r,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)i++;return i}return t==="OVERRUN"?n.length-e-1:0}function Q9e(t,e,n,r,s){return t==="OVERLONG"?(Q(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),ree(t,e,n))}const J9e=Object.freeze({error:Y9e,ignore:ree,replace:Q9e});function Z9e(t,e){e==null&&(e=J9e.error);const n=zt(t,"bytes"),r=[];let s=0;for(;s<n.length;){const i=n[s++];if(!(i>>7)){r.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,n,r):s+=e("BAD_PREFIX",s-1,n,r);continue}if(s-1+o>=n.length){s+=e("OVERRUN",s-1,n,r);continue}let c=i&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=n[s];if((u&192)!=128){s+=e("MISSING_CONTINUE",s,n,r),c=null;break}c=c<<6|u&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,n,r,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,n,r,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,n,r,c);continue}r.push(c)}}return r}function zu(t,e){Q(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(s&63|128);else if((s&64512)==55296){r++;const i=t.charCodeAt(r);Q(r<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((s&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128)}return new Uint8Array(n)}function X9e(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function rx(t,e){return X9e(Z9e(t,e))}function see(t){async function e(n,r){ye(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=n.url.split(":")[0].toLowerCase();ye(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),ye(s==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=rr("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{i=rr("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let l;try{l=await fetch(n.url,c)}catch(f){throw clearTimeout(a),i||f}clearTimeout(a);const u={};l.headers.forEach((f,p)=>{u[p.toLowerCase()]=f});const d=await l.arrayBuffer(),h=d==null?null:new Uint8Array(d);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:h}}return e}const e7e=12,t7e=250;let K9=see();const n7e=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),r7e=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let CO=!1;async function iee(t,e){try{const n=t.match(n7e);if(!n)throw new Error("invalid data");return new Qh(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?V9e(n[3]):i7e(n[3]))}catch{return new Qh(599,"BAD REQUEST (invalid data: URI)",{},null,new df(t))}}function oee(t){async function e(n,r){try{const s=n.match(r7e);if(!s)throw new Error("invalid link");return new df(`${t}${s[2]}`)}catch{return new Qh(599,"BAD REQUEST (invalid IPFS URI)",{},null,new df(n))}}return e}const IA={data:iee,ipfs:oee("https://gateway.ipfs.io/ipfs/")},aee=new WeakMap;var Rp,th;class s7e{constructor(e){K(this,Rp);K(this,th);U(this,Rp,[]),U(this,th,!1),aee.set(e,()=>{if(!_(this,th)){U(this,th,!0);for(const n of _(this,Rp))setTimeout(()=>{n()},0);U(this,Rp,[])}})}addListener(e){ye(!_(this,th),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),_(this,Rp).push(e)}get cancelled(){return _(this,th)}checkSignal(){ye(!this.cancelled,"cancelled","CANCELLED",{})}}Rp=new WeakMap,th=new WeakMap;function xA(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var ow,aw,tc,gu,cw,lw,es,So,mu,Pp,Op,kp,Xc,nc,nh,Dp,Cv;const gx=class gx{constructor(e){K(this,Dp);K(this,ow);K(this,aw);K(this,tc);K(this,gu);K(this,cw);K(this,lw);K(this,es);K(this,So);K(this,mu);K(this,Pp);K(this,Op);K(this,kp);K(this,Xc);K(this,nc);K(this,nh);U(this,lw,String(e)),U(this,ow,!1),U(this,aw,!0),U(this,tc,{}),U(this,gu,""),U(this,cw,3e5),U(this,nc,{slotInterval:t7e,maxAttempts:e7e}),U(this,nh,null)}get url(){return _(this,lw)}set url(e){U(this,lw,String(e))}get body(){return _(this,es)==null?null:new Uint8Array(_(this,es))}set body(e){if(e==null)U(this,es,void 0),U(this,So,void 0);else if(typeof e=="string")U(this,es,zu(e)),U(this,So,"text/plain");else if(e instanceof Uint8Array)U(this,es,e),U(this,So,"application/octet-stream");else if(typeof e=="object")U(this,es,zu(JSON.stringify(e))),U(this,So,"application/json");else throw new Error("invalid body")}hasBody(){return _(this,es)!=null}get method(){return _(this,gu)?_(this,gu):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),U(this,gu,String(e).toUpperCase())}get headers(){const e=Object.assign({},_(this,tc));return _(this,mu)&&(e.authorization=`Basic ${K9e(zu(_(this,mu)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&_(this,So)&&(e["content-type"]=_(this,So)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){_(this,tc)[String(e).toLowerCase()]=String(n)}clearHeaders(){U(this,tc,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return _(this,mu)||null}setCredentials(e,n){Q(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),U(this,mu,`${e}:${n}`)}get allowGzip(){return _(this,aw)}set allowGzip(e){U(this,aw,!!e)}get allowInsecureAuthentication(){return!!_(this,ow)}set allowInsecureAuthentication(e){U(this,ow,!!e)}get timeout(){return _(this,cw)}set timeout(e){Q(e>=0,"timeout must be non-zero","timeout",e),U(this,cw,e)}get preflightFunc(){return _(this,Pp)||null}set preflightFunc(e){U(this,Pp,e)}get processFunc(){return _(this,Op)||null}set processFunc(e){U(this,Op,e)}get retryFunc(){return _(this,kp)||null}set retryFunc(e){U(this,kp,e)}get getUrlFunc(){return _(this,nh)||K9}set getUrlFunc(e){U(this,nh,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${_(this,es)?Me(_(this,es)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(_(this,nc).slotInterval=e.slotInterval),e.maxAttempts!=null&&(_(this,nc).maxAttempts=e.maxAttempts)}send(){return ye(_(this,Xc)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),U(this,Xc,new s7e(this)),fe(this,Dp,Cv).call(this,0,Y9()+this.timeout,0,this,new Qh(0,"",{},null,this))}cancel(){ye(_(this,Xc)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=aee.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();ye(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new gx(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,U(s,tc,Object.assign({},_(this,tc))),_(this,es)&&U(s,es,new Uint8Array(_(this,es))),U(s,So,_(this,So)),s}clone(){const e=new gx(this.url);return U(e,gu,_(this,gu)),_(this,es)&&U(e,es,_(this,es)),U(e,So,_(this,So)),U(e,tc,Object.assign({},_(this,tc))),U(e,mu,_(this,mu)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),U(e,Pp,_(this,Pp)),U(e,Op,_(this,Op)),U(e,kp,_(this,kp)),U(e,nc,Object.assign({},_(this,nc))),U(e,nh,_(this,nh)),e}static lockConfig(){CO=!0}static getGateway(e){return IA[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(CO)throw new Error("gateways locked");IA[e]=n}static registerGetUrl(e){if(CO)throw new Error("gateways locked");K9=e}static createGetUrlFunc(e){return see(e)}static createDataGateway(){return iee}static createIpfsGatewayFunc(e){return oee(e)}};ow=new WeakMap,aw=new WeakMap,tc=new WeakMap,gu=new WeakMap,cw=new WeakMap,lw=new WeakMap,es=new WeakMap,So=new WeakMap,mu=new WeakMap,Pp=new WeakMap,Op=new WeakMap,kp=new WeakMap,Xc=new WeakMap,nc=new WeakMap,nh=new WeakMap,Dp=new WeakSet,Cv=async function(e,n,r,s,i){var u,d,h;if(e>=_(this,nc).maxAttempts)return i.makeServerError("exceeded maximum retry limit");ye(Y9()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await o7e(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in IA){const f=await IA[a](o.url,xA(_(s,Xc)));if(f instanceof Qh){let p=f;if(this.processFunc){xA(_(s,Xc));try{p=await this.processFunc(o,p)}catch(g){(g.throttle==null||typeof g.stall!="number")&&p.makeServerError("error in post-processing function",g).assertOk()}}return p}o=f}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,xA(_(s,Xc)));let l=new Qh(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{const f=l.headers.location||"";return fe(u=o.redirect(f),Dp,Cv).call(u,e+1,n,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,e))){const f=l.headers["retry-after"];let p=_(this,nc).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof f=="string"&&f.match(/^[1-9][0-9]*$/)&&(p=parseInt(f)),fe(d=o.clone(),Dp,Cv).call(d,e+1,n,p,s,l)}if(this.processFunc){xA(_(s,Xc));try{l=await this.processFunc(o,l)}catch(f){(f.throttle==null||typeof f.stall!="number")&&l.makeServerError("error in post-processing function",f).assertOk();let p=_(this,nc).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return f.stall>=0&&(p=f.stall),fe(h=o.clone(),Dp,Cv).call(h,e+1,n,p,s,l)}}return l};let df=gx;var X_,eC,tC,Io,uw,Lp;const jU=class jU{constructor(e,n,r,s,i){K(this,X_);K(this,eC);K(this,tC);K(this,Io);K(this,uw);K(this,Lp);U(this,X_,e),U(this,eC,n),U(this,tC,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),U(this,Io,s==null?null:new Uint8Array(s)),U(this,uw,i||null),U(this,Lp,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${_(this,Io)?Me(_(this,Io)):"null"}>`}get statusCode(){return _(this,X_)}get statusMessage(){return _(this,eC)}get headers(){return Object.assign({},_(this,tC))}get body(){return _(this,Io)==null?null:new Uint8Array(_(this,Io))}get bodyText(){try{return _(this,Io)==null?"":rx(_(this,Io))}catch{ye(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{ye(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new jU(599,r,this.headers,this.body,_(this,uw)||void 0);return U(s,Lp,{message:e,error:n}),s}throwThrottleError(e,n){n==null?n=-1:Q(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw gt(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return _(this,Io)!=null}get request(){return _(this,uw)}ok(){return _(this,Lp).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=_(this,Lp);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{_(this,Io)&&(s=rx(_(this,Io)))}catch{}ye(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};X_=new WeakMap,eC=new WeakMap,tC=new WeakMap,Io=new WeakMap,uw=new WeakMap,Lp=new WeakMap;let Qh=jU;function Y9(){return new Date().getTime()}function i7e(t){return zu(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function o7e(t){return new Promise(e=>setTimeout(e,t))}function a7e(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function Q9(t,e,n){let r=0;for(let s=0;s<n;s++)r=r*256+t[e+s];return r}function J9(t,e,n,r){const s=[];for(;n<e+1+r;){const i=cee(t,n);s.push(i.result),n+=i.consumed,ye(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:s}}function cee(t,e){ye(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{ye(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const s=Q9(t,e+1,r);return n(e+1+r+s),J9(t,e,e+1+r,r+s)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),J9(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const s=Q9(t,e+1,r);n(e+1+r+s);const i=Me(t.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:i}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const s=Me(t.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:a7e(t[e])}}function i1(t){const e=zt(t,"data"),n=cee(e,0);return Q(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function Z9(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function lee(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(i){r=r.concat(lee(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=Z9(r.length);return s.unshift(247+s.length),s.concat(r)}const e=Array.prototype.slice.call(zt(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=Z9(e.length);return n.unshift(183+n.length),n.concat(e)}const X9="0123456789abcdef";function hf(t){let e="0x";for(const n of lee(t))e+=X9[n>>4],e+=X9[n&15];return e}const mi=32,I3=new Uint8Array(mi),c7e=["then"],NA={},uee=new WeakMap;function Xf(t){return uee.get(t)}function e7(t,e){uee.set(t,e)}function rv(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function x3(t,e,n){return t.indexOf(null)>=0?e.map((r,s)=>r instanceof N0?x3(Xf(r),r,n):r):t.reduce((r,s,i)=>{let o=e.getValue(s);return s in r||(n&&o instanceof N0&&(o=x3(Xf(o),o,n)),r[s]=o),r},{})}var dw;const Cy=class Cy extends Array{constructor(...n){const r=n[0];let s=n[1],i=(n[2]||[]).slice(),o=!0;r!==NA&&(s=n,i=[],o=!1);super(s.length);K(this,dw);s.forEach((l,u)=>{this[u]=l});const a=i.reduce((l,u)=>(typeof u=="string"&&l.set(u,(l.get(u)||0)+1),l),new Map);if(e7(this,Object.freeze(s.map((l,u)=>{const d=i[u];return d!=null&&a.get(d)===1?d:null}))),U(this,dw,[]),_(this,dw)==null&&_(this,dw),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(l,u,d)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const f=Wt(u,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const p=l[f];return p instanceof Error&&rv(`index ${f}`,p),p}if(c7e.indexOf(u)>=0)return Reflect.get(l,u,d);const h=l[u];if(h instanceof Function)return function(...f){return h.apply(this===d?l:this,f)};if(!(u in l))return l.getValue.apply(this===d?l:this,[u])}return Reflect.get(l,u,d)}});return e7(c,Xf(this)),c}toArray(n){const r=[];return this.forEach((s,i)=>{s instanceof Error&&rv(`index ${i}`,s),n&&s instanceof Cy&&(s=s.toArray(n)),r.push(s)}),r}toObject(n){const r=Xf(this);return r.reduce((s,i,o)=>(ye(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),x3(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=Xf(this),i=[],o=[];for(let a=n;a<r;a++)i.push(this[a]),o.push(s[a]);return new Cy(NA,i,o)}filter(n,r){const s=Xf(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&rv(`index ${a}`,c),n.call(r,c,a,this)&&(i.push(c),o.push(s[a]))}return new Cy(NA,i,o)}map(n,r){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&rv(`index ${i}`,o),s.push(n.call(r,o,i,this))}return s}getValue(n){const r=Xf(this).indexOf(n);if(r===-1)return;const s=this[r];return s instanceof Error&&rv(`property ${JSON.stringify(n)}`,s.error),s}static fromItems(n,r){return new Cy(NA,n,r)}};dw=new WeakMap;let N0=Cy;function t7(t){let e=Gr(t);return ye(e.length<=mi,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:mi,offset:e.length}),e.length!==mi&&(e=fi(Er([I3.slice(e.length%mi),e]))),e}class cd{constructor(e,n,r,s){ne(this,"name");ne(this,"type");ne(this,"localName");ne(this,"dynamic");gt(this,{name:e,type:n,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){Q(!1,e,this.localName,n)}}var yu,Mp,hw,vS;class N3{constructor(){K(this,hw);K(this,yu);K(this,Mp);U(this,yu,[]),U(this,Mp,0)}get data(){return Er(_(this,yu))}get length(){return _(this,Mp)}appendWriter(e){return fe(this,hw,vS).call(this,fi(e.data))}writeBytes(e){let n=fi(e);const r=n.length%mi;return r&&(n=fi(Er([n,I3.slice(r)]))),fe(this,hw,vS).call(this,n)}writeValue(e){return fe(this,hw,vS).call(this,t7(e))}writeUpdatableValue(){const e=_(this,yu).length;return _(this,yu).push(I3),U(this,Mp,_(this,Mp)+mi),n=>{_(this,yu)[e]=t7(n)}}}yu=new WeakMap,Mp=new WeakMap,hw=new WeakSet,vS=function(e){return _(this,yu).push(e),U(this,Mp,_(this,Mp)+e.length),e.length};var ji,xo,Up,$p,rh,jg,R3,dee;const zU=class zU{constructor(e,n,r){K(this,jg);ne(this,"allowLoose");K(this,ji);K(this,xo);K(this,Up);K(this,$p);K(this,rh);gt(this,{allowLoose:!!n}),U(this,ji,fi(e)),U(this,Up,0),U(this,$p,null),U(this,rh,r??1024),U(this,xo,0)}get data(){return Me(_(this,ji))}get dataLength(){return _(this,ji).length}get consumed(){return _(this,xo)}get bytes(){return new Uint8Array(_(this,ji))}subReader(e){const n=new zU(_(this,ji).slice(_(this,xo)+e),this.allowLoose,_(this,rh));return U(n,$p,this),n}readBytes(e,n){let r=fe(this,jg,dee).call(this,0,e,!!n);return fe(this,jg,R3).call(this,e),U(this,xo,_(this,xo)+r.length),r.slice(0,e)}readValue(){return CU(this.readBytes(mi))}readIndex(){return G9e(this.readBytes(mi))}};ji=new WeakMap,xo=new WeakMap,Up=new WeakMap,$p=new WeakMap,rh=new WeakMap,jg=new WeakSet,R3=function(e){var n;if(_(this,$p))return fe(n=_(this,$p),jg,R3).call(n,e);U(this,Up,_(this,Up)+e),ye(_(this,rh)<1||_(this,Up)<=_(this,rh)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${_(this,rh)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:fi(_(this,ji)),offset:_(this,xo),length:e,info:{bytesRead:_(this,Up),dataLength:this.dataLength}})},dee=function(e,n,r){let s=Math.ceil(n/mi)*mi;return _(this,xo)+s>_(this,ji).length&&(this.allowLoose&&r&&_(this,xo)+n<=_(this,ji).length?s=n:ye(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:fi(_(this,ji)),length:_(this,ji).length,offset:_(this,xo)+s})),_(this,ji).slice(_(this,xo),_(this,xo)+s)};let T3=zU;function sx(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function AU(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function l7e(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");sx(t.outputLen),sx(t.blockLen)}function T0(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function hee(t,e){AU(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const AO=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fee=t=>t instanceof Uint8Array,u7e=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),SO=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Hc=(t,e)=>t<<32-e|t>>>e,d7e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!d7e)throw new Error("Non little-endian hardware is not supported");function h7e(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function pT(t){if(typeof t=="string"&&(t=h7e(t)),!fee(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function f7e(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!fee(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class SU{clone(){return this._cloneInto()}}function IU(t){const e=r=>t().update(pT(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function p7e(t=32){if(AO&&typeof AO.getRandomValues=="function")return AO.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class pee extends SU{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,l7e(e);const r=pT(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return T0(this),this.iHash.update(e),this}digestInto(e){T0(this),AU(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const gee=(t,e,n)=>new pee(t,e).update(n).digest();gee.create=(t,e)=>new pee(t,e);function g7e(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}class mee extends SU{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=SO(this.buffer)}update(e){T0(this);const{view:n,buffer:r,blockLen:s}=this;e=pT(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=SO(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){T0(this),hee(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;g7e(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=SO(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const m7e=(t,e,n)=>t&e^~t&n,y7e=(t,e,n)=>t&e^t&n^e&n,w7e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Id=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),xd=new Uint32Array(64);class b7e extends mee{constructor(){super(64,32,8,!1),this.A=Id[0]|0,this.B=Id[1]|0,this.C=Id[2]|0,this.D=Id[3]|0,this.E=Id[4]|0,this.F=Id[5]|0,this.G=Id[6]|0,this.H=Id[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)xd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=xd[d-15],f=xd[d-2],p=Hc(h,7)^Hc(h,18)^h>>>3,g=Hc(f,17)^Hc(f,19)^f>>>10;xd[d]=g+xd[d-7]+p+xd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Hc(a,6)^Hc(a,11)^Hc(a,25),f=u+h+m7e(a,c,l)+w7e[d]+xd[d]|0,g=(Hc(r,2)^Hc(r,13)^Hc(r,22))+y7e(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){xd.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const yee=IU(()=>new b7e),TA=BigInt(2**32-1),P3=BigInt(32);function wee(t,e=!1){return e?{h:Number(t&TA),l:Number(t>>P3&TA)}:{h:Number(t>>P3&TA)|0,l:Number(t&TA)|0}}function bee(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=wee(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const v7e=(t,e)=>BigInt(t>>>0)<<P3|BigInt(e>>>0),E7e=(t,e,n)=>t>>>n,_7e=(t,e,n)=>t<<32-n|e>>>n,C7e=(t,e,n)=>t>>>n|e<<32-n,A7e=(t,e,n)=>t<<32-n|e>>>n,S7e=(t,e,n)=>t<<64-n|e>>>n-32,I7e=(t,e,n)=>t>>>n-32|e<<64-n,x7e=(t,e)=>e,N7e=(t,e)=>t,vee=(t,e,n)=>t<<n|e>>>32-n,Eee=(t,e,n)=>e<<n|t>>>32-n,_ee=(t,e,n)=>e<<n-32|t>>>64-n,Cee=(t,e,n)=>t<<n-32|e>>>64-n;function T7e(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const R7e=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),P7e=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,O7e=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),k7e=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,D7e=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),L7e=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Lt={fromBig:wee,split:bee,toBig:v7e,shrSH:E7e,shrSL:_7e,rotrSH:C7e,rotrSL:A7e,rotrBH:S7e,rotrBL:I7e,rotr32H:x7e,rotr32L:N7e,rotlSH:vee,rotlSL:Eee,rotlBH:_ee,rotlBL:Cee,add:T7e,add3L:R7e,add3H:P7e,add4L:O7e,add4H:k7e,add5H:L7e,add5L:D7e},[M7e,U7e]=Lt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Nd=new Uint32Array(80),Td=new Uint32Array(80);class $7e extends mee{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let v=0;v<16;v++,n+=4)Nd[v]=e.getUint32(n),Td[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const A=Nd[v-15]|0,C=Td[v-15]|0,S=Lt.rotrSH(A,C,1)^Lt.rotrSH(A,C,8)^Lt.shrSH(A,C,7),x=Lt.rotrSL(A,C,1)^Lt.rotrSL(A,C,8)^Lt.shrSL(A,C,7),T=Nd[v-2]|0,I=Td[v-2]|0,k=Lt.rotrSH(T,I,19)^Lt.rotrBH(T,I,61)^Lt.shrSH(T,I,6),O=Lt.rotrSL(T,I,19)^Lt.rotrBL(T,I,61)^Lt.shrSL(T,I,6),B=Lt.add4L(x,O,Td[v-7],Td[v-16]),G=Lt.add4H(B,S,k,Nd[v-7],Nd[v-16]);Nd[v]=G|0,Td[v]=B|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:y,Hh:m,Hl:w}=this;for(let v=0;v<80;v++){const A=Lt.rotrSH(d,h,14)^Lt.rotrSH(d,h,18)^Lt.rotrBH(d,h,41),C=Lt.rotrSL(d,h,14)^Lt.rotrSL(d,h,18)^Lt.rotrBL(d,h,41),S=d&f^~d&g,x=h&p^~h&y,T=Lt.add5L(w,C,x,U7e[v],Td[v]),I=Lt.add5H(T,m,A,S,M7e[v],Nd[v]),k=T|0,O=Lt.rotrSH(r,s,28)^Lt.rotrBH(r,s,34)^Lt.rotrBH(r,s,39),B=Lt.rotrSL(r,s,28)^Lt.rotrBL(r,s,34)^Lt.rotrBL(r,s,39),G=r&i^r&a^i&a,W=s&o^s&c^o&c;m=g|0,w=y|0,g=f|0,y=p|0,f=d|0,p=h|0,{h:d,l:h}=Lt.add(l|0,u|0,I|0,k|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const R=Lt.add3L(k,B,W);r=Lt.add3H(R,I,O,G),s=R|0}({h:r,l:s}=Lt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Lt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Lt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Lt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Lt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Lt.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=Lt.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:m,l:w}=Lt.add(this.Hh|0,this.Hl|0,m|0,w|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,y,m,w)}roundClean(){Nd.fill(0),Td.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const B7e=IU(()=>new $7e);function F7e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const n7=F7e();n7.crypto||n7.msCrypto;function j7e(t){switch(t){case"sha256":return yee.create();case"sha512":return B7e.create()}Q(!1,"invalid hashing algorithm name","algorithm",t)}const[Aee,See,Iee]=[[],[],[]],z7e=BigInt(0),sv=BigInt(1),W7e=BigInt(2),H7e=BigInt(7),G7e=BigInt(256),q7e=BigInt(113);for(let t=0,e=sv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Aee.push(2*(5*r+n)),See.push((t+1)*(t+2)/2%64);let s=z7e;for(let i=0;i<7;i++)e=(e<<sv^(e>>H7e)*q7e)%G7e,e&W7e&&(s^=sv<<(sv<<BigInt(i))-sv);Iee.push(s)}const[V7e,K7e]=bee(Iee,!0),r7=(t,e,n)=>n>32?_ee(t,e,n):vee(t,e,n),s7=(t,e,n)=>n>32?Cee(t,e,n):Eee(t,e,n);function Y7e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=r7(l,u,1)^n[a],h=s7(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=See[o],c=r7(s,i,a),l=s7(s,i,a),u=Aee[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=V7e[r],t[1]^=K7e[r]}n.fill(0)}class xU extends SU{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,sx(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=u7e(this.state)}keccak(){Y7e(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){T0(this);const{blockLen:n,state:r}=this;e=pT(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){T0(this,!1),AU(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return sx(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(hee(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new xU(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Q7e=(t,e,n)=>IU(()=>new xU(e,t,n)),J7e=Q7e(1,136,256/8);let xee=!1;const Nee=function(t){return J7e(t)};let Tee=Nee;function kr(t){const e=zt(t,"data");return Me(Tee(e))}kr._=Nee;kr.lock=function(){xee=!0};kr.register=function(t){if(xee)throw new TypeError("keccak256 is locked");Tee=t};Object.freeze(kr);const Ree=function(t){return j7e("sha256").update(t).digest()};let Pee=Ree,Oee=!1;function db(t){const e=zt(t,"data");return Me(Pee(e))}db._=Ree;db.lock=function(){Oee=!0};db.register=function(t){if(Oee)throw new Error("sha256 is locked");Pee=t};Object.freeze(db);Object.freeze(db);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const kee=BigInt(0),gT=BigInt(1),Z7e=BigInt(2),mT=t=>t instanceof Uint8Array,X7e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function R0(t){if(!mT(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=X7e[t[n]];return e}function Dee(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function NU(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function P0(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const s=r*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function ig(t){return NU(R0(t))}function TU(t){if(!mT(t))throw new Error("Uint8Array expected");return NU(R0(Uint8Array.from(t).reverse()))}function O0(t,e){return P0(t.toString(16).padStart(e*2,"0"))}function RU(t,e){return O0(t,e).reverse()}function eze(t){return P0(Dee(t))}function Za(t,e,n){let r;if(typeof e=="string")try{r=P0(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(mT(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function $_(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!mT(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function tze(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function nze(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function rze(t){let e;for(e=0;t>kee;t>>=gT,e+=1);return e}function sze(t,e){return t>>BigInt(e)&gT}const ize=(t,e,n)=>t|(n?gT:kee)<<BigInt(e),PU=t=>(Z7e<<BigInt(t-1))-gT,IO=t=>new Uint8Array(t),i7=t=>Uint8Array.from(t);function Lee(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=IO(t),s=IO(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=IO())=>{s=a(i7([0]),d),r=a(),d.length!==0&&(s=a(i7([1]),d),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return $_(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const oze={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function o1(t,e,n={}){const r=(s,i,o)=>{const a=oze[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const aze=Object.freeze(Object.defineProperty({__proto__:null,bitGet:sze,bitLen:rze,bitMask:PU,bitSet:ize,bytesToHex:R0,bytesToNumberBE:ig,bytesToNumberLE:TU,concatBytes:$_,createHmacDrbg:Lee,ensureBytes:Za,equalBytes:tze,hexToBytes:P0,hexToNumber:NU,numberToBytesBE:O0,numberToBytesLE:RU,numberToHexUnpadded:Dee,numberToVarBytesBE:eze,utf8ToBytes:nze,validateObject:o1},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hs=BigInt(0),Nr=BigInt(1),ep=BigInt(2),cze=BigInt(3),O3=BigInt(4),o7=BigInt(5),a7=BigInt(8);BigInt(9);BigInt(16);function Vi(t,e){const n=t%e;return n>=hs?n:e+n}function lze(t,e,n){if(n<=hs||e<hs)throw new Error("Expected power/modulo > 0");if(n===Nr)return hs;let r=Nr;for(;e>hs;)e&Nr&&(r=r*t%n),t=t*t%n,e>>=Nr;return r}function ra(t,e,n){let r=t;for(;e-- >hs;)r*=r,r%=n;return r}function k3(t,e){if(t===hs||e<=hs)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Vi(t,e),r=e,s=hs,i=Nr;for(;n!==hs;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Nr)throw new Error("invert: does not exist");return Vi(s,e)}function uze(t){const e=(t-Nr)/ep;let n,r,s;for(n=t-Nr,r=0;n%ep===hs;n/=ep,r++);for(s=ep;s<t&&lze(s,e,t)!==t-Nr;s++);if(r===1){const o=(t+Nr)/O3;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(n+Nr)/ep;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,s),n),d=a.pow(c,i),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(h);f<l&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const p=a.pow(u,Nr<<BigInt(l-f-1));u=a.sqr(p),d=a.mul(d,p),h=a.mul(h,u),l=f}return d}}function dze(t){if(t%O3===cze){const e=(t+Nr)/O3;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%a7===o7){const e=(t-o7)/a7;return function(r,s){const i=r.mul(s,ep),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,ep),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return uze(t)}const hze=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function fze(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=hze.reduce((r,s)=>(r[s]="function",r),e);return o1(t,n)}function pze(t,e,n){if(n<hs)throw new Error("Expected power > 0");if(n===hs)return t.ONE;if(n===Nr)return e;let r=t.ONE,s=e;for(;n>hs;)n&Nr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Nr;return r}function gze(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function Mee(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function mze(t,e,n=!1,r={}){if(t<=hs)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=Mee(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=dze(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:PU(s),ZERO:hs,ONE:Nr,create:c=>Vi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return hs<=c&&c<t},is0:c=>c===hs,isOdd:c=>(c&Nr)===Nr,neg:c=>Vi(-c,t),eql:(c,l)=>c===l,sqr:c=>Vi(c*c,t),add:(c,l)=>Vi(c+l,t),sub:(c,l)=>Vi(c-l,t),mul:(c,l)=>Vi(c*l,t),pow:(c,l)=>pze(a,c,l),div:(c,l)=>Vi(c*k3(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>k3(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>gze(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?RU(c,i):O0(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?TU(c):ig(c)}});return Object.freeze(a)}function Uee(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function $ee(t){const e=Uee(t);return e+Math.ceil(e/2)}function yze(t,e,n=!1){const r=t.length,s=Uee(e),i=$ee(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=n?ig(t):TU(t),a=Vi(o,e-Nr)+Nr;return n?RU(a,s):O0(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wze=BigInt(0),xO=BigInt(1);function bze(t,e){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>wze;)i&xO&&(o=o.add(a)),a=a.double(),i>>=xO;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),c=[];let l=s,u=l;for(let d=0;d<o;d++){u=l,c.push(u);for(let h=1;h<a;h++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=r(s);let l=t.ZERO,u=t.BASE;const d=BigInt(2**s-1),h=2**s,f=BigInt(s);for(let p=0;p<a;p++){const g=p*c;let y=Number(o&d);o>>=f,y>c&&(y-=h,o+=xO);const m=g,w=g+Math.abs(y)-1,v=p%2!==0,A=y<0;y===0?u=u.add(n(v,i[m])):l=l.add(n(A,i[w]))}return{p:l,f:u}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function Bee(t){return fze(t.Fp),o1(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Mee(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function vze(t){const e=Bee(t);o1(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:Eze,hexToBytes:_ze}=aze,wp={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=wp;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:Eze(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=wp,n=typeof t=="string"?_ze(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=wp._parseInt(n.subarray(2)),{d:o,l:a}=wp._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,o=s.length/2,a=n(i),c=n(o);return`30${n(o+i+4)}02${c}${s}02${a}${r}`}},Nu=BigInt(0),ya=BigInt(1);BigInt(2);const c7=BigInt(3);BigInt(4);function Cze(t){const e=vze(t),{Fp:n}=e,r=e.toBytes||((p,g,y)=>{const m=g.toAffine();return $_(Uint8Array.from([4]),n.toBytes(m.x),n.toBytes(m.y))}),s=e.fromBytes||(p=>{const g=p.subarray(1),y=n.fromBytes(g.subarray(0,n.BYTES)),m=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:y,y:m}});function i(p){const{a:g,b:y}=e,m=n.sqr(p),w=n.mul(m,p);return n.add(n.add(w,n.mul(p,g)),y)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&Nu<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:y,wrapPrivateKey:m,n:w}=e;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=R0(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(y*2,"0")}let v;try{v=typeof p=="bigint"?p:ig(Za("private key",p,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof p}`)}return m&&(v=Vi(v,w)),a(v),v}const l=new Map;function u(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(g,y,m){if(this.px=g,this.py=y,this.pz=m,g==null||!n.isValid(g))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(m==null||!n.isValid(m))throw new Error("z required")}static fromAffine(g){const{x:y,y:m}=g||{};if(!g||!n.isValid(y)||!n.isValid(m))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const w=v=>n.eql(v,n.ZERO);return w(y)&&w(m)?d.ZERO:new d(y,m,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const y=n.invertBatch(g.map(m=>m.pz));return g.map((m,w)=>m.toAffine(y[w])).map(d.fromAffine)}static fromHex(g){const y=d.fromAffine(s(Za("pointHex",g)));return y.assertValidity(),y}static fromPrivateKey(g){return d.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y}=this.toAffine();if(!n.isValid(g)||!n.isValid(y))throw new Error("bad point: x or y not FE");const m=n.sqr(y),w=i(g);if(!n.eql(m,w))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:y,py:m,pz:w}=this,{px:v,py:A,pz:C}=g,S=n.eql(n.mul(y,C),n.mul(v,w)),x=n.eql(n.mul(m,C),n.mul(A,w));return S&&x}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:y}=e,m=n.mul(y,c7),{px:w,py:v,pz:A}=this;let C=n.ZERO,S=n.ZERO,x=n.ZERO,T=n.mul(w,w),I=n.mul(v,v),k=n.mul(A,A),O=n.mul(w,v);return O=n.add(O,O),x=n.mul(w,A),x=n.add(x,x),C=n.mul(g,x),S=n.mul(m,k),S=n.add(C,S),C=n.sub(I,S),S=n.add(I,S),S=n.mul(C,S),C=n.mul(O,C),x=n.mul(m,x),k=n.mul(g,k),O=n.sub(T,k),O=n.mul(g,O),O=n.add(O,x),x=n.add(T,T),T=n.add(x,T),T=n.add(T,k),T=n.mul(T,O),S=n.add(S,T),k=n.mul(v,A),k=n.add(k,k),T=n.mul(k,O),C=n.sub(C,T),x=n.mul(k,I),x=n.add(x,x),x=n.add(x,x),new d(C,S,x)}add(g){u(g);const{px:y,py:m,pz:w}=this,{px:v,py:A,pz:C}=g;let S=n.ZERO,x=n.ZERO,T=n.ZERO;const I=e.a,k=n.mul(e.b,c7);let O=n.mul(y,v),B=n.mul(m,A),G=n.mul(w,C),W=n.add(y,m),R=n.add(v,A);W=n.mul(W,R),R=n.add(O,B),W=n.sub(W,R),R=n.add(y,w);let N=n.add(v,C);return R=n.mul(R,N),N=n.add(O,G),R=n.sub(R,N),N=n.add(m,w),S=n.add(A,C),N=n.mul(N,S),S=n.add(B,G),N=n.sub(N,S),T=n.mul(I,R),S=n.mul(k,G),T=n.add(S,T),S=n.sub(B,T),T=n.add(B,T),x=n.mul(S,T),B=n.add(O,O),B=n.add(B,O),G=n.mul(I,G),R=n.mul(k,R),B=n.add(B,G),G=n.sub(O,G),G=n.mul(I,G),R=n.add(R,G),O=n.mul(B,R),x=n.add(x,O),O=n.mul(N,R),S=n.mul(W,S),S=n.sub(S,O),O=n.mul(W,B),T=n.mul(N,T),T=n.add(T,O),new d(S,x,T)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return f.wNAFCached(this,l,g,y=>{const m=n.invertBatch(y.map(w=>w.pz));return y.map((w,v)=>w.toAffine(m[v])).map(d.fromAffine)})}multiplyUnsafe(g){const y=d.ZERO;if(g===Nu)return y;if(a(g),g===ya)return this;const{endo:m}=e;if(!m)return f.unsafeLadder(this,g);let{k1neg:w,k1:v,k2neg:A,k2:C}=m.splitScalar(g),S=y,x=y,T=this;for(;v>Nu||C>Nu;)v&ya&&(S=S.add(T)),C&ya&&(x=x.add(T)),T=T.double(),v>>=ya,C>>=ya;return w&&(S=S.negate()),A&&(x=x.negate()),x=new d(n.mul(x.px,m.beta),x.py,x.pz),S.add(x)}multiply(g){a(g);let y=g,m,w;const{endo:v}=e;if(v){const{k1neg:A,k1:C,k2neg:S,k2:x}=v.splitScalar(y);let{p:T,f:I}=this.wNAF(C),{p:k,f:O}=this.wNAF(x);T=f.constTimeNegate(A,T),k=f.constTimeNegate(S,k),k=new d(n.mul(k.px,v.beta),k.py,k.pz),m=T.add(k),w=I.add(O)}else{const{p:A,f:C}=this.wNAF(y);m=A,w=C}return d.normalizeZ([m,w])[0]}multiplyAndAddUnsafe(g,y,m){const w=d.BASE,v=(C,S)=>S===Nu||S===ya||!C.equals(w)?C.multiplyUnsafe(S):C.multiply(S),A=v(this,y).add(v(g,m));return A.is0()?void 0:A}toAffine(g){const{px:y,py:m,pz:w}=this,v=this.is0();g==null&&(g=v?n.ONE:n.inv(w));const A=n.mul(y,g),C=n.mul(m,g),S=n.mul(w,g);if(v)return{x:n.ZERO,y:n.ZERO};if(!n.eql(S,n.ONE))throw new Error("invZ was invalid");return{x:A,y:C}}isTorsionFree(){const{h:g,isTorsionFree:y}=e;if(g===ya)return!0;if(y)return y(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:y}=e;return g===ya?this:y?y(d,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(d,this,g)}toHex(g=!0){return R0(this.toRawBytes(g))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=bze(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function Aze(t){const e=Bee(t);return o1(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Sze(t){const e=Aze(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(R){return Nu<R&&R<n.ORDER}function a(R){return Vi(R,r)}function c(R){return k3(R,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=Cze({...e,toBytes(R,N,M){const P=N.toAffine(),L=n.toBytes(P.x),F=$_;return M?F(Uint8Array.from([N.hasEvenY()?2:3]),L):F(Uint8Array.from([4]),L,n.toBytes(P.y))},fromBytes(R){const N=R.length,M=R[0],P=R.subarray(1);if(N===s&&(M===2||M===3)){const L=ig(P);if(!o(L))throw new Error("Point is not on curve");const F=d(L);let V=n.sqrt(F);const Z=(V&ya)===ya;return(M&1)===1!==Z&&(V=n.neg(V)),{x:L,y:V}}else if(N===i&&M===4){const L=n.fromBytes(P.subarray(0,n.BYTES)),F=n.fromBytes(P.subarray(n.BYTES,2*n.BYTES));return{x:L,y:F}}else throw new Error(`Point of length ${N} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=R=>R0(O0(R,e.nByteLength));function p(R){const N=r>>ya;return R>N}function g(R){return p(R)?a(-R):R}const y=(R,N,M)=>ig(R.slice(N,M));class m{constructor(N,M,P){this.r=N,this.s=M,this.recovery=P,this.assertValidity()}static fromCompact(N){const M=e.nByteLength;return N=Za("compactSignature",N,M*2),new m(y(N,0,M),y(N,M,2*M))}static fromDER(N){const{r:M,s:P}=wp.toSig(Za("DER",N));return new m(M,P)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(N){return new m(this.r,this.s,N)}recoverPublicKey(N){const{r:M,s:P,recovery:L}=this,F=x(Za("msgHash",N));if(L==null||![0,1,2,3].includes(L))throw new Error("recovery id invalid");const V=L===2||L===3?M+e.n:M;if(V>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const Z=L&1?"03":"02",ae=l.fromHex(Z+f(V)),re=c(V),le=a(-F*re),we=a(P*re),ee=l.BASE.multiplyAndAddUnsafe(ae,le,we);if(!ee)throw new Error("point at infinify");return ee.assertValidity(),ee}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return P0(this.toDERHex())}toDERHex(){return wp.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return P0(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const w={isValidPrivateKey(R){try{return u(R),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const R=$ee(e.n);return yze(e.randomBytes(R),e.n)},precompute(R=8,N=l.BASE){return N._setWindowSize(R),N.multiply(BigInt(3)),N}};function v(R,N=!0){return l.fromPrivateKey(R).toRawBytes(N)}function A(R){const N=R instanceof Uint8Array,M=typeof R=="string",P=(N||M)&&R.length;return N?P===s||P===i:M?P===2*s||P===2*i:R instanceof l}function C(R,N,M=!0){if(A(R))throw new Error("first arg must be private key");if(!A(N))throw new Error("second arg must be public key");return l.fromHex(N).multiply(u(R)).toRawBytes(M)}const S=e.bits2int||function(R){const N=ig(R),M=R.length*8-e.nBitLength;return M>0?N>>BigInt(M):N},x=e.bits2int_modN||function(R){return a(S(R))},T=PU(e.nBitLength);function I(R){if(typeof R!="bigint")throw new Error("bigint expected");if(!(Nu<=R&&R<T))throw new Error(`bigint expected < 2^${e.nBitLength}`);return O0(R,e.nByteLength)}function k(R,N,M=O){if(["recovered","canonical"].some(pe=>pe in M))throw new Error("sign() legacy options not supported");const{hash:P,randomBytes:L}=e;let{lowS:F,prehash:V,extraEntropy:Z}=M;F==null&&(F=!0),R=Za("msgHash",R),V&&(R=Za("prehashed msgHash",P(R)));const ae=x(R),re=u(N),le=[I(re),I(ae)];if(Z!=null){const pe=Z===!0?L(n.BYTES):Z;le.push(Za("extraEntropy",pe))}const we=$_(...le),ee=ae;function ce(pe){const he=S(pe);if(!h(he))return;const Ee=c(he),We=l.BASE.multiply(he).toAffine(),ue=a(We.x);if(ue===Nu)return;const Ae=a(Ee*a(ee+ue*re));if(Ae===Nu)return;let ke=(We.x===ue?0:2)|Number(We.y&ya),Ce=Ae;return F&&p(Ae)&&(Ce=g(Ae),ke^=1),new m(ue,Ce,ke)}return{seed:we,k2sig:ce}}const O={lowS:e.lowS,prehash:!1},B={lowS:e.lowS,prehash:!1};function G(R,N,M=O){const{seed:P,k2sig:L}=k(R,N,M),F=e;return Lee(F.hash.outputLen,F.nByteLength,F.hmac)(P,L)}l.BASE._setWindowSize(8);function W(R,N,M,P=B){var We;const L=R;if(N=Za("msgHash",N),M=Za("publicKey",M),"strict"in P)throw new Error("options.strict was renamed to lowS");const{lowS:F,prehash:V}=P;let Z,ae;try{if(typeof L=="string"||L instanceof Uint8Array)try{Z=m.fromDER(L)}catch(ue){if(!(ue instanceof wp.Err))throw ue;Z=m.fromCompact(L)}else if(typeof L=="object"&&typeof L.r=="bigint"&&typeof L.s=="bigint"){const{r:ue,s:Ae}=L;Z=new m(ue,Ae)}else throw new Error("PARSE");ae=l.fromHex(M)}catch(ue){if(ue.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(F&&Z.hasHighS())return!1;V&&(N=e.hash(N));const{r:re,s:le}=Z,we=x(N),ee=c(le),ce=a(we*ee),pe=a(re*ee),he=(We=l.BASE.multiplyAndAddUnsafe(ae,ce,pe))==null?void 0:We.toAffine();return he?a(he.x)===re:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:C,sign:G,verify:W,ProjectivePoint:l,Signature:m,utils:w}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ize(t){return{hash:t,hmac:(e,...n)=>gee(t,e,f7e(...n)),randomBytes:p7e}}function xze(t,e){const n=r=>Sze({...t,...Ize(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Fee=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),l7=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Nze=BigInt(1),D3=BigInt(2),u7=(t,e)=>(t+e/D3)/e;function Tze(t){const e=Fee,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=ra(u,n,e)*u%e,h=ra(d,n,e)*u%e,f=ra(h,D3,e)*l%e,p=ra(f,s,e)*f%e,g=ra(p,i,e)*p%e,y=ra(g,a,e)*g%e,m=ra(y,c,e)*y%e,w=ra(m,a,e)*g%e,v=ra(w,n,e)*u%e,A=ra(v,o,e)*p%e,C=ra(A,r,e)*l%e,S=ra(C,D3,e);if(!L3.eql(L3.sqr(S),t))throw new Error("Cannot find square root");return S}const L3=mze(Fee,void 0,void 0,{sqrt:Tze}),kd=xze({a:BigInt(0),b:BigInt(7),Fp:L3,n:l7,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=l7,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Nze*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=u7(i*t,e),c=u7(-r*t,e);let l=Vi(t-a*n-c*s,e),u=Vi(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},yee);BigInt(0);kd.ProjectivePoint;const B_="0x0000000000000000000000000000000000000000",d7="0x0000000000000000000000000000000000000000000000000000000000000000",h7=BigInt(0),f7=BigInt(1),p7=BigInt(2),g7=BigInt(27),m7=BigInt(28),RA=BigInt(35),qm={};function y7(t){return td(Gr(t),32)}var fw,el,pw,Bp;const Ya=class Ya{constructor(e,n,r,s){K(this,fw);K(this,el);K(this,pw);K(this,Bp);dT(e,qm,"Signature"),U(this,fw,n),U(this,el,r),U(this,pw,s),U(this,Bp,null)}get r(){return _(this,fw)}set r(e){Q(Wy(e)===32,"invalid r","value",e),U(this,fw,Me(e))}get s(){return Q(parseInt(_(this,el).substring(0,3))<8,"non-canonical s; use ._s","s",_(this,el)),_(this,el)}set s(e){Q(Wy(e)===32,"invalid s","value",e),U(this,el,Me(e))}get _s(){return _(this,el)}isValid(){return parseInt(_(this,el).substring(0,3))<8}get v(){return _(this,pw)}set v(e){const n=Wt(e,"value");Q(n===27||n===28,"invalid v","v",e),U(this,pw,n)}get networkV(){return _(this,Bp)}get legacyChainId(){const e=this.networkV;return e==null?null:Ya.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=zt(this.s);return this.yParity&&(e[0]|=128),Me(e)}get compactSerialized(){return Er([this.r,this.yParityAndS])}get serialized(){return Er([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Ya(qm,this.r,this._s,this.v);return this.networkV&&U(e,Bp,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const n=Xe(e,"v");return n==g7||n==m7?h7:(Q(n>=RA,"invalid EIP-155 v","v",e),(n-RA)/p7)}static getChainIdV(e,n){return Xe(e)*p7+BigInt(35+n-27)}static getNormalizedV(e){const n=Xe(e);return n===h7||n===g7?27:n===f7||n===m7?28:(Q(n>=RA,"invalid v","v",e),n&f7?27:28)}static from(e){function n(l,u){Q(l,u,"signature",e)}if(e==null)return new Ya(qm,d7,d7,27);if(typeof e=="string"){const l=zt(e,"signature");if(l.length===64){const u=Me(l.slice(0,32)),d=l.slice(32,64),h=d[0]&128?28:27;return d[0]&=127,new Ya(qm,u,Me(d),h)}if(l.length===65){const u=Me(l.slice(0,32)),d=Me(l.slice(32,64)),h=Ya.getNormalizedV(l[64]);return new Ya(qm,u,d,h)}n(!1,"invalid raw signature length")}if(e instanceof Ya)return e.clone();const r=e.r;n(r!=null,"missing r");const s=y7(r),i=function(l,u){if(l!=null)return y7(l);if(u!=null){n(Yn(u,32),"invalid yParityAndS");const d=zt(u);return d[0]&=127,Me(d)}n(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(l,u,d){if(l!=null){const h=Xe(l);return{networkV:h>=RA?h:void 0,v:Ya.getNormalizedV(h)}}if(u!=null)return n(Yn(u,32),"invalid yParityAndS"),{v:zt(u)[0]&128?28:27};if(d!=null){switch(Wt(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new Ya(qm,s,i,a);return o&&U(c,Bp,o),n(e.yParity==null||Wt(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};fw=new WeakMap,el=new WeakMap,pw=new WeakMap,Bp=new WeakMap;let oo=Ya;var wu;const tp=class tp{constructor(e){K(this,wu);Q(Wy(e)===32,"invalid private key","privateKey","[REDACTED]"),U(this,wu,Me(e))}get privateKey(){return _(this,wu)}get publicKey(){return tp.computePublicKey(_(this,wu))}get compressedPublicKey(){return tp.computePublicKey(_(this,wu),!0)}sign(e){Q(Wy(e)===32,"invalid digest length","digest",e);const n=kd.sign(fi(e),fi(_(this,wu)),{lowS:!0});return oo.from({r:uf(n.r,32),s:uf(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=tp.computePublicKey(e);return Me(kd.getSharedSecret(fi(_(this,wu)),zt(n),!1))}static computePublicKey(e,n){let r=zt(e,"key");if(r.length===32){const i=kd.getPublicKey(r,!!n);return Me(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=kd.ProjectivePoint.fromHex(r);return Me(s.toRawBytes(n))}static recoverPublicKey(e,n){Q(Wy(e)===32,"invalid digest length","digest",e);const r=oo.from(n);let s=kd.Signature.fromCompact(fi(Er([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(fi(e));return Q(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,r){const s=kd.ProjectivePoint.fromHex(tp.computePublicKey(e).substring(2)),i=kd.ProjectivePoint.fromHex(tp.computePublicKey(n).substring(2));return"0x"+s.add(i).toHex(!!r)}};wu=new WeakMap;let F_=tp;const Rze=BigInt(0),Pze=BigInt(36);function w7(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=e[s].charCodeAt(0);const r=zt(kr(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const OU={};for(let t=0;t<10;t++)OU[String(t)]=String(t);for(let t=0;t<26;t++)OU[String.fromCharCode(65+t)]=String(10+t);const b7=15;function Oze(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>OU[r]).join("");for(;e.length>=b7;){let r=e.substring(0,b7);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const kze=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function Dze(t){t=t.toLowerCase();let e=Rze;for(let n=0;n<t.length;n++)e=e*Pze+kze[t[n]];return e}function vn(t){if(Q(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=w7(t);return Q(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){Q(t.substring(2,4)===Oze(t),"bad icap checksum","address",t);let e=Dze(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return w7("0x"+e)}Q(!1,"invalid address","address",t)}function Lze(t){const e=vn(t.from);let r=Xe(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,vn(yr(kr(hf([e,r])),12))}function jee(t){return t&&typeof t.getAddress=="function"}async function NO(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(ye(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),Q(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),vn(n)}function yi(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?vn(t):(ye(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),NO(t,e.resolveName(t)));if(jee(t))return NO(t,t.getAddress());if(t&&typeof t.then=="function")return NO(t,t);Q(!1,"unsupported addressable value","target",t)}const au={};function Ve(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new Js(au,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function an(t,e){return new Js(au,`bytes${e||""}`,t,{size:e})}const v7=Symbol.for("_ethers_typed");var Fp;const cu=class cu{constructor(e,n,r,s){ne(this,"type");ne(this,"value");K(this,Fp);ne(this,"_typedSymbol");s==null&&(s=null),dT(au,e,"Typed"),gt(this,{_typedSymbol:v7,type:n,value:r}),U(this,Fp,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return _(this,Fp)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return _(this,Fp)===!0?-1:_(this,Fp)===!1?this.value.length:null}static from(e,n){return new cu(au,e,n)}static uint8(e){return Ve(e,8)}static uint16(e){return Ve(e,16)}static uint24(e){return Ve(e,24)}static uint32(e){return Ve(e,32)}static uint40(e){return Ve(e,40)}static uint48(e){return Ve(e,48)}static uint56(e){return Ve(e,56)}static uint64(e){return Ve(e,64)}static uint72(e){return Ve(e,72)}static uint80(e){return Ve(e,80)}static uint88(e){return Ve(e,88)}static uint96(e){return Ve(e,96)}static uint104(e){return Ve(e,104)}static uint112(e){return Ve(e,112)}static uint120(e){return Ve(e,120)}static uint128(e){return Ve(e,128)}static uint136(e){return Ve(e,136)}static uint144(e){return Ve(e,144)}static uint152(e){return Ve(e,152)}static uint160(e){return Ve(e,160)}static uint168(e){return Ve(e,168)}static uint176(e){return Ve(e,176)}static uint184(e){return Ve(e,184)}static uint192(e){return Ve(e,192)}static uint200(e){return Ve(e,200)}static uint208(e){return Ve(e,208)}static uint216(e){return Ve(e,216)}static uint224(e){return Ve(e,224)}static uint232(e){return Ve(e,232)}static uint240(e){return Ve(e,240)}static uint248(e){return Ve(e,248)}static uint256(e){return Ve(e,256)}static uint(e){return Ve(e,256)}static int8(e){return Ve(e,-8)}static int16(e){return Ve(e,-16)}static int24(e){return Ve(e,-24)}static int32(e){return Ve(e,-32)}static int40(e){return Ve(e,-40)}static int48(e){return Ve(e,-48)}static int56(e){return Ve(e,-56)}static int64(e){return Ve(e,-64)}static int72(e){return Ve(e,-72)}static int80(e){return Ve(e,-80)}static int88(e){return Ve(e,-88)}static int96(e){return Ve(e,-96)}static int104(e){return Ve(e,-104)}static int112(e){return Ve(e,-112)}static int120(e){return Ve(e,-120)}static int128(e){return Ve(e,-128)}static int136(e){return Ve(e,-136)}static int144(e){return Ve(e,-144)}static int152(e){return Ve(e,-152)}static int160(e){return Ve(e,-160)}static int168(e){return Ve(e,-168)}static int176(e){return Ve(e,-176)}static int184(e){return Ve(e,-184)}static int192(e){return Ve(e,-192)}static int200(e){return Ve(e,-200)}static int208(e){return Ve(e,-208)}static int216(e){return Ve(e,-216)}static int224(e){return Ve(e,-224)}static int232(e){return Ve(e,-232)}static int240(e){return Ve(e,-240)}static int248(e){return Ve(e,-248)}static int256(e){return Ve(e,-256)}static int(e){return Ve(e,-256)}static bytes1(e){return an(e,1)}static bytes2(e){return an(e,2)}static bytes3(e){return an(e,3)}static bytes4(e){return an(e,4)}static bytes5(e){return an(e,5)}static bytes6(e){return an(e,6)}static bytes7(e){return an(e,7)}static bytes8(e){return an(e,8)}static bytes9(e){return an(e,9)}static bytes10(e){return an(e,10)}static bytes11(e){return an(e,11)}static bytes12(e){return an(e,12)}static bytes13(e){return an(e,13)}static bytes14(e){return an(e,14)}static bytes15(e){return an(e,15)}static bytes16(e){return an(e,16)}static bytes17(e){return an(e,17)}static bytes18(e){return an(e,18)}static bytes19(e){return an(e,19)}static bytes20(e){return an(e,20)}static bytes21(e){return an(e,21)}static bytes22(e){return an(e,22)}static bytes23(e){return an(e,23)}static bytes24(e){return an(e,24)}static bytes25(e){return an(e,25)}static bytes26(e){return an(e,26)}static bytes27(e){return an(e,27)}static bytes28(e){return an(e,28)}static bytes29(e){return an(e,29)}static bytes30(e){return an(e,30)}static bytes31(e){return an(e,31)}static bytes32(e){return an(e,32)}static address(e){return new cu(au,"address",e)}static bool(e){return new cu(au,"bool",!!e)}static bytes(e){return new cu(au,"bytes",e)}static string(e){return new cu(au,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new cu(au,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===v7}static dereference(e,n){if(cu.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};Fp=new WeakMap;let Js=cu;class Mze extends cd{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=Js.dereference(n,"string");try{r=vn(r)}catch(s){return this._throwError(s.message,n)}return e.writeValue(r)}decode(e){return vn(uf(e.readValue(),20))}}class Uze extends cd{constructor(n){super(n.name,n.type,"_",n.dynamic);ne(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function zee(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(l=>{const u=l.localName;return ye(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),ye(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),c[u]=!0,n[u]})}else Q(!1,"invalid tuple value","tuple",n);Q(e.length===r.length,"types/value length mismatch","tuple",n);let s=new N3,i=new N3,o=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let d=i.length;c.encode(i,u);let h=s.writeUpdatableValue();o.push(f=>{h(f+d)})}else c.encode(s,u)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function Wee(t,e){let n=[],r=[],s=t.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(l){if(Ns(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if(Ns(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");n.push(o),r.push(i.localName||null)}),N0.fromItems(n,r)}class $ze extends cd{constructor(n,r,s){const i=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",i,s,o);ne(this,"coder");ne(this,"length");gt(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(n);return r}encode(n,r){const s=Js.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,n.writeValue(s.length)),ZX(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return zee(n,o,s)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),ye(r*mi<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*mi,length:n.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new Uze(this.coder));return Wee(n,s)}}class Bze extends cd{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=Js.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class Hee extends cd{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=fi(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class Fze extends Hee{constructor(e){super("bytes",e)}decode(e){return Me(super.decode(e))}}class jze extends cd{constructor(n,r){let s="bytes"+String(n);super(s,s,r,!1);ne(this,"size");gt(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let s=fi(Js.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(s)}decode(n){return Me(n.readBytes(this.size))}}const zze=new Uint8Array([]);class Wze extends cd{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(zze)}decode(e){return e.readBytes(0),null}}const Hze=BigInt(0),Gze=BigInt(1),qze=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Vze extends cd{constructor(n,r,s){const i=(r?"int":"uint")+n*8;super(i,i,s,!1);ne(this,"size");ne(this,"signed");gt(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let s=Xe(Js.dereference(r,this.type)),i=_v(qze,mi*8);if(this.signed){let o=_v(i,this.size*8-1);(s>o||s<-(o+Gze))&&this._throwError("value out-of-bounds",r),s=tee(s,8*mi)}else(s<Hze||s>_v(i,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(s)}decode(n){let r=_v(n.readValue(),this.size*8);return this.signed&&(r=H9e(r,this.size*8)),r}}class Kze extends Hee{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,zu(Js.dereference(n,"string")))}decode(e){return rx(super.decode(e))}}class PA extends cd{constructor(n,r){let s=!1;const i=[];n.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,r,s);ne(this,"coders");gt(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(s=>{n.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[i]))}),Object.freeze(n)}encode(n,r){const s=Js.dereference(r,"tuple");return zee(n,this.coders,s)}decode(n){return Wee(n,this.coders)}}function TO(t,e){return{address:vn(t),storageKeys:e.map((n,r)=>(Q(Yn(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function cm(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(Q(n.length===2,"invalid slot set",`value[${r}]`,n),TO(n[0],n[1])):(Q(n!=null&&typeof n=="object","invalid address-slot set","value",t),TO(n.address,n.storageKeys)));Q(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((s,i)=>(s[i]=!0,s),{});return TO(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function Gee(t){return{address:vn(t.address),nonce:Xe(t.nonce!=null?t.nonce:0),chainId:Xe(t.chainId!=null?t.chainId:0),signature:oo.from(t.signature)}}function Yze(t){let e;return typeof t=="string"?e=F_.computePublicKey(t,!1):e=t.publicKey,vn(kr("0x"+e.substring(4)).substring(26))}function Qze(t,e){return Yze(F_.recoverPublicKey(t,e))}const is=BigInt(0),Jze=BigInt(2),Zze=BigInt(27),Xze=BigInt(28),eWe=BigInt(35),tWe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),RO=4096*32;function nWe(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return zt(t.blobToKzgCommitment(Me(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return zt(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return zt(t.blobToKZGCommitment(Me(r)));Q(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return zt(t.computeBlobProof(Me(r),Me(s)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return zt(t.computeBlobKZGProof(Me(r),Me(s)));Q(!1,"unsupported KZG library","kzg",t)}}}function E7(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=db(e).substring(4),"0x"+n}function hb(t){return t==="0x"?null:vn(t)}function yT(t,e){try{return cm(t)}catch(n){Q(!1,n.message,e,t)}}function rWe(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const s=t[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);n.push({address:hb(s[1]),nonce:On(s[2],"nonce"),chainId:On(s[0],"chainId"),signature:oo.from({yParity:lm(s[3],"yParity"),r:td(s[4],32),s:td(s[5],32)})})}return n}catch(n){Q(!1,n.message,e,t)}}function lm(t,e){return t==="0x"?0:Wt(t,e)}function On(t,e){if(t==="0x")return is;const n=Xe(t,e);return Q(n<=tWe,"value exceeds uint size",e,n),n}function Qt(t,e){const n=Xe(t,"value"),r=Gr(n);return Q(r.length<=32,"value too large",`tx.${e}`,n),r}function wT(t){return cm(t).map(e=>[e.address,e.storageKeys])}function sWe(t){return t.map(e=>[Qt(e.chainId,"chainId"),e.address,Qt(e.nonce,"nonce"),Qt(e.signature.yParity,"yParity"),Gr(e.signature.r),Gr(e.signature.s)])}function iWe(t,e){Q(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)Q(Yn(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function oWe(t){const e=i1(t);Q(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:lm(e[0],"nonce"),gasPrice:On(e[1],"gasPrice"),gasLimit:On(e[2],"gasLimit"),to:hb(e[3]),value:On(e[4],"value"),data:Me(e[5]),chainId:is};if(e.length===6)return n;const r=On(e[6],"v"),s=On(e[7],"r"),i=On(e[8],"s");if(s===is&&i===is)n.chainId=r;else{let o=(r-eWe)/Jze;o<is&&(o=is),n.chainId=o,Q(o!==is||r===Zze||r===Xze,"non-canonical legacy v","v",e[6]),n.signature=oo.from({r:td(e[7],32),s:td(e[8],32),v:r})}return n}function aWe(t,e){const n=[Qt(t.nonce,"nonce"),Qt(t.gasPrice||0,"gasPrice"),Qt(t.gasLimit,"gasLimit"),t.to||"0x",Qt(t.value,"value"),t.data];let r=is;if(t.chainId!=is)r=Xe(t.chainId,"tx.chainId"),Q(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==is&&(n.push(Gr(r)),n.push("0x"),n.push("0x")),hf(n);let s=BigInt(27+e.yParity);return r!==is?s=oo.getChainIdV(r,e.v):BigInt(e.v)!==s&&Q(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(Gr(s)),n.push(Gr(e.r)),n.push(Gr(e.s)),hf(n)}function bT(t,e){let n;try{if(n=lm(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{Q(!1,"invalid yParity","yParity",e[0])}const r=td(e[1],32),s=td(e[2],32),i=oo.from({r,s,yParity:n});t.signature=i}function cWe(t){const e=i1(zt(t).slice(1));Q(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Me(t));const n={type:2,chainId:On(e[0],"chainId"),nonce:lm(e[1],"nonce"),maxPriorityFeePerGas:On(e[2],"maxPriorityFeePerGas"),maxFeePerGas:On(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:On(e[4],"gasLimit"),to:hb(e[5]),value:On(e[6],"value"),data:Me(e[7]),accessList:yT(e[8],"accessList")};return e.length===9||bT(n,e.slice(9)),n}function lWe(t,e){const n=[Qt(t.chainId,"chainId"),Qt(t.nonce,"nonce"),Qt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Qt(t.maxFeePerGas||0,"maxFeePerGas"),Qt(t.gasLimit,"gasLimit"),t.to||"0x",Qt(t.value,"value"),t.data,wT(t.accessList||[])];return e&&(n.push(Qt(e.yParity,"yParity")),n.push(Gr(e.r)),n.push(Gr(e.s))),Er(["0x02",hf(n)])}function uWe(t){const e=i1(zt(t).slice(1));Q(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Me(t));const n={type:1,chainId:On(e[0],"chainId"),nonce:lm(e[1],"nonce"),gasPrice:On(e[2],"gasPrice"),gasLimit:On(e[3],"gasLimit"),to:hb(e[4]),value:On(e[5],"value"),data:Me(e[6]),accessList:yT(e[7],"accessList")};return e.length===8||bT(n,e.slice(8)),n}function dWe(t,e){const n=[Qt(t.chainId,"chainId"),Qt(t.nonce,"nonce"),Qt(t.gasPrice||0,"gasPrice"),Qt(t.gasLimit,"gasLimit"),t.to||"0x",Qt(t.value,"value"),t.data,wT(t.accessList||[])];return e&&(n.push(Qt(e.yParity,"recoveryParam")),n.push(Gr(e.r)),n.push(Gr(e.s))),Er(["0x01",hf(n)])}function hWe(t){let e=i1(zt(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const i=e[1],o=e[2],a=e[3];Q(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),Q(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),Q(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),Q(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),Q(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:i[c],commitment:o[c],proof:a[c]});e=e[0]}Q(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",Me(t));const s={type:3,chainId:On(e[0],"chainId"),nonce:lm(e[1],"nonce"),maxPriorityFeePerGas:On(e[2],"maxPriorityFeePerGas"),maxFeePerGas:On(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:On(e[4],"gasLimit"),to:hb(e[5]),value:On(e[6],"value"),data:Me(e[7]),accessList:yT(e[8],"accessList"),maxFeePerBlobGas:On(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(s.blobs=r),Q(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),Q(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<s.blobVersionedHashes.length;i++)Q(Yn(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||bT(s,e.slice(11)),s}function fWe(t,e,n){const r=[Qt(t.chainId,"chainId"),Qt(t.nonce,"nonce"),Qt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Qt(t.maxFeePerGas||0,"maxFeePerGas"),Qt(t.gasLimit,"gasLimit"),t.to||B_,Qt(t.value,"value"),t.data,wT(t.accessList||[]),Qt(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),iWe(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(Qt(e.yParity,"yParity")),r.push(Gr(e.r)),r.push(Gr(e.s)),n)?Er(["0x03",hf([r,n.map(s=>s.data),n.map(s=>s.commitment),n.map(s=>s.proof)])]):Er(["0x03",hf(r)])}function pWe(t){const e=i1(zt(t).slice(1));Q(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Me(t));const n={type:4,chainId:On(e[0],"chainId"),nonce:lm(e[1],"nonce"),maxPriorityFeePerGas:On(e[2],"maxPriorityFeePerGas"),maxFeePerGas:On(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:On(e[4],"gasLimit"),to:hb(e[5]),value:On(e[6],"value"),data:Me(e[7]),accessList:yT(e[8],"accessList"),authorizationList:rWe(e[9],"authorizationList")};return e.length===10||bT(n,e.slice(10)),n}function gWe(t,e){const n=[Qt(t.chainId,"chainId"),Qt(t.nonce,"nonce"),Qt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Qt(t.maxFeePerGas||0,"maxFeePerGas"),Qt(t.gasLimit,"gasLimit"),t.to||"0x",Qt(t.value,"value"),t.data,wT(t.accessList||[]),sWe(t.authorizationList||[])];return e&&(n.push(Qt(e.yParity,"yParity")),n.push(Gr(e.r)),n.push(Gr(e.s))),Er(["0x04",hf(n)])}var rc,gw,mw,yw,ww,bw,vw,Ew,_w,Cw,Aw,Sw,jp,sh,tl,ih,Iw,xw,ES;const Yc=class Yc{constructor(){K(this,xw);K(this,rc);K(this,gw);K(this,mw);K(this,yw);K(this,ww);K(this,bw);K(this,vw);K(this,Ew);K(this,_w);K(this,Cw);K(this,Aw);K(this,Sw);K(this,jp);K(this,sh);K(this,tl);K(this,ih);K(this,Iw);U(this,rc,null),U(this,gw,null),U(this,yw,0),U(this,ww,is),U(this,bw,null),U(this,vw,null),U(this,Ew,null),U(this,mw,"0x"),U(this,_w,is),U(this,Cw,is),U(this,Aw,null),U(this,Sw,null),U(this,jp,null),U(this,sh,null),U(this,tl,null),U(this,ih,null),U(this,Iw,null)}get type(){return _(this,rc)}set type(e){switch(e){case null:U(this,rc,null);break;case 0:case"legacy":U(this,rc,0);break;case 1:case"berlin":case"eip-2930":U(this,rc,1);break;case 2:case"london":case"eip-1559":U(this,rc,2);break;case 3:case"cancun":case"eip-4844":U(this,rc,3);break;case 4:case"pectra":case"eip-7702":U(this,rc,4);break;default:Q(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=_(this,gw);return e==null&&this.type===3?B_:e}set to(e){U(this,gw,e==null?null:vn(e))}get nonce(){return _(this,yw)}set nonce(e){U(this,yw,Wt(e,"value"))}get gasLimit(){return _(this,ww)}set gasLimit(e){U(this,ww,Xe(e))}get gasPrice(){const e=_(this,bw);return e==null&&(this.type===0||this.type===1)?is:e}set gasPrice(e){U(this,bw,e==null?null:Xe(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=_(this,vw);return e??(this.type===2||this.type===3?is:null)}set maxPriorityFeePerGas(e){U(this,vw,e==null?null:Xe(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=_(this,Ew);return e??(this.type===2||this.type===3?is:null)}set maxFeePerGas(e){U(this,Ew,e==null?null:Xe(e,"maxFeePerGas"))}get data(){return _(this,mw)}set data(e){U(this,mw,Me(e))}get value(){return _(this,_w)}set value(e){U(this,_w,Xe(e,"value"))}get chainId(){return _(this,Cw)}set chainId(e){U(this,Cw,Xe(e))}get signature(){return _(this,Aw)||null}set signature(e){U(this,Aw,e==null?null:oo.from(e))}get accessList(){const e=_(this,Sw)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){U(this,Sw,e==null?null:cm(e))}get authorizationList(){const e=_(this,Iw)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){U(this,Iw,e==null?null:e.map(n=>Gee(n)))}get maxFeePerBlobGas(){const e=_(this,jp);return e==null&&this.type===3?is:e}set maxFeePerBlobGas(e){U(this,jp,e==null?null:Xe(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=_(this,sh);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){Q(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)Q(Yn(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}U(this,sh,e)}get blobs(){return _(this,ih)==null?null:_(this,ih).map(e=>Object.assign({},e))}set blobs(e){if(e==null){U(this,ih,null);return}const n=[],r=[];for(let s=0;s<e.length;s++){const i=e[s];if(_U(i)){ye(_(this,tl),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=zt(i);if(Q(o.length<=RO,"blob is too large",`blobs[${s}]`,i),o.length!==RO){const l=new Uint8Array(RO);l.set(o),o=l}const a=_(this,tl).blobToKzgCommitment(o),c=Me(_(this,tl).computeBlobKzgProof(o,a));n.push({data:Me(o),commitment:Me(a),proof:c}),r.push(E7(1,a))}else{const o=Me(i.commitment);n.push({data:Me(i.data),commitment:o,proof:Me(i.proof)}),r.push(E7(1,o))}}U(this,ih,n),U(this,sh,r)}get kzg(){return _(this,tl)}set kzg(e){e==null?U(this,tl,null):U(this,tl,nWe(e))}get hash(){return this.signature==null?null:kr(fe(this,xw,ES).call(this,!0,!1))}get unsignedHash(){return kr(this.unsignedSerialized)}get from(){return this.signature==null?null:Qze(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:F_.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return fe(this,xw,ES).call(this,!0,!0)}get unsignedSerialized(){return fe(this,xw,ES).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=_(this,jp)!=null||_(this,sh);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&ye(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),ye(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),ye(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Yc.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new Yc;if(typeof e=="string"){const r=zt(e);if(r[0]>=127)return Yc.from(oWe(r));switch(r[0]){case 1:return Yc.from(uWe(r));case 2:return Yc.from(cWe(r));case 3:return Yc.from(hWe(r));case 4:return Yc.from(pWe(r))}ye(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new Yc;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=oo.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(Q(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),Q(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(Q(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),Q(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};rc=new WeakMap,gw=new WeakMap,mw=new WeakMap,yw=new WeakMap,ww=new WeakMap,bw=new WeakMap,vw=new WeakMap,Ew=new WeakMap,_w=new WeakMap,Cw=new WeakMap,Aw=new WeakMap,Sw=new WeakMap,jp=new WeakMap,sh=new WeakMap,tl=new WeakMap,ih=new WeakMap,Iw=new WeakMap,xw=new WeakSet,ES=function(e,n){ye(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return aWe(this,r);case 1:return dWe(this,r);case 2:return lWe(this,r);case 3:return fWe(this,r,n?this.blobs:null);case 4:return gWe(this,r)}ye(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let ix=Yc;function Ug(t){return kr(zu(t))}var mWe="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const _7=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),C7=4;function yWe(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),s=1,i=[0,1];for(let C=1;C<r;C++)i.push(s+=n());let o=n(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const d=31,h=2**d,f=h>>>1,p=f>>1,g=h-1;let y=0;for(let C=0;C<d;C++)y=y<<1|u();let m=[],w=0,v=h;for(;;){let C=Math.floor(((y-w+1)*s-1)/v),S=0,x=r;for(;x-S>1;){let k=S+x>>>1;C<i[k]?x=k:S=k}if(S==0)break;m.push(S);let T=w+Math.floor(v*i[S]/s),I=w+Math.floor(v*i[S+1]/s)-1;for(;!((T^I)&f);)y=y<<1&g|u(),T=T<<1&g,I=I<<1&g|1;for(;T&~I&p;)y=y&f|y<<1&g>>>1|u(),T=T<<1^f,I=(I^f)<<1|f|1;w=T,v=1+I-T}let A=r-4;return m.map(C=>{switch(C-A){case 3:return A+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return A+256+(t[a++]<<8|t[a++]);case 1:return A+t[a++];default:return C-1}})}function wWe(t){let e=0;return()=>t[e++]}function qee(t){return wWe(yWe(bWe(t)))}function bWe(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let n=t.length,r=new Uint8Array(6*n>>3);for(let s=0,i=0,o=0,a=0;s<n;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(r[i++]=a>>(o-=8));return r}function vWe(t){return t&1?~t>>1:t>>1}function EWe(t,e){let n=Array(t);for(let r=0,s=0;r<t;r++)n[r]=s+=vWe(e());return n}function j_(t,e=0){let n=[];for(;;){let r=t(),s=t();if(!s)break;e+=r;for(let i=0;i<s;i++)n.push(e+i);e+=s+1}return n}function Vee(t){return z_(()=>{let e=j_(t);if(e.length)return e})}function Kee(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(_We(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(CWe(n,t))}return e.flat()}function z_(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function Yee(t,e,n){let r=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)EWe(t,n).forEach((i,o)=>r[o].push(i));return r}function _We(t,e){let n=1+e(),r=e(),s=z_(e);return Yee(s.length,1+t,e).flatMap((o,a)=>{let[c,...l]=o;return Array(s[a]).fill().map((u,d)=>{let h=d*r;return[c+d*n,l.map(f=>f+h)]})})}function CWe(t,e){let n=1+e();return Yee(n,1+t,e).map(s=>[s[0],s.slice(1)])}function AWe(t){let e=[],n=j_(t);return s(r([]),[]),e;function r(i){let o=t(),a=z_(()=>{let c=j_(t).map(l=>n[l]);if(c.length)return r(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let l of o)for(let u of l.Q)s(l,[...a,u],c)}}}function SWe(t){return t.toString(16).toUpperCase().padStart(2,"0")}function Qee(t){return`{${SWe(t)}}`}function IWe(t){let e=[];for(let n=0,r=t.length;n<r;){let s=t.codePointAt(n);n+=s<65536?1:2,e.push(s)}return e}function k0(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let s=0;s<n;)r.push(String.fromCodePoint(...t.slice(s,s+=4096)));return r.join("")}function xWe(t,e){let n=t.length,r=n-e.length;for(let s=0;r==0&&s<n;s++)r=t[s]-e[s];return r}var NWe="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const W_=44032,ox=4352,ax=4449,cx=4519,Jee=19,Zee=21,D0=28,lx=Zee*D0,TWe=Jee*lx,RWe=W_+TWe,PWe=ox+Jee,OWe=ax+Zee,kWe=cx+D0;function Av(t){return t>>24&255}function Xee(t){return t&16777215}let M3,A7,U3,_S;function DWe(){let t=qee(NWe);M3=new Map(Vee(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),A7=new Set(j_(t)),U3=new Map,_S=new Map;for(let[e,n]of Kee(t)){if(!A7.has(e)&&n.length==2){let[r,s]=n,i=_S.get(r);i||(i=new Map,_S.set(r,i)),i.set(s,e)}U3.set(e,n.reverse())}}function ete(t){return t>=W_&&t<RWe}function LWe(t,e){if(t>=ox&&t<PWe&&e>=ax&&e<OWe)return W_+(t-ox)*lx+(e-ax)*D0;if(ete(t)&&e>cx&&e<kWe&&(t-W_)%D0==0)return t+(e-cx);{let n=_S.get(t);return n&&(n=n.get(e),n)?n:-1}}function tte(t){M3||DWe();let e=[],n=[],r=!1;function s(i){let o=M3.get(i);o&&(r=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(ete(i)){let o=i-W_,a=o/lx|0,c=o%lx/D0|0,l=o%D0;s(ox+a),s(ax+c),l>0&&s(cx+l)}else{let o=U3.get(i);o?n.push(...o):s(i)}if(!n.length)break;i=n.pop()}if(r&&e.length>1){let i=Av(e[0]);for(let o=1;o<e.length;o++){let a=Av(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(i=Av(e[--c]),i<=a))break}i=Av(e[o])}}return e}function MWe(t){let e=[],n=[],r=-1,s=0;for(let i of t){let o=Av(i),a=Xee(i);if(r==-1)o==0?r=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),s=o;else{let c=LWe(r,a);c>=0?r=c:s==0&&o==0?(e.push(r),r=a):(n.push(a),s=o)}}return r>=0&&e.push(r,...n),e}function nte(t){return tte(t).map(Xee)}function UWe(t){return MWe(tte(t))}const S7=45,rte=".",ste=65039,ite=1,ux=t=>Array.from(t);function H_(t,e){return t.P.has(e)||t.Q.has(e)}class $We extends Array{get is_emoji(){return!0}}let $3,ote,bp,B3,ate,Hy,PO,ey,Gf,I7,F3;function kU(){if($3)return;let t=qee(mWe);const e=()=>j_(t),n=()=>new Set(e()),r=(u,d)=>d.forEach(h=>u.add(h));$3=new Map(Kee(t)),ote=n(),bp=e(),B3=new Set(e().map(u=>bp[u])),bp=new Set(bp),ate=n(),n();let s=Vee(t),i=t();const o=()=>{let u=new Set;return e().forEach(d=>r(u,s[d])),r(u,e()),u};Hy=z_(u=>{let d=z_(t).map(h=>h+96);if(d.length){let h=u>=i;d[0]-=32,d=k0(d),h&&(d=`Restricted[${d}]`);let f=o(),p=o(),g=!t();return{N:d,P:f,Q:p,M:g,R:h}}}),PO=n(),ey=new Map;let a=e().concat(ux(PO)).sort((u,d)=>u-d);a.forEach((u,d)=>{let h=t(),f=a[d]=h?a[d-h]:{V:[],M:new Map};f.V.push(u),PO.has(u)||ey.set(u,f)});for(let{V:u,M:d}of new Set(ey.values())){let h=[];for(let p of u){let g=Hy.filter(m=>H_(m,p)),y=h.find(({G:m})=>g.some(w=>m.has(w)));y||(y={G:new Set,V:[]},h.push(y)),y.V.push(p),r(y.G,g)}let f=h.flatMap(p=>ux(p.G));for(let{G:p,V:g}of h){let y=new Set(f.filter(m=>!p.has(m)));for(let m of g)d.set(m,y)}}Gf=new Set;let c=new Set;const l=u=>Gf.has(u)?c.add(u):Gf.add(u);for(let u of Hy){for(let d of u.P)l(d);for(let d of u.Q)l(d)}for(let u of Gf)!ey.has(u)&&!c.has(u)&&ey.set(u,ite);r(Gf,nte(Gf)),I7=AWe(t).map(u=>$We.from(u)).sort(xWe),F3=new Map;for(let u of I7){let d=[F3];for(let h of u){let f=d.map(p=>{let g=p.get(h);return g||(g=new Map,p.set(h,g)),g});h===ste?d.push(...f):d=f}for(let h of d)h.V=u}}function DU(t){return(cte(t)?"":`${LU(vT([t]))} `)+Qee(t)}function LU(t){return`"${t}"‎`}function BWe(t){if(t.length>=4&&t[2]==S7&&t[3]==S7)throw new Error(`invalid label extension: "${k0(t.slice(0,4))}"`)}function FWe(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function jWe(t){let e=t[0],n=_7.get(e);if(n)throw oE(`leading ${n}`);let r=t.length,s=-1;for(let i=1;i<r;i++){e=t[i];let o=_7.get(e);if(o){if(s==i)throw oE(`${n} + ${o}`);s=i+1,n=o}}if(s==r)throw oE(`trailing ${n}`)}function vT(t,e=1/0,n=Qee){let r=[];zWe(t[0])&&r.push("◌"),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];cte(a)&&(r.push(k0(t.slice(s,o))),r.push(n(a)),s=o+1)}return r.push(k0(t.slice(s,i))),r.join("")}function zWe(t){return kU(),bp.has(t)}function cte(t){return kU(),ate.has(t)}function WWe(t){return VWe(HWe(t,UWe,QWe))}function HWe(t,e,n){if(!t)return[];kU();let r=0;return t.split(rte).map(s=>{let i=IWe(s),o={input:i,offset:r};r+=i.length+1;try{let a=o.tokens=YWe(i,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(FWe(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(h=>h<128))BWe(u),l="ASCII";else{let h=a.flatMap(f=>f.is_emoji?[]:f);if(!h.length)l="Emoji";else{if(bp.has(u[0]))throw oE("leading combining mark");for(let g=1;g<c;g++){let y=a[g];if(!y.is_emoji&&bp.has(y[0]))throw oE(`emoji + combining mark: "${k0(a[g-1])} + ${vT([y[0]])}"`)}jWe(u);let f=ux(new Set(h)),[p]=qWe(f);KWe(p,h),GWe(p,f),l=p.N}}o.type=l}catch(a){o.error=a}return o})}function GWe(t,e){let n,r=[];for(let s of e){let i=ey.get(s);if(i===ite)return;if(i){let o=i.M.get(s);if(n=n?n.filter(a=>o.has(a)):ux(o),!n.length)return}else r.push(s)}if(n){for(let s of n)if(r.every(i=>H_(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function qWe(t){let e=Hy;for(let n of t){let r=e.filter(s=>H_(s,n));if(!r.length)throw Hy.some(s=>H_(s,n))?ute(e[0],n):lte(n);if(e=r,r.length==1)break}return e}function VWe(t){return t.map(({input:e,error:n,output:r})=>{if(n){let s=n.message;throw new Error(t.length==1?s:`Invalid label ${LU(vT(e,63))}: ${s}`)}return k0(r)}).join(rte)}function lte(t){return new Error(`disallowed character: ${DU(t)}`)}function ute(t,e){let n=DU(e),r=Hy.find(s=>s.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function oE(t){return new Error(`illegal placement: ${t}`)}function KWe(t,e){for(let n of e)if(!H_(t,n))throw ute(t,n);if(t.M){let n=nte(e);for(let r=1,s=n.length;r<s;r++)if(B3.has(n[r])){let i=r+1;for(let o;i<s&&B3.has(o=n[i]);i++)for(let a=r;a<i;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${DU(o)}`);if(i-r>C7)throw new Error(`excessive non-spacing marks: ${LU(vT(n.slice(r-1,i)))} (${i-r}/${C7})`);r=i}}}function YWe(t,e,n){let r=[],s=[];for(t=t.slice().reverse();t.length;){let i=JWe(t);if(i)s.length&&(r.push(e(s)),s=[]),r.push(n(i));else{let o=t.pop();if(Gf.has(o))s.push(o);else{let a=$3.get(o);if(a)s.push(...a);else if(!ote.has(o))throw lte(o)}}}return s.length&&r.push(e(s)),r}function QWe(t){return t.filter(e=>e!=ste)}function JWe(t,e){let n=F3,r,s=t.length;for(;s&&(n=n.get(t[--s]),!!n);){let{V:i}=n;i&&(r=i,t.length=s)}return r}const dte=new Uint8Array(32);dte.fill(0);function x7(t){return Q(t.length!==0,"invalid ENS name; empty component","comp",t),t}function hte(t){const e=zu(ZWe(t)),n=[];if(t.length===0)return n;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(n.push(x7(e.slice(r,s))),r=s+1);return Q(r<e.length,"invalid ENS name; empty component","name",t),n.push(x7(e.slice(r))),n}function ZWe(t){try{if(t.length===0)throw new Error("empty label");return WWe(t)}catch(e){Q(!1,`invalid ENS name (${e.message})`,"name",t)}}function j3(t){Q(typeof t=="string","invalid ENS name; not a string","name",t),Q(t.length,"invalid ENS name (empty label)","name",t);let e=dte;const n=hte(t);for(;n.length;)e=kr(Er([e,kr(n.pop())]));return Me(e)}function XWe(t,e){const n=e;return Q(n<=255,"DNS encoded label cannot exceed 255","length",n),Me(Er(hte(t).map(r=>{Q(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const fte=new Uint8Array(32);fte.fill(0);const eHe=BigInt(-1),pte=BigInt(0),gte=BigInt(1),tHe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function nHe(t){const e=zt(t),n=e.length%32;return n?Er([e,fte.slice(n)]):Me(e)}const rHe=uf(gte,32),sHe=uf(pte,32),N7={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},OO=["name","version","chainId","verifyingContract","salt"];function T7(t){return function(e){return Q(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const iHe={name:T7("name"),version:T7("version"),chainId:function(t){const e=Xe(t,"domain.chainId");return Q(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):uc(e)},verifyingContract:function(t){try{return vn(t).toLowerCase()}catch{}Q(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=zt(t,"domain.salt");return Q(e.length===32,'invalid domain value "salt"',"domain.salt",t),Me(e)}};function kO(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);Q(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const s=_v(tHe,n?r-1:r),i=n?(s+gte)*eHe:pte;return function(o){const a=Xe(o,"value");return Q(a>=i&&a<=s,`value out-of-bounds for ${t}`,"value",a),uf(n?tee(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return Q(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const s=zt(r);return Q(s.length===n,`invalid length for ${t}`,"value",r),nHe(r)}}}switch(t){case"address":return function(e){return td(vn(e),32)};case"bool":return function(e){return e?rHe:sHe};case"bytes":return function(e){return kr(e)};case"string":return function(e){return Ug(e)}}return null}function R7(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function OA(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var nC,bu,Nw,mx,mte;const ca=class ca{constructor(e){K(this,mx);ne(this,"primaryType");K(this,nC);K(this,bu);K(this,Nw);U(this,bu,new Map),U(this,Nw,new Map);const n=new Map,r=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:l,type:u})=>{let{base:d,index:h}=OA(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:l,type:d+(h||"")}}),n.set(c,new Set),r.set(c,[]),s.set(c,new Set)}),U(this,nC,JSON.stringify(i));for(const c in i){const l=new Set;for(const u of i[c]){Q(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const d=OA(u.type).base;Q(d!==c,`circular type reference to ${JSON.stringify(d)}`,"types",e),!kO(d)&&(Q(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),r.get(d).push(c),n.get(c).add(d))}}const o=Array.from(r.keys()).filter(c=>r.get(c).length===0);Q(o.length!==0,"missing primary type","types",e),Q(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),gt(this,{primaryType:o[0]});function a(c,l){Q(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of n.get(c))if(r.has(u)){a(u,l);for(const d of l)s.get(d).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of s){const u=Array.from(l);u.sort(),_(this,bu).set(c,R7(c,i[c])+u.map(d=>R7(d,i[d])).join(""))}}get types(){return JSON.parse(_(this,nC))}getEncoder(e){let n=_(this,Nw).get(e);return n||(n=fe(this,mx,mte).call(this,e),_(this,Nw).set(e,n)),n}encodeType(e){const n=_(this,bu).get(e);return Q(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return kr(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(kO(e))return r(e,n);const s=OA(e).array;if(s)return Q(s.count===-1||s.count===n.length,`array length mismatch; expected length ${s.count}`,"value",n),n.map(o=>this._visit(s.prefix,o,r));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,n[a],r),o),{});Q(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new ca(e)}static getPrimaryType(e){return ca.from(e).primaryType}static hashStruct(e,n,r){return ca.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const s=N7[r];Q(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:s})}return n.sort((r,s)=>OO.indexOf(r.name)-OO.indexOf(s.name)),ca.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return Er(["0x1901",ca.hashDomain(e),ca.from(n).hash(r)])}static hash(e,n,r){return kr(ca.encode(e,n,r))}static async resolveNames(e,n,r,s){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!Yn(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=ca.from(n);o.visit(r,(a,c)=>(a==="address"&&!Yn(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:r}}static getPayload(e,n,r){ca.hashDomain(e);const s={},i=[];OO.forEach(c=>{const l=e[c];l!=null&&(s[c]=iHe[c](l),i.push({name:c,type:N7[c]}))});const o=ca.from(n);n=o.types;const a=Object.assign({},n);return Q(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(r),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return Me(zt(l));if(c.match(/^u?int/))return Xe(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return Q(typeof l=="string","invalid string","value",l),l}Q(!1,"unsupported type","type",c)})}}};nC=new WeakMap,bu=new WeakMap,Nw=new WeakMap,mx=new WeakSet,mte=function(e){{const s=kO(e);if(s)return s}const n=OA(e).array;if(n){const s=n.prefix,i=this.getEncoder(s);return o=>{Q(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return _(this,bu).has(s)&&(a=a.map(kr)),kr(Er(a))}}const r=this.types[e];if(r){const s=Ug(_(this,bu).get(e));return i=>{const o=r.map(({name:a,type:c})=>{const l=this.getEncoder(c)(i[a]);return _(this,bu).has(c)?kr(l):l});return o.unshift(s),Er(o)}}Q(!1,`unknown type: ${e}`,"type",e)};let dx=ca;function wi(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const oHe="external public payable override",aHe=wi(oHe.split(" ")),yte="constant external internal payable private public pure view override",cHe=wi(yte.split(" ")),wte="constructor error event fallback function receive struct",bte=wi(wte.split(" ")),vte="calldata memory storage payable indexed",lHe=wi(vte.split(" ")),uHe="tuple returns",dHe=[wte,vte,uHe,yte].join(" "),hHe=wi(dHe.split(" ")),fHe={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},pHe=new RegExp("^(\\s*)"),gHe=new RegExp("^([0-9]+)"),mHe=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Ete=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),_te=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var As,sc,rC,z3;const yx=class yx{constructor(e){K(this,rC);K(this,As);K(this,sc);U(this,As,0),U(this,sc,e.slice())}get offset(){return _(this,As)}get length(){return _(this,sc).length-_(this,As)}clone(){return new yx(_(this,sc))}reset(){U(this,As,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=fe(this,rC,z3).call(this,_(this,As)+1,e.match+1);return U(this,As,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;_(this,As)<e.match-1;){const r=this.peek().linkNext;n.push(fe(this,rC,z3).call(this,_(this,As)+1,r)),U(this,As,r)}return U(this,As,e.match+1),n}peek(){if(_(this,As)>=_(this,sc).length)throw new Error("out-of-bounds");return _(this,sc)[_(this,As)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return ld(this,As)._++,e}toString(){const e=[];for(let n=_(this,As);n<_(this,sc).length;n++){const r=_(this,sc)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};As=new WeakMap,sc=new WeakMap,rC=new WeakSet,z3=function(e=0,n=0){return new yx(_(this,sc).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let Tc=yx;function vf(t){const e=[],n=o=>{const a=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let r=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(pHe);a&&(i+=a[1].length,o=t.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=fHe[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,l==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const d=e.pop().text;u=d+u,e[e.length-1].value=Wt(d)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(mHe),a){if(c.text=a[1],i+=c.text.length,hHe.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(_te)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(gHe),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Tc(e.map(o=>Object.freeze(o)))}function P7(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function ET(t,e){if(e.peekKeyword(bte)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function nd(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function Cte(t){let e=nd(t,cHe);return P7(e,wi("constant payable nonpayable".split(" "))),P7(e,wi("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Wu(t,e){return t.popParams().map(n=>ks.from(n,e))}function Ate(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Xe(t.pop().text);throw new Error("invalid gas")}return null}function $g(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const yHe=new RegExp(/^(.*)\[([0-9]*)\]$/);function O7(t){const e=t.match(_te);if(Q(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);Q(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);Q(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const ur={},lo=Symbol.for("_ethers_internal"),k7="_ParamTypeInternal",D7="_ErrorInternal",L7="_EventInternal",M7="_ConstructorInternal",U7="_FallbackInternal",$7="_FunctionInternal",B7="_StructInternal";var Tw,CS;const la=class la{constructor(e,n,r,s,i,o,a,c){K(this,Tw);ne(this,"name");ne(this,"type");ne(this,"baseType");ne(this,"indexed");ne(this,"components");ne(this,"arrayLength");ne(this,"arrayChildren");if(dT(e,ur,"ParamType"),Object.defineProperty(this,lo,{value:k7}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");gt(this,{name:n,type:r,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],s=[e];return fe(this,Tw,CS).call(this,r,e,n,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,n){if(la.isParamType(e))return e;if(typeof e=="string")try{return la.from(vf(e),n)}catch{Q(!1,"invalid param type","obj",e)}else if(e instanceof Tc){let a="",c="",l=null;nd(e,wi(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(g=>la.from(g)),a=`tuple(${l.map(g=>g.format()).join(",")})`):(a=O7(e.popType("TYPE")),c=a);let u=null,d=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();u=new la(ur,"",a,c,null,l,d,u),d=g.value,a+=g.text,c="array",l=null}let h=null;if(nd(e,lHe).has("indexed")){if(!n)throw new Error("");h=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new la(ur,p,a,c,h,l,d,u)}const r=e.name;Q(!r||typeof r=="string"&&r.match(Ete),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(Q(n,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(yHe);if(o){const a=parseInt(o[2]||"-1"),c=la.from({type:o[1],components:e.components});return new la(ur,r||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(l=>la.from(l)):null;return new la(ur,r||"",i,"tuple",s,a,null,null)}return i=O7(e.type),new la(ur,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[lo]===k7}};Tw=new WeakSet,CS=function(e,n,r,s){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((c,l)=>{var u;fe(u=o,Tw,CS).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{var u;fe(u=o[l],Tw,CS).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}const i=r(this.type,n);i.then?e.push(async function(){s(await i)}()):s(i)};let ks=la;class Bg{constructor(e,n,r){ne(this,"type");ne(this,"inputs");dT(e,ur,"Fragment"),r=Object.freeze(r.slice()),gt(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{Bg.from(JSON.parse(e))}catch{}return Bg.from(vf(e))}if(e instanceof Tc)switch(e.peekKeyword(bte)){case"constructor":return Du.from(e);case"error":return Yi.from(e);case"event":return wl.from(e);case"fallback":case"receive":return hu.from(e);case"function":return bl.from(e);case"struct":return og.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Du.from(e);case"error":return Yi.from(e);case"event":return wl.from(e);case"fallback":case"receive":return hu.from(e);case"function":return bl.from(e);case"struct":return og.from(e)}ye(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}Q(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Du.isFragment(e)}static isError(e){return Yi.isFragment(e)}static isEvent(e){return wl.isFragment(e)}static isFunction(e){return bl.isFragment(e)}static isStruct(e){return og.isFragment(e)}}class _T extends Bg{constructor(n,r,s,i){super(n,r,i);ne(this,"name");Q(typeof s=="string"&&s.match(Ete),"invalid identifier","name",s),i=Object.freeze(i.slice()),gt(this,{name:s})}}function G_(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class Yi extends _T{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,lo,{value:D7})}get selector(){return Ug(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+G_(e,this.inputs)),n.join(" ")}static from(e){if(Yi.isFragment(e))return e;if(typeof e=="string")return Yi.from(vf(e));if(e instanceof Tc){const n=ET("error",e),r=Wu(e);return $g(e),new Yi(ur,n,r)}return new Yi(ur,e.name,e.inputs?e.inputs.map(ks.from):[])}static isFragment(e){return e&&e[lo]===D7}}class wl extends _T{constructor(n,r,s,i){super(n,"event",r,s);ne(this,"anonymous");Object.defineProperty(this,lo,{value:L7}),gt(this,{anonymous:i})}get topicHash(){return Ug(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+G_(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(i=>ks.from(i)),new wl(ur,n,r,!1).topicHash}static from(n){if(wl.isFragment(n))return n;if(typeof n=="string")try{return wl.from(vf(n))}catch{Q(!1,"invalid event fragment","obj",n)}else if(n instanceof Tc){const r=ET("event",n),s=Wu(n,!0),i=!!nd(n,wi(["anonymous"])).has("anonymous");return $g(n),new wl(ur,r,s,i)}return new wl(ur,n.name,n.inputs?n.inputs.map(r=>ks.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[lo]===L7}}class Du extends Bg{constructor(n,r,s,i,o){super(n,r,s);ne(this,"payable");ne(this,"gas");Object.defineProperty(this,lo,{value:M7}),gt(this,{payable:i,gas:o})}format(n){if(ye(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[`constructor${G_(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(Du.isFragment(n))return n;if(typeof n=="string")try{return Du.from(vf(n))}catch{Q(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof Tc){nd(n,wi(["constructor"]));const r=Wu(n),s=!!nd(n,aHe).has("payable"),i=Ate(n);return $g(n),new Du(ur,"constructor",r,s,i)}return new Du(ur,"constructor",n.inputs?n.inputs.map(ks.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[lo]===M7}}class hu extends Bg{constructor(n,r,s){super(n,"fallback",r);ne(this,"payable");Object.defineProperty(this,lo,{value:U7}),gt(this,{payable:s})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(n){if(hu.isFragment(n))return n;if(typeof n=="string")try{return hu.from(vf(n))}catch{Q(!1,"invalid fallback fragment","obj",n)}else if(n instanceof Tc){const r=n.toString(),s=n.peekKeyword(wi(["fallback","receive"]));if(Q(s,"type must be fallback or receive","obj",r),n.popKeyword(wi(["fallback","receive"]))==="receive"){const c=Wu(n);return Q(c.length===0,"receive cannot have arguments","obj.inputs",c),nd(n,wi(["payable"])),$g(n),new hu(ur,[],!0)}let o=Wu(n);o.length?Q(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[ks.from("bytes")];const a=Cte(n);if(Q(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),nd(n,wi(["returns"])).has("returns")){const c=Wu(n);Q(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return $g(n),new hu(ur,o,a==="payable")}if(n.type==="receive")return new hu(ur,[],!0);if(n.type==="fallback"){const r=[ks.from("bytes")],s=n.stateMutability==="payable";return new hu(ur,r,s)}Q(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[lo]===U7}}class bl extends _T{constructor(n,r,s,i,o,a){super(n,"function",r,i);ne(this,"constant");ne(this,"outputs");ne(this,"stateMutability");ne(this,"payable");ne(this,"gas");Object.defineProperty(this,lo,{value:$7}),o=Object.freeze(o.slice()),gt(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return Ug(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n))),outputs:this.outputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+G_(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(G_(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(i=>ks.from(i)),new bl(ur,n,"view",r,[],null).selector}static from(n){if(bl.isFragment(n))return n;if(typeof n=="string")try{return bl.from(vf(n))}catch{Q(!1,"invalid function fragment","obj",n)}else if(n instanceof Tc){const s=ET("function",n),i=Wu(n),o=Cte(n);let a=[];nd(n,wi(["returns"])).has("returns")&&(a=Wu(n));const c=Ate(n);return $g(n),new bl(ur,s,o,i,a,c)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new bl(ur,n.name,r,n.inputs?n.inputs.map(ks.from):[],n.outputs?n.outputs.map(ks.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[lo]===$7}}class og extends _T{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,lo,{value:B7})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return og.from(vf(e))}catch{Q(!1,"invalid struct fragment","obj",e)}else if(e instanceof Tc){const n=ET("struct",e),r=Wu(e);return $g(e),new og(ur,n,r)}return new og(ur,e.name,e.inputs?e.inputs.map(ks.from):[])}static isFragment(e){return e&&e[lo]===B7}}const Oc=new Map;Oc.set(0,"GENERIC_PANIC");Oc.set(1,"ASSERT_FALSE");Oc.set(17,"OVERFLOW");Oc.set(18,"DIVIDE_BY_ZERO");Oc.set(33,"ENUM_RANGE_ERROR");Oc.set(34,"BAD_STORAGE_DATA");Oc.set(49,"STACK_UNDERFLOW");Oc.set(50,"ARRAY_RANGE_ERROR");Oc.set(65,"OUT_OF_MEMORY");Oc.set(81,"UNINITIALIZED_FUNCTION_CALL");const wHe=new RegExp(/^bytes([0-9]*)$/),bHe=new RegExp(/^(u?int)([0-9]*)$/);let DO=null,F7=1024;function vHe(t,e,n,r){let s="missing revert data",i=null;const o=null;let a=null;if(n){s="execution reverted";const l=zt(n);if(n=Me(n),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(Me(l.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(Me(l.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},i=`Panic due to ${Oc.get(u)||"UNKNOWN"}(${u})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?vn(e.to):null,data:e.data||"0x"};return e.from&&(c.from=vn(e.from)),rr(s,"CALL_EXCEPTION",{action:t,data:n,reason:i,transaction:c,invocation:o,revert:a})}var oh,ty;const wx=class wx{constructor(){K(this,oh)}getDefaultValue(e){const n=e.map(s=>fe(this,oh,ty).call(this,ks.from(s)));return new PA(n,"_").defaultValue()}encode(e,n){ZX(n.length,e.length,"types/values length mismatch");const r=e.map(o=>fe(this,oh,ty).call(this,ks.from(o))),s=new PA(r,"_"),i=new N3;return s.encode(i,n),i.data}decode(e,n,r){const s=e.map(o=>fe(this,oh,ty).call(this,ks.from(o)));return new PA(s,"_").decode(new T3(n,r,F7))}static _setDefaultMaxInflation(e){Q(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),F7=e}static defaultAbiCoder(){return DO==null&&(DO=new wx),DO}static getBuiltinCallException(e,n,r){return vHe(e,n,r,wx.defaultAbiCoder())}};oh=new WeakSet,ty=function(e){if(e.isArray())return new $ze(fe(this,oh,ty).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new PA(e.components.map(r=>fe(this,oh,ty).call(this,r)),e.name);switch(e.baseType){case"address":return new Mze(e.name);case"bool":return new Bze(e.name);case"string":return new Kze(e.name);case"bytes":return new Fze(e.name);case"":return new Wze(e.name)}let n=e.type.match(bHe);if(n){let r=parseInt(n[2]||"256");return Q(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new Vze(r/8,n[1]==="int",e.name)}if(n=e.type.match(wHe),n){let r=parseInt(n[1]);return Q(r!==0&&r<=32,"invalid bytes length","param",e),new jze(r,e.name)}Q(!1,"invalid type","type",e.type)};let q_=wx;class EHe{constructor(e,n,r){ne(this,"fragment");ne(this,"name");ne(this,"signature");ne(this,"topic");ne(this,"args");const s=e.name,i=e.format();gt(this,{fragment:e,name:s,signature:i,topic:n,args:r})}}class _He{constructor(e,n,r,s){ne(this,"fragment");ne(this,"name");ne(this,"args");ne(this,"signature");ne(this,"selector");ne(this,"value");const i=e.name,o=e.format();gt(this,{fragment:e,name:i,args:r,signature:o,selector:n,value:s})}}class CHe{constructor(e,n,r){ne(this,"fragment");ne(this,"name");ne(this,"args");ne(this,"signature");ne(this,"selector");const s=e.name,i=e.format();gt(this,{fragment:e,name:s,args:r,signature:i,selector:n})}}class j7{constructor(e){ne(this,"hash");ne(this,"_isIndexed");gt(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const z7={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},W7={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&z7[t.toString()]&&(e=z7[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var nl,rl,sl,Gs,Tl,AS,SS;const np=class np{constructor(e){K(this,Tl);ne(this,"fragments");ne(this,"deploy");ne(this,"fallback");ne(this,"receive");K(this,nl);K(this,rl);K(this,sl);K(this,Gs);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,U(this,sl,new Map),U(this,nl,new Map),U(this,rl,new Map);const r=[];for(const o of n)try{r.push(Bg.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}gt(this,{fragments:Object.freeze(r)});let s=null,i=!1;U(this,Gs,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}gt(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(Q(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=_(this,sl);break;case"event":c=_(this,rl);break;case"error":c=_(this,nl);break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||gt(this,{deploy:Du.from("constructor()")}),gt(this,{fallback:s,receive:i})}format(e){const n=e?"minimal":"full";return this.fragments.map(s=>s.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return q_.defaultAbiCoder()}getFunctionName(e){const n=fe(this,Tl,AS).call(this,e,null,!1);return Q(n,"no matching function","key",e),n.name}hasFunction(e){return!!fe(this,Tl,AS).call(this,e,null,!1)}getFunction(e,n){return fe(this,Tl,AS).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(_(this,sl).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,sl).get(s),r)}}getEventName(e){const n=fe(this,Tl,SS).call(this,e,null,!1);return Q(n,"no matching event","key",e),n.name}hasEvent(e){return!!fe(this,Tl,SS).call(this,e,null,!1)}getEvent(e,n){return fe(this,Tl,SS).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(_(this,rl).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,rl).get(s),r)}}getError(e,n){if(Yn(e)){const s=e.toLowerCase();if(W7[s])return Yi.from(W7[s].signature);for(const i of _(this,nl).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of _(this,nl))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?Yi.from("error Error(string)"):e==="Panic"?Yi.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");Q(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=Yi.from(e).format(),e==="Error(string)")return Yi.from("error Error(string)");if(e==="Panic(uint256)")return Yi.from("error Panic(uint256)");const r=_(this,nl).get(e);return r||null}forEachError(e){const n=Array.from(_(this,nl).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,nl).get(s),r)}}_decodeParams(e,n){return _(this,Gs).decode(e,n)}_encodeParams(e,n){return _(this,Gs).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);Q(r,"unknown error","fragment",e),e=r}return Q(yr(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,yr(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);Q(r,"unknown error","fragment",e),e=r}return Er([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return Q(yr(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,yr(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return Er([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const i=this.getFunction(e);Q(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=fi(n);if(s.length%32===0)try{return _(this,Gs).decode(e.outputs,s)}catch{r="could not decode result data"}ye(!1,r,"BAD_DATA",{value:Me(s),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=zt(e,"data"),s=q_.getBuiltinCallException("call",n,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=Me(r.slice(0,4)),c=this.getError(a);if(c)try{const l=_(this,Gs).decode(c.inputs,r.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return Me(_(this,Gs).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const i=this.getEvent(e);Q(i,"unknown event","eventFragment",e),e=i}ye(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,o)=>i.type==="string"?Ug(o):i.type==="bytes"?kr(Me(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=uf(o):i.type.match(/^bytes/)?o=W9e(o,32):i.type==="address"&&_(this,Gs).encode(["address"],[o]),td(Me(o),32));for(n.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){Q(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?Q(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?r.push(i.map(c=>s(a,c))):r.push(s(a,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);Q(o,"unknown event","eventFragment",e),e=o}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),Q(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const c=n[a];if(o.indexed)if(o.type==="string")r.push(Ug(c));else if(o.type==="bytes")r.push(kr(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(_(this,Gs).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:_(this,Gs).encode(s,i),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const f=this.getEvent(e);Q(f,"unknown event","eventFragment",e),e=f}if(r!=null&&!e.anonymous){const f=e.topicHash;Q(Yn(r[0],32)&&r[0].toLowerCase()===f,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(ks.from({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});const a=r!=null?_(this,Gs).decode(s,Er(r)):null,c=_(this,Gs).decode(i,n,!0),l=[],u=[];let d=0,h=0;return e.inputs.forEach((f,p)=>{let g=null;if(f.indexed)if(a==null)g=new j7(null);else if(o[p])g=new j7(a[h++]);else try{g=a[h++]}catch(y){g=y}else try{g=c[d++]}catch(y){g=y}l.push(g),u.push(f.name||null)}),N0.fromItems(l,u)}parseTransaction(e){const n=zt(e.data,"tx.data"),r=Xe(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(Me(n.slice(0,4)));if(!s)return null;const i=_(this,Gs).decode(s.inputs,n.slice(4));return new _He(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new EHe(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=Me(e),r=this.getError(yr(n,0,4));if(!r)return null;const s=_(this,Gs).decode(r.inputs,yr(n,4));return new CHe(r,r.selector,s)}static from(e){return e instanceof np?e:typeof e=="string"?new np(JSON.parse(e)):typeof e.formatJson=="function"?new np(e.formatJson()):typeof e.format=="function"?new np(e.format("json")):new np(e)}};nl=new WeakMap,rl=new WeakMap,sl=new WeakMap,Gs=new WeakMap,Tl=new WeakSet,AS=function(e,n,r){if(Yn(e)){const i=e.toLowerCase();for(const o of _(this,sl).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of _(this,sl))o.split("(")[0]===e&&i.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,c=!0;Js.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=i.length-1;l>=0;l--){const u=i[l].inputs.length;u!==a&&(!c||u!==a-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const u=i[l].inputs;for(let d=0;d<n.length;d++)if(Js.isTyped(n[d])){if(d>=u.length){if(n[d].type==="overrides")continue;i.splice(l,1);break}if(n[d].type!==u[d].baseType){i.splice(l,1);break}}}}if(i.length===1&&n&&n.length!==i[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");Q(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=_(this,sl).get(bl.from(e).format());return s||null},SS=function(e,n,r){if(Yn(e)){const i=e.toLowerCase();for(const o of _(this,rl).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of _(this,rl))o.split("(")[0]===e&&i.push(a);if(n){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<n.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<n.length;c++)if(Js.isTyped(n[c])&&n[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");Q(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=_(this,rl).get(wl.from(e).format());return s||null};let W3=np;const Ste=BigInt(0);function Gy(t){return t??null}function Ar(t){return t==null?null:t.toString()}class H7{constructor(e,n,r){ne(this,"gasPrice");ne(this,"maxFeePerGas");ne(this,"maxPriorityFeePerGas");gt(this,{gasPrice:Gy(e),maxFeePerGas:Gy(n),maxPriorityFeePerGas:Gy(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Ar(e),maxFeePerGas:Ar(n),maxPriorityFeePerGas:Ar(r)}}}function hx(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=Me(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=Xe(t[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=Wt(t[s],`request.${s}`));return t.accessList&&(e.accessList=cm(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>_U(s)?Me(s):Object.assign({},s))),e}var vu;class AHe{constructor(e,n){ne(this,"provider");ne(this,"number");ne(this,"hash");ne(this,"timestamp");ne(this,"parentHash");ne(this,"parentBeaconBlockRoot");ne(this,"nonce");ne(this,"difficulty");ne(this,"gasLimit");ne(this,"gasUsed");ne(this,"stateRoot");ne(this,"receiptsRoot");ne(this,"blobGasUsed");ne(this,"excessBlobGas");ne(this,"miner");ne(this,"prevRandao");ne(this,"extraData");ne(this,"baseFeePerGas");K(this,vu);U(this,vu,e.transactions.map(r=>typeof r!="string"?new V_(r,n):r)),gt(this,{provider:n,hash:Gy(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Gy(e.prevRandao),extraData:e.extraData,baseFeePerGas:Gy(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return _(this,vu).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=_(this,vu).slice();return e.length===0?[]:(ye(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,timestamp:g,transactions:y}=this;return{_type:"Block",baseFeePerGas:Ar(e),difficulty:Ar(n),extraData:r,gasLimit:Ar(s),gasUsed:Ar(i),blobGasUsed:Ar(this.blobGasUsed),excessBlobGas:Ar(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,timestamp:g,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,transactions:y}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return _(this,vu).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=_(this,vu)[e];else{const r=e.toLowerCase();for(const s of _(this,vu))if(typeof s=="string"){if(s!==r)continue;n=s;break}else{if(s.hash!==r)continue;n=s;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;Q(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return SHe(this)}}vu=new WeakMap;class a1{constructor(e,n){ne(this,"provider");ne(this,"transactionHash");ne(this,"blockHash");ne(this,"blockNumber");ne(this,"removed");ne(this,"address");ne(this,"data");ne(this,"topics");ne(this,"index");ne(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());gt(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return ye(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return ye(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return ye(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return IHe(this)}}var sC;class Ite{constructor(e,n){ne(this,"provider");ne(this,"to");ne(this,"from");ne(this,"contractAddress");ne(this,"hash");ne(this,"index");ne(this,"blockHash");ne(this,"blockNumber");ne(this,"logsBloom");ne(this,"gasUsed");ne(this,"blobGasUsed");ne(this,"cumulativeGasUsed");ne(this,"gasPrice");ne(this,"blobGasPrice");ne(this,"type");ne(this,"status");ne(this,"root");K(this,sC);U(this,sC,Object.freeze(e.logs.map(s=>new a1(s,n))));let r=Ste;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),gt(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return _(this,sC)}toJSON(){const{to:e,from:n,contractAddress:r,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:Ar(this.cumulativeGasUsed),from:n,gasPrice:Ar(this.gasPrice),blobGasUsed:Ar(this.blobGasUsed),blobGasPrice:Ar(this.blobGasPrice),gasUsed:Ar(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:d,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Nte(this)}reorderedEvent(e){return ye(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),xte(this,e)}}sC=new WeakMap;var ah;const WU=class WU{constructor(e,n){ne(this,"provider");ne(this,"blockNumber");ne(this,"blockHash");ne(this,"index");ne(this,"hash");ne(this,"type");ne(this,"to");ne(this,"from");ne(this,"nonce");ne(this,"gasLimit");ne(this,"gasPrice");ne(this,"maxPriorityFeePerGas");ne(this,"maxFeePerGas");ne(this,"maxFeePerBlobGas");ne(this,"data");ne(this,"value");ne(this,"chainId");ne(this,"signature");ne(this,"accessList");ne(this,"blobVersionedHashes");ne(this,"authorizationList");K(this,ah);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,U(this,ah,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:s,type:i,to:o,from:a,nonce:c,data:l,signature:u,accessList:d,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:n,blobVersionedHashes:h,chainId:Ar(this.chainId),data:l,from:a,gasLimit:Ar(this.gasLimit),gasPrice:Ar(this.gasPrice),hash:s,maxFeePerGas:Ar(this.maxFeePerGas),maxPriorityFeePerGas:Ar(this.maxPriorityFeePerGas),maxFeePerBlobGas:Ar(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:r,type:i,value:Ar(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await li({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,s=n??0;let i=_(this,ah),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:h,nonce:f}=await li({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(f<this.nonce){i=h;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(o===-1&&(o=i-3,o<_(this,ah)&&(o=_(this,ah)));o<=h;){if(a)return null;const g=await this.provider.getBlock(o,!0);if(g==null)return;for(const y of g)if(y===this.hash)return;for(let y=0;y<g.length;y++){const m=await g.getTransaction(y);if(m.from===this.from&&m.nonce===this.nonce){if(a)return null;const w=await this.provider.getTransactionReceipt(m.hash);if(w==null||h-w.blockNumber+1<r)return;let v="replaced";m.data===this.data&&m.to===this.to&&m.value===this.value?v="repriced":m.data==="0x"&&m.from===m.to&&m.value===Ste&&(v="cancelled"),ye(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:v==="replaced"||v==="cancelled",reason:v,replacement:m.replaceableTransaction(i),hash:m.hash,receipt:w})}}o++}},l=h=>{if(h==null||h.status!==0)return h;ye(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:h.to,from:h.from,data:""},receipt:h})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(r===1||await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((h,f)=>{const p=[],g=()=>{p.forEach(m=>m())};if(p.push(()=>{a=!0}),s>0){const m=setTimeout(()=>{g(),f(rr("wait for transaction timeout","TIMEOUT"))},s);p.push(()=>{clearTimeout(m)})}const y=async m=>{if(await m.confirmations()>=r){g();try{h(l(m))}catch(w){f(w)}}};if(p.push(()=>{this.provider.off(this.hash,y)}),this.provider.on(this.hash,y),i>=0){const m=async()=>{try{await c()}catch(w){if(Ns(w,"TRANSACTION_REPLACED")){g(),f(w);return}}a||this.provider.once("block",m)};p.push(()=>{this.provider.off("block",m)}),this.provider.once("block",m)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return ye(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Nte(this)}reorderedEvent(e){return ye(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ye(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),xte(this,e)}replaceableTransaction(e){Q(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new WU(this,this.provider);return U(n,ah,e),n}};ah=new WeakMap;let V_=WU;function SHe(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function xte(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function Nte(t){return{orphan:"drop-transaction",tx:t}}function IHe(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class MU extends a1{constructor(n,r,s){super(n,n.provider);ne(this,"interface");ne(this,"fragment");ne(this,"args");const i=r.decodeEventLog(s,n.data,n.topics);gt(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Tte extends a1{constructor(n,r){super(n,n.provider);ne(this,"error");gt(this,{error:r})}}var Rw;class xHe extends Ite{constructor(n,r,s){super(s,r);K(this,Rw);U(this,Rw,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?_(this,Rw).getEvent(n.topics[0]):null;if(r)try{return new MU(n,_(this,Rw),r)}catch(s){return new Tte(n,s)}return n})}}Rw=new WeakMap;var iC;class UU extends V_{constructor(n,r,s){super(s,r);K(this,iC);U(this,iC,n)}async wait(n,r){const s=await super.wait(n,r);return s==null?null:new xHe(_(this,iC),this.provider,s)}}iC=new WeakMap;class Rte extends nee{constructor(n,r,s,i){super(n,r,s);ne(this,"log");gt(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class NHe extends Rte{constructor(e,n,r,s,i){super(e,n,r,new MU(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);gt(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const G7=BigInt(0);function Pte(t){return t&&typeof t.call=="function"}function Ote(t){return t&&typeof t.estimateGas=="function"}function CT(t){return t&&typeof t.resolveName=="function"}function kte(t){return t&&typeof t.sendTransaction=="function"}function Dte(t){if(t!=null){if(CT(t))return t;if(t.provider)return t.provider}}var oC;class THe{constructor(e,n,r){K(this,oC);ne(this,"fragment");if(gt(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const s=Fg(e.runner,"resolveName"),i=CT(s)?s:null;U(this,oC,async function(){const o=await Promise.all(n.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(u,d)=>u==="address"?Array.isArray(d)?Promise.all(d.map(h=>yi(h,i))):yi(d,i):d)));return e.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return _(this,oC)}}oC=new WeakMap;function Fg(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function vp(t){return t==null?null:t.provider||null}async function Lte(t,e){const n=Js.dereference(t,"overrides");Q(typeof n=="object","invalid overrides parameter","overrides",t);const r=hx(n);return Q(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),Q(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function RHe(t,e,n){const r=Fg(t,"resolveName"),s=CT(r)?r:null;return await Promise.all(e.map((i,o)=>i.walkAsync(n[o],(a,c)=>(c=Js.dereference(c,a),a==="address"?yi(c,s):c))))}function PHe(t){const e=async function(o){const a=await Lte(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await yi(a.from,Dte(t.runner)));const c=t.interface,l=Xe(a.value||G7,"overrides.value")===G7,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&Q(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),Q(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const d=c.receive||c.fallback&&c.fallback.payable;return Q(d||l,"cannot send value to non-payable fallback","overrides.value",a.value),Q(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=Fg(t.runner,"call");ye(Pte(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(l){throw EU(l)&&l.data?t.interface.makeError(l.data,c):l}},r=async function(o){const a=t.runner;ye(kte(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),l=vp(t.runner);return new UU(t.interface,l,c)},s=async function(o){const a=Fg(t.runner,"estimateGas");return ye(Ote(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await r(o);return gt(i,{_contract:t,estimateGas:s,populateTransaction:e,send:r,staticCall:n}),i}function OHe(t,e){const n=function(...l){const u=t.interface.getFunction(e,l);return ye(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){const u=n(...l);let d={};if(u.inputs.length+1===l.length&&(d=await Lte(l.pop()),d.from&&(d.from=await yi(d.from,Dte(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const h=await RHe(t.runner,u.inputs,l);return Object.assign({},d,await li({to:t.getAddress(),data:t.interface.encodeFunctionData(u,h)}))},s=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},i=async function(...l){const u=t.runner;ye(kte(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await u.sendTransaction(await r(...l)),h=vp(t.runner);return new UU(t.interface,h,d)},o=async function(...l){const u=Fg(t.runner,"estimateGas");return ye(Ote(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},a=async function(...l){const u=Fg(t.runner,"call");ye(Pte(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...l);let h="0x";try{h=await u.call(d)}catch(p){throw EU(p)&&p.data?t.interface.makeError(p.data,d):p}const f=n(...l);return t.interface.decodeFunctionResult(f,h)},c=async(...l)=>n(...l).constant?await s(...l):await i(...l);return gt(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return ye(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function kHe(t,e){const n=function(...s){const i=t.interface.getEvent(e,s);return ye(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new THe(t,n(...s),s)};return gt(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return ye(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const fx=Symbol.for("_ethersInternal_contract"),Mte=new WeakMap;function DHe(t,e){Mte.set(t[fx],e)}function Ao(t){return Mte.get(t[fx])}function LHe(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function $U(t,e){let n,r=null;if(Array.isArray(e)){const i=function(o){if(Yn(o,32))return o;const a=t.interface.getEvent(o);return Q(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?n=[null]:typeof e=="string"?Yn(e,32)?n=[e]:(r=t.interface.getEvent(e),Q(r,"unknown fragment","event",e),n=[r.topicHash]):LHe(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):Q(!1,"unknown event name","event",e);n=n.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=n.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:n}}async function Sv(t,e){const{subs:n}=Ao(t);return n.get((await $U(t,e)).tag)||null}async function q7(t,e,n){const r=vp(t.runner);ye(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await $U(t,n),{addr:a,subs:c}=Ao(t);let l=c.get(i);if(!l){const d={address:a||t,topics:o},h=y=>{let m=s;if(m==null)try{m=t.interface.getEvent(y.topics[0])}catch{}if(m){const w=m,v=s?t.interface.decodeEventLog(s,y.data,y.topics):[];G3(t,n,v,A=>new NHe(t,A,n,w,y))}else G3(t,n,[],w=>new Rte(t,w,n,y))};let f=[];l={tag:i,listeners:[],start:()=>{f.length||f.push(r.on(d,h))},stop:async()=>{if(f.length==0)return;let y=f;f=[],await Promise.all(y),r.off(d,h)}},c.set(i,l)}return l}let H3=Promise.resolve();async function MHe(t,e,n,r){await H3;const s=await Sv(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(n);r&&c.push(r(a?null:o));try{o.call(t,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),Ao(t).subs.delete(s.tag)),i>0}async function G3(t,e,n,r){try{await H3}catch{}const s=MHe(t,e,n,r);return H3=s,await s}const kA=["then"];var mz;mz=fx;const aE=class aE{constructor(e,n,r,s){ne(this,"target");ne(this,"interface");ne(this,"runner");ne(this,"filters");ne(this,mz);ne(this,"fallback");Q(typeof e=="string"||jee(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=W3.from(n);gt(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,fx,{value:{}});let o,a=null,c=null;if(s){const d=vp(r);c=new UU(this.interface,d,s)}let l=new Map;if(typeof e=="string")if(Yn(e))a=e,o=Promise.resolve(e);else{const d=Fg(r,"resolveName");if(!CT(d))throw rr("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(e).then(h=>{if(h==null)throw rr("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Ao(this).addr=h,h})}else o=e.getAddress().then(d=>{if(d==null)throw new Error("TODO");return Ao(this).addr=d,d});DHe(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(d,h,f)=>{if(typeof h=="symbol"||kA.indexOf(h)>=0)return Reflect.get(d,h,f);try{return this.getEvent(h)}catch(p){if(!Ns(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>kA.indexOf(h)>=0?Reflect.has(d,h):Reflect.has(d,h)||this.interface.hasEvent(String(h))});return gt(this,{filters:u}),gt(this,{fallback:i.receive||i.fallback?PHe(this):null}),new Proxy(this,{get:(d,h,f)=>{if(typeof h=="symbol"||h in d||kA.indexOf(h)>=0)return Reflect.get(d,h,f);try{return d.getFunction(h)}catch(p){if(!Ns(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>typeof h=="symbol"||h in d||kA.indexOf(h)>=0?Reflect.has(d,h):d.interface.hasFunction(h)})}connect(e){return new aE(this.target,this.interface,e)}attach(e){return new aE(e,this.interface,this.runner)}async getAddress(){return await Ao(this).addrPromise}async getDeployedCode(){const e=vp(this.runner);ye(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=vp(this.runner);return ye(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return Ao(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),OHe(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),kHe(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=Ao(this),o=s||await i,{fragment:a,topics:c}=await $U(this,e),l={address:o,topics:c,fromBlock:n,toBlock:r},u=vp(this.runner);return ye(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(d=>{let h=a;if(h==null)try{h=this.interface.getEvent(d.topics[0])}catch{}if(h)try{return new MU(d,this.interface,h)}catch(f){return new Tte(d,f)}return new a1(d,u)})}async on(e,n){const r=await q7(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await q7(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await G3(this,e,n,null)}async listenerCount(e){if(e){const s=await Sv(this,e);return s?s.listeners.length:0}const{subs:n}=Ao(this);let r=0;for(const{listeners:s}of n.values())r+=s.length;return r}async listeners(e){if(e){const s=await Sv(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:n}=Ao(this);let r=[];for(const{listeners:s}of n.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,n){const r=await Sv(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(n==null||r.listeners.length===0)&&(r.stop(),Ao(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await Sv(this,e);if(!n)return this;n.stop(),Ao(this).subs.delete(n.tag)}else{const{subs:n}=Ao(this);for(const{tag:r,stop:s}of n.values())s(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends aE{constructor(s,i=null){super(s,e,i)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let q3=aE;function UHe(){return q3}class qy extends UHe(){}function LO(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):Q(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class $He{constructor(e){ne(this,"name");gt(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const Ute=new RegExp("^(ipfs)://(.*)$","i"),V7=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Ute,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var ch,zp,lh,ny,bx,$te;const Ay=class Ay{constructor(e,n,r){K(this,lh);ne(this,"provider");ne(this,"address");ne(this,"name");K(this,ch);K(this,zp);gt(this,{provider:e,address:n,name:r}),U(this,ch,null),U(this,zp,new qy(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return _(this,ch)==null&&U(this,ch,(async()=>{try{return await _(this,zp).supportsInterface("0x9061b923")}catch(e){if(Ns(e,"CALL_EXCEPTION"))return!1;throw U(this,ch,null),e}})()),await _(this,ch)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await fe(this,lh,ny).call(this,"addr(bytes32)");return i==null||i===B_?null:i}catch(i){if(Ns(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await fe(this,lh,ny).call(this,"addr(bytes32,uint)",[i]);if(Yn(o,20))return vn(o)}let n=null;for(const i of this.provider.plugins)if(i instanceof $He&&i.supportsCoinType(e)){n=i;break}if(n==null)return null;const r=await fe(this,lh,ny).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const s=await n.decodeAddress(e,r);if(s!=null)return s;ye(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await fe(this,lh,ny).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await fe(this,lh,ny).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const s=n[1]==="e3010170"?"ipfs":"ipns",i=parseInt(n[4],16);if(n[5].length===i*2)return`${s}://${q9e("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;ye(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<V7.length;r++){const s=n.match(V7[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=LO(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const l=c[1],u=new qy(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const g=await u.ownerOf(l);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(i==="erc1155"){const g=await u.balanceOf(a,l);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let d=await u[o](l);if(d==null||d==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),i==="erc1155"&&(d=d.replace("{id}",uf(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=LO(d)),e.push({type:"metadata-url",value:d});let h={};const f=await new df(d).send();f.assertOk();try{h=f.bodyJson}catch{try{e.push({type:"!metadata",value:f.bodyText})}catch{const m=f.body;return m&&e.push({type:"!metadata",value:Me(m)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!h)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(h)});let p=h.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(Ute)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=LO(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return ye(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var s;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await fe(s=Ay,bx,$te).call(s,e,r);if(i!=null){const o=new Ay(e,i,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};ch=new WeakMap,zp=new WeakMap,lh=new WeakSet,ny=async function(e,n){n=(n||[]).slice();const r=_(this,zp).interface;n.unshift(j3(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),ye(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[XWe(this.name,255),r.encodeFunctionData(s,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const i=await _(this,zp)[e](...n);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!Ns(i,"CALL_EXCEPTION"))throw i}return null},bx=new WeakSet,$te=async function(e,n){const r=await Ay.getEnsAddress(e);try{const i=await new qy(r,["function resolver(bytes32) view returns (address)"],e).resolver(j3(n),{enableCcipRead:!0});return i===B_?null:i}catch(s){throw s}return null},K(Ay,bx);let px=Ay;const K7=BigInt(0);function Yt(t,e){return function(n){return n==null?e:t(n)}}function K_(t,e){return n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))}}function c1(t,e){return n=>{const r={};for(const s in t){let i=s;if(e&&s in e&&!(i in n)){for(const o of e[s])if(o in n){i=o;break}}try{const o=t[s](n[i]);o!==void 0&&(r[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";ye(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:n})}}return r}}function BHe(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}Q(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function L0(t){return Q(Yn(t,!0),"invalid data","value",t),t}function xs(t){return Q(Yn(t,32),"invalid hash","value",t),t}const FHe=c1({address:vn,blockHash:xs,blockNumber:Wt,data:L0,index:Wt,removed:Yt(BHe,!1),topics:K_(xs),transactionHash:xs,transactionIndex:Wt},{index:["logIndex"]});function jHe(t){return FHe(t)}const zHe=c1({hash:Yt(xs),parentHash:xs,parentBeaconBlockRoot:Yt(xs,null),number:Wt,timestamp:Wt,nonce:Yt(L0),difficulty:Xe,gasLimit:Xe,gasUsed:Xe,stateRoot:Yt(xs,null),receiptsRoot:Yt(xs,null),blobGasUsed:Yt(Xe,null),excessBlobGas:Yt(Xe,null),miner:Yt(vn),prevRandao:Yt(xs,null),extraData:L0,baseFeePerGas:Yt(Xe)},{prevRandao:["mixHash"]});function WHe(t){const e=zHe(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:Bte(n)),e}const HHe=c1({transactionIndex:Wt,blockNumber:Wt,transactionHash:xs,address:vn,topics:K_(xs),data:L0,index:Wt,blockHash:xs},{index:["logIndex"]});function GHe(t){return HHe(t)}const qHe=c1({to:Yt(vn,null),from:Yt(vn,null),contractAddress:Yt(vn,null),index:Wt,root:Yt(Me),gasUsed:Xe,blobGasUsed:Yt(Xe,null),logsBloom:Yt(L0),blockHash:xs,hash:xs,logs:K_(GHe),blockNumber:Wt,cumulativeGasUsed:Xe,effectiveGasPrice:Yt(Xe),blobGasPrice:Yt(Xe,null),status:Yt(Wt),type:Yt(Wt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function VHe(t){return qHe(t)}function Bte(t){t.to&&Xe(t.to)===K7&&(t.to="0x0000000000000000000000000000000000000000");const e=c1({hash:xs,index:Yt(Wt,void 0),type:n=>n==="0x"||n==null?0:Wt(n),accessList:Yt(cm,null),blobVersionedHashes:Yt(K_(xs,!0),null),authorizationList:Yt(K_(n=>{let r;if(n.signature)r=n.signature;else{let s=n.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},n,{yParity:s})}return{address:vn(n.address),chainId:Xe(n.chainId),nonce:Xe(n.nonce),signature:oo.from(r)}},!1),null),blockHash:Yt(xs,null),blockNumber:Yt(Wt,null),transactionIndex:Yt(Wt,null),from:vn,gasPrice:Yt(Xe),maxPriorityFeePerGas:Yt(Xe),maxFeePerGas:Yt(Xe),maxFeePerBlobGas:Yt(Xe,null),gasLimit:Xe,to:Yt(vn,null),value:Xe,nonce:Wt,data:L0,creates:Yt(vn,null),chainId:Yt(Xe,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=Lze(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=oo.from(t.signature):e.signature=oo.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&Xe(e.blockHash)===K7&&(e.blockHash=null),e}const KHe="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class l1{constructor(e){ne(this,"name");gt(this,{name:e})}clone(){return new l1(this.name)}}class AT extends l1{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);ne(this,"effectiveBlock");ne(this,"txBase");ne(this,"txCreate");ne(this,"txDataZero");ne(this,"txDataNonzero");ne(this,"txAccessListStorageKey");ne(this,"txAccessListAddress");const s={effectiveBlock:n};function i(o,a){let c=(r||{})[o];c==null&&(c=a),Q(typeof c=="number",`invalud value for ${o}`,"costs",r),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),gt(this,s)}clone(){return new AT(this.effectiveBlock,this)}}class ST extends l1{constructor(n,r){super("org.ethers.plugins.network.Ens");ne(this,"address");ne(this,"targetNetwork");gt(this,{address:n||KHe,targetNetwork:r??1})}clone(){return new ST(this.address,this.targetNetwork)}}var aC,cC;class YHe extends l1{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");K(this,aC);K(this,cC);U(this,aC,n),U(this,cC,r)}get url(){return _(this,aC)}get processFunc(){return _(this,cC)}clone(){return this}}aC=new WeakMap,cC=new WeakMap;const MO=new Map;var Pw,Ow,uh;const Sy=class Sy{constructor(e,n){K(this,Pw);K(this,Ow);K(this,uh);U(this,Pw,e),U(this,Ow,Xe(n)),U(this,uh,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return _(this,Pw)}set name(e){U(this,Pw,e)}get chainId(){return _(this,Ow)}set chainId(e){U(this,Ow,Xe(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Xe(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Xe(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Xe(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(_(this,uh).values())}attachPlugin(e){if(_(this,uh).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return _(this,uh).set(e.name,e.clone()),this}getPlugin(e){return _(this,uh).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new Sy(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new AT;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const s=cm(e.accessList);for(const i in s)r+=n.txAccessListAddress+n.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(e){if(QHe(),e==null)return Sy.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=MO.get(e);if(n)return n();if(typeof e=="bigint")return new Sy("unknown",e);Q(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){Q(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new Sy(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new ST(e.ensAddress,e.ensNetwork)),n}Q(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=MO.get(e);r&&Q(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),MO.set(e,n)}};Pw=new WeakMap,Ow=new WeakMap,uh=new WeakMap;let El=Sy;function Y7(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function Q7(t){return new YHe(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([r.send(),e()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:Y7(a.maxFee,9),maxPriorityFeePerGas:Y7(a.maxPriorityFee,9)}}catch(i){ye(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let J7=!1;function QHe(){if(J7)return;J7=!0;function t(e,n,r){const s=function(){const i=new El(e,n);return r.ensNetwork!=null&&i.attachPlugin(new ST(null,r.ensNetwork)),i.attachPlugin(new AT),(r.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};El.register(e,s),El.register(n,s),r.altNames&&r.altNames.forEach(i=>{El.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[Q7("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[Q7("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function V3(t){return JSON.parse(JSON.stringify(t))}var Eu,ha,dh,il,kw,IS;class JHe{constructor(e){K(this,kw);K(this,Eu);K(this,ha);K(this,dh);K(this,il);U(this,Eu,e),U(this,ha,null),U(this,dh,4e3),U(this,il,-2)}get pollingInterval(){return _(this,dh)}set pollingInterval(e){U(this,dh,e)}start(){_(this,ha)||(U(this,ha,_(this,Eu)._setTimeout(fe(this,kw,IS).bind(this),_(this,dh))),fe(this,kw,IS).call(this))}stop(){_(this,ha)&&(_(this,Eu)._clearTimeout(_(this,ha)),U(this,ha,null))}pause(e){this.stop(),e&&U(this,il,-2)}resume(){this.start()}}Eu=new WeakMap,ha=new WeakMap,dh=new WeakMap,il=new WeakMap,kw=new WeakSet,IS=async function(){try{const e=await _(this,Eu).getBlockNumber();if(_(this,il)===-2){U(this,il,e);return}if(e!==_(this,il)){for(let n=_(this,il)+1;n<=e;n++){if(_(this,ha)==null)return;await _(this,Eu).emit("block",n)}U(this,il,e)}}catch{}_(this,ha)!=null&&U(this,ha,_(this,Eu)._setTimeout(fe(this,kw,IS).bind(this),_(this,dh)))};var Wp,Hp,hh;class BU{constructor(e){K(this,Wp);K(this,Hp);K(this,hh);U(this,Wp,e),U(this,hh,!1),U(this,Hp,n=>{this._poll(n,_(this,Wp))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){_(this,hh)||(U(this,hh,!0),_(this,Hp).call(this,-2),_(this,Wp).on("block",_(this,Hp)))}stop(){_(this,hh)&&(U(this,hh,!1),_(this,Wp).off("block",_(this,Hp)))}pause(e){this.stop()}resume(){this.start()}}Wp=new WeakMap,Hp=new WeakMap,hh=new WeakMap;var Dw,_u;class ZHe extends BU{constructor(n,r){super(n);K(this,Dw);K(this,_u);U(this,Dw,r),U(this,_u,-2)}pause(n){n&&U(this,_u,-2),super.pause(n)}async _poll(n,r){const s=await r.getBlock(_(this,Dw));s!=null&&(_(this,_u)===-2?U(this,_u,s.number):s.number>_(this,_u)&&(r.emit(_(this,Dw),s.number),U(this,_u,s.number)))}}Dw=new WeakMap,_u=new WeakMap;var vx;class XHe extends BU{constructor(n,r){super(n);K(this,vx);U(this,vx,V3(r))}async _poll(n,r){throw new Error("@TODO")}}vx=new WeakMap;var Lw;class eGe extends BU{constructor(n,r){super(n);K(this,Lw);U(this,Lw,r)}async _poll(n,r){const s=await r.getTransactionReceipt(_(this,Lw));s&&r.emit(_(this,Lw),s)}}Lw=new WeakMap;var Cu,Mw,Uw,fh,fa,Ex,Fte;class FU{constructor(e,n){K(this,Ex);K(this,Cu);K(this,Mw);K(this,Uw);K(this,fh);K(this,fa);U(this,Cu,e),U(this,Mw,V3(n)),U(this,Uw,fe(this,Ex,Fte).bind(this)),U(this,fh,!1),U(this,fa,-2)}start(){_(this,fh)||(U(this,fh,!0),_(this,fa)===-2&&_(this,Cu).getBlockNumber().then(e=>{U(this,fa,e)}),_(this,Cu).on("block",_(this,Uw)))}stop(){_(this,fh)&&(U(this,fh,!1),_(this,Cu).off("block",_(this,Uw)))}pause(e){this.stop(),e&&U(this,fa,-2)}resume(){this.start()}}Cu=new WeakMap,Mw=new WeakMap,Uw=new WeakMap,fh=new WeakMap,fa=new WeakMap,Ex=new WeakSet,Fte=async function(e){if(_(this,fa)===-2)return;const n=V3(_(this,Mw));n.fromBlock=_(this,fa)+1,n.toBlock=e;const r=await _(this,Cu).getLogs(n);if(r.length===0){_(this,fa)<e-60&&U(this,fa,e-60);return}for(const s of r)_(this,Cu).emit(_(this,Mw),s),U(this,fa,s.blockNumber)};const tGe=BigInt(2),nGe=10;function DA(t){return t&&typeof t.then=="function"}function xS(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,o)=>(i[o]=r[o],i),{})}return r})}class jte{constructor(e){ne(this,"name");gt(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function rGe(t){return JSON.parse(JSON.stringify(t))}function K3(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function UO(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(Yn(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:xS("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:xS("orphan",n),filter:rGe(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(s=>s==null?null:Array.isArray(s)?K3(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(n.address){const s=[],i=[],o=a=>{Yn(a)?s.push(a):i.push((async()=>{s.push(await yi(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),i.length&&await Promise.all(i),r.address=K3(s.map(a=>a.toLowerCase()))}return{filter:r,tag:xS("event",r),type:"event"}}Q(!1,"unknown ProviderEvent","event",t)}function $O(){return new Date().getTime()}const sGe={cacheTimeout:250,pollingInterval:4e3};var qs,ph,Vs,$w,No,Gp,gh,Au,lC,pa,Bw,Fw,Bt,_o,Y3,Q3,Iv,J3,xv,NS;class iGe{constructor(e,n){K(this,Bt);K(this,qs);K(this,ph);K(this,Vs);K(this,$w);K(this,No);K(this,Gp);K(this,gh);K(this,Au);K(this,lC);K(this,pa);K(this,Bw);K(this,Fw);if(U(this,Fw,Object.assign({},sGe,n||{})),e==="any")U(this,Gp,!0),U(this,No,null);else if(e){const r=El.from(e);U(this,Gp,!1),U(this,No,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else U(this,Gp,!1),U(this,No,null);U(this,Au,-1),U(this,gh,new Map),U(this,qs,new Map),U(this,ph,new Map),U(this,Vs,null),U(this,$w,!1),U(this,lC,1),U(this,pa,new Map),U(this,Bw,!1)}get pollingInterval(){return _(this,Fw).pollingInterval}get provider(){return this}get plugins(){return Array.from(_(this,ph).values())}attachPlugin(e){if(_(this,ph).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return _(this,ph).set(e.name,e.connect(this)),this}getPlugin(e){return _(this,ph).get(e)||null}get disableCcipRead(){return _(this,Bw)}set disableCcipRead(e){U(this,Bw,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const c=r[a],l=c.replace("{sender}",s).replace("{data}",i),u=new df(l);c.indexOf("{data}")===-1&&(u.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let d="unknown error",h;try{h=await u.send()}catch(f){o.push(f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:f}});continue}try{const f=h.bodyJson;if(f.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:f}),f.data;f.message&&(d=f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:f})}catch{}ye(h.statusCode<400||h.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:d}}),o.push(d)}ye(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new AHe(WHe(e),this)}_wrapLog(e,n){return new a1(jHe(e),this)}_wrapTransactionReceipt(e,n){return new Ite(VHe(e),this)}_wrapTransactionResponse(e,n){return new V_(Bte(e),this)}_detectNetwork(){ye(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){ye(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Wt(await fe(this,Bt,_o).call(this,{method:"getBlockNumber"}),"%response");return _(this,Au)>=0&&U(this,Au,e),e}_getAddress(e){return yi(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(Yn(e))return Yn(e,32)?e:uc(e);if(typeof e=="bigint"&&(e=Wt(e,"blockTag")),typeof e=="number")return e>=0?uc(e):_(this,Au)>=0?uc(_(this,Au)+e):this.getBlockNumber().then(n=>uc(n+e));Q(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?K3(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(c,l,u)=>{let d;switch(c.length){case 0:break;case 1:d=c[0];break;default:c.sort(),d=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");const h={};return d&&(h.address=d),n.length&&(h.topics=n),l&&(h.fromBlock=l),u&&(h.toBlock=u),r&&(h.blockHash=r),h};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(e){const n=hx(e),r=[];if(["to","from"].forEach(s=>{if(n[s]==null)return;const i=yi(n[s],this);DA(i)?r.push(async function(){n[s]=await i}()):n[s]=i}),n.blockTag!=null){const s=this._getBlockTag(n.blockTag);DA(s)?r.push(async function(){n.blockTag=await s}()):n.blockTag=s}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(_(this,No)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw _(this,No)===s&&U(this,No,null),i}})();return U(this,No,s),(await s).clone()}const e=_(this,No),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(_(this,Gp)?(this.emit("network",r,n),_(this,No)===e&&U(this,No,Promise.resolve(r))):ye(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await li({_block:fe(this,Bt,J3).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await fe(this,Bt,_o).call(this,{method:"getGasPrice"});return Xe(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await fe(this,Bt,_o).call(this,{method:"getPriorityFee"});return Xe(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(s,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*tGe+c),new H7(i,a,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new df(r.url),i=await r.processFunc(n,this,s);return new H7(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return DA(n)&&(n=await n),Xe(await fe(this,Bt,_o).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await li({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await fe(this,Bt,Q3).call(this,fe(this,Bt,Y3).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return Xe(await fe(this,Bt,Iv).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return Wt(await fe(this,Bt,Iv).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return Me(await fe(this,Bt,Iv).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const s=Xe(n,"position");return Me(await fe(this,Bt,Iv).call(this,{method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:s}=await li({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=ix.from(e);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:s}=await li({network:this.getNetwork(),params:fe(this,Bt,J3).call(this,e,!!n)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:n,params:r}=await li({network:this.getNetwork(),params:fe(this,Bt,_o).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await li({network:this.getNetwork(),params:fe(this,Bt,_o).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await fe(this,Bt,_o).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await li({network:this.getNetwork(),result:fe(this,Bt,_o).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:Me(n)}async getLogs(e){let n=this._getFilter(e);DA(n)&&(n=await n);const{network:r,params:s}=await li({network:this.getNetwork(),params:fe(this,Bt,_o).call(this,{method:"getLogs",filter:n})});return s.map(i=>this._wrapLog(i,r))}_getProvider(e){ye(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await px.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=vn(e);const n=j3(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await px.getEnsAddress(this),i=await new qy(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(i==null||i===B_)return null;const a=await new qy(i,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(Ns(r,"BAD_DATA")&&r.value==="0x"||Ns(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const s=n??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const c=async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=s){i(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(rr("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){ye(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=_(this,pa).get(e);n&&(n.timer&&clearTimeout(n.timer),_(this,pa).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=ld(this,lC)._++,s=()=>{_(this,pa).delete(r),e()};if(this.paused)_(this,pa).set(r,{timer:null,func:s,time:n});else{const i=setTimeout(s,n);_(this,pa).set(r,{timer:i,func:s,time:$O()})}return r}_forEachSubscriber(e){for(const n of _(this,qs).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new jte(e.type);case"block":{const n=new JHe(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new ZHe(this,e.type);case"event":return new FU(this,e.filter);case"transaction":return new eGe(this,e.hash);case"orphan":return new XHe(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of _(this,qs).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),_(this,Vs)!=null&&n.pause(_(this,Vs));break}}async on(e,n){const r=await fe(this,Bt,NS).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,_(this,Vs)!=null&&r.subscriber.pause(_(this,Vs))),this}async once(e,n){const r=await fe(this,Bt,NS).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,_(this,Vs)!=null&&r.subscriber.pause(_(this,Vs))),this}async emit(e,...n){const r=await fe(this,Bt,xv).call(this,e,n);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:o})=>{const a=new nee(this,o?null:i,e);try{i.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),_(this,qs).delete(r.tag)),s>0}async listenerCount(e){if(e){const r=await fe(this,Bt,xv).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of _(this,qs).values())n+=r.length;return n}async listeners(e){if(e){const r=await fe(this,Bt,xv).call(this,e);return r?r.listeners.map(({listener:s})=>s):[]}let n=[];for(const{listeners:r}of _(this,qs).values())n=n.concat(r.map(({listener:s})=>s));return n}async off(e,n){const r=await fe(this,Bt,xv).call(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),_(this,qs).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:s}=await fe(this,Bt,NS).call(this,e);r&&s.stop(),_(this,qs).delete(n)}else for(const[n,{started:r,subscriber:s}]of _(this,qs))r&&s.stop(),_(this,qs).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return _(this,$w)}destroy(){this.removeAllListeners();for(const e of _(this,pa).keys())this._clearTimeout(e);U(this,$w,!0)}get paused(){return _(this,Vs)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(U(this,Au,-1),_(this,Vs)!=null){if(_(this,Vs)==!!e)return;ye(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),U(this,Vs,!!e);for(const n of _(this,pa).values())n.timer&&clearTimeout(n.timer),n.time=$O()-n.time}resume(){if(_(this,Vs)!=null){this._forEachSubscriber(e=>e.resume()),U(this,Vs,null);for(const e of _(this,pa).values()){let n=e.time;n<0&&(n=0),e.time=$O(),setTimeout(e.func,n)}}}}qs=new WeakMap,ph=new WeakMap,Vs=new WeakMap,$w=new WeakMap,No=new WeakMap,Gp=new WeakMap,gh=new WeakMap,Au=new WeakMap,lC=new WeakMap,pa=new WeakMap,Bw=new WeakMap,Fw=new WeakMap,Bt=new WeakSet,_o=async function(e){const n=_(this,Fw).cacheTimeout;if(n<0)return await this._perform(e);const r=xS(e.method,e);let s=_(this,gh).get(r);return s||(s=this._perform(e),_(this,gh).set(r,s),setTimeout(()=>{_(this,gh).get(r)===s&&_(this,gh).delete(r)},n)),await s},Y3=async function(e,n,r){ye(r<nGe,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const s=hx(e);try{return Me(await this._perform({method:"call",transaction:s,blockTag:n}))}catch(i){if(!this.disableCcipRead&&EU(i)&&i.data&&r>=0&&n==="latest"&&s.to!=null&&yr(i.data,0,4)==="0x556f1830"){const o=i.data,a=await yi(s.to,this);let c;try{c=uGe(yr(i.data,4))}catch(d){ye(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}ye(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(s,c.calldata,c.urls);ye(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const u={to:a,data:Er([c.selector,lGe([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const d=await fe(this,Bt,Y3).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:d}),d}}throw i}},Q3=async function(e){const{value:n}=await li({network:this.getNetwork(),value:e});return n},Iv=async function(e,n,r){let s=this._getAddress(n),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await fe(this,Bt,Q3).call(this,fe(this,Bt,_o).call(this,Object.assign(e,{address:s,blockTag:i})))},J3=async function(e,n){if(Yn(e,32))return await fe(this,Bt,_o).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await fe(this,Bt,_o).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},xv=async function(e,n){let r=await UO(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await UO({orphan:"drop-log",log:n[0]},this)),_(this,qs).get(r.tag)||null},NS=async function(e){const n=await UO(e,this),r=n.tag;let s=_(this,qs).get(r);return s||(s={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},_(this,qs).set(r,s)),s};function oGe(t,e){try{const n=Z3(t,e);if(n)return rx(n)}catch{}return null}function Z3(t,e){if(t==="0x")return null;try{const n=Wt(yr(t,e,e+32)),r=Wt(yr(t,n,n+32));return yr(t,n+32,n+32+r)}catch{}return null}function Z7(t){const e=Gr(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function aGe(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const cGe=new Uint8Array([]);function lGe(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(cGe),n+=32;for(let r=0;r<t.length;r++){const s=zt(t[r]);e[r]=Z7(n),e.push(Z7(s.length)),e.push(aGe(s)),n+=32+Math.ceil(s.length/32)*32}return Er(e)}const X7="0x0000000000000000000000000000000000000000000000000000000000000000";function uGe(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};ye(Wy(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=yr(t,0,32);ye(yr(n,0,12)===yr(X7,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=yr(n,12);try{const r=[],s=Wt(yr(t,32,64)),i=Wt(yr(t,s,s+32)),o=yr(t,s+32);for(let a=0;a<i;a++){const c=oGe(o,a*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{ye(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=Z3(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{ye(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}ye(yr(t,100,128)===yr(X7,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=yr(t,96,100);try{const r=Z3(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{ye(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Mf(t,e){if(t.provider)return t.provider;ye(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function ez(t,e){let n=hx(e);if(n.to!=null&&(n.to=yi(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),yi(r,t)]).then(([s,i])=>(Q(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else n.from=t.getAddress();return await li(n)}class dGe{constructor(e){ne(this,"provider");gt(this,{provider:e||null})}async getNonce(e){return Mf(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await ez(this,e)}async populateTransaction(e){const n=Mf(this,"populateTransaction"),r=await ez(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const o=Xe(r.chainId);Q(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?Q(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&i&&Q(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();ye(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(ye(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):ye(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await li(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await Mf(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return Mf(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Mf(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Mf(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=Mf(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=ix.from(r);return await n.broadcastTransaction(await this.signTransaction(s))}authorize(e){ye(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function hGe(t){return JSON.parse(JSON.stringify(t))}var ai,ol,qp,mh,Vp,jw,ff,X3,e5;class zte{constructor(e){K(this,ff);K(this,ai);K(this,ol);K(this,qp);K(this,mh);K(this,Vp);K(this,jw);U(this,ai,e),U(this,ol,null),U(this,qp,fe(this,ff,X3).bind(this)),U(this,mh,!1),U(this,Vp,null),U(this,jw,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){_(this,mh)||(U(this,mh,!0),fe(this,ff,X3).call(this,-2))}stop(){_(this,mh)&&(U(this,mh,!1),U(this,jw,!0),fe(this,ff,e5).call(this),_(this,ai).off("block",_(this,qp)))}pause(e){e&&fe(this,ff,e5).call(this),_(this,ai).off("block",_(this,qp))}resume(){this.start()}}ai=new WeakMap,ol=new WeakMap,qp=new WeakMap,mh=new WeakMap,Vp=new WeakMap,jw=new WeakMap,ff=new WeakSet,X3=async function(e){try{_(this,ol)==null&&U(this,ol,this._subscribe(_(this,ai)));let n=null;try{n=await _(this,ol)}catch(i){if(!Ns(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(n==null){U(this,ol,null),_(this,ai)._recoverSubscriber(this,this._recover(_(this,ai)));return}const r=await _(this,ai).getNetwork();if(_(this,Vp)||U(this,Vp,r),_(this,Vp).chainId!==r.chainId)throw new Error("chaid changed");if(_(this,jw))return;const s=await _(this,ai).send("eth_getFilterChanges",[n]);await this._emitResults(_(this,ai),s)}catch(n){console.log("@TODO",n)}_(this,ai).once("block",_(this,qp))},e5=function(){const e=_(this,ol);e&&(U(this,ol,null),e.then(n=>{_(this,ai).destroyed||_(this,ai).send("eth_uninstallFilter",[n])}))};var Kp;class fGe extends zte{constructor(n,r){super(n);K(this,Kp);U(this,Kp,hGe(r))}_recover(n){return new FU(n,_(this,Kp))}async _subscribe(n){return await n.send("eth_newFilter",[_(this,Kp)])}async _emitResults(n,r){for(const s of r)n.emit(_(this,Kp),n._wrapLog(s,n._network))}}Kp=new WeakMap;class pGe extends zte{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const gGe="bigint,boolean,function,number,string,symbol".split(/,/g);function TS(t){if(t==null||gGe.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(TS);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function mGe(t){return new Promise(e=>{setTimeout(e,t)})}function Vm(t){return t&&t.toLowerCase()}function tz(t){return t&&typeof t.pollingInterval=="number"}const Wte={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class BO extends dGe{constructor(n,r){super(n);ne(this,"address");r=vn(r),gt(this,{address:r})}connect(n){ye(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=TS(n),s=[];if(r.from){const o=r.from;s.push((async()=>{const a=await yi(o,this.provider);Q(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;s.push((async()=>{r.to=await yi(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(n);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const l=async()=>{try{const u=await this.provider.getTransaction(s);if(u!=null){i(u.replaceableTransaction(r));return}}catch(u){if(Ns(u,"CANCELLED")||Ns(u,"BAD_DATA")||Ns(u,"NETWORK_ERROR")||Ns(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=s,o(u);return}if(Ns(u,"INVALID_ARGUMENT")&&(c++,u.info==null&&(u.info={}),u.info.sendTransactionHash=s,c>10)){o(u);return}this.provider.emit("error",rr("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{l()},a.pop()||4e3)};l()})}async signTransaction(n){const r=TS(n);if(r.from){const i=await yi(r.from,this.provider);Q(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(n){const r=typeof n=="string"?zu(n):n;return await this.provider.send("personal_sign",[Me(r),this.address.toLowerCase()])}async signTypedData(n,r,s){const i=TS(s),o=await dx.resolveNames(n,r,i,async a=>{const c=await yi(a);return Q(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(dx.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?zu(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Me(r)])}}var Yp,zw,Su,al,ic,ga,zi,uC,t5;class yGe extends iGe{constructor(n,r){super(n,r);K(this,uC);K(this,Yp);K(this,zw);K(this,Su);K(this,al);K(this,ic);K(this,ga);K(this,zi);U(this,zw,1),U(this,Yp,Object.assign({},Wte,r||{})),U(this,Su,[]),U(this,al,null),U(this,ga,null),U(this,zi,null);{let i=null;const o=new Promise(a=>{i=a});U(this,ic,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(Q(!s||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&n!=null&&U(this,ga,El.from(n))):s&&(Q(n==null||s.matches(n),"staticNetwork MUST match network object","options",r),U(this,ga,s))}_getOption(n){return _(this,Yp)[n]}get _network(){return ye(_(this,ga),"network is not available yet","NETWORK_ERROR"),_(this,ga)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let s=n.transaction;if(s&&s.type!=null&&Xe(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(_(this,ga))return _(this,ga)}else return n;return _(this,zi)?await _(this,zi):this.ready?(U(this,zi,(async()=>{try{const r=El.from(Xe(await this.send("eth_chainId",[])));return U(this,zi,null),r}catch(r){throw U(this,zi,null),r}})()),await _(this,zi)):(U(this,zi,(async()=>{const r={id:ld(this,zw)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],U(this,zi,null)}catch(i){throw U(this,zi,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return El.from(Xe(s.result));throw this.getRpcError(r,s)})()),await _(this,zi))}_start(){_(this,ic)==null||_(this,ic).resolve==null||(_(this,ic).resolve(),U(this,ic,null),(async()=>{for(;_(this,ga)==null&&!this.destroyed;)try{U(this,ga,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",rr("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await mGe(1e3)}fe(this,uC,t5).call(this)})())}async _waitUntilReady(){if(_(this,ic)!=null)return await _(this,ic).promise}_getSubscriber(n){return n.type==="pending"?new pGe(this):n.type==="event"?this._getOption("polling")?new FU(this,n.filter):new fGe(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new jte("orphan"):super._getSubscriber(n)}get ready(){return _(this,ic)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(n[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=uc(Xe(n[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{n[s]!=null&&(r[s]=Me(n[s]))}),n.accessList&&(r.accessList=cm(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(s=>s.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(s=>{const i=Gee(s);return{address:i.address,nonce:uc(i.nonce),chainId:uc(i.chainId),yParity:uc(i.signature.yParity),r:uc(i.signature.r),s:uc(i.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Vm(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Vm(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[Vm(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Vm(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(Vm):n.filter.address=Vm(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:s}=n,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return rr("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:i}});if(c.match(/nonce/i)&&c.match(/too low/i))return rr("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=n5(i),l=q_.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",n.params[0],c?c.data:null);return l.info={error:i,payload:n},l}const o=JSON.stringify(bGe(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return rr("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:n,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return rr("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return rr("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return rr("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return rr("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?rr("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:i,payload:n}}):rr("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(rr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const s=ld(this,zw)._++,i=new Promise((o,a)=>{_(this,Su).push({resolve:o,reject:a,payload:{method:n,params:r,id:s,jsonrpc:"2.0"}})});return fe(this,uC,t5).call(this),i}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const i=await r;if(n>=i.length)throw new Error("no such account");return new BO(this,i[n])}const{accounts:s}=await li({network:this.getNetwork(),accounts:r});n=vn(n);for(const i of s)if(vn(i)===n)return new BO(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new BO(this,r))}destroy(){_(this,al)&&(clearTimeout(_(this,al)),U(this,al,null));for(const{payload:n,reject:r}of _(this,Su))r(rr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));U(this,Su,[]),super.destroy()}}Yp=new WeakMap,zw=new WeakMap,Su=new WeakMap,al=new WeakMap,ic=new WeakMap,ga=new WeakMap,zi=new WeakMap,uC=new WeakSet,t5=function(){if(_(this,al))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");U(this,al,setTimeout(()=>{U(this,al,null);const r=_(this,Su);for(U(this,Su,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==_(this,Yp).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(o=>o.payload)).length>_(this,Yp).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:l}of s){if(this.destroyed){c(rr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const u=o.filter(d=>d.id===l.id)[0];if(u==null){const d=rr("missing response for request","BAD_DATA",{value:o,info:{payload:l}});this.emit("error",d),c(d);continue}if("error"in u){c(this.getRpcError(l,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},n))};var yh;class wGe extends yGe{constructor(n,r){super(n,r);K(this,yh);let s=this._getOption("pollingInterval");s==null&&(s=Wte.pollingInterval),U(this,yh,s)}_getSubscriber(n){const r=super._getSubscriber(n);return tz(r)&&(r.pollingInterval=_(this,yh)),r}get pollingInterval(){return _(this,yh)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");U(this,yh,n),this._forEachSubscriber(r=>{tz(r)&&(r.pollingInterval=_(this,yh))})}}yh=new WeakMap;function n5(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&Yn(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=n5(t[e]);if(n)return n}return null}if(typeof t=="string")try{return n5(JSON.parse(t))}catch{}return null}function r5(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)r5(t[n],e);if(typeof t=="string")try{return r5(JSON.parse(t),e)}catch{}}}function bGe(t){const e=[];return r5(t,e),e}var Ww,Hw;const rp=class rp extends wGe{constructor(n,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});Q(n&&n.request,"invalid EIP-1193 provider","ethereum",n);super(r,i);K(this,Ww);K(this,Hw);U(this,Hw,null),s&&s.providerInfo&&U(this,Hw,s.providerInfo),U(this,Ww,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const l=await n.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const u=new Error(l.message);throw u.code=l.code,u.data=l.data,u.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}})}get providerInfo(){return _(this,Hw)}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){Q(!Array.isArray(n),"EIP-1193 does not support batch request","payload",n);try{const r=await _(this,Ww).call(this,n.method,n.params||[]);return[{id:n.id,result:r}]}catch(r){return[{id:n.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(n,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(n,r)}async hasSigner(n){n==null&&(n=0);const r=await this.send("eth_accounts",[]);return typeof n=="number"?r.length>n:(n=n.toLowerCase(),r.filter(s=>s.toLowerCase()===n).length!==0)}async getSigner(n){if(n==null&&(n=0),!await this.hasSigner(n))try{await _(this,Ww).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(n)}static async discover(n){if(n==null&&(n={}),n.provider)return new rp(n.provider);const r=n.window?n.window:typeof window<"u"?window:null;if(r==null)return null;const s=n.anyProvider;if(s&&r.ethereum)return new rp(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=n.timeout?n.timeout:300;return i===0?null:await new Promise((o,a)=>{let c=[];const l=h=>{c.push(h.detail),s&&u()},u=()=>{if(clearTimeout(d),c.length)if(n&&n.filter){const h=n.filter(c.map(f=>Object.assign({},f.info)));if(h==null)o(null);else if(h instanceof rp)o(h);else{let f=null;if(h.uuid&&(f=c.filter(g=>h.uuid===g.info.uuid)[0]),f){const{provider:p,info:g}=f;o(new rp(p,void 0,{providerInfo:g}))}else a(rr("filter returned unknown info","UNSUPPORTED_OPERATION",{value:h}))}}else{const{provider:h,info:f}=c[0];o(new rp(h,void 0,{providerInfo:f}))}else o(null);r.removeEventListener("eip6963:announceProvider",l)},d=setTimeout(()=>{u()},i);r.addEventListener("eip6963:announceProvider",l),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};Ww=new WeakMap,Hw=new WeakMap;let s5=rp;const qf=[{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerToGame",outputs:[{internalType:"bytes6",name:"",type:"bytes6"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"games",outputs:[{internalType:"address",name:"player1",type:"address"},{internalType:"address",name:"player2",type:"address"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"address",name:"winner",type:"address"},{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"uint256",name:"wagerAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"createGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"joinGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"winner",type:"address"}],name:"endGame",outputs:[],stateMutability:"nonpayable",type:"function"}],Ka="0x3112AF5728520F52FD1C6710dD7bD52285a68e47",or={LOBBY:"lobby",WAITING:"waiting",ACTIVE:"active",FINISHED:"finished"},FO={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},ru=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],vGe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}];function EGe(){const t=new Uint8Array(6);return window.crypto.getRandomValues(t),"0x"+Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}async function _Ge(t){try{if(typeof window>"u"||!window.ethereum)throw new Error("No Ethereum provider found. Please connect your wallet.");const e=new s5(window.ethereum);return await new qy(Ka,qf,e).playerToGame(t)}catch(e){return console.error("Error fetching invite code from contract:",e),null}}const Hte=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s}=MC(),[i,o]=D.useState(""),[a,c]=D.useState(""),[l,u]=D.useState(!1),[d,h]=D.useState(!1),[f,p]=D.useState(!1),[g,y]=D.useState(!1),{writeContract:m,isPending:w,data:v}=WR(),{writeContract:A,isPending:C,data:S,error:x}=WR(),{writeContract:T,isPending:I,data:k}=WR(),O=xwe(),{isLoading:B}=zR({hash:v}),{isLoading:G,data:W}=zR({hash:S}),{isLoading:R}=zR({hash:k}),{data:N}=d8({address:Ka,abi:qf,functionName:"playerToGame",args:r?[r]:void 0,query:{enabled:!!r}}),{data:M}=d8({address:Ka,abi:qf,functionName:"games",args:N?[N]:void 0,query:{enabled:!!N&&N!=="0x000000000000"}}),[P,L]=D.useState(""),F=($,H)=>{console.log(`[INVITE_DEBUG] Setting inviteCode to "${$}" from ${H}`),P&&!$&&console.warn(`[INVITE_DEBUG] WARNING: Clearing inviteCode from "${P}" to "${$}" from ${H}`),L($)},V=async()=>{if(!r||!Ce){console.error("[CLAIM] Missing required data for claiming winnings");return}let $=P;if(!$&&r){console.log("[CLAIM] Invite code missing from state, trying to get from contract...");try{const H=await _Ge(r);H&&H!=="0x000000000000"&&($=H,console.log("[CLAIM] Retrieved invite code from contract:",$))}catch(H){console.error("[CLAIM] Error getting invite code from contract:",H)}}if(!$){console.error("[CLAIM] Could not determine invite code for claiming winnings"),alert("Could not determine game invite code. Please try refreshing the page.");return}try{p(!0),console.log("[CLAIM] Claiming winnings for game:",$,"Player:",Ce,"Address:",r);const H=await vs.getGame($);if(!H){console.error("[CLAIM] Error fetching game data:","Game data not found"),alert("Failed to fetch game data. Please try again.");return}console.log("[CLAIM] Firebase game data:",H);let j=null;if(H.winner&&(H.blue_player||H.red_player)&&(j=H.winner==="blue"?H.blue_player:H.red_player,console.log("[CLAIM] Using Firebase winner data:",{winner:H.winner,winnerAddress:j})),!j&&M)if(H.winner&&(H.winner==="blue"||H.winner==="red")){console.log("[CLAIM] Using Firebase winner color with contract player addresses");let oe,Oe,Ie,$e,ut,fn;if(Array.isArray(M))[oe,Oe,Ie,$e,ut,fn]=M;else{console.error("[CLAIM] Unexpected contract data format:",M),alert("Failed to verify winner. Please try again.");return}j=H.winner==="blue"?oe:Oe,console.log("[CLAIM] Winner from Firebase color + contract addresses:",{winnerColor:H.winner,winnerAddress:j,player1:oe,player2:Oe})}else{console.log("[CLAIM] Using contract data for winner verification"),console.log("[CLAIM] Full contract data:",M);let oe,Oe,Ie,$e,ut,fn;if(Array.isArray(M))[oe,Oe,Ie,$e,ut,fn]=M;else{console.error("[CLAIM] Unexpected contract data format:",M),alert("Failed to verify winner. Please try again.");return}const vt=String($e);if(vt.startsWith("0x"))j=vt;else if(vt==="blue"||vt==="red")j=vt==="blue"?oe:Oe;else if(vt==="1"||vt==="2")j=vt==="1"?oe:Oe;else{console.error("[CLAIM] Unknown winner format:",$e,"as string:",vt),alert("Failed to verify winner. Please try again.");return}console.log("[CLAIM] Winner from contract:",{winner:$e,winnerAddress:j,player1:oe,player2:Oe,winnerType:typeof $e,winnerValue:$e,address:r,addressType:typeof r})}if(!j){console.error("[CLAIM] Could not determine winner address"),alert("Failed to verify winner. Please try again.");return}if(console.log("[CLAIM] Winner verification details:",{winnerAddress:j,address:r,playerColor:Ce,winnerAddressType:typeof j,addressType:typeof r,addressesMatch:j===r,winnerAddressLength:j==null?void 0:j.length,addressLength:r==null?void 0:r.length}),j!==r){console.error("[CLAIM] Player is not the winner",{winnerAddress:j,address:r,playerColor:Ce}),alert("Only the winner can claim winnings.");return}console.log("[CLAIM] ✅ Winner verification passed! Proceeding with contract call...");let X=$;if(!X&&M){console.log("[CLAIM] Using invite code from contract data as fallback");let oe,Oe,Ie,$e,ut,fn;if(Array.isArray(M))[oe,Oe,Ie,$e,ut,fn]=M,X=ut;else{console.error("[CLAIM] Unexpected contract data format for invite code:",M),alert("Failed to get invite code. Please try again.");return}}if(!X||typeof X!="string"||!X.startsWith("0x")||X.length!==14){console.error("[CLAIM] Invalid invite code for contract claim:",X),alert("Invalid invite code for contract claim.");return}console.log("[CLAIM] Calling contract with:",{inviteCode:X,winner:j,functionName:"endGame",inviteCodeSource:H.invite_code?"Firebase":"Contract"}),T({address:Ka,abi:qf,functionName:"endGame",args:[X,j]}),console.log("[CLAIM] Contract call initiated successfully"),I?console.log("[CLAIM] Contract call is pending..."):console.log("[CLAIM] Contract call status:",{isEndingGame:I,endGameHash:k})}catch(H){console.error("[CLAIM] Error claiming winnings:",H),alert("Failed to claim winnings. Please try again.")}finally{p(!1)}},[Z,ae]=D.useState(ru),[re,le]=D.useState("blue"),[we,ee]=D.useState(null),[ce,pe]=D.useState([]),[he,Ee]=D.useState([]),[We,ue]=D.useState("Waiting for opponent..."),[Ae,ke]=D.useState(or.LOBBY),[Ce,Ct]=D.useState(null),[Yr,Nt]=D.useState(null),[Dn,dn]=D.useState(0),[Ii,jl]=D.useState([]),[kc,Ln]=D.useState(!1),[mn,fo]=D.useState(null),[yn,Bs]=D.useState(null),[fb,HU]=D.useState(""),[Yo,u1]=D.useState(0),[um]=D.useState(!0);D.useEffect(()=>{document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode")},[]);const[Mn,d1]=D.useState(!1),[pb,Dc]=D.useState(null),[gb,mb]=D.useState(!1),[Ef,dm]=D.useState(null),[h1,hm]=D.useState(!1),[f1,IT]=D.useState(!0),[_f,Ba]=D.useState(null),[gs,xT]=D.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),[NT,TT]=D.useState([]),[xi,p1]=D.useState(null),Qo=D.useRef(null),po=D.useRef(null),g1=D.useRef(r);D.useEffect(()=>{g1.current=r},[r]),D.useEffect(()=>{console.log("[JOIN RECEIPT DEBUG] - joinGameHash:",S),console.log("[JOIN RECEIPT DEBUG] - isWaitingForJoinReceipt:",G),console.log("[JOIN RECEIPT DEBUG] - pendingJoinGameData:",yn),console.log("[JOIN RECEIPT DEBUG] - condition:",S&&!G&&yn),S&&!G&&yn&&(console.log("[CONTRACT] Join transaction confirmed:",S),r===yn.address&&(console.log("[CONTRACT] Setting playerColor to red for confirmed join transaction"),Ct("red"),Nt(yn.gameData.blue_player)),vs.updateGame(yn.inviteCode,{...yn.gameData,red_player:yn.address,game_state:"active"}).then(()=>{console.log("[CONTRACT] Firebase updated successfully after join confirmation"),ke(or.ACTIVE),ue("Game started!"),zl(yn.inviteCode),console.log("[CONTRACT] Clearing pending join data"),Bs(null)}).catch($=>{console.error("Error updating game in database:",$),ue("Joined game on contract but failed to update database"),Bs(null)}))},[S,G,yn,r]),D.useEffect(()=>{k&&!R&&(console.log("[CLAIM] End game transaction confirmed:",k),ue("Winnings claimed successfully! Transaction hash: "+k.slice(0,10)+"..."),p(!1))},[k,R]),D.useEffect(()=>{I===!1&&f&&!k&&(console.log("[CLAIM] End game transaction rejected or failed"),ue("Claim transaction was rejected. Please try again."),p(!1))},[I,f,k]),D.useEffect(()=>{console.log("[CREATE DEBUG] Transaction receipt handler - createGameHash:",v),console.log("[CREATE DEBUG] Transaction receipt handler - isWaitingForCreateReceipt:",B),console.log("[CREATE DEBUG] Transaction receipt handler - pendingGameData:",mn),console.log("[CREATE DEBUG] Transaction receipt handler - inviteCode:",P),console.log("[CREATE DEBUG] Transaction receipt handler - condition:",v&&!B&&mn&&!P),console.log("[CREATE DEBUG] Transaction receipt handler - individual conditions:"),console.log("[CREATE DEBUG] - createGameHash exists:",!!v),console.log("[CREATE DEBUG] - not waiting for receipt:",!B),console.log("[CREATE DEBUG] - pendingGameData exists:",!!mn),console.log("[CREATE DEBUG] - no inviteCode set:",!P),v&&!B&&mn&&!P?(console.log("[CONTRACT] Create game transaction confirmed:",v),vs.createGame(mn).then(()=>{console.log("[FIREBASE] Game created successfully after transaction confirmation"),L(mn.invite_code),Ct("blue"),dn(Yo),ke(or.WAITING),ue("Waiting for opponent to join..."),zl(mn.invite_code),setTimeout(()=>{Cf()},1e3),fo(null),Ln(!1)}).catch($=>{console.error("[FIREBASE] Error creating game after transaction:",$),ue("Transaction confirmed but failed to create game in database"),fo(null),Ln(!1)})):v&&!B&&(console.log("[CREATE DEBUG] Transaction confirmed but conditions not met for Firebase update:"),console.log("[CREATE DEBUG] - pendingGameData missing:",!mn),console.log("[CREATE DEBUG] - inviteCode already set:",!!P))},[v,B,mn,Yo]),D.useEffect(()=>{console.log("[PENDING DEBUG] pendingGameData changed:",mn)},[mn]),D.useEffect(()=>{if(console.log("[PENDING DEBUG] pendingJoinGameData changed:",yn),yn){const $=setTimeout(()=>{console.log("[AUTO-CLEAR] Pending join data has been stuck for too long, clearing automatically"),Bs(null)},3e4);return()=>clearTimeout($)}},[yn]),D.useEffect(()=>{console.log("[CREATE REJECTION DEBUG] - isCreatingGameContract:",w),console.log("[CREATE REJECTION DEBUG] - pendingGameData:",mn),console.log("[CREATE REJECTION DEBUG] - createGameHash:",v),console.log("[CREATE REJECTION DEBUG] - condition:",w===!1&&mn&&!v),w===!1&&mn&&!v&&(console.log("[CONTRACT] Create game transaction rejected or failed"),ue("Transaction was rejected. Please try again."),fo(null),Ln(!1))},[w,mn,v]),D.useEffect(()=>{C===!1&&yn&&!S&&(console.log("[CONTRACT] Join game transaction rejected or failed"),console.log("[CONTRACT] Rejection details - isJoiningGameContract:",C),console.log("[CONTRACT] Rejection details - pendingJoinGameData:",yn),console.log("[CONTRACT] Rejection details - joinGameHash:",S),console.log("[CONTRACT] Rejection details - address:",r),console.log("[CONTRACT] Rejection details - playerGameInviteCode:",N),ue("Transaction was rejected. Please try again."),F("","join transaction rejection"),Ct(null),dn(0),Nt(null),ke(or.LOBBY),ue(""),Bs(null))},[C,yn,S,r,N]),D.useEffect(()=>{r&&N!==void 0&&(g||(N!=="0x000000000000"&&M||N==="0x000000000000")&&RT())},[r,N,M,g]),D.useEffect(()=>{y(!1)},[r]),D.useEffect(()=>()=>{LT(),Qo.current&&Qo.current(),po.current&&clearTimeout(po.current)},[]);const RT=async()=>{if(r)try{if(console.log("[GAME_STATE] Checking for active games for player:",r),N&&N!=="0x000000000000"&&!M){console.log("[GAME_STATE] Waiting for contract data...");return}if(N&&N!=="0x000000000000"&&(console.log("[GAME_STATE] Found game in contract:",N),M)){let j,X,oe,Oe,Ie,$e;if(Array.isArray(M))[j,X,oe,Oe,Ie,$e]=M;else{console.error("[GAME_STATE] Unexpected contract data format:",M);return}if(console.log("[GAME_STATE] Parsed contract game data:",{player1:j,player2:X,isActive:oe,winner:Oe,inviteCode:Ie,wagerAmount:$e}),!Ie){console.error("[GAME_STATE] Invalid invite code:",Ie);return}const ut=j===r?"blue":"red",fn=j===r?X:j;console.log("[GAME_STATE] Player is",ut,"opponent is",fn),console.log("[DEBUG] Contract address comparison:"),console.log("[DEBUG] - player1 (blue):",j),console.log("[DEBUG] - player2 (red):",X),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - player1 === address:",j===r),console.log("[DEBUG] - player2 === address:",X===r);const vt=await vs.getGame(Ie);if(vt){if(console.log("[GAME_STATE] Found game in Firebase:",vt),L(Ie),Ct(ut),dn(parseFloat(vt.bet_amount)/1e18),Nt(fn),vt.game_state==="waiting")ke(or.WAITING),ue("Waiting for opponent to join..."),console.log("[GAME_STATE] Setting game mode to WAITING");else if(vt.game_state==="active"||vt.game_state==="test_update"){if(ke(or.ACTIVE),ue("Game in progress"),console.log("[GAME_STATE] Setting game mode to ACTIVE (from state:",vt.game_state,")"),vt.board){const Dr=vt.board;ae(Wl(Dr)),le(vt.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state:",vt.game_state,"- treating as active"),ke(or.ACTIVE),ue("Game in progress"),vt.board){const Dr=vt.board;ae(Wl(Dr)),le(vt.current_player||"blue")}zl(Ie),y(!0),console.log("[GAME_STATE] Game state loaded from Firebase"),console.log("[GAME_STATE] Current game mode:",Ae),console.log("[GAME_STATE] Game state from Firebase:",vt.game_state);return}else{console.log("[GAME_STATE] Game exists in contract but not in Firebase, syncing...");const Dr={invite_code:Ie,game_title:`Game ${Ie.slice(-6)}`,bet_amount:$e?$e.toString():"0",blue_player:j,red_player:X,game_state:oe?"active":"waiting",board:{positions:Sf(ru),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:Ka,is_public:!0};if(await vs.createGame(Dr),console.log("[GAME_STATE] Successfully synced game to Firebase:",Dr),L(Ie),Ct(ut),dn(parseFloat(Dr.bet_amount)/1e18),Nt(fn),oe?(ke(or.ACTIVE),ue("Game in progress")):(ke(or.WAITING),ue("Waiting for opponent to join...")),Dr.board){const sne=Dr.board;ae(Wl(sne)),le(Dr.current_player||"blue")}zl(Ie),y(!0),console.log("[GAME_STATE] Game state loaded after sync");return}}console.log("[GAME_STATE] No contract game found, checking Firebase...");const H=(await vs.getActiveGames()).filter(j=>j.chain==="sanko"&&(j.blue_player===r||j.red_player===r)&&["waiting","active"].includes(j.game_state));if(H&&H.length>0){const j=H[0];if(console.log("[GAME_STATE] Found active game in Firebase:",j),console.log("[DEBUG] Firebase fallback address comparison:"),console.log("[DEBUG] - blue_player:",j.blue_player),console.log("[DEBUG] - red_player:",j.red_player),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - blue_player === address:",j.blue_player===r),console.log("[DEBUG] - red_player === address:",j.red_player===r),L(j.invite_code),Ct(j.blue_player===r?"blue":"red"),dn(parseFloat(j.bet_amount)/1e18),Nt(j.blue_player===r?j.red_player:j.blue_player),j.game_state==="waiting")ke(or.WAITING),ue("Waiting for opponent to join...");else if(j.game_state==="active"||j.game_state==="test_update"){if(ke(or.ACTIVE),ue("Game in progress"),j.board){const X=j.board;ae(Wl(X)),le(j.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state in Firebase check:",j.game_state,"- treating as active"),ke(or.ACTIVE),ue("Game in progress"),j.board){const X=j.board;ae(Wl(X)),le(j.current_player||"blue")}zl(j.invite_code),y(!0),console.log("[GAME_STATE] Game state loaded successfully from Firebase");return}console.log("[GAME_STATE] No active games found"),ke(or.LOBBY),Ln(!1),y(!0)}catch($){console.error("[GAME_STATE] Error in checkPlayerGameState:",$)}},yb=async()=>{try{const $=await JX(20);TT($)}catch($){console.error("Error loading leaderboard:",$)}},m1=async $=>{if(console.log("[SCORE] updateScore called with:",$,"for address:",r),!r){console.error("[SCORE] No address available for score update");return}try{console.log("[SCORE] Updating score for address:",Mg(r)),await nx(r,$)?console.log("[SCORE] Successfully updated score for:",Mg(r)):console.error("[SCORE] Failed to update score"),console.log("[SCORE] updateScore completed successfully")}catch(H){console.error("[SCORE] Error updating score:",H)}},PT=async($,H,j)=>{try{if(console.log("[SCORE] Updating both players scores:",{winner:$,bluePlayer:H,redPlayer:j}),!H||!j){console.error("[SCORE] Missing player addresses from contract");return}await F9e($,H,j)?(console.log("[SCORE] Successfully updated both players scores"),await yb()):console.error("[SCORE] Failed to update both players scores")}catch(X){console.error("[SCORE] Error updating both players scores:",X)}},Cf=async()=>{try{const $=await vs.getOpenGames();console.log("[FIREBASE] Loaded open games:",$),await OT($),jl($)}catch($){console.error("Error loading open games:",$)}},OT=async $=>{if(console.log("[CLEANUP] Checking for ghost games..."),!O){console.log("[CLEANUP] Public client not available, skipping cleanup");return}for(const H of $)try{const j=H.invite_code;if(!j||typeof j!="string"||!j.startsWith("0x")||j.length!==14){console.warn("[CLEANUP] Invalid invite code for game:",H.invite_code,j);continue}const X=await O.readContract({address:Ka,abi:qf,functionName:"games",args:[j]});(!X||Array.isArray(X)&&X[0]==="0x0000000000000000000000000000000000000000")&&(console.log("[CLEANUP] Found ghost game:",H.invite_code,"- removing from Firebase"),await vs.deleteGame(H.invite_code),console.log("[CLEANUP] Ghost game removed:",H.invite_code))}catch(j){console.error("[CLEANUP] Error checking game:",H.invite_code,j)}},y1=async()=>{if(!(!r||Yo<=0)){console.log("[CREATE] Starting game creation - address:",r,"wager:",Yo),Ln(!0);try{const $=EGe();console.log("[CREATE] Generated invite code:",$);const H={invite_code:$,game_title:`Chess Game ${$.slice(-6)}`,bet_amount:(Yo*1e18).toString(),blue_player:r,game_state:"waiting",board:{positions:Sf(ru),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:Ka,is_public:!0,created_at:new Date().toISOString()};console.log("[CREATE] Game data prepared:",H),console.log("[CREATE] Calling contract with args:",[$,BigInt(Math.floor(Yo*1e18))]),m({address:Ka,abi:qf,functionName:"createGame",args:[$],value:BigInt(Math.floor(Yo*1e18))}),console.log("[CREATE] Contract call initiated, setting pending data"),console.log("[CREATE] Pending game data being set:",H),fo(H),ue("Creating game... Please confirm transaction in your wallet.")}catch($){console.error("[CREATE] Error creating game:",$),ue("Failed to create game. Please try again.")}finally{Ln(!1)}}},kT=async $=>{if(r)try{const H=await vs.getGame($);if(!H||H.game_state!=="waiting"){ue("Game not found or already full");return}const j=parseFloat(H.bet_amount),X=j/1e18;if(L($),Ct("red"),dn(X),Nt(H.blue_player),console.log("[JOIN] Setting up join game with data:",{inviteCode:$,playerColor:"red",wagerAmountTDMT:X,opponent:H.blue_player,address:r}),r===H.blue_player){console.error("[JOIN] Player cannot join their own game"),ue("You cannot join your own game");return}if(N&&N!=="0x000000000000"){console.error("[JOIN] Player already has an active game:",N),ue("You already have an active game");return}if(typeof window<"u"&&window.ethereum)try{const Oe=await window.ethereum.request({method:"eth_chainId"}),Ie=await window.ethereum.request({method:"eth_accounts"});console.log("[JOIN] Wallet state check - chainId:",Oe),console.log("[JOIN] Wallet state check - connectedAccounts:",Ie),console.log("[JOIN] Wallet state check - currentAddress:",r),console.log("[JOIN] Wallet state check - isConnected:",s)}catch(Oe){console.error("[JOIN] Error checking wallet state:",Oe)}console.log("[JOIN] Contract call parameters - contractAddress:",Ka),console.log("[JOIN] Contract call parameters - functionName: joinGame"),console.log("[JOIN] Contract call parameters - args:",[$]);const oe=BigInt(j);console.log("[JOIN] Contract call parameters - wagerAmount from Firebase (wei):",j),console.log("[JOIN] Contract call parameters - wagerValue (wei):",oe),console.log("[JOIN] Contract call parameters - value as hex:","0x"+oe.toString(16)),console.log("[JOIN] Contract call parameters - value in wei:",oe.toString()),ue("Joining game... Please confirm transaction in your wallet."),setTimeout(()=>{console.log("[JOIN] About to call writeJoinGame..."),console.log("[JOIN] Final contract call parameters:"),console.log("[JOIN] - address:",Ka),console.log("[JOIN] - functionName: joinGame"),console.log("[JOIN] - args:",[$]),console.log("[JOIN] - value:",oe),console.log("[JOIN] - value as BigInt:",oe.toString()),A({address:Ka,abi:qf,functionName:"joinGame",args:[$],value:oe}),console.log("[JOIN] writeJoinGame called, setting pending data..."),Bs({inviteCode:$,gameData:H,address:r}),console.log("[JOIN] Pending data set"),console.log("[JOIN] Transaction initiated - waiting for user confirmation in MetaMask...")},500)}catch(H){console.error("[JOIN] Error joining game:",H),ue("Failed to join game. Please try again."),F("","join game error"),Ct(null),dn(0),Nt(null)}},[GU,qU]=D.useState(null),[VU,DT]=D.useState(""),[Af,KU]=D.useState(!0),LT=()=>{console.log("[FIREBASE] No fallback to stop")},zl=$=>{console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",$),Qo.current&&(console.log("[FIREBASE] Removing existing subscription"),Qo.current());const H=vs.subscribeToGame($,j=>{const X=g1.current;if(console.log("=== [DEBUG] FIREBASE SUBSCRIPTION CALLBACK ==="),console.log("[DEBUG] Current wallet address (from addressRef):",X),console.log("[DEBUG] Current wallet address (from useAccount):",r),console.log("[DEBUG] Game data received:",j),console.log("[DEBUG] Blue player from Firebase:",j==null?void 0:j.blue_player),console.log("[DEBUG] Red player from Firebase:",j==null?void 0:j.red_player),console.log("[DEBUG] Blue player type:",typeof(j==null?void 0:j.blue_player)),console.log("[DEBUG] Red player type:",typeof(j==null?void 0:j.red_player)),console.log("[DEBUG] Current address type:",typeof X),console.log("[DEBUG] Current playerColor state:",Ce),console.log("[DEBUG] Pending join game data:",!!yn),!j){console.log("[DEBUG] No game data received");return}if(yn&&X===yn.address)console.log("[DEBUG] Pending join transaction detected - preserving playerColor:",Ce),j.game_state==="active"&&(console.log("[AUTO-CLEAR] Game is active, clearing pending join data"),Bs(null)),j.blue_player&&j.red_player&&j.red_player!=="0x0000000000000000000000000000000000000000"&&Nt(j.blue_player===X?j.red_player:j.blue_player);else if(X&&j.blue_player&&j.red_player&&j.red_player!=="0x0000000000000000000000000000000000000000"){console.log("[DEBUG] Both players present, comparing addresses...");const Oe=X.toLowerCase()===j.blue_player.toLowerCase(),Ie=X.toLowerCase()===j.red_player.toLowerCase();console.log("[DEBUG] Blue player match:",Oe),console.log("[DEBUG] Red player match:",Ie),console.log("[DEBUG] Blue comparison:",`${X.toLowerCase()} === ${j.blue_player.toLowerCase()}`),console.log("[DEBUG] Red comparison:",`${X.toLowerCase()} === ${j.red_player.toLowerCase()}`),Oe&&Ce!=="blue"?(console.log("[DEBUG] Setting player color to BLUE"),Ct("blue"),Nt(j.red_player)):Ie&&Ce!=="red"?(console.log("[DEBUG] Setting player color to RED"),Ct("red"),Nt(j.blue_player)):!Oe&&!Ie&&Ce!==null?(console.log("[DEBUG] No address match found - setting playerColor to null"),Ct(null),Nt(null)):console.log("[DEBUG] Player color already correctly set to:",Ce)}else{if(console.log("[DEBUG] Missing player data or red player is zero address - using contract data as fallback"),console.log("[DEBUG] - currentAddress:",!!X),console.log("[DEBUG] - blue_player:",!!j.blue_player),console.log("[DEBUG] - red_player:",j==null?void 0:j.red_player),console.log("[DEBUG] - Current playerColor state:",Ce),console.log("[DEBUG] - Contract game data available:",!!M),Ce&&(Ce==="blue"||Ce==="red")){console.log("[DEBUG] Preserving existing valid playerColor:",Ce);return}else if(M&&Array.isArray(M)&&X){const[Oe,Ie]=M;if(Oe&&Ie){const $e=Oe.toLowerCase()===X.toLowerCase()?"blue":"red",ut=Oe.toLowerCase()===X.toLowerCase()?Ie:Oe;console.log("[DEBUG] Setting playerColor from contract fallback:",$e),Ct($e),Nt(ut)}}else console.log("[DEBUG] No valid data available, but preserving existing playerColor if valid"),(!Ce||Ce!=="blue"&&Ce!=="red")&&(console.log("[DEBUG] Setting playerColor to null"),Ct(null));j.blue_player&&j.red_player&&j.red_player!=="0x0000000000000000000000000000000000000000"&&Nt(j.blue_player===X?j.red_player:j.blue_player)}console.log("=== [DEBUG] END FIREBASE SUBSCRIPTION CALLBACK ==="),console.log("[WAGER DEBUG] bet_amount from Firebase:",j.bet_amount),console.log("[WAGER DEBUG] bet_amount type:",typeof j.bet_amount),console.log("[WAGER DEBUG] Full gameData:",j),console.log("[WAGER DEBUG] parsed value:",j.bet_amount?parseFloat(j.bet_amount):"null"),console.log("[WAGER DEBUG] converted to TDMT:",j.bet_amount?parseFloat(j.bet_amount)/1e18:"null");let oe=0;j.bet_amount&&!isNaN(parseFloat(j.bet_amount))?(oe=parseFloat(j.bet_amount)/1e18,console.log("[WAGER DEBUG] Setting wager from Firebase:",oe)):M&&Array.isArray(M)&&M[5]?(oe=parseFloat(M[5].toString())/1e18,console.log("[WAGER DEBUG] Setting wager from contract data:",oe)):console.log("[WAGER DEBUG] Setting wager to 0 (no valid bet_amount found)"),dn(oe),j.board&&ae(Wl(j.board)),j.current_player&&le(j.current_player),j.game_state==="active"?(ke(or.ACTIVE),ue("Game in progress")):j.game_state==="finished"?(ke(or.FINISHED),ue("Game finished")):j.game_state==="waiting"&&(ke(or.WAITING),ue("Waiting for opponent to join..."))});Qo.current=H,console.log("[FIREBASE] Firebase subscription setup complete for game:",$)};D.useEffect(()=>(P&&zl(P),()=>{Qo.current&&Qo.current()}),[P,r]),D.useEffect(()=>{if(M&&!Ce&&r){console.log("[FALLBACK] Setting playerColor from contract data");let $,H,j,X,oe,Oe;if(Array.isArray(M))[$,H,j,X,oe,Oe]=M;else{console.error("[FALLBACK] Unexpected contract data format:",M);return}const Ie=$===r?"blue":"red",$e=$===r?H:$;console.log("[FALLBACK] Contract-based player assignment:"),console.log("[FALLBACK] - player1 (blue):",$),console.log("[FALLBACK] - player2 (red):",H),console.log("[FALLBACK] - current address:",r),console.log("[FALLBACK] - assigned color:",Ie),console.log("[FALLBACK] - opponent:",$e),console.log("[FALLBACK] - inviteCode from contract:",oe),Ct(Ie),Nt($e),!P&&oe&&(console.log("[FALLBACK] Setting missing inviteCode:",oe),L(oe)),P&&vs.getGame(P).then(ut=>{ut&&(!ut.blue_player||!ut.red_player)&&(console.log("[AUTO-FIX] Detected missing player data, attempting to fix..."),Qte()),ut&&ut.game_state==="active"&&yn&&(console.log("[AUTO-CLEAR] Game is confirmed active, clearing pending join data"),Bs(null))}).catch(ut=>{console.error("[AUTO-FIX] Error checking game data for auto-fix:",ut)})}},[M,Ce,r,P]),D.useEffect(()=>{if(W&&yn){console.log("[RECEIPT] Join transaction confirmed!"),console.log("[RECEIPT] Transaction hash:",W.transactionHash),console.log("[RECEIPT] Pending data:",yn);const{inviteCode:$,gameData:H,address:j}=yn;vs.updateGame($,{red_player:j,blue_player:H.blue_player,bet_amount:H.bet_amount,game_state:"active",last_move:null,board:{positions:Sf(ru),rows:8,cols:8},current_player:"blue"}).then(()=>{console.log("[RECEIPT] Firebase updated successfully after join confirmation"),ue("Game started! You are the red player."),ke(or.ACTIVE),Bs(null)}).catch(X=>{console.error("[RECEIPT] Error updating Firebase after join confirmation:",X),ue("Game joined but failed to update game state. Please refresh.")})}},[W,yn]),D.useEffect(()=>{x&&(console.error("[ERROR] Join transaction failed:",x),ue(`Failed to join game: ${x.message||"Transaction rejected"}`),F("","join game error effect"),Ct(null),dn(0),Nt(null),Bs(null))},[x]);const Sf=$=>{const H={};return $.forEach((j,X)=>{j.forEach((oe,Oe)=>{H[`${X}_${Oe}`]=oe})}),H},Wl=$=>{if(!$||!$.positions)return console.warn("[BOARD] No board data available, using initial board"),ru;if(console.log("[BOARD] Attempting to reconstruct board from:",$),console.log("[BOARD] Positions type:",typeof $.positions),console.log("[BOARD] Positions is array:",Array.isArray($.positions)),console.log("[BOARD] Positions value:",$.positions),typeof $.positions=="object"&&!Array.isArray($.positions)){const H=$.positions,j=$.rows||8,X=$.cols||8,oe=Array(j).fill(null).map(()=>Array(X).fill(null));for(let Oe=0;Oe<j;Oe++)for(let Ie=0;Ie<X;Ie++){const $e=`${Oe}_${Ie}`;oe[Oe][Ie]=H[$e]||null}return console.log("[BOARD] Reconstructed from flat structure:",oe),oe}return Array.isArray($.positions)?(console.log("[BOARD] Found array structure, length:",$.positions.length),$.positions.length===8?$.positions.every((j,X)=>{const oe=Array.isArray(j)&&j.length===8;return oe||console.warn(`[BOARD] Row ${X} is invalid:`,j,"Type:",typeof j,"Length:",j==null?void 0:j.length),oe})?(console.log("[BOARD] Using legacy array structure"),$.positions):(console.warn("[BOARD] Legacy array structure is malformed, using initial board"),ru):(console.warn("[BOARD] Array has wrong length:",$.positions.length,"expected 8"),ru)):(console.warn("[BOARD] Unknown board structure, using initial board:",$),ru)},fm=$=>`${$.slice(0,6)}...${$.slice(-4)}`,Qr=$=>$&&$===$.toUpperCase()?"red":"blue",pm=($,H)=>$>=0&&$<8&&H>=0&&H<8,If=($,H)=>{const j=H==="red"?"K":"k";let X=-1,oe=-1;for(let Ie=0;Ie<8;Ie++){for(let $e=0;$e<8;$e++)if($[Ie][$e]===j){X=Ie,oe=$e;break}if(X!==-1)break}return X===-1?!1:gm(X,oe,H==="red"?"blue":"red",$)},gm=($,H,j,X)=>{if(!X||!Array.isArray(X)||X.length!==8)return console.warn("[SAFETY] Invalid board structure in isSquareUnderAttack:",X),!1;for(let oe=0;oe<8;oe++){if(!X[oe]||!Array.isArray(X[oe])||X[oe].length!==8)return console.warn("[SAFETY] Invalid board row structure:",X[oe]),!1;for(let Oe=0;Oe<8;Oe++){const Ie=X[oe][Oe];if(Ie&&Qr(Ie)===j&&$t(Ie,oe,Oe,$,H,!1,j,X,!0))return!0}}return!1},q=($,H,j,X,oe,Oe=Z)=>{const Ie=Oe[$][H];if(!Ie)return!1;const $e=Oe.map(ut=>[...ut]);return $e[j][X]=Ie,$e[$][H]=null,If($e,oe)},J=($,H,j,X,oe,Oe)=>{const Ie=$==="blue"?-1:1,$e=$==="blue"?6:1;if(!pm(X,oe)||$==="blue"&&X>=H||$==="red"&&X<=H)return!1;if(j===oe&&X===H+Ie)return Oe[X][oe]===null;if(j===oe&&H===$e&&X===H+2*Ie)return Oe[H+Ie][j]===null&&Oe[X][oe]===null;if(Math.abs(j-oe)===1&&X===H+Ie){const ut=Oe[X][oe];if(ut!==null&&Qr(ut)!==$)return!0;if(ut===null&&gs.lastPawnDoubleMove){const{row:fn,col:vt}=gs.lastPawnDoubleMove;if(fn===H&&vt===oe){const Dr=Oe[H][oe];if(Dr&&Dr.toLowerCase()==="p"&&Qr(Dr)!==$)return!0}}}return!1},ie=($,H,j,X,oe)=>$===j||H===X,se=($,H,j,X)=>{const oe=Math.abs($-j),Oe=Math.abs(H-X);return oe===2&&Oe===1||oe===1&&Oe===2},te=($,H,j,X,oe)=>Math.abs($-j)===Math.abs(H-X),Re=($,H,j,X,oe)=>ie($,H,j,X)||te($,H,j,X),Pe=($,H,j,X,oe)=>{const Oe=Math.abs(H-X),Ie=Math.abs(j-oe);if(Oe<=1&&Ie<=1)return!0;if(Oe===0&&Ie===2){if($==="blue"&&!gs.blueKingMoved){if(oe===6&&!gs.blueRooksMove.right||oe===2&&!gs.blueRooksMove.left)return!0}else if($==="red"&&!gs.redKingMoved&&(oe===6&&!gs.redRooksMove.right||oe===2&&!gs.redRooksMove.left))return!0}return!1},tt=($,H,j,X,oe)=>{const Oe=$===j?0:(j-$)/Math.abs(j-$),Ie=H===X?0:(X-H)/Math.abs(X-H);let $e=$+Oe,ut=H+Ie;for(;$e!==j||ut!==X;){if(oe[$e][ut]!==null)return!1;$e+=Oe,ut+=Ie}return!0},$t=($,H,j,X,oe,Oe=!0,Ie=Qr($),$e=Z,ut=!1)=>{if(!$||!pm(X,oe))return!1;const fn=$e[X][oe];if(fn&&Qr(fn)===Ie)return!1;let vt=!1;switch($.toUpperCase()){case"P":vt=J(Ie,H,j,X,oe,$e);break;case"R":vt=ie(H,j,X,oe)&&tt(H,j,X,oe,$e);break;case"N":vt=se(H,j,X,oe);break;case"B":vt=te(H,j,X,oe)&&tt(H,j,X,oe,$e);break;case"Q":vt=Re(H,j,X,oe)&&tt(H,j,X,oe,$e);break;case"K":vt=Pe(Ie,H,j,X,oe);break}return!(!vt||Oe&&q(H,j,X,oe,Ie,$e))},tn=($,H=Z,j=re)=>{const X=[],oe=H[$.row][$.col];if(!oe||Qr(oe)!==j)return X;const Oe=oe.toLowerCase();if(Oe==="p"){const Ie=j==="blue"?-1:1,$e=j==="blue"?6:1,ut=$.row+Ie;if(ut>=0&&ut<8&&$t(oe,$.row,$.col,ut,$.col,!0,j,H,!0)&&X.push({row:ut,col:$.col}),$.row===$e){const fn=$.row+2*Ie;fn>=0&&fn<8&&$t(oe,$.row,$.col,fn,$.col,!0,j,H,!0)&&X.push({row:fn,col:$.col})}for(const fn of[-1,1]){const vt=$.col+fn,Dr=$.row+Ie;vt>=0&&vt<8&&Dr>=0&&Dr<8&&$t(oe,$.row,$.col,Dr,vt,!0,j,H,!0)&&X.push({row:Dr,col:vt})}}else if(Oe==="n"){const Ie=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[$e,ut]of Ie){const fn=$.row+$e,vt=$.col+ut;fn>=0&&fn<8&&vt>=0&&vt<8&&$t(oe,$.row,$.col,fn,vt,!0,j,H,!0)&&X.push({row:fn,col:vt})}}else for(let Ie=0;Ie<8;Ie++)for(let $e=0;$e<8;$e++)$t(oe,$.row,$.col,Ie,$e,!0,j,H,!0)&&X.push({row:Ie,col:$e});return X},nr=($,H=Z)=>{if(!If(H,$))return!1;for(let j=0;j<8;j++)for(let X=0;X<8;X++){const oe=H[j][X];if(oe&&Qr(oe)===$&&tn({row:j,col:X},H,$).length>0)return!1}return!0},hn=($,H=Z)=>{if(If(H,$))return!1;for(let j=0;j<8;j++)for(let X=0;X<8;X++){const oe=H[j][X];if(oe&&Qr(oe)===$&&tn({row:j,col:X},H,$).length>0)return!1}return!0},wb=($,H)=>{if(console.log("[CLICK] Square clicked:",{row:$,col:H}),console.log("[CLICK] Game mode:",Ae,"Player color:",Ce),console.log("[CLICK] Current player:",re,"Player color:",Ce),Ae!==or.ACTIVE||!Ce){console.log("[CLICK] Game not active or no player color");return}const j=Z[$][H],X=j?Qr(j):null;if(console.log("[CLICK] Piece at square:",j,"Piece color:",X),re!==Ce){console.log("[CLICK] Not player's turn. Current:",re,"Player:",Ce);return}if(j&&X===Ce){ee({row:$,col:H});const oe=tn({row:$,col:H});pe(oe);return}if(we&&ce.some(oe=>oe.row===$&&oe.col===H)){Gte(we,{row:$,col:H}),ee(null),pe([]);return}ee(null),pe([])},Gte=async($,H)=>{if(console.log("[PROMOTION DEBUG] makeMove called with:",{from:$,to:H,playerColor:Ce,currentPlayer:re}),!Ce||re!==Ce){console.log("[PROMOTION DEBUG] Early return - playerColor:",Ce,"currentPlayer:",re);return}const j=Z[$.row][$.col];if(!j){console.log("[PROMOTION DEBUG] No piece at position:",$);return}if(console.log("[PROMOTION DEBUG] Piece:",j,"isPawn:",j.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] Current player:",re,"to.row:",H.row),console.log("[PROMOTION DEBUG] Player color:",Ce),console.log("[PROMOTION DEBUG] Promotion condition check:"),console.log("[PROMOTION DEBUG] - piece.toUpperCase() === P:",j.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] - currentPlayer === red && to.row === 7:",re==="red"&&H.row===7),console.log("[PROMOTION DEBUG] - currentPlayer === blue && to.row === 0:",re==="blue"&&H.row===0),console.log("[PROMOTION DEBUG] - Full condition:",j.toUpperCase()==="P"&&(re==="red"&&H.row===7||re==="blue"&&H.row===0)),j.toUpperCase()==="P"&&(re==="red"&&H.row===7||re==="blue"&&H.row===0)){console.log("[PROMOTION] Showing promotion dialog for piece:",j,"at position:",H),dm({from:$,to:H}),mb(!0);return}await YU($,H)},YU=async($,H,j="q")=>{if(!Ce||re!==Ce||!Z[$.row][$.col])return;const Oe=Z[H.row][H.col]!==null;if(bb(Oe?"capture":"move"),Oe){Ba({row:H.row,col:H.col,show:!0}),setTimeout(()=>{QU($,H,j),Ba(null)},500);return}QU($,H,j)},QU=async($,H,j="q")=>{if(!Ce||re!==Ce)return;const X=Z[$.row][$.col];if(!X)return;const oe=Z.map(fn=>[...fn]);let Oe=X;console.log("[PROMOTION DEBUG] executeMoveAfterAnimation - checking promotion:"),console.log("[PROMOTION DEBUG] - piece:",X,"isPawn:",X.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] - playerColor:",Ce,"to.row:",H.row),console.log("[PROMOTION DEBUG] - promotion condition:",X.toUpperCase()==="P"&&(Ce==="red"&&H.row===7||Ce==="blue"&&H.row===0)),console.log("[PROMOTION DEBUG] - promotionPiece:",j),X.toUpperCase()==="P"&&(Ce==="red"&&H.row===7||Ce==="blue"&&H.row===0)&&(Oe=Ce==="red"?j.toUpperCase():j.toLowerCase(),console.log("[PROMOTION DEBUG] - Promoting pawn to:",Oe)),Vte(oe,$,H,X),oe[H.row][H.col]=Oe,oe[$.row][$.col]=null,Kte($,H,X);const Ie=re==="blue"?"red":"blue";If(oe,Ie)&&bb("check");let $e="active",ut=null;nr(Ie,oe)?($e="finished",ut=re,ue(`${re==="red"?"Red":"Blue"} wins by checkmate!`),bb("checkmate"),qte(),console.log("[SCORE] Updating scores - Winner:",re,"Loser:",Ie),console.log("[SCORE] Contract game data:",M),console.log("[SCORE] Player game invite code:",N),M&&M.length>=2?(console.log("[SCORE] Using contract data for both players update"),await PT(re,M[0],M[1])):(console.log("[SCORE] Contract data not available, falling back to single player update"),await m1(re===Ce?"win":"loss"),await yb()),ut===Ce&&(console.log("[CONTRACT] Triggering automatic payout for winner:",ut),setTimeout(()=>{V()},2e3))):hn(Ie,oe)&&($e="finished",ue("Game ended in stalemate"),console.log("[SCORE] Updating scores for draw"),await m1("draw"));try{if(!P){console.error("[BUG] inviteCode is missing when trying to update game!"),ue("Game code missing. Please reload or rejoin the game.");return}console.log("[DEBUG] About to update game. inviteCode:",P,"gameData:",{board:{positions:oe},current_player:Ie,game_state:$e,winner:ut,last_move:{from:$,to:H}});const vt={...await vs.getGame(P),board:{positions:Sf(oe),rows:8,cols:8},current_player:Ie,game_state:$e,winner:ut,last_move:{from:$,to:H}};console.log("[FIREBASE] Storing data in Firebase:",vt),await vs.updateGame(P,vt),console.log("[FIREBASE] Game updated successfully"),console.log("[FIREBASE] Real-time event should be delivered immediately")}catch(fn){console.error("[DATABASE] Error updating game:",fn)}ae(oe),le(Ie),p1({from:$,to:H}),mb(!1),dm(null)},qte=()=>{hm(!0),bb("victory"),po.current&&clearTimeout(po.current),po.current=setTimeout(()=>{hm(!1)},5e3)},Vte=($,H,j,X)=>{if(X.toLowerCase()==="k"&&Math.abs(H.col-j.col)===2){if(j.col===6)$[H.row][7]=null,$[H.row][5]=Qr(X)==="blue"?"r":"R";else if(j.col===2){const oe=$[H.row][3];$[H.row][0]=null,$[H.row][3]=Qr(X)==="blue"?"r":"R",oe&&oe.toLowerCase()==="q"&&($[H.row][4]=oe)}}X.toLowerCase()==="p"&&Math.abs(H.col-j.col)===1&&$[j.row][j.col]===null&&gs.lastPawnDoubleMove&&gs.lastPawnDoubleMove.row===H.row&&gs.lastPawnDoubleMove.col===j.col&&($[H.row][j.col]=null)},Kte=($,H,j)=>{const X={...gs};j.toLowerCase()==="k"?Qr(j)==="blue"?X.blueKingMoved=!0:X.redKingMoved=!0:j.toLowerCase()==="r"&&(Qr(j)==="blue"?($.col===0&&(X.blueRooksMove.left=!0),$.col===7&&(X.blueRooksMove.right=!0)):($.col===0&&(X.redRooksMove.left=!0),$.col===7&&(X.redRooksMove.right=!0))),j.toLowerCase()==="p"&&Math.abs($.row-H.row)===2?X.lastPawnDoubleMove={row:H.row,col:H.col}:X.lastPawnDoubleMove=null,xT(X)},bb=$=>{if(f1)try{const H=new Audio(`/images/${$}.mp3`);H.volume=.3,H.play().catch(j=>console.warn("Audio play failed:",j))}catch(H){console.warn("Sound play failed:",H)}},Yte=async()=>{if(P)try{console.log("[RESET] Resetting corrupted game data for:",P);const $={board:{positions:Sf(ru),rows:8,cols:8},current_player:"blue",game_state:"active",winner:null,last_move:null};await vs.updateGame(P,$),console.log("[RESET] Successfully reset game data"),ue("Game reset successfully. You can now make moves.")}catch($){console.error("[RESET] Error resetting game data:",$),ue("Failed to reset game. Please try again.")}},JU=async()=>{try{console.warn("[STUCK GAMES] checkStuckGames is not implemented.")}catch($){console.error("Error checking stuck games:",$)}},Qte=async()=>{if(console.log("[FIX] Attempting to fix missing player data..."),!P||!r){console.log("[FIX] Missing inviteCode or address");return}try{const $=await vs.getGame(P);if(!$){console.log("[FIX] No game data found");return}if(console.log("[FIX] Current game data:",$),M&&Array.isArray(M)){const[H,j,X,oe,Oe,Ie]=M;console.log("[FIX] Contract data for fixing:"),console.log("[FIX] - Contract player1 (blue):",H),console.log("[FIX] - Contract player2 (red):",j),console.log("[FIX] - Contract isActive:",X),console.log("[FIX] - Firebase blue_player:",$.blue_player),console.log("[FIX] - Firebase red_player:",$.red_player),console.log("[FIX] - Firebase game_state:",$.game_state);let $e=!1;const ut={};j&&j!=="0x0000000000000000000000000000000000000000"&&(!$.red_player||$.red_player==="0x0000000000000000000000000000000000000000")&&(console.log("[FIX] Fixing red player address in Firebase"),ut.red_player=j,$e=!0),H&&H!=="0x0000000000000000000000000000000000000000"&&(!$.blue_player||$.blue_player==="0x0000000000000000000000000000000000000000")&&(console.log("[FIX] Fixing blue player address in Firebase"),ut.blue_player=H,$e=!0),H&&j&&H!=="0x0000000000000000000000000000000000000000"&&j!=="0x0000000000000000000000000000000000000000"&&($.game_state==="waiting"||!$.game_state)&&(console.log("[FIX] Activating game in Firebase"),ut.game_state="active",ut.current_player="blue",$e=!0),X&&$.game_state!=="active"&&(console.log("[FIX] Syncing game state to active"),ut.game_state="active",$e=!0),$e?(console.log("[FIX] Updating Firebase with:",ut),await vs.updateGame(P,ut),console.log("[FIX] Firebase updated successfully")):console.log("[FIX] No missing player data to fix")}else console.log("[FIX] No contract data available for fixing")}catch($){console.error("[FIX] Error fixing missing player data:",$)}},Jte=($,H)=>{if(!Z||!Array.isArray(Z)||Z.length!==8||!Z[$]||!Array.isArray(Z[$])||Z[$].length!==8)return console.warn("[SAFETY] Invalid board structure in renderSquare:",{row:$,col:H,board:Z}),b.jsx("div",{className:"square error",children:b.jsx("div",{className:"error-indicator",children:"!"})},`${$}-${H}`);const j=Z[$][H],X=(we==null?void 0:we.row)===$&&(we==null?void 0:we.col)===H,oe=ce.some($e=>$e.row===$&&$e.col===H),Oe=xi&&(xi.from.row===$&&xi.from.col===H||xi.to.row===$&&xi.to.col===H),Ie=j&&j.toUpperCase()==="K"&&If(Z,Qr(j));return b.jsxs("div",{className:`square ${X?"selected":""} ${oe?"legal-move":""} ${Oe?"last-move":""} ${Ie?"square-in-check":""}`,onClick:()=>wb($,H),children:[j&&b.jsx("div",{className:"piece",style:{backgroundImage:FO[j]?`url(${FO[j]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),oe&&b.jsx("div",{className:"legal-move-indicator"})]},`${$}-${H}`)},Zte=()=>{if(console.log("[PROMOTION DEBUG] renderPromotionDialog called - showPromotion:",gb,"promotionMove:",Ef),!gb||!Ef)return console.log("[PROMOTION DEBUG] Not rendering dialog - showPromotion:",gb,"promotionMove:",Ef),null;const $=re==="blue"?["q","r","b","n"]:["Q","R","B","N"];return b.jsx("div",{className:"promotion-dialog",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.9)",border:"2px solid gold",borderRadius:"8px",padding:"20px",zIndex:1e3},children:b.jsxs("div",{className:"promotion-content",children:[b.jsx("h3",{style:{color:"white",marginBottom:"15px"},children:"Choose promotion piece:"}),b.jsx("div",{className:"promotion-pieces",style:{display:"flex",gap:"10px"},children:$.map(H=>b.jsx("div",{className:"promotion-piece",onClick:()=>{console.log("[PROMOTION] Selected piece:",H),YU(Ef.from,Ef.to,H),mb(!1),dm(null)},style:{cursor:"pointer",padding:"10px",border:"2px solid white",borderRadius:"4px",background:"rgba(255, 255, 255, 0.1)"},children:b.jsx("img",{src:FO[H],alt:H,style:{width:"40px",height:"40px"}})},H))})]})})},Xte=()=>b.jsxs("div",{className:"piece-gallery",children:[b.jsx("h3",{children:"Chess Pieces"}),b.jsx("div",{className:"piece-gallery-grid",children:vGe.map($=>b.jsxs("div",{className:"piece-gallery-item",onClick:()=>{Dc(pb===$.key?null:$.key)},children:[b.jsx("img",{src:$.img,alt:$.name,className:"piece-gallery-img"}),b.jsx("div",{className:"piece-gallery-name",children:$.name}),pb===$.key&&b.jsx("div",{className:"piece-gallery-desc",children:$.desc})]},$.key))})]}),ZU=()=>b.jsxs("div",{className:"chess-multiplayer-lobby",children:[b.jsx("h2",{children:"Multiplayer Chess Lobby"}),s?b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"status-bar",children:["Connected: ",fm(r)]}),b.jsxs("div",{className:"lobby-content",children:[b.jsxs("div",{className:"open-games",children:[b.jsx("h3",{children:"Open Games"}),b.jsxs("div",{className:"games-list",children:[Ii.map($=>b.jsxs("div",{className:"game-item",children:[b.jsxs("div",{className:"game-info",children:[b.jsx("div",{className:"game-id",children:$.game_title||"Untitled Game"}),b.jsxs("div",{className:"wager",children:["Wager: ",parseFloat($.bet_amount)," tDMT"]}),b.jsxs("div",{className:"title",children:["Created by: ",fm($.blue_player)]})]}),b.jsx("button",{className:"join-btn",onClick:()=>kT($.invite_code),children:"Join Game"})]},$.invite_code)),Ii.length===0&&b.jsx("div",{className:"no-games",children:"No open games available"})]})]}),b.jsxs("div",{className:"actions",children:[b.jsx("button",{className:"create-btn",onClick:()=>Ln(!0),disabled:kc,children:"Create New Game"}),b.jsx("button",{className:"resume-btn",onClick:JU,style:{marginTop:"10px",background:"rgba(0, 255, 0, 0.1)",border:"2px solid #00ff00",color:"#00ff00",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:"Check for Active Games"}),b.jsx("button",{onClick:Cf,style:{marginTop:"10px",background:"rgba(0, 123, 255, 0.1)",border:"2px solid #007bff",color:"#007bff",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:"🔄 Refresh Lobby"})]}),kc&&b.jsxs("div",{className:"create-form",children:[b.jsx("h3",{children:"Create New Game"}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Wager (tDMT):"}),b.jsx("input",{type:"number",value:Yo,onChange:$=>u1(Number($.target.value)),placeholder:"0.1",min:"0",step:"0.1"})]}),b.jsxs("div",{className:"form-actions",children:[b.jsx("button",{className:"create-confirm-btn",onClick:y1,disabled:Yo<=0,children:"Create Game"}),b.jsx("button",{className:"cancel-btn",onClick:()=>Ln(!1),children:"Cancel"})]})]})]})]}):b.jsx("div",{className:"wallet-notice",children:"Please connect your wallet to play multiplayer chess"})]}),ene=()=>b.jsxs("div",{className:"chess-multiplayer-waiting",children:[b.jsx("h2",{children:"Waiting for Opponent"}),b.jsxs("div",{className:"game-code",children:["Invite Code: ",b.jsx("strong",{children:P})]}),b.jsxs("div",{className:"game-info",children:[b.jsxs("p",{children:["Wager: ",Dn," tDMT"]}),b.jsx("p",{children:"Share this invite code with your opponent"})]})]}),tne=()=>b.jsxs("div",{className:"chess-game",children:[b.jsxs("div",{className:"chess-header",children:[b.jsx("h2",{children:"♔ Multiplayer Chess"}),b.jsxs("div",{className:"chess-controls",children:[e&&b.jsx("button",{onClick:e,className:"minimize-btn",title:"Minimize",children:"_"}),b.jsx("button",{onClick:t,className:"close-btn",title:"Close",children:"×"})]})]}),b.jsxs("div",{className:"game-info",children:[b.jsxs("div",{className:"game-status-section",children:[b.jsx("span",{className:`status ${We.includes("Check")?"check-status":""}`,children:We}),b.jsxs("span",{className:`current-player ${re==="red"?"red-turn":"blue-turn"}`,children:["Current: ",re==="red"?"♔ Red":"♔ Blue"]})]}),b.jsxs("div",{className:"game-details-section",children:[b.jsxs("span",{className:"wager-display",children:["💰 ",Dn," tDMT"]}),Yr&&b.jsxs("span",{className:"opponent-info",children:["vs ",fm(Yr)]})]}),Ae===or.FINISHED&&b.jsx("button",{onClick:V,disabled:f,className:"claim-winnings-btn",children:f?"⏳ Claiming...":"🏆 Claim Winnings"})]}),b.jsxs("div",{className:"game-stable-layout",children:[b.jsx("div",{className:"left-sidebar",children:b.jsxs("div",{className:"move-history",children:[b.jsx("h4",{children:"Move History"}),b.jsx("div",{className:"moves",children:he.slice().reverse().map(($,H)=>b.jsx("div",{className:"move",children:$},he.length-1-H))})]})}),b.jsxs("div",{className:"center-area",children:[b.jsxs("div",{className:"chessboard-container",children:[b.jsx("div",{className:"chessboard",children:Array.from({length:8},($,H)=>b.jsx("div",{className:"board-row",children:Array.from({length:8},(j,X)=>Jte(H,X))},H))}),_f&&_f.show&&b.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${_f.row*12.5}%`,left:`${_f.col*12.5}%`,width:"12.5%",height:"12.5%",pointerEvents:"none",zIndex:1e3},children:b.jsx("div",{className:"explosion-effect",children:"💥"})})]}),b.jsxs("div",{className:"game-controls",children:[b.jsxs("div",{className:"control-section",children:[b.jsx("button",{onClick:()=>d1(!Mn),className:"gallery-toggle-btn",children:Mn?"📚 Hide Gallery":"📚 Show Gallery"}),We.includes("corrupted")&&b.jsx("button",{className:"reset-game-btn",onClick:Yte,children:"🔄 Reset Game"})]}),b.jsx("div",{className:"settings-section",children:b.jsxs("div",{className:"sound-controls",children:[b.jsxs("label",{className:"control-label",children:[b.jsx("input",{type:"checkbox",id:"sound-toggle",checked:f1,onChange:$=>IT($.target.checked),className:"control-checkbox"}),b.jsx("span",{className:"control-text",children:"🎵 Sound Effects"})]}),b.jsxs("label",{className:"control-label",children:[b.jsx("input",{type:"checkbox",id:"victory-toggle",checked:h1,onChange:$=>hm($.target.checked),className:"control-checkbox"}),b.jsx("span",{className:"control-text",children:"🎉 Victory Celebration"})]})]})}),d&&b.jsx("button",{className:"claim-winnings-btn",onClick:V,disabled:f||I||R,children:f||I||R?"⏳ Claiming...":"🏆 Claim Winnings"})]})]}),b.jsx("div",{className:"right-sidebar",children:b.jsxs("div",{className:"leaderboard",children:[b.jsx("h3",{children:"Leaderboard"}),b.jsx("div",{className:"leaderboard-table",children:b.jsxs("table",{children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{children:"#"}),b.jsx("th",{children:"Player"}),b.jsx("th",{children:"W"}),b.jsx("th",{children:"L"}),b.jsx("th",{children:"D"}),b.jsx("th",{children:"Pts"})]})}),b.jsx("tbody",{children:NT.map(($,H)=>b.jsxs("tr",{children:[b.jsx("td",{children:H+1}),b.jsx("td",{children:$.username}),b.jsx("td",{children:$.wins}),b.jsx("td",{children:$.losses}),b.jsx("td",{children:$.draws}),b.jsx("td",{children:$.points})]},$.username))})]})})]})})]}),Mn&&b.jsx("div",{className:"piece-gallery-panel",children:Xte()}),Zte(),h1&&b.jsx("div",{className:"victory-celebration",children:b.jsxs("div",{className:"victory-content",children:[b.jsx("h2",{children:"🎉 Victory! 🎉"}),b.jsx("p",{children:"Congratulations on your win!"})]})})]}),nne=()=>null;D.useEffect(()=>{yb(),Cf(),JU();const $=setInterval(Cf,3e4);return()=>{clearInterval($),Qo.current&&Qo.current(),po.current&&clearTimeout(po.current)}},[]),console.log("[RENDER] Current game mode:",Ae,"Game ID:",P);const rne=(()=>{switch(Ae){case or.LOBBY:return ZU();case or.WAITING:return ene();case or.ACTIVE:case or.FINISHED:return tne();default:return ZU()}})();return b.jsxs(b.Fragment,{children:[rne,nne()]})},jO={AI:"ai"},LA={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},nz=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],CGe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],AGe=()=>{const[t,e]=D.useState(!1),n=D.useRef(null),r=D.useRef(!1);D.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=new Worker("/stockfish.worker.js");a.onmessage=c=>{console.log("[DEBUG] Stockfish worker message:",c.data)},a.onerror=c=>{console.error("[DEBUG] Stockfish worker error:",c),e(!1),r.current=!1},console.log("[DEBUG] LawbBot initialized successfully"),n.current=a,e(!0),r.current=!1,console.log("[DEBUG] Stockfish worker ready for commands")}catch(a){console.error("[DEBUG] Failed to create Stockfish worker:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=D.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var p;const f=h.data;typeof f=="string"&&f.startsWith("bestmove ")&&(l=f.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(p=n.current)==null||p.removeEventListener("message",d),c(l)))};try{n.current.addEventListener("message",d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeEventListener("message",d)}catch(g){console.warn("[DEBUG] Error removing message listener:",g)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=D.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},SGe=()=>{const[t,e]=D.useState(null),[n,r]=D.useState(!1),s=D.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=D.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},IGe=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r}=MC(),[s,i]=D.useState(jO.AI),[o,a]=D.useState(()=>JSON.parse(JSON.stringify(nz))),[c,l]=D.useState("blue"),[u,d]=D.useState(null),[h,f]=D.useState("active"),[p,g]=D.useState("hard"),[y,m]=D.useState("Connect wallet to play"),[w,v]=D.useState([]),[A,C]=D.useState([]),[S,x]=D.useState([]),[T,I]=D.useState(null),[k,O]=D.useState(!1),[B,G]=D.useState(!1),[W,R]=D.useState(null),[N,M]=D.useState(null),[P]=D.useState(""),[L]=D.useState(.1),[F,V]=D.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),Z=D.useRef(null),ae=D.useRef(!1),re=D.useRef(o),le=D.useRef(null),we=D.useRef(null),ee=D.useRef(!1),ce=D.useRef(!1),[pe,he]=D.useState(!1),[Ee,We]=D.useState(!1),[ue,Ae]=D.useState(!1),[ke]=D.useState(!0);D.useEffect(()=>{document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode")},[]);const{stockfishReady:Ce}=AGe(),{getOpeningData:Ct}=SGe(),[Yr,Nt]=D.useState("loading"),[Dn,dn]=D.useState(!1),[Ii,jl]=D.useState([]),[kc,Ln]=D.useState(!1),[mn,fo]=D.useState("/images/chessboard1.png"),[yn,Bs]=D.useState(!0),[fb,HU]=D.useState(!1),Yo=()=>{const q=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],J=Math.floor(Math.random()*q.length),ie=q[J];return console.log("[DEBUG] Random chessboard selected:",ie,"(index:",J,")"),ie};D.useEffect(()=>{if(Ce)Nt("ready");else{const q=window.setTimeout(()=>{Ce||(Nt("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(q)}},[Ce]),D.useEffect(()=>{re.current=o},[o]),D.useEffect(()=>{r?m("Select game mode"):(m("Connect wallet to play"),O(!1))},[r]),D.useEffect(()=>(!Z.current&&typeof Worker<"u"&&(Z.current=new Worker("/aiWorker.js"),Z.current.onmessage=q=>{console.log("[DEBUG] AI worker response received:",q.data);const{move:J,nodes:ie}=q.data;J&&ae.current&&h==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",J),console.log("[DEBUG] AI searched",ie,"nodes"),ae.current=!1,we.current&&(window.clearTimeout(we.current),we.current=null),le.current&&le.current(J.from,J.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},Z.current.onerror=q=>{console.error("[DEBUG] AI worker error:",q),m("AI worker error - using fallback mode"),ae.current=!1}),()=>{Z.current&&(Z.current.terminate(),Z.current=null),we.current&&(window.clearTimeout(we.current),we.current=null)}),[]),D.useEffect(()=>{u1()},[]);const u1=async()=>{try{const q=await JX(20);C(q),console.log("Leaderboard data loaded:",q)}catch(q){m("Failed to load leaderboard"),console.error("Leaderboard error:",q)}},um=async q=>{if(console.log("[DEBUG] updateScore called with:",q),!r){console.log("[DEBUG] No wallet address, returning");return}try{console.log("[DEBUG] Updating score for address:",Mg(r)),await nx(r,q)?(console.log("[DEBUG] Successfully updated score for:",Mg(r)),await u1()):console.error("[DEBUG] Failed to update score")}catch(J){console.error("[DEBUG] Error in updateScore:",J)}},Mn=q=>q&&q===q.toUpperCase()?"red":"blue",d1=(q,J)=>q>=0&&q<8&&J>=0&&J<8,pb=(q,J)=>`${String.fromCharCode(97+J)}${8-q}`,Dc=(q,J)=>{const ie=J==="blue"?"k":"K";let se=null;for(let Pe=0;Pe<8;Pe++){for(let tt=0;tt<8;tt++)if(q[Pe][tt]===ie){se={row:Pe,col:tt};break}if(se)break}if(!se)return console.log(`King not found for ${J}`),!1;const te=J==="blue"?"red":"blue",Re=gb(se.row,se.col,te,q);return console.log(`${J} king at ${se.row},${se.col} under attack: ${Re}`),Re},gb=(q,J,ie,se)=>{for(let te=0;te<8;te++)for(let Re=0;Re<8;Re++){const Pe=se[te][Re];if(Pe&&Mn(Pe)===ie&&Ba(Pe,te,Re,q,J,!1,ie,se,!0))return!0}return!1},mb=(q,J,ie,se,te,Re=o)=>{const Pe=Re.map($t=>[...$t]),tt=Pe[q][J];return Pe[ie][se]=tt,Pe[q][J]=null,Dc(Pe,te)},Ef=(q,J,ie,se,te,Re)=>{const Pe=q==="blue"?-1:1,tt=q==="blue"?6:1;if(!d1(se,te)||q==="blue"&&se>=J||q==="red"&&se<=J)return!1;const $t=Math.abs(se-J),tn=Math.abs(te-ie);if(($t===1&&tn===0||$t===2&&tn===0&&J===tt||$t===1&&tn===1)&&$t<=2&&tn<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:q,from:`${J},${ie}`,to:`${se},${te}`}),ie===te&&se===J+Pe)return Re[se][te]===null;if(ie===te&&J===tt&&se===J+2*Pe)return Re[J+Pe][ie]===null&&Re[se][te]===null;if(Math.abs(ie-te)===1&&se===J+Pe){const hn=Re[se][te];return hn!==null&&Mn(hn)!==q}if(Math.abs(ie-te)===1&&se===J+Pe){const hn=Re[J][te];if(hn&&Mn(hn)!==q&&hn.toLowerCase()==="p"&&F.lastPawnDoubleMove&&F.lastPawnDoubleMove.row===J&&F.lastPawnDoubleMove.col===te)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},dm=(q,J,ie,se,te)=>q!==ie&&J!==se?!1:_f(q,J,ie,se,te),h1=(q,J,ie,se)=>{const te=Math.abs(q-ie),Re=Math.abs(J-se);return te===2&&Re===1||te===1&&Re===2},hm=(q,J,ie,se,te)=>Math.abs(q-ie)!==Math.abs(J-se)?!1:_f(q,J,ie,se,te),f1=(q,J,ie,se,te)=>dm(q,J,ie,se,te)||hm(q,J,ie,se,te),IT=(q,J,ie,se,te)=>{const Re=Math.abs(J-se),Pe=Math.abs(ie-te);if(Re<=1&&Pe<=1)return!0;if(Re===0&&Pe===2){if(q==="blue"&&!F.blueKingMoved){if(te===6&&!F.blueRooksMove.right||te===2&&!F.blueRooksMove.left)return!0}else if(q==="red"&&!F.redKingMoved&&(te===6&&!F.redRooksMove.right||te===2&&!F.redRooksMove.left))return!0}return!1},_f=(q,J,ie,se,te)=>{const Re=q===ie?0:(ie-q)/Math.abs(ie-q),Pe=J===se?0:(se-J)/Math.abs(se-J);let tt=q+Re,$t=J+Pe;for(;tt!==ie||$t!==se;){if(te[tt][$t]!==null)return!1;tt+=Re,$t+=Pe}return!0},Ba=(q,J,ie,se,te,Re=!0,Pe=Mn(q),tt=o,$t=!1)=>{if(!d1(se,te))return $t||console.log("[ILLEGAL MOVE] Out of board:",{piece:q,startRow:J,startCol:ie,endRow:se,endCol:te}),!1;const tn=tt[se][te];if(tn&&Mn(tn)===Pe)return $t||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:q,startRow:J,startCol:ie,endRow:se,endCol:te}),!1;const nr=q.toLowerCase();let hn=!1;switch(nr){case"p":hn=Ef(Pe,J,ie,se,te,tt);break;case"r":hn=dm(J,ie,se,te,tt);break;case"n":hn=h1(J,ie,se,te);break;case"b":hn=hm(J,ie,se,te,tt);break;case"q":hn=f1(J,ie,se,te,tt);break;case"k":hn=IT(Pe,J,ie,se,te);break}return hn?hn&&Re&&mb(J,ie,se,te,Pe,tt)?($t||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:q,startRow:J,startCol:ie,endRow:se,endCol:te}),!1):hn:($t||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:q,startRow:J,startCol:ie,endRow:se,endCol:te,playerColor:Pe,pieceType:nr,targetPiece:tt[se][te],targetPieceColor:tt[se][te]?Mn(tt[se][te]):null}),!1)},gs=(q,J=o,ie=c)=>{const se=[],te=J[q.row][q.col];if(!te||Mn(te)!==ie)return se;const Re=te.toLowerCase();if(Re==="p"){const Pe=ie==="blue"?-1:1,tt=ie==="blue"?6:1,$t=q.row+Pe;if($t>=0&&$t<8&&Ba(te,q.row,q.col,$t,q.col,!0,ie,J,!0)&&se.push({row:$t,col:q.col}),q.row===tt){const tn=q.row+2*Pe;tn>=0&&tn<8&&Ba(te,q.row,q.col,tn,q.col,!0,ie,J,!0)&&se.push({row:tn,col:q.col})}for(const tn of[-1,1]){const nr=q.col+tn,hn=q.row+Pe;nr>=0&&nr<8&&hn>=0&&hn<8&&Ba(te,q.row,q.col,hn,nr,!0,ie,J,!0)&&se.push({row:hn,col:nr})}}else if(Re==="n"){const Pe=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[tt,$t]of Pe){const tn=q.row+tt,nr=q.col+$t;tn>=0&&tn<8&&nr>=0&&nr<8&&Ba(te,q.row,q.col,tn,nr,!0,ie,J,!0)&&se.push({row:tn,col:nr})}}else for(let Pe=0;Pe<8;Pe++)for(let tt=0;tt<8;tt++)Ba(te,q.row,q.col,Pe,tt,!0,ie,J,!0)&&se.push({row:Pe,col:tt});return se},xT=(q,J=o)=>{if(!Dc(J,q))return!1;for(let ie=0;ie<8;ie++)for(let se=0;se<8;se++){const te=J[ie][se];if(te&&Mn(te)===q&&gs({row:ie,col:se},J,q).length>0)return!1}return!0},NT=(q,J=o)=>{if(Dc(J,q))return!1;for(let ie=0;ie<8;ie++)for(let se=0;se<8;se++){const te=J[ie][se];if(te&&Mn(te)===q&&gs({row:ie,col:se},J,q).length>0)return!1}return!0},TT=(q,J)=>{if(h!=="active"||ae.current)return;const ie=o[q][J],se=ie?Mn(ie):null;if(u&&S.some(te=>te.row===q&&te.col===J)){xi(u,{row:q,col:J});return}if(ie&&se===c){const te=gs({row:q,col:J});d({row:q,col:J}),x(te);return}d(null),x([])},xi=(q,J,ie=!1)=>{const se=o[q.row][q.col];if(console.log("[MOVE ATTEMPT]",{from:q,to:J,piece:se,isAIMove:ie,board:JSON.parse(JSON.stringify(o)),moveHistory:w}),!!se){if(se.toLowerCase()==="p"&&(Mn(se)==="blue"&&J.row===0||Mn(se)==="red"&&J.row===7)){R({from:q,to:J}),G(!0);return}DT(q,J,"q",ie)}};le.current=xi;const p1=D.useCallback((q,J,ie=!1)=>{Ln(!0);const se=o.map(Pe=>[...Pe]),te=se[q.row][q.col];if(!te)return;se[J.row][J.col]=te,se[q.row][q.col]=null,GU(se,q,J,te);const Re=qU(q,J);if(v(Pe=>{const tt=[...Pe,Re];return console.log("[MOVE HISTORY UPDATED]",tt),tt}),I({from:q,to:J}),d(null),x([]),w.length<10&&!ie){const Pe=rz(se,c==="blue"?"red":"blue");Ct(Pe).then(tt=>{tt&&tt.moves&&tt.moves.length>0&&(jl(tt.moves.slice(0,3)),dn(!0),setTimeout(()=>dn(!1),5e3))})}VU(q,J,te),l(Pe=>{const tt=Pe==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",tt),Qo(se,tt),tt}),Qo(se,c==="blue"?"red":"blue"),a(se),ae.current=!1,ee.current=!1,ce.current=!1,Ln(!1)},[o,c,w,Ct]);D.useEffect(()=>{if(!ae.current&&s==="ai"&&c==="red"&&!ee.current&&!kc)if(ae.current=!0,p==="easy")setTimeout(()=>{const q=po(o);q?xi(q.from,q.to,!0):ae.current=!1},600);else{m("AI is calculating...");const q=rz(o,c);if(ce.current)return;ce.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:q,difficulty:p,movetime:3e3})}).then(ie=>{if(ie.ok)return ie.json();throw new Error("API call failed")}).then(ie=>{console.log("[DEBUG] Stockfish API response:",ie);const se=ie.bestmove||ie.move;if(se&&se!=="(none)"&&se.length===4){const te=se.charCodeAt(0)-97,Re=parseInt(se[1]),Pe=se.charCodeAt(2)-97,tt=parseInt(se[3]),$t=8-Re,tn=8-tt;if(console.log("[DEBUG] Parsed move:",{fromCol:te,fromRowStockfish:Re,toCol:Pe,toRowStockfish:tt,fromRow:$t,toRow:tn}),te>=0&&te<8&&$t>=0&&$t<8&&Pe>=0&&Pe<8&&tn>=0&&tn<8){const nr={from:{row:$t,col:te},to:{row:tn,col:Pe}},hn=o[$t][te];if(console.log("[DEBUG] Move validation:",{piece:hn,moveObj:nr,isValid:hn&&Mn(hn)==="red"&&Ba(hn,$t,te,tn,Pe,!0,"red",o)}),hn&&Mn(hn)==="red"&&Ba(hn,$t,te,tn,Pe,!0,"red",o))console.log("[DEBUG] Executing Stockfish move:",nr),xi(nr.from,nr.to,!0);else{console.warn("[DEBUG] Invalid Stockfish move, falling back to random");const wb=po(o);wb&&xi(wb.from,wb.to,!0),ae.current=!1,ce.current=!1}}else{console.warn("[DEBUG] Invalid move coordinates, falling back to random");const nr=po(o);nr&&xi(nr.from,nr.to,!0),ae.current=!1,ce.current=!1}}else{console.warn("[DEBUG] Invalid move format from API, falling back to random");const te=po(o);te&&xi(te.from,te.to,!0),ae.current=!1,ce.current=!1}}).catch(ie=>{console.error("[DEBUG] Stockfish API error:",ie),m("AI error. Falling back to random moves.");const se=po(o);se&&xi(se.from,se.to,!0),ae.current=!1,ce.current=!1})}},[c,s,p,o,F,Ce]);const Qo=(q,J)=>{console.log("Checking game end for player:",J);const ie=q.some(te=>te.some(Re=>Re==="k")),se=q.some(te=>te.some(Re=>Re==="K"));if(!ie)return console.log("[GAME END] KING CAPTURED - Red wins!"),f("checkmate"),m("King captured! Red wins!"),um("loss"),Ae(!0),setTimeout(()=>Ae(!1),3e3),"checkmate";if(!se)return console.log("[GAME END] KING CAPTURED - Blue wins!"),f("checkmate"),m("King captured! You win!"),um("win"),Ae(!0),setTimeout(()=>Ae(!1),3e3),"checkmate";if(console.log("Is king in check:",Dc(q,J)),xT(J,q)){console.log("[GAME END] CHECKMATE",{winner:J==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(q)),moveHistory:w}),f("checkmate");const te=J==="blue"?"red":"blue";return te==="blue"?(m("Checkmate! You win!"),Af("checkmate"),zl(!0),KU(),um("win"),Ae(!0),setTimeout(()=>Ae(!1),3e3)):(m(`Checkmate! ${te==="red"?"AI":"Opponent"} wins!`),Af("checkmate"),Wl(!0),um("loss"),Ae(!0),setTimeout(()=>Ae(!1),3e3)),"checkmate"}return NT(J,q)?(console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(q)),moveHistory:w}),f("stalemate"),m("Stalemate! Game is a draw."),um("draw"),Ae(!0),setTimeout(()=>Ae(!1),3e3),"stalemate"):(Dc(q,J)?(console.log("CHECK detected!"),Af("check"),m(`${J==="blue"?"Blue":"Red"} is in check!`)):m("Your turn"),null)},po=q=>{const J=[];for(let te=0;te<8;te++)for(let Re=0;Re<8;Re++){const Pe=q[te][Re];Pe&&Mn(Pe)==="red"&&J.push({row:te,col:Re})}for(let te=J.length-1;te>0;te--){const Re=Math.floor(Math.random()*(te+1));[J[te],J[Re]]=[J[Re],J[te]]}const ie=[],se=[];for(const te of J){const Re=gs(te,q,"red");for(const Pe of Re){const tt=q[Pe.row][Pe.col];if(tt&&Mn(tt)==="blue"){const tn={p:100,n:320,b:330,r:500,q:900,k:2e4}[tt.toLowerCase()]||0;ie.push({from:te,to:Pe,value:tn})}else se.push({from:te,to:Pe})}}if(ie.length>0&&Math.random()<.3){ie.sort((te,Re)=>te.value-Re.value);for(const te of ie){const Re=q.map(tt=>[...tt]),Pe=Re[te.from.row][te.from.col];if(Re[te.to.row][te.to.col]=Pe,Re[te.from.row][te.from.col]=null,!Dc(Re,"red"))return{from:te.from,to:te.to}}}for(const te of se){const Re=q.map(tt=>[...tt]),Pe=Re[te.from.row][te.from.col];if(Re[te.to.row][te.to.col]=Pe,Re[te.from.row][te.from.col]=null,!Dc(Re,"red"))return te}ie.sort((te,Re)=>te.value-Re.value);for(const te of ie){const Re=q.map(tt=>[...tt]),Pe=Re[te.from.row][te.from.col];if(Re[te.to.row][te.to.col]=Pe,Re[te.from.row][te.from.col]=null,!Dc(Re,"red"))return{from:te.from,to:te.to}}return null},g1=()=>{a(JSON.parse(JSON.stringify(nz))),l("blue"),d(null),f("active"),v([]),x([]),I(null),O(!1),m("Select game mode"),V({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),fo(Yo()),ae.current&&(ae.current=!1)},RT=()=>{if(If(),console.log("[DEBUG] startGame called, difficulty:",p,"gameMode:",s),s==="online"){O(!1),he(!1);return}O(!0),he(!1),m("Game started! Your turn");const q=Yo();fo(q),console.log("[DEBUG] Game started with chessboard:",q)},yb=q=>`${q.slice(0,6)}...${q.slice(-4)}`,m1=(q,J)=>{const ie=o[q][J],se=(u==null?void 0:u.row)===q&&(u==null?void 0:u.col)===J,te=S.some(Pe=>Pe.row===q&&Pe.col===J),Re=T&&(T.from.row===q&&T.from.col===J||T.to.row===q&&T.to.col===J);return b.jsxs("div",{className:`square ${se?"selected":""} ${te?"legal-move":""} ${Re?"last-move":""}`,onClick:()=>TT(q,J),children:[ie&&b.jsx("div",{className:"piece",style:{backgroundImage:LA[ie]?`url(${LA[ie]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),te&&b.jsx("div",{className:"legal-move-indicator"})]},`${q}-${J}`)},PT=()=>{if(!B||!W)return null;const q=c==="blue"?["q","r","b","n"]:["Q","R","B","N"];return b.jsx("div",{className:"promotion-dialog",children:b.jsxs("div",{className:"promotion-content",children:[b.jsx("h3",{children:"Choose promotion piece:"}),b.jsx("div",{className:"promotion-pieces",children:q.map(J=>b.jsx("div",{className:"promotion-piece",onClick:()=>{DT(W.from,W.to,J),G(!1),R(null)},style:{backgroundImage:LA[J]?`url(${LA[J]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},J))})]})})},[Cf,OT]=D.useState(null),y1=(q=!1,J="Click a piece to learn more about it.")=>b.jsxs("div",{className:`piece-gallery${q?" piece-gallery-sm":""}`,children:[b.jsx("h3",{children:"Lawbstation Chess Pieces"}),b.jsx("div",{className:"piece-gallery-grid",children:CGe.map(ie=>b.jsxs("div",{className:"piece-gallery-item",onClick:()=>{OT(Cf===ie.key?null:ie.key)},children:[b.jsx("img",{src:ie.img,alt:ie.name,className:"piece-gallery-img"}),b.jsx("div",{className:"piece-gallery-name",children:ie.name}),Cf===ie.key&&b.jsx("div",{className:"piece-gallery-desc",children:ie.desc})]},ie.key))}),b.jsx("div",{className:"piece-gallery-tip",children:J})]}),kT=()=>b.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:b.jsx("div",{className:"difficulty-controls-col",children:b.jsxs("div",{className:"difficulty-selection-panel",style:{background:"#fff",borderRadius:12,padding:"32px 24px",boxShadow:"0 4px 32px rgba(0,0,0,0.12)",textAlign:"center"},children:[b.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#0a2a7a",marginBottom:16},children:"Start a New Game"}),b.jsxs("p",{style:{fontSize:"1.1rem",color:"#333",marginBottom:24},children:["Challenge the LawbBot AI to a chess match.",b.jsx("br",{}),"Good luck, have fun!"]}),b.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[b.jsx("button",{className:`difficulty-btn${p==="easy"?" selected":""}`,style:{background:p==="easy"?"#44c0ff":"#eee",color:p==="easy"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="easy"?"0 2px 8px #44c0ff44":"none"},onClick:()=>g("easy"),children:"Easy"}),b.jsx("button",{className:`difficulty-btn${p==="hard"?" selected":""}`,style:{background:p==="hard"?"#0a2a7a":"#eee",color:p==="hard"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="hard"?"0 2px 8px #0a2a7a44":"none"},onClick:()=>g("hard"),children:"Hard"})]}),b.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{RT()},style:{background:"linear-gradient(90deg, #0a2a7a 0%, #44c0ff 100%)",color:"white",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:8,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",border:"none",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[b.jsx("span",{role:"img","aria-label":"chess",children:"♟️"})," Start Game"]})]})})}),GU=(q,J,ie,se)=>{if(se.toLowerCase()==="p"&&(Mn(se)==="blue"&&ie.row===0||Mn(se)==="red"&&ie.row===7)){const te=Mn(se)==="blue"?"q":"Q";q[ie.row][ie.col]=te}if(se.toLowerCase()==="k"&&Math.abs(J.col-ie.col)===2){if(ie.col===6)q[J.row][7]=null,q[J.row][5]=Mn(se)==="blue"?"r":"R";else if(ie.col===2){const te=q[J.row][3];q[J.row][0]=null,q[J.row][3]=Mn(se)==="blue"?"r":"R",te&&te.toLowerCase()==="q"&&(q[J.row][4]=te)}}},qU=(q,J,ie,se)=>{const te=pb(q.row,q.col),Re=pb(J.row,J.col);return`${te}-${Re}`},VU=(q,J,ie)=>{const se={...F};ie.toLowerCase()==="k"?Mn(ie)==="blue"?se.blueKingMoved=!0:se.redKingMoved=!0:ie.toLowerCase()==="r"&&(Mn(ie)==="blue"?(q.col===0&&(se.blueRooksMove.left=!0),q.col===7&&(se.blueRooksMove.right=!0)):(q.col===0&&(se.redRooksMove.left=!0),q.col===7&&(se.redRooksMove.right=!0))),ie.toLowerCase()==="p"&&Math.abs(q.row-J.row)===2?se.lastPawnDoubleMove={row:J.row,col:J.col}:se.lastPawnDoubleMove=null,V(se)},DT=(q,J,ie="q",se=!1)=>{o[q.row][q.col];const Re=o[J.row][J.col]!==null;if(Af(Re?"capture":"move"),Re){M({row:J.row,col:J.col,show:!0}),setTimeout(()=>{p1(q,J,se),M(null)},500);return}p1(q,J,se)},Af=q=>{if(!yn)return;let J="";switch(q){case"move":J="/images/move.mp3";break;case"capture":J="/images/capture.mp3";break;case"check":J="/images/play.mp3";break;case"checkmate":J="/images/victory.mp3";break;case"victory":J="/images/victory.mp3";break;default:J="/images/move.mp3"}new Audio(J).play().catch(()=>{})},KU=()=>{if(fb){Af("victory");for(let q=0;q<50;q++)setTimeout(()=>{const J=document.createElement("div");J.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(J),setTimeout(()=>J.remove(),3e3)},q*100);setTimeout(()=>HU(!1),5e3)}},[LT,zl]=D.useState(!1),[Sf,Wl]=D.useState(!1),fm=()=>{zl(!1),Wl(!1)},Qr=()=>{fm(),g1()},pm=()=>{fm(),O(!1)},If=()=>{new Audio("/images/start.mp3").play().catch(()=>{})},gm=s==="online";return b.jsxs("div",{className:`chess-game${n?" fullscreen":""}${ke?" chess-dark-mode":""}`,children:[!n&&b.jsxs("div",{className:"chess-header",children:[b.jsx("h2",{children:"Lawb Chess"}),b.jsxs("div",{className:"chess-controls",children:[e&&b.jsx("button",{onClick:e,children:"_"}),b.jsx("button",{onClick:t,children:"×"})]})]}),b.jsxs("div",{className:"game-stable-layout",children:[b.jsxs("div",{className:"left-sidebar",children:[b.jsxs("div",{className:"leaderboard-compact",children:[b.jsx("h3",{children:"Leaderboard"}),b.jsx("div",{className:"leaderboard-table-compact",children:b.jsxs("table",{children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{children:"Rank"}),b.jsx("th",{children:"Player"}),b.jsx("th",{children:"Pts"})]})}),b.jsx("tbody",{children:Array.isArray(A)&&A.slice(0,8).map((q,J)=>{if(typeof q=="object"&&q!==null&&"username"in q&&"wins"in q&&"losses"in q&&"draws"in q&&"points"in q){const ie=q;return b.jsxs("tr",{children:[b.jsx("td",{children:J+1}),b.jsx("td",{children:yb(ie.username)}),b.jsx("td",{children:ie.points})]},ie.username)}return null})})]})})]}),k&&b.jsxs("div",{className:"move-history-compact",children:[b.jsx("div",{className:"move-history-title",children:"Moves"}),b.jsx("ul",{className:"move-history-list-compact",children:w.slice().reverse().map((q,J)=>b.jsx("li",{children:q},w.length-1-J))})]})]}),b.jsxs("div",{className:"center-area",children:[k&&b.jsxs("div",{className:"game-info-compact",children:[b.jsxs("span",{className:c==="blue"?"current-blue":"current-red",children:[c==="blue"?"Blue":"Red"," to move"]}),s===jO.AI&&b.jsxs("span",{className:"mode-play",children:[p==="easy"?"Easy":"Hard"," AI"]}),gm&&b.jsxs("span",{className:"wager-display",children:["Wager: ",L," ETH"]})]}),k?b.jsxs("div",{className:"chess-main-area",children:[b.jsx("div",{className:"chessboard-container",children:b.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${mn})`},children:[Array.from({length:8},(q,J)=>b.jsx("div",{className:"board-row",children:Array.from({length:8},(ie,se)=>m1(J,se))},J)),N&&N.show&&b.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${N.row*12.5}%`,left:`${N.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:b.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),b.jsxs("div",{className:"game-controls-compact",children:[b.jsx("button",{onClick:Qr,children:"New Game"}),b.jsx("button",{onClick:pm,children:"Menu"})]})]}):pe?kT():gm?b.jsx(Hte,{onClose:t,onMinimize:e,fullscreen:n}):b.jsxs("div",{className:"game-mode-panel-streamlined",children:[b.jsxs("div",{className:"mode-selection-compact",children:[b.jsx("button",{className:`mode-btn-compact ${s==="ai"?"selected":""}`,onClick:()=>i("ai"),children:"VS AI"}),b.jsx("button",{className:`mode-btn-compact ${gm?"selected":""}`,onClick:()=>i("online"),children:"PvP"})]}),s===jO.AI&&b.jsx("button",{className:"start-btn-compact",onClick:()=>he(!0),children:"Start Game"}),gm&&b.jsxs("div",{className:"pvp-info",children:[b.jsx("p",{children:"Challenge other players with ETH wagers"}),b.jsx("p",{children:"Create or join games instantly"})]}),b.jsxs("div",{className:"help-section-compact",children:[b.jsx("h4",{children:"How to Play"}),b.jsxs("div",{className:"help-content",children:[b.jsxs("p",{children:[b.jsx("strong",{children:"Chess:"})," Capture your opponent's king. Each piece moves uniquely - pawns forward, knights in L-shapes, bishops diagonally, rooks horizontally/vertically, queens in all directions, kings one square at a time."]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Multiplayer:"})," Connect your wallet to play PvP games with ETH wagers. Win games to claim your opponent's wager and climb the leaderboard."]}),b.jsxs("p",{children:[b.jsx("strong",{children:"AI Mode:"})," Practice against our LawbBot AI. Choose Easy or Hard difficulty. Wins earn points on the leaderboard."]})]})]})]})]}),b.jsx("div",{className:"right-sidebar",children:b.jsx("div",{className:"piece-gallery-panel",children:y1(!0)})})]}),Ee&&b.jsx("div",{className:"gallery-modal-overlay",onClick:()=>We(!1),children:b.jsxs("div",{className:"gallery-modal",onClick:q=>q.stopPropagation(),children:[b.jsx("button",{className:"close-modal-btn",onClick:()=>We(!1),children:"×"}),y1(!1)]})}),PT(),ue&&b.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),LT&&fb&&b.jsxs("div",{className:"victory-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)"},children:[b.jsx("div",{className:"balloons-container"}),b.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:"320px",height:"auto",zIndex:2}}),b.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24},children:[b.jsx("button",{onClick:Qr,children:"New Game"}),b.jsx("button",{onClick:pm,children:"Back to Menu"})]})]}),Sf&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"blood-overlay",children:[0,1,2,3,4,5].map(q=>b.jsx("div",{className:"blood-drip",style:{left:`${10+q*14}%`,animationDelay:`${.5+q*.3}s`,background:"linear-gradient(to bottom, #a80000 0%, #d10000 80%, #5a0000 100%)",width:`${14+Math.random()*10}px`,height:`${50+Math.random()*30}px`,opacity:.85+Math.random()*.1}},q))}),b.jsxs("div",{className:"defeat-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)",pointerEvents:"none"},children:[b.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:"320px",height:"auto",zIndex:2}}),b.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24,pointerEvents:"none"},children:[b.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:Qr,children:"New Game"}),b.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:pm,children:"Back to Menu"})]})]})]})]})};function rz(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const sz=()=>{const[t,e]=D.useState("singleplayer"),n=()=>{window.location.href="/"};return b.jsx("div",{className:"chess-page",children:b.jsx("div",{className:"chess-content",children:t==="singleplayer"?b.jsx(IGe,{onClose:n}):b.jsx(Hte,{onClose:n,onMinimize:()=>{},fullscreen:!1})})})},xGe=new Vye,NGe=typeof window<"u"&&window.location.hostname.startsWith("chess."),TGe=()=>tFe("(max-width: 768px)")?b.jsx(eFe,{}):b.jsx(q4e,{});a2.createRoot(document.getElementById("root")).render(b.jsx(Mo.StrictMode,{children:b.jsx(lye,{config:YX.wagmiConfig,children:b.jsx(hwe,{client:xGe,children:b.jsx(H4e,{children:b.jsx(j4e,{children:NGe?b.jsx(mS,{path:"/*",element:b.jsx(sz,{})}):b.jsxs(b.Fragment,{children:[b.jsx(mS,{path:"/",element:b.jsx(TGe,{})}),b.jsx(mS,{path:"/chess",element:b.jsx(sz,{})})]})})})})})}));export{nVe as $,Qe as A,ft as B,je as C,ot as D,Qv as E,AD as F,pv as G,cc as H,b1e as I,Tn as J,iVe as K,b3 as L,ls as M,g1e as N,ve as O,md as P,hS as Q,Mt as R,fc as S,Hi as T,Q1e as U,Xv as V,Ps as W,eVe as X,cs as Y,zg as Z,cl as _,pS as a,bX as a0,v3 as a1,C0 as a2,Ks as a3,QGe as a4,Ou as a5,Ol as a6,n_ as a7,nt as a8,$r as a9,yz as aA,jGe as aB,BE as aC,xde as aD,Jme as aE,La as aF,ka as aG,hK as aH,Qpe as aI,Md as aa,iK as ab,gN as ac,me as ad,WL as ae,qr as af,Fhe as ag,lN as ah,eM as ai,Ghe as aj,OC as ak,Ta as al,wf as am,Wv as an,Pl as ao,bke as ap,zqe as aq,bF as ar,QJ as as,lke as at,vke as au,Wqe as av,jqe as aw,QN as ax,qqe as ay,Hqe as az,Pn as b,ze as c,it as d,z as e,ir as f,ku as g,sVe as h,ju as i,ko as j,pt as k,Gi as l,r2e as m,yl as n,c8e as o,Je as p,ul as q,rVe as r,pn as s,xQ as t,er as u,n4 as v,Ko as w,Xqe as x,ti as y,Xs as z};
