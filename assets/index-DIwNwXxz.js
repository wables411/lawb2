const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/secp256k1-BLDtrio8.js","assets/hmac-Cqxzrrom.js","assets/secp256k1-B89iWRka.js","assets/embedded-wallet-O-IJ8tN8.js","assets/if-defined-DYkf7qP5.js","assets/index-DXpMY9rE.js","assets/index-DLk2L8Ui.js","assets/ref-C5jUDzD-.js","assets/index-DU_IPi5k.js","assets/index-C-VI8W28.js","assets/index-DtoaY1uK.js","assets/index-BxdhkBDU.js","assets/index-S6UJrU9w.js","assets/index-D1zzwgxD.js","assets/index-9ogeurrr.js","assets/email-DQXkpnRE.js","assets/index-DTne9ixp.js","assets/socials-BLn7i0tX.js","assets/index-K9nVkYVp.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-DoPK4UbD.js","assets/index-BiUi3Rpu.js","assets/index-BVktHQeN.js","assets/index-D3x7PjaD.js","assets/swaps-BHx1y469.js","assets/index-zNcXHzQz.js","assets/index-KHlWDTkZ.js","assets/index-CY_eoxF_.js","assets/send-DdUVXvTQ.js","assets/index-CP_hed8o.js","assets/index-z06fsitj.js","assets/receive-PuHa2o34.js","assets/index-BXDlKBBW.js","assets/onramp-B4y3gnUI.js","assets/index-D7-1fvJp.js","assets/index-C6pITNxb.js","assets/index-CFlb5H1l.js","assets/transactions-BuUd--nz.js","assets/index-D5Bwxv3L.js","assets/index-Djo3nNSI.js","assets/index-BvBxHAoF.js","assets/index-DLY50_j7.js","assets/index-BBZg420q.js","assets/w3m-modal-CcPqW2K2.js"])))=>i.map(i=>d[i]);
var KV=Object.defineProperty;var W3=t=>{throw TypeError(t)};var QV=(t,e,n)=>e in t?KV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var J=(t,e,n)=>QV(t,typeof e!="symbol"?e+"":e,n),QA=(t,e,n)=>e.has(t)||W3("Cannot "+n);var E=(t,e,n)=>(QA(t,e,"read from private field"),n?n.call(t):e.get(t)),G=(t,e,n)=>e.has(t)?W3("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),D=(t,e,n,r)=>(QA(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ne=(t,e,n)=>(QA(t,e,"access private method"),n);var Tl=(t,e,n,r)=>({set _(s){D(t,e,s,n)},get _(){return E(t,e,r)}});function YV(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Fn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function tC(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var KB={exports:{}},nC={},QB={exports:{}},vt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cv=Symbol.for("react.element"),JV=Symbol.for("react.portal"),ZV=Symbol.for("react.fragment"),XV=Symbol.for("react.strict_mode"),eK=Symbol.for("react.profiler"),tK=Symbol.for("react.provider"),nK=Symbol.for("react.context"),rK=Symbol.for("react.forward_ref"),sK=Symbol.for("react.suspense"),iK=Symbol.for("react.memo"),oK=Symbol.for("react.lazy"),q3=Symbol.iterator;function aK(t){return t===null||typeof t!="object"?null:(t=q3&&t[q3]||t["@@iterator"],typeof t=="function"?t:null)}var YB={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},JB=Object.assign,ZB={};function py(t,e,n){this.props=t,this.context=e,this.refs=ZB,this.updater=n||YB}py.prototype.isReactComponent={};py.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};py.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function XB(){}XB.prototype=py.prototype;function Ok(t,e,n){this.props=t,this.context=e,this.refs=ZB,this.updater=n||YB}var Rk=Ok.prototype=new XB;Rk.constructor=Ok;JB(Rk,py.prototype);Rk.isPureReactComponent=!0;var V3=Array.isArray,eL=Object.prototype.hasOwnProperty,Dk={current:null},tL={key:!0,ref:!0,__self:!0,__source:!0};function nL(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)eL.call(e,r)&&!tL.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Cv,type:t,key:i,ref:o,props:s,_owner:Dk.current}}function cK(t,e){return{$$typeof:Cv,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $k(t){return typeof t=="object"&&t!==null&&t.$$typeof===Cv}function lK(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var K3=/\/+/g;function YA(t,e){return typeof t=="object"&&t!==null&&t.key!=null?lK(""+t.key):e.toString(36)}function RE(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Cv:case JV:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+YA(o,0):r,V3(s)?(n="",t!=null&&(n=t.replace(K3,"$&/")+"/"),RE(s,e,n,"",function(l){return l})):s!=null&&($k(s)&&(s=cK(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(K3,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",V3(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+YA(i,a);o+=RE(i,e,n,c,s)}else if(c=aK(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+YA(i,a++),o+=RE(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function f1(t,e,n){if(t==null)return t;var r=[],s=0;return RE(t,r,"","",function(i){return e.call(n,i,s++)}),r}function uK(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ds={current:null},DE={transition:null},dK={ReactCurrentDispatcher:Ds,ReactCurrentBatchConfig:DE,ReactCurrentOwner:Dk};function rL(){throw Error("act(...) is not supported in production builds of React.")}vt.Children={map:f1,forEach:function(t,e,n){f1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return f1(t,function(){e++}),e},toArray:function(t){return f1(t,function(e){return e})||[]},only:function(t){if(!$k(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};vt.Component=py;vt.Fragment=ZV;vt.Profiler=eK;vt.PureComponent=Ok;vt.StrictMode=XV;vt.Suspense=sK;vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dK;vt.act=rL;vt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=JB({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Dk.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)eL.call(e,c)&&!tL.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:Cv,type:t.type,key:s,ref:i,props:r,_owner:o}};vt.createContext=function(t){return t={$$typeof:nK,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tK,_context:t},t.Consumer=t};vt.createElement=nL;vt.createFactory=function(t){var e=nL.bind(null,t);return e.type=t,e};vt.createRef=function(){return{current:null}};vt.forwardRef=function(t){return{$$typeof:rK,render:t}};vt.isValidElement=$k;vt.lazy=function(t){return{$$typeof:oK,_payload:{_status:-1,_result:t},_init:uK}};vt.memo=function(t,e){return{$$typeof:iK,type:t,compare:e===void 0?null:e}};vt.startTransition=function(t){var e=DE.transition;DE.transition={};try{t()}finally{DE.transition=e}};vt.unstable_act=rL;vt.useCallback=function(t,e){return Ds.current.useCallback(t,e)};vt.useContext=function(t){return Ds.current.useContext(t)};vt.useDebugValue=function(){};vt.useDeferredValue=function(t){return Ds.current.useDeferredValue(t)};vt.useEffect=function(t,e){return Ds.current.useEffect(t,e)};vt.useId=function(){return Ds.current.useId()};vt.useImperativeHandle=function(t,e,n){return Ds.current.useImperativeHandle(t,e,n)};vt.useInsertionEffect=function(t,e){return Ds.current.useInsertionEffect(t,e)};vt.useLayoutEffect=function(t,e){return Ds.current.useLayoutEffect(t,e)};vt.useMemo=function(t,e){return Ds.current.useMemo(t,e)};vt.useReducer=function(t,e,n){return Ds.current.useReducer(t,e,n)};vt.useRef=function(t){return Ds.current.useRef(t)};vt.useState=function(t){return Ds.current.useState(t)};vt.useSyncExternalStore=function(t,e,n){return Ds.current.useSyncExternalStore(t,e,n)};vt.useTransition=function(){return Ds.current.useTransition()};vt.version="18.3.1";QB.exports=vt;var k=QB.exports;const Bi=Qf(k),hK=YV({__proto__:null,default:Bi},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fK=k,pK=Symbol.for("react.element"),gK=Symbol.for("react.fragment"),mK=Object.prototype.hasOwnProperty,yK=fK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wK={key:!0,ref:!0,__self:!0,__source:!0};function sL(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)mK.call(e,r)&&!wK.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:pK,type:t,key:i,ref:o,props:s,_owner:yK.current}}nC.Fragment=gK;nC.jsx=sL;nC.jsxs=sL;KB.exports=nC;var m=KB.exports,BI={},iL={exports:{}},Hi={},oL={exports:{}},aL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,$){var M=U.length;U.push($);e:for(;0<M;){var q=M-1>>>1,ee=U[q];if(0<s(ee,$))U[q]=$,U[M]=ee,M=q;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var $=U[0],M=U.pop();if(M!==$){U[0]=M;e:for(var q=0,ee=U.length,ce=ee>>>1;q<ce;){var se=2*(q+1)-1,le=U[se],me=se+1,Z=U[me];if(0>s(le,M))me<ee&&0>s(Z,le)?(U[q]=Z,U[me]=M,q=me):(U[q]=le,U[se]=M,q=se);else if(me<ee&&0>s(Z,M))U[q]=Z,U[me]=M,q=me;else break e}}return $}function s(U,$){var M=U.sortIndex-$.sortIndex;return M!==0?M:U.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var $=n(l);$!==null;){if($.callback===null)r(l);else if($.startTime<=U)r(l),$.sortIndex=$.expirationTime,e(c,$);else break;$=n(l)}}function _(U){if(g=!1,b(U),!p)if(n(c)!==null)p=!0,I(x);else{var $=n(l);$!==null&&L(_,$.startTime-U)}}function x(U,$){p=!1,g&&(g=!1,w(N),N=-1),f=!0;var M=h;try{for(b($),d=n(c);d!==null&&(!(d.expirationTime>$)||U&&!R());){var q=d.callback;if(typeof q=="function"){d.callback=null,h=d.priorityLevel;var ee=q(d.expirationTime<=$);$=t.unstable_now(),typeof ee=="function"?d.callback=ee:d===n(c)&&r(c),b($)}else r(c);d=n(c)}if(d!==null)var ce=!0;else{var se=n(l);se!==null&&L(_,se.startTime-$),ce=!1}return ce}finally{d=null,h=M,f=!1}}var C=!1,S=null,N=-1,A=5,P=-1;function R(){return!(t.unstable_now()-P<A)}function j(){if(S!==null){var U=t.unstable_now();P=U;var $=!0;try{$=S(!0,U)}finally{$?H():(C=!1,S=null)}}else C=!1}var H;if(typeof v=="function")H=function(){v(j)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,T=K.port2;K.port1.onmessage=j,H=function(){T.postMessage(null)}}else H=function(){y(j,0)};function I(U){S=U,C||(C=!0,H())}function L(U,$){N=y(function(){U(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,I(x))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(U){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var M=h;h=$;try{return U()}finally{h=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,$){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var M=h;h=U;try{return $()}finally{h=M}},t.unstable_scheduleCallback=function(U,$,M){var q=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?q+M:q):M=q,U){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=M+ee,U={id:u++,callback:$,priorityLevel:U,startTime:M,expirationTime:ee,sortIndex:-1},M>q?(U.sortIndex=M,e(l,U),n(c)===null&&U===n(l)&&(g?(w(N),N=-1):g=!0,L(_,M-q))):(U.sortIndex=ee,e(c,U),p||f||(p=!0,I(x))),U},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(U){var $=h;return function(){var M=h;h=$;try{return U.apply(this,arguments)}finally{h=M}}}})(aL);oL.exports=aL;var bK=oL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vK=k,Fi=bK;function ye(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cL=new Set,kw={};function Yf(t,e){Lm(t,e),Lm(t+"Capture",e)}function Lm(t,e){for(kw[t]=e,t=0;t<e.length;t++)cL.add(e[t])}var dl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),LI=Object.prototype.hasOwnProperty,EK=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Q3={},Y3={};function xK(t){return LI.call(Y3,t)?!0:LI.call(Q3,t)?!1:EK.test(t)?Y3[t]=!0:(Q3[t]=!0,!1)}function _K(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function CK(t,e,n,r){if(e===null||typeof e>"u"||_K(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $s(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Fr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Fr[t]=new $s(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Fr[e]=new $s(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Fr[t]=new $s(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Fr[t]=new $s(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Fr[t]=new $s(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Fr[t]=new $s(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Fr[t]=new $s(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Fr[t]=new $s(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Fr[t]=new $s(t,5,!1,t.toLowerCase(),null,!1,!1)});var Uk=/[\-:]([a-z])/g;function Bk(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Uk,Bk);Fr[e]=new $s(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Uk,Bk);Fr[e]=new $s(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Uk,Bk);Fr[e]=new $s(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Fr[t]=new $s(t,1,!1,t.toLowerCase(),null,!1,!1)});Fr.xlinkHref=new $s("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Fr[t]=new $s(t,1,!1,t.toLowerCase(),null,!0,!0)});function Lk(t,e,n,r){var s=Fr.hasOwnProperty(e)?Fr[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(CK(e,n,s,r)&&(n=null),r||s===null?xK(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var xl=vK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,p1=Symbol.for("react.element"),eg=Symbol.for("react.portal"),tg=Symbol.for("react.fragment"),Mk=Symbol.for("react.strict_mode"),MI=Symbol.for("react.profiler"),lL=Symbol.for("react.provider"),uL=Symbol.for("react.context"),jk=Symbol.for("react.forward_ref"),jI=Symbol.for("react.suspense"),FI=Symbol.for("react.suspense_list"),Fk=Symbol.for("react.memo"),ru=Symbol.for("react.lazy"),dL=Symbol.for("react.offscreen"),J3=Symbol.iterator;function Wy(t){return t===null||typeof t!="object"?null:(t=J3&&t[J3]||t["@@iterator"],typeof t=="function"?t:null)}var Un=Object.assign,JA;function N0(t){if(JA===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);JA=e&&e[1]||""}return`
`+JA+t}var ZA=!1;function XA(t,e){if(!t||ZA)return"";ZA=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{ZA=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?N0(t):""}function AK(t){switch(t.tag){case 5:return N0(t.type);case 16:return N0("Lazy");case 13:return N0("Suspense");case 19:return N0("SuspenseList");case 0:case 2:case 15:return t=XA(t.type,!1),t;case 11:return t=XA(t.type.render,!1),t;case 1:return t=XA(t.type,!0),t;default:return""}}function zI(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case tg:return"Fragment";case eg:return"Portal";case MI:return"Profiler";case Mk:return"StrictMode";case jI:return"Suspense";case FI:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case uL:return(t.displayName||"Context")+".Consumer";case lL:return(t._context.displayName||"Context")+".Provider";case jk:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Fk:return e=t.displayName||null,e!==null?e:zI(t.type)||"Memo";case ru:e=t._payload,t=t._init;try{return zI(t(e))}catch{}}return null}function SK(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zI(e);case 8:return e===Mk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bd(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hL(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function IK(t){var e=hL(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function g1(t){t._valueTracker||(t._valueTracker=IK(t))}function fL(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=hL(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ex(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function HI(t,e){var n=e.checked;return Un({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Z3(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=bd(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function pL(t,e){e=e.checked,e!=null&&Lk(t,"checked",e,!1)}function GI(t,e){pL(t,e);var n=bd(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?WI(t,e.type,n):e.hasOwnProperty("defaultValue")&&WI(t,e.type,bd(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function X3(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function WI(t,e,n){(e!=="number"||Ex(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var P0=Array.isArray;function Eg(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+bd(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function qI(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ye(91));return Un({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function eD(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ye(92));if(P0(n)){if(1<n.length)throw Error(ye(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:bd(n)}}function gL(t,e){var n=bd(e.value),r=bd(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function tD(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function mL(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function VI(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?mL(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var m1,yL=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(m1=m1||document.createElement("div"),m1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=m1.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ow(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var J0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TK=["Webkit","ms","Moz","O"];Object.keys(J0).forEach(function(t){TK.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),J0[e]=J0[t]})});function wL(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||J0.hasOwnProperty(t)&&J0[t]?(""+e).trim():e+"px"}function bL(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=wL(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var NK=Un({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function KI(t,e){if(e){if(NK[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ye(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ye(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ye(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ye(62))}}function QI(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var YI=null;function zk(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var JI=null,xg=null,_g=null;function nD(t){if(t=Iv(t)){if(typeof JI!="function")throw Error(ye(280));var e=t.stateNode;e&&(e=aC(e),JI(t.stateNode,t.type,e))}}function vL(t){xg?_g?_g.push(t):_g=[t]:xg=t}function EL(){if(xg){var t=xg,e=_g;if(_g=xg=null,nD(t),e)for(t=0;t<e.length;t++)nD(e[t])}}function xL(t,e){return t(e)}function _L(){}var eS=!1;function CL(t,e,n){if(eS)return t(e,n);eS=!0;try{return xL(t,e,n)}finally{eS=!1,(xg!==null||_g!==null)&&(_L(),EL())}}function Rw(t,e){var n=t.stateNode;if(n===null)return null;var r=aC(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ye(231,e,typeof n));return n}var ZI=!1;if(dl)try{var qy={};Object.defineProperty(qy,"passive",{get:function(){ZI=!0}}),window.addEventListener("test",qy,qy),window.removeEventListener("test",qy,qy)}catch{ZI=!1}function PK(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var Z0=!1,xx=null,_x=!1,XI=null,kK={onError:function(t){Z0=!0,xx=t}};function OK(t,e,n,r,s,i,o,a,c){Z0=!1,xx=null,PK.apply(kK,arguments)}function RK(t,e,n,r,s,i,o,a,c){if(OK.apply(this,arguments),Z0){if(Z0){var l=xx;Z0=!1,xx=null}else throw Error(ye(198));_x||(_x=!0,XI=l)}}function Jf(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function AL(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rD(t){if(Jf(t)!==t)throw Error(ye(188))}function DK(t){var e=t.alternate;if(!e){if(e=Jf(t),e===null)throw Error(ye(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return rD(s),t;if(i===r)return rD(s),e;i=i.sibling}throw Error(ye(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(ye(189))}}if(n.alternate!==r)throw Error(ye(190))}if(n.tag!==3)throw Error(ye(188));return n.stateNode.current===n?t:e}function SL(t){return t=DK(t),t!==null?IL(t):null}function IL(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=IL(t);if(e!==null)return e;t=t.sibling}return null}var TL=Fi.unstable_scheduleCallback,sD=Fi.unstable_cancelCallback,$K=Fi.unstable_shouldYield,UK=Fi.unstable_requestPaint,qn=Fi.unstable_now,BK=Fi.unstable_getCurrentPriorityLevel,Hk=Fi.unstable_ImmediatePriority,NL=Fi.unstable_UserBlockingPriority,Cx=Fi.unstable_NormalPriority,LK=Fi.unstable_LowPriority,PL=Fi.unstable_IdlePriority,rC=null,ec=null;function MK(t){if(ec&&typeof ec.onCommitFiberRoot=="function")try{ec.onCommitFiberRoot(rC,t,void 0,(t.current.flags&128)===128)}catch{}}var oa=Math.clz32?Math.clz32:zK,jK=Math.log,FK=Math.LN2;function zK(t){return t>>>=0,t===0?32:31-(jK(t)/FK|0)|0}var y1=64,w1=4194304;function k0(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ax(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=k0(a):(i&=o,i!==0&&(r=k0(i)))}else o=n&~s,o!==0?r=k0(o):i!==0&&(r=k0(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-oa(e),s=1<<n,r|=t[n],e&=~s;return r}function HK(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GK(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-oa(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=HK(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function eT(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function kL(){var t=y1;return y1<<=1,!(y1&4194240)&&(y1=64),t}function tS(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Av(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-oa(e),t[e]=n}function WK(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-oa(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Gk(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-oa(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var nn=0;function OL(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var RL,Wk,DL,$L,UL,tT=!1,b1=[],ed=null,td=null,nd=null,Dw=new Map,$w=new Map,fu=[],qK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iD(t,e){switch(t){case"focusin":case"focusout":ed=null;break;case"dragenter":case"dragleave":td=null;break;case"mouseover":case"mouseout":nd=null;break;case"pointerover":case"pointerout":Dw.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$w.delete(e.pointerId)}}function Vy(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Iv(e),e!==null&&Wk(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function VK(t,e,n,r,s){switch(e){case"focusin":return ed=Vy(ed,t,e,n,r,s),!0;case"dragenter":return td=Vy(td,t,e,n,r,s),!0;case"mouseover":return nd=Vy(nd,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Dw.set(i,Vy(Dw.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,$w.set(i,Vy($w.get(i)||null,t,e,n,r,s)),!0}return!1}function BL(t){var e=bh(t.target);if(e!==null){var n=Jf(e);if(n!==null){if(e=n.tag,e===13){if(e=AL(n),e!==null){t.blockedOn=e,UL(t.priority,function(){DL(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $E(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=nT(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);YI=r,n.target.dispatchEvent(r),YI=null}else return e=Iv(n),e!==null&&Wk(e),t.blockedOn=n,!1;e.shift()}return!0}function oD(t,e,n){$E(t)&&n.delete(e)}function KK(){tT=!1,ed!==null&&$E(ed)&&(ed=null),td!==null&&$E(td)&&(td=null),nd!==null&&$E(nd)&&(nd=null),Dw.forEach(oD),$w.forEach(oD)}function Ky(t,e){t.blockedOn===e&&(t.blockedOn=null,tT||(tT=!0,Fi.unstable_scheduleCallback(Fi.unstable_NormalPriority,KK)))}function Uw(t){function e(s){return Ky(s,t)}if(0<b1.length){Ky(b1[0],t);for(var n=1;n<b1.length;n++){var r=b1[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ed!==null&&Ky(ed,t),td!==null&&Ky(td,t),nd!==null&&Ky(nd,t),Dw.forEach(e),$w.forEach(e),n=0;n<fu.length;n++)r=fu[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<fu.length&&(n=fu[0],n.blockedOn===null);)BL(n),n.blockedOn===null&&fu.shift()}var Cg=xl.ReactCurrentBatchConfig,Sx=!0;function QK(t,e,n,r){var s=nn,i=Cg.transition;Cg.transition=null;try{nn=1,qk(t,e,n,r)}finally{nn=s,Cg.transition=i}}function YK(t,e,n,r){var s=nn,i=Cg.transition;Cg.transition=null;try{nn=4,qk(t,e,n,r)}finally{nn=s,Cg.transition=i}}function qk(t,e,n,r){if(Sx){var s=nT(t,e,n,r);if(s===null)dS(t,e,r,Ix,n),iD(t,r);else if(VK(s,t,e,n,r))r.stopPropagation();else if(iD(t,r),e&4&&-1<qK.indexOf(t)){for(;s!==null;){var i=Iv(s);if(i!==null&&RL(i),i=nT(t,e,n,r),i===null&&dS(t,e,r,Ix,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else dS(t,e,r,null,n)}}var Ix=null;function nT(t,e,n,r){if(Ix=null,t=zk(r),t=bh(t),t!==null)if(e=Jf(t),e===null)t=null;else if(n=e.tag,n===13){if(t=AL(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ix=t,null}function LL(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(BK()){case Hk:return 1;case NL:return 4;case Cx:case LK:return 16;case PL:return 536870912;default:return 16}default:return 16}}var qu=null,Vk=null,UE=null;function ML(){if(UE)return UE;var t,e=Vk,n=e.length,r,s="value"in qu?qu.value:qu.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return UE=s.slice(t,1<r?1-r:void 0)}function BE(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function v1(){return!0}function aD(){return!1}function Gi(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?v1:aD,this.isPropagationStopped=aD,this}return Un(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=v1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=v1)},persist:function(){},isPersistent:v1}),e}var gy={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kk=Gi(gy),Sv=Un({},gy,{view:0,detail:0}),JK=Gi(Sv),nS,rS,Qy,sC=Un({},Sv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qk,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qy&&(Qy&&t.type==="mousemove"?(nS=t.screenX-Qy.screenX,rS=t.screenY-Qy.screenY):rS=nS=0,Qy=t),nS)},movementY:function(t){return"movementY"in t?t.movementY:rS}}),cD=Gi(sC),ZK=Un({},sC,{dataTransfer:0}),XK=Gi(ZK),eQ=Un({},Sv,{relatedTarget:0}),sS=Gi(eQ),tQ=Un({},gy,{animationName:0,elapsedTime:0,pseudoElement:0}),nQ=Gi(tQ),rQ=Un({},gy,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sQ=Gi(rQ),iQ=Un({},gy,{data:0}),lD=Gi(iQ),oQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lQ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=cQ[t])?!!e[t]:!1}function Qk(){return lQ}var uQ=Un({},Sv,{key:function(t){if(t.key){var e=oQ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=BE(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?aQ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qk,charCode:function(t){return t.type==="keypress"?BE(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?BE(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dQ=Gi(uQ),hQ=Un({},sC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uD=Gi(hQ),fQ=Un({},Sv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qk}),pQ=Gi(fQ),gQ=Un({},gy,{propertyName:0,elapsedTime:0,pseudoElement:0}),mQ=Gi(gQ),yQ=Un({},sC,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wQ=Gi(yQ),bQ=[9,13,27,32],Yk=dl&&"CompositionEvent"in window,X0=null;dl&&"documentMode"in document&&(X0=document.documentMode);var vQ=dl&&"TextEvent"in window&&!X0,jL=dl&&(!Yk||X0&&8<X0&&11>=X0),dD=" ",hD=!1;function FL(t,e){switch(t){case"keyup":return bQ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zL(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ng=!1;function EQ(t,e){switch(t){case"compositionend":return zL(e);case"keypress":return e.which!==32?null:(hD=!0,dD);case"textInput":return t=e.data,t===dD&&hD?null:t;default:return null}}function xQ(t,e){if(ng)return t==="compositionend"||!Yk&&FL(t,e)?(t=ML(),UE=Vk=qu=null,ng=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jL&&e.locale!=="ko"?null:e.data;default:return null}}var _Q={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fD(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_Q[t.type]:e==="textarea"}function HL(t,e,n,r){vL(r),e=Tx(e,"onChange"),0<e.length&&(n=new Kk("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ew=null,Bw=null;function CQ(t){eM(t,0)}function iC(t){var e=ig(t);if(fL(e))return t}function AQ(t,e){if(t==="change")return e}var GL=!1;if(dl){var iS;if(dl){var oS="oninput"in document;if(!oS){var pD=document.createElement("div");pD.setAttribute("oninput","return;"),oS=typeof pD.oninput=="function"}iS=oS}else iS=!1;GL=iS&&(!document.documentMode||9<document.documentMode)}function gD(){ew&&(ew.detachEvent("onpropertychange",WL),Bw=ew=null)}function WL(t){if(t.propertyName==="value"&&iC(Bw)){var e=[];HL(e,Bw,t,zk(t)),CL(CQ,e)}}function SQ(t,e,n){t==="focusin"?(gD(),ew=e,Bw=n,ew.attachEvent("onpropertychange",WL)):t==="focusout"&&gD()}function IQ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return iC(Bw)}function TQ(t,e){if(t==="click")return iC(e)}function NQ(t,e){if(t==="input"||t==="change")return iC(e)}function PQ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var da=typeof Object.is=="function"?Object.is:PQ;function Lw(t,e){if(da(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!LI.call(e,s)||!da(t[s],e[s]))return!1}return!0}function mD(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yD(t,e){var n=mD(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mD(n)}}function qL(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qL(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function VL(){for(var t=window,e=Ex();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ex(t.document)}return e}function Jk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function kQ(t){var e=VL(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&qL(n.ownerDocument.documentElement,n)){if(r!==null&&Jk(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=yD(n,i);var o=yD(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var OQ=dl&&"documentMode"in document&&11>=document.documentMode,rg=null,rT=null,tw=null,sT=!1;function wD(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sT||rg==null||rg!==Ex(r)||(r=rg,"selectionStart"in r&&Jk(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),tw&&Lw(tw,r)||(tw=r,r=Tx(rT,"onSelect"),0<r.length&&(e=new Kk("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=rg)))}function E1(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var sg={animationend:E1("Animation","AnimationEnd"),animationiteration:E1("Animation","AnimationIteration"),animationstart:E1("Animation","AnimationStart"),transitionend:E1("Transition","TransitionEnd")},aS={},KL={};dl&&(KL=document.createElement("div").style,"AnimationEvent"in window||(delete sg.animationend.animation,delete sg.animationiteration.animation,delete sg.animationstart.animation),"TransitionEvent"in window||delete sg.transitionend.transition);function oC(t){if(aS[t])return aS[t];if(!sg[t])return t;var e=sg[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in KL)return aS[t]=e[n];return t}var QL=oC("animationend"),YL=oC("animationiteration"),JL=oC("animationstart"),ZL=oC("transitionend"),XL=new Map,bD="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dd(t,e){XL.set(t,e),Yf(e,[t])}for(var cS=0;cS<bD.length;cS++){var lS=bD[cS],RQ=lS.toLowerCase(),DQ=lS[0].toUpperCase()+lS.slice(1);Dd(RQ,"on"+DQ)}Dd(QL,"onAnimationEnd");Dd(YL,"onAnimationIteration");Dd(JL,"onAnimationStart");Dd("dblclick","onDoubleClick");Dd("focusin","onFocus");Dd("focusout","onBlur");Dd(ZL,"onTransitionEnd");Lm("onMouseEnter",["mouseout","mouseover"]);Lm("onMouseLeave",["mouseout","mouseover"]);Lm("onPointerEnter",["pointerout","pointerover"]);Lm("onPointerLeave",["pointerout","pointerover"]);Yf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yf("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var O0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$Q=new Set("cancel close invalid load scroll toggle".split(" ").concat(O0));function vD(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,RK(r,e,void 0,t),t.currentTarget=null}function eM(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;vD(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;vD(s,a,l),i=c}}}if(_x)throw t=XI,_x=!1,XI=null,t}function _n(t,e){var n=e[lT];n===void 0&&(n=e[lT]=new Set);var r=t+"__bubble";n.has(r)||(tM(e,t,2,!1),n.add(r))}function uS(t,e,n){var r=0;e&&(r|=4),tM(n,t,r,e)}var x1="_reactListening"+Math.random().toString(36).slice(2);function Mw(t){if(!t[x1]){t[x1]=!0,cL.forEach(function(n){n!=="selectionchange"&&($Q.has(n)||uS(n,!1,t),uS(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[x1]||(e[x1]=!0,uS("selectionchange",!1,e))}}function tM(t,e,n,r){switch(LL(e)){case 1:var s=QK;break;case 4:s=YK;break;default:s=qk}n=s.bind(null,e,n,t),s=void 0,!ZI||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function dS(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=bh(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}CL(function(){var l=i,u=zk(n),d=[];e:{var h=XL.get(t);if(h!==void 0){var f=Kk,p=t;switch(t){case"keypress":if(BE(n)===0)break e;case"keydown":case"keyup":f=dQ;break;case"focusin":p="focus",f=sS;break;case"focusout":p="blur",f=sS;break;case"beforeblur":case"afterblur":f=sS;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=cD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=XK;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=pQ;break;case QL:case YL:case JL:f=nQ;break;case ZL:f=mQ;break;case"scroll":f=JK;break;case"wheel":f=wQ;break;case"copy":case"cut":case"paste":f=sQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=uD}var g=(e&4)!==0,y=!g&&t==="scroll",w=g?h!==null?h+"Capture":null:h;g=[];for(var v=l,b;v!==null;){b=v;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,w!==null&&(_=Rw(v,w),_!=null&&g.push(jw(v,_,b)))),y)break;v=v.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==YI&&(p=n.relatedTarget||n.fromElement)&&(bh(p)||p[hl]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?bh(p):null,p!==null&&(y=Jf(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=cD,_="onMouseLeave",w="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=uD,_="onPointerLeave",w="onPointerEnter",v="pointer"),y=f==null?h:ig(f),b=p==null?h:ig(p),h=new g(_,v+"leave",f,n,u),h.target=y,h.relatedTarget=b,_=null,bh(u)===l&&(g=new g(w,v+"enter",p,n,u),g.target=b,g.relatedTarget=y,_=g),y=_,f&&p)t:{for(g=f,w=p,v=0,b=g;b;b=fp(b))v++;for(b=0,_=w;_;_=fp(_))b++;for(;0<v-b;)g=fp(g),v--;for(;0<b-v;)w=fp(w),b--;for(;v--;){if(g===w||w!==null&&g===w.alternate)break t;g=fp(g),w=fp(w)}g=null}else g=null;f!==null&&ED(d,h,f,g,!1),p!==null&&y!==null&&ED(d,y,p,g,!0)}}e:{if(h=l?ig(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var x=AQ;else if(fD(h))if(GL)x=NQ;else{x=IQ;var C=SQ}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(x=TQ);if(x&&(x=x(t,l))){HL(d,x,n,u);break e}C&&C(t,h,l),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&WI(h,"number",h.value)}switch(C=l?ig(l):window,t){case"focusin":(fD(C)||C.contentEditable==="true")&&(rg=C,rT=l,tw=null);break;case"focusout":tw=rT=rg=null;break;case"mousedown":sT=!0;break;case"contextmenu":case"mouseup":case"dragend":sT=!1,wD(d,n,u);break;case"selectionchange":if(OQ)break;case"keydown":case"keyup":wD(d,n,u)}var S;if(Yk)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else ng?FL(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(jL&&n.locale!=="ko"&&(ng||N!=="onCompositionStart"?N==="onCompositionEnd"&&ng&&(S=ML()):(qu=u,Vk="value"in qu?qu.value:qu.textContent,ng=!0)),C=Tx(l,N),0<C.length&&(N=new lD(N,t,null,n,u),d.push({event:N,listeners:C}),S?N.data=S:(S=zL(n),S!==null&&(N.data=S)))),(S=vQ?EQ(t,n):xQ(t,n))&&(l=Tx(l,"onBeforeInput"),0<l.length&&(u=new lD("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=S))}eM(d,e)})}function jw(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Tx(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Rw(t,n),i!=null&&r.unshift(jw(t,i,s)),i=Rw(t,e),i!=null&&r.push(jw(t,i,s))),t=t.return}return r}function fp(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ED(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=Rw(n,i),c!=null&&o.unshift(jw(n,c,a))):s||(c=Rw(n,i),c!=null&&o.push(jw(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var UQ=/\r\n?/g,BQ=/\u0000|\uFFFD/g;function xD(t){return(typeof t=="string"?t:""+t).replace(UQ,`
`).replace(BQ,"")}function _1(t,e,n){if(e=xD(e),xD(t)!==e&&n)throw Error(ye(425))}function Nx(){}var iT=null,oT=null;function aT(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var cT=typeof setTimeout=="function"?setTimeout:void 0,LQ=typeof clearTimeout=="function"?clearTimeout:void 0,_D=typeof Promise=="function"?Promise:void 0,MQ=typeof queueMicrotask=="function"?queueMicrotask:typeof _D<"u"?function(t){return _D.resolve(null).then(t).catch(jQ)}:cT;function jQ(t){setTimeout(function(){throw t})}function hS(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Uw(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Uw(e)}function rd(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function CD(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var my=Math.random().toString(36).slice(2),Ka="__reactFiber$"+my,Fw="__reactProps$"+my,hl="__reactContainer$"+my,lT="__reactEvents$"+my,FQ="__reactListeners$"+my,zQ="__reactHandles$"+my;function bh(t){var e=t[Ka];if(e)return e;for(var n=t.parentNode;n;){if(e=n[hl]||n[Ka]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=CD(t);t!==null;){if(n=t[Ka])return n;t=CD(t)}return e}t=n,n=t.parentNode}return null}function Iv(t){return t=t[Ka]||t[hl],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ig(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ye(33))}function aC(t){return t[Fw]||null}var uT=[],og=-1;function $d(t){return{current:t}}function Sn(t){0>og||(t.current=uT[og],uT[og]=null,og--)}function yn(t,e){og++,uT[og]=t.current,t.current=e}var vd={},us=$d(vd),ai=$d(!1),Ef=vd;function Mm(t,e){var n=t.type.contextTypes;if(!n)return vd;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ci(t){return t=t.childContextTypes,t!=null}function Px(){Sn(ai),Sn(us)}function AD(t,e,n){if(us.current!==vd)throw Error(ye(168));yn(us,e),yn(ai,n)}function nM(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ye(108,SK(t)||"Unknown",s));return Un({},n,r)}function kx(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vd,Ef=us.current,yn(us,t),yn(ai,ai.current),!0}function SD(t,e,n){var r=t.stateNode;if(!r)throw Error(ye(169));n?(t=nM(t,e,Ef),r.__reactInternalMemoizedMergedChildContext=t,Sn(ai),Sn(us),yn(us,t)):Sn(ai),yn(ai,n)}var Rc=null,cC=!1,fS=!1;function rM(t){Rc===null?Rc=[t]:Rc.push(t)}function HQ(t){cC=!0,rM(t)}function Ud(){if(!fS&&Rc!==null){fS=!0;var t=0,e=nn;try{var n=Rc;for(nn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Rc=null,cC=!1}catch(s){throw Rc!==null&&(Rc=Rc.slice(t+1)),TL(Hk,Ud),s}finally{nn=e,fS=!1}}return null}var ag=[],cg=0,Ox=null,Rx=0,po=[],go=0,xf=null,Xc=1,el="";function nh(t,e){ag[cg++]=Rx,ag[cg++]=Ox,Ox=t,Rx=e}function sM(t,e,n){po[go++]=Xc,po[go++]=el,po[go++]=xf,xf=t;var r=Xc;t=el;var s=32-oa(r)-1;r&=~(1<<s),n+=1;var i=32-oa(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Xc=1<<32-oa(e)+s|n<<s|r,el=i+t}else Xc=1<<i|n<<s|r,el=t}function Zk(t){t.return!==null&&(nh(t,1),sM(t,1,0))}function Xk(t){for(;t===Ox;)Ox=ag[--cg],ag[cg]=null,Rx=ag[--cg],ag[cg]=null;for(;t===xf;)xf=po[--go],po[go]=null,el=po[--go],po[go]=null,Xc=po[--go],po[go]=null}var Li=null,$i=null,Nn=!1,Jo=null;function iM(t,e){var n=mo(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ID(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Li=t,$i=rd(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Li=t,$i=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=xf!==null?{id:Xc,overflow:el}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=mo(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Li=t,$i=null,!0):!1;default:return!1}}function dT(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hT(t){if(Nn){var e=$i;if(e){var n=e;if(!ID(t,e)){if(dT(t))throw Error(ye(418));e=rd(n.nextSibling);var r=Li;e&&ID(t,e)?iM(r,n):(t.flags=t.flags&-4097|2,Nn=!1,Li=t)}}else{if(dT(t))throw Error(ye(418));t.flags=t.flags&-4097|2,Nn=!1,Li=t}}}function TD(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Li=t}function C1(t){if(t!==Li)return!1;if(!Nn)return TD(t),Nn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!aT(t.type,t.memoizedProps)),e&&(e=$i)){if(dT(t))throw oM(),Error(ye(418));for(;e;)iM(t,e),e=rd(e.nextSibling)}if(TD(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ye(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$i=rd(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$i=null}}else $i=Li?rd(t.stateNode.nextSibling):null;return!0}function oM(){for(var t=$i;t;)t=rd(t.nextSibling)}function jm(){$i=Li=null,Nn=!1}function eO(t){Jo===null?Jo=[t]:Jo.push(t)}var GQ=xl.ReactCurrentBatchConfig;function Yy(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ye(309));var r=n.stateNode}if(!r)throw Error(ye(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ye(284));if(!n._owner)throw Error(ye(290,t))}return t}function A1(t,e){throw t=Object.prototype.toString.call(e),Error(ye(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ND(t){var e=t._init;return e(t._payload)}function aM(t){function e(w,v){if(t){var b=w.deletions;b===null?(w.deletions=[v],w.flags|=16):b.push(v)}}function n(w,v){if(!t)return null;for(;v!==null;)e(w,v),v=v.sibling;return null}function r(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function s(w,v){return w=ad(w,v),w.index=0,w.sibling=null,w}function i(w,v,b){return w.index=b,t?(b=w.alternate,b!==null?(b=b.index,b<v?(w.flags|=2,v):b):(w.flags|=2,v)):(w.flags|=1048576,v)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,v,b,_){return v===null||v.tag!==6?(v=vS(b,w.mode,_),v.return=w,v):(v=s(v,b),v.return=w,v)}function c(w,v,b,_){var x=b.type;return x===tg?u(w,v,b.props.children,_,b.key):v!==null&&(v.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===ru&&ND(x)===v.type)?(_=s(v,b.props),_.ref=Yy(w,v,b),_.return=w,_):(_=GE(b.type,b.key,b.props,null,w.mode,_),_.ref=Yy(w,v,b),_.return=w,_)}function l(w,v,b,_){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=ES(b,w.mode,_),v.return=w,v):(v=s(v,b.children||[]),v.return=w,v)}function u(w,v,b,_,x){return v===null||v.tag!==7?(v=hf(b,w.mode,_,x),v.return=w,v):(v=s(v,b),v.return=w,v)}function d(w,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=vS(""+v,w.mode,b),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case p1:return b=GE(v.type,v.key,v.props,null,w.mode,b),b.ref=Yy(w,null,v),b.return=w,b;case eg:return v=ES(v,w.mode,b),v.return=w,v;case ru:var _=v._init;return d(w,_(v._payload),b)}if(P0(v)||Wy(v))return v=hf(v,w.mode,b,null),v.return=w,v;A1(w,v)}return null}function h(w,v,b,_){var x=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return x!==null?null:a(w,v,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case p1:return b.key===x?c(w,v,b,_):null;case eg:return b.key===x?l(w,v,b,_):null;case ru:return x=b._init,h(w,v,x(b._payload),_)}if(P0(b)||Wy(b))return x!==null?null:u(w,v,b,_,null);A1(w,b)}return null}function f(w,v,b,_,x){if(typeof _=="string"&&_!==""||typeof _=="number")return w=w.get(b)||null,a(v,w,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case p1:return w=w.get(_.key===null?b:_.key)||null,c(v,w,_,x);case eg:return w=w.get(_.key===null?b:_.key)||null,l(v,w,_,x);case ru:var C=_._init;return f(w,v,b,C(_._payload),x)}if(P0(_)||Wy(_))return w=w.get(b)||null,u(v,w,_,x,null);A1(v,_)}return null}function p(w,v,b,_){for(var x=null,C=null,S=v,N=v=0,A=null;S!==null&&N<b.length;N++){S.index>N?(A=S,S=null):A=S.sibling;var P=h(w,S,b[N],_);if(P===null){S===null&&(S=A);break}t&&S&&P.alternate===null&&e(w,S),v=i(P,v,N),C===null?x=P:C.sibling=P,C=P,S=A}if(N===b.length)return n(w,S),Nn&&nh(w,N),x;if(S===null){for(;N<b.length;N++)S=d(w,b[N],_),S!==null&&(v=i(S,v,N),C===null?x=S:C.sibling=S,C=S);return Nn&&nh(w,N),x}for(S=r(w,S);N<b.length;N++)A=f(S,w,N,b[N],_),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?N:A.key),v=i(A,v,N),C===null?x=A:C.sibling=A,C=A);return t&&S.forEach(function(R){return e(w,R)}),Nn&&nh(w,N),x}function g(w,v,b,_){var x=Wy(b);if(typeof x!="function")throw Error(ye(150));if(b=x.call(b),b==null)throw Error(ye(151));for(var C=x=null,S=v,N=v=0,A=null,P=b.next();S!==null&&!P.done;N++,P=b.next()){S.index>N?(A=S,S=null):A=S.sibling;var R=h(w,S,P.value,_);if(R===null){S===null&&(S=A);break}t&&S&&R.alternate===null&&e(w,S),v=i(R,v,N),C===null?x=R:C.sibling=R,C=R,S=A}if(P.done)return n(w,S),Nn&&nh(w,N),x;if(S===null){for(;!P.done;N++,P=b.next())P=d(w,P.value,_),P!==null&&(v=i(P,v,N),C===null?x=P:C.sibling=P,C=P);return Nn&&nh(w,N),x}for(S=r(w,S);!P.done;N++,P=b.next())P=f(S,w,N,P.value,_),P!==null&&(t&&P.alternate!==null&&S.delete(P.key===null?N:P.key),v=i(P,v,N),C===null?x=P:C.sibling=P,C=P);return t&&S.forEach(function(j){return e(w,j)}),Nn&&nh(w,N),x}function y(w,v,b,_){if(typeof b=="object"&&b!==null&&b.type===tg&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case p1:e:{for(var x=b.key,C=v;C!==null;){if(C.key===x){if(x=b.type,x===tg){if(C.tag===7){n(w,C.sibling),v=s(C,b.props.children),v.return=w,w=v;break e}}else if(C.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===ru&&ND(x)===C.type){n(w,C.sibling),v=s(C,b.props),v.ref=Yy(w,C,b),v.return=w,w=v;break e}n(w,C);break}else e(w,C);C=C.sibling}b.type===tg?(v=hf(b.props.children,w.mode,_,b.key),v.return=w,w=v):(_=GE(b.type,b.key,b.props,null,w.mode,_),_.ref=Yy(w,v,b),_.return=w,w=_)}return o(w);case eg:e:{for(C=b.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(w,v.sibling),v=s(v,b.children||[]),v.return=w,w=v;break e}else{n(w,v);break}else e(w,v);v=v.sibling}v=ES(b,w.mode,_),v.return=w,w=v}return o(w);case ru:return C=b._init,y(w,v,C(b._payload),_)}if(P0(b))return p(w,v,b,_);if(Wy(b))return g(w,v,b,_);A1(w,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(w,v.sibling),v=s(v,b),v.return=w,w=v):(n(w,v),v=vS(b,w.mode,_),v.return=w,w=v),o(w)):n(w,v)}return y}var Fm=aM(!0),cM=aM(!1),Dx=$d(null),$x=null,lg=null,tO=null;function nO(){tO=lg=$x=null}function rO(t){var e=Dx.current;Sn(Dx),t._currentValue=e}function fT(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ag(t,e){$x=t,tO=lg=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ii=!0),t.firstContext=null)}function bo(t){var e=t._currentValue;if(tO!==t)if(t={context:t,memoizedValue:e,next:null},lg===null){if($x===null)throw Error(ye(308));lg=t,$x.dependencies={lanes:0,firstContext:t}}else lg=lg.next=t;return e}var vh=null;function sO(t){vh===null?vh=[t]:vh.push(t)}function lM(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,sO(e)):(n.next=s.next,s.next=n),e.interleaved=n,fl(t,r)}function fl(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var su=!1;function iO(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uM(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function rl(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function sd(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Rt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,fl(t,n)}return s=r.interleaved,s===null?(e.next=e,sO(r)):(e.next=s.next,s.next=e),r.interleaved=e,fl(t,n)}function LE(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gk(t,n)}}function PD(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ux(t,e,n,r){var s=t.updateQueue;su=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Un({},d,h);break e;case 2:su=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Cf|=o,t.lanes=o,t.memoizedState=d}}function kD(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ye(191,s));s.call(r)}}}var Tv={},tc=$d(Tv),zw=$d(Tv),Hw=$d(Tv);function Eh(t){if(t===Tv)throw Error(ye(174));return t}function oO(t,e){switch(yn(Hw,e),yn(zw,t),yn(tc,Tv),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:VI(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=VI(e,t)}Sn(tc),yn(tc,e)}function zm(){Sn(tc),Sn(zw),Sn(Hw)}function dM(t){Eh(Hw.current);var e=Eh(tc.current),n=VI(e,t.type);e!==n&&(yn(zw,t),yn(tc,n))}function aO(t){zw.current===t&&(Sn(tc),Sn(zw))}var On=$d(0);function Bx(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var pS=[];function cO(){for(var t=0;t<pS.length;t++)pS[t]._workInProgressVersionPrimary=null;pS.length=0}var ME=xl.ReactCurrentDispatcher,gS=xl.ReactCurrentBatchConfig,_f=0,$n=null,or=null,yr=null,Lx=!1,nw=!1,Gw=0,WQ=0;function Kr(){throw Error(ye(321))}function lO(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!da(t[n],e[n]))return!1;return!0}function uO(t,e,n,r,s,i){if(_f=i,$n=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ME.current=t===null||t.memoizedState===null?QQ:YQ,t=n(r,s),nw){i=0;do{if(nw=!1,Gw=0,25<=i)throw Error(ye(301));i+=1,yr=or=null,e.updateQueue=null,ME.current=JQ,t=n(r,s)}while(nw)}if(ME.current=Mx,e=or!==null&&or.next!==null,_f=0,yr=or=$n=null,Lx=!1,e)throw Error(ye(300));return t}function dO(){var t=Gw!==0;return Gw=0,t}function Pa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yr===null?$n.memoizedState=yr=t:yr=yr.next=t,yr}function vo(){if(or===null){var t=$n.alternate;t=t!==null?t.memoizedState:null}else t=or.next;var e=yr===null?$n.memoizedState:yr.next;if(e!==null)yr=e,or=t;else{if(t===null)throw Error(ye(310));or=t,t={memoizedState:or.memoizedState,baseState:or.baseState,baseQueue:or.baseQueue,queue:or.queue,next:null},yr===null?$n.memoizedState=yr=t:yr=yr.next=t}return yr}function Ww(t,e){return typeof e=="function"?e(t):e}function mS(t){var e=vo(),n=e.queue;if(n===null)throw Error(ye(311));n.lastRenderedReducer=t;var r=or,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((_f&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,$n.lanes|=u,Cf|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,da(r,e.memoizedState)||(ii=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,$n.lanes|=i,Cf|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function yS(t){var e=vo(),n=e.queue;if(n===null)throw Error(ye(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);da(i,e.memoizedState)||(ii=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function hM(){}function fM(t,e){var n=$n,r=vo(),s=e(),i=!da(r.memoizedState,s);if(i&&(r.memoizedState=s,ii=!0),r=r.queue,hO(mM.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||yr!==null&&yr.memoizedState.tag&1){if(n.flags|=2048,qw(9,gM.bind(null,n,r,s,e),void 0,null),_r===null)throw Error(ye(349));_f&30||pM(n,e,s)}return s}function pM(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$n.updateQueue,e===null?(e={lastEffect:null,stores:null},$n.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function gM(t,e,n,r){e.value=n,e.getSnapshot=r,yM(e)&&wM(t)}function mM(t,e,n){return n(function(){yM(e)&&wM(t)})}function yM(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!da(t,n)}catch{return!0}}function wM(t){var e=fl(t,1);e!==null&&aa(e,t,1,-1)}function OD(t){var e=Pa();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ww,lastRenderedState:t},e.queue=t,t=t.dispatch=KQ.bind(null,$n,t),[e.memoizedState,t]}function qw(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=$n.updateQueue,e===null?(e={lastEffect:null,stores:null},$n.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function bM(){return vo().memoizedState}function jE(t,e,n,r){var s=Pa();$n.flags|=t,s.memoizedState=qw(1|e,n,void 0,r===void 0?null:r)}function lC(t,e,n,r){var s=vo();r=r===void 0?null:r;var i=void 0;if(or!==null){var o=or.memoizedState;if(i=o.destroy,r!==null&&lO(r,o.deps)){s.memoizedState=qw(e,n,i,r);return}}$n.flags|=t,s.memoizedState=qw(1|e,n,i,r)}function RD(t,e){return jE(8390656,8,t,e)}function hO(t,e){return lC(2048,8,t,e)}function vM(t,e){return lC(4,2,t,e)}function EM(t,e){return lC(4,4,t,e)}function xM(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _M(t,e,n){return n=n!=null?n.concat([t]):null,lC(4,4,xM.bind(null,e,t),n)}function fO(){}function CM(t,e){var n=vo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lO(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function AM(t,e){var n=vo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lO(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function SM(t,e,n){return _f&21?(da(n,e)||(n=kL(),$n.lanes|=n,Cf|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ii=!0),t.memoizedState=n)}function qQ(t,e){var n=nn;nn=n!==0&&4>n?n:4,t(!0);var r=gS.transition;gS.transition={};try{t(!1),e()}finally{nn=n,gS.transition=r}}function IM(){return vo().memoizedState}function VQ(t,e,n){var r=od(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},TM(t))NM(e,n);else if(n=lM(t,e,n,r),n!==null){var s=Ts();aa(n,t,r,s),PM(n,e,r)}}function KQ(t,e,n){var r=od(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(TM(t))NM(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,da(a,o)){var c=e.interleaved;c===null?(s.next=s,sO(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=lM(t,e,s,r),n!==null&&(s=Ts(),aa(n,t,r,s),PM(n,e,r))}}function TM(t){var e=t.alternate;return t===$n||e!==null&&e===$n}function NM(t,e){nw=Lx=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function PM(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gk(t,n)}}var Mx={readContext:bo,useCallback:Kr,useContext:Kr,useEffect:Kr,useImperativeHandle:Kr,useInsertionEffect:Kr,useLayoutEffect:Kr,useMemo:Kr,useReducer:Kr,useRef:Kr,useState:Kr,useDebugValue:Kr,useDeferredValue:Kr,useTransition:Kr,useMutableSource:Kr,useSyncExternalStore:Kr,useId:Kr,unstable_isNewReconciler:!1},QQ={readContext:bo,useCallback:function(t,e){return Pa().memoizedState=[t,e===void 0?null:e],t},useContext:bo,useEffect:RD,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,jE(4194308,4,xM.bind(null,e,t),n)},useLayoutEffect:function(t,e){return jE(4194308,4,t,e)},useInsertionEffect:function(t,e){return jE(4,2,t,e)},useMemo:function(t,e){var n=Pa();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Pa();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=VQ.bind(null,$n,t),[r.memoizedState,t]},useRef:function(t){var e=Pa();return t={current:t},e.memoizedState=t},useState:OD,useDebugValue:fO,useDeferredValue:function(t){return Pa().memoizedState=t},useTransition:function(){var t=OD(!1),e=t[0];return t=qQ.bind(null,t[1]),Pa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=$n,s=Pa();if(Nn){if(n===void 0)throw Error(ye(407));n=n()}else{if(n=e(),_r===null)throw Error(ye(349));_f&30||pM(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,RD(mM.bind(null,r,i,t),[t]),r.flags|=2048,qw(9,gM.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Pa(),e=_r.identifierPrefix;if(Nn){var n=el,r=Xc;n=(r&~(1<<32-oa(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Gw++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=WQ++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},YQ={readContext:bo,useCallback:CM,useContext:bo,useEffect:hO,useImperativeHandle:_M,useInsertionEffect:vM,useLayoutEffect:EM,useMemo:AM,useReducer:mS,useRef:bM,useState:function(){return mS(Ww)},useDebugValue:fO,useDeferredValue:function(t){var e=vo();return SM(e,or.memoizedState,t)},useTransition:function(){var t=mS(Ww)[0],e=vo().memoizedState;return[t,e]},useMutableSource:hM,useSyncExternalStore:fM,useId:IM,unstable_isNewReconciler:!1},JQ={readContext:bo,useCallback:CM,useContext:bo,useEffect:hO,useImperativeHandle:_M,useInsertionEffect:vM,useLayoutEffect:EM,useMemo:AM,useReducer:yS,useRef:bM,useState:function(){return yS(Ww)},useDebugValue:fO,useDeferredValue:function(t){var e=vo();return or===null?e.memoizedState=t:SM(e,or.memoizedState,t)},useTransition:function(){var t=yS(Ww)[0],e=vo().memoizedState;return[t,e]},useMutableSource:hM,useSyncExternalStore:fM,useId:IM,unstable_isNewReconciler:!1};function Mo(t,e){if(t&&t.defaultProps){e=Un({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function pT(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Un({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var uC={isMounted:function(t){return(t=t._reactInternals)?Jf(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ts(),s=od(t),i=rl(r,s);i.payload=e,n!=null&&(i.callback=n),e=sd(t,i,s),e!==null&&(aa(e,t,s,r),LE(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ts(),s=od(t),i=rl(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=sd(t,i,s),e!==null&&(aa(e,t,s,r),LE(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ts(),r=od(t),s=rl(n,r);s.tag=2,e!=null&&(s.callback=e),e=sd(t,s,r),e!==null&&(aa(e,t,r,n),LE(e,t,r))}};function DD(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Lw(n,r)||!Lw(s,i):!0}function kM(t,e,n){var r=!1,s=vd,i=e.contextType;return typeof i=="object"&&i!==null?i=bo(i):(s=ci(e)?Ef:us.current,r=e.contextTypes,i=(r=r!=null)?Mm(t,s):vd),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uC,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function $D(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&uC.enqueueReplaceState(e,e.state,null)}function gT(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},iO(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=bo(i):(i=ci(e)?Ef:us.current,s.context=Mm(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(pT(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&uC.enqueueReplaceState(s,s.state,null),Ux(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Hm(t,e){try{var n="",r=e;do n+=AK(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function wS(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function mT(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ZQ=typeof WeakMap=="function"?WeakMap:Map;function OM(t,e,n){n=rl(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Fx||(Fx=!0,ST=r),mT(t,e)},n}function RM(t,e,n){n=rl(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){mT(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){mT(t,e),typeof r!="function"&&(id===null?id=new Set([this]):id.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function UD(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ZQ;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=hY.bind(null,t,e,n),e.then(t,t))}function BD(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function LD(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=rl(-1,1),e.tag=2,sd(n,e,1))),n.lanes|=1),t)}var XQ=xl.ReactCurrentOwner,ii=!1;function bs(t,e,n,r){e.child=t===null?cM(e,null,n,r):Fm(e,t.child,n,r)}function MD(t,e,n,r,s){n=n.render;var i=e.ref;return Ag(e,s),r=uO(t,e,n,r,i,s),n=dO(),t!==null&&!ii?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,pl(t,e,s)):(Nn&&n&&Zk(e),e.flags|=1,bs(t,e,r,s),e.child)}function jD(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!EO(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,DM(t,e,i,r,s)):(t=GE(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Lw,n(o,r)&&t.ref===e.ref)return pl(t,e,s)}return e.flags|=1,t=ad(i,r),t.ref=e.ref,t.return=e,e.child=t}function DM(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Lw(i,r)&&t.ref===e.ref)if(ii=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(ii=!0);else return e.lanes=t.lanes,pl(t,e,s)}return yT(t,e,n,r,s)}function $M(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},yn(dg,ki),ki|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,yn(dg,ki),ki|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,yn(dg,ki),ki|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,yn(dg,ki),ki|=r;return bs(t,e,s,n),e.child}function UM(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function yT(t,e,n,r,s){var i=ci(n)?Ef:us.current;return i=Mm(e,i),Ag(e,s),n=uO(t,e,n,r,i,s),r=dO(),t!==null&&!ii?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,pl(t,e,s)):(Nn&&r&&Zk(e),e.flags|=1,bs(t,e,n,s),e.child)}function FD(t,e,n,r,s){if(ci(n)){var i=!0;kx(e)}else i=!1;if(Ag(e,s),e.stateNode===null)FE(t,e),kM(e,n,r),gT(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=bo(l):(l=ci(n)?Ef:us.current,l=Mm(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&$D(e,o,r,l),su=!1;var h=e.memoizedState;o.state=h,Ux(e,r,o,s),c=e.memoizedState,a!==r||h!==c||ai.current||su?(typeof u=="function"&&(pT(e,n,u,r),c=e.memoizedState),(a=su||DD(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,uM(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:Mo(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=bo(c):(c=ci(n)?Ef:us.current,c=Mm(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&$D(e,o,r,c),su=!1,h=e.memoizedState,o.state=h,Ux(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||ai.current||su?(typeof f=="function"&&(pT(e,n,f,r),p=e.memoizedState),(l=su||DD(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return wT(t,e,n,r,i,s)}function wT(t,e,n,r,s,i){UM(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&SD(e,n,!1),pl(t,e,i);r=e.stateNode,XQ.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Fm(e,t.child,null,i),e.child=Fm(e,null,a,i)):bs(t,e,a,i),e.memoizedState=r.state,s&&SD(e,n,!0),e.child}function BM(t){var e=t.stateNode;e.pendingContext?AD(t,e.pendingContext,e.pendingContext!==e.context):e.context&&AD(t,e.context,!1),oO(t,e.containerInfo)}function zD(t,e,n,r,s){return jm(),eO(s),e.flags|=256,bs(t,e,n,r),e.child}var bT={dehydrated:null,treeContext:null,retryLane:0};function vT(t){return{baseLanes:t,cachePool:null,transitions:null}}function LM(t,e,n){var r=e.pendingProps,s=On.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),yn(On,s&1),t===null)return hT(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=fC(o,r,0,null),t=hf(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=vT(n),e.memoizedState=bT,t):pO(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return eY(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ad(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ad(a,i):(i=hf(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?vT(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=bT,r}return i=t.child,t=i.sibling,r=ad(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function pO(t,e){return e=fC({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function S1(t,e,n,r){return r!==null&&eO(r),Fm(e,t.child,null,n),t=pO(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function eY(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=wS(Error(ye(422))),S1(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=fC({mode:"visible",children:r.children},s,0,null),i=hf(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Fm(e,t.child,null,o),e.child.memoizedState=vT(o),e.memoizedState=bT,i);if(!(e.mode&1))return S1(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(ye(419)),r=wS(i,r,void 0),S1(t,e,o,r)}if(a=(o&t.childLanes)!==0,ii||a){if(r=_r,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,fl(t,s),aa(r,t,s,-1))}return vO(),r=wS(Error(ye(421))),S1(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=fY.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,$i=rd(s.nextSibling),Li=e,Nn=!0,Jo=null,t!==null&&(po[go++]=Xc,po[go++]=el,po[go++]=xf,Xc=t.id,el=t.overflow,xf=e),e=pO(e,r.children),e.flags|=4096,e)}function HD(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),fT(t.return,e,n)}function bS(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function MM(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(bs(t,e,r.children,n),r=On.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&HD(t,n,e);else if(t.tag===19)HD(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(yn(On,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Bx(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),bS(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Bx(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}bS(e,!0,n,null,i);break;case"together":bS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function FE(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pl(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Cf|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ye(153));if(e.child!==null){for(t=e.child,n=ad(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ad(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function tY(t,e,n){switch(e.tag){case 3:BM(e),jm();break;case 5:dM(e);break;case 1:ci(e.type)&&kx(e);break;case 4:oO(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;yn(Dx,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(yn(On,On.current&1),e.flags|=128,null):n&e.child.childLanes?LM(t,e,n):(yn(On,On.current&1),t=pl(t,e,n),t!==null?t.sibling:null);yn(On,On.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return MM(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),yn(On,On.current),r)break;return null;case 22:case 23:return e.lanes=0,$M(t,e,n)}return pl(t,e,n)}var jM,ET,FM,zM;jM=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ET=function(){};FM=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Eh(tc.current);var i=null;switch(n){case"input":s=HI(t,s),r=HI(t,r),i=[];break;case"select":s=Un({},s,{value:void 0}),r=Un({},r,{value:void 0}),i=[];break;case"textarea":s=qI(t,s),r=qI(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Nx)}KI(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(kw.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(kw.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&_n("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};zM=function(t,e,n,r){n!==r&&(e.flags|=4)};function Jy(t,e){if(!Nn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Qr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function nY(t,e,n){var r=e.pendingProps;switch(Xk(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qr(e),null;case 1:return ci(e.type)&&Px(),Qr(e),null;case 3:return r=e.stateNode,zm(),Sn(ai),Sn(us),cO(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(C1(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jo!==null&&(NT(Jo),Jo=null))),ET(t,e),Qr(e),null;case 5:aO(e);var s=Eh(Hw.current);if(n=e.type,t!==null&&e.stateNode!=null)FM(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ye(166));return Qr(e),null}if(t=Eh(tc.current),C1(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Ka]=e,r[Fw]=i,t=(e.mode&1)!==0,n){case"dialog":_n("cancel",r),_n("close",r);break;case"iframe":case"object":case"embed":_n("load",r);break;case"video":case"audio":for(s=0;s<O0.length;s++)_n(O0[s],r);break;case"source":_n("error",r);break;case"img":case"image":case"link":_n("error",r),_n("load",r);break;case"details":_n("toggle",r);break;case"input":Z3(r,i),_n("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},_n("invalid",r);break;case"textarea":eD(r,i),_n("invalid",r)}KI(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&_1(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&_1(r.textContent,a,t),s=["children",""+a]):kw.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&_n("scroll",r)}switch(n){case"input":g1(r),X3(r,i,!0);break;case"textarea":g1(r),tD(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Nx)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mL(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ka]=e,t[Fw]=r,jM(t,e,!1,!1),e.stateNode=t;e:{switch(o=QI(n,r),n){case"dialog":_n("cancel",t),_n("close",t),s=r;break;case"iframe":case"object":case"embed":_n("load",t),s=r;break;case"video":case"audio":for(s=0;s<O0.length;s++)_n(O0[s],t);s=r;break;case"source":_n("error",t),s=r;break;case"img":case"image":case"link":_n("error",t),_n("load",t),s=r;break;case"details":_n("toggle",t),s=r;break;case"input":Z3(t,r),s=HI(t,r),_n("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Un({},r,{value:void 0}),_n("invalid",t);break;case"textarea":eD(t,r),s=qI(t,r),_n("invalid",t);break;default:s=r}KI(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?bL(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&yL(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ow(t,c):typeof c=="number"&&Ow(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(kw.hasOwnProperty(i)?c!=null&&i==="onScroll"&&_n("scroll",t):c!=null&&Lk(t,i,c,o))}switch(n){case"input":g1(t),X3(t,r,!1);break;case"textarea":g1(t),tD(t);break;case"option":r.value!=null&&t.setAttribute("value",""+bd(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Eg(t,!!r.multiple,i,!1):r.defaultValue!=null&&Eg(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Nx)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qr(e),null;case 6:if(t&&e.stateNode!=null)zM(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ye(166));if(n=Eh(Hw.current),Eh(tc.current),C1(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ka]=e,(i=r.nodeValue!==n)&&(t=Li,t!==null))switch(t.tag){case 3:_1(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_1(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ka]=e,e.stateNode=r}return Qr(e),null;case 13:if(Sn(On),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Nn&&$i!==null&&e.mode&1&&!(e.flags&128))oM(),jm(),e.flags|=98560,i=!1;else if(i=C1(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ye(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ye(317));i[Ka]=e}else jm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qr(e),i=!1}else Jo!==null&&(NT(Jo),Jo=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||On.current&1?lr===0&&(lr=3):vO())),e.updateQueue!==null&&(e.flags|=4),Qr(e),null);case 4:return zm(),ET(t,e),t===null&&Mw(e.stateNode.containerInfo),Qr(e),null;case 10:return rO(e.type._context),Qr(e),null;case 17:return ci(e.type)&&Px(),Qr(e),null;case 19:if(Sn(On),i=e.memoizedState,i===null)return Qr(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Jy(i,!1);else{if(lr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Bx(t),o!==null){for(e.flags|=128,Jy(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return yn(On,On.current&1|2),e.child}t=t.sibling}i.tail!==null&&qn()>Gm&&(e.flags|=128,r=!0,Jy(i,!1),e.lanes=4194304)}else{if(!r)if(t=Bx(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Jy(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Nn)return Qr(e),null}else 2*qn()-i.renderingStartTime>Gm&&n!==1073741824&&(e.flags|=128,r=!0,Jy(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=qn(),e.sibling=null,n=On.current,yn(On,r?n&1|2:n&1),e):(Qr(e),null);case 22:case 23:return bO(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ki&1073741824&&(Qr(e),e.subtreeFlags&6&&(e.flags|=8192)):Qr(e),null;case 24:return null;case 25:return null}throw Error(ye(156,e.tag))}function rY(t,e){switch(Xk(e),e.tag){case 1:return ci(e.type)&&Px(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zm(),Sn(ai),Sn(us),cO(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return aO(e),null;case 13:if(Sn(On),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ye(340));jm()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Sn(On),null;case 4:return zm(),null;case 10:return rO(e.type._context),null;case 22:case 23:return bO(),null;case 24:return null;default:return null}}var I1=!1,cs=!1,sY=typeof WeakSet=="function"?WeakSet:Set,ze=null;function ug(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){jn(t,e,r)}else n.current=null}function xT(t,e,n){try{n()}catch(r){jn(t,e,r)}}var GD=!1;function iY(t,e){if(iT=Sx,t=VL(),Jk(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(oT={focusedElem:t,selectionRange:n},Sx=!1,ze=e;ze!==null;)if(e=ze,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ze=t;else for(;ze!==null;){e=ze;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,y=p.memoizedState,w=e.stateNode,v=w.getSnapshotBeforeUpdate(e.elementType===e.type?g:Mo(e.type,g),y);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ye(163))}}catch(_){jn(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,ze=t;break}ze=e.return}return p=GD,GD=!1,p}function rw(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&xT(e,n,i)}s=s.next}while(s!==r)}}function dC(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function _T(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function HM(t){var e=t.alternate;e!==null&&(t.alternate=null,HM(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ka],delete e[Fw],delete e[lT],delete e[FQ],delete e[zQ])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function GM(t){return t.tag===5||t.tag===3||t.tag===4}function WD(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||GM(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function CT(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Nx));else if(r!==4&&(t=t.child,t!==null))for(CT(t,e,n),t=t.sibling;t!==null;)CT(t,e,n),t=t.sibling}function AT(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(AT(t,e,n),t=t.sibling;t!==null;)AT(t,e,n),t=t.sibling}var $r=null,Qo=!1;function Nl(t,e,n){for(n=n.child;n!==null;)WM(t,e,n),n=n.sibling}function WM(t,e,n){if(ec&&typeof ec.onCommitFiberUnmount=="function")try{ec.onCommitFiberUnmount(rC,n)}catch{}switch(n.tag){case 5:cs||ug(n,e);case 6:var r=$r,s=Qo;$r=null,Nl(t,e,n),$r=r,Qo=s,$r!==null&&(Qo?(t=$r,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$r.removeChild(n.stateNode));break;case 18:$r!==null&&(Qo?(t=$r,n=n.stateNode,t.nodeType===8?hS(t.parentNode,n):t.nodeType===1&&hS(t,n),Uw(t)):hS($r,n.stateNode));break;case 4:r=$r,s=Qo,$r=n.stateNode.containerInfo,Qo=!0,Nl(t,e,n),$r=r,Qo=s;break;case 0:case 11:case 14:case 15:if(!cs&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&xT(n,e,o),s=s.next}while(s!==r)}Nl(t,e,n);break;case 1:if(!cs&&(ug(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){jn(n,e,a)}Nl(t,e,n);break;case 21:Nl(t,e,n);break;case 22:n.mode&1?(cs=(r=cs)||n.memoizedState!==null,Nl(t,e,n),cs=r):Nl(t,e,n);break;default:Nl(t,e,n)}}function qD(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new sY),e.forEach(function(r){var s=pY.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Io(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:$r=a.stateNode,Qo=!1;break e;case 3:$r=a.stateNode.containerInfo,Qo=!0;break e;case 4:$r=a.stateNode.containerInfo,Qo=!0;break e}a=a.return}if($r===null)throw Error(ye(160));WM(i,o,s),$r=null,Qo=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){jn(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qM(e,t),e=e.sibling}function qM(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Io(e,t),xa(t),r&4){try{rw(3,t,t.return),dC(3,t)}catch(g){jn(t,t.return,g)}try{rw(5,t,t.return)}catch(g){jn(t,t.return,g)}}break;case 1:Io(e,t),xa(t),r&512&&n!==null&&ug(n,n.return);break;case 5:if(Io(e,t),xa(t),r&512&&n!==null&&ug(n,n.return),t.flags&32){var s=t.stateNode;try{Ow(s,"")}catch(g){jn(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&pL(s,i),QI(a,o);var l=QI(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?bL(s,d):u==="dangerouslySetInnerHTML"?yL(s,d):u==="children"?Ow(s,d):Lk(s,u,d,l)}switch(a){case"input":GI(s,i);break;case"textarea":gL(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Eg(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?Eg(s,!!i.multiple,i.defaultValue,!0):Eg(s,!!i.multiple,i.multiple?[]:"",!1))}s[Fw]=i}catch(g){jn(t,t.return,g)}}break;case 6:if(Io(e,t),xa(t),r&4){if(t.stateNode===null)throw Error(ye(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){jn(t,t.return,g)}}break;case 3:if(Io(e,t),xa(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Uw(e.containerInfo)}catch(g){jn(t,t.return,g)}break;case 4:Io(e,t),xa(t);break;case 13:Io(e,t),xa(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(yO=qn())),r&4&&qD(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(cs=(l=cs)||u,Io(e,t),cs=l):Io(e,t),xa(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(ze=t,u=t.child;u!==null;){for(d=ze=u;ze!==null;){switch(h=ze,f=h.child,h.tag){case 0:case 11:case 14:case 15:rw(4,h,h.return);break;case 1:ug(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){jn(r,n,g)}}break;case 5:ug(h,h.return);break;case 22:if(h.memoizedState!==null){KD(d);continue}}f!==null?(f.return=h,ze=f):KD(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=wL("display",o))}catch(g){jn(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){jn(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Io(e,t),xa(t),r&4&&qD(t);break;case 21:break;default:Io(e,t),xa(t)}}function xa(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(GM(n)){var r=n;break e}n=n.return}throw Error(ye(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ow(s,""),r.flags&=-33);var i=WD(t);AT(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=WD(t);CT(t,a,o);break;default:throw Error(ye(161))}}catch(c){jn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function oY(t,e,n){ze=t,VM(t)}function VM(t,e,n){for(var r=(t.mode&1)!==0;ze!==null;){var s=ze,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||I1;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||cs;a=I1;var l=cs;if(I1=o,(cs=c)&&!l)for(ze=s;ze!==null;)o=ze,c=o.child,o.tag===22&&o.memoizedState!==null?QD(s):c!==null?(c.return=o,ze=c):QD(s);for(;i!==null;)ze=i,VM(i),i=i.sibling;ze=s,I1=a,cs=l}VD(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ze=i):VD(t)}}function VD(t){for(;ze!==null;){var e=ze;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:cs||dC(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!cs)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Mo(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&kD(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}kD(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Uw(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ye(163))}cs||e.flags&512&&_T(e)}catch(h){jn(e,e.return,h)}}if(e===t){ze=null;break}if(n=e.sibling,n!==null){n.return=e.return,ze=n;break}ze=e.return}}function KD(t){for(;ze!==null;){var e=ze;if(e===t){ze=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ze=n;break}ze=e.return}}function QD(t){for(;ze!==null;){var e=ze;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{dC(4,e)}catch(c){jn(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){jn(e,s,c)}}var i=e.return;try{_T(e)}catch(c){jn(e,i,c)}break;case 5:var o=e.return;try{_T(e)}catch(c){jn(e,o,c)}}}catch(c){jn(e,e.return,c)}if(e===t){ze=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ze=a;break}ze=e.return}}var aY=Math.ceil,jx=xl.ReactCurrentDispatcher,gO=xl.ReactCurrentOwner,wo=xl.ReactCurrentBatchConfig,Rt=0,_r=null,er=null,Mr=0,ki=0,dg=$d(0),lr=0,Vw=null,Cf=0,hC=0,mO=0,sw=null,ni=null,yO=0,Gm=1/0,Nc=null,Fx=!1,ST=null,id=null,T1=!1,Vu=null,zx=0,iw=0,IT=null,zE=-1,HE=0;function Ts(){return Rt&6?qn():zE!==-1?zE:zE=qn()}function od(t){return t.mode&1?Rt&2&&Mr!==0?Mr&-Mr:GQ.transition!==null?(HE===0&&(HE=kL()),HE):(t=nn,t!==0||(t=window.event,t=t===void 0?16:LL(t.type)),t):1}function aa(t,e,n,r){if(50<iw)throw iw=0,IT=null,Error(ye(185));Av(t,n,r),(!(Rt&2)||t!==_r)&&(t===_r&&(!(Rt&2)&&(hC|=n),lr===4&&pu(t,Mr)),li(t,r),n===1&&Rt===0&&!(e.mode&1)&&(Gm=qn()+500,cC&&Ud()))}function li(t,e){var n=t.callbackNode;GK(t,e);var r=Ax(t,t===_r?Mr:0);if(r===0)n!==null&&sD(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&sD(n),e===1)t.tag===0?HQ(YD.bind(null,t)):rM(YD.bind(null,t)),MQ(function(){!(Rt&6)&&Ud()}),n=null;else{switch(OL(r)){case 1:n=Hk;break;case 4:n=NL;break;case 16:n=Cx;break;case 536870912:n=PL;break;default:n=Cx}n=tj(n,KM.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function KM(t,e){if(zE=-1,HE=0,Rt&6)throw Error(ye(327));var n=t.callbackNode;if(Sg()&&t.callbackNode!==n)return null;var r=Ax(t,t===_r?Mr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Hx(t,r);else{e=r;var s=Rt;Rt|=2;var i=YM();(_r!==t||Mr!==e)&&(Nc=null,Gm=qn()+500,df(t,e));do try{uY();break}catch(a){QM(t,a)}while(!0);nO(),jx.current=i,Rt=s,er!==null?e=0:(_r=null,Mr=0,e=lr)}if(e!==0){if(e===2&&(s=eT(t),s!==0&&(r=s,e=TT(t,s))),e===1)throw n=Vw,df(t,0),pu(t,r),li(t,qn()),n;if(e===6)pu(t,r);else{if(s=t.current.alternate,!(r&30)&&!cY(s)&&(e=Hx(t,r),e===2&&(i=eT(t),i!==0&&(r=i,e=TT(t,i))),e===1))throw n=Vw,df(t,0),pu(t,r),li(t,qn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ye(345));case 2:rh(t,ni,Nc);break;case 3:if(pu(t,r),(r&130023424)===r&&(e=yO+500-qn(),10<e)){if(Ax(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ts(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=cT(rh.bind(null,t,ni,Nc),e);break}rh(t,ni,Nc);break;case 4:if(pu(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-oa(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=qn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*aY(r/1960))-r,10<r){t.timeoutHandle=cT(rh.bind(null,t,ni,Nc),r);break}rh(t,ni,Nc);break;case 5:rh(t,ni,Nc);break;default:throw Error(ye(329))}}}return li(t,qn()),t.callbackNode===n?KM.bind(null,t):null}function TT(t,e){var n=sw;return t.current.memoizedState.isDehydrated&&(df(t,e).flags|=256),t=Hx(t,e),t!==2&&(e=ni,ni=n,e!==null&&NT(e)),t}function NT(t){ni===null?ni=t:ni.push.apply(ni,t)}function cY(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!da(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function pu(t,e){for(e&=~mO,e&=~hC,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-oa(e),r=1<<n;t[n]=-1,e&=~r}}function YD(t){if(Rt&6)throw Error(ye(327));Sg();var e=Ax(t,0);if(!(e&1))return li(t,qn()),null;var n=Hx(t,e);if(t.tag!==0&&n===2){var r=eT(t);r!==0&&(e=r,n=TT(t,r))}if(n===1)throw n=Vw,df(t,0),pu(t,e),li(t,qn()),n;if(n===6)throw Error(ye(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,rh(t,ni,Nc),li(t,qn()),null}function wO(t,e){var n=Rt;Rt|=1;try{return t(e)}finally{Rt=n,Rt===0&&(Gm=qn()+500,cC&&Ud())}}function Af(t){Vu!==null&&Vu.tag===0&&!(Rt&6)&&Sg();var e=Rt;Rt|=1;var n=wo.transition,r=nn;try{if(wo.transition=null,nn=1,t)return t()}finally{nn=r,wo.transition=n,Rt=e,!(Rt&6)&&Ud()}}function bO(){ki=dg.current,Sn(dg)}function df(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,LQ(n)),er!==null)for(n=er.return;n!==null;){var r=n;switch(Xk(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Px();break;case 3:zm(),Sn(ai),Sn(us),cO();break;case 5:aO(r);break;case 4:zm();break;case 13:Sn(On);break;case 19:Sn(On);break;case 10:rO(r.type._context);break;case 22:case 23:bO()}n=n.return}if(_r=t,er=t=ad(t.current,null),Mr=ki=e,lr=0,Vw=null,mO=hC=Cf=0,ni=sw=null,vh!==null){for(e=0;e<vh.length;e++)if(n=vh[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}vh=null}return t}function QM(t,e){do{var n=er;try{if(nO(),ME.current=Mx,Lx){for(var r=$n.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Lx=!1}if(_f=0,yr=or=$n=null,nw=!1,Gw=0,gO.current=null,n===null||n.return===null){lr=1,Vw=e,er=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Mr,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=BD(o);if(f!==null){f.flags&=-257,LD(f,o,a,i,e),f.mode&1&&UD(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){UD(i,l,e),vO();break e}c=Error(ye(426))}}else if(Nn&&a.mode&1){var y=BD(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),LD(y,o,a,i,e),eO(Hm(c,a));break e}}i=c=Hm(c,a),lr!==4&&(lr=2),sw===null?sw=[i]:sw.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=OM(i,c,e);PD(i,w);break e;case 1:a=c;var v=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(id===null||!id.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=RM(i,a,e);PD(i,_);break e}}i=i.return}while(i!==null)}ZM(n)}catch(x){e=x,er===n&&n!==null&&(er=n=n.return);continue}break}while(!0)}function YM(){var t=jx.current;return jx.current=Mx,t===null?Mx:t}function vO(){(lr===0||lr===3||lr===2)&&(lr=4),_r===null||!(Cf&268435455)&&!(hC&268435455)||pu(_r,Mr)}function Hx(t,e){var n=Rt;Rt|=2;var r=YM();(_r!==t||Mr!==e)&&(Nc=null,df(t,e));do try{lY();break}catch(s){QM(t,s)}while(!0);if(nO(),Rt=n,jx.current=r,er!==null)throw Error(ye(261));return _r=null,Mr=0,lr}function lY(){for(;er!==null;)JM(er)}function uY(){for(;er!==null&&!$K();)JM(er)}function JM(t){var e=ej(t.alternate,t,ki);t.memoizedProps=t.pendingProps,e===null?ZM(t):er=e,gO.current=null}function ZM(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=rY(n,e),n!==null){n.flags&=32767,er=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{lr=6,er=null;return}}else if(n=nY(n,e,ki),n!==null){er=n;return}if(e=e.sibling,e!==null){er=e;return}er=e=t}while(e!==null);lr===0&&(lr=5)}function rh(t,e,n){var r=nn,s=wo.transition;try{wo.transition=null,nn=1,dY(t,e,n,r)}finally{wo.transition=s,nn=r}return null}function dY(t,e,n,r){do Sg();while(Vu!==null);if(Rt&6)throw Error(ye(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ye(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(WK(t,i),t===_r&&(er=_r=null,Mr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||T1||(T1=!0,tj(Cx,function(){return Sg(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=wo.transition,wo.transition=null;var o=nn;nn=1;var a=Rt;Rt|=4,gO.current=null,iY(t,n),qM(n,t),kQ(oT),Sx=!!iT,oT=iT=null,t.current=n,oY(n),UK(),Rt=a,nn=o,wo.transition=i}else t.current=n;if(T1&&(T1=!1,Vu=t,zx=s),i=t.pendingLanes,i===0&&(id=null),MK(n.stateNode),li(t,qn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Fx)throw Fx=!1,t=ST,ST=null,t;return zx&1&&t.tag!==0&&Sg(),i=t.pendingLanes,i&1?t===IT?iw++:(iw=0,IT=t):iw=0,Ud(),null}function Sg(){if(Vu!==null){var t=OL(zx),e=wo.transition,n=nn;try{if(wo.transition=null,nn=16>t?16:t,Vu===null)var r=!1;else{if(t=Vu,Vu=null,zx=0,Rt&6)throw Error(ye(331));var s=Rt;for(Rt|=4,ze=t.current;ze!==null;){var i=ze,o=i.child;if(ze.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(ze=l;ze!==null;){var u=ze;switch(u.tag){case 0:case 11:case 15:rw(8,u,i)}var d=u.child;if(d!==null)d.return=u,ze=d;else for(;ze!==null;){u=ze;var h=u.sibling,f=u.return;if(HM(u),u===l){ze=null;break}if(h!==null){h.return=f,ze=h;break}ze=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}ze=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ze=o;else e:for(;ze!==null;){if(i=ze,i.flags&2048)switch(i.tag){case 0:case 11:case 15:rw(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,ze=w;break e}ze=i.return}}var v=t.current;for(ze=v;ze!==null;){o=ze;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,ze=b;else e:for(o=v;ze!==null;){if(a=ze,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:dC(9,a)}}catch(x){jn(a,a.return,x)}if(a===o){ze=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,ze=_;break e}ze=a.return}}if(Rt=s,Ud(),ec&&typeof ec.onPostCommitFiberRoot=="function")try{ec.onPostCommitFiberRoot(rC,t)}catch{}r=!0}return r}finally{nn=n,wo.transition=e}}return!1}function JD(t,e,n){e=Hm(n,e),e=OM(t,e,1),t=sd(t,e,1),e=Ts(),t!==null&&(Av(t,1,e),li(t,e))}function jn(t,e,n){if(t.tag===3)JD(t,t,n);else for(;e!==null;){if(e.tag===3){JD(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(id===null||!id.has(r))){t=Hm(n,t),t=RM(e,t,1),e=sd(e,t,1),t=Ts(),e!==null&&(Av(e,1,t),li(e,t));break}}e=e.return}}function hY(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ts(),t.pingedLanes|=t.suspendedLanes&n,_r===t&&(Mr&n)===n&&(lr===4||lr===3&&(Mr&130023424)===Mr&&500>qn()-yO?df(t,0):mO|=n),li(t,e)}function XM(t,e){e===0&&(t.mode&1?(e=w1,w1<<=1,!(w1&130023424)&&(w1=4194304)):e=1);var n=Ts();t=fl(t,e),t!==null&&(Av(t,e,n),li(t,n))}function fY(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),XM(t,n)}function pY(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ye(314))}r!==null&&r.delete(e),XM(t,n)}var ej;ej=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ai.current)ii=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ii=!1,tY(t,e,n);ii=!!(t.flags&131072)}else ii=!1,Nn&&e.flags&1048576&&sM(e,Rx,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;FE(t,e),t=e.pendingProps;var s=Mm(e,us.current);Ag(e,n),s=uO(null,e,r,t,s,n);var i=dO();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ci(r)?(i=!0,kx(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,iO(e),s.updater=uC,e.stateNode=s,s._reactInternals=e,gT(e,r,t,n),e=wT(null,e,r,!0,i,n)):(e.tag=0,Nn&&i&&Zk(e),bs(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(FE(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=mY(r),t=Mo(r,t),s){case 0:e=yT(null,e,r,t,n);break e;case 1:e=FD(null,e,r,t,n);break e;case 11:e=MD(null,e,r,t,n);break e;case 14:e=jD(null,e,r,Mo(r.type,t),n);break e}throw Error(ye(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Mo(r,s),yT(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Mo(r,s),FD(t,e,r,s,n);case 3:e:{if(BM(e),t===null)throw Error(ye(387));r=e.pendingProps,i=e.memoizedState,s=i.element,uM(t,e),Ux(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Hm(Error(ye(423)),e),e=zD(t,e,r,n,s);break e}else if(r!==s){s=Hm(Error(ye(424)),e),e=zD(t,e,r,n,s);break e}else for($i=rd(e.stateNode.containerInfo.firstChild),Li=e,Nn=!0,Jo=null,n=cM(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(jm(),r===s){e=pl(t,e,n);break e}bs(t,e,r,n)}e=e.child}return e;case 5:return dM(e),t===null&&hT(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,aT(r,s)?o=null:i!==null&&aT(r,i)&&(e.flags|=32),UM(t,e),bs(t,e,o,n),e.child;case 6:return t===null&&hT(e),null;case 13:return LM(t,e,n);case 4:return oO(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Fm(e,null,r,n):bs(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Mo(r,s),MD(t,e,r,s,n);case 7:return bs(t,e,e.pendingProps,n),e.child;case 8:return bs(t,e,e.pendingProps.children,n),e.child;case 12:return bs(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,yn(Dx,r._currentValue),r._currentValue=o,i!==null)if(da(i.value,o)){if(i.children===s.children&&!ai.current){e=pl(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=rl(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),fT(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ye(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),fT(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}bs(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ag(e,n),s=bo(s),r=r(s),e.flags|=1,bs(t,e,r,n),e.child;case 14:return r=e.type,s=Mo(r,e.pendingProps),s=Mo(r.type,s),jD(t,e,r,s,n);case 15:return DM(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Mo(r,s),FE(t,e),e.tag=1,ci(r)?(t=!0,kx(e)):t=!1,Ag(e,n),kM(e,r,s),gT(e,r,s,n),wT(null,e,r,!0,t,n);case 19:return MM(t,e,n);case 22:return $M(t,e,n)}throw Error(ye(156,e.tag))};function tj(t,e){return TL(t,e)}function gY(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mo(t,e,n,r){return new gY(t,e,n,r)}function EO(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mY(t){if(typeof t=="function")return EO(t)?1:0;if(t!=null){if(t=t.$$typeof,t===jk)return 11;if(t===Fk)return 14}return 2}function ad(t,e){var n=t.alternate;return n===null?(n=mo(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function GE(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")EO(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case tg:return hf(n.children,s,i,e);case Mk:o=8,s|=8;break;case MI:return t=mo(12,n,e,s|2),t.elementType=MI,t.lanes=i,t;case jI:return t=mo(13,n,e,s),t.elementType=jI,t.lanes=i,t;case FI:return t=mo(19,n,e,s),t.elementType=FI,t.lanes=i,t;case dL:return fC(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case lL:o=10;break e;case uL:o=9;break e;case jk:o=11;break e;case Fk:o=14;break e;case ru:o=16,r=null;break e}throw Error(ye(130,t==null?t:typeof t,""))}return e=mo(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function hf(t,e,n,r){return t=mo(7,t,r,e),t.lanes=n,t}function fC(t,e,n,r){return t=mo(22,t,r,e),t.elementType=dL,t.lanes=n,t.stateNode={isHidden:!1},t}function vS(t,e,n){return t=mo(6,t,null,e),t.lanes=n,t}function ES(t,e,n){return e=mo(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function yY(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tS(0),this.expirationTimes=tS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tS(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function xO(t,e,n,r,s,i,o,a,c){return t=new yY(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=mo(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},iO(i),t}function wY(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:eg,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function nj(t){if(!t)return vd;t=t._reactInternals;e:{if(Jf(t)!==t||t.tag!==1)throw Error(ye(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ci(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ye(171))}if(t.tag===1){var n=t.type;if(ci(n))return nM(t,n,e)}return e}function rj(t,e,n,r,s,i,o,a,c){return t=xO(n,r,!0,t,s,i,o,a,c),t.context=nj(null),n=t.current,r=Ts(),s=od(n),i=rl(r,s),i.callback=e??null,sd(n,i,s),t.current.lanes=s,Av(t,s,r),li(t,r),t}function pC(t,e,n,r){var s=e.current,i=Ts(),o=od(s);return n=nj(n),e.context===null?e.context=n:e.pendingContext=n,e=rl(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=sd(s,e,o),t!==null&&(aa(t,s,o,i),LE(t,s,o)),o}function Gx(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ZD(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function _O(t,e){ZD(t,e),(t=t.alternate)&&ZD(t,e)}function bY(){return null}var sj=typeof reportError=="function"?reportError:function(t){console.error(t)};function CO(t){this._internalRoot=t}gC.prototype.render=CO.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ye(409));pC(t,e,null,null)};gC.prototype.unmount=CO.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Af(function(){pC(null,t,null,null)}),e[hl]=null}};function gC(t){this._internalRoot=t}gC.prototype.unstable_scheduleHydration=function(t){if(t){var e=$L();t={blockedOn:null,target:t,priority:e};for(var n=0;n<fu.length&&e!==0&&e<fu[n].priority;n++);fu.splice(n,0,t),n===0&&BL(t)}};function AO(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function XD(){}function vY(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=Gx(o);i.call(l)}}var o=rj(e,r,t,0,null,!1,!1,"",XD);return t._reactRootContainer=o,t[hl]=o.current,Mw(t.nodeType===8?t.parentNode:t),Af(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=Gx(c);a.call(l)}}var c=xO(t,0,!1,null,null,!1,!1,"",XD);return t._reactRootContainer=c,t[hl]=c.current,Mw(t.nodeType===8?t.parentNode:t),Af(function(){pC(e,c,n,r)}),c}function yC(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Gx(o);a.call(c)}}pC(e,o,t,s)}else o=vY(n,e,t,s,r);return Gx(o)}RL=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=k0(e.pendingLanes);n!==0&&(Gk(e,n|1),li(e,qn()),!(Rt&6)&&(Gm=qn()+500,Ud()))}break;case 13:Af(function(){var r=fl(t,1);if(r!==null){var s=Ts();aa(r,t,1,s)}}),_O(t,1)}};Wk=function(t){if(t.tag===13){var e=fl(t,134217728);if(e!==null){var n=Ts();aa(e,t,134217728,n)}_O(t,134217728)}};DL=function(t){if(t.tag===13){var e=od(t),n=fl(t,e);if(n!==null){var r=Ts();aa(n,t,e,r)}_O(t,e)}};$L=function(){return nn};UL=function(t,e){var n=nn;try{return nn=t,e()}finally{nn=n}};JI=function(t,e,n){switch(e){case"input":if(GI(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=aC(r);if(!s)throw Error(ye(90));fL(r),GI(r,s)}}}break;case"textarea":gL(t,n);break;case"select":e=n.value,e!=null&&Eg(t,!!n.multiple,e,!1)}};xL=wO;_L=Af;var EY={usingClientEntryPoint:!1,Events:[Iv,ig,aC,vL,EL,wO]},Zy={findFiberByHostInstance:bh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xY={bundleType:Zy.bundleType,version:Zy.version,rendererPackageName:Zy.rendererPackageName,rendererConfig:Zy.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xl.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=SL(t),t===null?null:t.stateNode},findFiberByHostInstance:Zy.findFiberByHostInstance||bY,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var N1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!N1.isDisabled&&N1.supportsFiber)try{rC=N1.inject(xY),ec=N1}catch{}}Hi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EY;Hi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!AO(e))throw Error(ye(200));return wY(t,e,null,n)};Hi.createRoot=function(t,e){if(!AO(t))throw Error(ye(299));var n=!1,r="",s=sj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=xO(t,1,!1,null,null,n,!1,r,s),t[hl]=e.current,Mw(t.nodeType===8?t.parentNode:t),new CO(e)};Hi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ye(188)):(t=Object.keys(t).join(","),Error(ye(268,t)));return t=SL(e),t=t===null?null:t.stateNode,t};Hi.flushSync=function(t){return Af(t)};Hi.hydrate=function(t,e,n){if(!mC(e))throw Error(ye(200));return yC(null,t,e,!0,n)};Hi.hydrateRoot=function(t,e,n){if(!AO(t))throw Error(ye(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=sj;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=rj(e,null,t,1,n??null,s,!1,i,o),t[hl]=e.current,Mw(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new gC(e)};Hi.render=function(t,e,n){if(!mC(e))throw Error(ye(200));return yC(null,t,e,!1,n)};Hi.unmountComponentAtNode=function(t){if(!mC(t))throw Error(ye(40));return t._reactRootContainer?(Af(function(){yC(null,null,t,!1,function(){t._reactRootContainer=null,t[hl]=null})}),!0):!1};Hi.unstable_batchedUpdates=wO;Hi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!mC(n))throw Error(ye(200));if(t==null||t._reactInternals===void 0)throw Error(ye(38));return yC(t,e,n,!1,r)};Hi.version="18.3.1-next-f1338f8080-20240426";function ij(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ij)}catch(t){console.error(t)}}ij(),iL.exports=Hi;var SO=iL.exports,e$=SO;BI.createRoot=e$.createRoot,BI.hydrateRoot=e$.hydrateRoot;const oj="2.31.4";let Xy={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${oj}`},fe=class PT extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof PT?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof PT&&n.cause.docsPath||n.docsPath,i=(a=Xy.getDocsUrl)==null?void 0:a.call(Xy,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Xy.version?[`Version: ${Xy.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=oj}walk(e){return aj(this,e)}};function aj(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?aj(t.cause,e):e?null:t}let cj=class extends fe{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class _Y extends fe{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}let CY=class extends fe{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};class lj extends fe{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}let uj=class extends fe{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class t$ extends fe{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function yy(t,{dir:e,size:n=32}={}){return typeof t=="string"?cd(t,{dir:e,size:n}):AY(t,{dir:e,size:n})}function cd(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new uj({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function AY(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new uj({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function gl(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Qn(t){return gl(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function wy(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const SY=new TextEncoder;function wC(t,e={}){return typeof t=="number"||typeof t=="bigint"?TY(t,e):typeof t=="boolean"?IY(t,e):gl(t)?ac(t,e):Ig(t,e)}function IY(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(ga(n,{size:e.size}),yy(n,{size:e.size})):n}const pc={zero:48,nine:57,A:65,F:70,a:97,f:102};function n$(t){if(t>=pc.zero&&t<=pc.nine)return t-pc.zero;if(t>=pc.A&&t<=pc.F)return t-(pc.A-10);if(t>=pc.a&&t<=pc.f)return t-(pc.a-10)}function ac(t,e={}){let n=t;e.size&&(ga(n,{size:e.size}),n=yy(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=n$(r.charCodeAt(a++)),l=n$(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new fe(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function TY(t,e){const n=st(t,e);return ac(n)}function Ig(t,e={}){const n=SY.encode(t);return typeof e.size=="number"?(ga(n,{size:e.size}),yy(n,{dir:"right",size:e.size})):n}function ga(t,{size:e}){if(Qn(t)>e)throw new CY({givenSize:Qn(t),maxSize:e})}function ml(t,e={}){const{signed:n}=e;e.size&&ga(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function yl(t,e={}){return Number(ml(t,e))}function dj(t,e={}){let n=ac(t);return e.size&&(ga(n,{size:e.size}),n=wy(n,{dir:"right"})),new TextDecoder().decode(n)}const NY=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Sf(t,e={}){return typeof t=="number"||typeof t=="bigint"?st(t,e):typeof t=="string"?bC(t,e):typeof t=="boolean"?hj(t,e):Os(t,e)}function hj(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(ga(n,{size:e.size}),yy(n,{size:e.size})):n}function Os(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=NY[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(ga(r,{size:e.size}),yy(r,{dir:"right",size:e.size})):r}function st(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new cj({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?yy(a,{size:r}):a}const PY=new TextEncoder;function bC(t,e={}){const n=PY.encode(t);return Os(n,e)}async function kY(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:st(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function Ed(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new GY(t.type);return`${t.name}(${vC(t.inputs,{includeName:e})})`}function vC(t,{includeName:e=!1}={}){return t?t.map(n=>OY(n,{includeName:e})).join(e?", ":","):""}function OY(t,{includeName:e}){return t.type.startsWith("tuple")?`(${vC(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class RY extends fe{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class r$ extends fe{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class fj extends fe{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${vC(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class EC extends fe{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class DY extends fe{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class $Y extends fe{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Qn(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class UY extends fe{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class A8e extends fe{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class S8e extends fe{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class pj extends fe{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class BY extends fe{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class gj extends fe{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class Wx extends fe{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class LY extends fe{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class I8e extends fe{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class MY extends fe{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Ed(e.abiItem)}\`, and`,`\`${n.type}\` in \`${Ed(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class jY extends fe{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class kT extends fe{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${vC(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class mj extends fe{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Ed(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class FY extends fe{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class zY extends fe{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class HY extends fe{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class GY extends fe{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function xd(t){return typeof t[0]=="string"?xC(t):WY(t)}function WY(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function xC(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}class _d extends fe{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}let _C=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const P1=BigInt(2**32-1),s$=BigInt(32);function qY(t,e=!1){return e?{h:Number(t&P1),l:Number(t>>s$&P1)}:{h:Number(t>>s$&P1)|0,l:Number(t&P1)|0}}function VY(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=qY(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const KY=(t,e,n)=>t<<n|e>>>32-n,QY=(t,e,n)=>e<<n|t>>>32-n,YY=(t,e,n)=>e<<n-32|t>>>64-n,JY=(t,e,n)=>t<<n-32|e>>>64-n,pp=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ZY(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function qx(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function If(t,...e){if(!ZY(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function N8e(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");qx(t.outputLen),qx(t.blockLen)}function Vx(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function yj(t,e){If(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function XY(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Kw(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function xS(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function _a(t,e){return t<<32-e|t>>>e}const eJ=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function tJ(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function nJ(t){for(let e=0;e<t.length;e++)t[e]=tJ(t[e]);return t}const i$=eJ?t=>t:nJ,wj=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",rJ=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function P8e(t){if(If(t),wj)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=rJ[t[n]];return e}const gc={_0:48,_9:57,A:65,F:70,a:97,f:102};function o$(t){if(t>=gc._0&&t<=gc._9)return t-gc._0;if(t>=gc.A&&t<=gc.F)return t-(gc.A-10);if(t>=gc.a&&t<=gc.f)return t-(gc.a-10)}function k8e(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(wj)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=o$(t.charCodeAt(i)),a=o$(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function sJ(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function CC(t){return typeof t=="string"&&(t=sJ(t)),If(t),t}function O8e(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];If(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let bj=class{};function vj(t){const e=r=>t().update(CC(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function iJ(t){const e=(r,s)=>t(s).update(CC(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function D8e(t=32){if(pp&&typeof pp.getRandomValues=="function")return pp.getRandomValues(new Uint8Array(t));if(pp&&typeof pp.randomBytes=="function")return Uint8Array.from(pp.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const oJ=BigInt(0),e0=BigInt(1),aJ=BigInt(2),cJ=BigInt(7),lJ=BigInt(256),uJ=BigInt(113),Ej=[],xj=[],_j=[];for(let t=0,e=e0,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Ej.push(2*(5*r+n)),xj.push((t+1)*(t+2)/2%64);let s=oJ;for(let i=0;i<7;i++)e=(e<<e0^(e>>cJ)*uJ)%lJ,e&aJ&&(s^=e0<<(e0<<BigInt(i))-e0);_j.push(s)}const Cj=VY(_j,!0),dJ=Cj[0],hJ=Cj[1],a$=(t,e,n)=>n>32?YY(t,e,n):KY(t,e,n),c$=(t,e,n)=>n>32?JY(t,e,n):QY(t,e,n);function Aj(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=a$(l,u,1)^n[a],h=c$(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=xj[o],c=a$(s,i,a),l=c$(s,i,a),u=Ej[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=dJ[r],t[1]^=hJ[r]}Kw(n)}let IO=class Sj extends bj{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,qx(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=XY(this.state)}clone(){return this._cloneInto()}keccak(){i$(this.state32),Aj(this.state32,this.rounds),i$(this.state32),this.posOut=0,this.pos=0}update(e){Vx(this),e=CC(e),If(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Vx(this,!1),If(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return qx(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(yj(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Kw(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Sj(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Bd=(t,e,n)=>vj(()=>new IO(e,t,n)),fJ=Bd(6,144,224/8),pJ=Bd(6,136,256/8),gJ=Bd(6,104,384/8),mJ=Bd(6,72,512/8),yJ=Bd(1,144,224/8),TO=Bd(1,136,256/8),wJ=Bd(1,104,384/8),bJ=Bd(1,72,512/8),Ij=(t,e,n)=>iJ((r={})=>new IO(e,t,r.dkLen===void 0?n:r.dkLen,!0)),vJ=Ij(31,168,128/8),EJ=Ij(31,136,256/8),$8e=Object.freeze(Object.defineProperty({__proto__:null,Keccak:IO,keccakP:Aj,keccak_224:yJ,keccak_256:TO,keccak_384:wJ,keccak_512:bJ,sha3_224:fJ,sha3_256:pJ,sha3_384:gJ,sha3_512:mJ,shake128:vJ,shake256:EJ},Symbol.toStringTag,{value:"Module"}));function by(t,e){const n=e||"hex",r=TO(gl(t,{strict:!1})?wC(t):t);return n==="bytes"?r:Sf(r)}const _S=new _C(8192);function Nv(t,e){if(_S.has(`${t}.${e}`))return _S.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=by(Ig(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return _S.set(`${t}.${e}`,i),i}function Ku(t,e){if(!ha(t,{strict:!1}))throw new _d({address:t});return Nv(t,e)}const xJ=/^0x[a-fA-F0-9]{40}$/,CS=new _C(8192);function ha(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(CS.has(r))return CS.get(r);const s=xJ.test(t)?t.toLowerCase()===t?!0:n?Nv(t)===t:!0:!1;return CS.set(r,s),s}function Kx(t,e,n,{strict:r}={}){return gl(t,{strict:!1})?OT(t,e,n,{strict:r}):Pj(t,e,n,{strict:r})}function Tj(t,e){if(typeof e=="number"&&e>0&&e>Qn(t)-1)throw new lj({offset:e,position:"start",size:Qn(t)})}function Nj(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Qn(t)!==n-e)throw new lj({offset:n,position:"end",size:Qn(t)})}function Pj(t,e,n,{strict:r}={}){Tj(t,e);const s=t.slice(e,n);return r&&Nj(s,e,n),s}function OT(t,e,n,{strict:r}={}){Tj(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&Nj(s,e,n),s}const _J=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,kj=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Oj(t,e){if(t.length!==e.length)throw new UY({expectedLength:t.length,givenLength:e.length});const n=CJ({params:t,values:e}),r=PO(n);return r.length===0?"0x":r}function CJ({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(NO({param:t[r],value:e[r]}));return n}function NO({param:t,value:e}){const n=kO(t.type);if(n){const[r,s]=n;return SJ(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return kJ(e,{param:t});if(t.type==="address")return AJ(e);if(t.type==="bool")return TJ(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=kj.exec(t.type)??[];return NJ(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return IJ(e,{param:t});if(t.type==="string")return PJ(e);throw new FY(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function PO(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Qn(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(st(e+s,{size:32})),r.push(a),s+=Qn(a)):n.push(a)}return xd([...n,...r])}function AJ(t){if(!ha(t))throw new _d({address:t});return{dynamic:!1,encoded:cd(t.toLowerCase())}}function SJ(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new HY(t);if(!r&&t.length!==e)throw new DY({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=NO({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=PO(i);if(r){const a=st(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?xd([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:xd(i.map(({encoded:o})=>o))}}function IJ(t,{param:e}){const[,n]=e.type.split("bytes"),r=Qn(t);if(!n){let s=t;return r%32!==0&&(s=cd(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:xd([cd(st(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new $Y({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:cd(t,{dir:"right"})}}function TJ(t){if(typeof t!="boolean")throw new fe(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:cd(hj(t))}}function NJ(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new cj({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:st(t,{size:32,signed:e})}}function PJ(t){const e=bC(t),n=Math.ceil(Qn(e)/32),r=[];for(let s=0;s<n;s++)r.push(cd(Kx(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:xd([cd(st(Qn(e),{size:32})),...r])}}function kJ(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=NO({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?PO(r):xd(r.map(({encoded:s})=>s))}}function kO(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const AS="/docs/contract/encodeDeployData";function OO(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new RY({docsPath:AS});if(!("inputs"in s))throw new r$({docsPath:AS});if(!s.inputs||s.inputs.length===0)throw new r$({docsPath:AS});const i=Oj(s.inputs,n);return xC([r,i])}function zr(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class Zf extends fe{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class WE extends fe{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function OJ(t){const e=by(`0x${t.substring(4)}`).substring(26);return Nv(`0x${e}`)}const RJ="modulepreload",DJ=function(t){return"/"+t},l$={},Gn=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=DJ(c),c in l$)return;l$[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":RJ,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function $J({hash:t,signature:e}){const n=gl(t)?t:Sf(t),{secp256k1:r}=await Gn(async()=>{const{secp256k1:o}=await import("./secp256k1-BLDtrio8.js");return{secp256k1:o}},__vite__mapDeps([0,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=u$(f);return new r.Signature(ml(l),ml(u)).addRecoveryBit(p)}const o=gl(e)?e:Sf(e);if(Qn(o)!==65)throw new Error("invalid signature length");const a=yl(`0x${o.slice(130)}`),c=u$(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function u$(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function UJ({hash:t,signature:e}){return OJ(await $J({hash:t,signature:e}))}class d$ extends fe{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class Rj extends fe{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class BJ extends fe{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const LJ={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new BJ({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new Rj({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new d$({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new d$({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function RO(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(LJ);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function MJ(t,e="hex"){const n=Dj(t),r=RO(new Uint8Array(n.length));return n.encode(r),e==="hex"?Os(r.bytes):r.bytes}function Dj(t){return Array.isArray(t)?jJ(t.map(e=>Dj(e))):FJ(t)}function jJ(t){const e=t.reduce((s,i)=>s+i.length,0),n=$j(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function FJ(t){const e=typeof t=="string"?ac(t):t,n=$j(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function $j(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new fe("Length is too large.")}function zJ(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=by(xC(["0x05",MJ([e?st(e):"0x",s,n?st(n):"0x"])]));return r==="bytes"?ac(i):i}async function Uj(t){const{authorization:e,signature:n}=t;return UJ({hash:zJ(e),signature:n??e})}class RT extends fe{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class HJ extends fe{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class GJ extends fe{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class Bj extends fe{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function Lj({chain:t,currentChainId:e}){if(!t)throw new GJ;if(e!==t.id)throw new HJ({chain:t,currentChainId:e})}const WJ={gwei:9,wei:18},qJ={ether:-9,wei:9},VJ={ether:-18,gwei:-9};function vy(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function ui(t,e="wei"){return vy(t,qJ[e])}class xh extends fe{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(xh,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(xh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Qx extends fe{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ui(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(Qx,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class DT extends fe{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ui(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(DT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class $T extends fe{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty($T,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class UT extends fe{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(UT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class BT extends fe{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(BT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class LT extends fe{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(LT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class MT extends fe{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(MT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class jT extends fe{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(jT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class FT extends fe{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(FT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class Yx extends fe{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${ui(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${ui(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(Yx,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class AC extends fe{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function DO(t,e="wei"){return vy(t,WJ[e])}function Pv(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class KJ extends fe{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class QJ extends fe{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Pv(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class YJ extends fe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=Pv({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${DO(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ui(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ui(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ui(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Mj extends fe{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class jj extends fe{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class JJ extends fe{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const Ns=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),ZJ=t=>t,$O=t=>t;class ow extends fe{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${$O(o)}`,e&&`Request body: ${Ns(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class UO extends fe{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${$O(r)}`,`Request body: ${Ns(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class h$ extends fe{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${$O(n)}`,`Request body: ${Ns(e)}`],name:"TimeoutError"})}}const XJ=-1;class pi extends fe{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof UO?e.code:n??XJ}}class Wi extends pi{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class Qw extends pi{constructor(e){super(e,{code:Qw.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Qw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Yw extends pi{constructor(e){super(e,{code:Yw.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Yw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Jw extends pi{constructor(e,{method:n}={}){super(e,{code:Jw.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(Jw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Zw extends pi{constructor(e){super(e,{code:Zw.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Zw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Tf extends pi{constructor(e){super(e,{code:Tf.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Tf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Xw extends pi{constructor(e){super(e,{code:Xw.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Xw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class eb extends pi{constructor(e){super(e,{code:eb.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(eb,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class ld extends pi{constructor(e){super(e,{code:ld.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(ld,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Wm extends pi{constructor(e){super(e,{code:Wm.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Wm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class _h extends pi{constructor(e,{method:n}={}){super(e,{code:_h.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(_h,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class qm extends pi{constructor(e){super(e,{code:qm.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(qm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class tb extends pi{constructor(e){super(e,{code:tb.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(tb,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class ir extends Wi{constructor(e){super(e,{code:ir.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(ir,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class nb extends Wi{constructor(e){super(e,{code:nb.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(nb,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class rb extends Wi{constructor(e,{method:n}={}){super(e,{code:rb.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(rb,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class sb extends Wi{constructor(e){super(e,{code:sb.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(sb,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class ib extends Wi{constructor(e){super(e,{code:ib.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(ib,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class cc extends Wi{constructor(e){super(e,{code:cc.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(cc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Vm extends Wi{constructor(e){super(e,{code:Vm.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Vm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class ob extends Wi{constructor(e){super(e,{code:ob.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(ob,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class ab extends Wi{constructor(e){super(e,{code:ab.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(ab,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class cb extends Wi{constructor(e){super(e,{code:cb.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(cb,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class lb extends Wi{constructor(e){super(e,{code:lb.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(lb,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class ub extends Wi{constructor(e){super(e,{code:ub.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(ub,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Km extends Wi{constructor(e){super(e,{code:Km.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Km,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class eZ extends pi{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function BO(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof fe?t.walk(s=>(s==null?void 0:s.code)===xh.code):t;return r instanceof fe?new xh({cause:t,message:r.details}):xh.nodeMessage.test(n)?new xh({cause:t,message:t.details}):Qx.nodeMessage.test(n)?new Qx({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):DT.nodeMessage.test(n)?new DT({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):$T.nodeMessage.test(n)?new $T({cause:t,nonce:e==null?void 0:e.nonce}):UT.nodeMessage.test(n)?new UT({cause:t,nonce:e==null?void 0:e.nonce}):BT.nodeMessage.test(n)?new BT({cause:t,nonce:e==null?void 0:e.nonce}):LT.nodeMessage.test(n)?new LT({cause:t}):MT.nodeMessage.test(n)?new MT({cause:t,gas:e==null?void 0:e.gas}):jT.nodeMessage.test(n)?new jT({cause:t,gas:e==null?void 0:e.gas}):FT.nodeMessage.test(n)?new FT({cause:t}):Yx.nodeMessage.test(n)?new Yx({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new AC({cause:t})}function Fj(t,{docsPath:e,...n}){const r=(()=>{const s=BO(t,n);return s instanceof AC?t:s})();return new YJ(r,{docsPath:e,...n})}function LO(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const tZ={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function SC(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=nZ(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>Os(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=st(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=st(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=st(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=st(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=st(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=st(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=tZ[t.type]),typeof t.value<"u"&&(e.value=st(t.value)),e}function nZ(t){return t.map(e=>({address:e.address,r:e.r?st(BigInt(e.r)):e.r,s:e.s?st(BigInt(e.s)):e.s,chainId:st(e.chainId),nonce:st(e.nonce),...typeof e.yParity<"u"?{yParity:st(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:st(e.v)}:{}}))}function un(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const rZ=2n**256n-1n;function kv(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?zr(e):void 0;if(o&&!ha(o.address))throw new _d({address:o.address});if(i&&!ha(i))throw new _d({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new KJ;if(r&&r>rZ)throw new Qx({maxFeePerGas:r});if(s&&r&&s>r)throw new Yx({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function Ov(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return yl(e)}class sZ extends fe{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class MO extends fe{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class iZ extends fe{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${ui(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class zj extends fe{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const Hj={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Gj(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?yl(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?yl(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?Hj[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=oZ(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function oZ(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function aZ(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:Gj(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function db(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?st(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new zj({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||aZ)(c)}async function Wj(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function cZ(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await un(t,db,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return ml(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):un(t,db,"getBlock")({}),un(t,Wj,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new MO;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function f$(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new sZ;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await un(t,db,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new MO;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await cZ(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await un(t,Wj,"getGasPrice")({}))}}class lZ extends fe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=Pv({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${DO(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ui(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ui(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ui(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function uZ(t,{docsPath:e,...n}){const r=(()=>{const s=BO(t,n);return s instanceof AC?t:s})();return new lZ(r,{docsPath:e,...n})}class dZ extends fe{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class hZ extends fe{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function p$(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function fZ(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=p$(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=p$(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function g$(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new t$({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new t$({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function pZ(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=st(e)),n!==void 0&&(o.nonce=st(n)),r!==void 0&&(o.state=g$(r)),s!==void 0){if(o.state)throw new hZ;o.stateDiff=g$(s)}return o}function qj(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!ha(n,{strict:!1}))throw new _d({address:n});if(e[n])throw new dZ({address:n});e[n]=pZ(r)}return e}async function Vj(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?st(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function Kj(t,e){var s,i,o;const{account:n=t.account}=e,r=n?zr(n):void 0;try{let K=function(I){const{block:L,request:U,rpcStateOverride:$}=I;return t.request({method:"eth_estimateGas",params:$?[U,L??"latest",$]:L?[U,L]:[U]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:v,nonce:b,value:_,stateOverride:x,...C}=await IC(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),N=(typeof d=="bigint"?st(d):void 0)||h,A=qj(x),P=await(async()=>{if(C.to)return C.to;if(c&&c.length>0)return await Uj({authorization:c[0]}).catch(()=>{throw new fe("`to` is required. Could not infer from `authorizationList`")})})();kv(e);const R=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,H=(R||SC)({...LO(C,{format:R}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:v,nonce:b,to:P,value:_});let T=BigInt(await K({block:N,request:H,rpcStateOverride:A}));if(c){const I=await Vj(t,{address:H.from}),L=await Promise.all(c.map(async U=>{const{address:$}=U,M=await K({block:N,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:$,value:st(I)},rpcStateOverride:A}).catch(()=>100000n);return 2n*BigInt(M)}));T+=L.reduce((U,$)=>U+$,0n)}return T}catch(a){throw uZ(a,{...e,account:r,chain:t.chain})}}async function Qj(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?st(r):n]},{dedupe:!!r});return yl(s)}function Yj(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>ac(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>Os(i))}function Jj(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>ac(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>ac(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>Os(o))}function gZ(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function mZ(t,e,n){return t&e^~t&n}function yZ(t,e,n){return t&e^t&n^e&n}class wZ extends bj{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=xS(this.buffer)}update(e){Vx(this),e=CC(e),If(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=xS(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Vx(this),yj(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Kw(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;gZ(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=xS(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Pl=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),bZ=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),kl=new Uint32Array(64);let vZ=class extends wZ{constructor(e=32){super(64,e,8,!1),this.A=Pl[0]|0,this.B=Pl[1]|0,this.C=Pl[2]|0,this.D=Pl[3]|0,this.E=Pl[4]|0,this.F=Pl[5]|0,this.G=Pl[6]|0,this.H=Pl[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)kl[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=kl[d-15],f=kl[d-2],p=_a(h,7)^_a(h,18)^h>>>3,g=_a(f,17)^_a(f,19)^f>>>10;kl[d]=g+kl[d-7]+p+kl[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=_a(a,6)^_a(a,11)^_a(a,25),f=u+h+mZ(a,c,l)+bZ[d]+kl[d]|0,g=(_a(r,2)^_a(r,13)^_a(r,22))+yZ(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Kw(kl)}destroy(){this.set(0,0,0,0,0,0,0,0),Kw(this.buffer)}};const EZ=vj(()=>new vZ),xZ=EZ;function _Z(t,e){return xZ(gl(t,{strict:!1})?wC(t):t)}function CZ(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=_Z(e);return s.set([n],0),r==="bytes"?s:Os(s)}function AZ(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(CZ({commitment:i,to:r,version:n}));return s}const m$=6,Zj=32,jO=4096,Xj=Zj*jO,y$=Xj*m$-1-1*jO*m$;class SZ extends fe{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class IZ extends fe{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function TZ(t){const e=typeof t.data=="string"?ac(t.data):t.data,n=Qn(e);if(!n)throw new IZ;if(n>y$)throw new SZ({maxSize:y$,size:n});const r=[];let s=!0,i=0;for(;s;){const o=RO(new Uint8Array(Xj));let a=0;for(;a<jO;){const c=e.slice(i,i+(Zj-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>Os(o.bytes))}function NZ(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??TZ({data:e}),i=t.commitments??Yj({blobs:s,kzg:n,to:r}),o=t.proofs??Jj({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function PZ(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new QJ({transaction:t})}const eF=["blobVersionedHashes","chainId","fees","gas","nonce","type"],w$=new Map;async function IC(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=eF,type:u}=e,d=n&&zr(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await un(t,db,"getBlock")({blockTag:"latest"}),f)}let g;async function y(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await un(t,Ov,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const w=await y();h.nonce=await c.consume({address:d.address,chainId:w,client:t})}else h.nonce=await un(t,Qj,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const w=Yj({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const v=AZ({commitments:w,to:"hex"});h.blobVersionedHashes=v}if(l.includes("sidecars")){const v=Jj({blobs:r,commitments:w,kzg:o}),b=NZ({blobs:r,commitments:w,proofs:v,to:"hex"});h.sidecars=b}}if(l.includes("chainId")&&(h.chainId=await y()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=PZ(h)}catch{let w=w$.get(t.uid);if(typeof w>"u"){const v=await p();w=typeof(v==null?void 0:v.baseFeePerGas)=="bigint",w$.set(t.uid,w)}h.type=w?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const w=await p(),{maxFeePerGas:v,maxPriorityFeePerGas:b}=await f$(t,{block:w,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<b)throw new iZ({maxPriorityFeePerGas:b});h.maxPriorityFeePerGas=b,h.maxFeePerGas=v}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new MO;if(typeof e.gasPrice>"u"){const w=await p(),{gasPrice:v}=await f$(t,{block:w,chain:s,request:h,type:"legacy"});h.gasPrice=v}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await un(t,Kj,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),kv(h),delete h.parameters,h}async function tF(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const SS=new _C(128);async function Rv(t,e){var v,b,_,x;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...y}=e;if(typeof n>"u")throw new Zf({docsPath:"/docs/actions/wallet/sendTransaction"});const w=n?zr(n):null;try{kv(e);const C=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await Uj({authorization:i[0]}).catch(()=>{throw new fe("`to` is required. Could not infer from `authorizationList`.")})})();if((w==null?void 0:w.type)==="json-rpc"||w===null){let S;r!==null&&(S=await un(t,Ov,"getChainId")({}),Lj({currentChainId:S,chain:r}));const N=(_=(b=(v=t.chain)==null?void 0:v.formatters)==null?void 0:b.transactionRequest)==null?void 0:_.format,P=(N||SC)({...LO(y,{format:N}),accessList:s,authorizationList:i,blobs:o,chainId:S,data:a,from:w==null?void 0:w.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:C,type:p,value:g}),R=SS.get(t.uid),j=R?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:j,params:[P]},{retryCount:0})}catch(H){if(R===!1)throw H;const K=H;if(K.name==="InvalidInputRpcError"||K.name==="InvalidParamsRpcError"||K.name==="MethodNotFoundRpcError"||K.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[P]},{retryCount:0}).then(T=>(SS.set(t.uid,!0),T)).catch(T=>{const I=T;throw I.name==="MethodNotFoundRpcError"||I.name==="MethodNotSupportedRpcError"?(SS.set(t.uid,!1),K):I});throw K}}if((w==null?void 0:w.type)==="local"){const S=await un(t,IC,"prepareTransactionRequest")({account:w,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:w.nonceManager,parameters:[...eF,"sidecars"],type:p,value:g,...y,to:C}),N=(x=r==null?void 0:r.serializers)==null?void 0:x.transaction,A=await w.signTransaction(S,{serializer:N});return await un(t,tF,"sendRawTransaction")({serializedTransaction:A})}throw(w==null?void 0:w.type)==="smart"?new WE({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new WE({docsPath:"/docs/actions/wallet/sendTransaction",type:w==null?void 0:w.type})}catch(C){throw C instanceof WE?C:Fj(C,{...e,account:w,chain:e.chain||void 0})}}function kZ(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=OO({abi:n,args:r,bytecode:s});return Rv(t,{...i,...i.authorizationList?{to:null}:{},data:o})}const zT=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],B8e=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],OZ=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],RZ=[...OZ,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}];function DZ(t,e={}){typeof e.size<"u"&&ga(t,{size:e.size});const n=Os(t,e);return ml(n,e)}function $Z(t,e={}){let n=t;if(typeof e.size<"u"&&(ga(n,{size:e.size}),n=wy(n)),n.length>1||n[0]>1)throw new _Y(n);return!!n[0]}function sl(t,e={}){typeof e.size<"u"&&ga(t,{size:e.size});const n=Os(t,e);return yl(n,e)}function UZ(t,e={}){let n=t;return typeof e.size<"u"&&(ga(n,{size:e.size}),n=wy(n,{dir:"right"})),new TextDecoder().decode(n)}function TC(t,e){const n=typeof e=="string"?ac(e):e,r=RO(n);if(Qn(n)===0&&t.length>0)throw new EC;if(Qn(e)&&Qn(e)<32)throw new fj({data:typeof e=="string"?e:Os(e),params:t,size:Qn(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=Tg(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function Tg(t,e,{staticPosition:n}){const r=kO(e.type);if(r){const[s,i]=r;return LZ(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return zZ(t,e,{staticPosition:n});if(e.type==="address")return BZ(t);if(e.type==="bool")return MZ(t);if(e.type.startsWith("bytes"))return jZ(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return FZ(t,e);if(e.type==="string")return HZ(t,{staticPosition:n});throw new zY(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const b$=32,HT=32;function BZ(t){const e=t.readBytes(32);return[Nv(Os(Pj(e,-20))),32]}function LZ(t,e,{length:n,staticPosition:r}){if(!n){const o=sl(t.readBytes(HT)),a=r+o,c=a+b$;t.setPosition(a);const l=sl(t.readBytes(b$)),u=hb(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=Tg(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(hb(e)){const o=sl(t.readBytes(HT)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=Tg(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=Tg(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function MZ(t){return[$Z(t.readBytes(32),{size:32}),32]}function jZ(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=sl(t.readBytes(32));t.setPosition(n+o);const a=sl(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Os(c),32]}return[Os(t.readBytes(Number.parseInt(s),32)),32]}function FZ(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?DZ(s,{signed:n}):sl(s,{signed:n}),32]}function zZ(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(hb(e)){const o=sl(t.readBytes(HT)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=Tg(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=Tg(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function HZ(t,{staticPosition:e}){const n=sl(t.readBytes(32)),r=e+n;t.setPosition(r);const s=sl(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=UZ(wy(i));return t.setPosition(e+32),[o,32]}function hb(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(hb);const n=kO(t.type);return!!(n&&hb({...t,type:n[1]}))}const GZ=t=>by(wC(t));function WZ(t){return GZ(t)}const qZ="1.0.8";let _o=class GT extends Error{constructor(e,n={}){var o;const r=n.cause instanceof GT?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof GT&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${qZ}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function _l(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const nF=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,rF=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,sF=/^\(.+?\).*?$/,v$=/^tuple(?<array>(\[(\d*)\])*)$/;function WT(t){let e=t.type;if(v$.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=WT(i),s<n-1&&(e+=", ")}const r=_l(v$,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,WT({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function t0(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=WT(s),r!==n-1&&(e+=", ")}return e}function VZ(t){var e;return t.type==="function"?`function ${t.name}(${t0(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${t0(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${t0(t.inputs)})`:t.type==="error"?`error ${t.name}(${t0(t.inputs)})`:t.type==="constructor"?`constructor(${t0(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const iF=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function KZ(t){return iF.test(t)}function QZ(t){return _l(iF,t)}const oF=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function YZ(t){return oF.test(t)}function JZ(t){return _l(oF,t)}const aF=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function ZZ(t){return aF.test(t)}function XZ(t){return _l(aF,t)}const cF=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function lF(t){return cF.test(t)}function eX(t){return _l(cF,t)}const uF=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function tX(t){return uF.test(t)}function nX(t){return _l(uF,t)}const dF=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function rX(t){return dF.test(t)}function sX(t){return _l(dF,t)}const iX=/^receive\(\) external payable$/;function oX(t){return iX.test(t)}const aX=new Set(["indexed"]),qT=new Set(["calldata","memory","storage"]);class cX extends _o{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class lX extends _o{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class uX extends _o{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class dX extends _o{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class hX extends _o{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class fX extends _o{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class pX extends _o{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Ey extends _o{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class gX extends _o{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class mX extends _o{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class yX extends _o{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class wX extends _o{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function bX(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const IS=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function vX(t,e={}){if(ZZ(t))return EX(t,e);if(YZ(t))return xX(t,e);if(KZ(t))return _X(t,e);if(tX(t))return CX(t,e);if(rX(t))return AX(t);if(oX(t))return{type:"receive",stateMutability:"payable"};throw new gX({signature:t})}function EX(t,e={}){const n=XZ(t);if(!n)throw new Ey({signature:t,type:"function"});const r=ta(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(Nf(r[a],{modifiers:qT,structs:e,type:"function"}));const o=[];if(n.returns){const a=ta(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(Nf(a[l],{modifiers:qT,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function xX(t,e={}){const n=JZ(t);if(!n)throw new Ey({signature:t,type:"event"});const r=ta(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Nf(r[o],{modifiers:aX,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function _X(t,e={}){const n=QZ(t);if(!n)throw new Ey({signature:t,type:"error"});const r=ta(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Nf(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function CX(t,e={}){const n=nX(t);if(!n)throw new Ey({signature:t,type:"constructor"});const r=ta(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Nf(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function AX(t){const e=sX(t);if(!e)throw new Ey({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const SX=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,IX=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,TX=/^u?int$/;function Nf(t,e){var d,h;const n=bX(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(IS.has(n))return IS.get(n);const r=sF.test(t),s=_l(r?IX:SX,t);if(!s)throw new uX({param:t});if(s.name&&PX(s.name))throw new dX({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=ta(s.type),p=[],g=f.length;for(let y=0;y<g;y++)p.push(Nf(f[y],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(TX.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!hF(c))throw new lX({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new hX({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(qT.has(s.modifier)&&!kX(c,!!s.array))throw new fX({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return IS.set(n,u),u}function ta(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?ta(a,[...e,n.trim()]):ta(a,e,`${n}${o}`,r);case"(":return ta(a,e,`${n}${o}`,r+1);case")":return ta(a,e,`${n}${o}`,r-1);default:return ta(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new wX({current:n,depth:r});return e.push(n.trim()),e}function hF(t){return t==="address"||t==="bool"||t==="function"||t==="string"||nF.test(t)||rF.test(t)}const NX=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function PX(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||nF.test(t)||rF.test(t)||NX.test(t)}function kX(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function OX(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!lF(a))continue;const c=eX(a);if(!c)throw new Ey({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=Nf(p,{type:"struct"});u.push(g)}if(!u.length)throw new mX({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=fF(c,e)}return r}const RX=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function fF(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(sF.test(o.type))r.push(o);else{const c=_l(RX,o.type);if(!(c!=null&&c.type))throw new pX({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new yX({type:u});r.push({...o,type:`tuple${l??""}`,components:fF(e[u]??[],e,new Set([...n,u]))})}else if(hF(u))r.push(o);else throw new cX({type:u})}}return r}function pF(t){const e=OX(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];lF(i)||n.push(vX(i,e))}return n}function DX(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new fe("Unable to normalize signature.");return s}const $X=t=>{const e=typeof t=="string"?t:VZ(t);return DX(e)};function gF(t){return WZ($X(t))}const FO=gF,zO=t=>Kx(gF(t),0,4);function HO(t){const{abi:e,args:n=[],name:r}=t,s=gl(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?zO(a)===r:a.type==="event"?FO(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?VT(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=mF(a.inputs,o.inputs,n);if(l)throw new MY({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function VT(t,e){const n=typeof t,r=e.type;switch(r){case"address":return ha(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>VT(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>VT(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function mF(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return mF(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?ha(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?ha(n[r],{strict:!1}):!1)return o}}const TS="/docs/contract/decodeFunctionResult";function GO(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=HO({abi:e,args:n,name:r});if(!a)throw new Wx(r,{docsPath:TS});i=a}if(i.type!=="function")throw new Wx(void 0,{docsPath:TS});if(!i.outputs)throw new LY(i.name,{docsPath:TS});const o=TC(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const E$="/docs/contract/encodeFunctionData";function UX(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=HO({abi:e,args:n,name:r});if(!i)throw new Wx(r,{docsPath:E$});s=i}if(s.type!=="function")throw new Wx(void 0,{docsPath:E$});return{abi:[s],functionName:zO(Ed(s))}}function Dv(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:UX(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?Oj(s.inputs,e??[]):void 0;return xC([i,o??"0x"])}function WO({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new RT({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new RT({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const yF={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},BX={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},LX={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function MX(t){const{abi:e,data:n}=t,r=Kx(n,0,4);if(r==="0x")throw new EC;const i=[...e||[],BX,LX].find(o=>o.type==="error"&&r===zO(Ed(o)));if(!i)throw new pj(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?TC(i.inputs,Kx(n,4)):void 0,errorName:i.name}}function wF({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Ns(e[i]):e[i]}`).join(", ")})`}class jX extends fe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var y;const p=n?zr(n):void 0;let g=Pv({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${DO(h)} ${((y=s==null?void 0:s.nativeCurrency)==null?void 0:y.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ui(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ui(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ui(l)} gwei`,nonce:u});f&&(g+=`
${fZ(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class bF extends fe{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=HO({abi:n,args:r,name:o}),l=c?wF({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?Ed(c,{includeName:!0}):void 0,d=Pv({address:s&&ZJ(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class KT extends fe{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=MX({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=yF[f]}else{const f=u?Ed(u,{includeName:!0}):void 0,p=u&&h?wF({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof pj&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class FX extends fe{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class zX extends fe{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class qO extends fe{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function HX(t,e){var r,s,i,o,a,c;if(!(t instanceof fe))return!1;const n=t.walk(l=>l instanceof KT);return n instanceof KT?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||n.reason===yF[50]):!1}function GX(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return gl(e)?e:null}function WX(t){return`[${t.slice(2)}]`}function qX(t){const e=new Uint8Array(32).fill(0);return t?GX(t)||by(Ig(t)):Os(e)}function VX(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(Ig(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=Ig(s[i]);o.byteLength>255&&(o=Ig(WX(qX(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const KX=3;function Jx(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof qO?t:t instanceof fe?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof EC?new FX({functionName:i}):[KX,Tf.code].includes(c)&&(l||u||d||h)?new KT({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof UO?u:h??d}):t;return new bF(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}const QX="0.1.1";function YX(){return QX}let vF=class QT extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof QT){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof QT&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${YX()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return EF(this,e)}};function EF(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?EF(t.cause,e):e?null:t}function JX(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new eee({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}function Dc(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new XX({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?ZX(c,r):c}function ZX(t,e){return JX(t,{dir:"left",size:e})}let XX=class extends vF{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}},eee=class extends vF{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function tee(t){return{address:t.address,amount:Dc(t.amount),index:Dc(t.index),validatorIndex:Dc(t.validatorIndex)}}function nee(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:Dc(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:Dc(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:Dc(t.gasLimit)},...typeof t.number=="bigint"&&{number:Dc(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:Dc(t.prevRandao)},...typeof t.time=="bigint"&&{time:Dc(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(tee)}}}const ree="0x82ad56cb",see="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",iee="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe";function oee(t,{docsPath:e,...n}){const r=(()=>{const s=BO(t,n);return s instanceof AC?t:s})();return new jX(r,{docsPath:e,...n})}function VO(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const NS=new Map;function xF({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>NS.delete(e),a=()=>c().map(({args:u})=>u),c=()=>NS.get(e)||[],l=u=>NS.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=VO();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function _F(t,e){var H,K,T,I;const{account:n=t.account,authorizationList:r,batch:s=!!((H=t.batch)!=null&&H.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:v,nonce:b,to:_,value:x,stateOverride:C,...S}=e,N=n?zr(n):void 0;if(u&&(h||f))throw new fe("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&_)throw new fe("Cannot provide both `code` & `to` as parameters.");const A=u&&d,P=h&&f&&_&&d,R=A||P,j=A?lee({code:u,data:d}):P?uee({data:d,factory:h,factoryData:f,to:_}):d;try{kv(e);const U=(typeof i=="bigint"?st(i):void 0)||o,$=l?nee(l):void 0,M=qj(C),q=(I=(T=(K=t.chain)==null?void 0:K.formatters)==null?void 0:T.transactionRequest)==null?void 0:I.format,ce=(q||SC)({...LO(S,{format:q}),from:N==null?void 0:N.address,accessList:a,authorizationList:r,blobs:c,data:j,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:v,nonce:b,to:R?void 0:_,value:x});if(s&&aee({request:ce})&&!M&&!$)try{return await cee(t,{...ce,blockNumber:i,blockTag:o})}catch(me){if(!(me instanceof Bj)&&!(me instanceof RT))throw me}const se=(()=>{const me=[ce,U];return M&&$?[...me,M,$]:M?[...me,M]:$?[...me,{},$]:me})(),le=await t.request({method:"eth_call",params:se});return le==="0x"?{data:void 0}:{data:le}}catch(L){const U=dee(L),{offchainLookup:$,offchainLookupSignature:M}=await Gn(async()=>{const{offchainLookup:q,offchainLookupSignature:ee}=await import("./ccip-DuKztTG_.js");return{offchainLookup:q,offchainLookupSignature:ee}},[]);if(t.ccipRead!==!1&&(U==null?void 0:U.slice(0,10))===M&&_)return{data:await $(t,{data:U,to:_})};throw R&&(U==null?void 0:U.slice(0,10))==="0x101bb98d"?new zX({factory:h}):oee(L,{...e,account:N,chain:t.chain})}}function aee({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(ree)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function cee(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new Bj;l=WO({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?st(s):void 0)||i,{schedule:h}=xF({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(y){return y.reduce((v,{data:b})=>v+(b.length-2),0)>n*2},fn:async y=>{const w=y.map(_=>({allowFailure:!0,callData:_.data,target:_.to})),v=Dv({abi:zT,args:[w],functionName:"aggregate3"}),b=await t.request({method:"eth_call",params:[{data:v,to:l},d]});return GO({abi:zT,args:[w],functionName:"aggregate3",data:b||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new qO({data:f});return f==="0x"?{data:void 0}:{data:f}}function lee(t){const{code:e,data:n}=t;return OO({abi:pF(["constructor(bytes, bytes)"]),bytecode:see,args:[e,n]})}function uee(t){const{data:e,factory:n,factoryData:r,to:s}=t;return OO({abi:pF(["constructor(address, bytes, address, bytes)"]),bytecode:iee,args:[s,e,n,r]})}function dee(t){var n;if(!(t instanceof fe))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function KO(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=Dv({abi:n,args:s,functionName:i});try{const{data:c}=await un(t,_F,"call")({...o,data:a,to:r});return GO({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw Jx(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function hee(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=WO({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:RZ,functionName:"reverse",args:[Sf(VX(c))],blockNumber:n,blockTag:r},u=un(t,KO,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(HX(l))return null;throw l}}function fee(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function pee(t){const e=fee(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}const gee=new Map,mee=new Map;function yee(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,gee),r=e(t,mee);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function wee(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=yee(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const bee=t=>`blockNumber.${t}`;async function vee(t,{cacheTime:e=t.cacheTime}={}){const n=await wee(()=>t.request({method:"eth_blockNumber"}),{cacheKey:bee(t.uid),cacheTime:e});return BigInt(n)}function CF(t,e){if(!ha(t,{strict:!1}))throw new _d({address:t});if(!ha(e,{strict:!1}))throw new _d({address:e});return t.toLowerCase()===e.toLowerCase()}const x$="/docs/contract/decodeEventLog";function Eee(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new BY({docsPath:x$});const c=e.find(g=>g.type==="event"&&o===FO(Ed(g)));if(!(c&&"name"in c)||c.type!=="event")throw new gj(o,{docsPath:x$});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,y)=>[g,y]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[y,w]=f[g],v=a[g];if(!v)throw new mj({abiItem:c,param:y});h[d?w:y.name||w]=xee({param:y,value:v})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=TC(p,n);if(g)if(d)for(let y=0;y<u.length;y++)h[y]=h[y]??g.shift();else for(let y=0;y<p.length;y++)h[p[y].name]=g[y]}catch(g){if(i)throw g instanceof fj||g instanceof Rj?new kT({abiItem:c,data:n,params:p,size:Qn(n)}):g}else if(i)throw new kT({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function xee({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(TC([t],e)||[])[0]}function _ee(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===FO(u));if(!c)return null;const l=Eee({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!Cee({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof gj)return null;if(c instanceof kT||c instanceof mj){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function Cee(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?CF(o,a):i.type==="string"||i.type==="bytes"?by(wC(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function AF(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function Aee(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>AF(i));return!("abi"in e)||!e.abi?s:_ee({abi:e.abi,logs:s,strict:n})}async function SF(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?st(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,st(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,st(i)]},{dedupe:!!a}),!c)throw new Mj({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||Gj)(c)}const IF={"0x0":"reverted","0x1":"success"};function See(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>AF(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?yl(t.transactionIndex):null,status:t.status?IF[t.status]:null,type:t.type?Hj[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function _$(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new jj({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||See)(n)}async function Iee(t,e){var w;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((w=t.batch)==null?void 0:w.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=WO({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let v=0;v<l.length;v++){const{abi:b,address:_,args:x,functionName:C}=l[v];try{const S=Dv({abi:b,args:x,functionName:C});p+=(S.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(S.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:S,target:_}]}catch(S){const N=Jx(S,{abi:b,address:_,args:x,docsPath:"/docs/contract/multicall",functionName:C,sender:n});if(!r)throw N;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:_}]}}const g=await Promise.allSettled(h.map(v=>un(t,KO,"readContract")({abi:zT,account:n,address:d,args:[v],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),y=[];for(let v=0;v<g.length;v++){const b=g[v];if(b.status==="rejected"){if(!r)throw b.reason;for(let x=0;x<h[v].length;x++)y.push({status:"failure",error:b.reason,result:void 0});continue}const _=b.value;for(let x=0;x<_.length;x++){const{returnData:C,success:S}=_[x],{callData:N}=h[v][x],{abi:A,address:P,functionName:R,args:j}=l[y.length];try{if(N==="0x")throw new EC;if(!S)throw new qO({data:C});const H=GO({abi:A,args:j,data:C,functionName:R});y.push(r?{result:H,status:"success"}:H)}catch(H){const K=Jx(H,{abi:A,address:P,args:j,docsPath:"/docs/contract/multicall",functionName:R});if(!r)throw K;y.push({error:K,result:void 0,status:"failure"})}}}if(y.length!==l.length)throw new fe("multicall results mismatch");return y}const k1=new _C(8192);function Tee(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(k1.get(n))return k1.get(n);const r=t().finally(()=>k1.delete(n));return k1.set(n,r),r}async function Zx(t){return new Promise(e=>setTimeout(e,t))}function Xx(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await Zx(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function Nee(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new _h(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new _h(new Error("method not supported"),{method:l});const u=s?bC(`${c}.${Ns(n)}`):void 0;return Tee(()=>Xx(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case Qw.code:throw new Qw(f);case Yw.code:throw new Yw(f);case Jw.code:throw new Jw(f,{method:n.method});case Zw.code:throw new Zw(f);case Tf.code:throw new Tf(f);case Xw.code:throw new Xw(f);case eb.code:throw new eb(f);case ld.code:throw new ld(f);case Wm.code:throw new Wm(f);case _h.code:throw new _h(f,{method:n.method});case qm.code:throw new qm(f);case tb.code:throw new tb(f);case ir.code:throw new ir(f);case nb.code:throw new nb(f);case rb.code:throw new rb(f);case sb.code:throw new sb(f);case ib.code:throw new ib(f);case cc.code:throw new cc(f);case Vm.code:throw new Vm(f);case ob.code:throw new ob(f);case ab.code:throw new ab(f);case cb.code:throw new cb(f);case lb.code:throw new lb(f);case ub.code:throw new ub(f);case Km.code:throw new Km(f);case 5e3:throw new ir(f);default:throw h instanceof fe?h:new eZ(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof ow){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>Pee(h)}),{enabled:s,id:u})}}function Pee(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===qm.code||t.code===Tf.code:t instanceof ow&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function kee(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function TF(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function Oee(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const C$=Oee();function Ree(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await TF(async({signal:p})=>{const g={...a,body:Array.isArray(r)?Ns(r.map(b=>({jsonrpc:"2.0",id:b.id??C$.take(),...b}))):Ns({jsonrpc:"2.0",id:r.id??C$.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},y=new Request(t,g),w=await(s==null?void 0:s(y,g))??{...g,url:t};return await fetch(w.url??t,w)},{errorInstance:new h$({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new ow({body:r,details:Ns(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof ow||h instanceof h$?h:new ow({body:r,cause:h,url:t})}}}}class Dee extends fe{constructor({domain:e}){super(`Invalid domain "${Ns(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class $ee extends fe{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class Uee extends fe{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function Bee(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return Ns({domain:o,message:a,primaryType:r,types:s})}function Lee(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(kj);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,y,w]=h;st(d,{signed:y==="int",size:Number.parseInt(w)/8})}if(u==="address"&&typeof d=="string"&&!ha(d))throw new _d({address:d});const f=u.match(_J);if(f){const[g,y]=f;if(y&&Qn(d)!==Number.parseInt(y))throw new jY({expectedSize:Number.parseInt(y),givenSize:Qn(d)})}const p=s[u];p&&(jee(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new Dee({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new $ee({primaryType:r,types:s})}function Mee({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function jee(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new Uee({type:t})}class Fee extends fe{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function zee(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new Fee({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const PS=new Map,A$=new Map;let Hee=0;function fb(t,e,n){const r=++Hee,s=()=>PS.get(t)||[],i=()=>{const u=s();PS.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=A$.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(PS.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&A$.set(t,l),o}function QO(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await Zx(c);const l=async()=>{s&&(await t({unpoll:i}),await Zx(r),l())};l()})(),i}function Gee(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=Ns(["watchBlockNumber",t.uid,e,n,o]);return fb(d,{onBlockNumber:r,onError:s},h=>QO(async()=>{var f;try{const p=await un(t,vee,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=Ns(["watchBlockNumber",t.uid,e,n]);return fb(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const w=t.transport.transports.find(v=>v.config.type==="webSocket"||v.config.type==="ipc");return w?w.value:t.transport}return t.transport})(),{unsubscribe:y}=await g.subscribe({params:["newHeads"],onData(w){var b;if(!f)return;const v=ml((b=w.result)==null?void 0:b.number);h.onBlockNumber(v,c),c=v},onError(w){var v;(v=h.onError)==null||v.call(h,w)}});p=y,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function Wee(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function qee(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=Ns(["watchPendingTransactions",t.uid,e,i]);return fb(l,{onTransactions:r,onError:n},u=>{let d;const h=QO(async()=>{var f;try{if(!d)try{d=await un(t,pee,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await un(t,Aee,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await un(t,Wee,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function Vee(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>Nv(r))}async function Kee(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function Qee(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?zr(n):void 0,i=r?[s==null?void 0:s.address,[st(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}const NF="0x5792579257925792579257925792579257925792579257925792579257925792",PF=st(0,{size:32});async function Yee(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?zr(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?Dv({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?xd([p,f.dataSuffix]):p,to:f.to,value:f.value?st(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:st(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(v=>!v.optional)){const v="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new Vm(new fe(v,{details:v}))}if(a&&d.length>1){const w="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new Km(new fe(w,{details:w}))}const p=[];for(const w of d){const v=Rv(t,{account:u,chain:s,data:w.data,to:w.to,value:w.value?ml(w.value):void 0});p.push(v),o>0&&await new Promise(b=>setTimeout(b,o))}const g=await Promise.allSettled(p);if(g.every(w=>w.status==="rejected"))throw g[0].reason;const y=g.map(w=>w.status==="fulfilled"?w.value:PF);return{id:xd([...y,st(s.id,{size:32}),NF])}}throw Fj(h,{...e,account:u,chain:e.chain})}}async function kF(t,e){async function n(u){if(u.endsWith(NF.slice(2))){const h=wy(OT(u,-64,-32)),f=OT(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(y=>PF.slice(2)!==y?t.request({method:"eth_getTransactionReceipt",params:[`0x${y}`]},{dedupe:!0}):void 0)),g=p.some(y=>y===null)?100:p.every(y=>(y==null?void 0:y.status)==="0x1")?200:p.every(y=>(y==null?void 0:y.status)==="0x0")?500:600;return{atomic:!1,chainId:yl(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?yl(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:ml(u.blockNumber),gasUsed:ml(u.gasUsed),status:IF[u.status]})))??[],statusCode:l,status:c,version:o}}async function Jee(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function Zee(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=Ns(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=VO();let u;const d=fb(o,{resolve:c,reject:l},h=>{const f=QO(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await kF(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new Xee({id:n}))},i):void 0,await a}class Xee extends fe{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}async function ete(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=Ns(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:y,reject:w}=VO(),v=a?setTimeout(()=>{p(),f(),w(new JJ({hash:n}))},a):void 0;return f=fb(c,{onReplaced:r,resolve:y,reject:w},b=>{p=un(t,Gee,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(_){const x=S=>{clearTimeout(v),p(),S(),f()};let C=_;if(!h)try{if(d){if(e>1&&(!d.blockNumber||C-d.blockNumber+1n<e))return;x(()=>b.resolve(d));return}if(l||(h=!0,await Xx(async()=>{l=await un(t,SF,"getTransaction")({hash:n}),l.blockNumber&&(C=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await un(t,_$,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||C-d.blockNumber+1n<e))return;x(()=>b.resolve(d))}catch(S){if(S instanceof Mj||S instanceof jj){if(!l){h=!1;return}try{u=l,h=!0;const N=await Xx(()=>un(t,db,"getBlock")({blockNumber:C,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:R})=>R instanceof zj});h=!1;const A=N.transactions.find(({from:R,nonce:j})=>R===u.from&&j===u.nonce);if(!A||(d=await un(t,_$,"getTransactionReceipt")({hash:A.hash}),e>1&&(!d.blockNumber||C-d.blockNumber+1n<e)))return;let P="replaced";A.to===u.to&&A.value===u.value&&A.input===u.input?P="repriced":A.from===A.to&&A.value===0n&&(P="cancelled"),x(()=>{var R;(R=b.onReplaced)==null||R.call(b,{reason:P,replacedTransaction:u,transaction:A,transactionReceipt:d}),b.resolve(d)})}catch(N){x(()=>b.reject(N))}}else x(()=>b.reject(S))}}})}),g}async function tte(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Ku(n))}async function nte(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function OF(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new Zf({docsPath:"/docs/eip7702/prepareAuthorization"});const i=zr(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:zr(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await un(t,Ov,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await un(t,Qj,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&CF(o.address,i.address))&&(a.nonce+=1)),a}async function rte(t,e){const{account:n=t.account}=e;if(!n)throw new Zf({docsPath:"/docs/eip7702/signAuthorization"});const r=zr(n);if(!r.signAuthorization)throw new WE({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await OF(t,e);return r.signAuthorization(s)}async function ste(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new Zf({docsPath:"/docs/actions/wallet/signTransaction"});const i=zr(n);kv({account:i,...e});const o=await un(t,Ov,"getChainId")({});r!==null&&Lj({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||SC;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:st(o),from:i.address}]},{retryCount:0})}async function RF(t,{account:e=t.account,message:n}){if(!e)throw new Zf({docsPath:"/docs/actions/wallet/signMessage"});const r=zr(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?bC(n):n.raw instanceof Uint8Array?Sf(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function ite(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new Zf({docsPath:"/docs/actions/wallet/signTypedData"});const o=zr(n),a={EIP712Domain:Mee({domain:r}),...e.types};if(Lee({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=Bee({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function ote(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:st(e)}]},{retryCount:0})}async function ate(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}async function DF(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new Zf({docsPath:"/docs/contract/writeContract"});const l=r?zr(r):null,u=Dv({abi:n,args:i,functionName:a});try{return await un(t,Rv,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw Jx(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function Mi(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const qE="2.17.3",cte=()=>`@wagmi/core@${qE}`;var $F=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},e_,UF;let Cl=class YT extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return cte()}constructor(e,n={}){var i;super(),e_.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof YT?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof YT&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return $F(this,e_,"m",UF).call(this,this,e)}};e_=new WeakSet,UF=function t(e,n){return n!=null&&n(e)?e:e.cause?$F(this,e_,"m",t).call(this,e.cause,n):e};class pb extends Cl{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class lte extends Cl{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class ute extends Cl{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class dte extends Cl{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class hte extends Cl{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class fte extends Cl{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function VE(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new lte;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const JT=256;let O1=JT,R1;function BF(t=11){if(!R1||O1+t>JT*2){R1="",O1=0;for(let e=0;e<JT;e++)R1+=(256+Math.random()*256|0).toString(16).substring(1)}return R1.substring(O1,O1+++t)}function LF(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?zr(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},y={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:BF()};function w(v){return b=>{const _=b(v);for(const C in y)delete _[C];const x={...v,..._};return Object.assign(x,{extend:w(x)})}}return Object.assign(y,{extend:w(y)})}function YO({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=BF();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:Nee(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function pte(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>YO({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function S$(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=gte,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=YO({key:n,name:r,async request({method:g,params:y}){let w;const v=async(b=0)=>{const _=h[b]({...d,chain:c,retryCount:0,timeout:u});try{const x=await _.request({method:g,params:y});return f({method:g,params:y,response:x,transport:_,status:"success"}),x}catch(x){if(f({error:x,method:g,params:y,transport:_,status:"error"}),i(x)||b===h.length-1||(w??(w=h.slice(b+1).some(C=>{const{include:S,exclude:N}=C({chain:c}).config.methods||{};return S?S.includes(g):N?!N.includes(g):!0})),!w))throw x;return v(b+1)}};return v()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};mte({chain:c,interval:g.interval??l,onTransports:y=>h=y,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function gte(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===Wm.code||t.code===ir.code||xh.nodeMessage.test(t.message)||t.code===5e3))}function mte({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const y=g({chain:t,retryCount:0,timeout:i}),w=Date.now();let v,b;try{await(r?r({transport:y}):y.request({method:"net_listening"})),b=1}catch{b=0}finally{v=Date.now()}return{latency:v-w,success:b}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:y})=>y)))),p=o.map((g,y)=>{const w=u.map(C=>C[y].latency),b=1-w.reduce((C,S)=>C+S,0)/w.length/f,_=u.map(C=>C[y].success),x=_.reduce((C,S)=>C+S,0)/_.length;return x===0?[0,y]:[l*b+c*x,y]}).sort((g,y)=>y[0]-g[0]);n(p.map(([,g])=>o[g])),await Zx(e),d()};d()}class yte extends fe{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function D1(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},y=e.retryCount??h,w=f??e.timeout??1e4,v=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!v)throw new yte;const b=Ree(v,{fetchOptions:r,onRequest:a,onResponse:c,timeout:w});return YO({key:s,methods:i,name:o,async request({method:_,params:x}){const C={method:_,params:x},{schedule:S}=xF({id:v,wait:g,shouldSplitBatch(R){return R.length>p},fn:R=>b.request({body:R}),sort:(R,j)=>R.id-j.id}),N=async R=>n?S(R):[await b.request({body:R})],[{error:A,result:P}]=await N(C);if(u)return{error:A,result:P};if(A)throw new UO({body:C,error:A,url:v});return P},retryCount:y,retryDelay:l,timeout:w,type:"http"},{fetchOptions:r,url:v})}}function wte(t){return{addChain:e=>kY(t,e),deployContract:e=>kZ(t,e),getAddresses:()=>Vee(t),getCallsStatus:e=>kF(t,e),getCapabilities:e=>Qee(t,e),getChainId:()=>Ov(t),getPermissions:()=>Kee(t),prepareAuthorization:e=>OF(t,e),prepareTransactionRequest:e=>IC(t,e),requestAddresses:()=>tte(t),requestPermissions:e=>nte(t,e),sendCalls:e=>Yee(t,e),sendRawTransaction:e=>tF(t,e),sendTransaction:e=>Rv(t,e),showCallsStatus:e=>Jee(t,e),signAuthorization:e=>rte(t,e),signMessage:e=>RF(t,e),signTransaction:e=>ste(t,e),signTypedData:e=>ite(t,e),switchChain:e=>ote(t,e),waitForCallsStatus:e=>Zee(t,e),watchAsset:e=>ate(t,e),writeContract:e=>DF(t,e)}}async function $v(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new fte({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new ute;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new hte({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=zr(e.account??n.accounts[0]);if(o&&(o.address=Ku(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new dte({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return LF({account:o,chain:a,name:"Connector Client",transport:l=>pte(c)({...l,retryCount:0})})}async function MF(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function bte(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await $v(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return Mi(o,Kj,"estimateGas")({...s,account:i})}function jF(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(VJ[t])}function Ng(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function vte(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return Mi(o,Iee,"multicall")({allowFailure:n,contracts:s,...i})}function Ete(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Mi(s,KO,"readContract")(r)}async function xte(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>vte(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof bF)throw c;const l=()=>o.map(u=>Ete(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function _te(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await I$(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await I$(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=dj(wy(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await Mi(c,Vj,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:vy(u,jF(a)),symbol:d.nativeCurrency.symbol,value:u}}async function I$(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await xte(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=vy(c??"0",jF(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function T$(t){return t.state.chainId}function Pf(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Pf(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!Pf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let $1=[];function Da(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||Pf($1,e)?$1:($1=e,e)}let kS=[];function N$(t){const e=t.connectors;return Pf(kS,e)?kS:(kS=e,e)}function Cte(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Mi(s,hee,"getEnsName")(r)}async function Ate(t,e={}){return(await $v(t,e)).extend(wte)}async function Ste(t,e){const{account:n,chainId:r,...s}=e,i=n??Ng(t).address,o=t.getClient({chainId:r});return Mi(o,IC,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let OS=!1;async function ZT(t,e={}){var l,u;if(OS)return[];OS=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const y=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:y}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),OS=!1,a}async function Ite(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await $v(t,{account:n??void 0,chainId:r,connector:s}),await Mi(o,Rv,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function Tte(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await $v(t,{account:n,connector:r}),Mi(i,RF,"signMessage")({...s,...n?{account:n}:{}})}class iu extends Cl{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class Nte extends Cl{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function P$(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new Nte({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new pb;return t.setState(a=>({...a,chainId:r})),i}function FF(t,e){const{onChange:n}=e;return t.subscribe(()=>Ng(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return Pf(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function Pte(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function kte(t,e){const{onChange:n}=e;return t.subscribe(()=>Da(t),n,{equalityFn:Pf})}function zF(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function Ote(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=Mi(l,qee,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}async function Rte(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await Mi(i,ete,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await Mi(i,SF,"getTransaction")({hash:a.transactionHash}),d=await Mi(i,_F,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?dj(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function Dte(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await $v(t,{account:n??void 0,chainId:r,connector:s}),await Mi(o,DF,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function j8e(t){return t}NC.type="injected";function NC(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...$te[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:NC.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,y,w,v;const d=await this.getProvider();if(!d)throw new iu;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(y=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:y.map(_=>Ku(_)),h.length>0&&(h=await this.getAccounts())}catch(b){const _=b;if(_.code===ir.code)throw new ir(_);if(_.code===ld.code)throw _}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(x=>Ku(x))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let b=await this.getChainId();if(l&&b!==l){const _=await this.switchChain({chainId:l}).catch(x=>{if(x.code===ir.code)throw x;return{id:b}});b=(_==null?void 0:_.id)??b}return e&&await((w=c.storage)==null?void 0:w.removeItem(`${this.id}.disconnected`)),t.target||await((v=c.storage)==null?void 0:v.setItem("injected.connected",!0)),{accounts:h,chainId:b}}catch(b){const _=b;throw _.code===ir.code?new ir(_):_.code===ld.code?new ld(_):_}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new iu;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await TF(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new iu;return(await l.request({method:"eth_accounts"})).map(d=>Ku(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new iu;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=KE(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(w=>window.addEventListener("ethereum#initialized",()=>w(p()),{once:!0}))]:[],new Promise(w=>setTimeout(()=>w(p()),g))]))return!0}throw new iu}return!!(await Xx(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,y,w;const d=await this.getProvider();if(!d)throw new iu;const h=c.chains.find(v=>v.id===u);if(!h)throw new cc(new pb);const f=new Promise(v=>{const b=_=>{"chainId"in _&&_.chainId===u&&(c.emitter.off("change",b),v())};c.emitter.on("change",b)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:st(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(v){const b=v;if(b.code===4902||((g=(p=b==null?void 0:b.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:_,...x}=h.blockExplorers??{};let C;l!=null&&l.blockExplorerUrls?C=l.blockExplorerUrls:_&&(C=[_.url,...Object.values(x).map(A=>A.url)]);let S;(y=l==null?void 0:l.rpcUrls)!=null&&y.length?S=l.rpcUrls:S=[((w=h.rpcUrls.default)==null?void 0:w.http[0])??""];const N={blockExplorerUrls:C,chainId:st(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:S};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[N]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new ir(new Error("User rejected switch after adding network."))}),f]),h}catch(_){throw new ir(_)}throw b.code===ir.code?new ir(b):new cc(b)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>Ku(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const $te={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:KE(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return KE(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:KE(t,"isPhantom")}}};function KE(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function Ute(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function Bte(){const t=new Set;let e=[];const n=()=>Ute(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const Lte=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},Mte=Lte;function jte(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const XT=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return XT(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return XT(r)(n)}}}},Fte=(t,e)=>(n,r,s)=>{let i={storage:jte(()=>localStorage),partialize:g=>g,version:0,merge:(g,y)=>({...y,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,y)=>{d(g,y),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,y;if(!l)return;o=!1,a.forEach(v=>{var b;return v((b=r())!=null?b:h)});const w=((y=i.onRehydrateStorage)==null?void 0:y.call(i,(g=r())!=null?g:h))||void 0;return XT(l.getItem.bind(l))(i.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==i.version){if(i.migrate)return[!0,i.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var b;const[_,x]=v;if(f=i.merge(x,(b=r())!=null?b:h),n(f,!0),_)return u()}).then(()=>{w==null||w(f,void 0),f=r(),o=!0,c.forEach(v=>v(f))}).catch(v=>{w==null||w(void 0,v)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},zte=Fte,k$=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},RS=t=>t?k$(t):k$;var HF={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var y=this._events[g],w=arguments.length,v,b;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),w){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,h),!0;case 5:return y.fn.call(y.context,u,d,h,f),!0;case 6:return y.fn.call(y.context,u,d,h,f,p),!0}for(b=1,v=new Array(w-1);b<w;b++)v[b-1]=arguments[b];y.fn.apply(y.context,v)}else{var _=y.length,x;for(b=0;b<_;b++)switch(y[b].once&&this.removeListener(l,y[b].fn,void 0,!0),w){case 1:y[b].fn.call(y[b].context);break;case 2:y[b].fn.call(y[b].context,u);break;case 3:y[b].fn.call(y[b].context,u,d);break;case 4:y[b].fn.call(y[b].context,u,d,h);break;default:if(!v)for(x=1,v=new Array(w-1);x<w;x++)v[x-1]=arguments[x];y[b].fn.apply(y[b].context,v)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,y=[],w=p.length;g<w;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&y.push(p[g]);y.length?this._events[f]=y.length===1?y[0]:y:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(HF);var Hte=HF.exports;const Gte=Qf(Hte);class Wte{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new Gte})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function qte(t){return new Wte(t)}function Vte(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function O$(t,e){return t.slice(0,e).join(".")||"."}function R$(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function Kte(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=R$(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=R$(s,c);if(u!==0)return r?e.call(this,a,c,O$(i,u)):`[ref=${O$(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function Qte(t,e,n,r){return JSON.stringify(t,Kte((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function Yte(t){const{deserialize:e=Vte,key:n="wagmi",serialize:r=Qte,storage:s=GF}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const GF={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function Jte(){const t=typeof window<"u"&&window.localStorage?window.localStorage:GF;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const eN=256;let U1=eN,B1;function Zte(t=11){if(!B1||U1+t>eN*2){B1="",U1=0;for(let e=0;e<eN;e++)B1+=(256+Math.random()*256|0).toString(16).substring(1)}return B1.substring(U1,U1+++t)}function Xte(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=Yte({storage:Jte()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?Bte():void 0,a=RS(()=>i.chains),c=RS(()=>{const x=[],C=new Set;for(const S of i.connectors??[]){const N=l(S);if(x.push(N),!s&&N.rdns){const A=typeof N.rdns=="string"?[N.rdns]:N.rdns;for(const P of A)C.add(P)}}if(!s&&o){const S=o.getProviders();for(const N of S)C.has(N.info.rdns)||x.push(l(u(N)))}return x});function l(x){var N;const C=qte(Zte()),S={...x({emitter:C,chains:a.getState(),storage:n,transports:i.transports}),emitter:C,uid:C.uid};return C.on("connect",b),(N=S.setup)==null||N.call(S),S}function u(x){const{info:C}=x,S=x.provider;return NC({target:{...C,id:C.rdns,provider:S}})}const d=new Map;function h(x={}){const C=x.chainId??y.getState().chainId,S=a.getState().find(A=>A.id===C);if(x.chainId&&!S)throw new pb;{const A=d.get(y.getState().chainId);if(A&&!S)return A;if(!S)throw new pb}{const A=d.get(C);if(A)return A}let N;if(i.client)N=i.client({chain:S});else{const A=S.id,P=a.getState().map(H=>H.id),R={},j=Object.entries(i);for(const[H,K]of j)if(!(H==="chains"||H==="client"||H==="connectors"||H==="transports"))if(typeof K=="object")if(A in K)R[H]=K[A];else{if(P.some(I=>I in K))continue;R[H]=K}else R[H]=K;N=LF({...R,chain:S,batch:R.batch??{multicall:!0},transport:H=>i.transports[A]({...H,connectors:c})})}return d.set(C,N),N}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";qE.startsWith(g)?p=Number.parseInt(qE.replace(g,"")):p=Number.parseInt(qE.split(".")[0]??"0");const y=RS(Mte(n?zte(f,{migrate(x,C){if(C===p)return x;const S=f(),N=w(x,S.chainId);return{...S,chainId:N}},name:"store",partialize(x){return{connections:{__type:"Map",value:Array.from(x.connections.entries()).map(([C,S])=>{const{id:N,name:A,type:P,uid:R}=S.connector;return[C,{...S,connector:{id:N,name:A,type:P,uid:R}}]})},chainId:x.chainId,current:x.current}},merge(x,C){typeof x=="object"&&x&&"status"in x&&delete x.status;const S=w(x,C.chainId);return{...C,...x,chainId:S}},skipHydration:s,storage:n,version:p}):f));y.setState(f());function w(x,C){return x&&typeof x=="object"&&"chainId"in x&&typeof x.chainId=="number"&&a.getState().some(S=>S.id===x.chainId)?x.chainId:C}r&&y.subscribe(({connections:x,current:C})=>{var S;return C?(S=x.get(C))==null?void 0:S.chainId:void 0},x=>{if(a.getState().some(S=>S.id===x))return y.setState(S=>({...S,chainId:x??S.chainId}))}),o==null||o.subscribe(x=>{const C=new Set,S=new Set;for(const A of c.getState())if(C.add(A.id),A.rdns){const P=typeof A.rdns=="string"?[A.rdns]:A.rdns;for(const R of P)S.add(R)}const N=[];for(const A of x){if(S.has(A.info.rdns))continue;const P=l(u(A));C.has(P.id)||N.push(P)}n&&!y.persist.hasHydrated()||c.setState(A=>[...A,...N],!0)});function v(x){y.setState(C=>{const S=C.connections.get(x.uid);return S?{...C,connections:new Map(C.connections).set(x.uid,{accounts:x.accounts??S.accounts,chainId:x.chainId??S.chainId,connector:S.connector})}:C})}function b(x){y.getState().status==="connecting"||y.getState().status==="reconnecting"||y.setState(C=>{const S=c.getState().find(N=>N.uid===x.uid);return S?(S.emitter.listenerCount("connect")&&S.emitter.off("connect",v),S.emitter.listenerCount("change")||S.emitter.on("change",v),S.emitter.listenerCount("disconnect")||S.emitter.on("disconnect",_),{...C,connections:new Map(C.connections).set(x.uid,{accounts:x.accounts,chainId:x.chainId,connector:S}),current:x.uid,status:"connected"}):C})}function _(x){y.setState(C=>{const S=C.connections.get(x.uid);if(S){const A=S.connector;A.emitter.listenerCount("change")&&S.connector.emitter.off("change",v),A.emitter.listenerCount("disconnect")&&S.connector.emitter.off("disconnect",_),A.emitter.listenerCount("connect")||S.connector.emitter.on("connect",b)}if(C.connections.delete(x.uid),C.connections.size===0)return{...C,connections:new Map,current:null,status:"disconnected"};const N=C.connections.values().next().value;return{...C,connections:new Map(C.connections),current:N.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return y.getState()},setState(x){let C;typeof x=="function"?C=x(y.getState()):C=x;const S=f();typeof C!="object"&&(C=S),Object.keys(S).some(A=>!(A in C))&&(C=S),y.setState(C,!0)},subscribe(x,C,S){return y.subscribe(x,C,S?{...S,fireImmediately:S.emitImmediately}:void 0)},_internal:{mipd:o,store:y,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(x){const C=typeof x=="function"?x(a.getState()):x;if(C.length!==0)return a.setState(C,!0)},subscribe(x){return a.subscribe(x)}},connectors:{providerDetailToConnector:u,setup:l,setState(x){return c.setState(typeof x=="function"?x(c.getState()):x,!0)},subscribe(x){return c.subscribe(x)}},events:{change:v,connect:b,disconnect:_}}}}function ene(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?ZT(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function tne(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=ene(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=k.useRef(!0);return k.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const WF=k.createContext(void 0);function nne(t){const{children:e,config:n}=t,r={value:n};return k.createElement(tne,t,k.createElement(WF.Provider,r,e))}const rne="2.15.6",sne=()=>`wagmi@${rne}`;let ine=class extends Cl{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return sne()}};class one extends ine{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function Ld(t={}){const e=t.config??k.useContext(WF);if(!e)throw new one;return e}var qF={exports:{}},VF={},KF={exports:{}},QF={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qm=k;function ane(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cne=typeof Object.is=="function"?Object.is:ane,lne=Qm.useState,une=Qm.useEffect,dne=Qm.useLayoutEffect,hne=Qm.useDebugValue;function fne(t,e){var n=e(),r=lne({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return dne(function(){s.value=n,s.getSnapshot=e,DS(s)&&i({inst:s})},[t,n,e]),une(function(){return DS(s)&&i({inst:s}),t(function(){DS(s)&&i({inst:s})})},[t]),hne(n),n}function DS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!cne(t,n)}catch{return!0}}function pne(t,e){return e()}var gne=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?pne:fne;QF.useSyncExternalStore=Qm.useSyncExternalStore!==void 0?Qm.useSyncExternalStore:gne;KF.exports=QF;var mne=KF.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PC=k,yne=mne;function wne(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bne=typeof Object.is=="function"?Object.is:wne,vne=yne.useSyncExternalStore,Ene=PC.useRef,xne=PC.useEffect,_ne=PC.useMemo,Cne=PC.useDebugValue;VF.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=Ene(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=_ne(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,bne(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=vne(t,i[0],i[1]);return xne(function(){o.hasValue=!0,o.value=a},[a]),Cne(a),a};qF.exports=VF;var Ane=qF.exports;const $S=t=>typeof t=="object"&&!Array.isArray(t);function Sne(t,e,n=e,r=Pf){const s=k.useRef([]),i=Ane.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if($S(o)&&$S(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return k.useMemo(()=>{if($S(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function Uv(t={}){const e=Ld(t);return Sne(n=>FF(e,{onChange:n}),()=>Ng(e))}var xy=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},kf=typeof window>"u"||"Deno"in globalThis;function Es(){}function Ine(t,e){return typeof t=="function"?t(e):t}function tN(t){return typeof t=="number"&&t>=0&&t!==1/0}function YF(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ud(t,e){return typeof t=="function"?t(e):t}function Zo(t,e){return typeof t=="function"?t(e):t}function D$(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==JO(o,e.options))return!1}else if(!gb(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function $$(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Of(e.options.mutationKey)!==Of(i))return!1}else if(!gb(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function JO(t,e){return((e==null?void 0:e.queryKeyHashFn)||Of)(t)}function Of(t){return JSON.stringify(t,(e,n)=>nN(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function gb(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>gb(t[n],e[n])):!1}function JF(t,e){if(t===e)return t;const n=U$(t)&&U$(e);if(n||nN(t)&&nN(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=JF(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function t_(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function U$(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function nN(t){if(!B$(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!B$(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function B$(t){return Object.prototype.toString.call(t)==="[object Object]"}function Tne(t){return new Promise(e=>{setTimeout(e,t)})}function rN(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?JF(t,e):e}function Nne(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function Pne(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var ZO=Symbol();function ZF(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===ZO?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function XF(t,e){return typeof t=="function"?t(...e):!!t}var $h,bu,Mg,UB,kne=(UB=class extends xy{constructor(){super();G(this,$h);G(this,bu);G(this,Mg);D(this,Mg,e=>{if(!kf&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){E(this,bu)||this.setEventListener(E(this,Mg))}onUnsubscribe(){var e;this.hasListeners()||((e=E(this,bu))==null||e.call(this),D(this,bu,void 0))}setEventListener(e){var n;D(this,Mg,e),(n=E(this,bu))==null||n.call(this),D(this,bu,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){E(this,$h)!==e&&(D(this,$h,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof E(this,$h)=="boolean"?E(this,$h):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},$h=new WeakMap,bu=new WeakMap,Mg=new WeakMap,UB),XO=new kne,jg,vu,Fg,BB,One=(BB=class extends xy{constructor(){super();G(this,jg,!0);G(this,vu);G(this,Fg);D(this,Fg,e=>{if(!kf&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){E(this,vu)||this.setEventListener(E(this,Fg))}onUnsubscribe(){var e;this.hasListeners()||((e=E(this,vu))==null||e.call(this),D(this,vu,void 0))}setEventListener(e){var n;D(this,Fg,e),(n=E(this,vu))==null||n.call(this),D(this,vu,e(this.setOnline.bind(this)))}setOnline(e){E(this,jg)!==e&&(D(this,jg,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return E(this,jg)}},jg=new WeakMap,vu=new WeakMap,Fg=new WeakMap,BB),n_=new One;function sN(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function Rne(t){return Math.min(1e3*2**t,3e4)}function e9(t){return(t??"online")==="online"?n_.isOnline():!0}var t9=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function US(t){return t instanceof t9}function n9(t){let e=!1,n=0,r=!1,s;const i=sN(),o=g=>{var y;r||(h(new t9(g)),(y=t.abort)==null||y.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>XO.isFocused()&&(t.networkMode==="always"||n_.isOnline())&&t.canRun(),u=()=>e9(t.networkMode)&&t.canRun(),d=g=>{var y;r||(r=!0,(y=t.onSuccess)==null||y.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var y;r||(r=!0,(y=t.onError)==null||y.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var y;s=w=>{(r||l())&&g(w)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const y=n===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(w){g=Promise.reject(w)}Promise.resolve(g).then(d).catch(w=>{var C;if(r)return;const v=t.retry??(kf?0:3),b=t.retryDelay??Rne,_=typeof b=="function"?b(n,w):b,x=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,w);if(e||!x){h(w);return}n++,(C=t.onFail)==null||C.call(t,n,w),Tne(_).then(()=>l()?void 0:f()).then(()=>{e?h(w):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var Dne=t=>setTimeout(t,0);function $ne(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=Dne;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var cr=$ne(),Uh,LB,r9=(LB=class{constructor(){G(this,Uh)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),tN(this.gcTime)&&D(this,Uh,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(kf?1/0:5*60*1e3))}clearGcTimeout(){E(this,Uh)&&(clearTimeout(E(this,Uh)),D(this,Uh,void 0))}},Uh=new WeakMap,LB),zg,Bh,io,Lh,ss,cv,Mh,Fo,Cc,MB,Une=(MB=class extends r9{constructor(e){super();G(this,Fo);G(this,zg);G(this,Bh);G(this,io);G(this,Lh);G(this,ss);G(this,cv);G(this,Mh);D(this,Mh,!1),D(this,cv,e.defaultOptions),this.setOptions(e.options),this.observers=[],D(this,Lh,e.client),D(this,io,E(this,Lh).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,D(this,zg,Bne(this.options)),this.state=e.state??E(this,zg),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=E(this,ss))==null?void 0:e.promise}setOptions(e){this.options={...E(this,cv),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&E(this,io).remove(this)}setData(e,n){const r=rN(this.state.data,e,this.options);return ne(this,Fo,Cc).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){ne(this,Fo,Cc).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=E(this,ss))==null?void 0:r.promise;return(s=E(this,ss))==null||s.cancel(e),n?n.then(Es).catch(Es):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(E(this,zg))}isActive(){return this.observers.some(e=>Zo(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ZO||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>ud(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!YF(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=E(this,ss))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=E(this,ss))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),E(this,io).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(E(this,ss)&&(E(this,Mh)?E(this,ss).cancel({revert:!0}):E(this,ss).cancelRetry()),this.scheduleGc()),E(this,io).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ne(this,Fo,Cc).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(E(this,ss))return E(this,ss).continueRetry(),E(this,ss).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(D(this,Mh,!0),r.signal)})},i=()=>{const h=ZF(this.options,n),p=(()=>{const g={client:E(this,Lh),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return D(this,Mh,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:E(this,Lh),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),D(this,Bh,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&ne(this,Fo,Cc).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,y;US(h)&&h.silent||ne(this,Fo,Cc).call(this,{type:"error",error:h}),US(h)||((p=(f=E(this,io).config).onError)==null||p.call(f,h,this),(y=(g=E(this,io).config).onSettled)==null||y.call(g,this.state.data,h,this)),this.scheduleGc()};return D(this,ss,n9({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,y;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(w){c(w);return}(p=(f=E(this,io).config).onSuccess)==null||p.call(f,h,this),(y=(g=E(this,io).config).onSettled)==null||y.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{ne(this,Fo,Cc).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{ne(this,Fo,Cc).call(this,{type:"pause"})},onContinue:()=>{ne(this,Fo,Cc).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),E(this,ss).start()}},zg=new WeakMap,Bh=new WeakMap,io=new WeakMap,Lh=new WeakMap,ss=new WeakMap,cv=new WeakMap,Mh=new WeakMap,Fo=new WeakSet,Cc=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...s9(r.data,this.options),fetchMeta:e.meta??null};case"success":return D(this,Bh,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return US(s)&&s.revert&&E(this,Bh)?{...E(this,Bh),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),cr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),E(this,io).notify({query:this,type:"updated",action:e})})},MB);function s9(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:e9(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Bne(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var $a,jB,Lne=(jB=class extends xy{constructor(e={}){super();G(this,$a);this.config=e,D(this,$a,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??JO(s,n);let o=this.get(i);return o||(o=new Une({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){E(this,$a).has(e.queryHash)||(E(this,$a).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=E(this,$a).get(e.queryHash);n&&(e.destroy(),n===e&&E(this,$a).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){cr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return E(this,$a).get(e)}getAll(){return[...E(this,$a).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>D$(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>D$(e,r)):n}notify(e){cr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){cr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){cr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},$a=new WeakMap,jB),Ua,gs,jh,Ba,Zl,FB,Mne=(FB=class extends r9{constructor(e){super();G(this,Ba);G(this,Ua);G(this,gs);G(this,jh);this.mutationId=e.mutationId,D(this,gs,e.mutationCache),D(this,Ua,[]),this.state=e.state||i9(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){E(this,Ua).includes(e)||(E(this,Ua).push(e),this.clearGcTimeout(),E(this,gs).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){D(this,Ua,E(this,Ua).filter(n=>n!==e)),this.scheduleGc(),E(this,gs).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){E(this,Ua).length||(this.state.status==="pending"?this.scheduleGc():E(this,gs).remove(this))}continue(){var e;return((e=E(this,jh))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,y,w,v,b,_,x,C,S,N;const n=()=>{ne(this,Ba,Zl).call(this,{type:"continue"})};D(this,jh,n9({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(A,P)=>{ne(this,Ba,Zl).call(this,{type:"failed",failureCount:A,error:P})},onPause:()=>{ne(this,Ba,Zl).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>E(this,gs).canRun(this)}));const r=this.state.status==="pending",s=!E(this,jh).canStart();try{if(r)n();else{ne(this,Ba,Zl).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=E(this,gs).config).onMutate)==null?void 0:o.call(i,e,this));const P=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));P!==this.state.context&&ne(this,Ba,Zl).call(this,{type:"pending",context:P,variables:e,isPaused:s})}const A=await E(this,jh).start();return await((u=(l=E(this,gs).config).onSuccess)==null?void 0:u.call(l,A,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,A,e,this.state.context)),await((p=(f=E(this,gs).config).onSettled)==null?void 0:p.call(f,A,null,this.state.variables,this.state.context,this)),await((y=(g=this.options).onSettled)==null?void 0:y.call(g,A,null,e,this.state.context)),ne(this,Ba,Zl).call(this,{type:"success",data:A}),A}catch(A){try{throw await((v=(w=E(this,gs).config).onError)==null?void 0:v.call(w,A,e,this.state.context,this)),await((_=(b=this.options).onError)==null?void 0:_.call(b,A,e,this.state.context)),await((C=(x=E(this,gs).config).onSettled)==null?void 0:C.call(x,void 0,A,this.state.variables,this.state.context,this)),await((N=(S=this.options).onSettled)==null?void 0:N.call(S,void 0,A,e,this.state.context)),A}finally{ne(this,Ba,Zl).call(this,{type:"error",error:A})}}finally{E(this,gs).runNext(this)}}},Ua=new WeakMap,gs=new WeakMap,jh=new WeakMap,Ba=new WeakSet,Zl=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),cr.batch(()=>{E(this,Ua).forEach(r=>{r.onMutationUpdate(e)}),E(this,gs).notify({mutation:this,type:"updated",action:e})})},FB);function i9(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Bc,zo,lv,zB,jne=(zB=class extends xy{constructor(e={}){super();G(this,Bc);G(this,zo);G(this,lv);this.config=e,D(this,Bc,new Set),D(this,zo,new Map),D(this,lv,0)}build(e,n,r){const s=new Mne({mutationCache:this,mutationId:++Tl(this,lv)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){E(this,Bc).add(e);const n=L1(e);if(typeof n=="string"){const r=E(this,zo).get(n);r?r.push(e):E(this,zo).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(E(this,Bc).delete(e)){const n=L1(e);if(typeof n=="string"){const r=E(this,zo).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&E(this,zo).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=L1(e);if(typeof n=="string"){const r=E(this,zo).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=L1(e);if(typeof n=="string"){const s=(r=E(this,zo).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){cr.batch(()=>{E(this,Bc).forEach(e=>{this.notify({type:"removed",mutation:e})}),E(this,Bc).clear(),E(this,zo).clear()})}getAll(){return Array.from(E(this,Bc))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>$$(n,r))}findAll(e={}){return this.getAll().filter(n=>$$(e,n))}notify(e){cr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return cr.batch(()=>Promise.all(e.map(n=>n.continue().catch(Es))))}},Bc=new WeakMap,zo=new WeakMap,lv=new WeakMap,zB);function L1(t){var e;return(e=t.options.scope)==null?void 0:e.id}function L$(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const y=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},w=ZF(e.options,e.fetchOptions),v=async(b,_,x)=>{if(g)return Promise.reject();if(_==null&&b.pages.length)return Promise.resolve(b);const S=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:_,direction:x?"backward":"forward",meta:e.options.meta};return y(R),R})(),N=await w(S),{maxPages:A}=e.options,P=x?Pne:Nne;return{pages:P(b.pages,N,A),pageParams:P(b.pageParams,_,A)}};if(s&&i.length){const b=s==="backward",_=b?Fne:M$,x={pages:i,pageParams:o},C=_(r,x);a=await v(x,C,b)}else{const b=t??i.length;do{const _=c===0?o[0]??r.initialPageParam:M$(r,a);if(c>0&&_==null)break;a=await v(a,_),c++}while(c<b)}return a};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function M$(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Fne(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Ln,Eu,xu,Hg,Gg,_u,Wg,qg,HB,zne=(HB=class{constructor(t={}){G(this,Ln);G(this,Eu);G(this,xu);G(this,Hg);G(this,Gg);G(this,_u);G(this,Wg);G(this,qg);D(this,Ln,t.queryCache||new Lne),D(this,Eu,t.mutationCache||new jne),D(this,xu,t.defaultOptions||{}),D(this,Hg,new Map),D(this,Gg,new Map),D(this,_u,0)}mount(){Tl(this,_u)._++,E(this,_u)===1&&(D(this,Wg,XO.subscribe(async t=>{t&&(await this.resumePausedMutations(),E(this,Ln).onFocus())})),D(this,qg,n_.subscribe(async t=>{t&&(await this.resumePausedMutations(),E(this,Ln).onOnline())})))}unmount(){var t,e;Tl(this,_u)._--,E(this,_u)===0&&((t=E(this,Wg))==null||t.call(this),D(this,Wg,void 0),(e=E(this,qg))==null||e.call(this),D(this,qg,void 0))}isFetching(t){return E(this,Ln).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return E(this,Eu).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=E(this,Ln).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=E(this,Ln).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(ud(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return E(this,Ln).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=E(this,Ln).get(r.queryHash),i=s==null?void 0:s.state.data,o=Ine(e,i);if(o!==void 0)return E(this,Ln).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return cr.batch(()=>E(this,Ln).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=E(this,Ln).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=E(this,Ln);cr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=E(this,Ln);return cr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=cr.batch(()=>E(this,Ln).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Es).catch(Es)}invalidateQueries(t,e={}){return cr.batch(()=>(E(this,Ln).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=cr.batch(()=>E(this,Ln).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Es)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Es)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=E(this,Ln).build(this,e);return n.isStaleByTime(ud(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Es).catch(Es)}fetchInfiniteQuery(t){return t.behavior=L$(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Es).catch(Es)}ensureInfiniteQueryData(t){return t.behavior=L$(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return n_.isOnline()?E(this,Eu).resumePausedMutations():Promise.resolve()}getQueryCache(){return E(this,Ln)}getMutationCache(){return E(this,Eu)}getDefaultOptions(){return E(this,xu)}setDefaultOptions(t){D(this,xu,t)}setQueryDefaults(t,e){E(this,Hg).set(Of(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...E(this,Hg).values()],n={};return e.forEach(r=>{gb(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){E(this,Gg).set(Of(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...E(this,Gg).values()],n={};return e.forEach(r=>{gb(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...E(this,xu).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=JO(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ZO&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...E(this,xu).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){E(this,Ln).clear(),E(this,Eu).clear()}},Ln=new WeakMap,Eu=new WeakMap,xu=new WeakMap,Hg=new WeakMap,Gg=new WeakMap,_u=new WeakMap,Wg=new WeakMap,qg=new WeakMap,HB),Vs,Ct,uv,ms,Fh,Vg,Cu,Au,dv,Kg,Qg,zh,Hh,Su,Yg,Jt,R0,iN,oN,aN,cN,lN,uN,dN,o9,GB,Hne=(GB=class extends xy{constructor(e,n){super();G(this,Jt);G(this,Vs);G(this,Ct);G(this,uv);G(this,ms);G(this,Fh);G(this,Vg);G(this,Cu);G(this,Au);G(this,dv);G(this,Kg);G(this,Qg);G(this,zh);G(this,Hh);G(this,Su);G(this,Yg,new Set);this.options=n,D(this,Vs,e),D(this,Au,null),D(this,Cu,sN()),this.options.experimental_prefetchInRender||E(this,Cu).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(E(this,Ct).addObserver(this),j$(E(this,Ct),this.options)?ne(this,Jt,R0).call(this):this.updateResult(),ne(this,Jt,cN).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return hN(E(this,Ct),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return hN(E(this,Ct),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ne(this,Jt,lN).call(this),ne(this,Jt,uN).call(this),E(this,Ct).removeObserver(this)}setOptions(e){const n=this.options,r=E(this,Ct);if(this.options=E(this,Vs).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Zo(this.options.enabled,E(this,Ct))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ne(this,Jt,dN).call(this),E(this,Ct).setOptions(this.options),n._defaulted&&!t_(this.options,n)&&E(this,Vs).getQueryCache().notify({type:"observerOptionsUpdated",query:E(this,Ct),observer:this});const s=this.hasListeners();s&&F$(E(this,Ct),r,this.options,n)&&ne(this,Jt,R0).call(this),this.updateResult(),s&&(E(this,Ct)!==r||Zo(this.options.enabled,E(this,Ct))!==Zo(n.enabled,E(this,Ct))||ud(this.options.staleTime,E(this,Ct))!==ud(n.staleTime,E(this,Ct)))&&ne(this,Jt,iN).call(this);const i=ne(this,Jt,oN).call(this);s&&(E(this,Ct)!==r||Zo(this.options.enabled,E(this,Ct))!==Zo(n.enabled,E(this,Ct))||i!==E(this,Su))&&ne(this,Jt,aN).call(this,i)}getOptimisticResult(e){const n=E(this,Vs).getQueryCache().build(E(this,Vs),e),r=this.createResult(n,e);return Wne(this,r)&&(D(this,ms,r),D(this,Vg,this.options),D(this,Fh,E(this,Ct).state)),r}getCurrentResult(){return E(this,ms)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){E(this,Yg).add(e)}getCurrentQuery(){return E(this,Ct)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=E(this,Vs).defaultQueryOptions(e),r=E(this,Vs).getQueryCache().build(E(this,Vs),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return ne(this,Jt,R0).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),E(this,ms)))}createResult(e,n){var A;const r=E(this,Ct),s=this.options,i=E(this,ms),o=E(this,Fh),a=E(this,Vg),l=e!==r?e.state:E(this,uv),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const P=this.hasListeners(),R=!P&&j$(e,n),j=P&&F$(e,r,n,s);(R||j)&&(d={...d,...s9(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:y}=d;f=d.data;let w=!1;if(n.placeholderData!==void 0&&f===void 0&&y==="pending"){let P;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(P=i.data,w=!0):P=typeof n.placeholderData=="function"?n.placeholderData((A=E(this,Qg))==null?void 0:A.state.data,E(this,Qg)):n.placeholderData,P!==void 0&&(y="success",f=rN(i==null?void 0:i.data,P,n),h=!0)}if(n.select&&f!==void 0&&!w)if(i&&f===(o==null?void 0:o.data)&&n.select===E(this,dv))f=E(this,Kg);else try{D(this,dv,n.select),f=n.select(f),f=rN(i==null?void 0:i.data,f,n),D(this,Kg,f),D(this,Au,null)}catch(P){D(this,Au,P)}E(this,Au)&&(p=E(this,Au),f=E(this,Kg),g=Date.now(),y="error");const v=d.fetchStatus==="fetching",b=y==="pending",_=y==="error",x=b&&v,C=f!==void 0,N={status:y,fetchStatus:d.fetchStatus,isPending:b,isSuccess:y==="success",isError:_,isInitialLoading:x,isLoading:x,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:v,isRefetching:v&&!b,isLoadingError:_&&!C,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:_&&C,isStale:eR(e,n),refetch:this.refetch,promise:E(this,Cu)};if(this.options.experimental_prefetchInRender){const P=H=>{N.status==="error"?H.reject(N.error):N.data!==void 0&&H.resolve(N.data)},R=()=>{const H=D(this,Cu,N.promise=sN());P(H)},j=E(this,Cu);switch(j.status){case"pending":e.queryHash===r.queryHash&&P(j);break;case"fulfilled":(N.status==="error"||N.data!==j.value)&&R();break;case"rejected":(N.status!=="error"||N.error!==j.reason)&&R();break}}return N}updateResult(){const e=E(this,ms),n=this.createResult(E(this,Ct),this.options);if(D(this,Fh,E(this,Ct).state),D(this,Vg,this.options),E(this,Fh).data!==void 0&&D(this,Qg,E(this,Ct)),t_(n,e))return;D(this,ms,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!E(this,Yg).size)return!0;const o=new Set(i??E(this,Yg));return this.options.throwOnError&&o.add("error"),Object.keys(E(this,ms)).some(a=>{const c=a;return E(this,ms)[c]!==e[c]&&o.has(c)})};ne(this,Jt,o9).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ne(this,Jt,cN).call(this)}},Vs=new WeakMap,Ct=new WeakMap,uv=new WeakMap,ms=new WeakMap,Fh=new WeakMap,Vg=new WeakMap,Cu=new WeakMap,Au=new WeakMap,dv=new WeakMap,Kg=new WeakMap,Qg=new WeakMap,zh=new WeakMap,Hh=new WeakMap,Su=new WeakMap,Yg=new WeakMap,Jt=new WeakSet,R0=function(e){ne(this,Jt,dN).call(this);let n=E(this,Ct).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Es)),n},iN=function(){ne(this,Jt,lN).call(this);const e=ud(this.options.staleTime,E(this,Ct));if(kf||E(this,ms).isStale||!tN(e))return;const r=YF(E(this,ms).dataUpdatedAt,e)+1;D(this,zh,setTimeout(()=>{E(this,ms).isStale||this.updateResult()},r))},oN=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(E(this,Ct)):this.options.refetchInterval)??!1},aN=function(e){ne(this,Jt,uN).call(this),D(this,Su,e),!(kf||Zo(this.options.enabled,E(this,Ct))===!1||!tN(E(this,Su))||E(this,Su)===0)&&D(this,Hh,setInterval(()=>{(this.options.refetchIntervalInBackground||XO.isFocused())&&ne(this,Jt,R0).call(this)},E(this,Su)))},cN=function(){ne(this,Jt,iN).call(this),ne(this,Jt,aN).call(this,ne(this,Jt,oN).call(this))},lN=function(){E(this,zh)&&(clearTimeout(E(this,zh)),D(this,zh,void 0))},uN=function(){E(this,Hh)&&(clearInterval(E(this,Hh)),D(this,Hh,void 0))},dN=function(){const e=E(this,Vs).getQueryCache().build(E(this,Vs),this.options);if(e===E(this,Ct))return;const n=E(this,Ct);D(this,Ct,e),D(this,uv,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},o9=function(e){cr.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(E(this,ms))}),E(this,Vs).getQueryCache().notify({query:E(this,Ct),type:"observerResultsUpdated"})})},GB);function Gne(t,e){return Zo(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function j$(t,e){return Gne(t,e)||t.state.data!==void 0&&hN(t,e,e.refetchOnMount)}function hN(t,e,n){if(Zo(e.enabled,t)!==!1&&ud(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&eR(t,e)}return!1}function F$(t,e,n,r){return(t!==e||Zo(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&eR(t,n)}function eR(t,e){return Zo(e.enabled,t)!==!1&&t.isStaleByTime(ud(e.staleTime,t))}function Wne(t,e){return!t_(t.getCurrentResult(),e)}var Iu,Tu,Ks,Lc,ul,QE,fN,WB,qne=(WB=class extends xy{constructor(n,r){super();G(this,ul);G(this,Iu);G(this,Tu);G(this,Ks);G(this,Lc);D(this,Iu,n),this.setOptions(r),this.bindMethods(),ne(this,ul,QE).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=E(this,Iu).defaultMutationOptions(n),t_(this.options,r)||E(this,Iu).getMutationCache().notify({type:"observerOptionsUpdated",mutation:E(this,Ks),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Of(r.mutationKey)!==Of(this.options.mutationKey)?this.reset():((s=E(this,Ks))==null?void 0:s.state.status)==="pending"&&E(this,Ks).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=E(this,Ks))==null||n.removeObserver(this)}onMutationUpdate(n){ne(this,ul,QE).call(this),ne(this,ul,fN).call(this,n)}getCurrentResult(){return E(this,Tu)}reset(){var n;(n=E(this,Ks))==null||n.removeObserver(this),D(this,Ks,void 0),ne(this,ul,QE).call(this),ne(this,ul,fN).call(this)}mutate(n,r){var s;return D(this,Lc,r),(s=E(this,Ks))==null||s.removeObserver(this),D(this,Ks,E(this,Iu).getMutationCache().build(E(this,Iu),this.options)),E(this,Ks).addObserver(this),E(this,Ks).execute(n)}},Iu=new WeakMap,Tu=new WeakMap,Ks=new WeakMap,Lc=new WeakMap,ul=new WeakSet,QE=function(){var r;const n=((r=E(this,Ks))==null?void 0:r.state)??i9();D(this,Tu,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},fN=function(n){cr.batch(()=>{var r,s,i,o,a,c,l,u;if(E(this,Lc)&&this.hasListeners()){const d=E(this,Tu).variables,h=E(this,Tu).context;(n==null?void 0:n.type)==="success"?((s=(r=E(this,Lc)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=E(this,Lc)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=E(this,Lc)).onError)==null||c.call(a,n.error,d,h),(u=(l=E(this,Lc)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(E(this,Tu))})})},WB);function Vne(t){return JSON.stringify(t,(e,n)=>Kne(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function Kne(t){if(!z$(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!z$(n)||!n.hasOwnProperty("isPrototypeOf"))}function z$(t){return Object.prototype.toString.call(t)==="[object Object]"}function a9(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:y,getNextPageParam:w,initialPageParam:v,_optimisticResults:b,enabled:_,notifyOnChangeProps:x,placeholderData:C,refetchInterval:S,refetchIntervalInBackground:N,refetchOnMount:A,refetchOnReconnect:P,refetchOnWindowFocus:R,retryOnMount:j,select:H,staleTime:K,suspense:T,throwOnError:I,config:L,connector:U,query:$,...M}=t;return M}function Qne(t){return{mutationFn(e){return VE(t,e)},mutationKey:["connect"]}}function Yne(t){return{mutationFn(e){return MF(t,e)},mutationKey:["disconnect"]}}function Jne(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return Cte(t,{...i,address:r})},queryKey:Zne(e)}}function Zne(t={}){return["ensName",a9(t)]}function Xne(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return Ate(t,{...o,connector:r})},queryKey:ere(e)}}function ere(t={}){const{connector:e,...n}=t;return["walletClient",{...a9(n),connectorUid:e==null?void 0:e.uid}]}var c9=k.createContext(void 0),tR=t=>{const e=k.useContext(c9);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},tre=({client:t,children:e})=>(k.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(c9.Provider,{value:t,children:e})),l9=k.createContext(!1),nre=()=>k.useContext(l9);l9.Provider;function rre(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var sre=k.createContext(rre()),ire=()=>k.useContext(sre),ore=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},are=t=>{k.useEffect(()=>{t.clearReset()},[t])},cre=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||XF(n,[t.error,r])),lre=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},ure=(t,e)=>t.isLoading&&t.isFetching&&!e,dre=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,H$=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function hre(t,e,n){var d,h,f,p,g;const r=nre(),s=ire(),i=tR(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",lre(o),ore(o,s),are(s);const a=!i.getQueryCache().get(o.queryHash),[c]=k.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(k.useSyncExternalStore(k.useCallback(y=>{const w=u?c.subscribe(cr.batchCalls(y)):Es;return c.updateResult(),w},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),k.useEffect(()=>{c.setOptions(o)},[o,c]),dre(o,l))throw H$(o,c,s);if(cre({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!kf&&ure(l,r)){const y=a?H$(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;y==null||y.catch(Es).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function fre(t,e){return hre(t,Hne)}function u9(t,e){const n=tR(),[r]=k.useState(()=>new qne(n,t));k.useEffect(()=>{r.setOptions(t)},[r,t]);const s=k.useSyncExternalStore(k.useCallback(o=>r.subscribe(cr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=k.useCallback((o,a)=>{r.mutate(o,a).catch(Es)},[r]);if(s.error&&XF(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function d9(t){const e=fre({...t,queryKeyHashFn:Vne});return e.queryKey=t.queryKey,e}function h9(t={}){const e=Ld(t);return k.useSyncExternalStore(n=>Pte(e,{onChange:n}),()=>T$(e),()=>T$(e))}function pre(t={}){const e=Ld(t);return k.useSyncExternalStore(n=>zF(e,{onChange:n}),()=>N$(e),()=>N$(e))}function f9(t={}){const{mutation:e}=t,n=Ld(t),r=Qne(n),{mutate:s,mutateAsync:i,...o}=u9({...e,...r});return k.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:pre({config:n})}}function gre(t={}){const e=Ld(t);return k.useSyncExternalStore(n=>kte(e,{onChange:n}),()=>Da(e),()=>Da(e))}function p9(t={}){const{mutation:e}=t,n=Ld(t),r=Yne(n),{mutate:s,mutateAsync:i,...o}=u9({...e,...r});return{...o,connectors:gre({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function g9(t={}){const{address:e,query:n={}}=t,r=Ld(t),s=h9({config:r}),i=Jne(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return d9({...n,...i,enabled:o})}function m9(t={}){const{query:e={},...n}=t,r=Ld(n),s=tR(),{address:i,connector:o,status:a}=Uv({config:r}),c=h9({config:r}),l=t.connector??o,{queryKey:u,...d}=Xne(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=k.useRef(i);return k.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),d9({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}const mre="_verified_lvyh0_1",nR={verified:mre},yre=()=>m.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:nR.verified,children:m.jsx("g",{children:m.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),wre=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:nR.verified,children:m.jsxs("g",{children:[m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[m.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),m.jsx("stop",{offset:".539",stopColor:"#cd8105"}),m.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),m.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),m.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[m.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),m.jsx("stop",{offset:".406",stopColor:"#e2b719"}),m.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),m.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[m.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),m.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),m.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),bre=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:nR.verified,children:m.jsx("g",{children:m.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function y9(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=y9(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function dd(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=y9(t))&&(r&&(r+=" "),r+=e);return r}const vre="_root_98iqw_1",Ere="_article_98iqw_21",G$={root:vre,article:Ere},rR=({className:t,children:e})=>m.jsx("div",{className:dd("react-tweet-theme",G$.root,t),children:m.jsx("article",{className:G$.article,children:e})}),w9=t=>m.jsx("img",{...t}),xre="_header_nqq4j_1",_re="_avatar_nqq4j_11",Cre="_avatarOverflow_nqq4j_16",Are="_avatarSquare_nqq4j_23",Sre="_avatarShadow_nqq4j_26",Ire="_author_nqq4j_37",Tre="_authorLink_nqq4j_44",Nre="_authorVerified_nqq4j_53",Pre="_authorLinkText_nqq4j_56",kre="_authorMeta_nqq4j_63",Ore="_authorFollow_nqq4j_66",Rre="_username_nqq4j_69",Dre="_follow_nqq4j_74",$re="_separator_nqq4j_82",Ure="_brand_nqq4j_86",Bre="_twitterIcon_nqq4j_90",Ir={header:xre,avatar:_re,avatarOverflow:Cre,avatarSquare:Are,avatarShadow:Sre,author:Ire,authorLink:Tre,authorVerified:Nre,authorLinkText:Pre,authorMeta:kre,authorFollow:Ore,username:Rre,follow:Dre,separator:$re,brand:Ure,twitterIcon:Bre},Lre="_verifiedOld_lcna5_1",Mre="_verifiedBlue_lcna5_4",jre="_verifiedGovernment_lcna5_7",BS={verifiedOld:Lre,verifiedBlue:Mre,verifiedGovernment:jre},b9=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=m.jsx(yre,{}),s=BS.verifiedBlue;if(n)switch(t.is_blue_verified||(s=BS.verifiedOld),t.verified_type){case"Government":r=m.jsx(bre,{}),s=BS.verifiedGovernment;break;case"Business":r=m.jsx(wre,{}),s=null;break}return n?m.jsx("div",{className:dd(e,s),children:r}):null},Fre=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:w9,{user:s}=t;return m.jsxs("div",{className:Ir.header,children:[m.jsxs("a",{href:t.url,className:Ir.avatar,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:dd(Ir.avatarOverflow,s.profile_image_shape==="Square"&&Ir.avatarSquare),children:m.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),m.jsx("div",{className:Ir.avatarOverflow,children:m.jsx("div",{className:Ir.avatarShadow})})]}),m.jsxs("div",{className:Ir.author,children:[m.jsxs("a",{href:t.url,className:Ir.authorLink,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:Ir.authorLinkText,children:m.jsx("span",{title:s.name,children:s.name})}),m.jsx(b9,{user:s,className:Ir.authorVerified})]}),m.jsxs("div",{className:Ir.authorMeta,children:[m.jsx("a",{href:t.url,className:Ir.username,target:"_blank",rel:"noopener noreferrer",children:m.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),m.jsxs("div",{className:Ir.authorFollow,children:[m.jsx("span",{className:Ir.separator,children:"·"}),m.jsx("a",{href:s.follow_url,className:Ir.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),m.jsx("a",{href:t.url,className:Ir.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:Ir.twitterIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},zre="_root_1ec15_1",Hre={root:zre},Gre=({tweet:t})=>m.jsxs("a",{href:t.in_reply_to_url,className:Hre.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),Wre="_root_eihfa_1",qre={root:Wre},Vre=({href:t,children:e})=>m.jsx("a",{href:t,className:qre.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),Kre="_root_1xq52_1",Qre={root:Kre},Yre=({tweet:t})=>m.jsx("p",{className:Qre.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return m.jsx(Vre,{href:e.href,children:e.text},n);case"media":return;default:return m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),W$=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,v9=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,Jre=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,Zre=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,Xre=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,ese=t=>`https://x.com/hashtag/${t.text}`,tse=t=>`https://x.com/search?q=%24${t.text}`,nse=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,E9=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},rse=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},sse=t=>{const e=rse(t);return e.length>1?e[1]:e[0]},pN=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function q$(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return n0(n,"hashtag",t.entities.hashtags),n0(n,"mention",t.entities.user_mentions),n0(n,"url",t.entities.urls),n0(n,"symbol",t.entities.symbols),t.entities.media&&n0(n,"media",t.entities.media),ise(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:ese(r),text:s});case"mention":return Object.assign(r,{href:v9(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:tse(r),text:s});default:return Object.assign(r,{text:s})}})}function n0(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function ise(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const ose=t=>({...t,url:W$(t),user:{...t.user,url:v9(t),follow_url:Xre(t)},like_url:Jre(t),reply_url:Zre(t),in_reply_to_url:t.in_reply_to_screen_name?nse(t):void 0,entities:q$(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:W$(t.quoted_tweet),entities:q$(t.quoted_tweet)}:void 0}),ase="_root_g9tkv_1",cse="_rounded_g9tkv_6",lse="_mediaWrapper_g9tkv_10",use="_grid2Columns_g9tkv_17",dse="_grid3_g9tkv_20",hse="_grid2x2_g9tkv_23",fse="_mediaContainer_g9tkv_26",pse="_mediaLink_g9tkv_34",gse="_skeleton_g9tkv_38",mse="_image_g9tkv_43",xi={root:ase,rounded:cse,mediaWrapper:lse,grid2Columns:use,grid3:dse,grid2x2:hse,mediaContainer:fse,mediaLink:pse,skeleton:gse,image:mse},yse="_anchor_fp31d_1",wse="_videoButton_fp31d_17",bse="_videoButtonIcon_fp31d_35",vse="_watchOnTwitter_fp31d_44",Ese="_viewReplies_fp31d_60",gp={anchor:yse,videoButton:wse,videoButtonIcon:bse,watchOnTwitter:vse,viewReplies:Ese},xse=({tweet:t,media:e})=>{const[n,r]=k.useState(!0),[s,i]=k.useState(!1),[o,a]=k.useState(!1),c=sse(e);let l=0;return m.jsxs(m.Fragment,{children:[m.jsx("video",{className:xi.image,poster:E9(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:m.jsx("source",{src:c.url,type:c.content_type})}),n&&m.jsx("button",{type:"button",className:gp.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:m.jsx("svg",{viewBox:"0 0 24 24",className:gp.videoButtonIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&m.jsx("div",{className:gp.watchOnTwitter,children:m.jsx("a",{href:t.url,className:gp.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&m.jsx("a",{href:t.url,className:dd(gp.anchor,gp.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},_se=t=>m.jsx("img",{...t}),V$=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},x9=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:_se;return m.jsx("div",{className:dd(xi.root,!n&&xi.rounded),children:m.jsx("div",{className:dd(xi.mediaWrapper,o>1&&xi.grid2Columns,o===3&&xi.grid3,o>4&&xi.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>m.jsx(k.Fragment,{children:l.type==="photo"?m.jsxs("a",{href:t.url,className:dd(xi.mediaContainer,xi.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:xi.skeleton,style:V$(l,o)}),m.jsx(c,{src:E9(l,"small"),alt:l.ext_alt_text||"Image",className:xi.image,draggable:!0})]},l.media_url_https):m.jsxs("div",{className:xi.mediaContainer,children:[m.jsx("div",{className:xi.skeleton,style:V$(l,o)}),m.jsx(xse,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},Cse={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},Ase=new Intl.DateTimeFormat("en-US",Cse),Sse=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},Ise=t=>{const e=Sse(Ase.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n} · ${r}`},Tse="_root_i24yn_1",Nse={root:Tse},Pse=({tweet:t})=>{const e=new Date(t.created_at),n=Ise(e);return m.jsx("a",{className:Nse.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:m.jsx("time",{dateTime:e.toISOString(),children:n})})},kse="_info_19qcj_1",Ose="_infoLink_19qcj_10",Rse="_infoIcon_19qcj_30",LS={info:kse,infoLink:Ose,infoIcon:Rse},Dse=({tweet:t})=>m.jsxs("div",{className:LS.info,children:[m.jsx(Pse,{tweet:t}),m.jsx("a",{className:LS.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:LS.infoIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),$se="_actions_n2anf_1",Use="_like_n2anf_13",Bse="_reply_n2anf_14",Lse="_copy_n2anf_15",Mse="_likeIconWrapper_n2anf_27",jse="_likeCount_n2anf_30",Fse="_replyIconWrapper_n2anf_35",zse="_copyIconWrapper_n2anf_36",Hse="_likeIcon_n2anf_27",Gse="_replyIcon_n2anf_35",Wse="_copyIcon_n2anf_36",qse="_replyText_n2anf_56",Vse="_copyText_n2anf_57",Js={actions:$se,like:Use,reply:Bse,copy:Lse,likeIconWrapper:Mse,likeCount:jse,replyIconWrapper:Fse,copyIconWrapper:zse,likeIcon:Hse,replyIcon:Gse,copyIcon:Wse,replyText:qse,copyText:Vse},Kse=({tweet:t})=>{const[e,n]=k.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return k.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),m.jsxs("button",{type:"button",className:Js.copy,"aria-label":"Copy link",onClick:r,children:[m.jsx("div",{className:Js.copyIconWrapper,children:e?m.jsx("svg",{viewBox:"0 0 24 24",className:Js.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):m.jsx("svg",{viewBox:"0 0 24 24",className:Js.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),m.jsx("span",{className:Js.copyText,children:e?"Copied!":"Copy link"})]})},Qse=({tweet:t})=>{const e=pN(t.favorite_count);return m.jsxs("div",{className:Js.actions,children:[m.jsxs("a",{className:Js.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[m.jsx("div",{className:Js.likeIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:Js.likeIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),m.jsx("span",{className:Js.likeCount,children:e})]}),m.jsxs("a",{className:Js.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[m.jsx("div",{className:Js.replyIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:Js.replyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),m.jsx("span",{className:Js.replyText,children:"Reply"})]}),m.jsx(Kse,{tweet:t})]})},Yse="_replies_1cutb_1",Jse="_link_1cutb_4",Zse="_text_1cutb_23",MS={replies:Yse,link:Jse,text:Zse},Xse=({tweet:t})=>m.jsx("div",{className:MS.replies,children:m.jsx("a",{className:MS.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:m.jsx("span",{className:MS.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${pN(t.conversation_count)} reply`:`Read ${pN(t.conversation_count)} replies`})})}),eie="_root_q5799_1",tie="_article_q5799_16",K$={root:eie,article:tie},nie=({tweet:t,children:e})=>m.jsx("div",{className:K$.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:m.jsx("article",{className:K$.article,children:e})}),rie="_header_r31i5_1",sie="_avatar_r31i5_11",iie="_avatarSquare_r31i5_17",oie="_author_r31i5_21",aie="_authorText_r31i5_26",cie="_username_r31i5_33",qd={header:rie,avatar:sie,avatarSquare:iie,author:oie,authorText:aie,username:cie},lie=({tweet:t})=>{const{user:e}=t;return m.jsxs("div",{className:qd.header,children:[m.jsx("a",{href:t.url,className:qd.avatar,target:"_blank",rel:"noopener noreferrer",children:m.jsx("div",{className:dd(qd.avatarOverflow,e.profile_image_shape==="Square"&&qd.avatarSquare),children:m.jsx(w9,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),m.jsxs("div",{className:qd.author,children:[m.jsx("div",{className:qd.authorText,children:m.jsx("span",{title:e.name,children:e.name})}),m.jsx(b9,{user:e}),m.jsx("div",{className:qd.username,children:m.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},uie="_root_175ot_1",die={root:uie},hie=({tweet:t})=>m.jsx("p",{className:die.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),fie=({tweet:t})=>{var e;return m.jsxs(nie,{tweet:t,children:[m.jsx(lie,{tweet:t}),m.jsx(hie,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?m.jsx(x9,{quoted:!0,tweet:t}):null]})},pie=({tweet:t,components:e})=>{var n;const r=k.useMemo(()=>ose(t),[t]);return m.jsxs(rR,{children:[m.jsx(Fre,{tweet:r,components:e}),r.in_reply_to_status_id_str&&m.jsx(Gre,{tweet:r}),m.jsx(Yre,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?m.jsx(x9,{tweet:r,components:e}):null,r.quoted_tweet&&m.jsx(fie,{tweet:r.quoted_tweet}),m.jsx(Dse,{tweet:r}),m.jsx(Qse,{tweet:r}),m.jsx(Xse,{tweet:r})]})},gie="_root_16yxa_1",mie={root:gie},yie=t=>m.jsx(rR,{children:m.jsxs("div",{className:mie.root,children:[m.jsx("h3",{children:"Tweet not found"}),m.jsx("p",{children:"The embedded tweet could not be found…"})]})}),wie="_skeleton_oi7hr_1",bie={skeleton:wie},M1=({style:t})=>m.jsx("span",{className:bie.skeleton,style:t}),vie="_root_17qqv_1",Eie={root:vie},xie=()=>m.jsxs(rR,{className:Eie.root,children:[m.jsx(M1,{style:{height:"3rem",marginBottom:"0.75rem"}}),m.jsx(M1,{style:{height:"6rem",margin:"0.5rem 0"}}),m.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),m.jsx(M1,{style:{height:"2rem"}}),m.jsx(M1,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]});var _9={exports:{}},C9={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ym=k;function _ie(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Cie=typeof Object.is=="function"?Object.is:_ie,Aie=Ym.useState,Sie=Ym.useEffect,Iie=Ym.useLayoutEffect,Tie=Ym.useDebugValue;function Nie(t,e){var n=e(),r=Aie({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Iie(function(){s.value=n,s.getSnapshot=e,jS(s)&&i({inst:s})},[t,n,e]),Sie(function(){return jS(s)&&i({inst:s}),t(function(){jS(s)&&i({inst:s})})},[t]),Tie(n),n}function jS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Cie(t,n)}catch{return!0}}function Pie(t,e){return e()}var kie=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Pie:Nie;C9.useSyncExternalStore=Ym.useSyncExternalStore!==void 0?Ym.useSyncExternalStore:kie;_9.exports=C9;var Oie=_9.exports;const A9=0,S9=1,I9=2,Q$=3;var Y$=Object.prototype.hasOwnProperty;function gN(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&gN(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(Y$.call(t,n)&&++r&&!Y$.call(e,n)||!(n in e)||!gN(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const Yc=new WeakMap,Qu=()=>{},xs=Qu(),mN=Object,Ot=t=>t===xs,Qa=t=>typeof t=="function",Cd=(t,e)=>({...t,...e}),T9=t=>Qa(t.then),FS={},j1={},sR="undefined",Bv=typeof window!=sR,yN=typeof document!=sR,Rie=Bv&&"Deno"in window,Die=()=>Bv&&typeof window.requestAnimationFrame!=sR,N9=(t,e)=>{const n=Yc.get(t);return[()=>!Ot(e)&&t.get(e)||FS,r=>{if(!Ot(e)){const s=t.get(e);e in j1||(j1[e]=s),n[5](e,Cd(s,r),s||FS)}},n[6],()=>!Ot(e)&&e in j1?j1[e]:!Ot(e)&&t.get(e)||FS]};let wN=!0;const $ie=()=>wN,[bN,vN]=Bv&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Qu,Qu],Uie=()=>{const t=yN&&document.visibilityState;return Ot(t)||t!=="hidden"},Bie=t=>(yN&&document.addEventListener("visibilitychange",t),bN("focus",t),()=>{yN&&document.removeEventListener("visibilitychange",t),vN("focus",t)}),Lie=t=>{const e=()=>{wN=!0,t()},n=()=>{wN=!1};return bN("online",e),bN("offline",n),()=>{vN("online",e),vN("offline",n)}},Mie={isOnline:$ie,isVisible:Uie},jie={initFocus:Bie,initReconnect:Lie},J$=!Bi.useId,mb=!Bv||Rie,Fie=t=>Die()?window.requestAnimationFrame(t):setTimeout(t,1),zS=mb?k.useEffect:k.useLayoutEffect,HS=typeof navigator<"u"&&navigator.connection,Z$=!mb&&HS&&(["slow-2g","2g"].includes(HS.effectiveType)||HS.saveData),F1=new WeakMap,GS=(t,e)=>mN.prototype.toString.call(t)===`[object ${e}]`;let zie=0;const EN=t=>{const e=typeof t,n=GS(t,"Date"),r=GS(t,"RegExp"),s=GS(t,"Object");let i,o;if(mN(t)===t&&!n&&!r){if(i=F1.get(t),i)return i;if(i=++zie+"~",F1.set(t,i),Array.isArray(t)){for(i="@",o=0;o<t.length;o++)i+=EN(t[o])+",";F1.set(t,i)}if(s){i="#";const a=mN.keys(t).sort();for(;!Ot(o=a.pop());)Ot(t[o])||(i+=o+":"+EN(t[o])+",");F1.set(t,i)}}else i=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return i},iR=t=>{if(Qa(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?EN(t):"",[t,e]};let Hie=0;const xN=()=>++Hie;async function P9(...t){const[e,n,r,s]=t,i=Cd({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(Qa(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=iR(h);if(!f)return;const[p,g]=N9(e,f),[y,w,v,b]=Yc.get(e),_=()=>{const H=y[f];return(Qa(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete v[f],delete b[f],H&&H[0])?H[0](I9).then(()=>p().data):p().data};if(t.length<3)return _();let x=r,C;const S=xN();w[f]=[S,0];const N=!Ot(c),A=p(),P=A.data,R=A._c,j=Ot(R)?P:R;if(N&&(c=Qa(c)?c(j,P):c,g({data:c,_c:j})),Qa(x))try{x=x(j)}catch(H){C=H}if(x&&T9(x))if(x=await x.catch(H=>{C=H}),S!==w[f][0]){if(C)throw C;return x}else C&&N&&l(C)&&(o=!0,g({data:j,_c:xs}));if(o&&!C)if(Qa(o)){const H=o(x,j);g({data:H,error:xs,_c:xs})}else g({data:x,error:xs,_c:xs});if(w[f][1]=xN(),Promise.resolve(_()).then(()=>{g({_c:xs})}),C){if(u)throw C;return}return x}}const X$=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},Gie=(t,e)=>{if(!Yc.has(t)){const n=Cd(jie,e),r=Object.create(null),s=P9.bind(xs,t);let i=Qu;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!Yc.has(t)&&(Yc.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!mb)){const u=n.initFocus(setTimeout.bind(xs,X$.bind(xs,r,A9))),d=n.initReconnect(setTimeout.bind(xs,X$.bind(xs,r,S9)));i=()=>{u&&u(),d&&d(),Yc.delete(t)}}};return l(),[t,s,l,i]}return[t,Yc.get(t)[4]]},Wie=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!Ot(i)&&o>i||setTimeout(r,a,s)},qie=gN,[k9,Vie]=Gie(new Map),Kie=Cd({onLoadingSlow:Qu,onSuccess:Qu,onError:Qu,onErrorRetry:Wie,onDiscarded:Qu,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Z$?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Z$?5e3:3e3,compare:qie,isPaused:()=>!1,cache:k9,mutate:Vie,fallback:{}},Mie),Qie=(t,e)=>{const n=Cd(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=Cd(s,o))}return n},Yie=k.createContext({}),Jie="$inf$",O9=Bv&&window.__SWR_DEVTOOLS_USE__,Zie=O9?window.__SWR_DEVTOOLS_USE__:[],Xie=()=>{O9&&(window.__SWR_DEVTOOLS_REACT__=Bi)},eoe=t=>Qa(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],toe=()=>Cd(Kie,k.useContext(Yie)),noe=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=iR(e),[,,,a]=Yc.get(k9);if(o.startsWith(Jie))return n(...i);const c=a[o];return Ot(c)?n(...i):(delete a[o],c)}),r),roe=Zie.concat(noe),soe=t=>function(...n){const r=toe(),[s,i,o]=eoe(n),a=Qie(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(roe);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},ioe=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};Xie();const WS=Bi.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),qS={dedupe:!0},ooe=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,y]=Yc.get(r),[w,v]=iR(t),b=k.useRef(!1),_=k.useRef(!1),x=k.useRef(w),C=k.useRef(e),S=k.useRef(n),N=()=>S.current,A=()=>N().isVisible()&&N().isOnline(),[P,R,j,H]=N9(r,w),K=k.useRef({}).current,T=Ot(o)?Ot(n.fallback)?xs:n.fallback[w]:o,I=(ve,Se)=>{for(const De in K){const tt=De;if(tt==="data"){if(!s(ve[tt],Se[tt])&&(!Ot(ve[tt])||!s(le,Se[tt])))return!1}else if(Se[tt]!==ve[tt])return!1}return!0},L=k.useMemo(()=>{const ve=!w||!e?!1:Ot(a)?N().isPaused()||i?!1:c!==!1:a,Se=Dt=>{const vn=Cd(Dt);return delete vn._k,ve?{isValidating:!0,isLoading:!0,...vn}:vn},De=P(),tt=H(),Gt=Se(De),It=De===tt?Gt:Se(tt);let Tt=Gt;return[()=>{const Dt=Se(P());return I(Dt,Tt)?(Tt.data=Dt.data,Tt.isLoading=Dt.isLoading,Tt.isValidating=Dt.isValidating,Tt.error=Dt.error,Tt):(Tt=Dt,Dt)},()=>It]},[r,w]),U=Oie.useSyncExternalStore(k.useCallback(ve=>j(w,(Se,De)=>{I(De,Se)||ve()}),[r,w]),L[0],L[1]),$=!b.current,M=f[w]&&f[w].length>0,q=U.data,ee=Ot(q)?T&&T9(T)?WS(T):T:q,ce=U.error,se=k.useRef(ee),le=h?Ot(q)?Ot(se.current)?ee:se.current:q:ee,me=M&&!Ot(ce)?!1:$&&!Ot(a)?a:N().isPaused()?!1:i?Ot(ee)?!1:c:Ot(ee)||c,Z=!!(w&&e&&$&&me),re=Ot(U.isValidating)?Z:U.isValidating,ae=Ot(U.isLoading)?Z:U.isLoading,oe=k.useCallback(async ve=>{const Se=C.current;if(!w||!Se||_.current||N().isPaused())return!1;let De,tt,Gt=!0;const It=ve||{},Tt=!g[w]||!It.dedupe,Dt=()=>J$?!_.current&&w===x.current&&b.current:w===x.current,vn={isValidating:!1,isLoading:!1},fs=()=>{R(vn)},mi=()=>{const Wt=g[w];Wt&&Wt[1]===tt&&delete g[w]},yi={isValidating:!0};Ot(P().data)&&(yi.isLoading=!0);try{if(Tt&&(R(yi),n.loadingTimeout&&Ot(P().data)&&setTimeout(()=>{Gt&&Dt()&&N().onLoadingSlow(w,n)},n.loadingTimeout),g[w]=[Se(v),xN()]),[De,tt]=g[w],De=await De,Tt&&setTimeout(mi,n.dedupingInterval),!g[w]||g[w][1]!==tt)return Tt&&Dt()&&N().onDiscarded(w),!1;vn.error=xs;const Wt=p[w];if(!Ot(Wt)&&(tt<=Wt[0]||tt<=Wt[1]||Wt[1]===0))return fs(),Tt&&Dt()&&N().onDiscarded(w),!1;const Sr=P().data;vn.data=s(Sr,De)?Sr:De,Tt&&Dt()&&N().onSuccess(De,w,n)}catch(Wt){mi();const Sr=N(),{shouldRetryOnError:ba}=Sr;Sr.isPaused()||(vn.error=Wt,Tt&&Dt()&&(Sr.onError(Wt,w,Sr),(ba===!0||Qa(ba)&&ba(Wt))&&(!N().revalidateOnFocus||!N().revalidateOnReconnect||A())&&Sr.onErrorRetry(Wt,w,Sr,Sl=>{const va=f[w];va&&va[0]&&va[0](Q$,Sl)},{retryCount:(It.retryCount||0)+1,dedupe:!0})))}return Gt=!1,fs(),!0},[w,r]),we=k.useCallback((...ve)=>P9(r,x.current,...ve),[]);if(zS(()=>{C.current=e,S.current=n,Ot(q)||(se.current=q)}),zS(()=>{if(!w)return;const ve=oe.bind(xs,qS);let Se=0;N().revalidateOnFocus&&(Se=Date.now()+N().focusThrottleInterval);const tt=ioe(w,f,(Gt,It={})=>{if(Gt==A9){const Tt=Date.now();N().revalidateOnFocus&&Tt>Se&&A()&&(Se=Tt+N().focusThrottleInterval,ve())}else if(Gt==S9)N().revalidateOnReconnect&&A()&&ve();else{if(Gt==I9)return oe();if(Gt==Q$)return oe(It)}});return _.current=!1,x.current=w,b.current=!0,R({_k:v}),me&&(Ot(ee)||mb?ve():Fie(ve)),()=>{_.current=!0,tt()}},[w]),zS(()=>{let ve;function Se(){const tt=Qa(l)?l(P().data):l;tt&&ve!==-1&&(ve=setTimeout(De,tt))}function De(){!P().error&&(u||N().isVisible())&&(d||N().isOnline())?oe(qS).then(Se):Se()}return Se(),()=>{ve&&(clearTimeout(ve),ve=-1)}},[l,u,d,w]),k.useDebugValue(le),i&&Ot(ee)&&w){if(!J$&&mb)throw new Error("Fallback data is required when using Suspense in SSR.");C.current=e,S.current=n,_.current=!1;const ve=y[w];if(!Ot(ve)){const Se=we(ve);WS(Se)}if(Ot(ce)){const Se=oe(qS);Ot(le)||(Se.status="fulfilled",Se.value=!0),WS(Se)}else throw ce}return{mutate:we,get data(){return K.data=!0,le},get error(){return K.error=!0,ce},get isValidating(){return K.isValidating=!0,re},get isLoading(){return K.isLoading=!0,ae}}},e5=soe(ooe);class aoe extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const coe=e5.default||e5,loe="https://react-tweet.vercel.app";async function uoe([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new aoe({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const doe=(t,e,n)=>{const{isLoading:r,data:s,error:i}=coe(()=>e||t?[e||t&&`${loe}/api/tweet/${t}`,n]:null,uoe,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},hoe=({id:t,apiUrl:e,fallback:n=m.jsx(xie,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=doe(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||yie;return m.jsx(l,{error:i?i(a):a})}return m.jsx(pie,{tweet:o,components:r})};var kC={exports:{}},R9={},D9={exports:{}},foe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",poe=foe,goe=poe;function $9(){}function U9(){}U9.resetWarningCache=$9;var moe=function(){function t(r,s,i,o,a,c){if(c!==goe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:U9,resetWarningCache:$9};return n.PropTypes=n,n};D9.exports=moe();var B9=D9.exports;function L9(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=L9(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function t5(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=L9(t))&&(r&&(r+=" "),r+=e);return r}const yoe=Object.freeze(Object.defineProperty({__proto__:null,clsx:t5,default:t5},Symbol.toStringTag,{value:"Module"})),woe=tC(yoe);var Hn={},hc={};Object.defineProperty(hc,"__esModule",{value:!0});hc.dontSetMe=_oe;hc.findInArray=boe;hc.int=xoe;hc.isFunction=voe;hc.isNum=Eoe;function boe(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function voe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function Eoe(t){return typeof t=="number"&&!isNaN(t)}function xoe(t){return parseInt(t,10)}function _oe(t,e,n){if(t[e])return new Error("Invalid prop ".concat(e," passed to ").concat(n," - do not set this, set it on the child."))}var Xf={};Object.defineProperty(Xf,"__esModule",{value:!0});Xf.browserPrefixToKey=j9;Xf.browserPrefixToStyle=Coe;Xf.default=void 0;Xf.getPrefix=M9;const VS=["Moz","Webkit","O","ms"];function M9(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const n=(t=window.document)===null||t===void 0||(t=t.documentElement)===null||t===void 0?void 0:t.style;if(!n||e in n)return"";for(let r=0;r<VS.length;r++)if(j9(e,VS[r])in n)return VS[r];return""}function j9(t,e){return e?"".concat(e).concat(Aoe(t)):t}function Coe(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t}function Aoe(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}Xf.default=M9();Object.defineProperty(Hn,"__esModule",{value:!0});Hn.addClassName=H9;Hn.addEvent=Toe;Hn.addUserSelectStyles=Moe;Hn.createCSSTransform=$oe;Hn.createSVGTransform=Uoe;Hn.getTouch=Boe;Hn.getTouchIdentifier=Loe;Hn.getTranslation=oR;Hn.innerHeight=Ooe;Hn.innerWidth=Roe;Hn.matchesSelector=z9;Hn.matchesSelectorAndParentsTo=Ioe;Hn.offsetXYFromParent=Doe;Hn.outerHeight=Poe;Hn.outerWidth=koe;Hn.removeClassName=G9;Hn.removeEvent=Noe;Hn.removeUserSelectStyles=joe;var ji=hc,n5=Soe(Xf);function F9(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(F9=function(r){return r?n:e})(t)}function Soe(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=F9(e);if(n&&n.has(t))return n.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}let z1="";function z9(t,e){return z1||(z1=(0,ji.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,ji.isFunction)(t[n])})),(0,ji.isFunction)(t[z1])?t[z1](e):!1}function Ioe(t,e,n){let r=t;do{if(z9(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function Toe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function Noe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function Poe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,ji.int)(n.borderTopWidth),e+=(0,ji.int)(n.borderBottomWidth),e}function koe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,ji.int)(n.borderLeftWidth),e+=(0,ji.int)(n.borderRightWidth),e}function Ooe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,ji.int)(n.paddingTop),e-=(0,ji.int)(n.paddingBottom),e}function Roe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,ji.int)(n.paddingLeft),e-=(0,ji.int)(n.paddingRight),e}function Doe(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function $oe(t,e){const n=oR(t,e,"px");return{[(0,n5.browserPrefixToKey)("transform",n5.default)]:n}}function Uoe(t,e){return oR(t,e,"")}function oR(t,e,n){let{x:r,y:s}=t,i="translate(".concat(r).concat(n,",").concat(s).concat(n,")");if(e){const o="".concat(typeof e.x=="string"?e.x:e.x+n),a="".concat(typeof e.y=="string"?e.y:e.y+n);i="translate(".concat(o,", ").concat(a,")")+i}return i}function Boe(t,e){return t.targetTouches&&(0,ji.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,ji.findInArray)(t.changedTouches,n=>e===n.identifier)}function Loe(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function Moe(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&H9(t.body,"react-draggable-transparent-selection")}function joe(t){if(t)try{if(t.body&&G9(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function H9(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function G9(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var fc={};Object.defineProperty(fc,"__esModule",{value:!0});fc.canDragX=Hoe;fc.canDragY=Goe;fc.createCoreData=qoe;fc.createDraggableData=Voe;fc.getBoundPosition=Foe;fc.getControlPosition=Woe;fc.snapToGrid=zoe;var _i=hc,hg=Hn;function Foe(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:Koe(r);const s=aR(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=i.querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,_i.int)(u.paddingLeft)+(0,_i.int)(l.marginLeft),top:-s.offsetTop+(0,_i.int)(u.paddingTop)+(0,_i.int)(l.marginTop),right:(0,hg.innerWidth)(c)-(0,hg.outerWidth)(s)-s.offsetLeft+(0,_i.int)(u.paddingRight)-(0,_i.int)(l.marginRight),bottom:(0,hg.innerHeight)(c)-(0,hg.outerHeight)(s)-s.offsetTop+(0,_i.int)(u.paddingBottom)-(0,_i.int)(l.marginBottom)}}return(0,_i.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,_i.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,_i.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,_i.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function zoe(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function Hoe(t){return t.props.axis==="both"||t.props.axis==="x"}function Goe(t){return t.props.axis==="both"||t.props.axis==="y"}function Woe(t,e,n){const r=typeof e=="number"?(0,hg.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=aR(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,hg.offsetXYFromParent)(r||t,i,n.props.scale)}function qoe(t,e,n){const r=!(0,_i.isNum)(t.lastX),s=aR(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function Voe(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function Koe(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function aR(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var OC={},RC={};Object.defineProperty(RC,"__esModule",{value:!0});RC.default=Qoe;function Qoe(){}Object.defineProperty(OC,"__esModule",{value:!0});OC.default=void 0;var KS=Joe(k),Us=cR(B9),Yoe=cR(SO),Yr=Hn,Ol=fc,QS=hc,r0=cR(RC);function cR(t){return t&&t.__esModule?t:{default:t}}function W9(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(W9=function(r){return r?n:e})(t)}function Joe(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=W9(e);if(n&&n.has(t))return n.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function ps(t,e,n){return e=Zoe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zoe(t){var e=Xoe(t,"string");return typeof e=="symbol"?e:String(e)}function Xoe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Oo={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Rl=Oo.mouse,DC=class extends KS.Component{constructor(){super(...arguments),ps(this,"dragging",!1),ps(this,"lastX",NaN),ps(this,"lastY",NaN),ps(this,"touchIdentifier",null),ps(this,"mounted",!1),ps(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,Yr.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,Yr.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&e.preventDefault();const s=(0,Yr.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,Ol.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,Ol.createCoreData)(this,o,a);(0,r0.default)("DraggableCore: handleDragStart: %j",c),(0,r0.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,Yr.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,Yr.addEvent)(r,Rl.move,this.handleDrag),(0,Yr.addEvent)(r,Rl.stop,this.handleDragStop))}),ps(this,"handleDrag",e=>{const n=(0,Ol.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,Ol.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,Ol.createCoreData)(this,r,s);if((0,r0.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),ps(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,Ol.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,Ol.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,Ol.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,Yr.removeUserSelectStyles)(a.ownerDocument),(0,r0.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,r0.default)("DraggableCore: Removing handlers"),(0,Yr.removeEvent)(a.ownerDocument,Rl.move,this.handleDrag),(0,Yr.removeEvent)(a.ownerDocument,Rl.stop,this.handleDragStop))}),ps(this,"onMouseDown",e=>(Rl=Oo.mouse,this.handleDragStart(e))),ps(this,"onMouseUp",e=>(Rl=Oo.mouse,this.handleDragStop(e))),ps(this,"onTouchStart",e=>(Rl=Oo.touch,this.handleDragStart(e))),ps(this,"onTouchEnd",e=>(Rl=Oo.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,Yr.addEvent)(e,Oo.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,Yr.removeEvent)(n,Oo.mouse.move,this.handleDrag),(0,Yr.removeEvent)(n,Oo.touch.move,this.handleDrag),(0,Yr.removeEvent)(n,Oo.mouse.stop,this.handleDragStop),(0,Yr.removeEvent)(n,Oo.touch.stop,this.handleDragStop),(0,Yr.removeEvent)(e,Oo.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Yr.removeUserSelectStyles)(n)}}findDOMNode(){var e,n;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(n=this.props)===null||n===void 0||(n=n.nodeRef)===null||n===void 0?void 0:n.current:Yoe.default.findDOMNode(this)}render(){return KS.cloneElement(KS.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};OC.default=DC;ps(DC,"displayName","DraggableCore");ps(DC,"propTypes",{allowAnyClick:Us.default.bool,children:Us.default.node.isRequired,disabled:Us.default.bool,enableUserSelectHack:Us.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Us.default.arrayOf(Us.default.number),handle:Us.default.string,cancel:Us.default.string,nodeRef:Us.default.object,onStart:Us.default.func,onDrag:Us.default.func,onStop:Us.default.func,onMouseDown:Us.default.func,scale:Us.default.number,className:QS.dontSetMe,style:QS.dontSetMe,transform:QS.dontSetMe});ps(DC,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=h(k),n=u(B9),r=u(SO),s=u(woe),i=Hn,o=fc,a=hc,c=u(OC),l=u(RC);function u(v){return v&&v.__esModule?v:{default:v}}function d(v){if(typeof WeakMap!="function")return null;var b=new WeakMap,_=new WeakMap;return(d=function(x){return x?_:b})(v)}function h(v,b){if(v&&v.__esModule)return v;if(v===null||typeof v!="object"&&typeof v!="function")return{default:v};var _=d(b);if(_&&_.has(v))return _.get(v);var x={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in v)if(S!=="default"&&Object.prototype.hasOwnProperty.call(v,S)){var N=C?Object.getOwnPropertyDescriptor(v,S):null;N&&(N.get||N.set)?Object.defineProperty(x,S,N):x[S]=v[S]}return x.default=v,_&&_.set(v,x),x}function f(){return f=Object.assign?Object.assign.bind():function(v){for(var b=1;b<arguments.length;b++){var _=arguments[b];for(var x in _)Object.prototype.hasOwnProperty.call(_,x)&&(v[x]=_[x])}return v},f.apply(this,arguments)}function p(v,b,_){return b=g(b),b in v?Object.defineProperty(v,b,{value:_,enumerable:!0,configurable:!0,writable:!0}):v[b]=_,v}function g(v){var b=y(v,"string");return typeof b=="symbol"?b:String(b)}function y(v,b){if(typeof v!="object"||v===null)return v;var _=v[Symbol.toPrimitive];if(_!==void 0){var x=_.call(v,b);if(typeof x!="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(v)}class w extends e.Component{static getDerivedStateFromProps(b,_){let{position:x}=b,{prevPropsPosition:C}=_;return x&&(!C||x.x!==C.x||x.y!==C.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:x,prevPropsPosition:C}),{x:x.x,y:x.y,prevPropsPosition:{...x}}):null}constructor(b){super(b),p(this,"onDragStart",(_,x)=>{if((0,l.default)("Draggable: onDragStart: %j",x),this.props.onStart(_,(0,o.createDraggableData)(this,x))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(_,x)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",x);const C=(0,o.createDraggableData)(this,x),S={x:C.x,y:C.y,slackX:0,slackY:0};if(this.props.bounds){const{x:A,y:P}=S;S.x+=this.state.slackX,S.y+=this.state.slackY;const[R,j]=(0,o.getBoundPosition)(this,S.x,S.y);S.x=R,S.y=j,S.slackX=this.state.slackX+(A-S.x),S.slackY=this.state.slackY+(P-S.y),C.x=S.x,C.y=S.y,C.deltaX=S.x-this.state.x,C.deltaY=S.y-this.state.y}if(this.props.onDrag(_,C)===!1)return!1;this.setState(S)}),p(this,"onDragStop",(_,x)=>{if(!this.state.dragging||this.props.onStop(_,(0,o.createDraggableData)(this,x))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",x);const S={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:A,y:P}=this.props.position;S.x=A,S.y=P}this.setState(S)}),this.state={dragging:!1,dragged:!1,x:b.position?b.position.x:b.defaultPosition.x,y:b.position?b.position.y:b.defaultPosition.y,prevPropsPosition:{...b.position},slackX:0,slackY:0,isElementSVG:!1},b.position&&!(b.onDrag||b.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var b,_;return(b=(_=this.props)===null||_===void 0||(_=_.nodeRef)===null||_===void 0?void 0:_.current)!==null&&b!==void 0?b:r.default.findDOMNode(this)}render(){const{axis:b,bounds:_,children:x,defaultPosition:C,defaultClassName:S,defaultClassNameDragging:N,defaultClassNameDragged:A,position:P,positionOffset:R,scale:j,...H}=this.props;let K={},T=null;const L=!!!P||this.state.dragging,U=P||C,$={x:(0,o.canDragX)(this)&&L?this.state.x:U.x,y:(0,o.canDragY)(this)&&L?this.state.y:U.y};this.state.isElementSVG?T=(0,i.createSVGTransform)($,R):K=(0,i.createCSSTransform)($,R);const M=(0,s.default)(x.props.className||"",S,{[N]:this.state.dragging,[A]:this.state.dragged});return e.createElement(c.default,f({},H,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(x),{className:M,style:{...x.props.style,...K},transform:T}))}}t.default=w,p(w,"displayName","Draggable"),p(w,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),p(w,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(R9);const{default:q9,DraggableCore:eae}=R9;kC.exports=q9;kC.exports.default=q9;kC.exports.DraggableCore=eae;var tae=kC.exports;const Lv=Qf(tae);function Dn(){return Dn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dn.apply(null,arguments)}function V9(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var K9={exports:{}},sn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ar=typeof Symbol=="function"&&Symbol.for,lR=Ar?Symbol.for("react.element"):60103,uR=Ar?Symbol.for("react.portal"):60106,$C=Ar?Symbol.for("react.fragment"):60107,UC=Ar?Symbol.for("react.strict_mode"):60108,BC=Ar?Symbol.for("react.profiler"):60114,LC=Ar?Symbol.for("react.provider"):60109,MC=Ar?Symbol.for("react.context"):60110,dR=Ar?Symbol.for("react.async_mode"):60111,jC=Ar?Symbol.for("react.concurrent_mode"):60111,FC=Ar?Symbol.for("react.forward_ref"):60112,zC=Ar?Symbol.for("react.suspense"):60113,nae=Ar?Symbol.for("react.suspense_list"):60120,HC=Ar?Symbol.for("react.memo"):60115,GC=Ar?Symbol.for("react.lazy"):60116,rae=Ar?Symbol.for("react.block"):60121,sae=Ar?Symbol.for("react.fundamental"):60117,iae=Ar?Symbol.for("react.responder"):60118,oae=Ar?Symbol.for("react.scope"):60119;function qi(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case lR:switch(t=t.type,t){case dR:case jC:case $C:case BC:case UC:case zC:return t;default:switch(t=t&&t.$$typeof,t){case MC:case FC:case GC:case HC:case LC:return t;default:return e}}case uR:return e}}}function Q9(t){return qi(t)===jC}sn.AsyncMode=dR;sn.ConcurrentMode=jC;sn.ContextConsumer=MC;sn.ContextProvider=LC;sn.Element=lR;sn.ForwardRef=FC;sn.Fragment=$C;sn.Lazy=GC;sn.Memo=HC;sn.Portal=uR;sn.Profiler=BC;sn.StrictMode=UC;sn.Suspense=zC;sn.isAsyncMode=function(t){return Q9(t)||qi(t)===dR};sn.isConcurrentMode=Q9;sn.isContextConsumer=function(t){return qi(t)===MC};sn.isContextProvider=function(t){return qi(t)===LC};sn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===lR};sn.isForwardRef=function(t){return qi(t)===FC};sn.isFragment=function(t){return qi(t)===$C};sn.isLazy=function(t){return qi(t)===GC};sn.isMemo=function(t){return qi(t)===HC};sn.isPortal=function(t){return qi(t)===uR};sn.isProfiler=function(t){return qi(t)===BC};sn.isStrictMode=function(t){return qi(t)===UC};sn.isSuspense=function(t){return qi(t)===zC};sn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===$C||t===jC||t===BC||t===UC||t===zC||t===nae||typeof t=="object"&&t!==null&&(t.$$typeof===GC||t.$$typeof===HC||t.$$typeof===LC||t.$$typeof===MC||t.$$typeof===FC||t.$$typeof===sae||t.$$typeof===iae||t.$$typeof===oae||t.$$typeof===rae)};sn.typeOf=qi;K9.exports=sn;var aae=K9.exports,hR=aae,cae={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},lae={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},uae={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Y9={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},fR={};fR[hR.ForwardRef]=uae;fR[hR.Memo]=Y9;function r5(t){return hR.isMemo(t)?Y9:fR[t.$$typeof]||cae}var dae=Object.defineProperty,hae=Object.getOwnPropertyNames,s5=Object.getOwnPropertySymbols,fae=Object.getOwnPropertyDescriptor,pae=Object.getPrototypeOf,i5=Object.prototype;function J9(t,e,n){if(typeof e!="string"){if(i5){var r=pae(e);r&&r!==i5&&J9(t,r,n)}var s=hae(e);s5&&(s=s.concat(s5(e)));for(var i=r5(t),o=r5(e),a=0;a<s.length;++a){var c=s[a];if(!lae[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=fae(e,c);try{dae(t,c,l)}catch{}}}}return t}var gae=J9;const mae=Qf(gae);var Z9={};Object.defineProperty(Z9,"__esModule",{value:!0});Z9.default=yae;function yae(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function H1(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r_(){return r_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r_.apply(this,arguments)}function wae(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Dl(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bae(t){var e=function(n){wae(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,H1(Dl(Dl(i)),"cachedTheme",void 0),H1(Dl(Dl(i)),"lastOuterTheme",void 0),H1(Dl(Dl(i)),"lastTheme",void 0),H1(Dl(Dl(i)),"renderProvider",function(l){var u=i.props.children;return Bi.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?r_({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?Bi.createElement(t.Consumer,null,this.renderProvider):null},r}(Bi.Component);return e}function vae(t){return function(n){var r=Bi.forwardRef(function(s,i){return Bi.createElement(t.Consumer,null,function(o){return Bi.createElement(n,r_({theme:o,ref:i},s))})});return mae(r,n),r}}function Eae(t){var e=function(){var r=Bi.useContext(t);return r};return e}function xae(t){return{context:t,withTheme:vae(t),useTheme:Eae(t),ThemeProvider:bae(t)}}var X9=k.createContext();xae(X9);var o5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_y=(typeof window>"u"?"undefined":o5(window))==="object"&&(typeof document>"u"?"undefined":o5(document))==="object"&&document.nodeType===9;function yb(t){"@babel/helpers - typeof";return yb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yb(t)}function _ae(t,e){if(yb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Cae(t){var e=_ae(t,"string");return yb(e)=="symbol"?e:e+""}function Aae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Cae(r.key),r)}}function pR(t,e,n){return e&&Aae(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _N(t,e){return _N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},_N(t,e)}function e7(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_N(t,e)}function a5(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Sae={}.constructor;function CN(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(CN);if(t.constructor!==Sae)return t;var e={};for(var n in t)e[n]=CN(t[n]);return e}function WC(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=CN(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var c5=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},ff=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=c5(e[r]," ");else n=c5(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function Cy(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function s0(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function wb(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=Cy(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=s0(f+":"+u+ff(p)+";",o))}}else for(var g in a){var y=a[g];y!=null&&(r&&(r+=l),r+=s0(g+":"+u+ff(y)+";",o))}for(var w in e){var v=e[w];v!=null&&w!=="fallbacks"&&(r&&(r+=l),r+=s0(w+":"+u+ff(v)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),s0(""+t+u+"{"+r,o)+s0("}",o))}var Iae=/([[\].#*$><+~=|^:(),"'`\s])/g,l5=typeof CSS<"u"&&CSS.escape,gR=function(t){return l5?l5(t):t.replace(Iae,"\\$1")},t7=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),AN=function(t){e7(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(a5(a5(o)),l),o.selectorText="."+gR(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=ff(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Dn({},s,{allowEmpty:!0}):s;return wb(this.selectorText,this.style,a)},pR(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(t7),Tae={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new AN(e,n,r)}},YS={indent:1,children:!0},Nae=/@([\w-]+)/,Pae=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(Nae);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new qC(Dn({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=YS);var s=Cy(r),i=s.linebreak;if(r.indent==null&&(r.indent=YS.indent),r.children==null&&(r.children=YS.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),kae=/@container|@media|@supports\s+/,Oae={onCreateRule:function(e,n,r){return kae.test(e)?new Pae(e,n,r):null}},JS={indent:1,children:!0},Rae=/@keyframes\s+([\w-]+)/,SN=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(Rae);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:gR(c(this,a)),this.rules=new qC(Dn({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],Dn({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=JS);var s=Cy(r),i=s.linebreak;if(r.indent==null&&(r.indent=JS.indent),r.children==null&&(r.children=JS.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),Dae=/@keyframes\s+/,$ae=/\$([\w-]+)/g,IN=function(e,n){return typeof e=="string"?e.replace($ae,function(r,s){return s in n?n[s]:r}):e},u5=function(e,n,r){var s=e[n],i=IN(s,r);i!==s&&(e[n]=i)},Uae={onCreateRule:function(e,n,r){return typeof e=="string"&&Dae.test(e)?new SN(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&u5(e,"animation-name",r.keyframes),"animation"in e&&u5(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return IN(e,s.keyframes);case"animation-name":return IN(e,s.keyframes);default:return e}}},Bae=function(t){e7(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Dn({},s,{allowEmpty:!0}):s;return wb(this.key,this.style,a)},e}(t7),Lae={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new Bae(e,n,r):null}},Mae=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=Cy(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=wb(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return wb(this.at,this.style,r)},t}(),jae=/@font-face/,Fae={onCreateRule:function(e,n,r){return jae.test(e)?new Mae(e,n,r):null}},zae=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return wb(this.key,this.style,r)},t}(),Hae={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new zae(e,n,r):null}},Gae=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),Wae={"@charset":!0,"@import":!0,"@namespace":!0},qae={onCreateRule:function(e,n,r){return e in Wae?new Gae(e,n,r):null}},d5=[Tae,Oae,Uae,Lae,Fae,Hae,qae],Vae={process:!0},h5={force:!0,process:!0},qC=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=Dn({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+gR(this.classes[p]));var g=WC(p,s,f);if(!g)return null;this.register(g);var y=f.index===void 0?this.index.length:f.index;return this.index.splice(y,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=Dn({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof AN?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof SN&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof AN?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof SN&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=Vae);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,h5)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,h5)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=Cy(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),n7=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Dn({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new qC(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),Kae=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),Qae=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=V9(s,["attached"]),a=Cy(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},pR(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),aw=new Qae,TN=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),NN="2f1acc6c3a606b082e5eef5e54414ffb";TN[NN]==null&&(TN[NN]=0);var f5=TN[NN]++,p5=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+f5+a+n:c+i.key+"-"+f5+(a?"-"+a:"")+"-"+n};return r},r7=function(e){var n;return function(){return n||(n=e()),n}},Yae=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},Jae=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=ff(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},Zae=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},Xae=function(e,n){return e.selectorText=n,e.selectorText===n},s7=r7(function(){return document.querySelector("head")});function ece(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function tce(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function nce(t){for(var e=s7(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function rce(t){var e=aw.registry;if(e.length>0){var n=ece(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=tce(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=nce(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function sce(t,e){var n=e.insertionPoint,r=rce(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}s7().appendChild(t)}var ice=r7(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),g5=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},m5=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},oce=function(){var e=document.createElement("style");return e.textContent=`
`,e},ace=function(){function t(n){this.getPropertyValue=Yae,this.setProperty=Jae,this.removeProperty=Zae,this.setSelector=Xae,this.hasInsertedRules=!1,this.cssRules=[],n&&aw.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||oce(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=ice();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){sce(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=m5(i,s);if(a=g5(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=m5(i,s),d=g5(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof n7&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),cce=0,lce=function(){function t(n){this.id=cce++,this.version="10.10.0",this.plugins=new Kae,this.options={id:{minify:!1},createGenerateId:p5,Renderer:_y?ace:null,plugins:[]},this.generateId=p5({minify:!1});for(var r=0;r<d5.length;r++)this.plugins.use(d5[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=Dn({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=aw.index===0?0:aw.index+1);var a=new n7(r,Dn({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),aw.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=Dn({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=WC(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),i7=function(e){return new lce(e)},y5=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},pR(t,[{key:"size",get:function(){return this.length}}]),t}(),mR=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function o7(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=o7(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */i7();var a7=Date.now(),ZS="fnValues"+a7,XS="fnStyle"+ ++a7,uce=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=WC(n,{},s);return i[XS]=r,i},onProcessStyle:function(n,r){if(ZS in r||XS in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[ZS]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[XS];a&&(o.style=a(n)||{});var c=o[ZS];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function dce(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var Wp;typeof self<"u"?Wp=self:typeof window<"u"?Wp=window:typeof global<"u"?Wp=global:typeof module<"u"?Wp=module:Wp=Function("return this")();var w5=dce(Wp),b5=function(e){return e&&e[w5]&&e===e[w5]()},hce=function(e){return{onCreateRule:function(r,s,i){if(!b5(s))return null;var o=s,a=WC(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!b5(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},fce=/;\n/,pce=function(e){for(var n={},r=e.split(fce),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},gce=function(e){typeof e.style=="string"&&(e.style=pce(e.style))};function mce(){return{onProcessRule:gce}}var hd="@global",PN="@global ",yce=function(){function t(n,r,s){this.type="global",this.at=hd,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new qC(Dn({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),wce=function(){function t(n,r,s){this.type="global",this.at=hd,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(PN.length);this.rule=s.jss.createRule(i,r,Dn({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),bce=/\s*,\s*/g;function c7(t,e){for(var n=t.split(bce),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function vce(t,e){var n=t.options,r=t.style,s=r?r[hd]:null;if(s){for(var i in s)e.addRule(i,s[i],Dn({},n,{selector:c7(i,t.selector)}));delete r[hd]}}function Ece(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,hd.length)!==hd)){var i=c7(s.substr(hd.length),t.selector);e.addRule(i,r[s],Dn({},n,{selector:i})),delete r[s]}}function xce(){function t(n,r,s){if(!n)return null;if(n===hd)return new yce(n,r,s);if(n[0]==="@"&&n.substr(0,PN.length)===PN)return new wce(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(vce(n,r),Ece(n,r))}return{onCreateRule:t,onProcessRule:e}}var YE=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},e2="extendCurrValue"+Date.now();function _ce(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];Ch(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?Dn({},t,{extend:l}):t.extend[c];Ch(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){Ch(t.extend.extend,e,n,r);continue}if(YE(t.extend[d])){d in r||(r[d]={}),Ch(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function Cce(t,e,n,r){for(var s in t)if(s!=="extend"){if(YE(r[s])&&YE(t[s])){Ch(t[s],e,n,r[s]);continue}if(YE(t[s])){r[s]=Ch(t[s],e,n);continue}r[s]=t[s]}}function Ch(t,e,n,r){return r===void 0&&(r={}),_ce(t,e,n,r),Cce(t,e,n,r),r}function Ace(){function t(n,r,s){return"extend"in n?Ch(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[e2])s.prop(i,null);return s[e2]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[e2]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var v5=/\s*,\s*/g,Sce=/&/g,Ice=/\$([\w-]+)/g;function Tce(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(v5),a=s.split(v5),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(Sce,u):u+" "+h}return c}function n(s,i,o){if(o)return Dn({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=Dn({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(Ice,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],Dn({},l,{selector:p})):c.addRule(g,s[d],Dn({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function kN(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=kN(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return kN(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function Nce(){function t(e,n){return"composes"in e&&(kN(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var Pce=/[A-Z]/g,kce=/^ms-/,t2={};function Oce(t){return"-"+t.toLowerCase()}function l7(t){if(t2.hasOwnProperty(t))return t2[t];var e=t.replace(Pce,Oce);return t2[t]=kce.test(e)?"-"+e:e}function s_(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:l7(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(s_):e.fallbacks=s_(t.fallbacks)),e}function Rce(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=s_(n[r]);return n}return s_(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=l7(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var ie=mR&&CSS?CSS.px:"px",G1=mR&&CSS?CSS.ms:"ms",mp=mR&&CSS?CSS.percent:"%",Dce={"animation-delay":G1,"animation-duration":G1,"background-position":ie,"background-position-x":ie,"background-position-y":ie,"background-size":ie,border:ie,"border-bottom":ie,"border-bottom-left-radius":ie,"border-bottom-right-radius":ie,"border-bottom-width":ie,"border-left":ie,"border-left-width":ie,"border-radius":ie,"border-right":ie,"border-right-width":ie,"border-top":ie,"border-top-left-radius":ie,"border-top-right-radius":ie,"border-top-width":ie,"border-width":ie,"border-block":ie,"border-block-end":ie,"border-block-end-width":ie,"border-block-start":ie,"border-block-start-width":ie,"border-block-width":ie,"border-inline":ie,"border-inline-end":ie,"border-inline-end-width":ie,"border-inline-start":ie,"border-inline-start-width":ie,"border-inline-width":ie,"border-start-start-radius":ie,"border-start-end-radius":ie,"border-end-start-radius":ie,"border-end-end-radius":ie,margin:ie,"margin-bottom":ie,"margin-left":ie,"margin-right":ie,"margin-top":ie,"margin-block":ie,"margin-block-end":ie,"margin-block-start":ie,"margin-inline":ie,"margin-inline-end":ie,"margin-inline-start":ie,padding:ie,"padding-bottom":ie,"padding-left":ie,"padding-right":ie,"padding-top":ie,"padding-block":ie,"padding-block-end":ie,"padding-block-start":ie,"padding-inline":ie,"padding-inline-end":ie,"padding-inline-start":ie,"mask-position-x":ie,"mask-position-y":ie,"mask-size":ie,height:ie,width:ie,"min-height":ie,"max-height":ie,"min-width":ie,"max-width":ie,bottom:ie,left:ie,top:ie,right:ie,inset:ie,"inset-block":ie,"inset-block-end":ie,"inset-block-start":ie,"inset-inline":ie,"inset-inline-end":ie,"inset-inline-start":ie,"box-shadow":ie,"text-shadow":ie,"column-gap":ie,"column-rule":ie,"column-rule-width":ie,"column-width":ie,"font-size":ie,"font-size-delta":ie,"letter-spacing":ie,"text-decoration-thickness":ie,"text-indent":ie,"text-stroke":ie,"text-stroke-width":ie,"word-spacing":ie,motion:ie,"motion-offset":ie,outline:ie,"outline-offset":ie,"outline-width":ie,perspective:ie,"perspective-origin-x":mp,"perspective-origin-y":mp,"transform-origin":mp,"transform-origin-x":mp,"transform-origin-y":mp,"transform-origin-z":mp,"transition-delay":G1,"transition-duration":G1,"vertical-align":ie,"flex-basis":ie,"shape-margin":ie,size:ie,gap:ie,grid:ie,"grid-gap":ie,"row-gap":ie,"grid-row-gap":ie,"grid-column-gap":ie,"grid-template-rows":ie,"grid-template-columns":ie,"grid-auto-rows":ie,"grid-auto-columns":ie,"box-shadow-x":ie,"box-shadow-y":ie,"box-shadow-blur":ie,"box-shadow-spread":ie,"font-line-height":ie,"text-shadow-x":ie,"text-shadow-y":ie,"text-shadow-blur":ie};function u7(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var $ce=u7(Dce);function cw(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=cw(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=cw(s,e[s],n);else for(var i in e)e[i]=cw(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||$ce[t];return o&&!(e===0&&o===ie)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function Uce(t){t===void 0&&(t={});var e=u7(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=cw(o,s[o],e);return s}function r(s,i){return cw(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var Bce={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},Lce={position:!0,size:!0},W1={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},n2={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function Mce(t,e,n){return t.map(function(r){return h7(r,e,n,!1,!0)})}function d7(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?d7(t[0],e,n,r):typeof t[0]=="object"?Mce(t,e,r):[t]}function h7(t,e,n,r,s){if(!(W1[e]||n2[e]))return[];var i=[];if(n2[e]&&(t=jce(t,n,n2[e],r)),Object.keys(t).length)for(var o in W1[e]){if(t[o]){Array.isArray(t[o])?i.push(Lce[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}W1[e][o]!=null&&i.push(W1[e][o])}return!i.length||s?i:[i]}function jce(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=bb((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function bb(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=bb(t.fallbacks[i],e,!0);continue}t[r]=d7(s,r,Bce,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=bb(t.fallbacks,e,!0);continue}t[r]=h7(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function Fce(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=bb(e[r],n);return e}return bb(e,n)}return{onProcessStyle:t}}function ON(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function zce(t){if(Array.isArray(t))return ON(t)}function Hce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Gce(t,e){if(t){if(typeof t=="string")return ON(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ON(t,e):void 0}}function Wce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qce(t){return zce(t)||Hce(t)||Gce(t)||Wce()}var D0="",RN="",f7="",p7="",Vce=_y&&"ontouchstart"in document.documentElement;if(_y){var r2={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},Kce=document.createElement("p"),s2=Kce.style,Qce="Transform";for(var i2 in r2)if(i2+Qce in s2){D0=i2,RN=r2[i2];break}D0==="Webkit"&&"msHyphens"in s2&&(D0="ms",RN=r2.ms,p7="edge"),D0==="Webkit"&&"-apple-trailing-word"in s2&&(f7="apple")}var dt={js:D0,css:RN,vendor:f7,browser:p7,isTouch:Vce};function Yce(t){return t[1]==="-"||dt.js==="ms"?t:"@"+dt.css+"keyframes"+t.substr(10)}var Jce={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:dt.js==="ms"?"-webkit-"+e:dt.css+e}},Zce={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:dt.js==="Webkit"?dt.css+"print-"+e:e}},Xce=/[-\s]+(.)?/g;function ele(t,e){return e?e.toUpperCase():""}function yR(t){return t.replace(Xce,ele)}function Ad(t){return yR("-"+t)}var tle={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(dt.js==="Webkit"){var r="mask-image";if(yR(r)in n)return e;if(dt.js+Ad(r)in n)return dt.css+e}return e}},nle={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:dt.vendor==="apple"&&!dt.isTouch?dt.css+e:e}},rle={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:dt.css+e}},sle={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:dt.css+e}},ile={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:dt.js==="Webkit"||dt.js==="ms"&&dt.browser!=="edge"?dt.css+e:e}},ole={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:dt.js==="Moz"||dt.js==="ms"||dt.vendor==="apple"?dt.css+e:e}},ale={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(dt.js==="Webkit"){var r="WebkitColumn"+Ad(e);return r in n?dt.css+"column-"+e:!1}if(dt.js==="Moz"){var s="page"+Ad(e);return s in n?"page-"+e:!1}return!1}},cle={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(dt.js==="Moz")return e;var r=e.replace("-inline","");return dt.js+Ad(r)in n?dt.css+r:!1}},lle={supportedProperty:function(e,n){return yR(e)in n?e:!1}},ule={supportedProperty:function(e,n){var r=Ad(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:dt.js+r in n?dt.css+e:dt.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},dle={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:dt.js==="ms"?""+dt.css+e:e}},hle={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:dt.js==="ms"?dt.css+"scroll-chaining":e}},fle={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},ple={supportedProperty:function(e,n){var r=fle[e];return r&&dt.js+Ad(r)in n?dt.css+r:!1}},g7={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},gle=Object.keys(g7),mle=function(e){return dt.css+e},yle={supportedProperty:function(e,n,r){var s=r.multiple;if(gle.indexOf(e)>-1){var i=g7[e];if(!Array.isArray(i))return dt.js+Ad(i)in n?dt.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(dt.js+Ad(i[0])in n))return!1;return i.map(mle)}return!1}},m7=[Jce,Zce,tle,nle,rle,sle,ile,ole,ale,cle,lle,ule,dle,hle,ple,yle],E5=m7.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),wle=m7.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,qce(e.noPrefill)),t},[]),$0,lh={};if(_y){$0=document.createElement("p");var o2=window.getComputedStyle(document.documentElement,"");for(var a2 in o2)isNaN(a2)||(lh[o2[a2]]=o2[a2]);wle.forEach(function(t){return delete lh[t]})}function DN(t,e){if(e===void 0&&(e={}),!$0)return t;if(lh[t]!=null)return lh[t];(t==="transition"||t==="transform")&&(e[t]=t in $0.style);for(var n=0;n<E5.length&&(lh[t]=E5[n](t,$0.style,e),!lh[t]);n++);try{$0.style[t]=""}catch{return!1}return lh[t]}var yp={},ble={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},vle=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Xl;function Ele(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?DN(e):", "+DN(n);return r||e||n}_y&&(Xl=document.createElement("p"));function x5(t,e){var n=e;if(!Xl||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(yp[r]!=null)return yp[r];try{Xl.style[t]=n}catch{return yp[r]=!1,!1}if(ble[t])n=n.replace(vle,Ele);else if(Xl.style[t]===""&&(n=dt.css+n,n==="-ms-flex"&&(Xl.style[t]="-ms-flexbox"),Xl.style[t]=n,Xl.style[t]===""))return yp[r]=!1,!1;return Xl.style[t]="",yp[r]=n,yp[r]}function xle(){function t(s){if(s.type==="keyframes"){var i=s;i.at=Yce(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=DN(i);c&&c!==i&&(a=!0);var l=!1,u=x5(c,ff(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return x5(i,ff(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function _le(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var Cle=function(e){return e===void 0&&(e={}),{plugins:[uce(),hce(e.observable),mce(),xce(),Ace(),Tce(),Nce(),Rce(),Uce(e.defaultUnit),Fce(),xle(),_le()]}},Ale=Number.MIN_SAFE_INTEGER||-1e9,Sle=function(){return Ale++},Ile=k.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!_y}),_5=new Map,wR=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new y5),r[n];var s=_5.get(n);return s||(s=new y5,_5.set(n,s)),s},C5=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=wR(r,s);o.manage(i),r.registry&&r.registry.add(n)}},Tle=function(e){if(e.sheet){var n=wR(e.context,e.index);n.unmanage(e.theme)}},Nle=i7(Cle()),y7=new WeakMap,w7=function(e){return y7.get(e)},Ple=function(e,n){y7.set(e,n)},kle=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function Ole(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",Dn({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var Rle=function(e){if(!e.context.disableStylesGeneration){var n=wR(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||Nle,i=kle(e),o=o7(i),a=s.createStyleSheet(i,Ole(e,o!==null));return Ple(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},Dle=function(e,n){for(var r in n)e.deleteRule(n[r])},$le=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},Ule=function(e,n){var r=w7(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},Ble=function(e,n){if(!n)return e.classes;var r=w7(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function A5(t){return t?k.useEffect:Bi.useInsertionEffect||k.useLayoutEffect}var c2={},ma=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?Sle():s,o=r.theming,a=r.name,c=V9(r,["index","theming","name"]),l=o&&o.context||X9,u=function(f){return typeof e=="function"&&(f||k.useContext(l))||c2},d={};return function(f){var p=k.useRef(!0),g=k.useContext(Ile),y=u(f&&f.theme),w=k.useMemo(function(){var x=Rle({context:g,styles:e,name:a,theme:y,index:i,sheetOptions:c});return x&&g.isSSR&&C5({index:i,context:g,sheet:x,theme:y}),[x,x?Ule(x,f):null]},[g,y]),v=w[0],b=w[1];A5(g.isSSR)(function(){v&&b&&!p.current&&$le(f,v,b)},[f]),A5(g.isSSR)(function(){return v&&C5({index:i,context:g,sheet:v,theme:y}),function(){v&&(Tle({index:i,context:g,sheet:v,theme:y}),b&&Dle(v,b))}},[v]);var _=k.useMemo(function(){return v&&b?Ble(v,b):d},[v,b]);return k.useDebugValue(_),k.useDebugValue(y===c2?"No theme":y),k.useEffect(function(){p.current=!1}),_}};const Lle=ma({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function l2({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=Lle(),d=k.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=m.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[m.jsx("img",{src:t,alt:e,className:u.iconImage}),m.jsx("span",{className:u.iconLabel,children:e})]});return o?f:m.jsx(Lv,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const Mle=ma({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function to({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=Mle({isOpen:e}),u=k.useRef(null),d=()=>{r&&r(t)};return m.jsx(Lv,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:m.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[m.jsxs("div",{className:l.header,children:[m.jsx("span",{children:i||t.replace("-popup","")}),m.jsxs("div",{className:l.titleBarButtons,children:[m.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),m.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:"✕"})]})]}),m.jsx("div",{className:l.content,children:s})]})})}const u2=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],jle=80,Fle=80,zle=10,Hle=10,Gle=10,Wle=10,qle=({onIconClick:t})=>{const e=u2.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:Gle+d*(jle+zle),y:Wle+u*(Fle+Hle)},u++,u>=4&&(u=0,d++)}),l},[r,s]=k.useState(n()),[i,o]=k.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return m.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:m.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>m.jsx(l2,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&m.jsx(to,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:u2.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>m.jsx(l2,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&m.jsx(to,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:u2.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>m.jsx(l2,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},Vle=ma({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),Kle=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=k.useState(!1),[o,a]=k.useState(new Date),c=Vle({isOpen:s});k.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return m.jsxs("div",{className:c.taskbar,children:[m.jsxs("div",{className:c.leftSection,children:[m.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),m.jsx("div",{className:c.windows,children:t.map(h=>m.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),m.jsxs("div",{className:c.rightSection,children:[m.jsxs("div",{className:c.statusSection,children:[m.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:m.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),m.jsx("div",{className:c.clock,children:l(o)})]}),s&&m.jsxs("div",{className:c.menu,children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function b7(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function bR(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function v7(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function vR(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function E7(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function x7(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=`https://api.opensea.io/api/v2/collection/${t}/nfts?chain=solana&limit=${e}&include_orders=true`;try{const i=await fetch(r,{headers:{"X-API-KEY":n}});if(!i.ok)throw new Error(`Failed to get OpenSea Solana NFTs: ${i.statusText}`);const o=await i.json();console.log("Solana collection response:",o),console.log("Sample NFT from response:",o.nfts[0]),console.log("Sample NFT owners:",(s=o.nfts[0])==null?void 0:s.owners),console.log("Sample NFT full structure:",JSON.stringify(o.nfts[0],null,2));const a=o.nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"SOL",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea Solana NFTs:",i),i}}async function Qle(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=[`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false&include_metadata=true`];for(const i of r){console.log("Trying OpenSea endpoint:",i);try{const o=await fetch(i,{headers:{"X-API-KEY":n}});if(console.log("Response status:",o.status),!o.ok){const c=await o.text();console.error("API Error response:",c);continue}const a=await o.json();if(console.log("Raw API response:",a),console.log("Number of NFTs returned:",((s=a.nfts)==null?void 0:s.length)||0),a.nfts&&a.nfts.length>0){const c=a.nfts.map(l=>({id:l.identifier,address:l.contract,token_id:parseInt(l.identifier,10),attributes:JSON.stringify(l.traits||[]),name:l.name||`#${l.identifier}`,image_url:l.image_url,owner_of:t,block_minted:0,contract_type:"SOL",description:l.description||"",image:l.image_url,image_url_shrunk:l.image_url,animation_url:l.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:"",num_items:1,created_at:l.updated_at||new Date().toISOString(),updated_at:l.updated_at||new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}));return console.log("Transformed NFTs:",c.length),{page:1,pageSize:e,totalCount:c.length,totalPages:1,data:c}}}catch(o){console.error("Error with endpoint:",i,o);continue}}return console.log("All OpenSea endpoints failed, returning empty result"),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]}}const Yle=ma({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),Jle=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=Yle({isOpen:t}),i=k.useRef(null),[o,a]=k.useState([]),[c,l]=k.useState(!1),[u,d]=k.useState(!1),[h,f]=k.useState({}),[p,g]=k.useState(null),{data:y}=m9();k.useEffect(()=>{t&&r&&w()},[t,r]);const w=async()=>{l(!0),g(null);try{const C=await b7(r);a(C);const S={};C.forEach(N=>{S[N.id]=0}),f(S)}catch(C){g(C.message)}finally{l(!1)}},v=(C,S)=>{f(N=>({...N,[C]:Math.max(0,S)}))},b=async()=>{const C=Object.entries(h).filter(([,S])=>S>0).map(([S,N])=>({id:S,quantity:N}));if(C.length===0){g("Please select at least one item to mint");return}if(!y){g("Wallet not connected");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const S=await v7(r,C);if(console.log("Mint API result:",S),S.success&&S.mintTransaction){console.log("Got mint transaction:",S.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const N=await y.sendTransaction({to:S.mintTransaction.to,value:BigInt(S.mintTransaction.value),data:S.mintTransaction.data});console.log("Transaction sent successfully:",N),alert(`NFT Minted Successfully: Transaction Hash - ${N}`),e()}catch(N){console.error("Transaction sending failed:",N),g("Transaction failed: "+N.message)}}else throw new Error(S.message||"Could not retrieve minting transaction.")}catch(S){console.error("Minting failed:",S),g("Minting failed: "+S.message)}finally{d(!1)}},_=(C,S)=>`${parseFloat(C)} ${S}`,x=()=>{n&&n()};return t?m.jsx(Lv,{nodeRef:i,handle:`.${s.header}`,children:m.jsxs("div",{ref:i,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"Mint Pixelawbster"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:x,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),m.jsxs("div",{className:s.content,children:[p&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?m.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{children:"Available Lists:"}),o.map(C=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:C.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",_(C.token_price,C.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",C.wallet_limit===4294967295?"Unlimited":C.wallet_limit," per wallet"]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[m.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),m.jsx("input",{type:"number",min:"0",max:C.wallet_limit===4294967295?999:C.wallet_limit,value:h[C.id]||0,onChange:S=>v(C.id,parseInt(S.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},C.id))]}),m.jsx("button",{onClick:()=>void b(),disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},Zle=ma({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),Xle=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},eue=({nft:t,onClose:e})=>{const n=Zle(),r=k.useRef(null),s=Xle(t.attributes);return m.jsx(Lv,{nodeRef:r,handle:`.${n.header}`,children:m.jsxs("div",{className:n.popup,ref:r,children:[m.jsxs("div",{className:n.header,children:[m.jsxs("span",{children:[t.name," - Details"]}),m.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),m.jsxs("div",{className:n.content,children:[m.jsx("img",{src:t.image_url,alt:t.name,className:n.detailImage}),m.jsx("h3",{children:"Traits"}),m.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):m.jsx("li",{children:"No traits found."})})]})]})})},tue=Symbol(),S5=Object.getPrototypeOf,$N=new WeakMap,nue=t=>t&&($N.has(t)?$N.get(t):S5(t)===Object.prototype||S5(t)===Array.prototype),rue=t=>nue(t)&&t[tue]||null,I5=(t,e=!0)=>{$N.set(t,e)},i_={},d2=t=>typeof t=="object"&&t!==null,ou=new WeakMap,U0=new WeakSet,sue=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>d2(l)&&!U0.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return I5(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:y}=Reflect.getOwnPropertyDescriptor(l,p),w={value:g,enumerable:y,configurable:!0};if(U0.has(g))I5(g,!1);else if(g instanceof Promise)delete w.value,w.get=()=>d(g);else if(ou.has(g)){const[v,b]=ou.get(g);w.value=i(v,b(),d)}Object.defineProperty(f,p,w)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!d2(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(A,P=++a[0])=>{d!==P&&(d=P,h.forEach(R=>R(A,P)))};let p=a[1];const g=(A=++a[1])=>(p!==A&&!h.size&&(p=A,w.forEach(([P])=>{const R=P[1](A);R>d&&(d=R)})),d),y=A=>(P,R)=>{const j=[...P];j[1]=[A,...j[1]],f(j,R)},w=new Map,v=(A,P)=>{if((i_?"production":void 0)!=="production"&&w.has(A))throw new Error("prop listener already exists");if(h.size){const R=P[3](y(A));w.set(A,[P,R])}else w.set(A,[P])},b=A=>{var P;const R=w.get(A);R&&(w.delete(A),(P=R[1])==null||P.call(R))},_=A=>(h.add(A),h.size===1&&w.forEach(([R,j],H)=>{if((i_?"production":void 0)!=="production"&&j)throw new Error("remove already exists");const K=R[3](y(H));w.set(H,[R,K])}),()=>{h.delete(A),h.size===0&&w.forEach(([R,j],H)=>{j&&(j(),w.set(H,[R]))})}),x=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),S=e(x,{deleteProperty(A,P){const R=Reflect.get(A,P);b(P);const j=Reflect.deleteProperty(A,P);return j&&f(["delete",[P],R]),j},set(A,P,R,j){const H=Reflect.has(A,P),K=Reflect.get(A,P,j);if(H&&(t(K,R)||o.has(R)&&t(K,o.get(R))))return!0;b(P),d2(R)&&(R=rue(R)||R);let T=R;if(R instanceof Promise)R.then(I=>{R.status="fulfilled",R.value=I,f(["resolve",[P],I])}).catch(I=>{R.status="rejected",R.reason=I,f(["reject",[P],I])});else{!ou.has(R)&&n(R)&&(T=c(R));const I=!U0.has(T)&&ou.get(T);I&&v(P,I)}return Reflect.set(A,P,T,j),f(["set",[P],R,K]),!0}});o.set(l,S);const N=[x,g,i,_];return ou.set(S,N),Reflect.ownKeys(l).forEach(A=>{const P=Object.getOwnPropertyDescriptor(l,A);"value"in P&&(S[A]=l[A],delete P.value,delete P.writable),Object.defineProperty(x,A,P)}),S})=>[c,ou,U0,t,e,n,r,s,i,o,a],[iue]=sue();function bn(t={}){return iue(t)}function Hr(t,e,n){const r=ou.get(t);(i_?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function vb(t,e){const n=ou.get(t);(i_?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function Rf(t){return U0.add(t),t}function Gr(t,e,n,r){let s=t[e];return Hr(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function oue(t){const e=bn({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var T5={};const ue={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof T5<"u"?T5.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},Eb={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=ue.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var aue=20,cue=1,Df=1e6,N5=1e6,lue=-7,uue=21,due=!1,Mv="[big.js] ",ep=Mv+"Invalid ",VC=ep+"decimal places",hue=ep+"rounding mode",_7=Mv+"Division by zero",rn={},nc=void 0,fue=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function C7(){function t(e){var n=this;if(!(n instanceof t))return e===nc?C7():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(ep+"value");e=e===0&&1/e<0?"-0":String(e)}pue(n,e)}n.constructor=t}return t.prototype=rn,t.DP=aue,t.RM=cue,t.NE=lue,t.PE=uue,t.strict=due,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function pue(t,e){var n,r,s;if(!fue.test(e))throw Error(ep+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function tp(t,e,n,r){var s=t.c;if(n===nc&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(hue);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==nc))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==nc||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function np(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}rn.abs=function(){var t=new this.constructor(this);return t.s=1,t};rn.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};rn.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>Df)throw Error(VC);if(!s[0])throw Error(_7);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),y=g.length,w=t,v=w.c=[],b=0,_=o+(w.e=e.e-t.e)+1;for(w.s=i,i=_<0?0:_,h.unshift(0);y++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(y=g.length))u=a>y?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=y==a?s:h;y;){if(g[--y]<c[y]){for(d=y;d&&!g[--d];)g[d]=9;--g[d],g[y]+=10}g[y]-=c[y]}for(;!g[0];)g.shift()}else break}v[b++]=u?l:++l,g[0]&&u?g[y]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==nc)&&i--);return!v[0]&&b!=1&&(v.shift(),w.e--,_--),b>_&&tp(w,_,n.RM,g[0]!==nc),w};rn.eq=function(t){return this.cmp(t)===0};rn.gt=function(t){return this.cmp(t)>0};rn.gte=function(t){return this.cmp(t)>-1};rn.lt=function(t){return this.cmp(t)<0};rn.lte=function(t){return this.cmp(t)<1};rn.minus=rn.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};rn.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(_7);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};rn.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};rn.plus=rn.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};rn.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-N5||t>N5)throw Error(ep+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};rn.prec=function(t,e){if(t!==~~t||t<1||t>Df)throw Error(ep+"precision");return tp(new this.constructor(this),t,e)};rn.round=function(t,e){if(t===nc)t=0;else if(t!==~~t||t<-Df||t>Df)throw Error(VC);return tp(new this.constructor(this),t+this.e+1,e)};rn.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(Mv+"No square root");i=Math.sqrt(+np(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return tp(t,(s.DP-=4)+t.e+1,s.RM)};rn.times=rn.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};rn.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==nc){if(t!==~~t||t<0||t>Df)throw Error(VC);for(n=tp(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return np(n,!0,!!r)};rn.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==nc){if(t!==~~t||t<0||t>Df)throw Error(VC);for(n=tp(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return np(n,!1,!!r)};rn[Symbol.for("nodejs.util.inspect.custom")]=rn.toJSON=rn.toString=function(){var t=this,e=t.constructor;return np(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};rn.toNumber=function(){var t=+np(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(Mv+"Imprecise conversion");return t};rn.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==nc){if(t!==~~t||t<1||t>Df)throw Error(ep+"precision");for(n=tp(new r(n),t,e);n.c.length<t;)n.c.push(0)}return np(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};rn.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(Mv+"valueOf disallowed");return np(t,t.e<=e.NE||t.e>=e.PE,!0)};var i0=C7();const gue={bigNumber(t){return t?new i0(t):new i0(0)},multiply(t,e){if(t===void 0||e===void 0)return new i0(0);const n=new i0(t),r=new i0(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},mue=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],yue=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],wue=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],bue={getERC20Abi:t=>ue.USDT_CONTRACT_ADDRESSES.includes(t)?wue:mue,getSwapAbi:()=>yue},Oi={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},it={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function h2(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const nt={setItem(t,e){B0()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(B0())return localStorage.getItem(t)||void 0},removeItem(t){B0()&&localStorage.removeItem(t)},clear(){B0()&&localStorage.clear()}};function B0(){return typeof window<"u"&&typeof localStorage<"u"}function tl(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var P5={};const f2=(typeof process<"u"&&typeof P5<"u"?P5.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",A7=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]},{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]}],vue="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",en={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:f2,SECURE_SITE_DASHBOARD:`${f2}/dashboard`,SECURE_SITE_FAVICON:`${f2}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld","coinbase"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},Te={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Te.getActiveNamespace(),e=Te.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{nt.setItem(it.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=nt.getItem(it.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{nt.removeItem(it.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{nt.setItem(it.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{nt.setItem(it.ACTIVE_CAIP_NETWORK_ID,t),Te.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return nt.getItem(it.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{nt.removeItem(it.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=h2(t);nt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Te.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),nt.setItem(it.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=nt.getItem(it.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=h2(t);nt.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return nt.getItem(it.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=h2(t);return nt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{nt.setItem(it.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return nt.getItem(it.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{nt.removeItem(it.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return nt.getItem(it.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=nt.getItem(it.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{nt.setItem(it.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return nt.getItem(it.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=nt.getItem(it.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));nt.setItem(it.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Te.getConnectedNamespaces();e.includes(t)||(e.push(t),Te.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Te.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Te.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return nt.getItem(it.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{nt.setItem(it.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{nt.removeItem(it.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=nt.getItem(it.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Te.getBalanceCache();nt.setItem(it.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Te.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Te.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Te.getBalanceCache();e[t.caipAddress]=t,nt.setItem(it.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=nt.getItem(it.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Te.getBalanceCache();nt.setItem(it.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Te.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Te.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Te.getNativeBalanceCache();e[t.caipAddress]=t,nt.setItem(it.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=nt.getItem(it.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Te.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Te.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Te.getEnsCache();e[t.address]=t,nt.setItem(it.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Te.getEnsCache();nt.setItem(it.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=nt.getItem(it.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Te.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Te.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Te.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},nt.setItem(it.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Te.getIdentityCache();nt.setItem(it.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{nt.removeItem(it.PORTFOLIO_CACHE),nt.removeItem(it.NATIVE_BALANCE_CACHE),nt.removeItem(it.ENS_CACHE),nt.removeItem(it.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{nt.setItem(it.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=nt.getItem(it.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=Te.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===ue.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};nt.setItem(it.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=nt.getItem(it.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=Te.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),nt.setItem(it.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=nt.getItem(it.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=Te.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),nt.setItem(it.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=Te.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),nt.setItem(it.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(Te.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},We={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return We.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=en.TEN_SEC_MS:!0},isAllowedRetry(t,e=en.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(We.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+en.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(We.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!We.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Te.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,We.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return ue.W3M_API_URL},getBlockchainApiUrl(){return ue.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return ue.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?en.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in ue.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function o0(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class jv{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await o0(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await o0(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await o0(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await o0(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await o0(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const Eue={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?en.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(We.isTelegram()){if(We.isIos())return t.filter(e=>e!=="google");if(We.isMac())return t.filter(e=>e!=="x");if(We.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},Je=bn({features:en.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:en.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),ge={state:Je,subscribeKey(t,e){return Gr(Je,t,e)},setOptions(t){Object.assign(Je,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...Je.remoteFeatures,...t};Je.remoteFeatures=e,(n=Je.remoteFeatures)!=null&&n.socials&&(Je.remoteFeatures.socials=Eue.filterSocialsByPlatform(Je.remoteFeatures.socials))},setFeatures(t){if(!t)return;Je.features||(Je.features=en.DEFAULT_FEATURES);const e={...Je.features,...t};Je.features=e},setProjectId(t){Je.projectId=t},setCustomRpcUrls(t){Je.customRpcUrls=t},setAllWallets(t){Je.allWallets=t},setIncludeWalletIds(t){Je.includeWalletIds=t},setExcludeWalletIds(t){Je.excludeWalletIds=t},setFeaturedWalletIds(t){Je.featuredWalletIds=t},setTokens(t){Je.tokens=t},setTermsConditionsUrl(t){Je.termsConditionsUrl=t},setPrivacyPolicyUrl(t){Je.privacyPolicyUrl=t},setCustomWallets(t){Je.customWallets=t},setIsSiweEnabled(t){Je.isSiweEnabled=t},setIsUniversalProvider(t){Je.isUniversalProvider=t},setSdkVersion(t){Je.sdkVersion=t},setMetadata(t){Je.metadata=t},setDisableAppend(t){Je.disableAppend=t},setEIP6963Enabled(t){Je.enableEIP6963=t},setDebug(t){Je.debug=t},setEnableWalletConnect(t){Je.enableWalletConnect=t},setEnableWalletGuide(t){Je.enableWalletGuide=t},setEnableAuthLogger(t){Je.enableAuthLogger=t},setEnableWallets(t){Je.enableWallets=t},setPreferUniversalLinks(t){Je.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){Je.hasMultipleAddresses=t},setSIWX(t){Je.siwx=t},setConnectMethodsOrder(t){Je.features={...Je.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){Je.features={...Je.features,walletFeaturesOrder:t}},setSocialsOrder(t){Je.remoteFeatures={...Je.remoteFeatures,socials:t}},setCollapseWallets(t){Je.features={...Je.features,collapseWallets:t}},setEnableEmbedded(t){Je.enableEmbedded=t},setAllowUnsupportedChain(t){Je.allowUnsupportedChain=t},setManualWCControl(t){Je.manualWCControl=t},setEnableNetworkSwitch(t){Je.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(Je.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){Je.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return Je.universalProviderConfigOverride},getSnapshot(){return vb(Je)}},xue=Object.freeze({enabled:!0,events:[]}),_ue=new jv({baseUrl:We.getAnalyticsUrl(),clientId:null}),Cue=5,Aue=60*1e3,$l=bn({...xue}),Sue={state:$l,subscribeKey(t,e){return Gr($l,t,e)},async sendError(t,e){if(!$l.enabled)return;const n=Date.now();if($l.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<Aue}).length>=Cue)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};$l.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=ge.state;await _ue.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:We.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){$l.enabled=!0},disable(){$l.enabled=!1},clearEvents(){$l.events=[]}};class Jm extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,Jm.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,Jm):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function k5(t,e){const n=t instanceof Jm?t:new Jm(t instanceof Error?t.message:String(t),e,t);throw Sue.sendError(n,n.category),n}function Vi(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return k5(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return k5(a,e)}},n[r]=i}else n[r]=s}),n}const qa={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},Iue={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===qa.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${qa.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===qa.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${qa.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===ue.CHAIN.SOLANA&&t===qa.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${qa.COINBASE.url}/dapp?cb_url=${r}`)}},bi=bn({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),Tue={state:bi,subscribeNetworkImages(t){return Hr(bi.networkImages,()=>t(bi.networkImages))},subscribeKey(t,e){return Gr(bi,t,e)},subscribe(t){return Hr(bi,()=>t(bi))},setWalletImage(t,e){bi.walletImages[t]=e},setNetworkImage(t,e){bi.networkImages[t]=e},setChainImage(t,e){bi.chainImages[t]=e},setConnectorImage(t,e){bi.connectorImages={...bi.connectorImages,[t]:e}},setTokenImage(t,e){bi.tokenImages[t]=e},setCurrencyImage(t,e){bi.currencyImages[t]=e}},Xo=Vi(Tue),Nue={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},p2=bn({networkImagePromises:{}}),S7={async fetchWalletImage(t){if(t)return await Ke._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(p2.networkImagePromises[t]||(p2.networkImagePromises[t]=Ke._fetchNetworkImage(t)),await p2.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Xo.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Xo.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Xo.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Xo.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return Xo.state.connectorImages[t.imageId]},getChainImage(t){return Xo.state.networkImages[Nue[t]]}},Ul=bn({message:"",variant:"info",open:!1}),Pue={state:Ul,subscribeKey(t,e){return Gr(Ul,t,e)},open(t,e){const{debug:n}=ge.state,{shortMessage:r,longMessage:s}=t;n&&(Ul.message=r,Ul.variant=e,Ul.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Ul.open=!1,Ul.message="",Ul.variant="info"}},Zn=Vi(Pue),kue=We.getAnalyticsUrl(),Oue=new jv({baseUrl:kue,clientId:null}),Rue=["MODAL_CREATED"],mc=bn({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),tn={state:mc,subscribe(t){return Hr(mc,()=>t(mc))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ge.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Ie.state.address;if(Rue.includes(t.data.event)||typeof window>"u")return;await Oue.post({path:"/e",params:tn.getSdkProperties(),body:{eventId:We.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),mc.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===ue.HTTP_STATUS_CODES.FORBIDDEN&&!mc.reportedErrors.FORBIDDEN&&(Zn.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${B0()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),mc.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;mc.timestamp=Date.now(),mc.data=t,(e=ge.state.features)!=null&&e.analytics&&tn._sendAnalyticsEvent(mc)}},Due=We.getApiUrl(),Bs=new jv({baseUrl:Due,clientId:null}),$ue=40,O5=4,Uue=20,ct=bn({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Ke={state:ct,subscribeKey(t,e){return Gr(ct,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ge.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return ge.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Bs.baseUrl}/getWalletImage/${t}`,n=await Bs.getBlob({path:e,params:Ke._getSdkProperties()});Xo.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Bs.baseUrl}/public/getAssetImage/${t}`,n=await Bs.getBlob({path:e,params:Ke._getSdkProperties()});Xo.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Bs.baseUrl}/public/getAssetImage/${t}`,n=await Bs.getBlob({path:e,params:Ke._getSdkProperties()});Xo.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Bs.baseUrl}/public/getCurrencyImage/${t}`,n=await Bs.getBlob({path:e,params:Ke._getSdkProperties()});Xo.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Bs.baseUrl}/public/getTokenImage/${t}`,n=await Bs.getBlob({path:e,params:Ke._getSdkProperties()});Xo.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return We.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===qa.COINBASE.id?!0:B.state.activeChain==="solana"&&(n.id===qa.SOLFLARE.id||n.id===qa.PHANTOM.id)):t},async fetchProjectConfig(){return(await Bs.get({path:"/appkit/v1/config",params:Ke._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Bs.get({path:"/projects/v1/origins",params:Ke._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===ue.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=ue.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=B.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!S7.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Ke._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Pe.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Ke._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Ke._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Ke._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];Ke._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(qa).map(o=>o.id));const r=await Bs.get({path:"/getWallets",params:{...Ke._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:Ke._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=ge.state;if(t!=null&&t.length){const e={...Ke._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??O5,include:t},{data:n}=await Ke.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Ke._fetchWalletImage(i))),ct.featured=r,ct.allFeatured=r}},async fetchRecommendedWallets(){try{ct.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=ge.state,r=[...e??[],...n??[]].filter(Boolean),s=B.getRequestedCaipNetworkIds().join(","),i={page:1,entries:O5,include:t,exclude:r,chains:s},{data:o,count:a}=await Ke.fetchWallets(i),c=Te.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>Ke._fetchWalletImage(d))),ct.recommended=o,ct.allRecommended=o,ct.count=a??0}catch{}finally{ct.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=ge.state,s=B.getRequestedCaipNetworkIds().join(","),i=[...ct.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:$ue,include:e,exclude:i,chains:s},{data:a,count:c}=await Ke.fetchWallets(o),l=a.slice(0,Uue).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>Ke._fetchWalletImage(u))),ct.wallets=We.uniqueBy([...ct.wallets,...Ke._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),ct.count=c>ct.count?c:ct.count,ct.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Ke.fetchWallets(e);n&&n.forEach(r=>{ct.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=ge.state,s=B.getRequestedCaipNetworkIds().join(",");ct.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await Ke.fetchWallets(i);tn.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Ke._fetchWalletImage(c)),We.wait(300)]),ct.search=Ke._filterOutExtensions(o)},initPromise(t,e){const n=ct.promises[t];return n||(ct.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&Ke.initPromise("connectorImages",Ke.fetchConnectorImages),e&&Ke.initPromise("featuredWallets",Ke.fetchFeaturedWallets),n&&Ke.initPromise("recommendedWallets",Ke.fetchRecommendedWallets),r&&Ke.initPromise("networkImages",Ke.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=ge.state.features)!=null&&t.analytics&&Ke.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Bs.get({path:"/getAnalyticsConfig",params:Ke._getSdkProperties()});ge.setFeatures({analytics:t})}catch{ge.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){ct.featured=ct.allFeatured,ct.recommended=ct.allRecommended;return}const e=B.getRequestedCaipNetworkIds().join(",");ct.featured=ct.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),ct.recommended=ct.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),ct.filteredWallets=ct.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){ct.filteredWallets=[]},setFilterByNamespace(t){if(!t){ct.featured=ct.allFeatured,ct.recommended=ct.allRecommended;return}const e=B.getRequestedCaipNetworkIds().join(",");ct.featured=ct.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),ct.recommended=ct.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),ct.filteredWallets=ct.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},on=bn({view:"Connect",history:["Connect"],transactionStack:[]}),Bue={state:on,subscribeKey(t,e){return Gr(on,t,e)},pushTransactionStack(t){on.transactionStack.push(t)},popTransactionStack(t){const e=on.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),et.goBack();break;case"cancel":s==null||s(),et.goBack();break}},push(t,e){t!==on.view&&(on.view=t,on.history.push(t),on.data=e)},reset(t,e){on.view=t,on.history=[t],on.data=e},replace(t,e){on.history.at(-1)===t||(on.view=t,on.history[on.history.length-1]=t,on.data=e)},goBack(){var r;const t=B.state.activeCaipAddress,e=et.state.view==="ConnectingFarcaster",n=!t&&e;if(on.history.length>1){on.history.pop();const[s]=on.history.slice(-1);s&&(t&&s==="Connect"?on.view="Account":on.view=s)}else Kt.close();(r=on.data)!=null&&r.wallet&&(on.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Ie.setFarcasterUrl(void 0,B.state.activeChain);const a=Pe.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=vb(ge.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(on.history.length>1){on.history=on.history.slice(0,t+1);const[e]=on.history.slice(-1);e&&(on.view=e)}},goBackOrCloseModal(){et.state.history.length>1?et.goBack():Kt.close()}},et=Vi(Bue),yc=bn({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),UN={state:yc,subscribe(t){return Hr(yc,()=>t(yc))},setThemeMode(t){yc.themeMode=t;try{const e=Pe.getAuthConnector();if(e){const n=UN.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:tl(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){yc.themeVariables={...yc.themeVariables,...t};try{const e=Pe.getAuthConnector();if(e){const n=UN.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:tl(yc.themeVariables,yc.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return vb(yc)}},Zs=Vi(UN),I7={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},$t=bn({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...I7},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),Lue={state:$t,subscribe(t){return Hr($t,()=>{t($t)})},subscribeKey(t,e){return Gr($t,t,e)},initialize(t){t.forEach(e=>{const n=Te.getConnectedConnectorId(e);n&&Pe.setConnectorId(n,e)})},setActiveConnector(t){t&&($t.activeConnector=Rf(t))},setConnectors(t){t.filter(s=>!$t.allConnectors.some(i=>i.id===s.id&&Pe.getConnectorName(i.name)===Pe.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&$t.allConnectors.push(Rf(s))});const n=Pe.getEnabledNamespaces(),r=Pe.getEnabledConnectors(n);$t.connectors=Pe.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys($t.filterByNamespaceMap).forEach(e=>{$t.filterByNamespaceMap[e]=!1}),t.forEach(e=>{$t.filterByNamespaceMap[e]=!0}),Pe.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){$t.filterByNamespaceMap[t]=e,Pe.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Pe.getEnabledNamespaces(),e=Pe.getEnabledConnectors(t),n=Pe.areAllNamespacesEnabled();$t.connectors=Pe.mergeMultiChainConnectors(e),n?Ke.clearFilterByNamespaces():Ke.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries($t.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return $t.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values($t.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Pe.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===ue.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Pe.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===ue.CONNECTOR_ID.AUTH){const s=t,i=vb(ge.state),o=Zs.getSnapshot().themeMode,a=Zs.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:tl(a,o)}),Pe.setConnectors([t])}else Pe.setConnectors([t])},getAuthConnector(t){var r;const e=t||B.state.activeChain,n=$t.connectors.find(s=>s.id===ue.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return $t.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return $t.allConnectors.find(e=>e.id===t)},getConnector(t,e){return $t.allConnectors.filter(r=>r.chain===B.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=vb(ge.state),r=Zs.getSnapshot().themeMode,s=Zs.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:tl(s,r)})},getConnectorsByNamespace(t){const e=$t.allConnectors.filter(n=>n.chain===t);return Pe.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=Pe.getConnector(t.id,t.rdns),n=B.state.activeChain;Iue.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?et.push("ConnectingExternal",{connector:e}):et.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Pe.getConnectorsByNamespace(t):Pe.mergeMultiChainConnectors($t.allConnectors)},setFilterByNamespace(t){$t.filterByNamespace=t,$t.connectors=Pe.getConnectors(t),Ke.setFilterByNamespace(t)},setConnectorId(t,e){t&&($t.activeConnectorIds={...$t.activeConnectorIds,[e]:t},Te.setConnectedConnectorId(e,t))},removeConnectorId(t){$t.activeConnectorIds={...$t.activeConnectorIds,[t]:void 0},Te.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return $t.activeConnectorIds[t]},isConnected(t){return t?!!$t.activeConnectorIds[t]:Object.values($t.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){$t.activeConnectorIds={...I7}}},Pe=Vi(Lue),xb={getConnectionStatus(t,e){const n=Pe.state.activeConnectorIds[e],r=Le.state.connections.get(e)??[];return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},validateAccountSwitch({namespace:t,connection:e,address:n}){if(t===ue.CHAIN.BITCOIN){if(!n)throw new Error("Address parameter is required for switching bip122 connection");const{type:s}=e.accounts.find(i=>i.address.toLowerCase()===n.toLowerCase())??{};if(typeof s=="string"&&s!=="payment")throw new Error(`Switching to non-payment accounts is not allowed for ${t}`)}},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},filterConnectionsByAccountType(t,e){return t.map(n=>{const r=n.accounts.filter(s=>typeof s.type=="string"?s.type.toLowerCase()===e.toLowerCase():!0);return{...n,accounts:r}})},getConnectionsData(t){const e=Le.state.connections.get(t)??[],n=e.filter(a=>!a.recent),r=Pe.state.activeConnectorIds[t],i=e.filter(a=>a.recent).filter(a=>Pe.getConnectorById(a.connectorId)),o=xb.excludeExistingConnections([...n.map(a=>a.connectorId),...r?[r]:[]],i);return{connections:n,recentConnections:o}}};var Zm={};const Mue="https://secure.walletconnect.org/sdk",jue=(typeof process<"u"&&typeof Zm<"u"?Zm.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||Mue,Fue=(typeof process<"u"&&typeof Zm<"u"?Zm.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",zue=(typeof process<"u"&&typeof Zm<"u"?Zm.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Fe={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Cr={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Hue=1e3,Jc={checkNamespaceConnectorId(t,e){return Pe.getConnectorId(t)===e},isSocialProvider(t){return en.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&Pe.setActiveConnector(e),s==null||s(We.isMobile()&&t),r){const l=Kt.subscribeKey("open",u=>{u||(et.state.view!==r&&et.replace(r),l(),a(new Error("Modal closed")))})}const c=B.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&Kt.close(),c(),o(Oi.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=B.subscribeKey("activeCaipAddress",s=>{s&&(Kt.close(),r(),e(Oi.parseCaipAddress(s)))});Le.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=Ie.state.socialWindow,i=Ie.state.socialProvider,o=!1,a=null;const c=B.subscribeKey("activeCaipAddress",l=>{l&&(e&&Kt.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===ue.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=Pe.getAuthConnector();if(g&&!o){s&&(s.close(),Ie.setSocialWindow(void 0,B.state.activeChain),s=Ie.state.socialWindow),o=!0;const y=f.data.resultUri;if(i&&tn.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}}),await g.provider.connectSocial(y),i){Te.setConnectedSocialProvider(i),await Le.connectExternal({id:g.id,type:g.type,socialUri:y},g.chain);const w=B.state.activeCaipAddress;if(!w){u(new Error("Failed to connect"));return}l(Oi.parseCaipAddress(w)),tn.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&tn.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&tn.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(Ie.setSocialProvider(t,B.state.activeChain),i=Ie.state.socialProvider,tn.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=Kt.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=Pe.getAuthConnector();if(p&&!Ie.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();Ie.setFarcasterUrl(g,B.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=Pe.getAuthConnector();a=We.returnOpenHref(`${ue.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){Ie.setSocialWindow(a,B.state.activeChain),s=Ie.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=Kt.subscribeKey("open",c=>{c||(et.state.view!==e&&et.replace(e),a(),i(new Error("Modal closed")))})}const o=B.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&Kt.close(),o(),s(Oi.parseCaipAddress(a)))})})},async updateEmail(){const t=Te.getConnectedConnectorId(B.state.activeChain),e=Pe.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==ue.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return et.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(Kt.close(),clearInterval(i),o(),r({email:a}))},Hue),o=Kt.subscribeKey("open",a=>{a||(et.state.view!=="Connect"&&et.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){var n;return B.checkIfSmartAccountEnabled()&&((n=Ie.state.preferredAccountTypes)==null?void 0:n[t])===Cr.ACCOUNT_TYPES.EOA}},sh=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),nr=bn({...sh}),Gue={state:nr,subscribeKey(t,e){return Gr(nr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=We.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){nr.message=sh.message,nr.variant=sh.variant,nr.svg=sh.svg,nr.open=sh.open,nr.autoClose=sh.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=sh.autoClose}){nr.open?(nr.open=!1,setTimeout(()=>{nr.message=t,nr.variant=n,nr.svg=e,nr.open=!0,nr.autoClose=r},150)):(nr.message=t,nr.variant=n,nr.svg=e,nr.open=!0,nr.autoClose=r)}},na=Gue,fn=bn({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),Wue={state:fn,subscribe(t){return Hr(fn,()=>t(fn))},setLastNetworkInView(t){fn.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");fn.loading=!0;try{const s=await Ze.fetchTransactions({account:t,cursor:fn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=L0.filterSpamTransactions(s.data),o=L0.filterByConnectedChain(i),a=[...fn.transactions,...o];fn.loading=!1,e==="coinbase"?fn.coinbaseTransactions=L0.groupTransactionsByYearAndMonth(fn.coinbaseTransactions,s.data):(fn.transactions=a,fn.transactionsByYear=L0.groupTransactionsByYearAndMonth(fn.transactionsByYear,o)),fn.empty=a.length===0,fn.next=s.next?s.next:void 0}catch{const i=B.state.activeChain;tn.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:ge.state.projectId,cursor:fn.next,isSmartAccount:((r=Ie.state.preferredAccountTypes)==null?void 0:r[i])===Cr.ACCOUNT_TYPES.SMART_ACCOUNT}}),na.showError("Failed to fetch transactions"),fn.loading=!1,fn.empty=!0,fn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=B.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){fn.next=void 0},resetTransactions(){fn.transactions=[],fn.transactionsByYear={},fn.lastNetworkInView=void 0,fn.loading=!1,fn.empty=!1,fn.next=void 0}},L0=Vi(Wue,"API_ERROR"),Pt=bn({connections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Vd;const que={state:Pt,subscribe(t){return Hr(Pt,()=>t(Pt))},subscribeKey(t,e){return Gr(Pt,t,e)},_getClient(){return Pt._client},setClient(t){Pt._client=Rf(t)},initialize(t){const e=Te.getConnections();for(const n of t){const r=n.namespace;if(r){const s=Pt.connections.get(r)??[],i=e[r]??[],o=[...s,...i];Pt.connections.set(r,o)}}},async connectWalletConnect(){var t,e,n,r;if(We.isTelegram()||We.isSafari()&&We.isIos()){if(Vd){await Vd,Vd=void 0;return}if(!We.isPairingExpired(Pt==null?void 0:Pt.wcPairingExpiry)){const s=Pt.wcUri;Pt.wcUri=s;return}Vd=(e=(t=Le._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),Le.state.status="connecting",await Vd,Vd=void 0,Pt.wcPairingExpiry=void 0,Le.state.status="connected"}else await((r=(n=Le._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=Le._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&B.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=Le._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||B.state.activeChain;e&&Pe.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;Kt.setLoading(!0,B.state.activeChain);const n=Pe.getAuthConnector();n&&(Ie.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Te.setPreferredAccountTypes(Ie.state.preferredAccountTypes??{[e]:t}),await Le.reconnectExternal(n),Kt.setLoading(!1,B.state.activeChain),tn.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=B.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=Le._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=Le._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=Le._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=Le._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=Le._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=Le._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=Le._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=Le._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=Le._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=Le._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=Le._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=Le._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Pt.wcUri=void 0,Pt.wcPairingExpiry=void 0,Pt.wcLinking=void 0,Pt.recentWallet=void 0,Pt.status="disconnected",L0.resetTransactions(),Te.deleteWalletConnectDeepLink()},resetUri(){Pt.wcUri=void 0,Pt.wcPairingExpiry=void 0,Vd=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=Le.state;t&&Te.setWalletConnectDeepLink(t),e&&Te.setAppKitRecent(e),tn.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=et.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Pt.wcBasic=t},setUri(t){Pt.wcUri=t,Pt.wcPairingExpiry=We.getPairingExpiry()},setWcLinking(t){Pt.wcLinking=t},setWcError(t){Pt.wcError=t,Pt.buffering=!1},setRecentWallet(t){Pt.recentWallet=t},setBuffering(t){Pt.buffering=t},setStatus(t){Pt.status=t},setIsSwitchingConnection(t){Pt.isSwitchingConnection=t},async disconnect({id:t,namespace:e}={}){var n;try{await((n=Le._getClient())==null?void 0:n.disconnect({id:t,chainNamespace:e}))}catch(r){throw new Jm("Failed to disconnect","INTERNAL_SDK_ERROR",r)}},setConnections(t,e){Pt.connections=new Map(Pt.connections.set(e,t))},async handleAuthAccountSwitch({address:t,connection:e,namespace:n}){var o;const r=(o=e.accounts.find(a=>a.type==="smartAccount"))==null?void 0:o.address,i=(r==null?void 0:r.toLowerCase())===t.toLowerCase()&&Jc.canSwitchToSmartAccount(n)?"smartAccount":"eoa";await Le.setPreferredAccountType(i,n)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=Pe.getConnectorById(t.connectorId),s=t.connectorId===ue.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);const i=await Le.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return s&&n&&await Le.handleAuthAccountSwitch({address:n,connection:t,namespace:e}),i==null?void 0:i.address},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=Pe.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===ue.CONNECTOR_ID.AUTH,a=t.connectorId===ue.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&Jc.isSocialProvider(i)){const{address:d}=await Jc.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){Kt.open({view:"ConnectingFarcaster"})},onConnect(){et.replace("ProfileWallets")}});c=d}else{const{address:d}=await Jc.connectEmail({closeModalOnConnect:r,onOpen(){Kt.open({view:"EmailLogin"})},onConnect(){et.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await Jc.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){Kt.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){et.replace("ProfileWallets")}});c=d}else{const d=await Le.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await Le.handleAuthAccountSwitch({address:n,connection:t,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){xb.validateAccountSwitch({namespace:n,connection:t,address:e});let i;const o=Ie.getCaipAddress(n);if(o){const{address:c}=Oi.parseCaipAddress(o);i=c}const a=xb.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await Le.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await Le.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},Le=Vi(que),wp=bn({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),rc={state:wp,subscribe(t){return Hr(wp,()=>t(wp))},subscribeOpen(t){return Gr(wp,"open",t)},set(t){Object.assign(wp,{...wp,...t})}};function Vue(t){const e=Array.from(B.state.chains.keys());let n=[];return t?(n.push([t,B.state.chains.get(t)]),Jc.checkNamespaceConnectorId(t,ue.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&Jc.checkNamespaceConnectorId(r,ue.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,B.state.chains.get(r)])}):Jc.checkNamespaceConnectorId(t,ue.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&Jc.checkNamespaceConnectorId(r,ue.CONNECTOR_ID.AUTH)&&n.push([r,B.state.chains.get(r)])})):n=Array.from(B.state.chains.entries()),n}function T7(){var r,s;const t=((r=B.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=B.state.activeCaipNetwork)==null?void 0:s.id)||1,n=en.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}const Kue={async getTokenList(){var r;const t=B.state.activeCaipNetwork,e=await Ze.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=B.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(Le==null?void 0:Le.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await Ze.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await Ze.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=Le.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await ER.getMyTokensWithBalance(t);return Ie.setTokenBalance(e,B.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:T7(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Xt=bn({tokenBalances:[],loading:!1}),Que={state:Xt,subscribe(t){return Hr(Xt,()=>t(Xt))},subscribeKey(t,e){return Gr(Xt,t,e)},setToken(t){t&&(Xt.token=Rf(t))},setTokenAmount(t){Xt.sendTokenAmount=t},setReceiverAddress(t){Xt.receiverAddress=t},setReceiverProfileImageUrl(t){Xt.receiverProfileImageUrl=t},setReceiverProfileName(t){Xt.receiverProfileName=t},setNetworkBalanceInUsd(t){Xt.networkBalanceInUSD=t},setLoading(t){Xt.loading=t},async sendToken(){var t;try{switch(zt.setLoading(!0),(t=B.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await zt.sendEvmToken();return;case"solana":await zt.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{zt.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=B.state.activeChain,e=(n=Ie.state.preferredAccountTypes)==null?void 0:n[t];if(!zt.state.sendTokenAmount||!zt.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!zt.state.token)throw new Error("A token is required");(r=zt.state.token)!=null&&r.address?(tn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Cr.ACCOUNT_TYPES.SMART_ACCOUNT,token:zt.state.token.address,amount:zt.state.sendTokenAmount,network:((s=B.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await zt.sendERC20Token({receiverAddress:zt.state.receiverAddress,tokenAddress:zt.state.token.address,sendTokenAmount:zt.state.sendTokenAmount,decimals:zt.state.token.quantity.decimals})):(tn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Cr.ACCOUNT_TYPES.SMART_ACCOUNT,token:zt.state.token.symbol||"",amount:zt.state.sendTokenAmount,network:((i=B.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await zt.sendNativeToken({receiverAddress:zt.state.receiverAddress,sendTokenAmount:zt.state.sendTokenAmount,decimals:zt.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Xt.loading=!0;const e=(i=B.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=B.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=B.state.activeCaipAddress,s=r?We.getPlainAddress(r):void 0;if(Xt.lastRetry&&!We.isAllowedRetry(Xt.lastRetry,30*en.ONE_SEC_MS))return Xt.loading=!1,[];try{if(s&&e&&n){const a=await ER.getMyTokensWithBalance();return Xt.tokenBalances=a,Xt.lastRetry=void 0,a}}catch(a){Xt.lastRetry=Date.now(),t==null||t(a),na.showError("Token Balance Unavailable")}finally{Xt.loading=!1}return[]},fetchNetworkBalance(){if(Xt.tokenBalances.length===0)return;const t=Kue.mapBalancesToSwapTokens(Xt.tokenBalances);if(!t)return;const e=t.find(n=>n.address===T7());e&&(Xt.networkBalanceInUSD=e?gue.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;et.pushTransactionStack({});const e=t.receiverAddress,n=Ie.state.address,r=Le.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await Le.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),tn.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=Ie.state.preferredAccountTypes)==null?void 0:i.eip155)===Cr.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=zt.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=B.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=Le._getClient())==null||c.updateBalance("eip155"),zt.resetSend()},async sendERC20Token(t){et.pushTransactionStack({onSuccess(){et.replace("Account")}});const e=Le.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Ie.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=We.getPlainAddress(t.tokenAddress);await Le.writeContract({fromAddress:Ie.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:bue.getERC20Abi(n),chainNamespace:"eip155"}),zt.resetSend()}},async sendSolanaToken(){var t;if(!zt.state.sendTokenAmount||!zt.state.receiverAddress)throw new Error("An amount and receiver address are required");et.pushTransactionStack({onSuccess(){et.replace("Account")}}),await Le.sendTransaction({chainNamespace:"solana",to:zt.state.receiverAddress,value:zt.state.sendTokenAmount}),(t=Le._getClient())==null||t.updateBalance("solana"),zt.resetSend()},resetSend(){Xt.token=void 0,Xt.sendTokenAmount=void 0,Xt.receiverAddress=void 0,Xt.receiverProfileImageUrl=void 0,Xt.receiverProfileName=void 0,Xt.loading=!1,Xt.tokenBalances=[]}},zt=Vi(Que),g2={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},q1={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Oe=bn({chains:oue(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),Yue={state:Oe,subscribe(t){return Hr(Oe,()=>{t(Oe)})},subscribeKey(t,e){return Gr(Oe,t,e)},subscribeChainProp(t,e,n){let r;return Hr(Oe.chains,()=>{var i;const s=n||Oe.activeChain;if(s){const o=(i=Oe.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=Te.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=ge.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Oe.noAdapters=!0),Oe.noAdapters||(Oe.activeChain=a==null?void 0:a.namespace,Oe.activeCaipNetwork=i,B.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Oe.activeChain&&rc.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);B.state.chains.set(u,{namespace:u,networkState:bn({...q1,caipNetwork:d==null?void 0:d[0]}),accountState:bn(g2),caipNetworks:d??[],...n}),B.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Oe.activeChain===t){const r=Array.from(Oe.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&B.setActiveCaipNetwork(s)}}Oe.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){Oe.chains.set(t.namespace,{namespace:t.namespace,networkState:{...q1,caipNetwork:r[0]},accountState:g2,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),B.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Oe.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Oe.chains.set(t.chainNamespace,{...e,caipNetworks:r}),B.setRequestedCaipNetworks(r,t.chainNamespace),Pe.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Oe.chains.get(t);if(n){const o=((r=Oe.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&B.setActiveCaipNetwork(n.caipNetworks[0]),Oe.chains.set(t,{...n,caipNetworks:a}),B.setRequestedCaipNetworks(a||[],t),a.length===0&&Pe.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Oe.chains.get(t);n&&(n.networkState={...n.networkState||q1,...e},Oe.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Oe.chains.get(t);if(r){const s={...r.accountState||g2,...e};Oe.chains.set(t,{...r,accountState:s}),(Oe.chains.size===1||Oe.activeChain===t)&&(e.caipAddress&&(Oe.activeCaipAddress=e.caipAddress),Ie.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Oe.chains.get(t);if(n){const r={...n.networkState||q1,...e};Oe.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){B.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&Pe.removeConnectorId(n)},setActiveNamespace(t){var r,s;Oe.activeChain=t;const e=t?Oe.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Oe.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Oe.activeCaipNetwork=n,B.setChainNetworkData(t,{caipNetwork:n}),Te.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),rc.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Oe.activeChain!==t.chainNamespace&&B.setIsSwitchingNamespace(!0);const e=Oe.chains.get(t.chainNamespace);Oe.activeChain=t.chainNamespace,Oe.activeCaipNetwork=t,B.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Oe.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Oe.activeCaipAddress=void 0,B.setAccountProp("caipAddress",Oe.activeCaipAddress,t.chainNamespace),e&&Ie.replaceState(e.accountState),zt.resetSend(),rc.set({activeChain:Oe.activeChain,selectedNetworkId:(i=Oe.activeCaipNetwork)==null?void 0:i.caipNetworkId}),Te.setActiveCaipNetworkId(t.caipNetworkId),!B.checkIfSupportedNetwork(t.chainNamespace)&&ge.state.enableNetworkSwitch&&!ge.state.allowUnsupportedChain&&!Le.state.wcBasic&&B.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Oe.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==B.state.activeChain,n=(s=B.getNetworkData(t))==null?void 0:s.caipNetwork,r=B.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await B.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=B.state.chains.get(B.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=Oe.activeCaipNetwork)==null?void 0:o.id)})),r=B.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&Kt.close()}catch{et.goBack()}tn.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Oe.activeChain,n=Oe.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Oe.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Oe.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Oe.activeChain;if(e&&(n=e),!n)return;const r=(s=Oe.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Oe.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Oe.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return We.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Oe.chains.forEach(e=>{const n=B.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){B.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=B.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Pe.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Oe.chains.forEach(e=>{const n=B.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return Oe.activeCaipNetwork},getActiveCaipAddress(){return Oe.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Oe.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=B.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());B.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Oe.activeCaipNetwork,r=B.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Oe.activeChain)return!0;const e=B.getRequestedCaipNetworks(Oe.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){B.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=Eb.caipNetworkIdToNumber((r=Oe.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Oe.activeChain;if(!e||!t)return!1;const n=B.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){Kt.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Oe.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&en.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){B.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");Oe.activeCaipAddress=void 0,B.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),Pe.removeConnectorId(e)},setIsSwitchingNamespace(t){Oe.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Oe.chains.forEach(s=>{ue.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Oe.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=B.state.chains.get(t))==null?void 0:e.accountState:Ie.state},getNetworkData(t){var n;const e=t||Oe.activeChain;if(e)return(n=B.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=B.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Pe.state.filterByNamespace;return(t?[Oe.chains.get(t)]:Array.from(Oe.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?B.getRequestedCaipNetworks(t):B.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){Oe.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Oe.lastConnectedSIWECaipNetwork}},B=Vi(Yue),Jue={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},N7=We.getBlockchainApiUrl(),Ls=bn({clientId:null,api:new jv({baseUrl:N7,clientId:null}),supportedChains:{http:[],ws:[]}}),Ze={state:Ls,async get(t){const{st:e,sv:n}=Ze.getSdkProperties(),r=ge.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Ls.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=ge.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Ls.supportedChains.http.length||await Ze.getSupportedNetworks()}catch{return!1}return Ls.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await Ze.get({path:"v1/supported-chains"});return Ls.supportedChains=t,t}catch{return Ls.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await Ze.isNetworkSupported(e))return{avatar:"",name:""};const r=Te.getIdentityFromCacheForAddress(t);if(r)return r;const s=await Ze.get({path:`/v1/identity/${t}`,params:{sender:B.state.activeCaipAddress?We.getPlainAddress(B.state.activeCaipAddress):void 0}});return Te.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await Ze.isNetworkSupported((a=B.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?Ze.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await Ze.isNetworkSupported((o=B.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?Ze.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await Ze.isNetworkSupported((n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ze.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await Ze.isNetworkSupported((n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ls.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:ge.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await Ze.isNetworkSupported((r=B.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Ze.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=Ze.getSdkProperties();if(!await Ze.isNetworkSupported((s=B.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return Ze.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await Ze.isNetworkSupported((o=B.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Ls.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:en.CONVERT_SLIPPAGE_TOLERANCE},projectId:ge.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=Ze.getSdkProperties();if(!await Ze.isNetworkSupported((o=B.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Ze.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=Ze.getSdkProperties();if(!await Ze.isNetworkSupported((l=B.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return na.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Te.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await Ze.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return Te.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await Ze.isNetworkSupported((n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ze.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await Ze.isNetworkSupported((n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ze.get({path:`/v1/profile/reverse/${t}`,params:{sender:Ie.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await Ze.isNetworkSupported((n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ze.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await Ze.isNetworkSupported((i=B.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Ls.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await Ze.isNetworkSupported((a=B.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Ls.api.post({path:"/v1/generators/onrampurl",params:{projectId:ge.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await Ze.isNetworkSupported((e=B.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Ze.get({path:"/v1/onramp/options"})}catch{return Jue}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await Ze.isNetworkSupported((s=B.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Ls.api.post({path:"/v1/onramp/quote",params:{projectId:ge.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await Ze.isNetworkSupported((n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ze.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await Ze.isNetworkSupported((s=B.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Ls.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:ge.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Ls.clientId=t,Ls.api=new jv({baseUrl:N7,clientId:t})}},m2={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return vy(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},ER={async getMyTokensWithBalance(t){const e=Ie.state.address,n=B.state.activeCaipNetwork,r=Pe.getConnectorId("eip155")===ue.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=Te.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace==="eip155"&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await Ze.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=m2.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await Le.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await Le.walletGetAssets({account:t,chainFilter:[s]});if(!m2.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>m2.createBalance(l,e.caipNetworkId));return Te.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},Qi=bn({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),Zue={state:Qi,replaceState(t){t&&Object.assign(Qi,Rf(t))},subscribe(t){return B.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return B.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){B.setAccountProp("status",t,e)},getCaipAddress(t){return B.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?We.getPlainAddress(t):void 0;e===B.state.activeChain&&(B.state.activeCaipAddress=t),B.setAccountProp("caipAddress",t,e),B.setAccountProp("address",n,e)},setBalance(t,e,n){B.setAccountProp("balance",t,n),B.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){B.setAccountProp("profileName",t,e)},setProfileImage(t,e){B.setAccountProp("profileImage",t,e)},setUser(t,e){B.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){B.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){B.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){B.setAccountProp("currentTab",t,B.state.activeChain)},setTokenBalance(t,e){t&&B.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){B.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){B.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=B.getAccountProp("addressLabels",n)||new Map;r.set(t,e),B.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=B.getAccountProp("addressLabels",e)||new Map;n.delete(t),B.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){B.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){B.setAccountProp("preferredAccountTypes",{...Qi.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){Qi.preferredAccountTypes=t},setSocialProvider(t,e){t&&B.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){B.setAccountProp("socialWindow",t?Rf(t):void 0,e)},setFarcasterUrl(t,e){B.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Qi.balanceLoading=!0;const e=(i=B.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=B.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=B.state.activeCaipAddress,s=r?We.getPlainAddress(r):void 0;if(Qi.lastRetry&&!We.isAllowedRetry(Qi.lastRetry,30*en.ONE_SEC_MS))return Qi.balanceLoading=!1,[];try{if(s&&e&&n){const a=await ER.getMyTokensWithBalance();return Ie.setTokenBalance(a,n),Qi.lastRetry=void 0,Qi.balanceLoading=!1,a}}catch(a){Qi.lastRetry=Date.now(),t==null||t(a),na.showError("Token Balance Unavailable")}finally{Qi.balanceLoading=!1}return[]},resetAccount(t){B.resetAccount(t)}},Ie=Vi(Zue),Xue={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=B.state.activeCaipNetwork,r=et.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Ie.getCaipAddress(B.state.activeChain),o=t.chainNamespace!==B.state.activeChain,a=Ie.getCaipAddress(t.chainNamespace),l=Pe.getConnectorId(B.state.activeChain)===ue.CONNECTOR_ID.AUTH,u=ue.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?et.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?et.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):et.push("SwitchNetwork",{...r,network:t})}},Ms=bn({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),ede={state:Ms,subscribe(t){return Hr(Ms,()=>t(Ms))},subscribeKey(t,e){return Gr(Ms,t,e)},async open(t){var o,a;const e=Ie.state.status==="connected",n=t==null?void 0:t.namespace,r=B.state.activeChain,s=n&&n!==r,i=(o=B.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(Le.state.wcBasic?Ke.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Ke.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),Pe.setFilterByNamespace(t==null?void 0:t.namespace),Kt.setLoading(!0,n),n&&s){const c=((a=B.getNetworkData(n))==null?void 0:a.caipNetwork)||B.getRequestedCaipNetworks(n)[0];c&&Xue.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=B.state.noAdapters;ge.state.manualWCControl||c&&!i?We.isMobile()?et.reset("AllWallets"):et.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?et.reset(t.view,t.data):i?et.reset("Account"):et.reset("Connect")}Ms.open=!0,rc.set({open:!0}),tn.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=ge.state.enableEmbedded,e=!!B.state.activeCaipAddress;Ms.open&&tn.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Ms.open=!1,et.reset("Connect"),Kt.clearLoading(),t?e?et.replace("Account"):et.push("Connect"):rc.set({open:!1}),Le.resetUri()},setLoading(t,e){e&&Ms.loadingNamespaceMap.set(e,t),Ms.loading=t,rc.set({loading:t})},clearLoading(){Ms.loadingNamespaceMap.clear(),Ms.loading=!1},shake(){Ms.shake||(Ms.shake=!0,setTimeout(()=>{Ms.shake=!1},500))}},Kt=Vi(ede),lw={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},BN={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},tde={providers:A7,selectedProvider:null,error:null,purchaseCurrency:lw,paymentCurrency:BN,purchaseCurrencies:[lw],paymentCurrencies:[],quotesLoading:!1},kt=bn(tde),nde={state:kt,subscribe(t){return Hr(kt,()=>t(kt))},subscribeKey(t,e){return Gr(kt,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=B.state.activeChain===ue.CHAIN.SOLANA?"SOL":"USDC",n=Ie.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",vue),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",ge.state.projectId),kt.selectedProvider={...t,url:r.toString()}}else kt.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=A7.filter(r=>e.includes(r.name));kt.providers=n}else kt.providers=[]},setPurchaseCurrency(t){kt.purchaseCurrency=t},setPaymentCurrency(t){kt.paymentCurrency=t},setPurchaseAmount(t){LN.state.purchaseAmount=t},setPaymentAmount(t){LN.state.paymentAmount=t},async getAvailableCurrencies(){const t=await Ze.getOnrampOptions();kt.purchaseCurrencies=t.purchaseCurrencies,kt.paymentCurrencies=t.paymentCurrencies,kt.paymentCurrency=t.paymentCurrencies[0]||BN,kt.purchaseCurrency=t.purchaseCurrencies[0]||lw,await Ke.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await Ke.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;kt.quotesLoading=!0;try{const n=await Ze.getOnrampQuote({purchaseCurrency:kt.purchaseCurrency,paymentCurrency:kt.paymentCurrency,amount:((t=kt.paymentAmount)==null?void 0:t.toString())||"0",network:(e=kt.purchaseCurrency)==null?void 0:e.symbol});return kt.quotesLoading=!1,kt.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return kt.error=n.message,kt.quotesLoading=!1,null}finally{kt.quotesLoading=!1}},resetState(){kt.selectedProvider=null,kt.error=null,kt.purchaseCurrency=lw,kt.paymentCurrency=BN,kt.purchaseCurrencies=[lw],kt.paymentCurrencies=[],kt.paymentAmount=void 0,kt.purchaseAmount=void 0,kt.quotesLoading=!1}},LN=Vi(nde),R5=2147483648,rde={convertEVMChainIdToCoinType(t){if(t>=R5)throw new Error("Invalid chainId");return(R5|t)>>>0}},Yi=bn({suggestions:[],loading:!1}),sde={state:Yi,subscribe(t){return Hr(Yi,()=>t(Yi))},subscribeKey(t,e){return Gr(Yi,t,e)},async resolveName(t){var e,n;try{return await Ze.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await Ze.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Yi.loading=!0,Yi.suggestions=[];const e=await Ze.getEnsNameSuggestions(t);return Yi.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Yi.suggestions}catch(e){const n=uw.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Yi.loading=!1}},async getNamesForAddress(t){try{if(!B.state.activeCaipNetwork)return[];const n=Te.getEnsFromCacheForAddress(t);if(n)return n;const r=await Ze.reverseLookupEnsName({address:t});return Te.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=uw.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=B.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=Ie.state.address,r=Pe.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");Yi.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});et.pushTransactionStack({onCancel(){et.replace("RegisterAccountName")}});const i=await Le.signMessage(s);Yi.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=rde.convertEVMChainIdToCoinType(Number(o));await Ze.registerEnsName({coinType:a,address:n,signature:i,message:s}),Ie.setProfileName(t,e.chainNamespace),et.replace("RegisterAccountNameSuccess")}catch(s){const i=uw.parseEnsApiError(s,`Error registering name ${t}`);throw et.replace("RegisterAccountName"),new Error(i)}finally{Yi.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},uw=Vi(sde);var xR={exports:{}},Pg=typeof Reflect=="object"?Reflect:null,D5=Pg&&typeof Pg.apply=="function"?Pg.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},JE;Pg&&typeof Pg.ownKeys=="function"?JE=Pg.ownKeys:Object.getOwnPropertySymbols?JE=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:JE=function(e){return Object.getOwnPropertyNames(e)};function ide(t){console&&console.warn&&console.warn(t)}var P7=Number.isNaN||function(e){return e!==e};function dn(){dn.init.call(this)}xR.exports=dn;xR.exports.once=lde;dn.EventEmitter=dn;dn.prototype._events=void 0;dn.prototype._eventsCount=0;dn.prototype._maxListeners=void 0;var $5=10;function KC(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(dn,"defaultMaxListeners",{enumerable:!0,get:function(){return $5},set:function(t){if(typeof t!="number"||t<0||P7(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");$5=t}});dn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};dn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||P7(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function k7(t){return t._maxListeners===void 0?dn.defaultMaxListeners:t._maxListeners}dn.prototype.getMaxListeners=function(){return k7(this)};dn.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")D5(c,this,n);else for(var l=c.length,u=U7(c,l),r=0;r<l;++r)D5(u[r],this,n);return!0};function O7(t,e,n,r){var s,i,o;if(KC(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=k7(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,ide(a)}return t}dn.prototype.addListener=function(e,n){return O7(this,e,n,!1)};dn.prototype.on=dn.prototype.addListener;dn.prototype.prependListener=function(e,n){return O7(this,e,n,!0)};function ode(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function R7(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=ode.bind(r);return s.listener=n,r.wrapFn=s,s}dn.prototype.once=function(e,n){return KC(n),this.on(e,R7(this,e,n)),this};dn.prototype.prependOnceListener=function(e,n){return KC(n),this.prependListener(e,R7(this,e,n)),this};dn.prototype.removeListener=function(e,n){var r,s,i,o,a;if(KC(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():ade(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};dn.prototype.off=dn.prototype.removeListener;dn.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function D7(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?cde(s):U7(s,s.length)}dn.prototype.listeners=function(e){return D7(this,e,!0)};dn.prototype.rawListeners=function(e){return D7(this,e,!1)};dn.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):$7.call(t,e)};dn.prototype.listenerCount=$7;function $7(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}dn.prototype.eventNames=function(){return this._eventsCount>0?JE(this._events):[]};function U7(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function ade(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function cde(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function lde(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}B7(t,e,i,{once:!0}),e!=="error"&&ude(t,s,{once:!0})})}function ude(t,e,n){typeof t.on=="function"&&B7(t,"error",e,n)}function B7(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Co=xR.exports;const _R=Qf(Co);var _e={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var MN=function(t,e){return MN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},MN(t,e)};function dde(t,e){MN(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var jN=function(){return jN=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},jN.apply(this,arguments)};function hde(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function fde(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function pde(t,e){return function(n,r){e(n,r,t)}}function gde(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function mde(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function yde(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function wde(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function bde(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function FN(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function L7(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function vde(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(L7(arguments[e]));return t}function Ede(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function _b(t){return this instanceof _b?(this.v=t,this):new _b(t)}function xde(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof _b?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function _de(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:_b(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function Cde(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof FN=="function"?FN(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function Ade(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Sde(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Ide(t){return t&&t.__esModule?t:{default:t}}function Tde(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Nde(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const Pde=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return jN},__asyncDelegator:_de,__asyncGenerator:xde,__asyncValues:Cde,__await:_b,__awaiter:mde,__classPrivateFieldGet:Tde,__classPrivateFieldSet:Nde,__createBinding:wde,__decorate:fde,__exportStar:bde,__extends:dde,__generator:yde,__importDefault:Ide,__importStar:Sde,__makeTemplateObject:Ade,__metadata:gde,__param:pde,__read:L7,__rest:hde,__spread:vde,__spreadArrays:Ede,__values:FN},Symbol.toStringTag,{value:"Module"})),QC=tC(Pde);var y2={},a0={},U5;function kde(){if(U5)return a0;U5=1,Object.defineProperty(a0,"__esModule",{value:!0}),a0.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return a0.delay=t,a0}var Kd={},w2={},Qd={},B5;function Ode(){return B5||(B5=1,Object.defineProperty(Qd,"__esModule",{value:!0}),Qd.ONE_THOUSAND=Qd.ONE_HUNDRED=void 0,Qd.ONE_HUNDRED=100,Qd.ONE_THOUSAND=1e3),Qd}var b2={},L5;function Rde(){return L5||(L5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(b2)),b2}var M5;function M7(){return M5||(M5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=QC;e.__exportStar(Ode(),t),e.__exportStar(Rde(),t)}(w2)),w2}var j5;function Dde(){if(j5)return Kd;j5=1,Object.defineProperty(Kd,"__esModule",{value:!0}),Kd.fromMiliseconds=Kd.toMiliseconds=void 0;const t=M7();function e(r){return r*t.ONE_THOUSAND}Kd.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Kd.fromMiliseconds=n,Kd}var F5;function $de(){return F5||(F5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=QC;e.__exportStar(kde(),t),e.__exportStar(Dde(),t)}(y2)),y2}var bp={},z5;function Ude(){if(z5)return bp;z5=1,Object.defineProperty(bp,"__esModule",{value:!0}),bp.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return bp.Watch=t,bp.default=t,bp}var v2={},c0={},H5;function Bde(){if(H5)return c0;H5=1,Object.defineProperty(c0,"__esModule",{value:!0}),c0.IWatch=void 0;class t{}return c0.IWatch=t,c0}var G5;function Lde(){return G5||(G5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),QC.__exportStar(Bde(),t)}(v2)),v2}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=QC;e.__exportStar($de(),t),e.__exportStar(Ude(),t),e.__exportStar(Lde(),t),e.__exportStar(M7(),t)})(_e);class rp{}let Mde=class extends rp{constructor(e){super()}};const W5=_e.FIVE_SECONDS,sp={pulse:"heartbeat_pulse"};let jde=class j7 extends Mde{constructor(e){super(e),this.events=new Co.EventEmitter,this.interval=W5,this.interval=(e==null?void 0:e.interval)||W5}static async init(e){const n=new j7(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),_e.toMiliseconds(this.interval))}pulse(){this.events.emit(sp.pulse)}};const Fde=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,zde=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Hde=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Gde(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Wde(t);return}return e}function Wde(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function V1(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!Hde.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Fde.test(t)||zde.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Gde)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function qde(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function pr(t,...e){try{return qde(t(...e))}catch(n){return Promise.reject(n)}}function Vde(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function Kde(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function ZE(t){if(Vde(t))return String(t);if(Kde(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return ZE(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const zN="base64:";function Qde(t){return typeof t=="string"?t:zN+Zde(t)}function Yde(t){return typeof t!="string"||!t.startsWith(zN)?t:Jde(t.slice(zN.length))}function Jde(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function Zde(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Ws(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function Xde(...t){return Ws(t.join(":"))}function K1(t){return t=Ws(t),t?t+":":""}function ehe(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function the(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const nhe="memory",rhe=()=>{const t=new Map;return{name:nhe,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function she(t={}){const e={mounts:{"":t.driver||rhe()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=Ws(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await q5(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",y=Ws(g?p:p.key),w=g?void 0:p.value,v=g||!p.options?u:{...u,...p.options},b=n(y);f(b).items.push({key:y,value:w,relativeKey:b.relativeKey,options:v})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=Ws(l);const{relativeKey:d,driver:h}=n(l);return pr(h.hasItem,d,u)},getItem(l,u={}){l=Ws(l);const{relativeKey:d,driver:h}=n(l);return pr(h.getItem,d,u).then(f=>V1(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?pr(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:Xde(d.base,f.key),value:V1(f.value)}))):Promise.all(d.items.map(h=>pr(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:V1(f)})))))},getItemRaw(l,u={}){l=Ws(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?pr(h.getItemRaw,d,u):pr(h.getItem,d,u).then(f=>Yde(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Ws(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await pr(f.setItem,h,ZE(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return pr(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:ZE(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>pr(d.driver.setItem,h.relativeKey,ZE(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Ws(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await pr(f.setItemRaw,h,u,d);else if(f.setItem)await pr(f.setItem,h,Qde(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Ws(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await pr(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await pr(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Ws(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await pr(h.getMeta,d,u)),!u.nativeOnly){const p=await pr(h.getItem,d+"$",u).then(g=>V1(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var y;l=K1(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const w of d){(y=w.driver.flags)!=null&&y.maxDepth||(p=!1);const v=await pr(w.driver.getKeys,w.relativeBase,u);for(const b of v){const _=w.mountpoint+Ws(b);h.some(x=>_.startsWith(x))||f.push(_)}h=[w.mountpoint,...h.filter(b=>!b.startsWith(w.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(w=>(!g||ehe(w,u.maxDepth))&&the(w,l))},async clear(l,u={}){l=K1(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return pr(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>V5(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=K1(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(q5(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=K1(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await V5(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Ws(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Ws(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function q5(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function V5(t){typeof t.dispose=="function"&&await pr(t.dispose)}function ip(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function F7(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=ip(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let E2;function Fv(){return E2||(E2=F7("keyval-store","keyval")),E2}function K5(t,e=Fv()){return e("readonly",n=>ip(n.get(t)))}function ihe(t,e,n=Fv()){return n("readwrite",r=>(r.put(e,t),ip(r.transaction)))}function ohe(t,e=Fv()){return e("readwrite",n=>(n.delete(t),ip(n.transaction)))}function ahe(t=Fv()){return t("readwrite",e=>(e.clear(),ip(e.transaction)))}function che(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},ip(t.transaction)}function lhe(t=Fv()){return t("readonly",e=>{if(e.getAllKeys)return ip(e.getAllKeys());const n=[];return che(e,r=>n.push(r.key)).then(()=>n)})}const uhe=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),dhe=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function $f(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return dhe(t)}catch{return t}}function wl(t){return typeof t=="string"?t:uhe(t)||""}const hhe="idb-keyval";var fhe=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=F7(t.dbName,t.storeName)),{name:hhe,options:t,async hasItem(s){return!(typeof await K5(n(s),r)>"u")},async getItem(s){return await K5(n(s),r)??null},setItem(s,i){return ihe(n(s),i,r)},removeItem(s){return ohe(n(s),r)},getKeys(){return lhe(r)},clear(){return ahe(r)}}};const phe="WALLET_CONNECT_V2_INDEXED_DB",ghe="keyvaluestorage";let mhe=class{constructor(){this.indexedDb=she({driver:fhe({dbName:phe,storeName:ghe})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,wl(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var x2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},XE={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof x2<"u"&&x2.localStorage?XE.exports=x2.localStorage:typeof window<"u"&&window.localStorage?XE.exports=window.localStorage:XE.exports=new e})();function yhe(t){var e;return[t[0],$f((e=t[1])!=null?e:"")]}let whe=class{constructor(){this.localStorage=XE.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(yhe)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return $f(n)}async setItem(e,n){this.localStorage.setItem(e,wl(n))}async removeItem(e){this.localStorage.removeItem(e)}};const bhe="wc_storage_version",Q5=1,vhe=async(t,e,n)=>{const r=bhe,s=await e.getItem(r);if(s&&s>=Q5){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,Q5),n(e),Ehe(t,o)},Ehe=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let xhe=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new whe;this.storage=e;try{const n=new mhe;vhe(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};function _he(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var Che=Ahe;function Ahe(t,e,n){var r=n&&n.stringify||_he,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const Y5=Che;var qp=sc;const Cb=$he().console||{},She={mapHttpRequest:Q1,mapHttpResponse:Q1,wrapRequestSerializer:_2,wrapResponseSerializer:_2,wrapErrorSerializer:_2,req:Q1,res:Q1,err:khe};function Ihe(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function sc(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||Cb;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=Ihe(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=Ab),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:Ohe(t)};c.levels=sc.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=Ab,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=HN());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,vp(l,c,"error","log"),vp(l,c,"fatal","error"),vp(l,c,"warn","error"),vp(l,c,"info","log"),vp(l,c,"debug","log"),vp(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const y=g.serializers;if(s&&y){var w=Object.assign({},r,y),v=t.browser.serialize===!0?Object.keys(w):s;delete p.serializers,YC([p],v,w,this._stdErrSerialize)}function b(_){this._childLevel=(_._childLevel|0)+1,this.error=Ep(_,p,"error"),this.fatal=Ep(_,p,"fatal"),this.warn=Ep(_,p,"warn"),this.info=Ep(_,p,"info"),this.debug=Ep(_,p,"debug"),this.trace=Ep(_,p,"trace"),w&&(this.serializers=w,this._serialize=v),e&&(this._logEvent=HN([].concat(_._logEvent.bindings,p)))}return b.prototype=this,new b(this)}return c}sc.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};sc.stdSerializers=She;sc.stdTimeFunctions=Object.assign({},{nullTime:z7,epochTime:H7,unixTime:Rhe,isoTime:Dhe});function vp(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?Ab:s[n]?s[n]:Cb[n]||Cb[r]||Ab,The(t,e,n)}function The(t,e,n){!t.transmit&&e[n]===Ab||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Cb?Cb:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&YC(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,Nhe(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=sc.levels.values[l],d=sc.levels.values[n];if(d<u)return;Phe(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:sc.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function Nhe(t,e,n,r){t._serialize&&YC(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=sc.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?Y5(s.shift(),s):void 0}else typeof i=="string"&&(i=Y5(s.shift(),s));return i!==void 0&&(o.msg=i),o}function YC(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=sc.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Ep(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function Phe(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;YC(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=HN(c)}function HN(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function khe(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function Ohe(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?z7:H7}function Q1(){return{}}function _2(t){return t}function Ab(){}function z7(){return!1}function H7(){return Date.now()}function Rhe(){return Math.round(Date.now()/1e3)}function Dhe(){return new Date(Date.now()).toISOString()}function $he(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const zv=Qf(qp),Uhe={level:"info"},Hv="custom_context",CR=1e3*1024;let Bhe=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},J5=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new Bhe(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},G7=class{constructor(e,n=CR){this.level=e??"error",this.levelValue=qp.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new J5(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===qp.levels.values.error?console.error(e):n===qp.levels.values.warn?console.warn(e):n===qp.levels.values.debug?console.debug(e):n===qp.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(wl({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new J5(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(wl({extraMetadata:e})),new Blob(n,{type:"application/json"})}},Lhe=class{constructor(e,n=CR){this.baseChunkLogger=new G7(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},Mhe=class{constructor(e,n=CR){this.baseChunkLogger=new G7(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var jhe=Object.defineProperty,Fhe=Object.defineProperties,zhe=Object.getOwnPropertyDescriptors,Z5=Object.getOwnPropertySymbols,Hhe=Object.prototype.hasOwnProperty,Ghe=Object.prototype.propertyIsEnumerable,X5=(t,e,n)=>e in t?jhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,o_=(t,e)=>{for(var n in e||(e={}))Hhe.call(e,n)&&X5(t,n,e[n]);if(Z5)for(var n of Z5(e))Ghe.call(e,n)&&X5(t,n,e[n]);return t},a_=(t,e)=>Fhe(t,zhe(e));function Ay(t){return a_(o_({},t),{level:(t==null?void 0:t.level)||Uhe.level})}function Whe(t,e=Hv){return t[e]||""}function qhe(t,e,n=Hv){return t[n]=e,t}function gi(t,e=Hv){let n="";return typeof t.bindings>"u"?n=Whe(t,e):n=t.bindings().context||"",n}function Vhe(t,e,n=Hv){const r=gi(t,n);return r.trim()?`${r}/${e}`:e}function hs(t,e,n=Hv){const r=Vhe(t,e,n),s=t.child({context:r});return qhe(s,r,n)}function Khe(t){var e,n;const r=new Lhe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:zv(a_(o_({},t.opts),{level:"trace",browser:a_(o_({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function Qhe(t){var e;const n=new Mhe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:zv(a_(o_({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function AR(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Khe(t):Qhe(t)}var Yhe=Object.defineProperty,Jhe=(t,e,n)=>e in t?Yhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,e8=(t,e,n)=>Jhe(t,typeof e!="symbol"?e+"":e,n);let Zhe=class extends rp{constructor(e){super(),this.opts=e,e8(this,"protocol","wc"),e8(this,"version",2)}};var Xhe=Object.defineProperty,efe=(t,e,n)=>e in t?Xhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tfe=(t,e,n)=>efe(t,e+"",n);let nfe=class extends rp{constructor(e,n){super(),this.core=e,this.logger=n,tfe(this,"records",new Map)}},rfe=class{constructor(e,n){this.logger=e,this.core=n}},sfe=class extends rp{constructor(e,n){super(),this.relayer=e,this.logger=n}},ife=class extends rp{constructor(e){super()}},ofe=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},afe=class extends rp{constructor(e,n){super(),this.relayer=e,this.logger=n}},cfe=class extends rp{constructor(e,n){super(),this.core=e,this.logger=n}},lfe=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},ufe=class{constructor(e,n){this.projectId=e,this.logger=n}},dfe=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var hfe=Object.defineProperty,ffe=(t,e,n)=>e in t?hfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,t8=(t,e,n)=>ffe(t,typeof e!="symbol"?e+"":e,n);let pfe=class{constructor(e){this.opts=e,t8(this,"protocol","wc"),t8(this,"version",2)}},gfe=class{constructor(e){this.client=e}};function mfe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function W7(t,...e){if(!mfe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function n8(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function yfe(t,e){W7(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const xp=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const C2=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function wfe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function q7(t){return typeof t=="string"&&(t=wfe(t)),W7(t),t}let bfe=class{clone(){return this._cloneInto()}};function vfe(t){const e=r=>t().update(q7(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function V7(t=32){if(xp&&typeof xp.getRandomValues=="function")return xp.getRandomValues(new Uint8Array(t));if(xp&&typeof xp.randomBytes=="function")return xp.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function Efe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let xfe=class extends bfe{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=C2(this.buffer)}update(e){n8(this);const{view:n,buffer:r,blockLen:s}=this;e=q7(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=C2(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){n8(this),yfe(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Efe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=C2(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const Y1=BigInt(2**32-1),GN=BigInt(32);function K7(t,e=!1){return e?{h:Number(t&Y1),l:Number(t>>GN&Y1)}:{h:Number(t>>GN&Y1)|0,l:Number(t&Y1)|0}}function _fe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=K7(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Cfe=(t,e)=>BigInt(t>>>0)<<GN|BigInt(e>>>0),Afe=(t,e,n)=>t>>>n,Sfe=(t,e,n)=>t<<32-n|e>>>n,Ife=(t,e,n)=>t>>>n|e<<32-n,Tfe=(t,e,n)=>t<<32-n|e>>>n,Nfe=(t,e,n)=>t<<64-n|e>>>n-32,Pfe=(t,e,n)=>t>>>n-32|e<<64-n,kfe=(t,e)=>e,Ofe=(t,e)=>t,Rfe=(t,e,n)=>t<<n|e>>>32-n,Dfe=(t,e,n)=>e<<n|t>>>32-n,$fe=(t,e,n)=>e<<n-32|t>>>64-n,Ufe=(t,e,n)=>t<<n-32|e>>>64-n;function Bfe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const Lfe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Mfe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,jfe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Ffe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,zfe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),Hfe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,pt={fromBig:K7,split:_fe,toBig:Cfe,shrSH:Afe,shrSL:Sfe,rotrSH:Ife,rotrSL:Tfe,rotrBH:Nfe,rotrBL:Pfe,rotr32H:kfe,rotr32L:Ofe,rotlSH:Rfe,rotlSL:Dfe,rotlBH:$fe,rotlBL:Ufe,add:Bfe,add3L:Lfe,add3H:Mfe,add4L:jfe,add4H:Ffe,add5H:Hfe,add5L:zfe},[Gfe,Wfe]=pt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Bl=new Uint32Array(80),Ll=new Uint32Array(80);let qfe=class extends xfe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let b=0;b<16;b++,n+=4)Bl[b]=e.getUint32(n),Ll[b]=e.getUint32(n+=4);for(let b=16;b<80;b++){const _=Bl[b-15]|0,x=Ll[b-15]|0,C=pt.rotrSH(_,x,1)^pt.rotrSH(_,x,8)^pt.shrSH(_,x,7),S=pt.rotrSL(_,x,1)^pt.rotrSL(_,x,8)^pt.shrSL(_,x,7),N=Bl[b-2]|0,A=Ll[b-2]|0,P=pt.rotrSH(N,A,19)^pt.rotrBH(N,A,61)^pt.shrSH(N,A,6),R=pt.rotrSL(N,A,19)^pt.rotrBL(N,A,61)^pt.shrSL(N,A,6),j=pt.add4L(S,R,Ll[b-7],Ll[b-16]),H=pt.add4H(j,C,P,Bl[b-7],Bl[b-16]);Bl[b]=H|0,Ll[b]=j|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:y,Hh:w,Hl:v}=this;for(let b=0;b<80;b++){const _=pt.rotrSH(d,h,14)^pt.rotrSH(d,h,18)^pt.rotrBH(d,h,41),x=pt.rotrSL(d,h,14)^pt.rotrSL(d,h,18)^pt.rotrBL(d,h,41),C=d&f^~d&g,S=h&p^~h&y,N=pt.add5L(v,x,S,Wfe[b],Ll[b]),A=pt.add5H(N,w,_,C,Gfe[b],Bl[b]),P=N|0,R=pt.rotrSH(r,s,28)^pt.rotrBH(r,s,34)^pt.rotrBH(r,s,39),j=pt.rotrSL(r,s,28)^pt.rotrBL(r,s,34)^pt.rotrBL(r,s,39),H=r&i^r&a^i&a,K=s&o^s&c^o&c;w=g|0,v=y|0,g=f|0,y=p|0,f=d|0,p=h|0,{h:d,l:h}=pt.add(l|0,u|0,A|0,P|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const T=pt.add3L(P,j,K);r=pt.add3H(T,A,R,H),s=T|0}({h:r,l:s}=pt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=pt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=pt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=pt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=pt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=pt.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=pt.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:w,l:v}=pt.add(this.Hh|0,this.Hl|0,w|0,v|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,y,w,v)}roundClean(){Bl.fill(0),Ll.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const Vfe=vfe(()=>new qfe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const SR=BigInt(0),Q7=BigInt(1),Kfe=BigInt(2);function IR(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function TR(t){if(!IR(t))throw new Error("Uint8Array expected")}function A2(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Qfe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function NR(t){TR(t);let e="";for(let n=0;n<t.length;n++)e+=Qfe[t[n]];return e}function Y7(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?SR:BigInt("0x"+t)}const wc={_0:48,_9:57,A:65,F:70,a:97,f:102};function r8(t){if(t>=wc._0&&t<=wc._9)return t-wc._0;if(t>=wc.A&&t<=wc.F)return t-(wc.A-10);if(t>=wc.a&&t<=wc.f)return t-(wc.a-10)}function J7(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=r8(t.charCodeAt(i)),a=r8(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Yfe(t){return Y7(NR(t))}function ex(t){return TR(t),Y7(NR(Uint8Array.from(t).reverse()))}function Z7(t,e){return J7(t.toString(16).padStart(e*2,"0"))}function WN(t,e){return Z7(t,e).reverse()}function bc(t,e,n){let r;if(typeof e=="string")try{r=J7(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(IR(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function s8(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];TR(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const S2=t=>typeof t=="bigint"&&SR<=t;function Jfe(t,e,n){return S2(t)&&S2(e)&&S2(n)&&e<=t&&t<n}function l0(t,e,n,r){if(!Jfe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Zfe(t){let e;for(e=0;t>SR;t>>=Q7,e+=1);return e}const Xfe=t=>(Kfe<<BigInt(t-1))-Q7,epe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||IR(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function PR(t,e,n={}){const r=(s,i,o)=>{const a=epe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function i8(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Er=BigInt(0),Vn=BigInt(1),uh=BigInt(2),tpe=BigInt(3),qN=BigInt(4),o8=BigInt(5),a8=BigInt(8);function ar(t,e){const n=t%e;return n>=Er?n:e+n}function npe(t,e,n){if(e<Er)throw new Error("invalid exponent, negatives unsupported");if(n<=Er)throw new Error("invalid modulus");if(n===Vn)return Er;let r=Vn;for(;e>Er;)e&Vn&&(r=r*t%n),t=t*t%n,e>>=Vn;return r}function Ca(t,e,n){let r=t;for(;e-- >Er;)r*=r,r%=n;return r}function c8(t,e){if(t===Er)throw new Error("invert: expected non-zero number");if(e<=Er)throw new Error("invert: expected positive modulus, got "+e);let n=ar(t,e),r=e,s=Er,i=Vn;for(;n!==Er;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Vn)throw new Error("invert: does not exist");return ar(s,e)}function rpe(t){const e=(t-Vn)/uh;let n,r,s;for(n=t-Vn,r=0;n%uh===Er;n/=uh,r++);for(s=uh;s<t&&npe(s,e,t)!==t-Vn;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Vn)/qN;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+Vn)/uh;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,Vn<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function spe(t){if(t%qN===tpe){const e=(t+Vn)/qN;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%a8===o8){const e=(t-o8)/a8;return function(n,r){const s=n.mul(r,uh),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,uh),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return rpe(t)}const ipe=(t,e)=>(ar(t,e)&Vn)===Vn,ope=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ape(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=ope.reduce((r,s)=>(r[s]="function",r),e);return PR(t,n)}function cpe(t,e,n){if(n<Er)throw new Error("invalid exponent, negatives unsupported");if(n===Er)return t.ONE;if(n===Vn)return e;let r=t.ONE,s=e;for(;n>Er;)n&Vn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Vn;return r}function lpe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function X7(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function ez(t,e,n=!1,r={}){if(t<=Er)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=X7(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:Xfe(s),ZERO:Er,ONE:Vn,create:c=>ar(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Er<=c&&c<t},is0:c=>c===Er,isOdd:c=>(c&Vn)===Vn,neg:c=>ar(-c,t),eql:(c,l)=>c===l,sqr:c=>ar(c*c,t),add:(c,l)=>ar(c+l,t),sub:(c,l)=>ar(c-l,t),mul:(c,l)=>ar(c*l,t),pow:(c,l)=>cpe(a,c,l),div:(c,l)=>ar(c*c8(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>c8(c,t),sqrt:r.sqrt||(c=>(o||(o=spe(t)),o(a,c))),invertBatch:c=>lpe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?WN(c,i):Z7(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?ex(c):Yfe(c)}});return Object.freeze(a)}const l8=BigInt(0),J1=BigInt(1);function I2(t,e){const n=e.negate();return t?n:e}function tz(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function T2(t,e){tz(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function upe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function dpe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const N2=new WeakMap,nz=new WeakMap;function P2(t){return nz.get(t)||1}function hpe(t,e){return{constTimeNegate:I2,hasPrecomputes(n){return P2(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>l8;)r&J1&&(s=s.add(i)),i=i.double(),r>>=J1;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=T2(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=T2(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=J1);const g=f,y=f+Math.abs(p)-1,w=h%2!==0,v=p<0;p===0?c=c.add(I2(w,r[g])):a=a.add(I2(v,r[y]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=T2(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===l8)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=J1),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=N2.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&N2.set(r,s(i))),i},wNAFCached(n,r,s){const i=P2(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=P2(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){tz(r,e),nz.set(n,r),N2.delete(n)}}}function fpe(t,e,n,r){if(upe(n,t),dpe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=Zfe(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function ppe(t){return ape(t.Fp),PR(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...X7(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const To=BigInt(0),js=BigInt(1),Z1=BigInt(2),gpe=BigInt(8),mpe={zip215:!0};function ype(t){const e=ppe(t);return PR(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function wpe(t){const e=ype(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=Z1<<BigInt(a*8)-js,u=n.create,d=ez(e.n,e.nBitLength),h=e.uvRatio||((T,I)=>{try{return{isValid:!0,value:n.sqrt(T*n.inv(I))}}catch{return{isValid:!1,value:To}}}),f=e.adjustScalarBytes||(T=>T),p=e.domain||((T,I,L)=>{if(A2("phflag",L),I.length||L)throw new Error("Contexts/pre-hash are not supported");return T});function g(T,I){l0("coordinate "+T,I,To,l)}function y(T){if(!(T instanceof b))throw new Error("ExtendedPoint expected")}const w=i8((T,I)=>{const{ex:L,ey:U,ez:$}=T,M=T.is0();I==null&&(I=M?gpe:n.inv($));const q=u(L*I),ee=u(U*I),ce=u($*I);if(M)return{x:To,y:js};if(ce!==js)throw new Error("invZ was invalid");return{x:q,y:ee}}),v=i8(T=>{const{a:I,d:L}=e;if(T.is0())throw new Error("bad point: ZERO");const{ex:U,ey:$,ez:M,et:q}=T,ee=u(U*U),ce=u($*$),se=u(M*M),le=u(se*se),me=u(ee*I),Z=u(se*u(me+ce)),re=u(le+u(L*u(ee*ce)));if(Z!==re)throw new Error("bad point: equation left != right (1)");const ae=u(U*$),oe=u(M*q);if(ae!==oe)throw new Error("bad point: equation left != right (2)");return!0});class b{constructor(I,L,U,$){this.ex=I,this.ey=L,this.ez=U,this.et=$,g("x",I),g("y",L),g("z",U),g("t",$),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(I){if(I instanceof b)throw new Error("extended point not allowed");const{x:L,y:U}=I||{};return g("x",L),g("y",U),new b(L,U,js,u(L*U))}static normalizeZ(I){const L=n.invertBatch(I.map(U=>U.ez));return I.map((U,$)=>U.toAffine(L[$])).map(b.fromAffine)}static msm(I,L){return fpe(b,d,I,L)}_setWindowSize(I){C.setWindowSize(this,I)}assertValidity(){v(this)}equals(I){y(I);const{ex:L,ey:U,ez:$}=this,{ex:M,ey:q,ez:ee}=I,ce=u(L*ee),se=u(M*$),le=u(U*ee),me=u(q*$);return ce===se&&le===me}is0(){return this.equals(b.ZERO)}negate(){return new b(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:I}=e,{ex:L,ey:U,ez:$}=this,M=u(L*L),q=u(U*U),ee=u(Z1*u($*$)),ce=u(I*M),se=L+U,le=u(u(se*se)-M-q),me=ce+q,Z=me-ee,re=ce-q,ae=u(le*Z),oe=u(me*re),we=u(le*re),Ge=u(Z*me);return new b(ae,oe,Ge,we)}add(I){y(I);const{a:L,d:U}=e,{ex:$,ey:M,ez:q,et:ee}=this,{ex:ce,ey:se,ez:le,et:me}=I;if(L===BigInt(-1)){const Tt=u((M-$)*(se+ce)),Dt=u((M+$)*(se-ce)),vn=u(Dt-Tt);if(vn===To)return this.double();const fs=u(q*Z1*me),mi=u(ee*Z1*le),yi=mi+fs,Wt=Dt+Tt,Sr=mi-fs,ba=u(yi*vn),Sl=u(Wt*Sr),va=u(yi*Sr),zd=u(vn*Wt);return new b(ba,Sl,zd,va)}const Z=u($*ce),re=u(M*se),ae=u(ee*U*me),oe=u(q*le),we=u(($+M)*(ce+se)-Z-re),Ge=oe-ae,ve=oe+ae,Se=u(re-L*Z),De=u(we*Ge),tt=u(ve*Se),Gt=u(we*Se),It=u(Ge*ve);return new b(De,tt,It,Gt)}subtract(I){return this.add(I.negate())}wNAF(I){return C.wNAFCached(this,I,b.normalizeZ)}multiply(I){const L=I;l0("scalar",L,js,r);const{p:U,f:$}=this.wNAF(L);return b.normalizeZ([U,$])[0]}multiplyUnsafe(I,L=b.ZERO){const U=I;return l0("scalar",U,To,r),U===To?x:this.is0()||U===js?this:C.wNAFCachedUnsafe(this,U,b.normalizeZ,L)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return C.unsafeLadder(this,r).is0()}toAffine(I){return w(this,I)}clearCofactor(){const{h:I}=e;return I===js?this:this.multiplyUnsafe(I)}static fromHex(I,L=!1){const{d:U,a:$}=e,M=n.BYTES;I=bc("pointHex",I,M),A2("zip215",L);const q=I.slice(),ee=I[M-1];q[M-1]=ee&-129;const ce=ex(q),se=L?l:n.ORDER;l0("pointHex.y",ce,To,se);const le=u(ce*ce),me=u(le-js),Z=u(U*le-$);let{isValid:re,value:ae}=h(me,Z);if(!re)throw new Error("Point.fromHex: invalid y coordinate");const oe=(ae&js)===js,we=(ee&128)!==0;if(!L&&ae===To&&we)throw new Error("Point.fromHex: x=0 and x_0=1");return we!==oe&&(ae=u(-ae)),b.fromAffine({x:ae,y:ce})}static fromPrivateKey(I){return A(I).point}toRawBytes(){const{x:I,y:L}=this.toAffine(),U=WN(L,n.BYTES);return U[U.length-1]|=I&js?128:0,U}toHex(){return NR(this.toRawBytes())}}b.BASE=new b(e.Gx,e.Gy,js,u(e.Gx*e.Gy)),b.ZERO=new b(To,js,js,To);const{BASE:_,ZERO:x}=b,C=hpe(b,a*8);function S(T){return ar(T,r)}function N(T){return S(ex(T))}function A(T){const I=n.BYTES;T=bc("private key",T,I);const L=bc("hashed private key",i(T),2*I),U=f(L.slice(0,I)),$=L.slice(I,2*I),M=N(U),q=_.multiply(M),ee=q.toRawBytes();return{head:U,prefix:$,scalar:M,point:q,pointBytes:ee}}function P(T){return A(T).pointBytes}function R(T=new Uint8Array,...I){const L=s8(...I);return N(i(p(L,bc("context",T),!!s)))}function j(T,I,L={}){T=bc("message",T),s&&(T=s(T));const{prefix:U,scalar:$,pointBytes:M}=A(I),q=R(L.context,U,T),ee=_.multiply(q).toRawBytes(),ce=R(L.context,ee,M,T),se=S(q+ce*$);l0("signature.s",se,To,r);const le=s8(ee,WN(se,n.BYTES));return bc("result",le,n.BYTES*2)}const H=mpe;function K(T,I,L,U=H){const{context:$,zip215:M}=U,q=n.BYTES;T=bc("signature",T,2*q),I=bc("message",I),L=bc("publicKey",L,q),M!==void 0&&A2("zip215",M),s&&(I=s(I));const ee=ex(T.slice(q,2*q));let ce,se,le;try{ce=b.fromHex(L,M),se=b.fromHex(T.slice(0,q),M),le=_.multiplyUnsafe(ee)}catch{return!1}if(!M&&ce.isSmallOrder())return!1;const me=R($,se.toRawBytes(),ce.toRawBytes(),I);return se.add(ce.multiplyUnsafe(me)).subtract(le).clearCofactor().equals(b.ZERO)}return _._setWindowSize(8),{CURVE:e,getPublicKey:P,sign:j,verify:K,ExtendedPoint:b,utils:{getExtendedPublicKey:A,randomPrivateKey:()=>o(n.BYTES),precompute(T=8,I=b.BASE){return I._setWindowSize(T),I.multiply(BigInt(3)),I}}}}BigInt(0),BigInt(1);const kR=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),u8=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const bpe=BigInt(1),d8=BigInt(2);BigInt(3);const vpe=BigInt(5),Epe=BigInt(8);function xpe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=kR,o=t*t%i*t%i,a=Ca(o,d8,i)*o%i,c=Ca(a,bpe,i)*t%i,l=Ca(c,vpe,i)*c%i,u=Ca(l,e,i)*l%i,d=Ca(u,n,i)*u%i,h=Ca(d,r,i)*d%i,f=Ca(h,s,i)*h%i,p=Ca(f,s,i)*h%i,g=Ca(p,e,i)*l%i;return{pow_p_5_8:Ca(g,d8,i)*t%i,b2:o}}function _pe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function Cpe(t,e){const n=kR,r=ar(e*e*e,n),s=ar(r*r*e,n),i=xpe(t*s).pow_p_5_8;let o=ar(t*r*i,n);const a=ar(e*o*o,n),c=o,l=ar(o*u8,n),u=a===t,d=a===ar(-t,n),h=a===ar(-t*u8,n);return u&&(o=c),(d||h)&&(o=l),ipe(o,n)&&(o=ar(-o,n)),{isValid:u||d,value:o}}const Ape=ez(kR,void 0,!0),Spe={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Ape,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Epe,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Vfe,randomBytes:V7,adjustScalarBytes:_pe,uvRatio:Cpe},rz=wpe(Spe),Ipe="EdDSA",Tpe="JWT",c_=".",JC="base64url",sz="utf8",iz="utf8",Npe=":",Ppe="did",kpe="key",h8="base58btc",Ope="z",Rpe="K36",Dpe=32;function OR(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function oz(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?OR(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function az(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=oz(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return OR(n)}function $pe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,w=0,v=p.length;w!==v&&p[w]===0;)w++,g++;for(var b=(v-w)*u+1>>>0,_=new Uint8Array(b);w!==v;){for(var x=p[w],C=0,S=b-1;(x!==0||C<y)&&S!==-1;S--,C++)x+=256*_[S]>>>0,_[S]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");y=C,w++}for(var N=b-y;N!==b&&_[N]===0;)N++;for(var A=c.repeat(g);N<b;++N)A+=t.charAt(_[N]);return A}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,w=0;p[g]===c;)y++,g++;for(var v=(p.length-g)*l+1>>>0,b=new Uint8Array(v);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var x=0,C=v-1;(_!==0||x<w)&&C!==-1;C--,x++)_+=a*b[C]>>>0,b[C]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");w=x,g++}if(p[g]!==" "){for(var S=v-w;S!==v&&b[S]===0;)S++;for(var N=new Uint8Array(y+(v-S)),A=y;S!==v;)N[A++]=b[S++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Upe=$pe,Bpe=Upe;const cz=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Lpe=t=>new TextEncoder().encode(t),Mpe=t=>new TextDecoder().decode(t);let jpe=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Fpe=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return lz(this,e)}},zpe=class{constructor(e){this.decoders=e}or(e){return lz(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const lz=(t,e)=>new zpe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Hpe=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new jpe(e,n,r),this.decoder=new Fpe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const ZC=({name:t,prefix:e,encode:n,decode:r})=>new Hpe(t,e,n,r),Gv=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Bpe(n,e);return ZC({prefix:t,name:e,encode:r,decode:i=>cz(s(i))})},Gpe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Wpe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Wr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>ZC({prefix:e,name:t,encode(s){return Wpe(s,r,n)},decode(s){return Gpe(s,r,n,t)}}),qpe=ZC({prefix:"\0",name:"identity",encode:t=>Mpe(t),decode:t=>Lpe(t)});var Vpe=Object.freeze({__proto__:null,identity:qpe});const Kpe=Wr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Qpe=Object.freeze({__proto__:null,base2:Kpe});const Ype=Wr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Jpe=Object.freeze({__proto__:null,base8:Ype});const Zpe=Gv({prefix:"9",name:"base10",alphabet:"0123456789"});var Xpe=Object.freeze({__proto__:null,base10:Zpe});const ege=Wr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),tge=Wr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var nge=Object.freeze({__proto__:null,base16:ege,base16upper:tge});const rge=Wr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),sge=Wr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ige=Wr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),oge=Wr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),age=Wr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),cge=Wr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),lge=Wr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),uge=Wr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),dge=Wr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var hge=Object.freeze({__proto__:null,base32:rge,base32upper:sge,base32pad:ige,base32padupper:oge,base32hex:age,base32hexupper:cge,base32hexpad:lge,base32hexpadupper:uge,base32z:dge});const fge=Gv({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),pge=Gv({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var gge=Object.freeze({__proto__:null,base36:fge,base36upper:pge});const mge=Gv({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),yge=Gv({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var wge=Object.freeze({__proto__:null,base58btc:mge,base58flickr:yge});const bge=Wr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),vge=Wr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ege=Wr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),xge=Wr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var _ge=Object.freeze({__proto__:null,base64:bge,base64pad:vge,base64url:Ege,base64urlpad:xge});const uz=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Cge=uz.reduce((t,e,n)=>(t[n]=e,t),[]),Age=uz.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Sge(t){return t.reduce((e,n)=>(e+=Cge[n],e),"")}function Ige(t){const e=[];for(const n of t){const r=Age[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Tge=ZC({prefix:"🚀",name:"base256emoji",encode:Sge,decode:Ige});var Nge=Object.freeze({__proto__:null,base256emoji:Tge}),Pge=dz,f8=128,kge=-128,Oge=Math.pow(2,31);function dz(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Oge;)e[n++]=t&255|f8,t/=128;for(;t&kge;)e[n++]=t&255|f8,t>>>=7;return e[n]=t|0,dz.bytes=n-r+1,e}var Rge=VN,Dge=128,p8=127;function VN(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw VN.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&p8)<<s:(o&p8)*Math.pow(2,s),s+=7}while(o>=Dge);return VN.bytes=i-r,n}var $ge=Math.pow(2,7),Uge=Math.pow(2,14),Bge=Math.pow(2,21),Lge=Math.pow(2,28),Mge=Math.pow(2,35),jge=Math.pow(2,42),Fge=Math.pow(2,49),zge=Math.pow(2,56),Hge=Math.pow(2,63),Gge=function(t){return t<$ge?1:t<Uge?2:t<Bge?3:t<Lge?4:t<Mge?5:t<jge?6:t<Fge?7:t<zge?8:t<Hge?9:10},Wge={encode:Pge,decode:Rge,encodingLength:Gge},hz=Wge;const g8=(t,e,n=0)=>(hz.encode(t,e,n),e),m8=t=>hz.encodingLength(t),KN=(t,e)=>{const n=e.byteLength,r=m8(t),s=r+m8(n),i=new Uint8Array(s+n);return g8(t,i,0),g8(n,i,r),i.set(e,s),new qge(t,n,e,i)};let qge=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const fz=({name:t,code:e,encode:n})=>new Vge(t,e,n);let Vge=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?KN(this.code,n):n.then(r=>KN(this.code,r))}else throw Error("Unknown type, must be binary type")}};const pz=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Kge=fz({name:"sha2-256",code:18,encode:pz("SHA-256")}),Qge=fz({name:"sha2-512",code:19,encode:pz("SHA-512")});var Yge=Object.freeze({__proto__:null,sha256:Kge,sha512:Qge});const gz=0,Jge="identity",mz=cz,Zge=t=>KN(gz,mz(t)),Xge={code:gz,name:Jge,encode:mz,digest:Zge};var eme=Object.freeze({__proto__:null,identity:Xge});new TextEncoder,new TextDecoder;const y8={...Vpe,...Qpe,...Jpe,...Xpe,...nge,...hge,...gge,...wge,..._ge,...Nge};({...Yge,...eme});function yz(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const w8=yz("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),k2=yz("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=oz(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),wz={utf8:w8,"utf-8":w8,hex:y8.base16,latin1:k2,ascii:k2,binary:k2,...y8};function XC(t,e="utf8"){const n=wz[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function Sy(t,e="utf8"){const n=wz[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?OR(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function b8(t){return $f(XC(Sy(t,JC),sz))}function l_(t){return XC(Sy(wl(t),sz),JC)}function bz(t){const e=Sy(Rpe,h8),n=Ope+XC(az([e,t]),h8);return[Ppe,kpe,n].join(Npe)}function tme(t){return XC(t,JC)}function nme(t){return Sy(t,JC)}function rme(t){return Sy([l_(t.header),l_(t.payload)].join(c_),iz)}function sme(t){return[l_(t.header),l_(t.payload),tme(t.signature)].join(c_)}function QN(t){const e=t.split(c_),n=b8(e[0]),r=b8(e[1]),s=nme(e[2]),i=Sy(e.slice(0,2).join(c_),iz);return{header:n,payload:r,signature:s,data:i}}function v8(t=V7(Dpe)){const e=rz.getPublicKey(t);return{secretKey:az([t,e]),publicKey:e}}async function ime(t,e,n,r,s=_e.fromMiliseconds(Date.now())){const i={alg:Ipe,typ:Tpe},o=bz(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=rme({header:i,payload:c}),u=rz.sign(l,r.secretKey.slice(0,32));return sme({header:i,payload:c,signature:u})}var E8=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},ome=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),ame=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),cme=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),lme=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),ume=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),dme=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,hme=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,x8=3,fme=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",dme]],_8=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function pme(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new ume:typeof navigator<"u"?mme(navigator.userAgent):wme()}function gme(t){return t!==""&&fme.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function mme(t){var e=gme(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new lme;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<x8&&(s=E8(E8([],s,!0),bme(x8-s.length),!0)):s=[];var i=s.join("."),o=yme(t),a=hme.exec(t);return a&&a[1]?new cme(n,i,o,a[1]):new ome(n,i,o)}function yme(t){for(var e=0,n=_8.length;e<n;e++){var r=_8[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function wme(){var t=typeof process<"u"&&process.version;return t?new ame(process.version.slice(1)):null}function bme(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var mn={};Object.defineProperty(mn,"__esModule",{value:!0});mn.getLocalStorage=mn.getLocalStorageOrThrow=mn.getCrypto=mn.getCryptoOrThrow=vz=mn.getLocation=mn.getLocationOrThrow=RR=mn.getNavigator=mn.getNavigatorOrThrow=Uf=mn.getDocument=mn.getDocumentOrThrow=mn.getFromWindowOrThrow=mn.getFromWindow=void 0;function op(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}mn.getFromWindow=op;function Iy(t){const e=op(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}mn.getFromWindowOrThrow=Iy;function vme(){return Iy("document")}mn.getDocumentOrThrow=vme;function Eme(){return op("document")}var Uf=mn.getDocument=Eme;function xme(){return Iy("navigator")}mn.getNavigatorOrThrow=xme;function _me(){return op("navigator")}var RR=mn.getNavigator=_me;function Cme(){return Iy("location")}mn.getLocationOrThrow=Cme;function Ame(){return op("location")}var vz=mn.getLocation=Ame;function Sme(){return Iy("crypto")}mn.getCryptoOrThrow=Sme;function Ime(){return op("crypto")}mn.getCrypto=Ime;function Tme(){return Iy("localStorage")}mn.getLocalStorageOrThrow=Tme;function Nme(){return op("localStorage")}mn.getLocalStorage=Nme;var DR={};Object.defineProperty(DR,"__esModule",{value:!0});var Ez=DR.getWindowMetadata=void 0;const C8=mn;function Pme(){let t,e;try{t=C8.getDocumentOrThrow(),e=C8.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const y=p.getAttribute("href");if(y)if(y.toLowerCase().indexOf("https:")===-1&&y.toLowerCase().indexOf("http:")===-1&&y.indexOf("//")!==0){let w=e.protocol+"//"+e.host;if(y.indexOf("/")===0)w+=y;else{const v=e.pathname.split("/");v.pop();const b=v.join("/");w+=b+"/"+y}h.push(w)}else if(y.indexOf("//")===0){const w=e.protocol+y;h.push(w)}else h.push(y)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(y=>p.getAttribute(y)).filter(y=>y?d.includes(y):!1);if(g.length&&g){const y=p.getAttribute("content");if(y)return y}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}Ez=DR.getWindowMetadata=Pme;function Sb(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function YN(t){return Sb(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const xz="2.31.0";let u0={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${xz}`};class Bf extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof Bf?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Bf&&n.cause.docsPath||n.docsPath,i=(a=u0.getDocsUrl)==null?void 0:a.call(u0,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...u0.version?[`Version: ${u0.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=xz}walk(e){return _z(this,e)}}function _z(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?_z(t.cause,e):e?null:t}class Cz extends Bf{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function Ty(t,{dir:e,size:n=32}={}){return typeof t=="string"?kme(t,{dir:e,size:n}):Ome(t,{dir:e,size:n})}function kme(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new Cz({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function Ome(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new Cz({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class Rme extends Bf{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class Dme extends Bf{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Ny(t,{size:e}){if(YN(t)>e)throw new Dme({givenSize:YN(t),maxSize:e})}function JN(t,e={}){const{signed:n}=e;e.size&&Ny(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function $me(t,e={}){return Number(JN(t,e))}const Ume=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ZN(t,e={}){return typeof t=="number"||typeof t=="bigint"?Sz(t,e):typeof t=="string"?Mme(t,e):typeof t=="boolean"?Bme(t,e):Az(t,e)}function Bme(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Ny(n,{size:e.size}),Ty(n,{size:e.size})):n}function Az(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Ume[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Ny(r,{size:e.size}),Ty(r,{dir:"right",size:e.size})):r}function Sz(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new Rme({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Ty(a,{size:r}):a}const Lme=new TextEncoder;function Mme(t,e={}){const n=Lme.encode(t);return Az(n,e)}const jme=new TextEncoder;function Fme(t,e={}){return typeof t=="number"||typeof t=="bigint"?Hme(t,e):typeof t=="boolean"?zme(t,e):Sb(t)?Iz(t,e):Tz(t,e)}function zme(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Ny(n,{size:e.size}),Ty(n,{size:e.size})):n}const vc={zero:48,nine:57,A:65,F:70,a:97,f:102};function A8(t){if(t>=vc.zero&&t<=vc.nine)return t-vc.zero;if(t>=vc.A&&t<=vc.F)return t-(vc.A-10);if(t>=vc.a&&t<=vc.f)return t-(vc.a-10)}function Iz(t,e={}){let n=t;e.size&&(Ny(n,{size:e.size}),n=Ty(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=A8(r.charCodeAt(a++)),l=A8(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new Bf(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function Hme(t,e){const n=Sz(t,e);return Iz(n)}function Tz(t,e={}){const n=jme.encode(t);return typeof e.size=="number"?(Ny(n,{size:e.size}),Ty(n,{dir:"right",size:e.size})):n}function Nz(t,e){const n=e||"hex",r=TO(Sb(t,{strict:!1})?Fme(t):t);return n==="bytes"?r:ZN(r)}class Gme extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const O2=new Gme(8192);function Wme(t,e){if(O2.has(`${t}.${e}`))return O2.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=Nz(Tz(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return O2.set(`${t}.${e}`,i),i}function qme(t){const e=Nz(`0x${t.substring(4)}`).substring(26);return Wme(`0x${e}`)}async function Vme({hash:t,signature:e}){const n=Sb(t)?t:ZN(t),{secp256k1:r}=await Gn(async()=>{const{secp256k1:o}=await import("./secp256k1-B89iWRka.js");return{secp256k1:o}},__vite__mapDeps([2,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=S8(f);return new r.Signature(JN(l),JN(u)).addRecoveryBit(p)}const o=Sb(e)?e:ZN(e);if(YN(o)!==65)throw new Error("invalid signature length");const a=$me(`0x${o.slice(130)}`),c=S8(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function S8(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Kme({hash:t,signature:e}){return qme(await Vme({hash:t,signature:e}))}function Qme(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let v=l[h],b=0;for(let _=p-1;(v!==0||b<d)&&_!==-1;_--,b++)v+=256*g[_]>>>0,g[_]=v%n>>>0,v=v/n>>>0;if(v!==0)throw new Error("Non-zero carry");d=b,h++}let y=p-d;for(;y!==p&&g[y]===0;)y++;let w=r.repeat(u);for(;y<p;++y)w+=t.charAt(g[y]);return w}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const v=l.charCodeAt(u);if(v>255)return;let b=e[v];if(b===255)return;let _=0;for(let x=f-1;(b!==0||_<h)&&x!==-1;x--,_++)b+=n*p[x]>>>0,p[x]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");h=_,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const y=new Uint8Array(d+(f-g));let w=d;for(;g!==f;)y[w++]=p[g++];return y}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var Yme="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Py=Qme(Yme);function Jme(t){const e=t.length;let n=0,r=0;for(;r<e;){let s=t.charCodeAt(r++);if(s&4294967168)if(!(s&4294965248))n+=2;else{if(s>=55296&&s<=56319&&r<e){const i=t.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}s&4294901760?n+=4:n+=3}else{n++;continue}}return n}function Zme(t,e,n){const r=t.length;let s=n,i=0;for(;i<r;){let o=t.charCodeAt(i++);if(o&4294967168)if(!(o&4294965248))e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){const a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}o&4294901760?(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128):(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128)}else{e[s++]=o;continue}e[s++]=o&63|128}}const Xme=new TextEncoder,eye=50;function tye(t,e,n){Xme.encodeInto(t,e.subarray(n))}function nye(t,e,n){t.length>eye?tye(t,e,n):Zme(t,e,n)}const rye=4096;function Pz(t,e,n){let r=e;const s=r+n,i=[];let o="";for(;r<s;){const a=t[r++];if(!(a&128))i.push(a);else if((a&224)===192){const c=t[r++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){const c=t[r++]&63,l=t[r++]&63;i.push((a&31)<<12|c<<6|l)}else if((a&248)===240){const c=t[r++]&63,l=t[r++]&63,u=t[r++]&63;let d=(a&7)<<18|c<<12|l<<6|u;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=rye&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const sye=new TextDecoder,iye=200;function oye(t,e,n){const r=t.subarray(e,e+n);return sye.decode(r)}function aye(t,e,n){return n>iye?oye(t,e,n):Pz(t,e,n)}class X1{constructor(e,n){this.type=e,this.data=n}}class Ri extends Error{constructor(e){super(e);const n=Object.create(Ri.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:Ri.name})}}const d0=4294967295;function cye(t,e,n){const r=n/4294967296,s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function kz(t,e,n){const r=Math.floor(n/4294967296),s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function Oz(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function lye(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const uye=-1,dye=4294967296-1,hye=17179869184-1;function fye({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=hye)if(e===0&&t<=dye){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|n&3),i.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),kz(r,4,t),n}}function pye(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function gye(t){if(t instanceof Date){const e=pye(t);return fye(e)}else return null}function mye(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),s=(n&3)*4294967296+r,i=n>>>2;return{sec:s,nsec:i}}case 12:{const n=Oz(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new Ri(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function yye(t){const e=mye(t);return new Date(e.sec*1e3+e.nsec/1e6)}const wye={type:uye,encode:gye,decode:yye};class u_{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(wye)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=-1-r;return new X1(o,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=r;return new X1(o,i)}}}return e instanceof X1?e:null}decode(e,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(e,n,r):new X1(n,e)}}u_.defaultCodec=new u_;function bye(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function XN(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):bye(t)?new Uint8Array(t):Uint8Array.from(t)}const vye=100,Eye=2048;let xye=class Rz{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??u_.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??vye,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??Eye,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new Rz({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=Jme(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),nye(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=XN(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,n+1)}countWithoutUndefined(e,n){let r=0;for(const s of n)e[s]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),cye(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),kz(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function _ye(t,e){return new xye(e).encodeSharedRef(t)}function R2(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const Cye=16,Aye=16;class Sye{constructor(e=Cye,n=Aye){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const s=this.caches[r-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<r;a++)if(o[a]!==e[n+a])continue e;return i.str}return null}store(e,n){const r=this.caches[e.length-1],s={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,n,r){const s=this.find(e,n,r);if(s!=null)return this.hit++,s;this.miss++;const i=Pz(e,n,r),o=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(o,i),i}}const eP="array",dw="map_key",Dz="map_value",Iye=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new Ri("The type of key must be string or number but "+typeof t)};class Tye{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=eP,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=dw,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===eP){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===dw||e.type===Dz){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const h0=-1,$R=new DataView(new ArrayBuffer(0)),Nye=new Uint8Array($R.buffer);try{$R.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const I8=new RangeError("Insufficient data"),Pye=new Sye;let kye=class $z{constructor(e){this.totalPos=0,this.pos=0,this.view=$R,this.bytes=Nye,this.headByte=h0,this.stack=new Tye,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??u_.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??d0,this.maxBinLength=(e==null?void 0:e.maxBinLength)??d0,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??d0,this.maxMapLength=(e==null?void 0:e.maxMapLength)??d0,this.maxExtLength=(e==null?void 0:e.maxExtLength)??d0,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:Pye,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??Iye}clone(){return new $z({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=h0,this.stack.reset()}setBuffer(e){const n=XN(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===h0&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=XN(e),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const a of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${R2(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,s=-1;for await(const i of e){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=e-160;n=this.decodeString(s,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new Ri(`Unrecognized type byte: ${R2(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===eP)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===dw){if(n==="__proto__")throw new Ri("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=Dz;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=dw;continue e}}return n}}readHeadByte(){return this.headByte===h0&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=h0}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new Ri(`Unrecognized array type byte: ${R2(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new Ri(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new Ri(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){var i;if(e>this.maxStrLength)throw new Ri(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw I8;const r=this.pos+n;let s;return this.stateIsMapKey()&&((i=this.keyDecoder)!=null&&i.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,r,e):s=aye(this.bytes,r,e),this.pos+=n+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===dw:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new Ri(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw I8;const r=this.pos+n,s=this.bytes.subarray(r,r+e);return this.pos+=n+e,s}decodeExtension(e,n){if(e>this.maxExtLength)throw new Ri(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(e,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=lye(this.view,this.pos);return this.pos+=8,e}readI64(){const e=Oz(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function Oye(t,e){return new kye(e).decode(t)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Rye(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Uz(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function d_(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function UR(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function tP(t){if(!Array.isArray(t))throw new Error("array expected")}function h_(t,e){if(!Uz(!0,e))throw new Error(`${t}: array of strings expected`)}function Dye(t,e){if(!Uz(!1,e))throw new Error(`${t}: array of numbers expected`)}function $ye(...t){const e=i=>i,n=(i,o)=>a=>i(o(a)),r=t.map(i=>i.encode).reduceRight(n,e),s=t.map(i=>i.decode).reduce(n,e);return{encode:r,decode:s}}function Uye(t){const e=typeof t=="string"?t.split(""):t,n=e.length;h_("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(tP(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(tP(s),s.map(i=>{d_("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return o}))}}function Bye(t=""){return d_("join",t),{encode:e=>(h_("join.decode",e),e.join(t)),decode:e=>(d_("join.decode",e),e.split(t))}}function Lye(t,e="="){return UR(t),d_("padding",e),{encode(n){for(h_("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){h_("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const Bz=(t,e)=>e===0?t:Bz(e,t%e),f_=(t,e)=>t+(e-Bz(t,e)),D2=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function T8(t,e,n,r){if(tP(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(f_(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${f_(e,n)}`);let s=0,i=0;const o=D2[e],a=D2[n]-1,c=[];for(const l of t){if(UR(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(s=s<<e|l,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=n;i-=n)c.push((s>>i-n&a)>>>0);const u=D2[i];if(u===void 0)throw new Error("invalid carry");s&=u-1}if(s=s<<n-i&a,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&c.push(s>>>0),c}function Mye(t,e=!1){if(UR(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(f_(8,t)>32||f_(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!Rye(n))throw new Error("radix2.encode input should be Uint8Array");return T8(Array.from(n),8,t,!e)},decode:n=>(Dye("radix2.decode",n),Uint8Array.from(T8(n,t,8,e)))}}const jye=$ye(Mye(5),Uye("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Lye(5),Bye(""));function BR(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Lz(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?BR(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function hw(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=Lz(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return BR(n)}function Fye(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,w=0,v=p.length;w!==v&&p[w]===0;)w++,g++;for(var b=(v-w)*u+1>>>0,_=new Uint8Array(b);w!==v;){for(var x=p[w],C=0,S=b-1;(x!==0||C<y)&&S!==-1;S--,C++)x+=256*_[S]>>>0,_[S]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");y=C,w++}for(var N=b-y;N!==b&&_[N]===0;)N++;for(var A=c.repeat(g);N<b;++N)A+=t.charAt(_[N]);return A}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,w=0;p[g]===c;)y++,g++;for(var v=(p.length-g)*l+1>>>0,b=new Uint8Array(v);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var x=0,C=v-1;(_!==0||x<w)&&C!==-1;C--,x++)_+=a*b[C]>>>0,b[C]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");w=x,g++}if(p[g]!==" "){for(var S=v-w;S!==v&&b[S]===0;)S++;for(var N=new Uint8Array(y+(v-S)),A=y;S!==v;)N[A++]=b[S++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var zye=Fye,Hye=zye;const Gye=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Wye=t=>new TextEncoder().encode(t),qye=t=>new TextDecoder().decode(t);class Vye{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Kye{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Mz(this,e)}}class Qye{constructor(e){this.decoders=e}or(e){return Mz(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Mz=(t,e)=>new Qye({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Yye{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Vye(e,n,r),this.decoder=new Kye(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const eA=({name:t,prefix:e,encode:n,decode:r})=>new Yye(t,e,n,r),Wv=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Hye(n,e);return eA({prefix:t,name:e,encode:r,decode:i=>Gye(s(i))})},Jye=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Zye=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},qr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>eA({prefix:e,name:t,encode(s){return Zye(s,r,n)},decode(s){return Jye(s,r,n,t)}}),Xye=eA({prefix:"\0",name:"identity",encode:t=>qye(t),decode:t=>Wye(t)}),e0e=Object.freeze(Object.defineProperty({__proto__:null,identity:Xye},Symbol.toStringTag,{value:"Module"})),t0e=qr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),n0e=Object.freeze(Object.defineProperty({__proto__:null,base2:t0e},Symbol.toStringTag,{value:"Module"})),r0e=qr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),s0e=Object.freeze(Object.defineProperty({__proto__:null,base8:r0e},Symbol.toStringTag,{value:"Module"})),i0e=Wv({prefix:"9",name:"base10",alphabet:"0123456789"}),o0e=Object.freeze(Object.defineProperty({__proto__:null,base10:i0e},Symbol.toStringTag,{value:"Module"})),a0e=qr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),c0e=qr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),l0e=Object.freeze(Object.defineProperty({__proto__:null,base16:a0e,base16upper:c0e},Symbol.toStringTag,{value:"Module"})),u0e=qr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),d0e=qr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),h0e=qr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),f0e=qr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),p0e=qr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),g0e=qr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),m0e=qr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),y0e=qr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),w0e=qr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),b0e=Object.freeze(Object.defineProperty({__proto__:null,base32:u0e,base32hex:p0e,base32hexpad:m0e,base32hexpadupper:y0e,base32hexupper:g0e,base32pad:h0e,base32padupper:f0e,base32upper:d0e,base32z:w0e},Symbol.toStringTag,{value:"Module"})),v0e=Wv({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),E0e=Wv({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),x0e=Object.freeze(Object.defineProperty({__proto__:null,base36:v0e,base36upper:E0e},Symbol.toStringTag,{value:"Module"})),_0e=Wv({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),C0e=Wv({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),A0e=Object.freeze(Object.defineProperty({__proto__:null,base58btc:_0e,base58flickr:C0e},Symbol.toStringTag,{value:"Module"})),S0e=qr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),I0e=qr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),T0e=qr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),N0e=qr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),P0e=Object.freeze(Object.defineProperty({__proto__:null,base64:S0e,base64pad:I0e,base64url:T0e,base64urlpad:N0e},Symbol.toStringTag,{value:"Module"})),jz=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),k0e=jz.reduce((t,e,n)=>(t[n]=e,t),[]),O0e=jz.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function R0e(t){return t.reduce((e,n)=>(e+=k0e[n],e),"")}function D0e(t){const e=[];for(const n of t){const r=O0e[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const $0e=eA({prefix:"🚀",name:"base256emoji",encode:R0e,decode:D0e}),U0e=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:$0e},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const N8={...e0e,...n0e,...s0e,...o0e,...l0e,...b0e,...x0e,...A0e,...P0e,...U0e};function Fz(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const P8=Fz("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),$2=Fz("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Lz(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),zz={utf8:P8,"utf-8":P8,hex:N8.base16,latin1:$2,ascii:$2,binary:$2,...N8};function yo(t,e="utf8"){const n=zz[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?BR(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function di(t,e="utf8"){const n=zz[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const B0e={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},L0e="Input must be an string, Buffer or Uint8Array";function M0e(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(L0e);return e}function j0e(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function eE(t){return(4294967296+t).toString(16).substring(1)}function F0e(t,e,n){let r=`
`+t+" = ";for(let s=0;s<e.length;s+=2){if(n===32)r+=eE(e[s]).toUpperCase(),r+=" ",r+=eE(e[s+1]).toUpperCase();else if(n===64)r+=eE(e[s+1]).toUpperCase(),r+=eE(e[s]).toUpperCase();else throw new Error("Invalid size "+n);s%6===4?r+=`
`+new Array(t.length+4).join(" "):s<e.length-2&&(r+=" ")}console.log(r)}function z0e(t,e,n){let r=new Date().getTime();const s=new Uint8Array(e);for(let o=0;o<e;o++)s[o]=o%256;const i=new Date().getTime();console.log("Generated random input in "+(i-r)+"ms"),r=i;for(let o=0;o<n;o++){const a=t(s),c=new Date().getTime(),l=c-r;r=c,console.log("Hashed in "+l+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(l/1e3)*100)/100+" MB PER SECOND")}}var Hz={normalizeInput:M0e,toHex:j0e,debugPrint:F0e,testSpeed:z0e};const tx=Hz;function tE(t,e,n){const r=t[e]+t[n];let s=t[e+1]+t[n+1];r>=4294967296&&s++,t[e]=r,t[e+1]=s}function k8(t,e,n,r){let s=t[e]+n;n<0&&(s+=4294967296);let i=t[e+1]+r;s>=4294967296&&i++,t[e]=s,t[e+1]=i}function Gz(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Ml(t,e,n,r,s,i){const o=M0[s],a=M0[s+1],c=M0[i],l=M0[i+1];tE(lt,t,e),k8(lt,t,o,a);let u=lt[r]^lt[t],d=lt[r+1]^lt[t+1];lt[r]=d,lt[r+1]=u,tE(lt,n,r),u=lt[e]^lt[n],d=lt[e+1]^lt[n+1],lt[e]=u>>>24^d<<8,lt[e+1]=d>>>24^u<<8,tE(lt,t,e),k8(lt,t,c,l),u=lt[r]^lt[t],d=lt[r+1]^lt[t+1],lt[r]=u>>>16^d<<16,lt[r+1]=d>>>16^u<<16,tE(lt,n,r),u=lt[e]^lt[n],d=lt[e+1]^lt[n+1],lt[e]=d>>>31^u<<1,lt[e+1]=u>>>31^d<<1}const Wz=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),H0e=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],Jr=new Uint8Array(H0e.map(function(t){return t*2})),lt=new Uint32Array(32),M0=new Uint32Array(32);function qz(t,e){let n=0;for(n=0;n<16;n++)lt[n]=t.h[n],lt[n+16]=Wz[n];for(lt[24]=lt[24]^t.t,lt[25]=lt[25]^t.t/4294967296,e&&(lt[28]=~lt[28],lt[29]=~lt[29]),n=0;n<32;n++)M0[n]=Gz(t.b,4*n);for(n=0;n<12;n++)Ml(0,8,16,24,Jr[n*16+0],Jr[n*16+1]),Ml(2,10,18,26,Jr[n*16+2],Jr[n*16+3]),Ml(4,12,20,28,Jr[n*16+4],Jr[n*16+5]),Ml(6,14,22,30,Jr[n*16+6],Jr[n*16+7]),Ml(0,10,20,30,Jr[n*16+8],Jr[n*16+9]),Ml(2,12,22,24,Jr[n*16+10],Jr[n*16+11]),Ml(4,14,16,26,Jr[n*16+12],Jr[n*16+13]),Ml(6,8,18,28,Jr[n*16+14],Jr[n*16+15]);for(n=0;n<16;n++)t.h[n]=t.h[n]^lt[n]^lt[n+16]}const jl=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function Vz(t,e,n,r){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&r.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const s={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};jl.fill(0),jl[0]=t,e&&(jl[1]=e.length),jl[2]=1,jl[3]=1,n&&jl.set(n,32),r&&jl.set(r,48);for(let i=0;i<16;i++)s.h[i]=Wz[i]^Gz(jl,i*4);return e&&(LR(s,e),s.c=128),s}function LR(t,e){for(let n=0;n<e.length;n++)t.c===128&&(t.t+=t.c,qz(t,!1),t.c=0),t.b[t.c++]=e[n]}function Kz(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;qz(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3);return e}function Qz(t,e,n,r,s){n=n||64,t=tx.normalizeInput(t),r&&(r=tx.normalizeInput(r)),s&&(s=tx.normalizeInput(s));const i=Vz(n,e,r,s);return LR(i,t),Kz(i)}function G0e(t,e,n,r,s){const i=Qz(t,e,n,r,s);return tx.toHex(i)}var W0e={blake2b:Qz,blake2bHex:G0e,blake2bInit:Vz,blake2bUpdate:LR,blake2bFinal:Kz};const Yz=Hz;function q0e(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Fl(t,e,n,r,s,i){Mt[t]=Mt[t]+Mt[e]+s,Mt[r]=nE(Mt[r]^Mt[t],16),Mt[n]=Mt[n]+Mt[r],Mt[e]=nE(Mt[e]^Mt[n],12),Mt[t]=Mt[t]+Mt[e]+i,Mt[r]=nE(Mt[r]^Mt[t],8),Mt[n]=Mt[n]+Mt[r],Mt[e]=nE(Mt[e]^Mt[n],7)}function nE(t,e){return t>>>e^t<<32-e}const Jz=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Zr=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),Mt=new Uint32Array(16),Tr=new Uint32Array(16);function Zz(t,e){let n=0;for(n=0;n<8;n++)Mt[n]=t.h[n],Mt[n+8]=Jz[n];for(Mt[12]^=t.t,Mt[13]^=t.t/4294967296,e&&(Mt[14]=~Mt[14]),n=0;n<16;n++)Tr[n]=q0e(t.b,4*n);for(n=0;n<10;n++)Fl(0,4,8,12,Tr[Zr[n*16+0]],Tr[Zr[n*16+1]]),Fl(1,5,9,13,Tr[Zr[n*16+2]],Tr[Zr[n*16+3]]),Fl(2,6,10,14,Tr[Zr[n*16+4]],Tr[Zr[n*16+5]]),Fl(3,7,11,15,Tr[Zr[n*16+6]],Tr[Zr[n*16+7]]),Fl(0,5,10,15,Tr[Zr[n*16+8]],Tr[Zr[n*16+9]]),Fl(1,6,11,12,Tr[Zr[n*16+10]],Tr[Zr[n*16+11]]),Fl(2,7,8,13,Tr[Zr[n*16+12]],Tr[Zr[n*16+13]]),Fl(3,4,9,14,Tr[Zr[n*16+14]],Tr[Zr[n*16+15]]);for(n=0;n<8;n++)t.h[n]^=Mt[n]^Mt[n+8]}function Xz(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=e?e.length:0;if(e&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(Jz),b:new Uint8Array(64),c:0,t:0,outlen:t};return r.h[0]^=16842752^n<<8^t,n>0&&(MR(r,e),r.c=64),r}function MR(t,e){for(let n=0;n<e.length;n++)t.c===64&&(t.t+=t.c,Zz(t,!1),t.c=0),t.b[t.c++]=e[n]}function eH(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;Zz(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3)&255;return e}function tH(t,e,n){n=n||32,t=Yz.normalizeInput(t);const r=Xz(n,e);return MR(r,t),eH(r)}function V0e(t,e,n){const r=tH(t,e,n);return Yz.toHex(r)}var K0e={blake2s:tH,blake2sHex:V0e,blake2sInit:Xz,blake2sUpdate:MR,blake2sFinal:eH};const f0=W0e,p0=K0e;var Q0e={blake2b:f0.blake2b,blake2bHex:f0.blake2bHex,blake2bInit:f0.blake2bInit,blake2bUpdate:f0.blake2bUpdate,blake2bFinal:f0.blake2bFinal,blake2s:p0.blake2s,blake2sHex:p0.blake2sHex,blake2sInit:p0.blake2sInit,blake2sUpdate:p0.blake2sUpdate,blake2sFinal:p0.blake2sFinal},Y0e={};const J0e=":";function kg(t){const[e,n]=t.split(J0e);return{namespace:e,reference:n}}function nH(t,e){return t.includes(":")?[t]:e.chains||[]}var Z0e=Object.defineProperty,X0e=Object.defineProperties,ewe=Object.getOwnPropertyDescriptors,O8=Object.getOwnPropertySymbols,twe=Object.prototype.hasOwnProperty,nwe=Object.prototype.propertyIsEnumerable,R8=(t,e,n)=>e in t?Z0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,D8=(t,e)=>{for(var n in e||(e={}))twe.call(e,n)&&R8(t,n,e[n]);if(O8)for(var n of O8(e))nwe.call(e,n)&&R8(t,n,e[n]);return t},rwe=(t,e)=>X0e(t,ewe(e));const swe="ReactNative",Ui={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},iwe="js";function p_(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Md(){return!Uf()&&!!RR()&&navigator.product===swe}function owe(){return Md()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function awe(){return Md()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function ky(){return!p_()&&!!RR()&&!!Uf()}function qv(){return Md()?Ui.reactNative:p_()?Ui.node:ky()?Ui.browser:Ui.unknown}function $8(){var t;try{return Md()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function cwe(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function lwe(t){var e,n;const r=rH();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),rwe(D8(D8({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function rH(){return Ez()||{name:"",description:"",url:"",icons:[""]}}function uwe(){if(qv()===Ui.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=pme();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function dwe(){var t;const e=qv();return e===Ui.browser?[e,((t=vz())==null?void 0:t.host)||"unknown"].join(":"):e}function sH(t,e,n){const r=uwe(),s=dwe();return[[t,e].join("-"),[iwe,n].join("-"),r,s].join("/")}function hwe({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=sH(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=cwe(l[1]||"",d);return l[0]+"?"+h}function Ah(t,e){return t.filter(n=>e.includes(n)).length===t.length}function nP(t){return Object.fromEntries(t.entries())}function rP(t){return new Map(Object.entries(t))}function ih(t=_e.FIVE_MINUTES,e){const n=_e.toMiliseconds(t||_e.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function Yu(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function iH(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function fwe(t){return iH("topic",t)}function pwe(t){return iH("id",t)}function oH(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function sr(t,e){return _e.fromMiliseconds(Date.now()+_e.toMiliseconds(t))}function au(t){return Date.now()>=_e.toMiliseconds(t)}function Vt(t,e){return`${t}${e?`:${e}`:""}`}function ic(t=[],e=[]){return[...new Set([...t,...e])]}async function gwe({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=mwe(i,t,e),a=qv();if(a===Ui.browser){if(!((r=Uf())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}ywe(o)}else a===Ui.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function mwe(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${Ewe(r,!0)}`}else s=`${s}/wc?${r}`;return s}function ywe(t){let e="_self";vwe()?e="_top":(bwe()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function wwe(t,e){let n="";try{if(ky()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function U8(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function B8(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function jR(){return typeof process<"u"&&Y0e.IS_VITEST==="true"}function bwe(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function vwe(){try{return window.self!==window.top}catch{return!1}}function Ewe(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function aH(t){return Buffer.from(t,"base64").toString("utf-8")}function xwe(t){return new Promise(e=>setTimeout(e,t))}const rE=BigInt(2**32-1),L8=BigInt(32);function cH(t,e=!1){return e?{h:Number(t&rE),l:Number(t>>L8&rE)}:{h:Number(t>>L8&rE)|0,l:Number(t&rE)|0}}function lH(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=cH(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const M8=(t,e,n)=>t>>>n,j8=(t,e,n)=>t<<32-n|e>>>n,cu=(t,e,n)=>t>>>n|e<<32-n,lu=(t,e,n)=>t<<32-n|e>>>n,j0=(t,e,n)=>t<<64-n|e>>>n-32,F0=(t,e,n)=>t>>>n-32|e<<64-n,_we=(t,e)=>e,Cwe=(t,e)=>t,Awe=(t,e,n)=>t<<n|e>>>32-n,Swe=(t,e,n)=>e<<n|t>>>32-n,Iwe=(t,e,n)=>e<<n-32|t>>>64-n,Twe=(t,e,n)=>t<<n-32|e>>>64-n;function Uo(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const FR=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),zR=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Nwe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Pwe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,kwe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),Owe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,_p=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function HR(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function bl(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Eo(t,...e){if(!HR(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function GR(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");bl(t.outputLen),bl(t.blockLen)}function Sd(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function WR(t,e){Eo(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Ib(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function xo(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function U2(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Aa(t,e){return t<<32-e|t>>>e}const uH=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function dH(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const Ac=uH?t=>t:t=>dH(t);function Rwe(t){for(let e=0;e<t.length;e++)t[e]=dH(t[e]);return t}const uu=uH?t=>t:Rwe,hH=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Dwe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Tb(t){if(Eo(t),hH)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=Dwe[t[n]];return e}const Ec={_0:48,_9:57,A:65,F:70,a:97,f:102};function F8(t){if(t>=Ec._0&&t<=Ec._9)return t-Ec._0;if(t>=Ec.A&&t<=Ec.F)return t-(Ec.A-10);if(t>=Ec.a&&t<=Ec.f)return t-(Ec.a-10)}function qR(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(hH)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=F8(t.charCodeAt(i)),a=F8(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function $we(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function ca(t){return typeof t=="string"&&(t=$we(t)),Eo(t),t}function Sh(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Eo(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let tA=class{};function Vv(t){const e=r=>t().update(ca(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Uwe(t){const e=(r,s)=>t(s).update(ca(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function Oy(t=32){if(_p&&typeof _p.getRandomValues=="function")return _p.getRandomValues(new Uint8Array(t));if(_p&&typeof _p.randomBytes=="function")return Uint8Array.from(_p.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const Bwe=BigInt(0),g0=BigInt(1),Lwe=BigInt(2),Mwe=BigInt(7),jwe=BigInt(256),Fwe=BigInt(113),fH=[],pH=[],gH=[];for(let t=0,e=g0,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],fH.push(2*(5*r+n)),pH.push((t+1)*(t+2)/2%64);let s=Bwe;for(let i=0;i<7;i++)e=(e<<g0^(e>>Mwe)*Fwe)%jwe,e&Lwe&&(s^=g0<<(g0<<BigInt(i))-g0);gH.push(s)}const mH=lH(gH,!0),zwe=mH[0],Hwe=mH[1],z8=(t,e,n)=>n>32?Iwe(t,e,n):Awe(t,e,n),H8=(t,e,n)=>n>32?Twe(t,e,n):Swe(t,e,n);function Gwe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=z8(l,u,1)^n[a],h=H8(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=pH[o],c=z8(s,i,a),l=H8(s,i,a),u=fH[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=zwe[r],t[1]^=Hwe[r]}xo(n)}let Wwe=class yH extends tA{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,bl(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Ib(this.state)}clone(){return this._cloneInto()}keccak(){uu(this.state32),Gwe(this.state32,this.rounds),uu(this.state32),this.posOut=0,this.pos=0}update(e){Sd(this),e=ca(e),Eo(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Sd(this,!1),Eo(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return bl(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(WR(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,xo(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new yH(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const qwe=(t,e,n)=>Vv(()=>new Wwe(e,t,n)),Vwe=qwe(1,136,256/8);function Kwe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function Qwe(t,e,n){return t&e^~t&n}function Ywe(t,e,n){return t&e^t&n^e&n}let wH=class extends tA{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=U2(this.buffer)}update(e){Sd(this),e=ca(e),Eo(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=U2(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Sd(this),WR(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,xo(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Kwe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=U2(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const zl=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Xr=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),es=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Jwe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Hl=new Uint32Array(64);let Zwe=class extends wH{constructor(e=32){super(64,e,8,!1),this.A=zl[0]|0,this.B=zl[1]|0,this.C=zl[2]|0,this.D=zl[3]|0,this.E=zl[4]|0,this.F=zl[5]|0,this.G=zl[6]|0,this.H=zl[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Hl[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Hl[d-15],f=Hl[d-2],p=Aa(h,7)^Aa(h,18)^h>>>3,g=Aa(f,17)^Aa(f,19)^f>>>10;Hl[d]=g+Hl[d-7]+p+Hl[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Aa(a,6)^Aa(a,11)^Aa(a,25),f=u+h+Qwe(a,c,l)+Jwe[d]+Hl[d]|0,p=(Aa(r,2)^Aa(r,13)^Aa(r,22))+Ywe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){xo(Hl)}destroy(){this.set(0,0,0,0,0,0,0,0),xo(this.buffer)}};const bH=lH(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Xwe=bH[0],ebe=bH[1],Gl=new Uint32Array(80),Wl=new Uint32Array(80);let VR=class extends wH{constructor(e=64){super(128,e,16,!1),this.Ah=es[0]|0,this.Al=es[1]|0,this.Bh=es[2]|0,this.Bl=es[3]|0,this.Ch=es[4]|0,this.Cl=es[5]|0,this.Dh=es[6]|0,this.Dl=es[7]|0,this.Eh=es[8]|0,this.El=es[9]|0,this.Fh=es[10]|0,this.Fl=es[11]|0,this.Gh=es[12]|0,this.Gl=es[13]|0,this.Hh=es[14]|0,this.Hl=es[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let b=0;b<16;b++,n+=4)Gl[b]=e.getUint32(n),Wl[b]=e.getUint32(n+=4);for(let b=16;b<80;b++){const _=Gl[b-15]|0,x=Wl[b-15]|0,C=cu(_,x,1)^cu(_,x,8)^M8(_,x,7),S=lu(_,x,1)^lu(_,x,8)^j8(_,x,7),N=Gl[b-2]|0,A=Wl[b-2]|0,P=cu(N,A,19)^j0(N,A,61)^M8(N,A,6),R=lu(N,A,19)^F0(N,A,61)^j8(N,A,6),j=Nwe(S,R,Wl[b-7],Wl[b-16]),H=Pwe(j,C,P,Gl[b-7],Gl[b-16]);Gl[b]=H|0,Wl[b]=j|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:y,Hh:w,Hl:v}=this;for(let b=0;b<80;b++){const _=cu(d,h,14)^cu(d,h,18)^j0(d,h,41),x=lu(d,h,14)^lu(d,h,18)^F0(d,h,41),C=d&f^~d&g,S=h&p^~h&y,N=kwe(v,x,S,ebe[b],Wl[b]),A=Owe(N,w,_,C,Xwe[b],Gl[b]),P=N|0,R=cu(r,s,28)^j0(r,s,34)^j0(r,s,39),j=lu(r,s,28)^F0(r,s,34)^F0(r,s,39),H=r&i^r&a^i&a,K=s&o^s&c^o&c;w=g|0,v=y|0,g=f|0,y=p|0,f=d|0,p=h|0,{h:d,l:h}=Uo(l|0,u|0,A|0,P|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const T=FR(P,j,K);r=zR(T,A,R,H),s=T|0}({h:r,l:s}=Uo(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Uo(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Uo(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Uo(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Uo(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Uo(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=Uo(this.Gh|0,this.Gl|0,g|0,y|0),{h:w,l:v}=Uo(this.Hh|0,this.Hl|0,w|0,v|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,y,w,v)}roundClean(){xo(Gl,Wl)}destroy(){xo(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},tbe=class extends VR{constructor(){super(48),this.Ah=Xr[0]|0,this.Al=Xr[1]|0,this.Bh=Xr[2]|0,this.Bl=Xr[3]|0,this.Ch=Xr[4]|0,this.Cl=Xr[5]|0,this.Dh=Xr[6]|0,this.Dl=Xr[7]|0,this.Eh=Xr[8]|0,this.El=Xr[9]|0,this.Fh=Xr[10]|0,this.Fl=Xr[11]|0,this.Gh=Xr[12]|0,this.Gl=Xr[13]|0,this.Hh=Xr[14]|0,this.Hl=Xr[15]|0}};const ts=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);let nbe=class extends VR{constructor(){super(32),this.Ah=ts[0]|0,this.Al=ts[1]|0,this.Bh=ts[2]|0,this.Bl=ts[3]|0,this.Ch=ts[4]|0,this.Cl=ts[5]|0,this.Dh=ts[6]|0,this.Dl=ts[7]|0,this.Eh=ts[8]|0,this.El=ts[9]|0,this.Fh=ts[10]|0,this.Fl=ts[11]|0,this.Gh=ts[12]|0,this.Gl=ts[13]|0,this.Hh=ts[14]|0,this.Hl=ts[15]|0}};const nA=Vv(()=>new Zwe),rbe=Vv(()=>new VR),sbe=Vv(()=>new tbe),ibe=Vv(()=>new nbe),obe=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),rr=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Re=new Uint32Array(32);function ql(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=Re[2*t],l=Re[2*t+1],u=Re[2*e],d=Re[2*e+1],h=Re[2*n],f=Re[2*n+1],p=Re[2*r],g=Re[2*r+1],y=FR(c,u,o);l=zR(y,l,d,a),c=y|0,{Dh:g,Dl:p}={Dh:g^l,Dl:p^c},{Dh:g,Dl:p}={Dh:_we(g,p),Dl:Cwe(g)},{h:f,l:h}=Uo(f,h,g,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:cu(d,u,24),Bl:lu(d,u,24)},Re[2*t]=c,Re[2*t+1]=l,Re[2*e]=u,Re[2*e+1]=d,Re[2*n]=h,Re[2*n+1]=f,Re[2*r]=p,Re[2*r+1]=g}function Vl(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=Re[2*t],l=Re[2*t+1],u=Re[2*e],d=Re[2*e+1],h=Re[2*n],f=Re[2*n+1],p=Re[2*r],g=Re[2*r+1],y=FR(c,u,o);l=zR(y,l,d,a),c=y|0,{Dh:g,Dl:p}={Dh:g^l,Dl:p^c},{Dh:g,Dl:p}={Dh:cu(g,p,16),Dl:lu(g,p,16)},{h:f,l:h}=Uo(f,h,g,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:j0(d,u,63),Bl:F0(d,u,63)},Re[2*t]=c,Re[2*t+1]=l,Re[2*e]=u,Re[2*e+1]=d,Re[2*n]=h,Re[2*n+1]=f,Re[2*r]=p,Re[2*r+1]=g}function abe(t,e={},n,r,s){if(bl(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class cbe extends tA{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,bl(e),bl(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=Ib(this.buffer)}update(e){Sd(this),e=ca(e),Eo(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===n&&(uu(s),this.compress(s,0,!1),uu(s),this.pos=0);const l=Math.min(n-this.pos,i-c),u=o+c;if(l===n&&!(u%4)&&c+l<i){const d=new Uint32Array(a,u,Math.floor((i-c)/4));uu(d);for(let h=0;c+n<i;h+=s.length,c+=n)this.length+=n,this.compress(d,h,!1);uu(d);continue}r.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){Sd(this),WR(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,xo(this.buffer.subarray(n)),uu(r),this.compress(r,0,!0),uu(r);const s=Ib(e);this.get().forEach((i,o)=>s[o]=Ac(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class lbe extends cbe{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=rr[0]|0,this.v0h=rr[1]|0,this.v1l=rr[2]|0,this.v1h=rr[3]|0,this.v2l=rr[4]|0,this.v2h=rr[5]|0,this.v3l=rr[6]|0,this.v3h=rr[7]|0,this.v4l=rr[8]|0,this.v4h=rr[9]|0,this.v5l=rr[10]|0,this.v5h=rr[11]|0,this.v6l=rr[12]|0,this.v6h=rr[13]|0,this.v7l=rr[14]|0,this.v7h=rr[15]|0,abe(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=ca(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=ca(i);const a=Ib(i);this.v4l^=Ac(a[0]),this.v4h^=Ac(a[1]),this.v5l^=Ac(a[2]),this.v5h^=Ac(a[3])}if(s!==void 0){s=ca(s);const a=Ib(s);this.v6l^=Ac(a[0]),this.v6h^=Ac(a[1]),this.v7l^=Ac(a[2]),this.v7h^=Ac(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:l,v4h:u,v5l:d,v5h:h,v6l:f,v6h:p,v7l:g,v7h:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=d|0,this.v5h=h|0,this.v6l=f|0,this.v6h=p|0,this.v7l=g|0,this.v7h=y|0}compress(e,n,r){this.get().forEach((c,l)=>Re[l]=c),Re.set(rr,16);let{h:s,l:i}=cH(BigInt(this.length));Re[24]=rr[8]^i,Re[25]=rr[9]^s,r&&(Re[28]=~Re[28],Re[29]=~Re[29]);let o=0;const a=obe;for(let c=0;c<12;c++)ql(0,4,8,12,e,n+2*a[o++]),Vl(0,4,8,12,e,n+2*a[o++]),ql(1,5,9,13,e,n+2*a[o++]),Vl(1,5,9,13,e,n+2*a[o++]),ql(2,6,10,14,e,n+2*a[o++]),Vl(2,6,10,14,e,n+2*a[o++]),ql(3,7,11,15,e,n+2*a[o++]),Vl(3,7,11,15,e,n+2*a[o++]),ql(0,5,10,15,e,n+2*a[o++]),Vl(0,5,10,15,e,n+2*a[o++]),ql(1,6,11,12,e,n+2*a[o++]),Vl(1,6,11,12,e,n+2*a[o++]),ql(2,7,8,13,e,n+2*a[o++]),Vl(2,7,8,13,e,n+2*a[o++]),ql(3,4,9,14,e,n+2*a[o++]),Vl(3,4,9,14,e,n+2*a[o++]);this.v0l^=Re[0]^Re[16],this.v0h^=Re[1]^Re[17],this.v1l^=Re[2]^Re[18],this.v1h^=Re[3]^Re[19],this.v2l^=Re[4]^Re[20],this.v2h^=Re[5]^Re[21],this.v3l^=Re[6]^Re[22],this.v3h^=Re[7]^Re[23],this.v4l^=Re[8]^Re[24],this.v4h^=Re[9]^Re[25],this.v5l^=Re[10]^Re[26],this.v5h^=Re[11]^Re[27],this.v6l^=Re[12]^Re[28],this.v6h^=Re[13]^Re[29],this.v7l^=Re[14]^Re[30],this.v7h^=Re[15]^Re[31],xo(Re)}destroy(){this.destroyed=!0,xo(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ube=Uwe(t=>new lbe(t)),dbe="https://rpc.walletconnect.org/v1";function vH(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(Vwe(n)).toString("hex")}async function hbe(t,e,n,r,s,i){switch(n.t){case"eip191":return await fbe(t,e,n.s);case"eip1271":return await pbe(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function fbe(t,e,n){return(await Kme({hash:vH(e),signature:n})).toLowerCase()===t.toLowerCase()}async function pbe(t,e,n,r,s,i){const o=kg(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l=n.substring(2),u=(l.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:vH(e)).substring(2),h=a+d+c+u+l,f=await fetch(`${i||dbe}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:gbe(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function gbe(){return Date.now()+Math.floor(Math.random()*1e3)}function mbe(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return Py.encode(i)}function ybe(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const s=ube(r,{dkLen:32});return Py.encode(s)}function G8(t){const e=new Uint8Array(nA(wbe(t)));return Py.encode(e)}function wbe(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function W8(t){const e=Buffer.from(t,"base64"),n=Oye(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=_ye(n),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(r)]),o=ibe(i);return jye.encode(o).replace(/=+$/,"")}function B2(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function bbe(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(B2(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(B2(n.length)),s.push(n),s.push(Buffer.from([26])),s.push(B2(r.length)),s.push(r);const i=Buffer.concat(s),o=nA(i);return Buffer.from(o).toString("hex").toUpperCase()}var vbe=Object.defineProperty,Ebe=Object.defineProperties,xbe=Object.getOwnPropertyDescriptors,q8=Object.getOwnPropertySymbols,_be=Object.prototype.hasOwnProperty,Cbe=Object.prototype.propertyIsEnumerable,V8=(t,e,n)=>e in t?vbe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Abe=(t,e)=>{for(var n in e||(e={}))_be.call(e,n)&&V8(t,n,e[n]);if(q8)for(var n of q8(e))Cbe.call(e,n)&&V8(t,n,e[n]);return t},Sbe=(t,e)=>Ebe(t,xbe(e));const Ibe="did:pkh:",KR=t=>t==null?void 0:t.split(":"),Tbe=t=>{const e=t&&KR(t);if(e)return t.includes(Ibe)?e[3]:e[1]},sP=t=>{const e=t&&KR(t);if(e)return e[2]+":"+e[3]},g_=t=>{const e=t&&KR(t);if(e)return e.pop()};async function K8(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=EH(s,s.iss),o=g_(s.iss);return await hbe(o,i,r,sP(s.iss),n)}const EH=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=g_(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${Tbe(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=nx(t.resources);if(p){const g=Nb(p);s=Bbe(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function Nbe(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function Pbe(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Lf(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function kbe(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:Obe(e,n,r)}}}function Obe(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function xH(t){return Lf(t),`urn:recap:${Nbe(t).replace(/=/g,"")}`}function Nb(t){const e=Pbe(t.replace("urn:recap:",""));return Lf(e),e}function Rbe(t,e,n){const r=kbe(t,e,n);return xH(r)}function Dbe(t){return t&&t.includes("urn:recap:")}function $be(t,e){const n=Nb(t),r=Nb(e),s=Ube(n,r);return xH(s)}function Ube(t,e){Lf(t),Lf(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=Sbe(Abe({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function Bbe(t="",e){Lf(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function Q8(t){var e;const n=Nb(t);Lf(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function Y8(t){const e=Nb(t);Lf(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function nx(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return Dbe(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function _H(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function iP(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function L2(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function ei(t,...e){if(!_H(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function J8(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Lbe(t,e){ei(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function fd(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Xm(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Mbe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const jbe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Fbe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function oP(t){if(typeof t=="string")t=Fbe(t);else if(_H(t))t=aP(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function zbe(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Hbe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const Gbe=(t,e)=>{function n(r,...s){if(ei(r),!jbe)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?ei(l):ei(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&ei(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");ei(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,ei(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(ei(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function Z8(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!qbe(e))throw new Error("invalid output, must be aligned");return e}function X8(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function Wbe(t,e,n){iP(n);const r=new Uint8Array(16),s=Mbe(r);return X8(s,0,BigInt(e),n),X8(s,8,BigInt(t),n),r}function qbe(t){return t.byteOffset%4===0}function aP(t){return Uint8Array.from(t)}const CH=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Vbe=CH("expand 16-byte k"),Kbe=CH("expand 32-byte k"),Qbe=fd(Vbe),Ybe=fd(Kbe);function Ut(t,e){return t<<e|t>>>32-e}function cP(t){return t.byteOffset%4===0}const sE=64,Jbe=16,AH=2**32-1,eU=new Uint32Array;function Zbe(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(sE),u=fd(l),d=cP(s)&&cP(i),h=d?fd(s):eU,f=d?fd(i):eU;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=AH)throw new Error("arx: counter overflow");const g=Math.min(sE,c-p);if(d&&g===sE){const y=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let w=0,v;w<Jbe;w++)v=y+w,f[v]=h[v]^u[w];p+=sE;continue}for(let y=0,w;y<g;y++)w=p+y,i[w]=s[w]^l[y];p+=g}}function Xbe(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=zbe({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return L2(s),L2(o),iP(i),iP(n),(a,c,l,u,d=0)=>{ei(a),ei(c),ei(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),ei(u),L2(d),d<0||d>=AH)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,y;if(p===32)f.push(g=aP(a)),y=Ybe;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),y=Qbe,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);cP(c)||f.push(c=aP(c));const w=fd(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(y,w,fd(c.subarray(0,16)),w),c=c.subarray(16)}const v=16-s;if(v!==c.length)throw new Error(`arx: nonce must be ${v} or 16 bytes`);if(v!==12){const _=new Uint8Array(12);_.set(c,i?0:12-c.length),c=_,f.push(c)}const b=fd(c);return Zbe(t,y,w,b,l,u,d,o),Xm(...f),u}}const Nr=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class eve{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=oP(e),ei(e,32);const n=Nr(e,0),r=Nr(e,2),s=Nr(e,4),i=Nr(e,6),o=Nr(e,8),a=Nr(e,10),c=Nr(e,12),l=Nr(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Nr(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],y=o[9],w=Nr(e,n+0),v=Nr(e,n+2),b=Nr(e,n+4),_=Nr(e,n+6),x=Nr(e,n+8),C=Nr(e,n+10),S=Nr(e,n+12),N=Nr(e,n+14);let A=i[0]+(w&8191),P=i[1]+((w>>>13|v<<3)&8191),R=i[2]+((v>>>10|b<<6)&8191),j=i[3]+((b>>>7|_<<9)&8191),H=i[4]+((_>>>4|x<<12)&8191),K=i[5]+(x>>>1&8191),T=i[6]+((x>>>14|C<<2)&8191),I=i[7]+((C>>>11|S<<5)&8191),L=i[8]+((S>>>8|N<<8)&8191),U=i[9]+(N>>>5|s),$=0,M=$+A*a+P*(5*y)+R*(5*g)+j*(5*p)+H*(5*f);$=M>>>13,M&=8191,M+=K*(5*h)+T*(5*d)+I*(5*u)+L*(5*l)+U*(5*c),$+=M>>>13,M&=8191;let q=$+A*c+P*a+R*(5*y)+j*(5*g)+H*(5*p);$=q>>>13,q&=8191,q+=K*(5*f)+T*(5*h)+I*(5*d)+L*(5*u)+U*(5*l),$+=q>>>13,q&=8191;let ee=$+A*l+P*c+R*a+j*(5*y)+H*(5*g);$=ee>>>13,ee&=8191,ee+=K*(5*p)+T*(5*f)+I*(5*h)+L*(5*d)+U*(5*u),$+=ee>>>13,ee&=8191;let ce=$+A*u+P*l+R*c+j*a+H*(5*y);$=ce>>>13,ce&=8191,ce+=K*(5*g)+T*(5*p)+I*(5*f)+L*(5*h)+U*(5*d),$+=ce>>>13,ce&=8191;let se=$+A*d+P*u+R*l+j*c+H*a;$=se>>>13,se&=8191,se+=K*(5*y)+T*(5*g)+I*(5*p)+L*(5*f)+U*(5*h),$+=se>>>13,se&=8191;let le=$+A*h+P*d+R*u+j*l+H*c;$=le>>>13,le&=8191,le+=K*a+T*(5*y)+I*(5*g)+L*(5*p)+U*(5*f),$+=le>>>13,le&=8191;let me=$+A*f+P*h+R*d+j*u+H*l;$=me>>>13,me&=8191,me+=K*c+T*a+I*(5*y)+L*(5*g)+U*(5*p),$+=me>>>13,me&=8191;let Z=$+A*p+P*f+R*h+j*d+H*u;$=Z>>>13,Z&=8191,Z+=K*l+T*c+I*a+L*(5*y)+U*(5*g),$+=Z>>>13,Z&=8191;let re=$+A*g+P*p+R*f+j*h+H*d;$=re>>>13,re&=8191,re+=K*u+T*l+I*c+L*a+U*(5*y),$+=re>>>13,re&=8191;let ae=$+A*y+P*g+R*p+j*f+H*h;$=ae>>>13,ae&=8191,ae+=K*d+T*u+I*l+L*c+U*a,$+=ae>>>13,ae&=8191,$=($<<2)+$|0,$=$+M|0,M=$&8191,$=$>>>13,q+=$,i[0]=M,i[1]=q,i[2]=ee,i[3]=ce,i[4]=se,i[5]=le,i[6]=me,i[7]=Z,i[8]=re,i[9]=ae}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;Xm(r)}update(e){J8(this),e=oP(e),ei(e);const{buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Xm(this.h,this.r,this.buffer,this.pad)}digestInto(e){J8(this),Lbe(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function tve(t){const e=(r,s)=>t(s).update(oP(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const nve=tve(t=>new eve(t));function rve(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],y=e[6],w=e[7],v=s,b=n[0],_=n[1],x=n[2],C=o,S=a,N=c,A=l,P=u,R=d,j=h,H=f,K=p,T=g,I=y,L=w,U=v,$=b,M=_,q=x;for(let ce=0;ce<i;ce+=2)C=C+P|0,U=Ut(U^C,16),K=K+U|0,P=Ut(P^K,12),C=C+P|0,U=Ut(U^C,8),K=K+U|0,P=Ut(P^K,7),S=S+R|0,$=Ut($^S,16),T=T+$|0,R=Ut(R^T,12),S=S+R|0,$=Ut($^S,8),T=T+$|0,R=Ut(R^T,7),N=N+j|0,M=Ut(M^N,16),I=I+M|0,j=Ut(j^I,12),N=N+j|0,M=Ut(M^N,8),I=I+M|0,j=Ut(j^I,7),A=A+H|0,q=Ut(q^A,16),L=L+q|0,H=Ut(H^L,12),A=A+H|0,q=Ut(q^A,8),L=L+q|0,H=Ut(H^L,7),C=C+R|0,q=Ut(q^C,16),I=I+q|0,R=Ut(R^I,12),C=C+R|0,q=Ut(q^C,8),I=I+q|0,R=Ut(R^I,7),S=S+j|0,U=Ut(U^S,16),L=L+U|0,j=Ut(j^L,12),S=S+j|0,U=Ut(U^S,8),L=L+U|0,j=Ut(j^L,7),N=N+H|0,$=Ut($^N,16),K=K+$|0,H=Ut(H^K,12),N=N+H|0,$=Ut($^N,8),K=K+$|0,H=Ut(H^K,7),A=A+P|0,M=Ut(M^A,16),T=T+M|0,P=Ut(P^T,12),A=A+P|0,M=Ut(M^A,8),T=T+M|0,P=Ut(P^T,7);let ee=0;r[ee++]=o+C|0,r[ee++]=a+S|0,r[ee++]=c+N|0,r[ee++]=l+A|0,r[ee++]=u+P|0,r[ee++]=d+R|0,r[ee++]=h+j|0,r[ee++]=f+H|0,r[ee++]=p+K|0,r[ee++]=g+T|0,r[ee++]=y+I|0,r[ee++]=w+L|0,r[ee++]=v+U|0,r[ee++]=b+$|0,r[ee++]=_+M|0,r[ee++]=x+q|0}const sve=Xbe(rve,{counterRight:!1,counterLength:4,allowShortKeys:!1}),ive=new Uint8Array(16),tU=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(ive.subarray(n))},ove=new Uint8Array(32);function nU(t,e,n,r,s){const i=t(e,n,ove),o=nve.create(i);s&&tU(o,s),tU(o,r);const a=Wbe(r.length,s?s.length:0,!0);o.update(a);const c=o.digest();return Xm(i,a),c}const ave=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=Z8(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=nU(t,e,n,a,r);return i.set(c,o),Xm(c),i},decrypt(s,i){i=Z8(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=nU(t,e,n,o,r);if(!Hbe(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),Xm(c),i}}),SH=Gbe({blockSize:64,nonceLength:12,tagLength:16},ave(sve));let IH=class extends tA{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,GR(e);const r=ca(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),xo(i)}update(e){return Sd(this),this.iHash.update(e),this}digestInto(e){Sd(this),Eo(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const rA=(t,e,n)=>new IH(t,e).update(n).digest();rA.create=(t,e)=>new IH(t,e);function cve(t,e,n){return GR(t),n===void 0&&(n=new Uint8Array(t.outputLen)),rA(t,ca(n),ca(e))}const M2=Uint8Array.from([0]),rU=Uint8Array.of();function lve(t,e,n,r=32){GR(t),bl(r);const s=t.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);n===void 0&&(n=rU);const o=new Uint8Array(i*s),a=rA.create(t,e),c=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let u=0;u<i;u++)M2[0]=u+1,c.update(u===0?rU:l).update(n).update(M2).digestInto(l),o.set(l,s*u),a._cloneInto(c);return a.destroy(),c.destroy(),xo(l,M2),o.slice(0,r)}const uve=(t,e,n,r,s)=>lve(t,cve(t,e,n),r,s),sA=nA,QR=BigInt(0),lP=BigInt(1);function m_(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function iE(t){const e=t.toString(16);return e.length&1?"0"+e:e}function TH(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?QR:BigInt("0x"+t)}function iA(t){return TH(Tb(t))}function y_(t){return Eo(t),TH(Tb(Uint8Array.from(t).reverse()))}function YR(t,e){return qR(t.toString(16).padStart(e*2,"0"))}function JR(t,e){return YR(t,e).reverse()}function Xs(t,e,n){let r;if(typeof e=="string")try{r=qR(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(HR(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const j2=t=>typeof t=="bigint"&&QR<=t;function dve(t,e,n){return j2(t)&&j2(e)&&j2(n)&&e<=t&&t<n}function uP(t,e,n,r){if(!dve(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function hve(t){let e;for(e=0;t>QR;t>>=lP,e+=1);return e}const oA=t=>(lP<<BigInt(t))-lP;function fve(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=h=>new Uint8Array(h),s=h=>Uint8Array.of(h);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...h)=>n(o,i,...h),u=(h=r(0))=>{o=l(s(0),h),i=l(),h.length!==0&&(o=l(s(1),h),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const f=[];for(;h<e;){i=l();const p=i.slice();f.push(p),h+=i.length}return Sh(...f)};return(h,f)=>{c(),u(h);let p;for(;!(p=f(d()));)u();return c(),p}}function aA(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function sU(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const oi=BigInt(0),Ps=BigInt(1),Ih=BigInt(2),pve=BigInt(3),NH=BigInt(4),PH=BigInt(5),kH=BigInt(8);function fo(t,e){const n=t%e;return n>=oi?n:e+n}function Ro(t,e,n){let r=t;for(;e-- >oi;)r*=r,r%=n;return r}function iU(t,e){if(t===oi)throw new Error("invert: expected non-zero number");if(e<=oi)throw new Error("invert: expected positive modulus, got "+e);let n=fo(t,e),r=e,s=oi,i=Ps;for(;n!==oi;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Ps)throw new Error("invert: does not exist");return fo(s,e)}function OH(t,e){const n=(t.ORDER+Ps)/NH,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function gve(t,e){const n=(t.ORDER-PH)/kH,r=t.mul(e,Ih),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Ih),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function mve(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Ps,n=0;for(;e%Ih===oi;)e/=Ih,n++;let r=Ih;const s=Ry(t);for(;oU(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return OH;let i=s.pow(r,e);const o=(e+Ps)/Ih;return function(a,c){if(a.is0(c))return c;if(oU(a,c)!==1)throw new Error("Cannot find square root");let l=n,u=a.mul(a.ONE,i),d=a.pow(c,e),h=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let f=1,p=a.sqr(d);for(;!a.eql(p,a.ONE);)if(f++,p=a.sqr(p),f===l)throw new Error("Cannot find square root");const g=Ps<<BigInt(l-f-1),y=a.pow(u,g);l=f,u=a.sqr(y),d=a.mul(d,u),h=a.mul(h,y)}return h}}function yve(t){return t%NH===pve?OH:t%kH===PH?gve:mve(t)}const wve=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function bve(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=wve.reduce((r,s)=>(r[s]="function",r),e);return aA(t,n),t}function vve(t,e,n){if(n<oi)throw new Error("invalid exponent, negatives unsupported");if(n===oi)return t.ONE;if(n===Ps)return e;let r=t.ONE,s=e;for(;n>oi;)n&Ps&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Ps;return r}function RH(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function oU(t,e){const n=(t.ORDER-Ps)/Ih,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Eve(t,e){e!==void 0&&bl(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Ry(t,e,n=!1,r={}){if(t<=oi)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=Eve(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:oA(o),ZERO:oi,ONE:Ps,create:u=>fo(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return oi<=u&&u<t},is0:u=>u===oi,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&Ps)===Ps,neg:u=>fo(-u,t),eql:(u,d)=>u===d,sqr:u=>fo(u*u,t),add:(u,d)=>fo(u+d,t),sub:(u,d)=>fo(u-d,t),mul:(u,d)=>fo(u*d,t),pow:(u,d)=>vve(l,u,d),div:(u,d)=>fo(u*iU(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>iU(u,t),sqrt:i||(u=>(c||(c=yve(t)),c(l,u))),toBytes:u=>n?JR(u,a):YR(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?y_(u):iA(u)},invertBatch:u=>RH(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function DH(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function $H(t){const e=DH(t);return e+Math.ceil(e/2)}function xve(t,e,n=!1){const r=t.length,s=DH(e),i=$H(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?y_(t):iA(t),a=fo(o,e-Ps)+Ps;return n?JR(a,s):YR(a,s)}const ey=BigInt(0),Th=BigInt(1);function fw(t,e){const n=e.negate();return t?n:e}function _ve(t,e,n){const r=i=>i.pz,s=RH(t.Fp,n.map(r));return n.map((i,o)=>i.toAffine(s[o])).map(t.fromAffine)}function UH(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function F2(t,e){UH(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=oA(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function aU(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Th);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function Cve(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Ave(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const z2=new WeakMap,BH=new WeakMap;function H2(t){return BH.get(t)||1}function cU(t){if(t!==ey)throw new Error("invalid wNAF")}function Sve(t,e){return{constTimeNegate:fw,hasPrecomputes(n){return H2(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>ey;)r&Th&&(s=s.add(i)),i=i.double(),r>>=Th;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=F2(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=F2(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=aU(s,c,a);s=l,d?o=o.add(fw(f,r[p])):i=i.add(fw(h,r[u]))}return cU(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=F2(n,e);for(let a=0;a<o.windows&&s!==ey;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=aU(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return cU(s),i},getPrecomputes(n,r,s){let i=z2.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),z2.set(r,i))),i},wNAFCached(n,r,s){const i=H2(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=H2(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){UH(r,e),BH.set(n,r),z2.delete(n)}}}function Ive(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>ey||r>ey;)n&Th&&(i=i.add(s)),r&Th&&(o=o.add(s)),s=s.double(),n>>=Th,r>>=Th;return{p1:i,p2:o}}function Tve(t,e,n,r){Cve(n,t),Ave(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=hve(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=oA(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const y=r[g],w=Number(y>>BigInt(f)&l);u[w]=u[w].add(n[g])}let p=o;for(let g=u.length-1,y=o;g>0;g--)y=y.add(u[g]),p=p.add(y);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function lU(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return bve(e),e}else return Ry(t)}function Nve(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const o of["p","n","h"]){const a=e[o];if(!(typeof a=="bigint"&&a>ey))throw new Error(`CURVE.${o} must be positive bigint`)}const r=lU(e.p,n.Fp),s=lU(e.n,n.Fn),i=["Gx","Gy","a","b"];for(const o of i)if(!r.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const m0=BigInt(0),Cp=BigInt(1),oE=BigInt(2);function Pve(t){return aA(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function kve(t){const e=Pve(t),{P:n,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const c=o||Oy,l=a?255:448,u=a?32:56,d=BigInt(a?9:5),h=BigInt(a?121665:39081),f=a?oE**BigInt(254):oE**BigInt(447),p=a?BigInt(8)*oE**BigInt(251)-Cp:BigInt(4)*oE**BigInt(445)-Cp,g=f+p+Cp,y=A=>fo(A,n),w=v(d);function v(A){return JR(y(A),u)}function b(A){const P=Xs("u coordinate",A,u);return a&&(P[31]&=127),y(y_(P))}function _(A){return y_(s(Xs("scalar",A,u)))}function x(A,P){const R=N(b(P),_(A));if(R===m0)throw new Error("invalid private or public key received");return v(R)}function C(A){return x(A,w)}function S(A,P,R){const j=y(A*(P-R));return P=y(P-j),R=y(R+j),{x_2:P,x_3:R}}function N(A,P){uP("u",A,m0,n),uP("scalar",P,f,g);const R=P,j=A;let H=Cp,K=m0,T=A,I=Cp,L=m0;for(let $=BigInt(l-1);$>=m0;$--){const M=R>>$&Cp;L^=M,{x_2:H,x_3:T}=S(L,H,T),{x_2:K,x_3:I}=S(L,K,I),L=M;const q=H+K,ee=y(q*q),ce=H-K,se=y(ce*ce),le=ee-se,me=T+I,Z=T-I,re=y(Z*q),ae=y(me*ce),oe=re+ae,we=re-ae;T=y(oe*oe),I=y(j*y(we*we)),H=y(ee*se),K=y(le*(ee+y(h*le)))}({x_2:H,x_3:T}=S(L,H,T)),{x_2:K,x_3:I}=S(L,K,I);const U=i(K);return y(H*U)}return{scalarMult:x,scalarMultBase:C,getSharedSecret:(A,P)=>x(A,P),getPublicKey:A=>C(A),utils:{randomPrivateKey:()=>c(u)},GuBytes:w.slice()}}BigInt(0);const Ove=BigInt(1),uU=BigInt(2),Rve=BigInt(3),Dve=BigInt(5);BigInt(8);const LH={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function $ve(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=LH.p,o=t*t%i*t%i,a=Ro(o,uU,i)*o%i,c=Ro(a,Ove,i)*t%i,l=Ro(c,Dve,i)*c%i,u=Ro(l,e,i)*l%i,d=Ro(u,n,i)*u%i,h=Ro(d,r,i)*d%i,f=Ro(h,s,i)*h%i,p=Ro(f,s,i)*h%i,g=Ro(p,e,i)*l%i;return{pow_p_5_8:Ro(g,uU,i)*t%i,b2:o}}function Uve(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const dP=(()=>{const t=LH.p;return kve({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=$ve(e);return fo(Ro(n,Rve,t)*r,t)},adjustScalarBytes:Uve})})();function dU(t){t.lowS!==void 0&&m_("lowS",t.lowS),t.prehash!==void 0&&m_("prehash",t.prehash)}class Bve extends Error{constructor(e=""){super(e)}}const $c={Err:Bve,_tlv:{encode:(t,e)=>{const{Err:n}=$c;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=iE(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?iE(s.length/2|128):"";return iE(t)+i+s+e},decode(t,e){const{Err:n}=$c;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=$c;if(t<pw)throw new e("integer: negative integers are not allowed");let n=iE(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=$c;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return iA(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=$c,s=Xs("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=$c,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},pw=BigInt(0),gw=BigInt(1),Lve=BigInt(2),aE=BigInt(3),Mve=BigInt(4);function jve(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function MH(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=Xs("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function Fve(t,e={}){const{Fp:n,Fn:r}=Nve("weierstrass",t,e),{h:s,n:i}=t;aA(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(N,A,P){const{x:R,y:j}=A.toAffine(),H=n.toBytes(R);if(m_("isCompressed",P),P){a();const K=!n.isOdd(j);return Sh(jH(K),H)}else return Sh(Uint8Array.of(4),H,n.toBytes(j))}function l(N){Eo(N);const A=n.BYTES,P=A+1,R=2*A+1,j=N.length,H=N[0],K=N.subarray(1);if(j===P&&(H===2||H===3)){const T=n.fromBytes(K);if(!n.isValid(T))throw new Error("bad point: is not on curve, wrong x");const I=h(T);let L;try{L=n.sqrt(I)}catch($){const M=$ instanceof Error?": "+$.message:"";throw new Error("bad point: is not on curve, sqrt error"+M)}a();const U=n.isOdd(L);return(H&1)===1!==U&&(L=n.neg(L)),{x:T,y:L}}else if(j===R&&H===4){const T=n.fromBytes(K.subarray(A*0,A*1)),I=n.fromBytes(K.subarray(A*1,A*2));if(!f(T,I))throw new Error("bad point: is not on curve");return{x:T,y:I}}else throw new Error(`bad point: got length ${j}, expected compressed=${P} or uncompressed=${R}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=jve(n,t.a,t.b);function f(N,A){const P=n.sqr(A),R=h(N);return n.eql(P,R)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,aE),Mve),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function y(N,A,P=!1){if(!n.isValid(A)||P&&n.is0(A))throw new Error(`bad point coordinate ${N}`);return A}function w(N){if(!(N instanceof x))throw new Error("ProjectivePoint expected")}const v=sU((N,A)=>{const{px:P,py:R,pz:j}=N;if(n.eql(j,n.ONE))return{x:P,y:R};const H=N.is0();A==null&&(A=H?n.ONE:n.inv(j));const K=n.mul(P,A),T=n.mul(R,A),I=n.mul(j,A);if(H)return{x:n.ZERO,y:n.ZERO};if(!n.eql(I,n.ONE))throw new Error("invZ was invalid");return{x:K,y:T}}),b=sU(N=>{if(N.is0()){if(e.allowInfinityPoint&&!n.is0(N.py))return;throw new Error("bad point: ZERO")}const{x:A,y:P}=N.toAffine();if(!n.isValid(A)||!n.isValid(P))throw new Error("bad point: x or y not field elements");if(!f(A,P))throw new Error("bad point: equation left != right");if(!N.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function _(N,A,P,R,j){return P=new x(n.mul(P.px,N),P.py,P.pz),A=fw(R,A),P=fw(j,P),A.add(P)}class x{constructor(A,P,R){this.px=y("x",A),this.py=y("y",P,!0),this.pz=y("z",R),Object.freeze(this)}static fromAffine(A){const{x:P,y:R}=A||{};if(!A||!n.isValid(P)||!n.isValid(R))throw new Error("invalid affine point");if(A instanceof x)throw new Error("projective point not allowed");return n.is0(P)&&n.is0(R)?x.ZERO:new x(P,R,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(A){return _ve(x,"pz",A)}static fromBytes(A){return Eo(A),x.fromHex(A)}static fromHex(A){const P=x.fromAffine(d(Xs("pointHex",A)));return P.assertValidity(),P}static fromPrivateKey(A){const P=MH(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return x.BASE.multiply(P(A))}static msm(A,P){return Tve(x,r,A,P)}precompute(A=8,P=!0){return S.setWindowSize(this,A),P||this.multiply(aE),this}_setWindowSize(A){this.precompute(A)}assertValidity(){b(this)}hasEvenY(){const{y:A}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(A)}equals(A){w(A);const{px:P,py:R,pz:j}=this,{px:H,py:K,pz:T}=A,I=n.eql(n.mul(P,T),n.mul(H,j)),L=n.eql(n.mul(R,T),n.mul(K,j));return I&&L}negate(){return new x(this.px,n.neg(this.py),this.pz)}double(){const{a:A,b:P}=t,R=n.mul(P,aE),{px:j,py:H,pz:K}=this;let T=n.ZERO,I=n.ZERO,L=n.ZERO,U=n.mul(j,j),$=n.mul(H,H),M=n.mul(K,K),q=n.mul(j,H);return q=n.add(q,q),L=n.mul(j,K),L=n.add(L,L),T=n.mul(A,L),I=n.mul(R,M),I=n.add(T,I),T=n.sub($,I),I=n.add($,I),I=n.mul(T,I),T=n.mul(q,T),L=n.mul(R,L),M=n.mul(A,M),q=n.sub(U,M),q=n.mul(A,q),q=n.add(q,L),L=n.add(U,U),U=n.add(L,U),U=n.add(U,M),U=n.mul(U,q),I=n.add(I,U),M=n.mul(H,K),M=n.add(M,M),U=n.mul(M,q),T=n.sub(T,U),L=n.mul(M,$),L=n.add(L,L),L=n.add(L,L),new x(T,I,L)}add(A){w(A);const{px:P,py:R,pz:j}=this,{px:H,py:K,pz:T}=A;let I=n.ZERO,L=n.ZERO,U=n.ZERO;const $=t.a,M=n.mul(t.b,aE);let q=n.mul(P,H),ee=n.mul(R,K),ce=n.mul(j,T),se=n.add(P,R),le=n.add(H,K);se=n.mul(se,le),le=n.add(q,ee),se=n.sub(se,le),le=n.add(P,j);let me=n.add(H,T);return le=n.mul(le,me),me=n.add(q,ce),le=n.sub(le,me),me=n.add(R,j),I=n.add(K,T),me=n.mul(me,I),I=n.add(ee,ce),me=n.sub(me,I),U=n.mul($,le),I=n.mul(M,ce),U=n.add(I,U),I=n.sub(ee,U),U=n.add(ee,U),L=n.mul(I,U),ee=n.add(q,q),ee=n.add(ee,q),ce=n.mul($,ce),le=n.mul(M,le),ee=n.add(ee,ce),ce=n.sub(q,ce),ce=n.mul($,ce),le=n.add(le,ce),q=n.mul(ee,le),L=n.add(L,q),q=n.mul(me,le),I=n.mul(se,I),I=n.sub(I,q),q=n.mul(se,ee),U=n.mul(me,U),U=n.add(U,q),new x(I,L,U)}subtract(A){return this.add(A.negate())}is0(){return this.equals(x.ZERO)}multiply(A){const{endo:P}=e;if(!r.isValidNot0(A))throw new Error("invalid scalar: out of range");let R,j;const H=K=>S.wNAFCached(this,K,x.normalizeZ);if(P){const{k1neg:K,k1:T,k2neg:I,k2:L}=P.splitScalar(A),{p:U,f:$}=H(T),{p:M,f:q}=H(L);j=$.add(q),R=_(P.beta,U,M,K,I)}else{const{p:K,f:T}=H(A);R=K,j=T}return x.normalizeZ([R,j])[0]}multiplyUnsafe(A){const{endo:P}=e,R=this;if(!r.isValid(A))throw new Error("invalid scalar: out of range");if(A===pw||R.is0())return x.ZERO;if(A===gw)return R;if(S.hasPrecomputes(this))return this.multiply(A);if(P){const{k1neg:j,k1:H,k2neg:K,k2:T}=P.splitScalar(A),{p1:I,p2:L}=Ive(x,R,H,T);return _(P.beta,I,L,j,K)}else return S.wNAFCachedUnsafe(R,A)}multiplyAndAddUnsafe(A,P,R){const j=this.multiplyUnsafe(P).add(A.multiplyUnsafe(R));return j.is0()?void 0:j}toAffine(A){return v(this,A)}isTorsionFree(){const{isTorsionFree:A}=e;return s===gw?!0:A?A(x,this):S.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:A}=e;return s===gw?this:A?A(x,this):this.multiplyUnsafe(s)}toBytes(A=!0){return m_("isCompressed",A),this.assertValidity(),u(x,this,A)}toRawBytes(A=!0){return this.toBytes(A)}toHex(A=!0){return Tb(this.toBytes(A))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}x.BASE=new x(t.Gx,t.Gy,n.ONE),x.ZERO=new x(n.ZERO,n.ONE,n.ZERO),x.Fp=n,x.Fn=r;const C=r.BITS,S=Sve(x,e.endo?Math.ceil(C/2):C);return x}function jH(t){return Uint8Array.of(t?2:3)}function zve(t,e,n={}){aA(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||Oy,s=e.hmac||((R,...j)=>rA(e.hash,R,Sh(...j))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(R){const j=a>>gw;return R>j}function u(R){return l(R)?o.neg(R):R}function d(R,j){if(!o.isValidNot0(j))throw new Error(`invalid signature ${R}: out of range 1..CURVE.n`)}class h{constructor(j,H,K){d("r",j),d("s",H),this.r=j,this.s=H,K!=null&&(this.recovery=K),Object.freeze(this)}static fromCompact(j){const H=o.BYTES,K=Xs("compactSignature",j,H*2);return new h(o.fromBytes(K.subarray(0,H)),o.fromBytes(K.subarray(H,H*2)))}static fromDER(j){const{r:H,s:K}=$c.toSig(Xs("DER",j));return new h(H,K)}assertValidity(){}addRecoveryBit(j){return new h(this.r,this.s,j)}recoverPublicKey(j){const H=i.ORDER,{r:K,s:T,recovery:I}=this;if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");if(a*Lve<H&&I>1)throw new Error("recovery id is ambiguous for h>1 curve");const L=I===2||I===3?K+a:K;if(!i.isValid(L))throw new Error("recovery id 2 or 3 invalid");const U=i.toBytes(L),$=t.fromHex(Sh(jH((I&1)===0),U)),M=o.inv(L),q=b(Xs("msgHash",j)),ee=o.create(-q*M),ce=o.create(T*M),se=t.BASE.multiplyUnsafe(ee).add($.multiplyUnsafe(ce));if(se.is0())throw new Error("point at infinify");return se.assertValidity(),se}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(j){if(j==="compact")return Sh(o.toBytes(this.r),o.toBytes(this.s));if(j==="der")return qR($c.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Tb(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Tb(this.toBytes("compact"))}}const f=MH(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(R){try{return f(R),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const R=a;return xve(r($H(R)),R)},precompute(R=8,j=t.BASE){return j.precompute(R,!1)}};function g(R,j=!0){return t.fromPrivateKey(R).toBytes(j)}function y(R){if(typeof R=="bigint")return!1;if(R instanceof t)return!0;const j=Xs("key",R).length,H=i.BYTES,K=H+1,T=2*H+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===K))return j===K||j===T}function w(R,j,H=!0){if(y(R)===!0)throw new Error("first arg must be private key");if(y(j)===!1)throw new Error("second arg must be public key");return t.fromHex(j).multiply(f(R)).toBytes(H)}const v=e.bits2int||function(R){if(R.length>8192)throw new Error("input is too large");const j=iA(R),H=R.length*8-c;return H>0?j>>BigInt(H):j},b=e.bits2int_modN||function(R){return o.create(v(R))},_=oA(c);function x(R){return uP("num < 2^"+c,R,pw,_),o.toBytes(R)}function C(R,j,H=S){if(["recovered","canonical"].some(se=>se in H))throw new Error("sign() legacy options not supported");const{hash:K}=e;let{lowS:T,prehash:I,extraEntropy:L}=H;T==null&&(T=!0),R=Xs("msgHash",R),dU(H),I&&(R=Xs("prehashed msgHash",K(R)));const U=b(R),$=f(j),M=[x($),x(U)];if(L!=null&&L!==!1){const se=L===!0?r(i.BYTES):L;M.push(Xs("extraEntropy",se))}const q=Sh(...M),ee=U;function ce(se){const le=v(se);if(!o.isValidNot0(le))return;const me=o.inv(le),Z=t.BASE.multiply(le).toAffine(),re=o.create(Z.x);if(re===pw)return;const ae=o.create(me*o.create(ee+re*$));if(ae===pw)return;let oe=(Z.x===re?0:2)|Number(Z.y&gw),we=ae;return T&&l(ae)&&(we=u(ae),oe^=1),new h(re,we,oe)}return{seed:q,k2sig:ce}}const S={lowS:e.lowS,prehash:!1},N={lowS:e.lowS,prehash:!1};function A(R,j,H=S){const{seed:K,k2sig:T}=C(R,j,H);return fve(e.hash.outputLen,o.BYTES,s)(K,T)}t.BASE.precompute(8);function P(R,j,H,K=N){const T=R;j=Xs("msgHash",j),H=Xs("publicKey",H),dU(K);const{lowS:I,prehash:L,format:U}=K;if("strict"in K)throw new Error("options.strict was renamed to lowS");if(U!==void 0&&!["compact","der","js"].includes(U))throw new Error('format must be "compact", "der" or "js"');const $=typeof T=="string"||HR(T),M=!$&&!U&&typeof T=="object"&&T!==null&&typeof T.r=="bigint"&&typeof T.s=="bigint";if(!$&&!M)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let q,ee;try{if(M)if(U===void 0||U==="js")q=new h(T.r,T.s);else throw new Error("invalid format");if($){try{U!=="compact"&&(q=h.fromDER(T))}catch(oe){if(!(oe instanceof $c.Err))throw oe}!q&&U!=="der"&&(q=h.fromCompact(T))}ee=t.fromHex(H)}catch{return!1}if(!q||I&&q.hasHighS())return!1;L&&(j=e.hash(j));const{r:ce,s:se}=q,le=b(j),me=o.inv(se),Z=o.create(le*me),re=o.create(ce*me),ae=t.BASE.multiplyUnsafe(Z).add(ee.multiplyUnsafe(re));return ae.is0()?!1:o.create(ae.x)===ce}return Object.freeze({getPublicKey:g,getSharedSecret:w,sign:A,verify:P,utils:p,Point:t,Signature:h})}function Hve(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=Ry(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function Gve(t){const{CURVE:e,curveOpts:n}=Hve(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function Wve(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function qve(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=Gve(t),s=Fve(e,n),i=zve(s,r,n);return Wve(t,i)}function hP(t,e){const n=r=>qve({...t,hash:r});return{...n(e),create:n}}const FH={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},zH={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},HH={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Vve=Ry(FH.p),Kve=Ry(zH.p),Qve=Ry(HH.p),Yve=hP({...FH,Fp:Vve,lowS:!1},nA);hP({...zH,Fp:Kve,lowS:!1},sbe),hP({...HH,Fp:Qve,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},rbe);const Jve=Yve,GH="base10",ks="base16",sa="base64pad",gu="base64url",Kv="utf8",WH=0,il=1,Qv=2,Zve=0,hU=1,mw=12,ZR=32;function Xve(){const t=dP.utils.randomPrivateKey(),e=dP.getPublicKey(t);return{privateKey:di(t,ks),publicKey:di(e,ks)}}function fP(){const t=Oy(ZR);return di(t,ks)}function e1e(t,e){const n=dP.getSharedSecret(yo(t,ks),yo(e,ks)),r=uve(sA,n,void 0,void 0,ZR);return di(r,ks)}function rx(t){const e=sA(yo(t,ks));return di(e,ks)}function Va(t){const e=sA(yo(t,Kv));return di(e,ks)}function qH(t){return yo(`${t}`,GH)}function Mf(t){return Number(di(t,GH))}function VH(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function KH(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function t1e(t){const e=qH(typeof t.type<"u"?t.type:WH);if(Mf(e)===il&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?yo(t.senderPublicKey,ks):void 0,r=typeof t.iv<"u"?yo(t.iv,ks):Oy(mw),s=yo(t.symKey,ks),i=SH(s,r).encrypt(yo(t.message,Kv)),o=QH({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===gu?VH(o):o}function n1e(t){const e=yo(t.symKey,ks),{sealed:n,iv:r}=Pb({encoded:t.encoded,encoding:t.encoding}),s=SH(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return di(s,Kv)}function r1e(t,e){const n=qH(Qv),r=Oy(mw),s=yo(t,Kv),i=QH({type:n,sealed:s,iv:r});return e===gu?VH(i):i}function s1e(t,e){const{sealed:n}=Pb({encoded:t,encoding:e});return di(n,Kv)}function QH(t){if(Mf(t.type)===Qv)return di(hw([t.type,t.sealed]),sa);if(Mf(t.type)===il){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return di(hw([t.type,t.senderPublicKey,t.iv,t.sealed]),sa)}return di(hw([t.type,t.iv,t.sealed]),sa)}function Pb(t){const e=(t.encoding||sa)===gu?KH(t.encoded):t.encoded,n=yo(e,sa),r=n.slice(Zve,hU),s=hU;if(Mf(r)===il){const c=s+ZR,l=c+mw,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(Mf(r)===Qv){const c=n.slice(s),l=Oy(mw);return{type:r,sealed:c,iv:l}}const i=s+mw,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function i1e(t,e){const n=Pb({encoded:t,encoding:e==null?void 0:e.encoding});return YH({type:Mf(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?di(n.senderPublicKey,ks):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function YH(t){const e=(t==null?void 0:t.type)||WH;if(e===il){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function fU(t){return t.type===il&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function pU(t){return t.type===Qv}function o1e(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return hw([new Uint8Array([4]),e,n])}function a1e(t,e){const[n,r,s]=t.split("."),i=Buffer.from(KH(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=sA(c),u=o1e(e);if(!Jve.verify(hw([o,a]),l,u))throw new Error("Invalid signature");return QN(t).payload}const c1e="irn";function w_(t){return(t==null?void 0:t.relay)||{protocol:c1e}}function z0(t){const e=B0e[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function l1e(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function gU(t){if(!t.includes("wc:")){const l=aH(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:u1e(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:l1e(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function u1e(t){return t.startsWith("//")?t.substring(2):t}function d1e(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function mU(t){const e=new URLSearchParams,n=d1e(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function cE(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var h1e=Object.defineProperty,f1e=Object.defineProperties,p1e=Object.getOwnPropertyDescriptors,yU=Object.getOwnPropertySymbols,g1e=Object.prototype.hasOwnProperty,m1e=Object.prototype.propertyIsEnumerable,wU=(t,e,n)=>e in t?h1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,y1e=(t,e)=>{for(var n in e||(e={}))g1e.call(e,n)&&wU(t,n,e[n]);if(yU)for(var n of yU(e))m1e.call(e,n)&&wU(t,n,e[n]);return t},w1e=(t,e)=>f1e(t,p1e(e));function Dy(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function b1e(t){const e=[];return Object.values(t).forEach(n=>{e.push(...Dy(n.accounts))}),e}function v1e(t,e){const n=[];return Object.values(t).forEach(r=>{Dy(r.accounts).includes(e)&&n.push(...r.methods)}),n}function E1e(t,e){const n=[];return Object.values(t).forEach(r=>{Dy(r.accounts).includes(e)&&n.push(...r.events)}),n}function cA(t){return t.includes(":")}function fg(t){return cA(t)?t.split(":")[0]:t}function bU(t){var e,n,r;const s={};if(!pd(t))return s;for(const[i,o]of Object.entries(t)){const a=cA(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=fg(i);s[u]=w1e(y1e({},s[u]),{chains:ic(a,(e=s[u])==null?void 0:e.chains),methods:ic(c,(n=s[u])==null?void 0:n.methods),events:ic(l,(r=s[u])==null?void 0:r.events)})}return s}function x1e(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function vU(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=x1e(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=ic(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function _1e(t,e){var n,r,s,i,o,a;const c=bU(t),l=bU(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:ic((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:ic((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:ic((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const C1e={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},A1e={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ce(t,e){const{message:n,code:r}=A1e[t];return{message:e?`${n} ${e}`:n,code:r}}function Tn(t,e){const{message:n,code:r}=C1e[t];return{message:e?`${n} ${e}`:n,code:r}}function ol(t,e){return!!Array.isArray(t)}function pd(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Ur(t){return typeof t>"u"}function Xn(t,e){return e&&Ur(t)?!0:typeof t=="string"&&!!t.trim().length}function XR(t,e){return e&&Ur(t)?!0:typeof t=="number"&&!isNaN(t)}function S1e(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return Ah(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=Dy(a),d=n[o];(!Ah(nH(o,d),u)||!Ah(d.methods,c)||!Ah(d.events,l))&&(i=!1)}),i):!1}function b_(t){return Xn(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function I1e(t){if(Xn(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&b_(n)}}return!1}function T1e(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Xn(t,!1)){if(e(t))return!0;const n=aH(t);return e(n)}}catch{}return!1}function N1e(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function P1e(t){return t==null?void 0:t.topic}function k1e(t,e){let n=null;return Xn(t==null?void 0:t.publicKey,!1)||(n=Ce("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function EU(t){let e=!0;return ol(t)?t.length&&(e=t.every(n=>Xn(n,!1))):e=!1,e}function O1e(t,e,n){let r=null;return ol(e)&&e.length?e.forEach(s=>{r||b_(s)||(r=Tn("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):b_(t)||(r=Tn("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function R1e(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=O1e(s,nH(s,i),`${e} ${n}`);o&&(r=o)}),r}function D1e(t,e){let n=null;return ol(t)?t.forEach(r=>{n||I1e(r)||(n=Tn("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Tn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function $1e(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=D1e(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function U1e(t,e){let n=null;return EU(t==null?void 0:t.methods)?EU(t==null?void 0:t.events)||(n=Tn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=Tn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function JH(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=U1e(r,`${e}, namespace`);s&&(n=s)}),n}function B1e(t,e,n){let r=null;if(t&&pd(t)){const s=JH(t,e);s&&(r=s);const i=R1e(t,e,n);i&&(r=i)}else r=Ce("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function G2(t,e){let n=null;if(t&&pd(t)){const r=JH(t,e);r&&(n=r);const s=$1e(t,e);s&&(n=s)}else n=Ce("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function ZH(t){return Xn(t.protocol,!0)}function L1e(t,e){let n=!1;return t?t&&ol(t)&&t.length&&t.forEach(r=>{n=ZH(r)}):n=!0,n}function M1e(t){return typeof t=="number"}function qs(t){return typeof t<"u"&&typeof t!==null}function j1e(t){return!(!t||typeof t!="object"||!t.code||!XR(t.code,!1)||!t.message||!Xn(t.message,!1))}function F1e(t){return!(Ur(t)||!Xn(t.method,!1))}function z1e(t){return!(Ur(t)||Ur(t.result)&&Ur(t.error)||!XR(t.id,!1)||!Xn(t.jsonrpc,!1))}function H1e(t){return!(Ur(t)||!Xn(t.name,!1))}function xU(t,e){return!(!b_(e)||!b1e(t).includes(e))}function G1e(t,e,n){return Xn(n,!1)?v1e(t,e).includes(n):!1}function W1e(t,e,n){return Xn(n,!1)?E1e(t,e).includes(n):!1}function _U(t,e,n){let r=null;const s=q1e(t),i=V1e(e),o=Object.keys(s),a=Object.keys(i),c=CU(Object.keys(t)),l=CU(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=Ce("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Ah(o,a)||(r=Ce("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=Dy(e[d].accounts);h.includes(d)||(r=Ce("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(Ah(s[d].methods,i[d].methods)?Ah(s[d].events,i[d].events)||(r=Ce("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=Ce("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function q1e(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function CU(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function V1e(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=Dy(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function K1e(t,e){return XR(t,!1)&&t<=e.max&&t>=e.min}function AU(){const t=qv();return new Promise(e=>{switch(t){case Ui.browser:e(Q1e());break;case Ui.reactNative:e(Y1e());break;case Ui.node:e(J1e());break;default:e(!0)}})}function Q1e(){return ky()&&(navigator==null?void 0:navigator.onLine)}async function Y1e(){if(Md()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function J1e(){return!0}function Z1e(t){switch(qv()){case Ui.browser:X1e(t);break;case Ui.reactNative:eEe(t);break}}function X1e(t){!Md()&&ky()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function eEe(t){Md()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function tEe(){var t;return ky()&&Uf()?((t=Uf())==null?void 0:t.visibilityState)==="visible":!0}const W2={};class y0{static get(e){return W2[e]}static set(e,n){W2[e]=n}static delete(e){delete W2[e]}}function nEe(t){const e=Py.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function rEe({publicKey:t,signature:e,payload:n}){var r;const s=pP(n.method),i=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),o=oEe(n.address),a=n.era==="00"?new Uint8Array([0]):pP(n.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),l=new Uint8Array([c&255,c>>8&255]),u=BigInt(`0x${iEe(n.tip)}`),d=cEe(u),h=new Uint8Array([0,...t,o,...e,...a,...l,...d,...s]),f=aEe(h.length+1);return new Uint8Array([...f,i,...h])}function sEe(t){const e=pP(t),n=Q0e.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function pP(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function iEe(t){return t.startsWith("0x")?t.slice(2):t}function oEe(t){const e=Py.decode(t)[0];return e===42?0:e===60?2:1}function aEe(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function cEe(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function lEe(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=nEe(t.transaction.address),r=rEe({publicKey:n,signature:e,payload:t.transaction}),s=Buffer.from(r).toString("hex");return sEe(s)}const uEe="PARSE_ERROR",dEe="INVALID_REQUEST",hEe="METHOD_NOT_FOUND",fEe="INVALID_PARAMS",XH="INTERNAL_ERROR",e3="SERVER_ERROR",pEe=[-32700,-32600,-32601,-32602,-32603],yw={[uEe]:{code:-32700,message:"Parse error"},[dEe]:{code:-32600,message:"Invalid Request"},[hEe]:{code:-32601,message:"Method not found"},[fEe]:{code:-32602,message:"Invalid params"},[XH]:{code:-32603,message:"Internal error"},[e3]:{code:-32e3,message:"Server error"}},eG=e3;function gEe(t){return pEe.includes(t)}function SU(t){return Object.keys(yw).includes(t)?yw[t]:yw[eG]}function mEe(t){const e=Object.values(yw).find(n=>n.code===t);return e||yw[eG]}function tG(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var nG={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var gP=function(t,e){return gP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},gP(t,e)};function yEe(t,e){gP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var mP=function(){return mP=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},mP.apply(this,arguments)};function wEe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function bEe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function vEe(t,e){return function(n,r){e(n,r,t)}}function EEe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function xEe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function _Ee(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function CEe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function AEe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function yP(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function rG(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function SEe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(rG(arguments[e]));return t}function IEe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function kb(t){return this instanceof kb?(this.v=t,this):new kb(t)}function TEe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof kb?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function NEe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:kb(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function PEe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof yP=="function"?yP(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function kEe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function OEe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function REe(t){return t&&t.__esModule?t:{default:t}}function DEe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function $Ee(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const UEe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return mP},__asyncDelegator:NEe,__asyncGenerator:TEe,__asyncValues:PEe,__await:kb,__awaiter:xEe,__classPrivateFieldGet:DEe,__classPrivateFieldSet:$Ee,__createBinding:CEe,__decorate:bEe,__exportStar:AEe,__extends:yEe,__generator:_Ee,__importDefault:REe,__importStar:OEe,__makeTemplateObject:kEe,__metadata:EEe,__param:vEe,__read:rG,__rest:wEe,__spread:SEe,__spreadArrays:IEe,__values:yP},Symbol.toStringTag,{value:"Module"})),BEe=tC(UEe);var xc={},IU;function LEe(){if(IU)return xc;IU=1,Object.defineProperty(xc,"__esModule",{value:!0}),xc.isBrowserCryptoAvailable=xc.getSubtleCrypto=xc.getBrowerCrypto=void 0;function t(){return(Fn==null?void 0:Fn.crypto)||(Fn==null?void 0:Fn.msCrypto)||{}}xc.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}xc.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return xc.isBrowserCryptoAvailable=n,xc}var _c={},TU;function MEe(){if(TU)return _c;TU=1,Object.defineProperty(_c,"__esModule",{value:!0}),_c.isBrowser=_c.isNode=_c.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}_c.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}_c.isNode=e;function n(){return!t()&&!e()}return _c.isBrowser=n,_c}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=BEe;e.__exportStar(LEe(),t),e.__exportStar(MEe(),t)})(nG);function ka(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function Nh(t=6){return BigInt(ka(t))}function Ju(t,e,n){return{id:n||ka(),jsonrpc:"2.0",method:t,params:e}}function lA(t,e){return{id:t,jsonrpc:"2.0",result:e}}function uA(t,e,n){return{id:t,jsonrpc:"2.0",error:jEe(e)}}function jEe(t,e){return typeof t>"u"?SU(XH):(typeof t=="string"&&(t=Object.assign(Object.assign({},SU(e3)),{message:t})),gEe(t.code)&&(t=mEe(t.code)),t)}let FEe=class{},zEe=class extends FEe{constructor(){super()}},HEe=class extends zEe{constructor(e){super()}};const GEe="^https?:",WEe="^wss?:";function qEe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function sG(t,e){const n=qEe(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function NU(t){return sG(t,GEe)}function PU(t){return sG(t,WEe)}function VEe(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function iG(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function t3(t){return iG(t)&&"method"in t}function dA(t){return iG(t)&&(Oa(t)||uo(t))}function Oa(t){return"result"in t}function uo(t){return"error"in t}let Ao=class extends HEe{constructor(e){super(e),this.events=new Co.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Ju(e.method,e.params||[],e.id||Nh().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{uo(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),dA(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const KEe=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),QEe=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",kU=t=>t.split("?")[0],OU=10,YEe=KEe();let JEe=class{constructor(e){if(this.url=e,this.events=new Co.EventEmitter,this.registering=!1,!PU(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(wl(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!PU(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=nG.isReactNative()?void 0:{rejectUnauthorized:!VEe(e)},i=new YEe(e,[],s);QEe()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?$f(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=uA(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return tG(e,kU(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>OU&&this.events.setMaxListeners(OU)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${kU(this.url)}`));return this.events.emit("register_error",n),n}};var ZEe={};const oG="wc",aG=2,wP="core",lc=`${oG}@2:${wP}:`,XEe={logger:"error"},exe={database:":memory:"},txe="crypto",RU="client_ed25519_seed",nxe=_e.ONE_DAY,rxe="keychain",sxe="0.3",ixe="messages",oxe="0.3",DU=_e.SIX_HOURS,axe="publisher",cG="irn",cxe="error",lG="wss://relay.walletconnect.org",lxe="relayer",br={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},uxe="_subscription",Ji={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},dxe=.1,bP="2.21.3",Cn={link_mode:"link_mode",relay:"relay"},sx={inbound:"inbound",outbound:"outbound"},hxe="0.3",fxe="WALLETCONNECT_CLIENT_ID",$U="WALLETCONNECT_LINK_MODE_APPS",Ai={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},pxe="subscription",gxe="0.3",mxe="pairing",yxe="0.3",w0={wc_pairingDelete:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:0},res:{ttl:_e.ONE_DAY,prompt:!1,tag:0}}},dh={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},No={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},wxe="history",bxe="0.3",vxe="expirer",no={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Exe="0.3",xxe="verify-api",_xe="https://verify.walletconnect.com",uG="https://verify.walletconnect.org",ww=uG,Cxe=`${ww}/v3`,Axe=[_xe,uG],Sxe="echo",Ixe="https://echo.walletconnect.com",Na={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Sc={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Po={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Yd={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Jd={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},b0={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},Txe=.1,Nxe="event-client",Pxe=86400,kxe="https://pulse.walletconnect.org/batch";function Oxe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,w=0,v=p.length;w!==v&&p[w]===0;)w++,g++;for(var b=(v-w)*u+1>>>0,_=new Uint8Array(b);w!==v;){for(var x=p[w],C=0,S=b-1;(x!==0||C<y)&&S!==-1;S--,C++)x+=256*_[S]>>>0,_[S]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");y=C,w++}for(var N=b-y;N!==b&&_[N]===0;)N++;for(var A=c.repeat(g);N<b;++N)A+=t.charAt(_[N]);return A}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,w=0;p[g]===c;)y++,g++;for(var v=(p.length-g)*l+1>>>0,b=new Uint8Array(v);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var x=0,C=v-1;(_!==0||x<w)&&C!==-1;C--,x++)_+=a*b[C]>>>0,b[C]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");w=x,g++}if(p[g]!==" "){for(var S=v-w;S!==v&&b[S]===0;)S++;for(var N=new Uint8Array(y+(v-S)),A=y;S!==v;)N[A++]=b[S++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Rxe=Oxe,Dxe=Rxe;const dG=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},$xe=t=>new TextEncoder().encode(t),Uxe=t=>new TextDecoder().decode(t);class Bxe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Lxe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return hG(this,e)}}class Mxe{constructor(e){this.decoders=e}or(e){return hG(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const hG=(t,e)=>new Mxe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class jxe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Bxe(e,n,r),this.decoder=new Lxe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const hA=({name:t,prefix:e,encode:n,decode:r})=>new jxe(t,e,n,r),Yv=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Dxe(n,e);return hA({prefix:t,name:e,encode:r,decode:i=>dG(s(i))})},Fxe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},zxe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Vr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>hA({prefix:e,name:t,encode(s){return zxe(s,r,n)},decode(s){return Fxe(s,r,n,t)}}),Hxe=hA({prefix:"\0",name:"identity",encode:t=>Uxe(t),decode:t=>$xe(t)});var Gxe=Object.freeze({__proto__:null,identity:Hxe});const Wxe=Vr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var qxe=Object.freeze({__proto__:null,base2:Wxe});const Vxe=Vr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Kxe=Object.freeze({__proto__:null,base8:Vxe});const Qxe=Yv({prefix:"9",name:"base10",alphabet:"0123456789"});var Yxe=Object.freeze({__proto__:null,base10:Qxe});const Jxe=Vr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Zxe=Vr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Xxe=Object.freeze({__proto__:null,base16:Jxe,base16upper:Zxe});const e_e=Vr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),t_e=Vr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),n_e=Vr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),r_e=Vr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),s_e=Vr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),i_e=Vr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),o_e=Vr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),a_e=Vr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),c_e=Vr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var l_e=Object.freeze({__proto__:null,base32:e_e,base32upper:t_e,base32pad:n_e,base32padupper:r_e,base32hex:s_e,base32hexupper:i_e,base32hexpad:o_e,base32hexpadupper:a_e,base32z:c_e});const u_e=Yv({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),d_e=Yv({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var h_e=Object.freeze({__proto__:null,base36:u_e,base36upper:d_e});const f_e=Yv({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),p_e=Yv({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var g_e=Object.freeze({__proto__:null,base58btc:f_e,base58flickr:p_e});const m_e=Vr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),y_e=Vr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),w_e=Vr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),b_e=Vr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var v_e=Object.freeze({__proto__:null,base64:m_e,base64pad:y_e,base64url:w_e,base64urlpad:b_e});const fG=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),E_e=fG.reduce((t,e,n)=>(t[n]=e,t),[]),x_e=fG.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function __e(t){return t.reduce((e,n)=>(e+=E_e[n],e),"")}function C_e(t){const e=[];for(const n of t){const r=x_e[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const A_e=hA({prefix:"🚀",name:"base256emoji",encode:__e,decode:C_e});var S_e=Object.freeze({__proto__:null,base256emoji:A_e}),I_e=pG,UU=128,T_e=-128,N_e=Math.pow(2,31);function pG(t,e,n){e=e||[],n=n||0;for(var r=n;t>=N_e;)e[n++]=t&255|UU,t/=128;for(;t&T_e;)e[n++]=t&255|UU,t>>>=7;return e[n]=t|0,pG.bytes=n-r+1,e}var P_e=vP,k_e=128,BU=127;function vP(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw vP.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&BU)<<s:(o&BU)*Math.pow(2,s),s+=7}while(o>=k_e);return vP.bytes=i-r,n}var O_e=Math.pow(2,7),R_e=Math.pow(2,14),D_e=Math.pow(2,21),$_e=Math.pow(2,28),U_e=Math.pow(2,35),B_e=Math.pow(2,42),L_e=Math.pow(2,49),M_e=Math.pow(2,56),j_e=Math.pow(2,63),F_e=function(t){return t<O_e?1:t<R_e?2:t<D_e?3:t<$_e?4:t<U_e?5:t<B_e?6:t<L_e?7:t<M_e?8:t<j_e?9:10},z_e={encode:I_e,decode:P_e,encodingLength:F_e},gG=z_e;const LU=(t,e,n=0)=>(gG.encode(t,e,n),e),MU=t=>gG.encodingLength(t),EP=(t,e)=>{const n=e.byteLength,r=MU(t),s=r+MU(n),i=new Uint8Array(s+n);return LU(t,i,0),LU(n,i,r),i.set(e,s),new H_e(t,n,e,i)};class H_e{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const mG=({name:t,code:e,encode:n})=>new G_e(t,e,n);class G_e{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?EP(this.code,n):n.then(r=>EP(this.code,r))}else throw Error("Unknown type, must be binary type")}}const yG=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),W_e=mG({name:"sha2-256",code:18,encode:yG("SHA-256")}),q_e=mG({name:"sha2-512",code:19,encode:yG("SHA-512")});var V_e=Object.freeze({__proto__:null,sha256:W_e,sha512:q_e});const wG=0,K_e="identity",bG=dG,Q_e=t=>EP(wG,bG(t)),Y_e={code:wG,name:K_e,encode:bG,digest:Q_e};var J_e=Object.freeze({__proto__:null,identity:Y_e});new TextEncoder,new TextDecoder;const jU={...Gxe,...qxe,...Kxe,...Yxe,...Xxe,...l_e,...h_e,...g_e,...v_e,...S_e};({...V_e,...J_e});function vG(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Z_e(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?vG(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function EG(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const FU=EG("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),q2=EG("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Z_e(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),X_e={utf8:FU,"utf-8":FU,hex:jU.base16,latin1:q2,ascii:q2,binary:q2,...jU};function eCe(t,e="utf8"){const n=X_e[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?vG(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var tCe=Object.defineProperty,nCe=(t,e,n)=>e in t?tCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Sa=(t,e,n)=>nCe(t,typeof e!="symbol"?e+"":e,n);class rCe{constructor(e,n){this.core=e,this.logger=n,Sa(this,"keychain",new Map),Sa(this,"name",rxe),Sa(this,"version",sxe),Sa(this,"initialized",!1),Sa(this,"storagePrefix",lc),Sa(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),Sa(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),Sa(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),Sa(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=Ce("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),Sa(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=hs(n,this.name)}get context(){return gi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,nP(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?rP(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}var sCe=Object.defineProperty,iCe=(t,e,n)=>e in t?sCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pr=(t,e,n)=>iCe(t,typeof e!="symbol"?e+"":e,n);class oCe{constructor(e,n,r){this.core=e,this.logger=n,Pr(this,"name",txe),Pr(this,"keychain"),Pr(this,"randomSessionIdentifier",fP()),Pr(this,"initialized",!1),Pr(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Pr(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Pr(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=v8(s);return bz(i.publicKey)}),Pr(this,"generateKeyPair",()=>{this.isInitialized();const s=Xve();return this.setPrivateKey(s.publicKey,s.privateKey)}),Pr(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=v8(i),a=this.randomSessionIdentifier;return await ime(a,s,nxe,o)}),Pr(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=e1e(a,i);return this.setSymKey(c,o)}),Pr(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||rx(s);return await this.keychain.set(o,s),o}),Pr(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Pr(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Pr(this,"encode",async(s,i,o)=>{this.isInitialized();const a=YH(o),c=wl(i);if(pU(a))return r1e(c,o==null?void 0:o.encoding);if(fU(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return t1e({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),Pr(this,"decode",async(s,i,o)=>{this.isInitialized();const a=i1e(i,o);if(pU(a)){const c=s1e(i,o==null?void 0:o.encoding);return $f(c)}if(fU(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=n1e({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return $f(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Pr(this,"getPayloadType",(s,i=sa)=>{const o=Pb({encoded:s,encoding:i});return Mf(o.type)}),Pr(this,"getPayloadSenderPublicKey",(s,i=sa)=>{const o=Pb({encoded:s,encoding:i});return o.senderPublicKey?di(o.senderPublicKey,ks):void 0}),this.core=e,this.logger=hs(n,this.name),this.keychain=r||new rCe(this.core,this.logger)}get context(){return gi(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(RU)}catch{e=fP(),await this.keychain.set(RU,e)}return eCe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}var aCe=Object.defineProperty,cCe=Object.defineProperties,lCe=Object.getOwnPropertyDescriptors,zU=Object.getOwnPropertySymbols,uCe=Object.prototype.hasOwnProperty,dCe=Object.prototype.propertyIsEnumerable,xP=(t,e,n)=>e in t?aCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hCe=(t,e)=>{for(var n in e||(e={}))uCe.call(e,n)&&xP(t,n,e[n]);if(zU)for(var n of zU(e))dCe.call(e,n)&&xP(t,n,e[n]);return t},fCe=(t,e)=>cCe(t,lCe(e)),vi=(t,e,n)=>xP(t,typeof e!="symbol"?e+"":e,n);class pCe extends rfe{constructor(e,n){super(e,n),this.logger=e,this.core=n,vi(this,"messages",new Map),vi(this,"messagesWithoutClientAck",new Map),vi(this,"name",ixe),vi(this,"version",oxe),vi(this,"initialized",!1),vi(this,"storagePrefix",lc),vi(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),vi(this,"set",async(r,s,i)=>{this.isInitialized();const o=Va(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===sx.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,fCe(hCe({},c),{[o]:s}))}return await this.persist(),o}),vi(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),vi(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),vi(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Va(s);return typeof i[o]<"u"}),vi(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Va(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),vi(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=hs(e,this.name),this.core=n}get context(){return gi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,nP(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,nP(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?rP(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?rP(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}var gCe=Object.defineProperty,mCe=Object.defineProperties,yCe=Object.getOwnPropertyDescriptors,HU=Object.getOwnPropertySymbols,wCe=Object.prototype.hasOwnProperty,bCe=Object.prototype.propertyIsEnumerable,_P=(t,e,n)=>e in t?gCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lE=(t,e)=>{for(var n in e||(e={}))wCe.call(e,n)&&_P(t,n,e[n]);if(HU)for(var n of HU(e))bCe.call(e,n)&&_P(t,n,e[n]);return t},V2=(t,e)=>mCe(t,yCe(e)),ko=(t,e,n)=>_P(t,typeof e!="symbol"?e+"":e,n);class vCe extends sfe{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,ko(this,"events",new Co.EventEmitter),ko(this,"name",axe),ko(this,"queue",new Map),ko(this,"publishTimeout",_e.toMiliseconds(_e.ONE_MINUTE)),ko(this,"initialPublishTimeout",_e.toMiliseconds(_e.ONE_SECOND*15)),ko(this,"needsTransportRestart",!1),ko(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||DU,c=w_(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||Nh().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const y=({id:v})=>{h.opts.id===v&&(this.removeRequestFromQueue(v),this.relayer.events.removeListener(br.publish,y),g(h))};this.relayer.events.on(br.publish,y);const w=Yu(new Promise((v,b)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(v).catch(_=>{this.logger.warn(_,_==null?void 0:_.message),b(_)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await w,this.events.removeListener(br.publish,y)}catch(v){this.queue.set(d,V2(lE({},h),{attempt:1})),this.logger.warn(v,v==null?void 0:v.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await Yu(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),ko(this,"on",(r,s)=>{this.events.on(r,s)}),ko(this,"once",(r,s)=>{this.events.once(r,s)}),ko(this,"off",(r,s)=>{this.events.off(r,s)}),ko(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=hs(n,this.name),this.registerEventListeners()}get context(){return gi(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=DU,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:z0(w_().protocol).publish,params:lE({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};Ur((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),Ur((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(br.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,V2(lE({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(V2(lE({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(sp.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(br.connection_stalled);return}this.checkQueue()}),this.relayer.on(br.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var ECe=Object.defineProperty,xCe=(t,e,n)=>e in t?ECe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ap=(t,e,n)=>xCe(t,typeof e!="symbol"?e+"":e,n);class _Ce{constructor(){Ap(this,"map",new Map),Ap(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),Ap(this,"get",e=>this.map.get(e)||[]),Ap(this,"exists",(e,n)=>this.get(e).includes(n)),Ap(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Ap(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var CCe=Object.defineProperty,ACe=Object.defineProperties,SCe=Object.getOwnPropertyDescriptors,GU=Object.getOwnPropertySymbols,ICe=Object.prototype.hasOwnProperty,TCe=Object.prototype.propertyIsEnumerable,CP=(t,e,n)=>e in t?CCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,v0=(t,e)=>{for(var n in e||(e={}))ICe.call(e,n)&&CP(t,n,e[n]);if(GU)for(var n of GU(e))TCe.call(e,n)&&CP(t,n,e[n]);return t},K2=(t,e)=>ACe(t,SCe(e)),hn=(t,e,n)=>CP(t,typeof e!="symbol"?e+"":e,n);class NCe extends afe{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,hn(this,"subscriptions",new Map),hn(this,"topicMap",new _Ce),hn(this,"events",new Co.EventEmitter),hn(this,"name",pxe),hn(this,"version",gxe),hn(this,"pending",new Map),hn(this,"cached",[]),hn(this,"initialized",!1),hn(this,"storagePrefix",lc),hn(this,"subscribeTimeout",_e.toMiliseconds(_e.ONE_MINUTE)),hn(this,"initialSubscribeTimeout",_e.toMiliseconds(_e.ONE_SECOND*15)),hn(this,"clientId"),hn(this,"batchSubscribeTopicsLimit",500),hn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),hn(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=w_(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),hn(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),hn(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),hn(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),hn(this,"on",(r,s)=>{this.events.on(r,s)}),hn(this,"once",(r,s)=>{this.events.once(r,s)}),hn(this,"off",(r,s)=>{this.events.off(r,s)}),hn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),hn(this,"start",async()=>{await this.onConnect()}),hn(this,"stop",async()=>{await this.onDisconnect()}),hn(this,"restart",async()=>{await this.restore(),await this.onRestart()}),hn(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),hn(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(sp.pulse,async()=>{await this.checkPending()}),this.events.on(Ai.created,async r=>{const s=Ai.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Ai.deleted,async r=>{const s=Ai.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=hs(n,this.name),this.clientId=""}get context(){return gi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=w_(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=Tn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===Cn.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:z0(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===Cn.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},_e.toMiliseconds(_e.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(Ai.created,d),u(h.id))};this.events.on(Ai.created,d);try{const h=await Yu(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Ai.created,d),u(h)}catch{}}),l=await Yu(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(br.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:z0(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Yu(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(br.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:z0(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Yu(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(br.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:z0(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,K2(v0({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,v0({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,v0({},n)),this.topicMap.set(n.topic,e),this.events.emit(Ai.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=Ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Ai.deleted,K2(v0({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Ai.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Ai.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=Ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>K2(v0({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await xwe(_e.toMiliseconds(_e.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Va(e+await this.getClientId())}}var PCe=Object.defineProperty,WU=Object.getOwnPropertySymbols,kCe=Object.prototype.hasOwnProperty,OCe=Object.prototype.propertyIsEnumerable,AP=(t,e,n)=>e in t?PCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qU=(t,e)=>{for(var n in e||(e={}))kCe.call(e,n)&&AP(t,n,e[n]);if(WU)for(var n of WU(e))OCe.call(e,n)&&AP(t,n,e[n]);return t},Bt=(t,e,n)=>AP(t,typeof e!="symbol"?e+"":e,n);class RCe extends ife{constructor(e){super(e),Bt(this,"protocol","wc"),Bt(this,"version",2),Bt(this,"core"),Bt(this,"logger"),Bt(this,"events",new Co.EventEmitter),Bt(this,"provider"),Bt(this,"messages"),Bt(this,"subscriber"),Bt(this,"publisher"),Bt(this,"name",lxe),Bt(this,"transportExplicitlyClosed",!1),Bt(this,"initialized",!1),Bt(this,"connectionAttemptInProgress",!1),Bt(this,"relayUrl"),Bt(this,"projectId"),Bt(this,"packageName"),Bt(this,"bundleId"),Bt(this,"hasExperiencedNetworkDisruption",!1),Bt(this,"pingTimeout"),Bt(this,"heartBeatTimeout",_e.toMiliseconds(_e.THIRTY_SECONDS+_e.FIVE_SECONDS)),Bt(this,"reconnectTimeout"),Bt(this,"connectPromise"),Bt(this,"reconnectInProgress",!1),Bt(this,"requestsInFlight",[]),Bt(this,"connectTimeout",_e.toMiliseconds(_e.ONE_SECOND*15)),Bt(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||Nh().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),Bt(this,"resetPingTimeout",()=>{p_()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),Bt(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),Bt(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(br.connect)}),Bt(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),Bt(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(br.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Bt(this,"registerProviderListeners",()=>{this.provider.on(Ji.payload,this.onPayloadHandler),this.provider.on(Ji.connect,this.onConnectHandler),this.provider.on(Ji.disconnect,this.onDisconnectHandler),this.provider.on(Ji.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?hs(e.logger,this.name):zv(Ay({level:e.logger||cxe})),this.messages=new pCe(this.logger,e.core),this.subscriber=new NCe(this,this.logger),this.publisher=new vCe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||lG,this.projectId=e.projectId,owe()?this.packageName=$8():awe()&&(this.bundleId=$8()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return gi(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Cn.relay},sx.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Ai.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Ai.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,qU({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Yu(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await AU())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=sr(_e.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(br.message,e),await this.recordMessageEvent(e,sx.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(Ji.disconnect,i),await Yu(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Ji.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Ji.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Ji.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,_e.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(p_())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ao(new JEe(hwe({sdkVersion:bP,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),t3(e)){if(!e.method.endsWith(uxe))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:Cn.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(qU({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else dA(e)&&this.events.emit(br.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,sx.inbound),this.events.emit(br.message,e))}async acknowledgePayload(e){const n=lA(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Ji.payload,this.onPayloadHandler),this.provider.off(Ji.connect,this.onConnectHandler),this.provider.off(Ji.disconnect,this.onDisconnectHandler),this.provider.off(Ji.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await AU();Z1e(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(sp.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&tEe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(br.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},_e.toMiliseconds(dxe)))))}isInitialized(){if(!this.initialized){const{message:e}=Ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function DCe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function VU(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function KU(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const $Ce="[object RegExp]",UCe="[object String]",BCe="[object Number]",LCe="[object Boolean]",QU="[object Arguments]",MCe="[object Symbol]",jCe="[object Date]",FCe="[object Map]",zCe="[object Set]",HCe="[object Array]",GCe="[object Function]",WCe="[object ArrayBuffer]",Q2="[object Object]",qCe="[object Error]",VCe="[object DataView]",KCe="[object Uint8Array]",QCe="[object Uint8ClampedArray]",YCe="[object Uint16Array]",JCe="[object Uint32Array]",ZCe="[object BigUint64Array]",XCe="[object Int8Array]",eAe="[object Int16Array]",tAe="[object Int32Array]",nAe="[object BigInt64Array]",rAe="[object Float32Array]",sAe="[object Float64Array]";function iAe(){}function YU(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function oAe(t,e,n){return H0(t,e,void 0,void 0,void 0,void 0,n)}function H0(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return bw(t,e,i,o)}return bw(t,e,i,o)}function bw(t,e,n,r){if(Object.is(t,e))return!0;let s=KU(t),i=KU(e);if(s===QU&&(s=Q2),i===QU&&(i=Q2),s!==i)return!1;switch(s){case UCe:return t.toString()===e.toString();case BCe:{const c=t.valueOf(),l=e.valueOf();return DCe(c,l)}case LCe:case jCe:case MCe:return Object.is(t.valueOf(),e.valueOf());case $Ce:return t.source===e.source&&t.flags===e.flags;case GCe:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case FCe:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!H0(l,e.get(c),c,t,e,n,r))return!1;return!0}case zCe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>H0(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case HCe:case KCe:case QCe:case YCe:case JCe:case ZCe:case XCe:case eAe:case tAe:case nAe:case rAe:case sAe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!H0(t[c],e[c],c,t,e,n,r))return!1;return!0}case WCe:return t.byteLength!==e.byteLength?!1:bw(new Uint8Array(t),new Uint8Array(e),n,r);case VCe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:bw(new Uint8Array(t),new Uint8Array(e),n,r);case qCe:return t.name===e.name&&t.message===e.message;case Q2:{if(!(bw(t.constructor,e.constructor,n,r)||YU(t)&&YU(e)))return!1;const c=[...Object.keys(t),...VU(t)],l=[...Object.keys(e),...VU(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!H0(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function aAe(t,e){return oAe(t,e,iAe)}var cAe=Object.defineProperty,JU=Object.getOwnPropertySymbols,lAe=Object.prototype.hasOwnProperty,uAe=Object.prototype.propertyIsEnumerable,SP=(t,e,n)=>e in t?cAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ZU=(t,e)=>{for(var n in e||(e={}))lAe.call(e,n)&&SP(t,n,e[n]);if(JU)for(var n of JU(e))uAe.call(e,n)&&SP(t,n,e[n]);return t},Fs=(t,e,n)=>SP(t,typeof e!="symbol"?e+"":e,n);class ap extends ofe{constructor(e,n,r,s=lc,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Fs(this,"map",new Map),Fs(this,"version",hxe),Fs(this,"cached",[]),Fs(this,"initialized",!1),Fs(this,"getKey"),Fs(this,"storagePrefix",lc),Fs(this,"recentlyDeleted",[]),Fs(this,"recentlyDeletedLimit",200),Fs(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Ur(o)?this.map.set(this.getKey(o),o):N1e(o)?this.map.set(o.id,o):P1e(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Fs(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Fs(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Fs(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>aAe(a[c],o[c]))):this.values)),Fs(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=ZU(ZU({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Fs(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=hs(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return gi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=Ce("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=Ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=Ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}var dAe=Object.defineProperty,hAe=(t,e,n)=>e in t?dAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xt=(t,e,n)=>hAe(t,typeof e!="symbol"?e+"":e,n);class fAe{constructor(e,n){this.core=e,this.logger=n,xt(this,"name",mxe),xt(this,"version",yxe),xt(this,"events",new _R),xt(this,"pairings"),xt(this,"initialized",!1),xt(this,"storagePrefix",lc),xt(this,"ignoredPayloadTypes",[il]),xt(this,"registeredMethods",[]),xt(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),xt(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),xt(this,"create",async r=>{this.isInitialized();const s=fP(),i=await this.core.crypto.setSymKey(s),o=sr(_e.FIVE_MINUTES),a={protocol:cG},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=mU({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(dh.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),xt(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[Na.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=gU(r.uri);s.props.properties.topic=i,s.addTrace(Na.pairing_uri_validation_success),s.addTrace(Na.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(Na.existing_pairing),u.active)throw s.setError(Sc.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(Na.pairing_not_expired)}const d=c||sr(_e.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(Na.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(dh.create,h),s.addTrace(Na.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(Na.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Sc.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(Sc.subscribe_pairing_topic_failure),f}return s.addTrace(Na.subscribe_pairing_topic_success),h}),xt(this,"activate",async({topic:r})=>{this.isInitialized();const s=sr(_e.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),xt(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=ih();this.events.once(Vt("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),xt(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),xt(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),xt(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),xt(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Tn("USER_DISCONNECTED")),await this.deletePairing(s))}),xt(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return mU({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),xt(this,"sendRequest",async(r,s,i)=>{const o=Ju(s,i),a=await this.core.crypto.encode(r,o),c=w0[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),xt(this,"sendResult",async(r,s,i)=>{const o=lA(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=w0[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),xt(this,"sendError",async(r,s,i)=>{const o=uA(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=w0[c]?w0[c].res:w0.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),xt(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Tn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),xt(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>au(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),xt(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),xt(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),xt(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(dh.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),xt(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{Oa(s)?this.events.emit(Vt("pairing_ping",i),{}):uo(s)&&this.events.emit(Vt("pairing_ping",i),{error:s.error})},500)}),xt(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(dh.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),xt(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=Tn("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),xt(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Tn("WC_METHOD_UNSUPPORTED",r))}),xt(this,"isValidPair",(r,s)=>{var i;if(!qs(r)){const{message:a}=Ce("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(Sc.malformed_pairing_uri),new Error(a)}if(!T1e(r.uri)){const{message:a}=Ce("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(Sc.malformed_pairing_uri),new Error(a)}const o=gU(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=Ce("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Sc.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=Ce("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Sc.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&_e.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(Sc.pairing_expired);const{message:a}=Ce("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),xt(this,"isValidPing",async r=>{if(!qs(r)){const{message:i}=Ce("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),xt(this,"isValidDisconnect",async r=>{if(!qs(r)){const{message:i}=Ce("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),xt(this,"isValidPairingTopic",async r=>{if(!Xn(r,!1)){const{message:s}=Ce("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=Ce("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(au(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=Ce("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=hs(n,this.name),this.pairings=new ap(this.core,this.logger,this.name,this.storagePrefix)}get context(){return gi(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Ce("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(br.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==Cn.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);t3(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):dA(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(no.expired,async e=>{const{topic:n}=oH(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(dh.expire,{topic:n}))})}}var pAe=Object.defineProperty,gAe=(t,e,n)=>e in t?pAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kr=(t,e,n)=>gAe(t,typeof e!="symbol"?e+"":e,n);class mAe extends nfe{constructor(e,n){super(e,n),this.core=e,this.logger=n,kr(this,"records",new Map),kr(this,"events",new Co.EventEmitter),kr(this,"name",wxe),kr(this,"version",bxe),kr(this,"cached",[]),kr(this,"initialized",!1),kr(this,"storagePrefix",lc),kr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),kr(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:sr(_e.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(No.created,o)}),kr(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=uo(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(No.updated,s))}),kr(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),kr(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(No.deleted,i)}}),this.persist()}),kr(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),kr(this,"on",(r,s)=>{this.events.on(r,s)}),kr(this,"once",(r,s)=>{this.events.once(r,s)}),kr(this,"off",(r,s)=>{this.events.off(r,s)}),kr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=hs(n,this.name)}get context(){return gi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Ju(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=Ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(No.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=Ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(No.created,e=>{const n=No.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(No.updated,e=>{const n=No.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(No.deleted,e=>{const n=No.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(sp.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{_e.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(No.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}var yAe=Object.defineProperty,wAe=(t,e,n)=>e in t?yAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ns=(t,e,n)=>wAe(t,typeof e!="symbol"?e+"":e,n);class bAe extends cfe{constructor(e,n){super(e,n),this.core=e,this.logger=n,ns(this,"expirations",new Map),ns(this,"events",new Co.EventEmitter),ns(this,"name",vxe),ns(this,"version",Exe),ns(this,"cached",[]),ns(this,"initialized",!1),ns(this,"storagePrefix",lc),ns(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),ns(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),ns(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(no.created,{target:i,expiration:o})}),ns(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),ns(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(no.deleted,{target:s,expiration:i})}}),ns(this,"on",(r,s)=>{this.events.on(r,s)}),ns(this,"once",(r,s)=>{this.events.once(r,s)}),ns(this,"off",(r,s)=>{this.events.off(r,s)}),ns(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=hs(n,this.name)}get context(){return gi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return fwe(e);if(typeof e=="number")return pwe(e);const{message:n}=Ce("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(no.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=Ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=Ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;_e.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(no.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(sp.pulse,()=>this.checkExpirations()),this.events.on(no.created,e=>{const n=no.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(no.expired,e=>{const n=no.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(no.deleted,e=>{const n=no.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}var vAe=Object.defineProperty,EAe=(t,e,n)=>e in t?vAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jn=(t,e,n)=>EAe(t,typeof e!="symbol"?e+"":e,n);class xAe extends lfe{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,Jn(this,"name",xxe),Jn(this,"abortController"),Jn(this,"isDevEnv"),Jn(this,"verifyUrlV3",Cxe),Jn(this,"storagePrefix",lc),Jn(this,"version",aG),Jn(this,"publicKey"),Jn(this,"fetchPromise"),Jn(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&_e.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Jn(this,"register",async s=>{if(!ky()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=Uf(),u=this.startAbortTimer(_e.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",y),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const y=w=>{if(w.data&&typeof w.data=="string")try{const v=JSON.parse(w.data);if(v.type==="verify_attestation"){if(QN(v.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",y),h(v.attestation===null?"":v.attestation)}}catch(v){this.logger.warn(v)}};l.body.appendChild(g),window.addEventListener("message",y,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),Jn(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(QN(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),Jn(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(_e.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Jn(this,"getVerifyUrl",s=>{let i=s||ww;return Axe.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${ww}`),i=ww),i}),Jn(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(_e.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),Jn(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Jn(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Jn(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Jn(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Jn(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Jn(this,"validateAttestation",(s,i)=>{const o=a1e(s,i.publicKey),a={hasExpired:_e.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=hs(n,this.name),this.abortController=new AbortController,this.isDevEnv=jR(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return gi(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),_e.toMiliseconds(e))}}var _Ae=Object.defineProperty,CAe=(t,e,n)=>e in t?_Ae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,XU=(t,e,n)=>CAe(t,typeof e!="symbol"?e+"":e,n);class AAe extends ufe{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,XU(this,"context",Sxe),XU(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${Ixe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=hs(n,this.context)}}var SAe=Object.defineProperty,e6=Object.getOwnPropertySymbols,IAe=Object.prototype.hasOwnProperty,TAe=Object.prototype.propertyIsEnumerable,IP=(t,e,n)=>e in t?SAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,E0=(t,e)=>{for(var n in e||(e={}))IAe.call(e,n)&&IP(t,n,e[n]);if(e6)for(var n of e6(e))TAe.call(e,n)&&IP(t,n,e[n]);return t},hr=(t,e,n)=>IP(t,typeof e!="symbol"?e+"":e,n);class NAe extends dfe{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,hr(this,"context",Nxe),hr(this,"storagePrefix",lc),hr(this,"storageVersion",Txe),hr(this,"events",new Map),hr(this,"shouldPersist",!1),hr(this,"init",async()=>{if(!jR())try{const s={eventId:B8(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:sH(this.core.relayer.protocol,this.core.relayer.version,bP)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),hr(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=B8(),u=this.core.projectId||"",d=Date.now(),h=E0({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),hr(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return E0(E0({},a),this.setMethods(a.eventId))}),hr(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),hr(this,"setEventListeners",()=>{this.core.heartbeat.on(sp.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{_e.fromMiliseconds(Date.now())-_e.fromMiliseconds(s.timestamp)>Pxe&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),hr(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),hr(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),hr(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),hr(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),hr(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,E0(E0({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),hr(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),hr(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${kxe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${bP}${i}`,{method:"POST",body:JSON.stringify(s)})}),hr(this,"getAppDomain",()=>rH().url),this.logger=hs(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var PAe=Object.defineProperty,t6=Object.getOwnPropertySymbols,kAe=Object.prototype.hasOwnProperty,OAe=Object.prototype.propertyIsEnumerable,TP=(t,e,n)=>e in t?PAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,n6=(t,e)=>{for(var n in e||(e={}))kAe.call(e,n)&&TP(t,n,e[n]);if(t6)for(var n of t6(e))OAe.call(e,n)&&TP(t,n,e[n]);return t},pn=(t,e,n)=>TP(t,typeof e!="symbol"?e+"":e,n);let RAe=class xG extends Zhe{constructor(e){var n;super(e),pn(this,"protocol",oG),pn(this,"version",aG),pn(this,"name",wP),pn(this,"relayUrl"),pn(this,"projectId"),pn(this,"customStoragePrefix"),pn(this,"events",new Co.EventEmitter),pn(this,"logger"),pn(this,"heartbeat"),pn(this,"relayer"),pn(this,"crypto"),pn(this,"storage"),pn(this,"history"),pn(this,"expirer"),pn(this,"pairing"),pn(this,"verify"),pn(this,"echoClient"),pn(this,"linkModeSupportedApps"),pn(this,"eventClient"),pn(this,"initialized",!1),pn(this,"logChunkController"),pn(this,"on",(a,c)=>this.events.on(a,c)),pn(this,"once",(a,c)=>this.events.once(a,c)),pn(this,"off",(a,c)=>this.events.off(a,c)),pn(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),pn(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:Cn.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||lG,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=Ay({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:XEe.logger,name:wP}),{logger:i,chunkLoggerController:o}=AR({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=hs(i,this.name),this.heartbeat=new jde,this.crypto=new oCe(this,this.logger,e==null?void 0:e.keychain),this.history=new mAe(this,this.logger),this.expirer=new bAe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new xhe(n6(n6({},exe),e==null?void 0:e.storageOptions)),this.relayer=new RCe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new fAe(this,this.logger),this.verify=new xAe(this,this.logger,this.storage),this.echoClient=new AAe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new NAe(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new xG(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(fxe,r),n}get context(){return gi(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem($U,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem($U)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&ZEe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const DAe=RAe,_G="wc",CG=2,AG="client",n3=`${_G}@${CG}:${AG}:`,Y2={name:AG,logger:"error"},r6="WALLETCONNECT_DEEPLINK_CHOICE",$Ae="proposal",s6="Proposal expired",UAe="session",Sp=_e.SEVEN_DAYS,BAe="engine",fr={wc_sessionPropose:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1104},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1106},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1112},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1114},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:_e.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:_e.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1119}}},J2={min:_e.FIVE_MINUTES,max:_e.SEVEN_DAYS},Ia={idle:"IDLE",active:"ACTIVE"},LAe={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},MAe="request",jAe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],FAe="wc",zAe="auth",HAe="authKeys",GAe="pairingTopics",WAe="requests",fA=`${FAe}@${1.5}:${zAe}:`,ix=`${fA}:PUB_KEY`;var qAe=Object.defineProperty,VAe=Object.defineProperties,KAe=Object.getOwnPropertyDescriptors,i6=Object.getOwnPropertySymbols,QAe=Object.prototype.hasOwnProperty,YAe=Object.prototype.propertyIsEnumerable,NP=(t,e,n)=>e in t?qAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xn=(t,e)=>{for(var n in e||(e={}))QAe.call(e,n)&&NP(t,n,e[n]);if(i6)for(var n of i6(e))YAe.call(e,n)&&NP(t,n,e[n]);return t},zs=(t,e)=>VAe(t,KAe(e)),pe=(t,e,n)=>NP(t,typeof e!="symbol"?e+"":e,n);class JAe extends gfe{constructor(e){super(e),pe(this,"name",BAe),pe(this,"events",new _R),pe(this,"initialized",!1),pe(this,"requestQueue",{state:Ia.idle,queue:[]}),pe(this,"sessionRequestQueue",{state:Ia.idle,queue:[]}),pe(this,"requestQueueDelay",_e.ONE_SECOND),pe(this,"expectedPairingMethodMap",new Map),pe(this,"recentlyDeletedMap",new Map),pe(this,"recentlyDeletedLimit",200),pe(this,"relayMessageCache",[]),pe(this,"pendingSessions",new Map),pe(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(fr)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},_e.toMiliseconds(this.requestQueueDelay)))}),pe(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=zs(xn({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=_1e(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const C=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=C.active}}catch(C){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),C}if(!u||!h){const{topic:C,uri:S}=await this.client.core.pairing.create();u=C,d=S}if(!u){const{message:C}=Ce("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(C)}const f=await this.client.core.crypto.generateKeyPair(),p=fr.wc_sessionPropose.req.ttl||_e.FIVE_MINUTES,g=sr(p),y=zs(xn(xn({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:cG}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:ka()}),w=Vt("session_connect",y.id),{reject:v,resolve:b,done:_}=ih(p,s6),x=({id:C})=>{C===y.id&&(this.client.events.off("proposal_expire",x),this.pendingSessions.delete(y.id),this.events.emit(w,{error:{message:s6,code:0}}))};return this.client.events.on("proposal_expire",x),this.events.once(w,({error:C,session:S})=>{this.client.events.off("proposal_expire",x),C?v(C):S&&b(S)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:y,throwOnFailedPublish:!0,clientRpcId:y.id}),await this.setProposal(y.id,y),{uri:d,approval:_}}),pe(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),pe(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[Po.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(A){throw o.setError(Yd.no_internet_connection),A}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(A){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(Yd.proposal_not_found),A}try{await this.isValidApprove(n)}catch(A){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Yd.session_approve_namespace_validation_failure),A}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:y,optionalNamespaces:w}=f;let v=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});v||(v=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Po.session_approve_started,properties:{topic:p,trace:[Po.session_approve_started,Po.session_namespaces_validation_success]}}));const b=await this.client.core.crypto.generateKeyPair(),_=g.publicKey,x=await this.client.core.crypto.generateSharedKey(b,_),C=xn(xn(xn({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:b,metadata:this.client.metadata},expiry:sr(Sp)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),S=Cn.relay;v.addTrace(Po.subscribing_session_topic);try{await this.client.core.relayer.subscribe(x,{transportType:S})}catch(A){throw v.setError(Yd.subscribe_session_topic_failure),A}v.addTrace(Po.subscribe_session_topic_success);const N=zs(xn({},C),{topic:x,requiredNamespaces:y,optionalNamespaces:w,pairingTopic:p,acknowledged:!1,self:C.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:b,transportType:Cn.relay});await this.client.session.set(x,N),v.addTrace(Po.store_session);try{v.addTrace(Po.publishing_session_settle),await this.sendRequest({topic:x,method:"wc_sessionSettle",params:C,throwOnFailedPublish:!0}).catch(A=>{throw v==null||v.setError(Yd.session_settle_publish_failure),A}),v.addTrace(Po.session_settle_publish_success),v.addTrace(Po.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:b},throwOnFailedPublish:!0}).catch(A=>{throw v==null||v.setError(Yd.session_approve_publish_failure),A}),v.addTrace(Po.session_approve_publish_success)}catch(A){throw this.client.logger.error(A),this.client.session.delete(x,Tn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(x),A}return this.client.core.eventClient.deleteEvent({eventId:v.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(x,sr(Sp)),{topic:x,acknowledged:()=>Promise.resolve(this.client.session.get(x))}}),pe(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:fr.wc_sessionPropose.reject}),await this.deleteProposal(r)}),pe(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=ih(),c=ka(),l=Nh().toString(),u=this.client.session.get(r).namespaces;return this.events.once(Vt("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),pe(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=ka(),{done:i,resolve:o,reject:a}=ih();return this.events.once(Vt("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,sr(Sp)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),pe(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:s,topic:i,expiry:o=fr.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===Cn.relay&&await this.confirmOnlineStateOrThrow();const c=ka(),l=Nh().toString(),{done:u,resolve:d,reject:h}=ih(o,"Request expired. Please try again.");this.events.once(Vt("session_request",c),({error:y,result:w})=>{y?h(y):d(w)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:zs(xn({},s),{expiryTimestamp:sr(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:zs(xn({},s),{expiryTimestamp:sr(o)}),chainId:r};return await Promise.all([new Promise(async y=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,g)}).catch(w=>h(w)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),y()}),new Promise(async y=>{var w;if(!((w=a.sessionConfig)!=null&&w.disableDeepLink)){const v=await wwe(this.client.core.storage,r6);await gwe({id:c,topic:i,wcDeepLink:v})}y()}),u()]).then(y=>y[2])}),pe(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===Cn.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Oa(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):uo(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),pe(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=ka(),i=Nh().toString(),{done:o,resolve:a,reject:c}=ih();this.events.once(Vt("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),pe(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=Nh().toString(),a=ka();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),pe(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Tn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=Ce("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),pe(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>S1e(r,n)))),pe(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),pe(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Cn.link_mode:Cn.relay;o===Cn.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:y}=n,w=[...n.resources||[]],{topic:v,uri:b}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:v,uri:b}});const _=await this.client.core.crypto.generateKeyPair(),x=rx(_);if(await Promise.all([this.client.auth.authKeys.set(ix,{responseTopic:x,publicKey:_}),this.client.auth.pairingTopics.set(x,{topic:x,pairingTopic:v})]),await this.client.core.relayer.subscribe(x,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${v}`),g.length>0){const{namespace:$}=kg(a[0]);let M=Rbe($,"request",g);nx(w)&&(M=$be(M,w.pop())),w.push(M)}const C=y&&y>fr.wc_sessionAuthenticate.req.ttl?y:fr.wc_sessionAuthenticate.req.ttl,S={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:w},requester:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:sr(C)},N={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},A={requiredNamespaces:{},optionalNamespaces:N,relays:[{protocol:"irn"}],pairingTopic:v,proposer:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:sr(fr.wc_sessionPropose.req.ttl),id:ka()},{done:P,resolve:R,reject:j}=ih(C,"Request expired"),H=ka(),K=Vt("session_connect",A.id),T=Vt("session_request",H),I=async({error:$,session:M})=>{this.events.off(T,L),$?j($):M&&R({session:M})},L=async $=>{var M,q,ee;if(await this.deletePendingAuthRequest(H,{message:"fulfilled",code:0}),$.error){const ae=Tn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return $.error.code===ae.code?void 0:(this.events.off(K,I),j($.error.message))}await this.deleteProposal(A.id),this.events.off(K,I);const{cacaos:ce,responder:se}=$.result,le=[],me=[];for(const ae of ce){await K8({cacao:ae,projectId:this.client.core.projectId})||(this.client.logger.error(ae,"Signature verification failed"),j(Tn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:oe}=ae,we=nx(oe.resources),Ge=[sP(oe.iss)],ve=g_(oe.iss);if(we){const Se=Q8(we),De=Y8(we);le.push(...Se),Ge.push(...De)}for(const Se of Ge)me.push(`${Se}:${ve}`)}const Z=await this.client.core.crypto.generateSharedKey(_,se.publicKey);let re;le.length>0&&(re={topic:Z,acknowledged:!0,self:{publicKey:_,metadata:this.client.metadata},peer:se,controller:se.publicKey,expiry:sr(Sp),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:v,namespaces:vU([...new Set(le)],[...new Set(me)]),transportType:o},await this.client.core.relayer.subscribe(Z,{transportType:o}),await this.client.session.set(Z,re),v&&await this.client.core.pairing.updateMetadata({topic:v,metadata:se.metadata}),re=this.client.session.get(Z)),(M=this.client.metadata.redirect)!=null&&M.linkMode&&(q=se.metadata.redirect)!=null&&q.linkMode&&(ee=se.metadata.redirect)!=null&&ee.universal&&r&&(this.client.core.addLinkModeSupportedApp(se.metadata.redirect.universal),this.client.session.update(Z,{transportType:Cn.link_mode})),R({auths:ce,session:re})};this.events.once(K,I),this.events.once(T,L);let U;try{if(i){const $=Ju("wc_sessionAuthenticate",S,H);this.client.core.history.set(v,$);const M=await this.client.core.crypto.encode("",$,{type:Qv,encoding:gu});U=cE(r,v,M)}else await Promise.all([this.sendRequest({topic:v,method:"wc_sessionAuthenticate",params:S,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:H}),this.sendRequest({topic:v,method:"wc_sessionPropose",params:A,expiry:fr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:A.id})])}catch($){throw this.events.off(K,I),this.events.off(T,L),$}return await this.setProposal(A.id,A),await this.setAuthRequest(H,{request:zs(xn({},S),{verifyContext:{}}),pairingTopic:v,transportType:o}),{uri:U??b,response:P}}),pe(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Jd.authenticated_session_approve_started]}});try{this.isInitialized()}catch(y){throw i.setError(b0.no_internet_connection),y}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(b0.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||Cn.relay;a===Cn.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=rx(c),d={type:il,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const y of s){if(!await K8({cacao:y,projectId:this.client.core.projectId})){i.setError(b0.invalid_cacao);const x=Tn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:x,encodeOpts:d}),new Error(x.message)}i.addTrace(Jd.cacaos_verified);const{p:w}=y,v=nx(w.resources),b=[sP(w.iss)],_=g_(w.iss);if(v){const x=Q8(v),C=Y8(v);h.push(...x),b.push(...C)}for(const x of b)f.push(`${x}:${_}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(Jd.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:sr(Sp),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:vU([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(Jd.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(y){throw i.setError(b0.subscribe_authenticated_session_topic_failure),y}i.addTrace(Jd.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(Jd.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Jd.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(y){throw i.setError(b0.authenticated_session_approve_publish_failure),y}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),pe(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===Cn.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=rx(o),l={type:il,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:fr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),pe(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return EH(r,s)}),pe(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),pe(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),pe(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Tn("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(r6).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,Tn("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Ia.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),pe(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Yd.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,Tn("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),pe(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=Ia.idle,this.client.events.emit("session_request_expire",{id:n}))}),pe(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),pe(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),pe(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,sr(fr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),pe(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=Cn.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),pe(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||sr(fr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),pe(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=Ju(s,i,c);let f;const p=!!u;try{const w=p?gu:sa;f=await this.client.core.crypto.encode(r,h,{encoding:w})}catch(w){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),w}let g;if(jAe.includes(s)){const w=Va(JSON.stringify(h)),v=Va(f);g=await this.client.core.verify.register({id:v,decryptedId:w})}const y=fr[s].req;if(y.attestation=g,o&&(y.ttl=o),a&&(y.id=a),this.client.core.history.set(r,h),p){const w=cE(u,r,f);await global.Linking.openURL(w,this.client.name)}else{const w=fr[s].req;o&&(w.ttl=o),a&&(w.id=a),w.tvf=zs(xn({},d),{correlationId:h.id}),l?(w.internal=zs(xn({},w.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,w)):this.client.core.relayer.publish(r,f,w).catch(v=>this.client.logger.error(v))}return h.id}),pe(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=lA(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?gu:sa;u=await this.client.core.crypto.encode(s,l,zs(xn({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{f=this.getTVFParams(r,p.params,i)}catch(g){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${g==null?void 0:g.message}`)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=cE(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=fr[p].res;g.tvf=zs(xn({},f),{correlationId:r}),o?(g.internal=zs(xn({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(y=>this.client.logger.error(y))}await this.client.core.history.resolve(l)}),pe(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=uA(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?gu:sa;u=await this.client.core.crypto.encode(s,l,zs(xn({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=cE(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||fr[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),pe(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;au(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{au(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),pe(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),pe(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),pe(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Ia.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Ia.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Ia.idle}),pe(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),pe(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),pe(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=Ce("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),pe(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),pe(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Sc.proposal_listener_not_found)),this.isValidConnect(xn({},s.params));const u=a.expiryTimestamp||sr(fr.wc_sessionPropose.req.ttl),d=xn({id:c,pairingTopic:r,expiryTimestamp:u,attestation:i,encryptedId:o},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:Va(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(Na.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:fr.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),pe(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(Oa(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(uo(r)){await this.deleteProposal(i);const o=Vt("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),pe(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(y=>y.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=zs(xn(xn(xn({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:Cn.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(Vt("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),pe(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;Oa(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Vt("session_approve",s),{})):uo(r)&&(await this.client.session.delete(n,Tn("USER_DISCONNECTED")),this.events.emit(Vt("session_approve",s),{error:r.error}))}),pe(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=y0.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:Tn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(xn({topic:n},s));try{y0.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0})}catch(c){throw y0.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),pe(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),pe(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=Vt("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Oa(r)?this.events.emit(Vt("session_update",s),{}):uo(r)&&this.events.emit(Vt("session_update",s),{error:r.error})}),pe(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,sr(Sp)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),pe(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=Vt("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Oa(r)?this.events.emit(Vt("session_extend",s),{}):uo(r)&&this.events.emit(Vt("session_extend",s),{error:r.error})}),pe(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),pe(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=Vt("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Oa(r)?this.events.emit(Vt("session_ping",s),{}):uo(r)&&this.events.emit(Vt("session_ping",s),{error:r.error})},500)}),pe(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(br.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:Tn("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),pe(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(xn({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Va(JSON.stringify(Ju("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===Cn.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),pe(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=Vt("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Oa(r)?this.events.emit(Vt("session_request",s),{result:r.result}):uo(r)&&this.events.emit(Vt("session_request",s),{error:r.error})}),pe(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=y0.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(xn({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),y0.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),pe(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Oa(r)?this.events.emit(Vt("session_request",s),{result:r.result}):uo(r)&&this.events.emit(Vt("session_request",s),{error:r.error})}),pe(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:Va(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===Cn.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:il,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:fr.wc_sessionAuthenticate.autoReject,appLink:h})}}),pe(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),pe(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Ia.idle,this.processSessionRequestQueue()},_e.toMiliseconds(this.requestQueueDelay))}),pe(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=Vt("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Vt("session_request",i.request.id),{error:r})})}),pe(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Ia.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Ia.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),pe(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),pe(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Ju("wc_sessionPropose",zs(xn({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),pe(this,"isValidConnect",async n=>{if(!qs(n)){const{message:l}=Ce("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Ur(r)||await this.isValidPairingTopic(r),!L1e(c)){const{message:l}=Ce("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Ur(s)&&pd(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!Ur(i)&&pd(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Ur(o)||this.validateSessionProps(o,"sessionProperties"),!Ur(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),pe(this,"validateNamespaces",(n,r)=>{const s=B1e(n,"connect()",r);if(s)throw new Error(s.message)}),pe(this,"isValidApprove",async n=>{if(!qs(n))throw new Error(Ce("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=G2(s,"approve()");if(l)throw new Error(l.message);const u=_U(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!Xn(i,!0)){const{message:d}=Ce("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(Ur(o)||this.validateSessionProps(o,"sessionProperties"),!Ur(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),pe(this,"isValidReject",async n=>{if(!qs(n)){const{message:i}=Ce("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!j1e(s)){const{message:i}=Ce("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),pe(this,"isValidSessionSettleRequest",n=>{if(!qs(n)){const{message:l}=Ce("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!ZH(r)){const{message:l}=Ce("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=k1e(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=G2(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(au(o)){const{message:l}=Ce("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),pe(this,"isValidUpdate",async n=>{if(!qs(n)){const{message:c}=Ce("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=G2(s,"update()");if(o)throw new Error(o.message);const a=_U(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),pe(this,"isValidExtend",async n=>{if(!qs(n)){const{message:s}=Ce("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),pe(this,"isValidRequest",async n=>{if(!qs(n)){const{message:c}=Ce("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!xU(a,i)){const{message:c}=Ce("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!F1e(s)){const{message:c}=Ce("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!G1e(a,i,s.method)){const{message:c}=Ce("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!K1e(o,J2)){const{message:c}=Ce("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${J2.min} and ${J2.max}`);throw new Error(c)}}),pe(this,"isValidRespond",async n=>{var r;if(!qs(n)){const{message:o}=Ce("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!z1e(i)){const{message:o}=Ce("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),pe(this,"isValidPing",async n=>{if(!qs(n)){const{message:s}=Ce("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),pe(this,"isValidEmit",async n=>{if(!qs(n)){const{message:a}=Ce("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!xU(o,i)){const{message:a}=Ce("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!H1e(s)){const{message:a}=Ce("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!W1e(o,i,s.name)){const{message:a}=Ce("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),pe(this,"isValidDisconnect",async n=>{if(!qs(n)){const{message:s}=Ce("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),pe(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Xn(s,!1))throw new Error("uri is required parameter");if(!Xn(i,!1))throw new Error("domain is required parameter");if(!Xn(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>kg(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=kg(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),pe(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||ww,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Cn.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),pe(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=Ce("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),pe(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),pe(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),pe(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=Ce("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),pe(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==Cn.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),pe(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),pe(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=U8(n,"topic")||"",s=decodeURIComponent(U8(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:Cn.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),pe(this,"registerLinkModeListeners",async()=>{var n;if(jR()||Md()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),pe(this,"getTVFParams",(n,r,s)=>{var i,o,a;if(!((i=r.request)!=null&&i.method))return{};const c={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const l=this.extractTxHashesFromResult(r.request,s);c.txHashes=l,c.contractAddresses=this.isValidContractData(r.request.params)?[(a=(o=r.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(l){this.client.logger.warn("Error getting TVF params",l)}return c}),pe(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),pe(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const i=n.method,o=LAe[i];if(i==="sui_signTransaction")return[ybe(r.transactionBytes)];if(i==="near_signTransaction")return[G8(r)];if(i==="near_signTransactions")return r.map(c=>G8(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[lEe({transaction:n.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return ol(r)?r.map(c=>W8(c)):[W8(r)];if(i==="cosmos_signDirect")return[bbe(r)];if(typeof r=="string")return[r];const a=r[o.key];if(ol(a))return i==="solana_signAllTransactions"?a.map(c=>mbe(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(br.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(ix)?this.client.auth.authKeys.get(ix):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===Cn.link_mode?gu:sa});t3(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Va(r)})):dA(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(no.expired,async e=>{const{topic:n,id:r}=oH(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,Ce("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,Ce("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(dh.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(dh.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Xn(e,!1)){const{message:n}=Ce("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=Ce("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(au(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=Ce("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!Xn(e,!1)){const{message:n}=Ce("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=Ce("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(au(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=Ce("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=Ce("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Xn(e,!1)){const{message:n}=Ce("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=Ce("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!M1e(e)){const{message:n}=Ce("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=Ce("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(au(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=Ce("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class ZAe extends ap{constructor(e,n){super(e,n,$Ae,n3),this.core=e,this.logger=n}}let XAe=class extends ap{constructor(e,n){super(e,n,UAe,n3),this.core=e,this.logger=n}};class eSe extends ap{constructor(e,n){super(e,n,MAe,n3,r=>r.id),this.core=e,this.logger=n}}class tSe extends ap{constructor(e,n){super(e,n,HAe,fA,()=>ix),this.core=e,this.logger=n}}class nSe extends ap{constructor(e,n){super(e,n,GAe,fA),this.core=e,this.logger=n}}class rSe extends ap{constructor(e,n){super(e,n,WAe,fA,r=>r.id),this.core=e,this.logger=n}}var sSe=Object.defineProperty,iSe=(t,e,n)=>e in t?sSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Z2=(t,e,n)=>iSe(t,typeof e!="symbol"?e+"":e,n);class oSe{constructor(e,n){this.core=e,this.logger=n,Z2(this,"authKeys"),Z2(this,"pairingTopics"),Z2(this,"requests"),this.authKeys=new tSe(this.core,this.logger),this.pairingTopics=new nSe(this.core,this.logger),this.requests=new rSe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var aSe=Object.defineProperty,cSe=(t,e,n)=>e in t?aSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_t=(t,e,n)=>cSe(t,typeof e!="symbol"?e+"":e,n);let lSe=class SG extends pfe{constructor(e){super(e),_t(this,"protocol",_G),_t(this,"version",CG),_t(this,"name",Y2.name),_t(this,"metadata"),_t(this,"core"),_t(this,"logger"),_t(this,"events",new Co.EventEmitter),_t(this,"engine"),_t(this,"session"),_t(this,"proposal"),_t(this,"pendingRequest"),_t(this,"auth"),_t(this,"signConfig"),_t(this,"on",(r,s)=>this.events.on(r,s)),_t(this,"once",(r,s)=>this.events.once(r,s)),_t(this,"off",(r,s)=>this.events.off(r,s)),_t(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),_t(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),_t(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),_t(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),_t(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),_t(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),_t(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),_t(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),_t(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),_t(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),_t(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),_t(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),_t(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),_t(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),_t(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),_t(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),_t(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),_t(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),_t(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||Y2.name,this.metadata=lwe(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:zv(Ay({level:(e==null?void 0:e.logger)||Y2.logger}));this.core=(e==null?void 0:e.core)||new DAe(e),this.logger=hs(n,this.name),this.session=new XAe(this.core,this.logger),this.proposal=new ZAe(this.core,this.logger),this.pendingRequest=new eSe(this.core,this.logger),this.engine=new JAe(this),this.auth=new oSe(this.core,this.logger)}static async init(e){const n=new SG(e);return await n.initialize(),n}get context(){return gi(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},_e.toMiliseconds(_e.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var PP={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Fn<"u"&&Fn,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof Fn<"u"&&Fn||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(T){return T&&DataView.prototype.isPrototypeOf(T)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(T){return T&&u.indexOf(Object.prototype.toString.call(T))>-1};function h(T){if(typeof T!="string"&&(T=String(T)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(T)||T==="")throw new TypeError('Invalid character in header field name: "'+T+'"');return T.toLowerCase()}function f(T){return typeof T!="string"&&(T=String(T)),T}function p(T){var I={next:function(){var L=T.shift();return{done:L===void 0,value:L}}};return c.iterable&&(I[Symbol.iterator]=function(){return I}),I}function g(T){this.map={},T instanceof g?T.forEach(function(I,L){this.append(L,I)},this):Array.isArray(T)?T.forEach(function(I){if(I.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+I.length);this.append(I[0],I[1])},this):T&&Object.getOwnPropertyNames(T).forEach(function(I){this.append(I,T[I])},this)}g.prototype.append=function(T,I){T=h(T),I=f(I);var L=this.map[T];this.map[T]=L?L+", "+I:I},g.prototype.delete=function(T){delete this.map[h(T)]},g.prototype.get=function(T){return T=h(T),this.has(T)?this.map[T]:null},g.prototype.has=function(T){return this.map.hasOwnProperty(h(T))},g.prototype.set=function(T,I){this.map[h(T)]=f(I)},g.prototype.forEach=function(T,I){for(var L in this.map)this.map.hasOwnProperty(L)&&T.call(I,this.map[L],L,this)},g.prototype.keys=function(){var T=[];return this.forEach(function(I,L){T.push(L)}),p(T)},g.prototype.values=function(){var T=[];return this.forEach(function(I){T.push(I)}),p(T)},g.prototype.entries=function(){var T=[];return this.forEach(function(I,L){T.push([L,I])}),p(T)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function y(T){if(!T._noBody){if(T.bodyUsed)return Promise.reject(new TypeError("Already read"));T.bodyUsed=!0}}function w(T){return new Promise(function(I,L){T.onload=function(){I(T.result)},T.onerror=function(){L(T.error)}})}function v(T){var I=new FileReader,L=w(I);return I.readAsArrayBuffer(T),L}function b(T){var I=new FileReader,L=w(I),U=/charset=([A-Za-z0-9_-]+)/.exec(T.type),$=U?U[1]:"utf-8";return I.readAsText(T,$),L}function _(T){for(var I=new Uint8Array(T),L=new Array(I.length),U=0;U<I.length;U++)L[U]=String.fromCharCode(I[U]);return L.join("")}function x(T){if(T.slice)return T.slice(0);var I=new Uint8Array(T.byteLength);return I.set(new Uint8Array(T)),I.buffer}function C(){return this.bodyUsed=!1,this._initBody=function(T){this.bodyUsed=this.bodyUsed,this._bodyInit=T,T?typeof T=="string"?this._bodyText=T:c.blob&&Blob.prototype.isPrototypeOf(T)?this._bodyBlob=T:c.formData&&FormData.prototype.isPrototypeOf(T)?this._bodyFormData=T:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(T)?this._bodyText=T.toString():c.arrayBuffer&&c.blob&&l(T)?(this._bodyArrayBuffer=x(T.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(T)||d(T))?this._bodyArrayBuffer=x(T):this._bodyText=T=Object.prototype.toString.call(T):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof T=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(T)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var T=y(this);if(T)return T;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var T=y(this);return T||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(v);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var T=y(this);if(T)return T;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(_(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(P)}),this.json=function(){return this.text().then(JSON.parse)},this}var S=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function N(T){var I=T.toUpperCase();return S.indexOf(I)>-1?I:T}function A(T,I){if(!(this instanceof A))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');I=I||{};var L=I.body;if(T instanceof A){if(T.bodyUsed)throw new TypeError("Already read");this.url=T.url,this.credentials=T.credentials,I.headers||(this.headers=new g(T.headers)),this.method=T.method,this.mode=T.mode,this.signal=T.signal,!L&&T._bodyInit!=null&&(L=T._bodyInit,T.bodyUsed=!0)}else this.url=String(T);if(this.credentials=I.credentials||this.credentials||"same-origin",(I.headers||!this.headers)&&(this.headers=new g(I.headers)),this.method=N(I.method||this.method||"GET"),this.mode=I.mode||this.mode||null,this.signal=I.signal||this.signal||function(){if("AbortController"in a){var M=new AbortController;return M.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&L)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(L),(this.method==="GET"||this.method==="HEAD")&&(I.cache==="no-store"||I.cache==="no-cache")){var U=/([?&])_=[^&]*/;if(U.test(this.url))this.url=this.url.replace(U,"$1_="+new Date().getTime());else{var $=/\?/;this.url+=($.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}A.prototype.clone=function(){return new A(this,{body:this._bodyInit})};function P(T){var I=new FormData;return T.trim().split("&").forEach(function(L){if(L){var U=L.split("="),$=U.shift().replace(/\+/g," "),M=U.join("=").replace(/\+/g," ");I.append(decodeURIComponent($),decodeURIComponent(M))}}),I}function R(T){var I=new g,L=T.replace(/\r?\n[\t ]+/g," ");return L.split("\r").map(function(U){return U.indexOf(`
`)===0?U.substr(1,U.length):U}).forEach(function(U){var $=U.split(":"),M=$.shift().trim();if(M){var q=$.join(":").trim();try{I.append(M,q)}catch(ee){console.warn("Response "+ee.message)}}}),I}C.call(A.prototype);function j(T,I){if(!(this instanceof j))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(I||(I={}),this.type="default",this.status=I.status===void 0?200:I.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=I.statusText===void 0?"":""+I.statusText,this.headers=new g(I.headers),this.url=I.url||"",this._initBody(T)}C.call(j.prototype),j.prototype.clone=function(){return new j(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},j.error=function(){var T=new j(null,{status:200,statusText:""});return T.ok=!1,T.status=0,T.type="error",T};var H=[301,302,303,307,308];j.redirect=function(T,I){if(H.indexOf(I)===-1)throw new RangeError("Invalid status code");return new j(null,{status:I,headers:{location:T}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(I,L){this.message=I,this.name=L;var U=Error(I);this.stack=U.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function K(T,I){return new Promise(function(L,U){var $=new A(T,I);if($.signal&&$.signal.aborted)return U(new o.DOMException("Aborted","AbortError"));var M=new XMLHttpRequest;function q(){M.abort()}M.onload=function(){var se={statusText:M.statusText,headers:R(M.getAllResponseHeaders()||"")};$.url.indexOf("file://")===0&&(M.status<200||M.status>599)?se.status=200:se.status=M.status,se.url="responseURL"in M?M.responseURL:se.headers.get("X-Request-URL");var le="response"in M?M.response:M.responseText;setTimeout(function(){L(new j(le,se))},0)},M.onerror=function(){setTimeout(function(){U(new TypeError("Network request failed"))},0)},M.ontimeout=function(){setTimeout(function(){U(new TypeError("Network request timed out"))},0)},M.onabort=function(){setTimeout(function(){U(new o.DOMException("Aborted","AbortError"))},0)};function ee(se){try{return se===""&&a.location.href?a.location.href:se}catch{return se}}if(M.open($.method,ee($.url),!0),$.credentials==="include"?M.withCredentials=!0:$.credentials==="omit"&&(M.withCredentials=!1),"responseType"in M&&(c.blob?M.responseType="blob":c.arrayBuffer&&(M.responseType="arraybuffer")),I&&typeof I.headers=="object"&&!(I.headers instanceof g||a.Headers&&I.headers instanceof a.Headers)){var ce=[];Object.getOwnPropertyNames(I.headers).forEach(function(se){ce.push(h(se)),M.setRequestHeader(se,f(I.headers[se]))}),$.headers.forEach(function(se,le){ce.indexOf(le)===-1&&M.setRequestHeader(le,se)})}else $.headers.forEach(function(se,le){M.setRequestHeader(le,se)});$.signal&&($.signal.addEventListener("abort",q),M.onreadystatechange=function(){M.readyState===4&&$.signal.removeEventListener("abort",q)}),M.send(typeof $._bodyInit>"u"?null:$._bodyInit)})}return K.polyfill=!0,a.fetch||(a.fetch=K,a.Headers=g,a.Request=A,a.Response=j),o.Headers=g,o.Request=A,o.Response=j,o.fetch=K,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(PP,PP.exports);var uSe=PP.exports;const o6=Qf(uSe);var dSe=Object.defineProperty,hSe=Object.defineProperties,fSe=Object.getOwnPropertyDescriptors,a6=Object.getOwnPropertySymbols,pSe=Object.prototype.hasOwnProperty,gSe=Object.prototype.propertyIsEnumerable,c6=(t,e,n)=>e in t?dSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,l6=(t,e)=>{for(var n in e||(e={}))pSe.call(e,n)&&c6(t,n,e[n]);if(a6)for(var n of a6(e))gSe.call(e,n)&&c6(t,n,e[n]);return t},u6=(t,e)=>hSe(t,fSe(e));const mSe={Accept:"application/json","Content-Type":"application/json"},ySe="POST",d6={headers:mSe,method:ySe},h6=10;let ya=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new Co.EventEmitter,this.isAvailable=!1,this.registering=!1,!NU(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=wl(e),r=await(await o6(this.url,u6(l6({},d6),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!NU(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=wl({id:1,jsonrpc:"2.0",method:"test",params:[]});await o6(e,u6(l6({},d6),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?$f(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=uA(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return tG(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>h6&&this.events.setMaxListeners(h6)}};const f6="error",wSe="wss://relay.walletconnect.org",bSe="wc",vSe="universal_provider",uE=`${bSe}@2:${vSe}:`,IG="https://rpc.walletconnect.org/v1/",Vp="generic",ESe=`${IG}bundler`,So={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function r3(t){return t==null||typeof t!="object"&&typeof t!="function"}function TG(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function NG(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const xSe="[object RegExp]",PG="[object String]",kG="[object Number]",OG="[object Boolean]",RG="[object Arguments]",_Se="[object Symbol]",CSe="[object Date]",ASe="[object Map]",SSe="[object Set]",ISe="[object Array]",TSe="[object ArrayBuffer]",NSe="[object Object]",PSe="[object DataView]",kSe="[object Uint8Array]",OSe="[object Uint8ClampedArray]",RSe="[object Uint16Array]",DSe="[object Uint32Array]",$Se="[object Int8Array]",USe="[object Int16Array]",BSe="[object Int32Array]",LSe="[object Float32Array]",MSe="[object Float64Array]";function s3(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function jSe(t,e){return pg(t,void 0,t,new Map,e)}function pg(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(r3(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=pg(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,pg(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(pg(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(s3(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=pg(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),hh(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),hh(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),hh(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,hh(o,t,n,r,s),o}if(typeof t=="object"&&FSe(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),hh(o,t,n,r,s),o}return t}function hh(t,e,n=t,r,s){const i=[...Object.keys(e),...TG(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=pg(e[a],a,n,r,s))}}function FSe(t){switch(NG(t)){case RG:case ISe:case TSe:case PSe:case OG:case CSe:case LSe:case MSe:case $Se:case USe:case BSe:case ASe:case kG:case NSe:case xSe:case SSe:case PG:case _Se:case kSe:case OSe:case RSe:case DSe:return!0;default:return!1}}function zSe(t,e){return jSe(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case kG:case PG:case OG:{const o=new t.constructor(t==null?void 0:t.valueOf());return hh(o,t),o}case RG:{const o={};return hh(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function p6(t){return zSe(t)}function g6(t){return t!==null&&typeof t=="object"&&NG(t)==="[object Arguments]"}function m6(t){return typeof t=="object"&&t!==null}function HSe(){}function GSe(t){return s3(t)}function WSe(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function qSe(t){if(r3(t))return t;if(Array.isArray(t)||s3(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function VSe(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=kP(s,o,r,new Map)}return s}function kP(t,e,n,r){if(r3(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return qSe(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...TG(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(g6(a)&&(a={...a}),g6(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=p6(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||m6(c)&&m6(a)?t[o]=kP(c,a,n,r):c==null&&WSe(a)?t[o]=kP({},a,n,r):c==null&&GSe(a)?t[o]=p6(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function KSe(t,...e){return VSe(t,...e,HSe)}var QSe=Object.defineProperty,YSe=Object.defineProperties,JSe=Object.getOwnPropertyDescriptors,y6=Object.getOwnPropertySymbols,ZSe=Object.prototype.hasOwnProperty,XSe=Object.prototype.propertyIsEnumerable,w6=(t,e,n)=>e in t?QSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dE=(t,e)=>{for(var n in e||(e={}))ZSe.call(e,n)&&w6(t,n,e[n]);if(y6)for(var n of y6(e))XSe.call(e,n)&&w6(t,n,e[n]);return t},e2e=(t,e)=>YSe(t,JSe(e));function zi(t,e,n){var r;const s=kg(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${IG}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function cp(t){return t.includes(":")?t.split(":")[1]:t}function DG(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function t2e(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function hE(t={},e={}){const n=b6(t),r=b6(e);return KSe(n,r)}function b6(t){var e,n,r,s,i;const o={};if(!pd(t))return o;for(const[a,c]of Object.entries(t)){const l=cA(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=fg(a);o[f]=e2e(dE(dE({},o[f]),c),{chains:ic(l,(e=o[f])==null?void 0:e.chains),methods:ic(u,(n=o[f])==null?void 0:n.methods),events:ic(d,(r=o[f])==null?void 0:r.events)}),(pd(h)||pd(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=dE(dE({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function v6(t){return t.includes(":")?t.split(":")[2]:t}function E6(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=cA(n)?[n]:r.chains?r.chains:DG(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function X2(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const $G={},Ft=t=>$G[t],eI=(t,e)=>{$G[t]=e};var n2e=Object.defineProperty,r2e=(t,e,n)=>e in t?n2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ip=(t,e,n)=>r2e(t,typeof e!="symbol"?e+"":e,n);class s2e{constructor(e){Ip(this,"name","polkadot"),Ip(this,"client"),Ip(this,"httpProviders"),Ip(this,"events"),Ip(this,"namespace"),Ip(this,"chainId"),this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(So.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=cp(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zi(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ao(new ya(r,Ft("disableProviderPing")))}}var i2e=Object.defineProperty,o2e=Object.defineProperties,a2e=Object.getOwnPropertyDescriptors,x6=Object.getOwnPropertySymbols,c2e=Object.prototype.hasOwnProperty,l2e=Object.prototype.propertyIsEnumerable,OP=(t,e,n)=>e in t?i2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_6=(t,e)=>{for(var n in e||(e={}))c2e.call(e,n)&&OP(t,n,e[n]);if(x6)for(var n of x6(e))l2e.call(e,n)&&OP(t,n,e[n]);return t},C6=(t,e)=>o2e(t,a2e(e)),Tp=(t,e,n)=>OP(t,typeof e!="symbol"?e+"":e,n);class u2e{constructor(e){Tp(this,"name","eip155"),Tp(this,"client"),Tp(this,"chainId"),Tp(this,"namespace"),Tp(this,"httpProviders"),Tp(this,"events"),this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(So.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||zi(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ao(new ya(r,Ft("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(cp(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:C6(_6({},u.sessionProperties||{}),{capabilities:C6(_6({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ju("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${ESe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var d2e=Object.defineProperty,h2e=(t,e,n)=>e in t?d2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Np=(t,e,n)=>h2e(t,typeof e!="symbol"?e+"":e,n);class f2e{constructor(e){Np(this,"name","solana"),Np(this,"client"),Np(this,"httpProviders"),Np(this,"events"),Np(this,"namespace"),Np(this,"chainId"),this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(So.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=cp(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zi(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ao(new ya(r,Ft("disableProviderPing")))}}var p2e=Object.defineProperty,g2e=(t,e,n)=>e in t?p2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pp=(t,e,n)=>g2e(t,typeof e!="symbol"?e+"":e,n);class m2e{constructor(e){Pp(this,"name","cosmos"),Pp(this,"client"),Pp(this,"httpProviders"),Pp(this,"events"),Pp(this,"namespace"),Pp(this,"chainId"),this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(So.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=cp(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zi(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ao(new ya(r,Ft("disableProviderPing")))}}var y2e=Object.defineProperty,w2e=(t,e,n)=>e in t?y2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kp=(t,e,n)=>w2e(t,typeof e!="symbol"?e+"":e,n);class b2e{constructor(e){kp(this,"name","algorand"),kp(this,"client"),kp(this,"httpProviders"),kp(this,"events"),kp(this,"namespace"),kp(this,"chainId"),this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||zi(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(So.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zi(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Ao(new ya(r,Ft("disableProviderPing")))}}var v2e=Object.defineProperty,E2e=(t,e,n)=>e in t?v2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Op=(t,e,n)=>E2e(t,typeof e!="symbol"?e+"":e,n);class x2e{constructor(e){Op(this,"name","cip34"),Op(this,"client"),Op(this,"httpProviders"),Op(this,"events"),Op(this,"namespace"),Op(this,"chainId"),this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(So.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=cp(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ao(new ya(r,Ft("disableProviderPing")))}}var _2e=Object.defineProperty,C2e=(t,e,n)=>e in t?_2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rp=(t,e,n)=>C2e(t,typeof e!="symbol"?e+"":e,n);class A2e{constructor(e){Rp(this,"name","elrond"),Rp(this,"client"),Rp(this,"httpProviders"),Rp(this,"events"),Rp(this,"namespace"),Rp(this,"chainId"),this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(So.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=cp(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zi(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ao(new ya(r,Ft("disableProviderPing")))}}var S2e=Object.defineProperty,I2e=(t,e,n)=>e in t?S2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Dp=(t,e,n)=>I2e(t,typeof e!="symbol"?e+"":e,n);class T2e{constructor(e){Dp(this,"name","multiversx"),Dp(this,"client"),Dp(this,"httpProviders"),Dp(this,"events"),Dp(this,"namespace"),Dp(this,"chainId"),this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(So.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=cp(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zi(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ao(new ya(r,Ft("disableProviderPing")))}}var N2e=Object.defineProperty,P2e=(t,e,n)=>e in t?N2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$p=(t,e,n)=>P2e(t,typeof e!="symbol"?e+"":e,n);class k2e{constructor(e){$p(this,"name","near"),$p(this,"client"),$p(this,"httpProviders"),$p(this,"events"),$p(this,"namespace"),$p(this,"chainId"),this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||zi(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(So.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zi(e,this.namespace);return typeof r>"u"?void 0:new Ao(new ya(r,Ft("disableProviderPing")))}}var O2e=Object.defineProperty,R2e=(t,e,n)=>e in t?O2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Up=(t,e,n)=>R2e(t,typeof e!="symbol"?e+"":e,n);class D2e{constructor(e){Up(this,"name","tezos"),Up(this,"client"),Up(this,"httpProviders"),Up(this,"events"),Up(this,"namespace"),Up(this,"chainId"),this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||zi(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(So.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zi(e,this.namespace);return typeof r>"u"?void 0:new Ao(new ya(r))}}var $2e=Object.defineProperty,U2e=(t,e,n)=>e in t?$2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bp=(t,e,n)=>U2e(t,typeof e!="symbol"?e+"":e,n);class B2e{constructor(e){Bp(this,"name",Vp),Bp(this,"client"),Bp(this,"httpProviders"),Bp(this,"events"),Bp(this,"namespace"),Bp(this,"chainId"),this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(So.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=kg(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zi(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ao(new ya(r,Ft("disableProviderPing")))}}var L2e=Object.defineProperty,M2e=Object.defineProperties,j2e=Object.getOwnPropertyDescriptors,A6=Object.getOwnPropertySymbols,F2e=Object.prototype.hasOwnProperty,z2e=Object.prototype.propertyIsEnumerable,RP=(t,e,n)=>e in t?L2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fE=(t,e)=>{for(var n in e||(e={}))F2e.call(e,n)&&RP(t,n,e[n]);if(A6)for(var n of A6(e))z2e.call(e,n)&&RP(t,n,e[n]);return t},tI=(t,e)=>M2e(t,j2e(e)),Zi=(t,e,n)=>RP(t,typeof e!="symbol"?e+"":e,n);let H2e=class UG{constructor(e){Zi(this,"client"),Zi(this,"namespaces"),Zi(this,"optionalNamespaces"),Zi(this,"sessionProperties"),Zi(this,"scopedProperties"),Zi(this,"events",new _R),Zi(this,"rpcProviders",{}),Zi(this,"session"),Zi(this,"providerOpts"),Zi(this,"logger"),Zi(this,"uri"),Zi(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:zv(Ay({level:(e==null?void 0:e.logger)||f6})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new UG(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:fE({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,lA(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Tn("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=E6(this.session.namespaces);this.namespaces=hE(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=E6(s.namespaces);return this.namespaces=hE(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===Vp?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(ol(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await lSe.init({core:this.providerOpts.core,logger:this.providerOpts.logger||f6,relayUrl:this.providerOpts.relayUrl||wSe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>fg(n)))];eI("client",this.client),eI("events",this.events),eI("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=t2e(n,this.session),s=DG(r),i=hE(this.namespaces,this.optionalNamespaces),o=tI(fE({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new u2e({namespace:o});break;case"algorand":this.rpcProviders[n]=new b2e({namespace:o});break;case"solana":this.rpcProviders[n]=new f2e({namespace:o});break;case"cosmos":this.rpcProviders[n]=new m2e({namespace:o});break;case"polkadot":this.rpcProviders[n]=new s2e({namespace:o});break;case"cip34":this.rpcProviders[n]=new x2e({namespace:o});break;case"elrond":this.rpcProviders[n]=new A2e({namespace:o});break;case"multiversx":this.rpcProviders[n]=new T2e({namespace:o});break;case"near":this.rpcProviders[n]=new k2e({namespace:o});break;case"tezos":this.rpcProviders[n]=new D2e({namespace:o});break;default:this.rpcProviders[Vp]?this.rpcProviders[Vp].updateNamespace(o):this.rpcProviders[Vp]=new B2e({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&ol(o)&&this.events.emit("accountsChanged",o.map(v6))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=fg(o),l=X2(o)!==X2(a)?`${c}:${X2(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=tI(fE({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",tI(fE({},Tn("USER_DISCONNECTED")),{data:e.topic})))}),this.on(So.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Vp]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=hE(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>fg(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=fg(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(v6);if(!ol(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${uE}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${uE}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${uE}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(uE)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};const vw={getSIWX(){return ge.state.siwx},async initializeIfEnabled(){var i;const t=ge.state.siwx,e=B.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(B.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await Kt.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),tn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=Le._getClient())==null?void 0:i.disconnect().catch(console.error)),et.reset("Connect"),na.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=ge.state.siwx,e=We.getPlainAddress(B.getActiveCaipAddress()),n=B.getActiveCaipNetwork(),r=Le._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Pe.getConnectorId(n.chainNamespace)===ue.CONNECTOR_ID.AUTH&&et.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),B.setLastConnectedSIWECaipNetwork(n),Kt.close(),tn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Kt.state.open||et.state.view==="ApproveTransaction")&&await Kt.open({view:"SIWXSignMessage"}),i.isSmartAccount?na.showError("This application might not support Smart Accounts"):na.showError("Signature declined"),tn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=B.getLastConnectedSIWECaipNetwork();r?B.switchActiveNetwork(r):await Le.disconnect()}else Kt.close();et.reset("Connect"),tn.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=B.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,We.getPlainAddress(B.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=ge.state.siwx,e=We.getPlainAddress(B.getActiveCaipAddress()),n=B.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=et.state.view==="ApproveTransaction",r=et.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=vw.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=B.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(na.showLoading("Authenticating...",{autoClose:!1}),Ie.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),tn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:vw.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),tn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:vw.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{na.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=B.state.activeChain;return{network:((e=B.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=Ie.state.preferredAccountTypes)==null?void 0:n[t])===Cr.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},An={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},Zu={ConnectorExplorerIds:{[ue.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ue.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ue.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[ue.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[ue.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[An.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[An.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[An.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[An.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[An.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[An.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[An.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[An.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[An.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[An.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[An.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[ue.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ue.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ue.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[ue.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[ue.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[ue.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[ue.CONNECTOR_ID.INJECTED]:"Browser Wallet",[ue.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[ue.CONNECTOR_ID.COINBASE]:"Coinbase",[ue.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[ue.CONNECTOR_ID.LEDGER]:"Ledger",[ue.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[ue.CONNECTOR_ID.INJECTED]:"INJECTED",[ue.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[ue.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[ue.CONNECTOR_ID.AUTH]:"AUTH"}},Ob={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${An.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=B.state.activeChain;return ue.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>Pe.getConnectorId(e)===ue.CONNECTOR_ID.AUTH&&e===t)}},G2e=new AbortController,Pn={EmbeddedWalletAbortController:G2e,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${W2e()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"},SERVER_ERROR_APP_CONFIGURATION:{shortMessage:"Server Error",longMessage:t=>`Failed to get App Configuration ${t||""}`},RATE_LIMITED_APP_CONFIGURATION:{shortMessage:"Rate Limited",longMessage:"Rate limited when trying to get the App Configuration"}}};function W2e(){return typeof window<"u"}const q2e={createLogger(t,e="error"){const n=Ay({level:e}),{logger:r}=AR({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},V2e="rpc.walletconnect.org";function S6(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const nI=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Ya={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===V2e}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:ue.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${ue.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return nI.includes(e)?S6(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,y;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((y=r==null?void 0:r[i])==null?void 0:y.map(w=>w.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Zu.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Ya.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(D1(a.url,a.config))}),nI.includes(t.caipNetworkId)&&r.push(D1(S6(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(D1(a))}),S$(r)},extendWagmiTransports(t,e,n){if(nI.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return S$([n,D1(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:ue.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=Te.getActiveCaipNetworkId(),n=B.getAllRequestedCaipNetworks(),r=Array.from(((c=B.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},v_={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Hs=bn({providers:{...v_},providerIds:{...v_}}),cn={state:Hs,subscribeKey(t,e){return Gr(Hs,t,e)},subscribe(t){return Hr(Hs,()=>{t(Hs)})},subscribeProviders(t){return Hr(Hs.providers,()=>t(Hs.providers))},setProvider(t,e){e&&(Hs.providers[t]=Rf(e))},getProvider(t){return Hs.providers[t]},setProviderId(t,e){e&&(Hs.providerIds[t]=e)},getProviderId(t){if(t)return Hs.providerIds[t]},reset(){Hs.providers={...v_},Hs.providerIds={...v_}},resetChain(t){Hs.providers[t]=void 0,Hs.providerIds[t]=void 0}},I6={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Rr={set(t,e){Di.isClient&&localStorage.setItem(`${Fe.STORAGE_KEY}${t}`,e)},get(t){return Di.isClient?localStorage.getItem(`${Fe.STORAGE_KEY}${t}`):null},delete(t,e){Di.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Fe.STORAGE_KEY}${t}`))}},pE=30*1e3,Di={checkIfAllowedToTriggerEmail(){const t=Rr.get(Fe.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<pE){const n=Math.ceil((pE-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Rr.get(Fe.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<pE)return Math.ceil((pE-e)/1e3)}return 0},checkIfRequestExists(t){return Cr.NOT_SAFE_RPC_METHODS.includes(t.method)||Cr.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(I6.transactionHash))||(t==null?void 0:t.match(I6.signedMessage)))?Fe.RPC_RESPONSE_TYPE_TX:Fe.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Cr.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var jt;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(jt||(jt={}));var DP;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(DP||(DP={}));const $e=jt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),mu=t=>{switch(typeof t){case"undefined":return $e.undefined;case"string":return $e.string;case"number":return isNaN(t)?$e.nan:$e.number;case"boolean":return $e.boolean;case"function":return $e.function;case"bigint":return $e.bigint;case"symbol":return $e.symbol;case"object":return Array.isArray(t)?$e.array:t===null?$e.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?$e.promise:typeof Map<"u"&&t instanceof Map?$e.map:typeof Set<"u"&&t instanceof Set?$e.set:typeof Date<"u"&&t instanceof Date?$e.date:$e.object;default:return $e.unknown}},xe=jt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),K2e=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class la extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,jt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}la.create=t=>new la(t);const Rb=(t,e)=>{let n;switch(t.code){case xe.invalid_type:t.received===$e.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case xe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,jt.jsonStringifyReplacer)}`;break;case xe.unrecognized_keys:n=`Unrecognized key(s) in object: ${jt.joinValues(t.keys,", ")}`;break;case xe.invalid_union:n="Invalid input";break;case xe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${jt.joinValues(t.options)}`;break;case xe.invalid_enum_value:n=`Invalid enum value. Expected ${jt.joinValues(t.options)}, received '${t.received}'`;break;case xe.invalid_arguments:n="Invalid function arguments";break;case xe.invalid_return_type:n="Invalid function return type";break;case xe.invalid_date:n="Invalid date";break;case xe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:jt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case xe.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case xe.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case xe.custom:n="Invalid input";break;case xe.invalid_intersection_types:n="Intersection results could not be merged";break;case xe.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case xe.not_finite:n="Number must be finite";break;default:n=e.defaultError,jt.assertNever(t)}return{message:n}};let BG=Rb;function Q2e(t){BG=t}function E_(){return BG}const x_=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},Y2e=[];function Me(t,e){const n=x_({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,E_(),Rb].filter(r=>!!r)});t.common.issues.push(n)}class ds{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return at;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return ds.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return at;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const at=Object.freeze({status:"aborted"}),LG=t=>({status:"dirty",value:t}),Rs=t=>({status:"valid",value:t}),$P=t=>t.status==="aborted",UP=t=>t.status==="dirty",Db=t=>t.status==="valid",__=t=>typeof Promise<"u"&&t instanceof Promise;var Qe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Qe||(Qe={}));class uc{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const T6=(t,e)=>{if(Db(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new la(t.common.issues);return this._error=n,this._error}}};function ht(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class yt{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return mu(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:mu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ds,ctx:{common:e.parent.common,data:e.data,parsedType:mu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(__(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:mu(e)},i=this._parseSync({data:e,path:s.path,parent:s});return T6(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:mu(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(__(s)?s:Promise.resolve(s));return T6(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:xe.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new fa({schema:this,typeName:rt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return al.create(this,this._def)}nullable(){return zf.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ua.create(this,this._def)}promise(){return ny.create(this,this._def)}or(e){return Lb.create([this,e],this._def)}and(e){return Mb.create(this,e,this._def)}transform(e){return new fa({...ht(this._def),schema:this,typeName:rt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Gb({...ht(this._def),innerType:this,defaultValue:n,typeName:rt.ZodDefault})}brand(){return new jG({typeName:rt.ZodBranded,type:this,...ht(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new I_({...ht(this._def),innerType:this,catchValue:n,typeName:rt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Jv.create(this,e)}readonly(){return N_.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const J2e=/^c[^\s-]{8,}$/i,Z2e=/^[a-z][a-z0-9]*$/,X2e=/^[0-9A-HJKMNP-TV-Z]{26}$/,eIe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,tIe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,nIe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let rI;const rIe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,sIe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,iIe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function oIe(t,e){return!!((e==="v4"||!e)&&rIe.test(t)||(e==="v6"||!e)&&sIe.test(t))}class ia extends yt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==$e.string){const i=this._getOrReturnCtx(e);return Me(i,{code:xe.invalid_type,expected:$e.string,received:i.parsedType}),at}const r=new ds;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:xe.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:xe.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?Me(s,{code:xe.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&Me(s,{code:xe.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")tIe.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"email",code:xe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")rI||(rI=new RegExp(nIe,"u")),rI.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"emoji",code:xe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")eIe.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"uuid",code:xe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")J2e.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"cuid",code:xe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")Z2e.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"cuid2",code:xe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")X2e.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"ulid",code:xe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Me(s,{validation:"url",code:xe.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"regex",code:xe.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Me(s,{code:xe.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Me(s,{code:xe.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Me(s,{code:xe.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?iIe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{code:xe.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?oIe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"ip",code:xe.invalid_string,message:i.message}),r.dirty()):jt.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:xe.invalid_string,...Qe.errToObj(r)})}_addCheck(e){return new ia({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Qe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Qe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Qe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Qe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Qe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Qe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Qe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Qe.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...Qe.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Qe.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Qe.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Qe.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Qe.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Qe.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Qe.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Qe.errToObj(n)})}nonempty(e){return this.min(1,Qe.errToObj(e))}trim(){return new ia({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ia({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ia({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ia.create=t=>{var e;return new ia({checks:[],typeName:rt.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...ht(t)})};function aIe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Id extends yt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==$e.number){const i=this._getOrReturnCtx(e);return Me(i,{code:xe.invalid_type,expected:$e.number,received:i.parsedType}),at}let r;const s=new ds;for(const i of this._def.checks)i.kind==="int"?jt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Me(r,{code:xe.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:xe.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:xe.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?aIe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Me(r,{code:xe.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Me(r,{code:xe.not_finite,message:i.message}),s.dirty()):jt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Qe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Qe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Qe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Qe.toString(n))}setLimit(e,n,r,s){return new Id({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Qe.toString(s)}]})}_addCheck(e){return new Id({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Qe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Qe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Qe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Qe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Qe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Qe.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Qe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Qe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Qe.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&jt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Id.create=t=>new Id({checks:[],typeName:rt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...ht(t)});class Td extends yt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==$e.bigint){const i=this._getOrReturnCtx(e);return Me(i,{code:xe.invalid_type,expected:$e.bigint,received:i.parsedType}),at}let r;const s=new ds;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:xe.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:xe.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:xe.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):jt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Qe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Qe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Qe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Qe.toString(n))}setLimit(e,n,r,s){return new Td({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Qe.toString(s)}]})}_addCheck(e){return new Td({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Qe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Qe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Qe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Qe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Qe.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Td.create=t=>{var e;return new Td({checks:[],typeName:rt.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...ht(t)})};class $b extends yt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==$e.boolean){const r=this._getOrReturnCtx(e);return Me(r,{code:xe.invalid_type,expected:$e.boolean,received:r.parsedType}),at}return Rs(e.data)}}$b.create=t=>new $b({typeName:rt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...ht(t)});class jf extends yt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==$e.date){const i=this._getOrReturnCtx(e);return Me(i,{code:xe.invalid_type,expected:$e.date,received:i.parsedType}),at}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Me(i,{code:xe.invalid_date}),at}const r=new ds;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:xe.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:xe.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):jt.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new jf({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Qe.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Qe.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}jf.create=t=>new jf({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:rt.ZodDate,...ht(t)});class C_ extends yt{_parse(e){if(this._getType(e)!==$e.symbol){const r=this._getOrReturnCtx(e);return Me(r,{code:xe.invalid_type,expected:$e.symbol,received:r.parsedType}),at}return Rs(e.data)}}C_.create=t=>new C_({typeName:rt.ZodSymbol,...ht(t)});class Ub extends yt{_parse(e){if(this._getType(e)!==$e.undefined){const r=this._getOrReturnCtx(e);return Me(r,{code:xe.invalid_type,expected:$e.undefined,received:r.parsedType}),at}return Rs(e.data)}}Ub.create=t=>new Ub({typeName:rt.ZodUndefined,...ht(t)});class Bb extends yt{_parse(e){if(this._getType(e)!==$e.null){const r=this._getOrReturnCtx(e);return Me(r,{code:xe.invalid_type,expected:$e.null,received:r.parsedType}),at}return Rs(e.data)}}Bb.create=t=>new Bb({typeName:rt.ZodNull,...ht(t)});class ty extends yt{constructor(){super(...arguments),this._any=!0}_parse(e){return Rs(e.data)}}ty.create=t=>new ty({typeName:rt.ZodAny,...ht(t)});class pf extends yt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Rs(e.data)}}pf.create=t=>new pf({typeName:rt.ZodUnknown,...ht(t)});class vl extends yt{_parse(e){const n=this._getOrReturnCtx(e);return Me(n,{code:xe.invalid_type,expected:$e.never,received:n.parsedType}),at}}vl.create=t=>new vl({typeName:rt.ZodNever,...ht(t)});class A_ extends yt{_parse(e){if(this._getType(e)!==$e.undefined){const r=this._getOrReturnCtx(e);return Me(r,{code:xe.invalid_type,expected:$e.void,received:r.parsedType}),at}return Rs(e.data)}}A_.create=t=>new A_({typeName:rt.ZodVoid,...ht(t)});class ua extends yt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==$e.array)return Me(n,{code:xe.invalid_type,expected:$e.array,received:n.parsedType}),at;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(Me(n,{code:o?xe.too_big:xe.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Me(n,{code:xe.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Me(n,{code:xe.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new uc(n,o,n.path,a)))).then(o=>ds.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new uc(n,o,n.path,a)));return ds.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new ua({...this._def,minLength:{value:e,message:Qe.toString(n)}})}max(e,n){return new ua({...this._def,maxLength:{value:e,message:Qe.toString(n)}})}length(e,n){return new ua({...this._def,exactLength:{value:e,message:Qe.toString(n)}})}nonempty(e){return this.min(1,e)}}ua.create=(t,e)=>new ua({type:t,minLength:null,maxLength:null,exactLength:null,typeName:rt.ZodArray,...ht(e)});function Kp(t){if(t instanceof kn){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=al.create(Kp(r))}return new kn({...t._def,shape:()=>e})}else return t instanceof ua?new ua({...t._def,type:Kp(t.element)}):t instanceof al?al.create(Kp(t.unwrap())):t instanceof zf?zf.create(Kp(t.unwrap())):t instanceof dc?dc.create(t.items.map(e=>Kp(e))):t}class kn extends yt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=jt.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==$e.object){const l=this._getOrReturnCtx(e);return Me(l,{code:xe.invalid_type,expected:$e.object,received:l.parsedType}),at}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof vl&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new uc(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof vl){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(Me(s,{code:xe.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new uc(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>ds.mergeObjectSync(r,l)):ds.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Qe.errToObj,new kn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Qe.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new kn({...this._def,unknownKeys:"strip"})}passthrough(){return new kn({...this._def,unknownKeys:"passthrough"})}extend(e){return new kn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new kn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:rt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new kn({...this._def,catchall:e})}pick(e){const n={};return jt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new kn({...this._def,shape:()=>n})}omit(e){const n={};return jt.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new kn({...this._def,shape:()=>n})}deepPartial(){return Kp(this)}partial(e){const n={};return jt.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new kn({...this._def,shape:()=>n})}required(e){const n={};return jt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof al;)i=i._def.innerType;n[r]=i}}),new kn({...this._def,shape:()=>n})}keyof(){return MG(jt.objectKeys(this.shape))}}kn.create=(t,e)=>new kn({shape:()=>t,unknownKeys:"strip",catchall:vl.create(),typeName:rt.ZodObject,...ht(e)});kn.strictCreate=(t,e)=>new kn({shape:()=>t,unknownKeys:"strict",catchall:vl.create(),typeName:rt.ZodObject,...ht(e)});kn.lazycreate=(t,e)=>new kn({shape:t,unknownKeys:"strip",catchall:vl.create(),typeName:rt.ZodObject,...ht(e)});class Lb extends yt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new la(a.ctx.common.issues));return Me(n,{code:xe.invalid_union,unionErrors:o}),at}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new la(c));return Me(n,{code:xe.invalid_union,unionErrors:a}),at}}get options(){return this._def.options}}Lb.create=(t,e)=>new Lb({options:t,typeName:rt.ZodUnion,...ht(e)});const ox=t=>t instanceof Fb?ox(t.schema):t instanceof fa?ox(t.innerType()):t instanceof zb?[t.value]:t instanceof Nd?t.options:t instanceof Hb?Object.keys(t.enum):t instanceof Gb?ox(t._def.innerType):t instanceof Ub?[void 0]:t instanceof Bb?[null]:null;class pA extends yt{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==$e.object)return Me(n,{code:xe.invalid_type,expected:$e.object,received:n.parsedType}),at;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Me(n,{code:xe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),at)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=ox(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new pA({typeName:rt.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...ht(r)})}}function BP(t,e){const n=mu(t),r=mu(e);if(t===e)return{valid:!0,data:t};if(n===$e.object&&r===$e.object){const s=jt.objectKeys(e),i=jt.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=BP(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===$e.array&&r===$e.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=BP(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===$e.date&&r===$e.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Mb extends yt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if($P(i)||$P(o))return at;const a=BP(i.value,o.value);return a.valid?((UP(i)||UP(o))&&n.dirty(),{status:n.value,value:a.data}):(Me(r,{code:xe.invalid_intersection_types}),at)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Mb.create=(t,e,n)=>new Mb({left:t,right:e,typeName:rt.ZodIntersection,...ht(n)});class dc extends yt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==$e.array)return Me(r,{code:xe.invalid_type,expected:$e.array,received:r.parsedType}),at;if(r.data.length<this._def.items.length)return Me(r,{code:xe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),at;!this._def.rest&&r.data.length>this._def.items.length&&(Me(r,{code:xe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new uc(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>ds.mergeArray(n,o)):ds.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new dc({...this._def,rest:e})}}dc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new dc({items:t,typeName:rt.ZodTuple,rest:null,...ht(e)})};class jb extends yt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==$e.object)return Me(r,{code:xe.invalid_type,expected:$e.object,received:r.parsedType}),at;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new uc(r,a,r.path,a)),value:o._parse(new uc(r,r.data[a],r.path,a))});return r.common.async?ds.mergeObjectAsync(n,s):ds.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof yt?new jb({keyType:e,valueType:n,typeName:rt.ZodRecord,...ht(r)}):new jb({keyType:ia.create(),valueType:e,typeName:rt.ZodRecord,...ht(n)})}}class S_ extends yt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==$e.map)return Me(r,{code:xe.invalid_type,expected:$e.map,received:r.parsedType}),at;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new uc(r,a,r.path,[l,"key"])),value:i._parse(new uc(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return at;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return at;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}S_.create=(t,e,n)=>new S_({valueType:e,keyType:t,typeName:rt.ZodMap,...ht(n)});class Ff extends yt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==$e.set)return Me(r,{code:xe.invalid_type,expected:$e.set,received:r.parsedType}),at;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Me(r,{code:xe.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Me(r,{code:xe.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return at;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new uc(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new Ff({...this._def,minSize:{value:e,message:Qe.toString(n)}})}max(e,n){return new Ff({...this._def,maxSize:{value:e,message:Qe.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Ff.create=(t,e)=>new Ff({valueType:t,minSize:null,maxSize:null,typeName:rt.ZodSet,...ht(e)});class Og extends yt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==$e.function)return Me(n,{code:xe.invalid_type,expected:$e.function,received:n.parsedType}),at;function r(a,c){return x_({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,E_(),Rb].filter(l=>!!l),issueData:{code:xe.invalid_arguments,argumentsError:c}})}function s(a,c){return x_({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,E_(),Rb].filter(l=>!!l),issueData:{code:xe.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof ny){const a=this;return Rs(async function(...c){const l=new la([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return Rs(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new la([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new la([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Og({...this._def,args:dc.create(e).rest(pf.create())})}returns(e){return new Og({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Og({args:e||dc.create([]).rest(pf.create()),returns:n||pf.create(),typeName:rt.ZodFunction,...ht(r)})}}class Fb extends yt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Fb.create=(t,e)=>new Fb({getter:t,typeName:rt.ZodLazy,...ht(e)});class zb extends yt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Me(n,{received:n.data,code:xe.invalid_literal,expected:this._def.value}),at}return{status:"valid",value:e.data}}get value(){return this._def.value}}zb.create=(t,e)=>new zb({value:t,typeName:rt.ZodLiteral,...ht(e)});function MG(t,e){return new Nd({values:t,typeName:rt.ZodEnum,...ht(e)})}class Nd extends yt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Me(n,{expected:jt.joinValues(r),received:n.parsedType,code:xe.invalid_type}),at}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return Me(n,{received:n.data,code:xe.invalid_enum_value,options:r}),at}return Rs(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return Nd.create(e)}exclude(e){return Nd.create(this.options.filter(n=>!e.includes(n)))}}Nd.create=MG;class Hb extends yt{_parse(e){const n=jt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==$e.string&&r.parsedType!==$e.number){const s=jt.objectValues(n);return Me(r,{expected:jt.joinValues(s),received:r.parsedType,code:xe.invalid_type}),at}if(n.indexOf(e.data)===-1){const s=jt.objectValues(n);return Me(r,{received:r.data,code:xe.invalid_enum_value,options:s}),at}return Rs(e.data)}get enum(){return this._def.values}}Hb.create=(t,e)=>new Hb({values:t,typeName:rt.ZodNativeEnum,...ht(e)});class ny extends yt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==$e.promise&&n.common.async===!1)return Me(n,{code:xe.invalid_type,expected:$e.promise,received:n.parsedType}),at;const r=n.parsedType===$e.promise?n.data:Promise.resolve(n.data);return Rs(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ny.create=(t,e)=>new ny({type:t,typeName:rt.ZodPromise,...ht(e)});class fa extends yt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===rt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Me(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?at:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?at:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Db(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Db(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);jt.assertNever(s)}}fa.create=(t,e,n)=>new fa({schema:t,typeName:rt.ZodEffects,effect:e,...ht(n)});fa.createWithPreprocess=(t,e,n)=>new fa({schema:e,effect:{type:"preprocess",transform:t},typeName:rt.ZodEffects,...ht(n)});class al extends yt{_parse(e){return this._getType(e)===$e.undefined?Rs(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}al.create=(t,e)=>new al({innerType:t,typeName:rt.ZodOptional,...ht(e)});class zf extends yt{_parse(e){return this._getType(e)===$e.null?Rs(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}zf.create=(t,e)=>new zf({innerType:t,typeName:rt.ZodNullable,...ht(e)});class Gb extends yt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===$e.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Gb.create=(t,e)=>new Gb({innerType:t,typeName:rt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ht(e)});class I_ extends yt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return __(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new la(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new la(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}I_.create=(t,e)=>new I_({innerType:t,typeName:rt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ht(e)});class T_ extends yt{_parse(e){if(this._getType(e)!==$e.nan){const r=this._getOrReturnCtx(e);return Me(r,{code:xe.invalid_type,expected:$e.nan,received:r.parsedType}),at}return{status:"valid",value:e.data}}}T_.create=t=>new T_({typeName:rt.ZodNaN,...ht(t)});const cIe=Symbol("zod_brand");class jG extends yt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Jv extends yt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?at:i.status==="dirty"?(n.dirty(),LG(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?at:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new Jv({in:e,out:n,typeName:rt.ZodPipeline})}}class N_ extends yt{_parse(e){const n=this._def.innerType._parse(e);return Db(n)&&(n.value=Object.freeze(n.value)),n}}N_.create=(t,e)=>new N_({innerType:t,typeName:rt.ZodReadonly,...ht(e)});const FG=(t,e={},n)=>t?ty.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):ty.create(),lIe={object:kn.lazycreate};var rt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(rt||(rt={}));const uIe=(t,e={message:`Input not instance of ${t.name}`})=>FG(n=>n instanceof t,e),zG=ia.create,HG=Id.create,dIe=T_.create,hIe=Td.create,GG=$b.create,fIe=jf.create,pIe=C_.create,gIe=Ub.create,mIe=Bb.create,yIe=ty.create,wIe=pf.create,bIe=vl.create,vIe=A_.create,EIe=ua.create,xIe=kn.create,_Ie=kn.strictCreate,CIe=Lb.create,AIe=pA.create,SIe=Mb.create,IIe=dc.create,TIe=jb.create,NIe=S_.create,PIe=Ff.create,kIe=Og.create,OIe=Fb.create,RIe=zb.create,DIe=Nd.create,$Ie=Hb.create,UIe=ny.create,N6=fa.create,BIe=al.create,LIe=zf.create,MIe=fa.createWithPreprocess,jIe=Jv.create,FIe=()=>zG().optional(),zIe=()=>HG().optional(),HIe=()=>GG().optional(),GIe={string:t=>ia.create({...t,coerce:!0}),number:t=>Id.create({...t,coerce:!0}),boolean:t=>$b.create({...t,coerce:!0}),bigint:t=>Td.create({...t,coerce:!0}),date:t=>jf.create({...t,coerce:!0})},WIe=at;var O=Object.freeze({__proto__:null,defaultErrorMap:Rb,setErrorMap:Q2e,getErrorMap:E_,makeIssue:x_,EMPTY_PATH:Y2e,addIssueToContext:Me,ParseStatus:ds,INVALID:at,DIRTY:LG,OK:Rs,isAborted:$P,isDirty:UP,isValid:Db,isAsync:__,get util(){return jt},get objectUtil(){return DP},ZodParsedType:$e,getParsedType:mu,ZodType:yt,ZodString:ia,ZodNumber:Id,ZodBigInt:Td,ZodBoolean:$b,ZodDate:jf,ZodSymbol:C_,ZodUndefined:Ub,ZodNull:Bb,ZodAny:ty,ZodUnknown:pf,ZodNever:vl,ZodVoid:A_,ZodArray:ua,ZodObject:kn,ZodUnion:Lb,ZodDiscriminatedUnion:pA,ZodIntersection:Mb,ZodTuple:dc,ZodRecord:jb,ZodMap:S_,ZodSet:Ff,ZodFunction:Og,ZodLazy:Fb,ZodLiteral:zb,ZodEnum:Nd,ZodNativeEnum:Hb,ZodPromise:ny,ZodEffects:fa,ZodTransformer:fa,ZodOptional:al,ZodNullable:zf,ZodDefault:Gb,ZodCatch:I_,ZodNaN:T_,BRAND:cIe,ZodBranded:jG,ZodPipeline:Jv,ZodReadonly:N_,custom:FG,Schema:yt,ZodSchema:yt,late:lIe,get ZodFirstPartyTypeKind(){return rt},coerce:GIe,any:yIe,array:EIe,bigint:hIe,boolean:GG,date:fIe,discriminatedUnion:AIe,effect:N6,enum:DIe,function:kIe,instanceof:uIe,intersection:SIe,lazy:OIe,literal:RIe,map:NIe,nan:dIe,nativeEnum:$Ie,never:bIe,null:mIe,nullable:LIe,number:HG,object:xIe,oboolean:HIe,onumber:zIe,optional:BIe,ostring:FIe,pipeline:jIe,preprocess:MIe,promise:UIe,record:TIe,set:PIe,strictObject:_Ie,string:zG,symbol:pIe,transformer:N6,tuple:IIe,undefined:gIe,union:CIe,unknown:wIe,void:vIe,NEVER:WIe,ZodIssueCode:xe,quotelessJson:K2e,ZodError:la});const Bn=O.object({message:O.string()});function Ue(t){return O.literal(Fe[t])}O.object({accessList:O.array(O.string()),blockHash:O.string().nullable(),blockNumber:O.string().nullable(),chainId:O.string().or(O.number()),from:O.string(),gas:O.string(),hash:O.string(),input:O.string().nullable(),maxFeePerGas:O.string(),maxPriorityFeePerGas:O.string(),nonce:O.string(),r:O.string(),s:O.string(),to:O.string(),transactionIndex:O.string().nullable(),type:O.string(),v:O.string(),value:O.string()});const qIe=O.object({chainId:O.string().or(O.number())}),VIe=O.object({email:O.string().email()}),KIe=O.object({otp:O.string()}),QIe=O.object({uri:O.string(),preferredAccountType:O.optional(O.string()),chainId:O.optional(O.string().or(O.number()))}),YIe=O.object({chainId:O.optional(O.string().or(O.number())),preferredAccountType:O.optional(O.string()),socialUri:O.optional(O.string())}),JIe=O.object({provider:O.enum(["google","github","apple","facebook","x","discord"])}),ZIe=O.object({email:O.string().email()}),XIe=O.object({otp:O.string()}),eTe=O.object({otp:O.string()}),tTe=O.object({themeMode:O.optional(O.enum(["light","dark"])),themeVariables:O.optional(O.record(O.string(),O.string().or(O.number()))),w3mThemeVariables:O.optional(O.record(O.string(),O.string()))}),nTe=O.object({metadata:O.object({name:O.string(),description:O.string(),url:O.string(),icons:O.array(O.string())}).optional(),sdkVersion:O.string().optional(),sdkType:O.string().optional(),projectId:O.string()}),rTe=O.object({type:O.string()}),sTe=O.object({action:O.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),iTe=O.object({url:O.string()}),oTe=O.object({userName:O.string()}),aTe=O.object({email:O.string().optional().nullable(),address:O.string(),chainId:O.string().or(O.number()),accounts:O.array(O.object({address:O.string(),type:O.enum([Cr.ACCOUNT_TYPES.EOA,Cr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:O.string().optional().nullable(),preferredAccountType:O.optional(O.string())}),cTe=O.object({action:O.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),lTe=O.object({email:O.string().email().optional().nullable(),address:O.string(),chainId:O.string().or(O.number()),smartAccountDeployed:O.optional(O.boolean()),accounts:O.array(O.object({address:O.string(),type:O.enum([Cr.ACCOUNT_TYPES.EOA,Cr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:O.optional(O.string())}),uTe=O.object({uri:O.string()}),dTe=O.object({isConnected:O.boolean()}),hTe=O.object({chainId:O.string().or(O.number())}),fTe=O.object({chainId:O.string().or(O.number())}),pTe=O.object({newEmail:O.string().email()}),gTe=O.object({smartAccountEnabledNetworks:O.array(O.number())});O.object({address:O.string(),isDeployed:O.boolean()});const mTe=O.object({version:O.string().optional()}),yTe=O.object({type:O.string(),address:O.string()}),wTe=O.any(),bTe=O.object({method:O.literal("eth_accounts")}),vTe=O.object({method:O.literal("eth_blockNumber")}),ETe=O.object({method:O.literal("eth_call"),params:O.array(O.any())}),xTe=O.object({method:O.literal("eth_chainId")}),_Te=O.object({method:O.literal("eth_estimateGas"),params:O.array(O.any())}),CTe=O.object({method:O.literal("eth_feeHistory"),params:O.array(O.any())}),ATe=O.object({method:O.literal("eth_gasPrice")}),STe=O.object({method:O.literal("eth_getAccount"),params:O.array(O.any())}),ITe=O.object({method:O.literal("eth_getBalance"),params:O.array(O.any())}),TTe=O.object({method:O.literal("eth_getBlockByHash"),params:O.array(O.any())}),NTe=O.object({method:O.literal("eth_getBlockByNumber"),params:O.array(O.any())}),PTe=O.object({method:O.literal("eth_getBlockReceipts"),params:O.array(O.any())}),kTe=O.object({method:O.literal("eth_getBlockTransactionCountByHash"),params:O.array(O.any())}),OTe=O.object({method:O.literal("eth_getBlockTransactionCountByNumber"),params:O.array(O.any())}),RTe=O.object({method:O.literal("eth_getCode"),params:O.array(O.any())}),DTe=O.object({method:O.literal("eth_getFilterChanges"),params:O.array(O.any())}),$Te=O.object({method:O.literal("eth_getFilterLogs"),params:O.array(O.any())}),UTe=O.object({method:O.literal("eth_getLogs"),params:O.array(O.any())}),BTe=O.object({method:O.literal("eth_getProof"),params:O.array(O.any())}),LTe=O.object({method:O.literal("eth_getStorageAt"),params:O.array(O.any())}),MTe=O.object({method:O.literal("eth_getTransactionByBlockHashAndIndex"),params:O.array(O.any())}),jTe=O.object({method:O.literal("eth_getTransactionByBlockNumberAndIndex"),params:O.array(O.any())}),FTe=O.object({method:O.literal("eth_getTransactionByHash"),params:O.array(O.any())}),zTe=O.object({method:O.literal("eth_getTransactionCount"),params:O.array(O.any())}),HTe=O.object({method:O.literal("eth_getTransactionReceipt"),params:O.array(O.any())}),GTe=O.object({method:O.literal("eth_getUncleCountByBlockHash"),params:O.array(O.any())}),WTe=O.object({method:O.literal("eth_getUncleCountByBlockNumber"),params:O.array(O.any())}),qTe=O.object({method:O.literal("eth_maxPriorityFeePerGas")}),VTe=O.object({method:O.literal("eth_newBlockFilter")}),KTe=O.object({method:O.literal("eth_newFilter"),params:O.array(O.any())}),QTe=O.object({method:O.literal("eth_newPendingTransactionFilter")}),YTe=O.object({method:O.literal("eth_sendRawTransaction"),params:O.array(O.any())}),JTe=O.object({method:O.literal("eth_syncing"),params:O.array(O.any())}),ZTe=O.object({method:O.literal("eth_uninstallFilter"),params:O.array(O.any())}),P6=O.object({method:O.literal("personal_sign"),params:O.array(O.any())}),XTe=O.object({method:O.literal("eth_signTypedData_v4"),params:O.array(O.any())}),eNe=O.object({method:O.literal("eth_sendTransaction"),params:O.array(O.any())}),tNe=O.object({method:O.literal("solana_signMessage"),params:O.object({message:O.string(),pubkey:O.string()})}),nNe=O.object({method:O.literal("solana_signTransaction"),params:O.object({transaction:O.string()})}),rNe=O.object({method:O.literal("solana_signAllTransactions"),params:O.object({transactions:O.array(O.string())})}),sNe=O.object({method:O.literal("solana_signAndSendTransaction"),params:O.object({transaction:O.string(),options:O.object({skipPreflight:O.boolean().optional(),preflightCommitment:O.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:O.number().optional(),minContextSlot:O.number().optional()}).optional()})}),iNe=O.object({method:O.literal("wallet_sendCalls"),params:O.array(O.object({chainId:O.string().or(O.number()).optional(),from:O.string().optional(),version:O.string().optional(),capabilities:O.any().optional(),calls:O.array(O.object({to:O.string().startsWith("0x"),data:O.string().startsWith("0x").optional(),value:O.string().optional()}))}))}),oNe=O.object({method:O.literal("wallet_getCallsStatus"),params:O.array(O.string())}),aNe=O.object({method:O.literal("wallet_getCapabilities")}),cNe=O.object({method:O.literal("wallet_grantPermissions"),params:O.array(O.any())}),lNe=O.object({method:O.literal("wallet_revokePermissions"),params:O.any()}),uNe=O.object({method:O.literal("wallet_getAssets"),params:O.any()}),k6=O.object({token:O.string()}),Be=O.object({id:O.string().optional()}),x0={appEvent:Be.extend({type:Ue("APP_SWITCH_NETWORK"),payload:qIe}).or(Be.extend({type:Ue("APP_CONNECT_EMAIL"),payload:VIe})).or(Be.extend({type:Ue("APP_CONNECT_DEVICE")})).or(Be.extend({type:Ue("APP_CONNECT_OTP"),payload:KIe})).or(Be.extend({type:Ue("APP_CONNECT_SOCIAL"),payload:QIe})).or(Be.extend({type:Ue("APP_GET_FARCASTER_URI")})).or(Be.extend({type:Ue("APP_CONNECT_FARCASTER")})).or(Be.extend({type:Ue("APP_GET_USER"),payload:O.optional(YIe)})).or(Be.extend({type:Ue("APP_GET_SOCIAL_REDIRECT_URI"),payload:JIe})).or(Be.extend({type:Ue("APP_SIGN_OUT")})).or(Be.extend({type:Ue("APP_IS_CONNECTED"),payload:O.optional(k6)})).or(Be.extend({type:Ue("APP_GET_CHAIN_ID")})).or(Be.extend({type:Ue("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Be.extend({type:Ue("APP_INIT_SMART_ACCOUNT")})).or(Be.extend({type:Ue("APP_SET_PREFERRED_ACCOUNT"),payload:rTe})).or(Be.extend({type:Ue("APP_RPC_REQUEST"),payload:P6.or(uNe).or(bTe).or(vTe).or(ETe).or(xTe).or(_Te).or(CTe).or(ATe).or(STe).or(ITe).or(TTe).or(NTe).or(PTe).or(kTe).or(OTe).or(RTe).or(DTe).or($Te).or(UTe).or(BTe).or(LTe).or(MTe).or(jTe).or(FTe).or(zTe).or(HTe).or(GTe).or(WTe).or(qTe).or(VTe).or(KTe).or(QTe).or(YTe).or(JTe).or(ZTe).or(P6).or(XTe).or(eNe).or(tNe).or(nNe).or(rNe).or(sNe).or(oNe).or(iNe).or(aNe).or(cNe).or(lNe)})).or(Be.extend({type:Ue("APP_UPDATE_EMAIL"),payload:ZIe})).or(Be.extend({type:Ue("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:XIe})).or(Be.extend({type:Ue("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:eTe})).or(Be.extend({type:Ue("APP_SYNC_THEME"),payload:tTe})).or(Be.extend({type:Ue("APP_SYNC_DAPP_DATA"),payload:nTe})).or(Be.extend({type:Ue("APP_RELOAD")})),frameEvent:Be.extend({type:Ue("FRAME_SWITCH_NETWORK_ERROR"),payload:Bn}).or(Be.extend({type:Ue("FRAME_SWITCH_NETWORK_SUCCESS"),payload:fTe})).or(Be.extend({type:Ue("FRAME_CONNECT_EMAIL_SUCCESS"),payload:sTe})).or(Be.extend({type:Ue("FRAME_CONNECT_EMAIL_ERROR"),payload:Bn})).or(Be.extend({type:Ue("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:iTe})).or(Be.extend({type:Ue("FRAME_GET_FARCASTER_URI_ERROR"),payload:Bn})).or(Be.extend({type:Ue("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:oTe})).or(Be.extend({type:Ue("FRAME_CONNECT_FARCASTER_ERROR"),payload:Bn})).or(Be.extend({type:Ue("FRAME_CONNECT_OTP_ERROR"),payload:Bn})).or(Be.extend({type:Ue("FRAME_CONNECT_OTP_SUCCESS")})).or(Be.extend({type:Ue("FRAME_CONNECT_DEVICE_ERROR"),payload:Bn})).or(Be.extend({type:Ue("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Be.extend({type:Ue("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:aTe})).or(Be.extend({type:Ue("FRAME_CONNECT_SOCIAL_ERROR"),payload:Bn})).or(Be.extend({type:Ue("FRAME_GET_USER_ERROR"),payload:Bn})).or(Be.extend({type:Ue("FRAME_GET_USER_SUCCESS"),payload:lTe})).or(Be.extend({type:Ue("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Bn})).or(Be.extend({type:Ue("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:uTe})).or(Be.extend({type:Ue("FRAME_SIGN_OUT_ERROR"),payload:Bn})).or(Be.extend({type:Ue("FRAME_SIGN_OUT_SUCCESS")})).or(Be.extend({type:Ue("FRAME_IS_CONNECTED_ERROR"),payload:Bn})).or(Be.extend({type:Ue("FRAME_IS_CONNECTED_SUCCESS"),payload:dTe})).or(Be.extend({type:Ue("FRAME_GET_CHAIN_ID_ERROR"),payload:Bn})).or(Be.extend({type:Ue("FRAME_GET_CHAIN_ID_SUCCESS"),payload:hTe})).or(Be.extend({type:Ue("FRAME_RPC_REQUEST_ERROR"),payload:Bn})).or(Be.extend({type:Ue("FRAME_RPC_REQUEST_SUCCESS"),payload:wTe})).or(Be.extend({type:Ue("FRAME_SESSION_UPDATE"),payload:k6})).or(Be.extend({type:Ue("FRAME_UPDATE_EMAIL_ERROR"),payload:Bn})).or(Be.extend({type:Ue("FRAME_UPDATE_EMAIL_SUCCESS"),payload:cTe})).or(Be.extend({type:Ue("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Bn})).or(Be.extend({type:Ue("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Be.extend({type:Ue("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Bn})).or(Be.extend({type:Ue("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:pTe})).or(Be.extend({type:Ue("FRAME_SYNC_THEME_ERROR"),payload:Bn})).or(Be.extend({type:Ue("FRAME_SYNC_THEME_SUCCESS")})).or(Be.extend({type:Ue("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Bn})).or(Be.extend({type:Ue("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Be.extend({type:Ue("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:gTe})).or(Be.extend({type:Ue("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Bn})).or(Be.extend({type:Ue("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Bn})).or(Be.extend({type:Ue("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:yTe})).or(Be.extend({type:Ue("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Bn})).or(Be.extend({type:Ue("FRAME_READY"),payload:mTe})).or(Be.extend({type:Ue("FRAME_RELOAD_ERROR"),payload:Bn})).or(Be.extend({type:Ue("FRAME_RELOAD_SUCCESS")}))};function sI(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}class dNe{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=ue.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!sI(Fe.FRAME_EVENT_KEY,l))return;const u=x0.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}Di.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{Di.isClient&&window.addEventListener("message",({data:o})=>{if(!sI(Fe.FRAME_EVENT_KEY,o))return;const a=x0.frameEvent.parse(o);i(a)})},onAppEvent:i=>{Di.isClient&&window.addEventListener("message",({data:o})=>{if(!sI(Fe.APP_EVENT_KEY,o))return;const a=x0.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(Di.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");x0.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(Di.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");x0.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),Di.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${jue}?projectId=${e}&chainId=${r}&version=${zue}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class hNe{constructor(e){var i;const n=Ay({level:Fue}),{logger:r,chunkLoggerController:s}=AR({opts:n});this.logger=hs(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class fNe{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new hNe(e)),this.abortController=i,this.w3mFrame=new dNe({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Fe.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Rr.get(Fe.EMAIL_LOGIN_USED_KEY)}getEmail(){return Rr.get(Fe.EMAIL)}getUsername(){return Rr.get(Fe.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Fe.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Di.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Fe.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Fe.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Fe.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Fe.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Fe.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Fe.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Fe.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Fe.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Fe.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Fe.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Fe.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Fe.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Fe.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:Fe.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Fe.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:Fe.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Fe.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Fe.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:Fe.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Fe.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(Cr.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:Fe.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Fe.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Fe.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Fe.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Fe.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Fe.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Fe.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Fe.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Cr.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Fe.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===Fe.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{Cr.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Fe.APP_SYNC_DAPP_DATA,Fe.APP_SYNC_THEME,Fe.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Fe.APP_CONNECT_EMAIL,Fe.APP_CONNECT_DEVICE,Fe.APP_CONNECT_OTP,Fe.APP_CONNECT_SOCIAL,Fe.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const y=e;this.openRpcRequests=[...this.openRpcRequests,{...y.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(y,w){var v,b,_;y.id===u&&((b=w==null?void 0:(v=w.logger).info)==null||b.call(v,{framEvent:y,id:u},"Received frame response"),y.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&c(y.payload),c(void 0)):y.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&l(new Error(((_=y.payload)==null?void 0:_.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,y=>h(y,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Rr.set(Fe.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Rr.set(Fe.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Rr.set(Fe.EMAIL,e),Rr.set(Fe.EMAIL_LOGIN_USED_KEY,"true"),Rr.delete(Fe.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Rr.delete(Fe.EMAIL_LOGIN_USED_KEY),Rr.delete(Fe.EMAIL),Rr.delete(Fe.LAST_USED_CHAIN_KEY),Rr.delete(Fe.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Rr.set(Fe.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Rr.get(Fe.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Rr.set(Fe.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}}class gf{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return gf.instance||(gf.instance=new fNe({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),gf.instance}}var O6={};const pNe={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof O6<"u"?O6.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},LP={filterOutDuplicatesByRDNS(t){const e=ge.state.enableEIP6963?Pe.state.connectors:[],n=Te.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&We.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=Pe.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Te.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Pe.state,{featuredWalletIds:n}=ge.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=ge.state.features)==null?void 0:c.connectMethodsOrder),r=e||Pe.state.connectors;if(n)return n;const{injected:s,announced:i}=ax.getConnectorsByType(r,Ke.state.recommended,Ke.state.featured),o=s.filter(ax.showConnector),a=i.filter(ax.showConnector);return o.length||a.length?["wallet","email","social"]:pNe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Ke.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&Ke.state.excludedWallets.some(r=>Ob.isLowerCaseMatch(r.name,t.name));return e||n}},ax={getConnectorsByType(t,e,n){const{customWallets:r}=ge.state,s=Te.getRecentWallets(),i=LP.filterOutDuplicateWallets(e),o=LP.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&Ke.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&Ke.state.excludedWallets.some(i=>Ob.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!We.isMobile()||We.isMobile()&&!e&&!Le.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(B.state.chains.values()).some(n=>Pe.getConnectorId(n.namespace)===ue.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=ge.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=ax.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:ge.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(w=>w.isEnabled),p=new Set(f.map(w=>w.type)),g=c.filter(w=>p.has(w)).map(w=>({type:w,isEnabled:!0})),y=f.filter(({type:w})=>!g.some(({type:b})=>b===w));return Array.from(new Set([...g,...y].map(({type:w})=>w)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!We.isMobile())return{accounts:[],chainId:void 0};if(t.id===ue.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const cx=globalThis,i3=cx.ShadowRoot&&(cx.ShadyCSS===void 0||cx.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,o3=Symbol(),R6=new WeakMap;let WG=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==o3)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(i3&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=R6.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&R6.set(n,e))}return e}toString(){return this.cssText}};const eo=t=>new WG(typeof t=="string"?t:t+"",void 0,o3),Rg=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new WG(n,t,o3)},gNe=(t,e)=>{if(i3)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=cx.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},D6=i3?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return eo(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:mNe,defineProperty:yNe,getOwnPropertyDescriptor:wNe,getOwnPropertyNames:bNe,getOwnPropertySymbols:vNe,getPrototypeOf:ENe}=Object,gd=globalThis,$6=gd.trustedTypes,xNe=$6?$6.emptyScript:"",iI=gd.reactiveElementPolyfillSupport,Ew=(t,e)=>t,MP={toAttribute(t,e){switch(e){case Boolean:t=t?xNe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},qG=(t,e)=>!mNe(t,e),U6={attribute:!0,type:String,converter:MP,reflect:!1,useDefault:!1,hasChanged:qG};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),gd.litPropertyMetadata??(gd.litPropertyMetadata=new WeakMap);let Qp=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=U6){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&yNe(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=wNe(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??U6}static _$Ei(){if(this.hasOwnProperty(Ew("elementProperties")))return;const e=ENe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Ew("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Ew("properties"))){const n=this.properties,r=[...bNe(n),...vNe(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(D6(s))}else e!==void 0&&n.push(D6(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return gNe(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:MP).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:MP;this._$Em=s,this[s]=c.fromAttribute(n,a.type)??((o=this._$Ej)==null?void 0:o.get(s))??null,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??qG)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};Qp.elementStyles=[],Qp.shadowRootOptions={mode:"open"},Qp[Ew("elementProperties")]=new Map,Qp[Ew("finalized")]=new Map,iI==null||iI({ReactiveElement:Qp}),(gd.reactiveElementVersions??(gd.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const xw=globalThis,P_=xw.trustedTypes,B6=P_?P_.createPolicy("lit-html",{createHTML:t=>t}):void 0,VG="$lit$",yu=`lit$${Math.random().toFixed(9).slice(2)}$`,KG="?"+yu,_Ne=`<${KG}>`,Hf=document,Wb=()=>Hf.createComment(""),qb=t=>t===null||typeof t!="object"&&typeof t!="function",a3=Array.isArray,CNe=t=>a3(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",oI=`[ 	
\f\r]`,_0=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,L6=/-->/g,M6=/>/g,Zd=RegExp(`>|${oI}(?:([^\\s"'>=/]+)(${oI}*=${oI}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),j6=/'/g,F6=/"/g,QG=/^(?:script|style|textarea|title)$/i,YG=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),BUe=YG(1),LUe=YG(2),ry=Symbol.for("lit-noChange"),vr=Symbol.for("lit-nothing"),z6=new WeakMap,Ph=Hf.createTreeWalker(Hf,129);function JG(t,e){if(!a3(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return B6!==void 0?B6.createHTML(e):e}const ANe=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=_0;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===_0?u[1]==="!--"?o=L6:u[1]!==void 0?o=M6:u[2]!==void 0?(QG.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=Zd):u[3]!==void 0&&(o=Zd):o===Zd?u[0]===">"?(o=s??_0,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Zd:u[3]==='"'?F6:j6):o===F6||o===j6?o=Zd:o===L6||o===M6?o=_0:(o=Zd,s=void 0);const f=o===Zd&&t[a+1].startsWith("/>")?" ":"";i+=o===_0?c+_Ne:d>=0?(r.push(l),c.slice(0,d)+VG+c.slice(d)+yu+f):c+yu+(d===-2?a:f)}return[JG(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class Vb{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=ANe(e,n);if(this.el=Vb.createElement(l,r),Ph.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Ph.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(VG)){const h=u[o++],f=s.getAttribute(d).split(yu),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?INe:p[1]==="?"?TNe:p[1]==="@"?NNe:gA}),s.removeAttribute(d)}else d.startsWith(yu)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(QG.test(s.tagName)){const d=s.textContent.split(yu),h=d.length-1;if(h>0){s.textContent=P_?P_.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],Wb()),Ph.nextNode(),c.push({type:2,index:++i});s.append(d[h],Wb())}}}else if(s.nodeType===8)if(s.data===KG)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(yu,d+1))!==-1;)c.push({type:7,index:i}),d+=yu.length-1}i++}}static createElement(e,n){const r=Hf.createElement("template");return r.innerHTML=e,r}}function sy(t,e,n=t,r){var o,a;if(e===ry)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=qb(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=sy(t,s._$AS(t,e.values),s,r)),e}class SNe{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??Hf).importNode(n,!0);Ph.currentNode=s;let i=Ph.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new Zv(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new PNe(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=Ph.nextNode(),o++)}return Ph.currentNode=Hf,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class Zv{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=vr,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=sy(this,e,n),qb(e)?e===vr||e==null||e===""?(this._$AH!==vr&&this._$AR(),this._$AH=vr):e!==this._$AH&&e!==ry&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):CNe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==vr&&qb(this._$AH)?this._$AA.nextSibling.data=e:this.T(Hf.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=Vb.createElement(JG(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new SNe(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=z6.get(e.strings);return n===void 0&&z6.set(e.strings,n=new Vb(e)),n}k(e){a3(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new Zv(this.O(Wb()),this.O(Wb()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class gA{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=vr,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=vr}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=sy(this,e,n,0),o=!qb(e)||e!==this._$AH&&e!==ry,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=sy(this,a[r+c],n,c),l===ry&&(l=this._$AH[c]),o||(o=!qb(l)||l!==this._$AH[c]),l===vr?e=vr:e!==vr&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===vr?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class INe extends gA{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===vr?void 0:e}}class TNe extends gA{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==vr)}}class NNe extends gA{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=sy(this,e,n,0)??vr)===ry)return;const r=this._$AH,s=e===vr&&r!==vr||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==vr&&(r===vr||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class PNe{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){sy(this,e)}}const aI=xw.litHtmlPolyfillSupport;aI==null||aI(Vb,Zv),(xw.litHtmlVersions??(xw.litHtmlVersions=[])).push("3.3.0");const kNe=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new Zv(e.insertBefore(Wb(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const mf=globalThis;let lx=class extends Qp{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=kNe(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return ry}};var qB;lx._$litElement$=!0,lx.finalized=!0,(qB=mf.litElementHydrateSupport)==null||qB.call(mf,{LitElement:lx});const cI=mf.litElementPolyfillSupport;cI==null||cI({LitElement:lx});(mf.litElementVersions??(mf.litElementVersions=[])).push("4.2.0");let _w,md,yd;function jUe(t,e){_w=document.createElement("style"),md=document.createElement("style"),yd=document.createElement("style"),_w.textContent=Dg(t).core.cssText,md.textContent=Dg(t).dark.cssText,yd.textContent=Dg(t).light.cssText,document.head.appendChild(_w),document.head.appendChild(md),document.head.appendChild(yd),ZG(e)}function ZG(t){md&&yd&&(t==="light"?(md.removeAttribute("media"),yd.media="enabled"):(yd.removeAttribute("media"),md.media="enabled"))}function ONe(t){_w&&md&&yd&&(_w.textContent=Dg(t).core.cssText,md.textContent=Dg(t).dark.cssText,yd.textContent=Dg(t).light.cssText)}function Dg(t){return{core:Rg`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${eo(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${eo((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${eo((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${eo((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${eo((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Rg`
      :root {
        --w3m-color-mix: ${eo((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${eo(tl(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${eo(tl(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Rg`
      :root {
        --w3m-color-mix: ${eo((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${eo(tl(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${eo(tl(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const FUe=Rg`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,zUe=Rg`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,HUe=Rg`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,G0={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},XG=kee({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function Xv(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const H6=Xv({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),G6=Xv({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});Xv({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});Xv({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});Xv({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const RNe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Cw={getMethodsByChainNamespace(t){return RNe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case H6.caipNetworkId:u.chains.push(H6.deprecatedCaipNetworkId);break;case G6.caipNetworkId:u.chains.push(G6.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await uw.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};class c3{constructor({provider:e,namespace:n}){this.id=ue.CONNECTOR_ID.WALLET_CONNECT,this.name=Zu.ConnectorNamesMap[ue.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Zu.ConnectorImageIds[ue.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=B.getCaipNetworks.bind(B),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=ge.state.universalProviderConfigOverride,s=Cw.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return vw.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:DNe})}}const DNe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class eW{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>B.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:ue.CONNECTOR_ID.AUTH,type:"AUTH",name:ue.CONNECTOR_NAMES.AUTH,provider:e,imageId:Zu.ConnectorImageIds[ue.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){Ie.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=Ie.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof c3);if(!e)throw new Error("WalletConnectConnector not found");return e}}class $Ne extends eW{setUniversalProvider(e){this.addConnector(new c3({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>We.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&en.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(Ie.state.balanceLoading&&e.chainId===((c=B.state.activeCaipNetwork)==null?void 0:c.id))return{balance:Ie.state.balance||"0.00",symbol:Ie.state.balanceSymbol||""};const s=(await Ie.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=B.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===ue.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:Py.encode(new TextEncoder().encode(r)),pubkey:s}},(a=B.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=B.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===ue.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Sf(n.id)}]}))}catch(u){if(u.code===G0.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===G0.ERROR_INVALID_CHAIN_ID||u.code===G0.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===G0.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:Sf(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const UNe=["email","socials","swaps","onramp","activity","reownBranding"],gE={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?en.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?en.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?en.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?en.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?en.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?en.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?en.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?en.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?en.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},BNe={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=gE[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=gE[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return gE[t].processApi(e)},processFallbackFeature(t,e){return gE[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await Ke.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?en.DEFAULT_REMOTE_FEATURES:en.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of UNe){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),en.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Zn.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class LNe{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=B.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=B.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=B.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return B.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>B.getCaipNetworks(n),this.getActiveChainNamespace=()=>B.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{B.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>B.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>B.state.activeChain===n||!n?B.state.activeCaipAddress:B.getAccountProp("caipAddress",n),this.setClientId=n=>{Ze.setClientId(n)},this.getProvider=n=>cn.getProvider(n),this.getProviderType=n=>cn.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=Ie.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{Ie.setCaipAddress(n,r),n&&ge.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{Ie.setBalance(n,r,s)},this.setProfileName=(n,r)=>{Ie.setProfileName(n,r)},this.setProfileImage=(n,r)=>{Ie.setProfileImage(n,r)},this.setUser=(n,r)=>{Ie.setUser(n,r)},this.resetAccount=n=>{Ie.resetAccount(n)},this.setCaipNetwork=n=>{B.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{B.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{Ie.setAllAccounts(n,r),ge.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{Ie.setStatus(n,r),Pe.isConnected()?Te.setConnectionStatus("connected"):Te.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>B.getAccountProp("address",n),this.setConnectors=n=>{const r=[...Pe.state.allConnectors,...n];Pe.setConnectors(r)},this.setConnections=(n,r)=>{Le.setConnections(n,r)},this.fetchIdentity=n=>Ze.fetchIdentity(n),this.getReownName=n=>uw.getNamesForAddress(n),this.getConnectors=()=>Pe.getConnectors(),this.getConnectorImage=n=>S7.getConnectorImage(n),this.getConnections=n=>xb.getConnectionsData(n).connections,this.getRecentConnections=n=>xb.getConnectionsData(n).recentConnections,this.switchConnection=n=>Le.switchConnection(n),this.deleteConnection=n=>Te.deleteAddressFromConnection(n),this.setConnectedWalletInfo=(n,r)=>{const s=cn.getProviderId(r),i=n?{...n,type:s}:void 0;Ie.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!B.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{Ie.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{Ie.removeAddressLabel(n,r)},this.getAddress=n=>B.state.activeChain===n||!n?Ie.state.address:B.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>B.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{B.resetNetwork(n)},this.addConnector=n=>{Pe.addConnector(n)},this.resetWcConnection=()=>{Le.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{Ie.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{Ie.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{B.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{Ie.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{ge.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await BNe.fetchRemoteFeatures(e),ge.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&LN.setOnrampProviders(this.remoteFeatures.onramp),((n=ge.state.remoteFeatures)!=null&&n.email||Array.isArray((r=ge.state.remoteFeatures)==null?void 0:r.socials)&&((s=ge.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){try{const e=await Ke.fetchAllowedOrigins();if(!e||!We.isClient()){Zn.open(Pn.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const n=window.location.origin;Cw.isOriginAllowed(n,e,G0.DEFAULT_ALLOWED_ANCESTORS)||Zn.open(Pn.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}catch(e){if(!(e instanceof Error)){Zn.open(Pn.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":Zn.open(Pn.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const n=e.cause instanceof Error?e.cause:e;Zn.open({shortMessage:Pn.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.shortMessage,longMessage:Pn.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.longMessage(n.message)},"error");break}default:Zn.open(Pn.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,tn.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Zs.setThemeMode(e.themeMode),e.themeVariables&&Zs.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");B.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&B.setActiveCaipNetwork(n)}initializeConnectionController(e){Le.initialize(e.adapters??[]),Le.setWcBasic(e.basic??!1)}initializeConnectorController(){Pe.initialize(this.chainNamespaces)}initializeProjectSettings(e){ge.setProjectId(e.projectId),ge.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;ge.setDebug(e.debug!==!1),ge.setEnableWalletConnect(e.enableWalletConnect!==!1),ge.setEnableWalletGuide(e.enableWalletGuide!==!1),ge.setEnableWallets(e.enableWallets!==!1),ge.setEIP6963Enabled(e.enableEIP6963!==!1),ge.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),ge.setEnableAuthLogger(e.enableAuthLogger!==!1),ge.setCustomRpcUrls(e.customRpcUrls),ge.setEnableEmbedded(e.enableEmbedded),ge.setAllWallets(e.allWallets),ge.setIncludeWalletIds(e.includeWalletIds),ge.setExcludeWalletIds(e.excludeWalletIds),ge.setFeaturedWalletIds(e.featuredWalletIds),ge.setTokens(e.tokens),ge.setTermsConditionsUrl(e.termsConditionsUrl),ge.setPrivacyPolicyUrl(e.privacyPolicyUrl),ge.setCustomWallets(e.customWallets),ge.setFeatures(e.features),ge.setAllowUnsupportedChain(e.allowUnsupportedChain),ge.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),ge.setPreferUniversalLinks(e.experimental_preferUniversalLinks),ge.setDefaultAccountTypes(e.defaultAccountTypes);const n=Te.getPreferredAccountTypes()||{},r={...ge.state.defaultAccountTypes,...n};Ie.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),ge.setMetadata(e.metadata),ge.setDisableAppend(e.disableAppend),ge.setEnableEmbedded(e.enableEmbedded),ge.setSIWX(e.siwx),!e.projectId){Zn.open(Pn.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===ue.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");ge.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return We.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=Ya.getUnsupportedNetwork(`${n}:${e}`);B.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Ya.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return Ya.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return Ya.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?Ya.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=cn.getProvider(e),s=cn.getProviderId(e),{caipAddress:i}=B.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),Te.removeConnectedNamespace(e),cn.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),Pe.removeConnectorId(e),B.resetAccount(e),B.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=B.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),Te.setConnectedNamespaces([...B.state.chains.keys()]),this.chainNamespaces.forEach(o=>{Pe.setConnectorId(An.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,y,w,v,b,_;const c=B.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const x=this.getCaipNetworks().find(C=>C.chainNamespace===i);x&&this.setCaipNetwork(x)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((w=(y=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:y.http)==null?void 0:w[0])||((_=(b=(v=d==null?void 0:d.rpcUrls)==null?void 0:v.default)==null?void 0:b.http)==null?void 0:_[0])});if(!h)return;Te.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=Ie.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=B.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),Te.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async({chainNamespace:e}={})=>{const n=Vue(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));zt.resetSend(),Le.resetWcConnection(),await vw.clearSessions(),Pe.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));Te.deleteConnectedSocialProvider(),tn.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(B.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:Ie.state.address,provider:cn.getProvider(B.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(en.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(B.state.activeChain),s=cn.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===ue.CHAIN.EVM){const n=this.getAdapter(B.state.activeChain),r=cn.getProvider(B.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:Ie.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:B.state.activeChain}),Ie.state.profileImage||!1},getEnsAddress:async e=>await Cw.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(B.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=cn.getProvider(B.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(B.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(B.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(B.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(B.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(B.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(B.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!Ie.state.address||this.updateNativeBalance(Ie.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},Le.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(cn.getProviderId(B.state.activeChain)===An.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=cn.getProvider(n),i=cn.getProviderId(n);if(e.chainNamespace===B.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===An.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=Oi.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new $Ne({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=Te.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(Te.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=B.state.activeChain===e,c=B.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=Ie.state.address,i=B.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=B.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=B.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=B.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===ue.CHAIN.EVM&&We.isSafeApp()&&Pe.setConnectorId(ue.CONNECTOR_ID.SAFE,e);const n=Pe.getConnectorId(e);switch(this.setStatus("connecting",e),n){case ue.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case ue.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=Pe.getConnectorId(e),s=this.getCaipNetwork(e),o=Pe.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([We.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){var r,s;const e=Object.keys(((s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)||{}),n=this.chainNamespaces.map(async i=>{var u,d,h,f,p;const o=this.getAdapter(i),a=((f=(h=(d=(u=this.universalProvider)==null?void 0:u.session)==null?void 0:d.namespaces)==null?void 0:h[i])==null?void 0:f.accounts)||[],c=(p=B.state.activeCaipNetwork)==null?void 0:p.id,l=a.find(g=>{const{chainId:y}=Oi.parseCaipAddress(g);return y===(c==null?void 0:c.toString())})||a[0];if(l){const g=Oi.validateCaipAddress(l),{chainId:y,address:w}=Oi.parseCaipAddress(g);if(cn.setProviderId(i,An.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&B.state.activeCaipNetwork&&(o==null?void 0:o.namespace)!==ue.CHAIN.EVM){const v=o==null?void 0:o.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:B.state.activeCaipNetwork});cn.setProvider(i,v)}else cn.setProvider(i,this.universalProvider);Pe.setConnectorId(ue.CONNECTOR_ID.WALLET_CONNECT,i),Te.addConnectedNamespace(i),this.syncWalletConnectAccounts(i),await this.syncAccount({address:w,chainId:y,chainNamespace:i})}else e.includes(i)&&this.setStatus("disconnected",i);this.syncConnectedWalletInfo(i),await B.setApprovedCaipNetworksData(i)});await Promise.all(n)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=Oi.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>We.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){cn.setProviderId(s,e),cn.setProvider(s,n),Pe.setConnectorId(r,s)}async syncAllAccounts(e){const n=Pe.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===B.state.activeChain,r=B.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=Te.getActiveNetworkProps(),c=i||a,l=((d=B.state.activeCaipNetwork)==null?void 0:d.name)===ue.UNSUPPORTED_NETWORK_NAME,u=B.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(y=>y.id.toString()===c.toString()),p=this.getCaipNetworks().find(y=>y.chainNamespace===o);if(!u&&!f&&!p){const y=this.getApprovedCaipNetworkIds()||[],w=y.find(b=>{var _;return((_=Oi.parseCaipNetworkId(b))==null?void 0:_.chainId)===c.toString()}),v=y.find(b=>{var _;return((_=Oi.parseCaipNetworkId(b))==null?void 0:_.chainNamespace)===o});f=this.getCaipNetworks().find(b=>b.caipNetworkId===w),p=this.getCaipNetworks().find(b=>b.caipNetworkId===v||"deprecatedCaipNetworkId"in b&&b.deprecatedCaipNetworkId===v)}const g=f||p;(g==null?void 0:g.chainNamespace)===B.state.activeChain?ge.state.enableNetworkSwitch&&!ge.state.allowUnsupportedChain&&((h=B.state.activeCaipNetwork)==null?void 0:h.name)===ue.UNSUPPORTED_NETWORK_NAME?B.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),Ob.isLowerCaseMatch(s,Ie.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=Pe.getConnectorId(e),r=cn.getProviderId(e);if(r===An.CONNECTOR_TYPE_ANNOUNCED||r===An.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===An.CONNECTOR_TYPE_WALLET_CONNECT){const i=cn.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===ue.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===ue.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!Eb.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=B.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=q2e.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};ge.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await H2e.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{Le.setUri(e)}),this.universalProvider.on("connect",Le.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),Le.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(Cw.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&We.isCaipAddress(r[0])&&this.syncAccount(Oi.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&We.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){tn.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(Pn.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=Pn.ALERT_ERRORS[o];a&&(Zn.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&Le.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return Kt.open({...e,data:{swap:e.arguments}})}return Kt.open(e)}async close(){await this.injectModalUi(),Kt.close()}setLoading(e,n){Kt.setLoading(e,n)}async disconnect(e){await Le.disconnect({namespace:e})}getSIWX(){return ge.state.siwx}getError(){return""}getChainId(){var e;return(e=B.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){Zn.open(Pn.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await B.switchActiveNetwork(n)}getWalletProvider(){return B.state.activeChain?cn.state.providers[B.state.activeChain]:null}getWalletProviderType(){return cn.getProviderId(B.state.activeChain)}subscribeProviders(e){return cn.subscribeProviders(e)}getThemeMode(){return Zs.state.themeMode}getThemeVariables(){return Zs.state.themeVariables}setThemeMode(e){Zs.setThemeMode(e),ZG(Zs.state.themeMode)}setTermsConditionsUrl(e){ge.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){ge.setPrivacyPolicyUrl(e)}setThemeVariables(e){Zs.setThemeVariables(e),ONe(Zs.state.themeVariables)}subscribeTheme(e){return Zs.subscribe(e)}subscribeConnections(e){return Le.subscribe(e)}getWalletInfo(e){return e?B.getAccountProp("connectedWalletInfo",e):Ie.state.connectedWalletInfo}getAccount(e){var o;const n=Pe.getAuthConnector(e),r=B.getAccountData(e),s=B.state.activeChain,i=Te.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:We.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===ue.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:Te.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?B.subscribeChainProp("accountState",r,n):B.subscribe(r),Pe.subscribe(r)}subscribeNetwork(e){return B.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e,n){return n?Ie.subscribeKey("connectedWalletInfo",e,n):Ie.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Ie.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){B.subscribeKey("activeCaipNetwork",e)}getState(){return rc.state}subscribeState(e){return rc.subscribe(e)}showErrorMessage(e){na.showError(e)}showSuccessMessage(e){na.showSuccess(e)}getEvent(){return{...tn.state}}subscribeEvents(e){return tn.subscribe(e)}replace(e){et.replace(e)}redirect(e){et.push(e)}popTransactionStack(e){et.popTransactionStack(e)}isOpen(){return Kt.state.open}isTransactionStackEmpty(){return et.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){ge.setFeatures(e)}updateRemoteFeatures(e){ge.setRemoteFeatures(e)}updateOptions(e){const r={...ge.state||{},...e};ge.setOptions(r)}setConnectMethodsOrder(e){ge.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){ge.setWalletFeaturesOrder(e)}setCollapseWallets(e){ge.setCollapseWallets(e)}setSocialsOrder(e){ge.setSocialsOrder(e)}getConnectMethodsOrder(){return LP.getConnectOrderMethod(ge.state.features,Pe.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||B.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&B.removeNetwork(e,n)}}let W6=!1;class MNe extends LNe{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{Di.checkIfRequestExists(n)?Di.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Cr.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Cr.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=Di.checkIfRequestIsSafe(r),i=Ie.state.address,o=B.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=B.state.activeChain;Pe.getConnectorId(n)===ue.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=B.state.activeChain,s=r===ue.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=ge.state.defaultAccountTypes[r],o=(l=Ie.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;Ob.isLowerCaseMatch(n.address,Ie.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...Ie.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>We.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[We.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...Ie.state.user||{},username:n},B.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,B.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,B.state.activeChain)})}async syncAuthConnector(e,n){var d,h,f,p;const r=ue.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n),s=n===B.state.activeChain;if(!r)return;this.setLoading(!0,n);const i=e.getLoginEmailUsed();this.setLoading(i,n),i&&this.setStatus("connecting",n);const o=e.getEmail(),a=e.getUsername();this.setUser({...((d=Ie.state)==null?void 0:d.user)||{},username:a,email:o},n),this.setupAuthConnectorListeners(e);const{isConnected:c}=await e.isConnected(),l=Zs.getSnapshot(),u=ge.getSnapshot();await Promise.all([e.syncDappData({metadata:u.metadata,sdkVersion:u.sdkVersion,projectId:u.projectId,sdkType:u.sdkType}),e.syncTheme({themeMode:l.themeMode,themeVariables:l.themeVariables,w3mThemeVariables:tl(l.themeVariables,l.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&s&&(c&&((h=this.connectionControllerClient)!=null&&h.connectExternal)?(await((p=this.connectionControllerClient)==null?void 0:p.connectExternal({id:ue.CONNECTOR_ID.AUTH,info:{name:ue.CONNECTOR_ID.AUTH},type:An.CONNECTOR_TYPE_AUTH,provider:e,chainId:(f=B.state.activeCaipNetwork)==null?void 0:f.id,chain:n})),this.setStatus("connected",n)):Pe.getConnectorId(n)===ue.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),Te.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!We.isTelegram())return;const r=Te.getTelegramSocialProvider();if(!r||!We.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;Ie.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=Pe.getAuthConnector();r&&o&&(this.setLoading(!0,e),await Le.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),Te.setConnectedSocialProvider(r),Te.removeTelegramSocialProvider(),tn.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var l,u,d,h;if(!ue.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(l=this.remoteFeatures)==null?void 0:l.email,s=Array.isArray((u=this.remoteFeatures)==null?void 0:u.socials)&&this.remoteFeatures.socials.length>0,i=r||s,a=Ob.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&((d=this.options)!=null&&d.projectId)&&i&&(this.authProvider=gf.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(h=this.getCaipNetwork(a))==null?void 0:h.caipNetworkId,abortController:Pn.EmbeddedWalletAbortController,onTimeout:f=>{f==="iframe_load_failed"?Zn.open(Pn.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):f==="iframe_request_timeout"?Zn.open(Pn.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):f==="unverified_domain"&&Zn.open(Pn.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),rc.subscribeOpen(f=>{var p;!f&&this.isTransactionStackEmpty()&&((p=this.authProvider)==null||p.rejectRpcRequests())}));const c=e===B.state.activeChain;this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&Ke.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=B.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=cn.getProvider(r),u=cn.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=cn.getProviderId(n)===An.CONNECTOR_TYPE_AUTH,u=cn.getProviderId(r),d=u===An.CONNECTOR_TYPE_AUTH,h=ue.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(B.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:ue.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:An.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===An.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),rc.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==ue.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=cn.getProviderId(e);if(n===An.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=Te.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(We.isClient()&&!W6)try{const e={...en.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),We.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!ge.state.disableAppend&&!ge.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}W6=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!We.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(Gn(()=>import("./embedded-wallet-O-IJ8tN8.js"),__vite__mapDeps([3,4,5,6,7,8,9,10,11,12,13,14]))),n.email&&r.push(Gn(()=>import("./email-DQXkpnRE.js"),__vite__mapDeps([15,4,14,8,13,7,12,16,9]))),n.socials&&r.push(Gn(()=>import("./socials-BLn7i0tX.js"),__vite__mapDeps([17,4,18,7,19,20,13,21,12,8,14,22,6,23]))),n.swaps&&n.swaps.length>0&&r.push(Gn(()=>import("./swaps-BHx1y469.js"),__vite__mapDeps([24,4,12,8,25,26,27,6,13,23,9,7]))),e.send&&r.push(Gn(()=>import("./send-DdUVXvTQ.js"),__vite__mapDeps([28,4,12,8,13,7,19,14,27,6,9,29,30]))),e.receive&&r.push(Gn(()=>import("./receive-PuHa2o34.js"),__vite__mapDeps([31,4,32,6,22]))),n.onramp&&n.onramp.length>0&&r.push(Gn(()=>import("./onramp-B4y3gnUI.js"),__vite__mapDeps([33,4,34,23,13,6,8,35,18,7,19,36,14,12,21,9]))),n.activity&&r.push(Gn(()=>import("./transactions-BuUd--nz.js"),__vite__mapDeps([37,4,38,34,23,13,14,6]))),e.pay&&r.push(Gn(()=>import("./index-Djo3nNSI.js"),__vite__mapDeps([39,4,12,8,40,6,13,10,35,30,21]))),await Promise.all([...r,Gn(()=>import("./index-DLY50_j7.js"),__vite__mapDeps([41,4,6,8,29,13,42,26,10,35,12,11,40,38,34,23,14,25,30,7,9,16,18,19,20,5,21,32,22,36])),Gn(()=>import("./w3m-modal-CcPqW2K2.js"),__vite__mapDeps([43,4,10,6,13,11,8,26,42]))])}}let eu;function jNe(t){t&&(eu=t)}function mA(){if(!eu)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(eu==null?void 0:eu.open(n))}async function e(){await(eu==null?void 0:eu.close())}return{open:t,close:e}}const FNe="1.7.10";let mE;function zNe(t){return mE||(mE=new MNe({...t,sdkVersion:We.generateSdkVersion(t.adapters??[],"react",FNe)}),jNe(mE)),mE}const HNe=ma({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),q6=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],GNe=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=HNe({isOpen:t}),{open:i}=mA(),o=k.useRef(null),[a,c]=k.useState([]),[l,u]=k.useState(!0),[d,h]=k.useState(null),[f,p]=k.useState("all"),[g,y]=k.useState(1),[w,v]=k.useState(1),[b,_]=k.useState(0),[x,C]=k.useState(null),[S,N]=k.useState(q6[0]),[A,P]=k.useState(!1),[R,j]=k.useState(null),H=k.useCallback(async()=>{var $,M;try{if(($=window.solana)!=null&&$.isPhantom){const q=await window.solana.connect();j(q.publicKey.toString());return}if((M=window.solflare)!=null&&M.isSolflare){const q=await window.solflare.connect();j(q.publicKey.toString());return}i()}catch(q){console.error("Failed to connect Solana wallet:",q),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}P(!1)},[i]);k.useEffect(()=>{var $,M;($=window.solana)!=null&&$.publicKey?j(window.solana.publicKey.toString()):(M=window.solflare)!=null&&M.publicKey&&j(window.solflare.publicKey.toString())},[]),k.useEffect(()=>{t&&(async()=>{var M;u(!0),h(null);try{let q,ee=f==="owned"&&r||void 0;if(S.api==="opensea-solana"){if(f==="owned"&&!R){P(!0),u(!1);return}ee=R||void 0,q=await x7(S.slug,50),console.log("Fetched Solana NFTs from collection:",q.data.length),f==="owned"&&R&&(console.log("Filtering for owner:",R),console.log("Sample NFT owner data:",(M=q.data[0])==null?void 0:M.owners),console.log("All NFTs owner data:",q.data.map(se=>({name:se.name,owners:se.owners,owner_of:se.owner_of}))),q.data.some(se=>se.owners&&se.owners.length>0)?(q.data=q.data.filter(se=>{const le=se.owners.some(me=>me.owner_of&&me.owner_of.toLowerCase()===R.toLowerCase());return le&&console.log("Found owned NFT:",se.name),le}),console.log("NFTs after filtering:",q.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else S.api==="opensea"?q=await vR(S.slug,50,ee):q=await bR(S.slug,g,50,ee);c(q.data),v(q.totalPages),_(q.totalCount)}catch(q){q instanceof Error?h(q.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,S,R]),k.useEffect(()=>{A&&H()},[A,H]);const K=$=>new Date($).toLocaleDateString(),T=$=>S.api==="opensea-solana"&&(!$.owners||$.owners.length===0)?"Owner data unavailable":$.owners.length>0?`${$.owners[0].owner_of.substring(0,6)}...`:"N/A",I=()=>{n&&n()},L=async $=>{if(S.api==="opensea"&&S.chain)try{const M=await E7(S.chain,$.address,$.token_id.toString()),q={...$,attributes:JSON.stringify(M.traits||[])};C(q)}catch(M){console.error("Failed to fetch full NFT details",M),C($)}else C($)},U=$=>{N($),y(1)};return t?m.jsxs(m.Fragment,{children:[m.jsx(Lv,{nodeRef:o,handle:`.${s.header}`,children:m.jsxs("div",{ref:o,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"LAWB NFT GALLERY"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:I,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),m.jsx("div",{className:s.collectionSelector,children:q6.map($=>m.jsx("button",{className:`${s.collectionButton} ${S.slug===$.slug?"active":""}`,onClick:()=>U($),children:$.name},$.slug))}),m.jsxs("div",{className:s.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),m.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!R,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||R?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||R?1:.6},children:"My NFTs"}),S.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{H()},style:{background:R?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:R?"white":"black",marginLeft:"auto"},children:R?`Solana: ${R.slice(0,4)}...${R.slice(-4)}`:"Connect Solana"})]}),S.api==="opensea-solana"&&!R&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?m.jsx("div",{children:"Loading NFTs..."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${b} total)`,f==="recent"&&`Recently minted NFTs by ${S.api==="opensea-solana"?(R==null?void 0:R.slice(0,6))+"..."+(R==null?void 0:R.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${S.api==="opensea-solana"?(R==null?void 0:R.slice(0,6))+"..."+(R==null?void 0:R.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?m.jsx("div",{children:"No NFTs found."}):m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map($=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{L($)},children:[m.jsx("div",{style:{width:"100%",height:"150px",backgroundImage:`url(${$.image_url})`,backgroundSize:"cover",backgroundPosition:"center",marginBottom:"10px",border:"1px solid #ccc"}}),m.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:m.jsxs("strong",{children:["#",$.token_id]})}),m.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",T($)]}),m.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",K($.created_at)]})]},$.id))}),f!=="recent"&&w>1&&m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[m.jsx("button",{onClick:()=>y($=>Math.max(1,$-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),m.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",w]}),m.jsx("button",{onClick:()=>y($=>Math.min(w,$+1)),disabled:g===w,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===w?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),x&&m.jsx(eue,{nft:x,onClose:()=>C(null)})]}):null};var yE,WNe=new Uint8Array(16);function qNe(){if(!yE&&(yE=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!yE))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yE(WNe)}const VNe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function KNe(t){return typeof t=="string"&&VNe.test(t)}var Or=[];for(var lI=0;lI<256;++lI)Or.push((lI+256).toString(16).substr(1));function QNe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Or[t[e+0]]+Or[t[e+1]]+Or[t[e+2]]+Or[t[e+3]]+"-"+Or[t[e+4]]+Or[t[e+5]]+"-"+Or[t[e+6]]+Or[t[e+7]]+"-"+Or[t[e+8]]+Or[t[e+9]]+"-"+Or[t[e+10]]+Or[t[e+11]]+Or[t[e+12]]+Or[t[e+13]]+Or[t[e+14]]+Or[t[e+15]]).toLowerCase();if(!KNe(n))throw TypeError("Stringified UUID is invalid");return n}function YNe(t,e,n){t=t||{};var r=t.random||(t.rng||qNe)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,QNe(r)}const JNe=ma({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000",textTransform:"uppercase"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),ZNe=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}],XNe=["/images/sticker1.png","/images/sticker2.png","/images/sticker3.png","/images/sticker4.png","/images/sticker5.png"],Ei=500;function tW(){const t=JNe(),e=k.useRef(null),[n,r]=k.useState(null),[s,i]=k.useState(""),[o,a]=k.useState(""),[c,l]=k.useState(36),[u,d]=k.useState(36),[h,f]=k.useState(!1),[p,g]=k.useState(!1),[y,w]=k.useState(!1),[v,b]=k.useState(!1),[_,x]=k.useState(!1),[C,S]=k.useState([]),[N,A]=k.useState(null),P=k.useRef(null),[R,j]=k.useState(null),H=async Z=>{const re=Z.getContext("2d");if(!re)return;re.clearRect(0,0,Z.width,Z.height),n?await new Promise(oe=>{const we=new window.Image;we.crossOrigin="anonymous",we.onload=()=>{const Ge=Math.min(Z.width/we.width,Z.height/we.height),ve=(Z.width-we.width*Ge)/2,Se=(Z.height-we.height*Ge)/2;re.drawImage(we,ve,Se,we.width*Ge,we.height*Ge),oe()},we.onerror=()=>oe(),we.src=n}):(re.fillStyle="#333",re.fillRect(0,0,Z.width,Z.height)),(oe=>{oe.textAlign="center",oe.strokeStyle="black",oe.lineWidth=3,oe.fillStyle="white";const we=(Ge,ve)=>{const Se=Ge.toUpperCase().split(" "),De=[];let tt=Se[0];for(let Gt=1;Gt<Se.length;Gt++){const It=Se[Gt];oe.measureText(tt+" "+It).width<ve?tt+=" "+It:(De.push(tt),tt=It)}return De.push(tt),De};s&&(oe.font=`${c}px Impact`,we(s,Ei-20).forEach((ve,Se)=>{const De=c+Se*c*1.2;oe.strokeText(ve,Ei/2,De),oe.fillText(ve,Ei/2,De)})),o&&(oe.font=`${u}px Impact`,we(o,Ei-20).reverse().forEach((ve,Se)=>{const De=Ei-u*1.2*(Se+1);oe.strokeText(ve,Ei/2,De),oe.fillText(ve,Ei/2,De)}))})(re),await Promise.all(C.map(oe=>new Promise(we=>{const Ge=new window.Image;Ge.src=oe.src,Ge.onload=()=>{re.save(),re.translate(oe.x,oe.y),re.rotate(oe.rotation*Math.PI/180),re.scale(oe.scale,oe.scale),re.drawImage(Ge,-40,-40,80,80),re.restore(),we()},Ge.onerror=()=>we()})));try{h&&K(Z),p&&T(Z),y&&I(Z)}catch(oe){console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead.",oe),f(!1),g(!1),w(!1)}},K=Z=>{const re=Z.getContext("2d");if(!re)return;const ae=re.getImageData(0,0,Z.width,Z.height),oe=ae.data;for(let we=0;we<oe.length;we+=4){const Ge=oe[we],ve=oe[we+1],Se=oe[we+2],De=(Ge+ve+Se)/3,tt=1.8;oe[we]=Math.min(255,De+(Ge-De)*tt),oe[we+1]=Math.min(255,De+(ve-De)*tt*.7),oe[we+2]=Math.min(255,De+(Se-De)*tt*.4);const Gt=1.3;oe[we]=Math.min(255,Math.max(0,oe[we]*Gt)),oe[we+1]=Math.min(255,Math.max(0,oe[we+1]*Gt)),oe[we+2]=Math.min(255,Math.max(0,oe[we+2]*Gt))}re.putImageData(ae,0,0)},T=Z=>{const re=Z.getContext("2d");if(!re)return;const ae=4,we=re.getImageData(0,0,Z.width,Z.height).data,Ge=new Uint8ClampedArray(we);for(let ve=0;ve<Z.height;ve+=ae)for(let Se=0;Se<Z.width;Se+=ae){const De=(ve*Z.width+Se)*4,tt=we[De],Gt=we[De+1],It=we[De+2],Tt=we[De+3];for(let Dt=0;Dt<ae&&ve+Dt<Z.height;Dt++)for(let vn=0;vn<ae&&Se+vn<Z.width;vn++){const fs=((ve+Dt)*Z.width+(Se+vn))*4;Ge[fs]=tt,Ge[fs+1]=Gt,Ge[fs+2]=It,Ge[fs+3]=Tt}}re.putImageData(new ImageData(Ge,Z.width,Z.height),0,0)},I=Z=>{const re=Z.getContext("2d");if(!re)return;const ae=re.getImageData(0,0,Z.width,Z.height),oe=ae.data;for(let we=0;we<oe.length;we+=4){const Ge=(Math.random()-.5)*50;oe[we]=Math.max(0,Math.min(255,oe[we]+Ge)),oe[we+1]=Math.max(0,Math.min(255,oe[we+1]+Ge)),oe[we+2]=Math.max(0,Math.min(255,oe[we+2]+Ge))}re.putImageData(ae,0,0)};k.useEffect(()=>{e.current&&H(e.current)},[H]);const L=Z=>{var ae;const re=(ae=Z.target.files)==null?void 0:ae[0];re&&r(URL.createObjectURL(re))},U=()=>{r(null),i(""),a(""),l(36),d(36),f(!1),g(!1),w(!1)},$=async()=>{const Z=e.current;if(!Z)return;await H(Z);const re=document.createElement("a");re.download="meme.png",re.href=Z.toDataURL("image/png"),document.body.appendChild(re),re.click(),document.body.removeChild(re)},M=async Z=>{x(!0),b(!1);try{console.log("Fetching NFTs for collection:",Z);let re;if(Z.api==="opensea"){console.log("Using OpenSea API for:",Z.slug);const ae=await vR(Z.slug,50);re=ae.data,console.log("OpenSea response:",ae)}else if(Z.api==="opensea-solana"){console.log("Using OpenSea Solana API for:",Z.slug);const ae=await x7(Z.slug,50);re=ae.data,console.log("OpenSea Solana response:",ae)}else{console.log("Using Scatter API for:",Z.slug);const ae=await bR(Z.slug,1,50);re=ae.data,console.log("Scatter response:",ae)}if(re&&re.length>0){const ae=re[Math.floor(Math.random()*re.length)],oe=ae.image||ae.image_url||ae.image_url_shrunk;console.log("Selected NFT:",ae),console.log("Image URL:",oe),r(oe)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(re){console.error("Error fetching NFTs:",re),alert("Failed to fetch NFT images. Check console for details.")}finally{x(!1)}},q=Z=>{const re={id:YNe(),src:Z,x:80,y:80,scale:1,rotation:0};S(ae=>ae.length>=2||ae.some(oe=>oe.src===Z&&!oe.id.startsWith("upload-"))?ae:[...ae,re]),j(re.id)},ee=Z=>{var ae;const re=(ae=Z.target.files)==null?void 0:ae[0];if(re){const oe=URL.createObjectURL(re);q(oe)}},ce=(Z,re,ae)=>{S(oe=>oe.map(we=>{if(we.id!==Z)return we;let Ge=we.x+re/1.2,ve=we.y+ae/1.2;const Se=40*we.scale,De=40*we.scale;return Ge=Math.max(Se,Math.min(Ei-Se,Ge)),ve=Math.max(De,Math.min(Ei-De,ve)),{...we,x:Ge,y:ve}}))},se=(Z,re,ae,oe,we)=>{S(Ge=>Ge.map(ve=>{if(ve.id!==Z)return ve;const Se=ve.x,De=ve.y,tt=Math.atan2(we-De,oe-Se)*180/Math.PI;return{...ve,rotation:ae+(tt-re)*.5}}))},le=Z=>{S(re=>re.filter(ae=>ae.id!==Z))},me=(Z,re)=>{S(ae=>ae.map(oe=>oe.id===Z?{...oe,scale:Math.max(.2,oe.scale*(1+(re-1)*.2))}:oe))};return m.jsxs("div",{className:t.container,children:[m.jsxs("div",{className:t.header,children:[m.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),m.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",m.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),m.jsxs("div",{className:t.content,children:[m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Collections"}),m.jsxs("div",{className:t.row,children:[m.jsxs("div",{className:t.dropdown,children:[m.jsx("button",{className:t.button,onClick:()=>b(Z=>!Z),children:"Collections"}),v&&m.jsx("div",{className:t.dropdownContent,children:ZNe.map(Z=>m.jsx("div",{className:t.dropdownItem,onClick:()=>{M(Z)},children:Z.name},Z.id))})]}),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:L})]}),_&&m.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Text"}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Top Text:"}),m.jsx("input",{className:t.input,type:"text",value:s,onChange:Z=>i(Z.target.value),placeholder:"Enter top text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:Z=>l(Number(Z.target.value)),style:{width:60,textAlign:"center"}})]}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Bottom Text:"}),m.jsx("input",{className:t.input,type:"text",value:o,onChange:Z=>a(Z.target.value),placeholder:"Enter bottom text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:Z=>d(Number(Z.target.value)),style:{width:60,textAlign:"center"}})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Effects"}),m.jsxs("div",{className:t.row,children:[m.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(Z=>!Z),children:"Deep Fry"}),m.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(Z=>!Z),children:"Pixelate"}),m.jsx("button",{className:t.effectButton,style:{background:y?"#00ffff":void 0},onClick:()=>w(Z=>!Z),children:"Grain"})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Stickers"}),m.jsxs("div",{className:t.row,children:[XNe.map((Z,re)=>m.jsx("img",{src:Z,alt:`sticker${re+1}`,style:{width:32,height:32,cursor:"pointer",border:"1px solid #888",marginRight:4},onClick:()=>q(Z)},Z)),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Sticker",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:P,onChange:ee})]})]})]}),m.jsxs("div",{className:t.actions,children:[m.jsx("button",{className:t.button,onClick:$,children:"Save Image"}),m.jsx("button",{className:t.button,onClick:U,children:"Restart"})]})]}),m.jsx("div",{className:t.memeArea,children:m.jsx("canvas",{ref:e,width:Ei,height:Ei,className:t.canvas})}),m.jsx("div",{style:{position:"absolute",left:0,top:0,width:Ei,height:Ei,pointerEvents:"none"},children:C.map(Z=>R===Z.id?m.jsxs("div",{style:{position:"absolute",left:Z.x,top:Z.y,width:80*Z.scale,height:80*Z.scale,transform:`rotate(${Z.rotation}deg)`,cursor:"move",pointerEvents:"auto",zIndex:10,border:"2px solid #00f",boxShadow:"0 0 8px #00f"},onMouseDown:re=>{A(Z.id),re.stopPropagation()},onMouseUp:()=>A(null),onMouseMove:re=>{N===Z.id&&re.buttons===1&&ce(Z.id,re.movementX,re.movementY)},children:[m.jsx("img",{src:Z.src,alt:"sticker",style:{width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},draggable:!1}),m.jsx("div",{style:{position:"absolute",right:-12,top:"40%",width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"grab",zIndex:11},onMouseDown:re=>{var tt;re.stopPropagation();const ae=(tt=re.currentTarget.parentElement)==null?void 0:tt.getBoundingClientRect(),oe=ae?ae.left+ae.width/2:0,we=ae?ae.top+ae.height/2:0,Ge=Math.atan2(re.clientY-we,re.clientX-oe)*180/Math.PI,ve=Z.rotation,Se=Gt=>{se(Z.id,Ge,ve,Gt.clientX,Gt.clientY)},De=()=>{window.removeEventListener("mousemove",Se),window.removeEventListener("mouseup",De)};window.addEventListener("mousemove",Se),window.addEventListener("mouseup",De)}}),m.jsx("div",{style:{position:"absolute",bottom:-12,right:-12,width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"nwse-resize",zIndex:11},onMouseDown:re=>{re.stopPropagation();const ae=re.clientX,oe=Ge=>{const ve=(Ge.clientX-ae)/80;me(Z.id,1+ve)},we=()=>{window.removeEventListener("mousemove",oe),window.removeEventListener("mouseup",we)};window.addEventListener("mousemove",oe),window.addEventListener("mouseup",we)}}),m.jsx("button",{style:{position:"absolute",top:-12,left:-12,width:16,height:16,background:"#f00",color:"#fff",border:"none",borderRadius:"50%",fontSize:10,cursor:"pointer",zIndex:12},onClick:()=>le(Z.id),children:"×"}),m.jsx("button",{style:{position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:40,height:18,background:"#0f0",color:"#000",border:"1px solid #888",borderRadius:4,fontSize:8,cursor:"pointer",zIndex:12},onClick:()=>j(null),children:"Place"})]},Z.id):null)})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kb(){return Kb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kb.apply(this,arguments)}var Xu;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Xu||(Xu={}));const V6="popstate";function ePe(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return jP("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:rW(s)}return nPe(e,n,null,t)}function dr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function nW(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function tPe(){return Math.random().toString(36).substr(2,8)}function K6(t,e){return{usr:t.state,key:t.key,idx:e}}function jP(t,e,n,r){return n===void 0&&(n=null),Kb({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?$y(e):e,{state:n,key:e&&e.key||r||tPe()})}function rW(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function $y(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function nPe(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Xu.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(Kb({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Xu.Pop;let y=u(),w=y==null?null:y-l;l=y,c&&c({action:a,location:g.location,delta:w})}function h(y,w){a=Xu.Push;let v=jP(g.location,y,w);l=u()+1;let b=K6(v,l),_=g.createHref(v);try{o.pushState(b,"",_)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;s.location.assign(_)}i&&c&&c({action:a,location:g.location,delta:1})}function f(y,w){a=Xu.Replace;let v=jP(g.location,y,w);l=u();let b=K6(v,l),_=g.createHref(v);o.replaceState(b,"",_),i&&c&&c({action:a,location:g.location,delta:0})}function p(y){let w=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof y=="string"?y:rW(y);return v=v.replace(/ $/,"%20"),dr(w,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,w)}let g={get action(){return a},get location(){return t(s,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(V6,d),c=y,()=>{s.removeEventListener(V6,d),c=null}},createHref(y){return e(s,y)},createURL:p,encodeLocation(y){let w=p(y);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:h,replace:f,go(y){return o.go(y)}};return g}var Q6;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Q6||(Q6={}));function rPe(t,e,n){return n===void 0&&(n="/"),sPe(t,e,n)}function sPe(t,e,n,r){let s=typeof e=="string"?$y(e):e,i=oW(s.pathname||"/",n);if(i==null)return null;let o=sW(t);iPe(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=yPe(i);a=pPe(o[c],l)}return a}function sW(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(dr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=yf([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(dr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),sW(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:hPe(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of iW(i.path))s(i,o,c)}),e}function iW(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=iW(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function iPe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:fPe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const oPe=/^:[\w-]+$/,aPe=3,cPe=2,lPe=1,uPe=10,dPe=-2,Y6=t=>t==="*";function hPe(t,e){let n=t.split("/"),r=n.length;return n.some(Y6)&&(r+=dPe),e&&(r+=cPe),n.filter(s=>!Y6(s)).reduce((s,i)=>s+(oPe.test(i)?aPe:i===""?lPe:uPe),r)}function fPe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function pPe(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=gPe({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:yf([i,d.pathname]),pathnameBase:_Pe(yf([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=yf([i,d.pathnameBase]))}return o}function gPe(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=mPe(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function mPe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),nW(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function yPe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nW(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function oW(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function wPe(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?$y(t):t;return{pathname:n?n.startsWith("/")?n:bPe(n,e):e,search:CPe(r),hash:APe(s)}}function bPe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function uI(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vPe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function EPe(t,e){let n=vPe(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function xPe(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=$y(t):(s=Kb({},t),dr(!s.pathname||!s.pathname.includes("?"),uI("?","pathname","search",s)),dr(!s.pathname||!s.pathname.includes("#"),uI("#","pathname","hash",s)),dr(!s.search||!s.search.includes("#"),uI("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=wPe(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const yf=t=>t.join("/").replace(/\/\/+/g,"/"),_Pe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),CPe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,APe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function SPe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const aW=["post","put","patch","delete"];new Set(aW);const IPe=["get",...aW];new Set(IPe);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qb(){return Qb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qb.apply(this,arguments)}const l3=k.createContext(null),TPe=k.createContext(null),yA=k.createContext(null),wA=k.createContext(null),Uy=k.createContext({outlet:null,matches:[],isDataRoute:!1}),cW=k.createContext(null);function bA(){return k.useContext(wA)!=null}function lW(){return bA()||dr(!1),k.useContext(wA).location}function uW(t){k.useContext(yA).static||k.useLayoutEffect(t)}function NPe(){let{isDataRoute:t}=k.useContext(Uy);return t?zPe():PPe()}function PPe(){bA()||dr(!1);let t=k.useContext(l3),{basename:e,future:n,navigator:r}=k.useContext(yA),{matches:s}=k.useContext(Uy),{pathname:i}=lW(),o=JSON.stringify(EPe(s,n.v7_relativeSplatPath)),a=k.useRef(!1);return uW(()=>{a.current=!0}),k.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=xPe(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:yf([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function kPe(t,e){return OPe(t,e)}function OPe(t,e,n,r){bA()||dr(!1);let{navigator:s}=k.useContext(yA),{matches:i}=k.useContext(Uy),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=lW(),u;if(e){var d;let y=typeof e=="string"?$y(e):e;c==="/"||(d=y.pathname)!=null&&d.startsWith(c)||dr(!1),u=y}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let y=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=rPe(t,{pathname:f}),g=BPe(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:yf([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:yf([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return e&&g?k.createElement(wA.Provider,{value:{location:Qb({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Xu.Pop}},g):g}function RPe(){let t=FPe(),e=SPe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:s},n):null,null)}const DPe=k.createElement(RPe,null);class $Pe extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(Uy.Provider,{value:this.props.routeContext},k.createElement(cW.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function UPe(t){let{routeContext:e,match:n,children:r}=t,s=k.useContext(l3);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(Uy.Provider,{value:e},r)}function BPe(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||dr(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,y=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||DPe,c&&(l<0&&h===0?(HPe("route-fallback"),p=!0,y=null):l===h&&(p=!0,y=d.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,h+1)),v=()=>{let b;return f?b=g:p?b=y:d.route.Component?b=k.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,k.createElement(UPe,{match:d,routeContext:{outlet:u,matches:w,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?k.createElement($Pe,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:v(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):v()},null)}var dW=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(dW||{}),hW=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(hW||{});function LPe(t){let e=k.useContext(l3);return e||dr(!1),e}function MPe(t){let e=k.useContext(TPe);return e||dr(!1),e}function jPe(t){let e=k.useContext(Uy);return e||dr(!1),e}function fW(t){let e=jPe(),n=e.matches[e.matches.length-1];return n.route.id||dr(!1),n.route.id}function FPe(){var t;let e=k.useContext(cW),n=MPe(),r=fW();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function zPe(){let{router:t}=LPe(dW.UseNavigateStable),e=fW(hW.UseNavigateStable),n=k.useRef(!1);return uW(()=>{n.current=!0}),k.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Qb({fromRouteId:e},i)))},[t,e])}const J6={};function HPe(t,e,n){J6[t]||(J6[t]=!0)}function GPe(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function ux(t){dr(!1)}function WPe(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Xu.Pop,navigator:i,static:o=!1,future:a}=t;bA()&&dr(!1);let c=e.replace(/^\/*/,"/"),l=k.useMemo(()=>({basename:c,navigator:i,static:o,future:Qb({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=$y(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=k.useMemo(()=>{let y=oW(u,c);return y==null?null:{location:{pathname:y,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:k.createElement(yA.Provider,{value:l},k.createElement(wA.Provider,{children:n,value:g}))}function qPe(t){let{children:e,location:n}=t;return kPe(FP(e),n)}new Promise(()=>{});function FP(t,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(t,(r,s)=>{if(!k.isValidElement(r))return;let i=[...e,s];if(r.type===k.Fragment){n.push.apply(n,FP(r.props.children,i));return}r.type!==ux&&dr(!1),!r.props.index||!r.props.children||dr(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=FP(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const VPe="6";try{window.__reactRouterVersion=VPe}catch{}const KPe="startTransition",Z6=hK[KPe];function QPe(t){let{basename:e,children:n,future:r,window:s}=t,i=k.useRef();i.current==null&&(i.current=ePe({window:s,v5Compat:!0}));let o=i.current,[a,c]=k.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=k.useCallback(d=>{l&&Z6?Z6(()=>c(d)):c(d)},[c,l]);return k.useLayoutEffect(()=>o.listen(u),[o,u]),k.useEffect(()=>GPe(r),[r]),k.createElement(WPe,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var X6;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(X6||(X6={}));var e4;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(e4||(e4={}));const YPe=ma({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function JPe(){const t=YPe(),{open:e}=mA(),{address:n,isConnected:r}=Uv(),{isPending:s}=f9(),{disconnect:i}=p9(),{data:o}=g9({address:n}),[a,c]=k.useState("pixelawbs-popup"),[l,u]=k.useState(new Set),[d,h]=k.useState(!1),[f,p]=k.useState(!1),[g,y]=k.useState(!1),[w,v]=k.useState(!1),b=NPe(),_=k.useRef(null);k.useEffect(()=>{if(a==="halloween-popup"&&_.current){const I=_.current.querySelector("script[data-tiktok-embed]");I&&I.remove();const L=document.createElement("script");L.src="https://www.tiktok.com/embed.js",L.async=!0,L.setAttribute("data-tiktok-embed","true"),_.current.appendChild(L)}},[a]);const x=(I,L,U)=>{if(I==="url"&&U)window.open(U,"_blank");else if(I==="popup"&&L)c(L),u($=>{const M=new Set($);return M.delete(L),M}),document.body.offsetWidth;else if(I==="wallet")r?i():e();else if(I==="mint"){if(!n){alert("Please connect your wallet first!");return}h(!0)}else I==="nft-gallery"?p(!0):I==="meme-generator"?y(!0):I==="chess"&&(r?(v(!0),setTimeout(()=>{v(!1),b("/chess")},1500)):e().then(()=>{const $=()=>{window.ethereum&&window.ethereum.selectedAddress?(v(!0),setTimeout(()=>{v(!1),b("/chess")},1500)):setTimeout($,200)};$()}))},C=()=>c(null),S=I=>{u(L=>new Set(L).add(I)),c(null)},N=I=>{I==="mint-popup"?h(!0):I==="nft-gallery-popup"?p(!0):I==="meme-generator-popup"?y(!0):c(I),u(L=>{const U=new Set(L);return U.delete(I),U})},A=()=>h(!1),P=()=>p(!1),R=()=>y(!1),j=()=>{h(!1),u(I=>new Set(I).add("mint-popup"))},H=()=>{p(!1),u(I=>new Set(I).add("nft-gallery-popup"))},K=()=>{y(!1),u(I=>new Set(I).add("meme-generator-popup"))},T=m.jsxs("div",{onClick:()=>{r?i():e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:r?"limegreen":"red",fontWeight:"bold"},children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?"Connecting...":r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return m.jsxs("div",{className:t.body,children:[w&&m.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[m.jsx("img",{src:"/images/blueknight.png",alt:"Booting Chess...",style:{width:120,height:120,marginBottom:32}}),m.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),m.jsx(qle,{onIconClick:x}),m.jsx(Kle,{minimizedWindows:Array.from(l),onRestoreWindow:N,walletButton:T,connectionStatus:{connected:r,address:n,ens:o||void 0}}),m.jsxs(to,{id:"chat-popup",isOpen:a==="chat-popup",onClose:C,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",m.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),m.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(to,{id:"purity-popup",isOpen:a==="purity-popup",onClose:C,onMinimize:S,children:[m.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),m.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),m.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),m.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(to,{id:"lawbstarz-popup",isOpen:a==="lawbstarz-popup",onClose:C,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsxs("blockquote",{className:"twitter-tweet","data-media-max-width":"560",children:[m.jsxs("p",{lang:"en",dir:"ltr",children:["The following 🧵 has been transcripted from a live news broadcast:",m.jsx("br",{}),m.jsx("br",{}),"Anchor: “Good evening, viewers. Tonight, we embark on an extraordinary journey that defies rational explanation. It all began with February's Cigawrette Packs cargo ship hijacking, little did we know that the.. ",m.jsx("a",{href:"https://t.co/BWgLOk59N4",children:"pic.twitter.com/BWgLOk59N4"})]}),"— wables (@wables411) ",m.jsx("a",{href:"https://twitter.com/wables411/status/1669009492007354369?ref_src=twsrc%5Etfw",children:"June 14, 2023"})]}),m.jsx("script",{async:!0,src:"https://platform.twitter.com/widgets.js"}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(to,{id:"lawbstation-popup",isOpen:a==="lawbstation-popup",onClose:C,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(to,{id:"nexus-popup",isOpen:a==="nexus-popup",onClose:C,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsxs(to,{id:"lawbsters-popup",isOpen:a==="lawbsters-popup",onClose:C,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx(hoe,{id:"1620879129850834944"})}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsx(to,{id:"pixelawbs-popup",isOpen:a==="pixelawbs-popup",onClose:C,onMinimize:S,children:(()=>{const I=L=>{L.preventDefault(),c(null),h(!0)};return m.jsxs(m.Fragment,{children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:I,children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),m.jsxs(to,{id:"halloween-popup",isOpen:a==="halloween-popup",onClose:C,onMinimize:S,children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),m.jsx("div",{ref:_,style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:m.jsxs("section",{children:[m.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore 🦞🎃 minting rn on @ourzora via @PC69 ",m.jsx("a",{target:"_blank",rel:"noreferrer",title:"♬ original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:"♬ original sound - wables.eth"})]})})})]}),m.jsxs(to,{id:"lawb-popup",isOpen:a==="lawb-popup",onClose:C,onMinimize:S,children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"🦞 $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),m.jsx(Jle,{isOpen:d,onClose:A,onMinimize:j,walletAddress:n||""}),m.jsx(GNe,{isOpen:f,onClose:P,onMinimize:H,walletAddress:n}),m.jsx(to,{id:"meme-generator-popup",isOpen:g,onClose:R,onMinimize:K,children:m.jsx(tW,{})})]})}const ZPe=ma({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),t4=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],XPe=({onBack:t,walletAddress:e})=>{const n=ZPe(),{open:r}=mA(),[s,i]=k.useState([]),[o,a]=k.useState(!0),[c,l]=k.useState(null),[u,d]=k.useState(t4[0]),[h,f]=k.useState(!1),[p,g]=k.useState(null),[y,w]=k.useState("all"),[v,b]=k.useState(null),_=k.useCallback(async()=>{var N,A;try{if((N=window.solana)!=null&&N.isPhantom){const P=await window.solana.connect();g(P.publicKey.toString());return}if((A=window.solflare)!=null&&A.isSolflare){const P=await window.solflare.connect();g(P.publicKey.toString());return}r()}catch(P){console.error("Failed to connect Solana wallet:",P),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);k.useEffect(()=>{var N,A;(N=window.solana)!=null&&N.publicKey?g(window.solana.publicKey.toString()):(A=window.solflare)!=null&&A.publicKey&&g(window.solflare.publicKey.toString())},[]),k.useEffect(()=>{(async()=>{a(!0);try{let A,P=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}P=p,A=await Qle(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",A.data.length)}else u.api==="opensea"?A=await vR(u.slug,100,P):A=await bR(u.slug,1,100,P);y==="owned"&&p&&(console.log("Filtering for owner:",p),A.data.some(j=>j.owners&&j.owners.length>0)?A.data=A.data.filter(j=>j.owners.some(K=>K.owner_of&&K.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),b("Owner data not available for this Solana collection. Showing all NFTs."))),i(A.data)}catch(A){console.error(A)}finally{a(!1)}})()},[e,u,p,y]),k.useEffect(()=>{h&&_()},[h,_]);const x=async N=>{if(a(!0),u.api==="opensea"&&u.chain)try{const A=await E7(u.chain,N.address,N.token_id.toString()),P={...N,attributes:JSON.stringify(A.traits||[])};l(P)}catch(A){console.error("Failed to fetch full NFT details",A),l(N)}else l(N);a(!1)},C=()=>{if(!c)return null;let N=[];try{N=JSON.parse(c.attributes||"[]")}catch(A){console.error("Failed to parse NFT attributes:",A)}return m.jsxs("div",{className:n.detailView,children:[m.jsx("img",{src:c.image,alt:c.name}),m.jsx("h2",{children:c.name}),m.jsx("h4",{children:"Traits:"}),m.jsx("ul",{children:N.map((A,P)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[A.trait_type,":"]})," ",A.value]},P))})]})},S=()=>m.jsxs(m.Fragment,{children:[m.jsx("div",{className:n.collectionSelector,children:t4.map(N=>m.jsx("button",{className:`${n.collectionButton} ${u.slug===N.slug?"active":""}`,onClick:()=>d(N),children:N.name},N.slug))}),m.jsxs("div",{className:n.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>w("all"),style:{background:y==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:y==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>w("owned"),disabled:!e&&!p,style:{background:y==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:y==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{_()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),v&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:v}),u.api==="opensea-solana"&&!p&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?m.jsx("div",{className:n.loading,children:"Loading NFTs..."}):m.jsx("div",{className:n.grid,children:s.map(N=>{let A=N.image||N.image_url||N.image_url_shrunk||"/assets/pixelawb.png";return m.jsxs("div",{className:n.gridItem,onClick:()=>void x(N),children:[m.jsx("img",{src:A,alt:N.name,onError:P=>{P.currentTarget.src!==N.image_url&&N.image_url?P.currentTarget.src=N.image_url:P.currentTarget.src!==N.image_url_shrunk&&N.image_url_shrunk?P.currentTarget.src=N.image_url_shrunk:P.currentTarget.src="/assets/pixelawb.png"}}),m.jsx("span",{children:N.name})]},N.id)})})]})]});return m.jsxs("div",{className:n.galleryContainer,children:[m.jsxs("header",{className:n.header,children:[m.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),m.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),m.jsx("div",{className:n.content,children:o?m.jsx("p",{className:n.loading,children:"Loading..."}):c?C():S()})]})},eke=ma({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),Do=({isOpen:t,onClose:e,title:n,children:r})=>{const s=eke();return t?m.jsx("div",{className:s.overlay,children:m.jsxs("div",{className:s.popup,children:[m.jsxs("div",{className:s.titleBar,children:[m.jsx("span",{children:n}),m.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:"✕"})]}),m.jsx("div",{className:s.content,children:r})]})}):null},tke=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=k.useState([]),[i,o]=k.useState(!1),[a,c]=k.useState(!1),[l,u]=k.useState({}),[d,h]=k.useState(null),{data:f}=m9();k.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const _=await b7(n);s(_);const x={};_.forEach(C=>{x[C.id]=0}),u(x)}catch(_){h(_.message)}finally{o(!1)}},g=(_,x)=>{u(C=>({...C,[_]:Math.max(0,x)}))},y=async()=>{const _=Object.entries(l).filter(([,x])=>x>0).map(([x,C])=>({id:x,quantity:C}));if(_.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const x=await v7(n,_);if(x.success&&x.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const C=await f.sendTransaction({to:x.mintTransaction.to,value:BigInt(x.mintTransaction.value),data:x.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${C}`),e()}catch(C){h("Transaction failed: "+C.message)}}else throw new Error(x.message||"Could not retrieve minting transaction.")}catch(x){h("Minting failed: "+x.message)}finally{c(!1)}},w=(_,x)=>`${parseFloat(_)} ${x}`,v={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},b={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return m.jsxs(Do,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&m.jsx("div",{style:b,children:d}),i?m.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(_=>m.jsxs("div",{style:v,children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:_.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",w(_.token_price,_.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",_.wallet_limit===4294967295?"Unlimited":_.wallet_limit," per wallet"]}),m.jsx("input",{type:"number",min:0,max:_.wallet_limit===4294967295?void 0:_.wallet_limit,value:l[_.id]||"",onChange:x=>g(_.id,parseInt(x.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),m.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},_.id))]}),m.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:y,disabled:a,children:a?"Minting...":"Mint"})]})]})},nke=ma({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),rke=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],ske=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],ike=()=>{const t=nke(),{open:e}=mA(),{address:n,isConnected:r}=Uv(),{isPending:s}=f9(),{disconnect:i}=p9(),{data:o}=g9({address:n}),[a,c]=k.useState("main"),[l,u]=k.useState(!1),[d,h]=k.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=k.useState(!1),[g,y]=k.useState(!1),[w,v]=k.useState(!1),[b,_]=k.useState(!1),[x,C]=k.useState(!1),[S,N]=k.useState(!1),[A,P]=k.useState(!1),[R,j]=k.useState(!1),[H,K]=k.useState(!1),[T,I]=k.useState(!1),[L,U]=k.useState(!1),[$,M]=k.useState(!1),q=[{label:"Mint",icon:"/assets/mint.gif",action:()=>y(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>v(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>_(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>C(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],ee=le=>{le.disabled||le.action()};if(k.useEffect(()=>{const le=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(le)},[]),k.useEffect(()=>{u(!0)},[]),a==="gallery")return m.jsx(XPe,{onBack:()=>c("main"),walletAddress:n||void 0});function ce({open:le,onClose:me,title:Z,nfts:re}){const ae=oe=>{switch(oe){case"lawbsters":N(!0);break;case"lawbstarz":P(!0);break;case"pixelawbs":j(!0);break;case"halloween":K(!0);break;case"lawbstation":I(!0);break;case"nexus":U(!0);break}};return m.jsx(Do,{isOpen:le,onClose:me,title:Z,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:re.map(oe=>m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>ae(oe.id),children:[m.jsx("img",{src:oe.image,alt:oe.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),m.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:oe.name}),m.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:oe.description})]},oe.id))})})}function se({open:le,onClose:me}){return le?m.jsxs(Do,{isOpen:le,onClose:me,title:"$LAWB",children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"🦞 $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return m.jsxs("div",{className:t.mobileContainer,children:[m.jsx("header",{className:t.header,children:m.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),m.jsx("div",{className:t.iconGrid,children:q.map(le=>m.jsxs("div",{className:t.icon,onClick:()=>ee(le),children:[m.jsx("img",{src:le.icon,alt:le.label}),m.jsx("span",{children:le.label})]},le.label))}),l&&m.jsxs(Do,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),y(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&m.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:m.jsxs("div",{className:t.menuModal,onClick:le=>le.stopPropagation(),children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),m.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),M(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),m.jsx(tke,{isOpen:g,onClose:()=>y(!1),walletAddress:n||""}),m.jsx(ce,{open:w,onClose:()=>v(!1),title:"EVM NFT'S FOLDER",nfts:rke}),m.jsx(ce,{open:b,onClose:()=>_(!1),title:"SOL NFTS FOLDER",nfts:ske}),m.jsx(se,{open:x,onClose:()=>C(!1)}),m.jsxs(Do,{isOpen:S,onClose:()=>N(!1),title:"Lawbsters",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(Do,{isOpen:A,onClose:()=>P(!1),title:"Lawbstarz",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Do,{isOpen:R,onClose:()=>j(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{j(!1),y(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),m.jsxs(Do,{isOpen:H,onClose:()=>K(!1),title:"A Lawbster Halloween",children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),m.jsxs(Do,{isOpen:T,onClose:()=>I(!1),title:"Lawbstation",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(Do,{isOpen:L,onClose:()=>U(!1),title:"Nexus",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsx(Do,{isOpen:$,onClose:()=>M(!1),title:"Meme Generator",children:m.jsx(tW,{})}),m.jsxs("div",{className:t.taskbar,children:[m.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),m.jsxs("div",{className:t.walletStatus,children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),m.jsx("span",{className:t.clock,children:d})]})]})};function oke(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=k.useState(e(t));function s(){r(e(t))}return k.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}function ake(t){let e=[],n,r;function s(a){return Eb.parseEvmChainId(a)||1}function i(){var a;return n||(n=gf.getInstance({projectId:t.options.projectId,chainId:(a=B.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?Zn.open(Pn.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?Zn.open(Pn.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&Zn.open(Pn.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:Pn.EmbeddedWalletAbortController})),n}async function o(a={}){var g,y;const c=i();let l=a.chainId;if(a.isReconnecting){const w=Eb.parseEvmChainId(c.getLastUsedChainId()||""),v=(g=t.chains)==null?void 0:g[0].id;if(l=w||v,!l)throw new Error("ChainId not found in provider")}const u=(y=Ie.state.preferredAccountTypes)==null?void 0:y.eip155,{address:d,chainId:h,accounts:f}=await c.connect({chainId:l,preferredAccountType:u,socialUri:a.socialUri});e=(f==null?void 0:f.map(w=>w.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:ue.CONNECTOR_ID.AUTH,name:ue.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:ue.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=gf.getInstance({projectId:t.options.projectId,chainId:(c=B.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:Pn.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?Zn.open(Pn.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?Zn.open(Pn.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&Zn.open(Pn.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=B.state.activeChain===ue.CHAIN.EVM;if(ue.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>Pe.getConnectorId(h)===ue.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l,u;try{const d=a.chains.find(g=>g.id===c);if(!d)throw new cc(new Error("chain not found on connector."));const h=await this.getProvider(),f=(l=Ie.state.preferredAccountTypes)==null?void 0:l.eip155,p=await h.connect({chainId:c,preferredAccountType:f});return e=((u=p==null?void 0:p.accounts)==null?void 0:u.map(g=>g.address))||[p.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),d}catch(d){throw d instanceof Error?new cc(d):d}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Ku)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}u3.type="walletConnect";function u3(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:u3.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=B.getCaipNetworks(),y=await this.getProvider();if(!y)throw new iu;a||(a=this.onDisplayUri,y.on("display_uri",a));const w=await this.isChainsStale();y.session&&w&&await y.disconnect();const v=ge.state.universalProviderConfigOverride;if(!y.session||w){const A=Cw.createNamespaces(g,v);await y.connect({optionalNamespaces:A,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(P=>Number(P.id)))}const b=await this.getAccounts(),_=await this.getChainId(),x=(p=(f=(h=y.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,C=x==null?void 0:x.some(A=>Number(A.split(":")[1])===_);let S=1;C?S=_:x!=null&&x[0]&&(S=Number(x[0].split(":")[1])),a&&(y.removeListener("display_uri",a),a=void 0),o&&(y.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),y.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),y.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),y.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),y.on("session_delete",c));const N=v==null?void 0:v.defaultChain;return y.setDefaultChain(N??`eip155:${S}`),{accounts:b,chainId:S}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new ir(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var p,g,y;const d=await this.getProvider();if(!((p=d==null?void 0:d.session)!=null&&p.namespaces))return[];const h=(y=(g=d==null?void 0:d.session)==null?void 0:g.namespaces[ue.CHAIN.EVM])==null?void 0:y.accounts;return(h==null?void 0:h.map(w=>w.split(":")[2]))??[]},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=Te.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const y=Te.getStoredActiveCaipNetworkId(),w=e.getCaipNetworks(h),v=w==null?void 0:w.find(b=>b.id===y);v&&v.chainNamespace===ue.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(v.id)}))}return r},async getChainId(){var g,y,w,v;const d=(g=e.getCaipNetwork(ue.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(v=(w=(y=(await this.getProvider()).session)==null?void 0:y.namespaces[ue.CHAIN.EVM])==null?void 0:w.chains)==null?void 0:v[0],p=B.getCaipNetworks().find(b=>b.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,y,w,v;const f=await this.getProvider();if(!f)throw new iu;const p=B.getCaipNetworks().find(b=>b.id===h);if(!p)throw new cc(new pb);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:st(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const b=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...b,h]),{...p,id:p.id}}catch(b){const _=b;if(/(?:user rejected)/iu.test(_.message))throw new ir(_);try{let x;d!=null&&d.blockExplorerUrls?x=d.blockExplorerUrls:x=(g=p.blockExplorers)!=null&&g.default.url?[(y=p.blockExplorers)==null?void 0:y.default.url]:[];const C=((v=(w=p.rpcUrls)==null?void 0:w.chainDefault)==null?void 0:v.http)||[],S={blockExplorerUrls:x,chainId:st(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:C};await f.request({method:"wallet_addEthereumChain",params:[S]});const N=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...N,h]),{...p,id:p.id}}catch(x){throw new ir(x)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>Ku(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(B.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[ue.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(y=>Number.parseInt(y.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const C0=bn({pendingTransactions:0}),n4={state:C0,subscribeKey(t,e){return Gr(C0,t,e)},increase(t){C0[t]+=1},decrease(t){C0[t]-=1},reset(t){C0[t]=0}};function cke(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function lke(t){if(We.isSafeApp()){const{safe:e}=await Gn(async()=>{const{safe:n}=await import("./index-ZtoFZkKY.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function uke(t){try{const{coinbaseWallet:e}=await Gn(async()=>{const{coinbaseWallet:n}=await import("./index-ZtoFZkKY.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const dke={enable:!1,pollingInterval:3e4};class hke extends eW{constructor(e){const n=Ya.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=ue.CHAIN.EVM,this.adapterType=ue.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...dke,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===ue.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>We.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=Ng(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>We.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=Ng(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===ue.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=Ya.getCaipNetworkId(s);i?n[s.id]=Ya.extendWagmiTransports(s,e.projectId,i):n[s.id]=Ya.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=Xte({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=Ote(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),n4.increase("pendingTransactions")}});const e=n4.subscribeKey("pendingTransactions",n=>{var r;n>=ue.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){FF(this.wagmiConfig,{onChange:(e,n)=>{e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"&&(e.address!==(n==null?void 0:n.address)||n.status!=="connected")&&(this.setupWatchPendingTransactions(),this.emit("accountChanged",{address:e.address,chainId:e.chainId}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await uke(this.wagmiConfig.connectors);s&&n.push(s)}const r=await lke(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(u3(e,n)),e.enableInjected!==!1&&r.push(NC({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(ake({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async signMessage(e){try{return{signature:await Tte(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=Ng(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await Ste(this.wagmiConfig,s);const i=await Ite(this.wagmiConfig,s);return await Rte(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(Eb.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await Dte(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await bte(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return zee(e.value,e.decimals)}formatUnits(e){return vy(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(e.id===ue.CONNECTOR_ID.AUTH||e.id===ue.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:Zu.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:Zu.ConnectorNamesMap[e.id]??e.name,imageId:Zu.ConnectorImageIds[e.id],type:Zu.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===ue.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){zF(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=Da(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(We.isSafeApp()&&n===ue.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await VE(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await VE(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await P$(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var u,d,h,f,p;const{id:n,provider:r,type:s,info:i,chainId:o,socialUri:a}=e,c=this.getWagmiConnector(n);if(!c)throw new Error("connectionControllerClient:connectExternal - connector is undefined");if(r&&i&&c.id===ue.CONNECTOR_ID.EIP6963&&((u=c.setEip6963Wallet)==null||u.call(c,{provider:r,info:i})),c.uid===((h=(d=this.wagmiConfig)==null?void 0:d.state)==null?void 0:h.current)){const g=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(c.uid);if(g)return{address:g==null?void 0:g.accounts[0],chainId:g==null?void 0:g.chainId,provider:r,type:s,id:n}}const l=await VE(this.wagmiConfig,{connector:c,chainId:o?Number(o):void 0,socialUri:a});return{address:l.accounts[0],chainId:l.chainId,provider:r,type:s,id:n}}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await ZT(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=Te.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await _te(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});Te.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(){const e=Da(this.wagmiConfig);await Promise.allSettled(e.map(async n=>{const r=this.getWagmiConnector(n.connector.id);r&&await MF(this.wagmiConfig,{connector:r})})),this.wagmiConfig.state.connections.clear()}async switchNetwork(e){var r,s,i,o,a;const{caipNetwork:n}=e;await P$(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:n.name,nativeCurrency:n.nativeCurrency,rpcUrls:[((i=(s=(r=n.rpcUrls)==null?void 0:r.chainDefault)==null?void 0:s.http)==null?void 0:i[0])??""],blockExplorerUrls:[((o=n.blockExplorers)==null?void 0:o.default.url)??""],iconUrls:[((a=n.assets)==null?void 0:a.imageUrl)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=Da(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=cke(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=Da(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=Da(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=Da(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setUniversalProvider(e){e.on("connect",()=>{const n=Da(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(B.state.activeChain==="eip155")return;ZT(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new c3({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"}))}}const pW={id:1992,name:"Sanko Testnet",network:"sanko",nativeCurrency:{decimals:18,name:"tDMT",symbol:"tDMT"},rpcUrls:{public:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]},default:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}},blockExplorers:{default:{name:"SankoScan",url:"https://sanko-scan.caldera.xyz"}}},gW="7c65f27254d6ddd24cf7eedf2685c4fb",fke={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},mW=new hke({networks:[XG,pW],projectId:gW,ssr:!1});zNe({adapters:[mW],networks:[XG,pW],projectId:gW,metadata:fke,features:{analytics:!1}});const pke=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Gn(async()=>{const{default:r}=await Promise.resolve().then(()=>By);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class d3 extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class gke extends d3{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class mke extends d3{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class yke extends d3{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var zP;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(zP||(zP={}));var wke=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class bke{constructor(e,{headers:n={},customFetch:r,region:s=zP.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=pke(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return wke(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:c}=n;c||(c=this.region),c&&c!=="any"&&(a["x-region"]=c);let l;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:l}).catch(p=>{throw new gke(p)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new mke(u);if(!u.ok)throw new yke(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield u.json():h==="application/octet-stream"?f=yield u.blob():h==="text/event-stream"?f=u:h==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(s){return{data:null,error:s}}})}}var ri={},h3={},vA={},e1={},EA={},xA={},vke=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},iy=vke();const Eke=iy.fetch,yW=iy.fetch.bind(iy),wW=iy.Headers,xke=iy.Request,_ke=iy.Response,By=Object.freeze(Object.defineProperty({__proto__:null,Headers:wW,Request:xke,Response:_ke,default:yW,fetch:Eke},Symbol.toStringTag,{value:"Module"})),Cke=tC(By);var _A={};Object.defineProperty(_A,"__esModule",{value:!0});let Ake=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};_A.default=Ake;var bW=Fn&&Fn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xA,"__esModule",{value:!0});const Ske=bW(Cke),Ike=bW(_A);let Tke=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Ske.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,c;let l=null,u=null,d=null,h=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=w:u=JSON.parse(w))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");g&&y&&y.length>1&&(d=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await i.text();try{l=JSON.parse(g),Array.isArray(l)&&i.status===404&&(u=[],l=null,h=200,f="OK")}catch{i.status===404&&g===""?(h=204,f="No Content"):l={message:g}}if(l&&this.isMaybeSingle&&(!((c=l==null?void 0:l.details)===null||c===void 0)&&c.includes("0 rows"))&&(l=null,h=200,f="OK"),l&&this.shouldThrowOnError)throw new Ike.default(l)}return{error:l,data:u,count:d,status:h,statusText:f}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};xA.default=Tke;var Nke=Fn&&Fn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(EA,"__esModule",{value:!0});const Pke=Nke(xA);let kke=class extends Pke.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};EA.default=kke;var Oke=Fn&&Fn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e1,"__esModule",{value:!0});const Rke=Oke(EA);let Dke=class extends Rke.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};e1.default=Dke;var $ke=Fn&&Fn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vA,"__esModule",{value:!0});const A0=$ke(e1);let Uke=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new A0.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){const a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new A0.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const c=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){const l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new A0.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new A0.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new A0.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};vA.default=Uke;var CA={},AA={};Object.defineProperty(AA,"__esModule",{value:!0});AA.version=void 0;AA.version="0.0.0-automated";Object.defineProperty(CA,"__esModule",{value:!0});CA.DEFAULT_HEADERS=void 0;const Bke=AA;CA.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Bke.version}`};var vW=Fn&&Fn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(h3,"__esModule",{value:!0});const Lke=vW(vA),Mke=vW(e1),jke=CA;let Fke=class EW{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},jke.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new Lke.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new EW(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let c;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(o="POST",c=n);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new Mke.default({method:o,url:a,headers:l,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};h3.default=Fke;var Ly=Fn&&Fn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ri,"__esModule",{value:!0});ri.PostgrestError=ri.PostgrestBuilder=ri.PostgrestTransformBuilder=ri.PostgrestFilterBuilder=ri.PostgrestQueryBuilder=ri.PostgrestClient=void 0;const xW=Ly(h3);ri.PostgrestClient=xW.default;const _W=Ly(vA);ri.PostgrestQueryBuilder=_W.default;const CW=Ly(e1);ri.PostgrestFilterBuilder=CW.default;const AW=Ly(EA);ri.PostgrestTransformBuilder=AW.default;const SW=Ly(xA);ri.PostgrestBuilder=SW.default;const IW=Ly(_A);ri.PostgrestError=IW.default;var zke=ri.default={PostgrestClient:xW.default,PostgrestQueryBuilder:_W.default,PostgrestFilterBuilder:CW.default,PostgrestTransformBuilder:AW.default,PostgrestBuilder:SW.default,PostgrestError:IW.default};const{PostgrestClient:Hke,PostgrestQueryBuilder:QUe,PostgrestFilterBuilder:YUe,PostgrestTransformBuilder:JUe,PostgrestBuilder:ZUe,PostgrestError:XUe}=zke;function Gke(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Wke=Gke(),qke="2.11.13",Vke={"X-Client-Info":`realtime-js/${qke}`},Kke="1.0.0",TW=1e4,Qke=1e3;var Aw;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Aw||(Aw={}));var rs;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(rs||(rs={}));var Yo;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Yo||(Yo={}));var HP;(function(t){t.websocket="websocket"})(HP||(HP={}));var fh;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(fh||(fh={}));class Yke{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const c=r.decode(e.slice(o,o+i));o=o+i;const l=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:l}}}class NW{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var gn;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(gn||(gn={}));const r4=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=Jke(o,t,e,s),i),{})},Jke=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?PW(i,o):GP(o)},PW=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return tOe(e,n)}switch(t){case gn.bool:return Zke(e);case gn.float4:case gn.float8:case gn.int2:case gn.int4:case gn.int8:case gn.numeric:case gn.oid:return Xke(e);case gn.json:case gn.jsonb:return eOe(e);case gn.timestamp:return nOe(e);case gn.abstime:case gn.date:case gn.daterange:case gn.int4range:case gn.int8range:case gn.money:case gn.reltime:case gn.text:case gn.time:case gn.timestamptz:case gn.timetz:case gn.tsrange:case gn.tstzrange:return GP(e);default:return GP(e)}},GP=t=>t,Zke=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Xke=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},eOe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},tOe=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>PW(e,a))}return t},nOe=t=>typeof t=="string"?t.replace(" ","T"):t,kW=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class dI{constructor(e,n,r={},s=TW){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var s4;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(s4||(s4={}));class Sw{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Sw.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=Sw.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Sw.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},c={};return this.map(i,(l,u)=>{o[l]||(c[l]=u)}),this.map(o,(l,u)=>{const d=i[l];if(d){const h=u.map(y=>y.presence_ref),f=d.map(y=>y.presence_ref),p=u.filter(y=>f.indexOf(y.presence_ref)<0),g=d.filter(y=>h.indexOf(y.presence_ref)<0);p.length>0&&(a[l]=p),g.length>0&&(c[l]=g)}else a[l]=u}),this.syncDiff(i,{joins:a,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,c)=>{var l;const u=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),u.length>0){const d=e[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,u,c)}),this.map(o,(a,c)=>{let l=e[a];if(!l)return;const u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=l,s(a,l,c),l.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var i4;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(i4||(i4={}));var o4;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(o4||(o4={}));var Pc;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Pc||(Pc={}));class f3{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=rs.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new dI(this,Yo.join,this.params,this.timeout),this.rejoinTimer=new NW(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=rs.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=rs.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=rs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=rs.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yo.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Sw(this),this.broadcastEndpointURL=kW(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==rs.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(Pc.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Pc.CLOSED));const c={},l={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(Pc.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,f=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,p=[];for(let g=0;g<f;g++){const y=h[g],{filter:{event:w,schema:v,table:b,filter:_}}=y,x=u&&u[g];if(x&&x.event===w&&x.schema===v&&x.table===b&&x.filter===_)p.push(Object.assign(Object.assign({},y),{id:x.id}));else{this.unsubscribe(),this.state=rs.errored,e==null||e(Pc.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(Pc.SUBSCRIBED);return}}).receive("error",u=>{this.state=rs.errored,e==null||e(Pc.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Pc.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=l.body)===null||s===void 0?void 0:s.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const l=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),l.receive("ok",()=>i("ok")),l.receive("error",()=>i("error")),l.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=rs.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yo.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new dI(this,Yo.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new dI(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=Yo;if(r&&[a,c,l,u].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var p,g,y;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(g=f.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(f=>f.callback(h,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var p,g,y,w,v,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const _=f.id,x=(p=f.filter)===null||p===void 0?void 0:p.event;return _&&((g=n.ids)===null||g===void 0?void 0:g.includes(_))&&(x==="*"||(x==null?void 0:x.toLocaleLowerCase())===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const _=(v=(w=f==null?void 0:f.filter)===null||w===void 0?void 0:w.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return _==="*"||_===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:g,table:y,commit_timestamp:w,type:v,errors:b}=p;h=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:w,eventType:v,new:{},old:{},errors:b}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===rs.closed}_isJoined(){return this.state===rs.joined}_isJoining(){return this.state===rs.joining}_isLeaving(){return this.state===rs.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&f3.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Yo.close,{},e)}_onError(e){this._on(Yo.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=rs.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=r4(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=r4(e.columns,e.old_record)),n}}const a4=()=>{},rOe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class sOe{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=Vke,this.params={},this.timeout=TW,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=a4,this.ref=0,this.logger=a4,this.conn=null,this.sendBuffer=[],this.serializer=new Yke,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>Gn(async()=>{const{default:c}=await Promise.resolve().then(()=>By);return{default:c}},void 0).then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${HP.websocket}`,this.httpEndpoint=kW(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new NW(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){this.conn||(this.transport||(this.transport=Wke),this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection())}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Kke}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Aw.connecting:return fh.Connecting;case Aw.open:return fh.Open;case Aw.closing:return fh.Closing;default:return fh.Closed}}isConnected(){return this.connectionState()===fh.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new f3(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{n&&r.updateJoinPayload({access_token:n,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(Yo.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Qke,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Yo.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([rOe],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class p3 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function mr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class iOe extends p3{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class WP extends p3{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var oOe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const OW=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Gn(async()=>{const{default:r}=await Promise.resolve().then(()=>By);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},aOe=()=>oOe(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Gn(()=>Promise.resolve().then(()=>By),void 0)).Response:Response}),qP=t=>{if(Array.isArray(t))return t.map(n=>qP(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=qP(r)}),e};var lp=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const hI=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),cOe=(t,e,n)=>lp(void 0,void 0,void 0,function*(){const r=yield aOe();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new iOe(hI(s),t.status||500))}).catch(s=>{e(new WP(hI(s),s))}):e(new WP(hI(t),t))}),lOe=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function t1(t,e,n,r,s,i){return lp(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,lOe(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>cOe(c,a,r))})})}function k_(t,e,n,r){return lp(this,void 0,void 0,function*(){return t1(t,"GET",e,n,r)})}function du(t,e,n,r,s){return lp(this,void 0,void 0,function*(){return t1(t,"POST",e,r,s,n)})}function uOe(t,e,n,r,s){return lp(this,void 0,void 0,function*(){return t1(t,"PUT",e,r,s,n)})}function dOe(t,e,n,r){return lp(this,void 0,void 0,function*(){return t1(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function RW(t,e,n,r,s){return lp(this,void 0,void 0,function*(){return t1(t,"DELETE",e,r,s,n)})}var Gs=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const hOe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},c4={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class fOe{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=OW(s)}uploadOrUpdate(e,n,r,s){return Gs(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},c4),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const l=this._removeEmptyFolders(n),u=this._getFinalPath(l),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield d.json();return d.ok?{data:{path:l,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(mr(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Gs(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Gs(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let c;const l=Object.assign({upsert:c4.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",l.cacheControl)):(c=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:u}),h=yield d.json();return d.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(mr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return Gs(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield du(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new p3("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(mr(r))return{data:null,error:r};throw r}})}update(e,n,r){return Gs(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Gs(this,void 0,void 0,function*(){try{return{data:yield du(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(mr(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Gs(this,void 0,void 0,function*(){try{return{data:{path:(yield du(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(mr(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Gs(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield du(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(mr(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Gs(this,void 0,void 0,function*(){try{const s=yield du(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(mr(s))return{data:null,error:s};throw s}})}download(e,n){return Gs(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield k_(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(mr(a))return{data:null,error:a};throw a}})}info(e){return Gs(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield k_(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:qP(r),error:null}}catch(r){if(mr(r))return{data:null,error:r};throw r}})}exists(e){return Gs(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield dOe(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(mr(r)&&r instanceof WP){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}remove(e){return Gs(this,void 0,void 0,function*(){try{return{data:yield RW(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(mr(n))return{data:null,error:n};throw n}})}list(e,n,r){return Gs(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},hOe),n),{prefix:e||""});return{data:yield du(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(mr(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const pOe="2.7.1",gOe={"X-Client-Info":`storage-js/${pOe}`};var Lp=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class mOe{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},gOe),n),this.fetch=OW(r)}listBuckets(){return Lp(this,void 0,void 0,function*(){try{return{data:yield k_(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(mr(e))return{data:null,error:e};throw e}})}getBucket(e){return Lp(this,void 0,void 0,function*(){try{return{data:yield k_(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(mr(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Lp(this,void 0,void 0,function*(){try{return{data:yield du(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(mr(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Lp(this,void 0,void 0,function*(){try{return{data:yield uOe(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(mr(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Lp(this,void 0,void 0,function*(){try{return{data:yield du(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(mr(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Lp(this,void 0,void 0,function*(){try{return{data:yield RW(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(mr(n))return{data:null,error:n};throw n}})}}class yOe extends mOe{constructor(e,n={},r){super(e,n,r)}from(e){return new fOe(this.url,this.headers,e,this.fetch)}}const wOe="2.50.1";let W0="";typeof Deno<"u"?W0="deno":typeof document<"u"?W0="web":typeof navigator<"u"&&navigator.product==="ReactNative"?W0="react-native":W0="node";const bOe={"X-Client-Info":`supabase-js-${W0}/${wOe}`},vOe={headers:bOe},EOe={schema:"public"},xOe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},_Oe={};var COe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const AOe=t=>{let e;return t?e=t:typeof fetch>"u"?e=yW:e=fetch,(...n)=>e(...n)},SOe=()=>typeof Headers>"u"?wW:Headers,IOe=(t,e,n)=>{const r=AOe(n),s=SOe();return(i,o)=>COe(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:t;let l=new s(o==null?void 0:o.headers);return l.has("apikey")||l.set("apikey",t),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:l}))})};var TOe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};function NOe(t){return t.endsWith("/")?t:t+"/"}function POe(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:c,auth:l,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},l),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>TOe(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}const DW="2.70.0",Yp=30*1e3,VP=3,fI=VP*Yp,kOe="http://localhost:9999",OOe="supabase.auth.token",ROe={"X-Client-Info":`gotrue-js/${DW}`},KP="X-Supabase-Api-Version",$W={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},DOe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,$Oe=6e5;class g3 extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ut(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class UOe extends g3{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function BOe(t){return ut(t)&&t.name==="AuthApiError"}class UW extends g3{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class jd extends g3{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class tu extends jd{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function LOe(t){return ut(t)&&t.name==="AuthSessionMissingError"}class wE extends jd{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bE extends jd{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class vE extends jd{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function MOe(t){return ut(t)&&t.name==="AuthImplicitGrantRedirectError"}class l4 extends jd{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class QP extends jd{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function pI(t){return ut(t)&&t.name==="AuthRetryableFetchError"}class u4 extends jd{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Iw extends jd{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const O_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),d4=` 	
\r=`.split(""),jOe=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<d4.length;e+=1)t[d4[e].charCodeAt(0)]=-2;for(let e=0;e<O_.length;e+=1)t[O_[e].charCodeAt(0)]=e;return t})();function h4(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(O_[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(O_[r]),e.queuedBits-=6}}function BW(t,e,n){const r=jOe[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function f4(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{HOe(o,r,n)};for(let o=0;o<t.length;o+=1)BW(t.charCodeAt(o),s,i);return e.join("")}function FOe(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function zOe(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}FOe(r,e)}}function HOe(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function GOe(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)BW(t.charCodeAt(s),n,r);return new Uint8Array(e)}function WOe(t){const e=[];return zOe(t,n=>e.push(n)),new Uint8Array(e)}function qOe(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>h4(s,n,r)),h4(null,n,r),e.join("")}function VOe(t){return Math.round(Date.now()/1e3)+t}function KOe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const $o=()=>typeof window<"u"&&typeof document<"u",Xd={tested:!1,writable:!1},Tw=()=>{if(!$o())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Xd.tested)return Xd.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Xd.tested=!0,Xd.writable=!0}catch{Xd.tested=!0,Xd.writable=!1}return Xd.writable};function QOe(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const LW=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Gn(async()=>{const{default:r}=await Promise.resolve().then(()=>By);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},YOe=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",MW=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},EE=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},xE=async(t,e)=>{await t.removeItem(e)};class SA{constructor(){this.promise=new SA.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}SA.promiseConstructor=Promise;function gI(t){const e=t.split(".");if(e.length!==3)throw new Iw("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!DOe.test(e[r]))throw new Iw("JWT not in base64url format");return{header:JSON.parse(f4(e[0])),payload:JSON.parse(f4(e[1])),signature:GOe(e[2]),raw:{header:e[0],payload:e[1]}}}async function JOe(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function ZOe(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function XOe(t){return("0"+t.toString(16)).substr(-2)}function eRe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,XOe).join("")}async function tRe(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function nRe(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await tRe(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Mp(t,e,n=!1){const r=eRe();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await MW(t,`${e}-code-verifier`,s);const i=await nRe(r);return[i,r===i?"plain":"s256"]}const rRe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function sRe(t){const e=t.headers.get(KP);if(!e||!e.match(rRe))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function iRe(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function oRe(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const aRe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function jp(t){if(!aRe.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var cRe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const oh=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),lRe=[502,503,504];async function p4(t){var e;if(!YOe(t))throw new QP(oh(t),0);if(lRe.includes(t.status))throw new QP(oh(t),t.status);let n;try{n=await t.json()}catch(i){throw new UW(oh(i),i)}let r;const s=sRe(t);if(s&&s.getTime()>=$W["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new u4(oh(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new tu}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new u4(oh(n),t.status,n.weak_password.reasons);throw new UOe(oh(n),t.status||500,r)}const uRe=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function bt(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[KP]||(i[KP]=$W["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await dRe(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function dRe(t,e,n,r,s,i){const o=uRe(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(c){throw console.error(c),new QP(oh(c),0)}if(a.ok||await p4(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(c){await p4(c)}}function Ic(t){var e;let n=null;gRe(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=VOe(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function g4(t){const e=Ic(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function wu(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function hRe(t){return{data:t,error:null}}function fRe(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=cRe(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function pRe(t){return t}function gRe(t){return t.access_token&&t.refresh_token&&t.expires_in}const mI=["global","local","others"];var mRe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class yRe{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=LW(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=mI[0]){if(mI.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${mI.join(", ")}`);try{return await bt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ut(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await bt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:wu})}catch(r){if(ut(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=mRe(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await bt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:fRe,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ut(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await bt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:wu})}catch(n){if(ut(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,c;try{const l={nextPage:null,lastPage:0,total:0},u=await bt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:pRe});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);l[`${y}Page`]=g}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(ut(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){jp(e);try{return await bt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:wu})}catch(n){if(ut(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){jp(e);try{return await bt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:wu})}catch(r){if(ut(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){jp(e);try{return await bt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:wu})}catch(r){if(ut(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){jp(e.userId);try{const{data:n,error:r}=await bt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(ut(n))return{data:null,error:n};throw n}}async _deleteFactor(e){jp(e.userId),jp(e.id);try{return{data:await bt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ut(n))return{data:null,error:n};throw n}}}const wRe={getItem:t=>Tw()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Tw()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Tw()&&globalThis.localStorage.removeItem(t)}};function m4(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function bRe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Fp={debug:!!(globalThis&&Tw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class jW extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class vRe extends jW{}async function ERe(t,e,n){Fp.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Fp.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Fp.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Fp.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Fp.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new vRe(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Fp.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}bRe();const xRe={url:kOe,storageKey:OOe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ROe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function y4(t,e,n){return await n()}class Yb{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Yb.nextInstanceID,Yb.nextInstanceID+=1,this.instanceID>0&&$o()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},xRe),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new yRe({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=LW(s.fetch),this.lock=s.lock||y4,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:$o()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=ERe:this.lock=y4,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Tw()?this.storage=wRe:(this.memoryStorage={},this.storage=m4(this.memoryStorage)):(this.memoryStorage={},this.storage=m4(this.memoryStorage)),$o()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${DW}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=QOe(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),$o()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),MOe(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ut(n)?{error:n}:{error:new UW("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await bt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ic}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(ut(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Mp(this.storage,this.storageKey)),i=await bt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:p},xform:Ic})}else if("phone"in e){const{phone:u,password:d,options:h}=e;i=await bt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Ic})}else throw new bE("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(ut(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await bt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:g4})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await bt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:g4})}else throw new bE("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new wE}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(ut(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,o,a,c,l,u,d,h,f;let p,g;if("message"in e)p=e.message,g=e.signature;else{const{chain:y,wallet:w,statement:v,options:b}=e;let _;if($o())if(typeof w=="object")_=w;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))_=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=w}const x=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const C=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:x.host,uri:x.href}),v?{statement:v}:null));let S;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")S=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)S=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)p=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),g=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${x.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${x.href}`,`Issued At: ${(s=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((d=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...b.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const C=await _.signMessage(new TextEncoder().encode(p),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=C}}try{const{data:y,error:w}=await bt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:qOe(g)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ic});if(w)throw w;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new wE}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:w})}catch(y){if(ut(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const n=await EE(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await bt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ic});if(await xE(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new wE}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(ut(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await bt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ic}),{data:c,error:l}=a;return l?{data:{user:null,session:null},error:l}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new wE}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:l})}catch(n){if(ut(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:c}=e;let l=null,u=null;this.flowType==="pkce"&&([l,u]=await Mp(this.storage,this.storageKey));const{error:d}=await bt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:c}=e,{data:l,error:u}=await bt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new bE("You must provide either an email or phone number.")}catch(a){if(ut(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await bt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ic});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,l=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(s){if(ut(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Mp(this.storage,this.storageKey)),await bt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:hRe})}catch(i){if(ut(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new tu;const{error:s}=await bt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(ut(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await bt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await bt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new bE("You must provide either an email or phone number and a type")}catch(n){if(ut(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await EE(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<fI:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,l,u)=>(!o&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,l,u))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await bt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:wu}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new tu}:await bt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:wu})})}catch(n){if(ut(n))return LOe(n)&&(await this._removeSession(),await xE(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new tu;const o=s.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await Mp(this.storage,this.storageKey));const{data:l,error:u}=await bt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:wu});if(u)throw u;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(ut(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new tu;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=gI(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(ut(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new tu;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ut(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!$o())throw new vE("No browser detected.");if(e.error||e.error_description||e.error_code)throw new vE(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new l4("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new vE("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new l4("No code detected.");const{data:v,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:l}=e;if(!i||!a||!o||!l)throw new vE("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;c&&(h=parseInt(c));const f=h-u;f*1e3<=Yp&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const p=h-d;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,u);const{data:g,error:y}=await this._getUser(i);if(y)throw y;const w={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:h,refresh_token:o,token_type:l,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(r){if(ut(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await EE(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(BOe(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await xE(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=KOe(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Mp(this.storage,this.storageKey,!0));try{return await bt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(ut(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(ut(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,c,l,u;const{data:d,error:h}=i;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await bt(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return $o()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ut(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await bt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(ut(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await ZOe(async s=>(s>0&&await JOe(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await bt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ic})),(s,i)=>{const o=200*Math.pow(2,s);return i&&pI(i)&&Date.now()+o-r<Yp})}catch(r){if(this._debug(n,"error",r),ut(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),$o()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await EE(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<fI;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${fI}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),pI(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new tu;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new SA;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new tu;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),ut(i)){const o={session:null,error:i};return pI(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await MW(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await xE(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&$o()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Yp);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Yp);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Yp}ms, refresh threshold is ${VP} ticks`),s<=VP&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof jW)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!$o()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Mp(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await bt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ut(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:l}=await bt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(ut(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await bt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(ut(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await bt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ut(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=gI(s.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+$Oe>Date.now()))return r;const{data:s,error:i}=await bt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new Iw("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new Iw("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};r=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:c}}=gI(r);if(iRe(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const l=oRe(s.alg),u=await this.fetchJwk(s.kid,n),d=await crypto.subtle.importKey("jwk",u,l,!0,["verify"]);if(!await crypto.subtle.verify(l,d,o,WOe(`${a}.${c}`)))throw new Iw("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(ut(r))return{data:null,error:r};throw r}}}Yb.nextInstanceID=0;const _Re=Yb;class CRe extends _Re{constructor(e){super(e)}}var ARe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class SRe{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=NOe(e),c=new URL(a);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const l=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:EOe,realtime:_Oe,auth:Object.assign(Object.assign({},xOe),{storageKey:l}),global:vOe},d=POe(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=IOe(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Hke(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new bke(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new yOe(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return ARe(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:c},l,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new CRe({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new sOe(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const IRe=(t,e,n)=>new SRe(t,e,n),TRe=void 0,NRe=void 0,Ht=IRe(TRe,NRe,{realtime:{params:{eventsPerSecond:10}},auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),PRe="6.14.4";function kRe(t,e,n){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=t,s}async function vs(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function Xe(t,e,n){for(let r in e){let s=e[r];const i=n?n[r]:null;i&&kRe(s,i,r),Object.defineProperty(t,r,{enumerable:!0,value:s,writable:!1})}}function gg(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>gg(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let s=0;s<t.length;s++)r+=n[t[s]>>4],r+=n[t[s]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return gg(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${gg(r,e)}: ${gg(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Lr(t,e){return t&&t.code===e}function m3(t){return Lr(t,"CALL_EXCEPTION")}function In(t,e,n){let r=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${gg(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+gg(a))}}i.push(`code=${e}`),i.push(`version=${PRe}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return Xe(s,{code:e}),n&&Object.assign(s,n),s.shortMessage==null&&Xe(s,{shortMessage:r}),s}function de(t,e,n,r){if(!t)throw In(e,n,r)}function W(t,e,n,r){de(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function FW(t,e,n){n==null&&(n=""),n&&(n=": "+n),de(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),de(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");t.push(e)}catch{}return t},[]);function n1(t,e,n){if(n==null&&(n=""),t!==e){let r=n,s="new";n&&(r+=".",s+=" "+n),de(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function zW(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(t.substring(s,s+2),16),s+=2;return r}W(!1,"invalid BytesLike value",e||"value",t)}function mt(t,e){return zW(t,e,!1)}function Cs(t,e){return zW(t,e,!0)}function wn(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function y3(t){return wn(t,!0)||t instanceof Uint8Array}const w4="0123456789abcdef";function Ae(t){const e=mt(t);let n="0x";for(let r=0;r<e.length;r++){const s=e[r];n+=w4[(s&240)>>4]+w4[s&15]}return n}function zn(t){return"0x"+t.map(e=>Ae(e).substring(2)).join("")}function $g(t){return wn(t,!0)?(t.length-2)/2:mt(t).length}function Mn(t,e,n){const r=mt(t);return n!=null&&n>r.length&&de(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),Ae(r.slice(e??0,n??r.length))}function HW(t,e,n){const r=mt(t);de(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),n?s.set(r,e-r.length):s.set(r,0),Ae(s)}function _s(t,e){return HW(t,e,!0)}function ORe(t,e){return HW(t,e,!1)}const IA=BigInt(0),ra=BigInt(1),mg=9007199254740991;function R_(t,e){const n=TA(t,"value"),r=BigInt(ft(e,"width"));if(de(n>>r===IA,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-ra){const s=(ra<<r)-ra;return-((~n&s)+ra)}return n}function GW(t,e){let n=He(t,"value");const r=BigInt(ft(e,"width")),s=ra<<r-ra;if(n<IA){n=-n,de(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(ra<<r)-ra;return(~n&i)+ra}else de(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function kh(t,e){const n=TA(t,"value"),r=BigInt(ft(e,"bits"));return n&(ra<<r)-ra}function He(t,e){switch(typeof t){case"bigint":return t;case"number":return W(Number.isInteger(t),"underflow",e||"value",t),W(t>=-mg&&t<=mg,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){W(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}W(!1,"invalid BigNumberish value",e||"value",t)}function TA(t,e){const n=He(t,e);return de(n>=IA,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const b4="0123456789abcdef";function NA(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=b4[n>>4],e+=b4[n&15];return BigInt(e)}return He(t)}function ft(t,e){switch(typeof t){case"bigint":return W(t>=-mg&&t<=mg,"overflow",e||"value",t),Number(t);case"number":return W(Number.isInteger(t),"underflow",e||"value",t),W(t>=-mg&&t<=mg,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return ft(BigInt(t),e)}catch(n){W(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}W(!1,"invalid numeric value",e||"value",t)}function RRe(t){return ft(NA(t))}function Pd(t,e){let r=TA(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=ft(e,"width");for(de(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<s*2;)r="0"+r}return"0x"+r}function ur(t){const e=TA(t,"value");if(e===IA)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(n.substring(i,i+2),16)}return r}function ea(t){let e=Ae(y3(t)?t:ur(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const v4="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const E4=BigInt(58);function DRe(t){const e=mt(t);let n=NA(e),r="";for(;n;)r=v4[Number(n%E4)]+r,n/=E4;for(let s=0;s<e.length&&!e[s];s++)r=v4[0]+r;return r}function $Re(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return mt(e)}function URe(t){const e=mt(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var Jg;class WW{constructor(e,n,r){J(this,"filter");J(this,"emitter");G(this,Jg);D(this,Jg,n),Xe(this,{emitter:e,filter:r})}async removeListener(){E(this,Jg)!=null&&await this.emitter.off(this.filter,E(this,Jg))}}Jg=new WeakMap;function BRe(t,e,n,r,s){W(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function qW(t,e,n,r,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)i++;return i}return t==="OVERRUN"?n.length-e-1:0}function LRe(t,e,n,r,s){return t==="OVERLONG"?(W(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),qW(t,e,n))}const MRe=Object.freeze({error:BRe,ignore:qW,replace:LRe});function jRe(t,e){e==null&&(e=MRe.error);const n=mt(t,"bytes"),r=[];let s=0;for(;s<n.length;){const i=n[s++];if(!(i>>7)){r.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,n,r):s+=e("BAD_PREFIX",s-1,n,r);continue}if(s-1+o>=n.length){s+=e("OVERRUN",s-1,n,r);continue}let c=i&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=n[s];if((u&192)!=128){s+=e("MISSING_CONTINUE",s,n,r),c=null;break}c=c<<6|u&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,n,r,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,n,r,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,n,r,c);continue}r.push(c)}}return r}function cl(t,e){W(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(s&63|128);else if((s&64512)==55296){r++;const i=t.charCodeAt(r);W(r<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((s&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128)}return new Uint8Array(n)}function FRe(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function D_(t,e){return FRe(jRe(t,e))}function VW(t){async function e(n,r){de(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=n.url.split(":")[0].toLowerCase();de(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),de(s==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=In("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{i=In("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let l;try{l=await fetch(n.url,c)}catch(f){throw clearTimeout(a),i||f}clearTimeout(a);const u={};l.headers.forEach((f,p)=>{u[p.toLowerCase()]=f});const d=await l.arrayBuffer(),h=d==null?null:new Uint8Array(d);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:h}}return e}const zRe=12,HRe=250;let x4=VW();const GRe=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),WRe=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let yI=!1;async function KW(t,e){try{const n=t.match(GRe);if(!n)throw new Error("invalid data");return new wd(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?$Re(n[3]):VRe(n[3]))}catch{return new wd(599,"BAD REQUEST (invalid data: URI)",{},null,new kd(t))}}function QW(t){async function e(n,r){try{const s=n.match(WRe);if(!s)throw new Error("invalid link");return new kd(`${t}${s[2]}`)}catch{return new wd(599,"BAD REQUEST (invalid IPFS URI)",{},null,new kd(n))}}return e}const _E={data:KW,ipfs:QW("https://gateway.ipfs.io/ipfs/")},YW=new WeakMap;var Gh,Nu;class qRe{constructor(e){G(this,Gh);G(this,Nu);D(this,Gh,[]),D(this,Nu,!1),YW.set(e,()=>{if(!E(this,Nu)){D(this,Nu,!0);for(const n of E(this,Gh))setTimeout(()=>{n()},0);D(this,Gh,[])}})}addListener(e){de(!E(this,Nu),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),E(this,Gh).push(e)}get cancelled(){return E(this,Nu)}checkSignal(){de(!this.cancelled,"cancelled","CANCELLED",{})}}Gh=new WeakMap,Nu=new WeakMap;function CE(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var Zg,Xg,Ho,Mc,em,tm,gr,Ii,jc,Wh,qh,Vh,La,Go,Pu,Kh,q0;const K_=class K_{constructor(e){G(this,Kh);G(this,Zg);G(this,Xg);G(this,Ho);G(this,Mc);G(this,em);G(this,tm);G(this,gr);G(this,Ii);G(this,jc);G(this,Wh);G(this,qh);G(this,Vh);G(this,La);G(this,Go);G(this,Pu);D(this,tm,String(e)),D(this,Zg,!1),D(this,Xg,!0),D(this,Ho,{}),D(this,Mc,""),D(this,em,3e5),D(this,Go,{slotInterval:HRe,maxAttempts:zRe}),D(this,Pu,null)}get url(){return E(this,tm)}set url(e){D(this,tm,String(e))}get body(){return E(this,gr)==null?null:new Uint8Array(E(this,gr))}set body(e){if(e==null)D(this,gr,void 0),D(this,Ii,void 0);else if(typeof e=="string")D(this,gr,cl(e)),D(this,Ii,"text/plain");else if(e instanceof Uint8Array)D(this,gr,e),D(this,Ii,"application/octet-stream");else if(typeof e=="object")D(this,gr,cl(JSON.stringify(e))),D(this,Ii,"application/json");else throw new Error("invalid body")}hasBody(){return E(this,gr)!=null}get method(){return E(this,Mc)?E(this,Mc):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),D(this,Mc,String(e).toUpperCase())}get headers(){const e=Object.assign({},E(this,Ho));return E(this,jc)&&(e.authorization=`Basic ${URe(cl(E(this,jc)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&E(this,Ii)&&(e["content-type"]=E(this,Ii)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){E(this,Ho)[String(e).toLowerCase()]=String(n)}clearHeaders(){D(this,Ho,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return E(this,jc)||null}setCredentials(e,n){W(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),D(this,jc,`${e}:${n}`)}get allowGzip(){return E(this,Xg)}set allowGzip(e){D(this,Xg,!!e)}get allowInsecureAuthentication(){return!!E(this,Zg)}set allowInsecureAuthentication(e){D(this,Zg,!!e)}get timeout(){return E(this,em)}set timeout(e){W(e>=0,"timeout must be non-zero","timeout",e),D(this,em,e)}get preflightFunc(){return E(this,Wh)||null}set preflightFunc(e){D(this,Wh,e)}get processFunc(){return E(this,qh)||null}set processFunc(e){D(this,qh,e)}get retryFunc(){return E(this,Vh)||null}set retryFunc(e){D(this,Vh,e)}get getUrlFunc(){return E(this,Pu)||x4}set getUrlFunc(e){D(this,Pu,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${E(this,gr)?Ae(E(this,gr)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(E(this,Go).slotInterval=e.slotInterval),e.maxAttempts!=null&&(E(this,Go).maxAttempts=e.maxAttempts)}send(){return de(E(this,La)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),D(this,La,new qRe(this)),ne(this,Kh,q0).call(this,0,_4()+this.timeout,0,this,new wd(0,"",{},null,this))}cancel(){de(E(this,La)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=YW.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();de(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new K_(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,D(s,Ho,Object.assign({},E(this,Ho))),E(this,gr)&&D(s,gr,new Uint8Array(E(this,gr))),D(s,Ii,E(this,Ii)),s}clone(){const e=new K_(this.url);return D(e,Mc,E(this,Mc)),E(this,gr)&&D(e,gr,E(this,gr)),D(e,Ii,E(this,Ii)),D(e,Ho,Object.assign({},E(this,Ho))),D(e,jc,E(this,jc)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),D(e,Wh,E(this,Wh)),D(e,qh,E(this,qh)),D(e,Vh,E(this,Vh)),D(e,Go,Object.assign({},E(this,Go))),D(e,Pu,E(this,Pu)),e}static lockConfig(){yI=!0}static getGateway(e){return _E[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(yI)throw new Error("gateways locked");_E[e]=n}static registerGetUrl(e){if(yI)throw new Error("gateways locked");x4=e}static createGetUrlFunc(e){return VW(e)}static createDataGateway(){return KW}static createIpfsGatewayFunc(e){return QW(e)}};Zg=new WeakMap,Xg=new WeakMap,Ho=new WeakMap,Mc=new WeakMap,em=new WeakMap,tm=new WeakMap,gr=new WeakMap,Ii=new WeakMap,jc=new WeakMap,Wh=new WeakMap,qh=new WeakMap,Vh=new WeakMap,La=new WeakMap,Go=new WeakMap,Pu=new WeakMap,Kh=new WeakSet,q0=async function(e,n,r,s,i){var u,d,h;if(e>=E(this,Go).maxAttempts)return i.makeServerError("exceeded maximum retry limit");de(_4()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await KRe(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in _E){const f=await _E[a](o.url,CE(E(s,La)));if(f instanceof wd){let p=f;if(this.processFunc){CE(E(s,La));try{p=await this.processFunc(o,p)}catch(g){(g.throttle==null||typeof g.stall!="number")&&p.makeServerError("error in post-processing function",g).assertOk()}}return p}o=f}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,CE(E(s,La)));let l=new wd(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{const f=l.headers.location||"";return ne(u=o.redirect(f),Kh,q0).call(u,e+1,n,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,e))){const f=l.headers["retry-after"];let p=E(this,Go).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof f=="string"&&f.match(/^[1-9][0-9]*$/)&&(p=parseInt(f)),ne(d=o.clone(),Kh,q0).call(d,e+1,n,p,s,l)}if(this.processFunc){CE(E(s,La));try{l=await this.processFunc(o,l)}catch(f){(f.throttle==null||typeof f.stall!="number")&&l.makeServerError("error in post-processing function",f).assertOk();let p=E(this,Go).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return f.stall>=0&&(p=f.stall),ne(h=o.clone(),Kh,q0).call(h,e+1,n,p,s,l)}}return l};let kd=K_;var hv,fv,pv,Ti,nm,Qh;const $3=class $3{constructor(e,n,r,s,i){G(this,hv);G(this,fv);G(this,pv);G(this,Ti);G(this,nm);G(this,Qh);D(this,hv,e),D(this,fv,n),D(this,pv,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),D(this,Ti,s==null?null:new Uint8Array(s)),D(this,nm,i||null),D(this,Qh,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${E(this,Ti)?Ae(E(this,Ti)):"null"}>`}get statusCode(){return E(this,hv)}get statusMessage(){return E(this,fv)}get headers(){return Object.assign({},E(this,pv))}get body(){return E(this,Ti)==null?null:new Uint8Array(E(this,Ti))}get bodyText(){try{return E(this,Ti)==null?"":D_(E(this,Ti))}catch{de(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{de(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new $3(599,r,this.headers,this.body,E(this,nm)||void 0);return D(s,Qh,{message:e,error:n}),s}throwThrottleError(e,n){n==null?n=-1:W(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw Xe(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return E(this,Ti)!=null}get request(){return E(this,nm)}ok(){return E(this,Qh).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=E(this,Qh);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{E(this,Ti)&&(s=D_(E(this,Ti)))}catch{}de(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};hv=new WeakMap,fv=new WeakMap,pv=new WeakMap,Ti=new WeakMap,nm=new WeakMap,Qh=new WeakMap;let wd=$3;function _4(){return new Date().getTime()}function VRe(t){return cl(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function KRe(t){return new Promise(e=>setTimeout(e,t))}const QRe=BigInt(-1),Bo=BigInt(0),yg=BigInt(1),YRe=BigInt(5),zp={};let Ug="0000";for(;Ug.length<80;)Ug+=Ug;function eh(t){let e=Ug;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function S0(t,e,n){const r=BigInt(e.width);if(e.signed){const s=yg<<r-yg;de(n==null||t>=-s&&t<s,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t>Bo?t=R_(kh(t,r),r):t=-R_(kh(-t,r),r)}else{const s=yg<<r;de(n==null||t>=0&&t<s,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t=(t%s+s)%s&s-yg}return t}function wI(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,n=128,r=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const i=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);W(i,"invalid fixed format","format",t),e=i[1]!=="u",n=parseInt(i[2]),r=parseInt(i[3])}}else if(t){const i=t,o=(a,c,l)=>i[a]==null?l:(W(typeof i[a]===c,"invalid fixed format ("+a+" not "+c+")","format."+a,i[a]),i[a]);e=o("signed","boolean",e),n=o("width","number",n),r=o("decimals","number",r)}W(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),W(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const s=(e?"":"u")+"fixed"+String(n)+"x"+String(r);return{signed:e,width:n,decimals:r,name:s}}function JRe(t,e){let n="";t<Bo&&(n="-",t*=QRe);let r=t.toString();if(e===0)return n+r;for(;r.length<=e;)r=Ug+r;const s=r.length-e;for(r=r.substring(0,s)+"."+r.substring(s);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return n+r}var Wo,an,ys,Qt,ah,Tc,YP,JP,ZP,XP;const hu=class hu{constructor(e,n,r){G(this,Qt);J(this,"format");G(this,Wo);G(this,an);G(this,ys);J(this,"_value");n1(e,zp,"FixedNumber"),D(this,an,n),D(this,Wo,r);const s=JRe(n,r.decimals);Xe(this,{format:r.name,_value:s}),D(this,ys,eh(r.decimals))}get signed(){return E(this,Wo).signed}get width(){return E(this,Wo).width}get decimals(){return E(this,Wo).decimals}get value(){return E(this,an)}addUnsafe(e){return ne(this,Qt,YP).call(this,e)}add(e){return ne(this,Qt,YP).call(this,e,"add")}subUnsafe(e){return ne(this,Qt,JP).call(this,e)}sub(e){return ne(this,Qt,JP).call(this,e,"sub")}mulUnsafe(e){return ne(this,Qt,ZP).call(this,e)}mul(e){return ne(this,Qt,ZP).call(this,e,"mul")}mulSignal(e){ne(this,Qt,ah).call(this,e);const n=E(this,an)*E(e,an);return de(n%E(this,ys)===Bo,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),ne(this,Qt,Tc).call(this,n/E(this,ys),"mulSignal")}divUnsafe(e){return ne(this,Qt,XP).call(this,e)}div(e){return ne(this,Qt,XP).call(this,e,"div")}divSignal(e){de(E(e,an)!==Bo,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),ne(this,Qt,ah).call(this,e);const n=E(this,an)*E(this,ys);return de(n%E(e,an)===Bo,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),ne(this,Qt,Tc).call(this,n/E(e,an),"divSignal")}cmp(e){let n=this.value,r=e.value;const s=this.decimals-e.decimals;return s>0?r*=eh(s):s<0&&(n*=eh(-s)),n<r?-1:n>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=E(this,an);return E(this,an)<Bo&&(e-=E(this,ys)-yg),e=E(this,an)/E(this,ys)*E(this,ys),ne(this,Qt,Tc).call(this,e,"floor")}ceiling(){let e=E(this,an);return E(this,an)>Bo&&(e+=E(this,ys)-yg),e=E(this,an)/E(this,ys)*E(this,ys),ne(this,Qt,Tc).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const n=this.decimals-e,r=YRe*eh(n-1);let s=this.value+r;const i=eh(n);return s=s/i*i,S0(s,E(this,Wo),"round"),new hu(zp,s,E(this,Wo))}isZero(){return E(this,an)===Bo}isNegative(){return E(this,an)<Bo}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return hu.fromString(this.toString(),e)}static fromValue(e,n,r){const s=n==null?0:ft(n),i=wI(r);let o=He(e,"value");const a=s-i.decimals;if(a>0){const c=eh(a);de(o%c===Bo,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=c}else a<0&&(o*=eh(-a));return S0(o,i,"fromValue"),new hu(zp,o,i)}static fromString(e,n){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);W(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const s=wI(n);let i=r[2]||"0",o=r[3]||"";for(;o.length<s.decimals;)o+=Ug;de(o.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,s.decimals);const a=BigInt(r[1]+i+o);return S0(a,s,"fromString"),new hu(zp,a,s)}static fromBytes(e,n){let r=NA(mt(e,"value"));const s=wI(n);return s.signed&&(r=R_(r,s.width)),S0(r,s,"fromBytes"),new hu(zp,r,s)}};Wo=new WeakMap,an=new WeakMap,ys=new WeakMap,Qt=new WeakSet,ah=function(e){W(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},Tc=function(e,n){return e=S0(e,E(this,Wo),n),new hu(zp,e,E(this,Wo))},YP=function(e,n){return ne(this,Qt,ah).call(this,e),ne(this,Qt,Tc).call(this,E(this,an)+E(e,an),n)},JP=function(e,n){return ne(this,Qt,ah).call(this,e),ne(this,Qt,Tc).call(this,E(this,an)-E(e,an),n)},ZP=function(e,n){return ne(this,Qt,ah).call(this,e),ne(this,Qt,Tc).call(this,E(this,an)*E(e,an)/E(this,ys),n)},XP=function(e,n){return de(E(e,an)!==Bo,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),ne(this,Qt,ah).call(this,e),ne(this,Qt,Tc).call(this,E(this,an)*E(this,ys)/E(e,an),n)};let $_=hu;function ZRe(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function C4(t,e,n){let r=0;for(let s=0;s<n;s++)r=r*256+t[e+s];return r}function A4(t,e,n,r){const s=[];for(;n<e+1+r;){const i=JW(t,n);s.push(i.result),n+=i.consumed,de(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:s}}function JW(t,e){de(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{de(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const s=C4(t,e+1,r);return n(e+1+r+s),A4(t,e,e+1+r,r+s)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),A4(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const s=C4(t,e+1,r);n(e+1+r+s);const i=Ae(t.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:i}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const s=Ae(t.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:ZRe(t[e])}}function r1(t){const e=mt(t,"data"),n=JW(e,0);return W(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function S4(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function ZW(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(i){r=r.concat(ZW(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=S4(r.length);return s.unshift(247+s.length),s.concat(r)}const e=Array.prototype.slice.call(mt(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=S4(e.length);return n.unshift(183+n.length),n.concat(e)}const I4="0123456789abcdef";function Od(t){let e="0x";for(const n of ZW(t))e+=I4[n>>4],e+=I4[n&15];return e}function XRe(t,e){let n=18;return n=ft(e,"unit"),$_.fromValue(t,n,{decimals:n,width:512}).toString()}function e3e(t,e){W(typeof t=="string","value must be a string","value",t);let n=18;return n=ft(e,"unit"),$_.fromString(t,{decimals:n,width:512}).value}function bI(t){return XRe(t,18)}function T4(t){return e3e(t,18)}const As=32,ek=new Uint8Array(As),t3e=["then"],AE={},XW=new WeakMap;function ph(t){return XW.get(t)}function N4(t,e){XW.set(t,e)}function I0(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function tk(t,e,n){return t.indexOf(null)>=0?e.map((r,s)=>r instanceof oy?tk(ph(r),r,n):r):t.reduce((r,s,i)=>{let o=e.getValue(s);return s in r||(n&&o instanceof oy&&(o=tk(ph(o),o,n)),r[s]=o),r},{})}var rm;const wg=class wg extends Array{constructor(...n){const r=n[0];let s=n[1],i=(n[2]||[]).slice(),o=!0;r!==AE&&(s=n,i=[],o=!1);super(s.length);G(this,rm);s.forEach((l,u)=>{this[u]=l});const a=i.reduce((l,u)=>(typeof u=="string"&&l.set(u,(l.get(u)||0)+1),l),new Map);if(N4(this,Object.freeze(s.map((l,u)=>{const d=i[u];return d!=null&&a.get(d)===1?d:null}))),D(this,rm,[]),E(this,rm)==null&&E(this,rm),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(l,u,d)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const f=ft(u,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const p=l[f];return p instanceof Error&&I0(`index ${f}`,p),p}if(t3e.indexOf(u)>=0)return Reflect.get(l,u,d);const h=l[u];if(h instanceof Function)return function(...f){return h.apply(this===d?l:this,f)};if(!(u in l))return l.getValue.apply(this===d?l:this,[u])}return Reflect.get(l,u,d)}});return N4(c,ph(this)),c}toArray(n){const r=[];return this.forEach((s,i)=>{s instanceof Error&&I0(`index ${i}`,s),n&&s instanceof wg&&(s=s.toArray(n)),r.push(s)}),r}toObject(n){const r=ph(this);return r.reduce((s,i,o)=>(de(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),tk(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=ph(this),i=[],o=[];for(let a=n;a<r;a++)i.push(this[a]),o.push(s[a]);return new wg(AE,i,o)}filter(n,r){const s=ph(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&I0(`index ${a}`,c),n.call(r,c,a,this)&&(i.push(c),o.push(s[a]))}return new wg(AE,i,o)}map(n,r){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&I0(`index ${i}`,o),s.push(n.call(r,o,i,this))}return s}getValue(n){const r=ph(this).indexOf(n);if(r===-1)return;const s=this[r];return s instanceof Error&&I0(`property ${JSON.stringify(n)}`,s.error),s}static fromItems(n,r){return new wg(AE,n,r)}};rm=new WeakMap;let oy=wg;function P4(t){let e=ur(t);return de(e.length<=As,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:As,offset:e.length}),e.length!==As&&(e=Cs(zn([ek.slice(e.length%As),e]))),e}class Al{constructor(e,n,r,s){J(this,"name");J(this,"type");J(this,"localName");J(this,"dynamic");Xe(this,{name:e,type:n,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){W(!1,e,this.localName,n)}}var Fc,Yh,sm,dx;class nk{constructor(){G(this,sm);G(this,Fc);G(this,Yh);D(this,Fc,[]),D(this,Yh,0)}get data(){return zn(E(this,Fc))}get length(){return E(this,Yh)}appendWriter(e){return ne(this,sm,dx).call(this,Cs(e.data))}writeBytes(e){let n=Cs(e);const r=n.length%As;return r&&(n=Cs(zn([n,ek.slice(r)]))),ne(this,sm,dx).call(this,n)}writeValue(e){return ne(this,sm,dx).call(this,P4(e))}writeUpdatableValue(){const e=E(this,Fc).length;return E(this,Fc).push(ek),D(this,Yh,E(this,Yh)+As),n=>{E(this,Fc)[e]=P4(n)}}}Fc=new WeakMap,Yh=new WeakMap,sm=new WeakSet,dx=function(e){return E(this,Fc).push(e),D(this,Yh,E(this,Yh)+e.length),e.length};var Qs,Ni,Jh,Zh,ku,Kf,sk,eq;const U3=class U3{constructor(e,n,r){G(this,Kf);J(this,"allowLoose");G(this,Qs);G(this,Ni);G(this,Jh);G(this,Zh);G(this,ku);Xe(this,{allowLoose:!!n}),D(this,Qs,Cs(e)),D(this,Jh,0),D(this,Zh,null),D(this,ku,r??1024),D(this,Ni,0)}get data(){return Ae(E(this,Qs))}get dataLength(){return E(this,Qs).length}get consumed(){return E(this,Ni)}get bytes(){return new Uint8Array(E(this,Qs))}subReader(e){const n=new U3(E(this,Qs).slice(E(this,Ni)+e),this.allowLoose,E(this,ku));return D(n,Zh,this),n}readBytes(e,n){let r=ne(this,Kf,eq).call(this,0,e,!!n);return ne(this,Kf,sk).call(this,e),D(this,Ni,E(this,Ni)+r.length),r.slice(0,e)}readValue(){return NA(this.readBytes(As))}readIndex(){return RRe(this.readBytes(As))}};Qs=new WeakMap,Ni=new WeakMap,Jh=new WeakMap,Zh=new WeakMap,ku=new WeakMap,Kf=new WeakSet,sk=function(e){var n;if(E(this,Zh))return ne(n=E(this,Zh),Kf,sk).call(n,e);D(this,Jh,E(this,Jh)+e),de(E(this,ku)<1||E(this,Jh)<=E(this,ku)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${E(this,ku)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:Cs(E(this,Qs)),offset:E(this,Ni),length:e,info:{bytesRead:E(this,Jh),dataLength:this.dataLength}})},eq=function(e,n,r){let s=Math.ceil(n/As)*As;return E(this,Ni)+s>E(this,Qs).length&&(this.allowLoose&&r&&E(this,Ni)+n<=E(this,Qs).length?s=n:de(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:Cs(E(this,Qs)),length:E(this,Qs).length,offset:E(this,Ni)+s})),E(this,Qs).slice(E(this,Ni),E(this,Ni)+s)};let rk=U3;function U_(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function w3(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function n3e(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");U_(t.outputLen),U_(t.blockLen)}function ay(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function tq(t,e){w3(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const vI=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nq=t=>t instanceof Uint8Array,r3e=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),EI=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Ta=(t,e)=>t<<32-e|t>>>e,s3e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!s3e)throw new Error("Non little-endian hardware is not supported");function i3e(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function PA(t){if(typeof t=="string"&&(t=i3e(t)),!nq(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function o3e(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!nq(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class b3{clone(){return this._cloneInto()}}function v3(t){const e=r=>t().update(PA(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function a3e(t=32){if(vI&&typeof vI.getRandomValues=="function")return vI.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class rq extends b3{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,n3e(e);const r=PA(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return ay(this),this.iHash.update(e),this}digestInto(e){ay(this),w3(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const sq=(t,e,n)=>new rq(t,e).update(n).digest();sq.create=(t,e)=>new rq(t,e);function c3e(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}class iq extends b3{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=EI(this.buffer)}update(e){ay(this);const{view:n,buffer:r,blockLen:s}=this;e=PA(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=EI(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ay(this),tq(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;c3e(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=EI(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const l3e=(t,e,n)=>t&e^~t&n,u3e=(t,e,n)=>t&e^t&n^e&n,d3e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Kl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ql=new Uint32Array(64);class h3e extends iq{constructor(){super(64,32,8,!1),this.A=Kl[0]|0,this.B=Kl[1]|0,this.C=Kl[2]|0,this.D=Kl[3]|0,this.E=Kl[4]|0,this.F=Kl[5]|0,this.G=Kl[6]|0,this.H=Kl[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Ql[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Ql[d-15],f=Ql[d-2],p=Ta(h,7)^Ta(h,18)^h>>>3,g=Ta(f,17)^Ta(f,19)^f>>>10;Ql[d]=g+Ql[d-7]+p+Ql[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Ta(a,6)^Ta(a,11)^Ta(a,25),f=u+h+l3e(a,c,l)+d3e[d]+Ql[d]|0,g=(Ta(r,2)^Ta(r,13)^Ta(r,22))+u3e(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Ql.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const oq=v3(()=>new h3e),SE=BigInt(2**32-1),ik=BigInt(32);function aq(t,e=!1){return e?{h:Number(t&SE),l:Number(t>>ik&SE)}:{h:Number(t>>ik&SE)|0,l:Number(t&SE)|0}}function cq(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=aq(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const f3e=(t,e)=>BigInt(t>>>0)<<ik|BigInt(e>>>0),p3e=(t,e,n)=>t>>>n,g3e=(t,e,n)=>t<<32-n|e>>>n,m3e=(t,e,n)=>t>>>n|e<<32-n,y3e=(t,e,n)=>t<<32-n|e>>>n,w3e=(t,e,n)=>t<<64-n|e>>>n-32,b3e=(t,e,n)=>t>>>n-32|e<<64-n,v3e=(t,e)=>e,E3e=(t,e)=>t,lq=(t,e,n)=>t<<n|e>>>32-n,uq=(t,e,n)=>e<<n|t>>>32-n,dq=(t,e,n)=>e<<n-32|t>>>64-n,hq=(t,e,n)=>t<<n-32|e>>>64-n;function x3e(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const _3e=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),C3e=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,A3e=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),S3e=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,I3e=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),T3e=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,gt={fromBig:aq,split:cq,toBig:f3e,shrSH:p3e,shrSL:g3e,rotrSH:m3e,rotrSL:y3e,rotrBH:w3e,rotrBL:b3e,rotr32H:v3e,rotr32L:E3e,rotlSH:lq,rotlSL:uq,rotlBH:dq,rotlBL:hq,add:x3e,add3L:_3e,add3H:C3e,add4L:A3e,add4H:S3e,add5H:T3e,add5L:I3e},[N3e,P3e]=gt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Yl=new Uint32Array(80),Jl=new Uint32Array(80);class k3e extends iq{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let b=0;b<16;b++,n+=4)Yl[b]=e.getUint32(n),Jl[b]=e.getUint32(n+=4);for(let b=16;b<80;b++){const _=Yl[b-15]|0,x=Jl[b-15]|0,C=gt.rotrSH(_,x,1)^gt.rotrSH(_,x,8)^gt.shrSH(_,x,7),S=gt.rotrSL(_,x,1)^gt.rotrSL(_,x,8)^gt.shrSL(_,x,7),N=Yl[b-2]|0,A=Jl[b-2]|0,P=gt.rotrSH(N,A,19)^gt.rotrBH(N,A,61)^gt.shrSH(N,A,6),R=gt.rotrSL(N,A,19)^gt.rotrBL(N,A,61)^gt.shrSL(N,A,6),j=gt.add4L(S,R,Jl[b-7],Jl[b-16]),H=gt.add4H(j,C,P,Yl[b-7],Yl[b-16]);Yl[b]=H|0,Jl[b]=j|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:y,Hh:w,Hl:v}=this;for(let b=0;b<80;b++){const _=gt.rotrSH(d,h,14)^gt.rotrSH(d,h,18)^gt.rotrBH(d,h,41),x=gt.rotrSL(d,h,14)^gt.rotrSL(d,h,18)^gt.rotrBL(d,h,41),C=d&f^~d&g,S=h&p^~h&y,N=gt.add5L(v,x,S,P3e[b],Jl[b]),A=gt.add5H(N,w,_,C,N3e[b],Yl[b]),P=N|0,R=gt.rotrSH(r,s,28)^gt.rotrBH(r,s,34)^gt.rotrBH(r,s,39),j=gt.rotrSL(r,s,28)^gt.rotrBL(r,s,34)^gt.rotrBL(r,s,39),H=r&i^r&a^i&a,K=s&o^s&c^o&c;w=g|0,v=y|0,g=f|0,y=p|0,f=d|0,p=h|0,{h:d,l:h}=gt.add(l|0,u|0,A|0,P|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const T=gt.add3L(P,j,K);r=gt.add3H(T,A,R,H),s=T|0}({h:r,l:s}=gt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=gt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=gt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=gt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=gt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=gt.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=gt.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:w,l:v}=gt.add(this.Hh|0,this.Hl|0,w|0,v|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,y,w,v)}roundClean(){Yl.fill(0),Jl.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const O3e=v3(()=>new k3e);function R3e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const k4=R3e();k4.crypto||k4.msCrypto;function D3e(t){switch(t){case"sha256":return oq.create();case"sha512":return O3e.create()}W(!1,"invalid hashing algorithm name","algorithm",t)}const[fq,pq,gq]=[[],[],[]],$3e=BigInt(0),T0=BigInt(1),U3e=BigInt(2),B3e=BigInt(7),L3e=BigInt(256),M3e=BigInt(113);for(let t=0,e=T0,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],fq.push(2*(5*r+n)),pq.push((t+1)*(t+2)/2%64);let s=$3e;for(let i=0;i<7;i++)e=(e<<T0^(e>>B3e)*M3e)%L3e,e&U3e&&(s^=T0<<(T0<<BigInt(i))-T0);gq.push(s)}const[j3e,F3e]=cq(gq,!0),O4=(t,e,n)=>n>32?dq(t,e,n):lq(t,e,n),R4=(t,e,n)=>n>32?hq(t,e,n):uq(t,e,n);function z3e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=O4(l,u,1)^n[a],h=R4(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=pq[o],c=O4(s,i,a),l=R4(s,i,a),u=fq[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=j3e[r],t[1]^=F3e[r]}n.fill(0)}class E3 extends b3{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,U_(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=r3e(this.state)}keccak(){z3e(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){ay(this);const{blockLen:n,state:r}=this;e=PA(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){ay(this,!1),w3(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return U_(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(tq(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new E3(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const H3e=(t,e,n)=>v3(()=>new E3(e,t,n)),G3e=H3e(1,136,256/8);let mq=!1;const yq=function(t){return G3e(t)};let wq=yq;function tr(t){const e=mt(t,"data");return Ae(wq(e))}tr._=yq;tr.lock=function(){mq=!0};tr.register=function(t){if(mq)throw new TypeError("keccak256 is locked");wq=t};Object.freeze(tr);const bq=function(t){return D3e("sha256").update(t).digest()};let vq=bq,Eq=!1;function My(t){const e=mt(t,"data");return Ae(vq(e))}My._=bq;My.lock=function(){Eq=!0};My.register=function(t){if(Eq)throw new Error("sha256 is locked");vq=t};Object.freeze(My);Object.freeze(My);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xq=BigInt(0),kA=BigInt(1),W3e=BigInt(2),OA=t=>t instanceof Uint8Array,q3e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function cy(t){if(!OA(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=q3e[t[n]];return e}function _q(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function x3(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function ly(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const s=r*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function wf(t){return x3(cy(t))}function _3(t){if(!OA(t))throw new Error("Uint8Array expected");return x3(cy(Uint8Array.from(t).reverse()))}function uy(t,e){return ly(t.toString(16).padStart(e*2,"0"))}function C3(t,e){return uy(t,e).reverse()}function V3e(t){return ly(_q(t))}function jo(t,e,n){let r;if(typeof e=="string")try{r=ly(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(OA(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function Jb(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!OA(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function K3e(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Q3e(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Y3e(t){let e;for(e=0;t>xq;t>>=kA,e+=1);return e}function J3e(t,e){return t>>BigInt(e)&kA}const Z3e=(t,e,n)=>t|(n?kA:xq)<<BigInt(e),A3=t=>(W3e<<BigInt(t-1))-kA,xI=t=>new Uint8Array(t),D4=t=>Uint8Array.from(t);function Cq(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=xI(t),s=xI(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=xI())=>{s=a(D4([0]),d),r=a(),d.length!==0&&(s=a(D4([1]),d),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return Jb(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const X3e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function s1(t,e,n={}){const r=(s,i,o)=>{const a=X3e[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const eDe=Object.freeze(Object.defineProperty({__proto__:null,bitGet:J3e,bitLen:Y3e,bitMask:A3,bitSet:Z3e,bytesToHex:cy,bytesToNumberBE:wf,bytesToNumberLE:_3,concatBytes:Jb,createHmacDrbg:Cq,ensureBytes:jo,equalBytes:K3e,hexToBytes:ly,hexToNumber:x3,numberToBytesBE:uy,numberToBytesLE:C3,numberToHexUnpadded:_q,numberToVarBytesBE:V3e,utf8ToBytes:Q3e,validateObject:s1},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xr=BigInt(0),Kn=BigInt(1),gh=BigInt(2),tDe=BigInt(3),ok=BigInt(4),$4=BigInt(5),U4=BigInt(8);BigInt(9);BigInt(16);function ti(t,e){const n=t%e;return n>=xr?n:e+n}function nDe(t,e,n){if(n<=xr||e<xr)throw new Error("Expected power/modulo > 0");if(n===Kn)return xr;let r=Kn;for(;e>xr;)e&Kn&&(r=r*t%n),t=t*t%n,e>>=Kn;return r}function Xi(t,e,n){let r=t;for(;e-- >xr;)r*=r,r%=n;return r}function ak(t,e){if(t===xr||e<=xr)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=ti(t,e),r=e,s=xr,i=Kn;for(;n!==xr;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Kn)throw new Error("invert: does not exist");return ti(s,e)}function rDe(t){const e=(t-Kn)/gh;let n,r,s;for(n=t-Kn,r=0;n%gh===xr;n/=gh,r++);for(s=gh;s<t&&nDe(s,e,t)!==t-Kn;s++);if(r===1){const o=(t+Kn)/ok;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(n+Kn)/gh;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,s),n),d=a.pow(c,i),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(h);f<l&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const p=a.pow(u,Kn<<BigInt(l-f-1));u=a.sqr(p),d=a.mul(d,p),h=a.mul(h,u),l=f}return d}}function sDe(t){if(t%ok===tDe){const e=(t+Kn)/ok;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%U4===$4){const e=(t-$4)/U4;return function(r,s){const i=r.mul(s,gh),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,gh),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return rDe(t)}const iDe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function oDe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=iDe.reduce((r,s)=>(r[s]="function",r),e);return s1(t,n)}function aDe(t,e,n){if(n<xr)throw new Error("Expected power > 0");if(n===xr)return t.ONE;if(n===Kn)return e;let r=t.ONE,s=e;for(;n>xr;)n&Kn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Kn;return r}function cDe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function Aq(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function lDe(t,e,n=!1,r={}){if(t<=xr)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=Aq(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=sDe(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:A3(s),ZERO:xr,ONE:Kn,create:c=>ti(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return xr<=c&&c<t},is0:c=>c===xr,isOdd:c=>(c&Kn)===Kn,neg:c=>ti(-c,t),eql:(c,l)=>c===l,sqr:c=>ti(c*c,t),add:(c,l)=>ti(c+l,t),sub:(c,l)=>ti(c-l,t),mul:(c,l)=>ti(c*l,t),pow:(c,l)=>aDe(a,c,l),div:(c,l)=>ti(c*ak(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>ak(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>cDe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?C3(c,i):uy(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?_3(c):wf(c)}});return Object.freeze(a)}function Sq(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Iq(t){const e=Sq(t);return e+Math.ceil(e/2)}function uDe(t,e,n=!1){const r=t.length,s=Sq(e),i=Iq(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=n?wf(t):_3(t),a=ti(o,e-Kn)+Kn;return n?C3(a,s):uy(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dDe=BigInt(0),_I=BigInt(1);function hDe(t,e){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>dDe;)i&_I&&(o=o.add(a)),a=a.double(),i>>=_I;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),c=[];let l=s,u=l;for(let d=0;d<o;d++){u=l,c.push(u);for(let h=1;h<a;h++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=r(s);let l=t.ZERO,u=t.BASE;const d=BigInt(2**s-1),h=2**s,f=BigInt(s);for(let p=0;p<a;p++){const g=p*c;let y=Number(o&d);o>>=f,y>c&&(y-=h,o+=_I);const w=g,v=g+Math.abs(y)-1,b=p%2!==0,_=y<0;y===0?u=u.add(n(b,i[w])):l=l.add(n(_,i[v]))}return{p:l,f:u}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function Tq(t){return oDe(t.Fp),s1(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Aq(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function fDe(t){const e=Tq(t);s1(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:pDe,hexToBytes:gDe}=eDe,Oh={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Oh;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:pDe(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Oh,n=typeof t=="string"?gDe(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=Oh._parseInt(n.subarray(2)),{d:o,l:a}=Oh._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,o=s.length/2,a=n(i),c=n(o);return`30${n(o+i+4)}02${c}${s}02${a}${r}`}},Zc=BigInt(0),ho=BigInt(1);BigInt(2);const B4=BigInt(3);BigInt(4);function mDe(t){const e=fDe(t),{Fp:n}=e,r=e.toBytes||((p,g,y)=>{const w=g.toAffine();return Jb(Uint8Array.from([4]),n.toBytes(w.x),n.toBytes(w.y))}),s=e.fromBytes||(p=>{const g=p.subarray(1),y=n.fromBytes(g.subarray(0,n.BYTES)),w=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:y,y:w}});function i(p){const{a:g,b:y}=e,w=n.sqr(p),v=n.mul(w,p);return n.add(n.add(v,n.mul(p,g)),y)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&Zc<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:y,wrapPrivateKey:w,n:v}=e;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=cy(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(y*2,"0")}let b;try{b=typeof p=="bigint"?p:wf(jo("private key",p,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof p}`)}return w&&(b=ti(b,v)),a(b),b}const l=new Map;function u(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(g,y,w){if(this.px=g,this.py=y,this.pz=w,g==null||!n.isValid(g))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(w==null||!n.isValid(w))throw new Error("z required")}static fromAffine(g){const{x:y,y:w}=g||{};if(!g||!n.isValid(y)||!n.isValid(w))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const v=b=>n.eql(b,n.ZERO);return v(y)&&v(w)?d.ZERO:new d(y,w,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const y=n.invertBatch(g.map(w=>w.pz));return g.map((w,v)=>w.toAffine(y[v])).map(d.fromAffine)}static fromHex(g){const y=d.fromAffine(s(jo("pointHex",g)));return y.assertValidity(),y}static fromPrivateKey(g){return d.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y}=this.toAffine();if(!n.isValid(g)||!n.isValid(y))throw new Error("bad point: x or y not FE");const w=n.sqr(y),v=i(g);if(!n.eql(w,v))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:y,py:w,pz:v}=this,{px:b,py:_,pz:x}=g,C=n.eql(n.mul(y,x),n.mul(b,v)),S=n.eql(n.mul(w,x),n.mul(_,v));return C&&S}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:y}=e,w=n.mul(y,B4),{px:v,py:b,pz:_}=this;let x=n.ZERO,C=n.ZERO,S=n.ZERO,N=n.mul(v,v),A=n.mul(b,b),P=n.mul(_,_),R=n.mul(v,b);return R=n.add(R,R),S=n.mul(v,_),S=n.add(S,S),x=n.mul(g,S),C=n.mul(w,P),C=n.add(x,C),x=n.sub(A,C),C=n.add(A,C),C=n.mul(x,C),x=n.mul(R,x),S=n.mul(w,S),P=n.mul(g,P),R=n.sub(N,P),R=n.mul(g,R),R=n.add(R,S),S=n.add(N,N),N=n.add(S,N),N=n.add(N,P),N=n.mul(N,R),C=n.add(C,N),P=n.mul(b,_),P=n.add(P,P),N=n.mul(P,R),x=n.sub(x,N),S=n.mul(P,A),S=n.add(S,S),S=n.add(S,S),new d(x,C,S)}add(g){u(g);const{px:y,py:w,pz:v}=this,{px:b,py:_,pz:x}=g;let C=n.ZERO,S=n.ZERO,N=n.ZERO;const A=e.a,P=n.mul(e.b,B4);let R=n.mul(y,b),j=n.mul(w,_),H=n.mul(v,x),K=n.add(y,w),T=n.add(b,_);K=n.mul(K,T),T=n.add(R,j),K=n.sub(K,T),T=n.add(y,v);let I=n.add(b,x);return T=n.mul(T,I),I=n.add(R,H),T=n.sub(T,I),I=n.add(w,v),C=n.add(_,x),I=n.mul(I,C),C=n.add(j,H),I=n.sub(I,C),N=n.mul(A,T),C=n.mul(P,H),N=n.add(C,N),C=n.sub(j,N),N=n.add(j,N),S=n.mul(C,N),j=n.add(R,R),j=n.add(j,R),H=n.mul(A,H),T=n.mul(P,T),j=n.add(j,H),H=n.sub(R,H),H=n.mul(A,H),T=n.add(T,H),R=n.mul(j,T),S=n.add(S,R),R=n.mul(I,T),C=n.mul(K,C),C=n.sub(C,R),R=n.mul(K,j),N=n.mul(I,N),N=n.add(N,R),new d(C,S,N)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return f.wNAFCached(this,l,g,y=>{const w=n.invertBatch(y.map(v=>v.pz));return y.map((v,b)=>v.toAffine(w[b])).map(d.fromAffine)})}multiplyUnsafe(g){const y=d.ZERO;if(g===Zc)return y;if(a(g),g===ho)return this;const{endo:w}=e;if(!w)return f.unsafeLadder(this,g);let{k1neg:v,k1:b,k2neg:_,k2:x}=w.splitScalar(g),C=y,S=y,N=this;for(;b>Zc||x>Zc;)b&ho&&(C=C.add(N)),x&ho&&(S=S.add(N)),N=N.double(),b>>=ho,x>>=ho;return v&&(C=C.negate()),_&&(S=S.negate()),S=new d(n.mul(S.px,w.beta),S.py,S.pz),C.add(S)}multiply(g){a(g);let y=g,w,v;const{endo:b}=e;if(b){const{k1neg:_,k1:x,k2neg:C,k2:S}=b.splitScalar(y);let{p:N,f:A}=this.wNAF(x),{p:P,f:R}=this.wNAF(S);N=f.constTimeNegate(_,N),P=f.constTimeNegate(C,P),P=new d(n.mul(P.px,b.beta),P.py,P.pz),w=N.add(P),v=A.add(R)}else{const{p:_,f:x}=this.wNAF(y);w=_,v=x}return d.normalizeZ([w,v])[0]}multiplyAndAddUnsafe(g,y,w){const v=d.BASE,b=(x,C)=>C===Zc||C===ho||!x.equals(v)?x.multiplyUnsafe(C):x.multiply(C),_=b(this,y).add(b(g,w));return _.is0()?void 0:_}toAffine(g){const{px:y,py:w,pz:v}=this,b=this.is0();g==null&&(g=b?n.ONE:n.inv(v));const _=n.mul(y,g),x=n.mul(w,g),C=n.mul(v,g);if(b)return{x:n.ZERO,y:n.ZERO};if(!n.eql(C,n.ONE))throw new Error("invZ was invalid");return{x:_,y:x}}isTorsionFree(){const{h:g,isTorsionFree:y}=e;if(g===ho)return!0;if(y)return y(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:y}=e;return g===ho?this:y?y(d,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(d,this,g)}toHex(g=!0){return cy(this.toRawBytes(g))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=hDe(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function yDe(t){const e=Tq(t);return s1(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function wDe(t){const e=yDe(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(T){return Zc<T&&T<n.ORDER}function a(T){return ti(T,r)}function c(T){return ak(T,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=mDe({...e,toBytes(T,I,L){const U=I.toAffine(),$=n.toBytes(U.x),M=Jb;return L?M(Uint8Array.from([I.hasEvenY()?2:3]),$):M(Uint8Array.from([4]),$,n.toBytes(U.y))},fromBytes(T){const I=T.length,L=T[0],U=T.subarray(1);if(I===s&&(L===2||L===3)){const $=wf(U);if(!o($))throw new Error("Point is not on curve");const M=d($);let q=n.sqrt(M);const ee=(q&ho)===ho;return(L&1)===1!==ee&&(q=n.neg(q)),{x:$,y:q}}else if(I===i&&L===4){const $=n.fromBytes(U.subarray(0,n.BYTES)),M=n.fromBytes(U.subarray(n.BYTES,2*n.BYTES));return{x:$,y:M}}else throw new Error(`Point of length ${I} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=T=>cy(uy(T,e.nByteLength));function p(T){const I=r>>ho;return T>I}function g(T){return p(T)?a(-T):T}const y=(T,I,L)=>wf(T.slice(I,L));class w{constructor(I,L,U){this.r=I,this.s=L,this.recovery=U,this.assertValidity()}static fromCompact(I){const L=e.nByteLength;return I=jo("compactSignature",I,L*2),new w(y(I,0,L),y(I,L,2*L))}static fromDER(I){const{r:L,s:U}=Oh.toSig(jo("DER",I));return new w(L,U)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(I){return new w(this.r,this.s,I)}recoverPublicKey(I){const{r:L,s:U,recovery:$}=this,M=S(jo("msgHash",I));if($==null||![0,1,2,3].includes($))throw new Error("recovery id invalid");const q=$===2||$===3?L+e.n:L;if(q>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const ee=$&1?"03":"02",ce=l.fromHex(ee+f(q)),se=c(q),le=a(-M*se),me=a(U*se),Z=l.BASE.multiplyAndAddUnsafe(ce,le,me);if(!Z)throw new Error("point at infinify");return Z.assertValidity(),Z}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return ly(this.toDERHex())}toDERHex(){return Oh.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ly(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const v={isValidPrivateKey(T){try{return u(T),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const T=Iq(e.n);return uDe(e.randomBytes(T),e.n)},precompute(T=8,I=l.BASE){return I._setWindowSize(T),I.multiply(BigInt(3)),I}};function b(T,I=!0){return l.fromPrivateKey(T).toRawBytes(I)}function _(T){const I=T instanceof Uint8Array,L=typeof T=="string",U=(I||L)&&T.length;return I?U===s||U===i:L?U===2*s||U===2*i:T instanceof l}function x(T,I,L=!0){if(_(T))throw new Error("first arg must be private key");if(!_(I))throw new Error("second arg must be public key");return l.fromHex(I).multiply(u(T)).toRawBytes(L)}const C=e.bits2int||function(T){const I=wf(T),L=T.length*8-e.nBitLength;return L>0?I>>BigInt(L):I},S=e.bits2int_modN||function(T){return a(C(T))},N=A3(e.nBitLength);function A(T){if(typeof T!="bigint")throw new Error("bigint expected");if(!(Zc<=T&&T<N))throw new Error(`bigint expected < 2^${e.nBitLength}`);return uy(T,e.nByteLength)}function P(T,I,L=R){if(["recovered","canonical"].some(ae=>ae in L))throw new Error("sign() legacy options not supported");const{hash:U,randomBytes:$}=e;let{lowS:M,prehash:q,extraEntropy:ee}=L;M==null&&(M=!0),T=jo("msgHash",T),q&&(T=jo("prehashed msgHash",U(T)));const ce=S(T),se=u(I),le=[A(se),A(ce)];if(ee!=null){const ae=ee===!0?$(n.BYTES):ee;le.push(jo("extraEntropy",ae))}const me=Jb(...le),Z=ce;function re(ae){const oe=C(ae);if(!h(oe))return;const we=c(oe),Ge=l.BASE.multiply(oe).toAffine(),ve=a(Ge.x);if(ve===Zc)return;const Se=a(we*a(Z+ve*se));if(Se===Zc)return;let De=(Ge.x===ve?0:2)|Number(Ge.y&ho),tt=Se;return M&&p(Se)&&(tt=g(Se),De^=1),new w(ve,tt,De)}return{seed:me,k2sig:re}}const R={lowS:e.lowS,prehash:!1},j={lowS:e.lowS,prehash:!1};function H(T,I,L=R){const{seed:U,k2sig:$}=P(T,I,L),M=e;return Cq(M.hash.outputLen,M.nByteLength,M.hmac)(U,$)}l.BASE._setWindowSize(8);function K(T,I,L,U=j){var Ge;const $=T;if(I=jo("msgHash",I),L=jo("publicKey",L),"strict"in U)throw new Error("options.strict was renamed to lowS");const{lowS:M,prehash:q}=U;let ee,ce;try{if(typeof $=="string"||$ instanceof Uint8Array)try{ee=w.fromDER($)}catch(ve){if(!(ve instanceof Oh.Err))throw ve;ee=w.fromCompact($)}else if(typeof $=="object"&&typeof $.r=="bigint"&&typeof $.s=="bigint"){const{r:ve,s:Se}=$;ee=new w(ve,Se)}else throw new Error("PARSE");ce=l.fromHex(L)}catch(ve){if(ve.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(M&&ee.hasHighS())return!1;q&&(I=e.hash(I));const{r:se,s:le}=ee,me=S(I),Z=c(le),re=a(me*Z),ae=a(se*Z),oe=(Ge=l.BASE.multiplyAndAddUnsafe(ce,re,ae))==null?void 0:Ge.toAffine();return oe?a(oe.x)===se:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:x,sign:H,verify:K,ProjectivePoint:l,Signature:w,utils:v}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function bDe(t){return{hash:t,hmac:(e,...n)=>sq(t,e,o3e(...n)),randomBytes:a3e}}function vDe(t,e){const n=r=>wDe({...t,...bDe(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Nq=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),L4=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),EDe=BigInt(1),ck=BigInt(2),M4=(t,e)=>(t+e/ck)/e;function xDe(t){const e=Nq,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=Xi(u,n,e)*u%e,h=Xi(d,n,e)*u%e,f=Xi(h,ck,e)*l%e,p=Xi(f,s,e)*f%e,g=Xi(p,i,e)*p%e,y=Xi(g,a,e)*g%e,w=Xi(y,c,e)*y%e,v=Xi(w,a,e)*g%e,b=Xi(v,n,e)*u%e,_=Xi(b,o,e)*p%e,x=Xi(_,r,e)*l%e,C=Xi(x,ck,e);if(!lk.eql(lk.sqr(C),t))throw new Error("Cannot find square root");return C}const lk=lDe(Nq,void 0,void 0,{sqrt:xDe}),nu=vDe({a:BigInt(0),b:BigInt(7),Fp:lk,n:L4,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=L4,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-EDe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=M4(i*t,e),c=M4(-r*t,e);let l=ti(t-a*n-c*s,e),u=ti(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},oq);BigInt(0);nu.ProjectivePoint;const Zb="0x0000000000000000000000000000000000000000",j4="0x0000000000000000000000000000000000000000000000000000000000000000",F4=BigInt(0),z4=BigInt(1),H4=BigInt(2),G4=BigInt(27),W4=BigInt(28),IE=BigInt(35),Hp={};function q4(t){return _s(ur(t),32)}var im,om,am,Xh;const Lo=class Lo{constructor(e,n,r,s){G(this,im);G(this,om);G(this,am);G(this,Xh);n1(e,Hp,"Signature"),D(this,im,n),D(this,om,r),D(this,am,s),D(this,Xh,null)}get r(){return E(this,im)}set r(e){W($g(e)===32,"invalid r","value",e),D(this,im,Ae(e))}get s(){return E(this,om)}set s(e){W($g(e)===32,"invalid s","value",e);const n=Ae(e);W(parseInt(n.substring(0,3))<8,"non-canonical s","value",n),D(this,om,n)}get v(){return E(this,am)}set v(e){const n=ft(e,"value");W(n===27||n===28,"invalid v","v",e),D(this,am,n)}get networkV(){return E(this,Xh)}get legacyChainId(){const e=this.networkV;return e==null?null:Lo.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=mt(this.s);return this.yParity&&(e[0]|=128),Ae(e)}get compactSerialized(){return zn([this.r,this.yParityAndS])}get serialized(){return zn([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Lo(Hp,this.r,this.s,this.v);return this.networkV&&D(e,Xh,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){const n=He(e,"v");return n==G4||n==W4?F4:(W(n>=IE,"invalid EIP-155 v","v",e),(n-IE)/H4)}static getChainIdV(e,n){return He(e)*H4+BigInt(35+n-27)}static getNormalizedV(e){const n=He(e);return n===F4||n===G4?27:n===z4||n===W4?28:(W(n>=IE,"invalid v","v",e),n&z4?27:28)}static from(e){function n(l,u){W(l,u,"signature",e)}if(e==null)return new Lo(Hp,j4,j4,27);if(typeof e=="string"){const l=mt(e,"signature");if(l.length===64){const u=Ae(l.slice(0,32)),d=l.slice(32,64),h=d[0]&128?28:27;return d[0]&=127,new Lo(Hp,u,Ae(d),h)}if(l.length===65){const u=Ae(l.slice(0,32)),d=l.slice(32,64);n((d[0]&128)===0,"non-canonical s");const h=Lo.getNormalizedV(l[64]);return new Lo(Hp,u,Ae(d),h)}n(!1,"invalid raw signature length")}if(e instanceof Lo)return e.clone();const r=e.r;n(r!=null,"missing r");const s=q4(r),i=function(l,u){if(l!=null)return q4(l);if(u!=null){n(wn(u,32),"invalid yParityAndS");const d=mt(u);return d[0]&=127,Ae(d)}n(!1,"missing s")}(e.s,e.yParityAndS);n((mt(i)[0]&128)==0,"non-canonical s");const{networkV:o,v:a}=function(l,u,d){if(l!=null){const h=He(l);return{networkV:h>=IE?h:void 0,v:Lo.getNormalizedV(h)}}if(u!=null)return n(wn(u,32),"invalid yParityAndS"),{v:mt(u)[0]&128?28:27};if(d!=null){switch(ft(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new Lo(Hp,s,i,a);return o&&D(c,Xh,o),n(e.yParity==null||ft(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};im=new WeakMap,om=new WeakMap,am=new WeakMap,Xh=new WeakMap;let hi=Lo;var zc;const mh=class mh{constructor(e){G(this,zc);W($g(e)===32,"invalid private key","privateKey","[REDACTED]"),D(this,zc,Ae(e))}get privateKey(){return E(this,zc)}get publicKey(){return mh.computePublicKey(E(this,zc))}get compressedPublicKey(){return mh.computePublicKey(E(this,zc),!0)}sign(e){W($g(e)===32,"invalid digest length","digest",e);const n=nu.sign(Cs(e),Cs(E(this,zc)),{lowS:!0});return hi.from({r:Pd(n.r,32),s:Pd(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=mh.computePublicKey(e);return Ae(nu.getSharedSecret(Cs(E(this,zc)),mt(n),!1))}static computePublicKey(e,n){let r=mt(e,"key");if(r.length===32){const i=nu.getPublicKey(r,!!n);return Ae(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=nu.ProjectivePoint.fromHex(r);return Ae(s.toRawBytes(n))}static recoverPublicKey(e,n){W($g(e)===32,"invalid digest length","digest",e);const r=hi.from(n);let s=nu.Signature.fromCompact(Cs(zn([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(Cs(e));return W(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,r){const s=nu.ProjectivePoint.fromHex(mh.computePublicKey(e).substring(2)),i=nu.ProjectivePoint.fromHex(mh.computePublicKey(n).substring(2));return"0x"+s.add(i).toHex(!!r)}};zc=new WeakMap;let Xb=mh;const _De=BigInt(0),CDe=BigInt(36);function V4(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=e[s].charCodeAt(0);const r=mt(tr(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const S3={};for(let t=0;t<10;t++)S3[String(t)]=String(t);for(let t=0;t<26;t++)S3[String.fromCharCode(65+t)]=String(10+t);const K4=15;function ADe(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>S3[r]).join("");for(;e.length>=K4;){let r=e.substring(0,K4);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const SDe=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function IDe(t){t=t.toLowerCase();let e=_De;for(let n=0;n<t.length;n++)e=e*CDe+SDe[t[n]];return e}function Yt(t){if(W(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=V4(t);return W(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){W(t.substring(2,4)===ADe(t),"bad icap checksum","address",t);let e=IDe(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return V4("0x"+e)}W(!1,"invalid address","address",t)}function TDe(t){const e=Yt(t.from);let r=He(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,Yt(Mn(tr(Od([e,r])),12))}function Pq(t){return t&&typeof t.getAddress=="function"}async function CI(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(de(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),W(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),Yt(n)}function Ss(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?Yt(t):(de(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),CI(t,e.resolveName(t)));if(Pq(t))return CI(t,t.getAddress());if(t&&typeof t.then=="function")return CI(t,t);W(!1,"unsupported addressable value","target",t)}const kc={};function je(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new ls(kc,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function Lt(t,e){return new ls(kc,`bytes${e||""}`,t,{size:e})}const Q4=Symbol.for("_ethers_typed");var ef;const Oc=class Oc{constructor(e,n,r,s){J(this,"type");J(this,"value");G(this,ef);J(this,"_typedSymbol");s==null&&(s=null),n1(kc,e,"Typed"),Xe(this,{_typedSymbol:Q4,type:n,value:r}),D(this,ef,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return E(this,ef)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return E(this,ef)===!0?-1:E(this,ef)===!1?this.value.length:null}static from(e,n){return new Oc(kc,e,n)}static uint8(e){return je(e,8)}static uint16(e){return je(e,16)}static uint24(e){return je(e,24)}static uint32(e){return je(e,32)}static uint40(e){return je(e,40)}static uint48(e){return je(e,48)}static uint56(e){return je(e,56)}static uint64(e){return je(e,64)}static uint72(e){return je(e,72)}static uint80(e){return je(e,80)}static uint88(e){return je(e,88)}static uint96(e){return je(e,96)}static uint104(e){return je(e,104)}static uint112(e){return je(e,112)}static uint120(e){return je(e,120)}static uint128(e){return je(e,128)}static uint136(e){return je(e,136)}static uint144(e){return je(e,144)}static uint152(e){return je(e,152)}static uint160(e){return je(e,160)}static uint168(e){return je(e,168)}static uint176(e){return je(e,176)}static uint184(e){return je(e,184)}static uint192(e){return je(e,192)}static uint200(e){return je(e,200)}static uint208(e){return je(e,208)}static uint216(e){return je(e,216)}static uint224(e){return je(e,224)}static uint232(e){return je(e,232)}static uint240(e){return je(e,240)}static uint248(e){return je(e,248)}static uint256(e){return je(e,256)}static uint(e){return je(e,256)}static int8(e){return je(e,-8)}static int16(e){return je(e,-16)}static int24(e){return je(e,-24)}static int32(e){return je(e,-32)}static int40(e){return je(e,-40)}static int48(e){return je(e,-48)}static int56(e){return je(e,-56)}static int64(e){return je(e,-64)}static int72(e){return je(e,-72)}static int80(e){return je(e,-80)}static int88(e){return je(e,-88)}static int96(e){return je(e,-96)}static int104(e){return je(e,-104)}static int112(e){return je(e,-112)}static int120(e){return je(e,-120)}static int128(e){return je(e,-128)}static int136(e){return je(e,-136)}static int144(e){return je(e,-144)}static int152(e){return je(e,-152)}static int160(e){return je(e,-160)}static int168(e){return je(e,-168)}static int176(e){return je(e,-176)}static int184(e){return je(e,-184)}static int192(e){return je(e,-192)}static int200(e){return je(e,-200)}static int208(e){return je(e,-208)}static int216(e){return je(e,-216)}static int224(e){return je(e,-224)}static int232(e){return je(e,-232)}static int240(e){return je(e,-240)}static int248(e){return je(e,-248)}static int256(e){return je(e,-256)}static int(e){return je(e,-256)}static bytes1(e){return Lt(e,1)}static bytes2(e){return Lt(e,2)}static bytes3(e){return Lt(e,3)}static bytes4(e){return Lt(e,4)}static bytes5(e){return Lt(e,5)}static bytes6(e){return Lt(e,6)}static bytes7(e){return Lt(e,7)}static bytes8(e){return Lt(e,8)}static bytes9(e){return Lt(e,9)}static bytes10(e){return Lt(e,10)}static bytes11(e){return Lt(e,11)}static bytes12(e){return Lt(e,12)}static bytes13(e){return Lt(e,13)}static bytes14(e){return Lt(e,14)}static bytes15(e){return Lt(e,15)}static bytes16(e){return Lt(e,16)}static bytes17(e){return Lt(e,17)}static bytes18(e){return Lt(e,18)}static bytes19(e){return Lt(e,19)}static bytes20(e){return Lt(e,20)}static bytes21(e){return Lt(e,21)}static bytes22(e){return Lt(e,22)}static bytes23(e){return Lt(e,23)}static bytes24(e){return Lt(e,24)}static bytes25(e){return Lt(e,25)}static bytes26(e){return Lt(e,26)}static bytes27(e){return Lt(e,27)}static bytes28(e){return Lt(e,28)}static bytes29(e){return Lt(e,29)}static bytes30(e){return Lt(e,30)}static bytes31(e){return Lt(e,31)}static bytes32(e){return Lt(e,32)}static address(e){return new Oc(kc,"address",e)}static bool(e){return new Oc(kc,"bool",!!e)}static bytes(e){return new Oc(kc,"bytes",e)}static string(e){return new Oc(kc,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new Oc(kc,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===Q4}static dereference(e,n){if(Oc.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};ef=new WeakMap;let ls=Oc;class NDe extends Al{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=ls.dereference(n,"string");try{r=Yt(r)}catch(s){return this._throwError(s.message,n)}return e.writeValue(r)}decode(e){return Yt(Pd(e.readValue(),20))}}class PDe extends Al{constructor(n){super(n.name,n.type,"_",n.dynamic);J(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function kq(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(l=>{const u=l.localName;return de(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),de(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),c[u]=!0,n[u]})}else W(!1,"invalid tuple value","tuple",n);W(e.length===r.length,"types/value length mismatch","tuple",n);let s=new nk,i=new nk,o=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let d=i.length;c.encode(i,u);let h=s.writeUpdatableValue();o.push(f=>{h(f+d)})}else c.encode(s,u)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function Oq(t,e){let n=[],r=[],s=t.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(l){if(Lr(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if(Lr(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");n.push(o),r.push(i.localName||null)}),oy.fromItems(n,r)}class kDe extends Al{constructor(n,r,s){const i=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",i,s,o);J(this,"coder");J(this,"length");Xe(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(n);return r}encode(n,r){const s=ls.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,n.writeValue(s.length)),FW(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return kq(n,o,s)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),de(r*As<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*As,length:n.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new PDe(this.coder));return Oq(n,s)}}class ODe extends Al{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=ls.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class Rq extends Al{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=Cs(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class RDe extends Rq{constructor(e){super("bytes",e)}decode(e){return Ae(super.decode(e))}}class DDe extends Al{constructor(n,r){let s="bytes"+String(n);super(s,s,r,!1);J(this,"size");Xe(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let s=Cs(ls.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(s)}decode(n){return Ae(n.readBytes(this.size))}}const $De=new Uint8Array([]);class UDe extends Al{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes($De)}decode(e){return e.readBytes(0),null}}const BDe=BigInt(0),LDe=BigInt(1),MDe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class jDe extends Al{constructor(n,r,s){const i=(r?"int":"uint")+n*8;super(i,i,s,!1);J(this,"size");J(this,"signed");Xe(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let s=He(ls.dereference(r,this.type)),i=kh(MDe,As*8);if(this.signed){let o=kh(i,this.size*8-1);(s>o||s<-(o+LDe))&&this._throwError("value out-of-bounds",r),s=GW(s,8*As)}else(s<BDe||s>kh(i,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(s)}decode(n){let r=kh(n.readValue(),this.size*8);return this.signed&&(r=R_(r,this.size*8)),r}}class FDe extends Rq{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,cl(ls.dereference(n,"string")))}decode(e){return D_(super.decode(e))}}class TE extends Al{constructor(n,r){let s=!1;const i=[];n.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,r,s);J(this,"coders");Xe(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(s=>{n.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[i]))}),Object.freeze(n)}encode(n,r){const s=ls.dereference(r,"tuple");return kq(n,this.coders,s)}decode(n){return Oq(n,this.coders)}}function AI(t,e){return{address:Yt(t),storageKeys:e.map((n,r)=>(W(wn(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function up(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(W(n.length===2,"invalid slot set",`value[${r}]`,n),AI(n[0],n[1])):(W(n!=null&&typeof n=="object","invalid address-slot set","value",t),AI(n.address,n.storageKeys)));W(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((s,i)=>(s[i]=!0,s),{});return AI(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function Dq(t){return{address:Yt(t.address),nonce:He(t.nonce!=null?t.nonce:0),chainId:He(t.chainId!=null?t.chainId:0),signature:hi.from(t.signature)}}function zDe(t){let e;return typeof t=="string"?e=Xb.computePublicKey(t,!1):e=t.publicKey,Yt(tr("0x"+e.substring(4)).substring(26))}function HDe(t,e){return zDe(Xb.recoverPublicKey(t,e))}const wr=BigInt(0),GDe=BigInt(2),WDe=BigInt(27),qDe=BigInt(28),VDe=BigInt(35),KDe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),SI=4096*32;function QDe(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return mt(t.blobToKzgCommitment(Ae(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return mt(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return mt(t.blobToKZGCommitment(Ae(r)));W(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return mt(t.computeBlobProof(Ae(r),Ae(s)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return mt(t.computeBlobKZGProof(Ae(r),Ae(s)));W(!1,"unsupported KZG library","kzg",t)}}}function Y4(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=My(e).substring(4),"0x"+n}function jy(t){return t==="0x"?null:Yt(t)}function RA(t,e){try{return up(t)}catch(n){W(!1,n.message,e,t)}}function YDe(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const s=t[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);n.push({address:jy(s[1]),nonce:ln(s[2],"nonce"),chainId:ln(s[0],"chainId"),signature:hi.from({yParity:dp(s[3],"yParity"),r:_s(s[4],32),s:_s(s[5],32)})})}return n}catch(n){W(!1,n.message,e,t)}}function dp(t,e){return t==="0x"?0:ft(t,e)}function ln(t,e){if(t==="0x")return wr;const n=He(t,e);return W(n<=KDe,"value exceeds uint size",e,n),n}function St(t,e){const n=He(t,"value"),r=ur(n);return W(r.length<=32,"value too large",`tx.${e}`,n),r}function DA(t){return up(t).map(e=>[e.address,e.storageKeys])}function JDe(t){return t.map(e=>[St(e.chainId,"chainId"),e.address,St(e.nonce,"nonce"),St(e.signature.yParity,"yParity"),ur(e.signature.r),ur(e.signature.s)])}function ZDe(t,e){W(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)W(wn(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function XDe(t){const e=r1(t);W(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:dp(e[0],"nonce"),gasPrice:ln(e[1],"gasPrice"),gasLimit:ln(e[2],"gasLimit"),to:jy(e[3]),value:ln(e[4],"value"),data:Ae(e[5]),chainId:wr};if(e.length===6)return n;const r=ln(e[6],"v"),s=ln(e[7],"r"),i=ln(e[8],"s");if(s===wr&&i===wr)n.chainId=r;else{let o=(r-VDe)/GDe;o<wr&&(o=wr),n.chainId=o,W(o!==wr||r===WDe||r===qDe,"non-canonical legacy v","v",e[6]),n.signature=hi.from({r:_s(e[7],32),s:_s(e[8],32),v:r})}return n}function e$e(t,e){const n=[St(t.nonce,"nonce"),St(t.gasPrice||0,"gasPrice"),St(t.gasLimit,"gasLimit"),t.to||"0x",St(t.value,"value"),t.data];let r=wr;if(t.chainId!=wr)r=He(t.chainId,"tx.chainId"),W(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==wr&&(n.push(ur(r)),n.push("0x"),n.push("0x")),Od(n);let s=BigInt(27+e.yParity);return r!==wr?s=hi.getChainIdV(r,e.v):BigInt(e.v)!==s&&W(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(ur(s)),n.push(ur(e.r)),n.push(ur(e.s)),Od(n)}function $A(t,e){let n;try{if(n=dp(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{W(!1,"invalid yParity","yParity",e[0])}const r=_s(e[1],32),s=_s(e[2],32),i=hi.from({r,s,yParity:n});t.signature=i}function t$e(t){const e=r1(mt(t).slice(1));W(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Ae(t));const n={type:2,chainId:ln(e[0],"chainId"),nonce:dp(e[1],"nonce"),maxPriorityFeePerGas:ln(e[2],"maxPriorityFeePerGas"),maxFeePerGas:ln(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:ln(e[4],"gasLimit"),to:jy(e[5]),value:ln(e[6],"value"),data:Ae(e[7]),accessList:RA(e[8],"accessList")};return e.length===9||$A(n,e.slice(9)),n}function n$e(t,e){const n=[St(t.chainId,"chainId"),St(t.nonce,"nonce"),St(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),St(t.maxFeePerGas||0,"maxFeePerGas"),St(t.gasLimit,"gasLimit"),t.to||"0x",St(t.value,"value"),t.data,DA(t.accessList||[])];return e&&(n.push(St(e.yParity,"yParity")),n.push(ur(e.r)),n.push(ur(e.s))),zn(["0x02",Od(n)])}function r$e(t){const e=r1(mt(t).slice(1));W(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Ae(t));const n={type:1,chainId:ln(e[0],"chainId"),nonce:dp(e[1],"nonce"),gasPrice:ln(e[2],"gasPrice"),gasLimit:ln(e[3],"gasLimit"),to:jy(e[4]),value:ln(e[5],"value"),data:Ae(e[6]),accessList:RA(e[7],"accessList")};return e.length===8||$A(n,e.slice(8)),n}function s$e(t,e){const n=[St(t.chainId,"chainId"),St(t.nonce,"nonce"),St(t.gasPrice||0,"gasPrice"),St(t.gasLimit,"gasLimit"),t.to||"0x",St(t.value,"value"),t.data,DA(t.accessList||[])];return e&&(n.push(St(e.yParity,"recoveryParam")),n.push(ur(e.r)),n.push(ur(e.s))),zn(["0x01",Od(n)])}function i$e(t){let e=r1(mt(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const i=e[1],o=e[2],a=e[3];W(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),W(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),W(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),W(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),W(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:i[c],commitment:o[c],proof:a[c]});e=e[0]}W(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",Ae(t));const s={type:3,chainId:ln(e[0],"chainId"),nonce:dp(e[1],"nonce"),maxPriorityFeePerGas:ln(e[2],"maxPriorityFeePerGas"),maxFeePerGas:ln(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:ln(e[4],"gasLimit"),to:jy(e[5]),value:ln(e[6],"value"),data:Ae(e[7]),accessList:RA(e[8],"accessList"),maxFeePerBlobGas:ln(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(s.blobs=r),W(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),W(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<s.blobVersionedHashes.length;i++)W(wn(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||$A(s,e.slice(11)),s}function o$e(t,e,n){const r=[St(t.chainId,"chainId"),St(t.nonce,"nonce"),St(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),St(t.maxFeePerGas||0,"maxFeePerGas"),St(t.gasLimit,"gasLimit"),t.to||Zb,St(t.value,"value"),t.data,DA(t.accessList||[]),St(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),ZDe(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(St(e.yParity,"yParity")),r.push(ur(e.r)),r.push(ur(e.s)),n)?zn(["0x03",Od([r,n.map(s=>s.data),n.map(s=>s.commitment),n.map(s=>s.proof)])]):zn(["0x03",Od(r)])}function a$e(t){const e=r1(mt(t).slice(1));W(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Ae(t));const n={type:4,chainId:ln(e[0],"chainId"),nonce:dp(e[1],"nonce"),maxPriorityFeePerGas:ln(e[2],"maxPriorityFeePerGas"),maxFeePerGas:ln(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:ln(e[4],"gasLimit"),to:jy(e[5]),value:ln(e[6],"value"),data:Ae(e[7]),accessList:RA(e[8],"accessList"),authorizationList:YDe(e[9],"authorizationList")};return e.length===10||$A(n,e.slice(10)),n}function c$e(t,e){const n=[St(t.chainId,"chainId"),St(t.nonce,"nonce"),St(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),St(t.maxFeePerGas||0,"maxFeePerGas"),St(t.gasLimit,"gasLimit"),t.to||"0x",St(t.value,"value"),t.data,DA(t.accessList||[]),JDe(t.authorizationList||[])];return e&&(n.push(St(e.yParity,"yParity")),n.push(ur(e.r)),n.push(ur(e.s))),zn(["0x04",Od(n)])}var qo,cm,lm,um,dm,hm,fm,pm,gm,mm,ym,wm,tf,Ou,Ma,Ru,bm,vm,hx;const Ra=class Ra{constructor(){G(this,vm);G(this,qo);G(this,cm);G(this,lm);G(this,um);G(this,dm);G(this,hm);G(this,fm);G(this,pm);G(this,gm);G(this,mm);G(this,ym);G(this,wm);G(this,tf);G(this,Ou);G(this,Ma);G(this,Ru);G(this,bm);D(this,qo,null),D(this,cm,null),D(this,um,0),D(this,dm,wr),D(this,hm,null),D(this,fm,null),D(this,pm,null),D(this,lm,"0x"),D(this,gm,wr),D(this,mm,wr),D(this,ym,null),D(this,wm,null),D(this,tf,null),D(this,Ou,null),D(this,Ma,null),D(this,Ru,null),D(this,bm,null)}get type(){return E(this,qo)}set type(e){switch(e){case null:D(this,qo,null);break;case 0:case"legacy":D(this,qo,0);break;case 1:case"berlin":case"eip-2930":D(this,qo,1);break;case 2:case"london":case"eip-1559":D(this,qo,2);break;case 3:case"cancun":case"eip-4844":D(this,qo,3);break;case 4:case"pectra":case"eip-7702":D(this,qo,4);break;default:W(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=E(this,cm);return e==null&&this.type===3?Zb:e}set to(e){D(this,cm,e==null?null:Yt(e))}get nonce(){return E(this,um)}set nonce(e){D(this,um,ft(e,"value"))}get gasLimit(){return E(this,dm)}set gasLimit(e){D(this,dm,He(e))}get gasPrice(){const e=E(this,hm);return e==null&&(this.type===0||this.type===1)?wr:e}set gasPrice(e){D(this,hm,e==null?null:He(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=E(this,fm);return e??(this.type===2||this.type===3?wr:null)}set maxPriorityFeePerGas(e){D(this,fm,e==null?null:He(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=E(this,pm);return e??(this.type===2||this.type===3?wr:null)}set maxFeePerGas(e){D(this,pm,e==null?null:He(e,"maxFeePerGas"))}get data(){return E(this,lm)}set data(e){D(this,lm,Ae(e))}get value(){return E(this,gm)}set value(e){D(this,gm,He(e,"value"))}get chainId(){return E(this,mm)}set chainId(e){D(this,mm,He(e))}get signature(){return E(this,ym)||null}set signature(e){D(this,ym,e==null?null:hi.from(e))}get accessList(){const e=E(this,wm)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){D(this,wm,e==null?null:up(e))}get authorizationList(){const e=E(this,bm)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){D(this,bm,e==null?null:e.map(n=>Dq(n)))}get maxFeePerBlobGas(){const e=E(this,tf);return e==null&&this.type===3?wr:e}set maxFeePerBlobGas(e){D(this,tf,e==null?null:He(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=E(this,Ou);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){W(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)W(wn(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}D(this,Ou,e)}get blobs(){return E(this,Ru)==null?null:E(this,Ru).map(e=>Object.assign({},e))}set blobs(e){if(e==null){D(this,Ru,null);return}const n=[],r=[];for(let s=0;s<e.length;s++){const i=e[s];if(y3(i)){de(E(this,Ma),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=mt(i);if(W(o.length<=SI,"blob is too large",`blobs[${s}]`,i),o.length!==SI){const l=new Uint8Array(SI);l.set(o),o=l}const a=E(this,Ma).blobToKzgCommitment(o),c=Ae(E(this,Ma).computeBlobKzgProof(o,a));n.push({data:Ae(o),commitment:Ae(a),proof:c}),r.push(Y4(1,a))}else{const o=Ae(i.commitment);n.push({data:Ae(i.data),commitment:o,proof:Ae(i.proof)}),r.push(Y4(1,o))}}D(this,Ru,n),D(this,Ou,r)}get kzg(){return E(this,Ma)}set kzg(e){e==null?D(this,Ma,null):D(this,Ma,QDe(e))}get hash(){return this.signature==null?null:tr(ne(this,vm,hx).call(this,!0,!1))}get unsignedHash(){return tr(this.unsignedSerialized)}get from(){return this.signature==null?null:HDe(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:Xb.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return ne(this,vm,hx).call(this,!0,!0)}get unsignedSerialized(){return ne(this,vm,hx).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=E(this,tf)!=null||E(this,Ou);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&de(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),de(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),de(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Ra.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new Ra;if(typeof e=="string"){const r=mt(e);if(r[0]>=127)return Ra.from(XDe(r));switch(r[0]){case 1:return Ra.from(r$e(r));case 2:return Ra.from(t$e(r));case 3:return Ra.from(i$e(r));case 4:return Ra.from(a$e(r))}de(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new Ra;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=hi.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(W(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),W(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(W(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),W(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};qo=new WeakMap,cm=new WeakMap,lm=new WeakMap,um=new WeakMap,dm=new WeakMap,hm=new WeakMap,fm=new WeakMap,pm=new WeakMap,gm=new WeakMap,mm=new WeakMap,ym=new WeakMap,wm=new WeakMap,tf=new WeakMap,Ou=new WeakMap,Ma=new WeakMap,Ru=new WeakMap,bm=new WeakMap,vm=new WeakSet,hx=function(e,n){de(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return e$e(this,r);case 1:return s$e(this,r);case 2:return n$e(this,r);case 3:return o$e(this,r,n?this.blobs:null);case 4:return c$e(this,r)}de(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let B_=Ra;function Gf(t){return tr(cl(t))}var l$e="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const J4=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),Z4=4;function u$e(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),s=1,i=[0,1];for(let x=1;x<r;x++)i.push(s+=n());let o=n(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const d=31,h=2**d,f=h>>>1,p=f>>1,g=h-1;let y=0;for(let x=0;x<d;x++)y=y<<1|u();let w=[],v=0,b=h;for(;;){let x=Math.floor(((y-v+1)*s-1)/b),C=0,S=r;for(;S-C>1;){let P=C+S>>>1;x<i[P]?S=P:C=P}if(C==0)break;w.push(C);let N=v+Math.floor(b*i[C]/s),A=v+Math.floor(b*i[C+1]/s)-1;for(;!((N^A)&f);)y=y<<1&g|u(),N=N<<1&g,A=A<<1&g|1;for(;N&~A&p;)y=y&f|y<<1&g>>>1|u(),N=N<<1^f,A=(A^f)<<1|f|1;v=N,b=1+A-N}let _=r-4;return w.map(x=>{switch(x-_){case 3:return _+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return _+256+(t[a++]<<8|t[a++]);case 1:return _+t[a++];default:return x-1}})}function d$e(t){let e=0;return()=>t[e++]}function $q(t){return d$e(u$e(h$e(t)))}function h$e(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let n=t.length,r=new Uint8Array(6*n>>3);for(let s=0,i=0,o=0,a=0;s<n;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(r[i++]=a>>(o-=8));return r}function f$e(t){return t&1?~t>>1:t>>1}function p$e(t,e){let n=Array(t);for(let r=0,s=0;r<t;r++)n[r]=s+=f$e(e());return n}function ev(t,e=0){let n=[];for(;;){let r=t(),s=t();if(!s)break;e+=r;for(let i=0;i<s;i++)n.push(e+i);e+=s+1}return n}function Uq(t){return tv(()=>{let e=ev(t);if(e.length)return e})}function Bq(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(g$e(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(m$e(n,t))}return e.flat()}function tv(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function Lq(t,e,n){let r=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)p$e(t,n).forEach((i,o)=>r[o].push(i));return r}function g$e(t,e){let n=1+e(),r=e(),s=tv(e);return Lq(s.length,1+t,e).flatMap((o,a)=>{let[c,...l]=o;return Array(s[a]).fill().map((u,d)=>{let h=d*r;return[c+d*n,l.map(f=>f+h)]})})}function m$e(t,e){let n=1+e();return Lq(n,1+t,e).map(s=>[s[0],s.slice(1)])}function y$e(t){let e=[],n=ev(t);return s(r([]),[]),e;function r(i){let o=t(),a=tv(()=>{let c=ev(t).map(l=>n[l]);if(c.length)return r(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let l of o)for(let u of l.Q)s(l,[...a,u],c)}}}function w$e(t){return t.toString(16).toUpperCase().padStart(2,"0")}function Mq(t){return`{${w$e(t)}}`}function b$e(t){let e=[];for(let n=0,r=t.length;n<r;){let s=t.codePointAt(n);n+=s<65536?1:2,e.push(s)}return e}function dy(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let s=0;s<n;)r.push(String.fromCodePoint(...t.slice(s,s+=4096)));return r.join("")}function v$e(t,e){let n=t.length,r=n-e.length;for(let s=0;r==0&&s<n;s++)r=t[s]-e[s];return r}var E$e="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const nv=44032,L_=4352,M_=4449,j_=4519,jq=19,Fq=21,hy=28,F_=Fq*hy,x$e=jq*F_,_$e=nv+x$e,C$e=L_+jq,A$e=M_+Fq,S$e=j_+hy;function V0(t){return t>>24&255}function zq(t){return t&16777215}let uk,X4,dk,fx;function I$e(){let t=$q(E$e);uk=new Map(Uq(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),X4=new Set(ev(t)),dk=new Map,fx=new Map;for(let[e,n]of Bq(t)){if(!X4.has(e)&&n.length==2){let[r,s]=n,i=fx.get(r);i||(i=new Map,fx.set(r,i)),i.set(s,e)}dk.set(e,n.reverse())}}function Hq(t){return t>=nv&&t<_$e}function T$e(t,e){if(t>=L_&&t<C$e&&e>=M_&&e<A$e)return nv+(t-L_)*F_+(e-M_)*hy;if(Hq(t)&&e>j_&&e<S$e&&(t-nv)%hy==0)return t+(e-j_);{let n=fx.get(t);return n&&(n=n.get(e),n)?n:-1}}function Gq(t){uk||I$e();let e=[],n=[],r=!1;function s(i){let o=uk.get(i);o&&(r=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(Hq(i)){let o=i-nv,a=o/F_|0,c=o%F_/hy|0,l=o%hy;s(L_+a),s(M_+c),l>0&&s(j_+l)}else{let o=dk.get(i);o?n.push(...o):s(i)}if(!n.length)break;i=n.pop()}if(r&&e.length>1){let i=V0(e[0]);for(let o=1;o<e.length;o++){let a=V0(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(i=V0(e[--c]),i<=a))break}i=V0(e[o])}}return e}function N$e(t){let e=[],n=[],r=-1,s=0;for(let i of t){let o=V0(i),a=zq(i);if(r==-1)o==0?r=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),s=o;else{let c=T$e(r,a);c>=0?r=c:s==0&&o==0?(e.push(r),r=a):(n.push(a),s=o)}}return r>=0&&e.push(r,...n),e}function Wq(t){return Gq(t).map(zq)}function P$e(t){return N$e(Gq(t))}const eB=45,qq=".",Vq=65039,Kq=1,z_=t=>Array.from(t);function rv(t,e){return t.P.has(e)||t.Q.has(e)}class k$e extends Array{get is_emoji(){return!0}}let hk,Qq,Rh,fk,Yq,Bg,II,Jp,ch,tB,pk;function I3(){if(hk)return;let t=$q(l$e);const e=()=>ev(t),n=()=>new Set(e()),r=(u,d)=>d.forEach(h=>u.add(h));hk=new Map(Bq(t)),Qq=n(),Rh=e(),fk=new Set(e().map(u=>Rh[u])),Rh=new Set(Rh),Yq=n(),n();let s=Uq(t),i=t();const o=()=>{let u=new Set;return e().forEach(d=>r(u,s[d])),r(u,e()),u};Bg=tv(u=>{let d=tv(t).map(h=>h+96);if(d.length){let h=u>=i;d[0]-=32,d=dy(d),h&&(d=`Restricted[${d}]`);let f=o(),p=o(),g=!t();return{N:d,P:f,Q:p,M:g,R:h}}}),II=n(),Jp=new Map;let a=e().concat(z_(II)).sort((u,d)=>u-d);a.forEach((u,d)=>{let h=t(),f=a[d]=h?a[d-h]:{V:[],M:new Map};f.V.push(u),II.has(u)||Jp.set(u,f)});for(let{V:u,M:d}of new Set(Jp.values())){let h=[];for(let p of u){let g=Bg.filter(w=>rv(w,p)),y=h.find(({G:w})=>g.some(v=>w.has(v)));y||(y={G:new Set,V:[]},h.push(y)),y.V.push(p),r(y.G,g)}let f=h.flatMap(p=>z_(p.G));for(let{G:p,V:g}of h){let y=new Set(f.filter(w=>!p.has(w)));for(let w of g)d.set(w,y)}}ch=new Set;let c=new Set;const l=u=>ch.has(u)?c.add(u):ch.add(u);for(let u of Bg){for(let d of u.P)l(d);for(let d of u.Q)l(d)}for(let u of ch)!Jp.has(u)&&!c.has(u)&&Jp.set(u,Kq);r(ch,Wq(ch)),tB=y$e(t).map(u=>k$e.from(u)).sort(v$e),pk=new Map;for(let u of tB){let d=[pk];for(let h of u){let f=d.map(p=>{let g=p.get(h);return g||(g=new Map,p.set(h,g)),g});h===Vq?d.push(...f):d=f}for(let h of d)h.V=u}}function T3(t){return(Jq(t)?"":`${N3(UA([t]))} `)+Mq(t)}function N3(t){return`"${t}"‎`}function O$e(t){if(t.length>=4&&t[2]==eB&&t[3]==eB)throw new Error(`invalid label extension: "${dy(t.slice(0,4))}"`)}function R$e(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function D$e(t){let e=t[0],n=J4.get(e);if(n)throw Nw(`leading ${n}`);let r=t.length,s=-1;for(let i=1;i<r;i++){e=t[i];let o=J4.get(e);if(o){if(s==i)throw Nw(`${n} + ${o}`);s=i+1,n=o}}if(s==r)throw Nw(`trailing ${n}`)}function UA(t,e=1/0,n=Mq){let r=[];$$e(t[0])&&r.push("◌"),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];Jq(a)&&(r.push(dy(t.slice(s,o))),r.push(n(a)),s=o+1)}return r.push(dy(t.slice(s,i))),r.join("")}function $$e(t){return I3(),Rh.has(t)}function Jq(t){return I3(),Yq.has(t)}function U$e(t){return j$e(B$e(t,P$e,H$e))}function B$e(t,e,n){if(!t)return[];I3();let r=0;return t.split(qq).map(s=>{let i=b$e(s),o={input:i,offset:r};r+=i.length+1;try{let a=o.tokens=z$e(i,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(R$e(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(h=>h<128))O$e(u),l="ASCII";else{let h=a.flatMap(f=>f.is_emoji?[]:f);if(!h.length)l="Emoji";else{if(Rh.has(u[0]))throw Nw("leading combining mark");for(let g=1;g<c;g++){let y=a[g];if(!y.is_emoji&&Rh.has(y[0]))throw Nw(`emoji + combining mark: "${dy(a[g-1])} + ${UA([y[0]])}"`)}D$e(u);let f=z_(new Set(h)),[p]=M$e(f);F$e(p,h),L$e(p,f),l=p.N}}o.type=l}catch(a){o.error=a}return o})}function L$e(t,e){let n,r=[];for(let s of e){let i=Jp.get(s);if(i===Kq)return;if(i){let o=i.M.get(s);if(n=n?n.filter(a=>o.has(a)):z_(o),!n.length)return}else r.push(s)}if(n){for(let s of n)if(r.every(i=>rv(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function M$e(t){let e=Bg;for(let n of t){let r=e.filter(s=>rv(s,n));if(!r.length)throw Bg.some(s=>rv(s,n))?Xq(e[0],n):Zq(n);if(e=r,r.length==1)break}return e}function j$e(t){return t.map(({input:e,error:n,output:r})=>{if(n){let s=n.message;throw new Error(t.length==1?s:`Invalid label ${N3(UA(e,63))}: ${s}`)}return dy(r)}).join(qq)}function Zq(t){return new Error(`disallowed character: ${T3(t)}`)}function Xq(t,e){let n=T3(e),r=Bg.find(s=>s.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function Nw(t){return new Error(`illegal placement: ${t}`)}function F$e(t,e){for(let n of e)if(!rv(t,n))throw Xq(t,n);if(t.M){let n=Wq(e);for(let r=1,s=n.length;r<s;r++)if(fk.has(n[r])){let i=r+1;for(let o;i<s&&fk.has(o=n[i]);i++)for(let a=r;a<i;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${T3(o)}`);if(i-r>Z4)throw new Error(`excessive non-spacing marks: ${N3(UA(n.slice(r-1,i)))} (${i-r}/${Z4})`);r=i}}}function z$e(t,e,n){let r=[],s=[];for(t=t.slice().reverse();t.length;){let i=G$e(t);if(i)s.length&&(r.push(e(s)),s=[]),r.push(n(i));else{let o=t.pop();if(ch.has(o))s.push(o);else{let a=hk.get(o);if(a)s.push(...a);else if(!Qq.has(o))throw Zq(o)}}}return s.length&&r.push(e(s)),r}function H$e(t){return t.filter(e=>e!=Vq)}function G$e(t,e){let n=pk,r,s=t.length;for(;s&&(n=n.get(t[--s]),!!n);){let{V:i}=n;i&&(r=i,t.length=s)}return r}const eV=new Uint8Array(32);eV.fill(0);function nB(t){return W(t.length!==0,"invalid ENS name; empty component","comp",t),t}function tV(t){const e=cl(W$e(t)),n=[];if(t.length===0)return n;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(n.push(nB(e.slice(r,s))),r=s+1);return W(r<e.length,"invalid ENS name; empty component","name",t),n.push(nB(e.slice(r))),n}function W$e(t){try{if(t.length===0)throw new Error("empty label");return U$e(t)}catch(e){W(!1,`invalid ENS name (${e.message})`,"name",t)}}function gk(t){W(typeof t=="string","invalid ENS name; not a string","name",t),W(t.length,"invalid ENS name (empty label)","name",t);let e=eV;const n=tV(t);for(;n.length;)e=tr(zn([e,tr(n.pop())]));return Ae(e)}function q$e(t,e){const n=e;return W(n<=255,"DNS encoded label cannot exceed 255","length",n),Ae(zn(tV(t).map(r=>{W(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const nV=new Uint8Array(32);nV.fill(0);const V$e=BigInt(-1),rV=BigInt(0),sV=BigInt(1),K$e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Q$e(t){const e=mt(t),n=e.length%32;return n?zn([e,nV.slice(n)]):Ae(e)}const Y$e=Pd(sV,32),J$e=Pd(rV,32),rB={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},TI=["name","version","chainId","verifyingContract","salt"];function sB(t){return function(e){return W(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const Z$e={name:sB("name"),version:sB("version"),chainId:function(t){const e=He(t,"domain.chainId");return W(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):ea(e)},verifyingContract:function(t){try{return Yt(t).toLowerCase()}catch{}W(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=mt(t,"domain.salt");return W(e.length===32,'invalid domain value "salt"',"domain.salt",t),Ae(e)}};function NI(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);W(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const s=kh(K$e,n?r-1:r),i=n?(s+sV)*V$e:rV;return function(o){const a=He(o,"value");return W(a>=i&&a<=s,`value out-of-bounds for ${t}`,"value",a),Pd(n?GW(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return W(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const s=mt(r);return W(s.length===n,`invalid length for ${t}`,"value",r),Q$e(r)}}}switch(t){case"address":return function(e){return _s(Yt(e),32)};case"bool":return function(e){return e?Y$e:J$e};case"bytes":return function(e){return tr(e)};case"string":return function(e){return Gf(e)}}return null}function iB(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function NE(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var gv,Hc,Em,Q_,iV;const ro=class ro{constructor(e){G(this,Q_);J(this,"primaryType");G(this,gv);G(this,Hc);G(this,Em);D(this,Hc,new Map),D(this,Em,new Map);const n=new Map,r=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:l,type:u})=>{let{base:d,index:h}=NE(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:l,type:d+(h||"")}}),n.set(c,new Set),r.set(c,[]),s.set(c,new Set)}),D(this,gv,JSON.stringify(i));for(const c in i){const l=new Set;for(const u of i[c]){W(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const d=NE(u.type).base;W(d!==c,`circular type reference to ${JSON.stringify(d)}`,"types",e),!NI(d)&&(W(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),r.get(d).push(c),n.get(c).add(d))}}const o=Array.from(r.keys()).filter(c=>r.get(c).length===0);W(o.length!==0,"missing primary type","types",e),W(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),Xe(this,{primaryType:o[0]});function a(c,l){W(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of n.get(c))if(r.has(u)){a(u,l);for(const d of l)s.get(d).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of s){const u=Array.from(l);u.sort(),E(this,Hc).set(c,iB(c,i[c])+u.map(d=>iB(d,i[d])).join(""))}}get types(){return JSON.parse(E(this,gv))}getEncoder(e){let n=E(this,Em).get(e);return n||(n=ne(this,Q_,iV).call(this,e),E(this,Em).set(e,n)),n}encodeType(e){const n=E(this,Hc).get(e);return W(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return tr(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(NI(e))return r(e,n);const s=NE(e).array;if(s)return W(s.count===-1||s.count===n.length,`array length mismatch; expected length ${s.count}`,"value",n),n.map(o=>this._visit(s.prefix,o,r));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,n[a],r),o),{});W(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new ro(e)}static getPrimaryType(e){return ro.from(e).primaryType}static hashStruct(e,n,r){return ro.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const s=rB[r];W(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:s})}return n.sort((r,s)=>TI.indexOf(r.name)-TI.indexOf(s.name)),ro.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return zn(["0x1901",ro.hashDomain(e),ro.from(n).hash(r)])}static hash(e,n,r){return tr(ro.encode(e,n,r))}static async resolveNames(e,n,r,s){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!wn(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=ro.from(n);o.visit(r,(a,c)=>(a==="address"&&!wn(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:r}}static getPayload(e,n,r){ro.hashDomain(e);const s={},i=[];TI.forEach(c=>{const l=e[c];l!=null&&(s[c]=Z$e[c](l),i.push({name:c,type:rB[c]}))});const o=ro.from(n);n=o.types;const a=Object.assign({},n);return W(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(r),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return Ae(mt(l));if(c.match(/^u?int/))return He(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return W(typeof l=="string","invalid string","value",l),l}W(!1,"unsupported type","type",c)})}}};gv=new WeakMap,Hc=new WeakMap,Em=new WeakMap,Q_=new WeakSet,iV=function(e){{const s=NI(e);if(s)return s}const n=NE(e).array;if(n){const s=n.prefix,i=this.getEncoder(s);return o=>{W(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return E(this,Hc).has(s)&&(a=a.map(tr)),tr(zn(a))}}const r=this.types[e];if(r){const s=Gf(E(this,Hc).get(e));return i=>{const o=r.map(({name:a,type:c})=>{const l=this.getEncoder(c)(i[a]);return E(this,Hc).has(c)?tr(l):l});return o.unshift(s),zn(o)}}W(!1,`unknown type: ${e}`,"type",e)};let H_=ro;function Is(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const X$e="external public payable override",e5e=Is(X$e.split(" ")),oV="constant external internal payable private public pure view override",t5e=Is(oV.split(" ")),aV="constructor error event fallback function receive struct",cV=Is(aV.split(" ")),lV="calldata memory storage payable indexed",n5e=Is(lV.split(" ")),r5e="tuple returns",s5e=[aV,lV,r5e,oV].join(" "),i5e=Is(s5e.split(" ")),o5e={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},a5e=new RegExp("^(\\s*)"),c5e=new RegExp("^([0-9]+)"),l5e=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),uV=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),dV=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Dr,Vo,mv,mk;const Y_=class Y_{constructor(e){G(this,mv);G(this,Dr);G(this,Vo);D(this,Dr,0),D(this,Vo,e.slice())}get offset(){return E(this,Dr)}get length(){return E(this,Vo).length-E(this,Dr)}clone(){return new Y_(E(this,Vo))}reset(){D(this,Dr,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=ne(this,mv,mk).call(this,E(this,Dr)+1,e.match+1);return D(this,Dr,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;E(this,Dr)<e.match-1;){const r=this.peek().linkNext;n.push(ne(this,mv,mk).call(this,E(this,Dr)+1,r)),D(this,Dr,r)}return D(this,Dr,e.match+1),n}peek(){if(E(this,Dr)>=E(this,Vo).length)throw new Error("out-of-bounds");return E(this,Vo)[E(this,Dr)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return Tl(this,Dr)._++,e}toString(){const e=[];for(let n=E(this,Dr);n<E(this,Vo).length;n++){const r=E(this,Vo)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};Dr=new WeakMap,Vo=new WeakMap,mv=new WeakSet,mk=function(e=0,n=0){return new Y_(E(this,Vo).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let pa=Y_;function Fd(t){const e=[],n=o=>{const a=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let r=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(a5e);a&&(i+=a[1].length,o=t.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=o5e[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,l==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const d=e.pop().text;u=d+u,e[e.length-1].value=ft(d)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(l5e),a){if(c.text=a[1],i+=c.text.length,i5e.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(dV)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(c5e),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new pa(e.map(o=>Object.freeze(o)))}function oB(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function BA(t,e){if(e.peekKeyword(cV)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function El(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function hV(t){let e=El(t,t5e);return oB(e,Is("constant payable nonpayable".split(" "))),oB(e,Is("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function ll(t,e){return t.popParams().map(n=>jr.from(n,e))}function fV(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return He(t.pop().text);throw new Error("invalid gas")}return null}function Wf(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const u5e=new RegExp(/^(.*)\[([0-9]*)\]$/);function aB(t){const e=t.match(dV);if(W(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);W(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);W(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const Rn={},fi=Symbol.for("_ethers_internal"),cB="_ParamTypeInternal",lB="_ErrorInternal",uB="_EventInternal",dB="_ConstructorInternal",hB="_FallbackInternal",fB="_FunctionInternal",pB="_StructInternal";var xm,px;const so=class so{constructor(e,n,r,s,i,o,a,c){G(this,xm);J(this,"name");J(this,"type");J(this,"baseType");J(this,"indexed");J(this,"components");J(this,"arrayLength");J(this,"arrayChildren");if(n1(e,Rn,"ParamType"),Object.defineProperty(this,fi,{value:cB}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");Xe(this,{name:n,type:r,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],s=[e];return ne(this,xm,px).call(this,r,e,n,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,n){if(so.isParamType(e))return e;if(typeof e=="string")try{return so.from(Fd(e),n)}catch{W(!1,"invalid param type","obj",e)}else if(e instanceof pa){let a="",c="",l=null;El(e,Is(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(g=>so.from(g)),a=`tuple(${l.map(g=>g.format()).join(",")})`):(a=aB(e.popType("TYPE")),c=a);let u=null,d=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();u=new so(Rn,"",a,c,null,l,d,u),d=g.value,a+=g.text,c="array",l=null}let h=null;if(El(e,n5e).has("indexed")){if(!n)throw new Error("");h=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new so(Rn,p,a,c,h,l,d,u)}const r=e.name;W(!r||typeof r=="string"&&r.match(uV),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(W(n,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(u5e);if(o){const a=parseInt(o[2]||"-1"),c=so.from({type:o[1],components:e.components});return new so(Rn,r||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(l=>so.from(l)):null;return new so(Rn,r||"",i,"tuple",s,a,null,null)}return i=aB(e.type),new so(Rn,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[fi]===cB}};xm=new WeakSet,px=function(e,n,r,s){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((c,l)=>{var u;ne(u=o,xm,px).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{var u;ne(u=o[l],xm,px).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}const i=r(this.type,n);i.then?e.push(async function(){s(await i)}()):s(i)};let jr=so;class qf{constructor(e,n,r){J(this,"type");J(this,"inputs");n1(e,Rn,"Fragment"),r=Object.freeze(r.slice()),Xe(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{qf.from(JSON.parse(e))}catch{}return qf.from(Fd(e))}if(e instanceof pa)switch(e.peekKeyword(cV)){case"constructor":return nl.from(e);case"error":return si.from(e);case"event":return Ja.from(e);case"fallback":case"receive":return Uc.from(e);case"function":return Za.from(e);case"struct":return bf.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return nl.from(e);case"error":return si.from(e);case"event":return Ja.from(e);case"fallback":case"receive":return Uc.from(e);case"function":return Za.from(e);case"struct":return bf.from(e)}de(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}W(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return nl.isFragment(e)}static isError(e){return si.isFragment(e)}static isEvent(e){return Ja.isFragment(e)}static isFunction(e){return Za.isFragment(e)}static isStruct(e){return bf.isFragment(e)}}class LA extends qf{constructor(n,r,s,i){super(n,r,i);J(this,"name");W(typeof s=="string"&&s.match(uV),"invalid identifier","name",s),i=Object.freeze(i.slice()),Xe(this,{name:s})}}function sv(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class si extends LA{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,fi,{value:lB})}get selector(){return Gf(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+sv(e,this.inputs)),n.join(" ")}static from(e){if(si.isFragment(e))return e;if(typeof e=="string")return si.from(Fd(e));if(e instanceof pa){const n=BA("error",e),r=ll(e);return Wf(e),new si(Rn,n,r)}return new si(Rn,e.name,e.inputs?e.inputs.map(jr.from):[])}static isFragment(e){return e&&e[fi]===lB}}class Ja extends LA{constructor(n,r,s,i){super(n,"event",r,s);J(this,"anonymous");Object.defineProperty(this,fi,{value:uB}),Xe(this,{anonymous:i})}get topicHash(){return Gf(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+sv(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(i=>jr.from(i)),new Ja(Rn,n,r,!1).topicHash}static from(n){if(Ja.isFragment(n))return n;if(typeof n=="string")try{return Ja.from(Fd(n))}catch{W(!1,"invalid event fragment","obj",n)}else if(n instanceof pa){const r=BA("event",n),s=ll(n,!0),i=!!El(n,Is(["anonymous"])).has("anonymous");return Wf(n),new Ja(Rn,r,s,i)}return new Ja(Rn,n.name,n.inputs?n.inputs.map(r=>jr.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[fi]===uB}}class nl extends qf{constructor(n,r,s,i,o){super(n,r,s);J(this,"payable");J(this,"gas");Object.defineProperty(this,fi,{value:dB}),Xe(this,{payable:i,gas:o})}format(n){if(de(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[`constructor${sv(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(nl.isFragment(n))return n;if(typeof n=="string")try{return nl.from(Fd(n))}catch{W(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof pa){El(n,Is(["constructor"]));const r=ll(n),s=!!El(n,e5e).has("payable"),i=fV(n);return Wf(n),new nl(Rn,"constructor",r,s,i)}return new nl(Rn,"constructor",n.inputs?n.inputs.map(jr.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[fi]===dB}}class Uc extends qf{constructor(n,r,s){super(n,"fallback",r);J(this,"payable");Object.defineProperty(this,fi,{value:hB}),Xe(this,{payable:s})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(n){if(Uc.isFragment(n))return n;if(typeof n=="string")try{return Uc.from(Fd(n))}catch{W(!1,"invalid fallback fragment","obj",n)}else if(n instanceof pa){const r=n.toString(),s=n.peekKeyword(Is(["fallback","receive"]));if(W(s,"type must be fallback or receive","obj",r),n.popKeyword(Is(["fallback","receive"]))==="receive"){const c=ll(n);return W(c.length===0,"receive cannot have arguments","obj.inputs",c),El(n,Is(["payable"])),Wf(n),new Uc(Rn,[],!0)}let o=ll(n);o.length?W(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[jr.from("bytes")];const a=hV(n);if(W(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),El(n,Is(["returns"])).has("returns")){const c=ll(n);W(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return Wf(n),new Uc(Rn,o,a==="payable")}if(n.type==="receive")return new Uc(Rn,[],!0);if(n.type==="fallback"){const r=[jr.from("bytes")],s=n.stateMutability==="payable";return new Uc(Rn,r,s)}W(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[fi]===hB}}class Za extends LA{constructor(n,r,s,i,o,a){super(n,"function",r,i);J(this,"constant");J(this,"outputs");J(this,"stateMutability");J(this,"payable");J(this,"gas");Object.defineProperty(this,fi,{value:fB}),o=Object.freeze(o.slice()),Xe(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return Gf(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n))),outputs:this.outputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+sv(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(sv(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(i=>jr.from(i)),new Za(Rn,n,"view",r,[],null).selector}static from(n){if(Za.isFragment(n))return n;if(typeof n=="string")try{return Za.from(Fd(n))}catch{W(!1,"invalid function fragment","obj",n)}else if(n instanceof pa){const s=BA("function",n),i=ll(n),o=hV(n);let a=[];El(n,Is(["returns"])).has("returns")&&(a=ll(n));const c=fV(n);return Wf(n),new Za(Rn,s,o,i,a,c)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new Za(Rn,n.name,r,n.inputs?n.inputs.map(jr.from):[],n.outputs?n.outputs.map(jr.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[fi]===fB}}class bf extends LA{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,fi,{value:pB})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return bf.from(Fd(e))}catch{W(!1,"invalid struct fragment","obj",e)}else if(e instanceof pa){const n=BA("struct",e),r=ll(e);return Wf(e),new bf(Rn,n,r)}return new bf(Rn,e.name,e.inputs?e.inputs.map(jr.from):[])}static isFragment(e){return e&&e[fi]===pB}}const wa=new Map;wa.set(0,"GENERIC_PANIC");wa.set(1,"ASSERT_FALSE");wa.set(17,"OVERFLOW");wa.set(18,"DIVIDE_BY_ZERO");wa.set(33,"ENUM_RANGE_ERROR");wa.set(34,"BAD_STORAGE_DATA");wa.set(49,"STACK_UNDERFLOW");wa.set(50,"ARRAY_RANGE_ERROR");wa.set(65,"OUT_OF_MEMORY");wa.set(81,"UNINITIALIZED_FUNCTION_CALL");const d5e=new RegExp(/^bytes([0-9]*)$/),h5e=new RegExp(/^(u?int)([0-9]*)$/);let PI=null,gB=1024;function f5e(t,e,n,r){let s="missing revert data",i=null;const o=null;let a=null;if(n){s="execution reverted";const l=mt(n);if(n=Ae(n),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(Ae(l.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(Ae(l.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},i=`Panic due to ${wa.get(u)||"UNKNOWN"}(${u})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?Yt(e.to):null,data:e.data||"0x"};return e.from&&(c.from=Yt(e.from)),In(s,"CALL_EXCEPTION",{action:t,data:n,reason:i,transaction:c,invocation:o,revert:a})}var Du,Zp;const J_=class J_{constructor(){G(this,Du)}getDefaultValue(e){const n=e.map(s=>ne(this,Du,Zp).call(this,jr.from(s)));return new TE(n,"_").defaultValue()}encode(e,n){FW(n.length,e.length,"types/values length mismatch");const r=e.map(o=>ne(this,Du,Zp).call(this,jr.from(o))),s=new TE(r,"_"),i=new nk;return s.encode(i,n),i.data}decode(e,n,r){const s=e.map(o=>ne(this,Du,Zp).call(this,jr.from(o)));return new TE(s,"_").decode(new rk(n,r,gB))}static _setDefaultMaxInflation(e){W(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),gB=e}static defaultAbiCoder(){return PI==null&&(PI=new J_),PI}static getBuiltinCallException(e,n,r){return f5e(e,n,r,J_.defaultAbiCoder())}};Du=new WeakSet,Zp=function(e){if(e.isArray())return new kDe(ne(this,Du,Zp).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new TE(e.components.map(r=>ne(this,Du,Zp).call(this,r)),e.name);switch(e.baseType){case"address":return new NDe(e.name);case"bool":return new ODe(e.name);case"string":return new FDe(e.name);case"bytes":return new RDe(e.name);case"":return new UDe(e.name)}let n=e.type.match(h5e);if(n){let r=parseInt(n[2]||"256");return W(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new jDe(r/8,n[1]==="int",e.name)}if(n=e.type.match(d5e),n){let r=parseInt(n[1]);return W(r!==0&&r<=32,"invalid bytes length","param",e),new DDe(r,e.name)}W(!1,"invalid type","type",e.type)};let iv=J_;class p5e{constructor(e,n,r){J(this,"fragment");J(this,"name");J(this,"signature");J(this,"topic");J(this,"args");const s=e.name,i=e.format();Xe(this,{fragment:e,name:s,signature:i,topic:n,args:r})}}class g5e{constructor(e,n,r,s){J(this,"fragment");J(this,"name");J(this,"args");J(this,"signature");J(this,"selector");J(this,"value");const i=e.name,o=e.format();Xe(this,{fragment:e,name:i,args:r,signature:o,selector:n,value:s})}}class m5e{constructor(e,n,r){J(this,"fragment");J(this,"name");J(this,"args");J(this,"signature");J(this,"selector");const s=e.name,i=e.format();Xe(this,{fragment:e,name:s,args:r,signature:i,selector:n})}}class mB{constructor(e){J(this,"hash");J(this,"_isIndexed");Xe(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const yB={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},wB={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&yB[t.toString()]&&(e=yB[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var ja,Fa,za,is,oc,gx,mx;const yh=class yh{constructor(e){G(this,oc);J(this,"fragments");J(this,"deploy");J(this,"fallback");J(this,"receive");G(this,ja);G(this,Fa);G(this,za);G(this,is);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,D(this,za,new Map),D(this,ja,new Map),D(this,Fa,new Map);const r=[];for(const o of n)try{r.push(qf.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}Xe(this,{fragments:Object.freeze(r)});let s=null,i=!1;D(this,is,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Xe(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(W(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=E(this,za);break;case"event":c=E(this,Fa);break;case"error":c=E(this,ja);break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||Xe(this,{deploy:nl.from("constructor()")}),Xe(this,{fallback:s,receive:i})}format(e){const n=e?"minimal":"full";return this.fragments.map(s=>s.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return iv.defaultAbiCoder()}getFunctionName(e){const n=ne(this,oc,gx).call(this,e,null,!1);return W(n,"no matching function","key",e),n.name}hasFunction(e){return!!ne(this,oc,gx).call(this,e,null,!1)}getFunction(e,n){return ne(this,oc,gx).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(E(this,za).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(E(this,za).get(s),r)}}getEventName(e){const n=ne(this,oc,mx).call(this,e,null,!1);return W(n,"no matching event","key",e),n.name}hasEvent(e){return!!ne(this,oc,mx).call(this,e,null,!1)}getEvent(e,n){return ne(this,oc,mx).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(E(this,Fa).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(E(this,Fa).get(s),r)}}getError(e,n){if(wn(e)){const s=e.toLowerCase();if(wB[s])return si.from(wB[s].signature);for(const i of E(this,ja).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of E(this,ja))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?si.from("error Error(string)"):e==="Panic"?si.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");W(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=si.from(e).format(),e==="Error(string)")return si.from("error Error(string)");if(e==="Panic(uint256)")return si.from("error Panic(uint256)");const r=E(this,ja).get(e);return r||null}forEachError(e){const n=Array.from(E(this,ja).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(E(this,ja).get(s),r)}}_decodeParams(e,n){return E(this,is).decode(e,n)}_encodeParams(e,n){return E(this,is).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);W(r,"unknown error","fragment",e),e=r}return W(Mn(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,Mn(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);W(r,"unknown error","fragment",e),e=r}return zn([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);W(r,"unknown function","fragment",e),e=r}return W(Mn(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,Mn(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);W(r,"unknown function","fragment",e),e=r}return zn([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const i=this.getFunction(e);W(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=Cs(n);if(s.length%32===0)try{return E(this,is).decode(e.outputs,s)}catch{r="could not decode result data"}de(!1,r,"BAD_DATA",{value:Ae(s),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=mt(e,"data"),s=iv.getBuiltinCallException("call",n,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=Ae(r.slice(0,4)),c=this.getError(a);if(c)try{const l=E(this,is).decode(c.inputs,r.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);W(r,"unknown function","fragment",e),e=r}return Ae(E(this,is).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const i=this.getEvent(e);W(i,"unknown event","eventFragment",e),e=i}de(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,o)=>i.type==="string"?Gf(o):i.type==="bytes"?tr(Ae(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=Pd(o):i.type.match(/^bytes/)?o=ORe(o,32):i.type==="address"&&E(this,is).encode(["address"],[o]),_s(Ae(o),32));for(n.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){W(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?W(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?r.push(i.map(c=>s(a,c))):r.push(s(a,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);W(o,"unknown event","eventFragment",e),e=o}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),W(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const c=n[a];if(o.indexed)if(o.type==="string")r.push(Gf(c));else if(o.type==="bytes")r.push(tr(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(E(this,is).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:E(this,is).encode(s,i),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const f=this.getEvent(e);W(f,"unknown event","eventFragment",e),e=f}if(r!=null&&!e.anonymous){const f=e.topicHash;W(wn(r[0],32)&&r[0].toLowerCase()===f,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(jr.from({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});const a=r!=null?E(this,is).decode(s,zn(r)):null,c=E(this,is).decode(i,n,!0),l=[],u=[];let d=0,h=0;return e.inputs.forEach((f,p)=>{let g=null;if(f.indexed)if(a==null)g=new mB(null);else if(o[p])g=new mB(a[h++]);else try{g=a[h++]}catch(y){g=y}else try{g=c[d++]}catch(y){g=y}l.push(g),u.push(f.name||null)}),oy.fromItems(l,u)}parseTransaction(e){const n=mt(e.data,"tx.data"),r=He(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(Ae(n.slice(0,4)));if(!s)return null;const i=E(this,is).decode(s.inputs,n.slice(4));return new g5e(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new p5e(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=Ae(e),r=this.getError(Mn(n,0,4));if(!r)return null;const s=E(this,is).decode(r.inputs,Mn(n,4));return new m5e(r,r.selector,s)}static from(e){return e instanceof yh?e:typeof e=="string"?new yh(JSON.parse(e)):typeof e.formatJson=="function"?new yh(e.formatJson()):typeof e.format=="function"?new yh(e.format("json")):new yh(e)}};ja=new WeakMap,Fa=new WeakMap,za=new WeakMap,is=new WeakMap,oc=new WeakSet,gx=function(e,n,r){if(wn(e)){const i=e.toLowerCase();for(const o of E(this,za).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of E(this,za))o.split("(")[0]===e&&i.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,c=!0;ls.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=i.length-1;l>=0;l--){const u=i[l].inputs.length;u!==a&&(!c||u!==a-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const u=i[l].inputs;for(let d=0;d<n.length;d++)if(ls.isTyped(n[d])){if(d>=u.length){if(n[d].type==="overrides")continue;i.splice(l,1);break}if(n[d].type!==u[d].baseType){i.splice(l,1);break}}}}if(i.length===1&&n&&n.length!==i[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");W(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=E(this,za).get(Za.from(e).format());return s||null},mx=function(e,n,r){if(wn(e)){const i=e.toLowerCase();for(const o of E(this,Fa).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of E(this,Fa))o.split("(")[0]===e&&i.push(a);if(n){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<n.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<n.length;c++)if(ls.isTyped(n[c])&&n[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");W(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=E(this,Fa).get(Ja.from(e).format());return s||null};let yk=yh;const pV=BigInt(0);function Lg(t){return t??null}function Wn(t){return t==null?null:t.toString()}class bB{constructor(e,n,r){J(this,"gasPrice");J(this,"maxFeePerGas");J(this,"maxPriorityFeePerGas");Xe(this,{gasPrice:Lg(e),maxFeePerGas:Lg(n),maxPriorityFeePerGas:Lg(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Wn(e),maxFeePerGas:Wn(n),maxPriorityFeePerGas:Wn(r)}}}function G_(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=Ae(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=He(t[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=ft(t[s],`request.${s}`));return t.accessList&&(e.accessList=up(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>y3(s)?Ae(s):Object.assign({},s))),e}var Gc;class y5e{constructor(e,n){J(this,"provider");J(this,"number");J(this,"hash");J(this,"timestamp");J(this,"parentHash");J(this,"parentBeaconBlockRoot");J(this,"nonce");J(this,"difficulty");J(this,"gasLimit");J(this,"gasUsed");J(this,"stateRoot");J(this,"receiptsRoot");J(this,"blobGasUsed");J(this,"excessBlobGas");J(this,"miner");J(this,"prevRandao");J(this,"extraData");J(this,"baseFeePerGas");G(this,Gc);D(this,Gc,e.transactions.map(r=>typeof r!="string"?new ov(r,n):r)),Xe(this,{provider:n,hash:Lg(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Lg(e.prevRandao),extraData:e.extraData,baseFeePerGas:Lg(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return E(this,Gc).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=E(this,Gc).slice();return e.length===0?[]:(de(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,timestamp:g,transactions:y}=this;return{_type:"Block",baseFeePerGas:Wn(e),difficulty:Wn(n),extraData:r,gasLimit:Wn(s),gasUsed:Wn(i),blobGasUsed:Wn(this.blobGasUsed),excessBlobGas:Wn(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,timestamp:g,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,transactions:y}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return E(this,Gc).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=E(this,Gc)[e];else{const r=e.toLowerCase();for(const s of E(this,Gc))if(typeof s=="string"){if(s!==r)continue;n=s;break}else{if(s.hash!==r)continue;n=s;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;W(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return w5e(this)}}Gc=new WeakMap;class i1{constructor(e,n){J(this,"provider");J(this,"transactionHash");J(this,"blockHash");J(this,"blockNumber");J(this,"removed");J(this,"address");J(this,"data");J(this,"topics");J(this,"index");J(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());Xe(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return de(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return de(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return de(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return b5e(this)}}var yv;class gV{constructor(e,n){J(this,"provider");J(this,"to");J(this,"from");J(this,"contractAddress");J(this,"hash");J(this,"index");J(this,"blockHash");J(this,"blockNumber");J(this,"logsBloom");J(this,"gasUsed");J(this,"blobGasUsed");J(this,"cumulativeGasUsed");J(this,"gasPrice");J(this,"blobGasPrice");J(this,"type");J(this,"status");J(this,"root");G(this,yv);D(this,yv,Object.freeze(e.logs.map(s=>new i1(s,n))));let r=pV;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),Xe(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return E(this,yv)}toJSON(){const{to:e,from:n,contractAddress:r,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:Wn(this.cumulativeGasUsed),from:n,gasPrice:Wn(this.gasPrice),blobGasUsed:Wn(this.blobGasUsed),blobGasPrice:Wn(this.blobGasPrice),gasUsed:Wn(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:d,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return yV(this)}reorderedEvent(e){return de(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),mV(this,e)}}yv=new WeakMap;var $u;const B3=class B3{constructor(e,n){J(this,"provider");J(this,"blockNumber");J(this,"blockHash");J(this,"index");J(this,"hash");J(this,"type");J(this,"to");J(this,"from");J(this,"nonce");J(this,"gasLimit");J(this,"gasPrice");J(this,"maxPriorityFeePerGas");J(this,"maxFeePerGas");J(this,"maxFeePerBlobGas");J(this,"data");J(this,"value");J(this,"chainId");J(this,"signature");J(this,"accessList");J(this,"blobVersionedHashes");J(this,"authorizationList");G(this,$u);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,D(this,$u,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:s,type:i,to:o,from:a,nonce:c,data:l,signature:u,accessList:d,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:n,blobVersionedHashes:h,chainId:Wn(this.chainId),data:l,from:a,gasLimit:Wn(this.gasLimit),gasPrice:Wn(this.gasPrice),hash:s,maxFeePerGas:Wn(this.maxFeePerGas),maxPriorityFeePerGas:Wn(this.maxPriorityFeePerGas),maxFeePerBlobGas:Wn(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:r,type:i,value:Wn(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await vs({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,s=n??0;let i=E(this,$u),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:h,nonce:f}=await vs({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(f<this.nonce){i=h;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(o===-1&&(o=i-3,o<E(this,$u)&&(o=E(this,$u)));o<=h;){if(a)return null;const g=await this.provider.getBlock(o,!0);if(g==null)return;for(const y of g)if(y===this.hash)return;for(let y=0;y<g.length;y++){const w=await g.getTransaction(y);if(w.from===this.from&&w.nonce===this.nonce){if(a)return null;const v=await this.provider.getTransactionReceipt(w.hash);if(v==null||h-v.blockNumber+1<r)return;let b="replaced";w.data===this.data&&w.to===this.to&&w.value===this.value?b="repriced":w.data==="0x"&&w.from===w.to&&w.value===pV&&(b="cancelled"),de(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:b==="replaced"||b==="cancelled",reason:b,replacement:w.replaceableTransaction(i),hash:w.hash,receipt:v})}}o++}},l=h=>{if(h==null||h.status!==0)return h;de(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:h.to,from:h.from,data:""},receipt:h})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(r===1||await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((h,f)=>{const p=[],g=()=>{p.forEach(w=>w())};if(p.push(()=>{a=!0}),s>0){const w=setTimeout(()=>{g(),f(In("wait for transaction timeout","TIMEOUT"))},s);p.push(()=>{clearTimeout(w)})}const y=async w=>{if(await w.confirmations()>=r){g();try{h(l(w))}catch(v){f(v)}}};if(p.push(()=>{this.provider.off(this.hash,y)}),this.provider.on(this.hash,y),i>=0){const w=async()=>{try{await c()}catch(v){if(Lr(v,"TRANSACTION_REPLACED")){g(),f(v);return}}a||this.provider.once("block",w)};p.push(()=>{this.provider.off("block",w)}),this.provider.once("block",w)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return de(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),yV(this)}reorderedEvent(e){return de(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),de(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),mV(this,e)}replaceableTransaction(e){W(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new B3(this,this.provider);return D(n,$u,e),n}};$u=new WeakMap;let ov=B3;function w5e(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function mV(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function yV(t){return{orphan:"drop-transaction",tx:t}}function b5e(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class P3 extends i1{constructor(n,r,s){super(n,n.provider);J(this,"interface");J(this,"fragment");J(this,"args");const i=r.decodeEventLog(s,n.data,n.topics);Xe(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class wV extends i1{constructor(n,r){super(n,n.provider);J(this,"error");Xe(this,{error:r})}}var _m;class v5e extends gV{constructor(n,r,s){super(s,r);G(this,_m);D(this,_m,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?E(this,_m).getEvent(n.topics[0]):null;if(r)try{return new P3(n,E(this,_m),r)}catch(s){return new wV(n,s)}return n})}}_m=new WeakMap;var wv;class k3 extends ov{constructor(n,r,s){super(s,r);G(this,wv);D(this,wv,n)}async wait(n,r){const s=await super.wait(n,r);return s==null?null:new v5e(E(this,wv),this.provider,s)}}wv=new WeakMap;class bV extends WW{constructor(n,r,s,i){super(n,r,s);J(this,"log");Xe(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class E5e extends bV{constructor(e,n,r,s,i){super(e,n,r,new P3(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);Xe(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const vB=BigInt(0);function vV(t){return t&&typeof t.call=="function"}function EV(t){return t&&typeof t.estimateGas=="function"}function MA(t){return t&&typeof t.resolveName=="function"}function xV(t){return t&&typeof t.sendTransaction=="function"}function _V(t){if(t!=null){if(MA(t))return t;if(t.provider)return t.provider}}var bv;class x5e{constructor(e,n,r){G(this,bv);J(this,"fragment");if(Xe(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const s=Vf(e.runner,"resolveName"),i=MA(s)?s:null;D(this,bv,async function(){const o=await Promise.all(n.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(u,d)=>u==="address"?Array.isArray(d)?Promise.all(d.map(h=>Ss(h,i))):Ss(d,i):d)));return e.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return E(this,bv)}}bv=new WeakMap;function Vf(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function Dh(t){return t==null?null:t.provider||null}async function CV(t,e){const n=ls.dereference(t,"overrides");W(typeof n=="object","invalid overrides parameter","overrides",t);const r=G_(n);return W(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),W(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function _5e(t,e,n){const r=Vf(t,"resolveName"),s=MA(r)?r:null;return await Promise.all(e.map((i,o)=>i.walkAsync(n[o],(a,c)=>(c=ls.dereference(c,a),a==="address"?Ss(c,s):c))))}function C5e(t){const e=async function(o){const a=await CV(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await Ss(a.from,_V(t.runner)));const c=t.interface,l=He(a.value||vB,"overrides.value")===vB,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&W(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),W(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const d=c.receive||c.fallback&&c.fallback.payable;return W(d||l,"cannot send value to non-payable fallback","overrides.value",a.value),W(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=Vf(t.runner,"call");de(vV(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(l){throw m3(l)&&l.data?t.interface.makeError(l.data,c):l}},r=async function(o){const a=t.runner;de(xV(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),l=Dh(t.runner);return new k3(t.interface,l,c)},s=async function(o){const a=Vf(t.runner,"estimateGas");return de(EV(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await r(o);return Xe(i,{_contract:t,estimateGas:s,populateTransaction:e,send:r,staticCall:n}),i}function A5e(t,e){const n=function(...l){const u=t.interface.getFunction(e,l);return de(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){const u=n(...l);let d={};if(u.inputs.length+1===l.length&&(d=await CV(l.pop()),d.from&&(d.from=await Ss(d.from,_V(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const h=await _5e(t.runner,u.inputs,l);return Object.assign({},d,await vs({to:t.getAddress(),data:t.interface.encodeFunctionData(u,h)}))},s=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},i=async function(...l){const u=t.runner;de(xV(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await u.sendTransaction(await r(...l)),h=Dh(t.runner);return new k3(t.interface,h,d)},o=async function(...l){const u=Vf(t.runner,"estimateGas");return de(EV(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},a=async function(...l){const u=Vf(t.runner,"call");de(vV(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...l);let h="0x";try{h=await u.call(d)}catch(p){throw m3(p)&&p.data?t.interface.makeError(p.data,d):p}const f=n(...l);return t.interface.decodeFunctionResult(f,h)},c=async(...l)=>n(...l).constant?await s(...l):await i(...l);return Xe(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return de(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function S5e(t,e){const n=function(...s){const i=t.interface.getEvent(e,s);return de(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new x5e(t,n(...s),s)};return Xe(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return de(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const W_=Symbol.for("_ethersInternal_contract"),AV=new WeakMap;function I5e(t,e){AV.set(t[W_],e)}function Si(t){return AV.get(t[W_])}function T5e(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function O3(t,e){let n,r=null;if(Array.isArray(e)){const i=function(o){if(wn(o,32))return o;const a=t.interface.getEvent(o);return W(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?n=[null]:typeof e=="string"?wn(e,32)?n=[e]:(r=t.interface.getEvent(e),W(r,"unknown fragment","event",e),n=[r.topicHash]):T5e(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):W(!1,"unknown event name","event",e);n=n.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=n.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:n}}async function K0(t,e){const{subs:n}=Si(t);return n.get((await O3(t,e)).tag)||null}async function EB(t,e,n){const r=Dh(t.runner);de(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await O3(t,n),{addr:a,subs:c}=Si(t);let l=c.get(i);if(!l){const d={address:a||t,topics:o},h=y=>{let w=s;if(w==null)try{w=t.interface.getEvent(y.topics[0])}catch{}if(w){const v=w,b=s?t.interface.decodeEventLog(s,y.data,y.topics):[];bk(t,n,b,_=>new E5e(t,_,n,v,y))}else bk(t,n,[],v=>new bV(t,v,n,y))};let f=[];l={tag:i,listeners:[],start:()=>{f.length||f.push(r.on(d,h))},stop:async()=>{if(f.length==0)return;let y=f;f=[],await Promise.all(y),r.off(d,h)}},c.set(i,l)}return l}let wk=Promise.resolve();async function N5e(t,e,n,r){await wk;const s=await K0(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(n);r&&c.push(r(a?null:o));try{o.call(t,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),Si(t).subs.delete(s.tag)),i>0}async function bk(t,e,n,r){try{await wk}catch{}const s=N5e(t,e,n,r);return wk=s,await s}const PE=["then"];var VB;VB=W_;const Pw=class Pw{constructor(e,n,r,s){J(this,"target");J(this,"interface");J(this,"runner");J(this,"filters");J(this,VB);J(this,"fallback");W(typeof e=="string"||Pq(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=yk.from(n);Xe(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,W_,{value:{}});let o,a=null,c=null;if(s){const d=Dh(r);c=new k3(this.interface,d,s)}let l=new Map;if(typeof e=="string")if(wn(e))a=e,o=Promise.resolve(e);else{const d=Vf(r,"resolveName");if(!MA(d))throw In("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(e).then(h=>{if(h==null)throw In("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Si(this).addr=h,h})}else o=e.getAddress().then(d=>{if(d==null)throw new Error("TODO");return Si(this).addr=d,d});I5e(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(d,h,f)=>{if(typeof h=="symbol"||PE.indexOf(h)>=0)return Reflect.get(d,h,f);try{return this.getEvent(h)}catch(p){if(!Lr(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>PE.indexOf(h)>=0?Reflect.has(d,h):Reflect.has(d,h)||this.interface.hasEvent(String(h))});return Xe(this,{filters:u}),Xe(this,{fallback:i.receive||i.fallback?C5e(this):null}),new Proxy(this,{get:(d,h,f)=>{if(typeof h=="symbol"||h in d||PE.indexOf(h)>=0)return Reflect.get(d,h,f);try{return d.getFunction(h)}catch(p){if(!Lr(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>typeof h=="symbol"||h in d||PE.indexOf(h)>=0?Reflect.has(d,h):d.interface.hasFunction(h)})}connect(e){return new Pw(this.target,this.interface,e)}attach(e){return new Pw(e,this.interface,this.runner)}async getAddress(){return await Si(this).addrPromise}async getDeployedCode(){const e=Dh(this.runner);de(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Dh(this.runner);return de(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return Si(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),A5e(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),S5e(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=Si(this),o=s||await i,{fragment:a,topics:c}=await O3(this,e),l={address:o,topics:c,fromBlock:n,toBlock:r},u=Dh(this.runner);return de(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(d=>{let h=a;if(h==null)try{h=this.interface.getEvent(d.topics[0])}catch{}if(h)try{return new P3(d,this.interface,h)}catch(f){return new wV(d,f)}return new i1(d,u)})}async on(e,n){const r=await EB(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await EB(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await bk(this,e,n,null)}async listenerCount(e){if(e){const s=await K0(this,e);return s?s.listeners.length:0}const{subs:n}=Si(this);let r=0;for(const{listeners:s}of n.values())r+=s.length;return r}async listeners(e){if(e){const s=await K0(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:n}=Si(this);let r=[];for(const{listeners:s}of n.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,n){const r=await K0(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(n==null||r.listeners.length===0)&&(r.stop(),Si(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await K0(this,e);if(!n)return this;n.stop(),Si(this).subs.delete(n.tag)}else{const{subs:n}=Si(this);for(const{tag:r,stop:s}of n.values())s(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends Pw{constructor(s,i=null){super(s,e,i)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let vk=Pw;function P5e(){return vk}class vf extends P5e(){}function kI(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):W(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class k5e{constructor(e){J(this,"name");Xe(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const SV=new RegExp("^(ipfs)://(.*)$","i"),xB=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),SV,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var Uu,nf,Bu,Xp,Z_,IV;const bg=class bg{constructor(e,n,r){G(this,Bu);J(this,"provider");J(this,"address");J(this,"name");G(this,Uu);G(this,nf);Xe(this,{provider:e,address:n,name:r}),D(this,Uu,null),D(this,nf,new vf(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return E(this,Uu)==null&&D(this,Uu,(async()=>{try{return await E(this,nf).supportsInterface("0x9061b923")}catch(e){if(Lr(e,"CALL_EXCEPTION"))return!1;throw D(this,Uu,null),e}})()),await E(this,Uu)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await ne(this,Bu,Xp).call(this,"addr(bytes32)");return i==null||i===Zb?null:i}catch(i){if(Lr(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await ne(this,Bu,Xp).call(this,"addr(bytes32,uint)",[i]);if(wn(o,20))return Yt(o)}let n=null;for(const i of this.provider.plugins)if(i instanceof k5e&&i.supportsCoinType(e)){n=i;break}if(n==null)return null;const r=await ne(this,Bu,Xp).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const s=await n.decodeAddress(e,r);if(s!=null)return s;de(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await ne(this,Bu,Xp).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await ne(this,Bu,Xp).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const s=n[1]==="e3010170"?"ipfs":"ipns",i=parseInt(n[4],16);if(n[5].length===i*2)return`${s}://${DRe("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;de(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<xB.length;r++){const s=n.match(xB[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=kI(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const l=c[1],u=new vf(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const g=await u.ownerOf(l);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(i==="erc1155"){const g=await u.balanceOf(a,l);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let d=await u[o](l);if(d==null||d==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),i==="erc1155"&&(d=d.replace("{id}",Pd(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=kI(d)),e.push({type:"metadata-url",value:d});let h={};const f=await new kd(d).send();f.assertOk();try{h=f.bodyJson}catch{try{e.push({type:"!metadata",value:f.bodyText})}catch{const w=f.body;return w&&e.push({type:"!metadata",value:Ae(w)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!h)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(h)});let p=h.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(SV)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=kI(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return de(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var s;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await ne(s=bg,Z_,IV).call(s,e,r);if(i!=null){const o=new bg(e,i,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};Uu=new WeakMap,nf=new WeakMap,Bu=new WeakSet,Xp=async function(e,n){n=(n||[]).slice();const r=E(this,nf).interface;n.unshift(gk(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),de(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[q$e(this.name,255),r.encodeFunctionData(s,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const i=await E(this,nf)[e](...n);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!Lr(i,"CALL_EXCEPTION"))throw i}return null},Z_=new WeakSet,IV=async function(e,n){const r=await bg.getEnsAddress(e);try{const i=await new vf(r,["function resolver(bytes32) view returns (address)"],e).resolver(gk(n),{enableCcipRead:!0});return i===Zb?null:i}catch(s){throw s}return null},G(bg,Z_);let q_=bg;const _B=BigInt(0);function At(t,e){return function(n){return n==null?e:t(n)}}function av(t,e){return n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))}}function o1(t,e){return n=>{const r={};for(const s in t){let i=s;if(e&&s in e&&!(i in n)){for(const o of e[s])if(o in n){i=o;break}}try{const o=t[s](n[i]);o!==void 0&&(r[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";de(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:n})}}return r}}function O5e(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}W(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function fy(t){return W(wn(t,!0),"invalid data","value",t),t}function Br(t){return W(wn(t,32),"invalid hash","value",t),t}const R5e=o1({address:Yt,blockHash:Br,blockNumber:ft,data:fy,index:ft,removed:At(O5e,!1),topics:av(Br),transactionHash:Br,transactionIndex:ft},{index:["logIndex"]});function D5e(t){return R5e(t)}const $5e=o1({hash:At(Br),parentHash:Br,parentBeaconBlockRoot:At(Br,null),number:ft,timestamp:ft,nonce:At(fy),difficulty:He,gasLimit:He,gasUsed:He,stateRoot:At(Br,null),receiptsRoot:At(Br,null),blobGasUsed:At(He,null),excessBlobGas:At(He,null),miner:At(Yt),prevRandao:At(Br,null),extraData:fy,baseFeePerGas:At(He)},{prevRandao:["mixHash"]});function U5e(t){const e=$5e(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:TV(n)),e}const B5e=o1({transactionIndex:ft,blockNumber:ft,transactionHash:Br,address:Yt,topics:av(Br),data:fy,index:ft,blockHash:Br},{index:["logIndex"]});function L5e(t){return B5e(t)}const M5e=o1({to:At(Yt,null),from:At(Yt,null),contractAddress:At(Yt,null),index:ft,root:At(Ae),gasUsed:He,blobGasUsed:At(He,null),logsBloom:At(fy),blockHash:Br,hash:Br,logs:av(L5e),blockNumber:ft,cumulativeGasUsed:He,effectiveGasPrice:At(He),blobGasPrice:At(He,null),status:At(ft),type:At(ft,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function j5e(t){return M5e(t)}function TV(t){t.to&&He(t.to)===_B&&(t.to="0x0000000000000000000000000000000000000000");const e=o1({hash:Br,index:At(ft,void 0),type:n=>n==="0x"||n==null?0:ft(n),accessList:At(up,null),blobVersionedHashes:At(av(Br,!0),null),authorizationList:At(av(n=>{let r;if(n.signature)r=n.signature;else{let s=n.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},n,{yParity:s})}return{address:Yt(n.address),chainId:He(n.chainId),nonce:He(n.nonce),signature:hi.from(r)}},!1),null),blockHash:At(Br,null),blockNumber:At(ft,null),transactionIndex:At(ft,null),from:Yt,gasPrice:At(He),maxPriorityFeePerGas:At(He),maxFeePerGas:At(He),maxFeePerBlobGas:At(He,null),gasLimit:He,to:At(Yt,null),value:He,nonce:ft,data:fy,creates:At(Yt,null),chainId:At(He,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=TDe(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=hi.from(t.signature):e.signature=hi.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&He(e.blockHash)===_B&&(e.blockHash=null),e}const F5e="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class a1{constructor(e){J(this,"name");Xe(this,{name:e})}clone(){return new a1(this.name)}}class jA extends a1{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);J(this,"effectiveBlock");J(this,"txBase");J(this,"txCreate");J(this,"txDataZero");J(this,"txDataNonzero");J(this,"txAccessListStorageKey");J(this,"txAccessListAddress");const s={effectiveBlock:n};function i(o,a){let c=(r||{})[o];c==null&&(c=a),W(typeof c=="number",`invalud value for ${o}`,"costs",r),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),Xe(this,s)}clone(){return new jA(this.effectiveBlock,this)}}class FA extends a1{constructor(n,r){super("org.ethers.plugins.network.Ens");J(this,"address");J(this,"targetNetwork");Xe(this,{address:n||F5e,targetNetwork:r??1})}clone(){return new FA(this.address,this.targetNetwork)}}var vv,Ev;class z5e extends a1{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");G(this,vv);G(this,Ev);D(this,vv,n),D(this,Ev,r)}get url(){return E(this,vv)}get processFunc(){return E(this,Ev)}clone(){return this}}vv=new WeakMap,Ev=new WeakMap;const OI=new Map;var Cm,Am,Lu;const vg=class vg{constructor(e,n){G(this,Cm);G(this,Am);G(this,Lu);D(this,Cm,e),D(this,Am,He(n)),D(this,Lu,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return E(this,Cm)}set name(e){D(this,Cm,e)}get chainId(){return E(this,Am)}set chainId(e){D(this,Am,He(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===He(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===He(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===He(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(E(this,Lu).values())}attachPlugin(e){if(E(this,Lu).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return E(this,Lu).set(e.name,e.clone()),this}getPlugin(e){return E(this,Lu).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new vg(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new jA;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const s=up(e.accessList);for(const i in s)r+=n.txAccessListAddress+n.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(e){if(H5e(),e==null)return vg.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=OI.get(e);if(n)return n();if(typeof e=="bigint")return new vg("unknown",e);W(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){W(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new vg(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new FA(e.ensAddress,e.ensNetwork)),n}W(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=OI.get(e);r&&W(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),OI.set(e,n)}};Cm=new WeakMap,Am=new WeakMap,Lu=new WeakMap;let Xa=vg;function CB(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function AB(t){return new z5e(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([r.send(),e()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:CB(a.maxFee,9),maxPriorityFeePerGas:CB(a.maxPriorityFee,9)}}catch(i){de(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let SB=!1;function H5e(){if(SB)return;SB=!0;function t(e,n,r){const s=function(){const i=new Xa(e,n);return r.ensNetwork!=null&&i.attachPlugin(new FA(null,r.ensNetwork)),i.attachPlugin(new jA),(r.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Xa.register(e,s),Xa.register(n,s),r.altNames&&r.altNames.forEach(i=>{Xa.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[AB("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[AB("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function Ek(t){return JSON.parse(JSON.stringify(t))}var Wc,oo,Mu,Ha,Sm,yx;class G5e{constructor(e){G(this,Sm);G(this,Wc);G(this,oo);G(this,Mu);G(this,Ha);D(this,Wc,e),D(this,oo,null),D(this,Mu,4e3),D(this,Ha,-2)}get pollingInterval(){return E(this,Mu)}set pollingInterval(e){D(this,Mu,e)}start(){E(this,oo)||(D(this,oo,E(this,Wc)._setTimeout(ne(this,Sm,yx).bind(this),E(this,Mu))),ne(this,Sm,yx).call(this))}stop(){E(this,oo)&&(E(this,Wc)._clearTimeout(E(this,oo)),D(this,oo,null))}pause(e){this.stop(),e&&D(this,Ha,-2)}resume(){this.start()}}Wc=new WeakMap,oo=new WeakMap,Mu=new WeakMap,Ha=new WeakMap,Sm=new WeakSet,yx=async function(){try{const e=await E(this,Wc).getBlockNumber();if(E(this,Ha)===-2){D(this,Ha,e);return}if(e!==E(this,Ha)){for(let n=E(this,Ha)+1;n<=e;n++){if(E(this,oo)==null)return;await E(this,Wc).emit("block",n)}D(this,Ha,e)}}catch{}E(this,oo)!=null&&D(this,oo,E(this,Wc)._setTimeout(ne(this,Sm,yx).bind(this),E(this,Mu)))};var rf,sf,ju;class R3{constructor(e){G(this,rf);G(this,sf);G(this,ju);D(this,rf,e),D(this,ju,!1),D(this,sf,n=>{this._poll(n,E(this,rf))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){E(this,ju)||(D(this,ju,!0),E(this,sf).call(this,-2),E(this,rf).on("block",E(this,sf)))}stop(){E(this,ju)&&(D(this,ju,!1),E(this,rf).off("block",E(this,sf)))}pause(e){this.stop()}resume(){this.start()}}rf=new WeakMap,sf=new WeakMap,ju=new WeakMap;var Im,qc;class W5e extends R3{constructor(n,r){super(n);G(this,Im);G(this,qc);D(this,Im,r),D(this,qc,-2)}pause(n){n&&D(this,qc,-2),super.pause(n)}async _poll(n,r){const s=await r.getBlock(E(this,Im));s!=null&&(E(this,qc)===-2?D(this,qc,s.number):s.number>E(this,qc)&&(r.emit(E(this,Im),s.number),D(this,qc,s.number)))}}Im=new WeakMap,qc=new WeakMap;var X_;class q5e extends R3{constructor(n,r){super(n);G(this,X_);D(this,X_,Ek(r))}async _poll(n,r){throw new Error("@TODO")}}X_=new WeakMap;var Tm;class V5e extends R3{constructor(n,r){super(n);G(this,Tm);D(this,Tm,r)}async _poll(n,r){const s=await r.getTransactionReceipt(E(this,Tm));s&&r.emit(E(this,Tm),s)}}Tm=new WeakMap;var Vc,Nm,Pm,Fu,ao,eC,NV;class D3{constructor(e,n){G(this,eC);G(this,Vc);G(this,Nm);G(this,Pm);G(this,Fu);G(this,ao);D(this,Vc,e),D(this,Nm,Ek(n)),D(this,Pm,ne(this,eC,NV).bind(this)),D(this,Fu,!1),D(this,ao,-2)}start(){E(this,Fu)||(D(this,Fu,!0),E(this,ao)===-2&&E(this,Vc).getBlockNumber().then(e=>{D(this,ao,e)}),E(this,Vc).on("block",E(this,Pm)))}stop(){E(this,Fu)&&(D(this,Fu,!1),E(this,Vc).off("block",E(this,Pm)))}pause(e){this.stop(),e&&D(this,ao,-2)}resume(){this.start()}}Vc=new WeakMap,Nm=new WeakMap,Pm=new WeakMap,Fu=new WeakMap,ao=new WeakMap,eC=new WeakSet,NV=async function(e){if(E(this,ao)===-2)return;const n=Ek(E(this,Nm));n.fromBlock=E(this,ao)+1,n.toBlock=e;const r=await E(this,Vc).getLogs(n);if(r.length===0){E(this,ao)<e-60&&D(this,ao,e-60);return}for(const s of r)E(this,Vc).emit(E(this,Nm),s),D(this,ao,s.blockNumber)};const K5e=BigInt(2),Q5e=10;function kE(t){return t&&typeof t.then=="function"}function wx(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,o)=>(i[o]=r[o],i),{})}return r})}class PV{constructor(e){J(this,"name");Xe(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function Y5e(t){return JSON.parse(JSON.stringify(t))}function xk(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function RI(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(wn(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:wx("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:wx("orphan",n),filter:Y5e(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(s=>s==null?null:Array.isArray(s)?xk(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(n.address){const s=[],i=[],o=a=>{wn(a)?s.push(a):i.push((async()=>{s.push(await Ss(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),i.length&&await Promise.all(i),r.address=xk(s.map(a=>a.toLowerCase()))}return{filter:r,tag:wx("event",r),type:"event"}}W(!1,"unknown ProviderEvent","event",t)}function DI(){return new Date().getTime()}const J5e={cacheTimeout:250,pollingInterval:4e3};var os,zu,as,km,Pi,of,Hu,Kc,xv,co,Om,Rm,wt,Ci,_k,Ck,Q0,Ak,Y0,bx;class Z5e{constructor(e,n){G(this,wt);G(this,os);G(this,zu);G(this,as);G(this,km);G(this,Pi);G(this,of);G(this,Hu);G(this,Kc);G(this,xv);G(this,co);G(this,Om);G(this,Rm);if(D(this,Rm,Object.assign({},J5e,n||{})),e==="any")D(this,of,!0),D(this,Pi,null);else if(e){const r=Xa.from(e);D(this,of,!1),D(this,Pi,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else D(this,of,!1),D(this,Pi,null);D(this,Kc,-1),D(this,Hu,new Map),D(this,os,new Map),D(this,zu,new Map),D(this,as,null),D(this,km,!1),D(this,xv,1),D(this,co,new Map),D(this,Om,!1)}get pollingInterval(){return E(this,Rm).pollingInterval}get provider(){return this}get plugins(){return Array.from(E(this,zu).values())}attachPlugin(e){if(E(this,zu).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return E(this,zu).set(e.name,e.connect(this)),this}getPlugin(e){return E(this,zu).get(e)||null}get disableCcipRead(){return E(this,Om)}set disableCcipRead(e){D(this,Om,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const c=r[a],l=c.replace("{sender}",s).replace("{data}",i),u=new kd(l);c.indexOf("{data}")===-1&&(u.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let d="unknown error",h;try{h=await u.send()}catch(f){o.push(f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:f}});continue}try{const f=h.bodyJson;if(f.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:f}),f.data;f.message&&(d=f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:f})}catch{}de(h.statusCode<400||h.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:d}}),o.push(d)}de(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new y5e(U5e(e),this)}_wrapLog(e,n){return new i1(D5e(e),this)}_wrapTransactionReceipt(e,n){return new gV(j5e(e),this)}_wrapTransactionResponse(e,n){return new ov(TV(e),this)}_detectNetwork(){de(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){de(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=ft(await ne(this,wt,Ci).call(this,{method:"getBlockNumber"}),"%response");return E(this,Kc)>=0&&D(this,Kc,e),e}_getAddress(e){return Ss(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(wn(e))return wn(e,32)?e:ea(e);if(typeof e=="bigint"&&(e=ft(e,"blockTag")),typeof e=="number")return e>=0?ea(e):E(this,Kc)>=0?ea(E(this,Kc)+e):this.getBlockNumber().then(n=>ea(n+e));W(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?xk(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(c,l,u)=>{let d;switch(c.length){case 0:break;case 1:d=c[0];break;default:c.sort(),d=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");const h={};return d&&(h.address=d),n.length&&(h.topics=n),l&&(h.fromBlock=l),u&&(h.toBlock=u),r&&(h.blockHash=r),h};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(e){const n=G_(e),r=[];if(["to","from"].forEach(s=>{if(n[s]==null)return;const i=Ss(n[s],this);kE(i)?r.push(async function(){n[s]=await i}()):n[s]=i}),n.blockTag!=null){const s=this._getBlockTag(n.blockTag);kE(s)?r.push(async function(){n.blockTag=await s}()):n.blockTag=s}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(E(this,Pi)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw E(this,Pi)===s&&D(this,Pi,null),i}})();return D(this,Pi,s),(await s).clone()}const e=E(this,Pi),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(E(this,of)?(this.emit("network",r,n),E(this,Pi)===e&&D(this,Pi,Promise.resolve(r))):de(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await vs({_block:ne(this,wt,Ak).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await ne(this,wt,Ci).call(this,{method:"getGasPrice"});return He(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await ne(this,wt,Ci).call(this,{method:"getPriorityFee"});return He(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(s,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*K5e+c),new bB(i,a,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new kd(r.url),i=await r.processFunc(n,this,s);return new bB(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return kE(n)&&(n=await n),He(await ne(this,wt,Ci).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await vs({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await ne(this,wt,Ck).call(this,ne(this,wt,_k).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return He(await ne(this,wt,Q0).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return ft(await ne(this,wt,Q0).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return Ae(await ne(this,wt,Q0).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const s=He(n,"position");return Ae(await ne(this,wt,Q0).call(this,{method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:s}=await vs({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=B_.from(e);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:s}=await vs({network:this.getNetwork(),params:ne(this,wt,Ak).call(this,e,!!n)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:n,params:r}=await vs({network:this.getNetwork(),params:ne(this,wt,Ci).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await vs({network:this.getNetwork(),params:ne(this,wt,Ci).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await ne(this,wt,Ci).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await vs({network:this.getNetwork(),result:ne(this,wt,Ci).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:Ae(n)}async getLogs(e){let n=this._getFilter(e);kE(n)&&(n=await n);const{network:r,params:s}=await vs({network:this.getNetwork(),params:ne(this,wt,Ci).call(this,{method:"getLogs",filter:n})});return s.map(i=>this._wrapLog(i,r))}_getProvider(e){de(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await q_.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=Yt(e);const n=gk(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await q_.getEnsAddress(this),i=await new vf(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(i==null||i===Zb)return null;const a=await new vf(i,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(Lr(r,"BAD_DATA")&&r.value==="0x"||Lr(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const s=n??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const c=async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=s){i(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(In("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){de(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=E(this,co).get(e);n&&(n.timer&&clearTimeout(n.timer),E(this,co).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=Tl(this,xv)._++,s=()=>{E(this,co).delete(r),e()};if(this.paused)E(this,co).set(r,{timer:null,func:s,time:n});else{const i=setTimeout(s,n);E(this,co).set(r,{timer:i,func:s,time:DI()})}return r}_forEachSubscriber(e){for(const n of E(this,os).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new PV(e.type);case"block":{const n=new G5e(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new W5e(this,e.type);case"event":return new D3(this,e.filter);case"transaction":return new V5e(this,e.hash);case"orphan":return new q5e(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of E(this,os).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),E(this,as)!=null&&n.pause(E(this,as));break}}async on(e,n){const r=await ne(this,wt,bx).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,E(this,as)!=null&&r.subscriber.pause(E(this,as))),this}async once(e,n){const r=await ne(this,wt,bx).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,E(this,as)!=null&&r.subscriber.pause(E(this,as))),this}async emit(e,...n){const r=await ne(this,wt,Y0).call(this,e,n);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:o})=>{const a=new WW(this,o?null:i,e);try{i.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),E(this,os).delete(r.tag)),s>0}async listenerCount(e){if(e){const r=await ne(this,wt,Y0).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of E(this,os).values())n+=r.length;return n}async listeners(e){if(e){const r=await ne(this,wt,Y0).call(this,e);return r?r.listeners.map(({listener:s})=>s):[]}let n=[];for(const{listeners:r}of E(this,os).values())n=n.concat(r.map(({listener:s})=>s));return n}async off(e,n){const r=await ne(this,wt,Y0).call(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),E(this,os).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:s}=await ne(this,wt,bx).call(this,e);r&&s.stop(),E(this,os).delete(n)}else for(const[n,{started:r,subscriber:s}]of E(this,os))r&&s.stop(),E(this,os).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return E(this,km)}destroy(){this.removeAllListeners();for(const e of E(this,co).keys())this._clearTimeout(e);D(this,km,!0)}get paused(){return E(this,as)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(D(this,Kc,-1),E(this,as)!=null){if(E(this,as)==!!e)return;de(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),D(this,as,!!e);for(const n of E(this,co).values())n.timer&&clearTimeout(n.timer),n.time=DI()-n.time}resume(){if(E(this,as)!=null){this._forEachSubscriber(e=>e.resume()),D(this,as,null);for(const e of E(this,co).values()){let n=e.time;n<0&&(n=0),e.time=DI(),setTimeout(e.func,n)}}}}os=new WeakMap,zu=new WeakMap,as=new WeakMap,km=new WeakMap,Pi=new WeakMap,of=new WeakMap,Hu=new WeakMap,Kc=new WeakMap,xv=new WeakMap,co=new WeakMap,Om=new WeakMap,Rm=new WeakMap,wt=new WeakSet,Ci=async function(e){const n=E(this,Rm).cacheTimeout;if(n<0)return await this._perform(e);const r=wx(e.method,e);let s=E(this,Hu).get(r);return s||(s=this._perform(e),E(this,Hu).set(r,s),setTimeout(()=>{E(this,Hu).get(r)===s&&E(this,Hu).delete(r)},n)),await s},_k=async function(e,n,r){de(r<Q5e,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const s=G_(e);try{return Ae(await this._perform({method:"call",transaction:s,blockTag:n}))}catch(i){if(!this.disableCcipRead&&m3(i)&&i.data&&r>=0&&n==="latest"&&s.to!=null&&Mn(i.data,0,4)==="0x556f1830"){const o=i.data,a=await Ss(s.to,this);let c;try{c=r8e(Mn(i.data,4))}catch(d){de(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}de(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(s,c.calldata,c.urls);de(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const u={to:a,data:zn([c.selector,n8e([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const d=await ne(this,wt,_k).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:d}),d}}throw i}},Ck=async function(e){const{value:n}=await vs({network:this.getNetwork(),value:e});return n},Q0=async function(e,n,r){let s=this._getAddress(n),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await ne(this,wt,Ck).call(this,ne(this,wt,Ci).call(this,Object.assign(e,{address:s,blockTag:i})))},Ak=async function(e,n){if(wn(e,32))return await ne(this,wt,Ci).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await ne(this,wt,Ci).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},Y0=async function(e,n){let r=await RI(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await RI({orphan:"drop-log",log:n[0]},this)),E(this,os).get(r.tag)||null},bx=async function(e){const n=await RI(e,this),r=n.tag;let s=E(this,os).get(r);return s||(s={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},E(this,os).set(r,s)),s};function X5e(t,e){try{const n=Sk(t,e);if(n)return D_(n)}catch{}return null}function Sk(t,e){if(t==="0x")return null;try{const n=ft(Mn(t,e,e+32)),r=ft(Mn(t,n,n+32));return Mn(t,n+32,n+32+r)}catch{}return null}function IB(t){const e=ur(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function e8e(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const t8e=new Uint8Array([]);function n8e(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(t8e),n+=32;for(let r=0;r<t.length;r++){const s=mt(t[r]);e[r]=IB(n),e.push(IB(s.length)),e.push(e8e(s)),n+=32+Math.ceil(s.length/32)*32}return zn(e)}const TB="0x0000000000000000000000000000000000000000000000000000000000000000";function r8e(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};de($g(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=Mn(t,0,32);de(Mn(n,0,12)===Mn(TB,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=Mn(n,12);try{const r=[],s=ft(Mn(t,32,64)),i=ft(Mn(t,s,s+32)),o=Mn(t,s+32);for(let a=0;a<i;a++){const c=X5e(o,a*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{de(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=Sk(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{de(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}de(Mn(t,100,128)===Mn(TB,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=Mn(t,96,100);try{const r=Sk(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{de(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function th(t,e){if(t.provider)return t.provider;de(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function NB(t,e){let n=G_(e);if(n.to!=null&&(n.to=Ss(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),Ss(r,t)]).then(([s,i])=>(W(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else n.from=t.getAddress();return await vs(n)}class s8e{constructor(e){J(this,"provider");Xe(this,{provider:e||null})}async getNonce(e){return th(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await NB(this,e)}async populateTransaction(e){const n=th(this,"populateTransaction"),r=await NB(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const o=He(r.chainId);W(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?W(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&i&&W(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();de(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(de(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):de(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await vs(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await th(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return th(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return th(this,"call").call(await this.populateCall(e))}async resolveName(e){return await th(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=th(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=B_.from(r);return await n.broadcastTransaction(await this.signTransaction(s))}authorize(e){de(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function i8e(t){return JSON.parse(JSON.stringify(t))}var ws,Ga,af,Gu,cf,Dm,Rd,Ik,Tk;class kV{constructor(e){G(this,Rd);G(this,ws);G(this,Ga);G(this,af);G(this,Gu);G(this,cf);G(this,Dm);D(this,ws,e),D(this,Ga,null),D(this,af,ne(this,Rd,Ik).bind(this)),D(this,Gu,!1),D(this,cf,null),D(this,Dm,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){E(this,Gu)||(D(this,Gu,!0),ne(this,Rd,Ik).call(this,-2))}stop(){E(this,Gu)&&(D(this,Gu,!1),D(this,Dm,!0),ne(this,Rd,Tk).call(this),E(this,ws).off("block",E(this,af)))}pause(e){e&&ne(this,Rd,Tk).call(this),E(this,ws).off("block",E(this,af))}resume(){this.start()}}ws=new WeakMap,Ga=new WeakMap,af=new WeakMap,Gu=new WeakMap,cf=new WeakMap,Dm=new WeakMap,Rd=new WeakSet,Ik=async function(e){try{E(this,Ga)==null&&D(this,Ga,this._subscribe(E(this,ws)));let n=null;try{n=await E(this,Ga)}catch(i){if(!Lr(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(n==null){D(this,Ga,null),E(this,ws)._recoverSubscriber(this,this._recover(E(this,ws)));return}const r=await E(this,ws).getNetwork();if(E(this,cf)||D(this,cf,r),E(this,cf).chainId!==r.chainId)throw new Error("chaid changed");if(E(this,Dm))return;const s=await E(this,ws).send("eth_getFilterChanges",[n]);await this._emitResults(E(this,ws),s)}catch(n){console.log("@TODO",n)}E(this,ws).once("block",E(this,af))},Tk=function(){const e=E(this,Ga);e&&(D(this,Ga,null),e.then(n=>{E(this,ws).destroyed||E(this,ws).send("eth_uninstallFilter",[n])}))};var lf;class o8e extends kV{constructor(n,r){super(n);G(this,lf);D(this,lf,i8e(r))}_recover(n){return new D3(n,E(this,lf))}async _subscribe(n){return await n.send("eth_newFilter",[E(this,lf)])}async _emitResults(n,r){for(const s of r)n.emit(E(this,lf),n._wrapLog(s,n._network))}}lf=new WeakMap;class a8e extends kV{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const c8e="bigint,boolean,function,number,string,symbol".split(/,/g);function vx(t){if(t==null||c8e.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(vx);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function l8e(t){return new Promise(e=>{setTimeout(e,t)})}function Gp(t){return t&&t.toLowerCase()}function PB(t){return t&&typeof t.pollingInterval=="number"}const OV={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class $I extends s8e{constructor(n,r){super(n);J(this,"address");r=Yt(r),Xe(this,{address:r})}connect(n){de(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=vx(n),s=[];if(r.from){const o=r.from;s.push((async()=>{const a=await Ss(o,this.provider);W(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;s.push((async()=>{r.to=await Ss(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(n);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const l=async()=>{try{const u=await this.provider.getTransaction(s);if(u!=null){i(u.replaceableTransaction(r));return}}catch(u){if(Lr(u,"CANCELLED")||Lr(u,"BAD_DATA")||Lr(u,"NETWORK_ERROR")||Lr(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=s,o(u);return}if(Lr(u,"INVALID_ARGUMENT")&&(c++,u.info==null&&(u.info={}),u.info.sendTransactionHash=s,c>10)){o(u);return}this.provider.emit("error",In("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{l()},a.pop()||4e3)};l()})}async signTransaction(n){const r=vx(n);if(r.from){const i=await Ss(r.from,this.provider);W(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(n){const r=typeof n=="string"?cl(n):n;return await this.provider.send("personal_sign",[Ae(r),this.address.toLowerCase()])}async signTypedData(n,r,s){const i=vx(s),o=await H_.resolveNames(n,r,i,async a=>{const c=await Ss(a);return W(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(H_.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?cl(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Ae(r)])}}var uf,$m,Qc,Wa,Ko,lo,Ys,_v,Nk;class u8e extends Z5e{constructor(n,r){super(n,r);G(this,_v);G(this,uf);G(this,$m);G(this,Qc);G(this,Wa);G(this,Ko);G(this,lo);G(this,Ys);D(this,$m,1),D(this,uf,Object.assign({},OV,r||{})),D(this,Qc,[]),D(this,Wa,null),D(this,lo,null),D(this,Ys,null);{let i=null;const o=new Promise(a=>{i=a});D(this,Ko,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(W(!s||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&n!=null&&D(this,lo,Xa.from(n))):s&&(W(n==null||s.matches(n),"staticNetwork MUST match network object","options",r),D(this,lo,s))}_getOption(n){return E(this,uf)[n]}get _network(){return de(E(this,lo),"network is not available yet","NETWORK_ERROR"),E(this,lo)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let s=n.transaction;if(s&&s.type!=null&&He(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(E(this,lo))return E(this,lo)}else return n;return E(this,Ys)?await E(this,Ys):this.ready?(D(this,Ys,(async()=>{try{const r=Xa.from(He(await this.send("eth_chainId",[])));return D(this,Ys,null),r}catch(r){throw D(this,Ys,null),r}})()),await E(this,Ys)):(D(this,Ys,(async()=>{const r={id:Tl(this,$m)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],D(this,Ys,null)}catch(i){throw D(this,Ys,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Xa.from(He(s.result));throw this.getRpcError(r,s)})()),await E(this,Ys))}_start(){E(this,Ko)==null||E(this,Ko).resolve==null||(E(this,Ko).resolve(),D(this,Ko,null),(async()=>{for(;E(this,lo)==null&&!this.destroyed;)try{D(this,lo,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",In("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await l8e(1e3)}ne(this,_v,Nk).call(this)})())}async _waitUntilReady(){if(E(this,Ko)!=null)return await E(this,Ko).promise}_getSubscriber(n){return n.type==="pending"?new a8e(this):n.type==="event"?this._getOption("polling")?new D3(this,n.filter):new o8e(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new PV("orphan"):super._getSubscriber(n)}get ready(){return E(this,Ko)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(n[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=ea(He(n[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{n[s]!=null&&(r[s]=Ae(n[s]))}),n.accessList&&(r.accessList=up(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(s=>s.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(s=>{const i=Dq(s);return{address:i.address,nonce:ea(i.nonce),chainId:ea(i.chainId),yParity:ea(i.signature.yParity),r:ea(i.signature.r),s:ea(i.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Gp(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Gp(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[Gp(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Gp(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(Gp):n.filter.address=Gp(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:s}=n,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return In("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:i}});if(c.match(/nonce/i)&&c.match(/too low/i))return In("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=Pk(i),l=iv.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",n.params[0],c?c.data:null);return l.info={error:i,payload:n},l}const o=JSON.stringify(h8e(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return In("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:n,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return In("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return In("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return In("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return In("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?In("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:i,payload:n}}):In("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(In("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const s=Tl(this,$m)._++,i=new Promise((o,a)=>{E(this,Qc).push({resolve:o,reject:a,payload:{method:n,params:r,id:s,jsonrpc:"2.0"}})});return ne(this,_v,Nk).call(this),i}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const i=await r;if(n>=i.length)throw new Error("no such account");return new $I(this,i[n])}const{accounts:s}=await vs({network:this.getNetwork(),accounts:r});n=Yt(n);for(const i of s)if(Yt(i)===n)return new $I(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new $I(this,r))}destroy(){E(this,Wa)&&(clearTimeout(E(this,Wa)),D(this,Wa,null));for(const{payload:n,reject:r}of E(this,Qc))r(In("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));D(this,Qc,[]),super.destroy()}}uf=new WeakMap,$m=new WeakMap,Qc=new WeakMap,Wa=new WeakMap,Ko=new WeakMap,lo=new WeakMap,Ys=new WeakMap,_v=new WeakSet,Nk=function(){if(E(this,Wa))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");D(this,Wa,setTimeout(()=>{D(this,Wa,null);const r=E(this,Qc);for(D(this,Qc,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==E(this,uf).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(o=>o.payload)).length>E(this,uf).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:l}of s){if(this.destroyed){c(In("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const u=o.filter(d=>d.id===l.id)[0];if(u==null){const d=In("missing response for request","BAD_DATA",{value:o,info:{payload:l}});this.emit("error",d),c(d);continue}if("error"in u){c(this.getRpcError(l,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},n))};var Wu;class d8e extends u8e{constructor(n,r){super(n,r);G(this,Wu);let s=this._getOption("pollingInterval");s==null&&(s=OV.pollingInterval),D(this,Wu,s)}_getSubscriber(n){const r=super._getSubscriber(n);return PB(r)&&(r.pollingInterval=E(this,Wu)),r}get pollingInterval(){return E(this,Wu)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");D(this,Wu,n),this._forEachSubscriber(r=>{PB(r)&&(r.pollingInterval=E(this,Wu))})}}Wu=new WeakMap;function Pk(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&wn(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=Pk(t[e]);if(n)return n}return null}if(typeof t=="string")try{return Pk(JSON.parse(t))}catch{}return null}function kk(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)kk(t[n],e);if(typeof t=="string")try{return kk(JSON.parse(t),e)}catch{}}}function h8e(t){const e=[];return kk(t,e),e}var Um,Bm;const wh=class wh extends d8e{constructor(n,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});W(n&&n.request,"invalid EIP-1193 provider","ethereum",n);super(r,i);G(this,Um);G(this,Bm);D(this,Bm,null),s&&s.providerInfo&&D(this,Bm,s.providerInfo),D(this,Um,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const l=await n.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const u=new Error(l.message);throw u.code=l.code,u.data=l.data,u.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}})}get providerInfo(){return E(this,Bm)}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){W(!Array.isArray(n),"EIP-1193 does not support batch request","payload",n);try{const r=await E(this,Um).call(this,n.method,n.params||[]);return[{id:n.id,result:r}]}catch(r){return[{id:n.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(n,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(n,r)}async hasSigner(n){n==null&&(n=0);const r=await this.send("eth_accounts",[]);return typeof n=="number"?r.length>n:(n=n.toLowerCase(),r.filter(s=>s.toLowerCase()===n).length!==0)}async getSigner(n){if(n==null&&(n=0),!await this.hasSigner(n))try{await E(this,Um).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(n)}static async discover(n){if(n==null&&(n={}),n.provider)return new wh(n.provider);const r=n.window?n.window:typeof window<"u"?window:null;if(r==null)return null;const s=n.anyProvider;if(s&&r.ethereum)return new wh(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=n.timeout?n.timeout:300;return i===0?null:await new Promise((o,a)=>{let c=[];const l=h=>{c.push(h.detail),s&&u()},u=()=>{if(clearTimeout(d),c.length)if(n&&n.filter){const h=n.filter(c.map(f=>Object.assign({},f.info)));if(h==null)o(null);else if(h instanceof wh)o(h);else{let f=null;if(h.uuid&&(f=c.filter(g=>h.uuid===g.info.uuid)[0]),f){const{provider:p,info:g}=f;o(new wh(p,void 0,{providerInfo:g}))}else a(In("filter returned unknown info","UNSUPPORTED_OPERATION",{value:h}))}}else{const{provider:h,info:f}=c[0];o(new wh(h,void 0,{providerInfo:f}))}else o(null);r.removeEventListener("eip6963:announceProvider",l)},d=setTimeout(()=>{u()},i);r.addEventListener("eip6963:announceProvider",l),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};Um=new WeakMap,Bm=new WeakMap;let V_=wh;const UI="0x3112AF5728520F52FD1C6710dD7bD52285a68e47",kB={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},OB=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],RV=()=>{var Fy;const{address:t}=Uv(),[e,n]=k.useState(null),r=()=>{console.log("[DEBUG] Testing Supabase real-time connection..."),console.log("[DEBUG] Testing basic network connectivity..."),fetch("https://httpbin.org/get").then(z=>{console.log("[DEBUG] Basic network connectivity: OK"),console.log("[DEBUG] Response status:",z.status)}).catch(z=>{console.error("[DEBUG] Basic network connectivity failed:",z)}),console.log("[DEBUG] Testing Supabase REST API..."),Ht.from("chess_games").select("count").limit(1).then(({error:z})=>{z?console.error("[DEBUG] Supabase REST API failed:",z):console.log("[DEBUG] Supabase REST API: OK")});try{const z=Ht.channel("test-connection").on("presence",{event:"sync"},()=>{console.log("[DEBUG] Test channel presence sync successful")}).on("presence",{event:"join"},()=>{console.log("[DEBUG] Test channel presence join successful")}).subscribe(Q=>{console.log("[DEBUG] Test channel subscription status:",Q),Q==="SUBSCRIBED"?(console.log("[DEBUG] Test connection successful!"),window.setTimeout(()=>{Ht.removeChannel(z)},1e3)):Q==="CHANNEL_ERROR"?console.error("[DEBUG] Test connection failed with CHANNEL_ERROR"):Q==="CLOSED"&&console.error("[DEBUG] Test connection closed")})}catch(z){console.error("[DEBUG] Test connection error:",z)}},[s,i]=k.useState(null),[o,a]=k.useState(null),[c,l]=k.useState(!1),[u,d]=k.useState([]),[h,f]=k.useState("Loading..."),[p,g]=k.useState(!1),[y,w]=k.useState(!1),[v,b]=k.useState("0.1"),[_,x]=k.useState(""),[C,S]=k.useState(!0),[N,A]=k.useState(""),[P,R]=k.useState(!1),[j,H]=k.useState(!1),[K,T]=k.useState(!1),[I,L]=k.useState(OB),[U,$]=k.useState(null),[M,q]=k.useState([]),[ee,ce]=k.useState(null),[se,le]=k.useState("checking"),me=k.useRef(null),Z=k.useRef(0),re=k.useRef(null),ae=k.useRef(null),oe=k.useRef(null),we=k.useCallback(async()=>{try{return window.ethereum?await window.ethereum.request({method:"eth_chainId"})==="0x7c8"?(le("correct"),!0):(le("wrong"),!1):(le("error"),!1)}catch(z){return console.error("Network check failed:",z),le("error"),!1}},[]);k.useEffect(()=>{if(window.ethereum){const z=()=>{we()};return window.ethereum.on("chainChanged",z),we(),()=>{window.ethereum&&window.ethereum.removeListener("chainChanged",z)}}},[we]),k.useEffect(()=>{r()},[]);const Ge=k.useCallback(async()=>{try{if(!window.ethereum)return f("No wallet detected"),!1;const{chainId:z}=await window.ethereum.request({method:"eth_chainId"});if(z!=="0x7c8")try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x7c8"}]})}catch(Q){if(typeof Q=="object"&&Q&&"code"in Q&&Q.code===4902)await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x7c8",chainName:"Sanko Testnet",rpcUrls:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"],nativeCurrency:{name:"tDMT",symbol:"tDMT",decimals:18},blockExplorerUrls:["https://explorer.testnet.sanko.xyz"]}]});else throw new Error("Please switch to Sanko Testnet")}return!0}catch(z){return console.error("Network switch failed:",z),f("Please switch to Sanko Testnet"),!1}},[]),ve=k.useCallback(async()=>{try{if(!window.ethereum)return null;const Q=await new V_(window.ethereum).getSigner();return new vf(UI,[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"AddressEmptyCode",type:"error"},{inputs:[{internalType:"address",name:"implementation",type:"address"}],name:"ERC1967InvalidImplementation",type:"error"},{inputs:[],name:"ERC1967NonPayable",type:"error"},{inputs:[],name:"FailedCall",type:"error"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[],name:"UUPSUnauthorizedCallContext",type:"error"},{inputs:[{internalType:"bytes32",name:"slot",type:"bytes32"}],name:"UUPSUnsupportedProxiableUUID",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player1",type:"address"}],name:"GameCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player1",type:"address"},{indexed:!1,internalType:"uint256",name:"wagerAmount",type:"uint256"}],name:"GameCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"winner",type:"address"},{indexed:!1,internalType:"uint256",name:"houseFee",type:"uint256"},{indexed:!1,internalType:"uint256",name:"payoutOrRefund",type:"uint256"}],name:"GameEnded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player2",type:"address"}],name:"GameJoined",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{inputs:[],name:"MAX_WAGER",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"MIN_WAGER",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"UPGRADE_INTERFACE_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"cancelGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"createGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"winner",type:"address"}],name:"endGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"games",outputs:[{internalType:"address",name:"player1",type:"address"},{internalType:"address",name:"player2",type:"address"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"address",name:"winner",type:"address"},{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"uint256",name:"wagerAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"house",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"joinGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"leaderboard",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerToGame",outputs:[{internalType:"bytes6",name:"",type:"bytes6"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"player",type:"address"}],name:"resetPlayerGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newImplementation",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address payable",name:"recipient",type:"address"}],name:"withdrawFunds",outputs:[],stateMutability:"nonpayable",type:"function"}],Q)}catch(z){return console.error("Failed to connect to contract:",z),null}},[]),Se=k.useCallback(()=>{ae.current&&window.clearInterval(ae.current),ae.current=window.setInterval(async()=>{try{let z=new Date(Date.now()-18e5).toISOString();new Date(z).getTime()>Date.now()&&(console.warn("[Supabase] expiryThreshold was in the future, falling back to now:",z),z=new Date().toISOString());const{data:Q,error:he}=await Ht.from("chess_games").select("game_id, blue_player").eq("game_state","waiting").is("red_player",null).lte("created_at",z).eq("chain","sanko");if(he){console.error("Supabase expiry query error:",he.message);return}for(const be of Q||[]){const Ee=await ve();if(Ee){const Ve=_s(Ae("0x"+be.game_id.toLowerCase()),6);await Ee.cancelGame(Ve),await Ht.from("chess_games").update({game_state:"cancelled",updated_at:new Date().toISOString()}).eq("game_id",be.game_id)}}await It()}catch(z){console.error("Error checking game expiry:",z)}},60*1e3)},[ve]),De=k.useCallback(async(z=5,Q=1e3)=>{if(!t)return f("Please connect your wallet"),!1;if(Date.now()-Z.current<1e3)return!1;Z.current=Date.now();let he=1;for(;he<=z;){try{let be=null;const Ee=await ve();if(Ee){if(await window.ethereum.request({method:"eth_chainId"})!=="0x7c8")return f("Please switch to Sanko Testnet"),!1;const Et=await Ee.playerToGame(t);Et!=="0x000000000000"&&Et!==""&&(be=Ae(Et).slice(2).toUpperCase())}if(!be){const{data:ot,error:Et}=await Ht.from("chess_games").select("game_id").eq("chain","sanko").eq("game_state","active").or(`blue_player.eq.${t},red_player.eq.${t}`);if(Et)throw new Error(`Supabase error: ${Et.message}`);if(!(ot!=null&&ot.length))return yi(),!1;be=ot[0].game_id}if(re.current===be)return!1;re.current=be;const{data:Ve,error:Ye}=await Ht.from("chess_games").select("*").eq("game_id",be.toLowerCase()).eq("chain","sanko").or(`blue_player.eq.${t},red_player.eq.${t}`).maybeSingle();if(Ye)throw new Error(`Supabase query error: ${Ye.message}`);return Ve&&Ve&&(Ve.game_state==="active"||Ve.game_state==="waiting")?(a(Ve),i(t===Ve.blue_player?"blue":"red"),n(be),l(Ve.game_state==="waiting"),f(Wt(Ve)?"Your turn":"Opponent's turn"),be&&await Tt(be),!0):(yi(),!1)}catch(be){be instanceof Error&&(console.error(`checkPlayerGameState attempt ${he} failed:`,be.message),he<z?await new Promise(Ee=>window.setTimeout(Ee,Q*Math.pow(2,he-1))):f("Failed to load game. Please reconnect wallet."))}he++}return!1},[t,ve]),tt=k.useCallback(async()=>{const z=(-99990013e3).toString().replace(/[018]/g,he=>(parseInt(he)^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>parseInt(he)/4).toString(16)).slice(0,6).toUpperCase(),{data:Q}=await Ht.from("chess_games").select("game_id").eq("game_id",z.toLowerCase()).single();return Q?tt():z},[]),Gt=k.useCallback(async()=>{if(!P){R(!0),g(!0),f("Creating game...");try{if(!t)throw new Error("Wallet not connected");if(!await Ge())return;const z=await ve();if(!z)throw new Error("Failed to connect to contract");const Q=bI(await z.MIN_WAGER()),he=bI(await z.MAX_WAGER());if(parseFloat(v)<parseFloat(Q)||parseFloat(v)>parseFloat(he))throw new Error(`Wager must be between ${Q} and ${he} tDMT`);const be=await z.playerToGame(t);if(be!=="0x000000000000"&&be!==""){console.log("[DEBUG] Found existing game, checking if it can be cancelled...");const Wd=Ae(be).slice(2).toUpperCase();if((await z.games(be)).player2!=="0x0000000000000000000000000000000000000000")throw new Error("You are already in an active game. Please finish that game first.");try{const zy=_s(Ae("0x"+Wd.toLowerCase()),6);await z.cancelGame(zy),await mi(Wd),await new Promise(h1=>setTimeout(h1,3e3));const d1=await z.playerToGame(t);if(d1!=="0x000000000000"&&d1!=="")throw new Error("Failed to cancel existing game. Please try again.")}catch(zy){throw console.error("[DEBUG] Cleanup failed:",zy),new Error("Please cancel your existing game first or contact support")}}const Ee=await tt(),Ve=_s(Ae("0x"+Ee.toLowerCase()),6),Ye=T4(v),{data:ot}=await Ht.from("chess_games").select("game_id").eq("game_id",Ee.toLowerCase()).eq("game_state","waiting");if(ot!=null&&ot.length)throw new Error("Invite code already exists");const{data:Et,error:wi}=await Ht.from("chess_games").insert({game_id:Ee.toLowerCase(),blue_player:t,red_player:null,board:{positions:JSON.parse(JSON.stringify(OB)),piece_state:{}},current_player:"blue",game_state:"waiting",bet_amount:v,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_public:C,game_title:_||null,chain:"sanko",contract_address:UI}).select().single();if(wi)throw new Error(`Supabase insert failed: ${wi.message}`);return await z.createGame(Ve,{value:Ye}),n(Ee),i("blue"),a(Et),l(!0),A(Ee),w(!1),f("Waiting for opponent..."),await Tt(Ee),await It(),alert(`Game created with wager ${v} tDMT`),Ee}catch(z){return z instanceof Error&&(console.error("Create game failed:",z.message),R(!1),l(!1),f(`Failed to create game: ${z.message}`),alert(`Failed to create game: ${z.message}`)),!1}finally{g(!1)}}},[t,v,_,C,P,Ge,ve,tt]),It=k.useCallback(async()=>{try{const{data:z,error:Q}=await Ht.from("chess_games").select("*").eq("chain","sanko").eq("game_state","waiting").eq("is_public",!0).order("created_at",{ascending:!1});if(Q){console.error("Error fetching games:",Q);return}d(z||[])}catch(z){console.error("Error fetching games:",z)}},[]),Tt=k.useCallback(async z=>{me.current&&Ht.removeChannel(me.current);try{console.log("[DEBUG] Setting up game subscription for:",z),me.current=Ht.channel(`chess_game_${z}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"chess_games",filter:`game_id=eq.${z.toLowerCase()}`},Q=>{var be;console.log("[DEBUG] Game update received:",Q);const he=Q.new;he&&(console.log("[DEBUG] Updating game state with:",he),a(he),l(he.game_state==="waiting"),f(Wt(he)?"Your turn":"Opponent's turn"),(be=he.board)!=null&&be.positions&&(console.log("[DEBUG] Updating board with:",he.board.positions),L(he.board.positions)),he.last_move&&ce({from:{row:he.last_move.from_row,col:he.last_move.from_col},to:{row:he.last_move.end_row,col:he.last_move.end_col}}))}).on("postgres_changes",{event:"INSERT",schema:"public",table:"chess_games",filter:`game_id=eq.${z.toLowerCase()}`},Q=>{console.log("[DEBUG] Game created:",Q),De()}).subscribe(Q=>{console.log(`[DEBUG] Game subscription status: ${Q}`),Q==="CHANNEL_ERROR"?console.error("[DEBUG] Game subscription failed, falling back to polling only"):Q==="SUBSCRIBED"?console.log("[DEBUG] Game subscription successful"):Q==="TIMED_OUT"&&console.error("[DEBUG] Game subscription timed out, falling back to polling only")})}catch(Q){console.error("[DEBUG] Failed to subscribe to game:",Q),console.log("[DEBUG] Falling back to polling only for game updates")}},[De]),Dt=k.useCallback(async z=>{if(!t){f("Please connect your wallet");return}g(!0),f("Joining game...");try{if(!await Ge())return;const Q=await ve();if(!Q){f("Failed to connect to contract");return}const{data:he,error:be}=await Ht.from("chess_games").select("*").eq("game_id",z.toLowerCase()).eq("game_state","waiting").single();if(be||!he){f("Game not found or already started");return}const Ee=_s(Ae("0x"+z.toLowerCase()),6),Ve=T4(he.bet_amount);await(await Q.joinGame(Ee,{value:Ve})).wait();const{error:ot}=await Ht.from("chess_games").update({red_player:t,game_state:"active",updated_at:new Date().toISOString()}).eq("game_id",z.toLowerCase());if(ot)throw ot;await Tt(z),f("Successfully joined game!"),A(z),await De()}catch(Q){console.error("Failed to join game:",Q),f(`Failed to join game: ${Q instanceof Error?Q.message:"Unknown error"}`)}finally{g(!1)}},[t,Ge,ve,Tt,De]),vn=k.useCallback(async()=>{T(!0);try{if(!t){f("Please connect your wallet to resync");return}console.log("Attempting to resync game state"),await It(),await De(),e&&o&&(console.log("[DEBUG] Force sync: Ensuring game subscription for:",e),await Tt(e)),f("Game state resynced successfully")}catch(z){console.error("forceMultiplayerSync failed:",z),f("Resync failed: "+(z instanceof Error?z.message:"Unknown error"))}finally{T(!1)}},[t,It,De,e,o,Tt]),fs=k.useCallback(async()=>{try{if(e){const z=await ve();if(z){const Q=_s(Ae("0x"+e.toLowerCase()),6);await z.cancelGame(Q)}await mi(e)}yi()}catch(z){console.error("Error leaving game:",z)}},[e,ve]),mi=k.useCallback(async z=>{try{await Ht.from("chess_games").delete().eq("game_id",z.toLowerCase()).eq("game_state","waiting")}catch(Q){console.error(`Failed to delete stale game ${z}:`,Q)}},[]),yi=k.useCallback(()=>{n(null),i(null),a(null),l(!1),A(""),R(!1),w(!1),f("Ready to play"),me.current&&(Ht.removeChannel(me.current),me.current=null)},[]),Wt=k.useCallback(z=>!t||!s?!1:z.current_player.toLowerCase()===s,[t,s]),Sr=(z,Q)=>z>=0&&z<8&&Q>=0&&Q<8,ba=(z,Q,he,be,Ee,Ve)=>{const Ye=z==="blue"?-1:1,ot=z==="blue"?6:1;if(!Sr(be,Ee)||z==="blue"&&be>=Q||z==="red"&&be<=Q)return!1;if(he===Ee&&be===Q+Ye)return Ve[be][Ee]===null;if(he===Ee&&Q===ot&&be===Q+2*Ye)return Ve[Q+Ye][he]===null&&Ve[be][Ee]===null;if(Math.abs(he-Ee)===1&&be===Q+Ye){const Et=Ve[be][Ee];return Et!==null&&Gd(Et)!==z}return!1},Sl=(z,Q,he,be,Ee)=>z!==he&&Q!==be?!1:En(z,Q,he,be,Ee),va=(z,Q,he,be)=>{const Ee=Math.abs(z-he),Ve=Math.abs(Q-be);return Ee===2&&Ve===1||Ee===1&&Ve===2},zd=(z,Q,he,be,Ee)=>Math.abs(z-he)!==Math.abs(Q-be)?!1:En(z,Q,he,be,Ee),c1=(z,Q,he,be,Ee)=>Sl(z,Q,he,be,Ee)||zd(z,Q,he,be,Ee),Hd=(z,Q,he,be)=>{const Ee=Math.abs(z-he),Ve=Math.abs(Q-be);return Ee<=1&&Ve<=1},En=(z,Q,he,be,Ee)=>{const Ve=z===he?0:(he-z)/Math.abs(he-z),Ye=Q===be?0:(be-Q)/Math.abs(be-Q);let ot=z+Ve,Et=Q+Ye;for(;ot!==he||Et!==be;){if(Ee[ot][Et]!==null)return!1;ot+=Ve,Et+=Ye}return!0},Il=(z,Q,he,be,Ee,Ve=!0,Ye=Gd(z),ot=I,Et=!1)=>{if(!Sr(be,Ee))return!1;const wi=ot[be][Ee];if(wi&&Gd(wi)===Ye)return!1;const Wd=z.toLowerCase();let Ea=!1;switch(Wd){case"p":Ea=ba(Ye,Q,he,be,Ee,ot);break;case"r":Ea=Sl(Q,he,be,Ee,ot);break;case"n":Ea=va(Q,he,be,Ee);break;case"b":Ea=zd(Q,he,be,Ee,ot);break;case"q":Ea=c1(Q,he,be,Ee,ot);break;case"k":Ea=Hd(Q,he,be,Ee);break}return!!Ea},l1=k.useCallback(z=>{const Q=[],he=I[z.row][z.col];if(!he||Gd(he)!==s)return Q;const be=he.toLowerCase();if(be==="p"){const Ee=s==="blue"?-1:1,Ve=s==="blue"?6:1,Ye=z.row+Ee;if(Ye>=0&&Ye<8&&Il(he,z.row,z.col,Ye,z.col,!0,s,I,!0)&&Q.push({row:Ye,col:z.col}),z.row===Ve){const ot=z.row+2*Ee;ot>=0&&ot<8&&Il(he,z.row,z.col,ot,z.col,!0,s,I,!0)&&Q.push({row:ot,col:z.col})}for(const ot of[-1,1]){const Et=z.col+ot,wi=z.row+Ee;Et>=0&&Et<8&&wi>=0&&wi<8&&Il(he,z.row,z.col,wi,Et,!0,s,I,!0)&&Q.push({row:wi,col:Et})}}else if(be==="n"){const Ee=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[Ve,Ye]of Ee){const ot=z.row+Ve,Et=z.col+Ye;ot>=0&&ot<8&&Et>=0&&Et<8&&Il(he,z.row,z.col,ot,Et,!0,s,I,!0)&&Q.push({row:ot,col:Et})}}else for(let Ee=0;Ee<8;Ee++)for(let Ve=0;Ve<8;Ve++)Il(he,z.row,z.col,Ee,Ve,!0,s,I,!0)&&Q.push({row:Ee,col:Ve});return Q},[I,s]),Ki=k.useCallback(z=>{try{return bI(z)+" tDMT"}catch{return z+" wei"}},[]),Gd=z=>z?z>="a"&&z<="z"?"blue":"red":"blue",zA=(z,Q)=>{const he=I[z][Q],be=(U==null?void 0:U.row)===z&&(U==null?void 0:U.col)===Q,Ee=M.some(Ye=>Ye.row===z&&Ye.col===Q),Ve=ee&&(ee.from.row===z&&ee.from.col===Q||ee.to.row===z&&ee.to.col===Q);return m.jsxs("div",{className:`square ${be?"selected":""} ${Ee?"legal-move":""} ${Ve?"last-move":""}`,onClick:()=>HA(z,Q),children:[he&&m.jsx("div",{className:"piece",style:{backgroundImage:kB[he]?`url(${kB[he]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),Ee&&m.jsx("div",{className:"legal-move-indicator"})]},`${z}-${Q}`)},HA=(z,Q)=>{if(!o||c||j)return;const he=I[z][Q];if(Wt(o)){if(U)U.row===z&&U.col===Q?($(null),q([])):(u1(U.row,U.col,z,Q),$(null),q([]));else if(he&&Gd(he)===s){$({row:z,col:Q});const Ee=l1({row:z,col:Q});q(Ee)}}},u1=async(z,Q,he,be)=>{if(!(!o||!e||j)){if(!Wt(o)){console.log("[DEBUG] Not your turn");return}H(!0);try{const Ee=I.map(Et=>[...Et]),Ve=Ee[z][Q];if(!Ve){console.error("[DEBUG] No piece at selected position");return}Ee[he][be]=Ve,Ee[z][Q]=null,L(Ee),ce({from:{row:z,col:Q},to:{row:he,col:be}});const{error:Ye}=await Ht.from("chess_games").update({board:{positions:Ee,piece_state:{}},current_player:s==="blue"?"red":"blue",last_move:{piece:Ve,from_row:z,from_col:Q,end_row:he,end_col:be},updated_at:new Date().toISOString()}).eq("game_id",e);if(Ye)throw Ye;const ot={...o,board:{positions:Ee,piece_state:{}},current_player:s==="blue"?"red":"blue",last_move:{piece:Ve,from_row:z,from_col:Q,end_row:he,end_col:be},updated_at:new Date().toISOString()};a(ot),f(Wt(ot)?"Your turn":"Opponent's turn"),console.log("[DEBUG] Move completed successfully")}catch(Ee){console.error("Move failed:",Ee),L(I)}finally{H(!1)}}};k.useEffect(()=>{t&&(De(),It())},[t,De,It]),k.useEffect(()=>{var z;(z=o==null?void 0:o.board)!=null&&z.positions&&L(o.board.positions)},[(Fy=o==null?void 0:o.board)==null?void 0:Fy.positions]),k.useEffect(()=>{let z=0;const Q=2,he=()=>{try{console.log("[DEBUG] Setting up lobby subscription");const Ee=Ht.channel("chess_lobby").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>{console.log("[DEBUG] Lobby update received"),It()}).subscribe(Ve=>{console.log(`[DEBUG] Lobby subscription status: ${Ve}`),Ve==="CHANNEL_ERROR"&&z<Q?(z++,console.log(`[DEBUG] Lobby subscription failed, retry ${z}/${Q} in 5 seconds`),setTimeout(()=>{console.log("[DEBUG] Retrying lobby subscription..."),he()},5e3)):Ve==="SUBSCRIBED"?(console.log("[DEBUG] Lobby subscription successful"),z=0):Ve==="TIMED_OUT"?(console.error("[DEBUG] Lobby subscription timed out, retrying..."),setTimeout(()=>{he()},2e3)):Ve==="CHANNEL_ERROR"&&z>=Q&&console.log("[DEBUG] Lobby subscription failed permanently, falling back to polling only")});return()=>{console.log("[DEBUG] Cleaning up lobby subscription"),Ht.removeChannel(Ee)}}catch(Ee){return console.error("[DEBUG] Failed to setup lobby subscription:",Ee),()=>{}}};return he()},[It]),k.useEffect(()=>(Se(),()=>{ae.current&&window.clearInterval(ae.current)}),[Se]),k.useEffect(()=>{let z=null,Q=!0;async function he(){if(!window.ethereum)return;const Ee=await new V_(window.ethereum).getSigner();z=new vf(UI,[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"AddressEmptyCode",type:"error"},{inputs:[{internalType:"address",name:"implementation",type:"address"}],name:"ERC1967InvalidImplementation",type:"error"},{inputs:[],name:"ERC1967NonPayable",type:"error"},{inputs:[],name:"FailedCall",type:"error"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[],name:"UUPSUnauthorizedCallContext",type:"error"},{inputs:[{internalType:"bytes32",name:"slot",type:"bytes32"}],name:"UUPSUnsupportedProxiableUUID",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player1",type:"address"}],name:"GameCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player1",type:"address"},{indexed:!1,internalType:"uint256",name:"wagerAmount",type:"uint256"}],name:"GameCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"winner",type:"address"},{indexed:!1,internalType:"uint256",name:"houseFee",type:"uint256"},{indexed:!1,internalType:"uint256",name:"payoutOrRefund",type:"uint256"}],name:"GameEnded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player2",type:"address"}],name:"GameJoined",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{inputs:[],name:"MAX_WAGER",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"MIN_WAGER",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"UPGRADE_INTERFACE_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"cancelGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"createGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"winner",type:"address"}],name:"endGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"games",outputs:[{internalType:"address",name:"player1",type:"address"},{internalType:"address",name:"player2",type:"address"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"address",name:"winner",type:"address"},{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"uint256",name:"wagerAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"house",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"joinGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"leaderboard",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerToGame",outputs:[{internalType:"bytes6",name:"",type:"bytes6"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"player",type:"address"}],name:"resetPlayerGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newImplementation",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address payable",name:"recipient",type:"address"}],name:"withdrawFunds",outputs:[],stateMutability:"nonpayable",type:"function"}],Ee),z.on("GameCreated",async()=>{Q&&await It()}),z.on("GameJoined",async()=>{Q&&(await It(),await De())}),z.on("GameEnded",async()=>{Q&&(await It(),await De())}),z.on("GameCancelled",async()=>{Q&&(await It(),await De())})}return he(),()=>{Q=!1,z&&(z.removeAllListeners("GameCreated"),z.removeAllListeners("GameJoined"),z.removeAllListeners("GameEnded"),z.removeAllListeners("GameCancelled"))}},[It,De]),k.useEffect(()=>{let z=null;return e&&(console.log("[DEBUG] Setting up polling fallback for game:",e),z=window.setInterval(async()=>{var Q,he,be,Ee,Ve;try{console.log("[DEBUG] Polling fallback: Checking for updates...");const{data:Ye,error:ot}=await Ht.from("chess_games").select("*").eq("game_id",e.toLowerCase()).single();if(!ot&&Ye){console.log("[DEBUG] Polling fallback: Got game data, checking for updates"),console.log("[DEBUG] Current game state updated_at:",o==null?void 0:o.updated_at),console.log("[DEBUG] New game data updated_at:",Ye.updated_at);const Et=!o||new Date(Ye.updated_at).getTime()>new Date(o.updated_at).getTime()||JSON.stringify((Q=Ye.board)==null?void 0:Q.positions)!==JSON.stringify((he=o.board)==null?void 0:he.positions)||Ye.current_player!==o.current_player;console.log("[DEBUG] Should update:",Et),console.log("[DEBUG] Board changed:",o?JSON.stringify((be=Ye.board)==null?void 0:be.positions)!==JSON.stringify((Ee=o.board)==null?void 0:Ee.positions):"N/A"),console.log("[DEBUG] Player changed:",o?Ye.current_player!==o.current_player:"N/A"),Et?(console.log("[DEBUG] Polling fallback: Game update detected"),console.log("[DEBUG] Game data:",Ye),a(Ye),l(Ye.game_state==="waiting"),f(Wt(Ye)?"Your turn":"Opponent's turn"),(Ve=Ye.board)!=null&&Ve.positions&&(console.log("[DEBUG] Polling fallback: Updating board"),L(Ye.board.positions)),Ye.last_move&&(console.log("[DEBUG] Polling fallback: Updating last move"),ce({from:{row:Ye.last_move.from_row,col:Ye.last_move.from_col},to:{row:Ye.last_move.end_row,col:Ye.last_move.end_col}}))):console.log("[DEBUG] Polling fallback: No update needed")}else ot&&console.error("[DEBUG] Polling fallback error:",ot)}catch(Ye){console.error("[DEBUG] Polling fallback error:",Ye)}},2e3)),()=>{z&&(console.log("[DEBUG] Cleaning up polling fallback"),window.clearInterval(z))}},[e]),k.useEffect(()=>()=>{me.current&&Ht.removeChannel(me.current),ae.current&&window.clearInterval(ae.current),oe.current&&window.clearTimeout(oe.current)},[]);const GA=k.useCallback(async()=>{if(!t)return f("Please connect your wallet"),!1;g(!0),f("Cancelling existing game...");try{if(!await Ge())return!1;const z=await ve();if(!z)return f("Failed to connect to contract"),!1;const Q=await z.playerToGame(t);if(Q==="0x000000000000"||Q==="")return f("No existing game found"),!0;if((await z.games(Q)).player2!=="0x0000000000000000000000000000000000000000")return f("Cannot cancel: Game already has an opponent. You must finish the game."),!1;const be=Ae(Q).slice(2).toUpperCase(),Ee=_s(Ae("0x"+be.toLowerCase()),6);return await z.cancelGame(Ee),await mi(be),f("Existing game cancelled successfully"),R(!1),!0}catch(z){return console.error("Failed to cancel existing game:",z),f(`Failed to cancel game: ${z instanceof Error?z.message:"Unknown error"}`),!1}finally{g(!1)}},[t,Ge,ve,mi]);return o&&!c?m.jsxs("div",{className:"game-mode-panel",children:[m.jsx("h3",{className:"game-mode-title",children:"Multiplayer Game"}),m.jsxs("div",{className:"game-info",children:[m.jsxs("div",{className:"game-info-bar",children:[m.jsxs("span",{className:o.current_player==="blue"?"current-blue":"current-red",children:["Current: ",o.current_player==="blue"?"Blue":"Red"]}),m.jsx("span",{className:"wager-label",children:"Wager:"})," ",m.jsx("span",{children:Ki(o.bet_amount)}),m.jsx("span",{className:"mode-play",children:"Mode: PvP"}),m.jsxs("span",{children:["Game ID: ",e]})]}),m.jsxs("div",{style:{fontSize:"10px",color:"#666",padding:"5px",background:"#f0f0f0",borderTop:"1px solid #ccc",fontFamily:"monospace"},children:[m.jsxs("div",{children:["Status: ",h]}),m.jsxs("div",{children:["Player: ",s," | Turn: ",Wt(o)?"Yes":"No"]}),m.jsxs("div",{children:["Last Update: ",o.updated_at?new Date(o.updated_at).toLocaleTimeString():"N/A"]}),m.jsxs("div",{children:["Subscription: ",me.current?"Active":"Inactive"]}),m.jsx("div",{children:"Polling: Active (2s interval)"}),m.jsxs("div",{children:["Mode: ",me.current?"Real-time + Polling":"Polling Only"]}),m.jsx("button",{onClick:r,style:{fontSize:"10px",padding:"2px 5px",marginTop:"5px"},children:"Test Connection"}),m.jsx("button",{onClick:async()=>{var z;if(console.log("[DEBUG] Manual refresh triggered"),e){const{data:Q,error:he}=await Ht.from("chess_games").select("*").eq("game_id",e.toLowerCase()).single();!he&&Q&&(console.log("[DEBUG] Manual refresh: Game data updated"),a(Q),l(Q.game_state==="waiting"),f(Wt(Q)?"Your turn":"Opponent's turn"),(z=Q.board)!=null&&z.positions&&L(Q.board.positions))}},style:{fontSize:"10px",padding:"2px 5px",marginTop:"5px"},children:"Manual Refresh"})]})]}),m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsx("div",{className:"chessboard",children:Array.from({length:8},(z,Q)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(he,be)=>zA(Q,be))},Q))})}),m.jsxs("div",{className:"game-controls",children:[m.jsx("button",{onClick:fs,children:"Leave Game"}),m.jsx("button",{onClick:vn,disabled:K,children:K?"Syncing...":"Force Sync"}),m.jsx("button",{onClick:async()=>{var z;if(console.log("[DEBUG] Manual refresh triggered"),e){const{data:Q,error:he}=await Ht.from("chess_games").select("*").eq("game_id",e.toLowerCase()).single();!he&&Q&&(console.log("[DEBUG] Manual refresh: Game data updated"),a(Q),l(Q.game_state==="waiting"),f(Wt(Q)?"Your turn":"Opponent's turn"),(z=Q.board)!=null&&z.positions&&L(Q.board.positions))}},style:{fontSize:"12px",padding:"5px 10px"},children:"Manual Refresh"})]})]})]}):c?m.jsxs("div",{className:"game-mode-panel",children:[m.jsx("h3",{className:"game-mode-title",children:"Waiting for Opponent"}),m.jsx("div",{className:"game-info",children:m.jsxs("div",{className:"game-info-bar",children:[m.jsx("span",{className:"wager-label",children:"Wager:"})," ",m.jsx("span",{children:Ki((o==null?void 0:o.bet_amount)||"0")}),m.jsxs("span",{children:["Status: ",h]})]})}),m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsx("div",{className:"chessboard",children:m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"#666",fontSize:"16px",textAlign:"center",padding:"20px"},children:[m.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",marginBottom:"20px"},children:["Game Code: ",N]}),m.jsx("div",{style:{marginBottom:"20px"},children:"Share this code with your opponent"}),m.jsx("div",{style:{fontSize:"14px"},children:"Waiting for opponent to join..."})]})})}),m.jsxs("div",{className:"game-controls",children:[m.jsx("button",{onClick:fs,children:"Cancel Game"}),m.jsx("button",{onClick:vn,disabled:K,children:K?"Syncing...":"Force Sync"}),m.jsx("button",{onClick:async()=>{var z;if(console.log("[DEBUG] Manual refresh triggered"),e){const{data:Q,error:he}=await Ht.from("chess_games").select("*").eq("game_id",e.toLowerCase()).single();!he&&Q&&(console.log("[DEBUG] Manual refresh: Game data updated"),a(Q),l(Q.game_state==="waiting"),f(Wt(Q)?"Your turn":"Opponent's turn"),(z=Q.board)!=null&&z.positions&&L(Q.board.positions))}},style:{fontSize:"12px",padding:"5px 10px"},children:"Manual Refresh"})]})]})]}):m.jsxs("div",{className:"game-mode-panel",children:[m.jsx("h3",{className:"game-mode-title",children:"🏁 Multiplayer Chess"}),m.jsx("div",{className:"game-info",children:m.jsx("div",{className:"game-info-bar",children:m.jsx("span",{children:h})})}),y?m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsx("div",{className:"chessboard",children:m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",padding:"20px"},children:[m.jsx("h4",{style:{margin:"0 0 20px 0",fontSize:"18px",textAlign:"center"},children:"Create New Game"}),m.jsxs("div",{style:{width:"100%",maxWidth:"300px"},children:[m.jsxs("div",{style:{marginBottom:"15px"},children:[m.jsx("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px"},children:"Wager Amount (tDMT):"}),m.jsx("input",{type:"number",min:"0.1",max:"1000",step:"0.1",value:v,onChange:z=>b(z.target.value),placeholder:"0.1",style:{width:"100%",padding:"8px",border:"1px solid rgba(0,0,0,0.2)",borderRadius:"4px",fontSize:"14px"}})]}),m.jsxs("div",{style:{marginBottom:"15px"},children:[m.jsx("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px"},children:"Game Title (optional):"}),m.jsx("input",{type:"text",value:_,onChange:z=>x(z.target.value),placeholder:"Enter game title...",maxLength:50,style:{width:"100%",padding:"8px",border:"1px solid rgba(0,0,0,0.2)",borderRadius:"4px",fontSize:"14px"}})]}),m.jsx("div",{style:{marginBottom:"20px"},children:m.jsxs("label",{style:{fontSize:"14px"},children:[m.jsx("input",{type:"checkbox",checked:C,onChange:z=>S(z.target.checked),style:{marginRight:"8px"}}),"Public Game"]})})]})]})})}),m.jsxs("div",{className:"game-controls",children:[m.jsx("button",{onClick:Gt,disabled:p||!t,className:"mode-btn",children:p?"Creating...":"Create Game"}),m.jsx("button",{onClick:()=>w(!1),disabled:p,className:"mode-btn",children:"Cancel"}),m.jsx("button",{onClick:async()=>{var z;if(console.log("[DEBUG] Manual refresh triggered"),e){const{data:Q,error:he}=await Ht.from("chess_games").select("*").eq("game_id",e.toLowerCase()).single();!he&&Q&&(console.log("[DEBUG] Manual refresh: Game data updated"),a(Q),l(Q.game_state==="waiting"),f(Wt(Q)?"Your turn":"Opponent's turn"),(z=Q.board)!=null&&z.positions&&L(Q.board.positions))}},style:{fontSize:"12px",padding:"5px 10px"},children:"Manual Refresh"})]})]}):m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsx("div",{className:"chessboard",children:m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",padding:"20px"},children:[m.jsxs("h4",{style:{margin:"0 0 20px 0",fontSize:"18px",textAlign:"center"},children:["Open Games (",u.length,")"]}),u.length===0?m.jsx("p",{style:{textAlign:"center",fontSize:"14px",color:"#666"},children:"No open games available"}):m.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",width:"100%",maxWidth:"400px"},children:u.map(z=>m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",background:"rgba(0,0,0,0.05)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"4px",marginBottom:"8px"},children:[m.jsxs("div",{children:[m.jsxs("div",{style:{fontWeight:"bold",fontSize:"14px"},children:["#",z.game_id]}),m.jsx("div",{style:{fontSize:"12px"},children:Ki(z.bet_amount)}),z.game_title&&m.jsx("div",{style:{fontSize:"11px",fontStyle:"italic"},children:z.game_title})]}),m.jsx("button",{onClick:()=>Dt(z.game_id),disabled:p||!t,className:"mode-btn",style:{fontSize:"12px",padding:"6px 12px"},children:p?"Joining...":"Join"})]},z.game_id))})]})})}),m.jsxs("div",{className:"game-controls",children:[m.jsx("button",{onClick:()=>w(!0),disabled:p||!t,className:"mode-btn",children:"Create New Game"}),m.jsx("button",{onClick:vn,disabled:K,children:K?"Syncing...":"Force Sync"}),m.jsx("button",{onClick:async()=>{var z;if(console.log("[DEBUG] Manual refresh triggered"),e){const{data:Q,error:he}=await Ht.from("chess_games").select("*").eq("game_id",e.toLowerCase()).single();!he&&Q&&(console.log("[DEBUG] Manual refresh: Game data updated"),a(Q),l(Q.game_state==="waiting"),f(Wt(Q)?"Your turn":"Opponent's turn"),(z=Q.board)!=null&&z.positions&&L(Q.board.positions))}},style:{fontSize:"12px",padding:"5px 10px"},children:"Manual Refresh"})]})]}),!t&&m.jsx("div",{style:{textAlign:"center",padding:"20px",background:"rgba(255,255,0,0.1)",border:"1px solid rgba(255,255,0,0.3)",borderRadius:"4px",marginTop:"20px",fontSize:"14px"},children:"Please connect your wallet to play multiplayer chess"}),t&&m.jsxs("div",{style:{textAlign:"center",padding:"20px",background:"rgba(255,255,0,0.1)",border:"1px solid rgba(255,255,0,0.3)",borderRadius:"4px",marginTop:"20px",fontSize:"14px"},children:[m.jsxs("div",{style:{marginBottom:"10px"},children:[m.jsx("strong",{children:"Network Status:"}),m.jsxs("span",{style:{marginLeft:"10px",color:se==="correct"?"green":se==="wrong"?"red":"orange",fontWeight:"bold"},children:[se==="checking"&&"Checking...",se==="correct"&&"✓ Sanko Testnet",se==="wrong"&&"✗ Wrong Network",se==="error"&&"✗ Network Error"]})]}),m.jsx("div",{style:{marginBottom:"10px",fontSize:"12px"},children:"• Make sure you're on Sanko Testnet (Chain ID: 1992)"}),m.jsx("div",{style:{marginBottom:"10px",fontSize:"12px"},children:`• If you get "Game already started" error, it means you're in an active game`}),m.jsx("div",{style:{marginBottom:"10px",fontSize:"12px"},children:"• You can only cancel games that are waiting for an opponent"}),m.jsx("button",{onClick:GA,disabled:p,style:{padding:"8px 16px",backgroundColor:"#ff4444",color:"white",border:"none",borderRadius:"4px",cursor:p?"not-allowed":"pointer",fontSize:"12px"},children:p?"Cancelling...":"Cancel Existing Game"})]})]})},f8e={AI:"ai"},OE={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},RB=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],p8e=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],g8e=()=>{const[t,e]=k.useState(!1),n=k.useRef(null),r=k.useRef(!1);k.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=document.createElement("script");a.src="/stockfish.js",a.onload=()=>{if(console.log("[DEBUG] LawbBot script loaded, initializing..."),typeof window<"u"&&typeof window.Stockfish=="function"){const c=window.Stockfish;c?c().then(l=>{console.log("[DEBUG] LawbBot initialized successfully"),l instanceof Worker?(n.current=l,e(!0),r.current=!1,l.postMessage("setoption name Threads value 4"),l.postMessage("setoption name Hash value 128"),l.postMessage("setoption name MultiPV value 1")):(console.error("[DEBUG] LawbBot: Stockfish is not a Worker instance"),e(!1),r.current=!1)}).catch(l=>{console.error("[DEBUG] LawbBot initialization failed:",l),e(!1),r.current=!1}):(console.error("[DEBUG] LawbBot: Stockfish is not defined as a function"),e(!1),r.current=!1)}else console.error("[DEBUG] LawbBot not found in window object"),e(!1),r.current=!1},a.onerror=c=>{console.error("[DEBUG] Failed to load LawbBot script:",c),e(!1),r.current=!1},document.head.appendChild(a)}catch(a){console.error("[DEBUG] Failed to create LawbBot script:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=k.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var p;const f=h.data;typeof f=="string"&&f.startsWith("bestmove ")&&(l=f.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(p=n.current)==null||p.removeEventListener("message",d),c(l)))};try{n.current.addEventListener("message",d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeEventListener("message",d)}catch(g){console.warn("[DEBUG] Error removing message listener:",g)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=k.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},m8e=()=>{const[t,e]=k.useState(null),[n,r]=k.useState(!1),s=k.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=k.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},y8e=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r}=Uv(),[s,i]=k.useState(f8e.AI),[o,a]=k.useState(()=>JSON.parse(JSON.stringify(RB))),[c,l]=k.useState("blue"),[u,d]=k.useState(null),[h,f]=k.useState("active"),[p,g]=k.useState("hard"),[y,w]=k.useState("Connect wallet to play"),[v,b]=k.useState([]),[_,x]=k.useState([]),[C,S]=k.useState([]),[N,A]=k.useState(null),[P,R]=k.useState(!1),[j,H]=k.useState(!1),[K,T]=k.useState(null),[I,L]=k.useState(null),[U]=k.useState(""),[$]=k.useState(.1),[M,q]=k.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),ee=k.useRef(null),ce=k.useRef(!1),se=k.useRef(o),le=k.useRef(null),me=k.useRef(null),Z=k.useRef(!1),re=k.useRef(!1),[ae,oe]=k.useState(!1),[we,Ge]=k.useState(!1),[ve,Se]=k.useState(!1),[De,tt]=k.useState(()=>typeof window<"u"&&window.localStorage?window.localStorage.getItem("lawb_chess_dark_mode")==="true":!1),Gt=()=>{tt(F=>(typeof window<"u"&&window.localStorage&&window.localStorage.setItem("lawb_chess_dark_mode",String(!F)),!F))},{stockfishReady:It}=g8e(),{getOpeningData:Tt}=m8e(),[Dt,vn]=k.useState("loading"),[fs,mi]=k.useState(!1),[yi,Wt]=k.useState([]),[Sr,ba]=k.useState(!1),[Sl,va]=k.useState("/images/chessboard1.png"),zd=()=>{const F=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],V=Math.floor(Math.random()*F.length),Y=F[V];return console.log("[DEBUG] Random chessboard selected:",Y,"(index:",V,")"),Y};k.useEffect(()=>{if(It)vn("ready");else{const F=window.setTimeout(()=>{It||(vn("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(F)}},[It]),k.useEffect(()=>{se.current=o},[o]),k.useEffect(()=>{r?w("Select game mode"):(w("Connect wallet to play"),R(!1))},[r]),k.useEffect(()=>(!ee.current&&typeof Worker<"u"&&(ee.current=new Worker("/aiWorker.js"),ee.current.onmessage=F=>{console.log("[DEBUG] AI worker response received:",F.data);const{move:V,nodes:Y}=F.data;V&&ce.current&&h==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",V),console.log("[DEBUG] AI searched",Y,"nodes"),ce.current=!1,me.current&&(window.clearTimeout(me.current),me.current=null),le.current&&le.current(V.from,V.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},ee.current.onerror=F=>{console.error("[DEBUG] AI worker error:",F),w("AI worker error - using fallback mode"),ce.current=!1}),()=>{ee.current&&(ee.current.terminate(),ee.current=null),me.current&&(window.clearTimeout(me.current),me.current=null)}),[]),k.useEffect(()=>{c1()},[]);const c1=async()=>{try{const F=new Promise((te,X)=>window.setTimeout(()=>X(new Error("Database timeout")),1e4)),V=Ht.from("leaderboard").select("*").order("points",{ascending:!1}),Y=await Promise.race([V,F]);if(Y.error)throw Y.error;Y.data&&x(Y.data),console.log("Leaderboard data loaded:",Y.data)}catch(F){w("Failed to load leaderboard"),console.error("Leaderboard error:",F)}},Hd=async F=>{if(console.log("[DEBUG] updateScore called with:",F),!r){console.log("[DEBUG] No wallet address, returning");return}try{const V=r.toLowerCase(),{data:Y}=await Ht.from("leaderboard").select("*").eq("username",V).maybeSingle();console.log("[DEBUG] Existing record:",Y);const te=Y!=null&&Y.wins?Number(Y.wins):0,X=Y!=null&&Y.losses?Number(Y.losses):0,Ne=Y!=null&&Y.draws?Number(Y.draws):0,ke=Y!=null&&Y.total_games?Number(Y.total_games):0,qe=Y!=null&&Y.points?Number(Y.points):0;console.log("[DEBUG] Score calculation:",{currentWins:te,currentLosses:X,currentDraws:Ne,currentTotalGames:ke,currentPoints:qe,gameResult:F});const Nt=te+(F==="win"?1:0),qt=X+(F==="loss"?1:0),Yn=Ne+(F==="draw"?1:0),Zt=ke+1;let Hy=0;if(F==="win")switch(p){case"easy":Hy=10;break;default:Hy=1}else F==="draw"&&(Hy=1);const KA=qe+Hy;if(console.log("[DEBUG] New values:",{newWins:Nt,newLosses:qt,newDraws:Yn,newTotalGames:Zt,newPoints:KA,pointsToAdd:Hy}),Y){const{error:Gy}=await Ht.from("leaderboard").update({wins:Nt,losses:qt,draws:Yn,total_games:Zt,points:KA,updated_at:new Date().toISOString()}).eq("username",V);if(Gy){console.error("[DEBUG] Error updating leaderboard:",Gy);return}}else{const{error:Gy}=await Ht.from("leaderboard").insert({username:V,chain_type:"ethereum",wins:Nt,losses:qt,draws:Yn,total_games:Zt,points:KA,updated_at:new Date().toISOString()});if(Gy){console.error("[DEBUG] Error inserting leaderboard record:",Gy);return}}console.log("[DEBUG] Leaderboard updated successfully"),await c1()}catch(V){console.error("[DEBUG] Error in updateScore:",V)}},En=F=>F&&F===F.toUpperCase()?"red":"blue",Il=(F,V)=>F>=0&&F<8&&V>=0&&V<8,l1=(F,V)=>`${String.fromCharCode(97+V)}${8-F}`,Ki=(F,V)=>{const Y=V==="blue"?"k":"K";let te=null;for(let ke=0;ke<8;ke++){for(let qe=0;qe<8;qe++)if(F[ke][qe]===Y){te={row:ke,col:qe};break}if(te)break}if(!te)return console.log(`King not found for ${V}`),!1;const X=V==="blue"?"red":"blue",Ne=Gd(te.row,te.col,X,F);return console.log(`${V} king at ${te.row},${te.col} under attack: ${Ne}`),Ne},Gd=(F,V,Y,te)=>{for(let X=0;X<8;X++)for(let Ne=0;Ne<8;Ne++){const ke=te[X][Ne];if(ke&&En(ke)===Y&&be(ke,X,Ne,F,V,!1,Y,te,!0))return!0}return!1},zA=(F,V,Y,te,X,Ne=o)=>{const ke=Ne.map(Nt=>[...Nt]),qe=ke[F][V];return ke[Y][te]=qe,ke[F][V]=null,Ki(ke,X)},HA=(F,V,Y,te,X,Ne)=>{const ke=F==="blue"?-1:1,qe=F==="blue"?6:1;if(!Il(te,X)||F==="blue"&&te>=V||F==="red"&&te<=V)return!1;const Nt=Math.abs(te-V),qt=Math.abs(X-Y);if((Nt===1&&qt===0||Nt===2&&qt===0&&V===qe||Nt===1&&qt===1)&&Nt<=2&&qt<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:F,from:`${V},${Y}`,to:`${te},${X}`}),Y===X&&te===V+ke)return Ne[te][X]===null;if(Y===X&&V===qe&&te===V+2*ke)return Ne[V+ke][Y]===null&&Ne[te][X]===null;if(Math.abs(Y-X)===1&&te===V+ke){const Zt=Ne[te][X];return Zt!==null&&En(Zt)!==F}if(Math.abs(Y-X)===1&&te===V+ke){const Zt=Ne[V][X];if(Zt&&En(Zt)!==F&&Zt.toLowerCase()==="p"&&M.lastPawnDoubleMove&&M.lastPawnDoubleMove.row===V&&M.lastPawnDoubleMove.col===X)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},u1=(F,V,Y,te,X)=>F!==Y&&V!==te?!1:he(F,V,Y,te,X),GA=(F,V,Y,te)=>{const X=Math.abs(F-Y),Ne=Math.abs(V-te);return X===2&&Ne===1||X===1&&Ne===2},Fy=(F,V,Y,te,X)=>Math.abs(F-Y)!==Math.abs(V-te)?!1:he(F,V,Y,te,X),z=(F,V,Y,te,X)=>u1(F,V,Y,te,X)||Fy(F,V,Y,te,X),Q=(F,V,Y,te,X)=>{const Ne=Math.abs(V-te),ke=Math.abs(Y-X);if(Ne<=1&&ke<=1)return!0;if(Ne===0&&ke===2){if(F==="blue"&&!M.blueKingMoved){if(X===6&&!M.blueRooksMove.right||X===2&&!M.blueRooksMove.left)return!0}else if(F==="red"&&!M.redKingMoved&&(X===6&&!M.redRooksMove.right||X===2&&!M.redRooksMove.left))return!0}return!1},he=(F,V,Y,te,X)=>{const Ne=F===Y?0:(Y-F)/Math.abs(Y-F),ke=V===te?0:(te-V)/Math.abs(te-V);let qe=F+Ne,Nt=V+ke;for(;qe!==Y||Nt!==te;){if(X[qe][Nt]!==null)return!1;qe+=Ne,Nt+=ke}return!0},be=(F,V,Y,te,X,Ne=!0,ke=En(F),qe=o,Nt=!1)=>{if(!Il(te,X))return Nt||console.log("[ILLEGAL MOVE] Out of board:",{piece:F,startRow:V,startCol:Y,endRow:te,endCol:X}),!1;const qt=qe[te][X];if(qt&&En(qt)===ke)return Nt||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:F,startRow:V,startCol:Y,endRow:te,endCol:X}),!1;const Yn=F.toLowerCase();let Zt=!1;switch(Yn){case"p":Zt=HA(ke,V,Y,te,X,qe);break;case"r":Zt=u1(V,Y,te,X,qe);break;case"n":Zt=GA(V,Y,te,X);break;case"b":Zt=Fy(V,Y,te,X,qe);break;case"q":Zt=z(V,Y,te,X,qe);break;case"k":Zt=Q(ke,V,Y,te,X);break}return Zt?Zt&&Ne&&zA(V,Y,te,X,ke,qe)?(Nt||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:F,startRow:V,startCol:Y,endRow:te,endCol:X}),!1):Zt:(Nt||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:F,startRow:V,startCol:Y,endRow:te,endCol:X,playerColor:ke,pieceType:Yn,targetPiece:qe[te][X],targetPieceColor:qe[te][X]?En(qe[te][X]):null}),!1)},Ee=(F,V=o,Y=c)=>{const te=[],X=V[F.row][F.col];if(!X||En(X)!==Y)return te;const Ne=X.toLowerCase();if(Ne==="p"){const ke=Y==="blue"?-1:1,qe=Y==="blue"?6:1,Nt=F.row+ke;if(Nt>=0&&Nt<8&&be(X,F.row,F.col,Nt,F.col,!0,Y,V,!0)&&te.push({row:Nt,col:F.col}),F.row===qe){const qt=F.row+2*ke;qt>=0&&qt<8&&be(X,F.row,F.col,qt,F.col,!0,Y,V,!0)&&te.push({row:qt,col:F.col})}for(const qt of[-1,1]){const Yn=F.col+qt,Zt=F.row+ke;Yn>=0&&Yn<8&&Zt>=0&&Zt<8&&be(X,F.row,F.col,Zt,Yn,!0,Y,V,!0)&&te.push({row:Zt,col:Yn})}}else if(Ne==="n"){const ke=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[qe,Nt]of ke){const qt=F.row+qe,Yn=F.col+Nt;qt>=0&&qt<8&&Yn>=0&&Yn<8&&be(X,F.row,F.col,qt,Yn,!0,Y,V,!0)&&te.push({row:qt,col:Yn})}}else for(let ke=0;ke<8;ke++)for(let qe=0;qe<8;qe++)be(X,F.row,F.col,ke,qe,!0,Y,V,!0)&&te.push({row:ke,col:qe});return te},Ve=(F,V=o)=>{if(!Ki(V,F))return!1;for(let Y=0;Y<8;Y++)for(let te=0;te<8;te++){const X=V[Y][te];if(X&&En(X)===F&&Ee({row:Y,col:te},V,F).length>0)return!1}return!0},Ye=(F,V=o)=>{if(Ki(V,F))return!1;for(let Y=0;Y<8;Y++)for(let te=0;te<8;te++){const X=V[Y][te];if(X&&En(X)===F&&Ee({row:Y,col:te},V,F).length>0)return!1}return!0},ot=(F,V)=>{if(h!=="active"||ce.current)return;const Y=o[F][V],te=Y?En(Y):null;if(u&&C.some(X=>X.row===F&&X.col===V)){Et(u,{row:F,col:V});return}if(Y&&te===c){const X=Ee({row:F,col:V});d({row:F,col:V}),S(X);return}d(null),S([])},Et=(F,V,Y=!1)=>{const te=o[F.row][F.col];if(console.log("[MOVE ATTEMPT]",{from:F,to:V,piece:te,isAIMove:Y,board:JSON.parse(JSON.stringify(o)),moveHistory:v}),!!te){if(te.toLowerCase()==="p"&&(En(te)==="blue"&&V.row===0||En(te)==="red"&&V.row===7)){T({from:F,to:V}),H(!0);return}M3(F,V,"q",Y)}};le.current=Et;const wi=k.useCallback((F,V,Y=!1)=>{ba(!0);const te=o.map(ke=>[...ke]),X=te[F.row][F.col];if(!X)return;te[V.row][V.col]=X,te[F.row][F.col]=null,MV(te,F,V,X);const Ne=jV(F,V);if(b(ke=>{const qe=[...ke,Ne];return console.log("[MOVE HISTORY UPDATED]",qe),qe}),A({from:F,to:V}),d(null),S([]),v.length<10&&!Y){const ke=DB(te,c==="blue"?"red":"blue");Tt(ke).then(qe=>{qe&&qe.moves&&qe.moves.length>0&&(Wt(qe.moves.slice(0,3)),mi(!0),setTimeout(()=>mi(!1),5e3))})}FV(F,V,X),l(ke=>{const qe=ke==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",qe),Wd(te,qe),qe}),Wd(te,c==="blue"?"red":"blue"),a(te),ce.current=!1,Z.current=!1,re.current=!1,ba(!1)},[o,c,v,Tt]);k.useEffect(()=>{if(!ce.current&&s==="ai"&&c==="red"&&!Z.current&&!Sr)if(ce.current=!0,p==="easy")setTimeout(()=>{const F=Ea(o);F?Et(F.from,F.to,!0):ce.current=!1},600);else{w("AI is calculating...");const F=DB(o,c);if(re.current)return;re.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:F,difficulty:p,movetime:3e3})}).then(Y=>{if(Y.ok)return Y.json();throw new Error("API call failed")}).then(Y=>{const te=Y.bestmove||Y.move;if(te&&te!=="(none)"&&te.length===4){const X=te.charCodeAt(0)-97,Ne=parseInt(te[1]),ke=te.charCodeAt(2)-97,qe=parseInt(te[3]),Nt=8-Ne,qt=8-qe;if(X>=0&&X<8&&Nt>=0&&Nt<8&&ke>=0&&ke<8&&qt>=0&&qt<8){const Yn={from:{row:Nt,col:X},to:{row:qt,col:ke}},Zt=o[Nt][X];Zt&&En(Zt)==="red"&&be(Zt,Nt,X,qt,ke,!0,"red",o)?Et(Yn.from,Yn.to,!0):(ce.current=!1,re.current=!1)}else ce.current=!1,re.current=!1}else ce.current=!1,re.current=!1}).catch(()=>{w("AI error. Please try again."),ce.current=!1,re.current=!1})}},[c,s,p,o,M,It]);const Wd=(F,V)=>{console.log("Checking game end for player:",V);const Y=F.some(X=>X.some(Ne=>Ne==="k")),te=F.some(X=>X.some(Ne=>Ne==="K"));if(!Y)return console.log("[GAME END] KING CAPTURED - Red wins!"),f("checkmate"),w("King captured! Red wins!"),Hd("loss"),Se(!0),setTimeout(()=>Se(!1),3e3),"checkmate";if(!te)return console.log("[GAME END] KING CAPTURED - Blue wins!"),f("checkmate"),w("King captured! You win!"),Hd("win"),Se(!0),setTimeout(()=>Se(!1),3e3),"checkmate";if(console.log("Is king in check:",Ki(F,V)),Ve(V,F)){console.log("[GAME END] CHECKMATE",{winner:V==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(F)),moveHistory:v}),f("checkmate");const X=V==="blue"?"red":"blue";return X==="blue"?(w("Checkmate! You win!"),hp("checkmate"),z3(!0),HV(),Hd("win"),Se(!0),setTimeout(()=>Se(!1),3e3)):(w(`Checkmate! ${X==="red"?"AI":"Opponent"} wins!`),hp("checkmate"),H3(!0),Hd("loss"),Se(!0),setTimeout(()=>Se(!1),3e3)),"checkmate"}return Ye(V,F)?(console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(F)),moveHistory:v}),f("stalemate"),w("Stalemate! Game is a draw."),Hd("draw"),Se(!0),setTimeout(()=>Se(!1),3e3),"stalemate"):(Ki(F,V)?(console.log("CHECK detected!"),hp("check"),w(`${V==="blue"?"Blue":"Red"} is in check!`)):w("Your turn"),null)},Ea=F=>{const V=[];for(let X=0;X<8;X++)for(let Ne=0;Ne<8;Ne++){const ke=F[X][Ne];ke&&En(ke)==="red"&&V.push({row:X,col:Ne})}for(let X=V.length-1;X>0;X--){const Ne=Math.floor(Math.random()*(X+1));[V[X],V[Ne]]=[V[Ne],V[X]]}const Y=[],te=[];for(const X of V){const Ne=Ee(X,F,"red");for(const ke of Ne){const qe=F[ke.row][ke.col];if(qe&&En(qe)==="blue"){const qt={p:100,n:320,b:330,r:500,q:900,k:2e4}[qe.toLowerCase()]||0;Y.push({from:X,to:ke,value:qt})}else te.push({from:X,to:ke})}}if(Y.length>0&&Math.random()<.3){Y.sort((X,Ne)=>X.value-Ne.value);for(const X of Y){const Ne=F.map(qe=>[...qe]),ke=Ne[X.from.row][X.from.col];if(Ne[X.to.row][X.to.col]=ke,Ne[X.from.row][X.from.col]=null,!Ki(Ne,"red"))return{from:X.from,to:X.to}}}for(const X of te){const Ne=F.map(qe=>[...qe]),ke=Ne[X.from.row][X.from.col];if(Ne[X.to.row][X.to.col]=ke,Ne[X.from.row][X.from.col]=null,!Ki(Ne,"red"))return X}Y.sort((X,Ne)=>X.value-Ne.value);for(const X of Y){const Ne=F.map(qe=>[...qe]),ke=Ne[X.from.row][X.from.col];if(Ne[X.to.row][X.to.col]=ke,Ne[X.from.row][X.from.col]=null,!Ki(Ne,"red"))return{from:X.from,to:X.to}}return null},zy=()=>{a(JSON.parse(JSON.stringify(RB))),l("blue"),d(null),f("active"),b([]),S([]),A(null),R(!1),w("Select game mode"),q({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),va(zd()),ce.current&&(ce.current=!1)},d1=()=>{if(qV(),console.log("[DEBUG] startGame called, difficulty:",p,"gameMode:",s),s==="online"){R(!1),oe(!1);return}R(!0),oe(!1),w("Game started! Your turn");const F=zd();va(F),console.log("[DEBUG] Game started with chessboard:",F)},h1=F=>`${F.slice(0,6)}...${F.slice(-4)}`,DV=(F,V)=>{const Y=o[F][V],te=(u==null?void 0:u.row)===F&&(u==null?void 0:u.col)===V,X=C.some(ke=>ke.row===F&&ke.col===V),Ne=N&&(N.from.row===F&&N.from.col===V||N.to.row===F&&N.to.col===V);return m.jsxs("div",{className:`square ${te?"selected":""} ${X?"legal-move":""} ${Ne?"last-move":""}`,onClick:()=>ot(F,V),children:[Y&&m.jsx("div",{className:"piece",style:{backgroundImage:OE[Y]?`url(${OE[Y]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),X&&m.jsx("div",{className:"legal-move-indicator"})]},`${F}-${V}`)},$V=()=>{if(!j||!K)return null;const F=c==="blue"?["q","r","b","n"]:["Q","R","B","N"];return m.jsx("div",{className:"promotion-dialog",children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",children:F.map(V=>m.jsx("div",{className:"promotion-piece",onClick:()=>{M3(K.from,K.to,V),H(!1),T(null)},style:{backgroundImage:OE[V]?`url(${OE[V]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},V))})]})})},[UV,BV]=k.useState(null),L3=(F=!1,V="Click a piece to learn more about it.")=>m.jsxs("div",{className:`piece-gallery${F?" piece-gallery-sm":""}`,children:[m.jsx("h3",{children:"Lawbstation Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:p8e.map(Y=>m.jsxs("div",{className:"piece-gallery-item",onClick:()=>BV(Y.key),children:[m.jsx("img",{src:Y.img,alt:Y.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:Y.name}),UV===Y.key&&m.jsx("div",{className:"piece-gallery-desc",children:Y.desc})]},Y.key))}),m.jsx("div",{className:"piece-gallery-tip",children:V})]}),LV=()=>m.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:m.jsx("div",{className:"difficulty-controls-col",children:m.jsxs("div",{className:"difficulty-selection-panel",style:{background:"#fff",borderRadius:12,padding:"32px 24px",boxShadow:"0 4px 32px rgba(0,0,0,0.12)",textAlign:"center"},children:[m.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#0a2a7a",marginBottom:16},children:"Start a New Game"}),m.jsxs("p",{style:{fontSize:"1.1rem",color:"#333",marginBottom:24},children:["Challenge the LawbBot AI to a chess match.",m.jsx("br",{}),"Good luck, have fun!"]}),m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[m.jsx("button",{className:`difficulty-btn${p==="easy"?" selected":""}`,style:{background:p==="easy"?"#44c0ff":"#eee",color:p==="easy"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="easy"?"0 2px 8px #44c0ff44":"none"},onClick:()=>g("easy"),children:"Easy"}),m.jsx("button",{className:`difficulty-btn${p==="hard"?" selected":""}`,style:{background:p==="hard"?"#0a2a7a":"#eee",color:p==="hard"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="hard"?"0 2px 8px #0a2a7a44":"none"},onClick:()=>g("hard"),children:"Hard"})]}),m.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{d1()},style:{background:"linear-gradient(90deg, #0a2a7a 0%, #44c0ff 100%)",color:"white",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:8,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",border:"none",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[m.jsx("span",{role:"img","aria-label":"chess",children:"♟️"})," Start Game"]})]})})}),MV=(F,V,Y,te)=>{if(te.toLowerCase()==="p"&&(En(te)==="blue"&&Y.row===0||En(te)==="red"&&Y.row===7)){const X=En(te)==="blue"?"q":"Q";F[Y.row][Y.col]=X}te.toLowerCase()==="k"&&Math.abs(V.col-Y.col)===2&&(Y.col===6?(F[V.row][7]=null,F[V.row][5]=En(te)==="blue"?"r":"R"):Y.col===2&&(F[V.row][0]=null,F[V.row][3]=En(te)==="blue"?"r":"R"))},jV=(F,V,Y,te)=>{const X=l1(F.row,F.col),Ne=l1(V.row,V.col);return`${X}-${Ne}`},FV=(F,V,Y)=>{const te={...M};Y.toLowerCase()==="k"?En(Y)==="blue"?te.blueKingMoved=!0:te.redKingMoved=!0:Y.toLowerCase()==="r"&&(En(Y)==="blue"?(F.col===0&&(te.blueRooksMove.left=!0),F.col===7&&(te.blueRooksMove.right=!0)):(F.col===0&&(te.redRooksMove.left=!0),F.col===7&&(te.redRooksMove.right=!0))),Y.toLowerCase()==="p"&&Math.abs(F.row-V.row)===2?te.lastPawnDoubleMove={row:V.row,col:V.col}:te.lastPawnDoubleMove=null,q(te)},M3=(F,V,Y="q",te=!1)=>{o[F.row][F.col];const Ne=o[V.row][V.col]!==null;if(hp(Ne?"capture":"move"),Ne){L({row:V.row,col:V.col,show:!0}),setTimeout(()=>{wi(F,V,te),L(null)},500);return}wi(F,V,te)},[j3,zV]=k.useState(!0),[WA,F3]=k.useState(!1),hp=F=>{if(!j3)return;let V="";switch(F){case"move":V="/images/move.mp3";break;case"capture":V="/images/capture.mp3";break;case"check":V="/images/play.mp3";break;case"checkmate":V="/images/victory.mp3";break;case"victory":V="/images/victory.mp3";break;default:V="/images/move.mp3"}new Audio(V).play().catch(()=>{})},HV=()=>{if(WA){hp("victory");for(let F=0;F<50;F++)setTimeout(()=>{const V=document.createElement("div");V.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(V),setTimeout(()=>V.remove(),3e3)},F*100);setTimeout(()=>F3(!1),5e3)}},[GV,z3]=k.useState(!1),[WV,H3]=k.useState(!1),G3=()=>{z3(!1),H3(!1)},qA=()=>{G3(),zy()},VA=()=>{G3(),R(!1)},qV=()=>{new Audio("/images/start.mp3").play().catch(()=>{})},VV=s==="online";return m.jsxs("div",{className:`chess-game${n?" fullscreen":""}${De?" chess-dark-mode":""}`,children:[!n&&m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"Lawb Chess"}),m.jsxs("div",{className:"chess-controls",children:[e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:"×"}),m.jsx("button",{className:"dark-mode-toggle",onClick:Gt,title:De?"Switch to light mode":"Switch to dark mode","aria-label":De?"Switch to light mode":"Switch to dark mode",style:{marginLeft:12},children:De?"☀️":"🌙"})]})]}),m.jsxs("div",{className:"game-stable-layout",children:[m.jsxs("div",{className:"left-sidebar",children:[P&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"move-history-status",children:y}),m.jsxs("div",{className:"move-history",children:[m.jsx("div",{className:"move-history-title",children:"Move History"}),m.jsx("ul",{className:"move-history-list",children:v.slice().reverse().map((F,V)=>m.jsx("li",{children:F},v.length-1-V))})]})]}),!P&&m.jsxs("div",{className:"leaderboard",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Points"})]})}),m.jsx("tbody",{children:Array.isArray(_)&&_.slice(0,10).map((F,V)=>{if(typeof F=="object"&&F!==null&&"username"in F&&"wins"in F&&"losses"in F&&"draws"in F&&"points"in F){const Y=F;return m.jsxs("tr",{children:[m.jsx("td",{children:V+1}),m.jsx("td",{children:h1(Y.username)}),m.jsx("td",{children:Y.wins}),m.jsx("td",{children:Y.losses}),m.jsx("td",{children:Y.draws}),m.jsx("td",{children:Y.points})]},Y.username)}return null})})]})})]})]}),m.jsxs("div",{className:"center-area",children:[m.jsx("div",{className:"game-info",children:m.jsxs("div",{className:"game-info-bar",children:[m.jsxs("span",{className:c==="blue"?"current-blue":"current-red",children:["Current: ",c==="blue"?"Blue":"Red"]}),m.jsx("span",{className:"wager-label",children:"Wager:"})," ",m.jsx("span",{children:s==="ai"?"NA":`${$} ETH`}),P&&!ae&&m.jsxs("span",{className:"mode-play",children:["Mode: ",p==="easy"?"Easy":"Hard"]}),p==="easy"&&m.jsxs("span",{className:`stockfish-status ${Dt}`,children:["LawbBot: ",Dt==="loading"?"Loading...":Dt==="ready"?"Ready":"Failed"]}),p==="hard"&&m.jsxs("span",{className:`stockfish-status ${Dt}`,children:["LawbBot: ",Dt==="loading"?"Loading...":Dt==="ready"?"Ready":"Failed"]}),fs&&yi.length>0&&m.jsxs("div",{className:"opening-suggestions",children:[m.jsx("span",{className:"opening-label",children:"Opening:"}),yi.map((F,V)=>m.jsxs("span",{className:"opening-move",children:[F.san," (",Math.round(F.white+F.draws+F.black)," games)"]},V))]})]})}),P?m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${Sl})`},children:[Array.from({length:8},(F,V)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(Y,te)=>DV(V,te))},V)),I&&I.show&&m.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${I.row*12.5}%`,left:`${I.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:m.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),m.jsxs("div",{className:"game-controls",children:[m.jsx("button",{onClick:()=>Ge(!0),children:"Chess Piece Info"}),m.jsx("button",{onClick:qA,children:"New Game"}),m.jsx("button",{onClick:VA,children:"Back to Menu"})]}),m.jsxs("div",{className:"epic-controls",children:[m.jsxs("div",{className:"epic-toggle",children:[m.jsx("input",{type:"checkbox",id:"sound-toggle",checked:j3,onChange:F=>zV(F.target.checked)}),m.jsx("label",{htmlFor:"sound-toggle",children:"🎵 Sound Effects"})]}),m.jsxs("div",{className:"epic-toggle",children:[m.jsx("input",{type:"checkbox",id:"victory-toggle",checked:WA,onChange:F=>F3(F.target.checked)}),m.jsx("label",{htmlFor:"victory-toggle",children:"🎉 Victory Celebration"})]})]})]}):ae?LV():s==="online"?m.jsx(RV,{}):m.jsxs("div",{className:"game-mode-panel",children:[m.jsx("h3",{className:"game-mode-title",children:"Select Game Mode"}),m.jsx("button",{className:`mode-btn ${s==="ai"?"selected":""}`,onClick:()=>i("ai"),children:"VS THE HOUSE"}),m.jsxs("div",{className:"pvp-section",children:[m.jsx("button",{className:`mode-btn ${VV?"selected":""}`,onClick:()=>i("online"),children:"PvP"}),m.jsx("img",{src:"/images/chessboard4.png",alt:"Chessboard",style:{display:"block",margin:"16px auto 0 auto",width:"180px",maxWidth:"90%"}})]}),m.jsx("button",{className:"start-btn continue-btn",onClick:()=>oe(!0),children:"Continue"}),m.jsxs("div",{className:"how-to-section",children:[m.jsx("h4",{children:"How to Play"}),m.jsxs("div",{className:"how-to-content",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Chess Basics:"})," Move pieces to capture your opponent's king. Each piece moves differently - pawns forward, knights in L-shapes, bishops diagonally, rooks horizontally/vertically, queens in all directions, kings one square at a time."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Wallet Connection:"})," Connect your wallet to track your progress and compete on the leaderboard. Your wallet address serves as your username."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Points System:"})," Win points by defeating the AI. 1 win = 10pts. 1 draw = 1 point."]})]})]})]})]}),m.jsx("div",{className:"right-sidebar",children:P?m.jsxs("div",{className:"leaderboard",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Points"})]})}),m.jsx("tbody",{children:Array.isArray(_)&&_.slice(0,10).map((F,V)=>{if(typeof F=="object"&&F!==null&&"username"in F&&"wins"in F&&"losses"in F&&"draws"in F&&"points"in F){const Y=F;return m.jsxs("tr",{children:[m.jsx("td",{children:V+1}),m.jsx("td",{children:h1(Y.username)}),m.jsx("td",{children:Y.wins}),m.jsx("td",{children:Y.losses}),m.jsx("td",{children:Y.draws}),m.jsx("td",{children:Y.points})]},Y.username)}return null})})]})})]}):m.jsx("div",{className:"piece-gallery-panel",children:L3(!1)})})]}),we&&m.jsx("div",{className:"gallery-modal-overlay",onClick:()=>Ge(!1),children:m.jsxs("div",{className:"gallery-modal",onClick:F=>F.stopPropagation(),children:[m.jsx("button",{className:"close-modal-btn",onClick:()=>Ge(!1),children:"×"}),L3(!1)]})}),$V(),ve&&m.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),GV&&WA&&m.jsxs("div",{className:"victory-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)"},children:[m.jsx("div",{className:"balloons-container"}),m.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:"320px",height:"auto",zIndex:2}}),m.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24},children:[m.jsx("button",{onClick:qA,children:"New Game"}),m.jsx("button",{onClick:VA,children:"Back to Menu"})]})]}),WV&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"blood-overlay",children:[0,1,2,3,4,5].map(F=>m.jsx("div",{className:"blood-drip",style:{left:`${10+F*14}%`,animationDelay:`${.5+F*.3}s`,background:"linear-gradient(to bottom, #a80000 0%, #d10000 80%, #5a0000 100%)",width:`${14+Math.random()*10}px`,height:`${50+Math.random()*30}px`,opacity:.85+Math.random()*.1}},F))}),m.jsxs("div",{className:"defeat-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)",pointerEvents:"none"},children:[m.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:"320px",height:"auto",zIndex:2}}),m.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24,pointerEvents:"none"},children:[m.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:qA,children:"New Game"}),m.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:VA,children:"Back to Menu"})]})]})]})]})};function DB(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const $B=()=>{const[t,e]=k.useState("singleplayer");return m.jsxs("div",{className:"chess-page",children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h1",{children:"♔ Chess"}),m.jsxs("div",{className:"mode-toggle",children:[m.jsx("button",{className:`mode-btn ${t==="singleplayer"?"active":""}`,onClick:()=>e("singleplayer"),children:"Single Player"}),m.jsx("button",{className:`mode-btn ${t==="multiplayer"?"active":""}`,onClick:()=>e("multiplayer"),children:"Multiplayer"})]})]}),m.jsx("div",{className:"chess-content",children:t==="singleplayer"?m.jsx(y8e,{onClose:()=>{}}):m.jsx(RV,{})})]})},w8e=new zne,b8e=typeof window<"u"&&window.location.hostname.startsWith("chess."),v8e=()=>oke("(max-width: 768px)")?m.jsx(ike,{}):m.jsx(JPe,{});BI.createRoot(document.getElementById("root")).render(m.jsx(Bi.StrictMode,{children:m.jsx(nne,{config:mW.wagmiConfig,children:m.jsx(tre,{client:w8e,children:m.jsx(QPe,{children:m.jsx(qPe,{children:b8e?m.jsx(ux,{path:"/*",element:m.jsx($B,{})}):m.jsxs(m.Fragment,{children:[m.jsx(ux,{path:"/",element:m.jsx(v8e,{})}),m.jsx(ux,{path:"/chess",element:m.jsx($B,{})})]})})})})})}));export{LUe as $,Ie as A,Ze as B,Pe as C,Gr as D,uw as E,Hr as F,Ke as G,LN as H,L0 as I,Xo as J,bue as K,cn as L,Kt as M,gue as N,ge as O,Oi as P,ax as Q,et as R,na as S,Zs as T,xb as U,Ob as V,Cr as W,HUe as X,LP as Y,Xue as Z,vw as _,lx as a,by as a$,vr as a0,Qf as a1,Fn as a2,jUe as a3,qG as a4,MP as a5,ry as a6,Gn as a7,j8e as a8,Ku as a9,CF as aA,_F as aB,xd as aC,ow as aD,gl as aE,k8e as aF,ZY as aG,If as aH,P8e as aI,O8e as aJ,qx as aK,D8e as aL,EZ as aM,bj as aN,N8e as aO,CC as aP,Kw as aQ,Vx as aR,tC as aS,$8e as aT,xZ as aU,t5 as aV,Gte as aW,woe as aX,Co as aY,Mee as aZ,Lee as a_,cc as aa,pb as ab,st as ac,ir as ad,iu as ae,TF as af,NC as ag,Kx as ah,zO as ai,Ed as aj,I8e as ak,TC as al,HO as am,S8e as an,A8e as ao,Oj as ap,xC as aq,Wx as ar,LY as as,HY as at,B8e as au,BX as av,fe as aw,$O as ax,Ns as ay,MX as az,en as b,Sf as b0,bC as b1,Os as b2,Qn as b3,Dv as b4,ue as c,We as d,B as e,tn as f,tl as g,zUe as h,Rg as i,Di as j,Le as k,An as l,fNe as m,Zn as n,pNe as o,Te as p,Pn as q,FUe as r,zt as s,S7 as t,bn as u,Kue as v,Vi as w,BUe as x,ER as y,T7 as z};
